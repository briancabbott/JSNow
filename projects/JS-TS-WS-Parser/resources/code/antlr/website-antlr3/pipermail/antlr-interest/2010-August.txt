From gary at pi4tech.com  Sun Aug  1 12:57:36 2010
From: gary at pi4tech.com (Gary Brown)
Date: Sun, 1 Aug 2010 20:57:36 +0100
Subject: [antlr-interest] Problem parsing grammer for a label
Message-ID: <AANLkTinXTJ2yOO8R=x4df1Y7D2-PXOFWMr_onM8iBrFg@mail.gmail.com>

Hi

I have a stripped down grammer where I want to have a keyword, followed by
an ID, then ':' and then a block demarcated by '{' and '}'. The grammer is:

grammar ParserTest;

options {
    output=AST;
}

tokens {
    PLUS     = '+' ;
    MINUS    = '-' ;
    MULT    = '*' ;
    DIV    = '/' ;
    FULLSTOP = '.' ;
}

@header {
package test;
}

@lexer::header {
package test;
}

recurDef: 'recur'^ labelName ':'! blockDef ;
labelName: ID ;
blockDef: '{'! '}'! ;

ID : ('a'..'z'|'A'..'Z'|'_')('a'..'z'|'A'..'Z'|'0'..'9'|'_')* ;
URL : (ID|':'|'?'|'/')+ ;
NUMBER    : (DIGIT)+ ;
WHITESPACE : ( '\t' | ' ' | '\r' | '\n'| '\u000C' )+     { $channel =
HIDDEN; } ;
fragment DIGIT    : '0'..'9' ;


When I used the generated parser against the following:

recur Transaction: {
}


I get the following error:

line 1:6 mismatched input 'Transaction:' expecting ID

Shouldn't the lexical analyser recognize the 'Transaction' part as an ID,
and then the colon as a separate character. If the ':'! is removed from the
rule, and the content changes to

recur Transaction{
}

it correctly detects the ID as being distinct from the following '{'
character. So why is the ':' being treated as a special case?

Any guidance would be appreciated.

Regards
Gary

From jbb at acm.org  Sun Aug  1 13:19:09 2010
From: jbb at acm.org (John B. Brodie)
Date: Sun, 01 Aug 2010 16:19:09 -0400
Subject: [antlr-interest] Problem parsing grammer for a label
In-Reply-To: <AANLkTinXTJ2yOO8R=x4df1Y7D2-PXOFWMr_onM8iBrFg@mail.gmail.com>
References: <AANLkTinXTJ2yOO8R=x4df1Y7D2-PXOFWMr_onM8iBrFg@mail.gmail.com>
Message-ID: <1280693949.9618.3.camel@gecko.home.org>

Greetings!

On Sun, 2010-08-01 at 20:57 +0100, Gary Brown wrote:
> Hi
> 
> I have a stripped down grammer where I want to have a keyword, followed by
> an ID, then ':' and then a block demarcated by '{' and '}'. The grammer is:
> 
> grammar ParserTest;
> 
> options {
>     output=AST;
> }
> 
> tokens {
>     PLUS     = '+' ;
>     MINUS    = '-' ;
>     MULT    = '*' ;
>     DIV    = '/' ;
>     FULLSTOP = '.' ;
> }
> 
> @header {
> package test;
> }
> 
> @lexer::header {
> package test;
> }
> 
> recurDef: 'recur'^ labelName ':'! blockDef ;
> labelName: ID ;
> blockDef: '{'! '}'! ;
> 
> ID : ('a'..'z'|'A'..'Z'|'_')('a'..'z'|'A'..'Z'|'0'..'9'|'_')* ;
> URL : (ID|':'|'?'|'/')+ ;
> NUMBER    : (DIGIT)+ ;
> WHITESPACE : ( '\t' | ' ' | '\r' | '\n'| '\u000C' )+     { $channel =
> HIDDEN; } ;
> fragment DIGIT    : '0'..'9' ;
> 
> 
> When I used the generated parser against the following:
> 
> recur Transaction: {
> }
> 
> 
> I get the following error:
> 
> line 1:6 mismatched input 'Transaction:' expecting ID
> 
> Shouldn't the lexical analyser recognize the 'Transaction' part as an ID,
> and then the colon as a separate character. If the ':'! is removed from the
> rule, and the content changes to
> 
> recur Transaction{
> }
> 
> it correctly detects the ID as being distinct from the following '{'
> character. So why is the ':' being treated as a special case?

the input string `Transaction:` is a URL under your rules.

try `Transaction :`

it is probably just this stripped down example example, but since URL is
not used, just remove that rule...

> 
> Any guidance would be appreciated.
> 

Hope this helps...
   -jbb



From gary at pi4tech.com  Sun Aug  1 13:45:01 2010
From: gary at pi4tech.com (Gary Brown)
Date: Sun, 1 Aug 2010 21:45:01 +0100
Subject: [antlr-interest] Problem parsing grammer for a label
In-Reply-To: <1280693949.9618.3.camel@gecko.home.org>
References: <AANLkTinXTJ2yOO8R=x4df1Y7D2-PXOFWMr_onM8iBrFg@mail.gmail.com>
	<1280693949.9618.3.camel@gecko.home.org>
Message-ID: <AANLkTinfz4O1EVr2yinz-PqgKZE=yUQwsuW99oi2ghQd@mail.gmail.com>

Thanks a lot - that was the problem.

I knew it was going to be something simple :(

Regards
Gary


On Sun, Aug 1, 2010 at 9:19 PM, John B. Brodie <jbb at acm.org> wrote:

> Greetings!
>
> On Sun, 2010-08-01 at 20:57 +0100, Gary Brown wrote:
> > Hi
> >
> > I have a stripped down grammer where I want to have a keyword, followed
> by
> > an ID, then ':' and then a block demarcated by '{' and '}'. The grammer
> is:
> >
> > grammar ParserTest;
> >
> > options {
> >     output=AST;
> > }
> >
> > tokens {
> >     PLUS     = '+' ;
> >     MINUS    = '-' ;
> >     MULT    = '*' ;
> >     DIV    = '/' ;
> >     FULLSTOP = '.' ;
> > }
> >
> > @header {
> > package test;
> > }
> >
> > @lexer::header {
> > package test;
> > }
> >
> > recurDef: 'recur'^ labelName ':'! blockDef ;
> > labelName: ID ;
> > blockDef: '{'! '}'! ;
> >
> > ID : ('a'..'z'|'A'..'Z'|'_')('a'..'z'|'A'..'Z'|'0'..'9'|'_')* ;
> > URL : (ID|':'|'?'|'/')+ ;
> > NUMBER    : (DIGIT)+ ;
> > WHITESPACE : ( '\t' | ' ' | '\r' | '\n'| '\u000C' )+     { $channel =
> > HIDDEN; } ;
> > fragment DIGIT    : '0'..'9' ;
> >
> >
> > When I used the generated parser against the following:
> >
> > recur Transaction: {
> > }
> >
> >
> > I get the following error:
> >
> > line 1:6 mismatched input 'Transaction:' expecting ID
> >
> > Shouldn't the lexical analyser recognize the 'Transaction' part as an ID,
> > and then the colon as a separate character. If the ':'! is removed from
> the
> > rule, and the content changes to
> >
> > recur Transaction{
> > }
> >
> > it correctly detects the ID as being distinct from the following '{'
> > character. So why is the ':' being treated as a special case?
>
> the input string `Transaction:` is a URL under your rules.
>
> try `Transaction :`
>
> it is probably just this stripped down example example, but since URL is
> not used, just remove that rule...
>
> >
> > Any guidance would be appreciated.
> >
>
> Hope this helps...
>    -jbb
>
>
>

From temporaryemail at comcast.net  Mon Aug  2 11:28:13 2010
From: temporaryemail at comcast.net (Bob)
Date: Mon, 2 Aug 2010 11:28:13 -0700
Subject: [antlr-interest] Can I drive "CMinusWalker.g" from an external AST?
Message-ID: <000301cb3270$783a6550$68af2ff0$@net>

Regarding "Building a tree grammar for the C-Language" chapter:

 

My AST for "C-" is already built by non-Antlr means, however, it does match

the "CMinus" grammar of chapter 8.2. To repeat, the AST image in 8.3, p200

exists and was constructed outside of Antlr.

 

I'd like to drive "CMinusWalker.g" by an in-order traversal of my AST (to

serialize).

 

Q: Can I do this, and what is this interface going to look like? 

   Assume my AST nodes have token id values from "CMinus.tokens".

 

   That is, how would this setup change?

 

   ANTLRInputStream            input  = new ANTLRInputStream(System.in);

   CMinusLexer                         lexer  = new CMinusLexer(input);

   CommonTokenStream      tokens = new CommonTokenStream(lexer);

   CMinusParser                       parser = new CMinusParser(tokens);

   CMinusParser.program_return r      = parser.program();

   CommonTree                  t      = (CommonTree)r.getTree();

 

   CommonTreeNodeStream nodes  = new CommonTreeNodeStream(t);

   nodes.setTokenStream(tokens);

   CMinusWalker         walker = new CMinusWalker(nodes);

   walker.program();  

 

 


From gerald at certiv.net  Mon Aug  2 16:10:32 2010
From: gerald at certiv.net (Gerald Rosenberg)
Date: Mon, 02 Aug 2010 16:10:32 -0700
Subject: [antlr-interest] Can I drive "CMinusWalker.g" from an external
 AST?
In-Reply-To: <000301cb3270$783a6550$68af2ff0$@net>
References: <000301cb3270$783a6550$68af2ff0$@net>
Message-ID: <4C575068.9070600@certiv.net>

  ------ Original Message (Monday, August 02, 2010 11:28:13 
AM) From: Bob ------
Subject: [antlr-interest] Can I drive "CMinusWalker.g" from an external AST?
> Regarding "Building a tree grammar for the C-Language" chapter:
>
> My AST for "C-" is already built by non-Antlr means, however, it does match
> the "CMinus" grammar of chapter 8.2. To repeat, the AST image in 8.3, p200
> exists and was constructed outside of Antlr.
>
> I'd like to drive "CMinusWalker.g" by an in-order traversal of my AST (to
> serialize).
>
> Q: Can I do this, and what is this interface going to look like?
>     Assume my AST nodes have token id values from "CMinus.tokens".
Only if your AST is indistinguishable from an Antlr generated AST.  
Regardless of the picture, real Antlr ASTs have embedded DOWN and UP 
tokens delimiting subtrees.  Also, your individual tree node fields and 
methods would have to match up with Antlr CommonTree nodes - you will 
have to cast to CommonTree.  If you have this in place, then sure.
>     That is, how would this setup change?
Just substitute in your generated AST for the Antlr generated AST.

Unless there is some essential reason to use an Antlr walker, may be 
better to continue on with a non-Antlr solution.

From Nieves.Salor.Moral at esa.int  Tue Aug  3 00:37:04 2010
From: Nieves.Salor.Moral at esa.int (Nieves.Salor.Moral at esa.int)
Date: Tue, 3 Aug 2010 09:37:04 +0200
Subject: [antlr-interest] missing tokens and strange behaviour regarding
	some chars
Message-ID: <OFAFB9C097.A8486DB0-ONC1257774.0028FD08-C1257774.0029D87E@esa.int>

Hello to everyone!

I am new with ANTLR but not with compilers. Before I explain the problem 
I'll  try to explain a little bit the situation background.

I am trying to design for a custom language, first a syntax highlighter 
and second a module that can store the information in a DB (so in essence 
would be creating a compiler with its output as SQL queries).
My input language is defined in EBNF, thus it has left-recursion and 
ambiguity. In order to solve it, I have changed it a little to avoid those 
problems and mostly I have managed it without using predicates or 
backtracking. 

Working with ANTLR Works, I am debugging the grammar with different 
examples (just the parser), before adding the highlighting code in the 
StringTemplate. but I get these strange errors, mostly regarding 
NoViableAltException.

One problem for example is trying to define negative expressions with the 
simple_factor rule.
So when I debug expressions like 500 or +500 in the simple_factor, I don't 
get an error. But If I try -500, I get the NoViableAltException. Also if I 
change - for another symbol like @, it also work when I try @500. I have 
traced all the possibilities in the different possibilities in 
simple_factor, but in no one the first symbol can be a negative symbol. 
And I am lost as to why this can happen. I add the whole grammar because 
it is quite big to paste it.

Another problem that appears is that sometimes tokens are missed when 
reading, so for example if I have an input beginning with 'initiate and 
confirm',  ANTLR reads 'conf' and loses the first characters. With the 
same grammar that I have posted. One example of this problem goes with the 
input 'initiate and confirm sys_stop of SCOE_1553 of LLCS of EGSE of 
System of ODB' with the rule initiate_and_confirm_step_statement.

Thanks in advance for any input

Nieves Salor Moral

addition_operator:  ADDITION_OPERATOR
        ;

ADDITION_OPERATOR
        :       '+'|'-'
        ;
 
 UNSIGNED_INTEGER
        :       DIGIT+
        ;

simple_factor
        :       addition_operator simple_factor
        |       NEGATION_BOOLEAN_OPERATOR simple_factor
        |       constant
        |       '('expression ')'
        |       function
        |       object_property_request
        |       OBJECT_TYPE partial_path
        |       'ask user' '(' expression ('default' expression)? ')' 
('expect' predefined_type)?
        ; 

constant:       BOOLEAN_CONSTANT
        |       UNSIGNED_INTEGER ( numeric_constant| 
RELATIVE_TIME_CONSTANT)
        |       RELATIVE_TIME_CONSTANT
        |       string_constant
        |       HEXADECIMAL_CONSTANT
        ;
real_constant
        :       ('.' UNSIGNED_INTEGER)? ('e' addition_operator? 
UNSIGNED_INTEGER)? 
        ;

numeric_constant
        :        real_constant engineering_units?
        ;


-------------- next part --------------
A non-text attachment was scrubbed...
Name: example.g
Type: application/octet-stream
Size: 11108 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20100803/50dfe6a4/attachment.obj 

From jeanchristophe.bach at inria.fr  Tue Aug  3 00:40:11 2010
From: jeanchristophe.bach at inria.fr (Jean-Christophe Bach)
Date: Tue, 3 Aug 2010 09:40:11 +0200
Subject: [antlr-interest] filter option in antlr3
In-Reply-To: <20100728154023.GD4455@adel.loria.fr>
References: <20100728154023.GD4455@adel.loria.fr>
Message-ID: <20100803074011.GA3833@adel.loria.fr>

Hi all,

My question was maybe unclear, or the answer obvious. But I admit that the use
of filter option is not very clear for me. I will try to rephrase my last email.

> Hello antlr users,
> 
> I am rewriting our parser and I have a question :
> 
> I have a HostParser and I call other subparsers when specific constructions are
> detected. Then, I build a tree like this :
> Program
>   BlockList
>     Construct1 ...  // sublanguage1 block
>     Construct2 ...  // sublanguage2 block
>     Construct1 ...
>     Construct42 ... // sublanguage1 block
>     ...
>     HostBlock
>     ...
> 
> A HostBlock is a block of host code (for instance Java). I do not want neither
> to parse nor to modify it, I only want to keep it without any other treatment :
> (BlockList
>   (...)
>   (HostBlock <big string representing a host code block> )
>   (...)
> )
> 
> In our previous antlr2 parser, we used the filter option in a combined grammar :
> 
> Lexer part :
> 
> options{
>  filter=TARGET;
>  }
> ...
> protected
> TARGET
>   :
>     ( . )
>     {target.append($getText);}
>   ;
> 
> where target is a StringBuffer.
> 
> Parser part :
>  private String getCode() {
>    String result = lexer.target.toString();
>    lexer.clearTarget();
>    return result;
>  }
> 
> Then, we only called getCode() when building a HostBlock node.
> 
> Is it still possible with antlr3 ? I have noted a change, the option has to be
> filter=true;
> Since I am using a combined grammar (one file containing my parser and my
> lexer), I am not sure how to use this option. How can I precise that it is a
> lexer option ? (in global options, it does not work, because it applies only on
> lexer). Do I have to add this option in the lexer rule ? (and how ?) :
> 
> fragment
> TARGET?: ( . ) {<my Java code>}
> 
> I tried to add the filter option in the rule, but I obtain errors, as if the
> option did not exist.

I think my problem is very classic and standard methods must exist but it is not
clear for me. I only want to build a Tree composed of blocks where host code
blocks are not parsed but kept without any modification. Specific language
blocks are parsed and specific tree are built (my parser seems to work fine).
After compilation, these specific blocks will obviously translated into the same
language as the host code.
Is there anyone with an experience with this type of problem ? How do you handle
fuzzy parsing ? Is there any way to use the filter option in a combined grammar
or have I to split my file ?
If anyone has an idea, do not hesitate to give me a helping hand :)

Thanks in advance,
 
JC

From jeanchristophe.bach at inria.fr  Tue Aug  3 05:49:59 2010
From: jeanchristophe.bach at inria.fr (Jean-Christophe Bach)
Date: Tue, 3 Aug 2010 14:49:59 +0200
Subject: [antlr-interest] Parameters in fragment lexer rules
Message-ID: <20100803124959.GB3833@adel.loria.fr>

Hi list,

I am rewriting our old parser and I use antlr3 for that.
Since I have few problem to handle the '{' and to call the appropriate parser
depending on the context, I am wondering if fragment lexer rule + a parameter
could help me.
There are many situations, but I write here 3 cases :
... '->' '{' ... : I need to call a specific parser (#1)
... ':'  '{' ... : I need to call ainother specific parser (#2)
...      '{' ... : I need to do a simple Java treatment

I read few articles and the antlr book, and I saw that it was possible to do
give parameters to a fragment lexer rule. I am wondering if something like that
is OK :

ARROWLBRACE : '->' LBRACE[2] ;
...
<other rules with LBRACE[n]>
...
fragment
LBRACE[int lbtype] : '{'
  {
  switch(lbtype) {
  case 1:
    <Java code1>
  case 2:
    <Java code2>
  case 3:
    <Java code3>
    ...
  }
  }
  ;

But am I also allowed to write a parser rule containing a LBRACE[n] or is it
totally illegal ?
e.g. : 

myRule :
 ... LBRACE[1] ... -> ...
 |... ARROWLBRACE ... -> ... 
 ;

When attempting to do that, I have errors :
"token reference LBRACE may not have parameters"

Is there any good way to solve this type of problem ?

Thanks in advance,

JC

From cummings at kjchome.homeip.net  Tue Aug  3 08:15:49 2010
From: cummings at kjchome.homeip.net (Kevin J. Cummings)
Date: Tue, 03 Aug 2010 11:15:49 -0400
Subject: [antlr-interest] missing tokens and strange behaviour regarding
 some chars
In-Reply-To: <OFAFB9C097.A8486DB0-ONC1257774.0028FD08-C1257774.0029D87E@esa.int>
References: <OFAFB9C097.A8486DB0-ONC1257774.0028FD08-C1257774.0029D87E@esa.int>
Message-ID: <4C5832A5.1070700@kjchome.homeip.net>

On 08/03/2010 03:37 AM, Nieves.Salor.Moral at esa.int wrote:

> addition_operator:  ADDITION_OPERATOR
>         ;
> 
> ADDITION_OPERATOR
>         :       '+'|'-'
>         ;

Why the 2 rules?  Why not just:

ADDITION_OPERATOR
	  :	'+' | '-'
	  ;

>  UNSIGNED_INTEGER
>         :       DIGIT+
>         ;
> 
> simple_factor
>         :       addition_operator simple_factor

          :       ADDITION_OPERATOR simple_factor

>         |       NEGATION_BOOLEAN_OPERATOR simple_factor
>         |       constant
>         |       '('expression ')'
>         |       function
>         |       object_property_request
>         |       OBJECT_TYPE partial_path
>         |       'ask user' '(' expression ('default' expression)? ')' 
> ('expect' predefined_type)?
>         ; 
> 
> constant:       BOOLEAN_CONSTANT
>         |       UNSIGNED_INTEGER ( numeric_constant| 
> RELATIVE_TIME_CONSTANT)
>         |       RELATIVE_TIME_CONSTANT
>         |       string_constant
>         |       HEXADECIMAL_CONSTANT
>         ;
> real_constant
>         :       ('.' UNSIGNED_INTEGER)? ('e' addition_operator? 
> UNSIGNED_INTEGER)? 
>         ;

Unless it is legal for your real constants to contain whitespace:

REAL_CONSTANT
          :       ('.' UNSIGNED_INTEGER)? ('e' ADDITION_OPERATOR?
UNSIGNED_INTEGER)?
          ;

In fact, your real_constant could in fact be empty!  This *must* be
creating headaches for you, yes?

> numeric_constant
>         :        real_constant engineering_units?
>         ;

numeric_constant
          :        REAL_CONSTANT engineering_units?
          ;

I don't see a definition of engineering_units.  Could this too be
changed to a LEXER rule and somehow change your:

	UNSIGNED_INTEGER ( numeric_constant | RELATIVE_TIME_CONSTANT )

into another LEXER rule (this would eliminate the possibility of you
being able to lex the string "123 . 567" as a single real_constant....)

Do these changes help you?

-- 
Kevin J. Cummings
kjchome at rcn.com
cummings at kjchome.homeip.net
cummings at kjc386.framingham.ma.us
Registered Linux User #1232 (http://counter.li.org)

From jimi at temporal-wave.com  Tue Aug  3 09:18:50 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 3 Aug 2010 09:18:50 -0700
Subject: [antlr-interest] missing tokens and strange behaviour
	regarding	some chars
In-Reply-To: <OFAFB9C097.A8486DB0-ONC1257774.0028FD08-C1257774.0029D87E@esa.int>
References: <OFAFB9C097.A8486DB0-ONC1257774.0028FD08-C1257774.0029D87E@esa.int>
Message-ID: <01e601cb3327$8f0cc130$ad264390$@temporal-wave.com>

Your expression is still defined in an LALR manner hence it will get
confused, you need to define it as a cascading set of rules with higher
precedence towards the bottom of the nest. That probably does not make a lot
of sense to you as words, so the best thing to do is to read through the
grammar for say Java or  C and look at the expression rules. Then basically
copy them and adapt themto your own operators.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Nieves.Salor.Moral at esa.int
> Sent: Tuesday, August 03, 2010 12:37 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] missing tokens and strange behaviour regarding
> some chars
> 
> Hello to everyone!
> 
> I am new with ANTLR but not with compilers. Before I explain the problem
I'll
> try to explain a little bit the situation background.
> 
> I am trying to design for a custom language, first a syntax highlighter
and
> second a module that can store the information in a DB (so in essence
would
> be creating a compiler with its output as SQL queries).
> My input language is defined in EBNF, thus it has left-recursion and
> ambiguity. In order to solve it, I have changed it a little to avoid those
> problems and mostly I have managed it without using predicates or
> backtracking.
> 
> Working with ANTLR Works, I am debugging the grammar with different
> examples (just the parser), before adding the highlighting code in the
> StringTemplate. but I get these strange errors, mostly regarding
> NoViableAltException.
> 
> One problem for example is trying to define negative expressions with the
> simple_factor rule.
> So when I debug expressions like 500 or +500 in the simple_factor, I don't
get
> an error. But If I try -500, I get the NoViableAltException. Also if I
change - for
> another symbol like @, it also work when I try @500. I have traced all the
> possibilities in the different possibilities in simple_factor, but in no
one the
> first symbol can be a negative symbol.
> And I am lost as to why this can happen. I add the whole grammar because
it
> is quite big to paste it.
> 
> Another problem that appears is that sometimes tokens are missed when
> reading, so for example if I have an input beginning with 'initiate and
> confirm',  ANTLR reads 'conf' and loses the first characters. With the
same
> grammar that I have posted. One example of this problem goes with the
> input 'initiate and confirm sys_stop of SCOE_1553 of LLCS of EGSE of
System
> of ODB' with the rule initiate_and_confirm_step_statement.
> 
> Thanks in advance for any input
> 
> Nieves Salor Moral
> 
> addition_operator:  ADDITION_OPERATOR
>         ;
> 
> ADDITION_OPERATOR
>         :       '+'|'-'
>         ;
> 
>  UNSIGNED_INTEGER
>         :       DIGIT+
>         ;
> 
> simple_factor
>         :       addition_operator simple_factor
>         |       NEGATION_BOOLEAN_OPERATOR simple_factor
>         |       constant
>         |       '('expression ')'
>         |       function
>         |       object_property_request
>         |       OBJECT_TYPE partial_path
>         |       'ask user' '(' expression ('default' expression)? ')'
> ('expect' predefined_type)?
>         ;
> 
> constant:       BOOLEAN_CONSTANT
>         |       UNSIGNED_INTEGER ( numeric_constant|
> RELATIVE_TIME_CONSTANT)
>         |       RELATIVE_TIME_CONSTANT
>         |       string_constant
>         |       HEXADECIMAL_CONSTANT
>         ;
> real_constant
>         :       ('.' UNSIGNED_INTEGER)? ('e' addition_operator?
> UNSIGNED_INTEGER)?
>         ;
> 
> numeric_constant
>         :        real_constant engineering_units?
>         ;
> 



From jimi at temporal-wave.com  Tue Aug  3 09:29:47 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 3 Aug 2010 09:29:47 -0700
Subject: [antlr-interest] Parameters in fragment lexer rules
In-Reply-To: <20100803124959.GB3833@adel.loria.fr>
References: <20100803124959.GB3833@adel.loria.fr>
Message-ID: <01ed01cb3329$1663b520$432b1f60$@temporal-wave.com>

You need to make the distinction in the lexer via island grammars. Your case
looks like it will be easy enough but you might need to formulate your lexer
rules to avoid ambiguous cases. Look at the example island grammar in the
downloadable example set.

For your lexer you will need something like this:

ARROWLBRACE
   : '->'
      (
             (WS* '{')=> WS* '{' SPECIFICPARSER { $type = SPECIFICBLOCK; }
          |
      )
   ;

COLON
  : ':'
       (
             (WS* '{')=> WS* '{' DIFFERENTPARSER { $type = DIFFERENTBLOCK; }
          |
      )
  ;

LBRACE 
  : '{' // Either the parser that calls this lexer knows what to do with
Java, or you call a java parser here
  ;

Jim
  
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Jean-Christophe Bach
> Sent: Tuesday, August 03, 2010 5:50 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Parameters in fragment lexer rules
> 
> Hi list,
> 
> I am rewriting our old parser and I use antlr3 for that.
> Since I have few problem to handle the '{' and to call the appropriate
parser
> depending on the context, I am wondering if fragment lexer rule + a
> parameter could help me.
> There are many situations, but I write here 3 cases :
> ... '->' '{' ... : I need to call a specific parser (#1) ... ':'  '{' ...
: I need to call
> ainother specific parser (#2)
> ...      '{' ... : I need to do a simple Java treatment
> 
> I read few articles and the antlr book, and I saw that it was possible to
do give
> parameters to a fragment lexer rule. I am wondering if something like that
is
> OK :
> 
> ARROWLBRACE : '->' LBRACE[2] ;
> ...
> <other rules with LBRACE[n]>
> ...
> fragment
> LBRACE[int lbtype] : '{'
>   {
>   switch(lbtype) {
>   case 1:
>     <Java code1>
>   case 2:
>     <Java code2>
>   case 3:
>     <Java code3>
>     ...
>   }
>   }
>   ;
> 
> But am I also allowed to write a parser rule containing a LBRACE[n] or is
it
> totally illegal ?
> e.g. :
> 
> myRule :
>  ... LBRACE[1] ... -> ...
>  |... ARROWLBRACE ... -> ...
>  ;
> 
> When attempting to do that, I have errors :
> "token reference LBRACE may not have parameters"
> 
> Is there any good way to solve this type of problem ?
> 
> Thanks in advance,
> 
> JC
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From patrick.petermair at openforce.com  Tue Aug  3 10:22:51 2010
From: patrick.petermair at openforce.com (Patrick Petermair)
Date: Tue, 03 Aug 2010 19:22:51 +0200
Subject: [antlr-interest] Getting feedback from grammar errors
Message-ID: <4C58506B.2050506@openforce.com>

Hey list!

We are in the process of developing a timetracking application. One part 
of it is some kind of "powerstring" that enables users to execute 
complex commands. The powerstring has to follow certain rules / grammar 
definitions.

This is where antlr comes in. We were able to write a grammar that 
follows all those rules. Unfortunately we just get an exception with no 
meaningful description when something went wrong (= the provided string 
didn't match the grammar definition).

Is there a way to get some more feedback from antlr? If so, what would 
be the way to do it?

We want to provide the user with more information than just "Syntax 
error" or "MismatchedTokenException(-1!=6)" which isn't very helpful. If 
we could get at least the position in the String where the error occured...

Cheers,
Patrick

From jimi at temporal-wave.com  Tue Aug  3 10:25:11 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 3 Aug 2010 10:25:11 -0700
Subject: [antlr-interest] Getting feedback from grammar errors
In-Reply-To: <4C58506B.2050506@openforce.com>
References: <4C58506B.2050506@openforce.com>
Message-ID: <023801cb3330$d3b06270$7b112750$@temporal-wave.com>

Read the wiki articles on displayRecognitionError() and look at the source
code for that method. You basically override it with your own method that
can do anything it likes with the information. The default message is just
for grammar developers.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Patrick Petermair
> Sent: Tuesday, August 03, 2010 10:23 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Getting feedback from grammar errors
> 
> Hey list!
> 
> We are in the process of developing a timetracking application. One part
of it
> is some kind of "powerstring" that enables users to execute complex
> commands. The powerstring has to follow certain rules / grammar
> definitions.
> 
> This is where antlr comes in. We were able to write a grammar that follows
all
> those rules. Unfortunately we just get an exception with no meaningful
> description when something went wrong (= the provided string didn't match
> the grammar definition).
> 
> Is there a way to get some more feedback from antlr? If so, what would be
> the way to do it?
> 
> We want to provide the user with more information than just "Syntax error"
> or "MismatchedTokenException(-1!=6)" which isn't very helpful. If we could
> get at least the position in the String where the error occured...
> 
> Cheers,
> Patrick
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From j at junkwallah.org  Tue Aug  3 19:48:12 2010
From: j at junkwallah.org (Junkman)
Date: Tue, 03 Aug 2010 19:48:12 -0700
Subject: [antlr-interest] Tree parser eats up DOWN node when navigating
	optional child node
In-Reply-To: <023801cb3330$d3b06270$7b112750$@temporal-wave.com>
References: <4C58506B.2050506@openforce.com>
	<023801cb3330$d3b06270$7b112750$@temporal-wave.com>
Message-ID: <4C58D4EC.40000@junkwallah.org>

Greetings,

I am seeing an interesting behavior in generated tree parsers.

This is an example grammar fragment:

--------------------------------------------
tree grammar TTreeParser;

...

parent: ^(parent_a B?) ;
parent_a: ^(PARENT A?) ;
--------------------------------------------

The intent is for parent_a to match a PARENT node optionally with the
child node A, while parent is to match a PARENT node that can also have
child node B as well as child node A.

But parent rule throws up recognition exception when fed this tree:

^(PARENT B)

The problem is parent_a consumes the DOWN node before B instead of
skipping it.

The following tree also causes the exception for parent:

^(PARENT A B)

In this case, parent_a, after consuming A, expects <UP> when there is
still another sibling node - B.

It looks like a discrepancy in the rewrite rule interpretation - when
used to produce tree, the rules work as expected/intended.

I am looking for insight/suggestion to get the tree parser work as
intended.  Attached are example grammars and generated code plus test
driver to demonstrate the issue I'm having.

Thanks for any help,

Jay


-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: TTreeParser.g
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20100803/f1977bd2/attachment.pl 
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: T.g
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20100803/f1977bd2/attachment-0001.pl 

From jeanchristophe.bach at inria.fr  Wed Aug  4 00:33:35 2010
From: jeanchristophe.bach at inria.fr (Jean-Christophe Bach)
Date: Wed, 4 Aug 2010 09:33:35 +0200
Subject: [antlr-interest] Parameters in fragment lexer rules
In-Reply-To: <01ed01cb3329$1663b520$432b1f60$@temporal-wave.com>
References: <20100803124959.GB3833@adel.loria.fr>
	<01ed01cb3329$1663b520$432b1f60$@temporal-wave.com>
Message-ID: <20100804073335.GA2950@adel.loria.fr>

Hi,

> You need to make the distinction in the lexer via island grammars. Your case
> looks like it will be easy enough but you might need to formulate your lexer
> rules to avoid ambiguous cases. Look at the example island grammar in the
> downloadable example set.
> For your lexer you will need something like this:
> 
> ARROWLBRACE
>    : '->'
>       (
>              (WS* '{')=> WS* '{' SPECIFICPARSER { $type = SPECIFICBLOCK; }
>           |
>       )
>    ;
> 
> COLON
>   : ':'
>        (
>              (WS* '{')=> WS* '{' DIFFERENTPARSER { $type = DIFFERENTBLOCK; }
>           |
>       )
>   ;
> 
> LBRACE 
>   : '{' // Either the parser that calls this lexer knows what to do with
> Java, or you call a java parser here
>   ;

Thank you for your answer. I have already used this example as you
advised, and it is OK.

Now, how would you handle the last case which contains an ambiguity ? : there
are two different situations when a simple '{' is detected. Sometimes I have to
call another parser, sometimes I have to use a simple Java block code.
When I encounter a such situation, no specific character is detected just before
the left brace (contrary to the colon and arrow cases). Passing a parameter to
LBRACE (an int for instance) would be great, but it does not work very well when
used in a parser rule :

anAmbiguousParserRule :
  ... <no specific character> LBRACE[3]... -> ...
  | ... <no specific character> LBRACE[4] ... -> ...
  ;

I obtain this error : "token reference LBRACE may not have parameters"

Regards,

JC


> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > bounces at antlr.org] On Behalf Of Jean-Christophe Bach
> > Sent: Tuesday, August 03, 2010 5:50 AM
> > To: antlr-interest at antlr.org
> > Subject: [antlr-interest] Parameters in fragment lexer rules
> > 
> > Hi list,
> > 
> > I am rewriting our old parser and I use antlr3 for that.
> > Since I have few problem to handle the '{' and to call the appropriate
> parser
> > depending on the context, I am wondering if fragment lexer rule + a
> > parameter could help me.
> > There are many situations, but I write here 3 cases :
> > ... '->' '{' ... : I need to call a specific parser (#1) ... ':'  '{' ...
> : I need to call
> > ainother specific parser (#2)
> > ...      '{' ... : I need to do a simple Java treatment
> > 
> > I read few articles and the antlr book, and I saw that it was possible to
> do give
> > parameters to a fragment lexer rule. I am wondering if something like that
> is
> > OK :
> > 
> > ARROWLBRACE : '->' LBRACE[2] ;
> > ...
> > <other rules with LBRACE[n]>
> > ...
> > fragment
> > LBRACE[int lbtype] : '{'
> >   {
> >   switch(lbtype) {
> >   case 1:
> >     <Java code1>
> >   case 2:
> >     <Java code2>
> >   case 3:
> >     <Java code3>
> >     ...
> >   }
> >   }
> >   ;
> > 
> > But am I also allowed to write a parser rule containing a LBRACE[n] or is
> it
> > totally illegal ?
> > e.g. :
> > 
> > myRule :
> >  ... LBRACE[1] ... -> ...
> >  |... ARROWLBRACE ... -> ...
> >  ;
> > 
> > When attempting to do that, I have errors :
> > "token reference LBRACE may not have parameters"
> > 
> > Is there any good way to solve this type of problem ?
> > 
> > Thanks in advance,
> > 
> > JC
> > 
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> > email-address
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From j at junkwallah.org  Wed Aug  4 09:53:09 2010
From: j at junkwallah.org (Junkman)
Date: Wed, 04 Aug 2010 09:53:09 -0700
Subject: [antlr-interest] Tree parser eats up DOWN node when navigating
 optional child node
In-Reply-To: <4C58D4EC.40000@junkwallah.org>
References: <4C58506B.2050506@openforce.com>
	<023801cb3330$d3b06270$7b112750$@temporal-wave.com>
	<4C58D4EC.40000@junkwallah.org>
Message-ID: <4C599AF5.805@junkwallah.org>

I am re-sending with the demo files in a zip archive because the java
file attachments may have been stripped (security filter?) from the
previous submission.

Junkman wrote:
> Greetings,
> 
> I am seeing an interesting behavior in generated tree parsers.
> 
> This is an example grammar fragment:
> 
> --------------------------------------------
> tree grammar TTreeParser;
> 
> ...
> 
> parent: ^(parent_a B?) ;
> parent_a: ^(PARENT A?) ;
> --------------------------------------------
> 
> The intent is for parent_a to match a PARENT node optionally with the
> child node A, while parent is to match a PARENT node that can also have
> child node B as well as child node A.
> 
> But parent rule throws up recognition exception when fed this tree:
> 
> ^(PARENT B)
> 
> The problem is parent_a consumes the DOWN node before B instead of
> skipping it.
> 
> The following tree also causes the exception for parent:
> 
> ^(PARENT A B)
> 
> In this case, parent_a, after consuming A, expects <UP> when there is
> still another sibling node - B.
> 
> It looks like a discrepancy in the rewrite rule interpretation - when
> used to produce tree, the rules work as expected/intended.
> 
> I am looking for insight/suggestion to get the tree parser work as
> intended.  Attached are example grammars and generated code plus test
> driver to demonstrate the issue I'm having.
> 
> Thanks for any help,
> 
> Jay
> 
> 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: TreeParserDemo.zip
Type: application/x-zip-compressed
Size: 4789 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20100804/5adbb732/attachment.bin 

From jimi at temporal-wave.com  Wed Aug  4 10:38:17 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 4 Aug 2010 10:38:17 -0700
Subject: [antlr-interest] Tree parser eats up DOWN node when
	navigating	optional child node
In-Reply-To: <4C58D4EC.40000@junkwallah.org>
References: <4C58506B.2050506@openforce.com>	<023801cb3330$d3b06270$7b112750$@temporal-wave.com>
	<4C58D4EC.40000@junkwallah.org>
Message-ID: <031601cb33fb$d2e9d9e0$78bd8da0$@temporal-wave.com>

Your grammar is doing what you are telling it to do. If the node PARENT can
have zero children, an A node, or an A node with a B node, then you need to
specify that:

n: PARENT  // No children at all
  | ^(PARENT
             A 
             B?
     )
  ;

Jim
                 

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Junkman
> Sent: Tuesday, August 03, 2010 7:48 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Tree parser eats up DOWN node when navigating
> optional child node
> 
> Greetings,
> 
> I am seeing an interesting behavior in generated tree parsers.
> 
> This is an example grammar fragment:
> 
> --------------------------------------------
> tree grammar TTreeParser;
> 
> ...
> 
> parent: ^(parent_a B?) ;
> parent_a: ^(PARENT A?) ;
> --------------------------------------------
> 
> The intent is for parent_a to match a PARENT node optionally with the
child
> node A, while parent is to match a PARENT node that can also have child
> node B as well as child node A.
> 
> But parent rule throws up recognition exception when fed this tree:
> 
> ^(PARENT B)
> 
> The problem is parent_a consumes the DOWN node before B instead of
> skipping it.
> 
> The following tree also causes the exception for parent:
> 
> ^(PARENT A B)
> 
> In this case, parent_a, after consuming A, expects <UP> when there is
still
> another sibling node - B.
> 
> It looks like a discrepancy in the rewrite rule interpretation - when used
to
> produce tree, the rules work as expected/intended.
> 
> I am looking for insight/suggestion to get the tree parser work as
intended.
> Attached are example grammars and generated code plus test driver to
> demonstrate the issue I'm having.
> 
> Thanks for any help,
> 
> Jay
> 



From jimi at temporal-wave.com  Wed Aug  4 10:43:31 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 4 Aug 2010 10:43:31 -0700
Subject: [antlr-interest] Parameters in fragment lexer rules
In-Reply-To: <20100804073335.GA2950@adel.loria.fr>
References: <20100803124959.GB3833@adel.loria.fr>	<01ed01cb3329$1663b520$432b1f60$@temporal-wave.com>
	<20100804073335.GA2950@adel.loria.fr>
Message-ID: <031801cb33fc$8d91aa20$a8b4fe60$@temporal-wave.com>

Your language is broken basically :-(

The lexer runs first and creates all the tokens THEN the parser runs against
the tokens - you cannot tell the lexer what to do from the parser. Now,
there is an unbuffered token stream by default in the latest source code,
but you still cannot pass parameters to the lexer rules from the parser, you
would have to set some flag in the lexer instance to tell it what to do.
When you mention the LEXER rule in your parser, you are not calling the
lexer rule, you are indicating that you expect a token of that type to occur
at that point in the parser. You should look at the generated source code to
see this.

However, if you can work out that you need to parse a java expression when
you are parsing, then you should be able to work out the same when you are
lexing. At some point, you must be able to distinguish the cases? However,
it would be better to change the syntax (if you can) to use something like
{{ }} if you have a Java expression.

Jim 


> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Jean-Christophe Bach
> Sent: Wednesday, August 04, 2010 12:34 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Parameters in fragment lexer rules
> 
> Hi,
> 
> > You need to make the distinction in the lexer via island grammars.
> > Your case looks like it will be easy enough but you might need to
> > formulate your lexer rules to avoid ambiguous cases. Look at the
> > example island grammar in the downloadable example set.
> > For your lexer you will need something like this:
> >
> > ARROWLBRACE
> >    : '->'
> >       (
> >              (WS* '{')=> WS* '{' SPECIFICPARSER { $type = SPECIFICBLOCK;
}
> >           |
> >       )
> >    ;
> >
> > COLON
> >   : ':'
> >        (
> >              (WS* '{')=> WS* '{' DIFFERENTPARSER { $type =
DIFFERENTBLOCK; }
> >           |
> >       )
> >   ;
> >
> > LBRACE
> >   : '{' // Either the parser that calls this lexer knows what to do
> > with Java, or you call a java parser here
> >   ;
> 
> Thank you for your answer. I have already used this example as you
advised,
> and it is OK.
> 
> Now, how would you handle the last case which contains an ambiguity ? :
> there are two different situations when a simple '{' is detected.
Sometimes I
> have to call another parser, sometimes I have to use a simple Java block
> code.
> When I encounter a such situation, no specific character is detected just
> before the left brace (contrary to the colon and arrow cases). Passing a
> parameter to LBRACE (an int for instance) would be great, but it does not
> work very well when used in a parser rule :
> 
> anAmbiguousParserRule :
>   ... <no specific character> LBRACE[3]... -> ...
>   | ... <no specific character> LBRACE[4] ... -> ...
>   ;
> 
> I obtain this error : "token reference LBRACE may not have parameters"
> 
> Regards,
> 
> JC
> 
> 
> > > -----Original Message-----
> > > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > > bounces at antlr.org] On Behalf Of Jean-Christophe Bach
> > > Sent: Tuesday, August 03, 2010 5:50 AM
> > > To: antlr-interest at antlr.org
> > > Subject: [antlr-interest] Parameters in fragment lexer rules
> > >
> > > Hi list,
> > >
> > > I am rewriting our old parser and I use antlr3 for that.
> > > Since I have few problem to handle the '{' and to call the
> > > appropriate
> > parser
> > > depending on the context, I am wondering if fragment lexer rule + a
> > > parameter could help me.
> > > There are many situations, but I write here 3 cases :
> > > ... '->' '{' ... : I need to call a specific parser (#1) ... ':'  '{'
...
> > : I need to call
> > > ainother specific parser (#2)
> > > ...      '{' ... : I need to do a simple Java treatment
> > >
> > > I read few articles and the antlr book, and I saw that it was
> > > possible to
> > do give
> > > parameters to a fragment lexer rule. I am wondering if something
> > > like that
> > is
> > > OK :
> > >
> > > ARROWLBRACE : '->' LBRACE[2] ;
> > > ...
> > > <other rules with LBRACE[n]>
> > > ...
> > > fragment
> > > LBRACE[int lbtype] : '{'
> > >   {
> > >   switch(lbtype) {
> > >   case 1:
> > >     <Java code1>
> > >   case 2:
> > >     <Java code2>
> > >   case 3:
> > >     <Java code3>
> > >     ...
> > >   }
> > >   }
> > >   ;
> > >
> > > But am I also allowed to write a parser rule containing a LBRACE[n]
> > > or is
> > it
> > > totally illegal ?
> > > e.g. :
> > >
> > > myRule :
> > >  ... LBRACE[1] ... -> ...
> > >  |... ARROWLBRACE ... -> ...
> > >  ;
> > >
> > > When attempting to do that, I have errors :
> > > "token reference LBRACE may not have parameters"
> > >
> > > Is there any good way to solve this type of problem ?
> > >
> > > Thanks in advance,
> > >
> > > JC
> > >
> > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > Unsubscribe:
> > > http://www.antlr.org/mailman/options/antlr-interest/your-
> > > email-address
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From gerald at certiv.net  Wed Aug  4 10:53:49 2010
From: gerald at certiv.net (Gerald Rosenberg)
Date: Wed, 04 Aug 2010 10:53:49 -0700
Subject: [antlr-interest] Tree parser eats up DOWN node when navigating
 optional child node
In-Reply-To: <4C599AF5.805@junkwallah.org>
References: <4C58506B.2050506@openforce.com>	<023801cb3330$d3b06270$7b112750$@temporal-wave.com>	<4C58D4EC.40000@junkwallah.org>
	<4C599AF5.805@junkwallah.org>
Message-ID: <4C59A92D.5020608@certiv.net>

  ------ Original Message (Wednesday, August 04, 2010 9:53:09 
AM) From: Junkman ------
Subject: Re: [antlr-interest] Tree parser eats up DOWN node when navigating
optional child node
>
>> parent: ^(parent_a B?) ;
>> parent_a: ^(PARENT A?) ;
>> --------------------------------------------
>

. . . is the same as

parent: ^( ^(PARENT A?) B? ) ;

which will not match ^(PARENT B), but will match ^( ^(PARENT) B).  BTW, 
a subtree match() will always properly consume the UP DOWN subtree 
delimiters.

You probably want

parent: ^(parent_a B?) ;
parent_a: PARENT A? ;

From jimi at temporal-wave.com  Wed Aug  4 10:56:36 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 4 Aug 2010 10:56:36 -0700
Subject: [antlr-interest] Tree parser eats up DOWN node when navigating
	optional child node
In-Reply-To: <4C59A92D.5020608@certiv.net>
References: <4C58506B.2050506@openforce.com>	<023801cb3330$d3b06270$7b112750$@temporal-wave.com>	<4C58D4EC.40000@junkwallah.org>	<4C599AF5.805@junkwallah.org>
	<4C59A92D.5020608@certiv.net>
Message-ID: <031c01cb33fe$61af76b0$250e6410$@temporal-wave.com>

Your suggestion will fail when there are no children.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Gerald Rosenberg
> Sent: Wednesday, August 04, 2010 10:54 AM
> To: Junkman
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Tree parser eats up DOWN node when
> navigating optional child node
> 
>   ------ Original Message (Wednesday, August 04, 2010 9:53:09
> AM) From: Junkman ------
> Subject: Re: [antlr-interest] Tree parser eats up DOWN node when
> navigating optional child node
> >
> >> parent: ^(parent_a B?) ;
> >> parent_a: ^(PARENT A?) ;
> >> --------------------------------------------
> >
> 
> . . . is the same as
> 
> parent: ^( ^(PARENT A?) B? ) ;
> 
> which will not match ^(PARENT B), but will match ^( ^(PARENT) B).  BTW, a
> subtree match() will always properly consume the UP DOWN subtree
> delimiters.
> 
> You probably want
> 
> parent: ^(parent_a B?) ;
> parent_a: PARENT A? ;
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From gerald at certiv.net  Wed Aug  4 14:58:21 2010
From: gerald at certiv.net (Gerald Rosenberg)
Date: Wed, 04 Aug 2010 14:58:21 -0700
Subject: [antlr-interest] Tree parser eats up DOWN node when navigating
 optional child node
In-Reply-To: <031c01cb33fe$61af76b0$250e6410$@temporal-wave.com>
References: <4C58506B.2050506@openforce.com>	<023801cb3330$d3b06270$7b112750$@temporal-wave.com>	<4C58D4EC.40000@junkwallah.org>	<4C599AF5.805@junkwallah.org>	<4C59A92D.5020608@certiv.net>
	<031c01cb33fe$61af76b0$250e6410$@temporal-wave.com>
Message-ID: <4C59E27D.8050705@certiv.net>


------ Original Message (Wednesday, August 04, 2010 10:56:36 
AM) From: Jim Idle ------
Subject: Re: [antlr-interest] Tree parser eats up DOWN node when navigating
optional child node
> Your suggestion will fail when there are no children.
>
> Jim

Consistent with the OP's problem statement.

From j at junkwallah.org  Wed Aug  4 15:41:21 2010
From: j at junkwallah.org (Junkman)
Date: Wed, 04 Aug 2010 15:41:21 -0700
Subject: [antlr-interest] Tree parser eats up DOWN node when	navigating
 optional child node
In-Reply-To: <031601cb33fb$d2e9d9e0$78bd8da0$@temporal-wave.com>
References: <4C58506B.2050506@openforce.com>	<023801cb3330$d3b06270$7b112750$@temporal-wave.com>	<4C58D4EC.40000@junkwallah.org>
	<031601cb33fb$d2e9d9e0$78bd8da0$@temporal-wave.com>
Message-ID: <4C59EC91.6050406@junkwallah.org>

Thanks for the replies, Jim & Gerald.

Your responses and some more testing suggests the following to me:

1. I cannot nest a tree parser rule ("inner rule") in another rule
("outer rule"), and try to have the outer rule match additional nodes in
the subtree matched by the inner rule.

2. Consequently, the set of trees generated by rewrite expression does
not necessarily match the set of trees matched by the same rewrite
expression in the tree parser.

Am I in the ballpark here?

Jay

From gerald at certiv.net  Wed Aug  4 16:16:17 2010
From: gerald at certiv.net (Gerald Rosenberg)
Date: Wed, 04 Aug 2010 16:16:17 -0700
Subject: [antlr-interest] Tree parser eats up DOWN node when	navigating
 optional child node
In-Reply-To: <4C59EC91.6050406@junkwallah.org>
References: <4C58506B.2050506@openforce.com>	<023801cb3330$d3b06270$7b112750$@temporal-wave.com>	<4C58D4EC.40000@junkwallah.org>
	<031601cb33fb$d2e9d9e0$78bd8da0$@temporal-wave.com>
	<4C59EC91.6050406@junkwallah.org>
Message-ID: <4C59F4C1.30305@certiv.net>

  As best I understand your questions, the answers are no, no, and no . . .

Given an input "PAB", your given parser will construct an AST  ^( ^( 
PARENT A ) B ) and your given tree grammar will likewise match that.

If you somehow feed the tree grammar an AST ^( PARENT A B) or ^( PARENT 
B ), the rule will fail - both structure and content of the AST must 
match for the tree rule to match.

------ Original Message (Wednesday, August 04, 2010 3:41:21 
PM) From: Junkman ------
Subject: Re: [antlr-interest] Tree parser eats up DOWN node when navigating
optional child node
> Thanks for the replies, Jim&  Gerald.
>
> Your responses and some more testing suggests the following to me:
>
> 1. I cannot nest a tree parser rule ("inner rule") in another rule
> ("outer rule"), and try to have the outer rule match additional nodes in
> the subtree matched by the inner rule.
>
> 2. Consequently, the set of trees generated by rewrite expression does
> not necessarily match the set of trees matched by the same rewrite
> expression in the tree parser.
>
> Am I in the ballpark here?
>
> Jay
>

From j at junkwallah.org  Wed Aug  4 17:09:30 2010
From: j at junkwallah.org (Junkman)
Date: Wed, 04 Aug 2010 17:09:30 -0700
Subject: [antlr-interest] Tree parser eats up DOWN node when	navigating
 optional child node
In-Reply-To: <4C59F4C1.30305@certiv.net>
References: <4C58506B.2050506@openforce.com>	<023801cb3330$d3b06270$7b112750$@temporal-wave.com>	<4C58D4EC.40000@junkwallah.org>
	<031601cb33fb$d2e9d9e0$78bd8da0$@temporal-wave.com>
	<4C59EC91.6050406@junkwallah.org> <4C59F4C1.30305@certiv.net>
Message-ID: <4C5A013A.5090909@junkwallah.org>

Gerald Rosenberg wrote:
>  As best I understand your questions, the answers are no, no, and no . . .
> 
> Given an input "PAB", your given parser will construct an AST  ^( ^(
> PARENT A ) B ) and your given tree grammar will likewise match that.
> 

I think you have that wrong.

When fed the input "PAB", the parser/rewrite rule:

parent: P A? B? -> ^( ^( PARENT A? ) B? )

generates ^(PARENT A B), a PARENT node with two children, A and B, and
produces the following sequence when flattened:

PARENT DOWN A B UP

This is as documented in TDAR.  You can try it yourself with the demo
codes (attached again).

> If you somehow feed the tree grammar an AST ^( PARENT A B) or ^( PARENT
> B ), the rule will fail - both structure and content of the AST must
> match for the tree rule to match.
> 

That seems to be the case in tree parser.  It's this discrepancy between
tree generation and tree parsing I've tripped over.

I am wondering if the discrepancy is intentional and consistent through
all tree parser rules, or only the rules that match a node with optional
children.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: TreeParserDemo.zip
Type: application/x-zip-compressed
Size: 4789 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20100804/da085296/attachment.bin 

From j at junkwallah.org  Wed Aug  4 17:21:33 2010
From: j at junkwallah.org (Junkman)
Date: Wed, 04 Aug 2010 17:21:33 -0700
Subject: [antlr-interest] Tree parser eats up DOWN node when	navigating
 optional child node
In-Reply-To: <4C59F4C1.30305@certiv.net>
References: <4C58506B.2050506@openforce.com>	<023801cb3330$d3b06270$7b112750$@temporal-wave.com>	<4C58D4EC.40000@junkwallah.org>
	<031601cb33fb$d2e9d9e0$78bd8da0$@temporal-wave.com>
	<4C59EC91.6050406@junkwallah.org> <4C59F4C1.30305@certiv.net>
Message-ID: <4C5A040D.6000706@junkwallah.org>

Gerald Rosenberg wrote:
>  As best I understand your questions, the answers are no, no, and no . . .
> 
> Given an input "PAB", your given parser will construct an AST  ^( ^(
> PARENT A ) B ) and your given tree grammar will likewise match that.
> 

Actually, I don't think I understood you.

You wrote "AST ^( ^( PARENT A ) B )".  Can you describe the tree this
notates?  I can see it as a node sequence, but I don't know what tree
structure it is describing.

Thanks for the reply.

Jay

From gerald at certiv.net  Wed Aug  4 22:08:32 2010
From: gerald at certiv.net (Gerald Rosenberg)
Date: Wed, 04 Aug 2010 22:08:32 -0700
Subject: [antlr-interest] Tree parser eats up DOWN node when	navigating
 optional child node
In-Reply-To: <4C5A040D.6000706@junkwallah.org>
References: <4C58506B.2050506@openforce.com>	<023801cb3330$d3b06270$7b112750$@temporal-wave.com>	<4C58D4EC.40000@junkwallah.org>
	<031601cb33fb$d2e9d9e0$78bd8da0$@temporal-wave.com>
	<4C59EC91.6050406@junkwallah.org> <4C59F4C1.30305@certiv.net>
	<4C5A040D.6000706@junkwallah.org>
Message-ID: <4C5A4750.80302@certiv.net>

  ------ Original Message (Wednesday, August 04, 2010 5:21:33 
PM) From: Junkman ------
Subject: Re: [antlr-interest] Tree parser eats up DOWN node when navigating
optional child node
>
> You wrote "AST ^( ^( PARENT A ) B )".  Can you describe the tree this
> notates?  I can see it as a node sequence, but I don't know what tree
> structure it is describing.
>
> Thanks for the reply.
>
> Jay
>

The AST

^( ^( PARENT A? ) B? )

should implement as

( ( PARENT Token.DOWN A? Token.UP ) Token.DOWN B? Token.UP )

but is actually

( PARENT Token.DOWN A? B? Token.UP )

Because parent_a is the root of parent, the parser is (for some reason) 
not actually generating the middle Token.UP Token.DOWN sequence.  That 
explains why P and PA work, but PB and PAB do not - after matching for 
A?, the tree parser is looking for UP, but finding B.  Not sure why 
Antlr is doing this - not expected.

Changing A and/or B to non-optional does not change this behavior.

If, however, you change the parent rule to

parent : parent_a B? -> ^( M parent_a B? )  ;

where M is an imaginary token (and make the corresponding change to the 
tree grammar), all four patterns will parse and match as expected:

AST:

^( M ^(PARENT A? ) B? )

properly implements as

( ( M Token.DOWN PARENT A? Token.UP ) Token.DOWN B? Token.UP )




From aj at member.fsf.org  Thu Aug  5 01:54:29 2010
From: aj at member.fsf.org (Andreas Jonsson)
Date: Thu, 05 Aug 2010 10:54:29 +0200
Subject: [antlr-interest] Compression of dfa tables
Message-ID: <4C5A7C45.2070903@member.fsf.org>

Hi,

I have just started to write a parser using antlr3 with C as target.
The lexer is growing quickly in size due to the dfa tables.  With 61
tables the size of the lexer is over 4MB.  My feeling is that the
consequence will be that performance will suffer due to a large
number of cache misses.

But the tables contains 65536 entries, where almost all elements have
the same value.

Someone might have thought of this idea before and
maybe it have been rejected for good reasons, but why not use
a sorted set of ranges instead of a flat table?  For instance:

struct DFA_RANGE {
     ANTLR3_UINT16 start;
     ANTLR3_UINT16 end;
     ANTLR3_UINT32 state;
};

struct DFA_TABLE {
     ANTLR3_UINT32 length;
     struct DFA_RANGE ranges[];
};

And you would get a very compact data structure:

static const struct DFA_TABLE dfa6_T2 { 5, {{0, 34, 20}, {35, 35, 28}, 
{36, 60, 20}, {61, 61, -1}, {62, 65535, 20} }};

Maybe there are some cases where such a data structure will be larger
than an ordinary table?  In that case you can, of course, add the 
possibility to fall
back to an ordinary table.

Best regards,

Andreas Jonsson


From jeanchristophe.bach at inria.fr  Thu Aug  5 01:55:56 2010
From: jeanchristophe.bach at inria.fr (Jean-Christophe Bach)
Date: Thu, 5 Aug 2010 10:55:56 +0200
Subject: [antlr-interest] Parameters in fragment lexer rules
In-Reply-To: <031801cb33fc$8d91aa20$a8b4fe60$@temporal-wave.com>
References: <20100803124959.GB3833@adel.loria.fr>
	<01ed01cb3329$1663b520$432b1f60$@temporal-wave.com>
	<20100804073335.GA2950@adel.loria.fr>
	<031801cb33fc$8d91aa20$a8b4fe60$@temporal-wave.com>
Message-ID: <20100805085555.GA3229@adel.loria.fr>

Hi,

* Jim Idle <jimi at temporal-wave.com> [04.08.2010. @10:43:31 -0700]:

> Your language is broken basically :-(
> 
> The lexer runs first and creates all the tokens THEN the parser runs against
> the tokens - you cannot tell the lexer what to do from the parser. Now,
> there is an unbuffered token stream by default in the latest source code,
> but you still cannot pass parameters to the lexer rules from the parser, you
> would have to set some flag in the lexer instance to tell it what to do.
> When you mention the LEXER rule in your parser, you are not calling the
> lexer rule, you are indicating that you expect a token of that type to occur
> at that point in the parser. You should look at the generated source code to
> see this.

Thank you for the explanation.

> However, if you can work out that you need to parse a java expression when
> you are parsing, then you should be able to work out the same when you are
> lexing. At some point, you must be able to distinguish the cases? However,
> it would be better to change the syntax (if you can) to use something like
> {{ }} if you have a Java expression.

Indeed, I am able to distinguish cases, but not with a character just before the
left brace. We have constructs composed of sub-constructs based on this model :

construct : '%construct1' ID ID '(' args ')' '{' subconstruct* '}' ;

subconstructN : 'keywordN' '(' args ')' '{' <block parsed by another parser> '}';

All left braces which appear in subconstructs are the trigger to another parser.
For that, I used the official island grammar example. Therefore the
subconstructs rules look like this in reality :

subconstructN : 'keywordN' '(' args ')' LBRACE

LBRACE : '{' { <another parser is called here> } ;

The others '{' (for instance those which are in construct rules) do not trigger
a parser. We only count them, as in the island grammar example : we also have
"double embedded blocks" for few constructs (e.g. : HostLanguage -> SubLanguage
-> HostLanguage).

Of course, modifying the syntax would be the easiest way and would solve this
problem immediately, but we would have a lot of retro-compatibility problems.
I am not sure what to do, but I will try to find an other way.
Thanks a lot for your answers.

Regards,

JC

> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > bounces at antlr.org] On Behalf Of Jean-Christophe Bach
> > Sent: Wednesday, August 04, 2010 12:34 AM
> > To: antlr-interest at antlr.org
> > Subject: Re: [antlr-interest] Parameters in fragment lexer rules
> > 
> > Hi,
> > 
> > > You need to make the distinction in the lexer via island grammars.
> > > Your case looks like it will be easy enough but you might need to
> > > formulate your lexer rules to avoid ambiguous cases. Look at the
> > > example island grammar in the downloadable example set.
> > > For your lexer you will need something like this:
> > >
> > > ARROWLBRACE
> > >    : '->'
> > >       (
> > >              (WS* '{')=> WS* '{' SPECIFICPARSER { $type = SPECIFICBLOCK;
> }
> > >           |
> > >       )
> > >    ;
> > >
> > > COLON
> > >   : ':'
> > >        (
> > >              (WS* '{')=> WS* '{' DIFFERENTPARSER { $type =
> DIFFERENTBLOCK; }
> > >           |
> > >       )
> > >   ;
> > >
> > > LBRACE
> > >   : '{' // Either the parser that calls this lexer knows what to do
> > > with Java, or you call a java parser here
> > >   ;
> > 
> > Thank you for your answer. I have already used this example as you
> advised,
> > and it is OK.
> > 
> > Now, how would you handle the last case which contains an ambiguity ? :
> > there are two different situations when a simple '{' is detected.
> Sometimes I
> > have to call another parser, sometimes I have to use a simple Java block
> > code.
> > When I encounter a such situation, no specific character is detected just
> > before the left brace (contrary to the colon and arrow cases). Passing a
> > parameter to LBRACE (an int for instance) would be great, but it does not
> > work very well when used in a parser rule :
> > 
> > anAmbiguousParserRule :
> >   ... <no specific character> LBRACE[3]... -> ...
> >   | ... <no specific character> LBRACE[4] ... -> ...
> >   ;
> > 
> > I obtain this error : "token reference LBRACE may not have parameters"
> > 
> > Regards,
> > 
> > JC
> > 
> > 
> > > > -----Original Message-----
> > > > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > > > bounces at antlr.org] On Behalf Of Jean-Christophe Bach
> > > > Sent: Tuesday, August 03, 2010 5:50 AM
> > > > To: antlr-interest at antlr.org
> > > > Subject: [antlr-interest] Parameters in fragment lexer rules
> > > >
> > > > Hi list,
> > > >
> > > > I am rewriting our old parser and I use antlr3 for that.
> > > > Since I have few problem to handle the '{' and to call the
> > > > appropriate
> > > parser
> > > > depending on the context, I am wondering if fragment lexer rule + a
> > > > parameter could help me.
> > > > There are many situations, but I write here 3 cases :
> > > > ... '->' '{' ... : I need to call a specific parser (#1) ... ':'  '{'
> ...
> > > : I need to call
> > > > ainother specific parser (#2)
> > > > ...      '{' ... : I need to do a simple Java treatment
> > > >
> > > > I read few articles and the antlr book, and I saw that it was
> > > > possible to
> > > do give
> > > > parameters to a fragment lexer rule. I am wondering if something
> > > > like that
> > > is
> > > > OK :
> > > >
> > > > ARROWLBRACE : '->' LBRACE[2] ;
> > > > ...
> > > > <other rules with LBRACE[n]>
> > > > ...
> > > > fragment
> > > > LBRACE[int lbtype] : '{'
> > > >   {
> > > >   switch(lbtype) {
> > > >   case 1:
> > > >     <Java code1>
> > > >   case 2:
> > > >     <Java code2>
> > > >   case 3:
> > > >     <Java code3>
> > > >     ...
> > > >   }
> > > >   }
> > > >   ;
> > > >
> > > > But am I also allowed to write a parser rule containing a LBRACE[n]
> > > > or is
> > > it
> > > > totally illegal ?
> > > > e.g. :
> > > >
> > > > myRule :
> > > >  ... LBRACE[1] ... -> ...
> > > >  |... ARROWLBRACE ... -> ...
> > > >  ;
> > > >
> > > > When attempting to do that, I have errors :
> > > > "token reference LBRACE may not have parameters"
> > > >
> > > > Is there any good way to solve this type of problem ?
> > > >
> > > > Thanks in advance,
> > > >
> > > > JC
> > > >
> > > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > > Unsubscribe:
> > > > http://www.antlr.org/mailman/options/antlr-interest/your-
> > > > email-address
> > >
> > >
> > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > Unsubscribe:
> > > http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> > 
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> > email-address
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From Enrique.PradosValiente at reale.es  Thu Aug  5 02:17:05 2010
From: Enrique.PradosValiente at reale.es (Prados Valiente Enrique)
Date: Thu, 5 Aug 2010 11:17:05 +0200
Subject: [antlr-interest] ANTLR v3 C# Code generator and Runtime library
In-Reply-To: <20100805085555.GA3229@adel.loria.fr>
References: <20100803124959.GB3833@adel.loria.fr><01ed01cb3329$1663b520$432b1f60$@temporal-wave.com><20100804073335.GA2950@adel.loria.fr><031801cb33fc$8d91aa20$a8b4fe60$@temporal-wave.com>
	<20100805085555.GA3229@adel.loria.fr>
Message-ID: <931DCC17C6D7A849AEE684BF5B13E199EFF336@BLPOSTIN.reale.net>

Hi all, misters,
 
I need SQL Parser -for Oracle- in C#.

Any sample application in .NET C# using AntLR ?

 Java is required ?? 

I want only use .NET C# - Visual Studio 2008. I don't want install Java.


Mister Luber say me:

"The ANTLR tool itself requires the Java runtime to generate files, the
generated files work with VS 2008. I know of a C# port of the ANTLR tool
by Sam Harwell, but don't know where you can download it from and if
there is  current version available."

Any help please ? Thanks in advanced

From Nieves.Salor.Moral at esa.int  Thu Aug  5 02:39:53 2010
From: Nieves.Salor.Moral at esa.int (Nieves.Salor.Moral at esa.int)
Date: Thu, 5 Aug 2010 11:39:53 +0200
Subject: [antlr-interest] missing tokens and strange behaviour
 regarding	some chars
In-Reply-To: <01e601cb3327$8f0cc130$ad264390$@temporal-wave.com>
References: <OFAFB9C097.A8486DB0-ONC1257774.0028FD08-C1257774.0029D87E@esa.int>
	<01e601cb3327$8f0cc130$ad264390$@temporal-wave.com>
Message-ID: <OF013A3627.3D6B2DF3-ONC1257776.00341F35-C1257776.003516FD@esa.int>

Thanks both Jim and Kevin

Kevin, I tried to use more LEXER expressions but the problem when parsing 
was that the TOKEN code that the LEXER sends is different than the more 
general rule as they are no fragments but full lexer rules, so it was not 
working. And yes It is giving me a real hard time.

Jim, I am doing something similar to what you suggested me. But I found 
the main error was in how I was mixing some TOKENS inside another LEXER 
rules and not only fragments, so the codes that were being sended were not 
the ones that I though would work because they were more general. Now the 
two problems that I had are solved, now I am extending the grammar and 
keep on testing it.

Example

a: TERMINAL1 rule2

TERMINAL1: TERMINAL2 | 'b'

TERMINAL2: 'c'

If I tried to send c rule2 I though that it was going to work correctly, 
but no because, as I discovered debugging (I don't know if this is a 
general case) it finds that 'c' is a TERMINAL2 TOKEN and so, it doesn't 
match the rule a.

Is this assumption correct in general?? Because maybe for me It has worked 
until now, but I can find another problem when extending, and I want to do 
a robust compiler.

Thanks for everything

Nieves




"Jim Idle" <jimi at temporal-wave.com> 
03/08/2010 18:18

To
<Nieves.Salor.Moral at esa.int>, <antlr-interest at antlr.org>
cc

Subject
RE: [antlr-interest] missing tokens and strange behaviour regarding some 
chars






Your expression is still defined in an LALR manner hence it will get
confused, you need to define it as a cascading set of rules with higher
precedence towards the bottom of the nest. That probably does not make a 
lot
of sense to you as words, so the best thing to do is to read through the
grammar for say Java or  C and look at the expression rules. Then 
basically
copy them and adapt themto your own operators.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Nieves.Salor.Moral at esa.int
> Sent: Tuesday, August 03, 2010 12:37 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] missing tokens and strange behaviour regarding
> some chars
> 
> Hello to everyone!
> 
> I am new with ANTLR but not with compilers. Before I explain the problem
I'll
> try to explain a little bit the situation background.
> 
> I am trying to design for a custom language, first a syntax highlighter
and
> second a module that can store the information in a DB (so in essence
would
> be creating a compiler with its output as SQL queries).
> My input language is defined in EBNF, thus it has left-recursion and
> ambiguity. In order to solve it, I have changed it a little to avoid 
those
> problems and mostly I have managed it without using predicates or
> backtracking.
> 
> Working with ANTLR Works, I am debugging the grammar with different
> examples (just the parser), before adding the highlighting code in the
> StringTemplate. but I get these strange errors, mostly regarding
> NoViableAltException.
> 
> One problem for example is trying to define negative expressions with 
the
> simple_factor rule.
> So when I debug expressions like 500 or +500 in the simple_factor, I 
don't
get
> an error. But If I try -500, I get the NoViableAltException. Also if I
change - for
> another symbol like @, it also work when I try @500. I have traced all 
the
> possibilities in the different possibilities in simple_factor, but in no
one the
> first symbol can be a negative symbol.
> And I am lost as to why this can happen. I add the whole grammar because
it
> is quite big to paste it.
> 
> Another problem that appears is that sometimes tokens are missed when
> reading, so for example if I have an input beginning with 'initiate and
> confirm',  ANTLR reads 'conf' and loses the first characters. With the
same
> grammar that I have posted. One example of this problem goes with the
> input 'initiate and confirm sys_stop of SCOE_1553 of LLCS of EGSE of
System
> of ODB' with the rule initiate_and_confirm_step_statement.
> 
> Thanks in advance for any input
> 
> Nieves Salor Moral
> 
> addition_operator:  ADDITION_OPERATOR
>         ;
> 
> ADDITION_OPERATOR
>         :       '+'|'-'
>         ;
> 
>  UNSIGNED_INTEGER
>         :       DIGIT+
>         ;
> 
> simple_factor
>         :       addition_operator simple_factor
>         |       NEGATION_BOOLEAN_OPERATOR simple_factor
>         |       constant
>         |       '('expression ')'
>         |       function
>         |       object_property_request
>         |       OBJECT_TYPE partial_path
>         |       'ask user' '(' expression ('default' expression)? ')'
> ('expect' predefined_type)?
>         ;
> 
> constant:       BOOLEAN_CONSTANT
>         |       UNSIGNED_INTEGER ( numeric_constant|
> RELATIVE_TIME_CONSTANT)
>         |       RELATIVE_TIME_CONSTANT
>         |       string_constant
>         |       HEXADECIMAL_CONSTANT
>         ;
> real_constant
>         :       ('.' UNSIGNED_INTEGER)? ('e' addition_operator?
> UNSIGNED_INTEGER)?
>         ;
> 
> numeric_constant
>         :        real_constant engineering_units?
>         ;
> 




From Enrique.PradosValiente at reale.es  Thu Aug  5 04:49:23 2010
From: Enrique.PradosValiente at reale.es (Prados Valiente Enrique)
Date: Thu, 5 Aug 2010 13:49:23 +0200
Subject: [antlr-interest] [il-antlr-interest: 29675] ANTLR v3 C# Code
	generator and Runtime library
In-Reply-To: <AANLkTikWb7Ha9kJhEEdWbq0Pmu3GzhDzH3Btnbx66Nhb@mail.gmail.com>
References: <20100803124959.GB3833@adel.loria.fr><01ed01cb3329$1663b520$432b1f60$@temporal-wave.com><20100804073335.GA2950@adel.loria.fr><031801cb33fc$8d91aa20$a8b4fe60$@temporal-wave.com><20100805085555.GA3229@adel.loria.fr><931DCC17C6D7A849AEE684BF5B13E199EFF336@BLPOSTIN.reale.net>
	<AANLkTikWb7Ha9kJhEEdWbq0Pmu3GzhDzH3Btnbx66Nhb@mail.gmail.com>
Message-ID: <931DCC17C6D7A849AEE684BF5B13E199EFF33E@BLPOSTIN.reale.net>

Thanks.

 

Any step by step Guide for use AntLR with C# ??

 

Better with sample application , and source code.

 

Thanks in advanced.

 

De: Todd Stout [mailto:todd.tstout at gmail.com] 
Enviado el: jueves, 05 de agosto de 2010 13:48
Para: Prados Valiente Enrique
CC: antlr-interest at antlr.org
Asunto: Re: [il-antlr-interest: 29675] [antlr-interest] ANTLR v3 C# Code
generator and Runtime library

 

You only need the JRE, not the JDK.

On Thu, Aug 5, 2010 at 4:17 AM, Prados Valiente Enrique
<Enrique.PradosValiente at reale.es> wrote:

Hi all, misters,

I need SQL Parser -for Oracle- in C#.

Any sample application in .NET C# using AntLR ?

 Java is required ??

I want only use .NET C# - Visual Studio 2008. I don't want install Java.


Mister Luber say me:

"The ANTLR tool itself requires the Java runtime to generate files, the
generated files work with VS 2008. I know of a C# port of the ANTLR tool
by Sam Harwell, but don't know where you can download it from and if
there is  current version available."

Any help please ? Thanks in advanced

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address

--
You received this message because you are subscribed to the Google
Groups "il-antlr-interest" group.
To post to this group, send email to il-antlr-interest at googlegroups.com.
To unsubscribe from this group, send email to
il-antlr-interest+unsubscribe at googlegroups.com
<mailto:il-antlr-interest%2Bunsubscribe at googlegroups.com> .
For more options, visit this group at
http://groups.google.com/group/il-antlr-interest?hl=en.

 


From Dagi.Troegner at dlr.de  Thu Aug  5 04:53:24 2010
From: Dagi.Troegner at dlr.de (Dagi.Troegner at dlr.de)
Date: Thu, 5 Aug 2010 13:53:24 +0200
Subject: [antlr-interest] Problem using scopes in C Target
Message-ID: <66601EEAAA3D164E8BA1F5CB561D459BE45570@exbe4.intra.dlr.de>

 

Hi,

 

I have a problem in using global or rule-based scopes in my C Target Parser. I tried the following with a rule-based scope:

 

constraint

 

scope {

pANTLR3_STRING oclContext;

}

            :           contextDeclaration {oclContext = $contextDeclaration.text;}

                        ((('static')? 'def' (NAME)? COLON (defExpression)*)

            | (stereotype (NAME)? COLON oclExpression)

                        )+

  ;

 

The Grammar is correct and the Parser and Lexer in C are compilable without any error reporting. The problem is that I get an access violation when the starting rule of the parser is called. I get that exception as well when I try the same with a global scope. I would appreciate any help! Thanks a lot!

 

Best regards,

Dagi


From jimi at temporal-wave.com  Thu Aug  5 09:11:07 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 5 Aug 2010 09:11:07 -0700
Subject: [antlr-interest] Tree parser eats up DOWN node when	navigating
	optional child node
In-Reply-To: <4C5A4750.80302@certiv.net>
References: <4C58506B.2050506@openforce.com>	<023801cb3330$d3b06270$7b112750$@temporal-wave.com>	<4C58D4EC.40000@junkwallah.org>	<031601cb33fb$d2e9d9e0$78bd8da0$@temporal-wave.com>	<4C59EC91.6050406@junkwallah.org>
	<4C59F4C1.30305@certiv.net>	<4C5A040D.6000706@junkwallah.org>
	<4C5A4750.80302@certiv.net>
Message-ID: <004301cb34b8$cfa00a30$6ee01e90$@temporal-wave.com>

The root node of any tree needs to have a type, so ^( ^( makes no sense as
what is the first root supposed to be?

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Gerald Rosenberg
> Sent: Wednesday, August 04, 2010 10:09 PM
> To: Junkman
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Tree parser eats up DOWN node when
> navigating optional child node
> 
>   ------ Original Message (Wednesday, August 04, 2010 5:21:33
> PM) From: Junkman ------
> Subject: Re: [antlr-interest] Tree parser eats up DOWN node when
> navigating optional child node
> >
> > You wrote "AST ^( ^( PARENT A ) B )".  Can you describe the tree this
> > notates?  I can see it as a node sequence, but I don't know what tree
> > structure it is describing.
> >
> > Thanks for the reply.
> >
> > Jay
> >
> 
> The AST
> 
> ^( ^( PARENT A? ) B? )
> 
> should implement as
> 
> ( ( PARENT Token.DOWN A? Token.UP ) Token.DOWN B? Token.UP )
> 
> but is actually
> 
> ( PARENT Token.DOWN A? B? Token.UP )
> 
> Because parent_a is the root of parent, the parser is (for some reason)
not
> actually generating the middle Token.UP Token.DOWN sequence.  That
> explains why P and PA work, but PB and PAB do not - after matching for A?,
> the tree parser is looking for UP, but finding B.  Not sure why Antlr is
doing
> this - not expected.
> 
> Changing A and/or B to non-optional does not change this behavior.
> 
> If, however, you change the parent rule to
> 
> parent : parent_a B? -> ^( M parent_a B? )  ;
> 
> where M is an imaginary token (and make the corresponding change to the
> tree grammar), all four patterns will parse and match as expected:
> 
> AST:
> 
> ^( M ^(PARENT A? ) B? )
> 
> properly implements as
> 
> ( ( M Token.DOWN PARENT A? Token.UP ) Token.DOWN B? Token.UP )
> 
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From jimi at temporal-wave.com  Thu Aug  5 09:21:42 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 5 Aug 2010 09:21:42 -0700
Subject: [antlr-interest] Compression of dfa tables
In-Reply-To: <4C5A7C45.2070903@member.fsf.org>
References: <4C5A7C45.2070903@member.fsf.org>
Message-ID: <004901cb34ba$4a087220$de195660$@temporal-wave.com>

The size of the DFA tables is known about, but despite cache misses, you
won't notice the effect unless you have huge inputs, in which case there
will be plenty of other cache misses anyway. However, when you end up with a
large DFA set, it usually (not always) means that the lexer can be specified
'better' (in terms of allowing ANTLR to deal with it better). 

Can you post your grammar so we can see it? Look for things like: 

C : A?A;

Which could be 

C : A A? ;

And specifying too much restriction in the character sets for tokens because
it says that in the spec (you  want to accept the maximum range that is not
ambiguous, then issue a semantic error, in keeping with pushing errors as
high up the tool chain as you can because you tend to have more context and
better errors that way.

To produce the range structure would require changes in the way the DFA is
given to the code generating templates, which I have no control of. However,
in v4, there is an improved lexer arrangement, which will avoid these huge
tables, and the code generator is more sophisticated in terms of what an
individual target can do before it generates code via the templates (right
now, there is not much of anything that a target can do other than use the
templates).

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Andreas Jonsson
> Sent: Thursday, August 05, 2010 1:54 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Compression of dfa tables
> 
> Hi,
> 
> I have just started to write a parser using antlr3 with C as target.
> The lexer is growing quickly in size due to the dfa tables.  With 61
tables the
> size of the lexer is over 4MB.  My feeling is that the consequence will be
that
> performance will suffer due to a large number of cache misses.
> 
> But the tables contains 65536 entries, where almost all elements have the
> same value.
> 
> Someone might have thought of this idea before and maybe it have been
> rejected for good reasons, but why not use a sorted set of ranges instead
of
> a flat table?  For instance:
> 
> struct DFA_RANGE {
>      ANTLR3_UINT16 start;
>      ANTLR3_UINT16 end;
>      ANTLR3_UINT32 state;
> };
> 
> struct DFA_TABLE {
>      ANTLR3_UINT32 length;
>      struct DFA_RANGE ranges[];
> };
> 
> And you would get a very compact data structure:
> 
> static const struct DFA_TABLE dfa6_T2 { 5, {{0, 34, 20}, {35, 35, 28},
{36, 60, 20},
> {61, 61, -1}, {62, 65535, 20} }};
> 
> Maybe there are some cases where such a data structure will be larger than
> an ordinary table?  In that case you can, of course, add the possibility
to fall
> back to an ordinary table.
> 
> Best regards,
> 
> Andreas Jonsson
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From jimi at temporal-wave.com  Thu Aug  5 09:28:04 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 5 Aug 2010 09:28:04 -0700
Subject: [antlr-interest] Parameters in fragment lexer rules
In-Reply-To: <20100805085555.GA3229@adel.loria.fr>
References: <20100803124959.GB3833@adel.loria.fr>	<01ed01cb3329$1663b520$432b1f60$@temporal-wave.com>	<20100804073335.GA2950@adel.loria.fr>	<031801cb33fc$8d91aa20$a8b4fe60$@temporal-wave.com>
	<20100805085555.GA3229@adel.loria.fr>
Message-ID: <005101cb34bb$2e270930$8a751b90$@temporal-wave.com>

OK - it looks to me like you can have a class member variable in the lexer
that is set to false at the start. When you see the '%xxxxxx' token, switch
it on and you know that the next '{' triggers a subconstruct, otherwise call
the other parser. Reset that flag both after you process the '{' and when
you see any '}' as then you guard against syntax errors throwing things too
far out of whack.

@lexer::members {
boolean isConstruct = false;
}

CONSTRUCT: '%' ('A'..'Z'|'a'..'z')+ { isConstruct = true; } ;

LBRACE : '{'
                   ( {isConstruct}=> // whatever
                      | // the other
                  )
               { isConstruct = false;}
           ;

RBRACE : '}' { isConstruct = false;} ;


Jim
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Jean-Christophe Bach
> Sent: Thursday, August 05, 2010 1:56 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Parameters in fragment lexer rules
> 
> Hi,
> 
> * Jim Idle <jimi at temporal-wave.com> [04.08.2010. @10:43:31 -0700]:
> 
> > Your language is broken basically :-(
> >
> > The lexer runs first and creates all the tokens THEN the parser runs
> > against the tokens - you cannot tell the lexer what to do from the
> > parser. Now, there is an unbuffered token stream by default in the
> > latest source code, but you still cannot pass parameters to the lexer
> > rules from the parser, you would have to set some flag in the lexer
instance
> to tell it what to do.
> > When you mention the LEXER rule in your parser, you are not calling
> > the lexer rule, you are indicating that you expect a token of that
> > type to occur at that point in the parser. You should look at the
> > generated source code to see this.
> 
> Thank you for the explanation.
> 
> > However, if you can work out that you need to parse a java expression
> > when you are parsing, then you should be able to work out the same
> > when you are lexing. At some point, you must be able to distinguish
> > the cases? However, it would be better to change the syntax (if you
> > can) to use something like {{ }} if you have a Java expression.
> 
> Indeed, I am able to distinguish cases, but not with a character just
before
> the left brace. We have constructs composed of sub-constructs based on
this
> model :
> 
> construct : '%construct1' ID ID '(' args ')' '{' subconstruct* '}' ;
> 
> subconstructN : 'keywordN' '(' args ')' '{' <block parsed by another
parser> '}';
> 
> All left braces which appear in subconstructs are the trigger to another
> parser.
> For that, I used the official island grammar example. Therefore the
> subconstructs rules look like this in reality :
> 
> subconstructN : 'keywordN' '(' args ')' LBRACE
> 
> LBRACE : '{' { <another parser is called here> } ;
> 
> The others '{' (for instance those which are in construct rules) do not
trigger a
> parser. We only count them, as in the island grammar example : we also
have
> "double embedded blocks" for few constructs (e.g. : HostLanguage ->
> SubLanguage
> -> HostLanguage).
> 
> Of course, modifying the syntax would be the easiest way and would solve
> this problem immediately, but we would have a lot of retro-compatibility
> problems.
> I am not sure what to do, but I will try to find an other way.
> Thanks a lot for your answers.
> 
> Regards,
> 
> JC
> 
> > > -----Original Message-----
> > > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > > bounces at antlr.org] On Behalf Of Jean-Christophe Bach
> > > Sent: Wednesday, August 04, 2010 12:34 AM
> > > To: antlr-interest at antlr.org
> > > Subject: Re: [antlr-interest] Parameters in fragment lexer rules
> > >
> > > Hi,
> > >
> > > > You need to make the distinction in the lexer via island grammars.
> > > > Your case looks like it will be easy enough but you might need to
> > > > formulate your lexer rules to avoid ambiguous cases. Look at the
> > > > example island grammar in the downloadable example set.
> > > > For your lexer you will need something like this:
> > > >
> > > > ARROWLBRACE
> > > >    : '->'
> > > >       (
> > > >              (WS* '{')=> WS* '{' SPECIFICPARSER { $type =
> > > > SPECIFICBLOCK;
> > }
> > > >           |
> > > >       )
> > > >    ;
> > > >
> > > > COLON
> > > >   : ':'
> > > >        (
> > > >              (WS* '{')=> WS* '{' DIFFERENTPARSER { $type =
> > DIFFERENTBLOCK; }
> > > >           |
> > > >       )
> > > >   ;
> > > >
> > > > LBRACE
> > > >   : '{' // Either the parser that calls this lexer knows what to
> > > > do with Java, or you call a java parser here
> > > >   ;
> > >
> > > Thank you for your answer. I have already used this example as you
> > advised,
> > > and it is OK.
> > >
> > > Now, how would you handle the last case which contains an ambiguity ?
:
> > > there are two different situations when a simple '{' is detected.
> > Sometimes I
> > > have to call another parser, sometimes I have to use a simple Java
> > > block code.
> > > When I encounter a such situation, no specific character is detected
> > > just before the left brace (contrary to the colon and arrow cases).
> > > Passing a parameter to LBRACE (an int for instance) would be great,
> > > but it does not work very well when used in a parser rule :
> > >
> > > anAmbiguousParserRule :
> > >   ... <no specific character> LBRACE[3]... -> ...
> > >   | ... <no specific character> LBRACE[4] ... -> ...
> > >   ;
> > >
> > > I obtain this error : "token reference LBRACE may not have parameters"
> > >
> > > Regards,
> > >
> > > JC
> > >
> > >
> > > > > -----Original Message-----
> > > > > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > > > > bounces at antlr.org] On Behalf Of Jean-Christophe Bach
> > > > > Sent: Tuesday, August 03, 2010 5:50 AM
> > > > > To: antlr-interest at antlr.org
> > > > > Subject: [antlr-interest] Parameters in fragment lexer rules
> > > > >
> > > > > Hi list,
> > > > >
> > > > > I am rewriting our old parser and I use antlr3 for that.
> > > > > Since I have few problem to handle the '{' and to call the
> > > > > appropriate
> > > > parser
> > > > > depending on the context, I am wondering if fragment lexer rule
> > > > > + a parameter could help me.
> > > > > There are many situations, but I write here 3 cases :
> > > > > ... '->' '{' ... : I need to call a specific parser (#1) ... ':'
'{'
> > ...
> > > > : I need to call
> > > > > ainother specific parser (#2)
> > > > > ...      '{' ... : I need to do a simple Java treatment
> > > > >
> > > > > I read few articles and the antlr book, and I saw that it was
> > > > > possible to
> > > > do give
> > > > > parameters to a fragment lexer rule. I am wondering if something
> > > > > like that
> > > > is
> > > > > OK :
> > > > >
> > > > > ARROWLBRACE : '->' LBRACE[2] ;
> > > > > ...
> > > > > <other rules with LBRACE[n]>
> > > > > ...
> > > > > fragment
> > > > > LBRACE[int lbtype] : '{'
> > > > >   {
> > > > >   switch(lbtype) {
> > > > >   case 1:
> > > > >     <Java code1>
> > > > >   case 2:
> > > > >     <Java code2>
> > > > >   case 3:
> > > > >     <Java code3>
> > > > >     ...
> > > > >   }
> > > > >   }
> > > > >   ;
> > > > >
> > > > > But am I also allowed to write a parser rule containing a
> > > > > LBRACE[n] or is
> > > > it
> > > > > totally illegal ?
> > > > > e.g. :
> > > > >
> > > > > myRule :
> > > > >  ... LBRACE[1] ... -> ...
> > > > >  |... ARROWLBRACE ... -> ...
> > > > >  ;
> > > > >
> > > > > When attempting to do that, I have errors :
> > > > > "token reference LBRACE may not have parameters"
> > > > >
> > > > > Is there any good way to solve this type of problem ?
> > > > >
> > > > > Thanks in advance,
> > > > >
> > > > > JC
> > > > >
> > > > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > > > Unsubscribe:
> > > > > http://www.antlr.org/mailman/options/antlr-interest/your-
> > > > > email-address
> > > >
> > > >
> > > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > > Unsubscribe:
> > > > http://www.antlr.org/mailman/options/antlr-interest/your-email-add
> > > > ress
> > >
> > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > Unsubscribe:
> > > http://www.antlr.org/mailman/options/antlr-interest/your-
> > > email-address
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From jimi at temporal-wave.com  Thu Aug  5 09:34:22 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 5 Aug 2010 09:34:22 -0700
Subject: [antlr-interest] missing tokens and strange behaviour
	regarding	some chars
In-Reply-To: <OF013A3627.3D6B2DF3-ONC1257776.00341F35-C1257776.003516FD@esa.int>
References: <OFAFB9C097.A8486DB0-ONC1257774.0028FD08-C1257774.0029D87E@esa.int>
	<01e601cb3327$8f0cc130$ad264390$@temporal-wave.com>
	<OF013A3627.3D6B2DF3-ONC1257776.00341F35-C1257776.003516FD@esa.int>
Message-ID: <006001cb34bc$0f014ab0$2d03e010$@temporal-wave.com>

Those rules are ambiguous, so your lexer is broken. The sequence 'c' cannot
bother be TERMINAL1 and a TERMINAL2 as this grammar is context free. Hence
ANTLR happens to decide that TERMINAL2 is what you want. The lexer has to
return the same sequence of tokens as the same type every time. It is not
driven by the parser. The lexer runs and produces all the the tokens, then
the parser runs. 

 

So, you can only have:

 

TERMINAL : 'b' | 'c';

 

Or your TERMINAL2 should be a fragment rule, in which case you will always
get TERMINAL1. 

 

If a particular sequence of characters means something, then you should
process this with semantics (either during the parse or better yet, after
you have produced an AST that you can walk and analyze.

 

Jim

 

From: Nieves.Salor.Moral at esa.int [mailto:Nieves.Salor.Moral at esa.int] 
Sent: Thursday, August 05, 2010 2:40 AM
To: Jim Idle; cummings at kjchome.homeip.net
Cc: antlr-interest at antlr.org
Subject: RE: [antlr-interest] missing tokens and strange behaviour regarding
some chars

 


Thanks both Jim and Kevin 

Kevin, I tried to use more LEXER expressions but the problem when parsing
was that the TOKEN code that the LEXER sends is different than the more
general rule as they are no fragments but full lexer rules, so it was not
working. And yes It is giving me a real hard time. 

Jim, I am doing something similar to what you suggested me. But I found the
main error was in how I was mixing some TOKENS inside another LEXER rules
and not only fragments, so the codes that were being sended were not the
ones that I though would work because they were more general. Now the two
problems that I had are solved, now I am extending the grammar and keep on
testing it. 

Example 

a: TERMINAL1 rule2 

TERMINAL1: TERMINAL2 | 'b' 

TERMINAL2: 'c' 

If I tried to send c rule2 I though that it was going to work correctly, but
no because, as I discovered debugging (I don't know if this is a general
case) it finds that 'c' is a TERMINAL2 TOKEN and so, it doesn't match the
rule a. 

Is this assumption correct in general?? Because maybe for me It has worked
until now, but I can find another problem when extending, and I want to do a
robust compiler. 

Thanks for everything 

Nieves





"Jim Idle" <jimi at temporal-wave.com> 

03/08/2010 18:18 


To

<Nieves.Salor.Moral at esa.int>, <antlr-interest at antlr.org> 


cc

	

Subject

RE: [antlr-interest] missing tokens and strange behaviour regarding
some chars

 

		




Your expression is still defined in an LALR manner hence it will get
confused, you need to define it as a cascading set of rules with higher
precedence towards the bottom of the nest. That probably does not make a lot
of sense to you as words, so the best thing to do is to read through the
grammar for say Java or  C and look at the expression rules. Then basically
copy them and adapt themto your own operators.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [ <mailto:antlr-interest->
mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Nieves.Salor.Moral at esa.int
> Sent: Tuesday, August 03, 2010 12:37 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] missing tokens and strange behaviour regarding
> some chars
> 
> Hello to everyone!
> 
> I am new with ANTLR but not with compilers. Before I explain the problem
I'll
> try to explain a little bit the situation background.
> 
> I am trying to design for a custom language, first a syntax highlighter
and
> second a module that can store the information in a DB (so in essence
would
> be creating a compiler with its output as SQL queries).
> My input language is defined in EBNF, thus it has left-recursion and
> ambiguity. In order to solve it, I have changed it a little to avoid those
> problems and mostly I have managed it without using predicates or
> backtracking.
> 
> Working with ANTLR Works, I am debugging the grammar with different
> examples (just the parser), before adding the highlighting code in the
> StringTemplate. but I get these strange errors, mostly regarding
> NoViableAltException.
> 
> One problem for example is trying to define negative expressions with the
> simple_factor rule.
> So when I debug expressions like 500 or +500 in the simple_factor, I don't
get
> an error. But If I try -500, I get the NoViableAltException. Also if I
change - for
> another symbol like @, it also work when I try @500. I have traced all the
> possibilities in the different possibilities in simple_factor, but in no
one the
> first symbol can be a negative symbol.
> And I am lost as to why this can happen. I add the whole grammar because
it
> is quite big to paste it.
> 
> Another problem that appears is that sometimes tokens are missed when
> reading, so for example if I have an input beginning with 'initiate and
> confirm',  ANTLR reads 'conf' and loses the first characters. With the
same
> grammar that I have posted. One example of this problem goes with the
> input 'initiate and confirm sys_stop of SCOE_1553 of LLCS of EGSE of
System
> of ODB' with the rule initiate_and_confirm_step_statement.
> 
> Thanks in advance for any input
> 
> Nieves Salor Moral
> 
> addition_operator:  ADDITION_OPERATOR
>         ;
> 
> ADDITION_OPERATOR
>         :       '+'|'-'
>         ;
> 
>  UNSIGNED_INTEGER
>         :       DIGIT+
>         ;
> 
> simple_factor
>         :       addition_operator simple_factor
>         |       NEGATION_BOOLEAN_OPERATOR simple_factor
>         |       constant
>         |       '('expression ')'
>         |       function
>         |       object_property_request
>         |       OBJECT_TYPE partial_path
>         |       'ask user' '(' expression ('default' expression)? ')'
> ('expect' predefined_type)?
>         ;
> 
> constant:       BOOLEAN_CONSTANT
>         |       UNSIGNED_INTEGER ( numeric_constant|
> RELATIVE_TIME_CONSTANT)
>         |       RELATIVE_TIME_CONSTANT
>         |       string_constant
>         |       HEXADECIMAL_CONSTANT
>         ;
> real_constant
>         :       ('.' UNSIGNED_INTEGER)? ('e' addition_operator?
> UNSIGNED_INTEGER)?
>         ;
> 
> numeric_constant
>         :        real_constant engineering_units?
>         ;
> 





From jimi at temporal-wave.com  Thu Aug  5 09:55:06 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 5 Aug 2010 09:55:06 -0700
Subject: [antlr-interest] Problem using scopes in C Target
In-Reply-To: <66601EEAAA3D164E8BA1F5CB561D459BE45570@exbe4.intra.dlr.de>
References: <66601EEAAA3D164E8BA1F5CB561D459BE45570@exbe4.intra.dlr.de>
Message-ID: <007001cb34be$f4f77600$dee66200$@temporal-wave.com>

You will get that if you follow a rule path that does not create a scope on
the stack, but then try to access the stack anyway. There is nothing magic
that will prevent you doing that and nothing different about the generated C
than any other C. If you are using Linux, then use kcachegrind/valgrind and
you should see where your error is.

Jim 



> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Dagi.Troegner at dlr.de
> Sent: Thursday, August 05, 2010 4:53 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Problem using scopes in C Target
> 
> 
> 
> Hi,
> 
> 
> 
> I have a problem in using global or rule-based scopes in my C Target
Parser. I
> tried the following with a rule-based scope:
> 
> 
> 
> constraint
> 
> 
> 
> scope {
> 
> pANTLR3_STRING oclContext;
> 
> }
> 
>             :           contextDeclaration {oclContext =
$contextDeclaration.text;}
> 
>                         ((('static')? 'def' (NAME)? COLON
(defExpression)*)
> 
>             | (stereotype (NAME)? COLON oclExpression)
> 
>                         )+
> 
>   ;
> 
> 
> 
> The Grammar is correct and the Parser and Lexer in C are compilable
without
> any error reporting. The problem is that I get an access violation when
the
> starting rule of the parser is called. I get that exception as well when I
try the
> same with a global scope. I would appreciate any help! Thanks a lot!
> 
> 
> 
> Best regards,
> 
> Dagi
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From gerald at certiv.net  Thu Aug  5 11:17:19 2010
From: gerald at certiv.net (Gerald Rosenberg)
Date: Thu, 05 Aug 2010 11:17:19 -0700
Subject: [antlr-interest] Tree parser eats up DOWN node when	navigating
 optional child node
In-Reply-To: <004301cb34b8$cfa00a30$6ee01e90$@temporal-wave.com>
References: <4C58506B.2050506@openforce.com>	<023801cb3330$d3b06270$7b112750$@temporal-wave.com>	<4C58D4EC.40000@junkwallah.org>	<031601cb33fb$d2e9d9e0$78bd8da0$@temporal-wave.com>	<4C59EC91.6050406@junkwallah.org>	<4C59F4C1.30305@certiv.net>	<4C5A040D.6000706@junkwallah.org>	<4C5A4750.80302@certiv.net>
	<004301cb34b8$cfa00a30$6ee01e90$@temporal-wave.com>
Message-ID: <4C5B002F.6050609@certiv.net>

  Indeed.  We should have pointed that out in response to the OP's 
initial post.

Best,
Gerald

------ Original Message (Thursday, August 05, 2010 9:11:07 AM) From: Jim 
Idle ------
Subject: Re: [antlr-interest] Tree parser eats up DOWN node when navigating
optional child node
> The root node of any tree needs to have a type, so ^( ^( makes no sense as
> what is the first root supposed to be?
>
> Jim
>
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Gerald Rosenberg
>> Sent: Wednesday, August 04, 2010 10:09 PM
>> To: Junkman
>> Cc: antlr-interest at antlr.org
>> Subject: Re: [antlr-interest] Tree parser eats up DOWN node when
>> navigating optional child node
>>
>>    ------ Original Message (Wednesday, August 04, 2010 5:21:33
>> PM) From: Junkman ------
>> Subject: Re: [antlr-interest] Tree parser eats up DOWN node when
>> navigating optional child node
>>> You wrote "AST ^( ^( PARENT A ) B )".  Can you describe the tree this
>>> notates?  I can see it as a node sequence, but I don't know what tree
>>> structure it is describing.
>>>
>>> Thanks for the reply.
>>>
>>> Jay
>>>
>> The AST
>>
>> ^( ^( PARENT A? ) B? )
>>
>> should implement as
>>
>> ( ( PARENT Token.DOWN A? Token.UP ) Token.DOWN B? Token.UP )
>>
>> but is actually
>>
>> ( PARENT Token.DOWN A? B? Token.UP )
>>
>> Because parent_a is the root of parent, the parser is (for some reason)
> not
>> actually generating the middle Token.UP Token.DOWN sequence.  That
>> explains why P and PA work, but PB and PAB do not - after matching for A?,
>> the tree parser is looking for UP, but finding B.  Not sure why Antlr is
> doing
>> this - not expected.
>>
>> Changing A and/or B to non-optional does not change this behavior.
>>
>> If, however, you change the parent rule to
>>
>> parent : parent_a B? ->  ^( M parent_a B? )  ;
>>
>> where M is an imaginary token (and make the corresponding change to the
>> tree grammar), all four patterns will parse and match as expected:
>>
>> AST:
>>
>> ^( M ^(PARENT A? ) B? )
>>
>> properly implements as
>>
>> ( ( M Token.DOWN PARENT A? Token.UP ) Token.DOWN B? Token.UP )
>>
>>
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>> email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From j at junkwallah.org  Thu Aug  5 11:50:07 2010
From: j at junkwallah.org (Junkman)
Date: Thu, 05 Aug 2010 11:50:07 -0700
Subject: [antlr-interest] Tree parser eats up DOWN node when	navigating
 optional child node
In-Reply-To: <4C5A4750.80302@certiv.net>
References: <4C58506B.2050506@openforce.com>	<023801cb3330$d3b06270$7b112750$@temporal-wave.com>	<4C58D4EC.40000@junkwallah.org>
	<031601cb33fb$d2e9d9e0$78bd8da0$@temporal-wave.com>
	<4C59EC91.6050406@junkwallah.org> <4C59F4C1.30305@certiv.net>
	<4C5A040D.6000706@junkwallah.org> <4C5A4750.80302@certiv.net>
Message-ID: <4C5B07DF.5020503@junkwallah.org>

Gerald Rosenberg wrote:
>  ------ Original Message (Wednesday, August 04, 2010 5:21:33 PM) From:
> Junkman ------
> Subject: Re: [antlr-interest] Tree parser eats up DOWN node when navigating
> optional child node
>>
>> You wrote "AST ^( ^( PARENT A ) B )".  Can you describe the tree this
>> notates?  I can see it as a node sequence, but I don't know what tree
>> structure it is describing.
>>
>> Thanks for the reply.
>>
>> Jay
>>
> 
> The AST
> 
> ^( ^( PARENT A? ) B? )
> 
> should implement as
> 
> ( ( PARENT Token.DOWN A? Token.UP ) Token.DOWN B? Token.UP )
> 
> but is actually
> 
> ( PARENT Token.DOWN A? B? Token.UP )
> 
> Because parent_a is the root of parent, the parser is (for some reason)
> not actually generating the middle Token.UP Token.DOWN sequence.

It's because the parser generates trees, not node streams.

UP and DOWN nodes are marker nodes injected while flattening a tree, and
the resulting node stream naturally will contain neither empty DOWN-UP
sequence (edges to non-existing node) nor empty UP-DOWN sequence between
sibling nodes (duplicate edges).

So the parser's tree generation behavior makes sense.  What's new to me
is that tree parser interprets the rewrite expression differently (e.g.,
expecting the empty marker node sequences), and I think that is contrary
to TDAR's suggestion that tree parser rules, in a large part, can be
constructed simply by preserving the rewrite expressions from the parser
rules.

BTW, I found an open bug issue that may be related:

http://www.antlr.org/jira/browse/ANTLR-391

It's reported by and assigned to Terrance, so perhaps he can comment on
this?

> explains why P and PA work, but PB and PAB do not - after matching for
> A?, the tree parser is looking for UP, but finding B.  Not sure why
> Antlr is doing this - not expected.
> 
> Changing A and/or B to non-optional does not change this behavior.
> 
> If, however, you change the parent rule to
> 
> parent : parent_a B? -> ^( M parent_a B? )  ;
> 
> where M is an imaginary token (and make the corresponding change to the
> tree grammar), all four patterns will parse and match as expected:
> 
> AST:
> 
> ^( M ^(PARENT A? ) B? )
> 
> properly implements as
> 
> ( ( M Token.DOWN PARENT A? Token.UP ) Token.DOWN B? Token.UP )
> 
> 

Yes, but this is addressing a different issue - I want the tree parser
to recognize my AST, rather than changing the AST to fit the tree parser.

For now, though, I think I get the gist of how tree parser interprets
the rewrite expression (differently than parser), so I will have to
update my tree parser grammar accordingly, although it's odd that my
current (i.e. old) tree parser generates relatively few error messages...

Thanks for your help,

Jay

PS: This list doesn't seem the chattiest of mailing list, but please
chime in if I have it wrong above, or if you have other insight on the
subject.

From gerald at certiv.net  Thu Aug  5 12:15:54 2010
From: gerald at certiv.net (Gerald Rosenberg)
Date: Thu, 05 Aug 2010 12:15:54 -0700
Subject: [antlr-interest] Tree parser eats up DOWN node when	navigating
 optional child node
In-Reply-To: <4C5B07DF.5020503@junkwallah.org>
References: <4C58506B.2050506@openforce.com>	<023801cb3330$d3b06270$7b112750$@temporal-wave.com>	<4C58D4EC.40000@junkwallah.org>
	<031601cb33fb$d2e9d9e0$78bd8da0$@temporal-wave.com>
	<4C59EC91.6050406@junkwallah.org> <4C59F4C1.30305@certiv.net>
	<4C5A040D.6000706@junkwallah.org> <4C5A4750.80302@certiv.net>
	<4C5B07DF.5020503@junkwallah.org>
Message-ID: <4C5B0DEA.10002@certiv.net>


------ Original Message (Thursday, August 05, 2010 11:50:07 
AM) From: Junkman ------
Subject: Re: [antlr-interest] Tree parser eats up DOWN node when navigating
optional child node
> Gerald Rosenberg wrote:
>>   ------ Original Message (Wednesday, August 04, 2010 5:21:33 PM) From:
>> Junkman ------
>> Subject: Re: [antlr-interest] Tree parser eats up DOWN node when navigating
>> optional child node
>>> You wrote "AST ^( ^( PARENT A ) B )".  Can you describe the tree this
>>> notates?  I can see it as a node sequence, but I don't know what tree
>>> structure it is describing.
>>>
>>> Thanks for the reply.
>>>
>>> Jay
>>>
>> The AST
>>
>> ^( ^( PARENT A? ) B? )
>>
>> should implement as
>>
>> ( ( PARENT Token.DOWN A? Token.UP ) Token.DOWN B? Token.UP )
>>
>> but is actually
>>
>> ( PARENT Token.DOWN A? B? Token.UP )
>>
>> Because parent_a is the root of parent, the parser is (for some reason)
>> not actually generating the middle Token.UP Token.DOWN sequence.
> It's because the parser generates trees, not node streams.
>
> UP and DOWN nodes are marker nodes injected while flattening a tree, and
> the resulting node stream naturally will contain neither empty DOWN-UP
> sequence (edges to non-existing node) nor empty UP-DOWN sequence between
> sibling nodes (duplicate edges).
Yet it does validly produce

( ( M Token.DOWN PARENT A? Token.UP ) Token.DOWN B? Token.UP )

As pointed out by Jim, the "sub-rule as root" is the source of the problem you are encountering.



From aj at member.fsf.org  Thu Aug  5 13:59:56 2010
From: aj at member.fsf.org (Andreas Jonsson)
Date: Thu, 05 Aug 2010 22:59:56 +0200
Subject: [antlr-interest] Compression of dfa tables
In-Reply-To: <004901cb34ba$4a087220$de195660$@temporal-wave.com>
References: <4C5A7C45.2070903@member.fsf.org>
	<004901cb34ba$4a087220$de195660$@temporal-wave.com>
Message-ID: <4C5B264C.9090906@member.fsf.org>

2010-08-05 18:21, Jim Idle skrev:
> The size of the DFA tables is known about, but despite cache misses, you
> won't notice the effect unless you have huge inputs, in which case there
> will be plenty of other cache misses anyway. However, when you end up with a
> large DFA set, it usually (not always) means that the lexer can be specified
> 'better' (in terms of allowing ANTLR to deal with it better).
>
>    
That sounds reassuring.  But I thought that the cache misses was mostly 
depending on how varying the input is?

> Can you post your grammar so we can see it?
>
>    
Certainly.  I'll post what I have below.  Funny thing is that the size 
of the lexer have suddenly decreased to 2MB.

I have taken upon me the perhaps foolish task of attempting to write a 
parser for MediaWiki. The wikitext have the property that any sequence 
of bytes is valid input, and MediaWiki's wikitext is inherently not 
context free.  So, I'm using the antlr generated parser as a front-end 
that interacts with a context object.

I'm currently working on the table parsing.  If anyone have any ideas on 
how to do things differently, I would be greatful to hear it.

/Andreas

/*
  * Copyright 2010  Andreas Jonsson
  *
  * This file is part of libmwparser.
  *
  * Libmwparser is free software: you can redistribute it and/or modify
  * it under the terms of the GNU General Public License as published by
  * the Free Software Foundation, either version 3 of the License, or
  * (at your option) any later version.
  *
  * This program is distributed in the hope that it will be useful,
  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  * GNU General Public License for more details.
  *
  * You should have received a copy of the GNU General Public License
  * along with this program.  If not, see <http://www.gnu.org/licenses/>.
  */

grammar mw;

options {
     language = C;
     k = 1;
}

@lexer::preincludes {
struct MWKEYVALUE_struct;
}

@lexer::includes {
#include <mwparsercontext.h>
}

@parser::includes {
#include <mwparsercontext.h>
}

@lexer::members{
#define X ((MWPARSERCONTEXT*)(ctx->pLexer->super))

#define BOL (LEXER->input->charPositionInLine <= 0)

static pANTLR3_COMMON_TOKEN newToken(pANTLR3_TOKEN_FACTORY factory, 
ANTLR3_UINT32 type, pANTLR3_STRING text)
{
     pANTLR3_COMMON_TOKEN t = factory->newToken(factory);
     t->setType(t, type);
     t->setText(t, text);
     return t;
}

#define D(msg) (fputs(msg, stderr), fputc('\n', stderr), 
printLexerInfo(LEXER), true)

#define NEW_TOK(type, text) (newToken(LEXSTATE->tokFactory, type, text))
#define SUBSTR1(start) (INPUT->substr(INPUT, start, GETCHARINDEX() - 1))
#define SUBSTR2(start, end) (INPUT->substr(INPUT, start, end))
}

@parser::members{
#define X ((MWPARSERCONTEXT*)(ctx->pParser->super))
#define INLINE_ELEMENT(code) if (!X->inlinePrescan) { code } else { 
X->onInlineTokenPrescan(X, LT(-1)); }

#define D(msg) (fputs(msg, stderr), fputc('\n', stderr), 
printParserInfo(PARSER), true)

}

article: NEWLINE* blocks NEWLINE* EOF
     ;

blocks: block ((NEWLINE)=> NEWLINE)*  blocks?
     ;

block: paragraph | table
     ;

paragraph: {X->beginParagraph(X);} inline_text ((NEWLINE 
inline_element)=> NEWLINE inline_text)* {X->endParagraph(X);}
     ;

inline_text: inline_prescan actual_inline_text
     ;

inline_prescan
@init {
     ANTLR3_MARKER mark;
}:
         {
             mark = MARK();
             X->beginInlinePrescan(X);
         }
         ((inline_element)=> inline_element)+
         {
             X->endInlinePrescan(X);
             REWIND(mark);
         }

     ;

actual_inline_text: ((inline_element)=>inline_element)+
     ;

inline_element: (format|special|space|word|nowiki|html_entity)
     ;

special: (SPECIAL | apostrophes) {INLINE_ELEMENT(X->onSpecial(X, $text);)}
     ;

space: ((SPACE_TAB)=> SPACE_TAB)+  {INLINE_ELEMENT(X->onSpace(X, $text);)}
     ;

word: WORD {INLINE_ELEMENT(X->onWord(X, $text);)}
     ;

html_entity: HTML_ENTITY {INLINE_ELEMENT(X->onHTMLEntity(X, $text);)}
     ;

newline: NEWLINE  {INLINE_ELEMENT(X->onNewline(X);)}
     ;

nowiki : NOWIKI {INLINE_ELEMENT(X->onNowiki(X, $text);)}
     ;

format: ({!X->inlinePrescan}?=> (bold | italic)  
{X->onConsumedApostrophes(X);});
apostrophes: (apostrophe)+ { if(X->inlinePrescan) { 
X->onApostrophesPrescan(X, $text); } };

bold:   {X->takeBold}?=> (begin_bold   | end_bold);
italic: {X->takeItalic}?=> (begin_italic | end_italic);
apostrophe: {X->inlinePrescan}?=> A
     |       {X->takeApostrophe}?=> A {X->onConsumedApostrophes(X);} ;

begin_bold:   {!X->inBold}?=>   A A A {X->beginBold(X);}  ;
end_bold:     { X->inBold}?=>   A A A {X->endBold(X);}    ;
begin_italic: {!X->inItalic}?=> A A   {X->beginItalic(X);};
end_italic:   { X->inItalic}?=> A A   {X->endItalic(X);}  ;

table: begin_table table_rows end_table
     ;

begin_table: begin = BEGIN_TABLE NEWLINE* (garbage_inline_text 
NEWLINE*)* {X->beginTable(X, $begin->custom);}
     ;

garbage_inline_text: inline_text
     ;

end_table: (END_TABLE | EOF) {X->endTable(X);}
     ;

table_rows: ((~(BEGIN_TABLE_COLUMN|TABLE_ROW_SEPARATOR))=> table_first_row)?
         ((TABLE_ROW_SEPARATOR)=> table_row)*
     ;

table_first_row: table_row_content
     ;

table_row:  TABLE_ROW_SEPARATOR table_row_content
     ;

table_row_content: table_columns
     ;

table_columns: table_column*
     ;

table_column: BEGIN_TABLE_COLUMN
     ;

NOWIKI
     @init  {
         ANTLR3_MARKER nowikiStart;
         ANTLR3_MARKER nowikiEnd;
     }
     :
         '<nowiki>'
         ((SPACE_CHAR|NEWLINE_CHAR) => (SPACE_CHAR|NEWLINE_CHAR))*
         { nowikiStart = GETCHARINDEX(); }
         NOWIKI_BODY[&nowikiEnd]
         { SETTEXT(SUBSTR2(nowikiStart, nowikiEnd)); }
     ;


fragment
NOWIKI_BODY[ANTLR3_MARKER *nowikiEnd]:
         (((SPACE_CHAR|NEWLINE_CHAR)* ('</nowiki>'|EOF))=>
           (SPACE_CHAR|NEWLINE_CHAR)* ('</nowiki>'|EOF)   )
     |
         ({ *nowikiEnd = GETCHARINDEX(); } . ) NOWIKI_BODY[nowikiEnd]

     ;

BEGIN_TABLE @init{pANTLR3_VECTOR attrs = NULL;}:  {BOL || 
X->prevTokenWasIndent(X, GETCHARINDEX())}?=>
         SPACE_TAB* '{|' { X->onBeginTableToken(X);}
         ATTRIBUTES[&attrs]
         { CUSTOM = attrs; }
     ;

END_TABLE: {BOL && X->inTable(X)}?=>
         (SPACE_TAB)* '|}' {X->onEndTableToken(X);}
     ;

TABLE_ROW_SEPARATOR @init{pANTLR3_VECTOR attrs = NULL;}:
     {BOL && X->inTable(X)}?=> ((SPACE_TAB)* '|-') => (SPACE_TAB)* '|' 
(('-')=>'-')+
         ATTRIBUTES[&attrs]
         { CUSTOM = attrs; }
     ;

BEGIN_TABLE_COLUMN @init{pANTLR3_VECTOR attrs = NULL;}: {BOL && 
X->inTable(X)}?=>
         (SPACE_TAB)* '|' {attrs = NULL;} ATTRIBUTE_LIST[&attrs] ('|' 
~('|'))=>
         { CUSTOM = attrs; }
      ;

fragment
ATTRIBUTES[pANTLR3_VECTOR *attrs]:
         ((SPACE_TAB)=> SPACE_TAB)*
         ((ATTRIBUTE_LIST[NULL])=> ATTRIBUTE_LIST[attrs])?
         ((~(NEWLINE_CHAR))=> .)* (NEWLINE | EOF)
     ;

fragment
ATTRIBUTE_LIST[pANTLR3_VECTOR *attrs] @init{MWKEYVALUE attr;}:
     ( (ATTRIBUTE[NULL] (SPACE_TAB)+ ATTRIBUTE[NULL])=>
       ATTRIBUTE[&attr] (SPACE_TAB)+ ATTRIBUTE_LIST[attrs]
     | ATTRIBUTE[&attr] )
     {
         MWKEYVALUE *p = ANTLR3_MALLOC(sizeof(*p));
         *p = attr;
         if (*attrs == NULL) {
             *attrs=X->vectorFactory->newVector(X->vectorFactory);
         }
         (*attrs)->add(*attrs, p, ANTLR3_FREE_FUNC);
     }
   ;

fragment
ATTRIBUTE[struct MWKEYVALUE_struct *attr]:
      ATTRIBUTE_NAME[&attr->key] SPACE_TAB* '=' SPACE_TAB* 
ATTRIBUTE_VALUE[&attr->value];

fragment
ATTRIBUTE_NAME[pANTLR3_STRING *name] @init{ ANTLR3_MARKER start; }:
         { start = GETCHARINDEX(); }
         (('xml:'|'xmlns:')? (LETTER|DECIMAL_DIGIT))+
         { *name = SUBSTR1(start); }
      ;

fragment
ATTRIBUTE_VALUE[pANTLR3_STRING *value] @init{ ANTLR3_MARKER start; }:
         { start = GETCHARINDEX(); }
         (
             ('"'
                { start = GETCHARINDEX(); }
                     ~('"' |'<')+
                { *value = SUBSTR1(start);}
              '"' )
         |  ('\''
               { start = GETCHARINDEX(); }
                     ~('\''|'<')+
               { *value = SUBSTR1(start);}
             '\'')
          // Regexp from Sanitizer.php: 
[a-zA-Z0-9!#$%&()*,\\-.\\/:;<>?@[\\]^_`{|}~]
        | { start = GETCHARINDEX(); }
        |
             
(LETTER|DECIMAL_DIGIT|'!'|'#'|'$'|'%'|'&'|'('|')'|'*'|','|'-'|'.'
              
|'/'|':'|';'|'<'|'>'|'?'|'@'|'['|']'|'^'|'_'|'`'|'{'|'|'|'}'|'~')+
          { *value = SUBSTR1(start);}
         //  This case (from Sanitizer.php) can never be matched as it 
is already covered by
         //  the previous case:
         //  (\#[0-9a-fA-F]+) # Technically wrong, but lots of
         //                   # colors are specified like this.
         //                   # We'll be normalizing it.
         //    | '#' HEX_DIGIT+
       )
    ;

HTML_ENTITY:
                               '&'   HTML_ENTITY_CHARS ';'
                             | '&#'  DECIMAL_NUMBER    ';'
                             | '&#x' HEX_NUMBER        ';'
     ;

WORD: CHAR+
     ;

SPACE_TAB: /* { X->spaceTabEnabled}?=> */ (SPACE_CHAR | TAB_CHAR)+ ;
//SPACE:     {!X->spaceTabEnabled}?=>  SPACE_CHAR+             ;
//TAB:       {!X->spaceTabEnabled}?=>  TAB_CHAR+               ;


NEWLINE:             '\r\n' | '\n\r' | NEWLINE_CHAR {X->onNewlineToken(X);};

SPECIAL: SPECIAL_SYMBOL+
     ;

A: '\'';

fragment CHARACTER:           WHITESPACE_CHAR | NON_WHITESPACE_CHAR | 
HTML_ENTITY;

fragment WHITESPACE:          WHITESPACE_CHAR+;
fragment WHITESPACE_CHAR:     SPACE_CHAR ;
fragment TAB_CHAR:            '\t' | '\xB0';
fragment SPACE_CHAR:          ' ';
fragment NEWLINE_CHAR:        '\n' | '\r';
fragment NEWLINES:            NEWLINE+;
fragment NON_WHITESPACE_CHAR: ~(SPACE_CHAR | TAB_CHAR | NEWLINE_CHAR);
fragment LETTER:              UCASE_LETTER | LCASE_LETTER;
fragment HTML_ENTITY_CHARS:   HTML_ENTITY_CHAR+;
fragment HTML_ENTITY_CHAR:    UCASE_LETTER | LCASE_LETTER | DECIMAL_DIGIT;
fragment UCASE_LETTER:        'A'..'Z';
fragment LCASE_LETTER:        'a'..'z';
fragment HTML_UNSAFE_SYMBOL:  '<' | '>' | '&';
fragment UNDERSCORE:          '_';
fragment DECIMAL_NUMBER:      DECIMAL_DIGIT+;
fragment DECIMAL_DIGIT:       '0'..'9';
fragment HEX_NUMBER:          HEX_DIGIT+;
fragment HEX_DIGIT:           DECIMAL_DIGIT | ('A'..'F') | ('a'..'f');
fragment SPECIAL_SYMBOL:      '!'|'"'|'#'|'$'|'%'|'&'|'('|
                               ')'|'*'|'+'|','|'-'|'.'|'/'|':'|
                               ';'|'<'|'='|'>'|'?'|'@'|'['|'\\'|
                               ']'|'^'|'_'|'`'|'{'|'|'|'}'|'~';

fragment
CHAR:  ~(SPECIAL_SYMBOL|SPACE_CHAR|TAB_CHAR|NEWLINE_CHAR|A);


From dervin.thunk at gmail.com  Thu Aug  5 20:41:57 2010
From: dervin.thunk at gmail.com (Dervin Thunk)
Date: Thu, 5 Aug 2010 23:41:57 -0400
Subject: [antlr-interest] grammar problem with recursion?
Message-ID: <AANLkTi=1tJujvs-beWK_VqK_jgW6=kqb4DS8ydrYma53@mail.gmail.com>

Hello. I am new to ANTLR. Below is a grammar I wrote, and I'm trying to
test it with the following string, but it just stops before it even
consumes the n_pp... identifier, so it stops at the "conjunction"
rule. Any idea about what I could be doing wrong?

<teststring below>
s_n2 := n_pp_c-pl-crd_le & [ STEM < "100s" >,  SYNSEM [ LKEYS [
--COMPKEY _of_p_sel_rel,KEYREL.CARG "100" ], PHON.ONSET con ] ].


grammar tdl;

options
{
       language=Java;
       backtrack=true;
}

type_def
       :       type avm_def '.'
       ;

avm_def
       :       ':=' conjunction
       ;

conjunction
       :       term
       | (term '&' conjunction)
       ;

term
       :       type
       | STRING
       | feature_term
       | correference
       | list
       | diff_list
       ;

type
       :       ID
       ;

feature_term
       : '[' ']'
       | ('[' attr_val_list ']')
       ;

attr_val_list
       :       attr_val | (attr_val ',' attr_val)
       ;


attr_list
       : attribute
       | (attribute'.'attr_val_list)
       ;
attr_val
       : attr_list conjunction
       ;


attribute
       : ID
       ;

correference
       : '#' ID
       ;

diff_list
       :       '<!' '!>'
       | ('<!' conjunction_list '!>')
       ;

conjunction_list
       : conjunction
       | (conjunction ',' conjunction_list)
       ;

list
       :       '<' '>' | ('<' conjunction_list '>')
       | ('<' conjunction_list '>' ',' '...')
       |       ('<' conjunction_list '.' conjunction '>')
       ;


lex_entry
       :       lex_id avm_def
       ;

lex_id
       : ID
       ;


rule_entry
       :       rule_id avm_def
       ;

rule_id
       : ID
       ;

ID  :   ('a'..'z'|'A'..'Z'|'_'|'-') ('a'..'z'|'A'..'Z'|'0'..'9'|'_'|'-')*
   ;

COMMENT
   :   '//' ~('\n'|'\r')* '\r'? '\n' {$channel=HIDDEN;}
   |   ';' ~('\n'|'\r')* '\r'? '\n' {$channel=HIDDEN;}
   |   '/*' ( options {greedy=false;} : . )* '*/' {$channel=HIDDEN;}
   | '#|' ( options {greedy=false;} : . )* '|#' {$channel=HIDDEN;}
   ;

STRING
   :  '"' ( ESC_SEQ | ~('\\'|'"') )* '"' |
      '`' ( ESC_SEQ | ~('\\'|'"') )*
   ;

fragment
HEX_DIGIT : ('0'..'9'|'a'..'f'|'A'..'F') ;

fragment
ESC_SEQ
   :   '\\' ('b'|'t'|'n'|'f'|'r'|'\"'|'\''|'\\')
   |   UNICODE_ESC
   |   OCTAL_ESC
   ;

fragment
UNICODE_ESC
   :   '\\' 'u' HEX_DIGIT HEX_DIGIT HEX_DIGIT HEX_DIGIT
   ;
fragment
OCTAL_ESC
   :   '\\' ('0'..'3') ('0'..'7') ('0'..'7')
   |   '\\' ('0'..'7') ('0'..'7')
   |   '\\' ('0'..'7')
   ;

From cummings at kjchome.homeip.net  Thu Aug  5 21:03:47 2010
From: cummings at kjchome.homeip.net (Kevin J. Cummings)
Date: Fri, 06 Aug 2010 00:03:47 -0400
Subject: [antlr-interest] grammar problem with recursion?
In-Reply-To: <AANLkTi=1tJujvs-beWK_VqK_jgW6=kqb4DS8ydrYma53@mail.gmail.com>
References: <AANLkTi=1tJujvs-beWK_VqK_jgW6=kqb4DS8ydrYma53@mail.gmail.com>
Message-ID: <4C5B89A3.6080505@kjchome.homeip.net>

On 08/05/2010 11:41 PM, Dervin Thunk wrote:
> Hello. I am new to ANTLR. Below is a grammar I wrote, and I'm trying to
> test it with the following string, but it just stops before it even
> consumes the n_pp... identifier, so it stops at the "conjunction"
> rule. Any idea about what I could be doing wrong?

> conjunction
>        :       term
>        | (term '&' conjunction)
>        ;

Should be:

conjunction
	: term ('&' term)*
	;

Now you don't have any recursion....

-- 
Kevin J. Cummings
kjchome at rcn.com
cummings at kjchome.homeip.net
cummings at kjc386.framingham.ma.us
Registered Linux User #1232 (http://counter.li.org)

From gerald at certiv.net  Thu Aug  5 21:24:50 2010
From: gerald at certiv.net (Gerald Rosenberg)
Date: Thu, 05 Aug 2010 21:24:50 -0700
Subject: [antlr-interest] grammar problem with recursion?
In-Reply-To: <AANLkTi=1tJujvs-beWK_VqK_jgW6=kqb4DS8ydrYma53@mail.gmail.com>
References: <AANLkTi=1tJujvs-beWK_VqK_jgW6=kqb4DS8ydrYma53@mail.gmail.com>
Message-ID: <4C5B8E92.60802@certiv.net>


------ Original Message (Thursday, August 05, 2010 11:41:57 
PM) From: Dervin Thunk ------
Subject: [antlr-interest] grammar problem with recursion?
> Hello. I am new to ANTLR. Below is a grammar I wrote, and I'm trying to
> test it with the following string, but it just stops before it even
> consumes the n_pp... identifier, so it stops at the "conjunction"
> rule. Any idea about what I could be doing wrong?
>
>
> conjunction
>         :  term
>         | (term '&' conjunction)
>         ;
Once 'term' gets matched in alt 1, Antlr has no where to go next.  You 
could reverse the order of the alts, but better would be

         conjunction : term ( '&' conjunction )? ;

You have this problem in most of your compound rules.  There is an Antlr 
Wiki page on left factoring that you should read.



From sadie at kind.ocn.ne.jp  Thu Aug  5 22:08:55 2010
From: sadie at kind.ocn.ne.jp (sunao furukawa)
Date: Fri, 6 Aug 2010 14:08:55 +0900
Subject: [antlr-interest] About My Verilog HDL grammar
In-Reply-To: <F5EC861E5D994BC4A6C353DC5012861E@sunaoPC>
References: <F5EC861E5D994BC4A6C353DC5012861E@sunaoPC>
Message-ID: <FB73F75C804D499D958021546CD109B7@sunaoPC>

I amended an order of grammar rule "primary".
Parsing is successful.
The other input is not tried.
This grammar file does not support Verilog HDL 2001,
Because "generate" and "genver" cannot be parsed.
But EBNF of "http://www.externsoft.ch/download/verilog.html" describe "EBNF 
Syntax: Verilog 2001".
So,this grammar file  supports subset of Verilog HDL 2001.
By the way ,that EBNF is freeware.
I attached grammar file amended.
But directive is not described.
So,this grammar cannot parse all Verilog HDL file.

Thanks.

----- Original Message ----- 
From: "sunao furukawa" <sadie at kind.ocn.ne.jp>
To: <antlr-interest at antlr.org>
Sent: Sunday, August 01, 2010 12:03 PM
Subject: [antlr-interest] About My Verilog HDL grammar


> Hello!
>
> I write Verilog HDL grammar.
> I referred http://www.externsoft.ch/download/verilog.html .
> I debugging this grammar.
> But,primary does not select suitable alternative.
> Antlrworks emit NoViableAltException(0@[null]).
>
> Input Text:
>
> module adder4(in_data1, in_data2, out_data, cy);
>    input  [3:0] in_data1, in_data2;
>    output [3:0] out_data;
>    output       cy;
>
>    wire   [4:0] rslt;
>
>    assign rslt     = in_data1 + in_data2;
>    assign cy       = rslt[4];
>    assign out_data = rslt[3:0];
>
> endmodule
>
> Red letter is emitted at [4] in rslt[4] and at [3:0] in rslt[3:0}.
>
> Syntax primary,below,
>
> primary :  number
> | identifier
> | identifier'[' expression ']'
> | identifier'[' msb_constant_expression ':' lsb_constant_expression ']'
> | concatenation
> | multiple_concatenation
> | function_call
> | '(' mintypmax_expression ')'
> ;
>
> I want to select "identifier'['expression']'" or "identifier'['
> msb_constant_expression ':' lsb_constant_expression ']'".
> But Antlrworks select "identifier".
>
> I will attach my Verilog HDL grammar file.
> Start Symbol (source_text).
> I don't know what to do.
> Help me please.
>
> Thanks.
>


--------------------------------------------------------------------------------


>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: 
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: veriloghdl2.g
Type: application/octet-stream
Size: 26645 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20100806/5efe7ade/attachment.obj 

From valliantster at gmail.com  Thu Aug  5 22:49:39 2010
From: valliantster at gmail.com (denstar)
Date: Thu, 5 Aug 2010 23:49:39 -0600
Subject: [antlr-interest] General questions about something complicated
Message-ID: <AANLkTinP32Kk3oFHk564=qZOQdUfFJF3M727HBAVu-rx@mail.gmail.com>

Hello!

A little backstory (this will be a long message):

I've been working on an editor for my favorite language, CFML, on and
off for years now.  The editor is based on Eclipse.

The way we parse code is this hand-made kludge job.  I want to take
things to a higher level, so I thought, "hey, this ANTLR thing looks
pretty nifty!".  That was like a couple years ago.

I've messed with writing a grammar, on and off, and haven't got far.
Someone recently said they'd buy me The Book, which will probably
help, but what I have to do seems pretty hard, and just lurking on
this list for a bit makes me feel even more out of my depth, which
isn't "teh awesome", to to speak.

I'm not really too concerned with being out of my depth, as the kinds
of deep water sharks/tentacled beasts I fear don't live on the
internet, but I do wonder about the best way to achieve my goal.
Forgive my probably lame questions:

An example of the source code that I have to parse (it's a
markup/scripting language, mixed with HTML sometimes, similar to PHP):

<html>
	<cffunction name="test">
		<cfargument name="fred" test="test"/>
		<cfscript>
			WriteOutput("FREDFREDFRED"); somethinghere = 343;
		</cfscript>
		<cfif thisisatest is 1>
			<cfoutput>#fred#</cfoutput>
		</cfif>
	</cffunction>
	<cfscript>
	  todaysDate = now();
	
	  function doSomething(String doWhat) {
	  	var done = arguments.doWhat & " later";
	  	return done;
	  }
	  function returnSomething(theThing) {
	  	return theThing;
	  }
	</cfscript>

	<cfset fred = 2/>
	<cfset bob = doSomething("build a parser") />
	<cfset test(fred)/>
	<cffunction name="test" >
		<cfset var woo="hoo" />
		<cfargument name="test" default="#WriteOutput("">"")#"/> <!--- I
think this is valid! --->
	</cffunction>
<body>
  <cf_myCustomTag action="rock">
	<cfoutput>
		This is a <b>test</b> #fred#
	</cfoutput>
	<table>
		<tr>
			<td style="<cfoutput>#somethinghere#</cfoutput>">asdfasdf</td>
			<td style="fred"></td>
		</td>
	</table>
</body>
</html>

That's some of the nastiest bastard data as an example.  Generally
it's far better than that.

I wrote something that uses the Jericho HTML lib to parse the tags,
and that works well enough, I guess.  When I hit a <cfscript> tag I
hand it off to another (broken) parser.

The cfscript stuff is ECMAScript-ish, so I think I can modify an
existing grammar and get the broken parser going (I don't have as much
trouble modifying stuff as creating it), but how would you guys go
about handling parsing something like this?

Should I try to write an overall ANTLR grammar for everything, maybe
with a sub-grammar-type-deal for the script stuff?  Or just say screw
it, and stick to using ANTLR for just the ECMAScript-like portion?

It gets a lot more complicated than the above code example, too, even
for just the script stuff.  There are a few CFML engines, and some
care about semi colons and some don't (which I've seen handled
elsewhere, so not too worried about), and some can do different "for"
loops, etc. (more worried about things like this).  They change by
version, as well, and I'd like to support different versions in a
perfect world.

I have to be honest-- I didn't know anything about ASTs and Lexing and
Parsing a few years ago.  Maybe in some abstract form, but not like I
do now (a lot more, relatively).  And I *still* don't think I've
totally (or even "very much") grokked it, or I wouldn't be asking
these questions.

I'm wondering if I'm insane for thinking about using ANTLR for the
"whole shebang".  In the few years that I've been watching antlr, lots
of nifty stuff has been added, which makes me think that maybe it's
not as crazy an idea as it seemed at one time, at least.

But it's probably too much to bite off at once, even if it's not a
crazy idea, neh?  Maybe I should stick to futsing with one of the
existing EMCA grammars for the script-like portions, and try to wrap
my head around antlr and parsing in general more first?  Start from
scratch and actually learn this stuff?

I'll probably be the one working on the grammar in the future, so tho
I'm tempted to try to get someone to donate time/money==grammar, I
want to learn.  But I don't have another few years to produce, so
what's the practical approach, given this long and
not-very-well-expressed background?

Apologies for framing my questions as poorly as I fear I have.  =)

:Den

-- 
If all mankind minus one were of one opinion, mankind would be no more
justified in silencing that one person than he, if he had the power,
would be justified in silencing mankind.
John Stuart Mill

From kenklose at gmail.com  Thu Aug  5 23:16:06 2010
From: kenklose at gmail.com (Ken Klose)
Date: Fri, 6 Aug 2010 02:16:06 -0400
Subject: [antlr-interest] Mismatched Character, expecting set null
Message-ID: <AANLkTikRPcsxOgroGA+0g_TWaVm2sDCnVHuEWaOTQCyw@mail.gmail.com>

Hello,

I'm writing my first grammar and have started with something painfully
simple but yet cannot figure out why I am receiving errors.   At this point
I expect my grammar to recognize a whitespace delimited list of integers.
Any help is appreciated.

==== GRAMMAR ===
grammar Herman;

options {
  language = Java;
  //output = AST;
}

@header {
  package com.kenklose.herman;
}

@lexer::header {
  package com.kenklose.herman;
}

detail: ( integer );

integer: ( DIGIT )+;

fragment DIGIT: '0'..'9';
fragment LETTER : ('a'..'z' | 'A'..'Z');

WS: (' ' | '\t' | '\n' | '\r' | '\f') {$channel = HIDDEN;};
=== Test Bed ===
CharStream charStream = new ANTLRStringStream("1 2 3 4");
HermanLexer lexer = new HermanLexer(charStream);
TokenStream tokenStream = new CommonTokenStream(lexer);
HermanParser parser = new HermanParser(tokenStream );
parser.detail();
System.out.println("Done.");
=== Error Output ===
line 1:0 mismatched character '1' expecting set null
line 1:2 mismatched character '2' expecting set null
line 1:4 mismatched character '3' expecting set null
line 1:6 mismatched character '4' expecting set null
line 0:-1 required (...)+ loop did not match anything at input '<EOF>'
Done.
===

From gerald at certiv.net  Thu Aug  5 23:23:57 2010
From: gerald at certiv.net (Gerald Rosenberg)
Date: Thu, 05 Aug 2010 23:23:57 -0700
Subject: [antlr-interest] Mismatched Character, expecting set null
In-Reply-To: <AANLkTikRPcsxOgroGA+0g_TWaVm2sDCnVHuEWaOTQCyw@mail.gmail.com>
References: <AANLkTikRPcsxOgroGA+0g_TWaVm2sDCnVHuEWaOTQCyw@mail.gmail.com>
Message-ID: <4C5BAA7D.60905@certiv.net>

  ------ Original Message (Friday, August 06, 2010 2:16:06 AM) From: Ken 
Klose ------
Subject: [antlr-interest] Mismatched Character, expecting set null
> fragment DIGIT: '0'..'9';
> fragment LETTER : ('a'..'z' | 'A'..'Z');

Remove the 'fragment' modifier.  They are not visible from the parser.


From jbb at acm.org  Fri Aug  6 04:33:05 2010
From: jbb at acm.org (John B. Brodie)
Date: Fri, 06 Aug 2010 07:33:05 -0400
Subject: [antlr-interest] Mismatched Character, expecting set null
In-Reply-To: <AANLkTikRPcsxOgroGA+0g_TWaVm2sDCnVHuEWaOTQCyw@mail.gmail.com>
References: <AANLkTikRPcsxOgroGA+0g_TWaVm2sDCnVHuEWaOTQCyw@mail.gmail.com>
Message-ID: <1281094385.29697.9.camel@gecko.home.org>

Greetings!

On Fri, 2010-08-06 at 02:16 -0400, Ken Klose wrote:
> Hello,
> 
> I'm writing my first grammar and have started with something painfully
> simple but yet cannot figure out why I am receiving errors.   At this point
> I expect my grammar to recognize a whitespace delimited list of integers.
> Any help is appreciated.
> 
> ==== GRAMMAR ===
> grammar Herman;
> 
> options {
>   language = Java;
>   //output = AST;
> }
> 
> @header {
>   package com.kenklose.herman;
> }
> 
> @lexer::header {
>   package com.kenklose.herman;
> }
> 
> detail: ( integer );

this rule recognizes just one integer! not a list....

detail : INTEGER + ;

> 
> integer: ( DIGIT )+;

should probably be a lexer rule

INTEGER : ( DIGIT )+ ;

> 
> fragment DIGIT: '0'..'9';
> fragment LETTER : ('a'..'z' | 'A'..'Z');
> 
> WS: (' ' | '\t' | '\n' | '\r' | '\f') {$channel = HIDDEN;};

this rule recognizes (and then ignores) just a single white-space
character. would be more efficient as

WS : ( ' ' | '\t' | '\n' | '\r' | '\f' )+ {$channel=HIDDEN;} ;

> === Test Bed ===
> CharStream charStream = new ANTLRStringStream("1 2 3 4");
> HermanLexer lexer = new HermanLexer(charStream);
> TokenStream tokenStream = new CommonTokenStream(lexer);
> HermanParser parser = new HermanParser(tokenStream );
> parser.detail();
> System.out.println("Done.");
> === Error Output ===
> line 1:0 mismatched character '1' expecting set null
> line 1:2 mismatched character '2' expecting set null
> line 1:4 mismatched character '3' expecting set null
> line 1:6 mismatched character '4' expecting set null
> line 0:-1 required (...)+ loop did not match anything at input '<EOF>'
> Done.
> ===

hope this helps...
   -jbb




From jbb at acm.org  Fri Aug  6 04:46:10 2010
From: jbb at acm.org (John B. Brodie)
Date: Fri, 06 Aug 2010 07:46:10 -0400
Subject: [antlr-interest] grammar problem with recursion?
In-Reply-To: <AANLkTi=1tJujvs-beWK_VqK_jgW6=kqb4DS8ydrYma53@mail.gmail.com>
References: <AANLkTi=1tJujvs-beWK_VqK_jgW6=kqb4DS8ydrYma53@mail.gmail.com>
Message-ID: <1281095170.29697.22.camel@gecko.home.org>

Greetings!

you really need to left factor your rules.
also lex_entry and rule_entry are identical rules! ambiguous. even with
backtracking turned on how are we to know which to recognize. and
perhaps worse, we can not know that we have a type_def (as opposed to
lex_entry or rule_entry) until the very end when we see the '.' this
forces use to parse the entire input just to find the '.' and then
backtrack and reparse the entire input as a type_def.



On Thu, 2010-08-05 at 23:41 -0400, Dervin Thunk wrote:
> Hello. I am new to ANTLR. Below is a grammar I wrote, and I'm trying to
> test it with the following string, but it just stops before it even
> consumes the n_pp... identifier, so it stops at the "conjunction"
> rule. Any idea about what I could be doing wrong?

i do not see any lexer rule to handle white-space. so you are probably
getting an error on the blank between then `s_n2` and `:=` tokens.

you do not include EOF in any of your rules, so when ANTLR encounters
the first character that is not properly parsed under your grammar
rules, it will simply stop the parse.

> 
> <teststring below>
> s_n2 := n_pp_c-pl-crd_le & [ STEM < "100s" >,  SYNSEM [ LKEYS [
> --COMPKEY _of_p_sel_rel,KEYREL.CARG "100" ], PHON.ONSET con ] ].
> 
> 
> grammar tdl;
> 
> options
> {
>        language=Java;
>        backtrack=true;
> }
> 
> type_def
>        :       type avm_def '.'
>        ;

type_def : type avm_def '.' EOF ;

> avm_def
>        :       ':=' conjunction
>        ;
> 
> conjunction
>        :       term
>        | (term '&' conjunction)
>        ;
> 
> term
>        :       type
>        | STRING
>        | feature_term
>        | correference
>        | list
>        | diff_list
>        ;
> 
> type
>        :       ID
>        ;
> 
> feature_term
>        : '[' ']'
>        | ('[' attr_val_list ']')
>        ;
> 
> attr_val_list
>        :       attr_val | (attr_val ',' attr_val)
>        ;
> 
> 
> attr_list
>        : attribute
>        | (attribute'.'attr_val_list)
>        ;
> attr_val
>        : attr_list conjunction
>        ;
> 
> 
> attribute
>        : ID
>        ;
> 
> correference
>        : '#' ID
>        ;
> 
> diff_list
>        :       '<!' '!>'
>        | ('<!' conjunction_list '!>')
>        ;
> 
> conjunction_list
>        : conjunction
>        | (conjunction ',' conjunction_list)
>        ;
> 
> list
>        :       '<' '>' | ('<' conjunction_list '>')
>        | ('<' conjunction_list '>' ',' '...')
>        |       ('<' conjunction_list '.' conjunction '>')
>        ;
> 
> 
> lex_entry
>        :       lex_id avm_def
>        ;
not used anywhere, delete this rule and lex_id.

> 
> lex_id
>        : ID
>        ;

> 
> rule_entry
>        :       rule_id avm_def
>        ;
not used anywhere, delete this rule and rule_id.

> 
> rule_id
>        : ID
>        ;
> 
> ID  :   ('a'..'z'|'A'..'Z'|'_'|'-') ('a'..'z'|'A'..'Z'|'0'..'9'|'_'|'-')*
>    ;
> 
> COMMENT
>    :   '//' ~('\n'|'\r')* '\r'? '\n' {$channel=HIDDEN;}
>    |   ';' ~('\n'|'\r')* '\r'? '\n' {$channel=HIDDEN;}
>    |   '/*' ( options {greedy=false;} : . )* '*/' {$channel=HIDDEN;}
>    | '#|' ( options {greedy=false;} : . )* '|#' {$channel=HIDDEN;}
>    ;
> 
> STRING
>    :  '"' ( ESC_SEQ | ~('\\'|'"') )* '"' |
>       '`' ( ESC_SEQ | ~('\\'|'"') )*
>    ;
> 
> fragment
> HEX_DIGIT : ('0'..'9'|'a'..'f'|'A'..'F') ;
> 
> fragment
> ESC_SEQ
>    :   '\\' ('b'|'t'|'n'|'f'|'r'|'\"'|'\''|'\\')
>    |   UNICODE_ESC
>    |   OCTAL_ESC
>    ;
> 
> fragment
> UNICODE_ESC
>    :   '\\' 'u' HEX_DIGIT HEX_DIGIT HEX_DIGIT HEX_DIGIT
>    ;
> fragment
> OCTAL_ESC
>    :   '\\' ('0'..'3') ('0'..'7') ('0'..'7')
>    |   '\\' ('0'..'7') ('0'..'7')
>    |   '\\' ('0'..'7')
>    ;

add a lexer rule to ignore white-space characters:

WS : (' '|'\t'|'\n'|\'r')+ { $channel = HIDDEN; } ;


hope this helps...
   -jbb



From pureza at gmail.com  Fri Aug  6 08:41:59 2010
From: pureza at gmail.com (Luis Pureza)
Date: Fri, 6 Aug 2010 16:41:59 +0100
Subject: [antlr-interest] Need some help with AST creation
Message-ID: <AANLkTik3c4tcRCivLEL=thmL2T99Aa4aqTLsRmAjav9p@mail.gmail.com>

Hi,

I need some help from the ANTLR wizards :)

I'm trying to match expressions with field accesses and array indexes.
For example:

costumers.length
costumers[0].address
costumers[costumers.length - 1].orders[0].total


The following rule seems to work:

fieldExpr      : atom ('.'^ identifier | ('['^ expr ']'!))*;

However, it creates trees with notes annotated with '[', and I'd
prefer to have a dummy token like INDEX. For example, costumers[0] now
returns

([ (ID costumers) (INT 0))

But I'd like it to return

(INDEX (ID costumers) (INT 0))

I tried to create the AST manually with -> ^(...), but I ended up
nowhere. Maybe I should've tried to refactor the grammar, but that
would make it a little less readable, so I didn't do it.
How do you suggest I do this?

Thank you!

From cummings at kjchome.homeip.net  Fri Aug  6 09:07:41 2010
From: cummings at kjchome.homeip.net (Kevin J. Cummings)
Date: Fri, 06 Aug 2010 12:07:41 -0400
Subject: [antlr-interest] Mismatched Character, expecting set null
In-Reply-To: <1281094385.29697.9.camel@gecko.home.org>
References: <AANLkTikRPcsxOgroGA+0g_TWaVm2sDCnVHuEWaOTQCyw@mail.gmail.com>
	<1281094385.29697.9.camel@gecko.home.org>
Message-ID: <4C5C334D.2000505@kjchome.homeip.net>

On 08/06/2010 07:33 AM, John B. Brodie wrote:
> Greetings!
> 
> On Fri, 2010-08-06 at 02:16 -0400, Ken Klose wrote:
>> Hello,
>>
>> I'm writing my first grammar and have started with something painfully
>> simple but yet cannot figure out why I am receiving errors.   At this point
>> I expect my grammar to recognize a whitespace delimited list of integers.
>> Any help is appreciated.

>> detail: ( integer );
>
> this rule recognizes just one integer! not a list....
> 
> detail : INTEGER + ;

Shouldn't it also end with an EOF?

detail : INTEGER+ EOF ;

>> integer: ( DIGIT )+;
> 
> should probably be a lexer rule
> 
> INTEGER : ( DIGIT )+ ;

INTEGER : DIGIT+ ;

No need to the ()'s.
Also, then he doesn't need to remove the "fragment" from the DIGIT rule.

>> fragment DIGIT: '0'..'9';
>> fragment LETTER : ('a'..'z' | 'A'..'Z');
>>
>> WS: (' ' | '\t' | '\n' | '\r' | '\f') {$channel = HIDDEN;};
> 
> this rule recognizes (and then ignores) just a single white-space
> character. would be more efficient as
> 
> WS : ( ' ' | '\t' | '\n' | '\r' | '\f' )+ {$channel=HIDDEN;} ;

Maybe, but doesn't it ignore *every* single WS character?
No need to use the + in that case (unless the performance benefit is
significant).

-- 
Kevin J. Cummings
kjchome at rcn.com
cummings at kjchome.homeip.net
cummings at kjc386.framingham.ma.us
Registered Linux User #1232 (http://counter.li.org)

From jimi at temporal-wave.com  Fri Aug  6 09:22:44 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 6 Aug 2010 09:22:44 -0700
Subject: [antlr-interest] Mismatched Character, expecting set null
In-Reply-To: <4C5C334D.2000505@kjchome.homeip.net>
References: <AANLkTikRPcsxOgroGA+0g_TWaVm2sDCnVHuEWaOTQCyw@mail.gmail.com>
	<1281094385.29697.9.camel@gecko.home.org>
	<4C5C334D.2000505@kjchome.homeip.net>
Message-ID: <603988BA-3364-4590-8A25-611940C9380B@temporal-wave.com>



On Aug 6, 2010, at 9:07, "Kevin J. Cummings" <cummings at kjchome.homeip.net> wrote:

> On 08/06/2010 07:33 AM, John B. Brodie wrote:
>> Greetings!
>> 
>> On Fri, 2010-08-06 at 02:16 -0400, Ken Klose wrote:
>>> Hello,
>>> 
>>> I'm writing my first grammar and have started with something painfully
>>> simple but yet cannot figure out why I am receiving errors.   At this point
>>> I expect my grammar to recognize a whitespace delimited list of integers.
>>> Any help is appreciated.
> 
>>> detail: ( integer );
>> 
>> this rule recognizes just one integer! not a list....
>> 
>> detail : INTEGER + ;
> 
> Shouldn't it also end with an EOF?
> 
> detail : INTEGER+ EOF ;

Unless there is a rule that has detail EOF

> 
>>> integer: ( DIGIT )+;
>> 
>> should probably be a lexer rule
>> 
>> INTEGER : ( DIGIT )+ ;
> 
> INTEGER : DIGIT+ ;
> 
> No need to the ()'s.
> Also, then he doesn't need to remove the "fragment" from the DIGIT rule.

No. That would DIGIT and INTEGER ambiguous. 

> 
>>> fragment DIGIT: '0'..'9';
>>> fragment LETTER : ('a'..'z' | 'A'..'Z');
>>> 
>>> WS: (' ' | '\t' | '\n' | '\r' | '\f') {$channel = HIDDEN;};
>> 
>> this rule recognizes (and then ignores) just a single white-space
>> character. would be more efficient as
>> 
>> WS : ( ' ' | '\t' | '\n' | '\r' | '\f' )+ {$channel=HIDDEN;} ;
> 
> Maybe, but doesn't it ignore *every* single WS character?
> No need to use the + in that case (unless the performance benefit is
> significant).

It is hiding, not skipping so you would get a hidden token for every whitespace character. Performance says use skip() and + not HIDDEN


> 
> -- 
> Kevin J. Cummings
> kjchome at rcn.com
> cummings at kjchome.homeip.net
> cummings at kjc386.framingham.ma.us
> Registered Linux User #1232 (http://counter.li.org)
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From j at junkwallah.org  Fri Aug  6 10:10:11 2010
From: j at junkwallah.org (Junkman)
Date: Fri, 06 Aug 2010 10:10:11 -0700
Subject: [antlr-interest] Need some help with AST creation
In-Reply-To: <AANLkTik3c4tcRCivLEL=thmL2T99Aa4aqTLsRmAjav9p@mail.gmail.com>
References: <AANLkTik3c4tcRCivLEL=thmL2T99Aa4aqTLsRmAjav9p@mail.gmail.com>
Message-ID: <4C5C41F3.60504@junkwallah.org>

Hi Luis,

You can try this:

tokens {
    // Semantic tokens
    FIELD;
    INDEX;
}

...

fieldExpr: (atom -> atom)
    ( '.' identifier -> ^(FIELD $fieldExpr identifier)
    | '[' expr ']' -> ^(INDEX $fieldExpr expr)
    )*
    ;

If you need the semantic tokens to have the input stream context data,
there is a way to create them out of another token, copying its context
data, for example in this case say FIELD to copy the context of '.' and
INDEX to '['.  The notation for this escapes me for the moment, but I
think the info won't be difficult to find in the wiki/documentation on
Antlr's website.

Hope that helps,

Jay

Luis Pureza wrote:
> Hi,
> 
> I need some help from the ANTLR wizards :)
> 
> I'm trying to match expressions with field accesses and array indexes.
> For example:
> 
> costumers.length
> costumers[0].address
> costumers[costumers.length - 1].orders[0].total
> 
> 
> The following rule seems to work:
> 
> fieldExpr      : atom ('.'^ identifier | ('['^ expr ']'!))*;
> 
> However, it creates trees with notes annotated with '[', and I'd
> prefer to have a dummy token like INDEX. For example, costumers[0] now
> returns
> 
> ([ (ID costumers) (INT 0))
> 
> But I'd like it to return
> 
> (INDEX (ID costumers) (INT 0))
> 
> I tried to create the AST manually with -> ^(...), but I ended up
> nowhere. Maybe I should've tried to refactor the grammar, but that
> would make it a little less readable, so I didn't do it.
> How do you suggest I do this?
> 
> Thank you!
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From jbb at acm.org  Fri Aug  6 10:10:27 2010
From: jbb at acm.org (John B. Brodie)
Date: Fri, 06 Aug 2010 13:10:27 -0400
Subject: [antlr-interest] Mismatched Character, expecting set null
In-Reply-To: <4C5C334D.2000505@kjchome.homeip.net>
References: <AANLkTikRPcsxOgroGA+0g_TWaVm2sDCnVHuEWaOTQCyw@mail.gmail.com>
	<1281094385.29697.9.camel@gecko.home.org>
	<4C5C334D.2000505@kjchome.homeip.net>
Message-ID: <1281114627.20080.8.camel@gecko.home.org>

On Fri, 2010-08-06 at 12:07 -0400, Kevin J. Cummings wrote:
> On 08/06/2010 07:33 AM, John B. Brodie wrote:
....stuff snipped....
> >> WS: (' ' | '\t' | '\n' | '\r' | '\f') {$channel = HIDDEN;};
> > 
> > this rule recognizes (and then ignores) just a single white-space
> > character. would be more efficient as
> > 
> > WS : ( ' ' | '\t' | '\n' | '\r' | '\f' )+ {$channel=HIDDEN;} ;
> 
> Maybe, but doesn't it ignore *every* single WS character?
> No need to use the + in that case (unless the performance benefit is
> significant).
> 

I have not measured it but I would expect a significant performance
difference.

I believe the WS rule is processed as follows: gather up the input text
matching the rule's right hand side; create a token containing that
text; and place the new token on the hidden channel.

so, for long runs of white-space, such as indentation, under the former
rule we would create a token for EVERY character while under the latter
we create just one --- significantly less overhead (i suspect, have not
measured).

Just my 2 cents, for what it is worth...
   -jbb



From bill.andersen at mac.com  Fri Aug  6 11:03:29 2010
From: bill.andersen at mac.com (Bill Andersen)
Date: Fri, 06 Aug 2010 14:03:29 -0400
Subject: [antlr-interest] Filtering Java expressions
Message-ID: <00915182-318E-47CC-9276-5114B0603CB2@mac.com>

Hi folks

I'm working on a DSL that allows insertion of Java code blocks.  The only information I really need to get from the Java are variable declarations - what vars declared to be what type.  The rest I don't care about.

Is there a good way to do a partial parse of Java code to pick out declarations (or any other structure).  If it helps, I'm limiting this to pretty vanilla Java assignment and declaration expressions - no class defs.

Thanks

	.bill


From jbb at acm.org  Fri Aug  6 11:14:25 2010
From: jbb at acm.org (John B. Brodie)
Date: Fri, 06 Aug 2010 14:14:25 -0400
Subject: [antlr-interest] Need some help with AST creation
In-Reply-To: <AANLkTik3c4tcRCivLEL=thmL2T99Aa4aqTLsRmAjav9p@mail.gmail.com>
References: <AANLkTik3c4tcRCivLEL=thmL2T99Aa4aqTLsRmAjav9p@mail.gmail.com>
Message-ID: <1281118465.20726.18.camel@gecko.home.org>

Greetings!

On Fri, 2010-08-06 at 16:41 +0100, Luis Pureza wrote:
> Hi,
> 
> I need some help from the ANTLR wizards :)

I am not sure I qualify as an ANTLR wizard, but I try to answer your
question anyway....
> 
> I'm trying to match expressions with field accesses and array indexes.
> For example:
> 
> costumers.length
> costumers[0].address
> costumers[costumers.length - 1].orders[0].total
> 
> 
> The following rule seems to work:
> 
> fieldExpr      : atom ('.'^ identifier | ('['^ expr ']'!))*;
> 
> However, it creates trees with notes annotated with '[', and I'd
> prefer to have a dummy token like INDEX. For example, costumers[0] now
> returns
> 
> ([ (ID costumers) (INT 0))
> 
> But I'd like it to return
> 
> (INDEX (ID costumers) (INT 0))
> 
> I tried to create the AST manually with -> ^(...), but I ended up
> nowhere. Maybe I should've tried to refactor the grammar, but that
> would make it a little less readable, so I didn't do it.
> How do you suggest I do this?
> 

This is discussed starting on page 174 of Dr. Parr's book The Definitive
ANTLR Reference [TDAR]. It may also be somewhere in the wiki -- haven't
looked for it there...

Bottom line: you are allowed to refer to the rule's name in a re-write
section.

but first you need to tell ANTLR about your imaginary tokens by putting

tokens { INDEX; DOT /* or whatever */; }

this belongs after the options{} block, if any, but before the first
rule (possibly before any @members, can't remember...)

and now your fieldExpr rule becomes:

fieldExpr : ( a=atom -> $a /*initializes $fieldExpr*/ )
    ( ( x='.' i=identifier -> ^(DOT[$x,"DOT"] $fieldExpr $i) )
    | ( x='[' e=expr ']' -> ^(INDEX[$x,"INDEX"] $fieldExpr $e) )
    )* ;

(note the above specific meta-syntax is from memory, may have some
slight errors, but you get the idea, i hope)

(i think you do need all of those parentheses, as I recall, needed when
mixing rewrites in amongst syntax specifications)

(you can probably not have all of the labels (a=...,x=...,etc), but
somehow to my poor brain it is clearer with the labels)

so in its potentially tersest form:

fieldExpr : 
    atom ( ('.' identifier -> ^(DOT['.',"DOT"] $fieldExpr identifier)
           ('[' expr ']' -> ^(INDEX['[',"INDEX"] $fieldExpr expr )
         )* ;


Hope this helps...
   -jbb





From jimi at temporal-wave.com  Fri Aug  6 12:01:05 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 6 Aug 2010 12:01:05 -0700
Subject: [antlr-interest] Need some help with AST creation
In-Reply-To: <1281118465.20726.18.camel@gecko.home.org>
References: <AANLkTik3c4tcRCivLEL=thmL2T99Aa4aqTLsRmAjav9p@mail.gmail.com>
	<1281118465.20726.18.camel@gecko.home.org>
Message-ID: <017301cb3599$b8f2a810$2ad7f830$@temporal-wave.com>

You can just do this:


ddd: a=TOKEN^ B C D { $a.type = INDEX; } ;

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of John B. Brodie
> Sent: Friday, August 06, 2010 11:14 AM
> To: Luis Pureza
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Need some help with AST creation
> 
> Greetings!
> 
> On Fri, 2010-08-06 at 16:41 +0100, Luis Pureza wrote:
> > Hi,
> >
> > I need some help from the ANTLR wizards :)
> 
> I am not sure I qualify as an ANTLR wizard, but I try to answer your
question
> anyway....
> >
> > I'm trying to match expressions with field accesses and array indexes.
> > For example:
> >
> > costumers.length
> > costumers[0].address
> > costumers[costumers.length - 1].orders[0].total
> >
> >
> > The following rule seems to work:
> >
> > fieldExpr      : atom ('.'^ identifier | ('['^ expr ']'!))*;
> >
> > However, it creates trees with notes annotated with '[', and I'd
> > prefer to have a dummy token like INDEX. For example, costumers[0] now
> > returns
> >
> > ([ (ID costumers) (INT 0))
> >
> > But I'd like it to return
> >
> > (INDEX (ID costumers) (INT 0))
> >
> > I tried to create the AST manually with -> ^(...), but I ended up
> > nowhere. Maybe I should've tried to refactor the grammar, but that
> > would make it a little less readable, so I didn't do it.
> > How do you suggest I do this?
> >
> 
> This is discussed starting on page 174 of Dr. Parr's book The Definitive
ANTLR
> Reference [TDAR]. It may also be somewhere in the wiki -- haven't looked
> for it there...
> 
> Bottom line: you are allowed to refer to the rule's name in a re-write
section.
> 
> but first you need to tell ANTLR about your imaginary tokens by putting
> 
> tokens { INDEX; DOT /* or whatever */; }
> 
> this belongs after the options{} block, if any, but before the first rule
> (possibly before any @members, can't remember...)
> 
> and now your fieldExpr rule becomes:
> 
> fieldExpr : ( a=atom -> $a /*initializes $fieldExpr*/ )
>     ( ( x='.' i=identifier -> ^(DOT[$x,"DOT"] $fieldExpr $i) )
>     | ( x='[' e=expr ']' -> ^(INDEX[$x,"INDEX"] $fieldExpr $e) )
>     )* ;
> 
> (note the above specific meta-syntax is from memory, may have some slight
> errors, but you get the idea, i hope)
> 
> (i think you do need all of those parentheses, as I recall, needed when
mixing
> rewrites in amongst syntax specifications)
> 
> (you can probably not have all of the labels (a=...,x=...,etc), but
somehow to
> my poor brain it is clearer with the labels)
> 
> so in its potentially tersest form:
> 
> fieldExpr :
>     atom ( ('.' identifier -> ^(DOT['.',"DOT"] $fieldExpr identifier)
>            ('[' expr ']' -> ^(INDEX['[',"INDEX"] $fieldExpr expr )
>          )* ;
> 
> 
> Hope this helps...
>    -jbb
> 
> 
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From j at junkwallah.org  Fri Aug  6 12:33:19 2010
From: j at junkwallah.org (Junkman)
Date: Fri, 06 Aug 2010 12:33:19 -0700
Subject: [antlr-interest] Need some help with AST creation
In-Reply-To: <017301cb3599$b8f2a810$2ad7f830$@temporal-wave.com>
References: <AANLkTik3c4tcRCivLEL=thmL2T99Aa4aqTLsRmAjav9p@mail.gmail.com>	<1281118465.20726.18.camel@gecko.home.org>
	<017301cb3599$b8f2a810$2ad7f830$@temporal-wave.com>
Message-ID: <4C5C637F.90303@junkwallah.org>

Jim Idle wrote:
> You can just do this:
> 
> 
> ddd: a=TOKEN^ B C D { $a.type = INDEX; } ;
> 
> Jim
> 

Typical C programmer mentality.  :-)

Best,

J

From valliantster at gmail.com  Fri Aug  6 14:21:16 2010
From: valliantster at gmail.com (denstar)
Date: Fri, 6 Aug 2010 15:21:16 -0600
Subject: [antlr-interest] General questions about something complicated
In-Reply-To: <AANLkTinP32Kk3oFHk564=qZOQdUfFJF3M727HBAVu-rx@mail.gmail.com>
References: <AANLkTinP32Kk3oFHk564=qZOQdUfFJF3M727HBAVu-rx@mail.gmail.com>
Message-ID: <AANLkTineP4LOWht8B6XyeV-5OqzMCHoWRKWxYF0HvZ2G@mail.gmail.com>

On Thu, Aug 5, 2010 at 11:49 PM, denstar wrote:
> Hello!
>
> A little backstory (this will be a long message):
...

Reason for grammar:

I want to build a good document model that I can use to flag
validation errors, and offer completion proposals.

The goal is a CFML IDE similar to the Java one.

It would be super cool if I could translate cfscript to CFML, and vice
versa-- maybe even java to CFML =)

Any pointers to set me in the right direction?

Should I be looking at a main CFML grammar with a sub-grammar-ish deal
for cfscript, or at writing separate grammars?

:Den

-- 
Life has a certain flavor for those who have fought and risked all
that the sheltered and protected can never experience.
John Stuart Mill

From lucabelluccini at gmail.com  Fri Aug  6 16:54:48 2010
From: lucabelluccini at gmail.com (Luca Belluccini)
Date: Sat, 7 Aug 2010 01:54:48 +0200
Subject: [antlr-interest] Rule returning values and lists of rules
Message-ID: <AANLkTikMzLGqn_MPmUBTh0J-RBEF75N893TbVJt6gfrN@mail.gmail.com>

Example:

ruleOne: r2+=ruleTwo+ 'END';
{

ListIterator<Token> li = $r2.listIterator();
while(li.hasNext()){

System.out.println("MyText = " + li.next().myText); // ERROR HERE

}

}
ruleTwo returns [ String myText ]: id1=ID '::' id2=ID
{

$myText = new String($id2.text + "..." + $id1.text);

}

Te correct way to access returned values?

From bill at tekbot.com  Fri Aug  6 22:51:15 2010
From: bill at tekbot.com (bill robertson)
Date: Sat, 7 Aug 2010 01:51:15 -0400
Subject: [antlr-interest] Calling a production returns null? And newline as
	a separator?
Message-ID: <AANLkTi=XbNeojh4eoUOOrs3u5kNs56HMF4eFvJWY+uO0@mail.gmail.com>

I'm working on a grammar, and I'm trying to create it such that
expressions can either be separated by newlines or by semicolons.

While working on unit tests, I found something that I don't
understand.  I have a "program" that is a sequence of "expressions."
If I ask the parser for the program, I get an AST with all of the
expressions.  However, if I ask for the expressions one by one,
sometimes I get back a null tree.

Here's sample code...

   public void foo() throws Exception {
       String script =
               "1*2\n"              // expr 1
               + "3+4*55\n"         // expr 2
               + "(5-6)*(77+88);\n" // expr 3
               + "7\n"
               + "/\n"
               + "8\n"              // expr 4
               + "9\n"
               + "\n"
               + "+\n"
               + "10;\n"            // expr 5
               + "11-12\n"
               + ";\n"              // expr 6
               + "13%14\n"          // expr 7
               + "15+16; 17+18\n";  // expr 8, expr 9

       FooParser parser = create(script);
       CommonTree all = (CommonTree)parser.prog().getTree();
       System.out.println("Child count = " + all.getChildCount());
                        //  should be 9

       FooParser parser2 = create(script);
       CommonTree expr1 = (CommonTree)parser2.expr().getTree();
       CommonTree expr2 = (CommonTree)parser2.expr().getTree();
       CommonTree expr3 = (CommonTree)parser2.expr().getTree();
       CommonTree expr4 = (CommonTree)parser2.expr().getTree();
       CommonTree expr5 = (CommonTree)parser2.expr().getTree();

       System.out.println("expr1 " + expr1 + " " + expr1.getChild(0));
       System.out.println("expr2 " + expr2 + " " + expr2.getChild(0));
       System.out.println("expr3 " + expr3 + " " + expr3.getChild(0));
       System.out.println("expr4 " + expr4);   //  expr4 is null
       System.out.println("expr5 " + expr5 + " " + expr5.getChild(0));

   }

It prints the following output (hopefully enough to show which expr is
being returned each time...

Child count = 9
expr1 * 1
expr2 + 3
expr3 * -
expr4 null
expr5 / 7

Is this normal?  Or is there something wrong with the grammar?  (will
append to end of this message)

Also, is there a better way to allow expressions to be separated by
newlines and semi-colons, yet still allow newlines in the middle of
expressions?   I tried as many ways as I could think of, and I was
only able to get the extremely verbose method (below) to work.

Thanks!

Grammar follows...

grammar Foo;

options {
output=AST;
}

prog
   :    expr+
   ;

expr
   :   expr_plus_minus ( NL! | NL!* SEM! | EOF!)
   |   NL!
   ;


expr_plus_minus
   :    expr_mult_div_mod
       ( NL!* PLUS^ NL!* expr_mult_div_mod
       | NL!* DASH^ NL!* expr_mult_div_mod
       )*
   ;

expr_mult_div_mod
       :       expr_unary
               ( NL!* STAR^ NL!* expr_unary
               | NL!* SLASH^ NL!* expr_unary
               | NL!* PCT^ NL!* expr_unary
               )*
       ;

expr_unary
       :       expr_atom
       |       ('~' | '`' | BANG) expr_unary // use temp symbols for now
//      |       (DASH | PLUS | BANG) expr_unary
// requires backtracking - don't want to enable yet...
       ;

expr_atom
       :       BASE10
       |   LPAR! NL!* expr_plus_minus NL!* RPAR!
       ;

BASE10  : ('0'..'9'+ | '0'..'9'* DOT '0'..'9'+);

SEM :   ';';
PLUS:   '+';
DASH:   '-';
STAR:   '*';
LPAR:   '(';
RPAR:   ')';
SLASH : '/';
PCT     :       '%';
DOT     :       '.';
BANG:   '!';

NL      :   '\r'? '\n';
WS      :   (' '|'\t'|'\f')+    {$channel=HIDDEN;} ;

From kenklose at gmail.com  Sat Aug  7 01:31:26 2010
From: kenklose at gmail.com (Ken Klose)
Date: Sat, 7 Aug 2010 04:31:26 -0400
Subject: [antlr-interest] Mismatched Character, expecting set null
In-Reply-To: <1281114627.20080.8.camel@gecko.home.org>
References: <AANLkTikRPcsxOgroGA+0g_TWaVm2sDCnVHuEWaOTQCyw@mail.gmail.com>
	<1281094385.29697.9.camel@gecko.home.org>
	<4C5C334D.2000505@kjchome.homeip.net>
	<1281114627.20080.8.camel@gecko.home.org>
Message-ID: <AANLkTimwF_U=Ayj6cOrgqqho7haoNn-ESfWp2q=sN2C4@mail.gmail.com>

Thanks for all of the fantastic help you got me over my initial hurdle and
I've been slowly expanding my grammar.

I have arrived at a new problem that I can't resolve.  I am parsing a rather
simple data file and have to read a field that can be a number of the forms
"55", "+55", "-55", or ".." in case where no number has been assigned.  I've
tried the following token definitions but get MismatchedTokenException on
"55" and "+55".

These are two of the token definitions I have tried:

CHANGE: ( ( ('+' | '-')? DIGIT+) | '..' );
CHANGE: ( ( ('+')? ('-')? DIGIT+) | '..' );
fragment DIGIT: '0'..'9';


Thanks again for all your help.

--Ken

From jbb at acm.org  Sat Aug  7 04:39:28 2010
From: jbb at acm.org (John B. Brodie)
Date: Sat, 07 Aug 2010 07:39:28 -0400
Subject: [antlr-interest] Mismatched Character, expecting set null
In-Reply-To: <AANLkTimwF_U=Ayj6cOrgqqho7haoNn-ESfWp2q=sN2C4@mail.gmail.com>
References: <AANLkTikRPcsxOgroGA+0g_TWaVm2sDCnVHuEWaOTQCyw@mail.gmail.com>
	<1281094385.29697.9.camel@gecko.home.org>
	<4C5C334D.2000505@kjchome.homeip.net>
	<1281114627.20080.8.camel@gecko.home.org>
	<AANLkTimwF_U=Ayj6cOrgqqho7haoNn-ESfWp2q=sN2C4@mail.gmail.com>
Message-ID: <1281181168.18534.14.camel@gecko.home.org>

On Sat, 2010-08-07 at 04:31 -0400, Ken Klose wrote:
> I have arrived at a new problem that I can't resolve.  I am parsing a rather
> simple data file and have to read a field that can be a number of the forms
> "55", "+55", "-55", or ".." in case where no number has been assigned.  I've
> tried the following token definitions but get MismatchedTokenException on
> "55" and "+55".
> 
> These are two of the token definitions I have tried:
> 
> CHANGE: ( ( ('+' | '-')? DIGIT+) | '..' );
> CHANGE: ( ( ('+')? ('-')? DIGIT+) | '..' );
> fragment DIGIT: '0'..'9';

the first version looks like it should work.

the second is, of course, not proper as it would accept +-55 as a CHANGE
token, and that isn't one of your choices.

do you have any other lexer rules that recognize tokens that might begin
with a '+' or a DIGIT? 

you might try writing a small Java Lexer test rig that prints the
details of each token recognized.

try to boil your grammar down to the smallest, yet complete, example
grammar containing your problem. post that small example. and then maybe
we can help to further identify the issue.

sorry to have not been very helpful....
   -jbb



From alex at storkey.co.uk  Sat Aug  7 07:31:20 2010
From: alex at storkey.co.uk (Alex Storkey)
Date: Sat, 7 Aug 2010 15:31:20 +0100
Subject: [antlr-interest] Building a tree grammar expression to recognize
	arithmetic expressions
Message-ID: <AANLkTikN+DSuBJy-6tSuF0ovqeDaujfZLqow_YA2BL1L@mail.gmail.com>

Hi, it's my first time posting in a mailing list like this so go easy on me
if I'm breaking some etiquette or anything :)

I'm trying to construct an expression in my tree grammar to recognize an AST
of simple mathematical expressions like 1+(-(a-b)) in tree format of (+ 1 (-
(- a b))) that is generated by my parser grammar.

I've tried a couple of different approaches and I can't figure out where I'm
going wrong. Could someone explain what's wrong with the following two
expressions:
expression
    :    (MINUS^)? term;
term
    :    constant | variable | ^(operator expression expression);
[constant and variables are both terminators, operator is plus/minus].

It seems whenever I try it I get a load of messages saying "node from line
0:0 no viable alternative at input 'UP'" and the program doesn't work on
anything with a negative term preceding it.

Thanks for the help. If I haven't included enough information to be useful
please let me know!

-- 
Alex Storkey <alex at storkey.co.uk>

From jimi at temporal-wave.com  Sat Aug  7 09:50:01 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 7 Aug 2010 09:50:01 -0700
Subject: [antlr-interest] Mismatched Character, expecting set null
In-Reply-To: <AANLkTimwF_U=Ayj6cOrgqqho7haoNn-ESfWp2q=sN2C4@mail.gmail.com>
References: <AANLkTikRPcsxOgroGA+0g_TWaVm2sDCnVHuEWaOTQCyw@mail.gmail.com>	<1281094385.29697.9.camel@gecko.home.org>	<4C5C334D.2000505@kjchome.homeip.net>	<1281114627.20080.8.camel@gecko.home.org>
	<AANLkTimwF_U=Ayj6cOrgqqho7haoNn-ESfWp2q=sN2C4@mail.gmail.com>
Message-ID: <020a01cb3650$93f5bc70$bbe13550$@temporal-wave.com>

Unary positive and unary negative are operators usually - you should deal
with them in the parser really unless they are not used elsewhere in the
grammar. Are you using '.' elsewhere? If you are, you may need to left
factor '.'and '..' in to one rule.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Ken Klose
> Sent: Saturday, August 07, 2010 1:31 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Mismatched Character, expecting set null
> 
> Thanks for all of the fantastic help you got me over my initial hurdle and
I've
> been slowly expanding my grammar.
> 
> I have arrived at a new problem that I can't resolve.  I am parsing a
rather
> simple data file and have to read a field that can be a number of the
forms
> "55", "+55", "-55", or ".." in case where no number has been assigned.
I've
> tried the following token definitions but get MismatchedTokenException on
> "55" and "+55".
> 
> These are two of the token definitions I have tried:
> 
> CHANGE: ( ( ('+' | '-')? DIGIT+) | '..' );
> CHANGE: ( ( ('+')? ('-')? DIGIT+) | '..' ); fragment DIGIT: '0'..'9';
> 
> 
> Thanks again for all your help.
> 
> --Ken
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From j at junkwallah.org  Sat Aug  7 11:19:31 2010
From: j at junkwallah.org (Junkman)
Date: Sat, 07 Aug 2010 11:19:31 -0700
Subject: [antlr-interest] Building a tree grammar expression to
 recognize arithmetic expressions
In-Reply-To: <AANLkTikN+DSuBJy-6tSuF0ovqeDaujfZLqow_YA2BL1L@mail.gmail.com>
References: <AANLkTikN+DSuBJy-6tSuF0ovqeDaujfZLqow_YA2BL1L@mail.gmail.com>
Message-ID: <4C5DA3B3.9070204@junkwallah.org>

Hi Alex,

Alex Storkey wrote:
> Hi, it's my first time posting in a mailing list like this so go easy on me
> if I'm breaking some etiquette or anything :)
> 
> I'm trying to construct an expression in my tree grammar to recognize an AST
> of simple mathematical expressions like 1+(-(a-b)) in tree format of (+ 1 (-
> (- a b))) that is generated by my parser grammar.
> 
> I've tried a couple of different approaches and I can't figure out where I'm
> going wrong. Could someone explain what's wrong with the following two
> expressions:
> expression
>     :    (MINUS^)? term;

If I understand you correctly, you are asking about writing tree parser
grammar.

Does Antlr even compile the grammar (i.e., generate a tree parser) with
the above rule?  I think the rule must be of the form of rewrite rules.

J



From j at junkwallah.org  Sat Aug  7 12:10:12 2010
From: j at junkwallah.org (Junkman)
Date: Sat, 07 Aug 2010 12:10:12 -0700
Subject: [antlr-interest] Filtering Java expressions
In-Reply-To: <00915182-318E-47CC-9276-5114B0603CB2@mac.com>
References: <00915182-318E-47CC-9276-5114B0603CB2@mac.com>
Message-ID: <4C5DAF94.70808@junkwallah.org>

Hi Bill,

Just throwing up a suggestion here (haven't thought it through).  Lex
the input, ignore comments and parse the rest into statements (ending
with ';') and blocks (ending with  {} block) containing statements, and
then try to parse each statement as variable declarations.  Would you
need to determine the context of the variable (local, class, etc.)?

If you expect to target other Java phrases and/or their context, you
might be better off writing the full grammar first.

Hope others will chime in with better suggestions.

J

Bill Andersen wrote:
> Hi folks
> 
> I'm working on a DSL that allows insertion of Java code blocks.  The only information I really need to get from the Java are variable declarations - what vars declared to be what type.  The rest I don't care about.
> 
> Is there a good way to do a partial parse of Java code to pick out declarations (or any other structure).  If it helps, I'm limiting this to pretty vanilla Java assignment and declaration expressions - no class defs.
> 
> Thanks
> 
> 	.bill
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From bkiers at gmail.com  Sat Aug  7 12:16:24 2010
From: bkiers at gmail.com (Bart Kiers)
Date: Sat, 7 Aug 2010 21:16:24 +0200
Subject: [antlr-interest] Filtering Java expressions
In-Reply-To: <4C5DAF94.70808@junkwallah.org>
References: <00915182-318E-47CC-9276-5114B0603CB2@mac.com>
	<4C5DAF94.70808@junkwallah.org>
Message-ID: <AANLkTikUq-U+iNG0g80jAHNO1gdWoZxdZz0-UcWTG5gx@mail.gmail.com>

Forgot to reply to the entire group...


On Fri, Aug 6, 2010 at 8:03 PM, Bill Andersen <bill.andersen at mac.com> wrote:

>
> Is there a good way to do a partial parse of Java code to pick out
> declarations (or any other structure).  If it helps, I'm limiting this to
> pretty vanilla Java assignment and declaration expressions - no class defs.
>
>

You could create a lexer that parses only those tokens you define by adding:

@options { filter = true; }


at the top of your lexer.

For example, the following lexer:

lexer grammar Foo;

@options { filter = true; }

Int : '0'..'9'+ ;


will only create tokens consisting of one or more digits and will ignore the
rest of the input.

Note that you cannot (!) create a combined grammar (parser & lexer), only a
lexer-grammar.

Good luck!

Regards,
Bart.

From kenklose at gmail.com  Sat Aug  7 14:09:05 2010
From: kenklose at gmail.com (Ken Klose)
Date: Sat, 7 Aug 2010 17:09:05 -0400
Subject: [antlr-interest] Mismatched Character, expecting set null
In-Reply-To: <1281181168.18534.14.camel@gecko.home.org>
References: <AANLkTikRPcsxOgroGA+0g_TWaVm2sDCnVHuEWaOTQCyw@mail.gmail.com>
	<1281094385.29697.9.camel@gecko.home.org>
	<4C5C334D.2000505@kjchome.homeip.net>
	<1281114627.20080.8.camel@gecko.home.org>
	<AANLkTimwF_U=Ayj6cOrgqqho7haoNn-ESfWp2q=sN2C4@mail.gmail.com>
	<1281181168.18534.14.camel@gecko.home.org>
Message-ID: <AANLkTik5fjtu9SYHX8NCTvH-ps6=T+ASxBv5ww4CE9nY@mail.gmail.com>

On Sat, Aug 7, 2010 at 7:39 AM, John B. Brodie <jbb at acm.org> wrote:

> do you have any other lexer rules that recognize tokens that might begin
> with a '+' or a DIGIT?
>

Yes, that was the problem. Thank you.


> sorry to have not been very helpful....
>

Quite the contrary you pointed me down the right avenue.


On Sat, Aug 7, 2010 at 12:50 PM, Jim Idle <jimi at temporal-wave.com> wrote:

> Are you using '.' elsewhere? If you are, you may need to left

factor '.'and '..' in to one rule.
>

No I am not.  However I'm curious what you mean be left factor.

Many Thanks
--Ken

From pureza at gmail.com  Sun Aug  8 06:07:07 2010
From: pureza at gmail.com (Luis Pureza)
Date: Sun, 8 Aug 2010 14:07:07 +0100
Subject: [antlr-interest] Need some help with AST creation
In-Reply-To: <4C5C637F.90303@junkwallah.org>
References: <AANLkTik3c4tcRCivLEL=thmL2T99Aa4aqTLsRmAjav9p@mail.gmail.com> 
	<1281118465.20726.18.camel@gecko.home.org>
	<017301cb3599$b8f2a810$2ad7f830$@temporal-wave.com> 
	<4C5C637F.90303@junkwallah.org>
Message-ID: <AANLkTi=uSTDXCU8tqTqzr_0Ys8MOh_rpkoH4KZAJf+S5@mail.gmail.com>

Thank you all for your replies. It worked. :-)

On Fri, Aug 6, 2010 at 8:33 PM, Junkman <j at junkwallah.org> wrote:
> Jim Idle wrote:
>> You can just do this:
>>
>>
>> ddd: a=TOKEN^ B C D { $a.type = INDEX; } ;
>>
>> Jim
>>
>
> Typical C programmer mentality. ?:-)
>
> Best,
>
> J
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From alex at storkey.co.uk  Sun Aug  8 07:54:01 2010
From: alex at storkey.co.uk (Alex Storkey)
Date: Sun, 8 Aug 2010 15:54:01 +0100
Subject: [antlr-interest] Building a tree grammar expression to
	recognize arithmetic expressions
In-Reply-To: <AANLkTimFecABWV5qcaT0u5KirLocEUAUq5iRS2QC5XsX@mail.gmail.com>
References: <AANLkTikN+DSuBJy-6tSuF0ovqeDaujfZLqow_YA2BL1L@mail.gmail.com>
	<4C5DA3B3.9070204@junkwallah.org>
	<AANLkTimFecABWV5qcaT0u5KirLocEUAUq5iRS2QC5XsX@mail.gmail.com>
Message-ID: <AANLkTinmtGKgbGhDCmTf8jbPa9ZNXf4LuwBCFyP225TR@mail.gmail.com>

Okay, sorry to keep posting but I've managed to get the antlrworks debugger
working on my tree grammar and I have discovered the problem.

It seems like instead of the rule *expression* consuming the MINUS symbol,
the minus symbol is ignore by the expression rule and consumed by the
*term*rule, specifically this part:
^(operator expression expression)
even when I try it on a really simple AST like (- 1) - obviously there is
only one expression here, so the wrong rule is being invoked. What's up with
that?


On 8 August 2010 10:11, Alex Storkey <alex at storkey.co.uk> wrote:

>
>
> On 7 August 2010 19:19, Junkman <j at junkwallah.org> wrote:
>
>> Hi Alex,
>>
>> Alex Storkey wrote:
>> > Hi, it's my first time posting in a mailing list like this so go easy on
>> me
>> > if I'm breaking some etiquette or anything :)
>> >
>> > I'm trying to construct an expression in my tree grammar to recognize an
>> AST
>> > of simple mathematical expressions like 1+(-(a-b)) in tree format of (+
>> 1 (-
>> > (- a b))) that is generated by my parser grammar.
>> >
>> > I've tried a couple of different approaches and I can't figure out where
>> I'm
>> > going wrong. Could someone explain what's wrong with the following two
>> > expressions:
>> > expression
>> >     :    (MINUS^)? term;
>>
>> If I understand you correctly, you are asking about writing tree parser
>> grammar.
>>
>> Does Antlr even compile the grammar (i.e., generate a tree parser) with
>> the above rule?  I think the rule must be of the form of rewrite rules.
>>
>> J
>>
> Yes, that sounds about right. I have my lexer and parser grammar set up to
> generate an AST and I'm trying to write a tree grammar to read the AST and
> print some information about it, but I'm struggling to construct a tree to
> interpret my AST.
>
> All of my grammars compile fine - is there a reason they shouldn't?
>
> --
> Alex Storkey <alex at storkey.co.uk>
>



-- 
Alex Storkey <alex at storkey.co.uk>

From kcarroll at signmgmt.com  Sun Aug  8 08:10:03 2010
From: kcarroll at signmgmt.com (Kevin Carroll)
Date: Sun, 8 Aug 2010 10:10:03 -0500
Subject: [antlr-interest] "Return via Exception Technique" and VS2010
Message-ID: <80A5CDD2686EA042AE41C526324D44558EF2CC3B2F@EXCHANGE2007.signmgmt.local>

I'm having a problem that hopefully someone on this list can shed some light on.

I've implemented a tree-based interpreter in C# on .Net for a DSL using ANTLR.  I've used Terrence Parr's "Language Implementation Patterns" book for guidance.  In his chapter on tree-based interpreters, he used a technique for returning from a method call which involved wrapping the code that calls the method in a try-catch block, throwing an exception that contains the return value as the return mechanism, and catching the exception to retrieve the return value.  He states that "This mechanism isn't slow if we share the same exception object.  Only creating exceptions is expensive; throwing them is no big deal."  I implemented the technique for my return mechanism.

This technique seems to work great, and it runs acceptably fast if NOT running inside the VS2010 debugger.  However, if the same DSL script is run IN the debugger, the performance drags to a crawl.  The same script can literally run 100-1000 times slower in the debugger vs. out of the debugger.

I'm only going on a hunch (and another programmer who works with me agrees), but things seem to be pointing to the exception throw-catch situation as the culprit.

Another variable involved is that my interpreter makes extensive use of .Net 4.0's new DynamicObject.  I'm not using ExpressionTree's for my AST (yet), but some of the AST node execution methods use the DLR.

Does anyone have any insight into what might be going on, or any suggestions on ways to check what might be causing the problems?

I would appreciate any and all input.

Thanks,
Kevin Carroll

From jbb at acm.org  Sun Aug  8 08:41:16 2010
From: jbb at acm.org (John B. Brodie)
Date: Sun, 08 Aug 2010 11:41:16 -0400
Subject: [antlr-interest] Building a tree grammar expression to
 recognize arithmetic expressions
In-Reply-To: <AANLkTinmtGKgbGhDCmTf8jbPa9ZNXf4LuwBCFyP225TR@mail.gmail.com>
References: <AANLkTikN+DSuBJy-6tSuF0ovqeDaujfZLqow_YA2BL1L@mail.gmail.com>
	<4C5DA3B3.9070204@junkwallah.org>
	<AANLkTimFecABWV5qcaT0u5KirLocEUAUq5iRS2QC5XsX@mail.gmail.com>
	<AANLkTinmtGKgbGhDCmTf8jbPa9ZNXf4LuwBCFyP225TR@mail.gmail.com>
Message-ID: <1281282076.22756.5.camel@gecko.home.org>

Greetings!

the ^ meta-operator in the suffix position is a tree construction
operation and is NOT valid for tree recognition. you should be getting a
warning similar to:

warning(149): treeTest.g:0:0: rewrite syntax or operator with no output
option; setting output=AST

or if you have already set the output=AST in your options{} block then
this warning is masked. change your rule to:

expression : term | ^(MINUS term) ;

On Sun, 2010-08-08 at 15:54 +0100, Alex Storkey wrote:
> Okay, sorry to keep posting but I've managed to get the antlrworks debugger
> working on my tree grammar and I have discovered the problem.
> 
> It seems like instead of the rule *expression* consuming the MINUS symbol,
> the minus symbol is ignore by the expression rule and consumed by the
> *term*rule, specifically this part:
> ^(operator expression expression)
> even when I try it on a really simple AST like (- 1) - obviously there is
> only one expression here, so the wrong rule is being invoked. What's up with
> that?
> 
> 
> On 8 August 2010 10:11, Alex Storkey <alex at storkey.co.uk> wrote:
> 
> >
> >
> > On 7 August 2010 19:19, Junkman <j at junkwallah.org> wrote:
> >
> >> Hi Alex,
> >>
> >> Alex Storkey wrote:
> >> > Hi, it's my first time posting in a mailing list like this so go easy on
> >> me
> >> > if I'm breaking some etiquette or anything :)
> >> >
> >> > I'm trying to construct an expression in my tree grammar to recognize an
> >> AST
> >> > of simple mathematical expressions like 1+(-(a-b)) in tree format of (+
> >> 1 (-
> >> > (- a b))) that is generated by my parser grammar.
> >> >
> >> > I've tried a couple of different approaches and I can't figure out where
> >> I'm
> >> > going wrong. Could someone explain what's wrong with the following two
> >> > expressions:
> >> > expression
> >> >     :    (MINUS^)? term;
> >>
> >> If I understand you correctly, you are asking about writing tree parser
> >> grammar.
> >>
> >> Does Antlr even compile the grammar (i.e., generate a tree parser) with
> >> the above rule?  I think the rule must be of the form of rewrite rules.
> >>
> >> J
> >>
> > Yes, that sounds about right. I have my lexer and parser grammar set up to
> > generate an AST and I'm trying to write a tree grammar to read the AST and
> > print some information about it, but I'm struggling to construct a tree to
> > interpret my AST.
> >
> > All of my grammars compile fine - is there a reason they shouldn't?
> >
> > --
> > Alex Storkey <alex at storkey.co.uk>
> >

hope this helps...
   -jbb




From alex at storkey.co.uk  Sun Aug  8 09:02:34 2010
From: alex at storkey.co.uk (Alex Storkey)
Date: Sun, 8 Aug 2010 17:02:34 +0100
Subject: [antlr-interest] Building a tree grammar expression to
 recognize arithmetic expressions
In-Reply-To: <1281282076.22756.5.camel@gecko.home.org>
References: <AANLkTikN+DSuBJy-6tSuF0ovqeDaujfZLqow_YA2BL1L@mail.gmail.com>
	<4C5DA3B3.9070204@junkwallah.org>
	<AANLkTimFecABWV5qcaT0u5KirLocEUAUq5iRS2QC5XsX@mail.gmail.com>
	<AANLkTinmtGKgbGhDCmTf8jbPa9ZNXf4LuwBCFyP225TR@mail.gmail.com>
	<1281282076.22756.5.camel@gecko.home.org>
Message-ID: <AANLkTi=OzEVt-kMnQBcDxRQ==-_viyj61onJZK+Kfvce@mail.gmail.com>

Thanks!

Now I'm getting the error:
[fatal] rule expression has non-LL(*) decision due to recursive rule
invocations reachable from alts 1,2. Resolve by left-factoring or using
syntactic predicates or using backtrack=true option.

Which I guess kinda makes sense, but how do I go about sorting it? Just to
reiterate, the rules I have are as follows:

expression
    :    term | ^(MINUS term);

term
    :    constant | variable | ^(operator expression expression);


On 8 August 2010 16:41, John B. Brodie <jbb at acm.org> wrote:

> Greetings!
>
> the ^ meta-operator in the suffix position is a tree construction
> operation and is NOT valid for tree recognition. you should be getting a
> warning similar to:
>
> warning(149): treeTest.g:0:0: rewrite syntax or operator with no output
> option; setting output=AST
>
> or if you have already set the output=AST in your options{} block then
> this warning is masked. change your rule to:
>
> expression : term | ^(MINUS term) ;
>
> On Sun, 2010-08-08 at 15:54 +0100, Alex Storkey wrote:
> > Okay, sorry to keep posting but I've managed to get the antlrworks
> debugger
> > working on my tree grammar and I have discovered the problem.
> >
> > It seems like instead of the rule *expression* consuming the MINUS
> symbol,
> > the minus symbol is ignore by the expression rule and consumed by the
> > *term*rule, specifically this part:
> > ^(operator expression expression)
> > even when I try it on a really simple AST like (- 1) - obviously there is
> > only one expression here, so the wrong rule is being invoked. What's up
> with
> > that?
> >
> >
> > On 8 August 2010 10:11, Alex Storkey <alex at storkey.co.uk> wrote:
> >
> > >
> > >
> > > On 7 August 2010 19:19, Junkman <j at junkwallah.org> wrote:
> > >
> > >> Hi Alex,
> > >>
> > >> Alex Storkey wrote:
> > >> > Hi, it's my first time posting in a mailing list like this so go
> easy on
> > >> me
> > >> > if I'm breaking some etiquette or anything :)
> > >> >
> > >> > I'm trying to construct an expression in my tree grammar to
> recognize an
> > >> AST
> > >> > of simple mathematical expressions like 1+(-(a-b)) in tree format of
> (+
> > >> 1 (-
> > >> > (- a b))) that is generated by my parser grammar.
> > >> >
> > >> > I've tried a couple of different approaches and I can't figure out
> where
> > >> I'm
> > >> > going wrong. Could someone explain what's wrong with the following
> two
> > >> > expressions:
> > >> > expression
> > >> >     :    (MINUS^)? term;
> > >>
> > >> If I understand you correctly, you are asking about writing tree
> parser
> > >> grammar.
> > >>
> > >> Does Antlr even compile the grammar (i.e., generate a tree parser)
> with
> > >> the above rule?  I think the rule must be of the form of rewrite
> rules.
> > >>
> > >> J
> > >>
> > > Yes, that sounds about right. I have my lexer and parser grammar set up
> to
> > > generate an AST and I'm trying to write a tree grammar to read the AST
> and
> > > print some information about it, but I'm struggling to construct a tree
> to
> > > interpret my AST.
> > >
> > > All of my grammars compile fine - is there a reason they shouldn't?
> > >
> > > --
> > > Alex Storkey <alex at storkey.co.uk>
> > >
>
> hope this helps...
>    -jbb
>
>
>
>


-- 
Alex Storkey <alex at storkey.co.uk>

From steve at hibernate.org  Sun Aug  8 09:34:34 2010
From: steve at hibernate.org (Steve Ebersole)
Date: Sun, 08 Aug 2010 11:34:34 -0500
Subject: [antlr-interest] Keeping trees around
Message-ID: <1281285274.2375.63.camel@apollo>

Most of the uses of Antlr I have seen show temporary use of ASTs.  I
mean temporary here in that usually the AST is built, used and discarded
in a single step.

I have a particular usage where I am generating SQL statements and
really I could pre-build large chunks of the resulting SQL AST up-front.
First I am wondering how kosher this is.  Considering its not a pattern
I see discussed very often I am a little cautious.  The reason I
contemplate this approach even is because it would seem much more
efficient (seem because i think i would end up needing to clone the
pre-built AST fragments to insulate the master fragment from contextual
state changes).

If the general approach itself is sound, I wonder if anyone has taken on
such an approach and had any heads-ups or pointers.

As an example of what I mean, imagine you need to build a SQL SELECT
LIST.  The usual approach I have seen is to build the AST on the fly
from the text representations of each select expression:

CommonTree selectList = new CommonTree( SELECT_LIST, "{select list}" );
int count = 0;
for ( String columnName : someListOfColumnNames ) {
    CommonTree column = new CommonTree( COLUMN, columnName );
    CommonTree alias = new CommonTree( ALIAS, "y" + count++ + "_" );
    CommonTree selectExpr = new CommonTree( SELECT_EXPRESSION, "{select
expression}" );
    selectExpr.addChild( column );
    selectExpr.addChild( alias );
    selectList.addChild( selectExpr );
}

More I am thinking a pattern like:
CommonTree selectList = new CommonTree( SELECT_LIST, "{select list}" );
int count = 0;
for ( CommonTree column : someListOfColumns ) {
    CommonTree alias = new CommonTree( ALIAS, "y" + count++ + "_" );
    CommonTree selectExpr = new CommonTree( SELECT_EXPRESSION, "{select
expression}" );
    selectExpr.addChild( column );
    selectExpr.addChild( alias );
    selectList.addChild( selectExpr );
}

Which is a trivial change here specifically.  More I am worried about
handling more complex (possible nested) tree structures in this manner.
Any thoughts/pointers would be appreciated.

-- 
Steve Ebersole <steve at hibernate.org>
http://hibernate.org


From jbb at acm.org  Sun Aug  8 10:12:15 2010
From: jbb at acm.org (John B. Brodie)
Date: Sun, 08 Aug 2010 13:12:15 -0400
Subject: [antlr-interest] Building a tree grammar expression to
 recognize arithmetic expressions
In-Reply-To: <AANLkTi=OzEVt-kMnQBcDxRQ==-_viyj61onJZK+Kfvce@mail.gmail.com>
References: <AANLkTikN+DSuBJy-6tSuF0ovqeDaujfZLqow_YA2BL1L@mail.gmail.com>
	<4C5DA3B3.9070204@junkwallah.org>
	<AANLkTimFecABWV5qcaT0u5KirLocEUAUq5iRS2QC5XsX@mail.gmail.com>
	<AANLkTinmtGKgbGhDCmTf8jbPa9ZNXf4LuwBCFyP225TR@mail.gmail.com>
	<1281282076.22756.5.camel@gecko.home.org>
	<AANLkTi=OzEVt-kMnQBcDxRQ==-_viyj61onJZK+Kfvce@mail.gmail.com>
Message-ID: <1281287535.23448.7.camel@gecko.home.org>

On Sun, 2010-08-08 at 17:02 +0100, Alex Storkey wrote:
> Thanks!
> 
> Now I'm getting the error:
> [fatal] rule expression has non-LL(*) decision due to recursive rule
> invocations reachable from alts 1,2. Resolve by left-factoring or using
> syntactic predicates or using backtrack=true option.
> 
> Which I guess kinda makes sense, but how do I go about sorting it? Just to
> reiterate, the rules I have are as follows:
> 
> expression
>     :    term | ^(MINUS term);
> 
> term
>     :    constant | variable | ^(operator expression expression);
> 
> 

i am assuming that the ambiguity is because you are using the MINUS
token in your AST to indicate both the unary operation of Negation and
the binary operation of Subtraction.

i would suggest that you make your parser construct different root node
tokens for these two things. so your *PARSER* rule for expression
becomes something like:

expression : term | ( m=MINUS term -> ^(NEGATE[$m] term) ) ;

where NEGATE is an imaginary token that you have specified in a tokens{}
block before any rules in the parser grammar. and then the *TREE* rule
for expression becomes:

expression : term | ^(NEGATE term) ;

> On 8 August 2010 16:41, John B. Brodie <jbb at acm.org> wrote:
> 
> > Greetings!
> >
> > the ^ meta-operator in the suffix position is a tree construction
> > operation and is NOT valid for tree recognition. you should be getting a
> > warning similar to:
> >
> > warning(149): treeTest.g:0:0: rewrite syntax or operator with no output
> > option; setting output=AST
> >
> > or if you have already set the output=AST in your options{} block then
> > this warning is masked. change your rule to:
> >
> > expression : term | ^(MINUS term) ;
> >
> > On Sun, 2010-08-08 at 15:54 +0100, Alex Storkey wrote:
> > > Okay, sorry to keep posting but I've managed to get the antlrworks
> > debugger
> > > working on my tree grammar and I have discovered the problem.
> > >
> > > It seems like instead of the rule *expression* consuming the MINUS
> > symbol,
> > > the minus symbol is ignore by the expression rule and consumed by the
> > > *term*rule, specifically this part:
> > > ^(operator expression expression)
> > > even when I try it on a really simple AST like (- 1) - obviously there is
> > > only one expression here, so the wrong rule is being invoked. What's up
> > with
> > > that?
> > >
> > >
> > > On 8 August 2010 10:11, Alex Storkey <alex at storkey.co.uk> wrote:
> > >
> > > >
> > > >
> > > > On 7 August 2010 19:19, Junkman <j at junkwallah.org> wrote:
> > > >
> > > >> Hi Alex,
> > > >>
> > > >> Alex Storkey wrote:
> > > >> > Hi, it's my first time posting in a mailing list like this so go
> > easy on
> > > >> me
> > > >> > if I'm breaking some etiquette or anything :)
> > > >> >
> > > >> > I'm trying to construct an expression in my tree grammar to
> > recognize an
> > > >> AST
> > > >> > of simple mathematical expressions like 1+(-(a-b)) in tree format of
> > (+
> > > >> 1 (-
> > > >> > (- a b))) that is generated by my parser grammar.
> > > >> >
> > > >> > I've tried a couple of different approaches and I can't figure out
> > where
> > > >> I'm
> > > >> > going wrong. Could someone explain what's wrong with the following
> > two
> > > >> > expressions:
> > > >> > expression
> > > >> >     :    (MINUS^)? term;
> > > >>
> > > >> If I understand you correctly, you are asking about writing tree
> > parser
> > > >> grammar.
> > > >>
> > > >> Does Antlr even compile the grammar (i.e., generate a tree parser)
> > with
> > > >> the above rule?  I think the rule must be of the form of rewrite
> > rules.
> > > >>
> > > >> J
> > > >>
> > > > Yes, that sounds about right. I have my lexer and parser grammar set up
> > to
> > > > generate an AST and I'm trying to write a tree grammar to read the AST
> > and
> > > > print some information about it, but I'm struggling to construct a tree
> > to
> > > > interpret my AST.
> > > >
> > > > All of my grammars compile fine - is there a reason they shouldn't?
> > > >
> > > > --
> > > > Alex Storkey <alex at storkey.co.uk>
> > > >
> >
> > hope this helps...
> >    -jbb
> >
> >
> >
> >
> 
> 




From pureza at gmail.com  Sun Aug  8 11:10:15 2010
From: pureza at gmail.com (Luis Pureza)
Date: Sun, 8 Aug 2010 19:10:15 +0100
Subject: [antlr-interest] Right recursive rule and creating the AST in
	reverse order
Message-ID: <AANLkTik=KkZ+q=Gfmcmu6OTQF0azg25aC_V7WwYLeA4X@mail.gmail.com>

Hi,

I'm writing a grammar to parse a language similar to C#'s LINQ*. For example:

from obj in list
where obj.attribute > 200
select obj.attribute * 100

Notice that, unlike regular SQL, the FROM clause appears before the
SELECT and WHERE clauses.

To parse this I've written the following rules:


query: FROM ID IN expr queryRest
        ;

queryRest: SELECT expr queryRest
              | WHERE expr queryRest
              |
              ;

Note that queryRest is right-recursive because I allow an arbitrary
number of WHERE and SELECT clauses.

My main issue is that I want the AST to have the form (SELECT ...
(WHERE (FROM ...))) and not (FROM ... (WHERE (SELECT ...))). That is,
I want the last operation (select in this case) to be the root node.
I've found a way to do this by creating the (FROM ID) subtree and
passing it down to queryRest, which will then complete it. However, as
you may imagine, the code gets horrible pretty quickly.

Another way (which I haven't tried) would be to generate the unwanted
tree and then reverse it using a custom walker. I'll try this next,
but first I'd like to ask if you know a better way.

Thank you!

Lu?s Pureza

* I know there is a grammar for C# 4.0 but, as far as I can tell, the
grammar does not generate an AST.

From sharwell at pixelminegames.com  Sun Aug  8 11:57:32 2010
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Sun, 8 Aug 2010 13:57:32 -0500
Subject: [antlr-interest] "Return via Exception Technique" and VS2010
In-Reply-To: <80A5CDD2686EA042AE41C526324D44558EF2CC3B2F@EXCHANGE2007.signmgmt.local>
References: <80A5CDD2686EA042AE41C526324D44558EF2CC3B2F@EXCHANGE2007.signmgmt.local>
Message-ID: <00a701cb372b$8ee8bd50$acba37f0$@pixelminegames.com>

First of all, you should absolutely not be using exception handling for flow
control. If you are, there's a critical design error involved and you should
fix it before worrying about other things. Second, the way Java handles
exceptions is different from the way the CLR handles them. The CLR builds
the stack trace when the exception is thrown, reducing the possibility that
exceptions will be misused by reusing the exception object. Exception
handling is for errors - find another (proper) way to return your values and
both your performance and design problems will be fixed.

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Kevin Carroll
Sent: Sunday, August 08, 2010 10:10 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] "Return via Exception Technique" and VS2010

I'm having a problem that hopefully someone on this list can shed some light
on.

I've implemented a tree-based interpreter in C# on .Net for a DSL using
ANTLR.  I've used Terrence Parr's "Language Implementation Patterns" book
for guidance.  In his chapter on tree-based interpreters, he used a
technique for returning from a method call which involved wrapping the code
that calls the method in a try-catch block, throwing an exception that
contains the return value as the return mechanism, and catching the
exception to retrieve the return value.  He states that "This mechanism
isn't slow if we share the same exception object.  Only creating exceptions
is expensive; throwing them is no big deal."  I implemented the technique
for my return mechanism.

This technique seems to work great, and it runs acceptably fast if NOT
running inside the VS2010 debugger.  However, if the same DSL script is run
IN the debugger, the performance drags to a crawl.  The same script can
literally run 100-1000 times slower in the debugger vs. out of the debugger.

I'm only going on a hunch (and another programmer who works with me agrees),
but things seem to be pointing to the exception throw-catch situation as the
culprit.

Another variable involved is that my interpreter makes extensive use of .Net
4.0's new DynamicObject.  I'm not using ExpressionTree's for my AST (yet),
but some of the AST node execution methods use the DLR.

Does anyone have any insight into what might be going on, or any suggestions
on ways to check what might be causing the problems?

I would appreciate any and all input.

Thanks,
Kevin Carroll

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From jbb at acm.org  Sun Aug  8 11:59:57 2010
From: jbb at acm.org (John B. Brodie)
Date: Sun, 08 Aug 2010 14:59:57 -0400
Subject: [antlr-interest] Right recursive rule and creating the AST in
 reverse order
In-Reply-To: <AANLkTik=KkZ+q=Gfmcmu6OTQF0azg25aC_V7WwYLeA4X@mail.gmail.com>
References: <AANLkTik=KkZ+q=Gfmcmu6OTQF0azg25aC_V7WwYLeA4X@mail.gmail.com>
Message-ID: <1281293997.24223.6.camel@gecko.home.org>

Greetings!

passing the FROM tree down the rule set doesn't seem too bad to me.

DISCLAIMER: i can barely spell C# and certainly know nothing whatsoever
about LINQ --- so i probably have mis-understood something crucial.

On Sun, 2010-08-08 at 19:10 +0100, Luis Pureza wrote:
> Hi,
> 
> I'm writing a grammar to parse a language similar to C#'s LINQ*. For example:
> 
> from obj in list
> where obj.attribute > 200
> select obj.attribute * 100
> 
> Notice that, unlike regular SQL, the FROM clause appears before the
> SELECT and WHERE clauses.
> 
> To parse this I've written the following rules:
> 
> 
> query: FROM ID IN expr queryRest
>         ;
> 
> queryRest: SELECT expr queryRest
>               | WHERE expr queryRest
>               |
>               ;
> 
> Note that queryRest is right-recursive because I allow an arbitrary
> number of WHERE and SELECT clauses.
> 
> My main issue is that I want the AST to have the form (SELECT ...
> (WHERE (FROM ...))) and not (FROM ... (WHERE (SELECT ...))). That is,
> I want the last operation (select in this case) to be the root node.
> I've found a way to do this by creating the (FROM ID) subtree and
> passing it down to queryRest, which will then complete it. However, as
> you may imagine, the code gets horrible pretty quickly.
> 

i guess complexity is all in the eyes of the beholder, but this:

query : fromPart queryRest[$fromPart.tree] -> queryRest ;
fromPart : FROM^ ID IN! expr ;

queryRest[CommonTree f] : queryOperator^ expr queryRest[$f] | (->{$f}) ;
queryOperator : SELECT | WHERE ;

doesn't really seem so bad to me....

hope this helps (i have attached a complete example grammar with test
rig -- in Java, sorry -- so you can see the full story of my
suggestion).

   -jbb

-------------- next part --------------
grammar Test;

options {
   output = AST;
   ASTLabelType = CommonTree;
}

@members {
   private static final String [] x = new String[] {
      "from obj in list\n"+
      "where obj.attribute > 200\n"+
      "select obj.attribute * 100"
   };

   public static void main(String [] args) {
      for( int i = 0; i < x.length; ++i ) {
         try {
            System.out.println("about to parse:`"+x[i]+"`");
            TestLexer lexer = new TestLexer(new ANTLRStringStream(x[i]));
            CommonTokenStream tokens = new CommonTokenStream(lexer);

            TestParser parser = new TestParser(tokens);
            TestParser.start_return p_result = parser.start();

            CommonTree ast = p_result.tree;
            if( ast == null ) {
               System.out.println("resultant tree: is NULL");
            } else {
               System.out.println("resultant tree: " + ast.toStringTree());
            }
            System.out.println();
         } catch(Exception e) {
            e.printStackTrace();
         }
      }
   }
}

start : query EOF!;

query : fromPart queryRest[$fromPart.tree] -> queryRest ;
fromPart : FROM^ ID IN! expr ;

queryRest[CommonTree f] : queryOperator^ expr queryRest[$f] | (-> {$f}) ;
queryOperator : SELECT | WHERE ;

expr : primary (operator^ expr)? ;
operator : '>' | '=' | '*' ;

primary : ID | NUMBER ;

FROM : 'from' ;
IN : 'in' ;
SELECT : 'select' ;
WHERE : 'where' ;

NUMBER : DIGIT+ ;
ID : IDENTIFIER ('.' IDENTIFIER)*;

fragment IDENTIFIER : LETTER (LETTER|DIGIT)+ ;

fragment LETTER : 'a'..'z' | 'A'..'Z' ;
fragment DIGIT : '0' .. '9' ;

WS : (' '|'\t'|'\n'|'\r')+ { $channel = HIDDEN; } ;

From kenklose at gmail.com  Sun Aug  8 15:42:55 2010
From: kenklose at gmail.com (Ken Klose)
Date: Sun, 8 Aug 2010 18:42:55 -0400
Subject: [antlr-interest] How does INTEGER+ '.' INTEGER+ match "2."?
Message-ID: <AANLkTi=5KwnmUFnnwdv52_sffWJdayOOAyePMWmbXCy-@mail.gmail.com>

I'm an ANTLR noob constructing a grammar to parse a data file that is a mix
of structured data and unstructured text.  At various points in this data
file there are entire lines of free form text that I need to associate with
the previously matched data record. I am having difficulty.

I've distilled my grammar and input down to the smallest subset that causes
the problem ( line 1:20 required (...)+ loop did not match anything at
character '\r' ).  I don't understand why it is matching "2." as PRICE
instead of INTEGER SYMBOL.  Any help is greatly appreciated.

===GRAMMAR ===
grammar Herman;

options {
  language = Java;
  output = AST;
}

detail: ( descline)+;

descline: (INTEGER | LETTER | SYMBOL | ' ' )+ LBR;

fragment DIGIT: '0'..'9';
LETTER : ('a'..'z' | 'A'..'Z');
fragment WSCHAR : (' ' | '\t' | '\n' | '\r' | '\f');
SYMBOL : ~( DIGIT | LETTER | WSCHAR );
INTEGER: DIGIT+;
PRICE: INTEGER '.' INTEGER;        /* <= If I remove this TOKEN then it
parses fine, but I need this token for other parts of the data */
LBR: ('\n' | '\r' | '\r\n');
WS: WSCHAR+ {$channel = HIDDEN;};

=== Test Bed ===

CharStream charStream = new ANTLRStringStream("I like the number 2.\r\n");
HermanLexer lexer = new HermanLexer(charStream);
TokenStream tokenStream = new CommonTokenStream(lexer);
HermanParser parser = new HermanParser(tokenStream );
parser.detail();
System.out.println("Done.");

=== Output ===
enter LETTER I line=1:0
exit LETTER   line=1:1
enter T__12   line=1:1
exit T__12 l line=1:2
enter LETTER l line=1:2
exit LETTER i line=1:3
enter LETTER i line=1:3
exit LETTER k line=1:4
enter LETTER k line=1:4
exit LETTER e line=1:5
enter LETTER e line=1:5
exit LETTER   line=1:6
enter T__12   line=1:6
exit T__12 t line=1:7
enter LETTER t line=1:7
exit LETTER h line=1:8
enter LETTER h line=1:8
exit LETTER e line=1:9
enter LETTER e line=1:9
exit LETTER   line=1:10
enter T__12   line=1:10
exit T__12 n line=1:11
enter LETTER n line=1:11
exit LETTER u line=1:12
enter LETTER u line=1:12
exit LETTER m line=1:13
enter LETTER m line=1:13
exit LETTER b line=1:14
enter LETTER b line=1:14
exit LETTER e line=1:15
enter LETTER e line=1:15
exit LETTER r line=1:16
enter LETTER r line=1:16
exit LETTER   line=1:17
enter T__12   line=1:17
exit T__12 2 line=1:18
enter PRICE 2 line=1:18
enter INTEGER 2 line=1:18
enter DIGIT 2 line=1:18
exit DIGIT . line=1:19
exit INTEGER . line=1:19
enter INTEGER
 line=1:20
exit INTEGER
 line=1:20
exit PRICE
 line=1:20
enter LBR
 line=1:20
exit LBR ? line=2:0
line 1:20 required (...)+ loop did not match anything at character '\r'
java.net.BindException: Address already in use: JVM_Bind
java.net.BindException: Address already in use: JVM_Bind
at java.net.PlainSocketImpl.socketBind(Native Method)
at java.net.PlainSocketImpl.bind(Unknown Source)
at java.net.ServerSocket.bind(Unknown Source)
at java.net.ServerSocket.<init>(Unknown Source)
at java.net.ServerSocket.<init>(Unknown Source)
at
org.antlr.runtime.debug.DebugEventSocketProxy.handshake(DebugEventSocketProxy.java:75)
at com.kenklose.ibdscraper.IBD100ListParser.<init>(IBD100ListParser.java:52)
at com.kenklose.ibdscraper.IBD100ListParser.<init>(IBD100ListParser.java:43)
at com.kenklose.ibdscraper.Test.main(Test.java:23)
Exception in thread "main" java.lang.NullPointerException
at
org.antlr.runtime.debug.DebugEventSocketProxy.transmit(DebugEventSocketProxy.java:116)
at org.antlr.runtime.debug.DebugEventSocketProxy.LT
(DebugEventSocketProxy.java:161)
at org.antlr.runtime.debug.DebugTokenStream.LT(DebugTokenStream.java:82)
at org.antlr.runtime.Parser.traceIn(Parser.java:92)
at com.kenklose.ibdscraper.IBD100ListParser.detail(IBD100ListParser.java:96)
at com.kenklose.ibdscraper.Test.main(Test.java:24)

From gerald at certiv.net  Sun Aug  8 16:28:24 2010
From: gerald at certiv.net (Gerald Rosenberg)
Date: Sun, 08 Aug 2010 16:28:24 -0700
Subject: [antlr-interest] How does INTEGER+ '.' INTEGER+ match "2."?
In-Reply-To: <AANLkTi=5KwnmUFnnwdv52_sffWJdayOOAyePMWmbXCy-@mail.gmail.com>
References: <AANLkTi=5KwnmUFnnwdv52_sffWJdayOOAyePMWmbXCy-@mail.gmail.com>
Message-ID: <4C5F3D98.7090701@certiv.net>


------ Original Message (Sunday, August 08, 2010 6:42:55 PM) From: Ken 
Klose ------
Subject: [antlr-interest] How does INTEGER+ '.' INTEGER+ match "2."?
> INTEGER: DIGIT+;
> PRICE: INTEGER '.' INTEGER;
Integer and price are ambiguous and, if "2." is a valid price, need to 
make the decimal field optional.

Try:

INTEGER : DIGIT+
                         (  '.' (DIGIT+)? { $type=PRICE; }  // define 
PRICE  in the token block
                          |  // just an integer
                         )
                 ;




From kenklose at gmail.com  Sun Aug  8 17:35:22 2010
From: kenklose at gmail.com (Ken Klose)
Date: Sun, 8 Aug 2010 20:35:22 -0400
Subject: [antlr-interest] How does INTEGER+ '.' INTEGER+ match "2."?
In-Reply-To: <4C5F3D98.7090701@certiv.net>
References: <AANLkTi=5KwnmUFnnwdv52_sffWJdayOOAyePMWmbXCy-@mail.gmail.com>
	<4C5F3D98.7090701@certiv.net>
Message-ID: <AANLkTinLOw=QEgV9rLrmbNNhPG-LhXHxZrGpv8+QMFJB@mail.gmail.com>

Thanks for replying.

2. is not a valid PRICE.  PRICE should have at least 1 digit following the
'.'.  In the context of the string that I am trying to match "2." doesn't
have any particular significance, it is neither an INTEGER nor a PRICE.  It
is simply an INTEGER following by an SYMBOL token.  What I don't understand
is why ANTLR is getting hung up trying to match it as a PRICE when it
doesn't conform to the PRICE specification.  PRICE specifies another INTEGER
following the '.' which this input doesn't have.

On Sun, Aug 8, 2010 at 7:28 PM, Gerald Rosenberg <gerald at certiv.net> wrote:

>
> ------ Original Message (Sunday, August 08, 2010 6:42:55 PM) From: Ken
> Klose ------
> Subject: [antlr-interest] How does INTEGER+ '.' INTEGER+ match "2."?
>
>  INTEGER: DIGIT+;
>> PRICE: INTEGER '.' INTEGER;
>>
> Integer and price are ambiguous and, if "2." is a valid price, need to make
> the decimal field optional.
>
> Try:
>
> INTEGER : DIGIT+
>                        (  '.' (DIGIT+)? { $type=PRICE; }  // define PRICE
>  in the token block
>                         |  // just an integer
>                        )
>                ;
>
>
>
>

From cummings at kjchome.homeip.net  Sun Aug  8 17:50:15 2010
From: cummings at kjchome.homeip.net (Kevin J. Cummings)
Date: Sun, 08 Aug 2010 20:50:15 -0400
Subject: [antlr-interest] How does INTEGER+ '.' INTEGER+ match "2."?
In-Reply-To: <AANLkTinLOw=QEgV9rLrmbNNhPG-LhXHxZrGpv8+QMFJB@mail.gmail.com>
References: <AANLkTi=5KwnmUFnnwdv52_sffWJdayOOAyePMWmbXCy-@mail.gmail.com>	<4C5F3D98.7090701@certiv.net>
	<AANLkTinLOw=QEgV9rLrmbNNhPG-LhXHxZrGpv8+QMFJB@mail.gmail.com>
Message-ID: <4C5F50C7.9080606@kjchome.homeip.net>

On 08/08/2010 08:35 PM, Ken Klose wrote:
> Thanks for replying.
> 
> 2. is not a valid PRICE.  PRICE should have at least 1 digit following the
> '.'.  In the context of the string that I am trying to match "2." doesn't
> have any particular significance, it is neither an INTEGER nor a PRICE.  It
> is simply an INTEGER following by an SYMBOL token.  What I don't understand
> is why ANTLR is getting hung up trying to match it as a PRICE when it
> doesn't conform to the PRICE specification.  PRICE specifies another INTEGER
> following the '.' which this input doesn't have.

Ken,
	What you are missing is that PRICE is that PRICE is a token.  Tokens
get matched based on longest possible match.  Once the lexer sees that
it has an INTEGER followed by a '.', its path is chosen.  Its either a
PRICE or its an error (which you are seeing).  If that is not your
intent, then you need to fix your lexer so that it knows better.

Gerald poses a possible solution.  But, perhaps he doesn't go far
enough.  Would the following work for you?

INTEGER: DIGIT+ ( '.' DIGIT+ { $type=PRICE; } )?
       ;

Now, if the lexer sees an INTEGER followed by a '.', it *must* be
followed by DIGITs otherwise, it will just lex an INTEGER, and then try
and deal with the '.' character....

> On Sun, Aug 8, 2010 at 7:28 PM, Gerald Rosenberg <gerald at certiv.net> wrote:
> 
>>
>> ------ Original Message (Sunday, August 08, 2010 6:42:55 PM) From: Ken
>> Klose ------
>> Subject: [antlr-interest] How does INTEGER+ '.' INTEGER+ match "2."?
>>
>>  INTEGER: DIGIT+;
>>> PRICE: INTEGER '.' INTEGER;
>>>
>> Integer and price are ambiguous and, if "2." is a valid price, need to make
>> the decimal field optional.
>>
>> Try:
>>
>> INTEGER : DIGIT+
>>                        (  '.' (DIGIT+)? { $type=PRICE; }  // define PRICE
>>  in the token block
>>                         |  // just an integer
>>                        )
>>                ;
>>
>>
>>
>>
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


-- 
Kevin J. Cummings
kjchome at rcn.com
cummings at kjchome.homeip.net
cummings at kjc386.framingham.ma.us
Registered Linux User #1232 (http://counter.li.org)

From jbb at acm.org  Sun Aug  8 18:21:46 2010
From: jbb at acm.org (John B. Brodie)
Date: Sun, 08 Aug 2010 21:21:46 -0400
Subject: [antlr-interest] How does INTEGER+ '.' INTEGER+ match "2."?
In-Reply-To: <4C5F50C7.9080606@kjchome.homeip.net>
References: <AANLkTi=5KwnmUFnnwdv52_sffWJdayOOAyePMWmbXCy-@mail.gmail.com>
	<4C5F3D98.7090701@certiv.net>
	<AANLkTinLOw=QEgV9rLrmbNNhPG-LhXHxZrGpv8+QMFJB@mail.gmail.com>
	<4C5F50C7.9080606@kjchome.homeip.net>
Message-ID: <1281316906.30831.9.camel@gecko.home.org>

On Sun, 2010-08-08 at 20:50 -0400, Kevin J. Cummings wrote:
> On 08/08/2010 08:35 PM, Ken Klose wrote:
> > Thanks for replying.
> > 
> > 2. is not a valid PRICE.  PRICE should have at least 1 digit following the
> > '.'.  In the context of the string that I am trying to match "2." doesn't
> > have any particular significance, it is neither an INTEGER nor a PRICE.  It
> > is simply an INTEGER following by an SYMBOL token.  What I don't understand
> > is why ANTLR is getting hung up trying to match it as a PRICE when it
> > doesn't conform to the PRICE specification.  PRICE specifies another INTEGER
> > following the '.' which this input doesn't have.
> 
> Ken,
> 	What you are missing is that PRICE is that PRICE is a token.  Tokens
> get matched based on longest possible match.  Once the lexer sees that
> it has an INTEGER followed by a '.', its path is chosen.  Its either a
> PRICE or its an error (which you are seeing).  If that is not your
> intent, then you need to fix your lexer so that it knows better.
> 
> Gerald poses a possible solution.  But, perhaps he doesn't go far
> enough.  Would the following work for you?
> 
> INTEGER: DIGIT+ ( '.' DIGIT+ { $type=PRICE; } )?
>        ;
> 
> Now, if the lexer sees an INTEGER followed by a '.', it *must* be
> followed by DIGITs otherwise, it will just lex an INTEGER, and then try
> and deal with the '.' character....
> 

this is (i think) one of the very rare instances where a Syntactic
Predicate is appropriate -- because the implicit look-ahead involved is
clearly bounded. generally you should avoid any predicates and/or
back-tracking because of the potential unbounded look-ahead. but that is
not an issue in this intance.

so try:

INTEGER: DIGIT+ ( ('.' DIGIT)=> '.' DIGIT+ {$type=PRICE;} )? ;

where PRICE is an imaginary token defined in a tokens{} block before any
rule in your grammar.

also, as an aside, ... i would be *VERY* worried by your SYMBOL lexer
rule --- use of the negation meta-syntax has always given me more
problems than solutions. please be sure to unit-test the heck out of
that puppy ;-) YMMV

> > On Sun, Aug 8, 2010 at 7:28 PM, Gerald Rosenberg <gerald at certiv.net> wrote:
> > 
> >>
> >> ------ Original Message (Sunday, August 08, 2010 6:42:55 PM) From: Ken
> >> Klose ------
> >> Subject: [antlr-interest] How does INTEGER+ '.' INTEGER+ match "2."?
> >>
> >>  INTEGER: DIGIT+;
> >>> PRICE: INTEGER '.' INTEGER;
> >>>
> >> Integer and price are ambiguous and, if "2." is a valid price, need to make
> >> the decimal field optional.
> >>
> >> Try:
> >>
> >> INTEGER : DIGIT+
> >>                        (  '.' (DIGIT+)? { $type=PRICE; }  // define PRICE
> >>  in the token block
> >>                         |  // just an integer
> >>                        )
> >>                ;
> >>


From lulu760 at gmail.com  Sun Aug  8 19:19:10 2010
From: lulu760 at gmail.com (lu lu)
Date: Mon, 9 Aug 2010 10:19:10 +0800
Subject: [antlr-interest] question about deleteChild function
Message-ID: <AANLkTinBXnKY6zF-WyATHRiY9T_a-GHys1exkh0MG_jH@mail.gmail.com>

Hi, everyone.

I am doing a job about modifying AST of a SQL like language generated by
ANTLR3.2 parser. However, when I use deleteChild function of Tree class, I
can?t delete the first and last child of the tree, while the others can be
deleted successfully. I was confused by this problem, Could someone give me
any advice?



Thank you?



Best Regards,

Lu Lu

email:lulu760 at gmail.com <email%3Alulu760 at gmail.com>

From kcarroll at signmgmt.com  Mon Aug  9 03:30:12 2010
From: kcarroll at signmgmt.com (Kevin Carroll)
Date: Mon, 9 Aug 2010 05:30:12 -0500
Subject: [antlr-interest] "Return via Exception Technique" and VS2010
In-Reply-To: <00a701cb372b$8ee8bd50$acba37f0$@pixelminegames.com>
References: <80A5CDD2686EA042AE41C526324D44558EF2CC3B2F@EXCHANGE2007.signmgmt.local>
	<00a701cb372b$8ee8bd50$acba37f0$@pixelminegames.com>
Message-ID: <80A5CDD2686EA042AE41C526324D44558EF2CC3B32@EXCHANGE2007.signmgmt.local>

Thanks, Sam.  I'll try to implement an "exception-free" technique for handling method returns.  

For clarification, are you saying that TP's pattern might be acceptable if the implementation language is Java but definitely not if C#?  If so, a recommendation for a disclaimer in the book might be in order.

Thanks,
Kevin

-----Original Message-----
From: Sam Harwell [mailto:sharwell at pixelminegames.com] 
Sent: Sunday, August 08, 2010 1:58 PM
To: Kevin Carroll; antlr-interest at antlr.org
Subject: RE: [antlr-interest] "Return via Exception Technique" and VS2010

First of all, you should absolutely not be using exception handling for flow
control. If you are, there's a critical design error involved and you should
fix it before worrying about other things. Second, the way Java handles
exceptions is different from the way the CLR handles them. The CLR builds
the stack trace when the exception is thrown, reducing the possibility that
exceptions will be misused by reusing the exception object. Exception
handling is for errors - find another (proper) way to return your values and
both your performance and design problems will be fixed.

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Kevin Carroll
Sent: Sunday, August 08, 2010 10:10 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] "Return via Exception Technique" and VS2010

I'm having a problem that hopefully someone on this list can shed some light
on.

I've implemented a tree-based interpreter in C# on .Net for a DSL using
ANTLR.  I've used Terrence Parr's "Language Implementation Patterns" book
for guidance.  In his chapter on tree-based interpreters, he used a
technique for returning from a method call which involved wrapping the code
that calls the method in a try-catch block, throwing an exception that
contains the return value as the return mechanism, and catching the
exception to retrieve the return value.  He states that "This mechanism
isn't slow if we share the same exception object.  Only creating exceptions
is expensive; throwing them is no big deal."  I implemented the technique
for my return mechanism.

This technique seems to work great, and it runs acceptably fast if NOT
running inside the VS2010 debugger.  However, if the same DSL script is run
IN the debugger, the performance drags to a crawl.  The same script can
literally run 100-1000 times slower in the debugger vs. out of the debugger.

I'm only going on a hunch (and another programmer who works with me agrees),
but things seem to be pointing to the exception throw-catch situation as the
culprit.

Another variable involved is that my interpreter makes extensive use of .Net
4.0's new DynamicObject.  I'm not using ExpressionTree's for my AST (yet),
but some of the AST node execution methods use the DLR.

Does anyone have any insight into what might be going on, or any suggestions
on ways to check what might be causing the problems?

I would appreciate any and all input.

Thanks,
Kevin Carroll

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From hitesh.p.shetty at gmail.com  Mon Aug  9 09:11:06 2010
From: hitesh.p.shetty at gmail.com (Hitesh Shetty)
Date: Mon, 9 Aug 2010 21:41:06 +0530
Subject: [antlr-interest] A basic question about AST construction operators
Message-ID: <AANLkTimcP9SfSxFzdJkc0QE99timjcVV41tjGc0fNBTC@mail.gmail.com>

Hi,

Im a newbie ANTLR user and I had a basic question about the AST construction
operator '^' caret,
When the AST construction operator '^' (caret) is used along with a normal
rule such as
   condStatement : 'expression' ^ x=statement1 (y=statement2)? ;
The term 'expression' becomes the root for the tree and the next un-suffixed
element i.e $x becomes the first child and $y becomes the second child. This
can be rewritten as ^('expression' $x $y?).
However when the operator '^' is used along with a subrule such as
   expr : x=INT ('+' ^ y=INT)* ;
The $x is chosen as the first child not the next unsuffixed element i.e $y.
For example input 1+2 is parsed as ^('+' 1 2) and not as ^('+' 2 1)
Am I missing something obvious or Is this the behaviour of the AST
construction operator ?
Any pointers would be greatly appreciated.

From jimi at temporal-wave.com  Mon Aug  9 09:54:33 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 9 Aug 2010 09:54:33 -0700
Subject: [antlr-interest] A basic question about AST construction
	operators
In-Reply-To: <AANLkTimcP9SfSxFzdJkc0QE99timjcVV41tjGc0fNBTC@mail.gmail.com>
References: <AANLkTimcP9SfSxFzdJkc0QE99timjcVV41tjGc0fNBTC@mail.gmail.com>
Message-ID: <031b01cb37e3$8ab172a0$a01457e0$@temporal-wave.com>

This is what it is supposed to do. In the first example, no nodes have been
accumulated yet, so there is nothing to become the first child yet. In the
second case you have accumulated a node already and therefore it becomes a
child as would any others already accumulated.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Hitesh Shetty
> Sent: Monday, August 09, 2010 9:11 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] A basic question about AST construction
operators
> 
> Hi,
> 
> Im a newbie ANTLR user and I had a basic question about the AST
> construction operator '^' caret, When the AST construction operator '^'
> (caret) is used along with a normal rule such as
>    condStatement : 'expression' ^ x=statement1 (y=statement2)? ; The term
> 'expression' becomes the root for the tree and the next un-suffixed
element
> i.e $x becomes the first child and $y becomes the second child. This can
be
> rewritten as ^('expression' $x $y?).
> However when the operator '^' is used along with a subrule such as
>    expr : x=INT ('+' ^ y=INT)* ;
> The $x is chosen as the first child not the next unsuffixed element i.e
$y.
> For example input 1+2 is parsed as ^('+' 1 2) and not as ^('+' 2 1) Am I
missing
> something obvious or Is this the behaviour of the AST construction
operator
> ?
> Any pointers would be greatly appreciated.
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From sharwell at pixelminegames.com  Mon Aug  9 13:47:40 2010
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Mon, 9 Aug 2010 15:47:40 -0500
Subject: [antlr-interest] "Return via Exception Technique" and VS2010
In-Reply-To: <80A5CDD2686EA042AE41C526324D44558EF2CC3B32@EXCHANGE2007.signmgmt.local>
References: <80A5CDD2686EA042AE41C526324D44558EF2CC3B2F@EXCHANGE2007.signmgmt.local>
	<00a701cb372b$8ee8bd50$acba37f0$@pixelminegames.com>
	<80A5CDD2686EA042AE41C526324D44558EF2CC3B32@EXCHANGE2007.signmgmt.local>
Message-ID: <011201cb3804$1c4723c0$54d56b40$@pixelminegames.com>

Regarding Java, take a look at this Stack Overflow question:

http://stackoverflow.com/questions/762330/do-singleton-exceptions-work

I'm generally of the mindset that exceptions should be avoided where
possible, but some answers to that question suggest possible uses.

Sam

-----Original Message-----
From: Kevin Carroll [mailto:kcarroll at signmgmt.com] 
Sent: Monday, August 09, 2010 5:30 AM
To: Sam Harwell; antlr-interest at antlr.org
Subject: RE: [antlr-interest] "Return via Exception Technique" and VS2010

Thanks, Sam.  I'll try to implement an "exception-free" technique for
handling method returns.  

For clarification, are you saying that TP's pattern might be acceptable if
the implementation language is Java but definitely not if C#?  If so, a
recommendation for a disclaimer in the book might be in order.

Thanks,
Kevin

-----Original Message-----
From: Sam Harwell [mailto:sharwell at pixelminegames.com] 
Sent: Sunday, August 08, 2010 1:58 PM
To: Kevin Carroll; antlr-interest at antlr.org
Subject: RE: [antlr-interest] "Return via Exception Technique" and VS2010

First of all, you should absolutely not be using exception handling for flow
control. If you are, there's a critical design error involved and you should
fix it before worrying about other things. Second, the way Java handles
exceptions is different from the way the CLR handles them. The CLR builds
the stack trace when the exception is thrown, reducing the possibility that
exceptions will be misused by reusing the exception object. Exception
handling is for errors - find another (proper) way to return your values and
both your performance and design problems will be fixed.

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Kevin Carroll
Sent: Sunday, August 08, 2010 10:10 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] "Return via Exception Technique" and VS2010

I'm having a problem that hopefully someone on this list can shed some light
on.

I've implemented a tree-based interpreter in C# on .Net for a DSL using
ANTLR.  I've used Terrence Parr's "Language Implementation Patterns" book
for guidance.  In his chapter on tree-based interpreters, he used a
technique for returning from a method call which involved wrapping the code
that calls the method in a try-catch block, throwing an exception that
contains the return value as the return mechanism, and catching the
exception to retrieve the return value.  He states that "This mechanism
isn't slow if we share the same exception object.  Only creating exceptions
is expensive; throwing them is no big deal."  I implemented the technique
for my return mechanism.

This technique seems to work great, and it runs acceptably fast if NOT
running inside the VS2010 debugger.  However, if the same DSL script is run
IN the debugger, the performance drags to a crawl.  The same script can
literally run 100-1000 times slower in the debugger vs. out of the debugger.

I'm only going on a hunch (and another programmer who works with me agrees),
but things seem to be pointing to the exception throw-catch situation as the
culprit.

Another variable involved is that my interpreter makes extensive use of .Net
4.0's new DynamicObject.  I'm not using ExpressionTree's for my AST (yet),
but some of the AST node execution methods use the DLR.

Does anyone have any insight into what might be going on, or any suggestions
on ways to check what might be causing the problems?

I would appreciate any and all input.

Thanks,
Kevin Carroll

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From will at tribbey.net  Mon Aug  9 14:45:50 2010
From: will at tribbey.net (William Tribbey)
Date: Mon, 9 Aug 2010 17:45:50 -0400
Subject: [antlr-interest] lexer/parser code generation
Message-ID: <AANLkTi=T+VK0FXyTwOTccXY73LLdfveFJ=avQH4iaDqX@mail.gmail.com>

Hello All,

This is a small thing, I know, but it is rather pesky to me. I would like
the
lexer and parser generated by ANTLR to have a package statement in the
written files so that I can have them generated right into my project's
folders.

I poked around awhile but I must be looking in the wrong places. Does anyone
have an answer other than the obvious 'quit whining'?

Cheers,

Will T.

From jimi at temporal-wave.com  Mon Aug  9 15:06:55 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 9 Aug 2010 15:06:55 -0700
Subject: [antlr-interest] lexer/parser code generation
In-Reply-To: <AANLkTi=T+VK0FXyTwOTccXY73LLdfveFJ=avQH4iaDqX@mail.gmail.com>
References: <AANLkTi=T+VK0FXyTwOTccXY73LLdfveFJ=avQH4iaDqX@mail.gmail.com>
Message-ID: <04a401cb380f$2deb2080$89c16180$@temporal-wave.com>

@parser::header {
package ...
}
@lexer::header {
package ...
}

Did you use the search engine on the support page?  antlr.markmail.org 

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of William Tribbey
> Sent: Monday, August 09, 2010 2:46 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] lexer/parser code generation
> 
> Hello All,
> 
> This is a small thing, I know, but it is rather pesky to me. I would like
the lexer
> and parser generated by ANTLR to have a package statement in the written
> files so that I can have them generated right into my project's folders.
> 
> I poked around awhile but I must be looking in the wrong places. Does
> anyone have an answer other than the obvious 'quit whining'?
> 
> Cheers,
> 
> Will T.
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From dinesha74 at yahoo.com  Mon Aug  9 18:54:55 2010
From: dinesha74 at yahoo.com (Dinesha Balasuriya Weragama)
Date: Mon, 9 Aug 2010 18:54:55 -0700 (PDT)
Subject: [antlr-interest] (no subject)
Message-ID: <46784.5370.qm@web33201.mail.mud.yahoo.com>

I need an html grammar to work with antlr.? I downloaded the grammar at 
http://www.antlr.org/grammar/HTML/html.g but it has many problems.? For 
example, the lexer grammar has been updated to have a single tag 
BFONT_OR_BASE whereas the BFONT tag is still there in the parser 
grammar.? I corrected all these problems but still the grammar returns a
 lot of console messages and does not show a proper parse tree (when 
using ANTLRWorks).? Could some one please tell me how to correct it or 
suggest some other HTML grammar that I could use.


      

From dinesha74 at yahoo.com  Mon Aug  9 20:45:17 2010
From: dinesha74 at yahoo.com (Dinesha Balasuriya Weragama)
Date: Mon, 9 Aug 2010 20:45:17 -0700 (PDT)
Subject: [antlr-interest] Fw: Sorry I missed the subject :HTML grammar for
	ANTLR
Message-ID: <664551.98967.qm@web33205.mail.mud.yahoo.com>



--- On Tue, 10/8/10, Dinesha Balasuriya Weragama <dinesha74 at yahoo.com> wrote:

From: Dinesha Balasuriya Weragama <dinesha74 at yahoo.com>
Subject: [antlr-interest] (no subject)
To: "ANTLR" <antlr-interest at antlr.org>
Received: Tuesday, 10 August, 2010, 7:54 AM

I need an html grammar to work with antlr.? I downloaded the grammar at 
http://www.antlr.org/grammar/HTML/html.g but it has many problems.? For 
example, the lexer grammar has been updated to have a single tag 
BFONT_OR_BASE whereas the BFONT tag is still there in the parser 
grammar.? I corrected all these problems but still the grammar returns a
 lot of console messages and does not show a proper parse tree (when 
using ANTLRWorks).? Could some one please tell me how to correct it or 
suggest some other HTML grammar that I could use.


? ? ? 

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address



      

From kcarroll at signmgmt.com  Tue Aug 10 04:41:54 2010
From: kcarroll at signmgmt.com (Kevin Carroll)
Date: Tue, 10 Aug 2010 06:41:54 -0500
Subject: [antlr-interest] "Return via Exception Technique" and VS2010
In-Reply-To: <011201cb3804$1c4723c0$54d56b40$@pixelminegames.com>
References: <80A5CDD2686EA042AE41C526324D44558EF2CC3B2F@EXCHANGE2007.signmgmt.local>
	<00a701cb372b$8ee8bd50$acba37f0$@pixelminegames.com>
	<80A5CDD2686EA042AE41C526324D44558EF2CC3B32@EXCHANGE2007.signmgmt.local>
	<011201cb3804$1c4723c0$54d56b40$@pixelminegames.com>
Message-ID: <80A5CDD2686EA042AE41C526324D44558EF2CC3C53@EXCHANGE2007.signmgmt.local>

For all interested, 

it turned out that reworking my interpreter to eliminate the return-via-exception technique was much easier than I thought it might be, and it absolutely DID eliminate the problem with the execution slowing down excessively while running in the VS2010 debugger.

Thanks Sam!

Kevin

-----Original Message-----
From: Sam Harwell [mailto:sharwell at pixelminegames.com] 
Sent: Monday, August 09, 2010 3:48 PM
To: Kevin Carroll; antlr-interest at antlr.org
Subject: RE: [antlr-interest] "Return via Exception Technique" and VS2010

Regarding Java, take a look at this Stack Overflow question:

http://stackoverflow.com/questions/762330/do-singleton-exceptions-work

I'm generally of the mindset that exceptions should be avoided where
possible, but some answers to that question suggest possible uses.

Sam

-----Original Message-----
From: Kevin Carroll [mailto:kcarroll at signmgmt.com] 
Sent: Monday, August 09, 2010 5:30 AM
To: Sam Harwell; antlr-interest at antlr.org
Subject: RE: [antlr-interest] "Return via Exception Technique" and VS2010

Thanks, Sam.  I'll try to implement an "exception-free" technique for
handling method returns.  

For clarification, are you saying that TP's pattern might be acceptable if
the implementation language is Java but definitely not if C#?  If so, a
recommendation for a disclaimer in the book might be in order.

Thanks,
Kevin

-----Original Message-----
From: Sam Harwell [mailto:sharwell at pixelminegames.com] 
Sent: Sunday, August 08, 2010 1:58 PM
To: Kevin Carroll; antlr-interest at antlr.org
Subject: RE: [antlr-interest] "Return via Exception Technique" and VS2010

First of all, you should absolutely not be using exception handling for flow
control. If you are, there's a critical design error involved and you should
fix it before worrying about other things. Second, the way Java handles
exceptions is different from the way the CLR handles them. The CLR builds
the stack trace when the exception is thrown, reducing the possibility that
exceptions will be misused by reusing the exception object. Exception
handling is for errors - find another (proper) way to return your values and
both your performance and design problems will be fixed.

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Kevin Carroll
Sent: Sunday, August 08, 2010 10:10 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] "Return via Exception Technique" and VS2010

I'm having a problem that hopefully someone on this list can shed some light
on.

I've implemented a tree-based interpreter in C# on .Net for a DSL using
ANTLR.  I've used Terrence Parr's "Language Implementation Patterns" book
for guidance.  In his chapter on tree-based interpreters, he used a
technique for returning from a method call which involved wrapping the code
that calls the method in a try-catch block, throwing an exception that
contains the return value as the return mechanism, and catching the
exception to retrieve the return value.  He states that "This mechanism
isn't slow if we share the same exception object.  Only creating exceptions
is expensive; throwing them is no big deal."  I implemented the technique
for my return mechanism.

This technique seems to work great, and it runs acceptably fast if NOT
running inside the VS2010 debugger.  However, if the same DSL script is run
IN the debugger, the performance drags to a crawl.  The same script can
literally run 100-1000 times slower in the debugger vs. out of the debugger.

I'm only going on a hunch (and another programmer who works with me agrees),
but things seem to be pointing to the exception throw-catch situation as the
culprit.

Another variable involved is that my interpreter makes extensive use of .Net
4.0's new DynamicObject.  I'm not using ExpressionTree's for my AST (yet),
but some of the AST node execution methods use the DLR.

Does anyone have any insight into what might be going on, or any suggestions
on ways to check what might be causing the problems?

I would appreciate any and all input.

Thanks,
Kevin Carroll

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From qsmgmt at earthlink.net  Tue Aug 10 06:45:23 2010
From: qsmgmt at earthlink.net (Alan Lehotsky)
Date: Tue, 10 Aug 2010 09:45:23 -0400 (GMT-04:00)
Subject: [antlr-interest] problems with libantlr 3.2 release configure script
Message-ID: <10866833.1281447923910.JavaMail.root@elwamui-rubis.atl.sa.earthlink.net>

The distributed configure script produces a warning message (on pretty much every linux, solaris, hp, and ibm unix-like system I've built it on...)

          ./configure[19707]: #include: not found

When I track this down, I see that line 19707 of configure is

          $ac_includes_default

As a shell command, which expands into essentially a long sequence of cpp #ifdef's and #includes.

I suspected a corrupted configure, so I tried rebuilding with autoconf-2.60.  A pristine configure shows that same problem.

Unfortunately, I'm now in over-my-head for autoconf and aclocal debugging.  Anyone else seeing this or have insights into whether this is anything worth worrying about?


From suresh.selva at hcl.in  Tue Aug 10 07:05:26 2010
From: suresh.selva at hcl.in (Suresh Selvaraj)
Date: Tue, 10 Aug 2010 19:35:26 +0530
Subject: [antlr-interest] New to ANTLR - Need rewrite rule for PLSQL.g
Message-ID: <15C6FBBC7A16934D91E0700BC91278D9128A80@CHN-HCLT-EVS06.HCLT.CORP.HCL.IN>

Hi All,

I have found PLSQL grammar file in the ANTLR website. I am trying to find the rewrite rule for the PLSQL to construct the AST.

Kindly help me.

Thanks.
Suresh.S

DISCLAIMER:
-----------------------------------------------------------------------------------------------------------------------

The contents of this e-mail and any attachment(s) are confidential and intended for the named recipient(s) only. 
It shall not attach any liability on the originator or HCL or its affiliates. Any views or opinions presented in 
this email are solely those of the author and may not necessarily reflect the opinions of HCL or its affiliates. 
Any form of reproduction, dissemination, copying, disclosure, modification, distribution and / or publication of 
this message without the prior written consent of the author of this e-mail is strictly prohibited. If you have 
received this email in error please delete it and notify the sender immediately. Before opening any mail and 
attachments please check them for viruses and defect.

-----------------------------------------------------------------------------------------------------------------------

From hitesh.p.shetty at gmail.com  Tue Aug 10 09:19:20 2010
From: hitesh.p.shetty at gmail.com (Hitesh Shetty)
Date: Tue, 10 Aug 2010 21:49:20 +0530
Subject: [antlr-interest] A basic question about AST construction
	operators
In-Reply-To: <AANLkTimcP9SfSxFzdJkc0QE99timjcVV41tjGc0fNBTC@mail.gmail.com>
References: <AANLkTimcP9SfSxFzdJkc0QE99timjcVV41tjGc0fNBTC@mail.gmail.com>
Message-ID: <AANLkTin8tWw1-e0d0C9nmyEaPLrD=SDH1y96zKgUEt6+@mail.gmail.com>

Hello,

First of all, Thank you Mr. Jim for your reply.
The question was actuall sent in reference to the Definite ANTLR reference,
table 7.1 found on page 176,  which mentions that the first non-suffixed
element becomes the first child of the root of the subtree. This seemed
in-consistent with the grammar rules mentioned in the earlier mail.

What is your opinion about this.

Regards,
Hitesh

On 8/9/10, Hitesh Shetty <hitesh.p.shetty at gmail.com> wrote:
>
> Hi,
>
> Im a newbie ANTLR user and I had a basic question about the AST
> construction operator '^' caret,
> When the AST construction operator '^' (caret) is used along with a normal
> rule such as
>    condStatement : 'expression' ^ x=statement1 (y=statement2)? ;
> The term 'expression' becomes the root for the tree and the next
> un-suffixed element i.e $x becomes the first child and $y becomes the second
> child. This can be rewritten as ^('expression' $x $y?).
> However when the operator '^' is used along with a subrule such as
>    expr : x=INT ('+' ^ y=INT)* ;
> The $x is chosen as the first child not the next unsuffixed element i.e $y.
> For example input 1+2 is parsed as ^('+' 1 2) and not as ^('+' 2 1)
> Am I missing something obvious or Is this the behaviour of the AST
> construction operator ?
> Any pointers would be greatly appreciated.
>
>
>

From hitesh.p.shetty at gmail.com  Tue Aug 10 10:09:22 2010
From: hitesh.p.shetty at gmail.com (Hitesh Shetty)
Date: Tue, 10 Aug 2010 22:39:22 +0530
Subject: [antlr-interest] A basic question about AST construction
	operators
In-Reply-To: <AANLkTin8tWw1-e0d0C9nmyEaPLrD=SDH1y96zKgUEt6+@mail.gmail.com>
References: <AANLkTimcP9SfSxFzdJkc0QE99timjcVV41tjGc0fNBTC@mail.gmail.com>
	<AANLkTin8tWw1-e0d0C9nmyEaPLrD=SDH1y96zKgUEt6+@mail.gmail.com>
Message-ID: <AANLkTi=dZh39bGQwxaYDGaJnUqR5P6Kd5BuPWgXZQTyP@mail.gmail.com>

My apologies for the previous mail.
There is a small correction, table 7.1 mentions that the next, & not first,
un-suffixed element becomes the first child of the root. This seems
in-consistent with the grammar rules mentioned in the earlier mail.
Regards,
Hitesh

On 8/10/10, Hitesh Shetty <hitesh.p.shetty at gmail.com> wrote:
>
> Hello,
>
> First of all, Thank you Mr. Jim for your reply.
> The question was actuall sent in reference to the Definite ANTLR reference,
> table 7.1 found on page 176,  which mentions that the first non-suffixed
> element becomes the first child of the root of the subtree. This seemed
> in-consistent with the grammar rules mentioned in the earlier mail.
>
> What is your opinion about this.
>
> Regards,
> Hitesh
>
> On 8/9/10, Hitesh Shetty <hitesh.p.shetty at gmail.com> wrote:
>>
>> Hi,
>>
>> Im a newbie ANTLR user and I had a basic question about the AST
>> construction operator '^' caret,
>> When the AST construction operator '^' (caret) is used along with a normal
>> rule such as
>>    condStatement : 'expression' ^ x=statement1 (y=statement2)? ;
>> The term 'expression' becomes the root for the tree and the next
>> un-suffixed element i.e $x becomes the first child and $y becomes the second
>> child. This can be rewritten as ^('expression' $x $y?).
>> However when the operator '^' is used along with a subrule such as
>>    expr : x=INT ('+' ^ y=INT)* ;
>> The $x is chosen as the first child not the next unsuffixed element i.e
>> $y. For example input 1+2 is parsed as ^('+' 1 2) and not as ^('+' 2 1)
>> Am I missing something obvious or Is this the behaviour of the AST
>> construction operator ?
>> Any pointers would be greatly appreciated.
>>
>>
>>
>
>

From jimi at temporal-wave.com  Tue Aug 10 10:18:26 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 10 Aug 2010 10:18:26 -0700
Subject: [antlr-interest] problems with libantlr 3.2 release configure
	script
In-Reply-To: <10866833.1281447923910.JavaMail.root@elwamui-rubis.atl.sa.earthlink.net>
References: <10866833.1281447923910.JavaMail.root@elwamui-rubis.atl.sa.earthlink.net>
Message-ID: <054201cb38b0$0b735b20$225a1160$@temporal-wave.com>

It is a bug with configure and it seems to be innocuous. I have made some
half-hearted attempts to get rid of it, and will try to lose it in the next
release. It is probably that one of the former 'standard' macros has been
superseded.

Jim


> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Alan Lehotsky
> Sent: Tuesday, August 10, 2010 6:45 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] problems with libantlr 3.2 release configure
script
> 
> The distributed configure script produces a warning message (on pretty
> much every linux, solaris, hp, and ibm unix-like system I've built it
on...)
> 
>           ./configure[19707]: #include: not found
> 
> When I track this down, I see that line 19707 of configure is
> 
>           $ac_includes_default
> 
> As a shell command, which expands into essentially a long sequence of cpp
> #ifdef's and #includes.
> 
> I suspected a corrupted configure, so I tried rebuilding with
autoconf-2.60.  A
> pristine configure shows that same problem.
> 
> Unfortunately, I'm now in over-my-head for autoconf and aclocal debugging.
> Anyone else seeing this or have insights into whether this is anything
worth
> worrying about?
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From a.moderacja at gmail.com  Tue Aug 10 11:20:23 2010
From: a.moderacja at gmail.com (Borneq)
Date: Tue, 10 Aug 2010 20:20:23 +0200
Subject: [antlr-interest] Nested comments
Message-ID: <AANLkTi=5kOdWh4B3A3g68eRN3yr-=0z5Th5tycowAu=J@mail.gmail.com>

Did Antlr support nested comments?

From will at tribbey.net  Tue Aug 10 12:05:17 2010
From: will at tribbey.net (William Tribbey)
Date: Tue, 10 Aug 2010 15:05:17 -0400
Subject: [antlr-interest] lexer/parser code generation
In-Reply-To: <04a401cb380f$2deb2080$89c16180$@temporal-wave.com>
References: <AANLkTi=T+VK0FXyTwOTccXY73LLdfveFJ=avQH4iaDqX@mail.gmail.com>
	<04a401cb380f$2deb2080$89c16180$@temporal-wave.com>
Message-ID: <AANLkTikHyCW84LDo8LtFOO1dkNSXhvOJVwjvCg0M=-w-@mail.gmail.com>

No, duh, thanks! / Will

On Mon, Aug 9, 2010 at 6:06 PM, Jim Idle <jimi at temporal-wave.com> wrote:

> @parser::header {
> package ...
> }
> @lexer::header {
> package ...
> }
>
> Did you use the search engine on the support page?  antlr.markmail.org
>
> Jim
>
> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > bounces at antlr.org] On Behalf Of William Tribbey
> > Sent: Monday, August 09, 2010 2:46 PM
> > To: antlr-interest at antlr.org
> > Subject: [antlr-interest] lexer/parser code generation
> >
> > Hello All,
> >
> > This is a small thing, I know, but it is rather pesky to me. I would like
> the lexer
> > and parser generated by ANTLR to have a package statement in the written
> > files so that I can have them generated right into my project's folders.
> >
> > I poked around awhile but I must be looking in the wrong places. Does
> > anyone have an answer other than the obvious 'quit whining'?
> >
> > Cheers,
> >
> > Will T.
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> > email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From power_giordo at yahoo.com.ar  Tue Aug 10 12:32:35 2010
From: power_giordo at yahoo.com.ar (Victor Giordano)
Date: Tue, 10 Aug 2010 16:32:35 -0300
Subject: [antlr-interest] Doubt About rewrite rulse
In-Reply-To: <054201cb38b0$0b735b20$225a1160$@temporal-wave.com>
References: <10866833.1281447923910.JavaMail.root@elwamui-rubis.atl.sa.earthlink.net>
	<054201cb38b0$0b735b20$225a1160$@temporal-wave.com>
Message-ID: <4C61A953.60406@yahoo.com.ar>

Hi, i am a newbie. Trying to figure out how to work with AST tree and 
generate it. Basically you have to use the ^ and ! operators. But the 
doubt cames with the rewrite rules:

for example (Very very simple):

// matches expresion
expr : term (('+'|'-')^ term)* ;
term : factor (('*'|'/')^ factor)*;
factor: NUMBER | '('! expr ')'!;
NUMBER : '0'..'9';

That works just fine.. (i guess)
butttttttt if i want to use rewrite rules... how do i thread the 
repetion EBNF operator like * or +.

expr : term (('+'|'-') term)* -> term ^(('+'|'-') term)* ;

term : factor (('*'|'/') factor)* -> factor ^(('*'|'/') factor)*;

factor	: NUMBER /*-> NUMBER*/
	| '(' expr ')'/* -> expr*/;
	
NUMBER : '0'..'9';

But i just don't work!!.

Well i hope you undestand the question!! And i hope, over all things, 
that someone knows the answer jejeje!.
Thanks for advance.
Victor!.





El 10/08/2010 02:18 p.m., Jim Idle escribi?:
> It is a bug with configure and it seems to be innocuous. I have made some
> half-hearted attempts to get rid of it, and will try to lose it in the next
> release. It is probably that one of the former 'standard' macros has been
> superseded.
>
> Jim
>
>
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Alan Lehotsky
>> Sent: Tuesday, August 10, 2010 6:45 AM
>> To: antlr-interest at antlr.org
>> Subject: [antlr-interest] problems with libantlr 3.2 release configure
> script
>>
>> The distributed configure script produces a warning message (on pretty
>> much every linux, solaris, hp, and ibm unix-like system I've built it
> on...)
>>
>>            ./configure[19707]: #include: not found
>>
>> When I track this down, I see that line 19707 of configure is
>>
>>            $ac_includes_default
>>
>> As a shell command, which expands into essentially a long sequence of cpp
>> #ifdef's and #includes.
>>
>> I suspected a corrupted configure, so I tried rebuilding with
> autoconf-2.60.  A
>> pristine configure shows that same problem.
>>
>> Unfortunately, I'm now in over-my-head for autoconf and aclocal debugging.
>> Anyone else seeing this or have insights into whether this is anything
> worth
>> worrying about?
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>> email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From j at junkwallah.org  Tue Aug 10 13:00:59 2010
From: j at junkwallah.org (Junkman)
Date: Tue, 10 Aug 2010 13:00:59 -0700
Subject: [antlr-interest] Doubt About rewrite rulse
In-Reply-To: <4C61A953.60406@yahoo.com.ar>
References: <10866833.1281447923910.JavaMail.root@elwamui-rubis.atl.sa.earthlink.net>	<054201cb38b0$0b735b20$225a1160$@temporal-wave.com>
	<4C61A953.60406@yahoo.com.ar>
Message-ID: <4C61AFFB.5070706@junkwallah.org>

Hi Victor,

Victor Giordano wrote:
> Hi, i am a newbie. Trying to figure out how to work with AST tree and 
>
> ...
>
> butttttttt if i want to use rewrite rules... how do i thread the 
> repetion EBNF operator like * or +.
> 
> expr : term (('+'|'-') term)* -> term ^(('+'|'-') term)* ;
> 

try this:

expr: ( term -> term )
      ( ( '+' | '-' ) term -> ^( ( '+' | '-' ) $expr term ) )* ;


Not sure if the terms need to be distinguished with labels.

The Antlr reference book describes the use of rewrite rule inside
subrule in more detail.

J

From power_giordo at yahoo.com.ar  Tue Aug 10 13:31:19 2010
From: power_giordo at yahoo.com.ar (Victor Giordano)
Date: Tue, 10 Aug 2010 17:31:19 -0300
Subject: [antlr-interest] Doubt About rewrite rulse
In-Reply-To: <4C61AFFB.5070706@junkwallah.org>
References: <10866833.1281447923910.JavaMail.root@elwamui-rubis.atl.sa.earthlink.net>	<054201cb38b0$0b735b20$225a1160$@temporal-wave.com>
	<4C61A953.60406@yahoo.com.ar> <4C61AFFB.5070706@junkwallah.org>
Message-ID: <4C61B717.90904@yahoo.com.ar>

Thanks Junkman!!! But it's still doesn't work... :(.
I have another example:

rule: TOKEN1? TOKEN2 -> ^(TOKEN1 TOKEN2) Works when token1 actually 
exists, but when no.. :( ugly things happen..

Well, thanks for advance again!!.
Cya.



El 10/08/2010 05:00 p.m., Junkman escribi?:
> Hi Victor,
>
> Victor Giordano wrote:
>> Hi, i am a newbie. Trying to figure out how to work with AST tree and
>>
>> ...
>>
>> butttttttt if i want to use rewrite rules... how do i thread the
>> repetion EBNF operator like * or +.
>>
>> expr : term (('+'|'-') term)* ->  term ^(('+'|'-') term)* ;
>>
>
> try this:
>
> expr: ( term ->  term )
>        ( ( '+' | '-' ) term ->  ^( ( '+' | '-' ) $expr term ) )* ;
>
>
> Not sure if the terms need to be distinguished with labels.
>
> The Antlr reference book describes the use of rewrite rule inside
> subrule in more detail.
>
> J
>


From power_giordo at yahoo.com.ar  Tue Aug 10 14:17:23 2010
From: power_giordo at yahoo.com.ar (Victor Giordano)
Date: Tue, 10 Aug 2010 18:17:23 -0300
Subject: [antlr-interest] Doubt About using custom classes from returing
	values
In-Reply-To: <4C61B717.90904@yahoo.com.ar>
References: <10866833.1281447923910.JavaMail.root@elwamui-rubis.atl.sa.earthlink.net>	<054201cb38b0$0b735b20$225a1160$@temporal-wave.com>	<4C61A953.60406@yahoo.com.ar>
	<4C61AFFB.5070706@junkwallah.org> <4C61B717.90904@yahoo.com.ar>
Message-ID: <4C61C1E3.1090505@yahoo.com.ar>

Hi There!! Me Again!.
I have another simple cuestion (i hope the answer be simple too!).

So if a wanna use rules that return values but custom types values, 
like, in java, objects instances from custom classes.
Example:

streetFightRule returns [MyHappyClass MyReturnObj] :
TOKEN 'VS' TORYU
{
	MyReturnObj = new MyHappyClass (TOKEN,TORYU);
};

How i configure this? With my working proyect.. I am a huge fan of 
netbeans.. by the way, if you know a way of integrating all in one tell 
me please!.

Well that it's all!!.
Thankssss again!!.
Cya.


El 10/08/2010 05:31 p.m., Victor Giordano escribi?:
> Thanks Junkman!!! But it's still doesn't work... :(.
> I have another example:
>
> rule: TOKEN1? TOKEN2 ->  ^(TOKEN1 TOKEN2) Works when token1 actually
> exists, but when no.. :( ugly things happen..
>
> Well, thanks for advance again!!.
> Cya.
>
>
>
> El 10/08/2010 05:00 p.m., Junkman escribi?:
>> Hi Victor,
>>
>> Victor Giordano wrote:
>>> Hi, i am a newbie. Trying to figure out how to work with AST tree and
>>>
>>> ...
>>>
>>> butttttttt if i want to use rewrite rules... how do i thread the
>>> repetion EBNF operator like * or +.
>>>
>>> expr : term (('+'|'-') term)* ->   term ^(('+'|'-') term)* ;
>>>
>>
>> try this:
>>
>> expr: ( term ->   term )
>>         ( ( '+' | '-' ) term ->   ^( ( '+' | '-' ) $expr term ) )* ;
>>
>>
>> Not sure if the terms need to be distinguished with labels.
>>
>> The Antlr reference book describes the use of rewrite rule inside
>> subrule in more detail.
>>
>> J
>>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From valliantster at gmail.com  Tue Aug 10 14:25:19 2010
From: valliantster at gmail.com (denstar)
Date: Tue, 10 Aug 2010 15:25:19 -0600
Subject: [antlr-interest] Which book?
Message-ID: <AANLkTin1RAhnSiYPaXuCCzd8EkJ93Y-JHPSLxym88+fd@mail.gmail.com>

Hi Folks!

This is the newest one:

http://pragprog.com/titles/tpdsl/language-implementation-patterns

And this is "The Book" I think:

http://pragprog.com/titles/tpantlr/the-definitive-antlr-reference

Normally I'd go for the newest first, just because.

Sound good?  Newest first, and reference later, or should I start with
the reference?

I'm not exactly a total noob (tho I play one on the internet), if that
makes a difference.

:Den

-- 
Abel has left mathematicians enough to keep them busy for 500 years.
Charles Hermite

From power_giordo at yahoo.com.ar  Tue Aug 10 14:41:37 2010
From: power_giordo at yahoo.com.ar (Victor Giordano)
Date: Tue, 10 Aug 2010 18:41:37 -0300
Subject: [antlr-interest] Doubt About using custom classes from returing
 values
In-Reply-To: <4C61C1E3.1090505@yahoo.com.ar>
References: <10866833.1281447923910.JavaMail.root@elwamui-rubis.atl.sa.earthlink.net>	<054201cb38b0$0b735b20$225a1160$@temporal-wave.com>	<4C61A953.60406@yahoo.com.ar>	<4C61AFFB.5070706@junkwallah.org>
	<4C61B717.90904@yahoo.com.ar> <4C61C1E3.1090505@yahoo.com.ar>
Message-ID: <4C61C791.2060102@yahoo.com.ar>

mmmmmm, the correct question i wanted to do is: How to compile within 
ANTLRworks using outer classes definitions... cuz it's says to me that 
doesn't know the return value type.. :(.


El 10/08/2010 06:17 p.m., Victor Giordano escribi?:
> Hi There!! Me Again!.
> I have another simple cuestion (i hope the answer be simple too!).
>
> So if a wanna use rules that return values but custom types values,
> like, in java, objects instances from custom classes.
> Example:
>
> streetFightRule returns [MyHappyClass MyReturnObj] :
> TOKEN 'VS' TORYU
> {
> 	MyReturnObj = new MyHappyClass (TOKEN,TORYU);
> };
>
> How i configure this? With my working proyect.. I am a huge fan of
> netbeans.. by the way, if you know a way of integrating all in one tell
> me please!.
>
> Well that it's all!!.
> Thankssss again!!.
> Cya.
>
>
> El 10/08/2010 05:31 p.m., Victor Giordano escribi?:
>> Thanks Junkman!!! But it's still doesn't work... :(.
>> I have another example:
>>
>> rule: TOKEN1? TOKEN2 ->   ^(TOKEN1 TOKEN2) Works when token1 actually
>> exists, but when no.. :( ugly things happen..
>>
>> Well, thanks for advance again!!.
>> Cya.
>>
>>
>>
>> El 10/08/2010 05:00 p.m., Junkman escribi?:
>>> Hi Victor,
>>>
>>> Victor Giordano wrote:
>>>> Hi, i am a newbie. Trying to figure out how to work with AST tree and
>>>>
>>>> ...
>>>>
>>>> butttttttt if i want to use rewrite rules... how do i thread the
>>>> repetion EBNF operator like * or +.
>>>>
>>>> expr : term (('+'|'-') term)* ->    term ^(('+'|'-') term)* ;
>>>>
>>>
>>> try this:
>>>
>>> expr: ( term ->    term )
>>>          ( ( '+' | '-' ) term ->    ^( ( '+' | '-' ) $expr term ) )* ;
>>>
>>>
>>> Not sure if the terms need to be distinguished with labels.
>>>
>>> The Antlr reference book describes the use of rewrite rule inside
>>> subrule in more detail.
>>>
>>> J
>>>
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From bill.andersen at mac.com  Tue Aug 10 15:00:57 2010
From: bill.andersen at mac.com (Bill Andersen)
Date: Tue, 10 Aug 2010 18:00:57 -0400
Subject: [antlr-interest] Stringtemplate / attribute mixup
Message-ID: <C1E8CC00-319E-4BA4-954F-842E947E3F13@mac.com>

Hi Folks

I have a rule, called 'alt', in a grammar with template output

alt
scope {
  int argNum;
}
@init {
  List<String> labels = new LinkedList<String>();
}
	: ^(LIST_ALT { $alt::argNum = 0; } 
	    ( args+=smpl_arg { labels.add($smpl_arg.label); }  )* 
	    larg=list_arg?) 
	  { $rule::altNum++; }
	  -> listAlt(args={$args},larg={$larg.st})
	;

Now, the args attribute is doing the accumulation of the templates being built by smpl_arg but I need to get some more information from smpl_arg, namely it's 'label' attribute, and collect those up into the list 'labels'

When I try to do the above I get an error in the generated Java

                       	     labels.add((args!=null?args.label:null)); 

"args.label cannot be resolved or is not a field"

I tried using $args.label and $arg.label (the last I was sure would not work but I had to try).  Can anyone tell me how to do this without resorting to adding another list to catch the STs emitted by 'smpl_arg' via the .st attr?

Thanks

	.bill


From jimi at temporal-wave.com  Tue Aug 10 15:36:51 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 10 Aug 2010 15:36:51 -0700
Subject: [antlr-interest] Doubt About rewrite rulse
In-Reply-To: <4C61B717.90904@yahoo.com.ar>
References: <10866833.1281447923910.JavaMail.root@elwamui-rubis.atl.sa.earthlink.net>	<054201cb38b0$0b735b20$225a1160$@temporal-wave.com>	<4C61A953.60406@yahoo.com.ar>
	<4C61AFFB.5070706@junkwallah.org> <4C61B717.90904@yahoo.com.ar>
Message-ID: <007c01cb38dc$86e6e2f0$94b4a8d0$@temporal-wave.com>

Please use anltr.markmail.org as you will find many answers there.

But you need to respect the cardinality of your rewrite elements:

X? ->X?
X* ->X*
X+ ->X+

(a='+'|a='-') t2=fred -> ^($a $t2)

And so on.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Victor Giordano
> Sent: Tuesday, August 10, 2010 1:31 PM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Doubt About rewrite rulse
> 
> Thanks Junkman!!! But it's still doesn't work... :(.
> I have another example:
> 
> rule: TOKEN1? TOKEN2 -> ^(TOKEN1 TOKEN2) Works when token1 actually
> exists, but when no.. :( ugly things happen..
> 
> Well, thanks for advance again!!.
> Cya.
> 
> 
> 
> El 10/08/2010 05:00 p.m., Junkman escribi?:
> > Hi Victor,
> >
> > Victor Giordano wrote:
> >> Hi, i am a newbie. Trying to figure out how to work with AST tree and
> >>
> >> ...
> >>
> >> butttttttt if i want to use rewrite rules... how do i thread the
> >> repetion EBNF operator like * or +.
> >>
> >> expr : term (('+'|'-') term)* ->  term ^(('+'|'-') term)* ;
> >>
> >
> > try this:
> >
> > expr: ( term ->  term )
> >        ( ( '+' | '-' ) term ->  ^( ( '+' | '-' ) $expr term ) )* ;
> >
> >
> > Not sure if the terms need to be distinguished with labels.
> >
> > The Antlr reference book describes the use of rewrite rule inside
> > subrule in more detail.
> >
> > J
> >
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From jimi at temporal-wave.com  Tue Aug 10 15:40:57 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 10 Aug 2010 15:40:57 -0700
Subject: [antlr-interest] Doubt About using custom classes from
	returing	values
In-Reply-To: <4C61C1E3.1090505@yahoo.com.ar>
References: <10866833.1281447923910.JavaMail.root@elwamui-rubis.atl.sa.earthlink.net>	<054201cb38b0$0b735b20$225a1160$@temporal-wave.com>	<4C61A953.60406@yahoo.com.ar>	<4C61AFFB.5070706@junkwallah.org>
	<4C61B717.90904@yahoo.com.ar> <4C61C1E3.1090505@yahoo.com.ar>
Message-ID: <007e01cb38dd$1965f030$4c31d090$@temporal-wave.com>

http://plugins.netbeans.org/PluginPortal/faces/PluginDetailPage.jsp?pluginid
=14444


> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Victor Giordano
> Sent: Tuesday, August 10, 2010 2:17 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Doubt About using custom classes from returing
> values
> 
> Hi There!! Me Again!.
> I have another simple cuestion (i hope the answer be simple too!).
> 
> So if a wanna use rules that return values but custom types values, like,
in
> java, objects instances from custom classes.
> Example:
> 
> streetFightRule returns [MyHappyClass MyReturnObj] :
> TOKEN 'VS' TORYU
> {
> 	MyReturnObj = new MyHappyClass (TOKEN,TORYU); };
> 
> How i configure this? With my working proyect.. I am a huge fan of
> netbeans.. by the way, if you know a way of integrating all in one tell me
> please!.
> 
> Well that it's all!!.
> Thankssss again!!.
> Cya.
> 
> 
> El 10/08/2010 05:31 p.m., Victor Giordano escribi?:
> > Thanks Junkman!!! But it's still doesn't work... :(.
> > I have another example:
> >
> > rule: TOKEN1? TOKEN2 ->  ^(TOKEN1 TOKEN2) Works when token1 actually
> > exists, but when no.. :( ugly things happen..
> >
> > Well, thanks for advance again!!.
> > Cya.
> >
> >
> >
> > El 10/08/2010 05:00 p.m., Junkman escribi?:
> >> Hi Victor,
> >>
> >> Victor Giordano wrote:
> >>> Hi, i am a newbie. Trying to figure out how to work with AST tree
> >>> and
> >>>
> >>> ...
> >>>
> >>> butttttttt if i want to use rewrite rules... how do i thread the
> >>> repetion EBNF operator like * or +.
> >>>
> >>> expr : term (('+'|'-') term)* ->   term ^(('+'|'-') term)* ;
> >>>
> >>
> >> try this:
> >>
> >> expr: ( term ->   term )
> >>         ( ( '+' | '-' ) term ->   ^( ( '+' | '-' ) $expr term ) )* ;
> >>
> >>
> >> Not sure if the terms need to be distinguished with labels.
> >>
> >> The Antlr reference book describes the use of rewrite rule inside
> >> subrule in more detail.
> >>
> >> J
> >>
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From jimi at temporal-wave.com  Tue Aug 10 15:44:50 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 10 Aug 2010 15:44:50 -0700
Subject: [antlr-interest] Doubt About using custom classes from returing
	values
In-Reply-To: <4C61C791.2060102@yahoo.com.ar>
References: <10866833.1281447923910.JavaMail.root@elwamui-rubis.atl.sa.earthlink.net>	<054201cb38b0$0b735b20$225a1160$@temporal-wave.com>	<4C61A953.60406@yahoo.com.ar>	<4C61AFFB.5070706@junkwallah.org>	<4C61B717.90904@yahoo.com.ar>
	<4C61C1E3.1090505@yahoo.com.ar> <4C61C791.2060102@yahoo.com.ar>
Message-ID: <009001cb38dd$a48a3540$ed9e9fc0$@temporal-wave.com>

You might try adding your classes via the classpath in the Compiler tab of
Preferences. However ANTLRWORks is a pure grammar debugger really, it is
better to build your project with Maven and Netbeans, (there is a good ANTLR
plugin for maven),then generate with the debug option and debug the grammar
remotely.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Victor Giordano
> Sent: Tuesday, August 10, 2010 2:42 PM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Doubt About using custom classes from
returing
> values
> 
> mmmmmm, the correct question i wanted to do is: How to compile within
> ANTLRworks using outer classes definitions... cuz it's says to me that
doesn't
> know the return value type.. :(.
> 
> 
> El 10/08/2010 06:17 p.m., Victor Giordano escribi?:
> > Hi There!! Me Again!.
> > I have another simple cuestion (i hope the answer be simple too!).
> >
> > So if a wanna use rules that return values but custom types values,
> > like, in java, objects instances from custom classes.
> > Example:
> >
> > streetFightRule returns [MyHappyClass MyReturnObj] :
> > TOKEN 'VS' TORYU
> > {
> > 	MyReturnObj = new MyHappyClass (TOKEN,TORYU); };
> >
> > How i configure this? With my working proyect.. I am a huge fan of
> > netbeans.. by the way, if you know a way of integrating all in one
> > tell me please!.
> >
> > Well that it's all!!.
> > Thankssss again!!.
> > Cya.
> >
> >
> > El 10/08/2010 05:31 p.m., Victor Giordano escribi?:
> >> Thanks Junkman!!! But it's still doesn't work... :(.
> >> I have another example:
> >>
> >> rule: TOKEN1? TOKEN2 ->   ^(TOKEN1 TOKEN2) Works when token1
> actually
> >> exists, but when no.. :( ugly things happen..
> >>
> >> Well, thanks for advance again!!.
> >> Cya.
> >>
> >>
> >>
> >> El 10/08/2010 05:00 p.m., Junkman escribi?:
> >>> Hi Victor,
> >>>
> >>> Victor Giordano wrote:
> >>>> Hi, i am a newbie. Trying to figure out how to work with AST tree
> >>>> and
> >>>>
> >>>> ...
> >>>>
> >>>> butttttttt if i want to use rewrite rules... how do i thread the
> >>>> repetion EBNF operator like * or +.
> >>>>
> >>>> expr : term (('+'|'-') term)* ->    term ^(('+'|'-') term)* ;
> >>>>
> >>>
> >>> try this:
> >>>
> >>> expr: ( term ->    term )
> >>>          ( ( '+' | '-' ) term ->    ^( ( '+' | '-' ) $expr term ) )* ;
> >>>
> >>>
> >>> Not sure if the terms need to be distinguished with labels.
> >>>
> >>> The Antlr reference book describes the use of rewrite rule inside
> >>> subrule in more detail.
> >>>
> >>> J
> >>>
> >>
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-email-addres
> >> s
> >>
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From jimi at temporal-wave.com  Tue Aug 10 15:47:50 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 10 Aug 2010 15:47:50 -0700
Subject: [antlr-interest] Stringtemplate / attribute mixup
In-Reply-To: <C1E8CC00-319E-4BA4-954F-842E947E3F13@mac.com>
References: <C1E8CC00-319E-4BA4-954F-842E947E3F13@mac.com>
Message-ID: <009201cb38de$0f86d1a0$2e9474e0$@temporal-wave.com>

Does your smpl_arg rule return a value that is called label? If you post the
rules it might help. I use $st and custom return values all the time in java
based parsers. The other option is to just add the label to your list when
you are in the smpl_arg rule itself.

Jim



> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Bill Andersen
> Sent: Tuesday, August 10, 2010 3:01 PM
> To: antlr-interest
> Subject: [antlr-interest] Stringtemplate / attribute mixup
> 
> Hi Folks
> 
> I have a rule, called 'alt', in a grammar with template output
> 
> alt
> scope {
>   int argNum;
> }
> @init {
>   List<String> labels = new LinkedList<String>(); }
> 	: ^(LIST_ALT { $alt::argNum = 0; }
> 	    ( args+=smpl_arg { labels.add($smpl_arg.label); }  )*
> 	    larg=list_arg?)
> 	  { $rule::altNum++; }
> 	  -> listAlt(args={$args},larg={$larg.st})
> 	;
> 
> Now, the args attribute is doing the accumulation of the templates being
> built by smpl_arg but I need to get some more information from smpl_arg,
> namely it's 'label' attribute, and collect those up into the list 'labels'
> 
> When I try to do the above I get an error in the generated Java
> 
>
labels.add((args!=null?args.label:null));
> 
> "args.label cannot be resolved or is not a field"
> 
> I tried using $args.label and $arg.label (the last I was sure would not
work but
> I had to try).  Can anyone tell me how to do this without resorting to
adding
> another list to catch the STs emitted by 'smpl_arg' via the .st attr?
> 
> Thanks
> 
> 	.bill
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From power_giordo at yahoo.com.ar  Tue Aug 10 16:43:44 2010
From: power_giordo at yahoo.com.ar (Victor Giordano)
Date: Tue, 10 Aug 2010 20:43:44 -0300
Subject: [antlr-interest] Doubt About using custom classes from returing
 values
In-Reply-To: <009001cb38dd$a48a3540$ed9e9fc0$@temporal-wave.com>
References: <10866833.1281447923910.JavaMail.root@elwamui-rubis.atl.sa.earthlink.net>	<054201cb38b0$0b735b20$225a1160$@temporal-wave.com>	<4C61A953.60406@yahoo.com.ar>	<4C61AFFB.5070706@junkwallah.org>	<4C61B717.90904@yahoo.com.ar>	<4C61C1E3.1090505@yahoo.com.ar>
	<4C61C791.2060102@yahoo.com.ar>
	<009001cb38dd$a48a3540$ed9e9fc0$@temporal-wave.com>
Message-ID: <4C61E430.1000304@yahoo.com.ar>

Ok, Thanks for your advices Jim!!
I will try doing those things!.

Cya

El 10/08/2010 07:44 p.m., Jim Idle escribi?:
> You might try adding your classes via the classpath in the Compiler tab of
> Preferences. However ANTLRWORks is a pure grammar debugger really, it is
> better to build your project with Maven and Netbeans, (there is a good ANTLR
> plugin for maven),then generate with the debug option and debug the grammar
> remotely.
>
> Jim
>
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Victor Giordano
>> Sent: Tuesday, August 10, 2010 2:42 PM
>> To: antlr-interest at antlr.org
>> Subject: Re: [antlr-interest] Doubt About using custom classes from
> returing
>> values
>>
>> mmmmmm, the correct question i wanted to do is: How to compile within
>> ANTLRworks using outer classes definitions... cuz it's says to me that
> doesn't
>> know the return value type.. :(.
>>
>>
>> El 10/08/2010 06:17 p.m., Victor Giordano escribi?:
>>> Hi There!! Me Again!.
>>> I have another simple cuestion (i hope the answer be simple too!).
>>>
>>> So if a wanna use rules that return values but custom types values,
>>> like, in java, objects instances from custom classes.
>>> Example:
>>>
>>> streetFightRule returns [MyHappyClass MyReturnObj] :
>>> TOKEN 'VS' TORYU
>>> {
>>> 	MyReturnObj = new MyHappyClass (TOKEN,TORYU); };
>>>
>>> How i configure this? With my working proyect.. I am a huge fan of
>>> netbeans.. by the way, if you know a way of integrating all in one
>>> tell me please!.
>>>
>>> Well that it's all!!.
>>> Thankssss again!!.
>>> Cya.
>>>
>>>
>>> El 10/08/2010 05:31 p.m., Victor Giordano escribi?:
>>>> Thanks Junkman!!! But it's still doesn't work... :(.
>>>> I have another example:
>>>>
>>>> rule: TOKEN1? TOKEN2 ->    ^(TOKEN1 TOKEN2) Works when token1
>> actually
>>>> exists, but when no.. :( ugly things happen..
>>>>
>>>> Well, thanks for advance again!!.
>>>> Cya.
>>>>
>>>>
>>>>
>>>> El 10/08/2010 05:00 p.m., Junkman escribi?:
>>>>> Hi Victor,
>>>>>
>>>>> Victor Giordano wrote:
>>>>>> Hi, i am a newbie. Trying to figure out how to work with AST tree
>>>>>> and
>>>>>>
>>>>>> ...
>>>>>>
>>>>>> butttttttt if i want to use rewrite rules... how do i thread the
>>>>>> repetion EBNF operator like * or +.
>>>>>>
>>>>>> expr : term (('+'|'-') term)* ->     term ^(('+'|'-') term)* ;
>>>>>>
>>>>>
>>>>> try this:
>>>>>
>>>>> expr: ( term ->     term )
>>>>>           ( ( '+' | '-' ) term ->     ^( ( '+' | '-' ) $expr term ) )* ;
>>>>>
>>>>>
>>>>> Not sure if the terms need to be distinguished with labels.
>>>>>
>>>>> The Antlr reference book describes the use of rewrite rule inside
>>>>> subrule in more detail.
>>>>>
>>>>> J
>>>>>
>>>>
>>>>
>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>> Unsubscribe:
>>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-addres
>>>> s
>>>>
>>>
>>>
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe:
>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>>
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>> email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From michael.bedward at gmail.com  Tue Aug 10 18:58:30 2010
From: michael.bedward at gmail.com (Michael Bedward)
Date: Wed, 11 Aug 2010 11:58:30 +1000
Subject: [antlr-interest] Which book?
In-Reply-To: <AANLkTin1RAhnSiYPaXuCCzd8EkJ93Y-JHPSLxym88+fd@mail.gmail.com>
References: <AANLkTin1RAhnSiYPaXuCCzd8EkJ93Y-JHPSLxym88+fd@mail.gmail.com>
Message-ID: <AANLkTinPs71n7c1fWjoH1XQxcCp+OY+npQU4dWqVxAtm@mail.gmail.com>

Hello Den,

I think the Patterns book is the best one to start with.

Personally, I struggled a little with using the Reference book as a
beginners guide, although using it in combination with the web site
and this list I soon managed to do useful things with ANTLR. But when
the Patterns book came out it really helped me to grasp many of the
basic concepts more easily and thoroughly.

Michael

On 11 August 2010 07:25, denstar <valliantster at gmail.com> wrote:
> Hi Folks!
>
> This is the newest one:
>
> http://pragprog.com/titles/tpdsl/language-implementation-patterns
>
> And this is "The Book" I think:
>
> http://pragprog.com/titles/tpantlr/the-definitive-antlr-reference
>
> Normally I'd go for the newest first, just because.
>
> Sound good? ?Newest first, and reference later, or should I start with
> the reference?
>
> I'm not exactly a total noob (tho I play one on the internet), if that
> makes a difference.
>
> :Den
>

From scott at javadude.com  Tue Aug 10 20:41:34 2010
From: scott at javadude.com (Scott Stanchfield)
Date: Tue, 10 Aug 2010 23:41:34 -0400
Subject: [antlr-interest] Context-Sensitive Scanning proposal
Message-ID: <AANLkTi=++Z4eP7dS0_enZxx_JO4Qv7cesuB7c-9gbDgT@mail.gmail.com>

Hey all - I've written up a little proposal for a context-sensitive
scanning idea. Hopefully my brain is on a good track with this; I
think it could be a major win for ANTLR.

Please check out
   http://javadude.com/articles/antlr-context-sensitive-scanner.html

and let me know what you think.

Looks like something similar has been done before (rats! thought I had
an original thought!).

Thoughts?
-- Scott

----------------------------------------
Scott Stanchfield
http://javadude.com

From paul.bouche at nsn.com  Wed Aug 11 02:07:29 2010
From: paul.bouche at nsn.com (=?ISO-8859-15?Q?=22Paul_Bouch=E9_=28NSN=29=22?=)
Date: Wed, 11 Aug 2010 11:07:29 +0200
Subject: [antlr-interest] Context-Sensitive Scanning proposal
In-Reply-To: <AANLkTi=++Z4eP7dS0_enZxx_JO4Qv7cesuB7c-9gbDgT@mail.gmail.com>
References: <AANLkTi=++Z4eP7dS0_enZxx_JO4Qv7cesuB7c-9gbDgT@mail.gmail.com>
Message-ID: <4C626851.7050201@nsn.com>

Scott Stanchfield schrieb:
> Hey all - I've written up a little proposal for a context-sensitive
> scanning idea. Hopefully my brain is on a good track with this; I
> think it could be a major win for ANTLR.
>
> Please check out
>    http://javadude.com/articles/antlr-context-sensitive-scanner.html
>
> and let me know what you think.
>
> Looks like something similar has been done before (rats! thought I had
> an original thought!).
>
> Thoughts?
> -- Scott
>
> ----------------------------------------
> Scott Stanchfield
> http://javadude.com
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>   
Hi Scott,

sounds like very much what I would have needed when I extended the 
parser for our DSL to allow syntax coloring and auto completion as well 
as some tricky lexer issues (in some cases what is usually part of an 
identifier is not but an extra token). I ended up building a custom 
state in the lexer and write semantic predicates in ANTLR for that rule. 
This made a lexer grammar look pretty ugly and the advantage of 
easy-to-ready-ANTLR grammars was lost.... maybe I should have used the 
yapp parser generator. Anyway my current opinion on this issue is that I 
would always prefer a context sensitive lexer which already builds the 
structures I need (no parser, no ast) for speed reasons and for 
flexiblity reasons, of course then one does not have automatic error 
recovery, but if ANTLR was build differently one would have error 
recovery. Let's look ahead for ANTLR v4 and error recovery in lexers.

BR,
Paul

From jeanchristophe.bach at inria.fr  Wed Aug 11 07:54:30 2010
From: jeanchristophe.bach at inria.fr (Jean-Christophe Bach)
Date: Wed, 11 Aug 2010 16:54:30 +0200
Subject: [antlr-interest] Fuzzy parsing ('filter' option)
Message-ID: <20100811145430.GA3440@adel.loria.fr>

Hi antlr users,

I have a combined grammar and I would like to do fuzzy parsing. I know that the
filter option is designed for the lexer part, but is there any way to use this
option by keeping my combined grammar ?
In our old  parser (antlr2), we used this option like this (in a combined
grammar) :

class HostParser extends Parser;
...
// returns the current goal language code
private String getCode() {
  String result = targetlexer.target.toString();
  targetlexer.clearTarget();
  return result;
}
...
and parser rules

...
class HostLexer extends Lexer;
options {
  ...
  filter=TARGET;
  ...
 }

public StringBuilder target = new StringBuilder("");
// clear the buffer
public void clearTarget() { target.delete(0,target.length()); }

...

protected
TARGET : (.) { target.append($getText); } ;


It was very easy to do fuzzy parsing and to use what was parsed : when needed,
we only had to call getCode() function to get a HostBlock code and to put it in
a node of our tree.  But with antlr3, I'm not sure to understand how to proceed.
I tried to give the option 'filter=true;' directly to my fragment TARGET rule,
but it does not seem to be a good idea (I obtain errors).
Would someone have any idea ?

Regards,

JC

From jasperfloor at gmail.com  Wed Aug 11 08:59:06 2010
From: jasperfloor at gmail.com (Jasper Floor)
Date: Wed, 11 Aug 2010 17:59:06 +0200
Subject: [antlr-interest] gUnit StringIndexOutOfBoundsException,
	getText() called where 	state.tokenStartCharIndex is -1
Message-ID: <AANLkTimapuKzxL06HFY=srrczDVwjNb=m4qSfseRHG5+@mail.gmail.com>

I have a DSL which is already in production but I am working on an
updated version.

We already have quite a few tests which call the parser but I never
added gUnit tests until this version.

Actually everything was working fine until my latest change where I
started messing with the token stream. I don't think I am doing
anything complicated. Also our other tests work fine so I think the
problem is in gUnit.

Basically I have a rule where I want to remove some elements from the
input string. This is done with setText(unescape(getText())).

The problem occurs in getText(). The state.tokenStartCharIndex is -1
and this is passed to substring which is called in getText(). This
leads to a StringIndexOutOfBoundsException.

I've included the grammar. There is also a Tree Grammar after this but
that isn't relevant. There are probably more problems with the grammar
but at this point I'm only interested in the gUnit errors.
I've changed some names to remove any company specific information but
the grammar itself is unchanged.

mvg,
Jasper


p.s. is it bad etiquette to post the whole grammar and tree grammar to
ask for comments?
-------------- next part --------------
A non-text attachment was scrubbed...
Name: X.g
Type: application/octet-stream
Size: 2087 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20100811/f19de4d8/attachment.obj 

From will at tribbey.net  Wed Aug 11 09:38:30 2010
From: will at tribbey.net (William Tribbey)
Date: Wed, 11 Aug 2010 12:38:30 -0400
Subject: [antlr-interest] how to define a named scope
Message-ID: <AANLkTikEgBQAbGt-77Kof22i4Ee9Sdy4zK57p1KZ41=O@mail.gmail.com>

Hello Everybody, I am trying to use a named scope. I have searched the
archives and I find a reference to the same
question from last year (posted below) that describes the problem I am
having. I have the book and am looking at the
same page. I feel like I am missing a piece of information that I need to
get this to work.

Cheers / Will T.


[antlr-interest] Position of 'scope' delcaration*Bill Steer* steerr at
bellsouth.net <https://mail.google.com/a/tribbey.net/mail/?extsrc=mailto&url=mailto%3Aantlr-interest%2540antlr.org%3FSubject%3DRe%3A%2520%255Bantlr-interest%255D%2520Position%2520of%2520%2527scope%2527%2520delcaration%26In-Reply-To%3D%253C4A099F11.5070001%2540bellsouth.net%253E>
*Tue May 12 09:08:49 PDT 2009*


   - Previous message: [antlr-interest] Advice on using Antlr in
Eclipse<034452.html>
   - Next message: [antlr-interest] C# grammar for ANTRL3 <034454.html>
   - *Messages sorted by:* [ date ] <date.html#34453> [ thread
]<thread.html#34453>
    [ subject ] <subject.html#34453> [ author ] <author.html#34453>

------------------------------

The book says, at the bottom of page 143, "Simply define a named scope
outside any rule."  If I put a named scope just before the first rule, I
get an error "unexpected token: scope" when generating code.  Where
should the 'scope' statement appear in the .g file?

Thanks.

Bill

From jimi at temporal-wave.com  Wed Aug 11 09:52:07 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 11 Aug 2010 09:52:07 -0700
Subject: [antlr-interest] how to define a named scope
In-Reply-To: <AANLkTikEgBQAbGt-77Kof22i4Ee9Sdy4zK57p1KZ41=O@mail.gmail.com>
References: <AANLkTikEgBQAbGt-77Kof22i4Ee9Sdy4zK57p1KZ41=O@mail.gmail.com>
Message-ID: <015301cb3975$886701c0$99350540$@temporal-wave.com>

Order is:

parser x;
options
tokens
scope MyScope { int x; }
@lexer
@parser
Parser rules
Lexer rules

In the new grammar for ANTLR 4 I allowed the sections to appear in arbitrary
order as this used to bug me too ;-)

Jim


> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of William Tribbey
> Sent: Wednesday, August 11, 2010 9:39 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] how to define a named scope
> 
> Hello Everybody, I am trying to use a named scope. I have searched the
> archives and I find a reference to the same question from last year
(posted
> below) that describes the problem I am having. I have the book and am
> looking at the same page. I feel like I am missing a piece of information
that I
> need to get this to work.
> 
> Cheers / Will T.
> 
> 
> [antlr-interest] Position of 'scope' delcaration*Bill Steer* steerr at
> bellsouth.net
> <https://mail.google.com/a/tribbey.net/mail/?extsrc=mailto&url=mailto%3A
> antlr-interest%2540antlr.org%3FSubject%3DRe%3A%2520%255Bantlr-
> interest%255D%2520Position%2520of%2520%2527scope%2527%2520delcarat
> ion%26In-Reply-To%3D%253C4A099F11.5070001%2540bellsouth.net%253E>
> *Tue May 12 09:08:49 PDT 2009*
> 
> 
>    - Previous message: [antlr-interest] Advice on using Antlr in
> Eclipse<034452.html>
>    - Next message: [antlr-interest] C# grammar for ANTRL3 <034454.html>
>    - *Messages sorted by:* [ date ] <date.html#34453> [ thread
> ]<thread.html#34453>
>     [ subject ] <subject.html#34453> [ author ] <author.html#34453>
> 
> ------------------------------
> 
> The book says, at the bottom of page 143, "Simply define a named scope
> outside any rule."  If I put a named scope just before the first rule, I
get an
> error "unexpected token: scope" when generating code.  Where should the
> 'scope' statement appear in the .g file?
> 
> Thanks.
> 
> Bill
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From parrt at cs.usfca.edu  Wed Aug 11 12:05:04 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 11 Aug 2010 12:05:04 -0700
Subject: [antlr-interest] Context-Sensitive Scanning proposal
In-Reply-To: <AANLkTi=++Z4eP7dS0_enZxx_JO4Qv7cesuB7c-9gbDgT@mail.gmail.com>
References: <AANLkTi=++Z4eP7dS0_enZxx_JO4Qv7cesuB7c-9gbDgT@mail.gmail.com>
Message-ID: <8B53B771-CB9A-4015-B38F-2AA4454970D6@cs.usfca.edu>

Added to my todoList on the v4 plans to look at:

http://www.antlr.org/wiki/display/~admin/ANTLR+v4+lexers

T
On Aug 10, 2010, at 8:41 PM, Scott Stanchfield wrote:

> Hey all - I've written up a little proposal for a context-sensitive
> scanning idea. Hopefully my brain is on a good track with this; I
> think it could be a major win for ANTLR.
> 
> Please check out
>   http://javadude.com/articles/antlr-context-sensitive-scanner.html
> 
> and let me know what you think.
> 
> Looks like something similar has been done before (rats! thought I had
> an original thought!).
> 
> Thoughts?
> -- Scott
> 
> ----------------------------------------
> Scott Stanchfield
> http://javadude.com
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From scott at javadude.com  Wed Aug 11 12:09:05 2010
From: scott at javadude.com (Scott Stanchfield)
Date: Wed, 11 Aug 2010 15:09:05 -0400
Subject: [antlr-interest] Context-Sensitive Scanning proposal
In-Reply-To: <8B53B771-CB9A-4015-B38F-2AA4454970D6@cs.usfca.edu>
References: <AANLkTi=++Z4eP7dS0_enZxx_JO4Qv7cesuB7c-9gbDgT@mail.gmail.com>
	<8B53B771-CB9A-4015-B38F-2AA4454970D6@cs.usfca.edu>
Message-ID: <AANLkTinppmUh5TuMfrBv7rHrVcx569S63fKWyJKVFF=y@mail.gmail.com>

Cool - let me know what you think. I'm sure there are a lot of things
I didn't consider, but I wanted to pop the idea out there.
-- Scott

----------------------------------------
Scott Stanchfield
http://javadude.com



On Wed, Aug 11, 2010 at 3:05 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
> Added to my todoList on the v4 plans to look at:
>
> http://www.antlr.org/wiki/display/~admin/ANTLR+v4+lexers
>
> T
> On Aug 10, 2010, at 8:41 PM, Scott Stanchfield wrote:
>
>> Hey all - I've written up a little proposal for a context-sensitive
>> scanning idea. Hopefully my brain is on a good track with this; I
>> think it could be a major win for ANTLR.
>>
>> Please check out
>> ? http://javadude.com/articles/antlr-context-sensitive-scanner.html
>>
>> and let me know what you think.
>>
>> Looks like something similar has been done before (rats! thought I had
>> an original thought!).
>>
>> Thoughts?
>> -- Scott
>>
>> ----------------------------------------
>> Scott Stanchfield
>> http://javadude.com
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>

From bill.andersen at mac.com  Wed Aug 11 12:17:09 2010
From: bill.andersen at mac.com (Bill Andersen)
Date: Wed, 11 Aug 2010 15:17:09 -0400
Subject: [antlr-interest] AST construction - adding extra children via
	semantic action
Message-ID: <D6A8CB48-0D81-4280-8DFE-936FB16D7F42@mac.com>

Hi Folks

Here's the relevant fraction of a tree grammar I'm working on...

spec 
  : ^(SPEC rule+)
  ;
  
rule 
  : ^(RULE_DECL ID alts)
  ;

It's a grammar that recognizes a language, the output of which is another ANTLR grammar.  

I want the first rule to look like this:

spec 
  :	^(SPEC rule+)
        { < some action here > }
        -> ^(SPEC < augmented list of rules >)
  ;

In other words, I want to add some extra RULE_DECL trees on to the end of whatever rule+ accumulates, based on semantic information gathered during the tree parse.

Is there a straightforward way to do this?

Thanks

	.bill

From nasgaard at ca.ibm.com  Wed Aug 11 13:13:01 2010
From: nasgaard at ca.ibm.com (Howard Nasgaard)
Date: Wed, 11 Aug 2010 16:13:01 -0400
Subject: [antlr-interest] How do I preserve comments in a language to
	language translator
Message-ID: <OF02ABB769.E091EAE9-ON8525777C.006DF43D-8525777C.006F1642@ca.ibm.com>

I am writing a translator that will convert from one version of a language 
to a newer version of that language.  The versions are syntactically 
similar so their underlying ASTs are similar.  I am using parsers for the 
grammar and tree grammars generated as C++.  The old language is parsed 
and an AST is built.  Then numerous walks of the AST are done using 
generated tree grammars.  One of the walks creates a new AST, the 
translation, which conforms to the tree hierarchy that describes the new 
language elements.  A final walk of the new AST "pretty prints" the 
translation. 

As part of the translation walk, or whatever works, I would like to copy 
as many of the comment tokens across to the new AST as possible.  Based on 
my reading, the comments are there as they are being directed to the 
HIDDEN channel.  It is just not clear how, in my tree grammar, I would 
access them.  I have been unable to find any descriptions  of how to do 
this that apply to antlr3 and C++.

Howard W. Nasgaard

From parrt at cs.usfca.edu  Wed Aug 11 13:17:57 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 11 Aug 2010 13:17:57 -0700
Subject: [antlr-interest] AST construction - adding extra children via
	semantic action
In-Reply-To: <D6A8CB48-0D81-4280-8DFE-936FB16D7F42@mac.com>
References: <D6A8CB48-0D81-4280-8DFE-936FB16D7F42@mac.com>
Message-ID: <7BA76A29-A08A-4AE1-93BB-96A45FF51F89@cs.usfca.edu>

Hi Bill.I think the way to do it is to have the arbitrary action add to the rule_list List built by ANTLR.  try

> spec 
>  :	^(SPEC r+=rule+)
>        { <add nodes to $r list> }
>        -> ^(SPEC $r+)
>  ;


It might just work :)
T
On Aug 11, 2010, at 12:17 PM, Bill Andersen wrote:

> Hi Folks
> 
> Here's the relevant fraction of a tree grammar I'm working on...
> 
> spec 
>  : ^(SPEC rule+)
>  ;
> 
> rule 
>  : ^(RULE_DECL ID alts)
>  ;
> 
> It's a grammar that recognizes a language, the output of which is another ANTLR grammar.  
> 
> I want the first rule to look like this:
> 
> spec 
>  :	^(SPEC rule+)
>        { < some action here > }
>        -> ^(SPEC < augmented list of rules >)
>  ;
> 
> In other words, I want to add some extra RULE_DECL trees on to the end of whatever rule+ accumulates, based on semantic information gathered during the tree parse.
> 
> Is there a straightforward way to do this?
> 
> Thanks
> 
> 	.bill
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From jimi at temporal-wave.com  Wed Aug 11 13:29:37 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 11 Aug 2010 13:29:37 -0700
Subject: [antlr-interest] AST construction - adding extra children
	via	semantic action
In-Reply-To: <D6A8CB48-0D81-4280-8DFE-936FB16D7F42@mac.com>
References: <D6A8CB48-0D81-4280-8DFE-936FB16D7F42@mac.com>
Message-ID: <021c01cb3993$eb355db0$c1a01910$@temporal-wave.com>

Bill,

As you are using action code anyway, then you can just use the standard Java
methods for tree building in your code. However, it is good practice to move
such code into external methods of some helper class so that your grammar is
not cluttered with unreadable inline code. 

You can look at the generated code to see how to do that via the tree
adaptor. 

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Bill Andersen
> Sent: Wednesday, August 11, 2010 12:17 PM
> To: antlr-interest
> Subject: [antlr-interest] AST construction - adding extra children via
semantic
> action
> 
> Hi Folks
> 
> Here's the relevant fraction of a tree grammar I'm working on...
> 
> spec
>   : ^(SPEC rule+)
>   ;
> 
> rule
>   : ^(RULE_DECL ID alts)
>   ;
> 
> It's a grammar that recognizes a language, the output of which is another
> ANTLR grammar.
> 
> I want the first rule to look like this:
> 
> spec
>   :	^(SPEC rule+)
>         { < some action here > }
>         -> ^(SPEC < augmented list of rules >)
>   ;
> 
> In other words, I want to add some extra RULE_DECL trees on to the end of
> whatever rule+ accumulates, based on semantic information gathered during
> the tree parse.
> 
> Is there a straightforward way to do this?
> 
> Thanks
> 
> 	.bill
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From jimi at temporal-wave.com  Wed Aug 11 13:46:12 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 11 Aug 2010 13:46:12 -0700
Subject: [antlr-interest] How do I preserve comments in a language
	to	language translator
In-Reply-To: <OF02ABB769.E091EAE9-ON8525777C.006DF43D-8525777C.006F1642@ca.ibm.com>
References: <OF02ABB769.E091EAE9-ON8525777C.006DF43D-8525777C.006F1642@ca.ibm.com>
Message-ID: <021e01cb3996$3bdd5630$b3980290$@temporal-wave.com>

This is a very tricky thing to perfectly, but not so difficult to do as a
'best guess' type of algorithm. For instance if the comments are found
before certain tokens and can be just pushed to the output before the
translated version (like doxygen comments or javadoc etc), or if 'comments
close by' is a reasonable guess. It is difficult to speak to you problem
generically, but some translations make this easy enough and some very
difficult.

However, what you will need to do is locate the token that 'starts' your
construct output, then find its equivalent token position in the original
tokenized input stream. If the token in the tree is from the original input
stream then it is easy, otherwise you can use the user1, user2, user3 fields
of a token to record the token that 'starts' the code you have translated or
perhaps the start and end tokens that are the comment block. 

Now, knowing the input token position, you can traverse backwards in the
token stream (use get and not LT as LT skips off channel tokens) and find
the first of the comment tokens that precedes it (by checking the token's
channel). This will be easier if you set the comments to a particular
channel and not just HIDDEN (which is channel 99). When you know the token
position of the comment token, then you can traverse forwards and copy the
token text to the output (changing the comment lead-in characters should you
need to) using the pointers available in the token (which point to the
original text). 

So, you just need to get familiar with asking the tree nodes for their
tokens and then asking the tokens what index they are and using the get
methods to access the tokens in the input stream.

So:

// A comment
// Another
// yet another
int Cfunc( ....

So, if the comments are going on channel 2 then you will have:

0 COMMENT 
1 COMMENT 
2 COMMENT 
3 ID 
4 ID 
5 LPAREN 

Now, your first parser is probably going to generate ^(FUNCDECL ID ID .....)

You can now attach the index of the first comment (0) to user1 and then
index of the last comment to user2 of say FUNCDECL, or the first ID.
Assuming that the token is preserved through all the rewrites, then this
information will propagate to your final AST.

Of course this is just illustrating what you need to do generally as I do
not know exactly what you are trying to do.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Howard Nasgaard
> Sent: Wednesday, August 11, 2010 1:13 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] How do I preserve comments in a language to
> language translator
> 
> I am writing a translator that will convert from one version of a language
to a
> newer version of that language.  The versions are syntactically similar so
their
> underlying ASTs are similar.  I am using parsers for the grammar and tree
> grammars generated as C++.  The old language is parsed and an AST is
built.
> Then numerous walks of the AST are done using generated tree grammars.
> One of the walks creates a new AST, the translation, which conforms to the
> tree hierarchy that describes the new language elements.  A final walk of
the
> new AST "pretty prints" the translation.
> 
> As part of the translation walk, or whatever works, I would like to copy
as
> many of the comment tokens across to the new AST as possible.  Based on
> my reading, the comments are there as they are being directed to the
> HIDDEN channel.  It is just not clear how, in my tree grammar, I would
access
> them.  I have been unable to find any descriptions  of how to do this that
> apply to antlr3 and C++.
> 
> Howard W. Nasgaard
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From parrt at cs.usfca.edu  Wed Aug 11 13:47:44 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 11 Aug 2010 13:47:44 -0700
Subject: [antlr-interest] AST construction - adding extra children via
	semantic action
In-Reply-To: <7BA76A29-A08A-4AE1-93BB-96A45FF51F89@cs.usfca.edu>
References: <D6A8CB48-0D81-4280-8DFE-936FB16D7F42@mac.com>
	<7BA76A29-A08A-4AE1-93BB-96A45FF51F89@cs.usfca.edu>
Message-ID: <E6BAE0C7-A4EF-4BA5-9BC2-C4862C065630@cs.usfca.edu>

or, 

>> spec 
>> :	^(SPEC rule+)
>>       -> ^(SPEC rule+ {expr evaluating to a node or nodes})
>> ;


Ter

From nasgaard at ca.ibm.com  Wed Aug 11 14:03:33 2010
From: nasgaard at ca.ibm.com (Howard Nasgaard)
Date: Wed, 11 Aug 2010 17:03:33 -0400
Subject: [antlr-interest] How do I preserve comments in a
 language	to	language translator
In-Reply-To: <021e01cb3996$3bdd5630$b3980290$@temporal-wave.com>
References: <OF02ABB769.E091EAE9-ON8525777C.006DF43D-8525777C.006F1642@ca.ibm.com>
	<021e01cb3996$3bdd5630$b3980290$@temporal-wave.com>
Message-ID: <OFEF958242.73A0ACAC-ON8525777C.007286E9-8525777C.0073B6A7@ca.ibm.com>

Jim,  It sounds like you understand what I need to do.  I will be happy 
with a 'best guess' approach.  What you describe is basically what I 
understood from the reading I've done.  What I think I am still missing is 
an example of the mechanics of doing this in the tree grammar.  Is it a 
matter of inserting code in each rule to examine each token, looking for 
comment nodes (assume a unique channel for those).  Would you track the 
index of the last node checked so that you can get the range of tokens to 
examine?  It sounds like this could get a bit messy. 

Howard W. Nasgaard



antlr-interest-bounces at antlr.org wrote on 11/08/2010 04:46:12 PM:

> [image removed] 
> 
> Re: [antlr-interest] How do I preserve comments in a language to 
> language translator
> 
> Jim Idle 
> 
> to:
> 
> antlr-interest
> 
> 11/08/2010 04:48 PM
> 
> Sent by:
> 
> antlr-interest-bounces at antlr.org
> 
> This is a very tricky thing to perfectly, but not so difficult to do as 
a
> 'best guess' type of algorithm. For instance if the comments are found
> before certain tokens and can be just pushed to the output before the
> translated version (like doxygen comments or javadoc etc), or if 
'comments
> close by' is a reasonable guess. It is difficult to speak to you problem
> generically, but some translations make this easy enough and some very
> difficult.
> 
> However, what you will need to do is locate the token that 'starts' your
> construct output, then find its equivalent token position in the 
original
> tokenized input stream. If the token in the tree is from the original 
input
> stream then it is easy, otherwise you can use the user1, user2, user3 
fields
> of a token to record the token that 'starts' the code you have 
translated or
> perhaps the start and end tokens that are the comment block. 
> 
> Now, knowing the input token position, you can traverse backwards in the
> token stream (use get and not LT as LT skips off channel tokens) and 
find
> the first of the comment tokens that precedes it (by checking the 
token's
> channel). This will be easier if you set the comments to a particular
> channel and not just HIDDEN (which is channel 99). When you know the 
token
> position of the comment token, then you can traverse forwards and copy 
the
> token text to the output (changing the comment lead-in characters should 
you
> need to) using the pointers available in the token (which point to the
> original text). 
> 
> So, you just need to get familiar with asking the tree nodes for their
> tokens and then asking the tokens what index they are and using the get
> methods to access the tokens in the input stream.
> 
> So:
> 
> // A comment
> // Another
> // yet another
> int Cfunc( ....
> 
> So, if the comments are going on channel 2 then you will have:
> 
> 0 COMMENT 
> 1 COMMENT 
> 2 COMMENT 
> 3 ID 
> 4 ID 
> 5 LPAREN 
> 
> Now, your first parser is probably going to generate ^(FUNCDECL ID ID 
.....)
> 
> You can now attach the index of the first comment (0) to user1 and then
> index of the last comment to user2 of say FUNCDECL, or the first ID.
> Assuming that the token is preserved through all the rewrites, then this
> information will propagate to your final AST.
> 
> Of course this is just illustrating what you need to do generally as I 
do
> not know exactly what you are trying to do.
> 
> Jim
> 
> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > bounces at antlr.org] On Behalf Of Howard Nasgaard
> > Sent: Wednesday, August 11, 2010 1:13 PM
> > To: antlr-interest at antlr.org
> > Subject: [antlr-interest] How do I preserve comments in a language to
> > language translator
> > 
> > I am writing a translator that will convert from one version of a 
language
> to a
> > newer version of that language.  The versions are syntactically 
similar so
> their
> > underlying ASTs are similar.  I am using parsers for the grammar and 
tree
> > grammars generated as C++.  The old language is parsed and an AST is
> built.
> > Then numerous walks of the AST are done using generated tree grammars.
> > One of the walks creates a new AST, the translation, which conforms to 
the
> > tree hierarchy that describes the new language elements.  A final walk 
of
> the
> > new AST "pretty prints" the translation.
> > 
> > As part of the translation walk, or whatever works, I would like to 
copy
> as
> > many of the comment tokens across to the new AST as possible.  Based 
on
> > my reading, the comments are there as they are being directed to the
> > HIDDEN channel.  It is just not clear how, in my tree grammar, I would
> access
> > them.  I have been unable to find any descriptions  of how to do this 
that
> > apply to antlr3 and C++.
> > 
> > Howard W. Nasgaard
> > 
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> > email-address
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/
> your-email-address

From jimi at temporal-wave.com  Wed Aug 11 14:50:45 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 11 Aug 2010 14:50:45 -0700
Subject: [antlr-interest] How do I preserve comments in a
	language	to	language translator
In-Reply-To: <OFEF958242.73A0ACAC-ON8525777C.007286E9-8525777C.0073B6A7@ca.ibm.com>
References: <OF02ABB769.E091EAE9-ON8525777C.006DF43D-8525777C.006F1642@ca.ibm.com>	<021e01cb3996$3bdd5630$b3980290$@temporal-wave.com>
	<OFEF958242.73A0ACAC-ON8525777C.007286E9-8525777C.0073B6A7@ca.ibm.com>
Message-ID: <022301cb399f$40b702b0$c2250810$@temporal-wave.com>

I would try and track the comments as early on in the translation as
possible, as the further you get away from the initial input, the more
difficult it will be to associate the original tokens with the transformed
structure. 

So, when you produce your initial tree, choose the set of tokens (which may
include imaginary nodes) that makes sense to associate comments with. When
you hit the parsing start of these constructs (or end) then call an external
method to track back and find the token index of the first and last comment
token. Do the rewrite, then in action code, adorn the AST node with the
token index information. Again, you want to do such things in external
methods that say accept the token index to search from and the token pointer
etc:

func
@declarations
{
 ANTLR3_MARKER firstTok;
}
@init
{
  firstTok = INDEX();
}
: ( type ID LPAREN list RPAREN
      ->^(CFUNC ID type list)
  )
  { findComments($tree, firstTok); /* Uses the node token in the current
tree, looks back from firstTok, stores in user1, user2 */ }
;

Some time later in your code generating tree walk, you will hit the CFUNC
node, you may have done all sorts of manipulations of the child nodes, but
now the user1 and user2 fields of the CFUNC token in the tree will contain
the start and end indexes of the comments you wanted. Call an external
function with a pointer to the tree node and have that function copy the
text from all the tokens in the range.

func :
  ^(c=CFUNC ID type list)
   { copyComments($c); 
      genFunc(.....
  }
;

The mechanisms in the tree parser are that $c will come in as a
pANTLR3_BASE_TREE, which has a member called super, which is a void * that
you cast to pANTLR3_COMMON_TREE. pANTLR3_BASE_TREE has a method getToken(),
which will return the payload token for the node, which is
pANTLR3_COMMON_TOKEN, this has user1, user2 and user3 ints, ANTLR3_MARKER
start and stop positions that point to the first and last character of the
text and it has a channel and index. Using the original input stream you can
use get(n) to get the token at position n and use the text pointers.

If the comment follow the structure, then the same things apply but now you
find comments at the end and in code gen, spit the out at the end. 

You can see that there will be ambiguous situations where it is difficult to
know if the comment is for the end of some statement or the start of the
next, so you will decide consistently and have to live with it ;-)

// Call stat
stat(); // We call stat to fubar
// now stat is called, x will = 99 and b points to bananas

// Call flick() to do cyz
//
flick();

Anyway, those are the main structures you need and it is pretty easy once
you get your head around the method calling. Use the runtime source code as
your guide for finding things out about structres and the API doxygen linke
from the home page.

Jim


> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Howard Nasgaard
> Sent: Wednesday, August 11, 2010 2:04 PM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] How do I preserve comments in a language to
> language translator
> 
> Jim,  It sounds like you understand what I need to do.  I will be happy
with a
> 'best guess' approach.  What you describe is basically what I understood
from
> the reading I've done.  What I think I am still missing is an example of
the
> mechanics of doing this in the tree grammar.  Is it a matter of inserting
code
> in each rule to examine each token, looking for comment nodes (assume a
> unique channel for those).  Would you track the index of the last node
> checked so that you can get the range of tokens to examine?  It sounds
like
> this could get a bit messy.
> 
> Howard W. Nasgaard
> 
> 
> 
> antlr-interest-bounces at antlr.org wrote on 11/08/2010 04:46:12 PM:
> 
> > [image removed]
> >
> > Re: [antlr-interest] How do I preserve comments in a language to
> > language translator
> >
> > Jim Idle
> >
> > to:
> >
> > antlr-interest
> >
> > 11/08/2010 04:48 PM
> >
> > Sent by:
> >
> > antlr-interest-bounces at antlr.org
> >
> > This is a very tricky thing to perfectly, but not so difficult to do
> > as
> a
> > 'best guess' type of algorithm. For instance if the comments are found
> > before certain tokens and can be just pushed to the output before the
> > translated version (like doxygen comments or javadoc etc), or if
> 'comments
> > close by' is a reasonable guess. It is difficult to speak to you
> > problem generically, but some translations make this easy enough and
> > some very difficult.
> >
> > However, what you will need to do is locate the token that 'starts'
> > your construct output, then find its equivalent token position in the
> original
> > tokenized input stream. If the token in the tree is from the original
> input
> > stream then it is easy, otherwise you can use the user1, user2, user3
> fields
> > of a token to record the token that 'starts' the code you have
> translated or
> > perhaps the start and end tokens that are the comment block.
> >
> > Now, knowing the input token position, you can traverse backwards in
> > the token stream (use get and not LT as LT skips off channel tokens)
> > and
> find
> > the first of the comment tokens that precedes it (by checking the
> token's
> > channel). This will be easier if you set the comments to a particular
> > channel and not just HIDDEN (which is channel 99). When you know the
> token
> > position of the comment token, then you can traverse forwards and copy
> the
> > token text to the output (changing the comment lead-in characters
> > should
> you
> > need to) using the pointers available in the token (which point to the
> > original text).
> >
> > So, you just need to get familiar with asking the tree nodes for their
> > tokens and then asking the tokens what index they are and using the
> > get methods to access the tokens in the input stream.
> >
> > So:
> >
> > // A comment
> > // Another
> > // yet another
> > int Cfunc( ....
> >
> > So, if the comments are going on channel 2 then you will have:
> >
> > 0 COMMENT
> > 1 COMMENT
> > 2 COMMENT
> > 3 ID
> > 4 ID
> > 5 LPAREN
> >
> > Now, your first parser is probably going to generate ^(FUNCDECL ID ID
> .....)
> >
> > You can now attach the index of the first comment (0) to user1 and
> > then index of the last comment to user2 of say FUNCDECL, or the first
ID.
> > Assuming that the token is preserved through all the rewrites, then
> > this information will propagate to your final AST.
> >
> > Of course this is just illustrating what you need to do generally as I
> do
> > not know exactly what you are trying to do.
> >
> > Jim
> >
> > > -----Original Message-----
> > > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > > bounces at antlr.org] On Behalf Of Howard Nasgaard
> > > Sent: Wednesday, August 11, 2010 1:13 PM
> > > To: antlr-interest at antlr.org
> > > Subject: [antlr-interest] How do I preserve comments in a language
> > > to language translator
> > >
> > > I am writing a translator that will convert from one version of a
> language
> > to a
> > > newer version of that language.  The versions are syntactically
> similar so
> > their
> > > underlying ASTs are similar.  I am using parsers for the grammar and
> tree
> > > grammars generated as C++.  The old language is parsed and an AST is
> > built.
> > > Then numerous walks of the AST are done using generated tree
> grammars.
> > > One of the walks creates a new AST, the translation, which conforms
> > > to
> the
> > > tree hierarchy that describes the new language elements.  A final
> > > walk
> of
> > the
> > > new AST "pretty prints" the translation.
> > >
> > > As part of the translation walk, or whatever works, I would like to
> copy
> > as
> > > many of the comment tokens across to the new AST as possible.  Based
> on
> > > my reading, the comments are there as they are being directed to the
> > > HIDDEN channel.  It is just not clear how, in my tree grammar, I
> > > would
> > access
> > > them.  I have been unable to find any descriptions  of how to do
> > > this
> that
> > > apply to antlr3 and C++.
> > >
> > > Howard W. Nasgaard
> > >
> > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > Unsubscribe:
> > > http://www.antlr.org/mailman/options/antlr-interest/your-
> > > email-address
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/
> > your-email-address
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From power_giordo at yahoo.com.ar  Wed Aug 11 18:57:43 2010
From: power_giordo at yahoo.com.ar (Victor Giordano)
Date: Wed, 11 Aug 2010 22:57:43 -0300
Subject: [antlr-interest] Diference bettew Tokens and Lexical Rules
In-Reply-To: <022301cb399f$40b702b0$c2250810$@temporal-wave.com>
References: <OF02ABB769.E091EAE9-ON8525777C.006DF43D-8525777C.006F1642@ca.ibm.com>	<021e01cb3996$3bdd5630$b3980290$@temporal-wave.com>	<OFEF958242.73A0ACAC-ON8525777C.007286E9-8525777C.0073B6A7@ca.ibm.com>
	<022301cb399f$40b702b0$c2250810$@temporal-wave.com>
Message-ID: <4C635517.60102@yahoo.com.ar>

Hi there!!. How you doing guys? Hope good!.
A have another question about tokens and lexical rules, i really don't 
get the idea...
For example, assume we have this:

1)
tokens
{
	PLUS= '+';
}

2) PLUS : '+';

and then a rule
expr: INT (PLUS INT)*;

so... if a use one of another is exactly the same. The parse tree is the 
same, and the generated AST is also the same.
Can you help me, and try to explain it to me. I read the book, but i 
don't understand.

Thanks for advance.
Greetins!.




From jbb at acm.org  Wed Aug 11 19:37:10 2010
From: jbb at acm.org (John B. Brodie)
Date: Wed, 11 Aug 2010 22:37:10 -0400
Subject: [antlr-interest] Diference bettew Tokens and Lexical Rules
In-Reply-To: <4C635517.60102@yahoo.com.ar>
References: <OF02ABB769.E091EAE9-ON8525777C.006DF43D-8525777C.006F1642@ca.ibm.com>
	<021e01cb3996$3bdd5630$b3980290$@temporal-wave.com>
	<OFEF958242.73A0ACAC-ON8525777C.007286E9-8525777C.0073B6A7@ca.ibm.com>
	<022301cb399f$40b702b0$c2250810$@temporal-wave.com>
	<4C635517.60102@yahoo.com.ar>
Message-ID: <1281580630.22999.12.camel@gecko.home.org>

Greetings!

On Wed, 2010-08-11 at 22:57 -0300, Victor Giordano wrote:
> Hi there!!. How you doing guys? Hope good!.

I am fine, I hope you are too!

> A have another question about tokens and lexical rules, i really don't 
> get the idea...
> For example, assume we have this:
> 
> 1)
> tokens
> {
> 	PLUS= '+';
> }
> 
> 2) PLUS : '+';
> 
> and then a rule
> expr: INT (PLUS INT)*;
> 
> so... if a use one of another is exactly the same. The parse tree is the 
> same, and the generated AST is also the same.
> Can you help me, and try to explain it to me. I read the book, but i 
> don't understand.
> 

As you have discovered, in this instance, ANTLR has 2 ways to express
the same concept.

There is, I believe, nothing else to explain here. You have correctly
analyzed that specifying a string value in the tokens{} block is
equivalent to specifying a lexical rule. Not a problem.

Perhaps I have mis-understood your question, please try to re-state your
question if you are still confused by these two equivalent
meta-syntactic constructs.

Hope this helps...
   -jbb




From power_giordo at yahoo.com.ar  Wed Aug 11 21:00:18 2010
From: power_giordo at yahoo.com.ar (Victor Giordano)
Date: Thu, 12 Aug 2010 01:00:18 -0300
Subject: [antlr-interest] Diference bettew Tokens and Lexical Rules
In-Reply-To: <1281580630.22999.12.camel@gecko.home.org>
References: <OF02ABB769.E091EAE9-ON8525777C.006DF43D-8525777C.006F1642@ca.ibm.com>	
	<021e01cb3996$3bdd5630$b3980290$@temporal-wave.com>	
	<OFEF958242.73A0ACAC-ON8525777C.007286E9-8525777C.0073B6A7@ca.ibm.com>	
	<022301cb399f$40b702b0$c2250810$@temporal-wave.com>	
	<4C635517.60102@yahoo.com.ar>
	<1281580630.22999.12.camel@gecko.home.org>
Message-ID: <4C6371D2.4040700@yahoo.com.ar>

Hi John!! Thanks!
Fine here, struggling with antlr a little jejeje. Well nothing to worry 
about.
You trully have a teacher spirit, the question was fulfil!.
So that's is't, two ways to do the same.

Thanks you again!!.
Gretting.
V?ctor.

(Today it's my birthday, by not the way jejej :P).



El 11/08/2010 11:37 p.m., John B. Brodie escribi?:
> Greetings!
>
> On Wed, 2010-08-11 at 22:57 -0300, Victor Giordano wrote:
>> Hi there!!. How you doing guys? Hope good!.
>
> I am fine, I hope you are too!
>
>> A have another question about tokens and lexical rules, i really don't
>> get the idea...
>> For example, assume we have this:
>>
>> 1)
>> tokens
>> {
>> 	PLUS= '+';
>> }
>>
>> 2) PLUS : '+';
>>
>> and then a rule
>> expr: INT (PLUS INT)*;
>>
>> so... if a use one of another is exactly the same. The parse tree is the
>> same, and the generated AST is also the same.
>> Can you help me, and try to explain it to me. I read the book, but i
>> don't understand.
>>
>
> As you have discovered, in this instance, ANTLR has 2 ways to express
> the same concept.
>
> There is, I believe, nothing else to explain here. You have correctly
> analyzed that specifying a string value in the tokens{} block is
> equivalent to specifying a lexical rule. Not a problem.
>
> Perhaps I have mis-understood your question, please try to re-state your
> question if you are still confused by these two equivalent
> meta-syntactic constructs.
>
> Hope this helps...
>     -jbb
>
>
>
>


From power_giordo at yahoo.com.ar  Wed Aug 11 22:10:19 2010
From: power_giordo at yahoo.com.ar (Victor Giordano)
Date: Thu, 12 Aug 2010 02:10:19 -0300
Subject: [antlr-interest] Using Own classes to recolect or parse the data
	withing the grammar
Message-ID: <4C63823B.1000802@yahoo.com.ar>

Hi all!. Hope good again!! (And not tired... of me xD)
Above a paste and example of what i am looking towards to parse.
A linear Expression. That is simply a succession of linear terms.
A linear terms is something like : Constants Var | Var.
Based on the example of _the definitive guide to ANTLR_ with math 
expression, a procced to re adapt this to capture the data into my own
expression of the program.
So basically, for now, i only wanted to put all the linear terms in and 
list (specifically: an Arraylist) and have it in that strcuture because 
later i throw it in a simplex resolver to compute answer to linear 
optimization problems.
So... the thing, is that i do this (pasted above).
If you want, just copy and paste and debug this example with: 2x + 3y + 4z
You will see some output like this: 2.0 * x + 3.0 * y + 4.0 * z  (The 
resutl of invoke the toString over my custom class inner of the parser).

The question is: How i can do this, without definig the class inside the 
@menbers section. That class, in fact, is one of my program.. so i only 
want to reuse that.
Jim Idle say to me, days before, that for this kind of things are not 
simple and required the help of maven.... but i really hope someone know 
some easier way to archieve this.

Thanks!!.


------------------------------------------------------------------------
grammar LinearExpression;

options
{
     output=AST;
}


tokens
{
     PLUS     = '+';
     MINUS     = '-';
     MUL        = '*';
     DIV        = '/';
}

@members
{
     public static class LinearExpr
     {
         ArrayList<LinearTerm> terms;

         public LinearExpr()
         {
             terms = new ArrayList<LinearTerm>();
         }

         public void add(LinearTerm lt)
         {
             terms.add(lt);
         }

         @Override
         public String toString()
         {
             StringBuilder res = new StringBuilder(50);
             for (LinearTerm lt : terms)
             {
                 res.append(lt.toString()).append(" + ");
             }
             return res.substring(0,res.lastIndexOf("+"));
         }
     }


     public static class LinearTerm
     {
         String var;
         float cofactor;

         public LinearTerm()
         {
             this.var = "";
             this.cofactor = 1;
         }

         @Override
         public String toString()
         {
             return this.cofactor + " * " +  this.var;
         }
     }
}


expr returns [LinearExpr ret]
@init
{
     $ret = new LinearExpr();
}
@after
{
     System.out.println ($ret);
}
     : e=term {$ret.add($e.ret);}
     ( PLUS e=term {$ret.add($e.ret);}
     | MINUS e=term {$ret.add($e.ret);}
     )*;


term returns [LinearTerm ret]
@init
{
     $ret = new LinearTerm ();
}
     :
     (FLOAT {$ret.cofactor = Float.parseFloat($FLOAT.text);}
     |INT {$ret.cofactor = Integer.parseInt($INT.text);}
     )?
     ID {$ret.var = $ID.text;};

ID  :    ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*;

INT :    '0'..'9'+ ;

FLOAT
     :   ('0'..'9')+ '.' ('0'..'9')* EXPONENT?
     |   '.' ('0'..'9')+ EXPONENT?
     |   ('0'..'9')+ EXPONENT
     ;

fragment EXPONENT : ('e'|'E') ('+'|'-')? ('0'..'9')+ ;


From bkiers at gmail.com  Wed Aug 11 23:35:37 2010
From: bkiers at gmail.com (Bart Kiers)
Date: Thu, 12 Aug 2010 08:35:37 +0200
Subject: [antlr-interest] Using Own classes to recolect or parse the
	data withing the grammar
In-Reply-To: <4C63823B.1000802@yahoo.com.ar>
References: <4C63823B.1000802@yahoo.com.ar>
Message-ID: <AANLkTikadKt_bugp-9F+CaNk-Xe5NAQZqia-PO7rFfgf@mail.gmail.com>

On Thu, Aug 12, 2010 at 7:10 AM, Victor Giordano
<power_giordo at yahoo.com.ar>wrote:

> ...
>
> The question is: How i can do this, without definig the class inside the
> @menbers section. That class, in fact, is one of my program.. so i only
> want to reuse that. ...
>

Hi Victor,

Define a class LinearExpr like this:

package foo;

public class LinearExpr {

    // ... the rest of your class...
}


and in your grammar, import that class like this:

grammar LinearExpression;

@header {
    import foo.LinearExpression;
}

// ... the rest of your grammar ...


@header will automatically put everything you define in there at the start
of your parser class. It does the same as:

@parser::header {
    import foo.LinearExpression;
}


// ... the rest of your grammar ...


If you want your lexer and parser to be in the same package, say foo.parse for
example, do something like this:

grammar LinearExpression;

@parser::header {
    package foo.parse;
    import foo.LinearExpression;
}

@lexer::header {
    package foo.parse;
    import foo.LinearExpression;
}

// ... the rest of your grammar ...


Regards,

Bart.

From jsh at axelor.com  Wed Aug 11 23:54:57 2010
From: jsh at axelor.com (Japan Shah)
Date: Thu, 12 Aug 2010 12:24:57 +0530
Subject: [antlr-interest] is it feasible to use antl for python
	code-generator?
Message-ID: <AANLkTi=ptXWCEiM5p9cTXwj8CCMUTutHmdpFnLkBWwwC@mail.gmail.com>

Hello,

       we've requirement to generate python code based on XLS/CSV template
like,

*example below,*
*object,contract
inherit, orm_base
name, contract
table,contract_contract*
fields1, is_valid type boolean
field2, name type char


and need to write few business login in raw text like

if (current_contract.is_valid)
       return True
else
       return False


and the Output from such CSV File would be a python class file like below,

class contract(orm_base):
      is_valid = fields.boolean()
      name = fields.char()

      def check(self):
            if self.data['is_valid']:
                 return True
            return False


My Question is is it feasible to use ANTLR either to generate the Python
Classes or to evaluate the users' business logic from raw text as provided
above ?

--
Thanks,
#Japan Shah

From Nieves.Salor.Moral at esa.int  Thu Aug 12 03:40:51 2010
From: Nieves.Salor.Moral at esa.int (Nieves.Salor.Moral at esa.int)
Date: Thu, 12 Aug 2010 12:40:51 +0200
Subject: [antlr-interest] Syntax- highlighter and completition
Message-ID: <OF1C70F402.83D84CAB-ONC125777D.003977ED-C125777D.003AABFA@esa.int>

Helllo!!

I think this is an old topic, but looking at the list I haven't found a 
clear answer to the problem. I am trying to do a system that opens in a 
swing panel an specific type file, which follows my specific grammar and 
allows its editing.
Hence, I want to add syntax-highlighting and also auto completion to the 
file (both in the editing and in the only reading), But also I should show 
the syntax tree. 

I have my ANTLR grammar running (pluto.g) and tested with current output 
as a flat AST tree. But I am not entirely sure what to do next.

My first option is to specify as output templates and use directly from 
the parser grammar StringTemplate with the output specifying the colors, 
font, etc in a kind of HTML similar code and later plug-in in the swing 
panel
Second option, is to create a Parser Tree and later on, use the templates 
Third, forget the parser and just use the lexer????

The problem is that the final goal of the system is to create SQL queries 
to insert/modify in a DB the information that contains the grammar.

Any outputs are welcome, thanks



Nieves Salor Moral
-------------- next part --------------
A non-text attachment was scrubbed...
Name: example5.g
Type: application/octet-stream
Size: 14898 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20100812/8e3035c4/attachment.obj 

From paul.bouche at nsn.com  Thu Aug 12 04:29:18 2010
From: paul.bouche at nsn.com (=?ISO-8859-1?Q?=22Paul_Bouch=E9_=28NSN_-_DE=2C_Berlin=29=22?=)
Date: Thu, 12 Aug 2010 13:29:18 +0200
Subject: [antlr-interest] Syntax- highlighter and completition
In-Reply-To: <OF1C70F402.83D84CAB-ONC125777D.003977ED-C125777D.003AABFA@esa.int>
References: <OF1C70F402.83D84CAB-ONC125777D.003977ED-C125777D.003AABFA@esa.int>
Message-ID: <4C63DB0E.8030306@nsn.com>

Hi,

there are different options. A lot of people use the lexer and color 
text depending on token it was recognized as. You can also you the AST 
for some extra parsing context to color the text. Unfortunately I am not 
aware of any 
thrown-in-your-grammar-and-color-defs-and-get-a-complete-syntax-coloring-autocompleting-swing-editor 
deal. We needed this as well and we did this work ourselves. I know Jim 
Idle did some things for Visual Studio. There is a jEdit 
syntaxhighlighting Textcomponent available (stand alone) which may make 
the task for coloring easier for you.

Also I recently discovered Xtext which automates this task for you but 
only for Eclipse; it is built upon ANTLR, but they have their own 
grammar language; it seems to me you cannot reuse your existing ANTLR 
grammar.

Manual Implementation notes. For syntax coloring I used the token stream 
to get the character positions (start, stop) to mark text parts in 
different colors. For auto-completion I used a generic error handler 
which does some magic on the stack trace to find out the context of the 
parser and the next possible tokens via the follow set (ANTLR provides 
support to calculate this, very nice).

BR,
Paul

ext Nieves.Salor.Moral at esa.int schrieb:
> Helllo!!
>
> I think this is an old topic, but looking at the list I haven't found a 
> clear answer to the problem. I am trying to do a system that opens in a 
> swing panel an specific type file, which follows my specific grammar and 
> allows its editing.
> Hence, I want to add syntax-highlighting and also auto completion to the 
> file (both in the editing and in the only reading), But also I should show 
> the syntax tree. 
>
> I have my ANTLR grammar running (pluto.g) and tested with current output 
> as a flat AST tree. But I am not entirely sure what to do next.
>
> My first option is to specify as output templates and use directly from 
> the parser grammar StringTemplate with the output specifying the colors, 
> font, etc in a kind of HTML similar code and later plug-in in the swing 
> panel
> Second option, is to create a Parser Tree and later on, use the templates 
> Third, forget the parser and just use the lexer????
>
> The problem is that the final goal of the system is to create SQL queries 
> to insert/modify in a DB the information that contains the grammar.
>
> Any outputs are welcome, thanks
>
>
>
> Nieves Salor Moral
> ------------------------------------------------------------------------
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>   

From jasperfloor at gmail.com  Thu Aug 12 05:20:21 2010
From: jasperfloor at gmail.com (Jasper Floor)
Date: Thu, 12 Aug 2010 14:20:21 +0200
Subject: [antlr-interest] Which book?
In-Reply-To: <AANLkTinPs71n7c1fWjoH1XQxcCp+OY+npQU4dWqVxAtm@mail.gmail.com>
References: <AANLkTin1RAhnSiYPaXuCCzd8EkJ93Y-JHPSLxym88+fd@mail.gmail.com>
	<AANLkTinPs71n7c1fWjoH1XQxcCp+OY+npQU4dWqVxAtm@mail.gmail.com>
Message-ID: <AANLkTi=XYOjAwxkvLovuJbtrQ-Xz7ZprRLc_ynwo4CLd@mail.gmail.com>

It depends. Do you want to learn about ANTLR or about languages. The
books have different goals. If you are having a language problem go
with the Patterns book (or with an even more basic/academic book about
compilers). If you are having ANTLR problems then go with the
reference. Or just buy them both and don't come out of your room until
you're done reading.

mvg,
Jasper



On Wed, Aug 11, 2010 at 3:58 AM, Michael Bedward
<michael.bedward at gmail.com> wrote:
> Hello Den,
>
> I think the Patterns book is the best one to start with.
>
> Personally, I struggled a little with using the Reference book as a
> beginners guide, although using it in combination with the web site
> and this list I soon managed to do useful things with ANTLR. But when
> the Patterns book came out it really helped me to grasp many of the
> basic concepts more easily and thoroughly.
>
> Michael
>
> On 11 August 2010 07:25, denstar <valliantster at gmail.com> wrote:
>> Hi Folks!
>>
>> This is the newest one:
>>
>> http://pragprog.com/titles/tpdsl/language-implementation-patterns
>>
>> And this is "The Book" I think:
>>
>> http://pragprog.com/titles/tpantlr/the-definitive-antlr-reference
>>
>> Normally I'd go for the newest first, just because.
>>
>> Sound good? ?Newest first, and reference later, or should I start with
>> the reference?
>>
>> I'm not exactly a total noob (tho I play one on the internet), if that
>> makes a difference.
>>
>> :Den
>>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From stefika at gmail.com  Thu Aug 12 08:32:08 2010
From: stefika at gmail.com (Andreas Stefik)
Date: Thu, 12 Aug 2010 10:32:08 -0500
Subject: [antlr-interest] Syntax- highlighter and completition
In-Reply-To: <OF1C70F402.83D84CAB-ONC125777D.003977ED-C125777D.003AABFA@esa.int>
References: <OF1C70F402.83D84CAB-ONC125777D.003977ED-C125777D.003AABFA@esa.int>
Message-ID: <AANLkTinb0KBF-oFmFuogQMn7TtY6AKX2K2pZZYDpFVUS@mail.gmail.com>

Hi there,

Another option you have is to use the NetBeans platform for these
editor tasks. Basically, you keep a list of whatever you want (e.g.,
what methods have been parsed, what variables, tokens), and you pass
them to the platform's APIs specifically designed for parsing,
highlighting, etc. All of the threading/highlighting/user interface
work is done for you, is commercially scalable, and works extremely
well behind the scenes.

Like anything, it isn't trivial to do, but the APIs for parsing/code
completion/syntax highlighting are pretty straightforward and there
are tutorials online on how to do it with ANTLR. Here's one, for
example:

http://wiki.netbeans.org/Netbeans_Rcp_Antlr_Integration_Index

Hope that helps,

Andreas Stefik

On Thu, Aug 12, 2010 at 5:40 AM,  <Nieves.Salor.Moral at esa.int> wrote:
> Helllo!!
>
> I think this is an old topic, but looking at the list I haven't found a
> clear answer to the problem. I am trying to do a system that opens in a
> swing panel an specific type file, which follows my specific grammar and
> allows its editing.
> Hence, I want to add syntax-highlighting and also auto completion to the
> file (both in the editing and in the only reading), But also I should show
> the syntax tree.
>
> I have my ANTLR grammar running (pluto.g) and tested with current output
> as a flat AST tree. But I am not entirely sure what to do next.
>
> My first option is to specify as output templates and use directly from
> the parser grammar StringTemplate with the output specifying the colors,
> font, etc in a kind of HTML similar code and later plug-in in the swing
> panel
> Second option, is to create a Parser Tree and later on, use the templates
> Third, forget the parser and just use the lexer????
>
> The problem is that the final goal of the system is to create SQL queries
> to insert/modify in a DB the information that contains the grammar.
>
> Any outputs are welcome, thanks
>
>
>
> Nieves Salor Moral
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>

From acondit at ipns.com  Thu Aug 12 13:54:49 2010
From: acondit at ipns.com (Alan Condit)
Date: Thu, 12 Aug 2010 13:54:49 -0700
Subject: [antlr-interest] Problems with rebuilding Antlrworks on OS X 10.6.4
Message-ID: <AD3D6FB6-233E-4ED7-940F-26BAB394A55B@ipns.com>

I created the following script to rebuild Antlrworks when I change the stg files for the ObjC  target language.

start of script:
cd /usr/share/java/antlr-3.2
mvn -Dmaven.test.skip=true
mvn -Dmaven.test.skip=true package assembly:assembly
cp target/antlr-master-3.2-completejar.jar /Library/Java/Extensions/antlr-3.2.jar
cd ../antlrworks-1.4-src
cp /Library/Java/Extensions/antlr-3.2.jar lib/antlr-3.2.jar
ant
cd ..
end of script:

Almost all the time the first maven command will complete successfully. However, about two thirds of the time the second maven command will have an error in execution. So I created a second script shown below to avoid rerunning the first maven command unnecessarily.

start of script:
cd /usr/share/java/antlr-3.2
mvn -Dmaven.test.skip=true package assembly:assembly
cp target/antlr-master-3.2-completejar.jar /Library/Java/Extensions/antlr-3.2.jar
cd ../antlrworks-1.4-src
cp /Library/Java/Extensions/antlr-3.2.jar lib/antlr-3.2.jar
ant
cd ..
end of script:

If I run this second script multiple times it will finally result in a successful execution. But when it results in an error, the error is always the same. Can anyone look at the run output and tell me what is causing the error?

Run output on error:

[INFO] Scanning for projects...
[INFO] Reactor build order: 
[INFO]   ANTLR Master build control POM
[INFO]   Antlr 3 Runtime
[INFO]   ANTLR Grammar Tool
[INFO]   Maven plugin for ANTLR V3
[INFO]   ANTLR gUnit
[INFO]   Maven plugin for gUnit ANTLR V3
[INFO]   ANTLR3 Maven Archetype
[INFO] ------------------------------------------------------------------------
[INFO] Building ANTLR Master build control POM
[INFO]    task-segment: [package]
[INFO] ------------------------------------------------------------------------
[INFO] [buildnumber:create {execution: default}]
[INFO] Storing buildNumber: Aug 12, 2010 13:31:28 at timestamp: 1281645088311
[INFO] Executing: /bin/sh -c cd /usr/share/java/antlr-3.2 && svn --non-interactive info
[INFO] Working directory: /usr/share/java/antlr-3.2
[INFO] Storing buildScmBranch: UNKNOWN_BRANCH
[INFO] [site:attach-descriptor {execution: default-attach-descriptor}]
[INFO] ------------------------------------------------------------------------
[INFO] Building Antlr 3 Runtime
[INFO]    task-segment: [package]
[INFO] ------------------------------------------------------------------------
[INFO] [buildnumber:create {execution: default}]
[INFO] Storing buildNumber: Aug 12, 2010 13:31:29 at timestamp: 1281645089965
[INFO] Executing: /bin/sh -c cd /usr/share/java/antlr-3.2/runtime/Java && svn --non-interactive info
[INFO] Working directory: /usr/share/java/antlr-3.2/runtime/Java
[INFO] Storing buildScmBranch: UNKNOWN_BRANCH
[INFO] [resources:resources {execution: default-resources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /usr/share/java/antlr-3.2/runtime/Java/src/main/resources
[INFO] [compiler:compile {execution: default-compile}]
[INFO] Nothing to compile - all classes are up to date
[INFO] [resources:testResources {execution: default-testResources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /usr/share/java/antlr-3.2/runtime/Java/src/test/resources
[INFO] [compiler:testCompile {execution: default-testCompile}]
[INFO] Not compiling test sources
[INFO] [surefire:test {execution: default-test}]
[INFO] Tests are skipped.
[INFO] [jar:jar {execution: default-jar}]
[INFO] ------------------------------------------------------------------------
[INFO] Building ANTLR Grammar Tool
[INFO]    task-segment: [package]
[INFO] ------------------------------------------------------------------------
[INFO] [buildnumber:create {execution: default}]
[INFO] Storing buildNumber: Aug 12, 2010 13:31:31 at timestamp: 1281645091129
[INFO] Executing: /bin/sh -c cd /usr/share/java/antlr-3.2/tool && svn --non-interactive info
[INFO] Working directory: /usr/share/java/antlr-3.2/tool
[INFO] Storing buildScmBranch: UNKNOWN_BRANCH
[INFO] [antlr:generate {execution: default}]
[INFO] Using Antlr grammar: /usr/share/java/antlr-3.2/tool/src/main/antlr2/org/antlr/grammar/v2/antlr.g
[INFO] The grammar is already generated.
[INFO] Using Antlr grammar: /usr/share/java/antlr-3.2/tool/src/main/antlr2/org/antlr/grammar/v2/codegen.g
[INFO] The grammar is already generated.
[INFO] Using Antlr grammar: /usr/share/java/antlr-3.2/tool/src/main/antlr2/org/antlr/grammar/v2/antlr.print.g
[INFO] The grammar is already generated.
[INFO] Using Antlr grammar: /usr/share/java/antlr-3.2/tool/src/main/antlr2/org/antlr/grammar/v2/assign.types.g
[INFO] The grammar is already generated.
[INFO] Using Antlr grammar: /usr/share/java/antlr-3.2/tool/src/main/antlr2/org/antlr/grammar/v2/buildnfa.g
[INFO] The grammar is already generated.
[INFO] Using Antlr grammar: /usr/share/java/antlr-3.2/tool/src/main/antlr2/org/antlr/grammar/v2/define.g
[INFO] The grammar is already generated.
[INFO] [antlr3:antlr {execution: default}]
[INFO] ANTLR: Processing source directory /usr/share/java/antlr-3.2/tool/src/main/antlr3
ANTLR Parser Generator  Version 3.2 Aug 12, 2010 13:23:03
Grammar /usr/share/java/antlr-3.2/tool/src/main/antlr3/org/antlr/grammar/v3/ANTLRv3.g is up to date - build skipped
Grammar /usr/share/java/antlr-3.2/tool/src/main/antlr3/org/antlr/grammar/v3/ActionAnalysis.g is up to date - build skipped
Grammar /usr/share/java/antlr-3.2/tool/src/main/antlr3/org/antlr/grammar/v3/ANTLRv3Tree.g is up to date - build skipped
Grammar /usr/share/java/antlr-3.2/tool/src/main/antlr3/org/antlr/grammar/v3/ActionTranslator.g is up to date - build skipped
[INFO] [resources:resources {execution: default-resources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 98 resources
[INFO] Copying 6 resources
[INFO] [compiler:compile {execution: default-compile}]
[INFO] Nothing to compile - all classes are up to date
[INFO] [resources:testResources {execution: default-testResources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /usr/share/java/antlr-3.2/tool/src/test/resources
[INFO] [compiler:testCompile {execution: default-testCompile}]
[INFO] Not compiling test sources
[INFO] [surefire:test {execution: default-test}]
[INFO] Tests are skipped.
[INFO] [jar:jar {execution: default-jar}]
[INFO] Building jar: /usr/share/java/antlr-3.2/tool/target/antlr-3.2.jar
[INFO] ------------------------------------------------------------------------
[INFO] Building Maven plugin for ANTLR V3
[INFO]    task-segment: [package]
[INFO] ------------------------------------------------------------------------
[INFO] [plugin:descriptor {execution: default-descriptor}]
[INFO] Using 2 extractors.
[INFO] Applying extractor for language: java
[INFO] Extractor for language: java found 1 mojo descriptors.
[INFO] Applying extractor for language: bsh
[INFO] Extractor for language: bsh found 0 mojo descriptors.
[INFO] [resources:resources {execution: default-resources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /usr/share/java/antlr-3.2/antlr3-maven-plugin/src/main/resources
[INFO] [compiler:compile {execution: default-compile}]
[INFO] Nothing to compile - all classes are up to date
[INFO] [resources:testResources {execution: default-testResources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /usr/share/java/antlr-3.2/antlr3-maven-plugin/src/test/resources
[INFO] [compiler:testCompile {execution: default-testCompile}]
[INFO] Not compiling test sources
[INFO] [surefire:test {execution: default-test}]
[INFO] Tests are skipped.
[INFO] [jar:jar {execution: default-jar}]
[INFO] Building jar: /usr/share/java/antlr-3.2/antlr3-maven-plugin/target/antlr3-maven-plugin-3.2.jar
[INFO] [plugin:addPluginArtifactMetadata {execution: default-addPluginArtifactMetadata}]
[INFO] ------------------------------------------------------------------------
[INFO] Building ANTLR gUnit
[INFO]    task-segment: [package]
[INFO] ------------------------------------------------------------------------
[INFO] Reloading plugin container for: org.antlr:antlr3-maven-plugin:3.2. The plugin artifact has changed.
[INFO] [buildnumber:create {execution: default}]
[INFO] Storing buildNumber: Aug 12, 2010 13:31:35 at timestamp: 1281645095701
[INFO] Executing: /bin/sh -c cd /usr/share/java/antlr-3.2/gunit && svn --non-interactive info
[INFO] Working directory: /usr/share/java/antlr-3.2/gunit
[INFO] Storing buildScmBranch: UNKNOWN_BRANCH
[INFO] [antlr3:antlr {execution: default}]
[INFO] ANTLR: Processing source directory /usr/share/java/antlr-3.2/gunit/src/main/antlr3
ANTLR Parser Generator  Version 3.2 Aug 12, 2010 13:31:31
Grammar /usr/share/java/antlr-3.2/gunit/src/main/antlr3/org/antlr/gunit/gUnit.g is up to date - build skipped
Grammar /usr/share/java/antlr-3.2/gunit/src/main/antlr3/org/antlr/gunit/swingui/parsers/StGUnit.g is up to date - build skipped
Grammar /usr/share/java/antlr-3.2/gunit/src/main/antlr3/org/antlr/gunit/swingui/parsers/ANTLRv3.g is up to date - build skipped
[INFO] [resources:resources {execution: default-resources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 28 resources
[INFO] [compiler:compile {execution: default-compile}]
[INFO] Nothing to compile - all classes are up to date
[INFO] [resources:testResources {execution: default-testResources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /usr/share/java/antlr-3.2/gunit/src/test/resources
[INFO] [compiler:testCompile {execution: default-testCompile}]
[INFO] Not compiling test sources
[INFO] [surefire:test {execution: default-test}]
[INFO] Tests are skipped.
[INFO] [jar:jar {execution: default-jar}]
[INFO] Building jar: /usr/share/java/antlr-3.2/gunit/target/gunit-3.2.jar
[INFO] ------------------------------------------------------------------------
[INFO] Building Maven plugin for gUnit ANTLR V3
[INFO]    task-segment: [package]
[INFO] ------------------------------------------------------------------------
[INFO] [plugin:descriptor {execution: default-descriptor}]
[INFO] Using 2 extractors.
[INFO] Applying extractor for language: java
[INFO] Extractor for language: java found 1 mojo descriptors.
[INFO] Applying extractor for language: bsh
[INFO] Extractor for language: bsh found 0 mojo descriptors.
[INFO] [resources:resources {execution: default-resources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /usr/share/java/antlr-3.2/gunit-maven-plugin/src/main/resources
[INFO] [compiler:compile {execution: default-compile}]
[INFO] Nothing to compile - all classes are up to date
[INFO] [resources:testResources {execution: default-testResources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /usr/share/java/antlr-3.2/gunit-maven-plugin/src/test/resources
[INFO] [compiler:testCompile {execution: default-testCompile}]
[INFO] Not compiling test sources
[INFO] [surefire:test {execution: default-test}]
[INFO] Tests are skipped.
[INFO] [jar:jar {execution: default-jar}]
[INFO] Building jar: /usr/share/java/antlr-3.2/gunit-maven-plugin/target/maven-gunit-plugin-3.2.jar
[INFO] [plugin:addPluginArtifactMetadata {execution: default-addPluginArtifactMetadata}]
[INFO] ------------------------------------------------------------------------
[INFO] Building ANTLR3 Maven Archetype
[INFO]    task-segment: [package]
[INFO] ------------------------------------------------------------------------
[INFO] [resources:resources {execution: default-resources}]
[WARNING] Using platform encoding (MacRoman actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 10 resources
[INFO] [resources:testResources {execution: default-testResources}]
[WARNING] Using platform encoding (MacRoman actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 10 resources
[INFO] Setting property: classpath.resource.loader.class => 'org.codehaus.plexus.velocity.ContextClassLoaderResourceLoader'.
[INFO] Setting property: velocimacro.messages.on => 'false'.
[INFO] Setting property: resource.loader => 'classpath'.
[INFO] Setting property: resource.manager.logwhenfound => 'false'.
[INFO] [archetype:jar {execution: default-jar}]
[INFO] [archetype:add-archetype-metadata {execution: default-add-archetype-metadata}]
[INFO] ------------------------------------------------------------------------
[INFO] Building ANTLR Master build control POM
[INFO]    task-segment: [assembly:assembly] (aggregator-style)
[INFO] ------------------------------------------------------------------------
[INFO] Preparing assembly:assembly
[INFO] ------------------------------------------------------------------------
[INFO] Building ANTLR Master build control POM
[INFO] ------------------------------------------------------------------------
[INFO] [buildnumber:create {execution: default}]
[INFO] Storing buildNumber: Aug 12, 2010 13:31:38 at timestamp: 1281645098279
[INFO] Executing: /bin/sh -c cd /usr/share/java/antlr-3.2 && svn --non-interactive info
[INFO] Working directory: /usr/share/java/antlr-3.2
[INFO] Storing buildScmBranch: UNKNOWN_BRANCH
[INFO] [site:attach-descriptor {execution: default-attach-descriptor}]
[INFO] ------------------------------------------------------------------------
[INFO] Building Antlr 3 Runtime
[INFO] ------------------------------------------------------------------------
[INFO] [buildnumber:create {execution: default}]
[INFO] Storing buildNumber: Aug 12, 2010 13:31:38 at timestamp: 1281645098497
[INFO] Executing: /bin/sh -c cd /usr/share/java/antlr-3.2/runtime/Java && svn --non-interactive info
[INFO] Working directory: /usr/share/java/antlr-3.2/runtime/Java
[INFO] Storing buildScmBranch: UNKNOWN_BRANCH
[INFO] [resources:resources {execution: default-resources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /usr/share/java/antlr-3.2/runtime/Java/src/main/resources
[INFO] [compiler:compile {execution: default-compile}]
[INFO] Nothing to compile - all classes are up to date
[INFO] [resources:testResources {execution: default-testResources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /usr/share/java/antlr-3.2/runtime/Java/src/test/resources
[INFO] [compiler:testCompile {execution: default-testCompile}]
[INFO] Not compiling test sources
[INFO] [surefire:test {execution: default-test}]
[INFO] Tests are skipped.
[INFO] [jar:jar {execution: default-jar}]
[INFO] ------------------------------------------------------------------------
[INFO] Building ANTLR Grammar Tool
[INFO] ------------------------------------------------------------------------
[INFO] [buildnumber:create {execution: default}]
[INFO] Storing buildNumber: Aug 12, 2010 13:31:38 at timestamp: 1281645098748
[INFO] Executing: /bin/sh -c cd /usr/share/java/antlr-3.2/tool && svn --non-interactive info
[INFO] Working directory: /usr/share/java/antlr-3.2/tool
[INFO] Storing buildScmBranch: UNKNOWN_BRANCH
[INFO] [antlr:generate {execution: default}]
[INFO] Using Antlr grammar: /usr/share/java/antlr-3.2/tool/src/main/antlr2/org/antlr/grammar/v2/antlr.g
[INFO] The grammar is already generated.
[INFO] Using Antlr grammar: /usr/share/java/antlr-3.2/tool/src/main/antlr2/org/antlr/grammar/v2/codegen.g
[INFO] The grammar is already generated.
[INFO] Using Antlr grammar: /usr/share/java/antlr-3.2/tool/src/main/antlr2/org/antlr/grammar/v2/antlr.print.g
[INFO] The grammar is already generated.
[INFO] Using Antlr grammar: /usr/share/java/antlr-3.2/tool/src/main/antlr2/org/antlr/grammar/v2/assign.types.g
[INFO] The grammar is already generated.
[INFO] Using Antlr grammar: /usr/share/java/antlr-3.2/tool/src/main/antlr2/org/antlr/grammar/v2/buildnfa.g
[INFO] The grammar is already generated.
[INFO] Using Antlr grammar: /usr/share/java/antlr-3.2/tool/src/main/antlr2/org/antlr/grammar/v2/define.g
[INFO] The grammar is already generated.
[INFO] [antlr3:antlr {execution: default}]
[INFO] ANTLR: Processing source directory /usr/share/java/antlr-3.2/tool/src/main/antlr3
ANTLR Parser Generator  Version 3.2 Aug 12, 2010 13:31:31
Grammar /usr/share/java/antlr-3.2/tool/src/main/antlr3/org/antlr/grammar/v3/ANTLRv3.g is up to date - build skipped
Grammar /usr/share/java/antlr-3.2/tool/src/main/antlr3/org/antlr/grammar/v3/ActionAnalysis.g is up to date - build skipped
Grammar /usr/share/java/antlr-3.2/tool/src/main/antlr3/org/antlr/grammar/v3/ANTLRv3Tree.g is up to date - build skipped
Grammar /usr/share/java/antlr-3.2/tool/src/main/antlr3/org/antlr/grammar/v3/ActionTranslator.g is up to date - build skipped
[INFO] [resources:resources {execution: default-resources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 98 resources
[INFO] Copying 6 resources
[INFO] Copying 6 resources
[INFO] [compiler:compile {execution: default-compile}]
[INFO] Nothing to compile - all classes are up to date
[INFO] [resources:testResources {execution: default-testResources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /usr/share/java/antlr-3.2/tool/src/test/resources
[INFO] [compiler:testCompile {execution: default-testCompile}]
[INFO] Not compiling test sources
[INFO] [surefire:test {execution: default-test}]
[INFO] Tests are skipped.
[INFO] [jar:jar {execution: default-jar}]
[INFO] Building jar: /usr/share/java/antlr-3.2/tool/target/antlr-3.2.jar
[INFO] ------------------------------------------------------------------------
[INFO] Building Maven plugin for ANTLR V3
[INFO] ------------------------------------------------------------------------
[INFO] [plugin:descriptor {execution: default-descriptor}]
[INFO] Using 2 extractors.
[INFO] Applying extractor for language: java
[INFO] Extractor for language: java found 1 mojo descriptors.
[INFO] Applying extractor for language: bsh
[INFO] Extractor for language: bsh found 0 mojo descriptors.
[INFO] [resources:resources {execution: default-resources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /usr/share/java/antlr-3.2/antlr3-maven-plugin/src/main/resources
[INFO] [compiler:compile {execution: default-compile}]
[INFO] Nothing to compile - all classes are up to date
[INFO] [resources:testResources {execution: default-testResources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /usr/share/java/antlr-3.2/antlr3-maven-plugin/src/test/resources
[INFO] [compiler:testCompile {execution: default-testCompile}]
[INFO] Not compiling test sources
[INFO] [surefire:test {execution: default-test}]
[INFO] Tests are skipped.
[INFO] [jar:jar {execution: default-jar}]
[INFO] Building jar: /usr/share/java/antlr-3.2/antlr3-maven-plugin/target/antlr3-maven-plugin-3.2.jar
[INFO] [plugin:addPluginArtifactMetadata {execution: default-addPluginArtifactMetadata}]
[INFO] ------------------------------------------------------------------------
[INFO] Building ANTLR gUnit
[INFO] ------------------------------------------------------------------------
[INFO] [buildnumber:create {execution: default}]
[INFO] Storing buildNumber: Aug 12, 2010 13:31:40 at timestamp: 1281645100566
[INFO] Executing: /bin/sh -c cd /usr/share/java/antlr-3.2/gunit && svn --non-interactive info
[INFO] Working directory: /usr/share/java/antlr-3.2/gunit
[INFO] Storing buildScmBranch: UNKNOWN_BRANCH
[INFO] [antlr3:antlr {execution: default}]
[INFO] ANTLR: Processing source directory /usr/share/java/antlr-3.2/gunit/src/main/antlr3
ANTLR Parser Generator  Version 3.2 Aug 12, 2010 13:15:10
Grammar /usr/share/java/antlr-3.2/gunit/src/main/antlr3/org/antlr/gunit/gUnit.g is up to date - build skipped
Grammar /usr/share/java/antlr-3.2/gunit/src/main/antlr3/org/antlr/gunit/swingui/parsers/StGUnit.g is up to date - build skipped
Grammar /usr/share/java/antlr-3.2/gunit/src/main/antlr3/org/antlr/gunit/swingui/parsers/ANTLRv3.g is up to date - build skipped
[INFO] [resources:resources {execution: default-resources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 28 resources
[INFO] [compiler:compile {execution: default-compile}]
[INFO] Nothing to compile - all classes are up to date
[INFO] [resources:testResources {execution: default-testResources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /usr/share/java/antlr-3.2/gunit/src/test/resources
[INFO] [compiler:testCompile {execution: default-testCompile}]
[INFO] Not compiling test sources
[INFO] [surefire:test {execution: default-test}]
[INFO] Tests are skipped.
[INFO] [jar:jar {execution: default-jar}]
[INFO] Building jar: /usr/share/java/antlr-3.2/gunit/target/gunit-3.2.jar
[INFO] ------------------------------------------------------------------------
[INFO] Building Maven plugin for gUnit ANTLR V3
[INFO] ------------------------------------------------------------------------
[INFO] [plugin:descriptor {execution: default-descriptor}]
[INFO] Using 2 extractors.
[INFO] Applying extractor for language: java
[INFO] Extractor for language: java found 1 mojo descriptors.
[INFO] Applying extractor for language: bsh
[INFO] Extractor for language: bsh found 0 mojo descriptors.
[INFO] [resources:resources {execution: default-resources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /usr/share/java/antlr-3.2/gunit-maven-plugin/src/main/resources
[INFO] [compiler:compile {execution: default-compile}]
[INFO] Nothing to compile - all classes are up to date
[INFO] [resources:testResources {execution: default-testResources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /usr/share/java/antlr-3.2/gunit-maven-plugin/src/test/resources
[INFO] [compiler:testCompile {execution: default-testCompile}]
[INFO] Not compiling test sources
[INFO] [surefire:test {execution: default-test}]
[INFO] Tests are skipped.
[INFO] [jar:jar {execution: default-jar}]
[INFO] Building jar: /usr/share/java/antlr-3.2/gunit-maven-plugin/target/maven-gunit-plugin-3.2.jar
[INFO] [plugin:addPluginArtifactMetadata {execution: default-addPluginArtifactMetadata}]
[INFO] ------------------------------------------------------------------------
[INFO] Building ANTLR3 Maven Archetype
[INFO] ------------------------------------------------------------------------
[INFO] [resources:resources {execution: default-resources}]
[WARNING] Using platform encoding (MacRoman actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 10 resources
[INFO] [resources:testResources {execution: default-testResources}]
[WARNING] Using platform encoding (MacRoman actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 10 resources
[INFO] [archetype:jar {execution: default-jar}]
[INFO] [archetype:add-archetype-metadata {execution: default-add-archetype-metadata}]
[INFO] [assembly:assembly {execution: default-cli}]
[INFO] Reading assembly descriptor: antlrjar.xml
[INFO] Reading assembly descriptor: antlrsources.xml
[WARNING] NOTE: Currently, inclusion of module dependencies may produce unpredictable results if a version conflict occurs.
[INFO] Processing DependencySet (output=null)
[WARNING] NOTE: Currently, inclusion of module dependencies may produce unpredictable results if a version conflict occurs.
[INFO] Building jar: /usr/share/java/antlr-3.2/target/antlr-master-3.2-completejar.jar
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Failed to create assembly: Error creating assembly archive completejar: Problem creating jar: JAR entry META-INF/MANIFEST.MF not found in /usr/share/java/antlr-3.2/tool/target/antlr-3.2.jar

[INFO] ------------------------------------------------------------------------
[INFO] For more information, run Maven with the -e switch
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 18 seconds
[INFO] Finished at: Thu Aug 12 13:31:42 PDT 2010
[INFO] Final Memory: 34M/71M
[INFO] ------------------------------------------------------------------------
cp: target/antlr-master-3.2-completejar.jar: No such file or directory

End of run output

Thanks in advance,
Alan
---

Alan Condit
1085 Tierra Ct.
Woodburn, OR 97071

Email -- acondit at ipns.com
Home-Office (503) 982-0906


From jimi at temporal-wave.com  Thu Aug 12 17:22:36 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 12 Aug 2010 17:22:36 -0700
Subject: [antlr-interest] Problems with rebuilding Antlrworks on OS X
	10.6.4
In-Reply-To: <AD3D6FB6-233E-4ED7-940F-26BAB394A55B@ipns.com>
References: <AD3D6FB6-233E-4ED7-940F-26BAB394A55B@ipns.com>
Message-ID: <1D257E86-D536-424A-877A-60B45404312D@temporal-wave.com>

You only need to run the second maven command which fails occasionally because of a maven bug. 

Antlrworks also builds with maven so you don't need to use ant or copy libraries. Unless the maven build was broken at some point?

Jim

On Aug 12, 2010, at 13:54, Alan Condit <acondit at ipns.com> wrote:

> I created the following script to rebuild Antlrworks when I change the stg files for the ObjC  target language.
> 
> start of script:
> cd /usr/share/java/antlr-3.2
> mvn -Dmaven.test.skip=true
> mvn -Dmaven.test.skip=true package assembly:assembly
> cp target/antlr-master-3.2-completejar.jar /Library/Java/Extensions/antlr-3.2.jar
> cd ../antlrworks-1.4-src
> cp /Library/Java/Extensions/antlr-3.2.jar lib/antlr-3.2.jar
> ant
> cd ..
> end of script:
> 
> Almost all the time the first maven command will complete successfully. However, about two thirds of the time the second maven command will have an error in execution. So I created a second script shown below to avoid rerunning the first maven command unnecessarily.
> 
> start of script:
> cd /usr/share/java/antlr-3.2
> mvn -Dmaven.test.skip=true package assembly:assembly
> cp target/antlr-master-3.2-completejar.jar /Library/Java/Extensions/antlr-3.2.jar
> cd ../antlrworks-1.4-src
> cp /Library/Java/Extensions/antlr-3.2.jar lib/antlr-3.2.jar
> ant
> cd ..
> end of script:
> 
> If I run this second script multiple times it will finally result in a successful execution. But when it results in an error, the error is always the same. Can anyone look at the run output and tell me what is causing the error?
> 
> Run output on error:
> 
> [INFO] Scanning for projects...
> [INFO] Reactor build order: 
> [INFO]   ANTLR Master build control POM
> [INFO]   Antlr 3 Runtime
> [INFO]   ANTLR Grammar Tool
> [INFO]   Maven plugin for ANTLR V3
> [INFO]   ANTLR gUnit
> [INFO]   Maven plugin for gUnit ANTLR V3
> [INFO]   ANTLR3 Maven Archetype
> [INFO] ------------------------------------------------------------------------
> [INFO] Building ANTLR Master build control POM
> [INFO]    task-segment: [package]
> [INFO] ------------------------------------------------------------------------
> [INFO] [buildnumber:create {execution: default}]
> [INFO] Storing buildNumber: Aug 12, 2010 13:31:28 at timestamp: 1281645088311
> [INFO] Executing: /bin/sh -c cd /usr/share/java/antlr-3.2 && svn --non-interactive info
> [INFO] Working directory: /usr/share/java/antlr-3.2
> [INFO] Storing buildScmBranch: UNKNOWN_BRANCH
> [INFO] [site:attach-descriptor {execution: default-attach-descriptor}]
> [INFO] ------------------------------------------------------------------------
> [INFO] Building Antlr 3 Runtime
> [INFO]    task-segment: [package]
> [INFO] ------------------------------------------------------------------------
> [INFO] [buildnumber:create {execution: default}]
> [INFO] Storing buildNumber: Aug 12, 2010 13:31:29 at timestamp: 1281645089965
> [INFO] Executing: /bin/sh -c cd /usr/share/java/antlr-3.2/runtime/Java && svn --non-interactive info
> [INFO] Working directory: /usr/share/java/antlr-3.2/runtime/Java
> [INFO] Storing buildScmBranch: UNKNOWN_BRANCH
> [INFO] [resources:resources {execution: default-resources}]
> [INFO] Using 'UTF-8' encoding to copy filtered resources.
> [INFO] skip non existing resourceDirectory /usr/share/java/antlr-3.2/runtime/Java/src/main/resources
> [INFO] [compiler:compile {execution: default-compile}]
> [INFO] Nothing to compile - all classes are up to date
> [INFO] [resources:testResources {execution: default-testResources}]
> [INFO] Using 'UTF-8' encoding to copy filtered resources.
> [INFO] skip non existing resourceDirectory /usr/share/java/antlr-3.2/runtime/Java/src/test/resources
> [INFO] [compiler:testCompile {execution: default-testCompile}]
> [INFO] Not compiling test sources
> [INFO] [surefire:test {execution: default-test}]
> [INFO] Tests are skipped.
> [INFO] [jar:jar {execution: default-jar}]
> [INFO] ------------------------------------------------------------------------
> [INFO] Building ANTLR Grammar Tool
> [INFO]    task-segment: [package]
> [INFO] ------------------------------------------------------------------------
> [INFO] [buildnumber:create {execution: default}]
> [INFO] Storing buildNumber: Aug 12, 2010 13:31:31 at timestamp: 1281645091129
> [INFO] Executing: /bin/sh -c cd /usr/share/java/antlr-3.2/tool && svn --non-interactive info
> [INFO] Working directory: /usr/share/java/antlr-3.2/tool
> [INFO] Storing buildScmBranch: UNKNOWN_BRANCH
> [INFO] [antlr:generate {execution: default}]
> [INFO] Using Antlr grammar: /usr/share/java/antlr-3.2/tool/src/main/antlr2/org/antlr/grammar/v2/antlr.g
> [INFO] The grammar is already generated.
> [INFO] Using Antlr grammar: /usr/share/java/antlr-3.2/tool/src/main/antlr2/org/antlr/grammar/v2/codegen.g
> [INFO] The grammar is already generated.
> [INFO] Using Antlr grammar: /usr/share/java/antlr-3.2/tool/src/main/antlr2/org/antlr/grammar/v2/antlr.print.g
> [INFO] The grammar is already generated.
> [INFO] Using Antlr grammar: /usr/share/java/antlr-3.2/tool/src/main/antlr2/org/antlr/grammar/v2/assign.types.g
> [INFO] The grammar is already generated.
> [INFO] Using Antlr grammar: /usr/share/java/antlr-3.2/tool/src/main/antlr2/org/antlr/grammar/v2/buildnfa.g
> [INFO] The grammar is already generated.
> [INFO] Using Antlr grammar: /usr/share/java/antlr-3.2/tool/src/main/antlr2/org/antlr/grammar/v2/define.g
> [INFO] The grammar is already generated.
> [INFO] [antlr3:antlr {execution: default}]
> [INFO] ANTLR: Processing source directory /usr/share/java/antlr-3.2/tool/src/main/antlr3
> ANTLR Parser Generator  Version 3.2 Aug 12, 2010 13:23:03
> Grammar /usr/share/java/antlr-3.2/tool/src/main/antlr3/org/antlr/grammar/v3/ANTLRv3.g is up to date - build skipped
> Grammar /usr/share/java/antlr-3.2/tool/src/main/antlr3/org/antlr/grammar/v3/ActionAnalysis.g is up to date - build skipped
> Grammar /usr/share/java/antlr-3.2/tool/src/main/antlr3/org/antlr/grammar/v3/ANTLRv3Tree.g is up to date - build skipped
> Grammar /usr/share/java/antlr-3.2/tool/src/main/antlr3/org/antlr/grammar/v3/ActionTranslator.g is up to date - build skipped
> [INFO] [resources:resources {execution: default-resources}]
> [INFO] Using 'UTF-8' encoding to copy filtered resources.
> [INFO] Copying 98 resources
> [INFO] Copying 6 resources
> [INFO] [compiler:compile {execution: default-compile}]
> [INFO] Nothing to compile - all classes are up to date
> [INFO] [resources:testResources {execution: default-testResources}]
> [INFO] Using 'UTF-8' encoding to copy filtered resources.
> [INFO] skip non existing resourceDirectory /usr/share/java/antlr-3.2/tool/src/test/resources
> [INFO] [compiler:testCompile {execution: default-testCompile}]
> [INFO] Not compiling test sources
> [INFO] [surefire:test {execution: default-test}]
> [INFO] Tests are skipped.
> [INFO] [jar:jar {execution: default-jar}]
> [INFO] Building jar: /usr/share/java/antlr-3.2/tool/target/antlr-3.2.jar
> [INFO] ------------------------------------------------------------------------
> [INFO] Building Maven plugin for ANTLR V3
> [INFO]    task-segment: [package]
> [INFO] ------------------------------------------------------------------------
> [INFO] [plugin:descriptor {execution: default-descriptor}]
> [INFO] Using 2 extractors.
> [INFO] Applying extractor for language: java
> [INFO] Extractor for language: java found 1 mojo descriptors.
> [INFO] Applying extractor for language: bsh
> [INFO] Extractor for language: bsh found 0 mojo descriptors.
> [INFO] [resources:resources {execution: default-resources}]
> [INFO] Using 'UTF-8' encoding to copy filtered resources.
> [INFO] skip non existing resourceDirectory /usr/share/java/antlr-3.2/antlr3-maven-plugin/src/main/resources
> [INFO] [compiler:compile {execution: default-compile}]
> [INFO] Nothing to compile - all classes are up to date
> [INFO] [resources:testResources {execution: default-testResources}]
> [INFO] Using 'UTF-8' encoding to copy filtered resources.
> [INFO] skip non existing resourceDirectory /usr/share/java/antlr-3.2/antlr3-maven-plugin/src/test/resources
> [INFO] [compiler:testCompile {execution: default-testCompile}]
> [INFO] Not compiling test sources
> [INFO] [surefire:test {execution: default-test}]
> [INFO] Tests are skipped.
> [INFO] [jar:jar {execution: default-jar}]
> [INFO] Building jar: /usr/share/java/antlr-3.2/antlr3-maven-plugin/target/antlr3-maven-plugin-3.2.jar
> [INFO] [plugin:addPluginArtifactMetadata {execution: default-addPluginArtifactMetadata}]
> [INFO] ------------------------------------------------------------------------
> [INFO] Building ANTLR gUnit
> [INFO]    task-segment: [package]
> [INFO] ------------------------------------------------------------------------
> [INFO] Reloading plugin container for: org.antlr:antlr3-maven-plugin:3.2. The plugin artifact has changed.
> [INFO] [buildnumber:create {execution: default}]
> [INFO] Storing buildNumber: Aug 12, 2010 13:31:35 at timestamp: 1281645095701
> [INFO] Executing: /bin/sh -c cd /usr/share/java/antlr-3.2/gunit && svn --non-interactive info
> [INFO] Working directory: /usr/share/java/antlr-3.2/gunit
> [INFO] Storing buildScmBranch: UNKNOWN_BRANCH
> [INFO] [antlr3:antlr {execution: default}]
> [INFO] ANTLR: Processing source directory /usr/share/java/antlr-3.2/gunit/src/main/antlr3
> ANTLR Parser Generator  Version 3.2 Aug 12, 2010 13:31:31
> Grammar /usr/share/java/antlr-3.2/gunit/src/main/antlr3/org/antlr/gunit/gUnit.g is up to date - build skipped
> Grammar /usr/share/java/antlr-3.2/gunit/src/main/antlr3/org/antlr/gunit/swingui/parsers/StGUnit.g is up to date - build skipped
> Grammar /usr/share/java/antlr-3.2/gunit/src/main/antlr3/org/antlr/gunit/swingui/parsers/ANTLRv3.g is up to date - build skipped
> [INFO] [resources:resources {execution: default-resources}]
> [INFO] Using 'UTF-8' encoding to copy filtered resources.
> [INFO] Copying 28 resources
> [INFO] [compiler:compile {execution: default-compile}]
> [INFO] Nothing to compile - all classes are up to date
> [INFO] [resources:testResources {execution: default-testResources}]
> [INFO] Using 'UTF-8' encoding to copy filtered resources.
> [INFO] skip non existing resourceDirectory /usr/share/java/antlr-3.2/gunit/src/test/resources
> [INFO] [compiler:testCompile {execution: default-testCompile}]
> [INFO] Not compiling test sources
> [INFO] [surefire:test {execution: default-test}]
> [INFO] Tests are skipped.
> [INFO] [jar:jar {execution: default-jar}]
> [INFO] Building jar: /usr/share/java/antlr-3.2/gunit/target/gunit-3.2.jar
> [INFO] ------------------------------------------------------------------------
> [INFO] Building Maven plugin for gUnit ANTLR V3
> [INFO]    task-segment: [package]
> [INFO] ------------------------------------------------------------------------
> [INFO] [plugin:descriptor {execution: default-descriptor}]
> [INFO] Using 2 extractors.
> [INFO] Applying extractor for language: java
> [INFO] Extractor for language: java found 1 mojo descriptors.
> [INFO] Applying extractor for language: bsh
> [INFO] Extractor for language: bsh found 0 mojo descriptors.
> [INFO] [resources:resources {execution: default-resources}]
> [INFO] Using 'UTF-8' encoding to copy filtered resources.
> [INFO] skip non existing resourceDirectory /usr/share/java/antlr-3.2/gunit-maven-plugin/src/main/resources
> [INFO] [compiler:compile {execution: default-compile}]
> [INFO] Nothing to compile - all classes are up to date
> [INFO] [resources:testResources {execution: default-testResources}]
> [INFO] Using 'UTF-8' encoding to copy filtered resources.
> [INFO] skip non existing resourceDirectory /usr/share/java/antlr-3.2/gunit-maven-plugin/src/test/resources
> [INFO] [compiler:testCompile {execution: default-testCompile}]
> [INFO] Not compiling test sources
> [INFO] [surefire:test {execution: default-test}]
> [INFO] Tests are skipped.
> [INFO] [jar:jar {execution: default-jar}]
> [INFO] Building jar: /usr/share/java/antlr-3.2/gunit-maven-plugin/target/maven-gunit-plugin-3.2.jar
> [INFO] [plugin:addPluginArtifactMetadata {execution: default-addPluginArtifactMetadata}]
> [INFO] ------------------------------------------------------------------------
> [INFO] Building ANTLR3 Maven Archetype
> [INFO]    task-segment: [package]
> [INFO] ------------------------------------------------------------------------
> [INFO] [resources:resources {execution: default-resources}]
> [WARNING] Using platform encoding (MacRoman actually) to copy filtered resources, i.e. build is platform dependent!
> [INFO] Copying 10 resources
> [INFO] [resources:testResources {execution: default-testResources}]
> [WARNING] Using platform encoding (MacRoman actually) to copy filtered resources, i.e. build is platform dependent!
> [INFO] Copying 10 resources
> [INFO] Setting property: classpath.resource.loader.class => 'org.codehaus.plexus.velocity.ContextClassLoaderResourceLoader'.
> [INFO] Setting property: velocimacro.messages.on => 'false'.
> [INFO] Setting property: resource.loader => 'classpath'.
> [INFO] Setting property: resource.manager.logwhenfound => 'false'.
> [INFO] [archetype:jar {execution: default-jar}]
> [INFO] [archetype:add-archetype-metadata {execution: default-add-archetype-metadata}]
> [INFO] ------------------------------------------------------------------------
> [INFO] Building ANTLR Master build control POM
> [INFO]    task-segment: [assembly:assembly] (aggregator-style)
> [INFO] ------------------------------------------------------------------------
> [INFO] Preparing assembly:assembly
> [INFO] ------------------------------------------------------------------------
> [INFO] Building ANTLR Master build control POM
> [INFO] ------------------------------------------------------------------------
> [INFO] [buildnumber:create {execution: default}]
> [INFO] Storing buildNumber: Aug 12, 2010 13:31:38 at timestamp: 1281645098279
> [INFO] Executing: /bin/sh -c cd /usr/share/java/antlr-3.2 && svn --non-interactive info
> [INFO] Working directory: /usr/share/java/antlr-3.2
> [INFO] Storing buildScmBranch: UNKNOWN_BRANCH
> [INFO] [site:attach-descriptor {execution: default-attach-descriptor}]
> [INFO] ------------------------------------------------------------------------
> [INFO] Building Antlr 3 Runtime
> [INFO] ------------------------------------------------------------------------
> [INFO] [buildnumber:create {execution: default}]
> [INFO] Storing buildNumber: Aug 12, 2010 13:31:38 at timestamp: 1281645098497
> [INFO] Executing: /bin/sh -c cd /usr/share/java/antlr-3.2/runtime/Java && svn --non-interactive info
> [INFO] Working directory: /usr/share/java/antlr-3.2/runtime/Java
> [INFO] Storing buildScmBranch: UNKNOWN_BRANCH
> [INFO] [resources:resources {execution: default-resources}]
> [INFO] Using 'UTF-8' encoding to copy filtered resources.
> [INFO] skip non existing resourceDirectory /usr/share/java/antlr-3.2/runtime/Java/src/main/resources
> [INFO] [compiler:compile {execution: default-compile}]
> [INFO] Nothing to compile - all classes are up to date
> [INFO] [resources:testResources {execution: default-testResources}]
> [INFO] Using 'UTF-8' encoding to copy filtered resources.
> [INFO] skip non existing resourceDirectory /usr/share/java/antlr-3.2/runtime/Java/src/test/resources
> [INFO] [compiler:testCompile {execution: default-testCompile}]
> [INFO] Not compiling test sources
> [INFO] [surefire:test {execution: default-test}]
> [INFO] Tests are skipped.
> [INFO] [jar:jar {execution: default-jar}]
> [INFO] ------------------------------------------------------------------------
> [INFO] Building ANTLR Grammar Tool
> [INFO] ------------------------------------------------------------------------
> [INFO] [buildnumber:create {execution: default}]
> [INFO] Storing buildNumber: Aug 12, 2010 13:31:38 at timestamp: 1281645098748
> [INFO] Executing: /bin/sh -c cd /usr/share/java/antlr-3.2/tool && svn --non-interactive info
> [INFO] Working directory: /usr/share/java/antlr-3.2/tool
> [INFO] Storing buildScmBranch: UNKNOWN_BRANCH
> [INFO] [antlr:generate {execution: default}]
> [INFO] Using Antlr grammar: /usr/share/java/antlr-3.2/tool/src/main/antlr2/org/antlr/grammar/v2/antlr.g
> [INFO] The grammar is already generated.
> [INFO] Using Antlr grammar: /usr/share/java/antlr-3.2/tool/src/main/antlr2/org/antlr/grammar/v2/codegen.g
> [INFO] The grammar is already generated.
> [INFO] Using Antlr grammar: /usr/share/java/antlr-3.2/tool/src/main/antlr2/org/antlr/grammar/v2/antlr.print.g
> [INFO] The grammar is already generated.
> [INFO] Using Antlr grammar: /usr/share/java/antlr-3.2/tool/src/main/antlr2/org/antlr/grammar/v2/assign.types.g
> [INFO] The grammar is already generated.
> [INFO] Using Antlr grammar: /usr/share/java/antlr-3.2/tool/src/main/antlr2/org/antlr/grammar/v2/buildnfa.g
> [INFO] The grammar is already generated.
> [INFO] Using Antlr grammar: /usr/share/java/antlr-3.2/tool/src/main/antlr2/org/antlr/grammar/v2/define.g
> [INFO] The grammar is already generated.
> [INFO] [antlr3:antlr {execution: default}]
> [INFO] ANTLR: Processing source directory /usr/share/java/antlr-3.2/tool/src/main/antlr3
> ANTLR Parser Generator  Version 3.2 Aug 12, 2010 13:31:31
> Grammar /usr/share/java/antlr-3.2/tool/src/main/antlr3/org/antlr/grammar/v3/ANTLRv3.g is up to date - build skipped
> Grammar /usr/share/java/antlr-3.2/tool/src/main/antlr3/org/antlr/grammar/v3/ActionAnalysis.g is up to date - build skipped
> Grammar /usr/share/java/antlr-3.2/tool/src/main/antlr3/org/antlr/grammar/v3/ANTLRv3Tree.g is up to date - build skipped
> Grammar /usr/share/java/antlr-3.2/tool/src/main/antlr3/org/antlr/grammar/v3/ActionTranslator.g is up to date - build skipped
> [INFO] [resources:resources {execution: default-resources}]
> [INFO] Using 'UTF-8' encoding to copy filtered resources.
> [INFO] Copying 98 resources
> [INFO] Copying 6 resources
> [INFO] Copying 6 resources
> [INFO] [compiler:compile {execution: default-compile}]
> [INFO] Nothing to compile - all classes are up to date
> [INFO] [resources:testResources {execution: default-testResources}]
> [INFO] Using 'UTF-8' encoding to copy filtered resources.
> [INFO] skip non existing resourceDirectory /usr/share/java/antlr-3.2/tool/src/test/resources
> [INFO] [compiler:testCompile {execution: default-testCompile}]
> [INFO] Not compiling test sources
> [INFO] [surefire:test {execution: default-test}]
> [INFO] Tests are skipped.
> [INFO] [jar:jar {execution: default-jar}]
> [INFO] Building jar: /usr/share/java/antlr-3.2/tool/target/antlr-3.2.jar
> [INFO] ------------------------------------------------------------------------
> [INFO] Building Maven plugin for ANTLR V3
> [INFO] ------------------------------------------------------------------------
> [INFO] [plugin:descriptor {execution: default-descriptor}]
> [INFO] Using 2 extractors.
> [INFO] Applying extractor for language: java
> [INFO] Extractor for language: java found 1 mojo descriptors.
> [INFO] Applying extractor for language: bsh
> [INFO] Extractor for language: bsh found 0 mojo descriptors.
> [INFO] [resources:resources {execution: default-resources}]
> [INFO] Using 'UTF-8' encoding to copy filtered resources.
> [INFO] skip non existing resourceDirectory /usr/share/java/antlr-3.2/antlr3-maven-plugin/src/main/resources
> [INFO] [compiler:compile {execution: default-compile}]
> [INFO] Nothing to compile - all classes are up to date
> [INFO] [resources:testResources {execution: default-testResources}]
> [INFO] Using 'UTF-8' encoding to copy filtered resources.
> [INFO] skip non existing resourceDirectory /usr/share/java/antlr-3.2/antlr3-maven-plugin/src/test/resources
> [INFO] [compiler:testCompile {execution: default-testCompile}]
> [INFO] Not compiling test sources
> [INFO] [surefire:test {execution: default-test}]
> [INFO] Tests are skipped.
> [INFO] [jar:jar {execution: default-jar}]
> [INFO] Building jar: /usr/share/java/antlr-3.2/antlr3-maven-plugin/target/antlr3-maven-plugin-3.2.jar
> [INFO] [plugin:addPluginArtifactMetadata {execution: default-addPluginArtifactMetadata}]
> [INFO] ------------------------------------------------------------------------
> [INFO] Building ANTLR gUnit
> [INFO] ------------------------------------------------------------------------
> [INFO] [buildnumber:create {execution: default}]
> [INFO] Storing buildNumber: Aug 12, 2010 13:31:40 at timestamp: 1281645100566
> [INFO] Executing: /bin/sh -c cd /usr/share/java/antlr-3.2/gunit && svn --non-interactive info
> [INFO] Working directory: /usr/share/java/antlr-3.2/gunit
> [INFO] Storing buildScmBranch: UNKNOWN_BRANCH
> [INFO] [antlr3:antlr {execution: default}]
> [INFO] ANTLR: Processing source directory /usr/share/java/antlr-3.2/gunit/src/main/antlr3
> ANTLR Parser Generator  Version 3.2 Aug 12, 2010 13:15:10
> Grammar /usr/share/java/antlr-3.2/gunit/src/main/antlr3/org/antlr/gunit/gUnit.g is up to date - build skipped
> Grammar /usr/share/java/antlr-3.2/gunit/src/main/antlr3/org/antlr/gunit/swingui/parsers/StGUnit.g is up to date - build skipped
> Grammar /usr/share/java/antlr-3.2/gunit/src/main/antlr3/org/antlr/gunit/swingui/parsers/ANTLRv3.g is up to date - build skipped
> [INFO] [resources:resources {execution: default-resources}]
> [INFO] Using 'UTF-8' encoding to copy filtered resources.
> [INFO] Copying 28 resources
> [INFO] [compiler:compile {execution: default-compile}]
> [INFO] Nothing to compile - all classes are up to date
> [INFO] [resources:testResources {execution: default-testResources}]
> [INFO] Using 'UTF-8' encoding to copy filtered resources.
> [INFO] skip non existing resourceDirectory /usr/share/java/antlr-3.2/gunit/src/test/resources
> [INFO] [compiler:testCompile {execution: default-testCompile}]
> [INFO] Not compiling test sources
> [INFO] [surefire:test {execution: default-test}]
> [INFO] Tests are skipped.
> [INFO] [jar:jar {execution: default-jar}]
> [INFO] Building jar: /usr/share/java/antlr-3.2/gunit/target/gunit-3.2.jar
> [INFO] ------------------------------------------------------------------------
> [INFO] Building Maven plugin for gUnit ANTLR V3
> [INFO] ------------------------------------------------------------------------
> [INFO] [plugin:descriptor {execution: default-descriptor}]
> [INFO] Using 2 extractors.
> [INFO] Applying extractor for language: java
> [INFO] Extractor for language: java found 1 mojo descriptors.
> [INFO] Applying extractor for language: bsh
> [INFO] Extractor for language: bsh found 0 mojo descriptors.
> [INFO] [resources:resources {execution: default-resources}]
> [INFO] Using 'UTF-8' encoding to copy filtered resources.
> [INFO] skip non existing resourceDirectory /usr/share/java/antlr-3.2/gunit-maven-plugin/src/main/resources
> [INFO] [compiler:compile {execution: default-compile}]
> [INFO] Nothing to compile - all classes are up to date
> [INFO] [resources:testResources {execution: default-testResources}]
> [INFO] Using 'UTF-8' encoding to copy filtered resources.
> [INFO] skip non existing resourceDirectory /usr/share/java/antlr-3.2/gunit-maven-plugin/src/test/resources
> [INFO] [compiler:testCompile {execution: default-testCompile}]
> [INFO] Not compiling test sources
> [INFO] [surefire:test {execution: default-test}]
> [INFO] Tests are skipped.
> [INFO] [jar:jar {execution: default-jar}]
> [INFO] Building jar: /usr/share/java/antlr-3.2/gunit-maven-plugin/target/maven-gunit-plugin-3.2.jar
> [INFO] [plugin:addPluginArtifactMetadata {execution: default-addPluginArtifactMetadata}]
> [INFO] ------------------------------------------------------------------------
> [INFO] Building ANTLR3 Maven Archetype
> [INFO] ------------------------------------------------------------------------
> [INFO] [resources:resources {execution: default-resources}]
> [WARNING] Using platform encoding (MacRoman actually) to copy filtered resources, i.e. build is platform dependent!
> [INFO] Copying 10 resources
> [INFO] [resources:testResources {execution: default-testResources}]
> [WARNING] Using platform encoding (MacRoman actually) to copy filtered resources, i.e. build is platform dependent!
> [INFO] Copying 10 resources
> [INFO] [archetype:jar {execution: default-jar}]
> [INFO] [archetype:add-archetype-metadata {execution: default-add-archetype-metadata}]
> [INFO] [assembly:assembly {execution: default-cli}]
> [INFO] Reading assembly descriptor: antlrjar.xml
> [INFO] Reading assembly descriptor: antlrsources.xml
> [WARNING] NOTE: Currently, inclusion of module dependencies may produce unpredictable results if a version conflict occurs.
> [INFO] Processing DependencySet (output=null)
> [WARNING] NOTE: Currently, inclusion of module dependencies may produce unpredictable results if a version conflict occurs.
> [INFO] Building jar: /usr/share/java/antlr-3.2/target/antlr-master-3.2-completejar.jar
> [INFO] ------------------------------------------------------------------------
> [ERROR] BUILD ERROR
> [INFO] ------------------------------------------------------------------------
> [INFO] Failed to create assembly: Error creating assembly archive completejar: Problem creating jar: JAR entry META-INF/MANIFEST.MF not found in /usr/share/java/antlr-3.2/tool/target/antlr-3.2.jar
> 
> [INFO] ------------------------------------------------------------------------
> [INFO] For more information, run Maven with the -e switch
> [INFO] ------------------------------------------------------------------------
> [INFO] Total time: 18 seconds
> [INFO] Finished at: Thu Aug 12 13:31:42 PDT 2010
> [INFO] Final Memory: 34M/71M
> [INFO] ------------------------------------------------------------------------
> cp: target/antlr-master-3.2-completejar.jar: No such file or directory
> 
> End of run output
> 
> Thanks in advance,
> Alan
> ---
> 
> Alan Condit
> 1085 Tierra Ct.
> Woodburn, OR 97071
> 
> Email -- acondit at ipns.com
> Home-Office (503) 982-0906
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From paul.bouche at nsn.com  Fri Aug 13 01:34:56 2010
From: paul.bouche at nsn.com (=?ISO-8859-1?Q?=22Paul_Bouch=E9_=28NSN_-_DE=2C_Berlin=29=22?=)
Date: Fri, 13 Aug 2010 10:34:56 +0200
Subject: [antlr-interest] Syntax- highlighter and completition
In-Reply-To: <AANLkTinb0KBF-oFmFuogQMn7TtY6AKX2K2pZZYDpFVUS@mail.gmail.com>
References: <OF1C70F402.83D84CAB-ONC125777D.003977ED-C125777D.003AABFA@esa.int>
	<AANLkTinb0KBF-oFmFuogQMn7TtY6AKX2K2pZZYDpFVUS@mail.gmail.com>
Message-ID: <4C6503B0.9040206@nsn.com>

Hi,

so this is really interesting. Do you know if the text editing 
components are available standalone from NetBeans - I heard such a thing?

BR,
Paul

ext Andreas Stefik schrieb:
> Hi there,
>
> Another option you have is to use the NetBeans platform for these
> editor tasks. Basically, you keep a list of whatever you want (e.g.,
> what methods have been parsed, what variables, tokens), and you pass
> them to the platform's APIs specifically designed for parsing,
> highlighting, etc. All of the threading/highlighting/user interface
> work is done for you, is commercially scalable, and works extremely
> well behind the scenes.
>
> Like anything, it isn't trivial to do, but the APIs for parsing/code
> completion/syntax highlighting are pretty straightforward and there
> are tutorials online on how to do it with ANTLR. Here's one, for
> example:
>
> http://wiki.netbeans.org/Netbeans_Rcp_Antlr_Integration_Index
>
> Hope that helps,
>
> Andreas Stefik
>
> On Thu, Aug 12, 2010 at 5:40 AM,  <Nieves.Salor.Moral at esa.int> wrote:
>   
>> Helllo!!
>>
>> I think this is an old topic, but looking at the list I haven't found a
>> clear answer to the problem. I am trying to do a system that opens in a
>> swing panel an specific type file, which follows my specific grammar and
>> allows its editing.
>> Hence, I want to add syntax-highlighting and also auto completion to the
>> file (both in the editing and in the only reading), But also I should show
>> the syntax tree.
>>
>> I have my ANTLR grammar running (pluto.g) and tested with current output
>> as a flat AST tree. But I am not entirely sure what to do next.
>>
>> My first option is to specify as output templates and use directly from
>> the parser grammar StringTemplate with the output specifying the colors,
>> font, etc in a kind of HTML similar code and later plug-in in the swing
>> panel
>> Second option, is to create a Parser Tree and later on, use the templates
>> Third, forget the parser and just use the lexer????
>>
>> The problem is that the final goal of the system is to create SQL queries
>> to insert/modify in a DB the information that contains the grammar.
>>
>> Any outputs are welcome, thanks
>>
>>
>>
>> Nieves Salor Moral
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>>
>>     
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>   


From jasperfloor at gmail.com  Fri Aug 13 07:47:58 2010
From: jasperfloor at gmail.com (Jasper Floor)
Date: Fri, 13 Aug 2010 16:47:58 +0200
Subject: [antlr-interest] gUnit StringIndexOutOfBoundsException,
 getText() called where state.tokenStartCharIndex is -1
In-Reply-To: <AANLkTimapuKzxL06HFY=srrczDVwjNb=m4qSfseRHG5+@mail.gmail.com>
References: <AANLkTimapuKzxL06HFY=srrczDVwjNb=m4qSfseRHG5+@mail.gmail.com>
Message-ID: <AANLkTikggT+N0bc88Bi5nPPpEScknLKcpLCK9hz_8osH@mail.gmail.com>

As far as I can tell Lexer.nextToken is never called before parsing
the string. Thus the state is not set. If however I use a string in a
higher level rule then the lexer itself calls nextToken and everything
is fine.

I am mostly convinced that this is a problem in gUnit but I'm not
sure. I also really would like to have my tests working rather that
returning an Exception. I'm just weird that way ;)

mvg,
Jasper

On Wed, Aug 11, 2010 at 5:59 PM, Jasper Floor <jasperfloor at gmail.com> wrote:
> I have a DSL which is already in production but I am working on an
> updated version.
>
> We already have quite a few tests which call the parser but I never
> added gUnit tests until this version.
>
> Actually everything was working fine until my latest change where I
> started messing with the token stream. I don't think I am doing
> anything complicated. Also our other tests work fine so I think the
> problem is in gUnit.
>
> Basically I have a rule where I want to remove some elements from the
> input string. This is done with setText(unescape(getText())).
>
> The problem occurs in getText(). The state.tokenStartCharIndex is -1
> and this is passed to substring which is called in getText(). This
> leads to a StringIndexOutOfBoundsException.
>
> I've included the grammar. There is also a Tree Grammar after this but
> that isn't relevant. There are probably more problems with the grammar
> but at this point I'm only interested in the gUnit errors.
> I've changed some names to remove any company specific information but
> the grammar itself is unchanged.
>
> mvg,
> Jasper
>
>
> p.s. is it bad etiquette to post the whole grammar and tree grammar to
> ask for comments?
>

From will at tribbey.net  Fri Aug 13 08:48:15 2010
From: will at tribbey.net (William Tribbey)
Date: Fri, 13 Aug 2010 11:48:15 -0400
Subject: [antlr-interest] some advice on tracking location in parser rules
Message-ID: <AANLkTik80_qH_VFsk+7g92iO2sH_f2JMjhbWVDk5Vkws@mail.gmail.com>

Hi Everyone,

As a newbie working through my first real antlr project I find myself
wondering what is the
better way to keep track where I have been as I make my way through the
parser rules.
I am using a Java.g file and when I wind up for instance, down in the
statement rule, I would
like to be able to figure out how I got there. I have seen examples in the
reference book that
use boolean flags and scopes to do this. Is there a better way? Return
values on the rules?

Thank you,

Will T.

From jimi at temporal-wave.com  Fri Aug 13 08:56:32 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 13 Aug 2010 08:56:32 -0700
Subject: [antlr-interest] Syntax- highlighter and completition
In-Reply-To: <4C6503B0.9040206@nsn.com>
References: <OF1C70F402.83D84CAB-ONC125777D.003977ED-C125777D.003AABFA@esa.int>	<AANLkTinb0KBF-oFmFuogQMn7TtY6AKX2K2pZZYDpFVUS@mail.gmail.com>
	<4C6503B0.9040206@nsn.com>
Message-ID: <036901cb3b00$1963c9c0$4c2b5d40$@temporal-wave.com>

You can use the Netbeans SDK/Framework to create your own standalone system,
however it is a rather large set of jars. That only matters is space would
be a constraint though. However it saves you the trouble of coding docking
toolbars, editing and so on and you can let someone else maintain all that .

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of "Paul Bouch? (NSN - DE, Berlin)"
> Sent: Friday, August 13, 2010 1:35 AM
> To: ext Andreas Stefik
> Cc: antlr-interest at antlr.org; Nieves.Salor.Moral at esa.int
> Subject: Re: [antlr-interest] Syntax- highlighter and completition
> 
> Hi,
> 
> so this is really interesting. Do you know if the text editing components
are
> available standalone from NetBeans - I heard such a thing?
> 
> BR,
> Paul
> 
> ext Andreas Stefik schrieb:
> > Hi there,
> >
> > Another option you have is to use the NetBeans platform for these
> > editor tasks. Basically, you keep a list of whatever you want (e.g.,
> > what methods have been parsed, what variables, tokens), and you pass
> > them to the platform's APIs specifically designed for parsing,
> > highlighting, etc. All of the threading/highlighting/user interface
> > work is done for you, is commercially scalable, and works extremely
> > well behind the scenes.
> >
> > Like anything, it isn't trivial to do, but the APIs for parsing/code
> > completion/syntax highlighting are pretty straightforward and there
> > are tutorials online on how to do it with ANTLR. Here's one, for
> > example:
> >
> > http://wiki.netbeans.org/Netbeans_Rcp_Antlr_Integration_Index
> >
> > Hope that helps,
> >
> > Andreas Stefik
> >
> > On Thu, Aug 12, 2010 at 5:40 AM,  <Nieves.Salor.Moral at esa.int> wrote:
> >
> >> Helllo!!
> >>
> >> I think this is an old topic, but looking at the list I haven't found
> >> a clear answer to the problem. I am trying to do a system that opens
> >> in a swing panel an specific type file, which follows my specific
> >> grammar and allows its editing.
> >> Hence, I want to add syntax-highlighting and also auto completion to
> >> the file (both in the editing and in the only reading), But also I
> >> should show the syntax tree.
> >>
> >> I have my ANTLR grammar running (pluto.g) and tested with current
> >> output as a flat AST tree. But I am not entirely sure what to do next.
> >>
> >> My first option is to specify as output templates and use directly
> >> from the parser grammar StringTemplate with the output specifying the
> >> colors, font, etc in a kind of HTML similar code and later plug-in in
> >> the swing panel Second option, is to create a Parser Tree and later
> >> on, use the templates Third, forget the parser and just use the
> >> lexer????
> >>
> >> The problem is that the final goal of the system is to create SQL
> >> queries to insert/modify in a DB the information that contains the
> grammar.
> >>
> >> Any outputs are welcome, thanks
> >>
> >>
> >>
> >> Nieves Salor Moral
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-email-addres
> >> s
> >>
> >>
> >>
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From jimi at temporal-wave.com  Fri Aug 13 09:06:01 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 13 Aug 2010 09:06:01 -0700
Subject: [antlr-interest] some advice on tracking location in parser
	rules
In-Reply-To: <AANLkTik80_qH_VFsk+7g92iO2sH_f2JMjhbWVDk5Vkws@mail.gmail.com>
References: <AANLkTik80_qH_VFsk+7g92iO2sH_f2JMjhbWVDk5Vkws@mail.gmail.com>
Message-ID: <036b01cb3b01$6c825d00$45871700$@temporal-wave.com>

Will,

It might be better to step back and ask what it is that you are doing that
makes you think you NEED to know this :-) Generally you will produce things
in your productions that are either impendent of what they are used for, or
are influenced by parameters to the rule, or just return their type (such as
an expression). However, you generally produce an AST first, then start to
walk the tree to do things like code generate or transform etc.

So, what is your task is possibly the better thing to deal with?

Jim 

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of William Tribbey
> Sent: Friday, August 13, 2010 8:48 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] some advice on tracking location in parser rules
> 
> Hi Everyone,
> 
> As a newbie working through my first real antlr project I find myself
> wondering what is the better way to keep track where I have been as I make
> my way through the parser rules.
> I am using a Java.g file and when I wind up for instance, down in the
> statement rule, I would like to be able to figure out how I got there. I
have
> seen examples in the reference book that use boolean flags and scopes to
> do this. Is there a better way? Return values on the rules?
> 
> Thank you,
> 
> Will T.
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From will at tribbey.net  Fri Aug 13 09:21:20 2010
From: will at tribbey.net (William Tribbey)
Date: Fri, 13 Aug 2010 12:21:20 -0400
Subject: [antlr-interest] some advice on tracking location in parser
	rules
In-Reply-To: <036b01cb3b01$6c825d00$45871700$@temporal-wave.com>
References: <AANLkTik80_qH_VFsk+7g92iO2sH_f2JMjhbWVDk5Vkws@mail.gmail.com>
	<036b01cb3b01$6c825d00$45871700$@temporal-wave.com>
Message-ID: <AANLkTi=rn72LNc1UHz_zMtph+mVOVHcKBd-Meaw9Q=c9@mail.gmail.com>

Thanks, Jim.

Hhhhmmmm.

What I have to do is take a java file as input and extract this information
from it:

1) package, class, and import data,
2) each method's name and parameter types,
3) for each method, record the methods it uses, and
4) for each method, record the frequency of the keywords it uses.

I had been attacking this by putting actions into the parser rules.
Would these be better and more easily accomplished by walking
an AST?

Will



On Fri, Aug 13, 2010 at 12:06 PM, Jim Idle <jimi at temporal-wave.com> wrote:

> Will,
>
> It might be better to step back and ask what it is that you are doing that
> makes you think you NEED to know this :-) Generally you will produce things
> in your productions that are either impendent of what they are used for, or
> are influenced by parameters to the rule, or just return their type (such
> as
> an expression). However, you generally produce an AST first, then start to
> walk the tree to do things like code generate or transform etc.
>
> So, what is your task is possibly the better thing to deal with?
>
> Jim
>
> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > bounces at antlr.org] On Behalf Of William Tribbey
> > Sent: Friday, August 13, 2010 8:48 AM
> > To: antlr-interest at antlr.org
> > Subject: [antlr-interest] some advice on tracking location in parser
> rules
> >
> > Hi Everyone,
> >
> > As a newbie working through my first real antlr project I find myself
> > wondering what is the better way to keep track where I have been as I
> make
> > my way through the parser rules.
> > I am using a Java.g file and when I wind up for instance, down in the
> > statement rule, I would like to be able to figure out how I got there. I
> have
> > seen examples in the reference book that use boolean flags and scopes to
> > do this. Is there a better way? Return values on the rules?
> >
> > Thank you,
> >
> > Will T.
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> > email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From stefika at gmail.com  Fri Aug 13 10:58:38 2010
From: stefika at gmail.com (Andreas Stefik)
Date: Fri, 13 Aug 2010 12:58:38 -0500
Subject: [antlr-interest] Syntax- highlighter and completition
In-Reply-To: <036901cb3b00$1963c9c0$4c2b5d40$@temporal-wave.com>
References: <OF1C70F402.83D84CAB-ONC125777D.003977ED-C125777D.003AABFA@esa.int>
	<AANLkTinb0KBF-oFmFuogQMn7TtY6AKX2K2pZZYDpFVUS@mail.gmail.com>
	<4C6503B0.9040206@nsn.com>
	<036901cb3b00$1963c9c0$4c2b5d40$@temporal-wave.com>
Message-ID: <AANLkTim7E+uSXHd95T9rv22nGVjKofb5=ca85e2i5XoW@mail.gmail.com>

Hey there,

Yes, you can use any of the netbeans platform code standalone. As for
the Jar size, this is not entirely correct. The size of the NetBeans
platform apps generated (i.e., what is bundled), is correlated with
the properties you set in your module suite. In other words, if you
include C compilers, java compilers, and all sorts of other goodies
built into netbeans then, yes, your distribution can be a few hundred
megs. If, however, you don't include them (and you shouldn't, if you
don't need them), then the files are not particularly large. I forget
off the top of my head the size of an empty module suite distro, but
it isn't much, for modern software.

Stefik



On Fri, Aug 13, 2010 at 10:56 AM, Jim Idle <jimi at temporal-wave.com> wrote:
> You can use the Netbeans SDK/Framework to create your own standalone system,
> however it is a rather large set of jars. That only matters is space would
> be a constraint though. However it saves you the trouble of coding docking
> toolbars, editing and so on and you can let someone else maintain all that .
>
> Jim
>
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of "Paul Bouch? (NSN - DE, Berlin)"
>> Sent: Friday, August 13, 2010 1:35 AM
>> To: ext Andreas Stefik
>> Cc: antlr-interest at antlr.org; Nieves.Salor.Moral at esa.int
>> Subject: Re: [antlr-interest] Syntax- highlighter and completition
>>
>> Hi,
>>
>> so this is really interesting. Do you know if the text editing components
> are
>> available standalone from NetBeans - I heard such a thing?
>>
>> BR,
>> Paul
>>
>> ext Andreas Stefik schrieb:
>> > Hi there,
>> >
>> > Another option you have is to use the NetBeans platform for these
>> > editor tasks. Basically, you keep a list of whatever you want (e.g.,
>> > what methods have been parsed, what variables, tokens), and you pass
>> > them to the platform's APIs specifically designed for parsing,
>> > highlighting, etc. All of the threading/highlighting/user interface
>> > work is done for you, is commercially scalable, and works extremely
>> > well behind the scenes.
>> >
>> > Like anything, it isn't trivial to do, but the APIs for parsing/code
>> > completion/syntax highlighting are pretty straightforward and there
>> > are tutorials online on how to do it with ANTLR. Here's one, for
>> > example:
>> >
>> > http://wiki.netbeans.org/Netbeans_Rcp_Antlr_Integration_Index
>> >
>> > Hope that helps,
>> >
>> > Andreas Stefik
>> >
>> > On Thu, Aug 12, 2010 at 5:40 AM, ?<Nieves.Salor.Moral at esa.int> wrote:
>> >
>> >> Helllo!!
>> >>
>> >> I think this is an old topic, but looking at the list I haven't found
>> >> a clear answer to the problem. I am trying to do a system that opens
>> >> in a swing panel an specific type file, which follows my specific
>> >> grammar and allows its editing.
>> >> Hence, I want to add syntax-highlighting and also auto completion to
>> >> the file (both in the editing and in the only reading), But also I
>> >> should show the syntax tree.
>> >>
>> >> I have my ANTLR grammar running (pluto.g) and tested with current
>> >> output as a flat AST tree. But I am not entirely sure what to do next.
>> >>
>> >> My first option is to specify as output templates and use directly
>> >> from the parser grammar StringTemplate with the output specifying the
>> >> colors, font, etc in a kind of HTML similar code and later plug-in in
>> >> the swing panel Second option, is to create a Parser Tree and later
>> >> on, use the templates Third, forget the parser and just use the
>> >> lexer????
>> >>
>> >> The problem is that the final goal of the system is to create SQL
>> >> queries to insert/modify in a DB the information that contains the
>> grammar.
>> >>
>> >> Any outputs are welcome, thanks
>> >>
>> >>
>> >>
>> >> Nieves Salor Moral
>> >>
>> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> >> Unsubscribe:
>> >> http://www.antlr.org/mailman/options/antlr-interest/your-email-addres
>> >> s
>> >>
>> >>
>> >>
>> >
>> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> > Unsubscribe:
>> > http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>> >
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>> email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From steel at kryas.com  Fri Aug 13 11:53:36 2010
From: steel at kryas.com (Stanley Steel)
Date: Fri, 13 Aug 2010 12:53:36 -0600
Subject: [antlr-interest] Code Hooks
Message-ID: <AANLkTi=7qPtYAtGMwp3NvHabPG=dU9x_6UpxaS8jiqgp@mail.gmail.com>

Is there a way to specify code hooks for @init and @after.  I would like to
keep my spec clean and not pollute it with code specific to a particular
usage.  Does anybody else verify scope in the tree parser instead of the
regular parser?

From jimi at temporal-wave.com  Fri Aug 13 12:43:23 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 13 Aug 2010 12:43:23 -0700
Subject: [antlr-interest] Syntax- highlighter and completition
In-Reply-To: <AANLkTim7E+uSXHd95T9rv22nGVjKofb5=ca85e2i5XoW@mail.gmail.com>
References: <OF1C70F402.83D84CAB-ONC125777D.003977ED-C125777D.003AABFA@esa.int>	<AANLkTinb0KBF-oFmFuogQMn7TtY6AKX2K2pZZYDpFVUS@mail.gmail.com>	<4C6503B0.9040206@nsn.com>	<036901cb3b00$1963c9c0$4c2b5d40$@temporal-wave.com>
	<AANLkTim7E+uSXHd95T9rv22nGVjKofb5=ca85e2i5XoW@mail.gmail.com>
Message-ID: <038701cb3b1f$ca0dad30$5e290790$@temporal-wave.com>



> -----Original Message-----
> From: Andreas Stefik [mailto:stefika at gmail.com]
> Sent: Friday, August 13, 2010 10:59 AM
> To: Jim Idle
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Syntax- highlighter and completition
> 
> Hey there,
> 
> Yes, you can use any of the netbeans platform code standalone. As for the
> Jar size, this is not entirely correct. 

Yep, it is. Just create a blank Netbeans Platform Application on 6.9 without
anything else and see how much code you need to package it as a single jar
with dependencies: 7,329KB Then add a few modules!

> The size of the NetBeans platform apps
> generated (i.e., what is bundled), is correlated with the properties you
set in
> your module suite. In other words, if you include C compilers, java
compilers,
> and all sorts of other goodies built into netbeans then, yes, your
distribution
> can be a few hundred megs. If, however, you don't include them (and you
> shouldn't, if you don't need them), then the files are not particularly
large. I
> forget off the top of my head the size of an empty module suite distro,
but it
> isn't much, for modern software.

Ah, and therein lies the rub. Why does 'modern' software need to be so
'big'? No need to answer that ;-) So, we are talking about personal opinion
as to what is 'big' and I am from an era where a 300K shared runtime library
in C would be considered pretty huge :-)

Now, I personally think Netbeans is really good; I worked on the integration
of ANTLR/JavaFX  with some of the Netbeans team and I use Netbeans over
anything else as a Java IDE. But there is no getting away from the fact that
all these Java platforms require lots of jars and dependencies and the
memory footprint can be a problem. 

So, as I said, if such things are not a problem for your environment then it
matters little, but for instance I have a project where I would have liked
to use it, but the embedded device just does not have enough storage to
deliver it  to the client for instance.

Jim 


> 
> Stefik
> 
> 
> 
> On Fri, Aug 13, 2010 at 10:56 AM, Jim Idle <jimi at temporal-wave.com> wrote:
> > You can use the Netbeans SDK/Framework to create your own standalone
> > system, however it is a rather large set of jars. That only matters is
> > space would be a constraint though. However it saves you the trouble
> > of coding docking toolbars, editing and so on and you can let someone
else
> maintain all that .
> >
> > Jim
> >
> >> -----Original Message-----
> >> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> >> bounces at antlr.org] On Behalf Of "Paul Bouch? (NSN - DE, Berlin)"
> >> Sent: Friday, August 13, 2010 1:35 AM
> >> To: ext Andreas Stefik
> >> Cc: antlr-interest at antlr.org; Nieves.Salor.Moral at esa.int
> >> Subject: Re: [antlr-interest] Syntax- highlighter and completition
> >>
> >> Hi,
> >>
> >> so this is really interesting. Do you know if the text editing
> >> components
> > are
> >> available standalone from NetBeans - I heard such a thing?
> >>
> >> BR,
> >> Paul
> >>
> >> ext Andreas Stefik schrieb:
> >> > Hi there,
> >> >
> >> > Another option you have is to use the NetBeans platform for these
> >> > editor tasks. Basically, you keep a list of whatever you want
> >> > (e.g., what methods have been parsed, what variables, tokens), and
> >> > you pass them to the platform's APIs specifically designed for
> >> > parsing, highlighting, etc. All of the threading/highlighting/user
> >> > interface work is done for you, is commercially scalable, and works
> >> > extremely well behind the scenes.
> >> >
> >> > Like anything, it isn't trivial to do, but the APIs for
> >> > parsing/code completion/syntax highlighting are pretty
> >> > straightforward and there are tutorials online on how to do it with
> >> > ANTLR. Here's one, for
> >> > example:
> >> >
> >> > http://wiki.netbeans.org/Netbeans_Rcp_Antlr_Integration_Index
> >> >
> >> > Hope that helps,
> >> >
> >> > Andreas Stefik
> >> >
> >> > On Thu, Aug 12, 2010 at 5:40 AM, ?<Nieves.Salor.Moral at esa.int> wrote:
> >> >
> >> >> Helllo!!
> >> >>
> >> >> I think this is an old topic, but looking at the list I haven't
> >> >> found a clear answer to the problem. I am trying to do a system
> >> >> that opens in a swing panel an specific type file, which follows
> >> >> my specific grammar and allows its editing.
> >> >> Hence, I want to add syntax-highlighting and also auto completion
> >> >> to the file (both in the editing and in the only reading), But
> >> >> also I should show the syntax tree.
> >> >>
> >> >> I have my ANTLR grammar running (pluto.g) and tested with current
> >> >> output as a flat AST tree. But I am not entirely sure what to do
next.
> >> >>
> >> >> My first option is to specify as output templates and use directly
> >> >> from the parser grammar StringTemplate with the output specifying
> >> >> the colors, font, etc in a kind of HTML similar code and later
> >> >> plug-in in the swing panel Second option, is to create a Parser
> >> >> Tree and later on, use the templates Third, forget the parser and
> >> >> just use the lexer????
> >> >>
> >> >> The problem is that the final goal of the system is to create SQL
> >> >> queries to insert/modify in a DB the information that contains the
> >> grammar.
> >> >>
> >> >> Any outputs are welcome, thanks
> >> >>
> >> >>
> >> >>
> >> >> Nieves Salor Moral
> >> >>
> >> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> >> Unsubscribe:
> >> >> http://www.antlr.org/mailman/options/antlr-interest/your-email-add
> >> >> res
> >> >> s
> >> >>
> >> >>
> >> >>
> >> >
> >> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> > Unsubscribe:
> >> > http://www.antlr.org/mailman/options/antlr-interest/your-email-addr
> >> > ess
> >> >
> >>
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-
> >> email-address
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >


From jimi at temporal-wave.com  Fri Aug 13 12:48:17 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 13 Aug 2010 12:48:17 -0700
Subject: [antlr-interest] Code Hooks
In-Reply-To: <AANLkTi=7qPtYAtGMwp3NvHabPG=dU9x_6UpxaS8jiqgp@mail.gmail.com>
References: <AANLkTi=7qPtYAtGMwp3NvHabPG=dU9x_6UpxaS8jiqgp@mail.gmail.com>
Message-ID: <038901cb3b20$798b0fa0$6ca12ee0$@temporal-wave.com>

Do this with source code control. I create a clean unadorned grammar (other
than if I have no choice but to have semantic action code) as the base point
for everything and always change that. Then I integrate (using perforce
terminology) to all my other specific use targets.

Generally, I do nothing in the parser but produce an AST and if feasible,
build a symbol table(s). Then I do everything using tree walking - I
recommend this approach generally and in many cases it is all you can do
because only multiple tree walks distinguish what you parsed (such as C++
for instance).

There are some applications where the info you want from the parser is
available as you go and trivial to gather, but personally I would still use
an AST walk because requirements have a habit of becoming more complicated
overtime.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Stanley Steel
> Sent: Friday, August 13, 2010 11:54 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Code Hooks
> 
> Is there a way to specify code hooks for @init and @after.  I would like
to
> keep my spec clean and not pollute it with code specific to a particular
usage.
> Does anybody else verify scope in the tree parser instead of the regular
> parser?
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From jimi at temporal-wave.com  Fri Aug 13 12:54:23 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 13 Aug 2010 12:54:23 -0700
Subject: [antlr-interest] some advice on tracking location in parser
	rules
In-Reply-To: <AANLkTi=rn72LNc1UHz_zMtph+mVOVHcKBd-Meaw9Q=c9@mail.gmail.com>
References: <AANLkTik80_qH_VFsk+7g92iO2sH_f2JMjhbWVDk5Vkws@mail.gmail.com>	<036b01cb3b01$6c825d00$45871700$@temporal-wave.com>
	<AANLkTi=rn72LNc1UHz_zMtph+mVOVHcKBd-Meaw9Q=c9@mail.gmail.com>
Message-ID: <038b01cb3b21$53da0df0$fb8e29d0$@temporal-wave.com>

Will,

 

The answer is 'probably' ;-) While what you ask for here can probably be
done in the parser, it some becomes complicated to manage (as you are
seeing). The next thing you know, you will be asked to track symbol usage,
then something else and so on. So generally, I would use an AST anyway.

 

However, you probably just need a global symbol table that gets a new entry
for each method you enter and any other scoping points that you need. The
current active symbol table is where you add references and increment counts
and so on. At the end of the parse (or better yet, tree walk),you will have
a set of objects that contain the information you want. I think that Ter has
some information on building symbol tables in the Wiki somewhere, as part of
the material for his University courses. yep:
http://www.antlr.org/wiki/display/CS652/Symbol+tables 

 

It will probably help you to see the wood for the trees. You can also pass
in parameters to rules which can pass on those parameters of course.

 

Jim

 

From: William Tribbey [mailto:will at tribbey.net] 
Sent: Friday, August 13, 2010 9:21 AM
To: Jim Idle
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] some advice on tracking location in parser
rules

 

Thanks, Jim.

 

Hhhhmmmm.

 

What I have to do is take a java file as input and extract this information

from it:

 

1) package, class, and import data,

2) each method's name and parameter types,

3) for each method, record the methods it uses, and

4) for each method, record the frequency of the keywords it uses.

 

I had been attacking this by putting actions into the parser rules.

Would these be better and more easily accomplished by walking 

an AST? 

 

 

 

Will

 

 

On Fri, Aug 13, 2010 at 12:06 PM, Jim Idle <jimi at temporal-wave.com> wrote:

Will,

It might be better to step back and ask what it is that you are doing that
makes you think you NEED to know this :-) Generally you will produce things
in your productions that are either impendent of what they are used for, or
are influenced by parameters to the rule, or just return their type (such as
an expression). However, you generally produce an AST first, then start to
walk the tree to do things like code generate or transform etc.

So, what is your task is possibly the better thing to deal with?

Jim


> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of William Tribbey
> Sent: Friday, August 13, 2010 8:48 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] some advice on tracking location in parser rules
>
> Hi Everyone,
>
> As a newbie working through my first real antlr project I find myself
> wondering what is the better way to keep track where I have been as I make
> my way through the parser rules.
> I am using a Java.g file and when I wind up for instance, down in the
> statement rule, I would like to be able to figure out how I got there. I
have
> seen examples in the reference book that use boolean flags and scopes to
> do this. Is there a better way? Return values on the rules?
>
> Thank you,
>
> Will T.
>

> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address

 


From jschrod at acm.org  Fri Aug 13 17:13:47 2010
From: jschrod at acm.org (Joachim Schrod)
Date: Sat, 14 Aug 2010 02:13:47 +0200
Subject: [antlr-interest] Best practice to handle Lexer backtracking demand
Message-ID: <i44n3r$s4s$1@dough.gmane.org>

Hi,

So today was my 1st ANTLR day, having used PCCTS more than a 15
years ago. So please bear with me; I'm proficient with other
scanner/parser tools and formal language theory, but not with ANTLR.

I learned, from searching the mailing list, that the lexer does not
support backtracking. I.e., the token specification must be
prefix-free. (I didn't find that information in the reference book,
btw. It cost me quite a few hours to discover that it's the root
cause of my problem and dig out the relevant information.) What I
did not found, even after several hours of Google and mailing list
searches, is some pointers for ANTLR best practice how to specify a
lexical grammar for a language where tokens are not prefix-free.

E.g., let's suppose I have the grammar

  name : PRENAME ? text ;
  text : CHAR+ ;

  PRENAME : 'prename' ;
  CHAR : . ;

which should accept the input string "pr", but doesn't, owing to
the missing lexer backtracking. How is one supposed to formulate
such a grammar in ANTLR? (V3 if it matters.)

Having lex token defs for all chars of all keywords and
constructing the keywords in the parser? After all, the parser
knows how to backtrack. But that's going to be ugly and not really
maintainable in the long run.

Creating prefix tokens for all keywords? I.e., having additional
tokens for 'prenam', 'prena', 'pren', 'pren', and 'pr'? Ugly as
well, IMNSHO.

Using syntactic predicates? I tried that but did not succeed.
AFAIU, they are a parser feature, but I'd need them in the lexer.

If you can point me to a text that explains the best practice for
this (IMHO common) use case, I'd be very happy.

Thanks very much in advance for helping out a newbie to ANTLR,

	Joachim

PS: Part of my confusion was the text of "What is the intended
behavior of the lexer?" at
http://www.antlr.org/wiki/pages/viewpage.action?pageId=4882470. It
implies that the lexer is backtracking and that is really confusing.

-- 
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
Joachim Schrod				Email: jschrod at acm.org
Roedermark, Germany


From gerald at certiv.net  Fri Aug 13 18:12:29 2010
From: gerald at certiv.net (Gerald Rosenberg)
Date: Fri, 13 Aug 2010 18:12:29 -0700
Subject: [antlr-interest] Best practice to handle Lexer backtracking
	demand
In-Reply-To: <i44n3r$s4s$1@dough.gmane.org>
References: <i44n3r$s4s$1@dough.gmane.org>
Message-ID: <4C65ED7D.50603@certiv.net>



------ Original Message (Saturday, August 14, 2010 2:13:47 
AM) From: Joachim Schrod ------
Subject: [antlr-interest] Best practice to handle Lexer backtracking demand

Doubt that there is any one true best practice.  A truism that may help 
is "try not to do too much in the lexer."

Given that your valid input text is pretty much defined by

>    CHAR : . ;
>

likely best to defer key word matching to the parser

>    name : n=text ( { helper.isKeyword($n) }? text )?  ;
>    text : CHAR+ ;
>
>    CHAR : . ;
and provide for the helper in the parser::members block.
> Using syntactic predicates? I tried that but did not succeed.
> AFAIU, they are a parser feature, but I'd need them in the lexer.
No, they work in the lexer as well.  It is just that the lexer defaults 
effectively k=1, so the predicated alternatives need to be specified.  
Or, use an embedded options block to push up the value of k.

From jschrod at acm.org  Fri Aug 13 18:41:08 2010
From: jschrod at acm.org (Joachim Schrod)
Date: Sat, 14 Aug 2010 03:41:08 +0200
Subject: [antlr-interest] Best practice to handle Lexer backtracking
	demand
In-Reply-To: <4C65ED7D.50603@certiv.net>
References: <i44n3r$s4s$1@dough.gmane.org> <4C65ED7D.50603@certiv.net>
Message-ID: <i44s7l$9l6$1@dough.gmane.org>

Gerald Rosenberg wrote:
> 
> 
> Doubt that there is any one true best practice.  A truism that may help 
> is "try not to do too much in the lexer."

Well, at the moment it looks more like "do nothing in the lexer
except deliver one char at the time", which is a quite interesting
interpretation of "not too much"... ;-)

> Given that your valid input text is pretty much defined by
> 
>>    CHAR : . ;
> 
> likely best to defer key word matching to the parser
> 
>>    name : n=text ( { helper.isKeyword($n) }? text )?  ;
>>    text : CHAR+ ;
>>
>>    CHAR : . ;
> and provide for the helper in the parser::members block.

That won't work: For example, CHAR+ would match 'prenameabc' and
the keyword would not be detected. And if I have a five char
keyword and a three char keyword, I can't see how to construct that
`collect' text token at all: If it has five chars, the three char
keyword will never match due to the longer five char text token; if
it has three chars, I have the backtracking problem again if the
input matches the first 4 chars of the keyword.

Please note: There are no delimiting chars that helps to detect
that `keyword'. I.e., no white space or such.

And, in case it's not clear, the example was made up by me to have
a minimal example to discuss. The real DSL is simple, but not as
simple: I have several marker strings that delimit character
sequences w/o any marker string in them, need to determine just
that text between the markers, and need to check if the marker
strings come in the right order and what is between them. I.e.,
lexical filters are not sufficient, I need input validation as well.

>> Using syntactic predicates? I tried that but did not succeed.
>> AFAIU, they are a parser feature, but I'd need them in the lexer.
> No, they work in the lexer as well.  It is just that the lexer defaults 
> effectively k=1, so the predicated alternatives need to be specified.  
> Or, use an embedded options block to push up the value of k.

How does one do this?

And thanks for the quick answer, though I don't see how it helps me
right now.

	Joachim

-- 
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
Joachim Schrod				Email: jschrod at acm.org
Roedermark, Germany


From gerald at certiv.net  Fri Aug 13 19:04:52 2010
From: gerald at certiv.net (Gerald Rosenberg)
Date: Fri, 13 Aug 2010 19:04:52 -0700
Subject: [antlr-interest] Best practice to handle Lexer
	backtracking	demand
In-Reply-To: <i44s7l$9l6$1@dough.gmane.org>
References: <i44n3r$s4s$1@dough.gmane.org> <4C65ED7D.50603@certiv.net>
	<i44s7l$9l6$1@dough.gmane.org>
Message-ID: <4C65F9C4.5070305@certiv.net>

  ------ Original Message (Saturday, August 14, 2010 3:41:08 
AM) From: Joachim Schrod ------
Subject: Re: [antlr-interest] Best practice to handle Lexer backtracking
demand

> And, in case it's not clear, the example was made up by me to have
> a minimal example to discuss. The real DSL is simple, but not as
> simple:
Going to have to work on my mind-reading...
> I have several marker strings that delimit character
> sequences w/o any marker string in them, need to determine just
> that text between the markers, and need to check if the marker
> strings come in the right order and what is between them. I.e.,
> lexical filters are not sufficient, I need input validation as well.
Please post an example -- input and grammar -- that properly matches the 
complexity of your problem.

From jschrod at acm.org  Sat Aug 14 01:17:05 2010
From: jschrod at acm.org (Joachim Schrod)
Date: Sat, 14 Aug 2010 10:17:05 +0200
Subject: [antlr-interest] Best practice to handle Lexer backtracking
	demand
In-Reply-To: <4C65F9C4.5070305@certiv.net>
References: <i44n3r$s4s$1@dough.gmane.org>
	<4C65ED7D.50603@certiv.net>	<i44s7l$9l6$1@dough.gmane.org>
	<4C65F9C4.5070305@certiv.net>
Message-ID: <i45je2$436$1@dough.gmane.org>

Gerald Rosenberg wrote:
>   ------ Original Message (Saturday, August 14, 2010 3:41:08 
> AM) From: Joachim Schrod ------
> Subject: Re: [antlr-interest] Best practice to handle Lexer backtracking
> demand
> 
>> And, in case it's not clear, the example was made up by me to have
>> a minimal example to discuss. The real DSL is simple, but not as
>> simple:
> Going to have to work on my mind-reading...
>> I have several marker strings that delimit character
>> sequences w/o any marker string in them, need to determine just
>> that text between the markers, and need to check if the marker
>> strings come in the right order and what is between them. I.e.,
>> lexical filters are not sufficient, I need input validation as well.
> Please post an example -- input and grammar -- that properly matches the 
> complexity of your problem.

Input: aaaaXXXXbbbb wwwXXX ddddYYYzzzz

XXXX is the start marker, YYY is the end marker.
A non LL(1)-prefix of the marker(s) (here `XXX') may appear in between.
There is no separating char between markers and surrounding text.
Markers don't start with the same char.

There are ca. 20 start and 20 end markers, all of them different.
(This is a data file that must be analyzed.)

I need to detect (and validate) space separated words between the
markers.

With lexer backtracking, the grammar would read

----------
input : text
	START1 word (WS word)* END1
	word WS word
	START2 word (WS word)* END2
	text
	START1 word (WS word)* END1
	EOF
	;
text : (WS|NONWS)* ;
word : NONWS+ ;

START1 : 'XXXX' ;
END1 : 'YYY' ;
START2 : 'HHHH' ;
END2 : 'MMMM' ;
fragment WHITE : ' ' | '\n' ;
WS : WHITE ;
NONWS : ~WHITE ;
----------

with more START and END definitions, of course. And input is
longer, as it defines the whole data file structure, e.g., with
some alternatives in marker order or such.

Defining word as a lexer token is not possible as it would match
'aaaXXXXbbbb' and would be the longest match. Some different
lexical grammar? There is no selection of characters that are
specific to the markers. The definition of a word is really `a
sequence of non-whitespace characters that is followed by one of
the 40+ marker strings or a whitespace'. Using lexical filters is
not possible either; I analyze and validate the complete data file.

I hope this makes it more clear why I asked for the best practice
for lexical backtracking. It's at the heart of the grammar above
and was the minimal example that I came by that explains my problem
on technical level.

	Joachim

PS: I don't construct a tree, there are actions triggered by the
markers, the words are the parameters.

-- 
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
Joachim Schrod				Email: jschrod at acm.org
Roedermark, Germany


From stefika at gmail.com  Sat Aug 14 05:48:35 2010
From: stefika at gmail.com (Andreas Stefik)
Date: Sat, 14 Aug 2010 07:48:35 -0500
Subject: [antlr-interest] Syntax- highlighter and completition
In-Reply-To: <038701cb3b1f$ca0dad30$5e290790$@temporal-wave.com>
References: <OF1C70F402.83D84CAB-ONC125777D.003977ED-C125777D.003AABFA@esa.int>
	<AANLkTinb0KBF-oFmFuogQMn7TtY6AKX2K2pZZYDpFVUS@mail.gmail.com>
	<4C6503B0.9040206@nsn.com>
	<036901cb3b00$1963c9c0$4c2b5d40$@temporal-wave.com>
	<AANLkTim7E+uSXHd95T9rv22nGVjKofb5=ca85e2i5XoW@mail.gmail.com>
	<038701cb3b1f$ca0dad30$5e290790$@temporal-wave.com>
Message-ID: <AANLkTineGaQG_6NCPQ0kwj4mr_L6Yv3CsApEFSJ5Zt_s@mail.gmail.com>

>>
>> Yes, you can use any of the netbeans platform code standalone. As for the
>> Jar size, this is not entirely correct.
>
> Yep, it is. Just create a blank Netbeans Platform Application on 6.9 without
> anything else and see how much code you need to package it as a single jar
> with dependencies: 7,329KB Then add a few modules!
>

I created a blank module suite and turned off all dependencies except
harness and platform, which I imagine most folks include. If you
create a zip distribution or installer for your application, it is a
little larger (13k kb on my mac). I really don't think that's very
large, but tomatoes (different pronunciation, tomatoes), and fair
enough. However, NB platform apps can also be distributed as plugins,
which may actually work well in this person's case, since they are
creating editors/parsers/ and the like. I created a module in my
application and created the NBM files for a grand total of --- 4
kilobytes. This is not large.

So, I understand your point, but I don't think I was being
unreasonable. You can create NB platform apps that distribute in very
small packages, depending upon your specific application requirements.
If you need the full power of netbeans, with all dependencies, as a
standalone package, your distribution is huge (about 200 megs on our
system). If you have a small code base that works as an additional
editor/parser in the environment, then your distro is very small.

Stefik

From gerald at certiv.net  Sat Aug 14 10:57:14 2010
From: gerald at certiv.net (Gerald Rosenberg)
Date: Sat, 14 Aug 2010 10:57:14 -0700
Subject: [antlr-interest] Best practice to handle Lexer
	backtracking	demand
In-Reply-To: <i45je2$436$1@dough.gmane.org>
References: <i44n3r$s4s$1@dough.gmane.org>	<4C65ED7D.50603@certiv.net>	<i44s7l$9l6$1@dough.gmane.org>	<4C65F9C4.5070305@certiv.net>
	<i45je2$436$1@dough.gmane.org>
Message-ID: <4C66D8FA.90108@certiv.net>


------ Original Message (Saturday, August 14, 2010 10:17:05 
AM) From: Joachim Schrod ------
Subject: Re: [antlr-interest] Best practice to handle Lexer backtracking
demand
>
> Input: aaaaXXXXbbbb wwwXXX ddddYYYzzzz
>
How is XXXX guaranteed to be unambiguous with any other fragment of 
aaaaXXXXbbbb?  That is, how can you be sure that a fragment like aaaX or 
XXXXb will never match a different start marker.  Is there a case 
distinction, as implied, or something more interesting?  Is the 
distinction the same for the end marker?

> XXXX is the start marker, YYY is the end marker.
> A non LL(1)-prefix of the marker(s) (here `XXX') may appear in between.
> There is no separating char between markers and surrounding text.
> Markers don't start with the same char.
>
> There are ca. 20 start and 20 end markers, all of them different.
> (This is a data file that must be analyzed.)
>
> I need to detect (and validate) space separated words between the
> markers.
>
> With lexer backtracking, the grammar would read
>
> ----------
> input : text
> 	START1 word (WS word)* END1
> 	word WS word
> 	START2 word (WS word)* END2
> 	text
> 	START1 word (WS word)* END1
> 	EOF
> 	;
> text : (WS|NONWS)* ;
> word : NONWS+ ;
>
> START1 : 'XXXX' ;
> END1 : 'YYY' ;
> START2 : 'HHHH' ;
> END2 : 'MMMM' ;
> fragment WHITE : ' ' | '\n' ;
> WS : WHITE ;
> NONWS : ~WHITE ;
> ----------
>
> with more START and END definitions, of course. And input is
> longer, as it defines the whole data file structure, e.g., with
> some alternatives in marker order or such.
>
> Defining word as a lexer token is not possible as it would match
> 'aaaXXXXbbbb' and would be the longest match. Some different
> lexical grammar? There is no selection of characters that are
> specific to the markers. The definition of a word is really `a
> sequence of non-whitespace characters that is followed by one of
> the 40+ marker strings or a whitespace'. Using lexical filters is
> not possible either; I analyze and validate the complete data file.
>
> I hope this makes it more clear why I asked for the best practice
> for lexical backtracking. It's at the heart of the grammar above
> and was the minimal example that I came by that explains my problem
> on technical level.
>
> 	Joachim
>
> PS: I don't construct a tree, there are actions triggered by the
> markers, the words are the parameters.
>


-- 

Gerald B. Rosenberg, Esq.
NewTechLaw
260 Sheridan Ave., Suite 208
Palo Alto, CA 94306-2009
650.325.2100 (office) / 650.703.1724 (cell)
650.325.2107 (facsimile)

www.newtechlaw.com

CONFIDENTIALITY NOTICE: This email message (including any attachments) 
is being sent by an attorney,
is for the sole use of the intended recipient, and may contain 
confidential and privileged information.
Any unauthorized review, use, disclosure or distribution is prohibited. 
If you are not the intended
recipient, please contact the sender immediately by reply email and 
delete all copies of this message
and any attachments without retaining a copy.


From sadie at kind.ocn.ne.jp  Sun Aug 15 01:02:17 2010
From: sadie at kind.ocn.ne.jp (sunao furukawa)
Date: Sun, 15 Aug 2010 17:02:17 +0900
Subject: [antlr-interest] Question problem constant value?
Message-ID: <6A763C04AC1247A29BD9F585BB5130FB@sunaoPC>

Hello,

My grammar file is improved one by one.
Constant 'b' is used by the rule level_symbol.
I want to use variable name b.
But, variable name b collides with constant 'b'.
variable name b is red letter when debugging.
Please teach the way not to collide constant 'b'.

input text when debugging

primitive mux (y, a, b, sel);
 output y;
 input sel, a, b;
 table 
 // a b sel : y
  0 ? 0 : 0; 
  1 ? 0 : 1; 
  ? 0 1 : 0; 
  ? 1 1 : 1; 
 endtable
endprimitive

Thanks
-------------- next part --------------
A non-text attachment was scrubbed...
Name: veriloghdl2.g
Type: application/octet-stream
Size: 27304 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20100815/ab3aba94/attachment.obj 

From jschrod at acm.org  Sun Aug 15 01:45:15 2010
From: jschrod at acm.org (Joachim Schrod)
Date: Sun, 15 Aug 2010 10:45:15 +0200
Subject: [antlr-interest] Best practice to handle Lexer backtracking
	demand
In-Reply-To: <4C66D8FA.90108@certiv.net>
References: <i44n3r$s4s$1@dough.gmane.org>	<4C65ED7D.50603@certiv.net>	<i44s7l$9l6$1@dough.gmane.org>	<4C65F9C4.5070305@certiv.net>	<i45je2$436$1@dough.gmane.org>
	<4C66D8FA.90108@certiv.net>
Message-ID: <i489er$76p$1@dough.gmane.org>

Gerald Rosenberg wrote:
> 
>> Input: aaaaXXXXbbbb wwwXXX ddddYYYzzzz
>>
> How is XXXX guaranteed to be unambiguous with any other fragment of 
> aaaaXXXXbbbb?  That is, how can you be sure that a fragment like aaaX or 
> XXXXb will never match a different start marker.

The data generating service guarantees it. (It escapes characters
if any complete marker substring happens to be in the data.)

> Is there a case 
> distinction, as implied, or something more interesting?  Is the 
> distinction the same for the end marker?

No and no. The markers are strings like `prenames', `prenamee',
`surnames', etc. That's why I used that example in my original email.

	Joachim

-- 
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
Joachim Schrod				Email: jschrod at acm.org
Roedermark, Germany


From gerald at certiv.net  Sun Aug 15 08:52:42 2010
From: gerald at certiv.net (Gerald Rosenberg)
Date: Sun, 15 Aug 2010 08:52:42 -0700
Subject: [antlr-interest] Best practice to handle Lexer
	backtracking	demand
In-Reply-To: <19559.43124.464645.233413@puma.r.npc.de>
References: <i44n3r$s4s$1@dough.gmane.org>	<4C65ED7D.50603@certiv.net>	<i44s7l$9l6$1@dough.gmane.org>	<4C65F9C4.5070305@certiv.net>	<i45je2$436$1@dough.gmane.org>	<4C66D8FA.90108@certiv.net>
	<19559.43124.464645.233413@puma.r.npc.de>
Message-ID: <4C680D4A.6060208@certiv.net>

  The attached grammar illustrates two different patterns that could 
work to identify the markers.

However, there is an open question about whether a valid marker can 
appear without prefix, suffix, or any escaped characters).  Since it is 
not clear what would be valid, I have left the grammar as an incomplete 
example.



------ Original Message (Sunday, August 15, 2010 10:42:28 
AM) From: Joachim Schrod ------
Subject: Re: [antlr-interest] Best practice to handle Lexer backtracking 
demand
> Gerald Rosenberg writes:
>> How is XXXX guaranteed to be unambiguous with any other fragment of
>> aaaaXXXXbbbb?  That is, how can you be sure that a fragment like aaaX or
>> XXXXb will never match a different start marker.
> The data generating service guarantees it. (It escapes characters if
> any complete marker substring happens to be in the data.)
>
>> Is there a case distinction, as implied, or something more
>> interesting? Is the distinction the same for the end marker?
> No and no. The markers are strings like `prenames', `prenamee',
> `surnames', etc.
>
> 	Joachim
>


-- 

Gerald B. Rosenberg, Esq.
NewTechLaw
260 Sheridan Ave., Suite 208
Palo Alto, CA 94306-2009
650.325.2100 (office) / 650.703.1724 (cell)
650.325.2107 (facsimile)

www.newtechlaw.com

CONFIDENTIALITY NOTICE: This email message (including any attachments) 
is being sent by an attorney,
is for the sole use of the intended recipient, and may contain 
confidential and privileged information.
Any unauthorized review, use, disclosure or distribution is prohibited. 
If you are not the intended
recipient, please contact the sender immediately by reply email and 
delete all copies of this message
and any attachments without retaining a copy.
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: test.g
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20100815/02d29b64/attachment.pl 
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: test.txt
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20100815/02d29b64/attachment.txt 

From cummings at kjchome.homeip.net  Sun Aug 15 15:27:26 2010
From: cummings at kjchome.homeip.net (Kevin J. Cummings)
Date: Sun, 15 Aug 2010 18:27:26 -0400
Subject: [antlr-interest] Question problem constant value?
In-Reply-To: <6A763C04AC1247A29BD9F585BB5130FB@sunaoPC>
References: <6A763C04AC1247A29BD9F585BB5130FB@sunaoPC>
Message-ID: <4C6869CE.2060206@kjchome.homeip.net>

On 08/15/2010 04:02 AM, sunao furukawa wrote:
> Hello,
> 
> My grammar file is improved one by one.
> Constant 'b' is used by the rule level_symbol.
> I want to use variable name b.
> But, variable name b collides with constant 'b'.
> variable name b is red letter when debugging.
> Please teach the way not to collide constant 'b'.

Sunao,
	This is the classic "keyword" vs "reserved word" problem.
If you wish for your keywords to be available as identifiers, you need
to include them in your simple_identifier rule.

I'd have a keyword rule:

keyword : 'b'
	;

and then


Something like:

simple_identifier: ALPHA
		 | ALPHANUM
		 | keyword
		 ;

BTW, this really is a FAQ and has been answered many times on this email
list.  Check out the archives listed on the wiki page.

> input text when debugging
> 
> primitive mux (y, a, b, sel);
> output y;
> input sel, a, b;
> table // a b sel : y
>  0 ? 0 : 0;  1 ? 0 : 1;  ? 0 1 : 0;  ? 1 1 : 1; endtable
> endprimitive
> 
> Thanks

-- 
Kevin J. Cummings
kjchome at rcn.com
cummings at kjchome.homeip.net
cummings at kjc386.framingham.ma.us
Registered Linux User #1232 (http://counter.li.org)

From Enrique.PradosValiente at reale.es  Sun Aug 15 23:23:12 2010
From: Enrique.PradosValiente at reale.es (Prados Valiente Enrique)
Date: Mon, 16 Aug 2010 08:23:12 +0200
Subject: [antlr-interest] ANTLR v3 C# Code generator and Runtime library
In-Reply-To: <931DCC17C6D7A849AEE684BF5B13E199EFF33E@BLPOSTIN.reale.net>
References: <20100803124959.GB3833@adel.loria.fr><01ed01cb3329$1663b520$432b1f60$@temporal-wave.com><20100804073335.GA2950@adel.loria.fr><031801cb33fc$8d91aa20$a8b4fe60$@temporal-wave.com><20100805085555.GA3229@adel.loria.fr><931DCC17C6D7A849AEE684BF5B13E199EFF336@BLPOSTIN.reale.net>
	<AANLkTikWb7Ha9kJhEEdWbq0Pmu3GzhDzH3Btnbx66Nhb@mail.gmail.com>
	<931DCC17C6D7A849AEE684BF5B13E199EFF33E@BLPOSTIN.reale.net>
Message-ID: <931DCC17C6D7A849AEE684BF5B13E199EFF36D@BLPOSTIN.reale.net>

Hi all, misters,

I need SQL Parser -for Oracle- in C#.

Any sample application in .NET C# using AntLR ?

Any good step by step Guide for use AntLR with C# ??





Better with sample application , and source code.

 

Thanks in advanced.

 


From azamir at azamir.de  Sun Aug 15 23:40:07 2010
From: azamir at azamir.de (Frederic Beister)
Date: Mon, 16 Aug 2010 08:40:07 +0200
Subject: [antlr-interest] Lexer Rule matching member variable (Java)
Message-ID: <4C68DD47.6020603@azamir.de>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hello,

I want to write an ANTLR-Lexer and -Parser for a Literate Programming
language. The idea is to embed code fragments in various languages in a
LaTeX document and generate source files on-the-fly.

The languages allows to change the special character used to denote the
beginning of a code snippet and the special character used inside these
snippets to denote inclusion of other snippets. This is needed because
some "guest"-languages might need a pre-defined special character
themselves.

The special character can be changed anywhere in the source text by
using <OLDSPECIAL>=<NEWSPECIAL> where <OLDSPACIAL> is the old special
character and <NEWSPECIAL> is the new special character that should be
active after that instruction.

My idea was to modify the lexer such that it has a member variable "char
cur_special" that is set to the current special character and match
against it in a rule

"fragment SCHAR : cur_special"

such that the token stream abstracts from the different possible special
characters.

At the moment, the only way I see to accomplish this is to manually
modify the generated lexer in many places.

Is there perhaps a built-in functionality in ANTLR 3.2 i could use? I
couldn't find anything in the archives searching for "lexer match
member". I really don't need a full how-to but a gentle nudge in the
correct direction.

Thanks in advance
Frederic

P.S.
Sorry if this is/becomes a repost. My first mail didn't make it through
- - perhaps because it had a PGP signature attachment


-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.10 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAkxo3UcACgkQOBEXShUwZO0hagCeNY82qTh5wRk7SmvCAxB9oAfk
1RwAni+IC77x5IBHbw2Tp4SQ4qv1RIS7
=U+NM
-----END PGP SIGNATURE-----

From a.moderacja at gmail.com  Mon Aug 16 01:10:48 2010
From: a.moderacja at gmail.com (Borneq)
Date: Mon, 16 Aug 2010 10:10:48 +0200
Subject: [antlr-interest] I search simple compiler
Message-ID: <AANLkTikA-WegNBitNbyGxZH_XJ4kanK1rWedxjT74fka@mail.gmail.com>

I search simple (preferably as small as possible) compiler with
sources which uses ANTLR

From Enrique.PradosValiente at reale.es  Mon Aug 16 03:57:36 2010
From: Enrique.PradosValiente at reale.es (Prados Valiente Enrique)
Date: Mon, 16 Aug 2010 12:57:36 +0200
Subject: [antlr-interest] Sql Parser
In-Reply-To: <AANLkTimapuKzxL06HFY=srrczDVwjNb=m4qSfseRHG5+@mail.gmail.com>
References: <AANLkTimapuKzxL06HFY=srrczDVwjNb=m4qSfseRHG5+@mail.gmail.com>
Message-ID: <931DCC17C6D7A849AEE684BF5B13E199EFF380@BLPOSTIN.reale.net>

Hi all,

I have this plsql3.g file (I get in antlr.org).

I have Visual Studio 2008 + .net frk 3.5.

Now, how can I generate sql parser, that I can use in my project C# ?? 

Please, any quickly guide step by step. 

Thanks in advanced.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: PLSQL3.g
Type: application/octet-stream
Size: 41702 bytes
Desc: PLSQL3.g
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20100816/aa9a3968/attachment.obj 

From jimi at temporal-wave.com  Mon Aug 16 10:30:44 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 16 Aug 2010 10:30:44 -0700
Subject: [antlr-interest] Lexer Rule matching member variable (Java)
In-Reply-To: <4C68DD47.6020603@azamir.de>
References: <4C68DD47.6020603@azamir.de>
Message-ID: <011c01cb3d68$c1764d80$4462e880$@temporal-wave.com>

You want a rule like this:

DELIM : { input.LA(1) == currDelim}?=> . ;

However, this could get a little complicated to get the matching order of
the rules correct when you start having a lot more rules. You will need to
experiment a little.

You could also pre-process the input and substitute something extremely
unlikely to clash with the language, such as '\u0001' or something like
that. Then  only look for that character in the main lexer.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Frederic Beister
> Sent: Sunday, August 15, 2010 11:40 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Lexer Rule matching member variable (Java)
> 
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
> 
> Hello,
> 
> I want to write an ANTLR-Lexer and -Parser for a Literate Programming
> language. The idea is to embed code fragments in various languages in a
> LaTeX document and generate source files on-the-fly.
> 
> The languages allows to change the special character used to denote the
> beginning of a code snippet and the special character used inside these
> snippets to denote inclusion of other snippets. This is needed because
some
> "guest"-languages might need a pre-defined special character themselves.
> 
> The special character can be changed anywhere in the source text by using
> <OLDSPECIAL>=<NEWSPECIAL> where <OLDSPACIAL> is the old special
> character and <NEWSPECIAL> is the new special character that should be
> active after that instruction.
> 
> My idea was to modify the lexer such that it has a member variable "char
> cur_special" that is set to the current special character and match
against it in
> a rule
> 
> "fragment SCHAR : cur_special"
> 
> such that the token stream abstracts from the different possible special
> characters.
> 
> At the moment, the only way I see to accomplish this is to manually modify
> the generated lexer in many places.
> 
> Is there perhaps a built-in functionality in ANTLR 3.2 i could use? I
couldn't
> find anything in the archives searching for "lexer match member". I really
> don't need a full how-to but a gentle nudge in the correct direction.
> 
> Thanks in advance
> Frederic
> 
> P.S.
> Sorry if this is/becomes a repost. My first mail didn't make it through
> - - perhaps because it had a PGP signature attachment
> 
> 
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.10 (GNU/Linux)
> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/
> 
> iEYEARECAAYFAkxo3UcACgkQOBEXShUwZO0hagCeNY82qTh5wRk7SmvCAxB
> 9oAfk
> 1RwAni+IC77x5IBHbw2Tp4SQ4qv1RIS7
> =U+NM
> -----END PGP SIGNATURE-----
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From howaryoo at gmail.com  Mon Aug 16 10:33:44 2010
From: howaryoo at gmail.com (aryoo)
Date: Mon, 16 Aug 2010 19:33:44 +0200
Subject: [antlr-interest] advice on creating a grammar for a given DSL
	example
Message-ID: <AANLkTimKgipCf3ix9zfi0kAcQXw9C2xxyjsWHMVhLeRw@mail.gmail.com>

Hello,

I am new to ANTLR, I own the books and was able to reproduce the
hello-world and the book examples (Python style) successfully.

What I would love to do now is to
1) create my own grammar that could parse the file below.
2) generate some Python code that corresponds to the 'objects' and
some XML code that corresponds to the 'views'


My first attempt for part 1 is summarized below (grammar + error messages).

Any advice on what I did wrong or similar examples would be greatly appreciated.

Regards,
Arye.



****************************************example of file to parse********begin
module {
    name:"name_of_module"
    version:1.0
}

object {
    module:"name_of_module"
    name:"name_of_object1"
    column {
        name:"name_of_column1"
        type:"type_of_col1"
    }
    column {
        name:"name_of_column2"
        type:"type_of_col2"
    }
}


view {
    object:"name_of_object1"
    name:"name_of_view"
    type:"type_of_view"
    field {
        column:"name_of_column1"
    }
    field {
        column:"name_of_column2"
    }
}
****************************************example of file to parse********end





*******************************grammar*************begin
grammar MyGrammar;


tokens {
	MODULE 	= 'module' ;
	OBJECT	= 'object' ;
	VIEW	= 'view' ;
	MENU_ENTRY= 'menu_entry' ;
}

/*------------------------------------------------------------------
 * PARSER RULES
 *------------------------------------------------------------------*/

prog	: ( stat {print $stat.text} )+ ;


stat	:	module NEWLINE
    |	object NEWLINE
    |	view NEWLINE
    |	NEWLINE
    ;

module	: MODULE '{' module_expr+ '}';

module_expr :   'name' ':' ID NEWLINE
    |   'version' ':' ANY NEWLINE
    ;


object	: OBJECT '{' object_expr+ '}';

object_expr :   'module' ':' ID NEWLINE
    |   'name' ':' ID NEWLINE
    ;

view	: VIEW '{' view_expr+ '}';

view_expr :   'object' ':' ID NEWLINE
    |   'name' ':' ID NEWLINE
    ;



/*------------------------------------------------------------------
 * LEXER RULES
 *------------------------------------------------------------------*/

//NUMBER	: (DIGIT)+ ;

//WHITESPACE : ( '\t' | ' ' | '\r' | '\n'| '\u000C' )+ 	{ $channel = HIDDEN; } ;

//fragment DIGIT	: '0'..'9' ;


ID	:	('a'..'z'|'A'..'Z')+ ;

INT	:	'0'..'9'+ ;

NEWLINE	:	'\r'? '\n' ;

//WS	:	(' '|'\t'|'\n'|'\r')+ {self.skip()} ;
WS : ( '\t' | ' ' | '\r' | '\n'| '\u000C' )+ 	{ $channel = HIDDEN; } ;

ANY	:	('a'..'z'|'A'..'Z'|'0'..'9'|'.'|','|'_')+ ;
*******************************grammar*************begin






*******************************output*************begin
line 3:4 missing NEWLINE at u'version'
line 6:0 missing NEWLINE at u'object'
module {
    name:nameofmodule
    version:1.0
}
line 8:4 missing NEWLINE at u'name'
line 8:9 extraneous input u'nameofobject1' expecting ID
line 10:13 extraneous input u'nameofcolumn1' expecting ID
line 13:4 mismatched input u'column' expecting NEWLINE
object {
    module:nameofmodule
    name:nameofobject1
    column {
        name:nameofcolumn1
        type:typeofcol1
    }
    column {
        name:nameofcolumn2
        type:typeofcol2
    }
}


view {
    object:nameofobject1
    name:nameofview
    type:typeofview
    field {
        column:nameofcolumn1
    }
    field {
        column:nameofcolumn2
    }
}


*******************************output*************end

From jimi at temporal-wave.com  Mon Aug 16 10:47:40 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 16 Aug 2010 10:47:40 -0700
Subject: [antlr-interest] I search simple compiler
In-Reply-To: <AANLkTikA-WegNBitNbyGxZH_XJ4kanK1rWedxjT74fka@mail.gmail.com>
References: <AANLkTikA-WegNBitNbyGxZH_XJ4kanK1rWedxjT74fka@mail.gmail.com>
Message-ID: <011e01cb3d6b$1f7f42e0$5e7dc8a0$@temporal-wave.com>

Well, compilers are not that simple really. I don't know of any complete
compilers that are sitting out there with source code other than the JavaFX
compiler, which is slightly unusual because I don't build an ANTLR AST, but
build the same AST that that javac builds, which is then processed by a
modified javac compiler. You might start there though as it is a good
example of how to do error recovery and intelligent error messages for
instance.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Borneq
> Sent: Monday, August 16, 2010 1:11 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] I search simple compiler
> 
> I search simple (preferably as small as possible) compiler with sources
which
> uses ANTLR
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From jrk1987 at yahoo.co.in  Mon Aug 16 10:51:19 2010
From: jrk1987 at yahoo.co.in (J.R Karthikeyan)
Date: Mon, 16 Aug 2010 23:21:19 +0530 (IST)
Subject: [antlr-interest] Regardig time out
Message-ID: <580330.67532.qm@web94601.mail.in2.yahoo.com>

Hi,

  I am new to this antlr. I trying to create parser using antlr works. I wrote 
some sample grammer and tried to compile from windows as well as from mac. It is 
compiling in mac machine but not in windows. I tried to compile different file 
in my mac. When I try to do that it is not compiling the new file. It is always 
compiling the old file. So I deleted the folder name 'ouput' and I think it is 
created during my compilation. Now none of the file in my mac is also compiling 
and it is giving the same error "time out". I rebooted many times and I make 
sure that port is not used by any application. But still it is showing the same 
error. Suggestion please..


Thanks,
Jrk



From jimi at temporal-wave.com  Mon Aug 16 11:13:01 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 16 Aug 2010 11:13:01 -0700
Subject: [antlr-interest] advice on creating a grammar for a given
	DSL	example
In-Reply-To: <AANLkTimKgipCf3ix9zfi0kAcQXw9C2xxyjsWHMVhLeRw@mail.gmail.com>
References: <AANLkTimKgipCf3ix9zfi0kAcQXw9C2xxyjsWHMVhLeRw@mail.gmail.com>
Message-ID: <012201cb3d6e$a9ee1340$fdca39c0$@temporal-wave.com>


Remove your tokens section and place those keywords as real lexer rules that
are listed before the ID rule.
Remove any 'literals' in your parser and make these real lexer rules and
tokens.
Change your ANY rule to just: ANY :. { issue error message; skip(); };
Use {skip();} rather than HIDDEN unless you need the whitespace later for
some reason;

Then you have to look at where you are putting your NEWLINEs in the grammar.
It looks like you have too many specified and are expecting NEWLINE NEWLINE
at some point. You should try skipping newlines and see how ambiguous your
grammar is. If this is your own language, don't fall for the "I don't want
delimiters in my language" myth as it makes giving out informative error
messages nigh on impossible.

But more than all this, you need to run your grammar in the ANTLR works
debugger, which will allow you to trace out what is wrong with your grammar
specification.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of aryoo
> Sent: Monday, August 16, 2010 10:34 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] advice on creating a grammar for a given DSL
> example
> 
> Hello,
> 
> I am new to ANTLR, I own the books and was able to reproduce the hello-
> world and the book examples (Python style) successfully.
> 
> What I would love to do now is to
> 1) create my own grammar that could parse the file below.
> 2) generate some Python code that corresponds to the 'objects' and some
> XML code that corresponds to the 'views'
> 
> 
> My first attempt for part 1 is summarized below (grammar + error
messages).
> 
> Any advice on what I did wrong or similar examples would be greatly
> appreciated.
> 
> Regards,
> Arye.
> 
> 
> 
> ****************************************example of file to
> parse********begin module {
>     name:"name_of_module"
>     version:1.0
> }
> 
> object {
>     module:"name_of_module"
>     name:"name_of_object1"
>     column {
>         name:"name_of_column1"
>         type:"type_of_col1"
>     }
>     column {
>         name:"name_of_column2"
>         type:"type_of_col2"
>     }
> }
> 
> 
> view {
>     object:"name_of_object1"
>     name:"name_of_view"
>     type:"type_of_view"
>     field {
>         column:"name_of_column1"
>     }
>     field {
>         column:"name_of_column2"
>     }
> }
> ****************************************example of file to
> parse********end
> 
> 
> 
> 
> 
> *******************************grammar*************begin
> grammar MyGrammar;
> 
> 
> tokens {
> 	MODULE 	= 'module' ;
> 	OBJECT	= 'object' ;
> 	VIEW	= 'view' ;
> 	MENU_ENTRY= 'menu_entry' ;
> }
> 
> /*------------------------------------------------------------------
>  * PARSER RULES
>  *------------------------------------------------------------------*/
> 
> prog	: ( stat {print $stat.text} )+ ;
> 
> 
> stat	:	module NEWLINE
>     |	object NEWLINE
>     |	view NEWLINE
>     |	NEWLINE
>     ;
> 
> module	: MODULE '{' module_expr+ '}';
> 
> module_expr :   'name' ':' ID NEWLINE
>     |   'version' ':' ANY NEWLINE
>     ;
> 
> 
> object	: OBJECT '{' object_expr+ '}';
> 
> object_expr :   'module' ':' ID NEWLINE
>     |   'name' ':' ID NEWLINE
>     ;
> 
> view	: VIEW '{' view_expr+ '}';
> 
> view_expr :   'object' ':' ID NEWLINE
>     |   'name' ':' ID NEWLINE
>     ;
> 
> 
> 
> /*------------------------------------------------------------------
>  * LEXER RULES
>  *------------------------------------------------------------------*/
> 
> //NUMBER	: (DIGIT)+ ;
> 
> //WHITESPACE : ( '\t' | ' ' | '\r' | '\n'| '\u000C' )+ 	{ $channel =
HIDDEN;
> } ;
> 
> //fragment DIGIT	: '0'..'9' ;
> 
> 
> ID	:	('a'..'z'|'A'..'Z')+ ;
> 
> INT	:	'0'..'9'+ ;
> 
> NEWLINE	:	'\r'? '\n' ;
> 
> //WS	:	(' '|'\t'|'\n'|'\r')+ {self.skip()} ;
> WS : ( '\t' | ' ' | '\r' | '\n'| '\u000C' )+ 	{ $channel = HIDDEN; } ;
> 
> ANY	:	('a'..'z'|'A'..'Z'|'0'..'9'|'.'|','|'_')+ ;
> *******************************grammar*************begin
> 
> 
> 
> 
> 
> 
> *******************************output*************begin
> line 3:4 missing NEWLINE at u'version'
> line 6:0 missing NEWLINE at u'object'
> module {
>     name:nameofmodule
>     version:1.0
> }
> line 8:4 missing NEWLINE at u'name'
> line 8:9 extraneous input u'nameofobject1' expecting ID line 10:13
> extraneous input u'nameofcolumn1' expecting ID line 13:4 mismatched input
> u'column' expecting NEWLINE object {
>     module:nameofmodule
>     name:nameofobject1
>     column {
>         name:nameofcolumn1
>         type:typeofcol1
>     }
>     column {
>         name:nameofcolumn2
>         type:typeofcol2
>     }
> }
> 
> 
> view {
>     object:nameofobject1
>     name:nameofview
>     type:typeofview
>     field {
>         column:nameofcolumn1
>     }
>     field {
>         column:nameofcolumn2
>     }
> }
> 
> 
> *******************************output*************end
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From jimi at temporal-wave.com  Mon Aug 16 11:17:18 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 16 Aug 2010 11:17:18 -0700
Subject: [antlr-interest] Regardig time out
In-Reply-To: <580330.67532.qm@web94601.mail.in2.yahoo.com>
References: <580330.67532.qm@web94601.mail.in2.yahoo.com>
Message-ID: <012401cb3d6f$42d28c30$c877a490$@temporal-wave.com>

What does the console print to the screen? Start ANTLRWorks from a command
shell and look at what it tells you. Also, you need to post the actual error
messages as there a number of places where you might get some timeout
message. Finally, use a working example grammar first as it could also be an
error in your grammar (which you are advised to post if you cannot get it to
work). For instance if you are trying to run via the debugger, then the
compile might work but if you had a lexer rule like this:

BADRULE : ;

Then that rule will match for ever and never consume any input. There are
too many variables to know what your issue is from the information supplied.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of J.R Karthikeyan
> Sent: Monday, August 16, 2010 10:51 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Regardig time out
> 
> Hi,
> 
>   I am new to this antlr. I trying to create parser using antlr works. I
wrote
> some sample grammer and tried to compile from windows as well as from
> mac. It is compiling in mac machine but not in windows. I tried to compile
> different file in my mac. When I try to do that it is not compiling the
new file.
> It is always compiling the old file. So I deleted the folder name 'ouput'
and I
> think it is created during my compilation. Now none of the file in my mac
is
> also compiling and it is giving the same error "time out". I rebooted many
> times and I make sure that port is not used by any application. But still
it is
> showing the same error. Suggestion please..
> 
> 
> Thanks,
> Jrk
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From gwlist at grahamwideman.com  Mon Aug 16 11:31:45 2010
From: gwlist at grahamwideman.com (Graham Wideman)
Date: Mon, 16 Aug 2010 11:31:45 -0700
Subject: [antlr-interest] Context-Sensitive Scanning proposal
In-Reply-To: <AANLkTinppmUh5TuMfrBv7rHrVcx569S63fKWyJKVFF=y@mail.gmail.c
 om>
References: <AANLkTi=++Z4eP7dS0_enZxx_JO4Qv7cesuB7c-9gbDgT@mail.gmail.com>
	<8B53B771-CB9A-4015-B38F-2AA4454970D6@cs.usfca.edu>
	<AANLkTinppmUh5TuMfrBv7rHrVcx569S63fKWyJKVFF=y@mail.gmail.com>
Message-ID: <20100816183150.PMQK19056.fed1rmmtao102.cox.net@fed1rmimpo02.cox.net>

Hi Scott, Terr and all,

This sort of discussion has me asking: 

What are the rationales for any particular distribution of responsibilities between lexer(s) and parser(s)? 

-- Which rationales are about "fundamental structure of languages" (which might be about fundamental capacities or limitations of humans)?

-- Which rationales are about implementation: best data model, best performance, etc? 

-- Which rationales are about clarity of description of the language recognizer?

Or, to ask another way -- if one is drawn toward a lexer which is sensitive to parser context, then why not have just a parser which operates down to a finer level of detail?  If the parser were designed (per Scott S's idea) to "pull" tokens from one or more lexers, how is this different from the parser simply calling a lower level of parsing functions?

-- Graham

At 8/11/2010 12:09 PM, Scott Stanchfield wrote:
>Cool - let me know what you think. I'm sure there are a lot of things
>I didn't consider, but I wanted to pop the idea out there.
>-- Scott
>
>----------------------------------------
>Scott Stanchfield
>http://javadude.com
>
>
>
>On Wed, Aug 11, 2010 at 3:05 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
>> Added to my todoList on the v4 plans to look at:
>>
>> http://www.antlr.org/wiki/display/~admin/ANTLR+v4+lexers
>>
>> T
>> On Aug 10, 2010, at 8:41 PM, Scott Stanchfield wrote:
>>
>>> Hey all - I've written up a little proposal for a context-sensitive
>>> scanning idea. Hopefully my brain is on a good track with this; I
>>> think it could be a major win for ANTLR.
>>>
>>> Please check out
>>>   http://javadude.com/articles/antlr-context-sensitive-scanner.html
>>>
>>> and let me know what you think.
>>>
>>> Looks like something similar has been done before (rats! thought I had
>>> an original thought!).
>>>
>>> Thoughts?
>>> -- Scott
>>>
>>> ----------------------------------------
>>> Scott Stanchfield
>>> http://javadude.com
>>>
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>>
>
>List: http://www.antlr.org/mailman/listinfo/antlr-interest
>Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From scott at javadude.com  Mon Aug 16 11:43:00 2010
From: scott at javadude.com (Scott Stanchfield)
Date: Mon, 16 Aug 2010 14:43:00 -0400
Subject: [antlr-interest] Context-Sensitive Scanning proposal
In-Reply-To: <20100816183150.PMQK19056.fed1rmmtao102.cox.net@fed1rmimpo02.cox.net>
References: <AANLkTi=++Z4eP7dS0_enZxx_JO4Qv7cesuB7c-9gbDgT@mail.gmail.com>
	<8B53B771-CB9A-4015-B38F-2AA4454970D6@cs.usfca.edu>
	<AANLkTinppmUh5TuMfrBv7rHrVcx569S63fKWyJKVFF=y@mail.gmail.com>
	<20100816183150.PMQK19056.fed1rmmtao102.cox.net@fed1rmimpo02.cox.net>
Message-ID: <AANLkTinji_qCtPOZ9uXyT_qXOpsZY=DyrbViCvqcTyOL@mail.gmail.com>

I like the separation of lexer/parser to be able to deal with multiple
streams and hidden tokens (mostly for hidden tokens).

I like the analogy of "characters into words, words into sentences"
when describing parsing as well.

The other thing about the separation and my proposal is that it would
allow easy combination of common lexing patterns (like IDENT, NUM,
STRING, C-style comments, etc) into existing parsers, as well as
simple combination of separate parsers (though the parsers could
operate on the same character stream instead of the lexers acting on
that character stream, and common patterns could be "included" into a
parser.)

Part of me is still "schooled" into accepting about the separation,
but it really isn't necessary. However, there are so many people
schooled into it as well, jumping into a lexer-less parser might be a
bigger mental leap... Hard to say...

Of course the question comes up, without the separation, how can we do
DFAs if we want? (Another question - are compies fast enough now that
the parser speed is acceptable without using DFAs?).

WRT my proposal, if we wanted to do DFAs, we'd have to generate a DFA
for each context the parser needs -- that could be a lot of DFAs,
though each would likely be smaller than in a traditional "push"
lexer.
-- Scott

----------------------------------------
Scott Stanchfield
http://javadude.com



On Mon, Aug 16, 2010 at 2:31 PM, Graham Wideman
<gwlist at grahamwideman.com> wrote:
> Hi Scott, Terr and all,
>
> This sort of discussion has me asking:
>
> What are the rationales for any particular distribution of responsibilities between lexer(s) and parser(s)?
>
> -- Which rationales are about "fundamental structure of languages" (which might be about fundamental capacities or limitations of humans)?
>
> -- Which rationales are about implementation: best data model, best performance, etc?
>
> -- Which rationales are about clarity of description of the language recognizer?
>
> Or, to ask another way -- if one is drawn toward a lexer which is sensitive to parser context, then why not have just a parser which operates down to a finer level of detail? ?If the parser were designed (per Scott S's idea) to "pull" tokens from one or more lexers, how is this different from the parser simply calling a lower level of parsing functions?
>
> -- Graham
>
> At 8/11/2010 12:09 PM, Scott Stanchfield wrote:
>>Cool - let me know what you think. I'm sure there are a lot of things
>>I didn't consider, but I wanted to pop the idea out there.
>>-- Scott
>>
>>----------------------------------------
>>Scott Stanchfield
>>http://javadude.com
>>
>>
>>
>>On Wed, Aug 11, 2010 at 3:05 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
>>> Added to my todoList on the v4 plans to look at:
>>>
>>> http://www.antlr.org/wiki/display/~admin/ANTLR+v4+lexers
>>>
>>> T
>>> On Aug 10, 2010, at 8:41 PM, Scott Stanchfield wrote:
>>>
>>>> Hey all - I've written up a little proposal for a context-sensitive
>>>> scanning idea. Hopefully my brain is on a good track with this; I
>>>> think it could be a major win for ANTLR.
>>>>
>>>> Please check out
>>>> ? http://javadude.com/articles/antlr-context-sensitive-scanner.html
>>>>
>>>> and let me know what you think.
>>>>
>>>> Looks like something similar has been done before (rats! thought I had
>>>> an original thought!).
>>>>
>>>> Thoughts?
>>>> -- Scott
>>>>
>>>> ----------------------------------------
>>>> Scott Stanchfield
>>>> http://javadude.com
>>>>
>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>>
>>>
>>
>>List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From jschrod at acm.org  Mon Aug 16 15:04:51 2010
From: jschrod at acm.org (Joachim Schrod)
Date: Tue, 17 Aug 2010 00:04:51 +0200
Subject: [antlr-interest] Best practice to handle Lexer backtracking
	demand
In-Reply-To: <4C680D4A.6060208@certiv.net>
References: <i44n3r$s4s$1@dough.gmane.org>	<4C65ED7D.50603@certiv.net>	<i44s7l$9l6$1@dough.gmane.org>	<4C65F9C4.5070305@certiv.net>	<i45je2$436$1@dough.gmane.org>	<4C66D8FA.90108@certiv.net>	<19559.43124.464645.233413@puma.r.npc.de>
	<4C680D4A.6060208@certiv.net>
Message-ID: <i4ccm4$tsu$1@dough.gmane.org>

Gerald Rosenberg writes:

Gerald,

>   The attached grammar illustrates two different patterns that
> could work to identify the markers.

Thanks a lot for these patterns. They illustrate usages that I was
not aware of, I learned something new today. :-)

> However, there is an open question about whether a valid marker
> can appear without prefix, suffix, or any escaped characters).

As I wrote, it always does. (The escaping is done in the data, not
in the marker strings.)

Actually, I have even found a different solution. In a first pass,
I filter/rewrite the input and insert at the start and end of each
marker string characters that won't appear in the data. (I use
\u0001 and \u0002, respectively.) With these characters as
delimiter, I can now define data word tokens that don't include
these characters. Thus I can formulate catch-all rules that are as
long as any marker strings and cover all prefixes of all marker
strings. No NoViableAltException any more.

So I solved the problem by redefining the task... I hope that I
don't have to parse another file in the future where lexer
backtracking is needed. ;-) Hmm, maybe combining full-fledged lexer
generators like Jflex with ANTLR parsers? Looking at the docs, this
shouldn't be too hard to realize.

Anyhow, thanks very much for the very fast and enduring responses
to my questions. As a newbie to ANTLR, I feel very welcomed.

Cheers,
	Joachim

PS: Let me add some final comments how that input happens to be as
convoluted as it is: It is created as a VARBLK file on a mainframe
system. There, the marker strings are always at the start and at
the end of a line. Transfer as text file (where line ends would be
properly inserted) to my Unix servers destroys umlaute, they are
mapped to []{} and such. Transfer as binary file leaves the umlaute
intact (well, in EBCDIC, but that's easy to handle), but doesn't
insert newlines. Data file creation and transfer is made by another
company and I'm not in the position to change this; so I have to
analyze the files that we receive.

-- 
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
Joachim Schrod				Email: jschrod at acm.org
Roedermark, Germany



From kevintboyle at yahoo.com  Mon Aug 16 18:50:51 2010
From: kevintboyle at yahoo.com (Kevin Boyle)
Date: Mon, 16 Aug 2010 21:50:51 -0400
Subject: [antlr-interest] I'm stuck
Message-ID: <107101cb3dae$9f16b360$dd441a20$@com>

I hope you can help.  I started with the mdx.g from the antlr website and
have build a tree grammar in order to use the string templates.  I'm also
generating the parser and lex code in c#.

These 2 statements below are equivalent in the MDX grammar but the in the
tree-grammar when output=template, I get complaints about 'compound_id'.
Its strange because it seems to generate the code sometimes after a I 'check
grammar' but sometimes it generates an error.  

However if I use 'compound_id2' then the template does not capture the
complete text (only the token before 'DOT') when I reference
$member_name.text (see line below).  However If I use the 'coupound_id' it
works but generates a runtime error in the tree-grammar saying
"mdx_parametric.g: node from after line 3:21 no viable alternative at input
'.'"

What I seem to be missing is a way to create the tree using the ^ tree
operator but still be able to use string-templates in the tree-grammar
without generating errors.

Thanks 

Kevin 

 

------------- MDX Grammar  ---------- 

 

compound_id 
        :       identifier (DOT^ identifier)*   

compound_id2 : (identifier)=>(identifier (DOT identifier)*) 
                        | 
                        ; 

 

---------------- Tree Grammar -------------- 

member_name : compound_id  -> template (id={$member_name.text})
"GOTIT_MName_1#<id>#" 
                        ; 


From Nieves.Salor.Moral at esa.int  Tue Aug 17 00:18:07 2010
From: Nieves.Salor.Moral at esa.int (Nieves.Salor.Moral at esa.int)
Date: Tue, 17 Aug 2010 09:18:07 +0200
Subject: [antlr-interest] Syntax- highlighter and completition
In-Reply-To: <4C6503B0.9040206@nsn.com>
References: <OF1C70F402.83D84CAB-ONC125777D.003977ED-C125777D.003AABFA@esa.int>
	<AANLkTinb0KBF-oFmFuogQMn7TtY6AKX2K2pZZYDpFVUS@mail.gmail.com>
	<4C6503B0.9040206@nsn.com>
Message-ID: <OF4BD6F472.13C48496-ONC1257782.002770E8-C1257782.002821D2@esa.int>

Hi everyone!

Sorry for not answering before, but I have been studying your answers and 
making a trade-off list about them. At the end, I am going to use the 
netbeans plugging for integrating ANTLR, although I wanted a stand-alone 
application as I already had the SWING custom interface (IDE like) running 
via Eclipse, so I only needed to call in background the process of ANTLR 
validation and show the results of the validation in the console window. 
But I don't think it is going to be complicated to import it into eclipse 
as I used custom libraries.

After I finish with the prototype I will let you know, 'cos my final goal 
is to create the desktop application without requiring Netbeans, Eclipse 
to be installed in the computer just JAVA, so it also can be embedded into 
other projects.

Nieves



"Paul Bouch? (NSN - DE, Berlin)" <paul.bouche at nsn.com> 
13/08/2010 10:34

To
ext Andreas Stefik <stefika at gmail.com>
cc
Nieves.Salor.Moral at esa.int, antlr-interest at antlr.org
Subject
Re: [antlr-interest] Syntax- highlighter and completition






Hi,

so this is really interesting. Do you know if the text editing components 
are available standalone from NetBeans - I heard such a thing?

BR,
Paul

ext Andreas Stefik schrieb: 
Hi there,

Another option you have is to use the NetBeans platform for these
editor tasks. Basically, you keep a list of whatever you want (e.g.,
what methods have been parsed, what variables, tokens), and you pass
them to the platform's APIs specifically designed for parsing,
highlighting, etc. All of the threading/highlighting/user interface
work is done for you, is commercially scalable, and works extremely
well behind the scenes.

Like anything, it isn't trivial to do, but the APIs for parsing/code
completion/syntax highlighting are pretty straightforward and there
are tutorials online on how to do it with ANTLR. Here's one, for
example:

http://wiki.netbeans.org/Netbeans_Rcp_Antlr_Integration_Index

Hope that helps,

Andreas Stefik

On Thu, Aug 12, 2010 at 5:40 AM,  <Nieves.Salor.Moral at esa.int> wrote:
 
Helllo!!

I think this is an old topic, but looking at the list I haven't found a
clear answer to the problem. I am trying to do a system that opens in a
swing panel an specific type file, which follows my specific grammar and
allows its editing.
Hence, I want to add syntax-highlighting and also auto completion to the
file (both in the editing and in the only reading), But also I should show
the syntax tree.

I have my ANTLR grammar running (pluto.g) and tested with current output
as a flat AST tree. But I am not entirely sure what to do next.

My first option is to specify as output templates and use directly from
the parser grammar StringTemplate with the output specifying the colors,
font, etc in a kind of HTML similar code and later plug-in in the swing
panel
Second option, is to create a Parser Tree and later on, use the templates
Third, forget the parser and just use the lexer????

The problem is that the final goal of the system is to create SQL queries
to insert/modify in a DB the information that contains the grammar.

Any outputs are welcome, thanks



Nieves Salor Moral

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: 
http://www.antlr.org/mailman/options/antlr-interest/your-email-address


 

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: 
http://www.antlr.org/mailman/options/antlr-interest/your-email-address
 




From a.moderacja at gmail.com  Tue Aug 17 01:36:54 2010
From: a.moderacja at gmail.com (Borneq)
Date: Tue, 17 Aug 2010 10:36:54 +0200
Subject: [antlr-interest] I search simple compiler
In-Reply-To: <011e01cb3d6b$1f7f42e0$5e7dc8a0$@temporal-wave.com>
References: <AANLkTikA-WegNBitNbyGxZH_XJ4kanK1rWedxjT74fka@mail.gmail.com>
	<011e01cb3d6b$1f7f42e0$5e7dc8a0$@temporal-wave.com>
Message-ID: <AANLkTikMGYbBkhrGvJxNAOh1ck9qgv1O93Y66rFdjUCz@mail.gmail.com>

2010/8/16 Jim Idle <jimi at temporal-wave.com>:
> Well, compilers are not that simple really. I don't know of any complete
> compilers that are sitting out there with source code other than the JavaFX
> compiler, which is slightly unusual because I don't build an ANTLR AST, but
> build the same AST that that javac builds, which is then processed by a
> modified javac compiler. You might start there though as it is a good
> example of how to do error recovery and intelligent error messages for
> instance.

How download source file of JavaFX ?
On https://openjfx-compiler.dev.java.net/#sourcedownload is "hg clone
http://kenai.com/hg/openjfx-compiler~soma-master" what is a program
"hg" ?
I search not fully functional language compiler but simple language:
four arithmetic operation+function call, with build AST and translate
into intermediate language

From scott at javadude.com  Tue Aug 17 07:01:00 2010
From: scott at javadude.com (Scott Stanchfield)
Date: Tue, 17 Aug 2010 10:01:00 -0400
Subject: [antlr-interest] Syntax- highlighter and completition
In-Reply-To: <OF4BD6F472.13C48496-ONC1257782.002770E8-C1257782.002821D2@esa.int>
References: <OF1C70F402.83D84CAB-ONC125777D.003977ED-C125777D.003AABFA@esa.int>
	<AANLkTinb0KBF-oFmFuogQMn7TtY6AKX2K2pZZYDpFVUS@mail.gmail.com>
	<4C6503B0.9040206@nsn.com>
	<OF4BD6F472.13C48496-ONC1257782.002770E8-C1257782.002821D2@esa.int>
Message-ID: <AANLkTikeO_j9UBxTd-40Ab=+XxmfLhQ=Yy6gc3fwf+xM@mail.gmail.com>

If you're using eclipse, check out xtext
(http://www.eclipse.org/Xtext). It'll generate a syntax-highlighting
editor and EMF model for the DSL, and you could package it as an RCP
application. Very easy to do (hardest thing is to write the grammar,
but it's pretty similar to ANTLR and uses ANTLR under the covers)
-- Scott

----------------------------------------
Scott Stanchfield
http://javadude.com



On Tue, Aug 17, 2010 at 3:18 AM,  <Nieves.Salor.Moral at esa.int> wrote:
> Hi everyone!
>
> Sorry for not answering before, but I have been studying your answers and
> making a trade-off list about them. At the end, I am going to use the
> netbeans plugging for integrating ANTLR, although I wanted a stand-alone
> application as I already had the SWING custom interface (IDE like) running
> via Eclipse, so I only needed to call in background the process of ANTLR
> validation and show the results of the validation in the console window.
> But I don't think it is going to be complicated to import it into eclipse
> as I used custom libraries.
>
> After I finish with the prototype I will let you know, 'cos my final goal
> is to create the desktop application without requiring Netbeans, Eclipse
> to be installed in the computer just JAVA, so it also can be embedded into
> other projects.
>
> Nieves
>
>
>
> "Paul Bouch? (NSN - DE, Berlin)" <paul.bouche at nsn.com>
> 13/08/2010 10:34
>
> To
> ext Andreas Stefik <stefika at gmail.com>
> cc
> Nieves.Salor.Moral at esa.int, antlr-interest at antlr.org
> Subject
> Re: [antlr-interest] Syntax- highlighter and completition
>
>
>
>
>
>
> Hi,
>
> so this is really interesting. Do you know if the text editing components
> are available standalone from NetBeans - I heard such a thing?
>
> BR,
> Paul
>
> ext Andreas Stefik schrieb:
> Hi there,
>
> Another option you have is to use the NetBeans platform for these
> editor tasks. Basically, you keep a list of whatever you want (e.g.,
> what methods have been parsed, what variables, tokens), and you pass
> them to the platform's APIs specifically designed for parsing,
> highlighting, etc. All of the threading/highlighting/user interface
> work is done for you, is commercially scalable, and works extremely
> well behind the scenes.
>
> Like anything, it isn't trivial to do, but the APIs for parsing/code
> completion/syntax highlighting are pretty straightforward and there
> are tutorials online on how to do it with ANTLR. Here's one, for
> example:
>
> http://wiki.netbeans.org/Netbeans_Rcp_Antlr_Integration_Index
>
> Hope that helps,
>
> Andreas Stefik
>
> On Thu, Aug 12, 2010 at 5:40 AM, ?<Nieves.Salor.Moral at esa.int> wrote:
>
> Helllo!!
>
> I think this is an old topic, but looking at the list I haven't found a
> clear answer to the problem. I am trying to do a system that opens in a
> swing panel an specific type file, which follows my specific grammar and
> allows its editing.
> Hence, I want to add syntax-highlighting and also auto completion to the
> file (both in the editing and in the only reading), But also I should show
> the syntax tree.
>
> I have my ANTLR grammar running (pluto.g) and tested with current output
> as a flat AST tree. But I am not entirely sure what to do next.
>
> My first option is to specify as output templates and use directly from
> the parser grammar StringTemplate with the output specifying the colors,
> font, etc in a kind of HTML similar code and later plug-in in the swing
> panel
> Second option, is to create a Parser Tree and later on, use the templates
> Third, forget the parser and just use the lexer????
>
> The problem is that the final goal of the system is to create SQL queries
> to insert/modify in a DB the information that contains the grammar.
>
> Any outputs are welcome, thanks
>
>
>
> Nieves Salor Moral
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From jimi at temporal-wave.com  Tue Aug 17 08:36:49 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 17 Aug 2010 08:36:49 -0700
Subject: [antlr-interest] I search simple compiler
In-Reply-To: <AANLkTikMGYbBkhrGvJxNAOh1ck9qgv1O93Y66rFdjUCz@mail.gmail.com>
References: <AANLkTikA-WegNBitNbyGxZH_XJ4kanK1rWedxjT74fka@mail.gmail.com>	<011e01cb3d6b$1f7f42e0$5e7dc8a0$@temporal-wave.com>
	<AANLkTikMGYbBkhrGvJxNAOh1ck9qgv1O93Y66rFdjUCz@mail.gmail.com>
Message-ID: <01c101cb3e22$01e66e40$05b34ac0$@temporal-wave.com>

The JavaFX compiler will be too complicated for your purposes then I
suspect. Maybe someone on the list has something they can let you have or
you can just work through the books and examples of grammars and tree
walkers. It might not be a bad idea to produce a complete working example in
the vein of your request - perhaps someone might volunteer to do that. I
don't have a lot of time at the moment.

Hg is part of the Mercury source code control system and after having to use
it, I can recommend not using it.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Borneq
> Sent: Tuesday, August 17, 2010 1:37 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] I search simple compiler
> 
> 2010/8/16 Jim Idle <jimi at temporal-wave.com>:
> > Well, compilers are not that simple really. I don't know of any
> > complete compilers that are sitting out there with source code other
> > than the JavaFX compiler, which is slightly unusual because I don't
> > build an ANTLR AST, but build the same AST that that javac builds,
> > which is then processed by a modified javac compiler. You might start
> > there though as it is a good example of how to do error recovery and
> > intelligent error messages for instance.
> 
> How download source file of JavaFX ?
> On https://openjfx-compiler.dev.java.net/#sourcedownload is "hg clone
> http://kenai.com/hg/openjfx-compiler~soma-master" what is a program
> "hg" ?
> I search not fully functional language compiler but simple language:
> four arithmetic operation+function call, with build AST and translate into
> intermediate language
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From kevintboyle at yahoo.com  Tue Aug 17 10:36:47 2010
From: kevintboyle at yahoo.com (Kevin Boyle)
Date: Tue, 17 Aug 2010 13:36:47 -0400
Subject: [antlr-interest] I'm stuck
Message-ID: <000601cb3e32$c4b75ff0$4e261fd0$@com>

I've resolved the problem.  Thanks.

 

From: Kevin Boyle [mailto:kevintboyle at yahoo.com] 
Sent: Monday, August 16, 2010 9:51 PM
To: 'antlr-interest at antlr.org'
Subject: I'm stuck

 

I hope you can help.  I started with the mdx.g from the antlr website and
have build a tree grammar in order to use the string templates.  I'm also
generating the parser and lex code in c#.

These 2 statements below are equivalent in the MDX grammar but the in the
tree-grammar when output=template, I get complaints about 'compound_id'.
Its strange because it seems to generate the code sometimes after a I 'check
grammar' but sometimes it generates an error.  

However if I use 'compound_id2' then the template does not capture the
complete text (only the token before 'DOT') when I reference
$member_name.text (see line below).  However If I use the 'coupound_id' it
works but generates a runtime error in the tree-grammar saying
"mdx_parametric.g: node from after line 3:21 no viable alternative at input
'.'"

What I seem to be missing is a way to create the tree using the ^ tree
operator but still be able to use string-templates in the tree-grammar
without generating errors.

Thanks 

Kevin 

 

------------- MDX Grammar  ---------- 

 

compound_id 
        :       identifier (DOT^ identifier)*   

compound_id2 : (identifier)=>(identifier (DOT identifier)*) 
                        | 
                        ; 

 

---------------- Tree Grammar -------------- 

member_name : compound_id  -> template (id={$member_name.text})
"GOTIT_MName_1#<id>#" 
                        ; 


From stefika at gmail.com  Tue Aug 17 12:07:51 2010
From: stefika at gmail.com (Andreas Stefik)
Date: Tue, 17 Aug 2010 14:07:51 -0500
Subject: [antlr-interest] Syntax- highlighter and completition
In-Reply-To: <OF4BD6F472.13C48496-ONC1257782.002770E8-C1257782.002821D2@esa.int>
References: <OF1C70F402.83D84CAB-ONC125777D.003977ED-C125777D.003AABFA@esa.int>
	<AANLkTinb0KBF-oFmFuogQMn7TtY6AKX2K2pZZYDpFVUS@mail.gmail.com>
	<4C6503B0.9040206@nsn.com>
	<OF4BD6F472.13C48496-ONC1257782.002770E8-C1257782.002821D2@esa.int>
Message-ID: <AANLkTinZBqSmWJe05rsvvqKRUsmC8Yg-6-97vzVM40vd@mail.gmail.com>

Hi Nieves,

If you want to make your netbeans project standalone, right click your
module suite and click properties. Click Application, then "Create
Standalone Application."

>From there to create a stand alone application, right click on the module
suite and click Build Installers.

Stefik

On Tue, Aug 17, 2010 at 2:18 AM, <Nieves.Salor.Moral at esa.int> wrote:

>
> Hi everyone!
>
> Sorry for not answering before, but I have been studying your answers and
> making a trade-off list about them. At the end, I am going to use the
> netbeans plugging for integrating ANTLR, although I wanted a stand-alone
> application as I already had the SWING custom interface (IDE like) running
> via Eclipse, so I only needed to call in background the process of ANTLR
> validation and show the results of the validation in the console window. But
> I don't think it is going to be complicated to import it into eclipse as I
> used custom libraries.
>
> After I finish with the prototype I will let you know, 'cos my final goal
> is to create the desktop application without requiring Netbeans, Eclipse to
> be installed in the computer just JAVA, so it also can be embedded into
> other projects.
>
> Nieves
>
>
>  *"Paul Bouch? (NSN - DE, Berlin)" <paul.bouche at nsn.com>*
>
> 13/08/2010 10:34
>   To
> ext Andreas Stefik <stefika at gmail.com>
> cc
> Nieves.Salor.Moral at esa.int, antlr-interest at antlr.org
> Subject
> Re: [antlr-interest] Syntax- highlighter and completition
>
>
>
>
> Hi,
>
> so this is really interesting. Do you know if the text editing components
> are available standalone from NetBeans - I heard such a thing?
>
> BR,
> Paul
>
> ext Andreas Stefik schrieb:
> Hi there,
>
> Another option you have is to use the NetBeans platform for these
> editor tasks. Basically, you keep a list of whatever you want (e.g.,
> what methods have been parsed, what variables, tokens), and you pass
> them to the platform's APIs specifically designed for parsing,
> highlighting, etc. All of the threading/highlighting/user interface
> work is done for you, is commercially scalable, and works extremely
> well behind the scenes.
>
> Like anything, it isn't trivial to do, but the APIs for parsing/code
> completion/syntax highlighting are pretty straightforward and there
> are tutorials online on how to do it with ANTLR. Here's one, for
> example:
>
> *http://wiki.netbeans.org/Netbeans_Rcp_Antlr_Integration_Index*<http://wiki.netbeans.org/Netbeans_Rcp_Antlr_Integration_Index>
>
> Hope that helps,
>
> Andreas Stefik
>
> On Thu, Aug 12, 2010 at 5:40 AM,  *<Nieves.Salor.Moral at esa.int>*<Nieves.Salor.Moral at esa.int>wrote:
>
> Helllo!!
>
> I think this is an old topic, but looking at the list I haven't found a
> clear answer to the problem. I am trying to do a system that opens in a
> swing panel an specific type file, which follows my specific grammar and
> allows its editing.
> Hence, I want to add syntax-highlighting and also auto completion to the
> file (both in the editing and in the only reading), But also I should show
> the syntax tree.
>
> I have my ANTLR grammar running (pluto.g) and tested with current output
> as a flat AST tree. But I am not entirely sure what to do next.
>
> My first option is to specify as output templates and use directly from
> the parser grammar StringTemplate with the output specifying the colors,
> font, etc in a kind of HTML similar code and later plug-in in the swing
> panel
> Second option, is to create a Parser Tree and later on, use the templates
> Third, forget the parser and just use the lexer????
>
> The problem is that the final goal of the system is to create SQL queries
> to insert/modify in a DB the information that contains the grammar.
>
> Any outputs are welcome, thanks
>
>
>
> Nieves Salor Moral
>
> List: *http://www.antlr.org/mailman/listinfo/antlr-interest*<http://www.antlr.org/mailman/listinfo/antlr-interest>
> Unsubscribe: *
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address*<http://www.antlr.org/mailman/options/antlr-interest/your-email-address>
>
>
>
>
> List: *http://www.antlr.org/mailman/listinfo/antlr-interest*<http://www.antlr.org/mailman/listinfo/antlr-interest>
> Unsubscribe: *
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address*<http://www.antlr.org/mailman/options/antlr-interest/your-email-address>
>
>
>
>
>

From howaryoo at gmail.com  Tue Aug 17 13:55:06 2010
From: howaryoo at gmail.com (aryoo)
Date: Tue, 17 Aug 2010 22:55:06 +0200
Subject: [antlr-interest] advice on creating a grammar for a given DSL
	example
In-Reply-To: <AANLkTimKgipCf3ix9zfi0kAcQXw9C2xxyjsWHMVhLeRw@mail.gmail.com>
References: <AANLkTimKgipCf3ix9zfi0kAcQXw9C2xxyjsWHMVhLeRw@mail.gmail.com>
Message-ID: <AANLkTi=feQLAS8raRcfGSuM77OYro4hZ-R7viKsG0G7-@mail.gmail.com>

Dear Jim,

I followed your recommendations, avoided the "I don't want delimiters in my
language" temptation, and created the grammar from scratch using ANTLRWorks
successfully.
Next steps for me: AST + StringTemplate output.

Thanks a lot for your answer. It was exactly what I needed.

Sincerely,
Arye.

Remove your tokens section and place those keywords as real lexer rules that
> are listed before the ID rule.
> Remove any 'literals' in your parser and make these real lexer rules and
> tokens.
> Change your ANY rule to just: ANY :. { issue error message; skip(); };
> Use {skip();} rather than HIDDEN unless you need the whitespace later for
> some reason;
>
> Then you have to look at where you are putting your NEWLINEs in the
> grammar.
> It looks like you have too many specified and are expecting NEWLINE NEWLINE
> at some point. You should try skipping newlines and see how ambiguous your
> grammar is. If this is your own language, don't fall for the "I don't want
> delimiters in my language" myth as it makes giving out informative error
> messages nigh on impossible.
>
> But more than all this, you need to run your grammar in the ANTLR works
> debugger, which will allow you to trace out what is wrong with your grammar
> specification.
>
> Jim
>

From jimi at temporal-wave.com  Tue Aug 17 13:59:09 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 17 Aug 2010 13:59:09 -0700
Subject: [antlr-interest] advice on creating a grammar for a given
	DSL	example
In-Reply-To: <AANLkTi=feQLAS8raRcfGSuM77OYro4hZ-R7viKsG0G7-@mail.gmail.com>
References: <AANLkTimKgipCf3ix9zfi0kAcQXw9C2xxyjsWHMVhLeRw@mail.gmail.com>
	<AANLkTi=feQLAS8raRcfGSuM77OYro4hZ-R7viKsG0G7-@mail.gmail.com>
Message-ID: <007501cb3e4f$09932d90$1cb988b0$@temporal-wave.com>

No problem.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of aryoo
> Sent: Tuesday, August 17, 2010 1:55 PM
> To: antlr-interest at antlr.org
> Cc: howaryoo at gmail.com
> Subject: Re: [antlr-interest] advice on creating a grammar for a given DSL
> example
> 
> Dear Jim,
> 
> I followed your recommendations, avoided the "I don't want delimiters in
my
> language" temptation, and created the grammar from scratch using
> ANTLRWorks successfully.
> Next steps for me: AST + StringTemplate output.
> 
> Thanks a lot for your answer. It was exactly what I needed.
> 
> Sincerely,
> Arye.
> 
> Remove your tokens section and place those keywords as real lexer rules
> that
> > are listed before the ID rule.
> > Remove any 'literals' in your parser and make these real lexer rules
> > and tokens.
> > Change your ANY rule to just: ANY :. { issue error message; skip(); };
> > Use {skip();} rather than HIDDEN unless you need the whitespace later
> > for some reason;
> >
> > Then you have to look at where you are putting your NEWLINEs in the
> > grammar.
> > It looks like you have too many specified and are expecting NEWLINE
> > NEWLINE at some point. You should try skipping newlines and see how
> > ambiguous your grammar is. If this is your own language, don't fall
> > for the "I don't want delimiters in my language" myth as it makes
> > giving out informative error messages nigh on impossible.
> >
> > But more than all this, you need to run your grammar in the ANTLR
> > works debugger, which will allow you to trace out what is wrong with
> > your grammar specification.
> >
> > Jim
> >
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From tirelli at post.com  Tue Aug 17 14:11:20 2010
From: tirelli at post.com (Edson Tirelli)
Date: Tue, 17 Aug 2010 17:11:20 -0400
Subject: [antlr-interest] Antlr 3.2 issues: code too large and "no such
	attribute: description"
Message-ID: <AANLkTinndbFbeUX2FNZp3Nh_xhQHkMKw6w1W-eamTzyD@mail.gmail.com>

   Hey all,

   Need some advice. Question:

* short version: Does anyone tried applying the patch from this ticket (
http://www.antlr.org/jira/browse/ANTLR-378) on ANTLR 3.2? Is it still good?

* long version:

   I am adding support for full Java expressions to Drools (www.drools.org)
DRL language, and basically my grammar (that was already complex) now is
also twice the size it was. Before, I was using ANTLRWorks (1.4) to debug my
grammar but now, when I try to debug I get the error:

"code too large"

   That is a bit strange to me as the grammar generates just fine when I use
the command line tool to generate it, but I figured it might be due to some
additional code ANTLRWorks might be generating for debug purposes. My search
through this list archives and internet found some comments stating that the
way to go in this case would be to use Composite Grammars, but the problem
seems to be that neither antlrworks nor the eclipse plugin have proper
support to it. I gave it a quick try and it does highlight missing rules as
errors in dependent grammars making maintenance a lot harder.

    So, if I would have to do remote debugging anyway, I tried to do it with
my current grammar. Although, when I try to generate the grammar with the
"-debug" flag on the command line, I get:

    "[java] error(10):  internal error:
src/main/resources/org/drools/lang/DRL.g : java.util.NoSuchElementException:
no such attribute: description in template context [orPredicates
notPredicate evalPredicate(...)]"

    This is apparently a known bug reported since ANTLR 3.1.1 (
http://www.antlr.org/jira/browse/ANTLR-378) for which a patch was provided
but apparently never applied.

    Right now I am stuck, since I can not debug neither locally nor
remotely, I see only two options: either I go trial and error working on my
grammar (what can be extremely time consuming for a complex grammar like
ours) or I try to apply the patch and build my own StringTemplate/ANTLR
binaries and hope that it will work.

    So, before spending more time on the later, I wanted to check if anyone
else tried that and succeeded, otherwise, I will just go the old way and
debug the generated code itself. :(

    Anyone worked around these problems yet? Any advice?

    Thanks a lot,
       Edson

-- 
  Edson Tirelli
  JBoss Drools Core Development
  JBoss by Red Hat @ www.jboss.com

From jrk1987 at yahoo.co.in  Tue Aug 17 15:47:07 2010
From: jrk1987 at yahoo.co.in (J.R Karthikeyan)
Date: Wed, 18 Aug 2010 04:17:07 +0530 (IST)
Subject: [antlr-interest] Regardig time out
In-Reply-To: <mailman.1.1281985201.6080.antlr-interest@antlr.org>
References: <mailman.1.1281985201.6080.antlr-interest@antlr.org>
Message-ID: <350130.27975.qm@web94603.mail.in2.yahoo.com>

Hi,

  I am using the simple grammar file. Please find the grammar file attached 
along with this mail. I have attached the screenshot at various stage also. 
Please let me know what I should need to make sure the compiler works.

The grammar is 
grammar checkforcompile;

simplerule
    :    CHAR | EOF |
    ; 
    
WHITESPACE  : ( '\t' | ' ' | '\r' | '\n'| '\u000C' )+
              {
                 $channel = HIDDEN;
              }
            ;

fragment
LETTER    :    ('a'..'z' | 'A'..'Z')
    ;
    
CHAR    :    LETTER (LETTER | '_')+
    ;






Date: Mon, 16 Aug 2010 11:17:18 -0700
From: "Jim Idle" <jimi at temporal-wave.com>
Subject: Re: [antlr-interest] Regardig time out
To: <antlr-interest at antlr.org>
Message-ID: <012401cb3d6f$42d28c30$c877a490$@temporal-wave.com>
Content-Type: text/plain;    charset="us-ascii"

What does the console print to the screen? Start ANTLRWorks from a command
shell and look at what it tells you. Also, you need to post the actual error
messages as there a number of places where you might get some timeout
message. Finally, use a working example grammar first as it could also be an
error in your grammar (which you are advised to post if you cannot get it to
work). For instance if you are trying to run via the debugger, then the
compile might work but if you had a lexer rule like this:

BADRULE : ;

Then that rule will match for ever and never consume any input. There are
too many variables to know what your issue is from the information supplied.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of J.R Karthikeyan
> Sent: Monday, August 16, 2010 10:51 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Regardig time out
> 
> Hi,
> 
>   I am new to this antlr. I trying to create parser using antlr works. I
wrote
> some sample grammer and tried to compile from windows as well as from
> mac. It is compiling in mac machine but not in windows. I tried to compile
> different file in my mac. When I try to do that it is not compiling the
new file.
> It is always compiling the old file. So I deleted the folder name 'ouput'
and I
> think it is created during my compilation. Now none of the file in my mac
is
> also compiling and it is giving the same error "time out". I rebooted many
> times and I make sure that port is not used by any application. But still
it is
> showing the same error. Suggestion please..
> 
> 
> Thanks,
> Jrk

-------------- next part --------------
A non-text attachment was scrubbed...
Name: screenshots.doc
Type: application/msword
Size: 66048 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20100818/cbff0e17/attachment.doc 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: checkforcompile.g
Type: application/octet-stream
Size: 306 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20100818/cbff0e17/attachment.obj 

From jimi at temporal-wave.com  Tue Aug 17 16:03:32 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 17 Aug 2010 16:03:32 -0700
Subject: [antlr-interest] Regardig time out
In-Reply-To: <350130.27975.qm@web94603.mail.in2.yahoo.com>
References: <mailman.1.1281985201.6080.antlr-interest@antlr.org>
	<350130.27975.qm@web94603.mail.in2.yahoo.com>
Message-ID: <00c101cb3e60$69c76990$3d563cb0$@temporal-wave.com>

Well the first thing I get is:

[15:59:05] error(201): t.g:4:5: The following alternatives can never be matched: 3

This is because your parser rule does not make sense. It should be:

simplerule : CHAR* EOF ;

However, that token makes more sense to be called WORD to be honest. IF you cannot launch the debugger after that, then there is something wrong with your setup. As I say below, you should start ANTLRWorks from a command line console and see what it tells you when you try to start the debugger. Do you have firewalls for instance.

Jim


> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of J.R Karthikeyan
> Sent: Tuesday, August 17, 2010 3:47 PM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Regardig time out
> 
> Hi,
> 
>   I am using the simple grammar file. Please find the grammar file attached
> along with this mail. I have attached the screenshot at various stage also.
> Please let me know what I should need to make sure the compiler works.
> 
> The grammar is
> grammar checkforcompile;
> 
> simplerule
>     :    CHAR | EOF |
>     ;
> 
> WHITESPACE  : ( '\t' | ' ' | '\r' | '\n'| '\u000C' )+
>               {
>                  $channel = HIDDEN;
>               }
>             ;
> 
> fragment
> LETTER    :    ('a'..'z' | 'A'..'Z')
>     ;
> 
> CHAR    :    LETTER (LETTER | '_')+
>     ;
> 
> 
> 
> 
> 
> 
> Date: Mon, 16 Aug 2010 11:17:18 -0700
> From: "Jim Idle" <jimi at temporal-wave.com>
> Subject: Re: [antlr-interest] Regardig time out
> To: <antlr-interest at antlr.org>
> Message-ID: <012401cb3d6f$42d28c30$c877a490$@temporal-wave.com>
> Content-Type: text/plain;    charset="us-ascii"
> 
> What does the console print to the screen? Start ANTLRWorks from a
> command shell and look at what it tells you. Also, you need to post the actual
> error messages as there a number of places where you might get some
> timeout message. Finally, use a working example grammar first as it could
> also be an error in your grammar (which you are advised to post if you cannot
> get it to work). For instance if you are trying to run via the debugger, then
> the compile might work but if you had a lexer rule like this:
> 
> BADRULE : ;
> 
> Then that rule will match for ever and never consume any input. There are
> too many variables to know what your issue is from the information supplied.
> 
> Jim
> 
> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > bounces at antlr.org] On Behalf Of J.R Karthikeyan
> > Sent: Monday, August 16, 2010 10:51 AM
> > To: antlr-interest at antlr.org
> > Subject: [antlr-interest] Regardig time out
> >
> > Hi,
> >
> >   I am new to this antlr. I trying to create parser using antlr works.
> > I
> wrote
> > some sample grammer and tried to compile from windows as well as from
> > mac. It is compiling in mac machine but not in windows. I tried to
> > compile different file in my mac. When I try to do that it is not
> > compiling the
> new file.
> > It is always compiling the old file. So I deleted the folder name 'ouput'
> and I
> > think it is created during my compilation. Now none of the file in my
> > mac
> is
> > also compiling and it is giving the same error "time out". I rebooted
> > many times and I make sure that port is not used by any application.
> > But still
> it is
> > showing the same error. Suggestion please..
> >
> >
> > Thanks,
> > Jrk



From jrk1987 at yahoo.co.in  Tue Aug 17 16:04:51 2010
From: jrk1987 at yahoo.co.in (J.R Karthikeyan)
Date: Wed, 18 Aug 2010 04:34:51 +0530 (IST)
Subject: [antlr-interest] how to generate C++ file
In-Reply-To: <mailman.1.1282071601.27499.antlr-interest@antlr.org>
References: <mailman.1.1282071601.27499.antlr-interest@antlr.org>
Message-ID: <875468.59511.qm@web94608.mail.in2.yahoo.com>

Hi,

  I am using ANTLRWorks 1.4 for my project. I would like to generate the C++ 
file from this grammar. I don't find how to do this. Can you give me direction 
in how to generate those files.

Thanks,
Jrk



From jimi at temporal-wave.com  Tue Aug 17 16:09:01 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 17 Aug 2010 16:09:01 -0700
Subject: [antlr-interest] how to generate C++ file
In-Reply-To: <875468.59511.qm@web94608.mail.in2.yahoo.com>
References: <mailman.1.1282071601.27499.antlr-interest@antlr.org>
	<875468.59511.qm@web94608.mail.in2.yahoo.com>
Message-ID: <00c301cb3e61$2e3a17a0$8aae46e0$@temporal-wave.com>

ANTLRWorks does not generate C code (and there is no C++ generator, it is C
that you can compile as C++ if you like.) ANTLRWorks only works with Java
for code generating purposes. Use the command line tool and Makefiles etc
for C. 

You need to start with the downloadable examples and then read the getting
started stuff on the wiki. 

Also don't forget http://antlr.markmail.org 

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of J.R Karthikeyan
> Sent: Tuesday, August 17, 2010 4:05 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] how to generate C++ file
> 
> Hi,
> 
>   I am using ANTLRWorks 1.4 for my project. I would like to generate the
C++
> file from this grammar. I don't find how to do this. Can you give me
direction
> in how to generate those files.
> 
> Thanks,
> Jrk
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From jimi at temporal-wave.com  Tue Aug 17 16:13:44 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 17 Aug 2010 16:13:44 -0700
Subject: [antlr-interest] Antlr 3.2 issues: code too large and "no
	such	attribute: description"
In-Reply-To: <AANLkTinndbFbeUX2FNZp3Nh_xhQHkMKw6w1W-eamTzyD@mail.gmail.com>
References: <AANLkTinndbFbeUX2FNZp3Nh_xhQHkMKw6w1W-eamTzyD@mail.gmail.com>
Message-ID: <00c601cb3e61$d6fe2200$84fa6600$@temporal-wave.com>

The JIRA you quote is not showing the same problems as the error you quote,
hence the patch is unlikely to help. If your grammar is too large with the
debug stuff in it then it is possible that its structure is not so good. It
is also possible that it is just too big for a single file of course. As you
say, you can debug at the java level too - the multiple grammar debugging
stuff in ANTLRWorks does not seem to be quite there.

Are you using the latest jar download to generate at the command line and
not the ANTLR that is embedded in ANTLRWorks? You should really supply the
invocations you are using as otherwise we have to guess. You could try
generating using the ANTLRWorks jar. However, if the code is too big with
debug stuff in it, then there isn't much you can do but start using imports.
Also, try increasing the conversion timeout.

Jim



> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Edson Tirelli
> Sent: Tuesday, August 17, 2010 2:11 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Antlr 3.2 issues: code too large and "no such
> attribute: description"
> 
>    Hey all,
> 
>    Need some advice. Question:
> 
> * short version: Does anyone tried applying the patch from this ticket (
> http://www.antlr.org/jira/browse/ANTLR-378) on ANTLR 3.2? Is it still
good?
> 
> * long version:
> 
>    I am adding support for full Java expressions to Drools
(www.drools.org)
> DRL language, and basically my grammar (that was already complex) now is
> also twice the size it was. Before, I was using ANTLRWorks (1.4) to debug
my
> grammar but now, when I try to debug I get the error:
> 
> "code too large"
> 
>    That is a bit strange to me as the grammar generates just fine when I
use
> the command line tool to generate it, but I figured it might be due to
some
> additional code ANTLRWorks might be generating for debug purposes. My
> search through this list archives and internet found some comments stating
> that the way to go in this case would be to use Composite Grammars, but
the
> problem seems to be that neither antlrworks nor the eclipse plugin have
> proper support to it. I gave it a quick try and it does highlight missing
rules as
> errors in dependent grammars making maintenance a lot harder.
> 
>     So, if I would have to do remote debugging anyway, I tried to do it
with my
> current grammar. Although, when I try to generate the grammar with the "-
> debug" flag on the command line, I get:
> 
>     "[java] error(10):  internal error:
> src/main/resources/org/drools/lang/DRL.g :
> java.util.NoSuchElementException:
> no such attribute: description in template context [orPredicates
notPredicate
> evalPredicate(...)]"
> 
>     This is apparently a known bug reported since ANTLR 3.1.1 (
> http://www.antlr.org/jira/browse/ANTLR-378) for which a patch was
> provided but apparently never applied.
> 
>     Right now I am stuck, since I can not debug neither locally nor
remotely, I
> see only two options: either I go trial and error working on my grammar
> (what can be extremely time consuming for a complex grammar like
> ours) or I try to apply the patch and build my own StringTemplate/ANTLR
> binaries and hope that it will work.
> 
>     So, before spending more time on the later, I wanted to check if
anyone
> else tried that and succeeded, otherwise, I will just go the old way and
debug
> the generated code itself. :(
> 
>     Anyone worked around these problems yet? Any advice?
> 
>     Thanks a lot,
>        Edson
> 
> --
>   Edson Tirelli
>   JBoss Drools Core Development
>   JBoss by Red Hat @ www.jboss.com
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From tirelli at post.com  Tue Aug 17 17:49:08 2010
From: tirelli at post.com (Edson Tirelli)
Date: Tue, 17 Aug 2010 20:49:08 -0400
Subject: [antlr-interest] Antlr 3.2 issues: code too large and "no such
 attribute: description"
In-Reply-To: <00c601cb3e61$d6fe2200$84fa6600$@temporal-wave.com>
References: <AANLkTinndbFbeUX2FNZp3Nh_xhQHkMKw6w1W-eamTzyD@mail.gmail.com>
	<00c601cb3e61$d6fe2200$84fa6600$@temporal-wave.com>
Message-ID: <AANLkTinRvnOzkfarP5qyy7BnUgFUUVoANefAHLRMctqR@mail.gmail.com>

   Hi Jim,

   Thanks for the reply. Lets simplify things and forget antlrworks and the
code too large for now. The most important for me is to be able to compile
the grammar with -debug on the command line.

   On the command line, I am using the following:

$ java -classpath
"antlr-3.2.jar;antlr-runtime-3.2.jar;antlr-2.7.7.jar;stringtemplate-3.2.1.jar"
org.antlr.Tool -debug -lib src/lang src/lang/DRL.g

     I get the error:

    [java] error(10):  internal error:
src/main/resources/org/drools/lang/DRL.g : java.util.NoSuchElementException:
no such attribute: description in template context [orPredicates
notPredicate evalPredicate(...)]

   That seems the same problem reported in
http://www.antlr.org/jira/browse/ANTLR-378 .

   My grammar is here:
http://anonsvn.jboss.org/repos/labs/labs/jbossrules/branches/etirelli/drools-compiler/src/main/resources/org/drools/lang/DRL.g

   As I mentioned before, it is fairly complex. Also, there is a ton of code
in there to support the code editor, what "polutes" the grammar, so I don't
expect anyone to understand it. The important thing is it does compile
without any warnings or errors, except for when I try to use the -debug
flag.

   Thanks

   Edson

2010/8/17 Jim Idle <jimi at temporal-wave.com>

> The JIRA you quote is not showing the same problems as the error you quote,
> hence the patch is unlikely to help. If your grammar is too large with the
> debug stuff in it then it is possible that its structure is not so good. It
> is also possible that it is just too big for a single file of course. As
> you
> say, you can debug at the java level too - the multiple grammar debugging
> stuff in ANTLRWorks does not seem to be quite there.
>
> Are you using the latest jar download to generate at the command line and
> not the ANTLR that is embedded in ANTLRWorks? You should really supply the
> invocations you are using as otherwise we have to guess. You could try
> generating using the ANTLRWorks jar. However, if the code is too big with
> debug stuff in it, then there isn't much you can do but start using
> imports.
> Also, try increasing the conversion timeout.
>
> Jim
>
>
>
> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > bounces at antlr.org] On Behalf Of Edson Tirelli
> > Sent: Tuesday, August 17, 2010 2:11 PM
> > To: antlr-interest at antlr.org
> > Subject: [antlr-interest] Antlr 3.2 issues: code too large and "no such
> > attribute: description"
> >
> >    Hey all,
> >
> >    Need some advice. Question:
> >
> > * short version: Does anyone tried applying the patch from this ticket (
> > http://www.antlr.org/jira/browse/ANTLR-378) on ANTLR 3.2? Is it still
> good?
> >
> > * long version:
> >
> >    I am adding support for full Java expressions to Drools
> (www.drools.org)
> > DRL language, and basically my grammar (that was already complex) now is
> > also twice the size it was. Before, I was using ANTLRWorks (1.4) to debug
> my
> > grammar but now, when I try to debug I get the error:
> >
> > "code too large"
> >
> >    That is a bit strange to me as the grammar generates just fine when I
> use
> > the command line tool to generate it, but I figured it might be due to
> some
> > additional code ANTLRWorks might be generating for debug purposes. My
> > search through this list archives and internet found some comments
> stating
> > that the way to go in this case would be to use Composite Grammars, but
> the
> > problem seems to be that neither antlrworks nor the eclipse plugin have
> > proper support to it. I gave it a quick try and it does highlight missing
> rules as
> > errors in dependent grammars making maintenance a lot harder.
> >
> >     So, if I would have to do remote debugging anyway, I tried to do it
> with my
> > current grammar. Although, when I try to generate the grammar with the "-
> > debug" flag on the command line, I get:
> >
> >     "[java] error(10):  internal error:
> > src/main/resources/org/drools/lang/DRL.g :
> > java.util.NoSuchElementException:
> > no such attribute: description in template context [orPredicates
> notPredicate
> > evalPredicate(...)]"
> >
> >     This is apparently a known bug reported since ANTLR 3.1.1 (
> > http://www.antlr.org/jira/browse/ANTLR-378) for which a patch was
> > provided but apparently never applied.
> >
> >     Right now I am stuck, since I can not debug neither locally nor
> remotely, I
> > see only two options: either I go trial and error working on my grammar
> > (what can be extremely time consuming for a complex grammar like
> > ours) or I try to apply the patch and build my own StringTemplate/ANTLR
> > binaries and hope that it will work.
> >
> >     So, before spending more time on the later, I wanted to check if
> anyone
> > else tried that and succeeded, otherwise, I will just go the old way and
> debug
> > the generated code itself. :(
> >
> >     Anyone worked around these problems yet? Any advice?
> >
> >     Thanks a lot,
> >        Edson
> >
> > --
> >   Edson Tirelli
> >   JBoss Drools Core Development
> >   JBoss by Red Hat @ www.jboss.com
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> > email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>



-- 
  Edson Tirelli
  JBoss Drools Core Development
  JBoss by Red Hat @ www.jboss.com

From power_giordo at yahoo.com.ar  Tue Aug 17 21:10:22 2010
From: power_giordo at yahoo.com.ar (Victor Giordano)
Date: Wed, 18 Aug 2010 01:10:22 -0300
Subject: [antlr-interest] ANTLR 1.4 Issue
In-Reply-To: <AANLkTinRvnOzkfarP5qyy7BnUgFUUVoANefAHLRMctqR@mail.gmail.com>
References: <AANLkTinndbFbeUX2FNZp3Nh_xhQHkMKw6w1W-eamTzyD@mail.gmail.com>	<00c601cb3e61$d6fe2200$84fa6600$@temporal-wave.com>
	<AANLkTinRvnOzkfarP5qyy7BnUgFUUVoANefAHLRMctqR@mail.gmail.com>
Message-ID: <4C6B5D2E.5020701@yahoo.com.ar>

Hi There Guys!. I QUick one this time:
I found something very strange, with the $ reference to label when 
querying about the existence of that "conditional" label.

(I Copy paste the code)

grammar Issue;


base returns [Object ret]
@after
{
	if ($label!=null); <-- DOESN'T WORK
	if (label!=null); <-- WORKS!
}
	: label=rule1 ';';
	
rule1 returns [String value]
: ID {$value=$ID.text;};
	
ID  :	('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*
     ;


WHY... i just don't kwow... i guess is an issue or maybe i am doing 
something from, but in the book of ANTLR from the author a see cleary 
the example that's isnt working...
Well only that!.



From jimi at temporal-wave.com  Wed Aug 18 07:58:18 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 18 Aug 2010 07:58:18 -0700
Subject: [antlr-interest] Antlr 3.2 issues: code too large and "no such
	attribute: description"
In-Reply-To: <AANLkTinRvnOzkfarP5qyy7BnUgFUUVoANefAHLRMctqR@mail.gmail.com>
References: <AANLkTinndbFbeUX2FNZp3Nh_xhQHkMKw6w1W-eamTzyD@mail.gmail.com>	<00c601cb3e61$d6fe2200$84fa6600$@temporal-wave.com>
	<AANLkTinRvnOzkfarP5qyy7BnUgFUUVoANefAHLRMctqR@mail.gmail.com>
Message-ID: <012901cb3ee5$caf0c240$60d246c0$@temporal-wave.com>

A few pointers:

1) Use the complete self-contained jar download and not the string of
individual jars for development, then with the command:

java -Xmx750M -Xincgc -jar C:/antlr/antlr-master-3.2-completejar.jar
-Xconversiontimeout 32000 -debug %*

In a batch file (or script) your grammar generates correctly.

2) You are trying to specify the lexer a little too strongly. The problem
with what you have is that the best you can do error wise with a wrong
character is use the ANY : . {error}; rule to say it is illegal. Ideally
don't allow such huge ranges, but if the language says they are legal then
you have to deal with them of course. 

So where possible you want to allow just about anything you can in an
identifier, then use a semantic check rule that can say "Identifier
'x\u7858yzzz' is illegally named as the character '\u7858'. You just have to
be careful with ambiguities. Perhaps you have to look for the specific
lead-in but then consume until something that must be some other token start
(don't be afraid to use code to do this as it will often be neater than the
generated code for huge tables like this.

Next, don't use ESC : '\' <longlist of alts> for escape codes, as again you
will just get 'error at character 'q' from the lexer which is of no use.
Allow any character to be escaped lexically then check it later where you
can say "The escape sequence \q in string 'aaa\qaaaa'" is not recognized",
which is much more useful.

You can apply this technique to a lot of lexer rules (even hex strings for
instance) and greatly improve the error messages.

3) Take as much code out of the parser action as you can and create a helper
interface, of which your current code gen is an implementer. Pass this in
before parsing starts. Your parser does not look too far away from this, but
instead of 3 or 4 consecutive method calls, you should consider a single
call for a single purpose. Further, if you can do so, other than perhaps
creating a symbol table, don't do anything in the parser except create the
AST, then do a semantic validation  of the AST with good error messages,
then proceed to whatever else the code should do (including syntax
highlighting for instance.) You will have a sequence then where you can
perform syntax highlighting stuff, but also occasionally do semantic checks
(look at how Visual Studio handles C#  for instance).

Hope that is useful to you,

Jim




> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Edson Tirelli
> Sent: Tuesday, August 17, 2010 5:49 PM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Antlr 3.2 issues: code too large and "no
such
> attribute: description"
> 
>    Hi Jim,
> 
>    Thanks for the reply. Lets simplify things and forget antlrworks and
the
> code too large for now. The most important for me is to be able to compile
> the grammar with -debug on the command line.
> 
>    On the command line, I am using the following:
> 
> $ java -classpath
>
"antlr-3.2.jar;antlr-runtime-3.2.jar;antlr-2.7.7.jar;stringtemplate-3.2.1.ja
r"
> org.antlr.Tool -debug -lib src/lang src/lang/DRL.g
> 
>      I get the error:
> 
>     [java] error(10):  internal error:
> src/main/resources/org/drools/lang/DRL.g :
> java.util.NoSuchElementException:
> no such attribute: description in template context [orPredicates
notPredicate
> evalPredicate(...)]
> 
>    That seems the same problem reported in
> http://www.antlr.org/jira/browse/ANTLR-378 .
> 
>    My grammar is here:
>
http://anonsvn.jboss.org/repos/labs/labs/jbossrules/branches/etirelli/drool
> s-compiler/src/main/resources/org/drools/lang/DRL.g
> 
>    As I mentioned before, it is fairly complex. Also, there is a ton of
code in
> there to support the code editor, what "polutes" the grammar, so I don't
> expect anyone to understand it. The important thing is it does compile
> without any warnings or errors, except for when I try to use the -debug
flag.
> 
>    Thanks
> 
>    Edson
> 
> 2010/8/17 Jim Idle <jimi at temporal-wave.com>
> 
> > The JIRA you quote is not showing the same problems as the error you
> > quote, hence the patch is unlikely to help. If your grammar is too
> > large with the debug stuff in it then it is possible that its
> > structure is not so good. It is also possible that it is just too big
> > for a single file of course. As you say, you can debug at the java
> > level too - the multiple grammar debugging stuff in ANTLRWorks does
> > not seem to be quite there.
> >
> > Are you using the latest jar download to generate at the command line
> > and not the ANTLR that is embedded in ANTLRWorks? You should really
> > supply the invocations you are using as otherwise we have to guess.
> > You could try generating using the ANTLRWorks jar. However, if the
> > code is too big with debug stuff in it, then there isn't much you can
> > do but start using imports.
> > Also, try increasing the conversion timeout.
> >
> > Jim
> >
> >
> >
> > > -----Original Message-----
> > > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > > bounces at antlr.org] On Behalf Of Edson Tirelli
> > > Sent: Tuesday, August 17, 2010 2:11 PM
> > > To: antlr-interest at antlr.org
> > > Subject: [antlr-interest] Antlr 3.2 issues: code too large and "no
> > > such
> > > attribute: description"
> > >
> > >    Hey all,
> > >
> > >    Need some advice. Question:
> > >
> > > * short version: Does anyone tried applying the patch from this
> > > ticket (
> > > http://www.antlr.org/jira/browse/ANTLR-378) on ANTLR 3.2? Is it
> > > still
> > good?
> > >
> > > * long version:
> > >
> > >    I am adding support for full Java expressions to Drools
> > (www.drools.org)
> > > DRL language, and basically my grammar (that was already complex)
> > > now is also twice the size it was. Before, I was using ANTLRWorks
> > > (1.4) to debug
> > my
> > > grammar but now, when I try to debug I get the error:
> > >
> > > "code too large"
> > >
> > >    That is a bit strange to me as the grammar generates just fine
> > > when I
> > use
> > > the command line tool to generate it, but I figured it might be due
> > > to
> > some
> > > additional code ANTLRWorks might be generating for debug purposes.
> > > My search through this list archives and internet found some
> > > comments
> > stating
> > > that the way to go in this case would be to use Composite Grammars,
> > > but
> > the
> > > problem seems to be that neither antlrworks nor the eclipse plugin
> > > have proper support to it. I gave it a quick try and it does
> > > highlight missing
> > rules as
> > > errors in dependent grammars making maintenance a lot harder.
> > >
> > >     So, if I would have to do remote debugging anyway, I tried to do
> > > it
> > with my
> > > current grammar. Although, when I try to generate the grammar with
> > > the "- debug" flag on the command line, I get:
> > >
> > >     "[java] error(10):  internal error:
> > > src/main/resources/org/drools/lang/DRL.g :
> > > java.util.NoSuchElementException:
> > > no such attribute: description in template context [orPredicates
> > notPredicate
> > > evalPredicate(...)]"
> > >
> > >     This is apparently a known bug reported since ANTLR 3.1.1 (
> > > http://www.antlr.org/jira/browse/ANTLR-378) for which a patch was
> > > provided but apparently never applied.
> > >
> > >     Right now I am stuck, since I can not debug neither locally nor
> > remotely, I
> > > see only two options: either I go trial and error working on my
> > > grammar (what can be extremely time consuming for a complex grammar
> > > like
> > > ours) or I try to apply the patch and build my own
> > > StringTemplate/ANTLR binaries and hope that it will work.
> > >
> > >     So, before spending more time on the later, I wanted to check if
> > anyone
> > > else tried that and succeeded, otherwise, I will just go the old way
> > > and
> > debug
> > > the generated code itself. :(
> > >
> > >     Anyone worked around these problems yet? Any advice?
> > >
> > >     Thanks a lot,
> > >        Edson
> > >
> > > --
> > >   Edson Tirelli
> > >   JBoss Drools Core Development
> > >   JBoss by Red Hat @ www.jboss.com
> > >
> > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > Unsubscribe:
> > > http://www.antlr.org/mailman/options/antlr-interest/your-
> > > email-address
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >
> 
> 
> 
> --
>   Edson Tirelli
>   JBoss Drools Core Development
>   JBoss by Red Hat @ www.jboss.com
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From alex.marin at amiq.ro  Wed Aug 18 07:59:59 2010
From: alex.marin at amiq.ro (Alex Marin)
Date: Wed, 18 Aug 2010 17:59:59 +0300
Subject: [antlr-interest] ANTLR 2.7.7 - prepend to InputBuffer
Message-ID: <4C6BF56F.8060100@amiq.ro>

Hello everyone,

Is it possible in ANTLR 2.7.7 to add characters on the fly to a lexer's 
InputBuffer? Do you have any suggestion/guideline/experience on how to 
do this? (without re-implementing the InputBuffer/CharQueue classes)

I will explain the reason behind the need to do this. The language we 
are lexing allows pre-processing, by using C-like defines (or macros).

// Define foo macro
`define foo this is the replacement of foo

// Use foo macro
`foo // this expands to 'this is the replacement of foo'

// Define moo macro with a parameter
`define moo(x) x+2

// Use moo macro
`moo(1) // this expands to '1+2'

At the moment, when our lexer encounters a macro, it starts another 
lexer which lexes the replacement. E.g:

...
`define foo this is the replacement of foo
...
`foo // Here another lexer is started and provided the input stream 
'this is the replacement of foo'
...

This approach works very well at the time being, except for the 
situations when the replacement text is not a fully "lexable" piece of 
code, like in the example below:

...
`define a(x,y) x+y // Define macro a with parameters x and y
`define b `a(1  // Define macro b without parameters
...
`b,2) // Use macro b; this should expand to `a(1,2) and therefore to 1+2
...

Now, the problem is that the lexer we start for `b will lex '`a(`' which 
is not lexically correct and will fail with an error.

The best solution would be to be able to insert in the main lexer's 
buffer the replacement of `b and continue lexing normally. Of course, no 
new lexer would be needed then. So, after matching `b, the buffer would 
look like `a(1,2)

Thanks in advance,
Alex


From jimi at temporal-wave.com  Wed Aug 18 08:29:24 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 18 Aug 2010 08:29:24 -0700
Subject: [antlr-interest] ANTLR 2.7.7 - prepend to InputBuffer
In-Reply-To: <4C6BF56F.8060100@amiq.ro>
References: <4C6BF56F.8060100@amiq.ro>
Message-ID: <012b01cb3eea$232381b0$696a8510$@temporal-wave.com>

The better solution is to create a separate pre-processor stage. You run the
pre-processor and it feed its output in to the 'real' lexer. This is a lot
easier to maintain and by the time you had messed around trying to create
secondary lexers, include stacks and so on for other solutions, you end up
with this being faster. Also, the ability to have a much simpler lexer that
is just handling #if, #define and macro expansion makes things much easier
(other than macros in macros).

Now, if your environment is known,then you could just implement this in m4,
which is available just about everywhere.

http://en.wikipedia.org/wiki/Preprocessor
http://en.wikipedia.org/wiki/M4_(computer_language) 
http://www.gnu.org/software/m4/ 

You could also just run the C pre-processor and define your language as
using the C macro engine.

And further, if you can do without macros altogether, you can stop the
language users creating unreadable, undebuggable code because they thought
macros were cool and clever and used them nested to 23 levels ;-)

Jim



> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Alex Marin
> Sent: Wednesday, August 18, 2010 8:00 AM
> To: antlr-interest at antlr.org
> Cc: etools at amiq.ro
> Subject: [antlr-interest] ANTLR 2.7.7 - prepend to InputBuffer
> 
> Hello everyone,
> 
> Is it possible in ANTLR 2.7.7 to add characters on the fly to a lexer's
> InputBuffer? Do you have any suggestion/guideline/experience on how to
> do this? (without re-implementing the InputBuffer/CharQueue classes)
> 
> I will explain the reason behind the need to do this. The language we are
> lexing allows pre-processing, by using C-like defines (or macros).
> 
> // Define foo macro
> `define foo this is the replacement of foo
> 
> // Use foo macro
> `foo // this expands to 'this is the replacement of foo'
> 
> // Define moo macro with a parameter
> `define moo(x) x+2
> 
> // Use moo macro
> `moo(1) // this expands to '1+2'
> 
> At the moment, when our lexer encounters a macro, it starts another lexer
> which lexes the replacement. E.g:
> 
> ...
> `define foo this is the replacement of foo ...
> `foo // Here another lexer is started and provided the input stream 'this
is
> the replacement of foo'
> ...
> 
> This approach works very well at the time being, except for the situations
> when the replacement text is not a fully "lexable" piece of code, like in
the
> example below:
> 
> ...
> `define a(x,y) x+y // Define macro a with parameters x and y `define b
`a(1  //
> Define macro b without parameters ...
> `b,2) // Use macro b; this should expand to `a(1,2) and therefore to 1+2
...
> 
> Now, the problem is that the lexer we start for `b will lex '`a(`' which
is not
> lexically correct and will fail with an error.
> 
> The best solution would be to be able to insert in the main lexer's buffer
the
> replacement of `b and continue lexing normally. Of course, no new lexer
> would be needed then. So, after matching `b, the buffer would look like
> `a(1,2)
> 
> Thanks in advance,
> Alex
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From alex.marin at amiq.ro  Wed Aug 18 10:39:18 2010
From: alex.marin at amiq.ro (Alex Marin)
Date: Wed, 18 Aug 2010 20:39:18 +0300
Subject: [antlr-interest] ANTLR 2.7.7 - prepend to InputBuffer
In-Reply-To: <012b01cb3eea$232381b0$696a8510$@temporal-wave.com>
References: <4C6BF56F.8060100@amiq.ro>
	<012b01cb3eea$232381b0$696a8510$@temporal-wave.com>
Message-ID: <4C6C1AC6.8010500@amiq.ro>

Hi Jim,

You are right, this would be the straightforward way to handle the 
problem in its entirety. However, we wouldn't want to rewrite the 
preprocessing part of the lexer, as it works fine except for the cases 
I've mentioned. Right now we hope that implementing an InputBuffer which 
accepts its input to be modified during lexing would be of less impact 
to what we already have.

As for the language users - in my opinion they will always _use_ the 
language in _all_ possible ways, no matter how unreadable or twisted 
this would render the code. If anyone could ever change this, I think 
it's the language designers, not the parser implementers :)

Thanks for your suggestion anyway!
Alex

On 08/18/2010 06:29 PM, Jim Idle wrote:
> The better solution is to create a separate pre-processor stage. You run the
> pre-processor and it feed its output in to the 'real' lexer. This is a lot
> easier to maintain and by the time you had messed around trying to create
> secondary lexers, include stacks and so on for other solutions, you end up
> with this being faster. Also, the ability to have a much simpler lexer that
> is just handling #if, #define and macro expansion makes things much easier
> (other than macros in macros).
>
> Now, if your environment is known,then you could just implement this in m4,
> which is available just about everywhere.
>
> http://en.wikipedia.org/wiki/Preprocessor
> http://en.wikipedia.org/wiki/M4_(computer_language)
> http://www.gnu.org/software/m4/
>
> You could also just run the C pre-processor and define your language as
> using the C macro engine.
>
> And further, if you can do without macros altogether, you can stop the
> language users creating unreadable, undebuggable code because they thought
> macros were cool and clever and used them nested to 23 levels ;-)
>
> Jim
>
>
>
>    
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Alex Marin
>> Sent: Wednesday, August 18, 2010 8:00 AM
>> To: antlr-interest at antlr.org
>> Cc: etools at amiq.ro
>> Subject: [antlr-interest] ANTLR 2.7.7 - prepend to InputBuffer
>>
>> Hello everyone,
>>
>> Is it possible in ANTLR 2.7.7 to add characters on the fly to a lexer's
>> InputBuffer? Do you have any suggestion/guideline/experience on how to
>> do this? (without re-implementing the InputBuffer/CharQueue classes)
>>
>> I will explain the reason behind the need to do this. The language we are
>> lexing allows pre-processing, by using C-like defines (or macros).
>>
>> // Define foo macro
>> `define foo this is the replacement of foo
>>
>> // Use foo macro
>> `foo // this expands to 'this is the replacement of foo'
>>
>> // Define moo macro with a parameter
>> `define moo(x) x+2
>>
>> // Use moo macro
>> `moo(1) // this expands to '1+2'
>>
>> At the moment, when our lexer encounters a macro, it starts another lexer
>> which lexes the replacement. E.g:
>>
>> ...
>> `define foo this is the replacement of foo ...
>> `foo // Here another lexer is started and provided the input stream 'this
>>      
> is
>    
>> the replacement of foo'
>> ...
>>
>> This approach works very well at the time being, except for the situations
>> when the replacement text is not a fully "lexable" piece of code, like in
>>      
> the
>    
>> example below:
>>
>> ...
>> `define a(x,y) x+y // Define macro a with parameters x and y `define b
>>      
> `a(1  //
>    
>> Define macro b without parameters ...
>> `b,2) // Use macro b; this should expand to `a(1,2) and therefore to 1+2
>>      
> ...
>    
>> Now, the problem is that the lexer we start for `b will lex '`a(`' which
>>      
> is not
>    
>> lexically correct and will fail with an error.
>>
>> The best solution would be to be able to insert in the main lexer's buffer
>>      
> the
>    
>> replacement of `b and continue lexing normally. Of course, no new lexer
>> would be needed then. So, after matching `b, the buffer would look like
>> `a(1,2)
>>
>> Thanks in advance,
>> Alex
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>> email-address
>>      
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>    

From jimi at temporal-wave.com  Wed Aug 18 11:14:32 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 18 Aug 2010 11:14:32 -0700
Subject: [antlr-interest] ANTLR 2.7.7 - prepend to InputBuffer
In-Reply-To: <4C6C1AC6.8010500@amiq.ro>
References: <4C6BF56F.8060100@amiq.ro>	<012b01cb3eea$232381b0$696a8510$@temporal-wave.com>
	<4C6C1AC6.8010500@amiq.ro>
Message-ID: <016401cb3f01$3521dd00$9f659700$@temporal-wave.com>

Then yes, I suggest that you implement a custom input stream that allows you
to push input in to a FIFO, which is always read before the supplied input
stream. Of course you will need a stack of these because of nested macros
and so on. You would need to override LA and related methods but it should
not be a big deal.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Alex Marin
> Sent: Wednesday, August 18, 2010 10:39 AM
> To: antlr-interest at antlr.org
> Cc: etools at amiq.ro
> Subject: Re: [antlr-interest] ANTLR 2.7.7 - prepend to InputBuffer
> 
> Hi Jim,
> 
> You are right, this would be the straightforward way to handle the problem
in
> its entirety. However, we wouldn't want to rewrite the preprocessing part
of
> the lexer, as it works fine except for the cases I've mentioned. Right now
we
> hope that implementing an InputBuffer which accepts its input to be
> modified during lexing would be of less impact to what we already have.
> 
> As for the language users - in my opinion they will always _use_ the
language
> in _all_ possible ways, no matter how unreadable or twisted this would
> render the code. If anyone could ever change this, I think it's the
language
> designers, not the parser implementers :)
> 
> Thanks for your suggestion anyway!
> Alex
> 
> On 08/18/2010 06:29 PM, Jim Idle wrote:
> > The better solution is to create a separate pre-processor stage. You
> > run the pre-processor and it feed its output in to the 'real' lexer.
> > This is a lot easier to maintain and by the time you had messed around
> > trying to create secondary lexers, include stacks and so on for other
> > solutions, you end up with this being faster. Also, the ability to
> > have a much simpler lexer that is just handling #if, #define and macro
> > expansion makes things much easier (other than macros in macros).
> >
> > Now, if your environment is known,then you could just implement this
> > in m4, which is available just about everywhere.
> >
> > http://en.wikipedia.org/wiki/Preprocessor
> > http://en.wikipedia.org/wiki/M4_(computer_language)
> > http://www.gnu.org/software/m4/
> >
> > You could also just run the C pre-processor and define your language
> > as using the C macro engine.
> >
> > And further, if you can do without macros altogether, you can stop the
> > language users creating unreadable, undebuggable code because they
> > thought macros were cool and clever and used them nested to 23 levels
> > ;-)
> >
> > Jim
> >
> >
> >
> >
> >> -----Original Message-----
> >> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> >> bounces at antlr.org] On Behalf Of Alex Marin
> >> Sent: Wednesday, August 18, 2010 8:00 AM
> >> To: antlr-interest at antlr.org
> >> Cc: etools at amiq.ro
> >> Subject: [antlr-interest] ANTLR 2.7.7 - prepend to InputBuffer
> >>
> >> Hello everyone,
> >>
> >> Is it possible in ANTLR 2.7.7 to add characters on the fly to a
> >> lexer's InputBuffer? Do you have any suggestion/guideline/experience
> >> on how to do this? (without re-implementing the InputBuffer/CharQueue
> >> classes)
> >>
> >> I will explain the reason behind the need to do this. The language we
> >> are lexing allows pre-processing, by using C-like defines (or macros).
> >>
> >> // Define foo macro
> >> `define foo this is the replacement of foo
> >>
> >> // Use foo macro
> >> `foo // this expands to 'this is the replacement of foo'
> >>
> >> // Define moo macro with a parameter
> >> `define moo(x) x+2
> >>
> >> // Use moo macro
> >> `moo(1) // this expands to '1+2'
> >>
> >> At the moment, when our lexer encounters a macro, it starts another
> >> lexer which lexes the replacement. E.g:
> >>
> >> ...
> >> `define foo this is the replacement of foo ...
> >> `foo // Here another lexer is started and provided the input stream
> >> 'this
> >>
> > is
> >
> >> the replacement of foo'
> >> ...
> >>
> >> This approach works very well at the time being, except for the
> >> situations when the replacement text is not a fully "lexable" piece
> >> of code, like in
> >>
> > the
> >
> >> example below:
> >>
> >> ...
> >> `define a(x,y) x+y // Define macro a with parameters x and y `define
> >> b
> >>
> > `a(1  //
> >
> >> Define macro b without parameters ...
> >> `b,2) // Use macro b; this should expand to `a(1,2) and therefore to
> >> 1+2
> >>
> > ...
> >
> >> Now, the problem is that the lexer we start for `b will lex '`a(`'
> >> which
> >>
> > is not
> >
> >> lexically correct and will fail with an error.
> >>
> >> The best solution would be to be able to insert in the main lexer's
> >> buffer
> >>
> > the
> >
> >> replacement of `b and continue lexing normally. Of course, no new
> >> lexer would be needed then. So, after matching `b, the buffer would
> >> look like
> >> `a(1,2)
> >>
> >> Thanks in advance,
> >> Alex
> >>
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-
> >> email-address
> >>
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >
> >
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From tirelli at post.com  Wed Aug 18 12:36:32 2010
From: tirelli at post.com (Edson Tirelli)
Date: Wed, 18 Aug 2010 15:36:32 -0400
Subject: [antlr-interest] Antlr 3.2 issues: code too large and "no such
 attribute: description"
In-Reply-To: <012901cb3ee5$caf0c240$60d246c0$@temporal-wave.com>
References: <AANLkTinndbFbeUX2FNZp3Nh_xhQHkMKw6w1W-eamTzyD@mail.gmail.com>
	<00c601cb3e61$d6fe2200$84fa6600$@temporal-wave.com>
	<AANLkTinRvnOzkfarP5qyy7BnUgFUUVoANefAHLRMctqR@mail.gmail.com>
	<012901cb3ee5$caf0c240$60d246c0$@temporal-wave.com>
Message-ID: <AANLkTi=thHF9UV5t73S8vdWUwN5xJz0-EUrGHvDysm+9@mail.gmail.com>

   Hi Jim,

   Thank you a lot for your tips. It was very helpful.

   A few comments:

1. I actually use maven and the project dependencies to generate the
grammars. The command line was just a "simplified" example. Now I am curious
why the separate jars still give me the same error when I try to generate
the grammar, even using your parameters, but when I use the "master jar" it
works fine?!

   Using the master jar is a bit complicate as Drools is an open source
project and maven relies on the public maven repositories, so ideally, ANTLR
should distribute to maven repos jars that work the same as the ones
downloaded from the project page. But anyway, for my development here I will
use the master jar for now.

2. Regarding the unicode ranges, believe or not, it is a requirement that
users are able to create identifiers using oriental characters, since lots
of customers/users are Japanese. Regarding the ESC, thanks for the tip, I
will try to adapt my grammar.

3. Thanks. As now I am getting code too large on the command line as well
when generating the grammar with debug info, I will refactor and split the
grammar into a Composite grammar. I will try to reduce the code on parser
actions as you suggested.

   Thanks a lot,
      Edson


2010/8/18 Jim Idle <jimi at temporal-wave.com>

> A few pointers:
>
> 1) Use the complete self-contained jar download and not the string of
> individual jars for development, then with the command:
>
> java -Xmx750M -Xincgc -jar C:/antlr/antlr-master-3.2-completejar.jar
> -Xconversiontimeout 32000 -debug %*
>
> In a batch file (or script) your grammar generates correctly.
>
> 2) You are trying to specify the lexer a little too strongly. The problem
> with what you have is that the best you can do error wise with a wrong
> character is use the ANY : . {error}; rule to say it is illegal. Ideally
> don't allow such huge ranges, but if the language says they are legal then
> you have to deal with them of course.
>
> So where possible you want to allow just about anything you can in an
> identifier, then use a semantic check rule that can say "Identifier
> 'x\u7858yzzz' is illegally named as the character '\u7858'. You just have
> to
> be careful with ambiguities. Perhaps you have to look for the specific
> lead-in but then consume until something that must be some other token
> start
> (don't be afraid to use code to do this as it will often be neater than the
> generated code for huge tables like this.
>
> Next, don't use ESC : '\' <longlist of alts> for escape codes, as again you
> will just get 'error at character 'q' from the lexer which is of no use.
> Allow any character to be escaped lexically then check it later where you
> can say "The escape sequence \q in string 'aaa\qaaaa'" is not recognized",
> which is much more useful.
>
> You can apply this technique to a lot of lexer rules (even hex strings for
> instance) and greatly improve the error messages.
>
> 3) Take as much code out of the parser action as you can and create a
> helper
> interface, of which your current code gen is an implementer. Pass this in
> before parsing starts. Your parser does not look too far away from this,
> but
> instead of 3 or 4 consecutive method calls, you should consider a single
> call for a single purpose. Further, if you can do so, other than perhaps
> creating a symbol table, don't do anything in the parser except create the
> AST, then do a semantic validation  of the AST with good error messages,
> then proceed to whatever else the code should do (including syntax
> highlighting for instance.) You will have a sequence then where you can
> perform syntax highlighting stuff, but also occasionally do semantic checks
> (look at how Visual Studio handles C#  for instance).
>
> Hope that is useful to you,
>
> Jim
>
>
>
>
> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > bounces at antlr.org] On Behalf Of Edson Tirelli
> > Sent: Tuesday, August 17, 2010 5:49 PM
> > To: antlr-interest at antlr.org
> > Subject: Re: [antlr-interest] Antlr 3.2 issues: code too large and "no
> such
> > attribute: description"
> >
> >    Hi Jim,
> >
> >    Thanks for the reply. Lets simplify things and forget antlrworks and
> the
> > code too large for now. The most important for me is to be able to
> compile
> > the grammar with -debug on the command line.
> >
> >    On the command line, I am using the following:
> >
> > $ java -classpath
> >
>
> "antlr-3.2.jar;antlr-runtime-3.2.jar;antlr-2.7.7.jar;stringtemplate-3.2.1.ja
> r"
> > org.antlr.Tool -debug -lib src/lang src/lang/DRL.g
> >
> >      I get the error:
> >
> >     [java] error(10):  internal error:
> > src/main/resources/org/drools/lang/DRL.g :
> > java.util.NoSuchElementException:
> > no such attribute: description in template context [orPredicates
> notPredicate
> > evalPredicate(...)]
> >
> >    That seems the same problem reported in
> > http://www.antlr.org/jira/browse/ANTLR-378 .
> >
> >    My grammar is here:
> >
> http://anonsvn.jboss.org/repos/labs/labs/jbossrules/branches/etirelli/drool
> > s-compiler/src/main/resources/org/drools/lang/DRL.g
> >
> >    As I mentioned before, it is fairly complex. Also, there is a ton of
> code in
> > there to support the code editor, what "polutes" the grammar, so I don't
> > expect anyone to understand it. The important thing is it does compile
> > without any warnings or errors, except for when I try to use the -debug
> flag.
> >
> >    Thanks
> >
> >    Edson
> >
> > 2010/8/17 Jim Idle <jimi at temporal-wave.com>
> >
> > > The JIRA you quote is not showing the same problems as the error you
> > > quote, hence the patch is unlikely to help. If your grammar is too
> > > large with the debug stuff in it then it is possible that its
> > > structure is not so good. It is also possible that it is just too big
> > > for a single file of course. As you say, you can debug at the java
> > > level too - the multiple grammar debugging stuff in ANTLRWorks does
> > > not seem to be quite there.
> > >
> > > Are you using the latest jar download to generate at the command line
> > > and not the ANTLR that is embedded in ANTLRWorks? You should really
> > > supply the invocations you are using as otherwise we have to guess.
> > > You could try generating using the ANTLRWorks jar. However, if the
> > > code is too big with debug stuff in it, then there isn't much you can
> > > do but start using imports.
> > > Also, try increasing the conversion timeout.
> > >
> > > Jim
> > >
> > >
> > >
> > > > -----Original Message-----
> > > > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > > > bounces at antlr.org] On Behalf Of Edson Tirelli
> > > > Sent: Tuesday, August 17, 2010 2:11 PM
> > > > To: antlr-interest at antlr.org
> > > > Subject: [antlr-interest] Antlr 3.2 issues: code too large and "no
> > > > such
> > > > attribute: description"
> > > >
> > > >    Hey all,
> > > >
> > > >    Need some advice. Question:
> > > >
> > > > * short version: Does anyone tried applying the patch from this
> > > > ticket (
> > > > http://www.antlr.org/jira/browse/ANTLR-378) on ANTLR 3.2? Is it
> > > > still
> > > good?
> > > >
> > > > * long version:
> > > >
> > > >    I am adding support for full Java expressions to Drools
> > > (www.drools.org)
> > > > DRL language, and basically my grammar (that was already complex)
> > > > now is also twice the size it was. Before, I was using ANTLRWorks
> > > > (1.4) to debug
> > > my
> > > > grammar but now, when I try to debug I get the error:
> > > >
> > > > "code too large"
> > > >
> > > >    That is a bit strange to me as the grammar generates just fine
> > > > when I
> > > use
> > > > the command line tool to generate it, but I figured it might be due
> > > > to
> > > some
> > > > additional code ANTLRWorks might be generating for debug purposes.
> > > > My search through this list archives and internet found some
> > > > comments
> > > stating
> > > > that the way to go in this case would be to use Composite Grammars,
> > > > but
> > > the
> > > > problem seems to be that neither antlrworks nor the eclipse plugin
> > > > have proper support to it. I gave it a quick try and it does
> > > > highlight missing
> > > rules as
> > > > errors in dependent grammars making maintenance a lot harder.
> > > >
> > > >     So, if I would have to do remote debugging anyway, I tried to do
> > > > it
> > > with my
> > > > current grammar. Although, when I try to generate the grammar with
> > > > the "- debug" flag on the command line, I get:
> > > >
> > > >     "[java] error(10):  internal error:
> > > > src/main/resources/org/drools/lang/DRL.g :
> > > > java.util.NoSuchElementException:
> > > > no such attribute: description in template context [orPredicates
> > > notPredicate
> > > > evalPredicate(...)]"
> > > >
> > > >     This is apparently a known bug reported since ANTLR 3.1.1 (
> > > > http://www.antlr.org/jira/browse/ANTLR-378) for which a patch was
> > > > provided but apparently never applied.
> > > >
> > > >     Right now I am stuck, since I can not debug neither locally nor
> > > remotely, I
> > > > see only two options: either I go trial and error working on my
> > > > grammar (what can be extremely time consuming for a complex grammar
> > > > like
> > > > ours) or I try to apply the patch and build my own
> > > > StringTemplate/ANTLR binaries and hope that it will work.
> > > >
> > > >     So, before spending more time on the later, I wanted to check if
> > > anyone
> > > > else tried that and succeeded, otherwise, I will just go the old way
> > > > and
> > > debug
> > > > the generated code itself. :(
> > > >
> > > >     Anyone worked around these problems yet? Any advice?
> > > >
> > > >     Thanks a lot,
> > > >        Edson
> > > >
> > > > --
> > > >   Edson Tirelli
> > > >   JBoss Drools Core Development
> > > >   JBoss by Red Hat @ www.jboss.com
> > > >
> > > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > > Unsubscribe:
> > > > http://www.antlr.org/mailman/options/antlr-interest/your-
> > > > email-address
> > >
> > >
> > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > Unsubscribe:
> > > http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> > >
> >
> >
> >
> > --
> >   Edson Tirelli
> >   JBoss Drools Core Development
> >   JBoss by Red Hat @ www.jboss.com
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> > email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>



-- 
  Edson Tirelli
  JBoss Drools Core Development
  JBoss by Red Hat @ www.jboss.com

From j at junkwallah.org  Wed Aug 18 12:52:07 2010
From: j at junkwallah.org (Junkman)
Date: Wed, 18 Aug 2010 12:52:07 -0700
Subject: [antlr-interest] Antlr 3.2 issues: code too large and "no such
 attribute: description"
In-Reply-To: <AANLkTi=thHF9UV5t73S8vdWUwN5xJz0-EUrGHvDysm+9@mail.gmail.com>
References: <AANLkTinndbFbeUX2FNZp3Nh_xhQHkMKw6w1W-eamTzyD@mail.gmail.com>	<00c601cb3e61$d6fe2200$84fa6600$@temporal-wave.com>	<AANLkTinRvnOzkfarP5qyy7BnUgFUUVoANefAHLRMctqR@mail.gmail.com>	<012901cb3ee5$caf0c240$60d246c0$@temporal-wave.com>
	<AANLkTi=thHF9UV5t73S8vdWUwN5xJz0-EUrGHvDysm+9@mail.gmail.com>
Message-ID: <4C6C39E7.3030403@junkwallah.org>

Hi Edson,

Just curious.  How big is the grammar file?

Jay

Edson Tirelli wrote:
>    Hi Jim,
> 
>    Thank you a lot for your tips. It was very helpful.
> 
>    A few comments:
> 
...
> 
> 3. Thanks. As now I am getting code too large on the command line as well
> when generating the grammar with debug info, I will refactor and split the
> grammar into a Composite grammar. I will try to reduce the code on parser
> actions as you suggested.
> 
>    Thanks a lot,
>       Edson
> 
> 

From acondit at ipns.com  Wed Aug 18 12:54:23 2010
From: acondit at ipns.com (Alan Condit)
Date: Wed, 18 Aug 2010 12:54:23 -0700
Subject: [antlr-interest] how to generate C++ file
In-Reply-To: <mailman.0.1282158001.27350.antlr-interest@antlr.org>
References: <mailman.0.1282158001.27350.antlr-interest@antlr.org>
Message-ID: <16E97E18-C55A-4682-8C08-53B5DD36BE9E@ipns.com>

Jim,

Actually, ANTLRWorks will generate the C code, it just won't let you see the resultant code in ANTLRWorks.
As long as the grammar file designates the output language and it has the appropriate 
stg files it will generate the language. I am currently working on the stg templates 
for ObjC and I am generating the output files through ANTLRWorks.

Alan
---

Alan Condit
1085 Tierra Ct.
Woodburn, OR 97071

Email -- acondit at ipns.com
Home-Office (503) 982-0906

On Aug 18, 2010, at 12:00 PM, antlr-interest-request at antlr.org wrote:

> From: "Jim Idle" <jimi at temporal-wave.com>
> Date: August 17, 2010 4:09:01 PM PDT
> To: <antlr-interest at antlr.org>
> Subject: Re: [antlr-interest] how to generate C++ file
> 
> 
> ANTLRWorks does not generate C code (and there is no C++ generator, it is C
> that you can compile as C++ if you like.) ANTLRWorks only works with Java
> for code generating purposes. Use the command line tool and Makefiles etc
> for C. 
> 
> You need to start with the downloadable examples and then read the getting
> started stuff on the wiki. 
> 
> Also don't forget http://antlr.markmail.org 
> 
> Jim
> 
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of J.R Karthikeyan
>> Sent: Tuesday, August 17, 2010 4:05 PM
>> To: antlr-interest at antlr.org
>> Subject: [antlr-interest] how to generate C++ file
>> 
>> Hi,
>> 
>>  I am using ANTLRWorks 1.4 for my project. I would like to generate the
> C++
>> file from this grammar. I don't find how to do this. Can you give me
> direction
>> in how to generate those files.
>> 
>> Thanks,
>> Jrk
>> 
>> 
>> 
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>> email-address
> 


From tirelli at post.com  Wed Aug 18 12:55:40 2010
From: tirelli at post.com (Edson Tirelli)
Date: Wed, 18 Aug 2010 15:55:40 -0400
Subject: [antlr-interest] Antlr 3.2 issues: code too large and "no such
 attribute: description"
In-Reply-To: <4C6C39E7.3030403@junkwallah.org>
References: <AANLkTinndbFbeUX2FNZp3Nh_xhQHkMKw6w1W-eamTzyD@mail.gmail.com>
	<00c601cb3e61$d6fe2200$84fa6600$@temporal-wave.com>
	<AANLkTinRvnOzkfarP5qyy7BnUgFUUVoANefAHLRMctqR@mail.gmail.com>
	<012901cb3ee5$caf0c240$60d246c0$@temporal-wave.com>
	<AANLkTi=thHF9UV5t73S8vdWUwN5xJz0-EUrGHvDysm+9@mail.gmail.com>
	<4C6C39E7.3030403@junkwallah.org>
Message-ID: <AANLkTi=YAG=ACk8YgVN-=25ZeVtHqrUKvM-GHn4p7eHY@mail.gmail.com>

    Source is here:


http://anonsvn.jboss.org/repos/labs/labs/jbossrules/branches/etirelli/drools-compiler/src/main/resources/org/drools/lang/DRL.g

    The generated Java file has 34470 lines when compiled with -debug.
Without debug, 26k lines.

    Edson


2010/8/18 Junkman <j at junkwallah.org>

> Hi Edson,
>
> Just curious.  How big is the grammar file?
>
> Jay
>
> Edson Tirelli wrote:
> >    Hi Jim,
> >
> >    Thank you a lot for your tips. It was very helpful.
> >
> >    A few comments:
> >
> ...
> >
> > 3. Thanks. As now I am getting code too large on the command line as well
> > when generating the grammar with debug info, I will refactor and split
> the
> > grammar into a Composite grammar. I will try to reduce the code on parser
> > actions as you suggested.
> >
> >    Thanks a lot,
> >       Edson
> >
> >
>



-- 
  Edson Tirelli
  JBoss Drools Core Development
  JBoss by Red Hat @ www.jboss.com

From jimi at temporal-wave.com  Wed Aug 18 14:29:37 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 18 Aug 2010 14:29:37 -0700
Subject: [antlr-interest] Antlr 3.2 issues: code too large and "no such
	attribute: description"
In-Reply-To: <AANLkTi=thHF9UV5t73S8vdWUwN5xJz0-EUrGHvDysm+9@mail.gmail.com>
References: <AANLkTinndbFbeUX2FNZp3Nh_xhQHkMKw6w1W-eamTzyD@mail.gmail.com>	<00c601cb3e61$d6fe2200$84fa6600$@temporal-wave.com>	<AANLkTinRvnOzkfarP5qyy7BnUgFUUVoANefAHLRMctqR@mail.gmail.com>	<012901cb3ee5$caf0c240$60d246c0$@temporal-wave.com>
	<AANLkTi=thHF9UV5t73S8vdWUwN5xJz0-EUrGHvDysm+9@mail.gmail.com>
Message-ID: <018901cb3f1c$75674f10$6035ed30$@temporal-wave.com>

The maven jars are in fact the same as I use maven to build the complete
jar. So perhaps you are not using the same dependencies as the maven built
single jar? 

Japanese identifiers are fine of course, but it is more the complicated DFAs
that will be generated to handle all the options that youcan try to close
down a bit then use semantic checks.

Good luck :-)

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Edson Tirelli
> Sent: Wednesday, August 18, 2010 12:37 PM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Antlr 3.2 issues: code too large and "no
such
> attribute: description"
> 
>    Hi Jim,
> 
>    Thank you a lot for your tips. It was very helpful.
> 
>    A few comments:
> 
> 1. I actually use maven and the project dependencies to generate the
> grammars. The command line was just a "simplified" example. Now I am
> curious why the separate jars still give me the same error when I try to
> generate the grammar, even using your parameters, but when I use the
> "master jar" it works fine?!
> 
>    Using the master jar is a bit complicate as Drools is an open source
project
> and maven relies on the public maven repositories, so ideally, ANTLR
should
> distribute to maven repos jars that work the same as the ones downloaded
> from the project page. But anyway, for my development here I will use the
> master jar for now.
> 
> 2. Regarding the unicode ranges, believe or not, it is a requirement that
users
> are able to create identifiers using oriental characters, since lots of
> customers/users are Japanese. Regarding the ESC, thanks for the tip, I
will try
> to adapt my grammar.
> 
> 3. Thanks. As now I am getting code too large on the command line as well
> when generating the grammar with debug info, I will refactor and split the
> grammar into a Composite grammar. I will try to reduce the code on parser
> actions as you suggested.
> 
>    Thanks a lot,
>       Edson
> 
> 
> 2010/8/18 Jim Idle <jimi at temporal-wave.com>
> 
> > A few pointers:
> >
> > 1) Use the complete self-contained jar download and not the string of
> > individual jars for development, then with the command:
> >
> > java -Xmx750M -Xincgc -jar C:/antlr/antlr-master-3.2-completejar.jar
> > -Xconversiontimeout 32000 -debug %*
> >
> > In a batch file (or script) your grammar generates correctly.
> >
> > 2) You are trying to specify the lexer a little too strongly. The
> > problem with what you have is that the best you can do error wise with
> > a wrong character is use the ANY : . {error}; rule to say it is
> > illegal. Ideally don't allow such huge ranges, but if the language
> > says they are legal then you have to deal with them of course.
> >
> > So where possible you want to allow just about anything you can in an
> > identifier, then use a semantic check rule that can say "Identifier
> > 'x\u7858yzzz' is illegally named as the character '\u7858'. You just
> > have to be careful with ambiguities. Perhaps you have to look for the
> > specific lead-in but then consume until something that must be some
> > other token start (don't be afraid to use code to do this as it will
> > often be neater than the generated code for huge tables like this.
> >
> > Next, don't use ESC : '\' <longlist of alts> for escape codes, as
> > again you will just get 'error at character 'q' from the lexer which is
of no
> use.
> > Allow any character to be escaped lexically then check it later where
> > you can say "The escape sequence \q in string 'aaa\qaaaa'" is not
> > recognized", which is much more useful.
> >
> > You can apply this technique to a lot of lexer rules (even hex strings
> > for
> > instance) and greatly improve the error messages.
> >
> > 3) Take as much code out of the parser action as you can and create a
> > helper interface, of which your current code gen is an implementer.
> > Pass this in before parsing starts. Your parser does not look too far
> > away from this, but instead of 3 or 4 consecutive method calls, you
> > should consider a single call for a single purpose. Further, if you
> > can do so, other than perhaps creating a symbol table, don't do
> > anything in the parser except create the AST, then do a semantic
> > validation  of the AST with good error messages, then proceed to
> > whatever else the code should do (including syntax highlighting for
> > instance.) You will have a sequence then where you can perform syntax
> > highlighting stuff, but also occasionally do semantic checks (look at
> > how Visual Studio handles C#  for instance).
> >
> > Hope that is useful to you,
> >
> > Jim
> >
> >
> >
> >
> > > -----Original Message-----
> > > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > > bounces at antlr.org] On Behalf Of Edson Tirelli
> > > Sent: Tuesday, August 17, 2010 5:49 PM
> > > To: antlr-interest at antlr.org
> > > Subject: Re: [antlr-interest] Antlr 3.2 issues: code too large and
> > > "no
> > such
> > > attribute: description"
> > >
> > >    Hi Jim,
> > >
> > >    Thanks for the reply. Lets simplify things and forget antlrworks
> > > and
> > the
> > > code too large for now. The most important for me is to be able to
> > compile
> > > the grammar with -debug on the command line.
> > >
> > >    On the command line, I am using the following:
> > >
> > > $ java -classpath
> > >
> >
> > "antlr-3.2.jar;antlr-runtime-3.2.jar;antlr-2.7.7.jar;stringtemplate-3.
> > 2.1.ja
> > r"
> > > org.antlr.Tool -debug -lib src/lang src/lang/DRL.g
> > >
> > >      I get the error:
> > >
> > >     [java] error(10):  internal error:
> > > src/main/resources/org/drools/lang/DRL.g :
> > > java.util.NoSuchElementException:
> > > no such attribute: description in template context [orPredicates
> > notPredicate
> > > evalPredicate(...)]
> > >
> > >    That seems the same problem reported in
> > > http://www.antlr.org/jira/browse/ANTLR-378 .
> > >
> > >    My grammar is here:
> > >
> > http://anonsvn.jboss.org/repos/labs/labs/jbossrules/branches/etirelli/
> > drool
> > > s-compiler/src/main/resources/org/drools/lang/DRL.g
> > >
> > >    As I mentioned before, it is fairly complex. Also, there is a ton
> > > of
> > code in
> > > there to support the code editor, what "polutes" the grammar, so I
> > > don't expect anyone to understand it. The important thing is it does
> > > compile without any warnings or errors, except for when I try to use
> > > the -debug
> > flag.
> > >
> > >    Thanks
> > >
> > >    Edson
> > >
> > > 2010/8/17 Jim Idle <jimi at temporal-wave.com>
> > >
> > > > The JIRA you quote is not showing the same problems as the error
> > > > you quote, hence the patch is unlikely to help. If your grammar is
> > > > too large with the debug stuff in it then it is possible that its
> > > > structure is not so good. It is also possible that it is just too
> > > > big for a single file of course. As you say, you can debug at the
> > > > java level too - the multiple grammar debugging stuff in
> > > > ANTLRWorks does not seem to be quite there.
> > > >
> > > > Are you using the latest jar download to generate at the command
> > > > line and not the ANTLR that is embedded in ANTLRWorks? You should
> > > > really supply the invocations you are using as otherwise we have to
> guess.
> > > > You could try generating using the ANTLRWorks jar. However, if the
> > > > code is too big with debug stuff in it, then there isn't much you
> > > > can do but start using imports.
> > > > Also, try increasing the conversion timeout.
> > > >
> > > > Jim
> > > >
> > > >
> > > >
> > > > > -----Original Message-----
> > > > > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > > > > bounces at antlr.org] On Behalf Of Edson Tirelli
> > > > > Sent: Tuesday, August 17, 2010 2:11 PM
> > > > > To: antlr-interest at antlr.org
> > > > > Subject: [antlr-interest] Antlr 3.2 issues: code too large and
> > > > > "no such
> > > > > attribute: description"
> > > > >
> > > > >    Hey all,
> > > > >
> > > > >    Need some advice. Question:
> > > > >
> > > > > * short version: Does anyone tried applying the patch from this
> > > > > ticket (
> > > > > http://www.antlr.org/jira/browse/ANTLR-378) on ANTLR 3.2? Is it
> > > > > still
> > > > good?
> > > > >
> > > > > * long version:
> > > > >
> > > > >    I am adding support for full Java expressions to Drools
> > > > (www.drools.org)
> > > > > DRL language, and basically my grammar (that was already
> > > > > complex) now is also twice the size it was. Before, I was using
> > > > > ANTLRWorks
> > > > > (1.4) to debug
> > > > my
> > > > > grammar but now, when I try to debug I get the error:
> > > > >
> > > > > "code too large"
> > > > >
> > > > >    That is a bit strange to me as the grammar generates just
> > > > > fine when I
> > > > use
> > > > > the command line tool to generate it, but I figured it might be
> > > > > due to
> > > > some
> > > > > additional code ANTLRWorks might be generating for debug
> purposes.
> > > > > My search through this list archives and internet found some
> > > > > comments
> > > > stating
> > > > > that the way to go in this case would be to use Composite
> > > > > Grammars, but
> > > > the
> > > > > problem seems to be that neither antlrworks nor the eclipse
> > > > > plugin have proper support to it. I gave it a quick try and it
> > > > > does highlight missing
> > > > rules as
> > > > > errors in dependent grammars making maintenance a lot harder.
> > > > >
> > > > >     So, if I would have to do remote debugging anyway, I tried
> > > > > to do it
> > > > with my
> > > > > current grammar. Although, when I try to generate the grammar
> > > > > with the "- debug" flag on the command line, I get:
> > > > >
> > > > >     "[java] error(10):  internal error:
> > > > > src/main/resources/org/drools/lang/DRL.g :
> > > > > java.util.NoSuchElementException:
> > > > > no such attribute: description in template context [orPredicates
> > > > notPredicate
> > > > > evalPredicate(...)]"
> > > > >
> > > > >     This is apparently a known bug reported since ANTLR 3.1.1 (
> > > > > http://www.antlr.org/jira/browse/ANTLR-378) for which a patch
> > > > > was provided but apparently never applied.
> > > > >
> > > > >     Right now I am stuck, since I can not debug neither locally
> > > > > nor
> > > > remotely, I
> > > > > see only two options: either I go trial and error working on my
> > > > > grammar (what can be extremely time consuming for a complex
> > > > > grammar like
> > > > > ours) or I try to apply the patch and build my own
> > > > > StringTemplate/ANTLR binaries and hope that it will work.
> > > > >
> > > > >     So, before spending more time on the later, I wanted to
> > > > > check if
> > > > anyone
> > > > > else tried that and succeeded, otherwise, I will just go the old
> > > > > way and
> > > > debug
> > > > > the generated code itself. :(
> > > > >
> > > > >     Anyone worked around these problems yet? Any advice?
> > > > >
> > > > >     Thanks a lot,
> > > > >        Edson
> > > > >
> > > > > --
> > > > >   Edson Tirelli
> > > > >   JBoss Drools Core Development
> > > > >   JBoss by Red Hat @ www.jboss.com
> > > > >
> > > > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > > > Unsubscribe:
> > > > > http://www.antlr.org/mailman/options/antlr-interest/your-
> > > > > email-address
> > > >
> > > >
> > > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > > Unsubscribe:
> > > > http://www.antlr.org/mailman/options/antlr-interest/your-email-add
> > > > ress
> > > >
> > >
> > >
> > >
> > > --
> > >   Edson Tirelli
> > >   JBoss Drools Core Development
> > >   JBoss by Red Hat @ www.jboss.com
> > >
> > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > Unsubscribe:
> > > http://www.antlr.org/mailman/options/antlr-interest/your-
> > > email-address
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >
> 
> 
> 
> --
>   Edson Tirelli
>   JBoss Drools Core Development
>   JBoss by Red Hat @ www.jboss.com
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From jimi at temporal-wave.com  Wed Aug 18 14:31:25 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 18 Aug 2010 14:31:25 -0700
Subject: [antlr-interest] how to generate C++ file
In-Reply-To: <16E97E18-C55A-4682-8C08-53B5DD36BE9E@ipns.com>
References: <mailman.0.1282158001.27350.antlr-interest@antlr.org>
	<16E97E18-C55A-4682-8C08-53B5DD36BE9E@ipns.com>
Message-ID: <018b01cb3f1c$b5f6ddc0$21e49940$@temporal-wave.com>

Yes - I am aware of that. ANTLRWorks is just calling the ANTLR tool

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Alan Condit
> Sent: Wednesday, August 18, 2010 12:54 PM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] how to generate C++ file
> 
> Jim,
> 
> Actually, ANTLRWorks will generate the C code, it just won't let you see
the
> resultant code in ANTLRWorks.
> As long as the grammar file designates the output language and it has the
> appropriate stg files it will generate the language. I am currently
working on
> the stg templates for ObjC and I am generating the output files through
> ANTLRWorks.
> 
> Alan
> ---
> 
> Alan Condit
> 1085 Tierra Ct.
> Woodburn, OR 97071
> 
> Email -- acondit at ipns.com
> Home-Office (503) 982-0906
> 
> On Aug 18, 2010, at 12:00 PM, antlr-interest-request at antlr.org wrote:
> 
> > From: "Jim Idle" <jimi at temporal-wave.com>
> > Date: August 17, 2010 4:09:01 PM PDT
> > To: <antlr-interest at antlr.org>
> > Subject: Re: [antlr-interest] how to generate C++ file
> >
> >
> > ANTLRWorks does not generate C code (and there is no C++ generator, it
> > is C that you can compile as C++ if you like.) ANTLRWorks only works
> > with Java for code generating purposes. Use the command line tool and
> > Makefiles etc for C.
> >
> > You need to start with the downloadable examples and then read the
> > getting started stuff on the wiki.
> >
> > Also don't forget http://antlr.markmail.org
> >
> > Jim
> >
> >> -----Original Message-----
> >> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> >> bounces at antlr.org] On Behalf Of J.R Karthikeyan
> >> Sent: Tuesday, August 17, 2010 4:05 PM
> >> To: antlr-interest at antlr.org
> >> Subject: [antlr-interest] how to generate C++ file
> >>
> >> Hi,
> >>
> >>  I am using ANTLRWorks 1.4 for my project. I would like to generate
> >> the
> > C++
> >> file from this grammar. I don't find how to do this. Can you give me
> > direction
> >> in how to generate those files.
> >>
> >> Thanks,
> >> Jrk
> >>
> >>
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-
> >> email-address
> >
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From jrk1987 at yahoo.co.in  Wed Aug 18 14:55:01 2010
From: jrk1987 at yahoo.co.in (J.R Karthikeyan)
Date: Thu, 19 Aug 2010 03:25:01 +0530 (IST)
Subject: [antlr-interest] Re Regardig time out
Message-ID: <666393.952.qm@web94602.mail.in2.yahoo.com>

Hi,


   I think there is some problem in my  setup. I have attached the screen shot 
of the command window. It shows some error because some file
is not found. Please refer the attached files along with this email.

Thanks a  lot,
Jrk




_________________________________________________________________________________________________________________________________________

Well the first thing I get is:  [15:59:05] error(201): t.g:4:5: The following 
alternatives can never be matched: 3  This is because your parser rule does not 
make sense. It should be:  simplerule : CHAR* EOF ;  However, that token makes 
more sense to be called WORD to be honest. IF you cannot launch the debugger 
after that, then there is something wrong with your setup. As I say below, you 
should start ANTLRWorks from a command line console and see what it tells you 
when you try to start the debugger. Do you have firewalls for instance.  Jim 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: screenshot3.doc
Type: application/msword
Size: 29184 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20100819/01b94b27/attachment.doc 

From jimi at temporal-wave.com  Wed Aug 18 14:59:49 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 18 Aug 2010 14:59:49 -0700
Subject: [antlr-interest] Re Regardig time out
In-Reply-To: <666393.952.qm@web94602.mail.in2.yahoo.com>
References: <666393.952.qm@web94602.mail.in2.yahoo.com>
Message-ID: <01b201cb3f20$adc23380$09469a80$@temporal-wave.com>

Well this is obvious. 

It is telling you that it cannot find the java compiler (javac). You did install JDK 1.6 for MAC or Windows right? If so, then it should be in your standard PATH. If for some reason you installed JDK (note the JDK contains the compiler but the JRE does not), and the PATH is not correct, then you can tell ANTLRWorks where to find the compiler in the preferences->compiler tab.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of J.R Karthikeyan
> Sent: Wednesday, August 18, 2010 2:55 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Re Regardig time out
> 
> Hi,
> 
> 
>    I think there is some problem in my  setup. I have attached the screen shot
> of the command window. It shows some error because some file is not
> found. Please refer the attached files along with this email.
> 
> Thanks a  lot,
> Jrk
> 
> 
> 
> 
> __________________________________________________________
> __________________________________________________________
> _____________________
> 
> Well the first thing I get is:  [15:59:05] error(201): t.g:4:5: The following
> alternatives can never be matched: 3  This is because your parser rule does
> not make sense. It should be:  simplerule : CHAR* EOF ;  However, that token
> makes more sense to be called WORD to be honest. IF you cannot launch the
> debugger after that, then there is something wrong with your setup. As I say
> below, you should start ANTLRWorks from a command line console and see
> what it tells you when you try to start the debugger. Do you have firewalls
> for instance.  Jim



From jschrod at acm.org  Wed Aug 18 16:46:42 2010
From: jschrod at acm.org (Joachim Schrod)
Date: Thu, 19 Aug 2010 01:46:42 +0200
Subject: [antlr-interest] Javadoc for antlr3-runtime-3.2 at central maven
	repo
Message-ID: <i4hrd2$83q$1@dough.gmane.org>

Hi,

There is a 3.1.3 javadoc package for antlr3-runtime at the central
Maven repository, but none for 3.2.

It would be very nice if somebody would upload one there, so that
Maven-based projects get the javadoc for the runtime classes
automatically.

Cheers,
	Joachim

-- 
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
Joachim Schrod				Email: jschrod at acm.org
Roedermark, Germany


From jrk1987 at yahoo.co.in  Wed Aug 18 16:51:08 2010
From: jrk1987 at yahoo.co.in (J.R Karthikeyan)
Date: Thu, 19 Aug 2010 05:21:08 +0530 (IST)
Subject: [antlr-interest] Re Regardig time out
Message-ID: <502486.30925.qm@web94614.mail.in2.yahoo.com>

Thanks a lot Jim Idle. I included the path and now it is working fine.

Thanks,
Jrk




________________________________
From: J.R Karthikeyan <jrk1987 at yahoo.co.in>
To: antlr-interest at antlr.org
Sent: Wed, 18 August, 2010 2:55:01 PM
Subject: Re Regardig time out


Hi,


   I think there is some problem in my  setup. I have attached the screen shot 
of the command window. It shows some error because some file
is not found. Please refer the attached files along with this email.

Thanks a  lot,
Jrk




_________________________________________________________________________________________________________________________________________

Well the first thing I get is:  [15:59:05] error(201): t.g:4:5: The following 
alternatives can never be matched: 3  This is because your parser rule does not 
make sense. It should be:  simplerule : CHAR* EOF ;  However, that token makes 
more sense to be called WORD to be honest. IF you cannot launch the debugger 
after that, then there is something wrong with your setup. As I say below, you 
should start ANTLRWorks from a command line console and see what it tells you 
when you try to start the debugger. Do you have firewalls for instance.  Jim 


From jimi at temporal-wave.com  Wed Aug 18 18:27:35 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 18 Aug 2010 18:27:35 -0700
Subject: [antlr-interest] Javadoc for antlr3-runtime-3.2 at central
	maven repo
In-Reply-To: <i4hrd2$83q$1@dough.gmane.org>
References: <i4hrd2$83q$1@dough.gmane.org>
Message-ID: <154B6F6A-FC08-4824-B616-3F3823C35C58@temporal-wave.com>

Thought this had been done. I will look into this tomorrow.  

Jim

On Aug 18, 2010, at 16:46, Joachim Schrod <jschrod at acm.org> wrote:

> Hi,
> 
> There is a 3.1.3 javadoc package for antlr3-runtime at the central
> Maven repository, but none for 3.2.
> 
> It would be very nice if somebody would upload one there, so that
> Maven-based projects get the javadoc for the runtime classes
> automatically.
> 
> Cheers,
>    Joachim
> 
> -- 
> =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
> Joachim Schrod                Email: jschrod at acm.org
> Roedermark, Germany
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From jimi at temporal-wave.com  Wed Aug 18 18:28:07 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 18 Aug 2010 18:28:07 -0700
Subject: [antlr-interest] Re Regardig time out
In-Reply-To: <502486.30925.qm@web94614.mail.in2.yahoo.com>
References: <502486.30925.qm@web94614.mail.in2.yahoo.com>
Message-ID: <8480731C-3F02-4EC0-AEDC-374EFFA57B28@temporal-wave.com>

You're welcome. 

Jim

On Aug 18, 2010, at 16:51, "J.R Karthikeyan" <jrk1987 at yahoo.co.in> wrote:

> Thanks a lot Jim Idle. I included the path and now it is working fine.
> 
> Thanks,
> Jrk
> 
> 
> 
> 
> ________________________________
> From: J.R Karthikeyan <jrk1987 at yahoo.co.in>
> To: antlr-interest at antlr.org
> Sent: Wed, 18 August, 2010 2:55:01 PM
> Subject: Re Regardig time out
> 
> 
> Hi,
> 
> 
>   I think there is some problem in my  setup. I have attached the screen shot 
> of the command window. It shows some error because some file
> is not found. Please refer the attached files along with this email.
> 
> Thanks a  lot,
> Jrk
> 
> 
> 
> 
> _________________________________________________________________________________________________________________________________________
> 
> Well the first thing I get is:  [15:59:05] error(201): t.g:4:5: The following 
> alternatives can never be matched: 3  This is because your parser rule does not 
> make sense. It should be:  simplerule : CHAR* EOF ;  However, that token makes 
> more sense to be called WORD to be honest. IF you cannot launch the debugger 
> after that, then there is something wrong with your setup. As I say below, you 
> should start ANTLRWorks from a command line console and see what it tells you 
> when you try to start the debugger. Do you have firewalls for instance.  Jim 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From Enrique.PradosValiente at reale.es  Thu Aug 19 03:29:12 2010
From: Enrique.PradosValiente at reale.es (Prados Valiente Enrique)
Date: Thu, 19 Aug 2010 12:29:12 +0200
Subject: [antlr-interest] ANTLR v3.1.x binaries for .NET framework
In-Reply-To: <8480731C-3F02-4EC0-AEDC-374EFFA57B28@temporal-wave.com>
References: <502486.30925.qm@web94614.mail.in2.yahoo.com>
	<8480731C-3F02-4EC0-AEDC-374EFFA57B28@temporal-wave.com>
Message-ID: <931DCC17C6D7A849AEE684BF5B13E199EFF3B6@BLPOSTIN.reale.net>

Hi all,

In http://www.antlr.org/download.html page,

ANTLR Tool Binaries

ANTLR v3.1.x binaries for .NET framework. No dependence on the Java
runtime. antlr3.exe and StringTemplate and ANTLR runtime libraries it
depends on. Completely independent version written by Sam Harwell
(ported from Java).


I have PLSQL3.g file. Can I use only Visual Studio 2008 - .NET 3.5 only,
without Java for create SQL Parser ???


Thanks in advanced,


  <<PLSQL3.g>> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: PLSQL3.g
Type: application/octet-stream
Size: 41702 bytes
Desc: PLSQL3.g
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20100819/6b93b2fa/attachment.obj 

From a.moderacja at gmail.com  Thu Aug 19 08:11:17 2010
From: a.moderacja at gmail.com (Borneq)
Date: Thu, 19 Aug 2010 17:11:17 +0200
Subject: [antlr-interest] How use targets?
Message-ID: <AANLkTi=budhX48KSOs+rW+sUhCoG_yWuMrcE+M_+9NXQ@mail.gmail.com>

I download ANTLR-3.1-2009-06-28.7z. Here are DLL and stg for other targets.
Antlr3.exe creates Java files. How to create files for other targets?

From brian at brie.com  Thu Aug 19 08:36:04 2010
From: brian at brie.com (Brian Lavender)
Date: Thu, 19 Aug 2010 08:36:04 -0700
Subject: [antlr-interest] How use targets?
In-Reply-To: <AANLkTi=budhX48KSOs+rW+sUhCoG_yWuMrcE+M_+9NXQ@mail.gmail.com>
References: <AANLkTi=budhX48KSOs+rW+sUhCoG_yWuMrcE+M_+9NXQ@mail.gmail.com>
Message-ID: <20100819153604.GA4123@brie.com>

Do you mean have ANTLR create your LEXER/PARSER in another target?

grammar Agenda;

options {language='Java';}

On Thu, Aug 19, 2010 at 05:11:17PM +0200, Borneq wrote:
> I download ANTLR-3.1-2009-06-28.7z. Here are DLL and stg for other targets.
> Antlr3.exe creates Java files. How to create files for other targets?
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

-- 
Brian Lavender
http://www.brie.com/brian/

"There are two ways of constructing a software design. One way is to
make it so simple that there are obviously no deficiencies. And the other
way is to make it so complicated that there are no obvious deficiencies."

Professor C. A. R. Hoare
The 1980 Turing award lecture

From brian at brie.com  Thu Aug 19 08:56:34 2010
From: brian at brie.com (Brian Lavender)
Date: Thu, 19 Aug 2010 08:56:34 -0700
Subject: [antlr-interest] return LTR values
Message-ID: <20100819155634.GB4123@brie.com>

So, I have a parser rule that grabs 10 LTR lexer values. I would like to have the parser
rule set its $text value to be the concatonation of these LTR values and put an
XML tag around it. 

How do I do that?

author	:	l=LTR l=LTR l=LTR l=LTR l=LTR l=LTR l=LTR l=LTR l=LTR l=LTR 
{ <Author>$l+</Author> };

LTR  :   . ;
-- 
Brian Lavender
http://www.brie.com/brian/

"There are two ways of constructing a software design. One way is to
make it so simple that there are obviously no deficiencies. And the other
way is to make it so complicated that there are no obvious deficiencies."

Professor C. A. R. Hoare
The 1980 Turing award lecture

From power_giordo at yahoo.com.ar  Thu Aug 19 09:15:22 2010
From: power_giordo at yahoo.com.ar (Victor Giordano)
Date: Thu, 19 Aug 2010 13:15:22 -0300
Subject: [antlr-interest] return LTR values
In-Reply-To: <20100819155634.GB4123@brie.com>
References: <20100819155634.GB4123@brie.com>
Message-ID: <4C6D589A.6000202@yahoo.com.ar>

Hi Brian. I am newbie too. But i will try to answer the matter of question.

If you want to "grab" the values of the labels, you have to ways:
1) Assing each rule (lexel or parser) to a label, each label must be 
have a diferent name (in order to use then later)
2) Assign a group of rules (lexer or parser) in a "list", that is: an 
array of labels. So you doesn't have to use diferent names, and can have 
the advantage of categorise same elements in an array for work with then 
like an unit.

1)
author	:l=LTR l=LTR l=LTR l=LTR l=LTR l=LTR l=LTR l=LTR l=LTR l=LTR
It's isn't right, how do you select the second rule or the first rule.

So you must diferenciate:
author	:l1=LTR l2=LTR ... ln=LTR
l1 is the first, l2 is the second.. and so on.

2)
You can do this:

author	:l+=LTR l+=LTR l+=LTR l+=LTR l+=LTR l+=LTR l+=LTR l+=LTR l+=LTR 
l+=LTR
{
   $l[0] <--- is the first
   $l[1] <--- is the second!.
   // Sorry i don't know how to iterate through them.
It's target lenguaje specific the action part.
}
;


wELL, I HOPE, really i hope, you understand my explanation and help a 
little!!.
Grettings!.


El 19/08/2010 12:56 p.m., Brian Lavender escribi?:
> So, I have a parser rule that grabs 10 LTR lexer values. I would like to have the parser
> rule set its $text value to be the concatonation of these LTR values and put an
> XML tag around it.
>
> How do I do that?
>
> author	:	l=LTR l=LTR l=LTR l=LTR l=LTR l=LTR l=LTR l=LTR l=LTR l=LTR
> {<Author>$l+</Author>  };
>
> LTR  :   . ;


From thomas.nilsson at responsive.se  Thu Aug 19 10:14:00 2010
From: thomas.nilsson at responsive.se (Thomas Nilsson)
Date: Thu, 19 Aug 2010 19:14:00 +0200
Subject: [antlr-interest] DFA display in ANTLRWorks not working on MacOSX
Message-ID: <761A6B78-8730-42A6-9416-A9AF7CCD6B38@responsive.se>

I am in the process of converting an old-ish LR-grammar to work with ANTLRs LL-principles which is an interesting, but educational, journey.

I'm running on MacOSX and looking at my single remaining non-LL(*) decision and was hoping to get some help from the DFA. unfortunatley displaying it does not work. When asked to produce the DFA, GraphViz pops up a message like "DOTxxxx.out could not be opened. GraphViz cannot open this kind of file." The message is then repeated for the ".in"-file.

ANTLRWorks preferences seems to be pointing in the right direction, as some other graphs are produced alright. (Although I do not know if ANTLRWorks uses GraphViz for that...)

I'm using latest ANTLRWorks (bundled, but has also tried the jar), and have latest GraphViz (2.20.3 from 2008) for MacOSX.

Anyone have any clue, or hint on what to try?

Thomas Nilsson, CTO, Agile Mentor
Responsive Development Technologies AB
Web: http://www.responsive.se
Email: thomas.nilsson at responsive.se
Phone: +46 70 561 75 41
Blog: http://www.responsive.se/thomas


From jimi at temporal-wave.com  Thu Aug 19 10:30:17 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 19 Aug 2010 10:30:17 -0700
Subject: [antlr-interest] DFA display in ANTLRWorks not working on MacOSX
In-Reply-To: <761A6B78-8730-42A6-9416-A9AF7CCD6B38@responsive.se>
References: <761A6B78-8730-42A6-9416-A9AF7CCD6B38@responsive.se>
Message-ID: <023d01cb3fc4$311a2cd0$934e8670$@temporal-wave.com>

I think that ANTLRWorks just calls dot for producing external files and that
by default OSX points to a weak version of Graphviz. In the preferences, you
can tell it the PATH to find the dot command. Change that and it should
work. I generally just use the syntax diagram though. If you check the
grammar, then the rule in error will light up in red. Select it, then select
the Syntax Diagram tag. It should show you how you end up with the
recursion.

Jim 

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Thomas Nilsson
> Sent: Thursday, August 19, 2010 10:14 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] DFA display in ANTLRWorks not working on MacOSX
> 
> I am in the process of converting an old-ish LR-grammar to work with
ANTLRs
> LL-principles which is an interesting, but educational, journey.
> 
> I'm running on MacOSX and looking at my single remaining non-LL(*)
decision
> and was hoping to get some help from the DFA. unfortunatley displaying it
> does not work. When asked to produce the DFA, GraphViz pops up a
> message like "DOTxxxx.out could not be opened. GraphViz cannot open this
> kind of file." The message is then repeated for the ".in"-file.
> 
> ANTLRWorks preferences seems to be pointing in the right direction, as
> some other graphs are produced alright. (Although I do not know if
> ANTLRWorks uses GraphViz for that...)
> 
> I'm using latest ANTLRWorks (bundled, but has also tried the jar), and
have
> latest GraphViz (2.20.3 from 2008) for MacOSX.
> 
> Anyone have any clue, or hint on what to try?
> 
> Thomas Nilsson, CTO, Agile Mentor
> Responsive Development Technologies AB
> Web: http://www.responsive.se
> Email: thomas.nilsson at responsive.se
> Phone: +46 70 561 75 41
> Blog: http://www.responsive.se/thomas
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From cummings at kjchome.homeip.net  Thu Aug 19 10:31:33 2010
From: cummings at kjchome.homeip.net (Kevin J. Cummings)
Date: Thu, 19 Aug 2010 13:31:33 -0400
Subject: [antlr-interest] return LTR values
In-Reply-To: <20100819155634.GB4123@brie.com>
References: <20100819155634.GB4123@brie.com>
Message-ID: <4C6D6A75.9020707@kjchome.homeip.net>

On 08/19/2010 11:56 AM, Brian Lavender wrote:
> So, I have a parser rule that grabs 10 LTR lexer values. I would like to have the parser
> rule set its $text value to be the concatonation of these LTR values and put an
> XML tag around it. 
> 
> How do I do that?
> 
> author	:	l=LTR l=LTR l=LTR l=LTR l=LTR l=LTR l=LTR l=LTR l=LTR l=LTR 
> { <Author>$l+</Author> };

Do it with a LEXER rule instead of a parser rule.

AUTHOR : LTR LTR LTR LTR LTR LTR LTR LTR LTR LTR
       ;

If you still need to do something in a parser rule, do it as

author : AUTHOR
	 { ... }
       ;

> LTR  :   . ;

Having a lexer rule that matches any single character is going to get
you into trouble later on if you are not careful.  The whole point of
lexing to the convert single characters into TOKENs which can then be
parsed by the parser.

-- 
Kevin J. Cummings
kjchome at rcn.com
cummings at kjchome.homeip.net
cummings at kjc386.framingham.ma.us
Registered Linux User #1232 (http://counter.li.org)

From jrk1987 at yahoo.co.in  Thu Aug 19 12:15:03 2010
From: jrk1987 at yahoo.co.in (J.R Karthikeyan)
Date: Fri, 20 Aug 2010 00:45:03 +0530 (IST)
Subject: [antlr-interest] how to generate C++ file
Message-ID: <451039.79006.qm@web94606.mail.in2.yahoo.com>

Hi,

   I have tried generating c file using Antlrworks and it generate the c file. 
Why I am asking C++ is, I need to do some custom code
in parser which require some information and hence I need to access the data 
structure which is written in C++ (basically class). 


say for eg.
     
s  	? CHAR '=' e
e  	? t y 
y 	? '+' t y 
	? 
t 	? p x
x 	? '*' t 
	? 
p	? '('e')' 
	? NUMBER 

where CHAR and NUMBER are tokens.
 
fragment
LETTER 	:	 ('a'..'z' | 'A'..'Z')
	;

CHAR	:	LETTER (LETTER | DIGIT | '_')+
	;

fragment
DIGIT	    : '0'..'9'
            ;

NUMBER	    : (DIGIT)+ '.' (DIGIT)+ | (DIGIT)+ 
            ;

Let say the input is i=5

Now in 
s  	? CHAR '=' e, When this get executed for i depending upon the Right hand 
side I need to declare the 'i' as int. I will get
what type of datatype by calling some member funtion of some class. Is it 
possible to do like this ANTLR.

Thanks,
Jrk

______________________________________________________________________________________________________________________________________

Yes - I am aware of that. ANTLRWorks is just calling the ANTLR tool  Jim  > 
-----Original Message----- > From: antlr-interest-bounces at antlr.org 
[mailto:antlr-interest- > bounces at antlr.org] On Behalf Of Alan Condit > Sent: 
Wednesday, August 18, 2010 12:54 PM > To: antlr-interest at antlr.org > Subject: 
Re: [antlr-interest] how to generate C++ file >  > Jim, >  > Actually, 
ANTLRWorks will generate the C code, it just won't let you see the > resultant 
code in ANTLRWorks. > As long as the grammar file designates the output language 
and it has the > appropriate stg files it will generate the language. I am 
currently working on > the stg templates for ObjC and I am generating the output 
files through > ANTLRWorks. >  > Alan > --- >  > Alan Condit > 1085 Tierra Ct. > 
Woodburn, OR 97071 >  > Email -- acondit at ipns.com > Home-Office (503) 
982-0906 >  > On Aug 18, 2010, at 12:00 PM, antlr-interest-request at antlr.org 
wrote: >  > > From: "Jim Idle" <jimi at temporal-wave.com> > > Date: August 17, 
2010 4:09:01 PM PDT > > To: <antlr-interest at antlr.org> > > Subject: Re: 
[antlr-interest] how to generate C++ file > > > > > > ANTLRWorks does not 
generate C code (and there is no C++ generator, it > > is C that you can compile 
as C++ if you like.) ANTLRWorks only works > > with Java for code generating 
purposes. Use the command line tool and > > Makefiles etc for C. > > > > You 
need to start with the downloadable examples and then read the > > getting 
started stuff on the wiki. > > > > Also don't forget http://antlr.markmail.org > 
> > > Jim > > > >> -----Original Message----- > >> From: antlr-interest-bounces 
at antlr.org [mailto:antlr-interest- > >> bounces at antlr.org] On Behalf Of J.R 
Karthikeyan > >> Sent: Tuesday, August 17, 2010 4:05 PM > >> To: antlr-interest 
at antlr.org > >> Subject: [antlr-interest] how to generate C++ file > >> > >> 
Hi, > >> > >>  I am using ANTLRWorks 1.4 for my project. I would like to 
generate > >> the > > C++ > >> file from this grammar. I don't find how to do 
this. Can you give me > > direction > >> in how to generate those files. > >> > 
>> Thanks, > >> Jrk 



From jimi at temporal-wave.com  Thu Aug 19 12:21:20 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 19 Aug 2010 12:21:20 -0700
Subject: [antlr-interest] how to generate C++ file
In-Reply-To: <451039.79006.qm@web94606.mail.in2.yahoo.com>
References: <451039.79006.qm@web94606.mail.in2.yahoo.com>
Message-ID: <027a01cb3fd3$b44289e0$1cc79da0$@temporal-wave.com>

Download the example tar from the download page. It shows you how to do this.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of J.R Karthikeyan
> Sent: Thursday, August 19, 2010 12:15 PM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] how to generate C++ file
> 
> Hi,
> 
>    I have tried generating c file using Antlrworks and it generate the c file.
> Why I am asking C++ is, I need to do some custom code in parser which
> require some information and hence I need to access the data structure
> which is written in C++ (basically class).
> 
> 
> say for eg.
> 
> s  	? CHAR '=' e
> e  	? t y
> y 	? '+' t y
> 	?
> t 	? p x
> x 	? '*' t
> 	?
> p	? '('e')'
> 	? NUMBER
> 
> where CHAR and NUMBER are tokens.
> 
> fragment
> LETTER 	:	 ('a'..'z' | 'A'..'Z')
> 	;
> 
> CHAR	:	LETTER (LETTER | DIGIT | '_')+
> 	;
> 
> fragment
> DIGIT	    : '0'..'9'
>             ;
> 
> NUMBER	    : (DIGIT)+ '.' (DIGIT)+ | (DIGIT)+
>             ;
> 
> Let say the input is i=5
> 
> Now in
> s  	? CHAR '=' e, When this get executed for i depending upon the Right
> hand
> side I need to declare the 'i' as int. I will get
> what type of datatype by calling some member funtion of some class. Is it
> possible to do like this ANTLR.
> 
> Thanks,
> Jrk
> 
> __________________________________________________________
> __________________________________________________________
> __________________
> 
> Yes - I am aware of that. ANTLRWorks is just calling the ANTLR tool  Jim  >
> -----Original Message----- > From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest- > bounces at antlr.org] On Behalf Of Alan Condit >
> Sent:
> Wednesday, August 18, 2010 12:54 PM > To: antlr-interest at antlr.org >
> Subject:
> Re: [antlr-interest] how to generate C++ file >  > Jim, >  > Actually,
> ANTLRWorks will generate the C code, it just won't let you see the >
> resultant
> code in ANTLRWorks. > As long as the grammar file designates the output
> language
> and it has the > appropriate stg files it will generate the language. I am
> currently working on > the stg templates for ObjC and I am generating the
> output
> files through > ANTLRWorks. >  > Alan > --- >  > Alan Condit > 1085 Tierra Ct. >
> Woodburn, OR 97071 >  > Email -- acondit at ipns.com > Home-Office (503)
> 982-0906 >  > On Aug 18, 2010, at 12:00 PM, antlr-interest-request at antlr.org
> wrote: >  > > From: "Jim Idle" <jimi at temporal-wave.com> > > Date: August
> 17,
> 2010 4:09:01 PM PDT > > To: <antlr-interest at antlr.org> > > Subject: Re:
> [antlr-interest] how to generate C++ file > > > > > > ANTLRWorks does not
> generate C code (and there is no C++ generator, it > > is C that you can
> compile
> as C++ if you like.) ANTLRWorks only works > > with Java for code generating
> purposes. Use the command line tool and > > Makefiles etc for C. > > > > You
> need to start with the downloadable examples and then read the > > getting
> started stuff on the wiki. > > > > Also don't forget http://antlr.markmail.org >
> > > > Jim > > > >> -----Original Message----- > >> From: antlr-interest-
> bounces
> at antlr.org [mailto:antlr-interest- > >> bounces at antlr.org] On Behalf Of J.R
> Karthikeyan > >> Sent: Tuesday, August 17, 2010 4:05 PM > >> To: antlr-
> interest
> at antlr.org > >> Subject: [antlr-interest] how to generate C++ file > >> > >>
> Hi, > >> > >>  I am using ANTLRWorks 1.4 for my project. I would like to
> generate > >> the > > C++ > >> file from this grammar. I don't find how to do
> this. Can you give me > > direction > >> in how to generate those files. > >> >
> >> Thanks, > >> Jrk
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From acondit at ipns.com  Thu Aug 19 13:26:05 2010
From: acondit at ipns.com (Alan Condit)
Date: Thu, 19 Aug 2010 13:26:05 -0700
Subject: [antlr-interest] DFA display in ANTLRWorks not working on MacOSX
In-Reply-To: <mailman.0.1282244401.19175.antlr-interest@antlr.org>
References: <mailman.0.1282244401.19175.antlr-interest@antlr.org>
Message-ID: <32946ED5-0EEF-472F-B3B7-E38A07ACDCE8@ipns.com>

Thomas,

It works fine for me, but I am using Graphviz 2.26.3. You can get it from here <http://www.graphviz.org/pub/graphviz/stable/macos/snowleopard/graphviz-2.26.3.pkg>.

Alan
---

Alan Condit
1085 Tierra Ct.
Woodburn, OR 97071

Email -- acondit at ipns.com
Home-Office (503) 982-0906

On Aug 19, 2010, at 12:00 PM, antlr-interest-request at antlr.org wrote:

> From: Thomas Nilsson <thomas.nilsson at responsive.se>
> Date: August 19, 2010 10:14:00 AM PDT
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] DFA display in ANTLRWorks not working on MacOSX
> 
> 
> I am in the process of converting an old-ish LR-grammar to work with ANTLRs LL-principles which is an interesting, but educational, journey.
> 
> I'm running on MacOSX and looking at my single remaining non-LL(*) decision and was hoping to get some help from the DFA. unfortunatley displaying it does not work. When asked to produce the DFA, GraphViz pops up a message like "DOTxxxx.out could not be opened. GraphViz cannot open this kind of file." The message is then repeated for the ".in"-file.
> 
> ANTLRWorks preferences seems to be pointing in the right direction, as some other graphs are produced alright. (Although I do not know if ANTLRWorks uses GraphViz for that...)
> 
> I'm using latest ANTLRWorks (bundled, but has also tried the jar), and have latest GraphViz (2.20.3 from 2008) for MacOSX.
> 
> Anyone have any clue, or hint on what to try?
> 
> Thomas Nilsson, CTO, Agile Mentor
> Responsive Development Technologies AB
> Web: http://www.responsive.se
> Email: thomas.nilsson at responsive.se
> Phone: +46 70 561 75 41
> Blog: http://www.responsive.se/thomas
> 


From thomas.nilsson at responsive.se  Thu Aug 19 14:23:28 2010
From: thomas.nilsson at responsive.se (Thomas Nilsson)
Date: Thu, 19 Aug 2010 23:23:28 +0200
Subject: [antlr-interest] DFA display in ANTLRWorks not working on MacOSX
In-Reply-To: <32946ED5-0EEF-472F-B3B7-E38A07ACDCE8@ipns.com>
References: <mailman.0.1282244401.19175.antlr-interest@antlr.org>
	<32946ED5-0EEF-472F-B3B7-E38A07ACDCE8@ipns.com>
Message-ID: <EBF63C75-095F-4758-AA6C-5663E9A1D382@responsive.se>

Thanks for the suggestions. For me not even 2.26.3 did work, GraphViz popped the same message but this version also prompted me for a file to open.

So I followed Jim Idles suggestion and pointed ANTLRWorks to /usr/local/bin/dot and everything worked ok! (Well, except my grammar ;-)

Thomas Nilsson, CTO, Agile Mentor
Responsive Development Technologies AB
Web: http://www.responsive.se
Email: thomas.nilsson at responsive.se
Phone: +46 70 561 75 41
Blog: http://www.responsive.se/thomas


19 aug 2010 kl. 22.26 skrev Alan Condit:

> Thomas,
> 
> It works fine for me, but I am using Graphviz 2.26.3. You can get it from here <http://www.graphviz.org/pub/graphviz/stable/macos/snowleopard/graphviz-2.26.3.pkg>.
> 
> Alan
> ---
> 
> Alan Condit
> 1085 Tierra Ct.
> Woodburn, OR 97071
> 
> Email -- acondit at ipns.com
> Home-Office (503) 982-0906
> 
> On Aug 19, 2010, at 12:00 PM, antlr-interest-request at antlr.org wrote:
> 
>> From: Thomas Nilsson <thomas.nilsson at responsive.se>
>> Date: August 19, 2010 10:14:00 AM PDT
>> To: antlr-interest at antlr.org
>> Subject: [antlr-interest] DFA display in ANTLRWorks not working on MacOSX
>> 
>> 
>> I am in the process of converting an old-ish LR-grammar to work with ANTLRs LL-principles which is an interesting, but educational, journey.
>> 
>> I'm running on MacOSX and looking at my single remaining non-LL(*) decision and was hoping to get some help from the DFA. unfortunatley displaying it does not work. When asked to produce the DFA, GraphViz pops up a message like "DOTxxxx.out could not be opened. GraphViz cannot open this kind of file." The message is then repeated for the ".in"-file.
>> 
>> ANTLRWorks preferences seems to be pointing in the right direction, as some other graphs are produced alright. (Although I do not know if ANTLRWorks uses GraphViz for that...)
>> 
>> I'm using latest ANTLRWorks (bundled, but has also tried the jar), and have latest GraphViz (2.20.3 from 2008) for MacOSX.
>> 
>> Anyone have any clue, or hint on what to try?
>> 
>> Thomas Nilsson, CTO, Agile Mentor
>> Responsive Development Technologies AB
>> Web: http://www.responsive.se
>> Email: thomas.nilsson at responsive.se
>> Phone: +46 70 561 75 41
>> Blog: http://www.responsive.se/thomas
>> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From jimi at temporal-wave.com  Thu Aug 19 16:05:44 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 19 Aug 2010 16:05:44 -0700
Subject: [antlr-interest] DFA display in ANTLRWorks not working on MacOSX
In-Reply-To: <EBF63C75-095F-4758-AA6C-5663E9A1D382@responsive.se>
References: <mailman.0.1282244401.19175.antlr-interest@antlr.org>	<32946ED5-0EEF-472F-B3B7-E38A07ACDCE8@ipns.com>
	<EBF63C75-095F-4758-AA6C-5663E9A1D382@responsive.se>
Message-ID: <02a901cb3ff3$0d5777b0$28066710$@temporal-wave.com>

Good - thanks for replying to say so as this will then be useful in
http://antlr.markmail.org 

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Thomas Nilsson
> Sent: Thursday, August 19, 2010 2:23 PM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] DFA display in ANTLRWorks not working on
> MacOSX
> 
> Thanks for the suggestions. For me not even 2.26.3 did work, GraphViz
> popped the same message but this version also prompted me for a file to
> open.
> 
> So I followed Jim Idles suggestion and pointed ANTLRWorks to
> /usr/local/bin/dot and everything worked ok! (Well, except my grammar ;-)
> 
> Thomas Nilsson, CTO, Agile Mentor
> Responsive Development Technologies AB
> Web: http://www.responsive.se
> Email: thomas.nilsson at responsive.se
> Phone: +46 70 561 75 41
> Blog: http://www.responsive.se/thomas
> 
> 
> 19 aug 2010 kl. 22.26 skrev Alan Condit:
> 
> > Thomas,
> >
> > It works fine for me, but I am using Graphviz 2.26.3. You can get it
from
> here
> <http://www.graphviz.org/pub/graphviz/stable/macos/snowleopard/graph
> viz-2.26.3.pkg>.
> >
> > Alan
> > ---
> >
> > Alan Condit
> > 1085 Tierra Ct.
> > Woodburn, OR 97071
> >
> > Email -- acondit at ipns.com
> > Home-Office (503) 982-0906
> >
> > On Aug 19, 2010, at 12:00 PM, antlr-interest-request at antlr.org wrote:
> >
> >> From: Thomas Nilsson <thomas.nilsson at responsive.se>
> >> Date: August 19, 2010 10:14:00 AM PDT
> >> To: antlr-interest at antlr.org
> >> Subject: [antlr-interest] DFA display in ANTLRWorks not working on
> MacOSX
> >>
> >>
> >> I am in the process of converting an old-ish LR-grammar to work with
> ANTLRs LL-principles which is an interesting, but educational, journey.
> >>
> >> I'm running on MacOSX and looking at my single remaining non-LL(*)
> decision and was hoping to get some help from the DFA. unfortunatley
> displaying it does not work. When asked to produce the DFA, GraphViz pops
> up a message like "DOTxxxx.out could not be opened. GraphViz cannot open
> this kind of file." The message is then repeated for the ".in"-file.
> >>
> >> ANTLRWorks preferences seems to be pointing in the right direction, as
> some other graphs are produced alright. (Although I do not know if
> ANTLRWorks uses GraphViz for that...)
> >>
> >> I'm using latest ANTLRWorks (bundled, but has also tried the jar), and
> have latest GraphViz (2.20.3 from 2008) for MacOSX.
> >>
> >> Anyone have any clue, or hint on what to try?
> >>
> >> Thomas Nilsson, CTO, Agile Mentor
> >> Responsive Development Technologies AB
> >> Web: http://www.responsive.se
> >> Email: thomas.nilsson at responsive.se
> >> Phone: +46 70 561 75 41
> >> Blog: http://www.responsive.se/thomas
> >>
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From vontio at gmail.com  Thu Aug 19 18:58:45 2010
From: vontio at gmail.com (=?ISO-8859-1?B?RmVuZyBYaWFvYm8=?=)
Date: Fri, 20 Aug 2010 09:58:45 +0800
Subject: [antlr-interest] [SPAM] bug? :ActionScript target tree grammar
	expect <DOWN> or <UP>
Message-ID: <tencent_7B2BECC466BCDEB907E72CF4@qq.com>

hi,I use ANTLRworks create a simple grammar and a simple tree grammer.
When the tree grammer diagram shows <DOWN> blah <UP> the the parser will report expect <DOWN> or <UP> error.
But with the same grammar I change the target to Java it will be ok,so I think this is a bug with the actionscript target.
anyone know this bug? or how to resolve this? ;-(

From thomas.nilsson at responsive.se  Thu Aug 19 23:16:40 2010
From: thomas.nilsson at responsive.se (Thomas Nilsson)
Date: Fri, 20 Aug 2010 08:16:40 +0200
Subject: [antlr-interest] Setting input in the interpreter
Message-ID: <D9F0F9E0-F839-4C2D-878E-EEB27F32282D@responsive.se>

Is there a way to set the input stream in the interpreter, either ANTLRWorks or ANTLR IDE?

My grammar is case insensitive,  and although there is an example on the Wiki on how to do this for real, I was looking for a way to run my numerous test cases in the interpreter before implementing anything else.

Thomas Nilsson, CTO, Agile Mentor
Responsive Development Technologies AB
Web: http://www.responsive.se
Email: thomas.nilsson at responsive.se
Phone: +46 70 561 75 41
Blog: http://www.responsive.se/thomas


From azamir at azamir.de  Fri Aug 20 00:33:35 2010
From: azamir at azamir.de (Frederic Beister)
Date: Fri, 20 Aug 2010 09:33:35 +0200
Subject: [antlr-interest] Lexer Rule matching member variable (Java)
In-Reply-To: <011c01cb3d68$c1764d80$4462e880$@temporal-wave.com>
References: <4C68DD47.6020603@azamir.de>
	<011c01cb3d68$c1764d80$4462e880$@temporal-wave.com>
Message-ID: <4C6E2FCF.9080209@azamir.de>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi and thanks for the quick response!

I got that part to work. However, when I use these terminal rules:

fragment ANY_CHAR : .;

SPECIAL :
	{ lxstate==State.NORMAL && input.LA(1)==curspecial} ?=>
	ANY_CHAR
	{ lxstate = State.SPECIAL; } ;

TEXT :
	{ lxstate==State.NORMAL && input.LA(1)!=curspecial} ?=>
	ANY_CHAR ;

I get lots of TEXT-nodes with only one character. When I modify the
second rule to match ANY_CHAR+, the TEXT-rule might consume something
like "Text@{test" where @ is the current special character - which I
don't want it to (There is even a warning when I run ANTLS regarding
that possibility).

I'd need to express the matching of (~curspecial)+ as a predicate. Is
there a possibility to do that? I'd also be willing to modify the
generated code. I guess I'd have to insert some kind of loop where the
ANY_CHAR is matched(?)

Greetings
Frederic



Am 16.08.2010 19:30, schrieb Jim Idle:
> You want a rule like this:
> 
> DELIM : { input.LA(1) == currDelim}?=> . ;
> 
> However, this could get a little complicated to get the matching order of
> the rules correct when you start having a lot more rules. You will need to
> experiment a little.
> 
> You could also pre-process the input and substitute something extremely
> unlikely to clash with the language, such as '\u0001' or something like
> that. Then  only look for that character in the main lexer.
> 
> Jim
> 
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Frederic Beister
>> Sent: Sunday, August 15, 2010 11:40 PM
>> To: antlr-interest at antlr.org
>> Subject: [antlr-interest] Lexer Rule matching member variable (Java)
>>
> Hello,
> 
> I want to write an ANTLR-Lexer and -Parser for a Literate Programming
> language. The idea is to embed code fragments in various languages in a
> LaTeX document and generate source files on-the-fly.
> 
> The languages allows to change the special character used to denote the
> beginning of a code snippet and the special character used inside these
> snippets to denote inclusion of other snippets. This is needed because
>> some
> "guest"-languages might need a pre-defined special character themselves.
> 
> The special character can be changed anywhere in the source text by using
> <OLDSPECIAL>=<NEWSPECIAL> where <OLDSPACIAL> is the old special
> character and <NEWSPECIAL> is the new special character that should be
> active after that instruction.
> 
> My idea was to modify the lexer such that it has a member variable "char
> cur_special" that is set to the current special character and match
>> against it in
> a rule
> 
> "fragment SCHAR : cur_special"
> 
> such that the token stream abstracts from the different possible special
> characters.
> 
> At the moment, the only way I see to accomplish this is to manually modify
> the generated lexer in many places.
> 
> Is there perhaps a built-in functionality in ANTLR 3.2 i could use? I
>> couldn't
> find anything in the archives searching for "lexer match member". I really
> don't need a full how-to but a gentle nudge in the correct direction.
> 
> Thanks in advance
> Frederic
> 
> P.S.
> Sorry if this is/becomes a repost. My first mail didn't make it through
> - perhaps because it had a PGP signature attachment
> 
> 
>>
List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
email-address

> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


- -- 
PGP Fingerprint = 782C 2BE7 0972 D632 8BDF 4A23 3811 174A 1530 64ED
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.10 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAkxuL88ACgkQOBEXShUwZO221wCcDrMEYhlJ6nAc1qdFBP93hRyM
p+wAn3ee90Bzytkpaw1cDvLp+Ne5Oc7s
=NR0C
-----END PGP SIGNATURE-----

From Enrique.PradosValiente at reale.es  Fri Aug 20 00:56:18 2010
From: Enrique.PradosValiente at reale.es (Prados Valiente Enrique)
Date: Fri, 20 Aug 2010 09:56:18 +0200
Subject: [antlr-interest] (no subject)
In-Reply-To: <4C6E2FCF.9080209@azamir.de>
References: <4C68DD47.6020603@azamir.de><011c01cb3d68$c1764d80$4462e880$@temporal-wave.com>
	<4C6E2FCF.9080209@azamir.de>
Message-ID: <931DCC17C6D7A849AEE684BF5B13E199EFF3C7@BLPOSTIN.reale.net>

Hi all,

 

 

I use AntlrWorks 1.4, and open PLSQL3.g file and do Generate -> Generate Code

 

And I get this error:

 

[09:46:44] error(206): PLSQL3.g:791:4: Alternative 2: after matching input such as ID DOT ID DOT ID DOT ID DOT decision cannot predict what comes next due to recursion overflow to expr_add from sql_expression and to expr_mul from expr_add

 

Log file is hs_err_pid5036.log

 

 

 

Now, I test with Antlr3.exe (.net) from here

 

ANTLR Tool Binaries

ANTLR v3.1.x binaries for .NET framework <http://www.antlr.org/download/ANTLR-3.1-2009-06-28.7z> . No dependence on the Java runtime. antlr3.exe and StringTemplate and ANTLR runtime libraries it depends on. Completely independent version written by Sam Harwell (ported from Java). 

 

I execute this command

E:\Trabajo\SqlParser\ANTLR\ANTLR-3.1-2009-06-28>Antlr3.exe E:\Trabajo\SqlParser\

ANTLR\plsql3.g

 

But I get this error:

 

error(10):  internal error:  : System.Exception: Error parsing E:\Trabajo\SqlPar

ser\ANTLR\plsql3.g: 'backtrack' not expected ';'

   en Antlr3.Tool.GrammarSpelunker.Match(String expecting) en c:\dev\stringtempl

ate_main\antlrcs\main\Antlr3\Tool\GrammarSpelunker.cs:l?nea 89

   en Antlr3.Tool.GrammarSpelunker.Options() en c:\dev\stringtemplate_main\antlr

cs\main\Antlr3\Tool\GrammarSpelunker.cs:l?nea 155

   en Antlr3.Tool.GrammarSpelunker.Parse() en c:\dev\stringtemplate_main\antlrcs

\main\Antlr3\Tool\GrammarSpelunker.cs:l?nea 112

   en Antlr3.AntlrTool.SortGrammarFiles() en c:\dev\stringtemplate_main\antlrcs\

main\Antlr3\AntlrTool.cs:l?nea 595

   en Antlr3.AntlrTool.Process() en c:\dev\stringtemplate_main\antlrcs\main\Antl

r3\AntlrTool.cs:l?nea 431

Match at offset 258 in file:line:column c:\dev\stringtemplate_main\antlrcs\main\

Antlr3\Tool\GrammarSpelunker.cs:89:17

 

Options at offset 89 in file:line:column c:\dev\stringtemplate_main\antlrcs\main

\Antlr3\Tool\GrammarSpelunker.cs:155:17

 

Parse at offset 332 in file:line:column c:\dev\stringtemplate_main\antlrcs\main\

Antlr3\Tool\GrammarSpelunker.cs:112:21

 

SortGrammarFiles at offset 166 in file:line:column c:\dev\stringtemplate_main\an

tlrcs\main\Antlr3\AntlrTool.cs:595:17

 

Process at offset 91 in file:line:column c:\dev\stringtemplate_main\antlrcs\main

\Antlr3\AntlrTool.cs:431:17

 

error(8):  file E:\Trabajo\SqlParser\ANTLR\plsql3.g contains grammar PLSQL3; nam

es must be identical

warning(200): E:\Trabajo\SqlParser\ANTLR\plsql3.g:776:3: Decision can match inpu

t such as "{'ASC', 'DESC'}" using multiple alternatives: 1, 2

As a result, alternative(s) 2 were disabled for that input

error(206): E:\Trabajo\SqlParser\ANTLR\plsql3.g:791:4: Alternative 2: after matc

hing input such as ID DOT ID DOT ID DOT ID DOT decision cannot predict what come

s next due to recursion overflow to expr_add from sql_expression and to expr_mul

 from expr_add

 

 

any solution please ????? 

 

Thanks in advanced

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: hs_err_pid5036.log
Type: application/octet-stream
Size: 10590 bytes
Desc: hs_err_pid5036.log
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20100820/858d7a8c/attachment.obj 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: PLSQL3.g
Type: application/octet-stream
Size: 41702 bytes
Desc: PLSQL3.g
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20100820/858d7a8c/attachment-0001.obj 

From Enrique.PradosValiente at reale.es  Fri Aug 20 00:58:48 2010
From: Enrique.PradosValiente at reale.es (Prados Valiente Enrique)
Date: Fri, 20 Aug 2010 09:58:48 +0200
Subject: [antlr-interest] Error in grammar
In-Reply-To: <931DCC17C6D7A849AEE684BF5B13E199EFF3C7@BLPOSTIN.reale.net>
References: <4C68DD47.6020603@azamir.de><011c01cb3d68$c1764d80$4462e880$@temporal-wave.com>
	<4C6E2FCF.9080209@azamir.de>
	<931DCC17C6D7A849AEE684BF5B13E199EFF3C7@BLPOSTIN.reale.net>
Message-ID: <931DCC17C6D7A849AEE684BF5B13E199EFF3C8@BLPOSTIN.reale.net>

 

Hi all,

 

 

I use AntlrWorks 1.4, and open PLSQL3.g file and do Generate -> Generate Code

 

And I get this error:

 

[09:46:44] error(206): PLSQL3.g:791:4: Alternative 2: after matching input such as ID DOT ID DOT ID DOT ID DOT decision cannot predict what comes next due to recursion overflow to expr_add from sql_expression and to expr_mul from expr_add

 

Log file is hs_err_pid5036.log

 

 

 

Now, I test with Antlr3.exe (.net) from here

 

ANTLR Tool Binaries

ANTLR v3.1.x binaries for .NET framework <http://www.antlr.org/download/ANTLR-3.1-2009-06-28.7z> . No dependence on the Java runtime. antlr3.exe and StringTemplate and ANTLR runtime libraries it depends on. Completely independent version written by Sam Harwell (ported from Java). 

 

I execute this command

E:\Trabajo\SqlParser\ANTLR\ANTLR-3.1-2009-06-28>Antlr3.exe E:\Trabajo\SqlParser\

ANTLR\plsql3.g

 

But I get this error:

 

error(10):  internal error:  : System.Exception: Error parsing E:\Trabajo\SqlPar

ser\ANTLR\plsql3.g: 'backtrack' not expected ';'

   en Antlr3.Tool.GrammarSpelunker.Match(String expecting) en c:\dev\stringtempl

ate_main\antlrcs\main\Antlr3\Tool\GrammarSpelunker.cs:l?nea 89

   en Antlr3.Tool.GrammarSpelunker.Options() en c:\dev\stringtemplate_main\antlr

cs\main\Antlr3\Tool\GrammarSpelunker.cs:l?nea 155

   en Antlr3.Tool.GrammarSpelunker.Parse() en c:\dev\stringtemplate_main\antlrcs

\main\Antlr3\Tool\GrammarSpelunker.cs:l?nea 112

   en Antlr3.AntlrTool.SortGrammarFiles() en c:\dev\stringtemplate_main\antlrcs\

main\Antlr3\AntlrTool.cs:l?nea 595

   en Antlr3.AntlrTool.Process() en c:\dev\stringtemplate_main\antlrcs\main\Antl

r3\AntlrTool.cs:l?nea 431

Match at offset 258 in file:line:column c:\dev\stringtemplate_main\antlrcs\main\

Antlr3\Tool\GrammarSpelunker.cs:89:17

 

Options at offset 89 in file:line:column c:\dev\stringtemplate_main\antlrcs\main

\Antlr3\Tool\GrammarSpelunker.cs:155:17

 

Parse at offset 332 in file:line:column c:\dev\stringtemplate_main\antlrcs\main\

Antlr3\Tool\GrammarSpelunker.cs:112:21

 

SortGrammarFiles at offset 166 in file:line:column c:\dev\stringtemplate_main\an

tlrcs\main\Antlr3\AntlrTool.cs:595:17

 

Process at offset 91 in file:line:column c:\dev\stringtemplate_main\antlrcs\main

\Antlr3\AntlrTool.cs:431:17

 

error(8):  file E:\Trabajo\SqlParser\ANTLR\plsql3.g contains grammar PLSQL3; nam

es must be identical

warning(200): E:\Trabajo\SqlParser\ANTLR\plsql3.g:776:3: Decision can match inpu

t such as "{'ASC', 'DESC'}" using multiple alternatives: 1, 2

As a result, alternative(s) 2 were disabled for that input

error(206): E:\Trabajo\SqlParser\ANTLR\plsql3.g:791:4: Alternative 2: after matc

hing input such as ID DOT ID DOT ID DOT ID DOT decision cannot predict what come

s next due to recursion overflow to expr_add from sql_expression and to expr_mul

 from expr_add

 

 

any solution please ????? 

 

Thanks in advanced

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 


From antlr at garydjones.name  Fri Aug 20 01:39:48 2010
From: antlr at garydjones.name (Gary)
Date: Fri, 20 Aug 2010 10:39:48 +0200
Subject: [antlr-interest] Am I in the right place?
Message-ID: <831v9tvfsb.fsf@garydjones.name>

Or rather, am I looking at the right tool?

What I want, ultimately, is to be able to write code in some "normal"
high-level language, perhaps C, and be able to generate code in a
PO^H^HDSL that I currently have to write code in manually (BASIC-like,
incomplete syntax (IMO) - e.g. no loops, only labels and GOTOs - no
support from any tools, etc.), basically with the aim of making my life
a bit easier.


From k_sarnath at hcl.com  Fri Aug 20 01:53:09 2010
From: k_sarnath at hcl.com (Sarnath K - ERS, HCLTech)
Date: Fri, 20 Aug 2010 14:23:09 +0530
Subject: [antlr-interest] Confusion: Understanding gap or Tree Grammar Bug
Message-ID: <B3F91E1013C53E4B9840FEAD0F12BAAD277E2A2169@CHN-HCLT-EVS08.HCLT.CORP.HCL.IN>

Grammar to parse the "Hi" statement of this e-mail:
---------------------------------------------------
all: cM | cF | 'There';
cM: 'Chitparan'; // Sanskrit word meaning "One who inspires the mind" - Male 
cF: 'Chitpari';  // Sanskrit word meaning "One who inspires the mind" - Female 
---------------------------------------------------

Hi "all",

We are new to ANTLR and we all love this tool! Thanks to Terrence!  \__/

We are trying to write a C2C converter. 
However, we are stuck with the handling of the "block statement" in the Tree Grammar part.
Though we have a workaround, we would like to know whether this is an ANTLR bug (or) a gap in our understanding.

I have written a concise grammar that captures the problem. Kindly see the attachment.

The problem is very simple:
A compound statement is a 'statement' that starts with '{', has zero or more variable declarations, followed by zero or more 'statements' and ends with '}'
In the grammar above, 'v' stands for variable declaration, 's' stands for a statement.

When I run this project , I get the following output.
-------------------------------
Console
-------------------------------
{vs{s}}
Tree = ({ v s ({ s }) })
Tree Grammar Output =  {vs{vs} }
--------------------------------

Now look at "Tree Grammar Output". It carries over the "v" from the previous level.
However if I re-write the grammar as below, I don't have this problem.

b->'{' '}'
  | '{' v '}'
  | '{' s '}'
  | '{' v+ s+ '}'

Kindly advice me on what is the right way to do things!
Are we missing something? (like... RTFM?)

Thanks,
Best Regards,
Sarnath
Sarnath Kannan 
Sr. Technical Manager 
HCL Technologies Ltd 
Shipara Building, Off Hosur Road, GB Palya, Bangalore
+91-80-41584417
www.hcltech.com 
www.hcl.in 


DISCLAIMER:
-----------------------------------------------------------------------------------------------------------------------

The contents of this e-mail and any attachment(s) are confidential and intended for the named recipient(s) only. 
It shall not attach any liability on the originator or HCL or its affiliates. Any views or opinions presented in 
this email are solely those of the author and may not necessarily reflect the opinions of HCL or its affiliates. 
Any form of reproduction, dissemination, copying, disclosure, modification, distribution and / or publication of 
this message without the prior written consent of the author of this e-mail is strictly prohibited. If you have 
received this email in error please delete it and notify the sender immediately. Before opening any mail and 
attachments please check them for viruses and defect.

-----------------------------------------------------------------------------------------------------------------------
-------------- next part --------------
A non-text attachment was scrubbed...
Name: driver.java
Type: application/octet-stream
Size: 912 bytes
Desc: driver.java
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20100820/bd0d277d/attachment.obj 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: block.g
Type: application/octet-stream
Size: 422 bytes
Desc: block.g
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20100820/bd0d277d/attachment-0001.obj 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: blockTree.g
Type: application/octet-stream
Size: 435 bytes
Desc: blockTree.g
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20100820/bd0d277d/attachment-0002.obj 

From k_sarnath at hcl.com  Fri Aug 20 02:19:34 2010
From: k_sarnath at hcl.com (Sarnath K - ERS, HCLTech)
Date: Fri, 20 Aug 2010 14:49:34 +0530
Subject: [antlr-interest] Confusion: Understanding gap or Tree Grammar
	Bug
In-Reply-To: <B3F91E1013C53E4B9840FEAD0F12BAAD277E2A2169@CHN-HCLT-EVS08.HCLT.CORP.HCL.IN>
References: <B3F91E1013C53E4B9840FEAD0F12BAAD277E2A2169@CHN-HCLT-EVS08.HCLT.CORP.HCL.IN>
Message-ID: <B3F91E1013C53E4B9840FEAD0F12BAAD277E2A21A7@CHN-HCLT-EVS08.HCLT.CORP.HCL.IN>

Btw, we are using ANTLR 3.2

+ "Terence" (rr->'r')

+
I just read Terence's blog on ST4 (missing, existent and null, etc...)
May be, the repro case is related to it..? Hmm..

Thanks,

DISCLAIMER:
-----------------------------------------------------------------------------------------------------------------------

The contents of this e-mail and any attachment(s) are confidential and intended for the named recipient(s) only. 
It shall not attach any liability on the originator or HCL or its affiliates. Any views or opinions presented in 
this email are solely those of the author and may not necessarily reflect the opinions of HCL or its affiliates. 
Any form of reproduction, dissemination, copying, disclosure, modification, distribution and / or publication of 
this message without the prior written consent of the author of this e-mail is strictly prohibited. If you have 
received this email in error please delete it and notify the sender immediately. Before opening any mail and 
attachments please check them for viruses and defect.

-----------------------------------------------------------------------------------------------------------------------

From jimi at temporal-wave.com  Fri Aug 20 09:11:59 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 20 Aug 2010 09:11:59 -0700
Subject: [antlr-interest] Setting input in the interpreter
In-Reply-To: <D9F0F9E0-F839-4C2D-878E-EEB27F32282D@responsive.se>
References: <D9F0F9E0-F839-4C2D-878E-EEB27F32282D@responsive.se>
Message-ID: <02ff01cb4082$6b50e1a0$41f2a4e0$@temporal-wave.com>

Did you notice the tab that allows you to change the test rig template?

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Thomas Nilsson
> Sent: Thursday, August 19, 2010 11:17 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Setting input in the interpreter
> 
> Is there a way to set the input stream in the interpreter, either
ANTLRWorks
> or ANTLR IDE?
> 
> My grammar is case insensitive,  and although there is an example on the
> Wiki on how to do this for real, I was looking for a way to run my
numerous
> test cases in the interpreter before implementing anything else.
> 
> Thomas Nilsson, CTO, Agile Mentor
> Responsive Development Technologies AB
> Web: http://www.responsive.se
> Email: thomas.nilsson at responsive.se
> Phone: +46 70 561 75 41
> Blog: http://www.responsive.se/thomas
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From jimi at temporal-wave.com  Fri Aug 20 09:15:30 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 20 Aug 2010 09:15:30 -0700
Subject: [antlr-interest] Lexer Rule matching member variable (Java)
In-Reply-To: <4C6E2FCF.9080209@azamir.de>
References: <4C68DD47.6020603@azamir.de>	<011c01cb3d68$c1764d80$4462e880$@temporal-wave.com>
	<4C6E2FCF.9080209@azamir.de>
Message-ID: <030101cb4082$e8ac4040$ba04c0c0$@temporal-wave.com>

You just need to not use ANY. Once the predicate matches, your rule is
selected and it will do whatever you tell it. So, don't use ANY+ just put
some code in to consume until you get to some point that you don't want to
consume any more:

TEXT: { lxstate==State.NORMAL && input.LA(1)!=curspecial} ?=> .
{
  while (input.LA(1) != curspecial) { input.consume(); }
}
;

It is often instructive to look at the generated code and steal from it to
get where you need to.

Jim 

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Frederic Beister
> Sent: Friday, August 20, 2010 12:34 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Lexer Rule matching member variable (Java)
> 
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
> 
> Hi and thanks for the quick response!
> 
> I got that part to work. However, when I use these terminal rules:
> 
> fragment ANY_CHAR : .;
> 
> SPECIAL :
> 	{ lxstate==State.NORMAL && input.LA(1)==curspecial} ?=>
> 	ANY_CHAR
> 	{ lxstate = State.SPECIAL; } ;
> 
> TEXT :
> 	{ lxstate==State.NORMAL && input.LA(1)!=curspecial} ?=>
> 	ANY_CHAR ;
> 
> I get lots of TEXT-nodes with only one character. When I modify the second
> rule to match ANY_CHAR+, the TEXT-rule might consume something like
> "Text@{test" where @ is the current special character - which I don't want
it
> to (There is even a warning when I run ANTLS regarding that possibility).
> 
> I'd need to express the matching of (~curspecial)+ as a predicate. Is
there a
> possibility to do that? I'd also be willing to modify the generated code.
I guess
> I'd have to insert some kind of loop where the ANY_CHAR is matched(?)
> 
> Greetings
> Frederic
> 
> 
> 
> Am 16.08.2010 19:30, schrieb Jim Idle:
> > You want a rule like this:
> >
> > DELIM : { input.LA(1) == currDelim}?=> . ;
> >
> > However, this could get a little complicated to get the matching order
> > of the rules correct when you start having a lot more rules. You will
> > need to experiment a little.
> >
> > You could also pre-process the input and substitute something
> > extremely unlikely to clash with the language, such as '\u0001' or
> > something like that. Then  only look for that character in the main
lexer.
> >
> > Jim
> >
> >> -----Original Message-----
> >> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> >> bounces at antlr.org] On Behalf Of Frederic Beister
> >> Sent: Sunday, August 15, 2010 11:40 PM
> >> To: antlr-interest at antlr.org
> >> Subject: [antlr-interest] Lexer Rule matching member variable (Java)
> >>
> > Hello,
> >
> > I want to write an ANTLR-Lexer and -Parser for a Literate Programming
> > language. The idea is to embed code fragments in various languages in
> > a LaTeX document and generate source files on-the-fly.
> >
> > The languages allows to change the special character used to denote
> > the beginning of a code snippet and the special character used inside
> > these snippets to denote inclusion of other snippets. This is needed
> > because
> >> some
> > "guest"-languages might need a pre-defined special character themselves.
> >
> > The special character can be changed anywhere in the source text by
> > using <OLDSPECIAL>=<NEWSPECIAL> where <OLDSPACIAL> is the old
> special
> > character and <NEWSPECIAL> is the new special character that should be
> > active after that instruction.
> >
> > My idea was to modify the lexer such that it has a member variable
> > "char cur_special" that is set to the current special character and
> > match
> >> against it in
> > a rule
> >
> > "fragment SCHAR : cur_special"
> >
> > such that the token stream abstracts from the different possible
> > special characters.
> >
> > At the moment, the only way I see to accomplish this is to manually
> > modify the generated lexer in many places.
> >
> > Is there perhaps a built-in functionality in ANTLR 3.2 i could use? I
> >> couldn't
> > find anything in the archives searching for "lexer match member". I
> > really don't need a full how-to but a gentle nudge in the correct
direction.
> >
> > Thanks in advance
> > Frederic
> >
> > P.S.
> > Sorry if this is/becomes a repost. My first mail didn't make it
> > through
> > - perhaps because it had a PGP signature attachment
> >
> >
> >>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address
> 
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
> 
> - --
> PGP Fingerprint = 782C 2BE7 0972 D632 8BDF 4A23 3811 174A 1530 64ED -----
> BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.10 (GNU/Linux)
> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/
> 
> iEYEARECAAYFAkxuL88ACgkQOBEXShUwZO221wCcDrMEYhlJ6nAc1qdFBP93h
> RyM
> p+wAn3ee90Bzytkpaw1cDvLp+Ne5Oc7s
> =NR0C
> -----END PGP SIGNATURE-----
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From jimi at temporal-wave.com  Fri Aug 20 09:18:48 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 20 Aug 2010 09:18:48 -0700
Subject: [antlr-interest] Am I in the right place?
In-Reply-To: <831v9tvfsb.fsf@garydjones.name>
References: <831v9tvfsb.fsf@garydjones.name>
Message-ID: <030301cb4083$5eb0a740$1c11f5c0$@temporal-wave.com>

Yes, you are in the right place, but if you are starting from no knowledge
of parsers, code generators and so on, then you are best off buying the book
and following a few examples through before trying to do something like
that. However, ANTLR is specifically written with the idea that most people
will want to do translations rather than write compilers, so this is the
correct tool for your task.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Gary
> Sent: Friday, August 20, 2010 1:40 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Am I in the right place?
> 
> Or rather, am I looking at the right tool?
> 
> What I want, ultimately, is to be able to write code in some "normal"
> high-level language, perhaps C, and be able to generate code in a
> PO^H^HDSL that I currently have to write code in manually (BASIC-like,
> incomplete syntax (IMO) - e.g. no loops, only labels and GOTOs - no
support
> from any tools, etc.), basically with the aim of making my life a bit
easier.
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From antlr at garydjones.name  Fri Aug 20 09:43:15 2010
From: antlr at garydjones.name (Gary)
Date: Fri, 20 Aug 2010 18:43:15 +0200
Subject: [antlr-interest] Am I in the right place?
References: <831v9tvfsb.fsf@garydjones.name>
	<030301cb4083$5eb0a740$1c11f5c0$@temporal-wave.com>
Message-ID: <834oepp74s.fsf@garydjones.name>

Jim Idle wrote:

> Yes, you are in the right place, but if you are starting from no knowledge
> of parsers, code generators and so on, then you are best off buying the book
> and following a few examples through

I'm familiar with compiler construction (at least I was many years ago,
the knowledge has probably rotted away by now) so I guess some of the
theory will be familiar, at least.

> this is the correct tool for your task.

Cool :) Thanks.

I'm guessing I "only" need to provide the generation target for this,
right?


From thomas.nilsson at responsive.se  Fri Aug 20 12:55:24 2010
From: thomas.nilsson at responsive.se (Thomas Nilsson)
Date: Fri, 20 Aug 2010 21:55:24 +0200
Subject: [antlr-interest] Setting input in the interpreter
In-Reply-To: <02ff01cb4082$6b50e1a0$41f2a4e0$@temporal-wave.com>
References: <D9F0F9E0-F839-4C2D-878E-EEB27F32282D@responsive.se>
	<02ff01cb4082$6b50e1a0$41f2a4e0$@temporal-wave.com>
Message-ID: <094ED3E5-6FD9-4E91-9039-4FF5B1511A8F@responsive.se>

20 aug 2010 kl. 18.11 skrev Jim Idle:

> Did you notice the tab that allows you to change the test rig template?
> 

Yes, I did, but it was not easy to find it again, now that I know that I probably need it ;-)

I found one on the "Run"-menue and some setting in the Preferences (but no tab). But I don't really know what to make of it. How do I use it? I guess that the "Class" is to indicate a java class to load, and that the classpath should be tweaked accordingly in the Preferences->Compiler->Classpath. Would I lose any system classpaths that I need to explicitly add if I customize it?

And finally, the class should be a complete implementation of the test rig. Is there a template somewhere?

(All this is in ANTLRWorks 1.4, couldn't find anything similar in ANTLR-IDE, Eclipse 3.6...)

Thomas Nilsson, CTO, Agile Mentor
Responsive Development Technologies AB
Web: http://www.responsive.se
Email: thomas.nilsson at responsive.se
Phone: +46 70 561 75 41
Blog: http://www.responsive.se/thomas

> Jim
> 
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Thomas Nilsson
>> Sent: Thursday, August 19, 2010 11:17 PM
>> To: antlr-interest at antlr.org
>> Subject: [antlr-interest] Setting input in the interpreter
>> 
>> Is there a way to set the input stream in the interpreter, either
> ANTLRWorks
>> or ANTLR IDE?
>> 
>> My grammar is case insensitive,  and although there is an example on the
>> Wiki on how to do this for real, I was looking for a way to run my
> numerous
>> test cases in the interpreter before implementing anything else.
>> 
>> Thomas Nilsson, CTO, Agile Mentor
>> Responsive Development Technologies AB
>> Web: http://www.responsive.se
>> Email: thomas.nilsson at responsive.se
>> Phone: +46 70 561 75 41
>> Blog: http://www.responsive.se/thomas
>> 
>> 
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>> email-address
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From avidtrober at gmail.com  Fri Aug 20 19:05:50 2010
From: avidtrober at gmail.com (Avid Trober)
Date: Fri, 20 Aug 2010 21:05:50 -0500
Subject: [antlr-interest] How can I use my grammar's tokens without them
	being considered tokens?
Message-ID: <007c01cb40d5$6249b340$26dd19c0$@com>

For example,  "SERVICE" is a keyword in my grammar:

 

tokens

{

                SERVICE = 'SERVICE';

                OTHER_KEYWORD = 'OTHER_KEYWORD'

.

}

 

Therefore, I can't use SERVICE as a value to OTHER_KEYWORD, like this:

 

OTHER_KEYWORD=SERVICE

 

Based on this grammar rule:

 

keywordValuePair

                :               keyword=identifier EQUAL
keywordValue=identifier

                                -> ^(KEYWORD_VALUE_PAIR $keyword
$keywordValue)

 

In fact, I can't use *any* token in my grammar on the right side of the
equal sign above.

 

There are times when I want SERVICE, or any value in tokens {.}, to be
considered an IDENTIFIER, not a token:

 

identifier 

                : IDENTIFIER;

.

IDENTIFIER : ( 'A' .. 'Z' | 'a'..'z' | '_') ( 'A' .. 'Z' | 'a'..'z' | '0' ..
'9' | '_' | '.' )* ;

 

 

 


From avidtrober at gmail.com  Fri Aug 20 23:01:20 2010
From: avidtrober at gmail.com (Avid Trober)
Date: Sat, 21 Aug 2010 01:01:20 -0500
Subject: [antlr-interest] Why does ANTLR generate code that will never call
	an OR'd alternative?
Message-ID: <00a001cb40f6$48381ac0$d8a85040$@com>

For this rule,

 

identifier 

                :       isToken | IDENTIFIER;

 

ANTLR generates code that would never calls the isToken rule
(target=CSharp2):

 

    public MYParser.identifier_return identifier()    // throws
RecognitionException [1]

    {   

.

            // .  : ( isToken | IDENTIFIER )

            int alt30 = 2;

            int LA30_0 = input.LA(1);

 

            if ( (LA30_0 == IDENTIFIER) )   // <== token must be IDENTIFIER
to call isToken???

            {

                int LA30_1 = input.LA(2);

 

                if ( ((isToken(input.LT(1)))) )  // <== why must LA30_0 ==
IDENTIFIER to call isToken?

                {

                    alt30 = 1;

                }

                else if ( (true) )

                {

                    alt30 = 2;

                }

.

            else                         //  <== since not IDENTIFIER, why
not call isToken here???

            {

                NoViableAltException nvae_d30s0 =

                    new NoViableAltException("", 30, 0, input);

 

                throw nvae_d30s0;

            }

 

I would think it's something to do with DFA optimization?   Perhaps that's
why IDENTIFIER is checked first.

But, if IDENTIFIER is false, why not call isToken???    Afterall, the rule
is IDENTIFIER  ****OR***** isToken.

 

Thanks,

Trober

 

 


From gerald at certiv.net  Fri Aug 20 23:34:33 2010
From: gerald at certiv.net (Gerald Rosenberg)
Date: Fri, 20 Aug 2010 23:34:33 -0700
Subject: [antlr-interest] Why does ANTLR generate code that will never
 call	an OR'd alternative?
In-Reply-To: <00a001cb40f6$48381ac0$d8a85040$@com>
References: <00a001cb40f6$48381ac0$d8a85040$@com>
Message-ID: <4C6F7379.3030707@certiv.net>

  Most likely, the parser generation analysis determined that isToken 
can never be reached.  Check your error log for an alt skipped message.



------ Original Message (Saturday, August 21, 2010 1:01:20 
AM) From: Avid Trober ------
Subject: [antlr-interest] Why does ANTLR generate code that will never call
an OR'd alternative?
> For this rule,
>
>
>
> identifier
>
>                  :       isToken | IDENTIFIER;
>
>
>
> ANTLR generates code that would never calls the isToken rule
> (target=CSharp2):
>
>
>
>      public MYParser.identifier_return identifier()    // throws
> RecognitionException [1]
>
>      {
>
> .
>
>              // .  : ( isToken | IDENTIFIER )
>
>              int alt30 = 2;
>
>              int LA30_0 = input.LA(1);
>
>
>
>              if ( (LA30_0 == IDENTIFIER) )   //<== token must be IDENTIFIER
> to call isToken???
>
>              {
>
>                  int LA30_1 = input.LA(2);
>
>
>
>                  if ( ((isToken(input.LT(1)))) )  //<== why must LA30_0 ==
> IDENTIFIER to call isToken?
>
>                  {
>
>                      alt30 = 1;
>
>                  }
>
>                  else if ( (true) )
>
>                  {
>
>                      alt30 = 2;
>
>                  }
>
> .
>
>              else                         //<== since not IDENTIFIER, why
> not call isToken here???
>
>              {
>
>                  NoViableAltException nvae_d30s0 =
>
>                      new NoViableAltException("", 30, 0, input);
>
>
>
>                  throw nvae_d30s0;
>
>              }
>
>
>
> I would think it's something to do with DFA optimization?   Perhaps that's
> why IDENTIFIER is checked first.
>
> But, if IDENTIFIER is false, why not call isToken???    Afterall, the rule
> is IDENTIFIER  ****OR***** isToken.
>
>
>
> Thanks,
>
> Trober
>
>
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


-- 

Gerald B. Rosenberg, Esq.
NewTechLaw
260 Sheridan Ave., Suite 208
Palo Alto, CA 94306-2009
650.325.2100 (office) / 650.703.1724 (cell)
650.325.2107 (facsimile)

www.newtechlaw.com

CONFIDENTIALITY NOTICE: This email message (including any attachments) 
is being sent by an attorney,
is for the sole use of the intended recipient, and may contain 
confidential and privileged information.
Any unauthorized review, use, disclosure or distribution is prohibited. 
If you are not the intended
recipient, please contact the sender immediately by reply email and 
delete all copies of this message
and any attachments without retaining a copy.


From avidtrober at gmail.com  Sat Aug 21 00:27:45 2010
From: avidtrober at gmail.com (Avid Trober)
Date: Sat, 21 Aug 2010 02:27:45 -0500
Subject: [antlr-interest] Why does ANTLR generate code that will never
	call	an OR'd alternative?
In-Reply-To: <4C6F7379.3030707@certiv.net>
References: <00a001cb40f6$48381ac0$d8a85040$@com> <4C6F7379.3030707@certiv.net>
Message-ID: <00a501cb4102$5a1affd0$0e50ff70$@com>

Gerald,

Thank you very much for your reply.

There's no alt skipped message in the error log.

The 'isToken' rule was simply my attempt to have the parser check if the
token was in the tokens { ... } section.  At runtime, I found the token type
to always be the value in the token { ... } section, even if I tried to
change it:

	isToken	:	{isToken(input.LT(1))}? IDENTIFIER;

But, 'isToken' would never get called via the generated code, e.g. 

	identifier  :  isToken | IDENTIFIER;   // i.e. treat a token in the
tokens section as an IDENTIFIER.

Therefore, I modified my 'identifier' rule to have each tokens { ... } value
in it, e.g.

	identifier:
		( 'TOKEN1', 'TOKEN2', ... 'TOKEN_ELEVENTYTEEN_THOUSAND' }  {
input.LT(-1).Type = IDENTIFIER; }
		| IDENTIFIER;

And,  that worked.  That is, if I have "identifier" in the grammar somewhere
it will now accept an IDENTIFIER, as it always has, but also any 'TOKEN1',
'TOKEN2', etc. value found in tokens { ... }

Personally, I hate this.  It means I need *two* places in my grammar to list
the keywords, the tokens { ... } section AND the identifier rule.  I'm sure
there's some way to do it via an action, predicate, whatever.  

I went down this path due to this recommendation: " The author's
recommendation is to use ordinary rules and the tokens command." at
http://www.antlr.org/wiki/display/ANTLR3/Quick+Starter+on+Parser+Grammars+-+
No+Past+Experience+Required. 

It appears the tokens section is NOT the thing to do, perhaps rather to have
per-token rules, e.g. keyToken1, keyToken2, etc.  But, I can't rewrite this
grammar and risk breaking other things.  Perhaps I should in the future.
Preferably, I simply like a way to scan thru the tokens, if found, note it,
then change the token type to IDENTIFIER - without listing all the tokens
twice in the grammar.

Any suggestions very, very welcome. 

Regards,
Trober




-----Original Message-----
From: Gerald Rosenberg [mailto:gerald at certiv.net] 
Sent: Saturday, August 21, 2010 1:35 AM
To: Avid Trober
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Why does ANTLR generate code that will never
call an OR'd alternative?

  Most likely, the parser generation analysis determined that isToken 
can never be reached.  Check your error log for an alt skipped message.



------ Original Message (Saturday, August 21, 2010 1:01:20 
AM) From: Avid Trober ------
Subject: [antlr-interest] Why does ANTLR generate code that will never call
an OR'd alternative?
> For this rule,
>
>
>
> identifier
>
>                  :       isToken | IDENTIFIER;
>
>
>
> ANTLR generates code that would never calls the isToken rule
> (target=CSharp2):
>
>
>
>      public MYParser.identifier_return identifier()    // throws
> RecognitionException [1]
>
>      {
>
> .
>
>              // .  : ( isToken | IDENTIFIER )
>
>              int alt30 = 2;
>
>              int LA30_0 = input.LA(1);
>
>
>
>              if ( (LA30_0 == IDENTIFIER) )   //<== token must be
IDENTIFIER
> to call isToken???
>
>              {
>
>                  int LA30_1 = input.LA(2);
>
>
>
>                  if ( ((isToken(input.LT(1)))) )  //<== why must LA30_0 ==
> IDENTIFIER to call isToken?
>
>                  {
>
>                      alt30 = 1;
>
>                  }
>
>                  else if ( (true) )
>
>                  {
>
>                      alt30 = 2;
>
>                  }
>
> .
>
>              else                         //<== since not IDENTIFIER, why
> not call isToken here???
>
>              {
>
>                  NoViableAltException nvae_d30s0 =
>
>                      new NoViableAltException("", 30, 0, input);
>
>
>
>                  throw nvae_d30s0;
>
>              }
>
>
>
> I would think it's something to do with DFA optimization?   Perhaps that's
> why IDENTIFIER is checked first.
>
> But, if IDENTIFIER is false, why not call isToken???    Afterall, the rule
> is IDENTIFIER  ****OR***** isToken.
>
>
>
> Thanks,
>
> Trober
>
>
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


-- 

Gerald B. Rosenberg, Esq.
NewTechLaw
260 Sheridan Ave., Suite 208
Palo Alto, CA 94306-2009
650.325.2100 (office) / 650.703.1724 (cell)
650.325.2107 (facsimile)

www.newtechlaw.com

CONFIDENTIALITY NOTICE: This email message (including any attachments) 
is being sent by an attorney,
is for the sole use of the intended recipient, and may contain 
confidential and privileged information.
Any unauthorized review, use, disclosure or distribution is prohibited. 
If you are not the intended
recipient, please contact the sender immediately by reply email and 
delete all copies of this message
and any attachments without retaining a copy.


From cummings at kjchome.homeip.net  Sat Aug 21 00:41:44 2010
From: cummings at kjchome.homeip.net (Kevin J. Cummings)
Date: Sat, 21 Aug 2010 03:41:44 -0400
Subject: [antlr-interest] Why does ANTLR generate code that will never
 call	an OR'd alternative?
In-Reply-To: <00a501cb4102$5a1affd0$0e50ff70$@com>
References: <00a001cb40f6$48381ac0$d8a85040$@com> <4C6F7379.3030707@certiv.net>
	<00a501cb4102$5a1affd0$0e50ff70$@com>
Message-ID: <4C6F8338.5030901@kjchome.homeip.net>

On 08/21/2010 03:27 AM, Avid Trober wrote:
> Gerald,
> 
> Thank you very much for your reply.
> 
> There's no alt skipped message in the error log.
> 
> The 'isToken' rule was simply my attempt to have the parser check if the
> token was in the tokens { ... } section.  At runtime, I found the token type
> to always be the value in the token { ... } section, even if I tried to
> change it:
> 
> 	isToken	:	{isToken(input.LT(1))}? IDENTIFIER;
> 
> But, 'isToken' would never get called via the generated code, e.g. 
> 
> 	identifier  :  isToken | IDENTIFIER;   // i.e. treat a token in the
> tokens section as an IDENTIFIER.

You need to move your semantic predicate.  The lookahead sees that
IDENTIFIER is the lookahead for both.  If you want it to go through
isToken, your need to move the semantic predicate to the "identifier" rule.

> Therefore, I modified my 'identifier' rule to have each tokens { ... } value
> in it, e.g.
> 
> 	identifier:
> 		( 'TOKEN1', 'TOKEN2', ... 'TOKEN_ELEVENTYTEEN_THOUSAND' }  {
> input.LT(-1).Type = IDENTIFIER; }
> 		| IDENTIFIER;
> 
> And,  that worked.  That is, if I have "identifier" in the grammar somewhere
> it will now accept an IDENTIFIER, as it always has, but also any 'TOKEN1',
> 'TOKEN2', etc. value found in tokens { ... }
> 
> Personally, I hate this.  It means I need *two* places in my grammar to list
> the keywords, the tokens { ... } section AND the identifier rule.  I'm sure
> there's some way to do it via an action, predicate, whatever.  
> 
> I went down this path due to this recommendation: " The author's
> recommendation is to use ordinary rules and the tokens command." at
> http://www.antlr.org/wiki/display/ANTLR3/Quick+Starter+on+Parser+Grammars+-+
> No+Past+Experience+Required. 
> 
> It appears the tokens section is NOT the thing to do, perhaps rather to have
> per-token rules, e.g. keyToken1, keyToken2, etc.  But, I can't rewrite this
> grammar and risk breaking other things.  Perhaps I should in the future.
> Preferably, I simply like a way to scan thru the tokens, if found, note it,
> then change the token type to IDENTIFIER - without listing all the tokens
> twice in the grammar.
> 
> Any suggestions very, very welcome. 
> 
> Regards,
> Trober
> 
> 
> 
> 
> -----Original Message-----
> From: Gerald Rosenberg [mailto:gerald at certiv.net] 
> Sent: Saturday, August 21, 2010 1:35 AM
> To: Avid Trober
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Why does ANTLR generate code that will never
> call an OR'd alternative?
> 
>   Most likely, the parser generation analysis determined that isToken 
> can never be reached.  Check your error log for an alt skipped message.
> 
> 
> 
> ------ Original Message (Saturday, August 21, 2010 1:01:20 
> AM) From: Avid Trober ------
> Subject: [antlr-interest] Why does ANTLR generate code that will never call
> an OR'd alternative?
>> For this rule,
>>
>>
>>
>> identifier
>>
>>                  :       isToken | IDENTIFIER;
>>
>>
>>
>> ANTLR generates code that would never calls the isToken rule
>> (target=CSharp2):
>>
>>
>>
>>      public MYParser.identifier_return identifier()    // throws
>> RecognitionException [1]
>>
>>      {
>>
>> .
>>
>>              // .  : ( isToken | IDENTIFIER )
>>
>>              int alt30 = 2;
>>
>>              int LA30_0 = input.LA(1);
>>
>>
>>
>>              if ( (LA30_0 == IDENTIFIER) )   //<== token must be
> IDENTIFIER
>> to call isToken???
>>
>>              {
>>
>>                  int LA30_1 = input.LA(2);
>>
>>
>>
>>                  if ( ((isToken(input.LT(1)))) )  //<== why must LA30_0 ==
>> IDENTIFIER to call isToken?
>>
>>                  {
>>
>>                      alt30 = 1;
>>
>>                  }
>>
>>                  else if ( (true) )
>>
>>                  {
>>
>>                      alt30 = 2;
>>
>>                  }
>>
>> .
>>
>>              else                         //<== since not IDENTIFIER, why
>> not call isToken here???
>>
>>              {
>>
>>                  NoViableAltException nvae_d30s0 =
>>
>>                      new NoViableAltException("", 30, 0, input);
>>
>>
>>
>>                  throw nvae_d30s0;
>>
>>              }
>>
>>
>>
>> I would think it's something to do with DFA optimization?   Perhaps that's
>> why IDENTIFIER is checked first.
>>
>> But, if IDENTIFIER is false, why not call isToken???    Afterall, the rule
>> is IDENTIFIER  ****OR***** isToken.
>>
>>
>>
>> Thanks,
>>
>> Trober
>>
>>
>>
>>
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
> 
> 


-- 
Kevin J. Cummings
kjchome at rcn.com
cummings at kjchome.homeip.net
cummings at kjc386.framingham.ma.us
Registered Linux User #1232 (http://counter.li.org)

From avidtrober at gmail.com  Sat Aug 21 01:00:39 2010
From: avidtrober at gmail.com (Avid Trober)
Date: Sat, 21 Aug 2010 03:00:39 -0500
Subject: [antlr-interest] Why does ANTLR generate code that will never
	call	an OR'd alternative?
In-Reply-To: <4C6F8338.5030901@kjchome.homeip.net>
References: <00a001cb40f6$48381ac0$d8a85040$@com>
	<4C6F7379.3030707@certiv.net>	<00a501cb4102$5a1affd0$0e50ff70$@com>
	<4C6F8338.5030901@kjchome.homeip.net>
Message-ID: <00a701cb4106$f2ecb740$d8c625c0$@com>

Kevin,

Thanks for taking the time to reply.  

I did have the predicate in the identifier rule, but it appears the wrong
way:

	identifier 
	:        {isToken(input.LT(1))}?  IDENTIFIER  | IDENTIFIER;

The above still produced code that would never call isToken.  The reason I
did it like above, I thought the predicate had to change the token type
(from the tokens section value to IDENTIFIER); therefore, the IDENTIFIER
after the predicate.

Per your email, I tried this:

	identifier 
	:        {isToken(input.LT(1))}?  | IDENTIFIER;


And, ANTLR generated code that would call isToken.  But, isToken could also
be called on the right side of the OR in the 'identifier' rule (see code
below).
But, worse:

1. The identifier rule doesn't work in the above form.  I get unexpected
token exceptions for using a tokens section token as what's meant to be
non-grammar keywords.

2. Check out this first "if" for a simple list of tokens...some checks are
for the value of the token (e.g. TOKEN1, TOKEN10) and others are for values
range checks (e.g. (LA30_0 >= TOKEN2 && LA30_0 <= TOKEN3).  The latter I
could understand, if it weren't for the fact TOKEN2 and TOKEN3 values are 5
and 6!  


            if ( (LA30_0 == TOKEN1 || (LA30_0 >= TOKEN2 && LA30_0 <= TOKEN3)
|| (LA30_0 >= TOKEN4 && LA30_0 <= TOKEN5) || (LA30_0 >= TOKEN6 && LA30_0 <=
TOKEN7) || (LA30_0 >= TOKEN8 && LA30_0 <= TOKEN9) || LA30_0 == TOKEN10 ||
LA30_0 == TOKEN11 || (LA30_0 >= TOKEN12 && LA30_0 <= TOKEN13)) )
            {
                alt30 = 1;
            }
            else if ( (LA30_0 == IDENTIFIER) )
            {
                int LA30_2 = input.LA(2);

                if ( ((isToken(input.LT(1)))) )
                {
                    alt30 = 1;
                }
                else if ( (true) )
                {
                    alt30 = 2;
                }
                else 
                {
                    NoViableAltException nvae_d30s2 =
                        new NoViableAltException("", 30, 2, input);

                    throw nvae_d30s2;
                }
            }
            else 
            {
                NoViableAltException nvae_d30s0 =
                    new NoViableAltException("", 30, 0, input);

                throw nvae_d30s0;
            }
            switch (alt30) 
            {
                case 1 :
                    // ... : {...}?
                    {
                    	root_0 = (object)adaptor.GetNilNode();

                    	if ( !((isToken(input.LT(1)))) ) 
                    	{
                    	    throw new FailedPredicateException(input,
"identifier", "isToken(input.LT(1))");
                    	}

                    }
                    break;
                case 2 :
                    // ... : IDENTIFIER
                    {
                    	root_0 = (object)adaptor.GetNilNode();

 
IDENTIFIER132=(IToken)Match(input,IDENTIFIER,FOLLOW_IDENTIFIER_in_identifier
1562); 
                    		IDENTIFIER132_tree =
(object)adaptor.Create(IDENTIFIER132);
                    		adaptor.AddChild(root_0,
IDENTIFIER132_tree);


                    }
                    break;

            }


The only form of the 'identifier' rule I got to work was this:

	identifier 
	:       
    	  (      'TOKEN1' 
    	  |      'TOKEN2'	
    	  |      'TOKEN3'
		...
    	  |      'TOKEN_ZILLION')   { input.LT(-1).Type = IDENTIFIER; }	
	  | 	  IDENTIFIER;


Now, I can use a tokens keyword in a way the parser won't throw an
exception:

	TOKEN1=TOKEN3

	And, 'TOKEN3' doesn't trip up the parser.
(For the above, the rule is:

	TOKEN1=identifier

Which never worked before if the right-side of the equal sign was a token in
the tokens section).


I don't like my solution, listing the tokens twice in the grammar file.
And, would love to know how a pro would solve it.  Initially,  if I
should/must taken all the tokens out of the tokens section and, perhaps,
make per-token rules for them???   

Regards,
Trober






-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Kevin J. Cummings
Sent: Saturday, August 21, 2010 2:42 AM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Why does ANTLR generate code that will never
call an OR'd alternative?

On 08/21/2010 03:27 AM, Avid Trober wrote:
> Gerald,
> 
> Thank you very much for your reply.
> 
> There's no alt skipped message in the error log.
> 
> The 'isToken' rule was simply my attempt to have the parser check if the
> token was in the tokens { ... } section.  At runtime, I found the token
type
> to always be the value in the token { ... } section, even if I tried to
> change it:
> 
> 	isToken	:	{isToken(input.LT(1))}? IDENTIFIER;
> 
> But, 'isToken' would never get called via the generated code, e.g. 
> 
> 	identifier  :  isToken | IDENTIFIER;   // i.e. treat a token in the
> tokens section as an IDENTIFIER.

You need to move your semantic predicate.  The lookahead sees that
IDENTIFIER is the lookahead for both.  If you want it to go through
isToken, your need to move the semantic predicate to the "identifier" rule.

> Therefore, I modified my 'identifier' rule to have each tokens { ... }
value
> in it, e.g.
> 
> 	identifier:
> 		( 'TOKEN1', 'TOKEN2', ... 'TOKEN_ELEVENTYTEEN_THOUSAND' }  {
> input.LT(-1).Type = IDENTIFIER; }
> 		| IDENTIFIER;
> 
> And,  that worked.  That is, if I have "identifier" in the grammar
somewhere
> it will now accept an IDENTIFIER, as it always has, but also any 'TOKEN1',
> 'TOKEN2', etc. value found in tokens { ... }
> 
> Personally, I hate this.  It means I need *two* places in my grammar to
list
> the keywords, the tokens { ... } section AND the identifier rule.  I'm
sure
> there's some way to do it via an action, predicate, whatever.  
> 
> I went down this path due to this recommendation: " The author's
> recommendation is to use ordinary rules and the tokens command." at
>
http://www.antlr.org/wiki/display/ANTLR3/Quick+Starter+on+Parser+Grammars+-+
> No+Past+Experience+Required. 
> 
> It appears the tokens section is NOT the thing to do, perhaps rather to
have
> per-token rules, e.g. keyToken1, keyToken2, etc.  But, I can't rewrite
this
> grammar and risk breaking other things.  Perhaps I should in the future.
> Preferably, I simply like a way to scan thru the tokens, if found, note
it,
> then change the token type to IDENTIFIER - without listing all the tokens
> twice in the grammar.
> 
> Any suggestions very, very welcome. 
> 
> Regards,
> Trober
> 
> 
> 
> 
> -----Original Message-----
> From: Gerald Rosenberg [mailto:gerald at certiv.net] 
> Sent: Saturday, August 21, 2010 1:35 AM
> To: Avid Trober
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Why does ANTLR generate code that will never
> call an OR'd alternative?
> 
>   Most likely, the parser generation analysis determined that isToken 
> can never be reached.  Check your error log for an alt skipped message.
> 
> 
> 
> ------ Original Message (Saturday, August 21, 2010 1:01:20 
> AM) From: Avid Trober ------
> Subject: [antlr-interest] Why does ANTLR generate code that will never
call
> an OR'd alternative?
>> For this rule,
>>
>>
>>
>> identifier
>>
>>                  :       isToken | IDENTIFIER;
>>
>>
>>
>> ANTLR generates code that would never calls the isToken rule
>> (target=CSharp2):
>>
>>
>>
>>      public MYParser.identifier_return identifier()    // throws
>> RecognitionException [1]
>>
>>      {
>>
>> .
>>
>>              // .  : ( isToken | IDENTIFIER )
>>
>>              int alt30 = 2;
>>
>>              int LA30_0 = input.LA(1);
>>
>>
>>
>>              if ( (LA30_0 == IDENTIFIER) )   //<== token must be
> IDENTIFIER
>> to call isToken???
>>
>>              {
>>
>>                  int LA30_1 = input.LA(2);
>>
>>
>>
>>                  if ( ((isToken(input.LT(1)))) )  //<== why must LA30_0
==
>> IDENTIFIER to call isToken?
>>
>>                  {
>>
>>                      alt30 = 1;
>>
>>                  }
>>
>>                  else if ( (true) )
>>
>>                  {
>>
>>                      alt30 = 2;
>>
>>                  }
>>
>> .
>>
>>              else                         //<== since not IDENTIFIER, why
>> not call isToken here???
>>
>>              {
>>
>>                  NoViableAltException nvae_d30s0 =
>>
>>                      new NoViableAltException("", 30, 0, input);
>>
>>
>>
>>                  throw nvae_d30s0;
>>
>>              }
>>
>>
>>
>> I would think it's something to do with DFA optimization?   Perhaps
that's
>> why IDENTIFIER is checked first.
>>
>> But, if IDENTIFIER is false, why not call isToken???    Afterall, the
rule
>> is IDENTIFIER  ****OR***** isToken.
>>
>>
>>
>> Thanks,
>>
>> Trober
>>
>>
>>
>>
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
> 
> 


-- 
Kevin J. Cummings
kjchome at rcn.com
cummings at kjchome.homeip.net
cummings at kjc386.framingham.ma.us
Registered Linux User #1232 (http://counter.li.org)

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From cummings at kjchome.homeip.net  Sat Aug 21 07:24:24 2010
From: cummings at kjchome.homeip.net (Kevin J. Cummings)
Date: Sat, 21 Aug 2010 10:24:24 -0400
Subject: [antlr-interest] Why does ANTLR generate code that will never
 call	an OR'd alternative?
In-Reply-To: <00a701cb4106$f2ecb740$d8c625c0$@com>
References: <00a001cb40f6$48381ac0$d8a85040$@com>
	<4C6F7379.3030707@certiv.net>	<00a501cb4102$5a1affd0$0e50ff70$@com>
	<4C6F8338.5030901@kjchome.homeip.net>
	<00a701cb4106$f2ecb740$d8c625c0$@com>
Message-ID: <4C6FE198.707@kjchome.homeip.net>

On 08/21/2010 04:00 AM, Avid Trober wrote:
> Kevin,
> 
> Thanks for taking the time to reply.  
> 
> I did have the predicate in the identifier rule, but it appears the wrong
> way:
> 
> 	identifier 
> 	:        {isToken(input.LT(1))}?  IDENTIFIER  | IDENTIFIER;

Why can't you something like do:

identifier: i:IDENTIFIER
	{ if (isToken($i))
	    { // code here for the isToken case
	    }
	  else
	    { // code here (maybe empty) for the other case
            }
	}
	;

> The above still produced code that would never call isToken.  The reason I
> did it like above, I thought the predicate had to change the token type
> (from the tokens section value to IDENTIFIER); therefore, the IDENTIFIER
> after the predicate.
> 
> Per your email, I tried this:
> 
> 	identifier 
> 	:        {isToken(input.LT(1))}?  | IDENTIFIER;

This case won't match anything, so in order for isToken to be called,
the lookahead would have to *not* be an IDENTIFIER.

> And, ANTLR generated code that would call isToken.  But, isToken could also
> be called on the right side of the OR in the 'identifier' rule (see code
> below).
> But, worse:
> 
> 1. The identifier rule doesn't work in the above form.  I get unexpected
> token exceptions for using a tokens section token as what's meant to be
> non-grammar keywords.
> 
> 2. Check out this first "if" for a simple list of tokens...some checks are
> for the value of the token (e.g. TOKEN1, TOKEN10) and others are for values
> range checks (e.g. (LA30_0 >= TOKEN2 && LA30_0 <= TOKEN3).  The latter I
> could understand, if it weren't for the fact TOKEN2 and TOKEN3 values are 5
> and 6!  
> 
> 
>             if ( (LA30_0 == TOKEN1 || (LA30_0 >= TOKEN2 && LA30_0 <= TOKEN3)
> || (LA30_0 >= TOKEN4 && LA30_0 <= TOKEN5) || (LA30_0 >= TOKEN6 && LA30_0 <=
> TOKEN7) || (LA30_0 >= TOKEN8 && LA30_0 <= TOKEN9) || LA30_0 == TOKEN10 ||
> LA30_0 == TOKEN11 || (LA30_0 >= TOKEN12 && LA30_0 <= TOKEN13)) )
>             {
>                 alt30 = 1;
>             }
>             else if ( (LA30_0 == IDENTIFIER) )
>             {
>                 int LA30_2 = input.LA(2);
> 
>                 if ( ((isToken(input.LT(1)))) )
>                 {
>                     alt30 = 1;
>                 }
>                 else if ( (true) )
>                 {
>                     alt30 = 2;
>                 }
>                 else 
>                 {
>                     NoViableAltException nvae_d30s2 =
>                         new NoViableAltException("", 30, 2, input);
> 
>                     throw nvae_d30s2;
>                 }
>             }
>             else 
>             {
>                 NoViableAltException nvae_d30s0 =
>                     new NoViableAltException("", 30, 0, input);
> 
>                 throw nvae_d30s0;
>             }
>             switch (alt30) 
>             {
>                 case 1 :
>                     // ... : {...}?
>                     {
>                     	root_0 = (object)adaptor.GetNilNode();
> 
>                     	if ( !((isToken(input.LT(1)))) ) 
>                     	{
>                     	    throw new FailedPredicateException(input,
> "identifier", "isToken(input.LT(1))");
>                     	}
> 
>                     }
>                     break;
>                 case 2 :
>                     // ... : IDENTIFIER
>                     {
>                     	root_0 = (object)adaptor.GetNilNode();
> 
>  
> IDENTIFIER132=(IToken)Match(input,IDENTIFIER,FOLLOW_IDENTIFIER_in_identifier
> 1562); 
>                     		IDENTIFIER132_tree =
> (object)adaptor.Create(IDENTIFIER132);
>                     		adaptor.AddChild(root_0,
> IDENTIFIER132_tree);
> 
> 
>                     }
>                     break;
> 
>             }
> 
> 
> The only form of the 'identifier' rule I got to work was this:
> 
> 	identifier 
> 	:       
>     	  (      'TOKEN1' 
>     	  |      'TOKEN2'	
>     	  |      'TOKEN3'
> 		...
>     	  |      'TOKEN_ZILLION')   { input.LT(-1).Type = IDENTIFIER; }	
> 	  | 	  IDENTIFIER;
> 
> 
> Now, I can use a tokens keyword in a way the parser won't throw an
> exception:
> 
> 	TOKEN1=TOKEN3
> 
> 	And, 'TOKEN3' doesn't trip up the parser.
> (For the above, the rule is:
> 
> 	TOKEN1=identifier
> 
> Which never worked before if the right-side of the equal sign was a token in
> the tokens section).

In cases like this, I have done:

keyword : 'TOKEN1'
        | 'TOKEN2'
        | 'TOKEN3'
          ...
        | 'LAST_TOKEN'
        ;

identifier : IDENTIFIER
           | k:keyword
             { #k->setType(IDENITIFER); }
           ;

(OK, this is with ANTLR 2.7.7 and the C++ target...)  but it should be
similar with ANTLR 3.

> I don't like my solution, listing the tokens twice in the grammar file.
> And, would love to know how a pro would solve it.  Initially,  if I
> should/must taken all the tokens out of the tokens section and, perhaps,
> make per-token rules for them???   

I wouldn't use a semantic predicate for this, rather, I'd just clobber
the token type when I knew it was an identifier and not a keyword.

This question comes up rather often on this list.

> Regards,
> Trober

-- 
Kevin J. Cummings
kjchome at rcn.com
cummings at kjchome.homeip.net
cummings at kjc386.framingham.ma.us
Registered Linux User #1232 (http://counter.li.org)

From avidtrober at gmail.com  Sat Aug 21 11:30:06 2010
From: avidtrober at gmail.com (Avid Trober)
Date: Sat, 21 Aug 2010 13:30:06 -0500
Subject: [antlr-interest] Why does ANTLR generate code that will never
	call	an OR'd alternative?
In-Reply-To: <4C6FE198.707@kjchome.homeip.net>
References: <00a001cb40f6$48381ac0$d8a85040$@com>
	<4C6F7379.3030707@certiv.net>	<00a501cb4102$5a1affd0$0e50ff70$@com>
	<4C6F8338.5030901@kjchome.homeip.net>
	<00a701cb4106$f2ecb740$d8c625c0$@com>
	<4C6FE198.707@kjchome.homeip.net>
Message-ID: <001e01cb415e$e1a72530$a4f56f90$@com>

> Why can't you something like do:
>
> identifier: i:IDENTIFIER
>	{ if (isToken($i))
>	    { // code here for the isToken case
>	    }
>	  else
>	    { // code here (maybe empty) for the other case
>             }
>	}
>	;
I tried numerous things, but not sure how the above would work.  Wouldn't
the true case simply be IDENTIFER and the false case, too?
Again, all I'm doing is catching predefined tokens and overriding their
precedence as reserved keywords, to treat them as identifiers.


> in order for isToken to be called, the lookahead would have to *not* be an
IDENTIFIER.
My rules were (in a few of my trial & error attempts):

identifier: isToken(...) | IDENTIFIER;

isToken:   {...}? IDENTIFIER;


The lookahead can see if isToken is true, it'll be an IDENTIFIER.  But, how
does it know what's possibly in isToken?  It's an @members function, written
in the target language, and could be just about anything.  Therefore, I
would have expected at least some form of the 'identifier' rule to call
isToken without first forcing IDENTIFIER=true.  Every form I tried autogen'd
code that required IDENTIFER to be true - BEFORE - it would call isToken.
That doesn't make sense to me.

Only when I explicitly listed all the tokens specifiers in the identifier
rule did I get autogen'd code that would call isToken (after that
questionable "if" statement, per below).   What?  Then why not have a
*function* test for those one-in-the-same values so the grammar file is
cleaner, not having to list all the tokens *twice* in the grammar file.  I'm
sure there's a good answer, literal tests vs. a function call.  But,  again,
ANTLR has no idea what code is n that function, so how could it have always
avoided gen'ing a call to it w/o first requiring IDENTIFER to be true?


> In cases like this, I have done:
Thank you...very much.  I will try that.

> This question comes up rather often on this list.
It's easy to find explicit discussion on token specifiers having precedence,
and how to override them for v2.  But, I didn't find anything for v3, other
than one could see it's going to be predicate/action-related to resolve. 

One of  my challenges to finding online help was discussion explicitly
addressing token specifiers precedence.  And, I wasn't sure what to search
on (e.g. your solution is not, explicitly, addressing token specifiers.
Therefore, for an ANTLR shade-tree mechanic like me, I was left with trial &
error debugging the autogen'd code and synthesizing predicate/action/other
stuff into a solution vs. what, I think, should be a quick HOW TO for v3.
Frustrating, because I knew it was 10lbs. of effort for a 2oz. solution. :-)

Your reply is VERY much appreciated.

Regards,
Trober




From cummings at kjchome.homeip.net  Sat Aug 21 11:46:21 2010
From: cummings at kjchome.homeip.net (Kevin J. Cummings)
Date: Sat, 21 Aug 2010 14:46:21 -0400
Subject: [antlr-interest] Why does ANTLR generate code that will never
 call	an OR'd alternative?
In-Reply-To: <001e01cb415e$e1a72530$a4f56f90$@com>
References: <00a001cb40f6$48381ac0$d8a85040$@com>
	<4C6F7379.3030707@certiv.net>	<00a501cb4102$5a1affd0$0e50ff70$@com>
	<4C6F8338.5030901@kjchome.homeip.net>
	<00a701cb4106$f2ecb740$d8c625c0$@com>
	<4C6FE198.707@kjchome.homeip.net>
	<001e01cb415e$e1a72530$a4f56f90$@com>
Message-ID: <4C701EFD.9090800@kjchome.homeip.net>

On 08/21/2010 02:30 PM, Avid Trober wrote:
>> Why can't you something like do:
>>
>> identifier: i:IDENTIFIER
>> 	{ if (isToken($i))
>> 	    { // code here for the isToken case
>> 	    }
>> 	  else
>> 	    { // code here (maybe empty) for the other case
>>             }
>> 	}
>> 	;
> I tried numerous things, but not sure how the above would work.  Wouldn't
> the true case simply be IDENTIFER and the false case, too?

You need to understand that a semantic predicate is nothing more than if
IF statement.  Who cares if you do the semantic test before choosing
which sub-rule, or inside the single sub-rule, especially, when both
paths match the *same* input.  In this case, an IDENTIFIER.  But that
doesn't answer question of how do you include your literal tokens in
your identifiers.  I beleive that is where your misunderstanding starts.

> Again, all I'm doing is catching predefined tokens and overriding their
> precedence as reserved keywords, to treat them as identifiers.

Then the method I proposed below is what you want.

>> in order for isToken to be called, the lookahead would have to *not* be an
> IDENTIFIER.
> My rules were (in a few of my trial & error attempts):
> 
> identifier: isToken(...) | IDENTIFIER;
> 
> isToken:   {...}? IDENTIFIER;
> 
> 
> The lookahead can see if isToken is true, it'll be an IDENTIFIER.  But, how
> does it know what's possibly in isToken?  It's an @members function, written
> in the target language, and could be just about anything.  Therefore, I
> would have expected at least some form of the 'identifier' rule to call
> isToken without first forcing IDENTIFIER=true.  Every form I tried autogen'd
> code that required IDENTIFER to be true - BEFORE - it would call isToken.
> That doesn't make sense to me.
> 
> Only when I explicitly listed all the tokens specifiers in the identifier
> rule did I get autogen'd code that would call isToken (after that
> questionable "if" statement, per below).   What?  Then why not have a
> *function* test for those one-in-the-same values so the grammar file is
> cleaner, not having to list all the tokens *twice* in the grammar file.  I'm
> sure there's a good answer, literal tests vs. a function call.  But,  again,
> ANTLR has no idea what code is n that function, so how could it have always
> avoided gen'ing a call to it w/o first requiring IDENTIFER to be true?
> 
> 
>> In cases like this, I have done:
> Thank you...very much.  I will try that.
> 
>> This question comes up rather often on this list.
> It's easy to find explicit discussion on token specifiers having precedence,
> and how to override them for v2.  But, I didn't find anything for v3, other
> than one could see it's going to be predicate/action-related to resolve. 

Yes, you'll need to find the correct method to change the token's type
in your parser rule.

> One of  my challenges to finding online help was discussion explicitly
> addressing token specifiers precedence.  And, I wasn't sure what to search
> on (e.g. your solution is not, explicitly, addressing token specifiers.
> Therefore, for an ANTLR shade-tree mechanic like me, I was left with trial &
> error debugging the autogen'd code and synthesizing predicate/action/other
> stuff into a solution vs. what, I think, should be a quick HOW TO for v3.
> Frustrating, because I knew it was 10lbs. of effort for a 2oz. solution. :-)
> 
> Your reply is VERY much appreciated.

Good luck, and let us know how it turns out for you.

> Regards,
> Trober

-- 
Kevin J. Cummings
kjchome at rcn.com
cummings at kjchome.homeip.net
cummings at kjc386.framingham.ma.us
Registered Linux User #1232 (http://counter.li.org)

From jrk1987 at yahoo.co.in  Sat Aug 21 18:01:38 2010
From: jrk1987 at yahoo.co.in (J.R Karthikeyan)
Date: Sun, 22 Aug 2010 06:31:38 +0530 (IST)
Subject: [antlr-interest] how to generate C++ file
Message-ID: <211586.40154.qm@web94604.mail.in2.yahoo.com>

Hi,

  I have generated C file using antlr and I tried to run those file using Visual 
studio 2005. I wrote a wrapper that will call the parser. I have attached the 
wrapper as well as lexer and parser file. I got an Error    1    fatal error 
C1010: unexpected end of file while looking for precompiled header. Did you 
forget to add '#include "stdafx.h"' to your source?    c:\documents and 
settings\kjambura\my documents\visual studio 
2005\projects\wrapper\wrapper\checkforcompileparser.c    468    I have tried 
various method. But I can't able to fix it. Can you please help me on this.

Thanks,
Jrk






________________________________
From: J.R Karthikeyan <jrk1987 at yahoo.co.in>
To: antlr-interest at antlr.org
Sent: Thu, 19 August, 2010 12:15:03 PM
Subject: Re: how to generate C++ file


Hi,

   I have tried generating c file using Antlrworks and it generate the c file. 
Why I am asking C++ is, I need to do some custom code
in parser which require some information and hence I need to access the data 
structure which is written in C++ (basically class). 


say for eg.
     
s  	? CHAR '=' e
e  	? t y 
y 	? '+' t y 
	? 
t 	? p x
x 	? '*' t 
	? 
p	? '('e')' 
	? NUMBER 

where CHAR and NUMBER are tokens.
 
fragment
LETTER 	:	 ('a'..'z' | 'A'..'Z')
	;

CHAR	:	LETTER (LETTER | DIGIT | '_')+
	;

fragment
DIGIT	    : '0'..'9'
            ;

NUMBER	    : (DIGIT)+ '.' (DIGIT)+ | (DIGIT)+ 
            ;

Let say the input is i=5

Now  in 
s  	? CHAR '=' e, When this get executed for i depending upon the Right hand 
side I need to declare the 'i' as int. I will get
what type of datatype by calling some member funtion of some class. Is it 
possible to do like this ANTLR.

Thanks,
Jrk

______________________________________________________________________________________________________________________________________

Yes - I am aware of that. ANTLRWorks is just calling the ANTLR tool  Jim  > 
-----Original Message----- > From: antlr-interest-bounces at antlr.org 
[mailto:antlr-interest- > bounces at antlr.org] On Behalf Of Alan Condit > Sent: 
Wednesday, August 18, 2010 12:54 PM > To: antlr-interest at antlr.org > Subject: 
Re: [antlr-interest] how to generate C++ file >  > Jim, >  > Actually, 
ANTLRWorks will generate the C code, it just won't let you see the > resultant 
code in ANTLRWorks. > As long as the grammar file designates the output language 
and it has the > appropriate stg files it will generate the language. I am 
currently working on > the stg templates for ObjC and I am generating the output 
files through > ANTLRWorks. >  > Alan > --- >  > Alan Condit > 1085 Tierra Ct. > 
Woodburn, OR 97071 >  > Email -- acondit at ipns.com > Home-Office (503) 
982-0906 >  > On Aug 18, 2010, at 12:00 PM, antlr-interest-request at antlr.org 
wrote: >  > > From: "Jim Idle" <jimi at temporal-wave.com> > > Date: August 17, 
2010 4:09:01 PM PDT > > To: <antlr-interest at antlr.org> > > Subject: Re: 
[antlr-interest] how to generate C++ file > > > > > > ANTLRWorks does not 
generate C code (and there is no C++ generator, it > > is C that you can compile 
as C++ if you like.) ANTLRWorks only works > > with Java for code generating 
purposes. Use the command line tool and > > Makefiles etc for C. > > > > You 
need to start with the downloadable examples and then read the > > getting 
started stuff on the wiki. > > > > Also don't forget http://antlr.markmail.org > 
> > > Jim > > > >> -----Original Message----- > >> From: antlr-interest-bounces 
at antlr.org [mailto:antlr-interest- > >> bounces at antlr.org] On Behalf Of J.R 
Karthikeyan > >> Sent: Tuesday, August 17, 2010 4:05 PM > >> To: antlr-interest 
at antlr.org > >> Subject: [antlr-interest] how to generate C++ file > >> > >> 
Hi, > >> > >>  I am using ANTLRWorks 1.4 for my project. I would like to 
generate > >> the > > C++ > >> file from this grammar. I don't find how to do 
this. Can you give me > > direction > >> in how to generate those files. > >> > 
>> Thanks, > >> Jrk 


From jrk1987 at yahoo.co.in  Sat Aug 21 18:03:38 2010
From: jrk1987 at yahoo.co.in (J.R Karthikeyan)
Date: Sat, 21 Aug 2010 18:03:38 -0700 (PDT)
Subject: [antlr-interest] how to generate C++ file
Message-ID: <887613.69071.qm@web94605.mail.in2.yahoo.com>



Hi,

  I have generated C file using antlr and I tried to run those file using Visual 
studio 2005. I wrote a wrapper that will call the parser. I have attached the 
wrapper as well as lexer and parser file. I got an Error    1    fatal error 
C1010: unexpected end of file while looking for precompiled header. Did you 
forget to add '#include "stdafx.h"' to your source?    c:\documents and 
settings\kjambura\my documents\visual studio 
2005\projects\wrapper\wrapper\checkforcompileparser.c    468    I have tried 
various method. But I can't able to fix it. Can you please help me on this.

Thanks,
Jrk






________________________________
From: J.R Karthikeyan <jrk1987 at yahoo.co.in>
To: antlr-interest at antlr.org
Sent: Thu, 19 August, 2010 12:15:03 PM
Subject: Re: how to generate C++ file


Hi,

   I have tried generating c file using Antlrworks and it generate the c file. 
Why I am asking C++ is, I need to do some custom code
in parser which require some information and hence I need to access the data 
structure which is written in C++ (basically class). 


say for  eg.
     
s  	? CHAR '=' e
e  	? t y 
y 	? '+' t y 
	? 
t 	? p x
x 	? '*' t 
	? 
p	? '('e')' 
	? NUMBER 

where CHAR and NUMBER are tokens.
 
fragment
LETTER 	:	 ('a'..'z' | 'A'..'Z')
	;

CHAR	:	LETTER (LETTER | DIGIT | '_')+
	;

fragment
DIGIT	    : '0'..'9'
            ;

NUMBER	    : (DIGIT)+ '.' (DIGIT)+ | (DIGIT)+ 
            ;

Let say the input is i=5

Now  in 
s  	? CHAR '=' e, When this get executed for i depending upon the Right hand 
side I need to declare the 'i' as int. I will get
what type of datatype by calling some member funtion of some class. Is it 
possible to do like this ANTLR.

Thanks,
Jrk

______________________________________________________________________________________________________________________________________

Yes - I am aware of that. ANTLRWorks is just calling the ANTLR tool  Jim  > 
-----Original Message----- > From: antlr-interest-bounces at antlr.org 
[mailto:antlr-interest- > bounces at antlr.org] On Behalf Of Alan Condit > Sent: 
Wednesday, August 18, 2010 12:54 PM > To: antlr-interest at antlr.org > Subject: 
Re: [antlr-interest] how to generate C++ file >  > Jim, >  > Actually, 
ANTLRWorks will generate the C code, it just won't let you see the > resultant 
code in ANTLRWorks. > As long as the grammar file designates the output language 
and it has the > appropriate stg files it will generate the language. I am 
currently working on > the stg templates for ObjC and I am generating the output 
files through > ANTLRWorks. >  > Alan > --- >  > Alan Condit > 1085 Tierra Ct. > 
Woodburn, OR 97071 >  > Email -- acondit at ipns.com > Home-Office (503) 
982-0906 >  > On Aug 18, 2010, at 12:00 PM, antlr-interest-request at antlr.org 
wrote: >  > > From: "Jim Idle" <jimi at temporal-wave.com> > > Date: August 17, 
2010 4:09:01 PM PDT > > To: <antlr-interest at antlr.org> > > Subject: Re: 
[antlr-interest] how to generate C++ file > > > > > > ANTLRWorks does not 
generate C code (and there is no C++ generator, it > > is C that you can compile 
as C++ if you like.) ANTLRWorks only works > > with Java for code generating 
purposes. Use the command line tool and > > Makefiles etc for C. > > > > You 
need to start with the downloadable examples and then read the > > getting 
started stuff on the wiki. > > > > Also don't forget http://antlr.markmail.org > 
> > > Jim > > > >> -----Original Message----- > >> From: antlr-interest-bounces 
at antlr.org [mailto:antlr-interest- > >> bounces at antlr.org] On Behalf Of J.R 
Karthikeyan > >> Sent: Tuesday, August 17, 2010 4:05 PM > >> To: antlr-interest 
at antlr.org > >> Subject: [antlr-interest] how to generate C++ file > >> > >> 
Hi, > >> > >>  I am using ANTLRWorks 1.4 for my project. I would like to 
generate > >> the > > C++ > >> file from this grammar. I don't find how to do 
this. Can you give me > > direction > >> in how to generate those files. > >> > 
>> Thanks, > >> Jrk 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: wrapper.cpp
Type: application/octet-stream
Size: 346 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20100821/14376f3f/attachment.obj 
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: checkforcompileLexer.c
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20100821/14376f3f/attachment.c 
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: checkforcompileLexer.h
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20100821/14376f3f/attachment.h 
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: checkforcompileParser.c
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20100821/14376f3f/attachment-0001.c 
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: checkforcompileParser.h
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20100821/14376f3f/attachment-0001.h 

From jimi at temporal-wave.com  Sat Aug 21 18:04:42 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 21 Aug 2010 18:04:42 -0700
Subject: [antlr-interest] how to generate C++ file
In-Reply-To: <211586.40154.qm@web94604.mail.in2.yahoo.com>
References: <211586.40154.qm@web94604.mail.in2.yahoo.com>
Message-ID: <001201cb4196$01182310$03486930$@temporal-wave.com>

Please start with the pre-worked examples in the downloadable file on the downloads page. Visual studio 2005 is no longer directly supported, just download the free version of something a bit more recent and open the .sln file provided.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of J.R Karthikeyan
> Sent: Saturday, August 21, 2010 6:02 PM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] how to generate C++ file
> 
> Hi,
> 
>   I have generated C file using antlr and I tried to run those file using Visual
> studio 2005. I wrote a wrapper that will call the parser. I have attached the
> wrapper as well as lexer and parser file. I got an Error    1    fatal error
> C1010: unexpected end of file while looking for precompiled header. Did you
> forget to add '#include "stdafx.h"' to your source?    c:\documents and
> settings\kjambura\my documents\visual studio
> 2005\projects\wrapper\wrapper\checkforcompileparser.c    468    I have tried
> various method. But I can't able to fix it. Can you please help me on this.
> 
> Thanks,
> Jrk
> 
> 
> 
> 
> 
> 
> ________________________________
> From: J.R Karthikeyan <jrk1987 at yahoo.co.in>
> To: antlr-interest at antlr.org
> Sent: Thu, 19 August, 2010 12:15:03 PM
> Subject: Re: how to generate C++ file
> 
> 
> Hi,
> 
>    I have tried generating c file using Antlrworks and it generate the c file.
> Why I am asking C++ is, I need to do some custom code in parser which
> require some information and hence I need to access the data structure
> which is written in C++ (basically class).
> 
> 
> say for eg.
> 
> s  	? CHAR '=' e
> e  	? t y
> y 	? '+' t y
> 	?
> t 	? p x
> x 	? '*' t
> 	?
> p	? '('e')'
> 	? NUMBER
> 
> where CHAR and NUMBER are tokens.
> 
> fragment
> LETTER 	:	 ('a'..'z' | 'A'..'Z')
> 	;
> 
> CHAR	:	LETTER (LETTER | DIGIT | '_')+
> 	;
> 
> fragment
> DIGIT	    : '0'..'9'
>             ;
> 
> NUMBER	    : (DIGIT)+ '.' (DIGIT)+ | (DIGIT)+
>             ;
> 
> Let say the input is i=5
> 
> Now  in
> s  	? CHAR '=' e, When this get executed for i depending upon the Right
> hand
> side I need to declare the 'i' as int. I will get
> what type of datatype by calling some member funtion of some class. Is it
> possible to do like this ANTLR.
> 
> Thanks,
> Jrk
> 
> __________________________________________________________
> __________________________________________________________
> __________________
> 
> Yes - I am aware of that. ANTLRWorks is just calling the ANTLR tool  Jim  >
> -----Original Message----- > From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest- > bounces at antlr.org] On Behalf Of Alan Condit >
> Sent:
> Wednesday, August 18, 2010 12:54 PM > To: antlr-interest at antlr.org >
> Subject:
> Re: [antlr-interest] how to generate C++ file >  > Jim, >  > Actually,
> ANTLRWorks will generate the C code, it just won't let you see the >
> resultant
> code in ANTLRWorks. > As long as the grammar file designates the output
> language
> and it has the > appropriate stg files it will generate the language. I am
> currently working on > the stg templates for ObjC and I am generating the
> output
> files through > ANTLRWorks. >  > Alan > --- >  > Alan Condit > 1085 Tierra Ct. >
> Woodburn, OR 97071 >  > Email -- acondit at ipns.com > Home-Office (503)
> 982-0906 >  > On Aug 18, 2010, at 12:00 PM, antlr-interest-request at antlr.org
> wrote: >  > > From: "Jim Idle" <jimi at temporal-wave.com> > > Date: August
> 17,
> 2010 4:09:01 PM PDT > > To: <antlr-interest at antlr.org> > > Subject: Re:
> [antlr-interest] how to generate C++ file > > > > > > ANTLRWorks does not
> generate C code (and there is no C++ generator, it > > is C that you can
> compile
> as C++ if you like.) ANTLRWorks only works > > with Java for code generating
> purposes. Use the command line tool and > > Makefiles etc for C. > > > > You
> need to start with the downloadable examples and then read the > > getting
> started stuff on the wiki. > > > > Also don't forget http://antlr.markmail.org >
> > > > Jim > > > >> -----Original Message----- > >> From: antlr-interest-
> bounces
> at antlr.org [mailto:antlr-interest- > >> bounces at antlr.org] On Behalf Of J.R
> Karthikeyan > >> Sent: Tuesday, August 17, 2010 4:05 PM > >> To: antlr-
> interest
> at antlr.org > >> Subject: [antlr-interest] how to generate C++ file > >> > >>
> Hi, > >> > >>  I am using ANTLRWorks 1.4 for my project. I would like to
> generate > >> the > > C++ > >> file from this grammar. I don't find how to do
> this. Can you give me > > direction > >> in how to generate those files. > >> >
> >> Thanks, > >> Jrk
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From jrk1987 at yahoo.co.in  Sat Aug 21 20:32:34 2010
From: jrk1987 at yahoo.co.in (J.R Karthikeyan)
Date: Sun, 22 Aug 2010 09:02:34 +0530 (IST)
Subject: [antlr-interest] how to generate C++ file
Message-ID: <187507.31389.qm@web94601.mail.in2.yahoo.com>

Hi,

  Just want to make sure that , this means that I can't use antlr with visul 
studio 2005. Because my entire project is in visual studio 2005 and this parser 
is going to be one of the module for that project. So can you please let me know 
if I can use this with visual studio 2005.

Thanks,
Jrk



________________________________
From: J.R Karthikeyan <jrk1987 at yahoo.co.in>
To: antlr-interest at antlr.org
Sent: Sat, 21 August, 2010 6:03:38 PM
Subject: how to generate C++ file




Hi,

  I have generated C file using antlr and I tried to run those file using Visual 
studio 2005. I wrote a wrapper that will call the parser. I have attached the 
wrapper as well as lexer and parser file. I got an Error    1    fatal error 
C1010: unexpected end of file while looking for precompiled header. Did you 
forget to add '#include "stdafx.h"' to your source?    c:\documents and 
settings\kjambura\my documents\visual studio  
2005\projects\wrapper\wrapper\checkforcompileparser.c    468    I have tried 
various method. But I can't able to fix it. Can you please help me on this.

Thanks,
Jrk






________________________________
From: J.R Karthikeyan <jrk1987 at yahoo.co.in>
To: antlr-interest at antlr.org
Sent: Thu, 19 August, 2010 12:15:03 PM
Subject: Re: how to generate C++ file


Hi,

   I have tried  generating c file using Antlrworks and it generate the c file. 
Why I am asking C++ is, I need to do some custom code
in parser which require some information and hence I need to access the data 
structure which is written in C++ (basically class). 


say for  eg.
     
s  	? CHAR '=' e
e  	? t y 
y 	? '+' t y 
	? 
t 	? p x
x 	? '*' t 
	? 
p	? '('e')' 
	? NUMBER 

where CHAR and NUMBER are tokens.
 
fragment
LETTER 	:	 ('a'..'z' | 'A'..'Z')
	;

CHAR	:	LETTER (LETTER | DIGIT | '_')+
	;

fragment
DIGIT	    : '0'..'9'
            ;

NUMBER	    : (DIGIT)+ '.' (DIGIT)+ | (DIGIT)+ 
            ;

Let say the input is i=5

Now  in 
s  	? CHAR '=' e, When this get executed for i depending upon the Right hand 
side I need to declare the 'i' as int. I will get
what type of datatype by calling some member funtion of some class. Is it 
possible to do like this ANTLR.

Thanks,
Jrk

______________________________________________________________________________________________________________________________________

Yes - I am aware of that. ANTLRWorks is just calling the ANTLR tool  Jim  > 
-----Original Message----- > From: antlr-interest-bounces at antlr.org 
[mailto:antlr-interest- > bounces at antlr.org] On Behalf Of Alan Condit > Sent: 
Wednesday, August 18, 2010 12:54 PM > To: antlr-interest at antlr.org > Subject: 
Re: [antlr-interest] how to generate C++ file >  > Jim, >  > Actually, 
ANTLRWorks will generate the C code, it just won't let you see the > resultant 
code in ANTLRWorks. > As long as the grammar file designates the output language 
and it has the > appropriate stg files it will generate the language. I am 
currently working on > the stg templates for ObjC and I am generating the output 
files through > ANTLRWorks. >  > Alan > --- >  > Alan Condit > 1085 Tierra Ct. > 
Woodburn, OR 97071 >  > Email -- acondit at ipns.com > Home-Office (503) 
982-0906 >  > On Aug 18, 2010, at 12:00 PM, antlr-interest-request at antlr.org 
wrote: >  > > From: "Jim Idle" <jimi at temporal-wave.com> > > Date: August 17, 
2010 4:09:01 PM PDT > > To: <antlr-interest at antlr.org> > > Subject: Re: 
[antlr-interest] how to generate C++ file > > > > > > ANTLRWorks does not 
generate C code (and there is no C++ generator, it > > is C that you can compile 
as C++ if you like.) ANTLRWorks only works > > with Java for code generating 
purposes. Use the command line tool and > > Makefiles etc for C. > > > > You 
need to start with the downloadable examples and then read the > > getting 
started stuff on the wiki. > > > > Also don't forget http://antlr.markmail.org > 
> > > Jim > > > >> -----Original Message----- > >> From: antlr-interest-bounces 
at antlr.org [mailto:antlr-interest- > >> bounces at antlr.org] On Behalf Of J.R 
Karthikeyan > >> Sent: Tuesday, August 17, 2010 4:05 PM > >> To: antlr-interest 
at antlr.org > >> Subject: [antlr-interest] how to generate C++ file > >> > >> 
Hi, > >> > >>  I am using ANTLRWorks 1.4 for my project. I would like to 
generate > >> the > > C++ > >> file from this grammar. I don't find how to do 
this. Can you give me > > direction > >> in how to generate those files. > >> > 
>> Thanks, > >> Jrk 


From stuart.dootson at gmail.com  Sun Aug 22 04:26:50 2010
From: stuart.dootson at gmail.com (Stuart Dootson)
Date: Sun, 22 Aug 2010 12:26:50 +0100
Subject: [antlr-interest] how to generate C++ file
In-Reply-To: <187507.31389.qm@web94601.mail.in2.yahoo.com>
References: <187507.31389.qm@web94601.mail.in2.yahoo.com>
Message-ID: <AANLkTinybMXW2416ndYXXUfXNZ1=TUdh2qvdnnX6DBcr@mail.gmail.com>

On Sun, Aug 22, 2010 at 4:32 AM, J.R Karthikeyan <jrk1987 at yahoo.co.in>wrote:

> Hi,
>
>  Just want to make sure that , this means that I can't use antlr with visul
> studio 2005. Because my entire project is in visual studio 2005 and this
> parser
> is going to be one of the module for that project. So can you please let me
> know
> if I can use this with visual studio 2005.
>
> Thanks,
> Jrk
>
>
>
jrk - you can use Antlr with Visual Studio - I know, I've done so in the
past. Your compiler errors are coming because the default options applied to
a VS C++ project include pre-compiled header support.

The easiest way around this is to tell VS that your Antlr generated files
don't use the pre-compiled headers. To do that, select the Antlr source
files in the Solution Explorer, then right-click and select Properties.
After that, select the C++->Precompiled Headers property page and then in
the 'Create/Use Precompiled Header" property, select the option that says
something like "Not using precompiled headers".

Stuart

From azamir at azamir.de  Sun Aug 22 06:22:14 2010
From: azamir at azamir.de (Frederic Beister)
Date: Sun, 22 Aug 2010 15:22:14 +0200
Subject: [antlr-interest] Lexer Rule matching member variable (Java)
In-Reply-To: <030101cb4082$e8ac4040$ba04c0c0$@temporal-wave.com>
References: <4C68DD47.6020603@azamir.de>	<011c01cb3d68$c1764d80$4462e880$@temporal-wave.com>	<4C6E2FCF.9080209@azamir.de>
	<030101cb4082$e8ac4040$ba04c0c0$@temporal-wave.com>
Message-ID: <4C712486.4040703@azamir.de>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi,

just for the archives: This worked with small one small modification
regarding the EOF-Token:

TEXT:
  {lxstate == State.NORMAL && input.LA(1) != curspecial}?=>.
{
 while (input.LA(1) != curspecial && input.LA(1) != CharStream.EOF) {
  input.consume();
 }
}
;

Thanks again
Frederic




Am 20.08.2010 18:15, schrieb Jim Idle:
> You just need to not use ANY. Once the predicate matches, your rule is
> selected and it will do whatever you tell it. So, don't use ANY+ just put
> some code in to consume until you get to some point that you don't want to
> consume any more:
> 
> TEXT: { lxstate==State.NORMAL && input.LA(1)!=curspecial} ?=> .
> {
>   while (input.LA(1) != curspecial) { input.consume(); }
> }
> ;
> 
> It is often instructive to look at the generated code and steal from it to
> get where you need to.
> 
> Jim 
> 
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Frederic Beister
>> Sent: Friday, August 20, 2010 12:34 AM
>> To: antlr-interest at antlr.org
>> Subject: Re: [antlr-interest] Lexer Rule matching member variable (Java)
>>
>>
List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
email-address

> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


- -- 
PGP Fingerprint = 782C 2BE7 0972 D632 8BDF 4A23 3811 174A 1530 64ED
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.10 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAkxxJIIACgkQOBEXShUwZO10xQCfZtRkA0b9yyfQJze4IsogkdaK
5xMAnjnIEqtmMPhGsNRKUSvyXotxf0rz
=bq0d
-----END PGP SIGNATURE-----

From jimi at temporal-wave.com  Sun Aug 22 09:27:34 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun, 22 Aug 2010 09:27:34 -0700
Subject: [antlr-interest] how to generate C++ file
In-Reply-To: <187507.31389.qm@web94601.mail.in2.yahoo.com>
References: <187507.31389.qm@web94601.mail.in2.yahoo.com>
Message-ID: <002301cb4216$ed65da20$c8318e60$@temporal-wave.com>

You can do it, but you will have to create the project etc yourself. It is nearly 20011 and Visual Studio 2008 is available in a free version (and probably 2010 now or shortly), so you should really use that. The issue is that the vs2005 compiler does not support a few ANSI constructs used int eh runtime. This means that you must compile the runtime in 2008 and just link with it in your 2005 project. But unless you configure the include paths for you project and so on, then it will not compile anyway. That's why I am telling you to download vs2008 and the example projects, then use the example projects to show you how to configure your own project.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of J.R Karthikeyan
> Sent: Saturday, August 21, 2010 8:33 PM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] how to generate C++ file
> 
> Hi,
> 
>   Just want to make sure that , this means that I can't use antlr with visul
> studio 2005. Because my entire project is in visual studio 2005 and this parser
> is going to be one of the module for that project. So can you please let me
> know if I can use this with visual studio 2005.
> 
> Thanks,
> Jrk
> 
> 
> 
> ________________________________
> From: J.R Karthikeyan <jrk1987 at yahoo.co.in>
> To: antlr-interest at antlr.org
> Sent: Sat, 21 August, 2010 6:03:38 PM
> Subject: how to generate C++ file
> 
> 
> 
> 
> Hi,
> 
>   I have generated C file using antlr and I tried to run those file using Visual
> studio 2005. I wrote a wrapper that will call the parser. I have attached the
> wrapper as well as lexer and parser file. I got an Error    1    fatal error
> C1010: unexpected end of file while looking for precompiled header. Did you
> forget to add '#include "stdafx.h"' to your source?    c:\documents and
> settings\kjambura\my documents\visual studio
> 2005\projects\wrapper\wrapper\checkforcompileparser.c    468    I have tried
> various method. But I can't able to fix it. Can you please help me on this.
> 
> Thanks,
> Jrk
> 
> 
> 
> 
> 
> 
> ________________________________
> From: J.R Karthikeyan <jrk1987 at yahoo.co.in>
> To: antlr-interest at antlr.org
> Sent: Thu, 19 August, 2010 12:15:03 PM
> Subject: Re: how to generate C++ file
> 
> 
> Hi,
> 
>    I have tried  generating c file using Antlrworks and it generate the c file.
> Why I am asking C++ is, I need to do some custom code in parser which
> require some information and hence I need to access the data structure
> which is written in C++ (basically class).
> 
> 
> say for  eg.
> 
> s  	? CHAR '=' e
> e  	? t y
> y 	? '+' t y
> 	?
> t 	? p x
> x 	? '*' t
> 	?
> p	? '('e')'
> 	? NUMBER
> 
> where CHAR and NUMBER are tokens.
> 
> fragment
> LETTER 	:	 ('a'..'z' | 'A'..'Z')
> 	;
> 
> CHAR	:	LETTER (LETTER | DIGIT | '_')+
> 	;
> 
> fragment
> DIGIT	    : '0'..'9'
>             ;
> 
> NUMBER	    : (DIGIT)+ '.' (DIGIT)+ | (DIGIT)+
>             ;
> 
> Let say the input is i=5
> 
> Now  in
> s  	? CHAR '=' e, When this get executed for i depending upon the Right
> hand
> side I need to declare the 'i' as int. I will get
> what type of datatype by calling some member funtion of some class. Is it
> possible to do like this ANTLR.
> 
> Thanks,
> Jrk
> 
> __________________________________________________________
> __________________________________________________________
> __________________
> 
> Yes - I am aware of that. ANTLRWorks is just calling the ANTLR tool  Jim  >
> -----Original Message----- > From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest- > bounces at antlr.org] On Behalf Of Alan Condit >
> Sent:
> Wednesday, August 18, 2010 12:54 PM > To: antlr-interest at antlr.org >
> Subject:
> Re: [antlr-interest] how to generate C++ file >  > Jim, >  > Actually,
> ANTLRWorks will generate the C code, it just won't let you see the >
> resultant
> code in ANTLRWorks. > As long as the grammar file designates the output
> language
> and it has the > appropriate stg files it will generate the language. I am
> currently working on > the stg templates for ObjC and I am generating the
> output
> files through > ANTLRWorks. >  > Alan > --- >  > Alan Condit > 1085 Tierra Ct. >
> Woodburn, OR 97071 >  > Email -- acondit at ipns.com > Home-Office (503)
> 982-0906 >  > On Aug 18, 2010, at 12:00 PM, antlr-interest-request at antlr.org
> wrote: >  > > From: "Jim Idle" <jimi at temporal-wave.com> > > Date: August
> 17,
> 2010 4:09:01 PM PDT > > To: <antlr-interest at antlr.org> > > Subject: Re:
> [antlr-interest] how to generate C++ file > > > > > > ANTLRWorks does not
> generate C code (and there is no C++ generator, it > > is C that you can
> compile
> as C++ if you like.) ANTLRWorks only works > > with Java for code generating
> purposes. Use the command line tool and > > Makefiles etc for C. > > > > You
> need to start with the downloadable examples and then read the > > getting
> started stuff on the wiki. > > > > Also don't forget http://antlr.markmail.org >
> > > > Jim > > > >> -----Original Message----- > >> From: antlr-interest-
> bounces
> at antlr.org [mailto:antlr-interest- > >> bounces at antlr.org] On Behalf Of J.R
> Karthikeyan > >> Sent: Tuesday, August 17, 2010 4:05 PM > >> To: antlr-
> interest
> at antlr.org > >> Subject: [antlr-interest] how to generate C++ file > >> > >>
> Hi, > >> > >>  I am using ANTLRWorks 1.4 for my project. I would like to
> generate > >> the > > C++ > >> file from this grammar. I don't find how to do
> this. Can you give me > > direction > >> in how to generate those files. > >> >
> >> Thanks, > >> Jrk
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From asicaddress at gmail.com  Sun Aug 22 09:49:44 2010
From: asicaddress at gmail.com (A Z)
Date: Sun, 22 Aug 2010 10:49:44 -0600
Subject: [antlr-interest] ANTLR enforces LL(1) beyond about 300 tokens
Message-ID: <AANLkTi==ZoqwJTz7hys2WYatWj9hkOU=ZcwzsZPfVH5q@mail.gmail.com>

Hello,

  I am trying to develop a SystemVerilog grammar using ANTLR 3.2. I was able
to successfully construct a Verilog2005 grammar and verified it against
about 800 tests. I used the same approach for SystemVerilog but upon
compilation I get lots of errors that make it clear ANTLR is only using
LL(1).

SystemVerilog has about twice the number of keywords and 50% more operators
than Verilog2005 so I took the working Verilog2005 grammar reduced it to
just the tokens and a single rule:


grammar Verilog2005;

tokens
{
K_ACCEPT_ON                = 'accept_on';
K_ALIAS                    = 'alias';
K_ALWAYS                   = 'always';
.
.
.
EQUALSTWOQMARK             = '==?';
BANGEQUALSQMARK            = '!=?';
MINUSGT                    = '->';
}

fragment Alpha     : ('a'..'z' | 'A'..'Z');
fragment IdentChar : ('0'..'9' | 'a'..'z' | 'A'..'Z' | '$' | '_');
SIMPLE_IDENT  : (Alpha | '_') IdentChar*;

unary_op  :
    PLUS
  | MINUS
  | BANG
  | TILDE
  | AMPERSAND
  | TILDEAMP
  | VBAR


I then slowly added the SystemVerilog tokens until it started failing.
Around 300 tokens I start getting these errors:

warning(209): temp.g:341:1: Multiple token rules can match input such as
"'a'": K_ACCEPT_ON, K_ALIAS, K_ALWAYS, K_ALWAYS_COMB, K_ALWAYS_FF,
K_ALWAYS_LATCH, K_AND, K_ASSERT, K_ASSIGN, K_ASSUME, K_AUTOMATIC,
SIMPLE_IDENT

As a result, token(s)
K_ALIAS,K_ALWAYS,K_ALWAYS_COMB,K_ALWAYS_FF,K_ALWAYS_LATCH,K_AND,K_ASSERT,K_ASSIGN,K_ASSUME,K_AUTOMATIC,SIMPLE_IDENT
were disabled for that input


I am not sure how to resolve this.  Removing the final identifier token also
allows a clean compile but the ANTLR book indicates ANTLR should try to
match in the order listed. Thanks.

From kenneth.domino at domemtech.com  Sun Aug 22 10:54:41 2010
From: kenneth.domino at domemtech.com (Kenneth Domino)
Date: Sun, 22 Aug 2010 13:54:41 -0400
Subject: [antlr-interest] ANTLR enforces LL(1) beyond about 300 tokens
In-Reply-To: <AANLkTi==ZoqwJTz7hys2WYatWj9hkOU=ZcwzsZPfVH5q@mail.gmail.com>
References: <AANLkTi==ZoqwJTz7hys2WYatWj9hkOU=ZcwzsZPfVH5q@mail.gmail.com>
Message-ID: <65241D3E8B7B43AFB9E228A834A61B24@KenPC2010>

> allows a clean compile but the ANTLR book indicates ANTLR should try to
> match in the order listed.

Hard to say without looking at the full grammar file, but you could try to 
separate
the lexer and parser grammars into two files, then use "option 
{filter=true;}" in
the lexer grammar.  (The option seems to only work if you make two 
grammars.)
That generates a lexer that uses a rule order priority, which is what you 
mention.
By default, Antlr does not generate this kind of lexer since the filter-type 
lexer
has its problems (See The Definitive ANTLR Reference).  Also, when 
separating
the parser and lexer grammars, it seems Antlr has a problem keeping the two 
token lists
in synch.  You can fix this with a hack: declare all tokens, with the same 
exact order,
in the two grammars.  Not sure why,

Ken

 


From asicaddress at gmail.com  Sun Aug 22 12:38:05 2010
From: asicaddress at gmail.com (A Z)
Date: Sun, 22 Aug 2010 13:38:05 -0600
Subject: [antlr-interest] ANTLR enforces LL(1) beyond about 300 tokens
In-Reply-To: <65241D3E8B7B43AFB9E228A834A61B24@KenPC2010>
References: <AANLkTi==ZoqwJTz7hys2WYatWj9hkOU=ZcwzsZPfVH5q@mail.gmail.com>
	<65241D3E8B7B43AFB9E228A834A61B24@KenPC2010>
Message-ID: <AANLkTim_aDFE+J4FLjoEWWDaS5guxOZqX80yQEt4PXSX@mail.gmail.com>

On Sun, Aug 22, 2010 at 11:54 AM, Kenneth Domino <
kenneth.domino at domemtech.com> wrote:

> allows a clean compile but the ANTLR book indicates ANTLR should try to
>> match in the order listed.
>>
>
> Hard to say without looking at the full grammar file, but you could try to
> separate
> the lexer and parser grammars into two files, then use "option
> {filter=true;}" in
> the lexer grammar.  (The option seems to only work if you make two
> grammars.)
> That generates a lexer that uses a rule order priority, which is what you
> mention.
> By default, Antlr does not generate this kind of lexer since the
> filter-type lexer
> has its problems (See The Definitive ANTLR Reference).  Also, when
> separating
> the parser and lexer grammars, it seems Antlr has a problem keeping the two
> token lists
> in synch.  You can fix this with a hack: declare all tokens, with the same
> exact order,
> in the two grammars.  Not sure why,
>
> Ken
>
>
>
>
Thanks for the response.

I modified the grammar to remove all the parser rules(except for one so
ANTLR doesn't complain). At the bottom is the grammar which compiles with no
warnings or errors.

If I comment out either K_STATIC or K_STRUCT, the compile fails with 40
warnings and 1 error:

________________________

warning(209): temp2.g:280:1: Multiple token rules can match input such as
"'&'": AMPERSAND, AMPSTAR, AMPTWO, AMPTHREE

As a result, token(s) AMPSTAR,AMPTWO,AMPTHREE were disabled for that input
warning(209): temp2.g:283:1: Multiple token rules can match input such as
"'*'": ASTERISK, ASTWO, FULLCON, ASCOLCOLAS, ASRPARAN

As a result, token(s) ASTWO,FULLCON,ASCOLCOLAS,ASRPARAN were disabled for
that input
...
error(208): temp2.g:299:1: The following token definitions can never be
matched because prior tokens match the same input: <Then it lists all of the
tokens>
________________________


I now think this may be specific to the binary I am using
(ANTLR Parser Generator  Version 3.2 Fedora release 12 (Constantine) Thu Mar
11 20:28:57 UTC 2010).

 I do not see the issue if I use ANTLRWorks. I'll look into this more.





grammar temp2;


tokens
{
K_ACCEPT_ON                = 'accept_on';
K_ALIAS                    = 'alias';
K_ALWAYS                   = 'always';
K_ALWAYS_COMB              = 'always_comb';
K_ALWAYS_FF                = 'always_ff';
K_ALWAYS_LATCH             = 'always_latch';
K_AND                      = 'and';
K_ASSERT                   = 'assert';
K_ASSIGN                   = 'assign';
K_ASSUME                   = 'assume';
K_AUTOMATIC                = 'automatic';
K_BEFORE                   = 'before';
K_BEGIN                    = 'begin';
K_BIND                     = 'bind';
K_BINS                     = 'bins';
K_BINSOF                   = 'binsof';
K_BIT                      = 'bit';
K_BREAK                    = 'break';
K_BUF                      = 'buf';
K_BUFIF0                   = 'bufif0';
K_BUFIF1                   = 'bufif1';
K_BYTE                     = 'byte';
K_CASE                     = 'case';
K_CASEX                    = 'casex';
K_CASEZ                    = 'casez';
K_CELL                     = 'cell';
K_CHANDLE                  = 'chandle';
K_CHECKER                  = 'checker';
K_CLASS                    = 'class';
K_CLOCKING                 = 'clocking';
K_CMOS                     = 'cmos';
K_CONFIG                   = 'config';
K_CONST                    = 'const';
K_CONSTRAINT               = 'constraint';
K_CONTEXT                  = 'context';
K_CONTINUE                 = 'continue';
K_COVER                    = 'cover';
K_COVERGROUP               = 'covergroup';
K_COVERPOINT               = 'coverpoint';
K_CROSS                    = 'cross';
K_DEASSIGN                 = 'deassign';
K_DEFAULT                  = 'default';
K_DEFPARAM                 = 'defparam';
K_DESIGN                   = 'design';
K_DISABLE                  = 'disable';
K_DIST                     = 'dist';
K_DO                       = 'do';
K_EDGE                     = 'edge';
K_ELSE                     = 'else';
K_END                      = 'end';
K_ENDCASE                  = 'endcase';
K_ENDCHECKER               = 'endchecker';
K_ENDCLASS                 = 'endclass';
K_ENDCLOCKING              = 'endclocking';
K_ENDCONFIG                = 'endconfig';
K_ENDFUNCTION              = 'endfunction';
K_ENDGENERATE              = 'endgenerate';
K_ENDGROUP                 = 'endgroup';
K_ENDINTERFACE             = 'endinterface';
K_ENDMODULE                = 'endmodule';
K_ENDPACKAGE               = 'endpackage';
K_ENDPRIMITIVE             = 'endprimitive';
K_ENDPROGRAM               = 'endprogram';
K_ENDPROPERTY              = 'endproperty';
K_ENDSPECIFY               = 'endspecify';
K_ENDSEQUENCE              = 'endsequence';
K_ENDTABLE                 = 'endtable';
K_ENDTASK                  = 'endtask';
K_ENUM                     = 'enum';
K_EVENT                    = 'event';
K_EVENTUALLY               = 'eventually';
K_EXPECT                   = 'expect';
K_EXPORT                   = 'export';
K_EXTENDS                  = 'extends';
K_EXTERN                   = 'extern';
K_FINAL                    = 'final';
K_FIRST_MATCH              = 'first_match';
K_FOR                      = 'for';
K_FORCE                    = 'force';
K_FOREACH                  = 'foreach';
K_FOREVER                  = 'forever';
K_FORK                     = 'fork';
K_FORKJOIN                 = 'forkjoin';
K_FUNCTION                 = 'function';
K_GENERATE                 = 'generate';
K_GENVAR                   = 'genvar';
K_GLOBAL                   = 'global';
K_HIGHZ0                   = 'highz0';
K_HIGHZ1                   = 'highz1';
K_IF                       = 'if';
K_IFF                      = 'iff';
K_IFNONE                   = 'ifnone';
K_IGNORE_BINS              = 'ignore_bins';
K_ILLEGAL_BINS             = 'illegal_bins';
K_IMPLIES                  = 'implies';
K_IMPORT                   = 'import';
K_INCDIR                   = 'incdir';
K_INCLUDE                  = 'include';
K_INITIAL                  = 'initial';
K_INOUT                    = 'inout';
K_INPUT                    = 'input';
K_INSIDE                   = 'inside';
K_INSTANCE                 = 'instance';
K_INT                      = 'int';
K_INTEGER                  = 'integer';
K_INTERFACE                = 'interface';
K_INTERSECT                = 'intersect';
K_JOIN                     = 'join';
K_JOIN_ANY                 = 'join_any';
K_JOIN_NONE                = 'join_none';
K_LARGE                    = 'large';
K_LET                      = 'let';
K_LIBLIST                  = 'liblist';
K_LIBRARY                  = 'library';
K_LOCAL                    = 'local';
K_LOCALPARAM               = 'localparam';
K_LOGIC                    = 'logic';
K_LONGINT                  = 'longint';
K_MACROMODULE              = 'macromodule';
K_MATCHES                  = 'matches';
K_MEDIUM                   = 'medium';
K_MODPORT                  = 'modport';
K_MODULE                   = 'module';
K_NAND                     = 'nand';
K_NEGEDGE                  = 'negedge';
K_NEW                      = 'new';
K_NEXTTIME                 = 'nexttime';
K_NMOS                     = 'nmos';
K_NOR                      = 'nor';
K_NOSHOWCANCELLED          = 'noshowcancelled';
K_NOT                      = 'not';
K_NOTIF0                   = 'notif0';
K_NOTIF1                   = 'notif1';
K_NULL                     = 'null';
K_OR                       = 'or';
K_OUTPUT                   = 'output';
K_PACKAGE                  = 'package';
K_PACKED                   = 'packed';
K_PARAMETER                = 'parameter';
K_PMOS                     = 'pmos';
K_POSEDGE                  = 'posedge';
K_PRIMITIVE                = 'primitive';
K_PRIORITY                 = 'priority';
K_PROGRAM                  = 'program';
K_PROPERTY                 = 'property';
K_PROTECTED                = 'protected';
K_PULL0                    = 'pull0';
K_PULL1                    = 'pull1';
K_PULLDOWN                 = 'pulldown';
K_PULLUP                   = 'pullup';
K_PULSESTYLE_ONDETECT      = 'pulsestyle_ondetect';
K_PULSESTYLE_ONEVENT       = 'pulsestyle_onevent';
K_PURE                     = 'pure';
K_RAND                     = 'rand';
K_RANDC                    = 'randc';
K_RANDCASE                 = 'randcase';
K_RANDSEQUENCE             = 'randsequence';
K_RCMOS                    = 'rcmos';
K_REAL                     = 'real';
K_REALTIME                 = 'realtime';
K_REF                      = 'ref';
K_REG                      = 'reg';
K_REJECT_ON                = 'reject_on';
K_RELEASE                  = 'release';
K_REPEAT                   = 'repeat';
K_RESTRICT                 = 'restrict';
K_RETURN                   = 'return';
K_RNMOS                    = 'rnmos';
K_RPMOS                    = 'rpmos';
K_RTRAN                    = 'rtran';
K_RTRANIF0                 = 'rtranif0';
K_RTRANIF1                 = 'rtranif1';
K_SCALARED                 = 'scalared';
K_SEQUENCE                 = 'sequence';
K_SHORTINT                 = 'shortint';
K_SHORTREAL                = 'shortreal';
K_SHOWCANCELLED            = 'showcancelled';
K_SIGNED                   = 'signed';
K_SMALL                    = 'small';
K_SOLVE                    = 'solve';
K_SPECIFY                  = 'specify';
K_SPECPARAM                = 'specparam';
//K_STATIC                   = 'static';
K_STRING                   = 'string';
K_STRONG                   = 'strong';
K_STRONG0                  = 'strong0';
K_STRONG1                  = 'strong1';
//K_STRUCT                   = 'struct';
K_SUPER                    = 'super';
K_SUPPLY0                  = 'supply0';
K_SUPPLY1                  = 'supply1';
K_TABLE                    = 'table';
K_TASK                     = 'task';
K_TIME                     = 'time';
K_TRAN                     = 'tran';
K_TRANIF0                  = 'tranif0';
K_TRANIF1                  = 'tranif1';
K_TRI                      = 'tri';
K_TRI0                     = 'tri0';
K_TRI1                     = 'tri1';
K_TRIAND                   = 'triand';
K_TRIOR                    = 'trior';
K_TRIREG                   = 'trireg';
K_UNSIGNED                 = 'unsigned';
K_USE                      = 'use';
K_UWIRE                    = 'uwire';
K_VECTORED                 = 'vectored';
K_WAIT                     = 'wait';
K_WAND                     = 'wand';
K_WEAK0                    = 'weak0';
K_WEAK1                    = 'weak1';
K_WHILE                    = 'while';
K_WIRE                     = 'wire';
K_WOR                      = 'wor';
K_XNOR                     = 'xnor';
K_XOR                      = 'xor';
KD_FATAL                   = '$fatal';
KD_ERROR                   = '$error';
KD_WARNING                 = '$warning';
KD_INFO                    = '$info';
KD_HOLD                    = '$hold';
KD_SETUP                   = '$setup';
KD_SETUPHOLD               = '$setuphold';
KD_RECOVERY                = '$recovery';
ATSIGN                     = '@';
ATTWO                      = '@@';
PLUS                       = '+';
MINUS                      = '-';
ASTERISK                   = '*';
AMPERSAND                  = '&';
DOLLAR                     = '$';
TILDE                      = '~';
FSLASH                     = '/';
PERCENT                    = '%';
ASTWO                      = '**';
CGT                        = '>';
CLT                        = '<';
BANG                       = '!';
EQUALSTWO                  = '==';
BANGEQUALS                 = '!=';
EQUALSTHREE                = '===';
BANGEQUALSTWO              = '!==';
VBAR                       = '|';
LTTWO                      = '<<';
GTTWO                      = '>>';
LTTHREE                    = '<<<';
GTTHREE                    = '>>>';
POUND                      = '#';
LPARAN                     = '(';
RPARAN                     = ')';
SEMICOLON                  = ';';
COLON                      = ':';
COMMA                      = ',';
LBRACKET                   = '[';
RBRACKET                   = ']';
LBRACE                     = '{';
RBRACE                     = '}';
PERIOD                     = '.';
EQUALS                     = '=';
QMARK                      = '?';
EQUALSGT                   = '=>';
FULLCON                    = '*>';
AMPSTAR                    = '&*';
PERIODAS                   = '.*';
COLONCOLON                 = '::';
PLUSPLUS                   = '++';
MINUSMINUS                 = '--';
GTEQUALS                   = '>=';
LTEQUALS                   = '<=';
COLONEQUALS                = ':=';
COLONFSLASH                = ':/';
POUNDTWO                   = '##';
ASCOLCOLAS                 = '*::*';
POUNDMINUSPOUND            = '#-#';
POUNDEQUALSPOUND           = '#=#';
LBASRB                     = '[*]';
LBPLUSRB                   = '[+]';
AMPTWO                     = '&&';
AMPTHREE                   = '&&&';
BARTWO                     = '||';
LPARANAS                   = '(*';
ASRPARAN                   = '*)';
APOSTROPHE                 = '\'';
PLUSEQUALS                 = '+=';
MINUSEQUALS                = '-=';
PLUSCOLON                  = '+:';
MINUSCOLON                 = '-:';
LPASRP                     = '(*)';
BARMINUSGT                 = '|->';
TILDEAMP                   = '~&';
TILDEBAR                   = '~|';
CARET                      = '^';
TILDECARET                 = '~^';
CARETTILDE                 = '^~';
LTMINUSGT                  = '<->';

EQUALSTWOQMARK             = '==?';
BANGEQUALSQMARK            = '!=?';
MINUSGT                    = '->';
}

fragment Alpha     : ('a'..'z' | 'A'..'Z');
fragment IdentChar : ('0'..'9' | 'a'..'z' | 'A'..'Z' | '$' | '_');
SIMPLE_IDENT  : (Alpha | '_') IdentChar*;

unary_op  :
    PLUS
  | MINUS
  | BANG
  | TILDE
  | AMPERSAND
  | TILDEAMP
  | VBAR
  | TILDEBAR
  | CARET
  | TILDECARET
  | CARETTILDE;

From jrk1987 at yahoo.co.in  Sun Aug 22 12:52:10 2010
From: jrk1987 at yahoo.co.in (J.R Karthikeyan)
Date: Mon, 23 Aug 2010 01:22:10 +0530 (IST)
Subject: [antlr-interest] how to generate C++ file
In-Reply-To: <AANLkTinybMXW2416ndYXXUfXNZ1=TUdh2qvdnnX6DBcr@mail.gmail.com>
References: <187507.31389.qm@web94601.mail.in2.yahoo.com>
	<AANLkTinybMXW2416ndYXXUfXNZ1=TUdh2qvdnnX6DBcr@mail.gmail.com>
Message-ID: <423186.54682.qm@web94612.mail.in2.yahoo.com>

Hi Stuart,

  Thanks Stuart. That works for me. Now it is compiling perfectly fine.

Thanks,
Jrk



________________________________
From: Stuart Dootson <stuart.dootson at gmail.com>
To: J.R Karthikeyan <jrk1987 at yahoo.co.in>
Cc: antlr-interest <antlr-interest at antlr.org>
Sent: Sun, 22 August, 2010 4:26:50 AM
Subject: Re: [antlr-interest] how to generate C++ file




On Sun, Aug 22, 2010 at 4:32 AM, J.R Karthikeyan <jrk1987 at yahoo.co.in> wrote:

Hi,
>
> Just want to make sure that , this means that I can't use antlr with visul
>studio 2005. Because my entire project is in visual studio 2005 and this parser
>is going to be one of the module for that project. So can you please let me 
know
>if I can use this with visual studio 2005.
>
>
>Thanks,
>Jrk
>
>
>
>

jrk - you can use Antlr with Visual Studio - I know, I've done so in the past. 
Your compiler errors are coming because the default options applied to a VS C++ 
project include pre-compiled header support.

The easiest way around this is to tell VS that your Antlr generated files don't 
use the pre-compiled headers. To do that, select the Antlr source files in the 
Solution Explorer, then right-click and select Properties. After that, select 
the C++->Precompiled Headers property page and then in the 'Create/Use 
Precompiled Header" property, select the option that says something like "Not 
using precompiled headers".

Stuart



From brian at brie.com  Sun Aug 22 23:05:50 2010
From: brian at brie.com (Brian Lavender)
Date: Sun, 22 Aug 2010 23:05:50 -0700
Subject: [antlr-interest] Get an iterator?
Message-ID: <20100823060550.GA2434@brie.com>

How do I get an iterator for the one or more? The following doesn't quite seem 
to work.


grammar Agenda;

options {language='Java';}

agenda	:	
	l1=bill+ { Iterator it = $l1.iterator() ; } ;
bill	returns[String xml] 	:	
	active fiscal title author NL 
	subject NL NL {
		$xml = "<BILL>\n"; 
		$xml += $title.xml + "\n";
		$xml += $author.xml + "\n";
		$xml += $subject.xml + "\n";
		$xml += "</flag type=\"active\" status=\"" + $active.text + "\">\n";
		$xml += "</flag type=\"fiscal\" status=\"" + $fiscal.text + "\">\n";
		$xml += "</BILL>\n";				
}
;

title returns [String xml]	:	
	fifteen { 
		$xml="<Title>" + $fifteen.text + "</Title>";	
	};
author	returns [String xml] 	:	
	ten { 
		$xml="<Author>" + $ten.text + "</Author>";
	};
subject	returns [String xml]	:	
	ten {
		$xml="<Subject>" + $ten.text + "</Subject>";
	};
	
active	:	FLAG;
fiscal	:	FLAG;

fifteen	:	LTR LTR LTR LTR LTR LTR LTR LTR LTR LTR LTR LTR LTR LTR LTR;
ten	:	LTR LTR LTR LTR LTR LTR LTR LTR LTR LTR;
	

NL	:	('\n'|'\r'|'\r\n');
FLAG	:	('Y'|'N');
LTR  :   . ;


Input to the Lexer/Parser is the following.

YYconstruct bill frank burn
Make lifez

YYeazememnt bill billy bob 
roughlife 




-- 
Brian Lavender
http://www.brie.com/brian/

"There are two ways of constructing a software design. One way is to
make it so simple that there are obviously no deficiencies. And the other
way is to make it so complicated that there are no obvious deficiencies."

Professor C. A. R. Hoare
The 1980 Turing award lecture

From brian at brie.com  Sun Aug 22 23:59:43 2010
From: brian at brie.com (Brian Lavender)
Date: Sun, 22 Aug 2010 23:59:43 -0700
Subject: [antlr-interest] Get an iterator?
In-Reply-To: <20100823060550.GA2434@brie.com>
References: <20100823060550.GA2434@brie.com>
Message-ID: <20100823065943.GB2434@brie.com>

On Sun, Aug 22, 2010 at 11:05:50PM -0700, Brian Lavender wrote:
> How do I get an iterator for the one or more? The following doesn't quite seem 
> to work.
> 
> 
> grammar Agenda;
> 
> options {language='Java';}
> 

Turns out that the following works.

agenda	returns [List l1]
@init { $l1 = new ArrayList(); } :	 
	( e=bill { 
		$l1.add($e.xml);
		//System.out.println($e.xml);
	 } )+
	;

> agenda	:	
> 	l1=bill+ { Iterator it = $l1.iterator() ; } ;
> bill	returns[String xml] 	:	
> 	active fiscal title author NL 
> 	subject NL NL {
> 		$xml = "<BILL>\n"; 
> 		$xml += $title.xml + "\n";
> 		$xml += $author.xml + "\n";
> 		$xml += $subject.xml + "\n";
> 		$xml += "</flag type=\"active\" status=\"" + $active.text + "\">\n";
> 		$xml += "</flag type=\"fiscal\" status=\"" + $fiscal.text + "\">\n";
> 		$xml += "</BILL>\n";				
> }
> ;
> 
> title returns [String xml]	:	
> 	fifteen { 
> 		$xml="<Title>" + $fifteen.text + "</Title>";	
> 	};
> author	returns [String xml] 	:	
> 	ten { 
> 		$xml="<Author>" + $ten.text + "</Author>";
> 	};
> subject	returns [String xml]	:	
> 	ten {
> 		$xml="<Subject>" + $ten.text + "</Subject>";
> 	};
> 	
> active	:	FLAG;
> fiscal	:	FLAG;
> 
> fifteen	:	LTR LTR LTR LTR LTR LTR LTR LTR LTR LTR LTR LTR LTR LTR LTR;
> ten	:	LTR LTR LTR LTR LTR LTR LTR LTR LTR LTR;
> 	
> 
> NL	:	('\n'|'\r'|'\r\n');
> FLAG	:	('Y'|'N');
> LTR  :   . ;
> 
> 
> Input to the Lexer/Parser is the following.
> 
> YYconstruct bill frank burn
> Make lifez
> 
> YYeazememnt bill billy bob 
> roughlife 
> 
> 
> 
> 
> -- 
> Brian Lavender
> http://www.brie.com/brian/
> 
> "There are two ways of constructing a software design. One way is to
> make it so simple that there are obviously no deficiencies. And the other
> way is to make it so complicated that there are no obvious deficiencies."
> 
> Professor C. A. R. Hoare
> The 1980 Turing award lecture
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

-- 
Brian Lavender
http://www.brie.com/brian/

"There are two ways of constructing a software design. One way is to
make it so simple that there are obviously no deficiencies. And the other
way is to make it so complicated that there are no obvious deficiencies."

Professor C. A. R. Hoare
The 1980 Turing award lecture

From jeanchristophe.bach at inria.fr  Mon Aug 23 02:35:28 2010
From: jeanchristophe.bach at inria.fr (Jean-Christophe Bach)
Date: Mon, 23 Aug 2010 11:35:28 +0200
Subject: [antlr-interest] Fuzzy parsing ('filter' option)
In-Reply-To: <20100811145430.GA3440@adel.loria.fr>
References: <20100811145430.GA3440@adel.loria.fr>
Message-ID: <20100823093528.GA17168@adel.loria.fr>

Hello antlr users,

I am a bit stuck to the problem of fuzzy parsing and filter option. I looked at the fuzzy example,
but I am not sure it helps me. 

How do you usually handle it ? How do you keep all the the host code without any
modification when you write a language you embed into Java (or any other
language) ? I thought I could create a node containing a "big string" of host
code in my tree, but it does not seem to to be so obvious/easy. The parser has
difficulties to "recognize unknown constructs" (all but my specific
constructs == host code). Have you ever had this problem ?

Thanks in advance,

JC


* Jean-Christophe Bach <jeanchristophe.bach at inria.fr> [11.08.2010. @16:54:30 +0200]:
> I have a combined grammar and I would like to do fuzzy parsing. I know that the
> filter option is designed for the lexer part, but is there any way to use this
> option by keeping my combined grammar ?
> In our old  parser (antlr2), we used this option like this (in a combined
> grammar) :
> 
> class HostParser extends Parser;
> ...
> // returns the current goal language code
> private String getCode() {
>   String result = targetlexer.target.toString();
>   targetlexer.clearTarget();
>   return result;
> }
> ...
> and parser rules
> 
> ...
> class HostLexer extends Lexer;
> options {
>   ...
>   filter=TARGET;
>   ...
>  }
> 
> public StringBuilder target = new StringBuilder("");
> // clear the buffer
> public void clearTarget() { target.delete(0,target.length()); }
> 
> ...
> 
> protected
> TARGET : (.) { target.append($getText); } ;
> 
> 
> It was very easy to do fuzzy parsing and to use what was parsed : when needed,
> we only had to call getCode() function to get a HostBlock code and to put it in
> a node of our tree.  But with antlr3, I'm not sure to understand how to proceed.
> I tried to give the option 'filter=true;' directly to my fragment TARGET rule,
> but it does not seem to be a good idea (I obtain errors).
> Would someone have any idea ?
> 
> Regards,
> 
> JC
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From thomas.nilsson at responsive.se  Mon Aug 23 02:42:30 2010
From: thomas.nilsson at responsive.se (Thomas Nilsson)
Date: Mon, 23 Aug 2010 11:42:30 +0200
Subject: [antlr-interest] Test rig template (Was: Setting input in the
	interpreter)
In-Reply-To: <094ED3E5-6FD9-4E91-9039-4FF5B1511A8F@responsive.se>
References: <D9F0F9E0-F839-4C2D-878E-EEB27F32282D@responsive.se>
	<02ff01cb4082$6b50e1a0$41f2a4e0$@temporal-wave.com>
	<094ED3E5-6FD9-4E91-9039-4FF5B1511A8F@responsive.se>
Message-ID: <F5D6FFF2-3D79-4DA1-A30B-7C2FEA92C229@responsive.se>

So, there were no-one that could point me in the right direction about the Test Rig? Is there a template? Does ANTLRWorks/IDE create one that I could start from? If so where would I find it?

(Or maybe this is described in The Book? If so I'll be receiving it in a couple of days...)


Thomas Nilsson, CTO, Agile Mentor
Responsive Development Technologies AB
Web: http://www.responsive.se
Email: thomas.nilsson at responsive.se
Phone: +46 70 561 75 41
Blog: http://www.responsive.se/thomas

20 aug 2010 kl. 21.55 skrev Thomas Nilsson:

> 20 aug 2010 kl. 18.11 skrev Jim Idle:
> 
>> Did you notice the tab that allows you to change the test rig template?
>> 
> 
> Yes, I did, but it was not easy to find it again, now that I know that I probably need it ;-)
> 
> I found one on the "Run"-menue and some setting in the Preferences (but no tab). But I don't really know what to make of it. How do I use it? I guess that the "Class" is to indicate a java class to load, and that the classpath should be tweaked accordingly in the Preferences->Compiler->Classpath. Would I lose any system classpaths that I need to explicitly add if I customize it?
> 
> And finally, the class should be a complete implementation of the test rig. Is there a template somewhere?
> 
> (All this is in ANTLRWorks 1.4, couldn't find anything similar in ANTLR-IDE, Eclipse 3.6...)
> 
> Thomas Nilsson, CTO, Agile Mentor
> Responsive Development Technologies AB
> Web: http://www.responsive.se
> Email: thomas.nilsson at responsive.se
> Phone: +46 70 561 75 41
> Blog: http://www.responsive.se/thomas
> 
>> Jim
>> 
>>> -----Original Message-----
>>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>>> bounces at antlr.org] On Behalf Of Thomas Nilsson
>>> Sent: Thursday, August 19, 2010 11:17 PM
>>> To: antlr-interest at antlr.org
>>> Subject: [antlr-interest] Setting input in the interpreter
>>> 
>>> Is there a way to set the input stream in the interpreter, either
>> ANTLRWorks
>>> or ANTLR IDE?
>>> 
>>> My grammar is case insensitive,  and although there is an example on the
>>> Wiki on how to do this for real, I was looking for a way to run my
>> numerous
>>> test cases in the interpreter before implementing anything else.
>>> 
>>> Thomas Nilsson, CTO, Agile Mentor
>>> Responsive Development Technologies AB
>>> Web: http://www.responsive.se
>>> Email: thomas.nilsson at responsive.se
>>> Phone: +46 70 561 75 41
>>> Blog: http://www.responsive.se/thomas
>>> 
>>> 
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>>> email-address
>> 
>> 
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From jasperfloor at gmail.com  Mon Aug 23 07:55:08 2010
From: jasperfloor at gmail.com (Jasper Floor)
Date: Mon, 23 Aug 2010 16:55:08 +0200
Subject: [antlr-interest] gUnit broken
Message-ID: <AANLkTikA4miAQJLCAPtbTQTLmJaA9+3=K6EcNWMFP9vx@mail.gmail.com>

Dear all,

I am fairly confident that gUnit is broken. I have tests which fail in
gUnit but not in any test rig I set up myself.

If this list is not the right place to report this then please tell
me. Also, if you know, what is the right place?

The concrete cases I have are a problem with strings which are
manipulated in the Lexer by a function I wrote and seemingly incorrect
parsing of expressions.

The first I already sent to this list. I didn't get an answer on that
so either no one knew the answer or if they did they didn't have time
to reply.

The second is a little more serious and makes gUnit unusable to me.

Basically an expression of the form:

'a' + 'b'

which should work as string concatenation seems to fail in gUnit.
Stepping through the code shows that only 'a' is actually being parsed
which leads to an InvalidInputException.

However, in my own test rig it parses correctly. Also the gUnit tests
on the parser grammar (as opposed to the tree grammar) parses it to
the tree (fragment) that I expect. Only in the tests on the tree does
it seem to fail.

If I cannot trust gUnit in these cases how can I trust it in other cases?

Has any one else seen this problem? Is it possible I am doing something wrong?

mvg,
Jasper

From troy.daniels at baesystems.com  Mon Aug 23 07:56:57 2010
From: troy.daniels at baesystems.com (Daniels, Troy (US SSA))
Date: Mon, 23 Aug 2010 10:56:57 -0400
Subject: [antlr-interest] Lexer Rule matching member variable (Java)
In-Reply-To: <4C712486.4040703@azamir.de>
References: <4C68DD47.6020603@azamir.de>
	<011c01cb3d68$c1764d80$4462e880$@temporal-wave.com>
	<4C6E2FCF.9080209@azamir.de>
	<030101cb4082$e8ac4040$ba04c0c0$@temporal-wave.com>
	<4C712486.4040703@azamir.de>
Message-ID: <ED474DDA5167ED448245DD89A4718EC9A239C16CF3@GLDMS60322.goldlnk.rootlnka.net>

Is there a reason this won't work?

TEXT:
   ( {lxstate == State.NORMAL && input.LA(1) != curspecial}?=>. )+

This should cause the predicate to be evaluated inside the loop, rather than outside, and consumes each character that passes.  While the generated code should be more or less the same, this version decreases the language specific code, might let ANLTR do better lookahead (especially if you reduce the text that can match) and won't be as sensitive to changes in the API.

Troy
 

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org 
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of 
> Frederic Beister
> Sent: Sunday, August 22, 2010 9:22 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Lexer Rule matching member 
> variable (Java)
> 
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
> 
> Hi,
> 
> just for the archives: This worked with small one small 
> modification regarding the EOF-Token:
> 
> TEXT:
>   {lxstate == State.NORMAL && input.LA(1) != curspecial}?=>.
> {
>  while (input.LA(1) != curspecial && input.LA(1) != CharStream.EOF) {
>   input.consume();
>  }
> }
> ;
> 
> Thanks again
> Frederic
> 
> 
> 
> 
> Am 20.08.2010 18:15, schrieb Jim Idle:
> > You just need to not use ANY. Once the predicate matches, 
> your rule is 
> > selected and it will do whatever you tell it. So, don't use 
> ANY+ just 
> > put some code in to consume until you get to some point 
> that you don't 
> > want to consume any more:
> > 
> > TEXT: { lxstate==State.NORMAL && input.LA(1)!=curspecial} ?=> .
> > {
> >   while (input.LA(1) != curspecial) { input.consume(); } } ;
> > 
> > It is often instructive to look at the generated code and 
> steal from 
> > it to get where you need to.
> > 
> > Jim
> > 
> >> -----Original Message-----
> >> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest- 
> >> bounces at antlr.org] On Behalf Of Frederic Beister
> >> Sent: Friday, August 20, 2010 12:34 AM
> >> To: antlr-interest at antlr.org
> >> Subject: Re: [antlr-interest] Lexer Rule matching member variable 
> >> (Java)
> >>
> >>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address
> 
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: 
> > 
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
> 
> - --
> PGP Fingerprint = 782C 2BE7 0972 D632 8BDF 4A23 3811 174A 
> 1530 64ED -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.10 (GNU/Linux)
> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/
> 
> iEYEARECAAYFAkxxJIIACgkQOBEXShUwZO10xQCfZtRkA0b9yyfQJze4IsogkdaK
> 5xMAnjnIEqtmMPhGsNRKUSvyXotxf0rz
> =bq0d
> -----END PGP SIGNATURE-----
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: 
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 

From kenneth.domino at domemtech.com  Mon Aug 23 10:58:43 2010
From: kenneth.domino at domemtech.com (Kenneth Domino)
Date: Mon, 23 Aug 2010 13:58:43 -0400
Subject: [antlr-interest] Tree rewrite for paranthesized expression
Message-ID: <F2C0B708B7BB4AA1BF022C31EB91C890@KenPC2010>

Hi All,

Is there a way to create a variable to reference the nodes
for a parenthesized expression, and use it in a tree rewrite rule?
E.g.,

i_abs
    : i=KI_ABS
    t=(
        (
            K_S16 | K_S32 | K_S64
        ) |
        (
            K_FTZ? K_F32
        ) |
        (
            K_F64
        )
    )
    o=(
        opr_register
        T_COMMA
        opr_register_or_constant
    )
    -> ^($i ^(TREE_TYPE $t) ^(TREE_OPR $o))
    ;

Unfortunately, while Antlr parses and generates a recognizer for the grammar,
this does not work because an exception is generated
(org.antlr.runtime.tree.RewriteEmptyStreamException).

I can rewrite this to bypass the exception and generate a tree, but
it feels more like a hack, since it clutters the grammar with additional
productions, making it harder to read as well:

i_abs
    : i=KI_ABS
    t=xxx
    o=yyy
    -> ^($i ^(TREE_TYPE $t) ^(TREE_OPR $o))
    ;

xxx
 :
 (
        (
            K_S16 | K_S32 | K_S64
        ) |
        (
            K_FTZ? K_F32
        ) |
        (
            K_F64
        )
    )
 ;

yyy
 :
 (
  opr_register
  T_COMMA
  opr_register_or_constant
 )
    ;

BTW, if there isn't anything like this currently in Antlr, it would be nice to add
the syntax in a future release.  The syntax for tree construction needs
some polishing. The syntax for tree rewrite requires
me to duplicate the rule r.h.s. in the rewrite part of the rule.  So,
I have to change the syntax in two places.  My proposal is much cleaner.
Antlr also currently forces one to make a choice between tree rewrite rules and
AST operators. It would be better if they could be used in combination.  For example,
if I wanted to construct a tree without the T_COMMA, it could be
done using the AST "!" operator after the T_COMMA:

i_abs
...
    o=(
        opr_register
        T_COMMA!
        opr_register_or_constant
    )
    -> ^($i ^(TREE_TYPE $t) ^(TREE_OPR $o))
    ;

Ken

From jrk1987 at yahoo.co.in  Mon Aug 23 11:28:09 2010
From: jrk1987 at yahoo.co.in (J.R Karthikeyan)
Date: Mon, 23 Aug 2010 23:58:09 +0530 (IST)
Subject: [antlr-interest] regarding substring error
Message-ID: <803921.94438.qm@web94604.mail.in2.yahoo.com>

Hi,

  I have used the token STRING whose definition is 

fragment
QUOTE    :    '\"'
    ;
    
STRING    :    QUOTE (options {greedy=false;} : .)* QUOTE { 
setText(getText().substring(0, getText().length())); }
    ;

I generated the C code and I tried to compile with visual studio. Without this 
STRING token definition it is working fine. But when I include this token 
definition it is giving the compilation error as below

Error    7    error C2224: left of '.substring' must have struct/union type    
c:\documents and settings\kjambura\my documents\visual studio 
2005\projects\wrap\wrap\project1lexer.c    3210    


Error    8    error C2224: left of '.length' must have struct/union type    
c:\documents and settings\kjambura\my documents\visual studio 
2005\projects\wrap\wrap\project1lexer.c    3210    


those lines are in Lexer file (highlighted in red)

void mSTRING(pproject1Lexer ctx)
{
    ANTLR3_UINT32    _type;

    _type        = STRING;
       
    
    // C:\\Documents and Settings\\kjambura\\My 
Documents\\parser\\project1.g:243:8: ( QUOTE ( options {greedy=false; } : . )* 
QUOTE )
    // C:\\Documents and Settings\\kjambura\\My 
Documents\\parser\\project1.g:243:10: QUOTE ( options {greedy=false; } : . )* 
QUOTE
    {
        /* 243:10: QUOTE ( options {greedy=false; } : . )* QUOTE */
        mQUOTE(ctx ); 
        if  (HASEXCEPTION())
        {
            goto ruleSTRINGEx;
        }


        // C:\\Documents and Settings\\kjambura\\My 
Documents\\parser\\project1.g:243:16: ( options {greedy=false; } : . )*

        for (;;)
        {
            int alt10=2;
            {
               /* 
dfaLoopbackState(k,edges,eotPredictsAlt,description,stateNumber,semPredState)
                */
                int LA10_0 = LA(1);
                if ( (LA10_0 == '"') ) 
                {
                    alt10=2;
                }
                else if ( (((LA10_0 >= 0x0000) && (LA10_0 <= '!')) || ((LA10_0 
>= '#') && (LA10_0 <= 0xFFFF))) ) 

                {
                    alt10=1;
                }

            }
            switch (alt10) 
            {
            case 1:
                // C:\\Documents and Settings\\kjambura\\My 
Documents\\parser\\project1.g:243:43: .
                {
                    MATCHANY(); 
                    if  (HASEXCEPTION())
                    {
                        goto ruleSTRINGEx;
                    }


                }
                break;

            default:
                goto loop10;    /* break out of the loop */
                break;
            }
        }
        loop10: ; /* Jump out to here if this rule does not match */

        /* 243:10: QUOTE ( options {greedy=false; } : . )* QUOTE */
        mQUOTE(ctx ); 
        if  (HASEXCEPTION())
        {
            goto ruleSTRINGEx;
        }

        {
            
             setText(getText().substring(0, getText().length())); 
        }

    }

    LEXSTATE->type = _type;

    // This is where rules clean up and exit
    //
    goto ruleSTRINGEx; /* Prevent compiler warnings */
    ruleSTRINGEx: ;

}

Can you please suggest me how to deal with this error.


Thanks,
Jrk



From asicaddress at gmail.com  Mon Aug 23 13:28:10 2010
From: asicaddress at gmail.com (A Z)
Date: Mon, 23 Aug 2010 14:28:10 -0600
Subject: [antlr-interest] Test rig template (Was: Setting input in the
	interpreter)
In-Reply-To: <F5D6FFF2-3D79-4DA1-A30B-7C2FEA92C229@responsive.se>
References: <D9F0F9E0-F839-4C2D-878E-EEB27F32282D@responsive.se>
	<02ff01cb4082$6b50e1a0$41f2a4e0$@temporal-wave.com>
	<094ED3E5-6FD9-4E91-9039-4FF5B1511A8F@responsive.se>
	<F5D6FFF2-3D79-4DA1-A30B-7C2FEA92C229@responsive.se>
Message-ID: <AANLkTim3qud6jDMB1W4mWYw0ycxa1gePRa98CiUUFSUc@mail.gmail.com>

ANTLRWorks creates __Test__.java in the outputs path. This creates an
instance of your parser with a debug port so you cannot run it standalone
lest it hangs waiting for the debugger. You can simply change the parser
instance to fix this.



On Mon, Aug 23, 2010 at 3:42 AM, Thomas Nilsson <
thomas.nilsson at responsive.se> wrote:

> So, there were no-one that could point me in the right direction about the
> Test Rig? Is there a template? Does ANTLRWorks/IDE create one that I could
> start from? If so where would I find it?
>
> (Or maybe this is described in The Book? If so I'll be receiving it in a
> couple of days...)
>
>
> Thomas Nilsson, CTO, Agile Mentor
> Responsive Development Technologies AB
> Web: http://www.responsive.se
> Email: thomas.nilsson at responsive.se
> Phone: +46 70 561 75 41
> Blog: http://www.responsive.se/thomas
>
> 20 aug 2010 kl. 21.55 skrev Thomas Nilsson:
>
> > 20 aug 2010 kl. 18.11 skrev Jim Idle:
> >
> >> Did you notice the tab that allows you to change the test rig template?
> >>
> >
> > Yes, I did, but it was not easy to find it again, now that I know that I
> probably need it ;-)
> >
> > I found one on the "Run"-menue and some setting in the Preferences (but
> no tab). But I don't really know what to make of it. How do I use it? I
> guess that the "Class" is to indicate a java class to load, and that the
> classpath should be tweaked accordingly in the
> Preferences->Compiler->Classpath. Would I lose any system classpaths that I
> need to explicitly add if I customize it?
> >
> > And finally, the class should be a complete implementation of the test
> rig. Is there a template somewhere?
> >
> > (All this is in ANTLRWorks 1.4, couldn't find anything similar in
> ANTLR-IDE, Eclipse 3.6...)
> >
> > Thomas Nilsson, CTO, Agile Mentor
> > Responsive Development Technologies AB
> > Web: http://www.responsive.se
> > Email: thomas.nilsson at responsive.se
> > Phone: +46 70 561 75 41
> > Blog: http://www.responsive.se/thomas
> >
> >> Jim
> >>
> >>> -----Original Message-----
> >>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> >>> bounces at antlr.org] On Behalf Of Thomas Nilsson
> >>> Sent: Thursday, August 19, 2010 11:17 PM
> >>> To: antlr-interest at antlr.org
> >>> Subject: [antlr-interest] Setting input in the interpreter
> >>>
> >>> Is there a way to set the input stream in the interpreter, either
> >> ANTLRWorks
> >>> or ANTLR IDE?
> >>>
> >>> My grammar is case insensitive,  and although there is an example on
> the
> >>> Wiki on how to do this for real, I was looking for a way to run my
> >> numerous
> >>> test cases in the interpreter before implementing anything else.
> >>>
> >>> Thomas Nilsson, CTO, Agile Mentor
> >>> Responsive Development Technologies AB
> >>> Web: http://www.responsive.se
> >>> Email: thomas.nilsson at responsive.se
> >>> Phone: +46 70 561 75 41
> >>> Blog: http://www.responsive.se/thomas
> >>>
> >>>
> >>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> >>> email-address
> >>
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From Gordon.Tyler at quest.com  Mon Aug 23 13:35:11 2010
From: Gordon.Tyler at quest.com (Gordon Tyler)
Date: Mon, 23 Aug 2010 13:35:11 -0700
Subject: [antlr-interest] regarding substring error
In-Reply-To: <803921.94438.qm@web94604.mail.in2.yahoo.com>
References: <803921.94438.qm@web94604.mail.in2.yahoo.com>
Message-ID: <1FE9A296676737419A8912A6FD22AE1D028DA13AEF@alvxmbw04.prod.quest.corp>

Your definition of STRING assumes that ANTLR is generating Java code. You will need to replace the code inside the {} with the appropriate C code.

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of J.R Karthikeyan
Sent: August 23, 2010 2:28 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] regarding substring error

Hi,

  I have used the token STRING whose definition is 

fragment
QUOTE    :    '\"'
    ;
    
STRING    :    QUOTE (options {greedy=false;} : .)* QUOTE { 
setText(getText().substring(0, getText().length())); }
    ;

I generated the C code and I tried to compile with visual studio. Without this 
STRING token definition it is working fine. But when I include this token 
definition it is giving the compilation error as below

Error    7    error C2224: left of '.substring' must have struct/union type    
c:\documents and settings\kjambura\my documents\visual studio 
2005\projects\wrap\wrap\project1lexer.c    3210    


Error    8    error C2224: left of '.length' must have struct/union type    
c:\documents and settings\kjambura\my documents\visual studio 
2005\projects\wrap\wrap\project1lexer.c    3210    


those lines are in Lexer file (highlighted in red)

void mSTRING(pproject1Lexer ctx)
{
    ANTLR3_UINT32    _type;

    _type        = STRING;
       
    
    // C:\\Documents and Settings\\kjambura\\My 
Documents\\parser\\project1.g:243:8: ( QUOTE ( options {greedy=false; } : . )* 
QUOTE )
    // C:\\Documents and Settings\\kjambura\\My 
Documents\\parser\\project1.g:243:10: QUOTE ( options {greedy=false; } : . )* 
QUOTE
    {
        /* 243:10: QUOTE ( options {greedy=false; } : . )* QUOTE */
        mQUOTE(ctx ); 
        if  (HASEXCEPTION())
        {
            goto ruleSTRINGEx;
        }


        // C:\\Documents and Settings\\kjambura\\My 
Documents\\parser\\project1.g:243:16: ( options {greedy=false; } : . )*

        for (;;)
        {
            int alt10=2;
            {
               /* 
dfaLoopbackState(k,edges,eotPredictsAlt,description,stateNumber,semPredState)
                */
                int LA10_0 = LA(1);
                if ( (LA10_0 == '"') ) 
                {
                    alt10=2;
                }
                else if ( (((LA10_0 >= 0x0000) && (LA10_0 <= '!')) || ((LA10_0 
>= '#') && (LA10_0 <= 0xFFFF))) ) 

                {
                    alt10=1;
                }

            }
            switch (alt10) 
            {
            case 1:
                // C:\\Documents and Settings\\kjambura\\My 
Documents\\parser\\project1.g:243:43: .
                {
                    MATCHANY(); 
                    if  (HASEXCEPTION())
                    {
                        goto ruleSTRINGEx;
                    }


                }
                break;

            default:
                goto loop10;    /* break out of the loop */
                break;
            }
        }
        loop10: ; /* Jump out to here if this rule does not match */

        /* 243:10: QUOTE ( options {greedy=false; } : . )* QUOTE */
        mQUOTE(ctx ); 
        if  (HASEXCEPTION())
        {
            goto ruleSTRINGEx;
        }

        {
            
             setText(getText().substring(0, getText().length())); 
        }

    }

    LEXSTATE->type = _type;

    // This is where rules clean up and exit
    //
    goto ruleSTRINGEx; /* Prevent compiler warnings */
    ruleSTRINGEx: ;

}

Can you please suggest me how to deal with this error.


Thanks,
Jrk



List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From Gordon.Tyler at quest.com  Mon Aug 23 13:36:32 2010
From: Gordon.Tyler at quest.com (Gordon Tyler)
Date: Mon, 23 Aug 2010 13:36:32 -0700
Subject: [antlr-interest] Tree rewrite for paranthesized expression
In-Reply-To: <F2C0B708B7BB4AA1BF022C31EB91C890@KenPC2010>
References: <F2C0B708B7BB4AA1BF022C31EB91C890@KenPC2010>
Message-ID: <1FE9A296676737419A8912A6FD22AE1D028DA13AF6@alvxmbw04.prod.quest.corp>

I believe the way this is done is to create a subrule for the parenthesized expression and assign that to the variable.

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Kenneth Domino
Sent: August 23, 2010 1:59 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Tree rewrite for paranthesized expression

Hi All,

Is there a way to create a variable to reference the nodes
for a parenthesized expression, and use it in a tree rewrite rule?
E.g.,

i_abs
    : i=KI_ABS
    t=(
        (
            K_S16 | K_S32 | K_S64
        ) |
        (
            K_FTZ? K_F32
        ) |
        (
            K_F64
        )
    )
    o=(
        opr_register
        T_COMMA
        opr_register_or_constant
    )
    -> ^($i ^(TREE_TYPE $t) ^(TREE_OPR $o))
    ;

Unfortunately, while Antlr parses and generates a recognizer for the grammar,
this does not work because an exception is generated
(org.antlr.runtime.tree.RewriteEmptyStreamException).

I can rewrite this to bypass the exception and generate a tree, but
it feels more like a hack, since it clutters the grammar with additional
productions, making it harder to read as well:

i_abs
    : i=KI_ABS
    t=xxx
    o=yyy
    -> ^($i ^(TREE_TYPE $t) ^(TREE_OPR $o))
    ;

xxx
 :
 (
        (
            K_S16 | K_S32 | K_S64
        ) |
        (
            K_FTZ? K_F32
        ) |
        (
            K_F64
        )
    )
 ;

yyy
 :
 (
  opr_register
  T_COMMA
  opr_register_or_constant
 )
    ;

BTW, if there isn't anything like this currently in Antlr, it would be nice to add
the syntax in a future release.  The syntax for tree construction needs
some polishing. The syntax for tree rewrite requires
me to duplicate the rule r.h.s. in the rewrite part of the rule.  So,
I have to change the syntax in two places.  My proposal is much cleaner.
Antlr also currently forces one to make a choice between tree rewrite rules and
AST operators. It would be better if they could be used in combination.  For example,
if I wanted to construct a tree without the T_COMMA, it could be
done using the AST "!" operator after the T_COMMA:

i_abs
...
    o=(
        opr_register
        T_COMMA!
        opr_register_or_constant
    )
    -> ^($i ^(TREE_TYPE $t) ^(TREE_OPR $o))
    ;

Ken

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From thomas.nilsson at responsive.se  Mon Aug 23 13:47:22 2010
From: thomas.nilsson at responsive.se (Thomas Nilsson)
Date: Mon, 23 Aug 2010 22:47:22 +0200
Subject: [antlr-interest] Test rig template (Was: Setting input in the
	interpreter)
In-Reply-To: <AANLkTim3qud6jDMB1W4mWYw0ycxa1gePRa98CiUUFSUc@mail.gmail.com>
References: <D9F0F9E0-F839-4C2D-878E-EEB27F32282D@responsive.se>
	<02ff01cb4082$6b50e1a0$41f2a4e0$@temporal-wave.com>
	<094ED3E5-6FD9-4E91-9039-4FF5B1511A8F@responsive.se>
	<F5D6FFF2-3D79-4DA1-A30B-7C2FEA92C229@responsive.se>
	<AANLkTim3qud6jDMB1W4mWYw0ycxa1gePRa98CiUUFSUc@mail.gmail.com>
Message-ID: <B40A3127-F5C6-4311-9CFA-036897BC8FDE@responsive.se>

23 aug 2010 kl. 22.28 skrev A Z:

> ANTLRWorks creates __Test__.java in the outputs path. This creates an
> instance of your parser with a debug port so you cannot run it standalone
> lest it hangs waiting for the debugger. You can simply change the parser
> instance to fix this.
> 

I'm sorry, but I don't really understand this. Or, rather I understand that ANTLRWorks is creating a specialized wrapper around my parser so that it can talk to the debugger. But how does that help me creating and modifying the test rig (as per the dialoges in ANTLRWorks: "Edit the xxx.g Test rig for Java" and my need to instantiate a case-insensitive input stream).

Being a newbie I don't know what steps to take to "simply change the parser instance". Where do I find it? There seems to be very few java files generated at a location that I can find... Do I have to revert to running Antrl from the command line with magic switches? And then build manually? I can do that, but I jumped in at the ANTLRWorks level and thought I could go on working at that level...

Thomas Nilsson, CTO, Agile Mentor
Responsive Development Technologies AB
Web: http://www.responsive.se
Email: thomas.nilsson at responsive.se
Phone: +46 70 561 75 41
Blog: http://www.responsive.se/thomas

> 
> On Mon, Aug 23, 2010 at 3:42 AM, Thomas Nilsson <
> thomas.nilsson at responsive.se> wrote:
> 
>> So, there were no-one that could point me in the right direction about the
>> Test Rig? Is there a template? Does ANTLRWorks/IDE create one that I could
>> start from? If so where would I find it?
>> 
>> (Or maybe this is described in The Book? If so I'll be receiving it in a
>> couple of days...)
>> 
>> 
>> Thomas Nilsson, CTO, Agile Mentor
>> Responsive Development Technologies AB
>> Web: http://www.responsive.se
>> Email: thomas.nilsson at responsive.se
>> Phone: +46 70 561 75 41
>> Blog: http://www.responsive.se/thomas
>> 
>> 20 aug 2010 kl. 21.55 skrev Thomas Nilsson:
>> 
>>> 20 aug 2010 kl. 18.11 skrev Jim Idle:
>>> 
>>>> Did you notice the tab that allows you to change the test rig template?
>>>> 
>>> 
>>> Yes, I did, but it was not easy to find it again, now that I know that I
>> probably need it ;-)
>>> 
>>> I found one on the "Run"-menue and some setting in the Preferences (but
>> no tab). But I don't really know what to make of it. How do I use it? I
>> guess that the "Class" is to indicate a java class to load, and that the
>> classpath should be tweaked accordingly in the
>> Preferences->Compiler->Classpath. Would I lose any system classpaths that I
>> need to explicitly add if I customize it?
>>> 
>>> And finally, the class should be a complete implementation of the test
>> rig. Is there a template somewhere?
>>> 
>>> (All this is in ANTLRWorks 1.4, couldn't find anything similar in
>> ANTLR-IDE, Eclipse 3.6...)
>>> 
>>> Thomas Nilsson, CTO, Agile Mentor
>>> Responsive Development Technologies AB
>>> Web: http://www.responsive.se
>>> Email: thomas.nilsson at responsive.se
>>> Phone: +46 70 561 75 41
>>> Blog: http://www.responsive.se/thomas
>>> 
>>>> Jim
>>>> 
>>>>> -----Original Message-----
>>>>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>>>>> bounces at antlr.org] On Behalf Of Thomas Nilsson
>>>>> Sent: Thursday, August 19, 2010 11:17 PM
>>>>> To: antlr-interest at antlr.org
>>>>> Subject: [antlr-interest] Setting input in the interpreter
>>>>> 
>>>>> Is there a way to set the input stream in the interpreter, either
>>>> ANTLRWorks
>>>>> or ANTLR IDE?
>>>>> 
>>>>> My grammar is case insensitive,  and although there is an example on
>> the
>>>>> Wiki on how to do this for real, I was looking for a way to run my
>>>> numerous
>>>>> test cases in the interpreter before implementing anything else.
>>>>> 
>>>>> Thomas Nilsson, CTO, Agile Mentor
>>>>> Responsive Development Technologies AB
>>>>> Web: http://www.responsive.se
>>>>> Email: thomas.nilsson at responsive.se
>>>>> Phone: +46 70 561 75 41
>>>>> Blog: http://www.responsive.se/thomas
>>>>> 
>>>>> 
>>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>>>>> email-address
>>>> 
>>>> 
>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>> 
>>> 
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>> 
>> 
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From maxgbr at hotmail.it  Mon Aug 23 14:01:00 2010
From: maxgbr at hotmail.it (maxgbr at hotmail.it)
Date: Mon, 23 Aug 2010 21:01:00 +0000
Subject: [antlr-interest] Lexer Rules How to
Message-ID: <COL124-W60D2D548152491230E7B9CB0820@phx.gbl>


Hi, i'm a newbie of Antrl and i have some trouble with the lexer rule.
I want to create a very semplified Oracle syntax parser to get only few informations out of the sql's and i run into this issue [NoViableAltException]in ANTRLWorks when i try to debug this rules:

grant_statement
    :    'GRANT'
    (    grant_system_privilege
    |    grant_object_privilege
    ) 
    ;

grant_object_privilege
    :    privilege[false] (COMMA privilege[false])* 'ON' on_object_clause    
        grantee_clause ('WITH' 'HIERARCHY' 'OPTION')? ('WITH' 'GRANT' 'OPTION')?    
    ;
    
privilege[boolean isSystemPriv]
    :    {isSystemPriv }? priv_sys
    |    {!isSystemPriv}? priv_obj
    ;

priv_obj
    :    IDENTIFIER        // SELECT
    |    IDENTIFIER IDENTIFIER    // CREATE SESSION
    |    'ALL' 'PRIVILEGES'?
        LPAREN IDENTIFIER (COMMA IDENTIFIER)* RPAREN
    ;

priv_sys    
    :    IDENTIFIER+
    |    'ALL' 'PRIVILEGES'
    ;

grant_system_privilege
    :    privilege[true] (COMMA privilege[true])*
        grantee_clause ('IDENTIFIED' 'BY' .+)? ('WITH' 'ADMIN' 'OPTION')?
    ;

grantee_clause
    :    'TO' (IDENTIFIER
    |    'PUBLIC'
    )    (COMMA (IDENTIFIER | 'PUBLIC'))*
    ;

system_privilege
    :    IDENTIFIER
    ;

IDENTIFIER
    :    LETTER (LETTER | DIGIT | '_' )*
    ;    

with this sql         -> GRANT UPDATE , SELECT ON emp_view TO PUBLIC;  <- throw NoViableAltException 
but with this sql   -> GRANT update, SELECTON emp_view TO PUBLIC; <- all goes fine.

i have a token definition for UPDATE like

tokens {
   UPDATE = 'UPDATE';
}

but the update token is used in another rule [update_statement], not in this one.

I cannot figure out why the UPDATE token make my grant priv_obj rule to throw that exception.
How can i solve this problem??

Sorry for my bad english..

Thanks Max
 		 	   		  

From cummings at kjchome.homeip.net  Mon Aug 23 14:27:24 2010
From: cummings at kjchome.homeip.net (Kevin J. Cummings)
Date: Mon, 23 Aug 2010 17:27:24 -0400
Subject: [antlr-interest] Lexer Rules How to
In-Reply-To: <COL124-W60D2D548152491230E7B9CB0820@phx.gbl>
References: <COL124-W60D2D548152491230E7B9CB0820@phx.gbl>
Message-ID: <4C72E7BC.4090705@kjchome.homeip.net>

On 08/23/2010 05:01 PM, maxgbr at hotmail.it wrote:
> 
> Hi, i'm a newbie of Antrl and i have some trouble with the lexer rule.
> I want to create a very semplified Oracle syntax parser to get only few informations out of the sql's and i run into this issue [NoViableAltException]in ANTRLWorks when i try to debug this rules:
> 
> grant_statement
>     :    'GRANT'
>     (    grant_system_privilege
>     |    grant_object_privilege
>     ) 
>     ;
> 
> grant_object_privilege
>     :    privilege[false] (COMMA privilege[false])* 'ON' on_object_clause    
>         grantee_clause ('WITH' 'HIERARCHY' 'OPTION')? ('WITH' 'GRANT' 'OPTION')?    
>     ;
>     
> privilege[boolean isSystemPriv]
>     :    {isSystemPriv }? priv_sys
>     |    {!isSystemPriv}? priv_obj
>     ;
> 
> priv_obj
>     :    IDENTIFIER        // SELECT
>     |    IDENTIFIER IDENTIFIER    // CREATE SESSION
>     |    'ALL' 'PRIVILEGES'?
>         LPAREN IDENTIFIER (COMMA IDENTIFIER)* RPAREN
>     ;
> 
> priv_sys    
>     :    IDENTIFIER+
>     |    'ALL' 'PRIVILEGES'
>     ;
> 
> grant_system_privilege
>     :    privilege[true] (COMMA privilege[true])*
>         grantee_clause ('IDENTIFIED' 'BY' .+)? ('WITH' 'ADMIN' 'OPTION')?
>     ;
> 
> grantee_clause
>     :    'TO' (IDENTIFIER
>     |    'PUBLIC'
>     )    (COMMA (IDENTIFIER | 'PUBLIC'))*
>     ;
> 
> system_privilege
>     :    IDENTIFIER
>     ;
> 
> IDENTIFIER
>     :    LETTER (LETTER | DIGIT | '_' )*
>     ;    
> 
> with this sql         -> GRANT UPDATE , SELECT ON emp_view TO PUBLIC;  <- throw NoViableAltException 

What do you expect UPDATE to match in this input?  You have specified
(below) that UPDATE is the token UPDATE.  If you are expecting it to be
just another IDENTIFIER, then you need to specifically allow it, via a
rule like:

identifier
	: IDENTIFIER
	| UPDATE
	;

And then use identifier (instead of IDENTIFIER) wherever you want UPDATE
to be a valid IDENITIFIER.

BTW, this is a FAQ.  Reserved words ve keywords.

> but with this sql   -> GRANT update, SELECTON emp_view TO PUBLIC; <- all goes fine.
> 
> i have a token definition for UPDATE like
> 
> tokens {
>    UPDATE = 'UPDATE';
> }
> 
> but the update token is used in another rule [update_statement], not in this one.
> 
> I cannot figure out why the UPDATE token make my grant priv_obj rule to throw that exception.
> How can i solve this problem??

> Sorry for my bad english..
> 
> Thanks Max
>  		 	   		  
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


-- 
Kevin J. Cummings
kjchome at rcn.com
cummings at kjchome.homeip.net
cummings at kjc386.framingham.ma.us
Registered Linux User #1232 (http://counter.li.org)

From cummings at kjchome.homeip.net  Mon Aug 23 15:25:50 2010
From: cummings at kjchome.homeip.net (Kevin J. Cummings)
Date: Mon, 23 Aug 2010 18:25:50 -0400
Subject: [antlr-interest] Lexer Rules How to
In-Reply-To: <COL124-W2988184635EDA642988234B0820@phx.gbl>
References: <COL124-W60D2D548152491230E7B9CB0820@phx.gbl>,
	<4C72E7BC.4090705@kjchome.homeip.net>
	<COL124-W2988184635EDA642988234B0820@phx.gbl>
Message-ID: <4C72F56E.9000704@kjchome.homeip.net>

On 08/23/2010 05:48 PM, maxgbr at hotmail.it wrote:
> Thanks for the reply, i'm sorry for the stupid question but i did not
> find a correct answer in the FAQ's (maybe i've to read better).

I didn't say it was in the FAQs, I said it *was* a FAQ.  Just because
someone publishes a list of Frequently Asked Questions, doesn't mean
that they are the only ones that get asked frequently.  I agree that it
should be added to the list, but that is the decision of the WWW page
maintainer.

> Your reply let me understand how to fix my problem.
> You write "What do you expect UPDATE to match in this input?" but i was
> expecting that UPDATE tokens were treatead as an IDENTIFIER because int
> my grant_system_privilege or grant_object_privilege UPDATE token was not
> present.

Glad I could help you find a solution.

> Thanks Max

-- 
Kevin J. Cummings
kjchome at rcn.com
cummings at kjchome.homeip.net
cummings at kjc386.framingham.ma.us
Registered Linux User #1232 (http://counter.li.org)

From qsmgmt at earthlink.net  Mon Aug 23 17:23:27 2010
From: qsmgmt at earthlink.net (Alan Lehotsky)
Date: Mon, 23 Aug 2010 20:23:27 -0400
Subject: [antlr-interest] Collecting a string of tokens...
Message-ID: <0890B314-5D12-43AD-88FE-44D2B5C2732F@earthlink.net>

I'm working with the PLSQL.g grammar present on the antlr website.

It has a production that looks like


swallow_to_semi :  { ^ SEMI }+;

The parser that this generates ends up producing a series of tokens representing everything after (say) a SELECT statement.  I would rather have a single TOKEN containing all the characters in the body of the select.

I tried variations on


SQL_BODY : { ^ SEMI }+;


but that just leads to a variety of conflicts; and a fragment rule did not end up helping me either.  I've looked in both the Antlr Book and in the Compiler Patterns book without finding anything that seemed relevant....

Thanks,



From Enrique.PradosValiente at reale.es  Tue Aug 24 01:27:44 2010
From: Enrique.PradosValiente at reale.es (Prados Valiente Enrique)
Date: Tue, 24 Aug 2010 10:27:44 +0200
Subject: [antlr-interest] AST construction - tree (samples)
Message-ID: <931DCC17C6D7A849AEE684BF5B13E199EFF403@BLPOSTIN.reale.net>

Hi all,

I attached updated gramar from Andrew Haritonkin.

In this grammar there are no instructions for AST construction. That means that ANTLR will create just a plain list of tokens. I need a nice tree.

Any sample grammar using instructions for AST construction, for generate tree ??

Please, any help will be very appreciated.

Thanks in advanced.

 
>
>
>Read wiki pages and documentation on antlr.org to know how to use generated parser in your application.

In this grammar there are no instructions for AST construction. That means that ANTLR will create just a plain list of tokens. If you want a nice tree you have to do that yourself.

Also PL/SQL is case insensitive language. How to make case insensitive parser with ANTLR v3 you can find here:
http://www.antlr.org/wiki/pages/viewpage.action?pageId=1782
Class ANTLRNoCaseFileStream is what you need, or similar one for string stream.

Here is an example how to parser array of statements:

            foreach(string statement in statements)
            {
                PLSQL3Lexer lexer = new PLSQL3Lexer(null);
                PLSQL3Parser parser = new PLSQL3Parser(null);

                try
                {
                    ICharStream input = new CaseInsensitiveStringStream(statement);
                    lexer.CharStream = input;
                    CommonTokenStream tokens = new CommonTokenStream(lexer);
                    parser.TokenStream = tokens;
                    parser.start_rule();
                }
                catch (Exception exc)
                {
                    IToken token = parser.TokenStream.LT(1);
                    System.Console.WriteLine("Exception:\n{0}",
String.Format("{0}:{1} at '{2}'({3}): {4}", token.Line, token.CharPositionInLine, token.Text, token.Type, exc.ToString()));
                    errors++;
                }

Hope it helps,
Andrew

On Fri, Aug 20, 2010 at 9:56 AM, Prados Valiente Enrique <Enrique.PradosValiente at reale.es> wrote:
> Hi all,
>
>
>
>
>
> I use AntlrWorks 1.4, and open PLSQL3.g file and do Generate -> 
> Generate Code
>
>
>
> And I get this error:
>
>
>
> [09:46:44] error(206): PLSQL3.g:791:4: Alternative 2: after matching 
> input such as ID DOT ID DOT ID DOT ID DOT decision cannot predict what 
> comes next due to recursion overflow to expr_add from sql_expression 
> and to expr_mul from expr_add
>
>
>
> Log file is hs_err_pid5036.log
>
>
>
>
>
>
>
> Now, I test with Antlr3.exe (.net) from here
>
>
>
> ANTLR Tool Binaries
>
> ANTLR v3.1.x binaries for .NET framework. No dependence on the Java runtime.
> antlr3.exe and StringTemplate and ANTLR runtime libraries it depends on.
> Completely independent version written by Sam Harwell (ported from Java).
>
>
>
> I execute this command
>
> E:\Trabajo\SqlParser\ANTLR\ANTLR-3.1-2009-06-28>Antlr3.exe
> E:\Trabajo\SqlParser\
>
> ANTLR\plsql3.g
>
>
>
> But I get this error:
>
>
>
> error(10):? internal error:? : System.Exception: Error parsing 
> E:\Trabajo\SqlPar
>
> ser\ANTLR\plsql3.g: 'backtrack' not expected ';'
>
> ?? en Antlr3.Tool.GrammarSpelunker.Match(String expecting) en 
> c:\dev\stringtempl
>
> ate_main\antlrcs\main\Antlr3\Tool\GrammarSpelunker.cs:l?nea 89
>
> ? ?en Antlr3.Tool.GrammarSpelunker.Options() en 
> c:\dev\stringtemplate_main\antlr
>
> cs\main\Antlr3\Tool\GrammarSpelunker.cs:l?nea 155
>
> ?? en Antlr3.Tool.GrammarSpelunker.Parse() en 
> c:\dev\stringtemplate_main\antlrcs
>
> \main\Antlr3\Tool\GrammarSpelunker.cs:l?nea 112
>
> ?? en Antlr3.AntlrTool.SortGrammarFiles() en 
> c:\dev\stringtemplate_main\antlrcs\
>
> main\Antlr3\AntlrTool.cs:l?nea 595
>
> ?? en Antlr3.AntlrTool.Process() en
> c:\dev\stringtemplate_main\antlrcs\main\Antl
>
> r3\AntlrTool.cs:l?nea 431
>
> Match at offset 258 in file:line:column 
> c:\dev\stringtemplate_main\antlrcs\main\
>
> Antlr3\Tool\GrammarSpelunker.cs:89:17
>
>
>
> Options at offset 89 in file:line:column 
> c:\dev\stringtemplate_main\antlrcs\main
>
> \Antlr3\Tool\GrammarSpelunker.cs:155:17
>
>
>
> Parse at offset 332 in file:line:column 
> c:\dev\stringtemplate_main\antlrcs\main\
>
> Antlr3\Tool\GrammarSpelunker.cs:112:21
>
>
>
> SortGrammarFiles at offset 166 in file:line:column 
> c:\dev\stringtemplate_main\an
>
> tlrcs\main\Antlr3\AntlrTool.cs:595:17
>
>
>
> Process at offset 91 in file:line:column 
> c:\dev\stringtemplate_main\antlrcs\main
>
> \Antlr3\AntlrTool.cs:431:17
>
>
>
> error(8):? file E:\Trabajo\SqlParser\ANTLR\plsql3.g contains grammar 
> PLSQL3; nam
>
> es must be identical
>
> warning(200): E:\Trabajo\SqlParser\ANTLR\plsql3.g:776:3: Decision can 
> match inpu
>
> t such as "{'ASC', 'DESC'}" using multiple alternatives: 1, 2
>
> As a result, alternative(s) 2 were disabled for that input
>
> error(206): E:\Trabajo\SqlParser\ANTLR\plsql3.g:791:4: Alternative 2: 
> after matc
>
> hing input such as ID DOT ID DOT ID DOT ID DOT decision cannot predict 
> what come
>
> s next due to recursion overflow to expr_add from sql_expression and 
> to expr_mul
>
> ?from expr_add
>
>
>
>
>
> any solution please ?????
>
>
>
> Thanks in advanced
-------------- next part --------------
A non-text attachment was scrubbed...
Name: PLSQL3.g
Type: application/octet-stream
Size: 41747 bytes
Desc: PLSQL3.g
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20100824/a4073065/attachment.obj 

From Nieves.Salor.Moral at esa.int  Tue Aug 24 02:37:43 2010
From: Nieves.Salor.Moral at esa.int (Nieves.Salor.Moral at esa.int)
Date: Tue, 24 Aug 2010 11:37:43 +0200
Subject: [antlr-interest]  Parse-tree Reference to father rule
Message-ID: <OF489A5CCB.07F78DB2-ONC1257789.00338A18-C1257789.0034E815@esa.int>

Hi guys!!

Sorry to bother you again!!

I have already managed to get the syntax-highlighting and error management 
done :D ( I am still fighting with the code-folding in netbeans), and now 
I am building the tree grammar before creating the string templates.

And I have come across a question, that maybe is stupid, but I don't find 
any reference in the books or internet.

My problem is, that I have rules like these:

relational_expression
  : term comparative_expression?
  ;
comparative_expression
  : RELATIONAL_OPERATOR term
  | 'between' a=term POSITIVE_LOG_OPERATOR b=term -> ^('between' $a $b)
  | 'within'constant MOD_SIGN? OF_LINK term -> ^('within' constant 
MOD_SIGN? term) //(engineering_units| '%')? 
  | IN_TAG OPEN_PARENTHESIS term (COMMA term)+ CLOSE_PARENTHESIS -> ^(
IN_TAG term+)
  ;

where RELATIONAL_OPERATOR can be '!='|'<='|'>='.

so when I create the tree grammar, I would like to have a tree similar so 
^(RELATIONAL_OPERATOR term1 term2), for example.

This opens the following possibilities:
1)I access the child tree in relational_expression rule and later one I 
changed it depending on the tree that I get (so I would have to add as 
many checks as possibilities has the child rule) 
2)I access the father first element tree in comparative_expression and, 
later in the father I assign the father tree as the child tree, but If I 
have another rule that also calls this child rule, I cannot do this.

I think neither option is really good, any inputs? 

Thanks in advance

Nieves


From jimi at temporal-wave.com  Tue Aug 24 11:02:33 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 24 Aug 2010 11:02:33 -0700
Subject: [antlr-interest] Would someone please be so kind...
In-Reply-To: <i50erc$qcv$1@dough.gmane.org>
References: <i50erc$qcv$1@dough.gmane.org>
Message-ID: <01f301cb43b6$8702d610$95088230$@temporal-wave.com>

I just restarted it - it takes a few minutes to get going. 

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Gary
> Sent: Tuesday, August 24, 2010 5:44 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Would someone please be so kind...
> 
> ...as to kick the webserver @ www.antlr.org. Thanks.
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From jimi at temporal-wave.com  Tue Aug 24 11:27:46 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 24 Aug 2010 11:27:46 -0700
Subject: [antlr-interest] Parse-tree Reference to father rule
In-Reply-To: <OF489A5CCB.07F78DB2-ONC1257789.00338A18-C1257789.0034E815@esa.int>
References: <OF489A5CCB.07F78DB2-ONC1257789.00338A18-C1257789.0034E815@esa.int>
Message-ID: <022201cb43ba$0cbfde30$263f9a90$@temporal-wave.com>

This tends to indicate that you have copied the language definition verbatim
from some written form that was written with  LALR parser in mind (if it had
any in mind). You have to restructure this in to an LL tree and then you
will find that ambiguities go away and that the AST build comes naturally
out of the parsing structure.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Nieves.Salor.Moral at esa.int
> Sent: Tuesday, August 24, 2010 2:38 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Parse-tree Reference to father rule
> 
> Hi guys!!
> 
> Sorry to bother you again!!
> 
> I have already managed to get the syntax-highlighting and error
> management done :D ( I am still fighting with the code-folding in
netbeans),
> and now I am building the tree grammar before creating the string
> templates.
> 
> And I have come across a question, that maybe is stupid, but I don't find
any
> reference in the books or internet.
> 
> My problem is, that I have rules like these:
> 
> relational_expression
>   : term comparative_expression?
>   ;
> comparative_expression
>   : RELATIONAL_OPERATOR term
>   | 'between' a=term POSITIVE_LOG_OPERATOR b=term -> ^('between' $a
> $b)
>   | 'within'constant MOD_SIGN? OF_LINK term -> ^('within' constant
> MOD_SIGN? term) //(engineering_units| '%')?
>   | IN_TAG OPEN_PARENTHESIS term (COMMA term)+ CLOSE_PARENTHESIS
> -> ^( IN_TAG term+)
>   ;
> 
> where RELATIONAL_OPERATOR can be '!='|'<='|'>='.
> 
> so when I create the tree grammar, I would like to have a tree similar so
> ^(RELATIONAL_OPERATOR term1 term2), for example.
> 
> This opens the following possibilities:
> 1)I access the child tree in relational_expression rule and later one I
changed
> it depending on the tree that I get (so I would have to add as many checks
as
> possibilities has the child rule) 2)I access the father first element tree
in
> comparative_expression and, later in the father I assign the father tree
as
> the child tree, but If I have another rule that also calls this child
rule, I cannot
> do this.
> 
> I think neither option is really good, any inputs?
> 
> Thanks in advance
> 
> Nieves
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From antlr at garydjones.name  Tue Aug 24 11:58:27 2010
From: antlr at garydjones.name (gary)
Date: Tue, 24 Aug 2010 20:58:27 +0200
Subject: [antlr-interest] Would someone please be so kind...
References: <i50erc$qcv$1@dough.gmane.org>
	<01f301cb43b6$8702d610$95088230$@temporal-wave.com>
Message-ID: <83wrrfltws.fsf@garydjones.name>

Jim Idle wrote:

> I just restarted it - it takes a few minutes to get going. 

Thx. It had been out for several hours (from at least 8am until 14:45 my
time).


From jrk1987 at yahoo.co.in  Tue Aug 24 15:00:11 2010
From: jrk1987 at yahoo.co.in (J.R Karthikeyan)
Date: Wed, 25 Aug 2010 03:30:11 +0530 (IST)
Subject: [antlr-interest] Error handling in C
Message-ID: <138075.12721.qm@web94612.mail.in2.yahoo.com>

Hi,

  I am looking to add error handling to the project. I saw the example in 
tutotial (5 min introduction) and other downloadable example. I don't find any 
example that tells how to do the error handling for C target. I need to print 
the error message in console, like suppose the user miss the semicolon I can say 
that "Expected ; found XXX ". Can anyone tell me where I can find information 
about this or any good example.

Thanks a lot,
Jrk



From matthew.pocock at ncl.ac.uk  Tue Aug 24 15:17:27 2010
From: matthew.pocock at ncl.ac.uk (Matthew Pocock)
Date: Tue, 24 Aug 2010 23:17:27 +0100
Subject: [antlr-interest] stg files in intellij
Message-ID: <AANLkTi=n5qKBjOsR608+Zk3LCq+YPBPJ5t_gtjvc61C8@mail.gmail.com>

Hi,

I have just installed the ANTLRWorks plugin for Intellij Idea. It recognises
the grammar files. However, it doesn't seem to be associated with the stg
files. Should I just tell Intellij to open stg files using ANTLRWorks, or is
there some other trickery I need to do?

I'm thinking of playing about with Scala code generation. I realise that I
can use the Java generated code, but from Scala it feels very java-ish, and
don't allow me to take advantage of the nice Scala syntax features, such as
case classes. However, to do this it would be really helpful to edit the stg
files as something richer than plain text :)

Thanks,

Matthew

From jimi at temporal-wave.com  Tue Aug 24 16:49:05 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 24 Aug 2010 16:49:05 -0700
Subject: [antlr-interest] Error handling in C
In-Reply-To: <138075.12721.qm@web94612.mail.in2.yahoo.com>
References: <138075.12721.qm@web94612.mail.in2.yahoo.com>
Message-ID: <02b201cb43e6$efafdc50$cf0f94f0$@temporal-wave.com>

Read the source code for displayRecognitionError() and read the API
documentation.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of J.R Karthikeyan
> Sent: Tuesday, August 24, 2010 3:00 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Error handling in C
> 
> Hi,
> 
>   I am looking to add error handling to the project. I saw the example in
> tutotial (5 min introduction) and other downloadable example. I don't find
> any example that tells how to do the error handling for C target. I need
to
> print the error message in console, like suppose the user miss the
semicolon
> I can say that "Expected ; found XXX ". Can anyone tell me where I can
find
> information about this or any good example.
> 
> Thanks a lot,
> Jrk
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From jrk1987 at yahoo.co.in  Tue Aug 24 18:26:16 2010
From: jrk1987 at yahoo.co.in (J.R Karthikeyan)
Date: Wed, 25 Aug 2010 06:56:16 +0530 (IST)
Subject: [antlr-interest] VS2005 and VS2008 problem
Message-ID: <47483.77126.qm@web94606.mail.in2.yahoo.com>

Hi,

   My entire project is done in VS2005 which will create dll and later I will 
use those dll. I am creating the parser using ANTLR and those file I am planned 
to add it as a function in my project which is in VS2005. When I compiled ANTLR 
generated file seperatly in VS2005 I don't have any problem. Even when I 
combined and built with my project, it is fine. But when my dll calls 
antlr3cd.dll which in turn it callsMSVCR90D.dll. It looks that dll is VS2008 
dll. Any suggestion how to get rid of this. 



From kferrio at gmail.com  Tue Aug 24 20:22:38 2010
From: kferrio at gmail.com (kferrio at gmail.com)
Date: Wed, 25 Aug 2010 03:22:38 +0000
Subject: [antlr-interest] VS2005 and VS2008 problem
Message-ID: <39019292-1282706558-cardhu_decombobulator_blackberry.rim.net-1374536685-@bda428.bisx.prod.on.blackberry>

I believe you have two options.  You might prefer to recompile the antlr runtime DLL with vs2005 If your goal is minimizing dependencies.  Alternatively you could just drop the  redistributable C runtime from vs2008 into your packaging.  Unfortunately there's quite a bit of confusion on this point specific to msvcr9 due to some unclear release communications.  But if you use the runtime redist kit which actually ships with vs2008 you should be ok.  You may be able to get the redist from the express edition of vs2008 but you'll have to check that.

Good luck!

------Original Message------
From: J.R Karthikeyan
Sender: antlr-interest-bounces at antlr.org
To: antlr-interest at antlr.org
Subject: [antlr-interest] VS2005 and VS2008 problem
Sent: Aug 24, 2010 6:26 PM

Hi,

   My entire project is done in VS2005 which will create dll and later I will 
use those dll. I am creating the parser using ANTLR and those file I am planned 
to add it as a function in my project which is in VS2005. When I compiled ANTLR 
generated file seperatly in VS2005 I don't have any problem. Even when I 
combined and built with my project, it is fine. But when my dll calls 
antlr3cd.dll which in turn it callsMSVCR90D.dll. It looks that dll is VS2008 
dll. Any suggestion how to get rid of this. 



List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


Sent from my Verizon Wireless BlackBerry

From k_sarnath at hcl.com  Wed Aug 25 01:43:37 2010
From: k_sarnath at hcl.com (Sarnath K - ERS, HCLTech)
Date: Wed, 25 Aug 2010 14:13:37 +0530
Subject: [antlr-interest] Confusion: Understanding gap or Tree Grammar
	Bug
In-Reply-To: <B3F91E1013C53E4B9840FEAD0F12BAAD277E2A2169@CHN-HCLT-EVS08.HCLT.CORP.HCL.IN>
References: <B3F91E1013C53E4B9840FEAD0F12BAAD277E2A2169@CHN-HCLT-EVS08.HCLT.CORP.HCL.IN>
Message-ID: <B3F91E1013C53E4B9840FEAD0F12BAAD29945D55F6@CHN-HCLT-EVS08.HCLT.CORP.HCL.IN>

Hi There,

Can some1 help me with this, please? Thanks!

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Sarnath K - ERS, HCLTech
Sent: Friday, August 20, 2010 2:23 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Confusion: Understanding gap or Tree Grammar Bug

Grammar to parse the "Hi" statement of this e-mail:
---------------------------------------------------
all: cM | cF | 'There';
cM: 'Chitparan'; // Sanskrit word meaning "One who inspires the mind" - Male 
cF: 'Chitpari';  // Sanskrit word meaning "One who inspires the mind" - Female 
---------------------------------------------------

Hi "all",

We are new to ANTLR and we all love this tool! Thanks to Terrence!  \__/

We are trying to write a C2C converter. 
However, we are stuck with the handling of the "block statement" in the Tree Grammar part.
Though we have a workaround, we would like to know whether this is an ANTLR bug (or) a gap in our understanding.

I have written a concise grammar that captures the problem. Kindly see the attachment.

The problem is very simple:
A compound statement is a 'statement' that starts with '{', has zero or more variable declarations, followed by zero or more 'statements' and ends with '}'
In the grammar above, 'v' stands for variable declaration, 's' stands for a statement.

When I run this project , I get the following output.
-------------------------------
Console
-------------------------------
{vs{s}}
Tree = ({ v s ({ s }) })
Tree Grammar Output =  {vs{vs} }
--------------------------------

Now look at "Tree Grammar Output". It carries over the "v" from the previous level.
However if I re-write the grammar as below, I don't have this problem.

b->'{' '}'
  | '{' v '}'
  | '{' s '}'
  | '{' v+ s+ '}'

Kindly advice me on what is the right way to do things!
Are we missing something? (like... RTFM?)

Thanks,
Best Regards,
Sarnath

From Vincent.Hoogendoorn at macaw.nl  Wed Aug 25 03:45:10 2010
From: Vincent.Hoogendoorn at macaw.nl (Vincent Hoogendoorn)
Date: Wed, 25 Aug 2010 10:45:10 +0000
Subject: [antlr-interest] How to get stringtemplate output from all rules in
 a simple grammar? Parser only returns stringtemplate output from main rule.
Message-ID: <DC000CD1B68FBD43887492B4C45FAB9419AF13@srv-i-mail-1.macaw.nl>

In a simple  Antlr 3.2 grammar with option output = 'template' I can get the output from the stringtemplate of the main rule like this:

Rule:
  Main : rootStatement* -> template() "Main";

Code:
  r = parser.main();
  output = r.ST.ToString();

Other rules fire as well and they have stringtemplates as well, but I don't know how to get at their output.
What am I missing?

From Enrique.PradosValiente at reale.es  Wed Aug 25 04:35:33 2010
From: Enrique.PradosValiente at reale.es (Prados Valiente Enrique)
Date: Wed, 25 Aug 2010 13:35:33 +0200
Subject: [antlr-interest] Tree grammar error
Message-ID: <931DCC17C6D7A849AEE684BF5B13E199EFF426@BLPOSTIN.reale.net>

Hi all,

 

I use Antlr3.exe (C# Runtime) and PLSQL3.g file  (attached),

 

I try generate tree grammar, and I get this error:

 

Any suggestions, please ?

 

[13:27:03] error(3):  cannot find tokens file
E:\TreeGrammar\output\block.tokens

[13:27:03] error(102): PLSQL3.g:1509:1: lexer rule QUOTED_STRING not
allowed in parser

[13:27:03] error(102): PLSQL3.g:1512:1: lexer rule ID not allowed in
parser

[13:27:03] error(102): PLSQL3.g:1516:1: lexer rule SEMI not allowed in
parser

[13:27:03] error(102): PLSQL3.g:1519:1: lexer rule COLON not allowed in
parser

[13:27:03] error(102): PLSQL3.g:1522:1: lexer rule DOUBLEDOT not allowed
in parser

[13:27:03] error(102): PLSQL3.g:1525:1: lexer rule DOT not allowed in
parser

[13:27:03] error(102): PLSQL3.g:1529:1: lexer rule POINT not allowed in
parser

[13:27:03] error(102): PLSQL3.g:1532:1: lexer rule COMMA not allowed in
parser

[13:27:03] error(102): PLSQL3.g:1535:1: lexer rule EXPONENT not allowed
in parser

[13:27:03] error(102): PLSQL3.g:1538:1: lexer rule ASTERISK not allowed
in parser

[13:27:03] error(102): PLSQL3.g:1541:1: lexer rule AT_SIGN not allowed
in parser

[13:27:03] error(102): PLSQL3.g:1544:1: lexer rule RPAREN not allowed in
parser

[13:27:03] error(102): PLSQL3.g:1547:1: lexer rule LPAREN not allowed in
parser

[13:27:03] error(102): PLSQL3.g:1550:1: lexer rule RBRACK not allowed in
parser

[13:27:03] error(102): PLSQL3.g:1553:1: lexer rule LBRACK not allowed in
parser

[13:27:03] error(102): PLSQL3.g:1556:1: lexer rule PLUS not allowed in
parser

[13:27:03] error(102): PLSQL3.g:1559:1: lexer rule MINUS not allowed in
parser

[13:27:03] error(102): PLSQL3.g:1562:1: lexer rule DIVIDE not allowed in
parser

[13:27:03] error(102): PLSQL3.g:1565:1: lexer rule EQ not allowed in
parser

[13:27:03] error(102): PLSQL3.g:1568:1: lexer rule PERCENTAGE not
allowed in parser

[13:27:03] error(102): PLSQL3.g:1571:1: lexer rule LLABEL not allowed in
parser

[13:27:03] error(102): PLSQL3.g:1574:1: lexer rule RLABEL not allowed in
parser

[13:27:03] error(102): PLSQL3.g:1577:1: lexer rule ASSIGN not allowed in
parser

[13:27:03] error(102): PLSQL3.g:1580:1: lexer rule ARROW not allowed in
parser

[13:27:03] error(102): PLSQL3.g:1583:1: lexer rule VERTBAR not allowed
in parser

[13:27:03] error(102): PLSQL3.g:1586:1: lexer rule DOUBLEVERTBAR not
allowed in parser

[13:27:03] error(102): PLSQL3.g:1589:1: lexer rule NOT_EQ not allowed in
parser

[13:27:03] error(102): PLSQL3.g:1592:1: lexer rule LTH not allowed in
parser

[13:27:03] error(102): PLSQL3.g:1595:1: lexer rule LEQ not allowed in
parser

[13:27:03] error(102): PLSQL3.g:1598:1: lexer rule GTH not allowed in
parser

[13:27:03] error(102): PLSQL3.g:1601:1: lexer rule GEQ not allowed in
parser

[13:27:03] error(102): PLSQL3.g:1604:1: lexer rule NUMBER not allowed in
parser

[13:27:03] error(102): PLSQL3.g:1613:1: lexer rule N not allowed in
parser

[13:27:03] error(102): PLSQL3.g:1616:1: lexer rule QUOTE not allowed in
parser

[13:27:03] error(102): PLSQL3.g:1620:1: lexer rule DOUBLEQUOTED_STRING
not allowed in parser

[13:27:03] error(102): PLSQL3.g:1623:1: lexer rule WS not allowed in
parser

[13:27:03] error(102): PLSQL3.g:1625:1: lexer rule SL_COMMENT not
allowed in parser

[13:27:03] error(102): PLSQL3.g:1628:1: lexer rule ML_COMMENT not
allowed in parser

[13:27:03] error(102): PLSQL3.g:1631:1: lexer rule TYPE_ATTR not allowed
in parser

[13:27:03] error(102): PLSQL3.g:1634:1: lexer rule ROWTYPE_ATTR not
allowed in parser

[13:27:03] error(102): PLSQL3.g:1637:1: lexer rule NOTFOUND_ATTR not
allowed in parser

[13:27:03] error(102): PLSQL3.g:1640:1: lexer rule FOUND_ATTR not
allowed in parser

[13:27:03] error(102): PLSQL3.g:1643:1: lexer rule ISOPEN_ATTR not
allowed in parser

[13:27:03] error(102): PLSQL3.g:1646:1: lexer rule ROWCOUNT_ATTR not
allowed in parser

[13:27:03] error(102): PLSQL3.g:1649:1: lexer rule BULK_ROWCOUNT_ATTR
not allowed in parser

[13:27:03] error(102): PLSQL3.g:1652:1: lexer rule CHARSET_ATTR not
allowed in parser

 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: PLSQL3.g
Type: application/octet-stream
Size: 42043 bytes
Desc: PLSQL3.g
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20100825/043128f1/attachment.obj 

From k_sarnath at hcl.com  Wed Aug 25 04:39:00 2010
From: k_sarnath at hcl.com (Sarnath K - ERS, HCLTech)
Date: Wed, 25 Aug 2010 17:09:00 +0530
Subject: [antlr-interest] Tree grammar error
In-Reply-To: <931DCC17C6D7A849AEE684BF5B13E199EFF426@BLPOSTIN.reale.net>
References: <931DCC17C6D7A849AEE684BF5B13E199EFF426@BLPOSTIN.reale.net>
Message-ID: <B3F91E1013C53E4B9840FEAD0F12BAAD29945D576D@CHN-HCLT-EVS08.HCLT.CORP.HCL.IN>

"cannot find tokens file E:\TreeGrammar\output\block.tokens"

-- I think that's the principal error msg. If you fix it, you should be all right.


DISCLAIMER:
-----------------------------------------------------------------------------------------------------------------------

The contents of this e-mail and any attachment(s) are confidential and intended for the named recipient(s) only. 
It shall not attach any liability on the originator or HCL or its affiliates. Any views or opinions presented in 
this email are solely those of the author and may not necessarily reflect the opinions of HCL or its affiliates. 
Any form of reproduction, dissemination, copying, disclosure, modification, distribution and / or publication of 
this message without the prior written consent of the author of this e-mail is strictly prohibited. If you have 
received this email in error please delete it and notify the sender immediately. Before opening any mail and 
attachments please check them for viruses and defect.

-----------------------------------------------------------------------------------------------------------------------

From Enrique.PradosValiente at reale.es  Wed Aug 25 04:42:09 2010
From: Enrique.PradosValiente at reale.es (Prados Valiente Enrique)
Date: Wed, 25 Aug 2010 13:42:09 +0200
Subject: [antlr-interest] Tree grammar error
In-Reply-To: <B3F91E1013C53E4B9840FEAD0F12BAAD29945D576D@CHN-HCLT-EVS08.HCLT.CORP.HCL.IN>
References: <931DCC17C6D7A849AEE684BF5B13E199EFF426@BLPOSTIN.reale.net>
	<B3F91E1013C53E4B9840FEAD0F12BAAD29945D576D@CHN-HCLT-EVS08.HCLT.CORP.HCL.IN>
Message-ID: <931DCC17C6D7A849AEE684BF5B13E199EFF427@BLPOSTIN.reale.net>

I copy file tokens but get the same error like this:

[13:27:03] error(102): PLSQL3.g:1509:1: lexer rule QUOTED_STRING not allowed in parser
[13:27:03] error(102): PLSQL3.g:1512:1: lexer rule ID not allowed in parser
[13:27:03] error(102): PLSQL3.g:1516:1: lexer rule SEMI not allowed in parser
[13:27:03] error(102): PLSQL3.g:1519:1: lexer rule COLON not allowed in parser
[13:27:03] error(102): PLSQL3.g:1522:1: lexer rule DOUBLEDOT not allowed in parser
[13:27:03] error(102): PLSQL3.g:1525:1: lexer rule DOT not allowed in parser
[13:27:03] error(102): PLSQL3.g:1529:1: lexer rule POINT not allowed in parser
[13:27:03] error(102): PLSQL3.g:1532:1: lexer rule COMMA not allowed in parser
[13:27:03] error(102): PLSQL3.g:1535:1: lexer rule EXPONENT not allowed in parser
[13:27:03] error(102): PLSQL3.g:1538:1: lexer rule ASTERISK not allowed in parser
[13:27:03] error(102): PLSQL3.g:1541:1: lexer rule AT_SIGN not allowed in parser
[13:27:03] error(102): PLSQL3.g:1544:1: lexer rule RPAREN not allowed in parser
[13:27:03] error(102): PLSQL3.g:1547:1: lexer rule LPAREN not allowed in parser
[13:27:03] error(102): PLSQL3.g:1550:1: lexer rule RBRACK not allowed in parser
[13:27:03] error(102): PLSQL3.g:1553:1: lexer rule LBRACK not allowed in parser
[13:27:03] error(102): PLSQL3.g:1556:1: lexer rule PLUS not allowed in parser
[13:27:03] error(102): PLSQL3.g:1559:1: lexer rule MINUS not allowed in parser
[13:27:03] error(102): PLSQL3.g:1562:1: lexer rule DIVIDE not allowed in parser
[13:27:03] error(102): PLSQL3.g:1565:1: lexer rule EQ not allowed in parser
[13:27:03] error(102): PLSQL3.g:1568:1: lexer rule PERCENTAGE not allowed in parser
[13:27:03] error(102): PLSQL3.g:1571:1: lexer rule LLABEL not allowed in parser
[13:27:03] error(102): PLSQL3.g:1574:1: lexer rule RLABEL not allowed in parser
[13:27:03] error(102): PLSQL3.g:1577:1: lexer rule ASSIGN not allowed in parser
[13:27:03] error(102): PLSQL3.g:1580:1: lexer rule ARROW not allowed in parser
[13:27:03] error(102): PLSQL3.g:1583:1: lexer rule VERTBAR not allowed in parser
[13:27:03] error(102): PLSQL3.g:1586:1: lexer rule DOUBLEVERTBAR not allowed in parser
[13:27:03] error(102): PLSQL3.g:1589:1: lexer rule NOT_EQ not allowed in parser
[13:27:03] error(102): PLSQL3.g:1592:1: lexer rule LTH not allowed in parser
[13:27:03] error(102): PLSQL3.g:1595:1: lexer rule LEQ not allowed in parser
[13:27:03] error(102): PLSQL3.g:1598:1: lexer rule GTH not allowed in parser
[13:27:03] error(102): PLSQL3.g:1601:1: lexer rule GEQ not allowed in parser
[13:27:03] error(102): PLSQL3.g:1604:1: lexer rule NUMBER not allowed in parser
[13:27:03] error(102): PLSQL3.g:1613:1: lexer rule N not allowed in parser
[13:27:03] error(102): PLSQL3.g:1616:1: lexer rule QUOTE not allowed in parser
[13:27:03] error(102): PLSQL3.g:1620:1: lexer rule DOUBLEQUOTED_STRING not allowed in parser
[13:27:03] error(102): PLSQL3.g:1623:1: lexer rule WS not allowed in parser
[13:27:03] error(102): PLSQL3.g:1625:1: lexer rule SL_COMMENT not allowed in parser
[13:27:03] error(102): PLSQL3.g:1628:1: lexer rule ML_COMMENT not allowed in parser
[13:27:03] error(102): PLSQL3.g:1631:1: lexer rule TYPE_ATTR not allowed in parser
[13:27:03] error(102): PLSQL3.g:1634:1: lexer rule ROWTYPE_ATTR not allowed in parser
[13:27:03] error(102): PLSQL3.g:1637:1: lexer rule NOTFOUND_ATTR not allowed in parser
[13:27:03] error(102): PLSQL3.g:1640:1: lexer rule FOUND_ATTR not allowed in parser
[13:27:03] error(102): PLSQL3.g:1643:1: lexer rule ISOPEN_ATTR not allowed in parser
[13:27:03] error(102): PLSQL3.g:1646:1: lexer rule ROWCOUNT_ATTR not allowed in parser
[13:27:03] error(102): PLSQL3.g:1649:1: lexer rule BULK_ROWCOUNT_ATTR not allowed in parser
[13:27:03] error(102): PLSQL3.g:1652:1: lexer rule CHARSET_ATTR not allowed in parser


-----Mensaje original-----
De: Sarnath K - ERS, HCLTech [mailto:k_sarnath at hcl.com] 
Enviado el: mi?rcoles, 25 de agosto de 2010 13:39
Para: Prados Valiente Enrique; antlr-interest at antlr.org
Asunto: RE: Tree grammar error

"cannot find tokens file E:\TreeGrammar\output\block.tokens"

-- I think that's the principal error msg. If you fix it, you should be all right.


DISCLAIMER:
-----------------------------------------------------------------------------------------------------------------------

The contents of this e-mail and any attachment(s) are confidential and intended for the named recipient(s) only. 
It shall not attach any liability on the originator or HCL or its affiliates. Any views or opinions presented in 
this email are solely those of the author and may not necessarily reflect the opinions of HCL or its affiliates. 
Any form of reproduction, dissemination, copying, disclosure, modification, distribution and / or publication of 
this message without the prior written consent of the author of this e-mail is strictly prohibited. If you have 
received this email in error please delete it and notify the sender immediately. Before opening any mail and 
attachments please check them for viruses and defect.

-----------------------------------------------------------------------------------------------------------------------

From Martin.Piper at qg.com  Wed Aug 25 06:36:20 2010
From: Martin.Piper at qg.com (Piper, Martin)
Date: Wed, 25 Aug 2010 08:36:20 -0500
Subject: [antlr-interest] Tree grammar error
In-Reply-To: <931DCC17C6D7A849AEE684BF5B13E199EFF427@BLPOSTIN.reale.net>
References: <931DCC17C6D7A849AEE684BF5B13E199EFF426@BLPOSTIN.reale.net>
	<B3F91E1013C53E4B9840FEAD0F12BAAD29945D576D@CHN-HCLT-EVS08.HCLT.CORP.HCL.IN>
	<931DCC17C6D7A849AEE684BF5B13E199EFF427@BLPOSTIN.reale.net>
Message-ID: <648C0C8B82B47D4AA66D36A62246784B012C1DA526@WAEXMB3.qg.com>

Starting at line 1509 in that file, you have Lexer token definitions/rules.
They are not allowed in Tree grammars and parser grammars. Only in Lexer grammars or mixed grammars.
All the tokens must be imported into the tree grammar through the tokenVocab= option.


-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Prados Valiente Enrique
Sent: Wednesday, August 25, 2010 6:42 AM
To: Sarnath K - ERS, HCLTech; antlr-interest at antlr.org
Subject: Re: [antlr-interest] Tree grammar error

I copy file tokens but get the same error like this:

[13:27:03] error(102): PLSQL3.g:1509:1: lexer rule QUOTED_STRING not allowed in parser
[13:27:03] error(102): PLSQL3.g:1512:1: lexer rule ID not allowed in parser
[13:27:03] error(102): PLSQL3.g:1516:1: lexer rule SEMI not allowed in parser
[13:27:03] error(102): PLSQL3.g:1519:1: lexer rule COLON not allowed in parser
[13:27:03] error(102): PLSQL3.g:1522:1: lexer rule DOUBLEDOT not allowed in parser
[13:27:03] error(102): PLSQL3.g:1525:1: lexer rule DOT not allowed in parser
[13:27:03] error(102): PLSQL3.g:1529:1: lexer rule POINT not allowed in parser
[13:27:03] error(102): PLSQL3.g:1532:1: lexer rule COMMA not allowed in parser
[13:27:03] error(102): PLSQL3.g:1535:1: lexer rule EXPONENT not allowed in parser
[13:27:03] error(102): PLSQL3.g:1538:1: lexer rule ASTERISK not allowed in parser
[13:27:03] error(102): PLSQL3.g:1541:1: lexer rule AT_SIGN not allowed in parser
[13:27:03] error(102): PLSQL3.g:1544:1: lexer rule RPAREN not allowed in parser
[13:27:03] error(102): PLSQL3.g:1547:1: lexer rule LPAREN not allowed in parser
[13:27:03] error(102): PLSQL3.g:1550:1: lexer rule RBRACK not allowed in parser
[13:27:03] error(102): PLSQL3.g:1553:1: lexer rule LBRACK not allowed in parser
[13:27:03] error(102): PLSQL3.g:1556:1: lexer rule PLUS not allowed in parser
[13:27:03] error(102): PLSQL3.g:1559:1: lexer rule MINUS not allowed in parser
[13:27:03] error(102): PLSQL3.g:1562:1: lexer rule DIVIDE not allowed in parser
[13:27:03] error(102): PLSQL3.g:1565:1: lexer rule EQ not allowed in parser
[13:27:03] error(102): PLSQL3.g:1568:1: lexer rule PERCENTAGE not allowed in parser
[13:27:03] error(102): PLSQL3.g:1571:1: lexer rule LLABEL not allowed in parser
[13:27:03] error(102): PLSQL3.g:1574:1: lexer rule RLABEL not allowed in parser
[13:27:03] error(102): PLSQL3.g:1577:1: lexer rule ASSIGN not allowed in parser
[13:27:03] error(102): PLSQL3.g:1580:1: lexer rule ARROW not allowed in parser
[13:27:03] error(102): PLSQL3.g:1583:1: lexer rule VERTBAR not allowed in parser
[13:27:03] error(102): PLSQL3.g:1586:1: lexer rule DOUBLEVERTBAR not allowed in parser
[13:27:03] error(102): PLSQL3.g:1589:1: lexer rule NOT_EQ not allowed in parser
[13:27:03] error(102): PLSQL3.g:1592:1: lexer rule LTH not allowed in parser
[13:27:03] error(102): PLSQL3.g:1595:1: lexer rule LEQ not allowed in parser
[13:27:03] error(102): PLSQL3.g:1598:1: lexer rule GTH not allowed in parser
[13:27:03] error(102): PLSQL3.g:1601:1: lexer rule GEQ not allowed in parser
[13:27:03] error(102): PLSQL3.g:1604:1: lexer rule NUMBER not allowed in parser
[13:27:03] error(102): PLSQL3.g:1613:1: lexer rule N not allowed in parser
[13:27:03] error(102): PLSQL3.g:1616:1: lexer rule QUOTE not allowed in parser
[13:27:03] error(102): PLSQL3.g:1620:1: lexer rule DOUBLEQUOTED_STRING not allowed in parser
[13:27:03] error(102): PLSQL3.g:1623:1: lexer rule WS not allowed in parser
[13:27:03] error(102): PLSQL3.g:1625:1: lexer rule SL_COMMENT not allowed in parser
[13:27:03] error(102): PLSQL3.g:1628:1: lexer rule ML_COMMENT not allowed in parser
[13:27:03] error(102): PLSQL3.g:1631:1: lexer rule TYPE_ATTR not allowed in parser
[13:27:03] error(102): PLSQL3.g:1634:1: lexer rule ROWTYPE_ATTR not allowed in parser
[13:27:03] error(102): PLSQL3.g:1637:1: lexer rule NOTFOUND_ATTR not allowed in parser
[13:27:03] error(102): PLSQL3.g:1640:1: lexer rule FOUND_ATTR not allowed in parser
[13:27:03] error(102): PLSQL3.g:1643:1: lexer rule ISOPEN_ATTR not allowed in parser
[13:27:03] error(102): PLSQL3.g:1646:1: lexer rule ROWCOUNT_ATTR not allowed in parser
[13:27:03] error(102): PLSQL3.g:1649:1: lexer rule BULK_ROWCOUNT_ATTR not allowed in parser
[13:27:03] error(102): PLSQL3.g:1652:1: lexer rule CHARSET_ATTR not allowed in parser


-----Mensaje original-----
De: Sarnath K - ERS, HCLTech [mailto:k_sarnath at hcl.com] 
Enviado el: mi?rcoles, 25 de agosto de 2010 13:39
Para: Prados Valiente Enrique; antlr-interest at antlr.org
Asunto: RE: Tree grammar error

"cannot find tokens file E:\TreeGrammar\output\block.tokens"

-- I think that's the principal error msg. If you fix it, you should be all right.


DISCLAIMER:
-----------------------------------------------------------------------------------------------------------------------

The contents of this e-mail and any attachment(s) are confidential and intended for the named recipient(s) only. 
It shall not attach any liability on the originator or HCL or its affiliates. Any views or opinions presented in 
this email are solely those of the author and may not necessarily reflect the opinions of HCL or its affiliates. 
Any form of reproduction, dissemination, copying, disclosure, modification, distribution and / or publication of 
this message without the prior written consent of the author of this e-mail is strictly prohibited. If you have 
received this email in error please delete it and notify the sender immediately. Before opening any mail and 
attachments please check them for viruses and defect.

-----------------------------------------------------------------------------------------------------------------------

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From JALuber at gmx.de  Wed Aug 25 06:58:02 2010
From: JALuber at gmx.de (Johannes Luber)
Date: Wed, 25 Aug 2010 15:58:02 +0200
Subject: [antlr-interest] "How to build an ANTLR code generation target"
In-Reply-To: <i5347a$r4v$1@dough.gmane.org>
References: <i5347a$r4v$1@dough.gmane.org>
Message-ID: <20100825135802.118150@gmx.net>

> There seems to be some information missing here[1]. It goes from "Start
> with a simple lexer like..." to "Look at the generated code" :)) I mean,
> my editor is *smart* but it's not that smart that it can generate code
> just by my typing some random... stuff into foo.g
> 
> Would anyone like to give me a clue, please?

For these kind of question please use the antlr-dev list. Regarding the "generated code" question: The ANTLR tool generates code depending on the input grammar. The text refers to this capabilities. You have to basically do the following thing:

1. Generate code
2. Load the code files
3. Look where the compiler/interpreter throws errors
4. Fix the code in generated code file so it works
5. Transfer the fix to template file
6. Go to 1.

BTW, this email arrived fine in my inbox. Not sure why it didn't show up in yours, but to accuse someone to have meddled with your email is rude at the very least. You could have asked: "Did my previous mail show up? I didn't receive it myself." Maybe it was eaten by the spam filter, maybe it got lost, maybe your email system kills emails where sender and receiver match, maybe...

Johannes
> 
> 
> [1]
> http://www.antlr.org/wiki/display/ANTLR3/How+to+build+an+ANTLR+code+generation+target
> 
> -- 
> Gary        Please do NOT send me 'courtesy' replies off-list.
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address

-- 
GMX DSL SOMMER-SPECIAL: Surf & Phone Flat 16.000 f?r nur 19,99 ?/mtl.!*
http://portal.gmx.net/de/go/dsl

From JALuber at gmx.de  Wed Aug 25 07:00:40 2010
From: JALuber at gmx.de (Johannes Luber)
Date: Wed, 25 Aug 2010 16:00:40 +0200
Subject: [antlr-interest] "How to build an ANTLR code generation target"
In-Reply-To: <i5347a$r4v$1@dough.gmane.org>
References: <i5347a$r4v$1@dough.gmane.org>
Message-ID: <20100825140040.118160@gmx.net>


> Would anyone like to give me a clue, please?
> 

Just noticed that this email was for whatever reason quite a long time in the queue. Received it over an hour later than your complaint. Mail server hiccups seems to be the cause here.

Johannes
> 
> [1]
> http://www.antlr.org/wiki/display/ANTLR3/How+to+build+an+ANTLR+code+generation+target
> 
> -- 
> Gary        Please do NOT send me 'courtesy' replies off-list.
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address

-- 
GRATIS f?r alle GMX-Mitglieder: Die maxdome Movie-FLAT!
Jetzt freischalten unter http://portal.gmx.net/de/go/maxdome01

From Martin.Piper at qg.com  Wed Aug 25 07:38:57 2010
From: Martin.Piper at qg.com (Piper, Martin)
Date: Wed, 25 Aug 2010 09:38:57 -0500
Subject: [antlr-interest] Tree grammar confusion
Message-ID: <648C0C8B82B47D4AA66D36A62246784B012C1DA54E@WAEXMB3.qg.com>

Greetings, 

I apologize if this is being received in duplicate by anyone, I originally sent it yesterday and doesn't seem to have been received by the group (not showing in the archives or the daily brief) 
I am having some trouble with my tree grammar and am hoping to maybe get an explanation as to what I am doing wrong.
I've set up a parser grammar to generate an AST, then intend to walk that AST with a tree grammar to do the actual work.
When just testing that my tree grammar properly recognizes the AST produced by the parser, I keep coming across similar problems.
The output of the parser is as expected.
?Input:

select tbl1.col1, tbl2.col2
?from Table_one tbl1
?join Table_two tbl2
?? on col1 = col1
where tbl2.col2 = 3
order by tbl1.col1

AST Output from parser:
(select (COLUMN_LIST tbl1.col1 tbl2.col2) (from (join (ALIAS (TABLE Table_one) tbl1) (ALIAS (TABLE Table_two) tbl2) (= col1 col1))) (where (= tbl2.col2 3)) (ORDER BY (COLUMN_LIST tbl1.col1)))

Output of tree grammar:
SybaseSqlTree.g: node from line 6:0 mismatched tree node: ORDER BY expecting <UP>
Parser grammar rules producing AST: Each of the into, from, where, etc clauses produce their own subtrees.
select_cmd???????? :
??????????????? select_cmd_core (UNION (ALL)? select_cmd_core)+ order_by_clause? compute_clause? ->^(SELECT ^(UNION select_cmd_core+) order_by_clause? compute_clause?)
??? |????????? select_cmd_core order_by_clause? compute_clause?-> ^(select_cmd_core order_by_clause? compute_clause?)
??????????????? 
;
select_cmd_core:
??????????????? SELECT (ALL|DISTINCT)? (TOP unsigned_number_literal)?
??????????????? select_list_clause 
??????????????? (into_clause)?
??????????????? (from_clause)?
??????????????? (where_clause)?
??????????????? (group_by_clause)?
??????????????? (having_clause)?-> 
??????????????? ^(SELECT ALL? DISTINCT? ^(TOP unsigned_number_literal)? select_list_clause into_clause? from_clause? where_clause? group_by_clause? having_clause?)
;

Relevant tree grammar excerpt....
select_cmd???????? :
^(SELECT ^(UNION select_cmd_core+) order_by_clause? compute_clause?)
??????????????? |????????????? ^(select_cmd_core order_by_clause? compute_clause?);



select_cmd_core:
??????????????? ^(SELECT ALL? DISTINCT? 
??????????????????????????????? top_clause? 
??????????????????????????????? select_list_clause 
??????????????????????????????? into_clause? 
??????????????????????????????? from_clause? 
??????????????????????????????? where_clause? 
??????????????????????????????? group_by_clause? 
??????????????????????????????? having_clause?)
;


My main confusion is that when generating a tree 

^(rule_1 A B) 
rule_1: TOKEN C D->^(TOKEN C D)
produces a tree (TOKEN C D A B)

but the same when walking the tree seems to expect to find ((TOKEN C D) A B)



Martin Piper
IT - Enterprise Business Solutions
?
Quad/Graphics
Innovative People Redefining Print
?
Sussex, Wisconsin
414-566-6823 phone
?
martin.piper at qg.com
www.QG.com


From JALuber at gmx.de  Wed Aug 25 09:12:14 2010
From: JALuber at gmx.de (Johannes Luber)
Date: Wed, 25 Aug 2010 18:12:14 +0200
Subject: [antlr-interest] "How to build an ANTLR code generation target"
In-Reply-To: <i539o8$i9u$1@dough.gmane.org>
References: <i5347a$r4v$1@dough.gmane.org> <20100825135802.118150@gmx.net>
	<i539o8$i9u$1@dough.gmane.org>
Message-ID: <20100825161214.118160@gmx.net>

> 
> > BTW, this email arrived fine in my inbox. Not sure why it didn't show
> > up in yours
> 
> Huh?

Sorry, I thought your other email referred to this thread. To rebuild antlr please read BUILD.TXT, I think the build system should work without having developer access to the repo (haven't tried it tho).

Johannes
> 
> -- 
> Gary        Please do NOT send me 'courtesy' replies off-list.
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address

-- 
GMX DSL SOMMER-SPECIAL: Surf & Phone Flat 16.000 f?r nur 19,99 ?/mtl.!*
http://portal.gmx.net/de/go/dsl

From cummings at kjchome.homeip.net  Wed Aug 25 09:11:10 2010
From: cummings at kjchome.homeip.net (Kevin J. Cummings)
Date: Wed, 25 Aug 2010 12:11:10 -0400
Subject: [antlr-interest] Tree grammar error
In-Reply-To: <931DCC17C6D7A849AEE684BF5B13E199EFF426@BLPOSTIN.reale.net>
References: <931DCC17C6D7A849AEE684BF5B13E199EFF426@BLPOSTIN.reale.net>
Message-ID: <4C75409E.80509@kjchome.homeip.net>

On 08/25/2010 07:35 AM, Prados Valiente Enrique wrote:
> Hi all,

>
> I use Antlr3.exe (C# Runtime) and PLSQL3.g file  (attached),
>
>
>
> I try generate tree grammar, and I get this error:

I believe that your problem is that you *don't* have a tree grammar. 
Instead, what you have a is a combined grammar (Lexer and Parser).
Remove the word "tree" from the line which contains "tree grammar" and 
see if that fixes your problem.

>
>
> Any suggestions, please ?
>
>
>
> [13:27:03] error(3):  cannot find tokens file
> E:\TreeGrammar\output\block.tokens
>
> [13:27:03] error(102): PLSQL3.g:1509:1: lexer rule QUOTED_STRING not
> allowed in parser
>
> [13:27:03] error(102): PLSQL3.g:1512:1: lexer rule ID not allowed in
> parser
>
> [13:27:03] error(102): PLSQL3.g:1516:1: lexer rule SEMI not allowed in
> parser
>
> [13:27:03] error(102): PLSQL3.g:1519:1: lexer rule COLON not allowed in
> parser
>
> [13:27:03] error(102): PLSQL3.g:1522:1: lexer rule DOUBLEDOT not allowed
> in parser
>
> [13:27:03] error(102): PLSQL3.g:1525:1: lexer rule DOT not allowed in
> parser
>
> [13:27:03] error(102): PLSQL3.g:1529:1: lexer rule POINT not allowed in
> parser
>
> [13:27:03] error(102): PLSQL3.g:1532:1: lexer rule COMMA not allowed in
> parser
>
> [13:27:03] error(102): PLSQL3.g:1535:1: lexer rule EXPONENT not allowed
> in parser
>
> [13:27:03] error(102): PLSQL3.g:1538:1: lexer rule ASTERISK not allowed
> in parser
>
> [13:27:03] error(102): PLSQL3.g:1541:1: lexer rule AT_SIGN not allowed
> in parser
>
> [13:27:03] error(102): PLSQL3.g:1544:1: lexer rule RPAREN not allowed in
> parser
>
> [13:27:03] error(102): PLSQL3.g:1547:1: lexer rule LPAREN not allowed in
> parser
>
> [13:27:03] error(102): PLSQL3.g:1550:1: lexer rule RBRACK not allowed in
> parser
>
> [13:27:03] error(102): PLSQL3.g:1553:1: lexer rule LBRACK not allowed in
> parser
>
> [13:27:03] error(102): PLSQL3.g:1556:1: lexer rule PLUS not allowed in
> parser
>
> [13:27:03] error(102): PLSQL3.g:1559:1: lexer rule MINUS not allowed in
> parser
>
> [13:27:03] error(102): PLSQL3.g:1562:1: lexer rule DIVIDE not allowed in
> parser
>
> [13:27:03] error(102): PLSQL3.g:1565:1: lexer rule EQ not allowed in
> parser
>
> [13:27:03] error(102): PLSQL3.g:1568:1: lexer rule PERCENTAGE not
> allowed in parser
>
> [13:27:03] error(102): PLSQL3.g:1571:1: lexer rule LLABEL not allowed in
> parser
>
> [13:27:03] error(102): PLSQL3.g:1574:1: lexer rule RLABEL not allowed in
> parser
>
> [13:27:03] error(102): PLSQL3.g:1577:1: lexer rule ASSIGN not allowed in
> parser
>
> [13:27:03] error(102): PLSQL3.g:1580:1: lexer rule ARROW not allowed in
> parser
>
> [13:27:03] error(102): PLSQL3.g:1583:1: lexer rule VERTBAR not allowed
> in parser
>
> [13:27:03] error(102): PLSQL3.g:1586:1: lexer rule DOUBLEVERTBAR not
> allowed in parser
>
> [13:27:03] error(102): PLSQL3.g:1589:1: lexer rule NOT_EQ not allowed in
> parser
>
> [13:27:03] error(102): PLSQL3.g:1592:1: lexer rule LTH not allowed in
> parser
>
> [13:27:03] error(102): PLSQL3.g:1595:1: lexer rule LEQ not allowed in
> parser
>
> [13:27:03] error(102): PLSQL3.g:1598:1: lexer rule GTH not allowed in
> parser
>
> [13:27:03] error(102): PLSQL3.g:1601:1: lexer rule GEQ not allowed in
> parser
>
> [13:27:03] error(102): PLSQL3.g:1604:1: lexer rule NUMBER not allowed in
> parser
>
> [13:27:03] error(102): PLSQL3.g:1613:1: lexer rule N not allowed in
> parser
>
> [13:27:03] error(102): PLSQL3.g:1616:1: lexer rule QUOTE not allowed in
> parser
>
> [13:27:03] error(102): PLSQL3.g:1620:1: lexer rule DOUBLEQUOTED_STRING
> not allowed in parser
>
> [13:27:03] error(102): PLSQL3.g:1623:1: lexer rule WS not allowed in
> parser
>
> [13:27:03] error(102): PLSQL3.g:1625:1: lexer rule SL_COMMENT not
> allowed in parser
>
> [13:27:03] error(102): PLSQL3.g:1628:1: lexer rule ML_COMMENT not
> allowed in parser
>
> [13:27:03] error(102): PLSQL3.g:1631:1: lexer rule TYPE_ATTR not allowed
> in parser
>
> [13:27:03] error(102): PLSQL3.g:1634:1: lexer rule ROWTYPE_ATTR not
> allowed in parser
>
> [13:27:03] error(102): PLSQL3.g:1637:1: lexer rule NOTFOUND_ATTR not
> allowed in parser
>
> [13:27:03] error(102): PLSQL3.g:1640:1: lexer rule FOUND_ATTR not
> allowed in parser
>
> [13:27:03] error(102): PLSQL3.g:1643:1: lexer rule ISOPEN_ATTR not
> allowed in parser
>
> [13:27:03] error(102): PLSQL3.g:1646:1: lexer rule ROWCOUNT_ATTR not
> allowed in parser
>
> [13:27:03] error(102): PLSQL3.g:1649:1: lexer rule BULK_ROWCOUNT_ATTR
> not allowed in parser
>
> [13:27:03] error(102): PLSQL3.g:1652:1: lexer rule CHARSET_ATTR not
> allowed in parser
>
>
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


-- 
Kevin J. Cummings
kjchome at rcn.com
cummings at kjchome.homeip.net
cummings at kjc386.framingham.ma.us
Registered Linux User #1232 (http://counter.li.org)

From jrk1987 at yahoo.co.in  Wed Aug 25 09:44:59 2010
From: jrk1987 at yahoo.co.in (J.R Karthikeyan)
Date: Wed, 25 Aug 2010 22:14:59 +0530 (IST)
Subject: [antlr-interest] VS2005 and VS2008 problem
In-Reply-To: <39019292-1282706558-cardhu_decombobulator_blackberry.rim.net-1374536685-@bda428.bisx.prod.on.blackberry>
References: <39019292-1282706558-cardhu_decombobulator_blackberry.rim.net-1374536685-@bda428.bisx.prod.on.blackberry>
Message-ID: <813505.70128.qm@web94613.mail.in2.yahoo.com>

Hi,

  In both case antlr C runtime library will be compiled by Visual studio 2005. 
But previously Jim idle told that ?The issue is that the vs2005 compiler does 
not support a few ANSI constructs used in the runtime. This means that you must 
compile the runtime in 2008 and just link with it in your 2005 project. But 
unless you configure the include paths for you project and so on, then it will 
not compile anyway. That's why I am telling you to download" So is there any 
workaround for this. Thanks for your time and patience

Thanks,
Jrk




________________________________
From: "kferrio at gmail.com" <kferrio at gmail.com>
To: J.R Karthikeyan <jrk1987 at yahoo.co.in>; antlr-interest-bounces at antlr.org; 
antlr-interest at antlr.org
Sent: Tue, 24 August, 2010 8:22:38 PM
Subject: Re: [antlr-interest] VS2005 and VS2008 problem

I believe you have two options.  You might prefer to recompile the antlr runtime 
DLL with vs2005 If your goal is minimizing dependencies.  Alternatively you 
could just drop the  redistributable C runtime from vs2008 into your packaging.  
Unfortunately there's quite a bit of confusion on this point specific to msvcr9 
due to some unclear release communications.  But if you use the runtime redist 
kit which actually ships with vs2008 you should be ok.  You may be able to get 
the redist from the express edition of vs2008 but you'll have to check that.

Good luck!

------Original Message------
From: J.R Karthikeyan
Sender: antlr-interest-bounces at antlr.org
To: antlr-interest at antlr.org
Subject: [antlr-interest] VS2005 and VS2008 problem
Sent: Aug 24, 2010 6:26 PM

Hi,

   My entire project is done in VS2005 which will create dll and later I will 
use those dll. I am creating the parser using ANTLR and those file I am planned 
to add it as a function in my project which is in VS2005. When I compiled ANTLR 
generated file seperatly in VS2005 I don't have any problem. Even when I 
combined and built with my project, it is fine. But when my dll calls 
antlr3cd.dll which in turn it callsMSVCR90D.dll. It looks that dll is VS2008 
dll. Any suggestion how to get rid of this. 



List: http://www.antlr.org/mailman/listinfo/antlr-interest 
Unsubscribe: 
http://www.antlr.org/mailman/options/antlr-interest/your-email-address 



Sent from my Verizon Wireless BlackBerry


From maxgbr at hotmail.it  Wed Aug 25 11:15:35 2010
From: maxgbr at hotmail.it (Massimiliano D)
Date: Wed, 25 Aug 2010 18:15:35 +0000
Subject: [antlr-interest] Syntactic predicate Issue
Message-ID: <COL124-W3EFAEBB4E31D7C89B9DD9B0840@phx.gbl>


Hi, i have some problem in generated java code form one rule like this:

grant_statement
    :    'GRANT'
    (    grant_system_privilege
    |    grant_object_privilege
    ) 
    ;

grant_object_privilege
    :    privilege[false] (COMMA privilege[false])* 'ON' on_object_clause    
        grantee_clause ('WITH' 'HIERARCHY' 'OPTION')? ('WITH' 'GRANT' 'OPTION')?    
    ;
    
privilege[boolean isSystemPriv]
    :    {isSystemPriv }? priv_sys
    |    {!isSystemPriv}? priv_obj
    ;

grant_system_privilege
    :    privilege[true] (COMMA privilege[true])*
        grantee_clause ('IDENTIFIED' 'BY' .+)? ('WITH' 'ADMIN' 'OPTION')?
    ;

grantee_clause
    :    'TO' (IDENTIFIER
    |    'PUBLIC'
    )    (COMMA (IDENTIFIER | 'PUBLIC'))*
    ;

whe i try to debug i got this error: cannot find symbol
because in 2 generated classes called DFAXXX the code looks like this:

public int specialStateTransition(int s, IntStream _input) throws NoViableAltException {
            TokenStream input = (TokenStream)_input;
            int _s = s;
            switch ( s ) {
                    case 0 : 
                        int LA97_8 = input.LA(1);

                         
                        int index97_8 = input.index();
                        input.rewind();
                        s = -1;
                        if ( (evalPredicate(isSystemPriv ,"isSystemPriv ")) ) {s = 1;}

                        else if ( (evalPredicate(!isSystemPriv,"!isSystemPriv")) ) {s = 27;}

                         
                        input.seek(index97_8);
                        if ( s>=0 ) return s;
                        break;
                    case 1 : 
                        int LA97_15 = input.LA(1);

                         
                        int index97_15 = input.index();
                        input.rewind();
                        s = -1;
                        if ( (evalPredicate(isSystemPriv ,"isSystemPriv ")) ) {s = 1;}

                        else if ( (evalPredicate(!isSystemPriv,"!isSystemPriv")) ) {s = 27;}

                         
                        input.seek(index97_15);
                        if ( s>=0 ) return s;
                        break;
                    case 2 : 
                       ........................
                       ........................
                       .......................
            }
            if (state.backtracking>0) {state.failed=true; return -1;}
            NoViableAltException nvae =
                new NoViableAltException(getDescription(), 97, _s, input);
            error(nvae);
            throw nvae;
        }
    }

but obviusly the isSystemPriv variable is not defined, am i missing something??

Thanks Max.
 		 	   		  

From jimi at temporal-wave.com  Wed Aug 25 11:18:11 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 25 Aug 2010 11:18:11 -0700
Subject: [antlr-interest] Syntactic predicate Issue
In-Reply-To: <COL124-W3EFAEBB4E31D7C89B9DD9B0840@phx.gbl>
References: <COL124-W3EFAEBB4E31D7C89B9DD9B0840@phx.gbl>
Message-ID: <00aa01cb4481$e07958b0$a16c0a10$@temporal-wave.com>

Please use http://antlr.markmail.org  where you will find this issue
addressed many times. It is because the reference to the local input
variable is not available to the DFA code, you have to use scopes instead.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Massimiliano D
> Sent: Wednesday, August 25, 2010 11:16 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Syntactic predicate Issue
> 
> 
> Hi, i have some problem in generated java code form one rule like this:
> 
> grant_statement
>     :    'GRANT'
>     (    grant_system_privilege
>     |    grant_object_privilege
>     )
>     ;
> 
> grant_object_privilege
>     :    privilege[false] (COMMA privilege[false])* 'ON' on_object_clause
>         grantee_clause ('WITH' 'HIERARCHY' 'OPTION')? ('WITH' 'GRANT'
> 'OPTION')?
>     ;
> 
> privilege[boolean isSystemPriv]
>     :    {isSystemPriv }? priv_sys
>     |    {!isSystemPriv}? priv_obj
>     ;
> 
> grant_system_privilege
>     :    privilege[true] (COMMA privilege[true])*
>         grantee_clause ('IDENTIFIED' 'BY' .+)? ('WITH' 'ADMIN' 'OPTION')?
>     ;
> 
> grantee_clause
>     :    'TO' (IDENTIFIER
>     |    'PUBLIC'
>     )    (COMMA (IDENTIFIER | 'PUBLIC'))*
>     ;
> 
> whe i try to debug i got this error: cannot find symbol because in 2
generated
> classes called DFAXXX the code looks like this:
> 
> public int specialStateTransition(int s, IntStream _input) throws
> NoViableAltException {
>             TokenStream input = (TokenStream)_input;
>             int _s = s;
>             switch ( s ) {
>                     case 0 :
>                         int LA97_8 = input.LA(1);
> 
> 
>                         int index97_8 = input.index();
>                         input.rewind();
>                         s = -1;
>                         if ( (evalPredicate(isSystemPriv ,"isSystemPriv
")) ) {s = 1;}
> 
>                         else if (
(evalPredicate(!isSystemPriv,"!isSystemPriv")) ) {s = 27;}
> 
> 
>                         input.seek(index97_8);
>                         if ( s>=0 ) return s;
>                         break;
>                     case 1 :
>                         int LA97_15 = input.LA(1);
> 
> 
>                         int index97_15 = input.index();
>                         input.rewind();
>                         s = -1;
>                         if ( (evalPredicate(isSystemPriv ,"isSystemPriv
")) ) {s = 1;}
> 
>                         else if (
(evalPredicate(!isSystemPriv,"!isSystemPriv")) ) {s = 27;}
> 
> 
>                         input.seek(index97_15);
>                         if ( s>=0 ) return s;
>                         break;
>                     case 2 :
>                        ........................
>                        ........................
>                        .......................
>             }
>             if (state.backtracking>0) {state.failed=true; return -1;}
>             NoViableAltException nvae =
>                 new NoViableAltException(getDescription(), 97, _s, input);
>             error(nvae);
>             throw nvae;
>         }
>     }
> 
> but obviusly the isSystemPriv variable is not defined, am i missing
> something??
> 
> Thanks Max.
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From j at junkwallah.org  Wed Aug 25 12:31:55 2010
From: j at junkwallah.org (Junkman)
Date: Wed, 25 Aug 2010 12:31:55 -0700
Subject: [antlr-interest] Tree grammar confusion
In-Reply-To: <648C0C8B82B47D4AA66D36A62246784B012C1DA54E@WAEXMB3.qg.com>
References: <648C0C8B82B47D4AA66D36A62246784B012C1DA54E@WAEXMB3.qg.com>
Message-ID: <4C756FAB.9020500@junkwallah.org>

Piper, Martin wrote:
> Greetings, 
> 
...

> 
> My main confusion is that when generating a tree 
> 
> ^(rule_1 A B) 
> rule_1: TOKEN C D->^(TOKEN C D)
> produces a tree (TOKEN C D A B)
> 
> but the same when walking the tree seems to expect to find ((TOKEN C D) A B)
> 

Hi Martin,

You ran into the same issue I did a while back (and whined about it here
:-).

Given an expression "^(LEAF)", the (tree-generating) parser will
generate a single LEAF node, but the tree parser will expect the node
sequence LEAF-DOWN-UP - tree parser takes ^() expression bit more literally.

A simple but crude workaround is to refactor your tree grammar so that
the root term of an ^() expression is not a subrule that matches another
^() expression.  For your simple example, the simple fix is to inline
rule_1 into ^() expression referencing rule_1 as its root term.

This inlining business wasn't so bad for my tree grammar, but I suspect
it could be a pain for others.

Perhaps others can chime in with better solutions.

Jay


From kferrio at gmail.com  Wed Aug 25 16:25:38 2010
From: kferrio at gmail.com (kferrio at gmail.com)
Date: Wed, 25 Aug 2010 23:25:38 +0000
Subject: [antlr-interest] VS2005 and VS2008 problem
In-Reply-To: <813505.70128.qm@web94613.mail.in2.yahoo.com>
References: <39019292-1282706558-cardhu_decombobulator_blackberry.rim.net-1374536685-@bda428.bisx.prod.on.blackberry><813505.70128.qm@web94613.mail.in2.yahoo.com>
Message-ID: <1218836696-1282778739-cardhu_decombobulator_blackberry.rim.net-483467156-@bda428.bisx.prod.on.blackberry>

I'm on vs2008 for antlr work, so I cannot claim authority but I do deal with mixed libs every day between multiple releases of vs.  Jim Idle knows his code of course.  So your vs2005 code will link fine with antlr built with vs2008 but the former and latter each use their respective versions of the C runtime.  So you need both C runtimes and they do coexist peacefully.  You'll need to get a copy of the vs20008 c runtime.

I hope that helps.

Kyle 

Sent from my Verizon Wireless BlackBerry

-----Original Message-----
From: "J.R Karthikeyan" <jrk1987 at yahoo.co.in>
Date: Wed, 25 Aug 2010 22:14:59 
To: <kferrio at gmail.com>; <antlr-interest-bounces at antlr.org>; <antlr-interest at antlr.org>
Subject: Re: [antlr-interest] VS2005 and VS2008 problem

Hi,

  In both case antlr C runtime library will be compiled by Visual studio 2005. 
But previously Jim idle told that ?The issue is that the vs2005 compiler does 
not support a few ANSI constructs used in the runtime. This means that you must 
compile the runtime in 2008 and just link with it in your 2005 project. But 
unless you configure the include paths for you project and so on, then it will 
not compile anyway. That's why I am telling you to download" So is there any 
workaround for this. Thanks for your time and patience

Thanks,
Jrk




________________________________
From: "kferrio at gmail.com" <kferrio at gmail.com>
To: J.R Karthikeyan <jrk1987 at yahoo.co.in>; antlr-interest-bounces at antlr.org; 
antlr-interest at antlr.org
Sent: Tue, 24 August, 2010 8:22:38 PM
Subject: Re: [antlr-interest] VS2005 and VS2008 problem

I believe you have two options.  You might prefer to recompile the antlr runtime 
DLL with vs2005 If your goal is minimizing dependencies.  Alternatively you 
could just drop the  redistributable C runtime from vs2008 into your packaging.  
Unfortunately there's quite a bit of confusion on this point specific to msvcr9 
due to some unclear release communications.  But if you use the runtime redist 
kit which actually ships with vs2008 you should be ok.  You may be able to get 
the redist from the express edition of vs2008 but you'll have to check that.

Good luck!

------Original Message------
From: J.R Karthikeyan
Sender: antlr-interest-bounces at antlr.org
To: antlr-interest at antlr.org
Subject: [antlr-interest] VS2005 and VS2008 problem
Sent: Aug 24, 2010 6:26 PM

Hi,

   My entire project is done in VS2005 which will create dll and later I will 
use those dll. I am creating the parser using ANTLR and those file I am planned 
to add it as a function in my project which is in VS2005. When I compiled ANTLR 
generated file seperatly in VS2005 I don't have any problem. Even when I 
combined and built with my project, it is fine. But when my dll calls 
antlr3cd.dll which in turn it callsMSVCR90D.dll. It looks that dll is VS2008 
dll. Any suggestion how to get rid of this. 



List: http://www.antlr.org/mailman/listinfo/antlr-interest 
Unsubscribe: 
http://www.antlr.org/mailman/options/antlr-interest/your-email-address 



Sent from my Verizon Wireless BlackBerry



From Enrique.PradosValiente at reale.es  Wed Aug 25 23:33:54 2010
From: Enrique.PradosValiente at reale.es (Prados Valiente Enrique)
Date: Thu, 26 Aug 2010 08:33:54 +0200
Subject: [antlr-interest] Tree grammar error
In-Reply-To: <4C75409E.80509@kjchome.homeip.net>
References: <931DCC17C6D7A849AEE684BF5B13E199EFF426@BLPOSTIN.reale.net>
	<4C75409E.80509@kjchome.homeip.net>
Message-ID: <931DCC17C6D7A849AEE684BF5B13E199EFF42F@BLPOSTIN.reale.net>

Thanks, it's right.

Any sample of Lexer, Parser and Tree grammar ??

-----Mensaje original-----

> I try generate tree grammar, and I get this error:

I believe that your problem is that you *don't* have a tree grammar. 
Instead, what you have a is a combined grammar (Lexer and Parser).
Remove the word "tree" from the line which contains "tree grammar" and 
see if that fixes your problem.


From jeanchristophe.bach at inria.fr  Thu Aug 26 01:39:50 2010
From: jeanchristophe.bach at inria.fr (Jean-Christophe Bach)
Date: Thu, 26 Aug 2010 10:39:50 +0200
Subject: [antlr-interest] Fuzzy parsing ('filter' option)
In-Reply-To: <20100823093528.GA17168@adel.loria.fr>
References: <20100811145430.GA3440@adel.loria.fr>
	<20100823093528.GA17168@adel.loria.fr>
Message-ID: <20100826083950.GA5078@adel.loria.fr>

Hi list,

Has anyone any idea about this problem ?

We were using the 'filter' option in the old parser, and I wanted to use it here
since it seemed correct/easy/a good way. But maybe this is not the good way to
keep the host code and to parse only our specific constructs.
How do you handle this type of problem ? How do you build your tree when you
do not want to modify the existing host code and only to transform your own
specific constructs without parsing all the host language ?

I think that I miss something very simple and that the problem is classic, but I
have difficulties to point it.

Thanks in advance,

JC

PS : my previous emails to remember my problem are just below.


* Jean-Christophe Bach <jeanchristophe.bach at inria.fr> [23.08.2010. @11:35:28 +0200]:
> Hello antlr users,
> 
> I am a bit stuck to the problem of fuzzy parsing and filter option. I looked at the fuzzy example,
> but I am not sure it helps me. 
> 
> How do you usually handle it ? How do you keep all the the host code without any
> modification when you write a language you embed into Java (or any other
> language) ? I thought I could create a node containing a "big string" of host
> code in my tree, but it does not seem to to be so obvious/easy. The parser has
> difficulties to "recognize unknown constructs" (all but my specific
> constructs == host code). Have you ever had this problem ?
> 
> Thanks in advance,
> 
> JC
> 
> 
> * Jean-Christophe Bach <jeanchristophe.bach at inria.fr> [11.08.2010. @16:54:30 +0200]:
> > I have a combined grammar and I would like to do fuzzy parsing. I know that the
> > filter option is designed for the lexer part, but is there any way to use this
> > option by keeping my combined grammar ?
> > In our old  parser (antlr2), we used this option like this (in a combined
> > grammar) :
> > 
> > class HostParser extends Parser;
> > ...
> > // returns the current goal language code
> > private String getCode() {
> >   String result = targetlexer.target.toString();
> >   targetlexer.clearTarget();
> >   return result;
> > }
> > ...
> > and parser rules
> > 
> > ...
> > class HostLexer extends Lexer;
> > options {
> >   ...
> >   filter=TARGET;
> >   ...
> >  }
> > 
> > public StringBuilder target = new StringBuilder("");
> > // clear the buffer
> > public void clearTarget() { target.delete(0,target.length()); }
> > 
> > ...
> > 
> > protected
> > TARGET : (.) { target.append($getText); } ;
> > 
> > 
> > It was very easy to do fuzzy parsing and to use what was parsed : when needed,
> > we only had to call getCode() function to get a HostBlock code and to put it in
> > a node of our tree.  But with antlr3, I'm not sure to understand how to proceed.
> > I tried to give the option 'filter=true;' directly to my fragment TARGET rule,
> > but it does not seem to be a good idea (I obtain errors).
> > Would someone have any idea ?
> > 
> > Regards,
> > 
> > JC

From acondit at ipns.com  Thu Aug 26 13:49:10 2010
From: acondit at ipns.com (Alan Condit)
Date: Thu, 26 Aug 2010 13:49:10 -0700
Subject: [antlr-interest] ObjC2.0 runtime for ANTLR3.2 Mac OS X 10.6
Message-ID: <80ABA2E9-F8C6-4C9F-9E7F-F89344CFF2DD@ipns.com>

I have been working on the ObjC2.0 runtime and Templates for ANTLR3.2. I now have it to the 
point where I can use it for my project. It has not had a lot of testing but the project is 
on github at <http://github.com/muggins/ANTLR3-ObjC2.0-Runtime>.

I build the ANTLR framework using XCode 3.2.3. To use it you need to install the templates 
in the appropriate location and recompile the runtime. I have used it both with ANTLRWorks 
1.4 and with java command line builds. It has only been compiled in 32 bit mode so far.  

There are still a number of warning messages in building the ANTLR Framework.

If you use it and find any problems please let me know.

Alan
---

Alan Condit
1085 Tierra Ct.
Woodburn, OR 97071

Email -- acondit at ipns.com
Home-Office (503) 982-0906


From jimi at temporal-wave.com  Thu Aug 26 14:52:45 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 26 Aug 2010 14:52:45 -0700
Subject: [antlr-interest] ObjC2.0 runtime for ANTLR3.2 Mac OS X 10.6
In-Reply-To: <80ABA2E9-F8C6-4C9F-9E7F-F89344CFF2DD@ipns.com>
References: <80ABA2E9-F8C6-4C9F-9E7F-F89344CFF2DD@ipns.com>
Message-ID: <034501cb4569$0457b2d0$0d071870$@temporal-wave.com>

Cool :-)

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Alan Condit
> Sent: Thursday, August 26, 2010 1:49 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] ObjC2.0 runtime for ANTLR3.2 Mac OS X 10.6
> 
> I have been working on the ObjC2.0 runtime and Templates for ANTLR3.2. I
> now have it to the point where I can use it for my project. It has not had
a lot
> of testing but the project is on github at
> <http://github.com/muggins/ANTLR3-ObjC2.0-Runtime>.
> 
> I build the ANTLR framework using XCode 3.2.3. To use it you need to
install
> the templates in the appropriate location and recompile the runtime. I
have
> used it both with ANTLRWorks
> 1.4 and with java command line builds. It has only been compiled in 32 bit
> mode so far.
> 
> There are still a number of warning messages in building the ANTLR
> Framework.
> 
> If you use it and find any problems please let me know.
> 
> Alan
> ---
> 
> Alan Condit
> 1085 Tierra Ct.
> Woodburn, OR 97071
> 
> Email -- acondit at ipns.com
> Home-Office (503) 982-0906
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From jrk1987 at yahoo.co.in  Thu Aug 26 15:08:49 2010
From: jrk1987 at yahoo.co.in (J.R Karthikeyan)
Date: Thu, 26 Aug 2010 15:08:49 -0700 (PDT)
Subject: [antlr-interest] Help !! Error reporting
Message-ID: <770424.21743.qm@web94610.mail.in2.yahoo.com>

Hi,

? Is there some good example for error reporting for C. I surfed the internet 
for almost a day and I can't get a good example to get this work. it would be 
great if someone provide the example how to display the error message. I found 
this link 
http://www.antlr.org/wiki/display/ANTLR3/Error+reporting+and+recovery?and it 
doesn't look that it will work for C.


Thanks,
Jrk


From k_sarnath at hcl.com  Thu Aug 26 21:52:46 2010
From: k_sarnath at hcl.com (Sarnath K - ERS, HCLTech)
Date: Fri, 27 Aug 2010 10:22:46 +0530
Subject: [antlr-interest] Pls Help: Tree Grammar Bug? or Wrong usage? or
	Understanding Gap?
Message-ID: <B3F91E1013C53E4B9840FEAD0F12BAAD29945D5EEF@CHN-HCLT-EVS08.HCLT.CORP.HCL.IN>

Hi ANTLR Folks,

I am raising this issue again as none responded to my earlier thread.
I would be glad if any of you could shed light on this, Thanks!

We are new to ANTLR and we all love this tool! Thanks to Terence!  \__/

We are trying to write a C2C converter. 
However, we are stuck with the handling of the "block statement" in the Tree Grammar part.
Though we have a workaround, we would like to know whether this is an ANTLR bug (or) a gap in our understanding.

I have written a concise grammar that captures the problem. Kindly see the attachment.

The problem is very simple:
A compound statement is a 'statement' that starts with '{', has zero or more variable declarations, followed by zero or more 'statements' and ends with '}'
In the grammar above, 'v' stands for variable declaration, 's' stands for a statement.

When I run this project , I get the following output.
-------------------------------
Console
-------------------------------
{vs{s}}
Tree = ({ v s ({ s }) })
Tree Grammar Output =  {vs{vs} }
--------------------------------

Now look at "Tree Grammar Output". It carries over the "v" from the previous level. It should have been {vs{s}}.

However if I re-write the grammar as below, I don't have this problem.

b->'{' '}'
  | '{' v '}'
  | '{' s '}'
  | '{' v+ s+ '}'

Kindly advice me on what is the right way to do things!
Are we missing something? (like... RTFM?)

Thanks,
Best Regards,
Sarnath

-------------- next part --------------
A non-text attachment was scrubbed...
Name: driver.java
Type: application/octet-stream
Size: 912 bytes
Desc: driver.java
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20100827/af0adac2/attachment.obj 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: block.g
Type: application/octet-stream
Size: 422 bytes
Desc: block.g
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20100827/af0adac2/attachment-0001.obj 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: blockTree.g
Type: application/octet-stream
Size: 435 bytes
Desc: blockTree.g
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20100827/af0adac2/attachment-0002.obj 

From abdulsamiku at yahoo.com  Thu Aug 26 22:46:47 2010
From: abdulsamiku at yahoo.com (Abdul Sami Siddiqui)
Date: Thu, 26 Aug 2010 22:46:47 -0700 (PDT)
Subject: [antlr-interest] Semantic analysis without embedding target
	language code in the actions.
Message-ID: <141501.71664.qm@web56002.mail.re3.yahoo.com>

Hi,

I am implementing a custom language, I need to know if there is any way i can do 
my semantic analysis phase without using the target language code
in the actions? Semantic phase include type checking, type promotion stuff etc. 
Currently I am generating tree from simple grammar than walking that tree 
through tree grammar for semantic analysis and than interpreting it. I don't 
want to embedded the JAVA target code to do type checking stuff as because 
of this the code will not remain portable across target languages. Is there any 
way to do it in ANTLR? 

Thanks.


      

From beginner.nguyen at gmail.com  Fri Aug 27 01:01:14 2010
From: beginner.nguyen at gmail.com (le nguyen)
Date: Fri, 27 Aug 2010 15:01:14 +0700
Subject: [antlr-interest] Help me create treeParser
Message-ID: <AANLkTin8e1Cu=G=Zn=6WTQjOXPj4cGFok8Lk8E_J5bxU@mail.gmail.com>

Hi, everybody,
Please help me this problem:
I do the example on the page:
http://www.antlr.org/wiki/pages/viewpage.action?pageId=1760
in order use this example, i have built the grammar P on ANTLRWork and
generate code to have class PLexer and PParser.
But when i run this code on java Jcreator 4.5:
import org.antlr.runtime.*;
import org.antlr.runtime.tree.*;
import org.antlr.runtime.debug.*;
import org.antlr.runtime.ANTLRStringStream;
import org.antlr.runtime.CharStream;
import ParserAndLexer.*;
public class TestP {
public static void main (String[] args) throws Exception{
    ANTLRInputStream input=new ANTLRInputStream(System.in);
    PLexer lexer=new PLexer(input);
    CommonTokenStream tokens=new CommonTokenStream(lexer);
    ParseTreeBuilder builder=new ParseTreeBuilder("prog");
    PParser parser=new PParser(tokens,builder);
    parser.prog();
    System.out.println(builder.getTree().toStringTree());
}
}
-----------------------------

the error appear:
D:\CAO HOC\TAI LIEU THAM KHAO\ANTLR-EBNF\CREATE PARSTREE\TestP.java:14:
cannot find symbol
symbol  : constructor
PParser(org.antlr.runtime.CommonTokenStream,org.antlr.runtime.debug.ParseTreeBuilder)
location: class ParserAndLexer.PParser
    PParser parser=new PParser(tokens,builder);
---------------------------
When I drop one argument "builder" in method PParser(tokens,builder) then
that error not found. but i don't know how to run to have the following
result:
java TestP
int i;
i=4;
(<grammar prog> (prog (decl (type int) i ;) (stat i = (expr 4))))

note: I have attach a file. Could you have me.
Thanh you very much.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: CREATE PARSTREE.rar
Type: application/rar
Size: 8474 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20100827/b5b35b3d/attachment.bin 

From robermann at gmail.com  Fri Aug 27 01:08:16 2010
From: robermann at gmail.com (Roberto Mannai)
Date: Fri, 27 Aug 2010 10:08:16 +0200
Subject: [antlr-interest] Does Java.g [version 1.0.6] handle unicode
	characters?
Message-ID: <AANLkTinLbgUW9aYxKkQ+qhCeP867iYMJ=775bXG6aQJh@mail.gmail.com>

Hello

I'm trying to understand whether the Java grammar from
http://openjdk.java.net/projects/compiler-grammar/antlrworks/Java.g
processes correctly the Unicode chars or not.

In the file's header I read:
<<
?*? Know problems:
?*??? Won't pass input containing unicode sequence like this
?*????? char c = '\uffff'
?*????? String s = "\uffff";
?*??? Because Antlr does not treat '\uffff' as an valid char. This
will be fixed in the next Antlr
?*??? release. [Fixed in Antlr-3.1.1]
>>

So, it seems that antlr 3.2 should handle the Unicode charset. Anyway,
when I try to parse the following class:

public class TestUnicode {
??????? public static void test (String[] args){
??????????????? char c = '\uffff';
??????? }
}

I get the following error:
      line 3:27 no viable alternative at character 'u'
      line 3:34 mismatched character '\r' expecting '''
      line 1:7 mismatched input 'class' expecting MONKEYS_AT
      line 2:22 mismatched input 'void' expecting MONKEYS_AT
      line 3:21 mismatched input 'c' expecting DOT
      line 3:23 no viable alternative at input '='
      line 4:8 no viable alternative at input '}'
      line 4:8 no viable alternative at input '}'

If I replace the unicode character it of course works. Am I missing
anything? Please note that version 1.0.5 didn't have this problem.

Thanks for your help.

Roberto

From kenneth.domino at domemtech.com  Fri Aug 27 01:56:30 2010
From: kenneth.domino at domemtech.com (Kenneth Domino)
Date: Fri, 27 Aug 2010 04:56:30 -0400
Subject: [antlr-interest] Pls Help: Tree Grammar Bug? or Wrong usage?
	orUnderstanding Gap?
In-Reply-To: <B3F91E1013C53E4B9840FEAD0F12BAAD29945D5EEF@CHN-HCLT-EVS08.HCLT.CORP.HCL.IN>
References: <B3F91E1013C53E4B9840FEAD0F12BAAD29945D5EEF@CHN-HCLT-EVS08.HCLT.CORP.HCL.IN>
Message-ID: <0548DA598B50470E96A1272CA8AC7947@KenPC2010>

> Tree Grammar Output =  {vs{vs} }

What's happening is that you are essentially synthesizing a complex string 
template
containing multiple <v>'s.  This gets evaluated eventually in main(),
which is why you see {vs {vs}}.  Instead, force the substitution
before returning a new template.  So your tree grammar will look like this:

tree grammar blockTree;

options {
  language = Java;
  output = template;
  tokenVocab = block;
  ASTLabelType = CommonTree;
}

@header {
//  package tg_bug;
}

rule: ^(BLOCK (vstring += v)* (sstring+=s)* ENDBLOCK) ->
      template(a={$BLOCK.text}, v={$vstring}, s={$sstring}, 
b={$ENDBLOCK.text})
<< <a><v><s><b> >>
;

v: 'v' -> template() "v";

s: 's' -> template() "s"
 | x=rule ->
      template(r={$x.st.toString()})
 << <r> >>
;

(I took the liberty to change the style of the template spec for "s", and I 
commented out
the 'package tg_bug' decl's to get this thing to compile and run for me. 
Packages-sigh.)
The key change is the template spec for the production "s->rule".  The 
"toString()" forces the
evaluation of the s.t. before creating a new one.

> However if I re-write the grammar as below, I don't have this problem.
>
> b->'{' '}'
>  | '{' v '}'
>  | '{' s '}'
>  | '{' v+ s+ '}'

Not sure which grammar you're referring to b/c there is a parse grammar and
a tree grammar.  Don't do this.  That's not the problem, and it looks ugly.

> RTFM

Reading never really helps. Always better to just debug the friggin' code 
and figure
out what it is doing.

Ken


 


From Armin.Wegner at bka.bund.de  Fri Aug 27 01:56:49 2010
From: Armin.Wegner at bka.bund.de (Armin.Wegner at bka.bund.de)
Date: Fri, 27 Aug 2010 10:56:49 +0200
Subject: [antlr-interest] Searching for strings
Message-ID: <B4B8E9425851B248B8FE8FBC88496ED9055BFBD2@swmmbx01.bk.bka.bund.de>

Hi,

can I use ANTLR to search for URIs in text as I can do it with regular expressions?

Thanks,

Armin

From Nieves.Salor.Moral at esa.int  Fri Aug 27 01:57:50 2010
From: Nieves.Salor.Moral at esa.int (Nieves.Salor.Moral at esa.int)
Date: Fri, 27 Aug 2010 10:57:50 +0200
Subject: [antlr-interest] Syntax Errors in Tree grammars because of trees
 multiplicities
Message-ID: <OFFA93E950.10B4C14C-ONC125778C.002E7229-C125778C.00313D8F@esa.int>

Hello everyone!!

I am currently writing the tree grammar from my parse one, and I have 
discovered that I get errors if I use structures like these:

a: ^(A1 b+)
;

b: ^(B1 b  ^(ACTION c)*)
;

c: whatever


But, it works if I change the previous tree grammar like this:

a: ^(A1 b+)
;

b: ^(B1 b  b_sub*)
;

b_sub: ^(ACTION c)
;

c: whatever


The same happens each time that I use a modifier of multiplicity (?,*,+) 
for a whole parse tree. Why is it not allowed? How can I solve this?

Thanks in advance

Nieves

From robermann at gmail.com  Fri Aug 27 01:59:04 2010
From: robermann at gmail.com (Roberto Mannai)
Date: Fri, 27 Aug 2010 10:59:04 +0200
Subject: [antlr-interest] Java.g [version 1.0.6]: are now non-Javadoc
	comments suppressed?
Message-ID: <AANLkTi=aYkOnh8cRzqyKzDQ-HQfSUbgwt5on=n_qpkow@mail.gmail.com>

Hi all

Maybe I'm overlooking something, but it seems to me that the Java.g
v.1.0.6 grammar (
http://openjdk.java.net/projects/compiler-grammar/antlrworks/Java.g )
does not emit the standard Java comments  ( /* COMMENT */ ).

When I process the following file, with antlr 3.2:

/** Is this comment returned?*/
public class TestComment {
        /* Is this comment returned?*/
}

I get:
      /** Is this comment returned?*/publicclassTestComment{}

One "previous version" (*) returned:
      /** Is this comment returned?*/
      public class TestComment {
              /* Is this comment returned?*/
      }


Is this behaviour really changed or am I missing/forgetting anything?

Thanks,

Roberto

(*) The previous version was based on Java.g v.1.0.5 (it contains also
some template calls, anyway):
http://codesounding.svn.sourceforge.net/viewvc/codesounding/CodeSounding/trunk/src/codesounding/antlr/JavaRewrite.g?view=markup

From k_sarnath at hcl.com  Fri Aug 27 02:16:22 2010
From: k_sarnath at hcl.com (Sarnath K - ERS, HCLTech)
Date: Fri, 27 Aug 2010 14:46:22 +0530
Subject: [antlr-interest] Pls Help: Tree Grammar Bug? or Wrong usage?
 orUnderstanding Gap?
In-Reply-To: <0548DA598B50470E96A1272CA8AC7947@KenPC2010>
References: <B3F91E1013C53E4B9840FEAD0F12BAAD29945D5EEF@CHN-HCLT-EVS08.HCLT.CORP.HCL.IN>
	<0548DA598B50470E96A1272CA8AC7947@KenPC2010>
Message-ID: <B3F91E1013C53E4B9840FEAD0F12BAAD29949F80BC@CHN-HCLT-EVS08.HCLT.CORP.HCL.IN>

Whoa! That worked!! The "toString()" did the magic.
Something to do with ANTLR generated code.. Is this a bug in ANTLR?

Ken, THANKS a LOT!

Best Regards,
Sarnath


From Gordon.Tyler at quest.com  Fri Aug 27 06:16:39 2010
From: Gordon.Tyler at quest.com (Gordon Tyler)
Date: Fri, 27 Aug 2010 06:16:39 -0700
Subject: [antlr-interest] Searching for strings
In-Reply-To: <B4B8E9425851B248B8FE8FBC88496ED9055BFBD2@swmmbx01.bk.bka.bund.de>
References: <B4B8E9425851B248B8FE8FBC88496ED9055BFBD2@swmmbx01.bk.bka.bund.de>
Message-ID: <1FE9A296676737419A8912A6FD22AE1D028DB7B29E@alvxmbw04.prod.quest.corp>

That seems like overkill. You may want to try this regex:

http://daringfireball.net/2010/07/improved_regex_for_matching_urls

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Armin.Wegner at bka.bund.de
Sent: August 27, 2010 4:57 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Searching for strings

Hi,

can I use ANTLR to search for URIs in text as I can do it with regular expressions?

Thanks,

Armin

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From brownrig at ucar.edu  Fri Aug 27 09:46:54 2010
From: brownrig at ucar.edu (Rick Brownrigg)
Date: Fri, 27 Aug 2010 10:46:54 -0600
Subject: [antlr-interest] State of the python target?
Message-ID: <web-31687915@mail.ucar.edu>

Can anyone comment on the state of Python and antlr?  The docs are a 
bit stale (e.g., the python runtime is not where the docs indicate), 
and the last version is aligned with antlr 3.1 and is considered beta. 
 Is this still actively maintained?

Thanks
Rick

From tirelli at post.com  Fri Aug 27 09:56:40 2010
From: tirelli at post.com (Edson Tirelli)
Date: Fri, 27 Aug 2010 12:56:40 -0400
Subject: [antlr-interest] Help debugging ANTLR code
Message-ID: <AANLkTi=ouuqeBjj+T0KjyMct6aiTWMdzxKrLKhV3F6qc@mail.gmail.com>

    Hi all,

    Continuing on the work on Drools grammar, I've split the grammar in 4
smaller grammars as suggested by Jim the other day, but I am still getting
the "code too large" error. I looked throughout the code antlr generated and
the problem happens on DFAs. It generates a method called

        public int specialStateTransition(int s, IntStream _input) throws
NoViableAltException {

    Inside that method, there is a switch case with nested "if"s. In my
case, it is generating things like the bellow for the "if" alternatives:

 else if ( (LA4_1==STRING) &&
     ( ( (evalPredicate(helper.validateLT(1,
DroolsSoftKeywords.QUERY),"helper.validateLT(1, DroolsSoftKeywords.QUERY)")
&&

 evalPredicate((helper.validateIdentifierKey(DroolsSoftKeywords.QUERY)),"(helper.validateIdentifierKey(DroolsSoftKeywords.QUERY))"))
       ||(evalPredicate(helper.validateLT(1,
DroolsSoftKeywords.QUERY),"helper.validateLT(1, DroolsSoftKeywords.QUERY)")
&&

 evalPredicate((helper.validateIdentifierKey(DroolsSoftKeywords.QUERY)),"(helper.validateIdentifierKey(DroolsSoftKeywords.QUERY))"))
       ||(evalPredicate(helper.validateLT(1,
DroolsSoftKeywords.QUERY),"helper.validateLT(1, DroolsSoftKeywords.QUERY)")
&&

 evalPredicate((helper.validateIdentifierKey(DroolsSoftKeywords.QUERY)),"(helper.validateIdentifierKey(DroolsSoftKeywords.QUERY))"))

          ...repeats that hundreds of times...

       ||(evalPredicate(helper.validateLT(1,
DroolsSoftKeywords.QUERY),"helper.validateLT(1, DroolsSoftKeywords.QUERY)")
&&

 evalPredicate((helper.validateIdentifierKey(DroolsSoftKeywords.QUERY)),"(helper.validateIdentifierKey(DroolsSoftKeywords.QUERY))")))))
{s = 5;}


    This is obviously a code generation bug, as the same condition is
repeated over and over. Since I need to move on with this, I will try to
find the problem myself, but I appreciate if anyone can point me to the
right direction, i.e., which classes/templates in ANTLR take care of the
code generation for DFAs.

    The rule that triggers the problem above is like this:

statement
options { k=2; } :
        // some alternatives
| {helper.validateLT(1, DroolsSoftKeywords.QUERY)}?=>    query
        // more alternatives
        ;

     The problem happens on all alternatives, BTW. The above is just a
snippet to show the problem.

     The problem happens both when running with and without -debug, but
obviously the above snippet includes the debug info.

     Thanks,

     Edson

-- 
  Edson Tirelli
  JBoss Drools Core Development
  JBoss by Red Hat @ www.jboss.com

From jimi at temporal-wave.com  Fri Aug 27 10:01:24 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 27 Aug 2010 10:01:24 -0700
Subject: [antlr-interest] State of the python target?
In-Reply-To: <web-31687915@mail.ucar.edu>
References: <web-31687915@mail.ucar.edu>
Message-ID: <001601cb4609$7b532e50$71f98af0$@temporal-wave.com>

As far as I am aware, this target is not actively maintained I am afraid.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Rick Brownrigg
> Sent: Friday, August 27, 2010 9:47 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] State of the python target?
> 
> Can anyone comment on the state of Python and antlr?  The docs are a bit
> stale (e.g., the python runtime is not where the docs indicate), and the
last
> version is aligned with antlr 3.1 and is considered beta.
>  Is this still actively maintained?
> 
> Thanks
> Rick
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From jimi at temporal-wave.com  Fri Aug 27 10:05:10 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 27 Aug 2010 10:05:10 -0700
Subject: [antlr-interest] Help debugging ANTLR code
In-Reply-To: <AANLkTi=ouuqeBjj+T0KjyMct6aiTWMdzxKrLKhV3F6qc@mail.gmail.com>
References: <AANLkTi=ouuqeBjj+T0KjyMct6aiTWMdzxKrLKhV3F6qc@mail.gmail.com>
Message-ID: <001c01cb460a$01d6c220$05844660$@temporal-wave.com>

It's not a bug as the way the DFA has fallen out from your expression of the
grammar. It could be tidier in the code generation of course.
Try changing the parameters for code generation such as increasing the size
of switches and increasing the conversion timeout. See if you can get rid of
any of those predicates too.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Edson Tirelli
> Sent: Friday, August 27, 2010 9:57 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Help debugging ANTLR code
> 
>     Hi all,
> 
>     Continuing on the work on Drools grammar, I've split the grammar in 4
> smaller grammars as suggested by Jim the other day, but I am still getting
the
> "code too large" error. I looked throughout the code antlr generated and
the
> problem happens on DFAs. It generates a method called
> 
>         public int specialStateTransition(int s, IntStream _input) throws
> NoViableAltException {
> 
>     Inside that method, there is a switch case with nested "if"s. In my
case, it is
> generating things like the bellow for the "if" alternatives:
> 
>  else if ( (LA4_1==STRING) &&
>      ( ( (evalPredicate(helper.validateLT(1,
> DroolsSoftKeywords.QUERY),"helper.validateLT(1,
> DroolsSoftKeywords.QUERY)") &&
> 
> 
> evalPredicate((helper.validateIdentifierKey(DroolsSoftKeywords.QUERY)),"(
> helper.validateIdentifierKey(DroolsSoftKeywords.QUERY))"))
>        ||(evalPredicate(helper.validateLT(1,
> DroolsSoftKeywords.QUERY),"helper.validateLT(1,
> DroolsSoftKeywords.QUERY)") &&
> 
> 
> evalPredicate((helper.validateIdentifierKey(DroolsSoftKeywords.QUERY)),"(
> helper.validateIdentifierKey(DroolsSoftKeywords.QUERY))"))
>        ||(evalPredicate(helper.validateLT(1,
> DroolsSoftKeywords.QUERY),"helper.validateLT(1,
> DroolsSoftKeywords.QUERY)") &&
> 
> 
> evalPredicate((helper.validateIdentifierKey(DroolsSoftKeywords.QUERY)),"(
> helper.validateIdentifierKey(DroolsSoftKeywords.QUERY))"))
> 
>           ...repeats that hundreds of times...
> 
>        ||(evalPredicate(helper.validateLT(1,
> DroolsSoftKeywords.QUERY),"helper.validateLT(1,
> DroolsSoftKeywords.QUERY)") &&
> 
> 
> evalPredicate((helper.validateIdentifierKey(DroolsSoftKeywords.QUERY)),"(
> helper.validateIdentifierKey(DroolsSoftKeywords.QUERY))")))))
> {s = 5;}
> 
> 
>     This is obviously a code generation bug, as the same condition is
repeated
> over and over. Since I need to move on with this, I will try to find the
problem
> myself, but I appreciate if anyone can point me to the right direction,
i.e.,
> which classes/templates in ANTLR take care of the code generation for
DFAs.
> 
>     The rule that triggers the problem above is like this:
> 
> statement
> options { k=2; } :
>         // some alternatives
> | {helper.validateLT(1, DroolsSoftKeywords.QUERY)}?=>    query
>         // more alternatives
>         ;
> 
>      The problem happens on all alternatives, BTW. The above is just a
snippet
> to show the problem.
> 
>      The problem happens both when running with and without -debug, but
> obviously the above snippet includes the debug info.
> 
>      Thanks,
> 
>      Edson
> 
> --
>   Edson Tirelli
>   JBoss Drools Core Development
>   JBoss by Red Hat @ www.jboss.com
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From tirelli at post.com  Fri Aug 27 10:14:01 2010
From: tirelli at post.com (Edson Tirelli)
Date: Fri, 27 Aug 2010 13:14:01 -0400
Subject: [antlr-interest] Help debugging ANTLR code
In-Reply-To: <AANLkTinFzMyjV8AoaD0+TV5kyco2jVjHZj-4aF6bqLXZ@mail.gmail.com>
References: <AANLkTi=ouuqeBjj+T0KjyMct6aiTWMdzxKrLKhV3F6qc@mail.gmail.com>
	<001c01cb460a$01d6c220$05844660$@temporal-wave.com>
	<AANLkTinFzMyjV8AoaD0+TV5kyco2jVjHZj-4aF6bqLXZ@mail.gmail.com>
Message-ID: <AANLkTinmAxsmjQfP_92CuynngNcx-Xf-Y_4zxj9XoEAu@mail.gmail.com>

    Jim,

    I know java shortcuts || on true, but on false, those predicates become
**really** expensive... not to mention the size of the code that right now
is causing javac to raise stackoverflow when trying to compile the generated
class...

    I can keep, with trial&error, tweaking my grammar, but the inefficient
code will still be there... doesn't look it should be too difficult to fix
this on code generation, as it is the same predicate generated over and over
with an || in between?! My first choice would be to fix code generation and
hopefully get rid of both the "stack-overflow" and the "code too large"
errors.

    Thanks,

    Edson


2010/8/27 Jim Idle <jimi at temporal-wave.com>

It's not a bug as the way the DFA has fallen out from your expression of the
> grammar. It could be tidier in the code generation of course.
> Try changing the parameters for code generation such as increasing the size
> of switches and increasing the conversion timeout. See if you can get rid
> of
> any of those predicates too.
>
> Jim
>
> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > bounces at antlr.org] On Behalf Of Edson Tirelli
> > Sent: Friday, August 27, 2010 9:57 AM
> > To: antlr-interest at antlr.org
> > Subject: [antlr-interest] Help debugging ANTLR code
> >
> >     Hi all,
> >
> >     Continuing on the work on Drools grammar, I've split the grammar in 4
> > smaller grammars as suggested by Jim the other day, but I am still
> getting
> the
> > "code too large" error. I looked throughout the code antlr generated and
> the
> > problem happens on DFAs. It generates a method called
> >
> >         public int specialStateTransition(int s, IntStream _input) throws
> > NoViableAltException {
> >
> >     Inside that method, there is a switch case with nested "if"s. In my
> case, it is
> > generating things like the bellow for the "if" alternatives:
> >
> >  else if ( (LA4_1==STRING) &&
> >      ( ( (evalPredicate(helper.validateLT(1,
> > DroolsSoftKeywords.QUERY),"helper.validateLT(1,
> > DroolsSoftKeywords.QUERY)") &&
> >
> >
> > evalPredicate((helper.validateIdentifierKey(DroolsSoftKeywords.QUERY)),"(
> > helper.validateIdentifierKey(DroolsSoftKeywords.QUERY))"))
> >        ||(evalPredicate(helper.validateLT(1,
> > DroolsSoftKeywords.QUERY),"helper.validateLT(1,
> > DroolsSoftKeywords.QUERY)") &&
> >
> >
> > evalPredicate((helper.validateIdentifierKey(DroolsSoftKeywords.QUERY)),"(
> > helper.validateIdentifierKey(DroolsSoftKeywords.QUERY))"))
> >        ||(evalPredicate(helper.validateLT(1,
> > DroolsSoftKeywords.QUERY),"helper.validateLT(1,
> > DroolsSoftKeywords.QUERY)") &&
> >
> >
> > evalPredicate((helper.validateIdentifierKey(DroolsSoftKeywords.QUERY)),"(
> > helper.validateIdentifierKey(DroolsSoftKeywords.QUERY))"))
> >
> >           ...repeats that hundreds of times...
> >
> >        ||(evalPredicate(helper.validateLT(1,
> > DroolsSoftKeywords.QUERY),"helper.validateLT(1,
> > DroolsSoftKeywords.QUERY)") &&
> >
> >
> > evalPredicate((helper.validateIdentifierKey(DroolsSoftKeywords.QUERY)),"(
> > helper.validateIdentifierKey(DroolsSoftKeywords.QUERY))")))))
> > {s = 5;}
> >
> >
> >     This is obviously a code generation bug, as the same condition is
> repeated
> > over and over. Since I need to move on with this, I will try to find the
> problem
> > myself, but I appreciate if anyone can point me to the right direction,
> i.e.,
> > which classes/templates in ANTLR take care of the code generation for
> DFAs.
> >
> >     The rule that triggers the problem above is like this:
> >
> > statement
> > options { k=2; } :
> >         // some alternatives
> > | {helper.validateLT(1, DroolsSoftKeywords.QUERY)}?=>    query
> >         // more alternatives
> >         ;
> >
> >      The problem happens on all alternatives, BTW. The above is just a
> snippet
> > to show the problem.
> >
> >      The problem happens both when running with and without -debug, but
> > obviously the above snippet includes the debug info.
> >
> >      Thanks,
> >
> >      Edson
> >
> > --
> >   Edson Tirelli
> >   JBoss Drools Core Development
> >   JBoss by Red Hat @ www.jboss.com
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> > email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>



-- 
  Edson Tirelli
  JBoss Drools Core Development
  JBoss by Red Hat @ www.jboss.com



-- 
  Edson Tirelli
  JBoss Drools Core Development
  JBoss by Red Hat @ www.jboss.com

From jrk1987 at yahoo.co.in  Fri Aug 27 12:56:04 2010
From: jrk1987 at yahoo.co.in (J.R Karthikeyan)
Date: Sat, 28 Aug 2010 01:26:04 +0530 (IST)
Subject: [antlr-interest] deriving from ANTLR class
Message-ID: <57159.87596.qm@web94615.mail.in2.yahoo.com>

Hi,

?? I want to do callback in the custom code block instead of hardcode. Say for 
eg conside I have this rule in my grammar

statements : statement statements EOF {xxxxxx}
??????????????????| statement EOF???????????????? {yyyyy}
??? ??? ??? 
where xxxxxxx and yyyyyyy are some code in c that is doing some work. Instead of 
doing like this I would like to do like

statements : statement statements EOF 
{ANTLR_base_class->match("statements",...)}
??????????????????| 
statement?EOF??????????????????{ANTLR_base_class->match("statement",...)}

Where ANTLR_base_class is some class in ANTLR and say match is virtual function. 
Now i can derive from this base class and I can write my own code. Is it 
possible to do like this in ANTLR for target language c.


From davidblubaugh2000 at yahoo.com  Sat Aug 28 15:24:52 2010
From: davidblubaugh2000 at yahoo.com (David Blubaugh)
Date: Sat, 28 Aug 2010 15:24:52 -0700 (PDT)
Subject: [antlr-interest] Cuda Target
Message-ID: <268653.47931.qm@web113315.mail.gq1.yahoo.com>

To All,
?
Would anyone be interested in assisting me in developing a cuda ANTLR target ??
?
Thank You,
?
David Blubaugh
?
?


      

From lgcraymer at yahoo.com  Sat Aug 28 21:43:45 2010
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Sat, 28 Aug 2010 21:43:45 -0700 (PDT)
Subject: [antlr-interest] Cuda Target
In-Reply-To: <268653.47931.qm@web113315.mail.gq1.yahoo.com>
References: <268653.47931.qm@web113315.mail.gq1.yahoo.com>
Message-ID: <813977.91971.qm@web55901.mail.re3.yahoo.com>

Jim Idle's C target is as good as you are likely to get--ANTLR processing is 
fundamentally sequential.  You will get no performance gains in going to a 
GPGPU.

--Loring


----- Original Message ----
> From: David Blubaugh <davidblubaugh2000 at yahoo.com>
> To: antlr-interest at antlr.org
> Sent: Sat, August 28, 2010 3:24:52 PM
> Subject: [antlr-interest] Cuda Target
> 
> To All,
>  
> Would anyone be interested in assisting me in developing a cuda  ANTLR target 
>??
>  
> Thank You,
>  
> David  Blubaugh
>  
>  
> 
> 
>       
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: 
>http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


      


From tedhoise at yahoo.com  Sun Aug 29 07:40:16 2010
From: tedhoise at yahoo.com (Ted Hoise)
Date: Sun, 29 Aug 2010 07:40:16 -0700 (PDT)
Subject: [antlr-interest] Viable Alternative Rule?
Message-ID: <745791.51507.qm@web45707.mail.sp1.yahoo.com>

VERY simple example

rule : 'H'? ;

When I test this very simple rule, it works (in Antlrworks and Eclipse) of course for input 'H', but it also works for input 'fH', resulting in a token 'fH'.? I do I suppress this behavior:? it seems like an error should occur.




      

From jbb at acm.org  Sun Aug 29 08:53:48 2010
From: jbb at acm.org (John B. Brodie)
Date: Sun, 29 Aug 2010 11:53:48 -0400
Subject: [antlr-interest] Viable Alternative Rule?
In-Reply-To: <745791.51507.qm@web45707.mail.sp1.yahoo.com>
References: <745791.51507.qm@web45707.mail.sp1.yahoo.com>
Message-ID: <1283097228.10101.9.camel@gecko.home.org>

Greetings!

On Sun, 2010-08-29 at 07:40 -0700, Ted Hoise wrote:
> VERY simple example
> 
> rule : 'H'  ;
> 
> When I test this very simple rule, it works (in Antlrworks and Eclipse) of course for input 'H', but it also works for input 'fH', resulting in a token 'fH'.  I do I suppress this behavior:  it seems like an error should occur.
> 

Unable to reproduce.

When I run your examples from the command line I do indeed get an error
on the second example.

Maybe there is something unexpected/unusual about your test rig? (i have
attached the grammar i used in my test so you can compare it to yours)

Hope this helps
   -jbb

-------------- next part --------------
grammar Test;

options {
   output = AST;
   ASTLabelType = CommonTree;
}

@members {
   private static final String [] x = new String[] {
      "H", "fH"
   };

   public static void main(String [] args) {
      for( int i = 0; i < x.length; ++i ) {
         try {
            System.out.println("about to parse:`"+x[i]+"`");
            TestLexer lexer = new TestLexer(new ANTLRStringStream(x[i]));
            CommonTokenStream tokens = new CommonTokenStream(lexer);

            TestParser parser = new TestParser(tokens);
            TestParser.rule_return p_result = parser.rule();

            CommonTree ast = p_result.tree;
            if( ast == null ) {
               System.out.println("resultant tree: is NULL");
            } else {
               System.out.println("resultant tree: " + ast.toStringTree());
            }
            System.out.println();
         } catch(Exception e) {
            e.printStackTrace();
         }
      }
   }
}

rule : 'H' ;

From isaachanstar at gmail.com  Mon Aug 30 01:16:00 2010
From: isaachanstar at gmail.com (=?UTF-8?B?6Z+p6ZS0?=)
Date: Mon, 30 Aug 2010 16:16:00 +0800
Subject: [antlr-interest] C# issue about action code with generic type.
Message-ID: <AANLkTimAOehMdmxFRxrcNHKoTR4zchMyao8Th02VVD4p@mail.gmail.com>

Hi, All,

I encounter some troubles when try to embedded action code with generic type
in C#. Here is my case:

 list: LIST_TYPE { var _list = new List<$LIST_TYPE.text>();  }
     ;

My purpose here is getting generic type from LIST_TYPE, and create a generic
list, such as List<string>, List<int> and so on. However, $LIST_TYPE.text
returns a string value, which makes compile failed. Any suggestion?


-- 
Han kai

"To iterate is human, to recurse divine." - L. Peter Deutsch

From sharwell at pixelminegames.com  Mon Aug 30 06:16:38 2010
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Mon, 30 Aug 2010 08:16:38 -0500
Subject: [antlr-interest] C# issue about action code with generic type.
In-Reply-To: <AANLkTimAOehMdmxFRxrcNHKoTR4zchMyao8Th02VVD4p@mail.gmail.com>
References: <AANLkTimAOehMdmxFRxrcNHKoTR4zchMyao8Th02VVD4p@mail.gmail.com>
Message-ID: <0d5101cb4845$94829440$bd87bcc0$@pixelminegames.com>

In C#, generic type parameters are resolved at compile time. Your code
results in the following:

var _list = new List<"System.String">();

instead of the following valid line:

var _list = new List<System.String>();

One option for your code is using the non-generic ArrayList type. Here's an
additional reference:
http://stackoverflow.com/questions/266115/pass-an-instantiated-system-type-a
s-a-type-parameter-for-a-generic-class

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.
org] On Behalf Of ??
Sent: Monday, August 30, 2010 3:16 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] C# issue about action code with generic type.

Hi, All,

I encounter some troubles when try to embedded action code with generic type
in C#. Here is my case:

 list: LIST_TYPE { var _list = new List<$LIST_TYPE.text>();  }
     ;

My purpose here is getting generic type from LIST_TYPE, and create a generic
list, such as List<string>, List<int> and so on. However, $LIST_TYPE.text
returns a string value, which makes compile failed. Any suggestion?


--
Han kai

"To iterate is human, to recurse divine." - L. Peter Deutsch

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From nvlassopoulos at gmail.com  Mon Aug 30 09:36:22 2010
From: nvlassopoulos at gmail.com (Nick Vlassopoulos)
Date: Mon, 30 Aug 2010 18:36:22 +0200
Subject: [antlr-interest] Viable Alternative Rule?
In-Reply-To: <745791.51507.qm@web45707.mail.sp1.yahoo.com>
References: <745791.51507.qm@web45707.mail.sp1.yahoo.com>
Message-ID: <AANLkTikukBOD4LTiGPDkMVjB047k5MZJthts-h3R75i3@mail.gmail.com>

Hello,

Maybe you somehow suppress the console output?
As far as I've seen, the antlrworks debugger (output tab) complains for
a mismatched character (although it proceeds to see the 'H' and build
a parse tree)

HTH,

Nikos


On Sun, Aug 29, 2010 at 4:40 PM, Ted Hoise <tedhoise at yahoo.com> wrote:

> VERY simple example
>
> rule : 'H'  ;
>
> When I test this very simple rule, it works (in Antlrworks and Eclipse) of
> course for input 'H', but it also works for input 'fH', resulting in a token
> 'fH'.  I do I suppress this behavior:  it seems like an error should occur.
>
>
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From stempuro2 at gmail.com  Mon Aug 30 13:01:28 2010
From: stempuro2 at gmail.com (st3)
Date: Mon, 30 Aug 2010 13:01:28 -0700 (PDT)
Subject: [antlr-interest] Subrule alternatives - MismatchedTokenException
	cannot be explained
Message-ID: <1283198488987-5479806.post@n2.nabble.com>


Hi,

I have a simple grammar - which includes a '+' or '-' operation on a
variable (ID) or constant (INT).
The "add" rule is obviously: "mult" (+/- "mult"). 

However, the way I need the "add" rule defined throws the
MismatchedTokenException:
----------------------------------------------------------------------------
add	:	mult	
		( 
			('+' mult) 
			| 
			('-' mult) 
		)*
	;

while this way to define "add" rule works just fine:
----------------------------------------------------------------------------
add	:	mult ( ( '+' | '-' ) mult)*	;


Can you please give some insights white Antlr 3.0 does not like the first
way to define "add" rule?
The reason I need it this way is to use tree rewrites.

I tried using syntactic predicates but they error out. I have consulted
Anltr reference book as well - however nothing obvious jumped at me.

Full grammar below.

Thanks a lot for your help!



grammar Dummy;

expr : add ';' ;

add	:	mult	
		( 
			('+' mult) 
			| 
			('-' mult) 
		)*
	;

//add	:	mult ( ( '+' | '-' ) mult)*	;

mult	:	constant
		|	variable
		|	'(' expr ')'
		;
						
variable	:	ID;	
constant	:	INT;

ID  :	('a'..'z'|'A'..'Z') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')* ;
INT :	'0'..'9'+;
WS  :   ( ' ' | '\t' | '\r' | '\n' ) { $channel=HIDDEN; } ;

-- 
View this message in context: http://antlr.1301665.n2.nabble.com/Subrule-alternatives-MismatchedTokenException-cannot-be-explained-tp5479806p5479806.html
Sent from the ANTLR mailing list archive at Nabble.com.

From jbb at acm.org  Mon Aug 30 14:00:29 2010
From: jbb at acm.org (John B. Brodie)
Date: Mon, 30 Aug 2010 17:00:29 -0400
Subject: [antlr-interest] Subrule alternatives -
 MismatchedTokenException cannot be explained
In-Reply-To: <1283198488987-5479806.post@n2.nabble.com>
References: <1283198488987-5479806.post@n2.nabble.com>
Message-ID: <1283202029.18999.14.camel@gecko.home.org>

Greetings!

On Mon, 2010-08-30 at 13:01 -0700, st3 wrote:
> Hi,
> 
> I have a simple grammar - which includes a '+' or '-' operation on a
> variable (ID) or constant (INT).
> The "add" rule is obviously: "mult" (+/- "mult"). 
> 
> However, the way I need the "add" rule defined throws the
> MismatchedTokenException:
> ----------------------------------------------------------------------------
> add	:	mult	
> 		( 
> 			('+' mult) 
> 			| 
> 			('-' mult) 
> 		)*
> 	;
> 
> while this way to define "add" rule works just fine:
> ----------------------------------------------------------------------------
> add	:	mult ( ( '+' | '-' ) mult)*	;
> 
> 
> Can you please give some insights white Antlr 3.0 does not like the first
> way to define "add" rule?

unable to reproduce.

both ways work equally well for me when i run the org.antlr.Tool from
the command line on the Dummy.g grammar you supplied. both get a warning
about no start rule that can end in EOF, but is easily fixed by adding a
rule:

start : expr EOF ;

I am currently using ANTLR 3.1.2 (because I happen to need a python
target) perhaps there is a difference in the versions? (i doubt it)


> The reason I need it this way is to use tree rewrites.
> 
> I tried using syntactic predicates but they error out. I have consulted
> Anltr reference book as well - however nothing obvious jumped at me.
> 
> Full grammar below.
> 
> Thanks a lot for your help!

hope this helps...
   -jbb

> 
> 
> 
> grammar Dummy;
> 
> expr : add ';' ;
> 
> add	:	mult	
> 		( 
> 			('+' mult) 
> 			| 
> 			('-' mult) 
> 		)*
> 	;
> 
> //add	:	mult ( ( '+' | '-' ) mult)*	;
> 
> mult	:	constant
> 		|	variable
> 		|	'(' expr ')'
> 		;
> 						
> variable	:	ID;	
> constant	:	INT;
> 
> ID  :	('a'..'z'|'A'..'Z') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')* ;
> INT :	'0'..'9'+;
> WS  :   ( ' ' | '\t' | '\r' | '\n' ) { $channel=HIDDEN; } ;
> 




From howaryoo at gmail.com  Tue Aug 31 13:22:41 2010
From: howaryoo at gmail.com (aryoo)
Date: Tue, 31 Aug 2010 22:22:41 +0200
Subject: [antlr-interest] How to create a data entry GUI corresponding to a
	grammar
In-Reply-To: <AANLkTi=4TOcb=d2FhyppZ-gJQk1n8kGj+guERZG-wSqu@mail.gmail.com>
References: <AANLkTi=4TOcb=d2FhyppZ-gJQk1n8kGj+guERZG-wSqu@mail.gmail.com>
Message-ID: <AANLkTinbXA3C4M4pOnGfiFTkM2F3yxY=ykaxKb-DtsNC@mail.gmail.com>

Hello,

I would like to create a GUI to help/guide users type in data according to a
grammar.
This GUI could be a tree/graph widget in which the nodes can only take
certain values according to the corresponding rule in the grammar.

More specifically, when the user wants to create a new tree/graph, he needs
to create the root and can only provide the starting rule. Once the root
node is created the user can provide it's children etc, etc.

I did some tinkering in Python with a tree grammar that outputs an AST. If I
run the parser on some sample input, I do get a nice tree of type:
antlr3.tree.CommonTree whose children and node type are available from the
root.

There must be a nicer way to do this without having to provide some input to
the parser.

Any ideas, recommendations or remarks would be greatly appreciated.

Regards,
Arye.

From motital at gmail.com  Tue Aug 31 14:41:16 2010
From: motital at gmail.com (Moti Tal)
Date: Wed, 1 Sep 2010 00:41:16 +0300
Subject: [antlr-interest] ANTLRWorks - debug timeout issue
Message-ID: <AANLkTi=+mujmu5qK-pPAyY3dNRXzFhHWCd+XwKrn025W@mail.gmail.com>

I am trying to debug using ANTLRWorks.
I have followed the step by step instructions from"Expression Evaluator
Tutorial" and got stuck.
I received the timeout-issue which mentioned at "Expression Evaluator
Tutorial".
I am using win XP with no firewall. (I try several ports)
any idea?

From cracker_jack_04 at yahoo.com  Tue Aug 31 17:48:51 2010
From: cracker_jack_04 at yahoo.com (cjack04)
Date: Tue, 31 Aug 2010 17:48:51 -0700 (PDT)
Subject: [antlr-interest] NoViableAltException not being thrown from Parser
Message-ID: <1283302131261-5485028.post@n2.nabble.com>


I have a grammar file built to validate java style expressions that we submit
to the BeanShell interpreter for excecution. The grammar compiles fine and I
have the Parser & Lexer files which seem to be working fine for most of the
cases. 

My main problem is with the error reporting. I want to collect the parsing
errors for the expression that I validate and I followed the examples on
this page for my error reporting

http://www.antlr.org/wiki/display/ANTLR3/Error+reporting+and+recovery

I treat the expression as valid if there are no RecognitionErrors thrown &
collected in the parser.

But for some cases with invalid expressions, the NoViableAltException is not
being thrown at all and hence there is no error collection in the parser.
Strange thing is, if I submit the same expression in my eclipse Antlr IDE
environment to the Interpreter, the NoViableAltException shows up as
expected.

I am puzzled as to why the same grammar file works in my eclipse Antlr
Interpreter, but the parser generated from the grammar file does not work
the same way.

Any ideas highly appreciated. Thanks in advance.
-- 
View this message in context: http://antlr.1301665.n2.nabble.com/NoViableAltException-not-being-thrown-from-Parser-tp5485028p5485028.html
Sent from the ANTLR mailing list archive at Nabble.com.

From cracker_jack_04 at yahoo.com  Tue Aug 31 18:00:35 2010
From: cracker_jack_04 at yahoo.com (cjack04)
Date: Tue, 31 Aug 2010 18:00:35 -0700 (PDT)
Subject: [antlr-interest] NoViableAltException not being thrown from
	Parser
In-Reply-To: <1283302131261-5485028.post@n2.nabble.com>
References: <1283302131261-5485028.post@n2.nabble.com>
Message-ID: <1283302835741-5485067.post@n2.nabble.com>


My grammar file
-----------------------------------------------------------------------
grammar CPS;

options {
  language = Java;
}
@header {
  package com.test.calculator;

  import java.util.Set;
  import java.util.HashSet;  
}

@lexer::header {
  package com.test.calculator;
}

@members
{
	private Set<String> variables = new HashSet<String>();
	private Set<String> functions = new HashSet<String>();
	private List<String> errors = new ArrayList<String>();
  
	public CPSParser(TokenStream input, int foo) 
	{
	    this(input);
	}
	
	public Set<String> getVariables() 
	{
	    return variables;
	}
	
	public Set<String> getFunctions() 
	{
	    return functions;
	}
		
	protected void mismatch(IntStream input, int ttype, BitSet follow)
	    throws RecognitionException
	{
	   throw new MismatchedTokenException(ttype, input);
	}
	
  public void displayRecognitionError(String[] tokenNames,
                                        RecognitionException e) 
  {
      String hdr = getErrorHeader(e);
      String msg = getErrorMessage(e, tokenNames);
      errors.add(hdr + " " + msg);
  }
  
  public List<String> getErrors() 
  {
      return errors;
  }
	
	protected Object recoverFromMismatchedToken(IntStream input,
	                                            int ttype,
	                                            BitSet follow)
	    throws RecognitionException
	{   
	    throw new MismatchedTokenException(ttype, input);
	}
	
	public boolean isEquationValid()
	{
      return (errors.size() == 0);
  }	

}

prog
    :
    expression;
     
expressionList
    :
    expression (',' expression)*
    ;
    
// EXPRESSIONS

expression
    :
    conditionalExpression (assignmentOperator expression)?
    ;

parExpression
    :   '(' expression ')'
    ;
       
assignmentOperator
    :   '='
    |   '+='
    |   '-='
    |   '*='
    |   '/='
    |   '&='
    |   '|='
    |   '^='
    |   '%='
    |   '<<='
    |   '>>>='
    |   '>>='    
    ;

conditionalExpression
    :   conditionalOrExpression ( '?' expression ':' expression )?
    ;
    
conditionalOrExpression
    :   conditionalAndExpression ( '||' conditionalAndExpression )*
    ;

conditionalAndExpression
    :   inclusiveOrExpression ( '&&' inclusiveOrExpression )*
    ;

inclusiveOrExpression
    :   exclusiveOrExpression ( '|' exclusiveOrExpression )*
    ;

exclusiveOrExpression
    :   andExpression ( '^' andExpression )*
    ;

andExpression
    :   equalityExpression ( '&' equalityExpression )*
    ;

equalityExpression
    :   instanceOfExpression ( ('==' | '!=' ) instanceOfExpression )*
    ;

instanceOfExpression
    :   relationalExpression
    ;

relationalExpression
    :   shiftExpression ( relationalOp shiftExpression )*
    ;
    
relationalOp
    :   ('<=') 
    |   ('>=') 
    |   '<' 
    |   '>' 
    |   '&gt;'
    |   '&gt;='
    |   '&lt;'
    |   '&lt;='    
    ;
    

shiftExpression
    :   additiveExpression ( shiftOp additiveExpression )*
    ;

shiftOp
    :   ('<' '<') 
    |   ('>' '>' '>') 
    |   ('>' '>')
    ;


additiveExpression
    :   multiplicativeExpression ( ('+' | '-') multiplicativeExpression )*
    ;

multiplicativeExpression
    :   unaryExpression ( ( '*' | '/' | '%' ) unaryExpression )*
    ;
    
unaryExpression
    :   '+' unaryExpression
    |   '-' unaryExpression
    |   '++' unaryExpression
    |   '--' unaryExpression
    |   unaryExpressionNotPlusMinus
    ;

unaryExpressionNotPlusMinus
    :   '~' unaryExpression
    |   '!' unaryExpression
    |   primary
    ;
    
primary
    :   parExpression
    |   Identifier ('.' Identifier)* identifierSuffix? {
	    if ($primary.text.indexOf("(") != -1)
	    {
        System.out.println("Found function::" + $primary.text.substring(0,
$primary.text.indexOf("(")));         
        functions.add($primary.text.substring(0,
$primary.text.indexOf("(")));	       
	    }
	    else
	    {   
        System.out.println("Found DD Var::" + $primary.text);	       
	      variables.add($primary.text);
	    }
    }
    |   Identifier '.equals' arguments  {variables.add($Identifier.text);
System.out.println("Found DD Var::" + $Identifier.text);}
    | literal
    ;

identifierSuffix
    : ('[' expression ']')+ // can also be matched by selector, but do here
    |   arguments ('.equals' arguments)?
    ;
    
arguments
    :   '(' expressionList? ')'
    ;

literal 
    :   integerLiteral
    |   FloatingPointLiteral
    |   CharacterLiteral
    |   StringLiteral
    |   booleanLiteral
    |   'null'
    ;

integerLiteral
    :   HexLiteral
    |   OctalLiteral
    |   DecimalLiteral
    ;

booleanLiteral
    :   'true'
    |   'false'
    ;         

WS  :  (' '|'\r'|'\t'|'\u000C'|'\n')+ {$channel=HIDDEN;}
    ;
    
HexLiteral : '0' ('x'|'X') HexDigit+ IntegerTypeSuffix? ;

DecimalLiteral : ('0' | '1'..'9' '0'..'9'*) IntegerTypeSuffix? ;

OctalLiteral : '0' ('0'..'7')+ IntegerTypeSuffix? ;

fragment
HexDigit : ('0'..'9'|'a'..'f'|'A'..'F') ;

fragment
IntegerTypeSuffix : ('l'|'L') ;

FloatingPointLiteral
    :   ('0'..'9')+ '.' ('0'..'9')* Exponent? FloatTypeSuffix?
    |   '.' ('0'..'9')+ Exponent? FloatTypeSuffix?
    |   ('0'..'9')+ Exponent FloatTypeSuffix?
    |   ('0'..'9')+ FloatTypeSuffix
    ;

fragment
Exponent : ('e'|'E') ('+'|'-')? ('0'..'9')+ ;

fragment
FloatTypeSuffix : ('f'|'F'|'d'|'D') ;

CharacterLiteral
    :   '\'' ( EscapeSequence | ~('\''|'\\') ) '\''
    ;

StringLiteral
    :   '"' ('a'..'z' | 'A'..'Z' | '0'..'9'| '-' |'_')* '"'
//     '"' ( EscapeSequence | ~('\\'|'"') )* '"'
    ;

fragment
EscapeSequence
    :   '\\' ('b'|'t'|'n'|'f'|'r'|'\"'|'\''|'\\')
    |   UnicodeEscape
    |   OctalEscape
    ;

fragment
OctalEscape
    :   '\\' ('0'..'3') ('0'..'7') ('0'..'7')
    |   '\\' ('0'..'7') ('0'..'7')
    |   '\\' ('0'..'7')
    ;

fragment
UnicodeEscape
    :   '\\' 'u' HexDigit HexDigit HexDigit HexDigit
    ;
    
Identifier
    :   IdentifierStart IdentifierPart*
    ;

fragment
SurrogateIdentifer 
    :   ('\ud800'..'\udbff') ('\udc00'..'\udfff') 
    ;                 

fragment
IdentifierStart
    :   '\u0024'
    |   '\u0041'..'\u005a'
    |   '\u005f'
    |   '\u0061'..'\u007a'
    |   '\u00a2'..'\u00a5'
    |   '\u00aa'
    |   '\u00b5'
    |   '\u00ba'
    |   '\u00c0'..'\u00d6'
    |   '\u00d8'..'\u00f6'
    |   '\u00f8'..'\u0236'
    |   '\u0250'..'\u02c1'
    |   '\u02c6'..'\u02d1'
    |   '\u02e0'..'\u02e4'
    |   '\u02ee'
    |   '\u037a'
    |   '\u0386'
    |   '\u0388'..'\u038a'
    |   '\u038c'
    |   '\u038e'..'\u03a1'
    |   '\u03a3'..'\u03ce'
    |   '\u03d0'..'\u03f5'
    |   '\u03f7'..'\u03fb'
    |   '\u0400'..'\u0481'
    |   '\u048a'..'\u04ce'
    |   '\u04d0'..'\u04f5'
    |   '\u04f8'..'\u04f9'
    |   '\u0500'..'\u050f'
    |   '\u0531'..'\u0556'
    |   '\u0559'
    |   '\u0561'..'\u0587'
    |   '\u05d0'..'\u05ea'
    |   '\u05f0'..'\u05f2'
    |   '\u0621'..'\u063a'
    |   '\u0640'..'\u064a'
    |   '\u066e'..'\u066f'
    |   '\u0671'..'\u06d3'
    |   '\u06d5'
    |   '\u06e5'..'\u06e6'
    |   '\u06ee'..'\u06ef'
    |   '\u06fa'..'\u06fc'
    |   '\u06ff'
    |   '\u0710'
    |   '\u0712'..'\u072f'
    |   '\u074d'..'\u074f'
    |   '\u0780'..'\u07a5'
    |   '\u07b1'
    |   '\u0904'..'\u0939'
    |   '\u093d'
    |   '\u0950'
    |   '\u0958'..'\u0961'
    |   '\u0985'..'\u098c'
    |   '\u098f'..'\u0990'
    |   '\u0993'..'\u09a8'
    |   '\u09aa'..'\u09b0'
    |   '\u09b2'
    |   '\u09b6'..'\u09b9'
    |   '\u09bd'
    |   '\u09dc'..'\u09dd'
    |   '\u09df'..'\u09e1'
    |   '\u09f0'..'\u09f3'
    |   '\u0a05'..'\u0a0a'
    |   '\u0a0f'..'\u0a10'
    |   '\u0a13'..'\u0a28'
    |   '\u0a2a'..'\u0a30'
    |   '\u0a32'..'\u0a33'
    |   '\u0a35'..'\u0a36'
    |   '\u0a38'..'\u0a39'
    |   '\u0a59'..'\u0a5c'
    |   '\u0a5e'
    |   '\u0a72'..'\u0a74'
    |   '\u0a85'..'\u0a8d'
    |   '\u0a8f'..'\u0a91'
    |   '\u0a93'..'\u0aa8'
    |   '\u0aaa'..'\u0ab0'
    |   '\u0ab2'..'\u0ab3'
    |   '\u0ab5'..'\u0ab9'
    |   '\u0abd'
    |   '\u0ad0'
    |   '\u0ae0'..'\u0ae1'
    |   '\u0af1'
    |   '\u0b05'..'\u0b0c'
    |   '\u0b0f'..'\u0b10'
    |   '\u0b13'..'\u0b28'
    |   '\u0b2a'..'\u0b30'
    |   '\u0b32'..'\u0b33'
    |   '\u0b35'..'\u0b39'
    |   '\u0b3d'
    |   '\u0b5c'..'\u0b5d'
    |   '\u0b5f'..'\u0b61'
    |   '\u0b71'
    |   '\u0b83'
    |   '\u0b85'..'\u0b8a'
    |   '\u0b8e'..'\u0b90'
    |   '\u0b92'..'\u0b95'
    |   '\u0b99'..'\u0b9a'
    |   '\u0b9c'
    |   '\u0b9e'..'\u0b9f'
    |   '\u0ba3'..'\u0ba4'
    |   '\u0ba8'..'\u0baa'
    |   '\u0bae'..'\u0bb5'
    |   '\u0bb7'..'\u0bb9'
    |   '\u0bf9'
    |   '\u0c05'..'\u0c0c'
    |   '\u0c0e'..'\u0c10'
    |   '\u0c12'..'\u0c28'
    |   '\u0c2a'..'\u0c33'
    |   '\u0c35'..'\u0c39'
    |   '\u0c60'..'\u0c61'
    |   '\u0c85'..'\u0c8c'
    |   '\u0c8e'..'\u0c90'
    |   '\u0c92'..'\u0ca8'
    |   '\u0caa'..'\u0cb3'
    |   '\u0cb5'..'\u0cb9'
    |   '\u0cbd'
    |   '\u0cde'
    |   '\u0ce0'..'\u0ce1'
    |   '\u0d05'..'\u0d0c'
    |   '\u0d0e'..'\u0d10'
    |   '\u0d12'..'\u0d28'
    |   '\u0d2a'..'\u0d39'
    |   '\u0d60'..'\u0d61'
    |   '\u0d85'..'\u0d96'
    |   '\u0d9a'..'\u0db1'
    |   '\u0db3'..'\u0dbb'
    |   '\u0dbd'
    |   '\u0dc0'..'\u0dc6'
    |   '\u0e01'..'\u0e30'
    |   '\u0e32'..'\u0e33'
    |   '\u0e3f'..'\u0e46'
    |   '\u0e81'..'\u0e82'
    |   '\u0e84'
    |   '\u0e87'..'\u0e88'
    |   '\u0e8a'
    |   '\u0e8d'
    |   '\u0e94'..'\u0e97'
    |   '\u0e99'..'\u0e9f'
    |   '\u0ea1'..'\u0ea3'
    |   '\u0ea5'
    |   '\u0ea7'
    |   '\u0eaa'..'\u0eab'
    |   '\u0ead'..'\u0eb0'
    |   '\u0eb2'..'\u0eb3'
    |   '\u0ebd'
    |   '\u0ec0'..'\u0ec4'
    |   '\u0ec6'
    |   '\u0edc'..'\u0edd'
    |   '\u0f00'
    |   '\u0f40'..'\u0f47'
    |   '\u0f49'..'\u0f6a'
    |   '\u0f88'..'\u0f8b'
    |   '\u1000'..'\u1021'
    |   '\u1023'..'\u1027'
    |   '\u1029'..'\u102a'
    |   '\u1050'..'\u1055'
    |   '\u10a0'..'\u10c5'
    |   '\u10d0'..'\u10f8'
    |   '\u1100'..'\u1159'
    |   '\u115f'..'\u11a2'
    |   '\u11a8'..'\u11f9'
    |   '\u1200'..'\u1206'
    |   '\u1208'..'\u1246'
    |   '\u1248'
    |   '\u124a'..'\u124d'
    |   '\u1250'..'\u1256'
    |   '\u1258'
    |   '\u125a'..'\u125d'
    |   '\u1260'..'\u1286'
    |   '\u1288'
    |   '\u128a'..'\u128d'
    |   '\u1290'..'\u12ae'
    |   '\u12b0'
    |   '\u12b2'..'\u12b5'
    |   '\u12b8'..'\u12be'
    |   '\u12c0'
    |   '\u12c2'..'\u12c5'
    |   '\u12c8'..'\u12ce'
    |   '\u12d0'..'\u12d6'
    |   '\u12d8'..'\u12ee'
    |   '\u12f0'..'\u130e'
    |   '\u1310'
    |   '\u1312'..'\u1315'
    |   '\u1318'..'\u131e'
    |   '\u1320'..'\u1346'
    |   '\u1348'..'\u135a'
    |   '\u13a0'..'\u13f4'
    |   '\u1401'..'\u166c'
    |   '\u166f'..'\u1676'
    |   '\u1681'..'\u169a'
    |   '\u16a0'..'\u16ea'
    |   '\u16ee'..'\u16f0'
    |   '\u1700'..'\u170c'
    |   '\u170e'..'\u1711'
    |   '\u1720'..'\u1731'
    |   '\u1740'..'\u1751'
    |   '\u1760'..'\u176c'
    |   '\u176e'..'\u1770'
    |   '\u1780'..'\u17b3'
    |   '\u17d7' 
    |   '\u17db'..'\u17dc'
    |   '\u1820'..'\u1877'
    |   '\u1880'..'\u18a8'
    |   '\u1900'..'\u191c'
    |   '\u1950'..'\u196d'
    |   '\u1970'..'\u1974'
    |   '\u1d00'..'\u1d6b'
    |   '\u1e00'..'\u1e9b'
    |   '\u1ea0'..'\u1ef9'
    |   '\u1f00'..'\u1f15'
    |   '\u1f18'..'\u1f1d'
    |   '\u1f20'..'\u1f45'
    |   '\u1f48'..'\u1f4d'
    |   '\u1f50'..'\u1f57'
    |   '\u1f59'
    |   '\u1f5b'
    |   '\u1f5d'
    |   '\u1f5f'..'\u1f7d'
    |   '\u1f80'..'\u1fb4'
    |   '\u1fb6'..'\u1fbc'
    |   '\u1fbe'
    |   '\u1fc2'..'\u1fc4'
    |   '\u1fc6'..'\u1fcc'
    |   '\u1fd0'..'\u1fd3'
    |   '\u1fd6'..'\u1fdb'
    |   '\u1fe0'..'\u1fec'
    |   '\u1ff2'..'\u1ff4'
    |   '\u1ff6'..'\u1ffc'
    |   '\u203f'..'\u2040'
    |   '\u2054'
    |   '\u2071'
    |   '\u207f'
    |   '\u20a0'..'\u20b1'
    |   '\u2102'
    |   '\u2107'
    |   '\u210a'..'\u2113'
    |   '\u2115'
    |   '\u2119'..'\u211d'
    |   '\u2124'
    |   '\u2126'
    |   '\u2128'
    |   '\u212a'..'\u212d'
    |   '\u212f'..'\u2131'
    |   '\u2133'..'\u2139'
    |   '\u213d'..'\u213f'
    |   '\u2145'..'\u2149'
    |   '\u2160'..'\u2183'
    |   '\u3005'..'\u3007'
    |   '\u3021'..'\u3029'
    |   '\u3031'..'\u3035'
    |   '\u3038'..'\u303c'
    |   '\u3041'..'\u3096'
    |   '\u309d'..'\u309f'
    |   '\u30a1'..'\u30ff'
    |   '\u3105'..'\u312c'
    |   '\u3131'..'\u318e'
    |   '\u31a0'..'\u31b7'
    |   '\u31f0'..'\u31ff'
    |   '\u3400'..'\u4db5'
    |   '\u4e00'..'\u9fa5'
    |   '\ua000'..'\ua48c'
    |   '\uac00'..'\ud7a3'
    |   '\uf900'..'\ufa2d'
    |   '\ufa30'..'\ufa6a'
    |   '\ufb00'..'\ufb06'
    |   '\ufb13'..'\ufb17'
    |   '\ufb1d'
    |   '\ufb1f'..'\ufb28'
    |   '\ufb2a'..'\ufb36'
    |   '\ufb38'..'\ufb3c'
    |   '\ufb3e'
    |   '\ufb40'..'\ufb41'
    |   '\ufb43'..'\ufb44'
    |   '\ufb46'..'\ufbb1'
    |   '\ufbd3'..'\ufd3d'
    |   '\ufd50'..'\ufd8f'
    |   '\ufd92'..'\ufdc7'
    |   '\ufdf0'..'\ufdfc'
    |   '\ufe33'..'\ufe34'
    |   '\ufe4d'..'\ufe4f'
    |   '\ufe69'
    |   '\ufe70'..'\ufe74'
    |   '\ufe76'..'\ufefc'
    |   '\uff04'
    |   '\uff21'..'\uff3a'
    |   '\uff3f'
    |   '\uff41'..'\uff5a'
    |   '\uff65'..'\uffbe'
    |   '\uffc2'..'\uffc7'
    |   '\uffca'..'\uffcf'
    |   '\uffd2'..'\uffd7'
    |   '\uffda'..'\uffdc'
    |   '\uffe0'..'\uffe1'
    |   '\uffe5'..'\uffe6'
    |   ('\ud800'..'\udbff') ('\udc00'..'\udfff') 
    ;                
                       
fragment 
IdentifierPart
    :   '\u0000'..'\u0008'
    |   '\u000e'..'\u001b'
    |   '\u0024'
    |   '\u0030'..'\u0039'
    |   '\u0041'..'\u005a'
    |   '\u005f'
    |   '\u0061'..'\u007a'
    |   '\u007f'..'\u009f'
    |   '\u00a2'..'\u00a5'
    |   '\u00aa'
    |   '\u00ad'
    |   '\u00b5'
    |   '\u00ba'
    |   '\u00c0'..'\u00d6'
    |   '\u00d8'..'\u00f6'
    |   '\u00f8'..'\u0236'
    |   '\u0250'..'\u02c1'
    |   '\u02c6'..'\u02d1'
    |   '\u02e0'..'\u02e4'
    |   '\u02ee'
    |   '\u0300'..'\u0357'
    |   '\u035d'..'\u036f'
    |   '\u037a'
    |   '\u0386'
    |   '\u0388'..'\u038a'
    |   '\u038c'
    |   '\u038e'..'\u03a1'
    |   '\u03a3'..'\u03ce'
    |   '\u03d0'..'\u03f5'
    |   '\u03f7'..'\u03fb'
    |   '\u0400'..'\u0481'
    |   '\u0483'..'\u0486'
    |   '\u048a'..'\u04ce'
    |   '\u04d0'..'\u04f5'
    |   '\u04f8'..'\u04f9'
    |   '\u0500'..'\u050f'
    |   '\u0531'..'\u0556'
    |   '\u0559'
    |   '\u0561'..'\u0587'
    |   '\u0591'..'\u05a1'
    |   '\u05a3'..'\u05b9'
    |   '\u05bb'..'\u05bd'
    |   '\u05bf'
    |   '\u05c1'..'\u05c2'
    |   '\u05c4'
    |   '\u05d0'..'\u05ea'
    |   '\u05f0'..'\u05f2'
    |   '\u0600'..'\u0603'
    |   '\u0610'..'\u0615'
    |   '\u0621'..'\u063a'
    |   '\u0640'..'\u0658'
    |   '\u0660'..'\u0669'
    |   '\u066e'..'\u06d3'
    |   '\u06d5'..'\u06dd'
    |   '\u06df'..'\u06e8'
    |   '\u06ea'..'\u06fc'
    |   '\u06ff'
    |   '\u070f'..'\u074a'
    |   '\u074d'..'\u074f'
    |   '\u0780'..'\u07b1'
    |   '\u0901'..'\u0939'
    |   '\u093c'..'\u094d'
    |   '\u0950'..'\u0954'
    |   '\u0958'..'\u0963'
    |   '\u0966'..'\u096f'
    |   '\u0981'..'\u0983'
    |   '\u0985'..'\u098c'
    |   '\u098f'..'\u0990'
    |   '\u0993'..'\u09a8'
    |   '\u09aa'..'\u09b0'
    |   '\u09b2'
    |   '\u09b6'..'\u09b9'
    |   '\u09bc'..'\u09c4'
    |   '\u09c7'..'\u09c8'
    |   '\u09cb'..'\u09cd'
    |   '\u09d7'
    |   '\u09dc'..'\u09dd'
    |   '\u09df'..'\u09e3'
    |   '\u09e6'..'\u09f3'
    |   '\u0a01'..'\u0a03'
    |   '\u0a05'..'\u0a0a'
    |   '\u0a0f'..'\u0a10'
    |   '\u0a13'..'\u0a28'
    |   '\u0a2a'..'\u0a30'
    |   '\u0a32'..'\u0a33'
    |   '\u0a35'..'\u0a36'
    |   '\u0a38'..'\u0a39'
    |   '\u0a3c'
    |   '\u0a3e'..'\u0a42'
    |   '\u0a47'..'\u0a48'
    |   '\u0a4b'..'\u0a4d'
    |   '\u0a59'..'\u0a5c'
    |   '\u0a5e'
    |   '\u0a66'..'\u0a74'
    |   '\u0a81'..'\u0a83'
    |   '\u0a85'..'\u0a8d'
    |   '\u0a8f'..'\u0a91'
    |   '\u0a93'..'\u0aa8'
    |   '\u0aaa'..'\u0ab0'
    |   '\u0ab2'..'\u0ab3'
    |   '\u0ab5'..'\u0ab9'
    |   '\u0abc'..'\u0ac5'
    |   '\u0ac7'..'\u0ac9'
    |   '\u0acb'..'\u0acd'
    |   '\u0ad0'
    |   '\u0ae0'..'\u0ae3'
    |   '\u0ae6'..'\u0aef'
    |   '\u0af1'
    |   '\u0b01'..'\u0b03'
    |   '\u0b05'..'\u0b0c'        
    |   '\u0b0f'..'\u0b10'
    |   '\u0b13'..'\u0b28'
    |   '\u0b2a'..'\u0b30'
    |   '\u0b32'..'\u0b33'
    |   '\u0b35'..'\u0b39'
    |   '\u0b3c'..'\u0b43'
    |   '\u0b47'..'\u0b48'
    |   '\u0b4b'..'\u0b4d'
    |   '\u0b56'..'\u0b57'
    |   '\u0b5c'..'\u0b5d'
    |   '\u0b5f'..'\u0b61'
    |   '\u0b66'..'\u0b6f'
    |   '\u0b71'
    |   '\u0b82'..'\u0b83'
    |   '\u0b85'..'\u0b8a'
    |   '\u0b8e'..'\u0b90'
    |   '\u0b92'..'\u0b95'
    |   '\u0b99'..'\u0b9a'
    |   '\u0b9c'
    |   '\u0b9e'..'\u0b9f'
    |   '\u0ba3'..'\u0ba4'
    |   '\u0ba8'..'\u0baa'
    |   '\u0bae'..'\u0bb5'
    |   '\u0bb7'..'\u0bb9'
    |   '\u0bbe'..'\u0bc2'
    |   '\u0bc6'..'\u0bc8'
    |   '\u0bca'..'\u0bcd'
    |   '\u0bd7'
    |   '\u0be7'..'\u0bef'
    |   '\u0bf9'
    |   '\u0c01'..'\u0c03'
    |   '\u0c05'..'\u0c0c'
    |   '\u0c0e'..'\u0c10'
    |   '\u0c12'..'\u0c28'
    |   '\u0c2a'..'\u0c33'
    |   '\u0c35'..'\u0c39'
    |   '\u0c3e'..'\u0c44'
    |   '\u0c46'..'\u0c48'
    |   '\u0c4a'..'\u0c4d'
    |   '\u0c55'..'\u0c56'
    |   '\u0c60'..'\u0c61'
    |   '\u0c66'..'\u0c6f'        
    |   '\u0c82'..'\u0c83'
    |   '\u0c85'..'\u0c8c'
    |   '\u0c8e'..'\u0c90'
    |   '\u0c92'..'\u0ca8'
    |   '\u0caa'..'\u0cb3'
    |   '\u0cb5'..'\u0cb9'
    |   '\u0cbc'..'\u0cc4'
    |   '\u0cc6'..'\u0cc8'
    |   '\u0cca'..'\u0ccd'
    |   '\u0cd5'..'\u0cd6'
    |   '\u0cde'
    |   '\u0ce0'..'\u0ce1'
    |   '\u0ce6'..'\u0cef'
    |   '\u0d02'..'\u0d03'
    |   '\u0d05'..'\u0d0c'
    |   '\u0d0e'..'\u0d10'
    |   '\u0d12'..'\u0d28'
    |   '\u0d2a'..'\u0d39'
    |   '\u0d3e'..'\u0d43'
    |   '\u0d46'..'\u0d48'
    |   '\u0d4a'..'\u0d4d'
    |   '\u0d57'
    |   '\u0d60'..'\u0d61'
    |   '\u0d66'..'\u0d6f'
    |   '\u0d82'..'\u0d83'
    |   '\u0d85'..'\u0d96'
    |   '\u0d9a'..'\u0db1'
    |   '\u0db3'..'\u0dbb'
    |   '\u0dbd'
    |   '\u0dc0'..'\u0dc6'
    |   '\u0dca'
    |   '\u0dcf'..'\u0dd4'
    |   '\u0dd6'
    |   '\u0dd8'..'\u0ddf'
    |   '\u0df2'..'\u0df3'
    |   '\u0e01'..'\u0e3a'
    |   '\u0e3f'..'\u0e4e'
    |   '\u0e50'..'\u0e59'
    |   '\u0e81'..'\u0e82'
    |   '\u0e84'
    |   '\u0e87'..'\u0e88'        
    |   '\u0e8a'
    |   '\u0e8d'
    |   '\u0e94'..'\u0e97'
    |   '\u0e99'..'\u0e9f'
    |   '\u0ea1'..'\u0ea3'
    |   '\u0ea5'
    |   '\u0ea7'
    |   '\u0eaa'..'\u0eab'
    |   '\u0ead'..'\u0eb9'
    |   '\u0ebb'..'\u0ebd'
    |   '\u0ec0'..'\u0ec4'
    |   '\u0ec6'
    |   '\u0ec8'..'\u0ecd'
    |   '\u0ed0'..'\u0ed9'
    |   '\u0edc'..'\u0edd'
    |   '\u0f00'
    |   '\u0f18'..'\u0f19'
    |   '\u0f20'..'\u0f29'
    |   '\u0f35'
    |   '\u0f37'
    |   '\u0f39'
    |   '\u0f3e'..'\u0f47'
    |   '\u0f49'..'\u0f6a'
    |   '\u0f71'..'\u0f84'
    |   '\u0f86'..'\u0f8b'
    |   '\u0f90'..'\u0f97'
    |   '\u0f99'..'\u0fbc'
    |   '\u0fc6'
    |   '\u1000'..'\u1021'
    |   '\u1023'..'\u1027'
    |   '\u1029'..'\u102a'
    |   '\u102c'..'\u1032'
    |   '\u1036'..'\u1039'
    |   '\u1040'..'\u1049'
    |   '\u1050'..'\u1059'
    |   '\u10a0'..'\u10c5'
    |   '\u10d0'..'\u10f8'
    |   '\u1100'..'\u1159'
    |   '\u115f'..'\u11a2'
    |   '\u11a8'..'\u11f9'
    |   '\u1200'..'\u1206'        
    |   '\u1208'..'\u1246'
    |   '\u1248'
    |   '\u124a'..'\u124d'
    |   '\u1250'..'\u1256'
    |   '\u1258'
    |   '\u125a'..'\u125d'
    |   '\u1260'..'\u1286'
    |   '\u1288'        
    |   '\u128a'..'\u128d'
    |   '\u1290'..'\u12ae'
    |   '\u12b0'
    |   '\u12b2'..'\u12b5'
    |   '\u12b8'..'\u12be'
    |   '\u12c0'
    |   '\u12c2'..'\u12c5'
    |   '\u12c8'..'\u12ce'
    |   '\u12d0'..'\u12d6'
    |   '\u12d8'..'\u12ee'
    |   '\u12f0'..'\u130e'
    |   '\u1310'
    |   '\u1312'..'\u1315'
    |   '\u1318'..'\u131e'
    |   '\u1320'..'\u1346'
    |   '\u1348'..'\u135a'
    |   '\u1369'..'\u1371'
    |   '\u13a0'..'\u13f4'
    |   '\u1401'..'\u166c'
    |   '\u166f'..'\u1676'
    |   '\u1681'..'\u169a'
    |   '\u16a0'..'\u16ea'
    |   '\u16ee'..'\u16f0'
    |   '\u1700'..'\u170c'
    |   '\u170e'..'\u1714'
    |   '\u1720'..'\u1734'
    |   '\u1740'..'\u1753'
    |   '\u1760'..'\u176c'
    |   '\u176e'..'\u1770'
    |   '\u1772'..'\u1773'
    |   '\u1780'..'\u17d3'
    |   '\u17d7'
    |   '\u17db'..'\u17dd'
    |   '\u17e0'..'\u17e9'
    |   '\u180b'..'\u180d'
    |   '\u1810'..'\u1819'
    |   '\u1820'..'\u1877'
    |   '\u1880'..'\u18a9'
    |   '\u1900'..'\u191c'
    |   '\u1920'..'\u192b'
    |   '\u1930'..'\u193b'
    |   '\u1946'..'\u196d'
    |   '\u1970'..'\u1974'
    |   '\u1d00'..'\u1d6b'
    |   '\u1e00'..'\u1e9b'
    |   '\u1ea0'..'\u1ef9'
    |   '\u1f00'..'\u1f15'
    |   '\u1f18'..'\u1f1d'
    |   '\u1f20'..'\u1f45'
    |   '\u1f48'..'\u1f4d'
    |   '\u1f50'..'\u1f57'
    |   '\u1f59'
    |   '\u1f5b'
    |   '\u1f5d'
    |   '\u1f5f'..'\u1f7d'
    |   '\u1f80'..'\u1fb4'
    |   '\u1fb6'..'\u1fbc'        
    |   '\u1fbe'
    |   '\u1fc2'..'\u1fc4'
    |   '\u1fc6'..'\u1fcc'
    |   '\u1fd0'..'\u1fd3'
    |   '\u1fd6'..'\u1fdb'
    |   '\u1fe0'..'\u1fec'
    |   '\u1ff2'..'\u1ff4'
    |   '\u1ff6'..'\u1ffc'
    |   '\u200c'..'\u200f'
    |   '\u202a'..'\u202e'
    |   '\u203f'..'\u2040'
    |   '\u2054'
    |   '\u2060'..'\u2063'
    |   '\u206a'..'\u206f'
    |   '\u2071'
    |   '\u207f'
    |   '\u20a0'..'\u20b1'
    |   '\u20d0'..'\u20dc'
    |   '\u20e1'
    |   '\u20e5'..'\u20ea'
    |   '\u2102'
    |   '\u2107'
    |   '\u210a'..'\u2113'
    |   '\u2115'
    |   '\u2119'..'\u211d'
    |   '\u2124'
    |   '\u2126'
    |   '\u2128'
    |   '\u212a'..'\u212d'
    |   '\u212f'..'\u2131'
    |   '\u2133'..'\u2139'
    |   '\u213d'..'\u213f'
    |   '\u2145'..'\u2149'
    |   '\u2160'..'\u2183'
    |   '\u3005'..'\u3007'
    |   '\u3021'..'\u302f'        
    |   '\u3031'..'\u3035'
    |   '\u3038'..'\u303c'
    |   '\u3041'..'\u3096'
    |   '\u3099'..'\u309a'
    |   '\u309d'..'\u309f'
    |   '\u30a1'..'\u30ff'
    |   '\u3105'..'\u312c'
    |   '\u3131'..'\u318e'
    |   '\u31a0'..'\u31b7'
    |   '\u31f0'..'\u31ff'
    |   '\u3400'..'\u4db5'
    |   '\u4e00'..'\u9fa5'
    |   '\ua000'..'\ua48c'
    |   '\uac00'..'\ud7a3'
    |   '\uf900'..'\ufa2d'
    |   '\ufa30'..'\ufa6a'
    |   '\ufb00'..'\ufb06'
    |   '\ufb13'..'\ufb17'
    |   '\ufb1d'..'\ufb28'
    |   '\ufb2a'..'\ufb36'
    |   '\ufb38'..'\ufb3c'
    |   '\ufb3e'
    |   '\ufb40'..'\ufb41'
    |   '\ufb43'..'\ufb44'
    |   '\ufb46'..'\ufbb1'
    |   '\ufbd3'..'\ufd3d'
    |   '\ufd50'..'\ufd8f'
    |   '\ufd92'..'\ufdc7'
    |   '\ufdf0'..'\ufdfc'
    |   '\ufe00'..'\ufe0f'
    |   '\ufe20'..'\ufe23'
    |   '\ufe33'..'\ufe34'
    |   '\ufe4d'..'\ufe4f'
    |   '\ufe69'
    |   '\ufe70'..'\ufe74'
    |   '\ufe76'..'\ufefc'
    |   '\ufeff'
    |   '\uff04'
    |   '\uff10'..'\uff19'
    |   '\uff21'..'\uff3a'
    |   '\uff3f'
    |   '\uff41'..'\uff5a'
    |   '\uff65'..'\uffbe'
    |   '\uffc2'..'\uffc7'
    |   '\uffca'..'\uffcf'
    |   '\uffd2'..'\uffd7'
    |   '\uffda'..'\uffdc'
    |   '\uffe0'..'\uffe1'
    |   '\uffe5'..'\uffe6'
    |   '\ufff9'..'\ufffb' 
    |   ('\ud800'..'\udbff') ('\udc00'..'\udfff')
    ;
---------------------------------------------------------------------------------------

Thanks in advance
-- 
View this message in context: http://antlr.1301665.n2.nabble.com/NoViableAltException-not-being-thrown-from-Parser-tp5485028p5485067.html
Sent from the ANTLR mailing list archive at Nabble.com.

