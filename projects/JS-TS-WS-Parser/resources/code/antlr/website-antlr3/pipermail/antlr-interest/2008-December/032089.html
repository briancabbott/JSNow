<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Progressive Slowdown in Parsing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Progressive%20Slowdown%20in%20Parsing&In-Reply-To=%3CCOL101-DS1716B5249AEDA1534A96E1B3EF0%40phx.gbl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032088.html">
   <LINK REL="Next"  HREF="032091.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Progressive Slowdown in Parsing</H1>
    <B>A. Saake</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Progressive%20Slowdown%20in%20Parsing&In-Reply-To=%3CCOL101-DS1716B5249AEDA1534A96E1B3EF0%40phx.gbl%3E"
       TITLE="[antlr-interest] Progressive Slowdown in Parsing">asaake at hotmail.de
       </A><BR>
    <I>Mon Dec 22 02:54:45 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="032088.html">[antlr-interest] Progressive Slowdown in Parsing
</A></li>
        <LI>Next message: <A HREF="032091.html">[antlr-interest] Progressive Slowdown in Parsing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32089">[ date ]</a>
              <a href="thread.html#32089">[ thread ]</a>
              <a href="subject.html#32089">[ subject ]</a>
              <a href="author.html#32089">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Yes,  I have the option backtracking turned on on the grammar level.

My test with syntactic predicates based on tokens like below, so they were 
not very complicated, but they resulted in no performance gain.

Here is the start of my grammar:

grammar VisionForm;

options {
    	language=CSharp2;
	backtrack=true;
//	memoize=true;
	rewrite=true;
	output=template;
}

tokens {
	ACCEPT			=	'ACCEPT';
	ACTION			=	'ACTION';
	ADD			=	'ADD';
	AFTER			= 	'AFTER';
	ALL			=	'ALL';
	AMOUNT		=	'AMOUNT';
	AND			=	'AND';
	ARE			=	'ARE';
	AS			=	'AS';
	ASC			=	'ASC';
	AUD_ACTION		=	'AUD_ACTION';
	AUD_ON_ENTRY		=	'AUD_ON_ENTRY';
	AUTO_COMMIT		=	'AUTO_COMMIT';
	AUTO_ZOOM		=	'AUTO_ZOOM';
	BACKGROUND		=	'BACKGROUND';
	BEFORE			=	'BEFORE';
	BEGIN			=	'BEGIN';
	BEGIN_SQL		=	'BEGIN_SQL';
	BETWEEN		=	'BETWEEN';
	BINARY			=	'BINARY';


The grammar itself is quite long (1800 lines), because it parses 4GL and 
(partially) SQL code.

I can post it, if it helps.

Thanks for your help !

Andreas

--------------------------------------------------
From: &quot;Gavin Lambert&quot; &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr at mirality.co.nz</A>&gt;
Sent: Monday, December 22, 2008 11:21 AM
To: &quot;A. Saake&quot; &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">asaake at hotmail.de</A>&gt;; &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>&gt;
Subject: Re: [antlr-interest] Progressive Slowdown in Parsing

&gt;<i> At 22:54 22/12/2008, A. Saake wrote:
</I>&gt;&gt;<i>The first 2000 lines can be processed in under 1 min. If I parse the whole 
</I>&gt;&gt;<i>script, time increases to 15 minutes. For a correct migration of this 
</I>&gt;&gt;<i>script (it's an include file), I would have to embed it into another 3500 
</I>&gt;&gt;<i>lines code script, and I'm afraid that it will need a very long time. 
</I>&gt;&gt;<i>Because of the variable system of the 4GL (declaration of variables is not 
</I>&gt;&gt;<i>necessary, so there's no scope, I have to estimate it from context), I 
</I>&gt;&gt;<i>will have to run it many times.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>To find out, if the slowdown is from my grammar, I tried lot's of 
</I>&gt;&gt;<i>syntactic predicates and so on, until I used a profiler, which names 
</I>&gt;&gt;<i>GetKindOfOps as responsible for nearly 80% of the runtime.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>My grammar is a combined lexer and parser, output is template and I use 
</I>&gt;&gt;<i>the token rewrite mechanism.
</I>&gt;<i>
</I>&gt;<i> Do you use backtracking at all, or large syntactic predicates?  Either 
</I>&gt;<i> will reduce the parsing speed of a grammar.
</I>&gt;<i>
</I>&gt;<i> Additionally, the smaller your tokens are the more work the parser is 
</I>&gt;<i> typically required to do (so single-character tokens are generally a bad 
</I>&gt;<i> idea).
</I>&gt;<i>
</I>&gt;<i> It's hard to be more specific without seeing your grammar, though.
</I>&gt;<i>
</I>&gt;<i> 
</I></PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032088.html">[antlr-interest] Progressive Slowdown in Parsing
</A></li>
	<LI>Next message: <A HREF="032091.html">[antlr-interest] Progressive Slowdown in Parsing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32089">[ date ]</a>
              <a href="thread.html#32089">[ thread ]</a>
              <a href="subject.html#32089">[ subject ]</a>
              <a href="author.html#32089">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
