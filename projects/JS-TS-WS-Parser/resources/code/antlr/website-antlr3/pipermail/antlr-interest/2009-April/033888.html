<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] How to throw an exception for all parsing errors?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20How%20to%20throw%20an%20exception%20for%20all%20parsing%20errors%3F&In-Reply-To=%3CPine.CYG.4.58.0904022040010.3060%40WHIRLWIND%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033887.html">
   <LINK REL="Next"  HREF="033900.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] How to throw an exception for all parsing errors?</H1>
    <B>Peter C. Chapin</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20How%20to%20throw%20an%20exception%20for%20all%20parsing%20errors%3F&In-Reply-To=%3CPine.CYG.4.58.0904022040010.3060%40WHIRLWIND%3E"
       TITLE="[antlr-interest] How to throw an exception for all parsing errors?">pcc482719 at gmail.com
       </A><BR>
    <I>Thu Apr  2 17:53:45 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="033887.html">[antlr-interest] GUnit: NPE on JUnitCodeGeneration
</A></li>
        <LI>Next message: <A HREF="033900.html">[antlr-interest] How to throw an exception for all parsing	errors?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33888">[ date ]</a>
              <a href="thread.html#33888">[ thread ]</a>
              <a href="subject.html#33888">[ subject ]</a>
              <a href="author.html#33888">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hello!

I'm working with the C# target. I'm writing test cases for my parser. I
try to parse a collection of input files to verify that they all parse as
expected (later I'll probably also verify that erronous input fails to
parse, but that's for another day). I'm trying to use NUnit to manage the
test cases.

It is convenient for the parser to throw an exception at the first problem
since NUnit will catch unhandled exceptions and display their tracebacks,
etc. The ANTLR book talks about how to do this. As I understand it I have
to provide my own mismatch() and recoverFromMismatchedSet() methods. I
also have to provide a @rulecatch block that catches RecognitionException
and rethrows it. The book shows this in Java, but the C# version is
basically the same (I replaced IntStream with IIntStream).

It almost seems to work. However while playing with my test cases I
noticed that under certain circumstances no exception is thrown and the
parser returns normally... even though an error message is written to
standard error. In the case in question I have an extra ';' where 'END' is
supposed to be. I get the following message on standard error:

extraneous input ';' expecting END

The message is quite reasonable. The problem is that NUnit thinks the test
succeeded. NUnit's GUI console does display the error message on the
'Console Error' tab but the test still shows green. This is a problem for
me because when I run my tests I want to be able to just look at the green
lights and be happy. If I also have to investigate other tabs I will
likely forget and I might overlook a problem.

So my question is simply: is there a way to get even this kind of error to
thrown an exception as well? I could also solve my problem if there was
some way to learn from the result returned by the parser if the parse was
completely successful or not. Did ANTLR execute any kind of recovery? If I
could check for that I could fail the test and be happy as well.

Peter
</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033887.html">[antlr-interest] GUnit: NPE on JUnitCodeGeneration
</A></li>
	<LI>Next message: <A HREF="033900.html">[antlr-interest] How to throw an exception for all parsing	errors?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33888">[ date ]</a>
              <a href="thread.html#33888">[ thread ]</a>
              <a href="subject.html#33888">[ subject ]</a>
              <a href="author.html#33888">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
