<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Best way to construct informative AST nodes?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Best%20way%20to%20construct%20informative%20AST%20nodes%3F&In-Reply-To=%3CB00C7A477A17884DBB97DEC08EE0DF9E0162CB29%40EXVBE010-2.exch010.intermedia.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036471.html">
   <LINK REL="Next"  HREF="036473.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Best way to construct informative AST nodes?</H1>
    <B>Jared Klumpp</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Best%20way%20to%20construct%20informative%20AST%20nodes%3F&In-Reply-To=%3CB00C7A477A17884DBB97DEC08EE0DF9E0162CB29%40EXVBE010-2.exch010.intermedia.net%3E"
       TITLE="[antlr-interest] Best way to construct informative AST nodes?">jklumpp at harmonia.com
       </A><BR>
    <I>Thu Oct 22 12:16:55 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="036471.html">[antlr-interest] How to overcome Lexer generation OutOfMemoryError?
</A></li>
        <LI>Next message: <A HREF="036473.html">[antlr-interest] c target  - bug
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36472">[ date ]</a>
              <a href="thread.html#36472">[ thread ]</a>
              <a href="subject.html#36472">[ subject ]</a>
              <a href="author.html#36472">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>My goal is to create the AST in a way that I can quickly access information about *important* child nodes - for example if I had:

proc : PROCEDURE ident formalPartOpt body -&gt; ^(PROCEDURE_DECL ident formalPartOpt body);

I would like this to create an AST node that would have the identifier and parameters easily accessible, with something like ASTProc.getIdent() or ASTProc.getParams();

I've found three ways of doing this, all seem like they blend the code and grammar too much:

1. Creating heterogeneous tree nodes like on this page: <A HREF="http://www.antlr.org/wiki/display/ANTLR3/Tree+construction">http://www.antlr.org/wiki/display/ANTLR3/Tree+construction</A> - and passing the identifier and formalPartOpt trees as parameters

2. Using custom AST nodes, and whenever a child is added to a custom ASTProc node, testing if it is of a type I care about - i.e., if child.getType() == Lexer.IDENT, store that as the name of the procedure.

3. Wait until the information is requested from the node and traverse the tree to find the name or parameters.

Are there other ways of doing this that are more efficient/decouple the AST creation from the grammar a little better?

Thanks in advance,
Jared
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://www.antlr.org/pipermail/antlr-interest/attachments/20091022/24e94d99/attachment.html">http://www.antlr.org/pipermail/antlr-interest/attachments/20091022/24e94d99/attachment.html</A> 
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036471.html">[antlr-interest] How to overcome Lexer generation OutOfMemoryError?
</A></li>
	<LI>Next message: <A HREF="036473.html">[antlr-interest] c target  - bug
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36472">[ date ]</a>
              <a href="thread.html#36472">[ thread ]</a>
              <a href="subject.html#36472">[ subject ]</a>
              <a href="author.html#36472">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
