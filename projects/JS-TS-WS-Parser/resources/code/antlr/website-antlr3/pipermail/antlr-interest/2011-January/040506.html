<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Changing lexers mid-stream
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Changing%20lexers%20mid-stream&In-Reply-To=%3C4D2D6EC4.1020409%40sosnoski.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="040505.html">
   <LINK REL="Next"  HREF="040507.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Changing lexers mid-stream</H1>
    <B>Dennis Sosnoski</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Changing%20lexers%20mid-stream&In-Reply-To=%3C4D2D6EC4.1020409%40sosnoski.com%3E"
       TITLE="[antlr-interest] Changing lexers mid-stream">dms at sosnoski.com
       </A><BR>
    <I>Wed Jan 12 01:05:08 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="040505.html">[antlr-interest] Changing lexers mid-stream
</A></li>
        <LI>Next message: <A HREF="040507.html">[antlr-interest] Island grammar implementation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40506">[ date ]</a>
              <a href="thread.html#40506">[ thread ]</a>
              <a href="subject.html#40506">[ subject ]</a>
              <a href="author.html#40506">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 01/12/2011 08:54 PM, Bart Kiers wrote:
&gt;<i> On Wed, Jan 12, 2011 at 8:44 AM, Dennis Sosnoski &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">dms at sosnoski.com</A>
</I>&gt;<i> &lt;mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">dms at sosnoski.com</A>&gt;&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>     I'm wondering if there's an easy way to switch back and forth between
</I>&gt;<i>     different lexers while processing a stream. I'm working with Java
</I>&gt;<i>     language documents, and I'd like to be able to break down /**...*/
</I>&gt;<i>     comments into components - but to do this, I'd need to switch
</I>&gt;<i>     modes when
</I>&gt;<i>     I enter the start of a comment, and switch back to normal Java lexer
</I>&gt;<i>     rules at the end of the comment.
</I>&gt;<i>
</I>&gt;<i>     ...
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Have you seen this:
</I>&gt;<i> <A HREF="http://www.antlr.org/wiki/display/ANTLR3/Island+Grammars+Under+Parser+Control">http://www.antlr.org/wiki/display/ANTLR3/Island+Grammars+Under+Parser+Control</A>
</I>&gt;<i> ?
</I>&gt;<i>
</I>
No, I hadn't seen that. It does sound very similar to what I want,
though I'm not completely sure how to apply it.

In my case I'd like to have the comment token types extend those used in
the base grammar (so just adding a couple more token types). I'm
guessing that if I create a pair of lexers (one for the language grammar
with a start-of-comment token, the other for comments with an
end-of-comment token) I could switch between lexers on-the-fly by using
a filter that implements TokenSource:

             /---Language lexer--\
---Filter---&lt;                     &gt;--CharStream
             \---Comment lexer---/

Does that sound like the best approach?

To do this, I'd want to add several token types to those defined in the
language grammar, which I know I can do by adding them to the tokens { 
} list. Then I'd want to use the actual token values assigned in the
generated language lexer in my comment lexer (so that the token type
codes are all unique in the generated token stream seen from the
filter). How can I do that part?

Thanks,

  - Dennis
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="040505.html">[antlr-interest] Changing lexers mid-stream
</A></li>
	<LI>Next message: <A HREF="040507.html">[antlr-interest] Island grammar implementation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40506">[ date ]</a>
              <a href="thread.html#40506">[ thread ]</a>
              <a href="subject.html#40506">[ subject ]</a>
              <a href="author.html#40506">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
