<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Re: More VC++ 6 Confusion (MFC libs)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Re%3A%20More%20VC%2B%2B%206%20Confusion%20%28MFC%20libs%29&In-Reply-To=a0qtn4%2B4lip%40eGroups.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000415.html">
   <LINK REL="Next"  HREF="000423.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Re: More VC++ 6 Confusion (MFC libs)</H1>
    <B>Ric Klaren</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Re%3A%20More%20VC%2B%2B%206%20Confusion%20%28MFC%20libs%29&In-Reply-To=a0qtn4%2B4lip%40eGroups.com"
       TITLE="[antlr-interest] Re: More VC++ 6 Confusion (MFC libs)">klaren at cs.utwente.nl
       </A><BR>
    <I>Thu Jan  3 02:01:39 PST 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="000415.html">[antlr-interest] Help need with 2.7.2a1
</A></li>
        <LI>Next message: <A HREF="000423.html">[antlr-interest] Re: More VC++ 6 Confusion (MFC libs)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#411">[ date ]</a>
              <a href="thread.html#411">[ thread ]</a>
              <a href="subject.html#411">[ subject ]</a>
              <a href="author.html#411">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On Mon, Dec 31, 2001 at 11:52:04PM -0000, jsrs701 wrote:
&gt;<i> &gt; I have a different problem with using the dll : I cannot get MSVC to 
</I>&gt;<i> &gt; generate an import library (don't have a .def file), and cannot find 
</I>&gt;<i> &gt; any export declarations in the source. 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Isabelle
</I>
&gt;<i> The import library issue is a messy one.  In one of the contrib items 
</I>&gt;<i> for building an ANTLR DLL, it mentions a replacement file 
</I>&gt;<i> (config.hpp) that contains a macro called DLLEXPORT.  Unfortunately, 
</I>&gt;<i> I can't find any trace of this file, nor the macro.  Hm.
</I>
The DLL export stuff is already in antlr-2.7.2a1. It's only called
ANTLR_API now (used a different patch than the one in contrib).

&gt;<i> You probably don't want to do a .def file, though, since you'll have 
</I>&gt;<i> to deal with the messy C++ munged symbols.  Ugh.  Better to stick 
</I>&gt;<i> with the dllimport and dllexport declspecs on the classes themselves.
</I>&gt;<i> 
</I>&gt;<i> On second thought, anybody know where that config.hpp file got off 
</I>&gt;<i> to?  Ter, Ric?  It's the file Michael Richter mentions in his README.
</I>
Hmmm strange I cannot recall removing the file. Then again I had planned on
including the DLL build in 2.7.2. That was before running into a whole lot
of trouble with MSVC6. It really barfs on a dll build. 

It refuses to compile/link. My impression (going on the fuzzy error
messages it is giving) is that it does not support linking STL stuff into
DLL's (can this be true?? at least I'm missing the dllexport stuff in the
stl headers..)?? 

Doing explicit instantiations ala (with some msvc extension):

#if defined(_MSC_VER) &amp;&amp; !defined(__ICL) // Microsoft Visual C++
extern template class ANTLR_API ANTLR_USE_NAMESPACE(std)vector&lt;int&gt;;
#endif

Seems not to work?

I'm not a MSVC expert so I'm hoping some more knowledgeable MSVC6 hacker
may want to fix the toplevel .dsw .dsp files. It may require adding a few
directories to the lib/cpp tree for the .dll and the .lib build.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">klaren at cs.utwente.nl</A> ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Time what is time - I wish I knew how to tell You why - It hurts to know -
          Aren't we machines - Time what is time - Unlock the door
               - And see the truth - Then time is time again
                From: 'Time what is Time' by Blind Guardian


 

Your use of Yahoo! Groups is subject to <A HREF="http://docs.yahoo.com/info/terms/">http://docs.yahoo.com/info/terms/</A> 

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000415.html">[antlr-interest] Help need with 2.7.2a1
</A></li>
	<LI>Next message: <A HREF="000423.html">[antlr-interest] Re: More VC++ 6 Confusion (MFC libs)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#411">[ date ]</a>
              <a href="thread.html#411">[ thread ]</a>
              <a href="subject.html#411">[ subject ]</a>
              <a href="author.html#411">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
