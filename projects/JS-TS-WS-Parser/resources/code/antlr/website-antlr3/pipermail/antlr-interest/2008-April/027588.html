<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] advocacy of C++ support in ANTLR 3.x
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20advocacy%20of%20C%2B%2B%20support%20in%20ANTLR%203.x&In-Reply-To=%3C8b6e74b143eb204f89d1f3c2da8b768b%40temporal-wave.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027585.html">
   <LINK REL="Next"  HREF="027590.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] advocacy of C++ support in ANTLR 3.x</H1>
    <B>Jim Idle</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20advocacy%20of%20C%2B%2B%20support%20in%20ANTLR%203.x&In-Reply-To=%3C8b6e74b143eb204f89d1f3c2da8b768b%40temporal-wave.com%3E"
       TITLE="[antlr-interest] advocacy of C++ support in ANTLR 3.x">jimi at temporal-wave.com
       </A><BR>
    <I>Wed Apr  2 13:10:54 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="027585.html">[antlr-interest] I'm new to this....
</A></li>
        <LI>Next message: <A HREF="027590.html">[antlr-interest] advocacy of C++ support in ANTLR 3.x
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27588">[ date ]</a>
              <a href="thread.html#27588">[ thread ]</a>
              <a href="subject.html#27588">[ subject ]</a>
              <a href="author.html#27588">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

&gt;<i> -----Original Message-----
</I>&gt;<i> From: Gavin Lambert [mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr at mirality.co.nz</A>]
</I>&gt;<i> Sent: Wednesday, April 02, 2008 1:06 PM
</I>&gt;<i> To: Jim Idle; ANTLR
</I>&gt;<i> Subject: Re: [antlr-interest] advocacy of C++ support in ANTLR 3.x
</I>&gt;<i> 
</I>&gt;<i> At 06:23 3/04/2008, Jim Idle wrote:
</I>&gt;<i> &gt;The adaptor is an adaptor, or the default tree nodes would not
</I>&gt;<i> &gt;work, but in C there is no class inheritance and I cannot protect
</I>&gt;<i> &gt;functions/pointers that must be public, from being used anywhere.
</I>&gt;<i> &gt;The Java version of the tree node also has addChild etc. It needs
</I>&gt;<i> &gt;to because the tree adaptor needs to ask it to add children.
</I>&gt;<i> &gt;However, if you don't call the treenode methods, then they won't
</I>&gt;<i> &gt;be used directly in either C or Java or any other target.
</I>&gt;<i> 
</I>&gt;<i> I think Tom's point is that in the Java version the tree nodes are
</I>&gt;<i> simple objects, and the adaptor class is the only known interface
</I>&gt;<i> -- you ask the adaptor class to create a node, to add a child to a
</I>&gt;<i> node, etc, but when an actual node is referred to it's always an
</I>&gt;<i> 'object', not a 'CommonTreeNode'.  The grammar generated code
</I>&gt;<i> never directly touches the tree nodes themselves.
</I>&gt;<i> 
</I>&gt;<i> This same approach ought to still be possible in C -- substituting
</I>&gt;<i> 'void *' for 'object' and adding some memory tracking/disposal
</I>&gt;<i> semantics, of course.
</I>
As I said, you just end up having create the structure yourself, I already went down this path and back up.

&gt;<i> 
</I>&gt;<i> So the default ANTLR3_COMMON_TREE_ADAPTOR creates and manipulates
</I>&gt;<i> ANTLR3_COMMON_TREE objects, but the interface specified by
</I>&gt;<i> ANTLR3_BASE_TREE_ADAPTOR only ever uses 'void *'.  This means that
</I>&gt;<i> a user can completely reimplement the interface to use their own
</I>&gt;<i> custom node type totally divorced from ANTLR.  The
</I>&gt;<i> ANTLR3_BASE_TREE structure simply goes away, as it's no longer
</I>&gt;<i> useful.  (Or maybe you could still have two levels; one which
</I>&gt;<i> implements the basic tree semantics and one that adds the token
</I>&gt;<i> payload.  But I'm not sure that's especially useful.)
</I>
Then you cast it to whatever the user says, and they have to have a structure that supplies the same function set anyway. However, done this way they will need to supply all functions and not just the ones they need to override. Basically, it is C and you choose your poison, which I have done.

Jim



</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027585.html">[antlr-interest] I'm new to this....
</A></li>
	<LI>Next message: <A HREF="027590.html">[antlr-interest] advocacy of C++ support in ANTLR 3.x
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27588">[ date ]</a>
              <a href="thread.html#27588">[ thread ]</a>
              <a href="subject.html#27588">[ subject ]</a>
              <a href="author.html#27588">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
