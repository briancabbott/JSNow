<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Re: Transforming AST subtrees in TreeParser with &quot;buildAST = false&quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Re%3A%20Transforming%20AST%20subtrees%20in%20TreeParser%20with%20%22buildAST%20%3D%20false%22&In-Reply-To=20040519151903.GD6955%40cs.utwente.nl">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007985.html">
   <LINK REL="Next"  HREF="007994.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Re: Transforming AST subtrees in TreeParser with &quot;buildAST = false&quot;</H1>
    <B>micheal_jor</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Re%3A%20Transforming%20AST%20subtrees%20in%20TreeParser%20with%20%22buildAST%20%3D%20false%22&In-Reply-To=20040519151903.GD6955%40cs.utwente.nl"
       TITLE="[antlr-interest] Re: Transforming AST subtrees in TreeParser with &quot;buildAST = false&quot;">open.zone at virgin.net
       </A><BR>
    <I>Wed May 19 13:20:17 PDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="007985.html">[antlr-interest] Transforming AST subtrees in TreeParser with &quot;buildAST = false&quot;
</A></li>
        <LI>Next message: <A HREF="007994.html">[antlr-interest] Transforming AST subtrees in TreeParser with &quot;buildAST = false&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7989">[ date ]</a>
              <a href="thread.html#7989">[ thread ]</a>
              <a href="subject.html#7989">[ subject ]</a>
              <a href="author.html#7989">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>--- In <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at yahoogroups.com</A>, Ric Klaren &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">klaren at c...</A>&gt; wrote:
&gt;<i> On Wed, May 19, 2004 at 02:45:52PM -0000, micheal_jor wrote:
</I>&gt;<i> &gt; Is this possible?
</I>&gt;<i> 
</I>&gt;<i> To some extent it should work I guess. (I'm btw also in a kindoff
</I>similar
&gt;<i> situation where I only want to do some minor patching in a previously
</I>&gt;<i> generated tree. I'm not that familiar with tree transformations but it
</I>&gt;<i> feels a bit cumbersome atm)
</I>
I went ahead and wrote the code anyways and it works as expected. The
XXX_AST_in variable continues to point to whatever it pointed to on
entry but the AST was properly modified.

Cumbersome?. Perhaps, I'm much more concerned about performance as it
happens. Flexible it definitely is though. I've got custom AST node
classes, custom ASTFactory, custom token class, custom buffers, etc
and it still all works.

&gt;<i> &gt; I am using a TreeParser but with buildAST=false to avoid redundant
</I>&gt;<i> &gt; &quot;copying&quot; of most of the nodes in the AST. They are untouched by the
</I>&gt;<i> &gt; minor transformations.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I guess I have two questions really:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 1. In a TreeParser, is it possible to specify that &quot;buildAST=true&quot;
</I>&gt;<i> &gt; only for certain rules or rule-Alternatives. The rest of the AST is
</I>&gt;<i> &gt; left as is (it is &quot;copied&quot; to output logically but no *actual* copying
</I>&gt;<i> &gt; is done).
</I>&gt;<i> 
</I>&gt;<i> buildAST is a grammar option so no go there... Doing it inverted
</I>will work
&gt;<i> e.g. turn on construction and disable construction for all rules
</I>except the
&gt;<i> ones where you want it.
</I>
I didn't think of that (sound like much work).

&gt;<i> Also you have to be very carefull when changing the
</I>&gt;<i> AST because the current rule is operating on it still.
</I>
I do the transforming after all the recognition is complete.

&gt;<i> Also be very carefull in using
</I>&gt;<i> the standard AST/ASTFactory's methods for changing tree parts, the names
</I>&gt;<i> hide a lot of things that happen under the hood...
</I>
Yeah gave up pretty quickly on using ASTPair/ASTFactory directly.
Might go back a little later just to grok the difference.

&gt;<i> I guess you could come a long way with playing a bit with a toy
</I>grammar and
&gt;<i> the options and see what happens in the generated code.
</I>
Was under a little time pressure so just bit the bullet. I've got the
SCC trail in case anything bad hapens anyhows  ;-)

Cheers,

Micheal




 
Yahoo! Groups Links

&lt;*&gt; To visit your group on the web, go to:
     <A HREF="http://groups.yahoo.com/group/antlr-interest/">http://groups.yahoo.com/group/antlr-interest/</A>

&lt;*&gt; To unsubscribe from this group, send an email to:
     <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-unsubscribe at yahoogroups.com</A>

&lt;*&gt; Your use of Yahoo! Groups is subject to:
     <A HREF="http://docs.yahoo.com/info/terms/">http://docs.yahoo.com/info/terms/</A>
 

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007985.html">[antlr-interest] Transforming AST subtrees in TreeParser with &quot;buildAST = false&quot;
</A></li>
	<LI>Next message: <A HREF="007994.html">[antlr-interest] Transforming AST subtrees in TreeParser with &quot;buildAST = false&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7989">[ date ]</a>
              <a href="thread.html#7989">[ thread ]</a>
              <a href="subject.html#7989">[ subject ]</a>
              <a href="author.html#7989">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
