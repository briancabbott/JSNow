From Curt.Carpenter at microsoft.com  Sun Feb  1 07:13:39 2009
From: Curt.Carpenter at microsoft.com (Curt Carpenter)
Date: Sun, 1 Feb 2009 07:13:39 -0800
Subject: [antlr-interest] Newbie question about lex token matching
 priority
In-Reply-To: <738584f80901301849r421bba8cqa32cc96920b87ee@mail.gmail.com>
References: <80531546B1EAB64CBA160D97566FC7E52F170D4DD0@NA-EXMSG-C117.redmond.corp.microsoft.com>
	<738584f80901301849r421bba8cqa32cc96920b87ee@mail.gmail.com>
Message-ID: <80531546B1EAB64CBA160D97566FC7E52F171CB65C@NA-EXMSG-C117.redmond.corp.microsoft.com>

Hi Rob, thanks for the reply. I was beginning to wonder whether my email went off into the ether.

The problem with making PARENNUM a parse rule is that it ALSO matches NAME. In fact it would ONLY match NAME, and never the parse rule, since (0) is also a valid NAME (a lex token). So what I finally came up with (not sure this is exactly what I said in my follow-up) is a bunch of different tokens, matching the combinations that a name can appear in:
ID_NAME_COLON	: PARENNUM ('!'..'\u00FE')+ ':';	// (0)curtc:
ID_NAME		: PARENNUM ('!'..'\u00FE')+ ;		// (0)curtc
NAME_COLON		: ('!'..'\u00FE')+ ':';			// curtc:
PARENNUM 		: '(' NUMBER ')';				// (0)
NUMBER 		: '-'? ('0'..'9')+;			// 0
fragment NAME	: ('!'..'\u00FE')+;			// curtc
WS 			: ( '\t' | ' ' | '\r' | '\n'| '\u000C' )+ { $channel = HIDDEN; } ;

Then in parse rules, given whichever token matches, I can know which portion is the name, and whether there is an id, by using different target language actions for each separate token, and trivially cracking. After I think finally wrapping my head around it, I'm pretty sure what I have is reasonable (passes all 250,000+ existing source files), given that I can't change the input. But if you think there's a much better way, I'd still be interested to hear, even though I'm not blocked.

Thanks,

Curt

-----Original Message-----
From: Rob Greene
Sent: Saturday, January 31, 2009 10:50 AM

Hi Curt --

First off, I'm a total hack at ANTLR.  And that's in the golfing sense
with grass flying everywhere and not in the geek sense of being
totally awesome.  Awesome is reserved for others on this list.  So, if
I mislead you, sorry in advance!!

Anyway, from your description, think PARENNUM isn't a lexer rule but a
grammar rule.

So you'd have something like:

language: data+ ;
data: '(' NUMBER ')' NAME ;

and the same lex rules for NUMBER and NAME as before.  Also, don't
forget a whitespace rule (I assume you need one?)

WS: (' ' | '\t' | '\n' | '\r')+ {skip();}

I hope I'm leading you in the right direction at least!
-Rob

On Thu, Jan 29, 2009 at 10:14 AM, Curt Carpenter
<Curt.Carpenter at microsoft.com> wrote:
> Hi all, I am 1 day in on ANTLR, so be gentle. J
>
>
>
> I have gone through the tutorials and such, and have created a grammar from
> scratch, debugged it and have it mostly working, except for one problem. I
> want to parse something like this:
>
> (#)name
>
> Where # is a number, but name can be virtually anything except space. I
> think. I don't own the language, so please don't suggest that name should be
> further restricted. So I defined the lex rules as so:
>
> PARENNUM       : '(' NUMBER ')';
>
> NUMBER             : '-'? ('0'..'9')+;
>
> NAME                   : ('!'..'\u00FE')+; // ansi only
>
>
>
> You can see the problem at NAME. (0)curt is a valid name. But what I really
> want is to parse as PARENNUM=(0) NAME=curt. I have a parse rule to match
> that. But, the lex rules match longest string first, so (0)curt is always
> tokenized as NAME. Is there any way to change the priority of matching lex
> tokens to be the order they're defined, rather than order only breaking ties
> in string length?
>
>
>
> Or is there some other way to accomplish the simple parse rule I'm trying to
> solve?
>
>
>
> Thanks,
>
>
>
> Curt

From jimi at temporal-wave.com  Sun Feb  1 08:56:19 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun, 01 Feb 2009 08:56:19 -0800
Subject: [antlr-interest] Antlr3 C Runtime Improvement Patches
In-Reply-To: <3490668a0901311902i6539b85bi1707fd870c51d005@mail.gmail.com>
References: <3490668a0901311902i6539b85bi1707fd870c51d005@mail.gmail.com>
Message-ID: <4985D433.2050201@temporal-wave.com>

Bot Tiger wrote:
> Here are some patches to get the antlr3 C runtime to compile as STDCALL.

Shouldn't be. Are you trying to compile the runtime as C++? It should be 
compiled as C.
> Apparently strdup is also deprecated in recent versions of visual studio.
Again, this is catered for already as the headers turn off the 
requirement to use the secure versions, though you can certainly choose 
to do so.

> @@ -152,9 +152,9 @@
>      /// Returns the description string if there is one available 
> (check for NULL).
>      ///
>      void *            (*getDescription)    (struct 
> ANTLR3_REWRITE_RULE_ELEMENT_STREAM_struct * stream);
> +    void    (ANTLR3_CDECL    *free)                    (struct 
> ANTLR3_REWRITE_RULE_ELEMENT_STREAM_struct * stream);
>  
> -    void        (*free)                    (struct 
> ANTLR3_REWRITE_RULE_ELEMENT_STREAM_struct * stream);
I doubt that this change is required - it certainly isn't with my 
version of Visual Studio 2008 (latest service packs) and wasn't with 
VS2005. There must be some other reason that you are getting these errors.

Jim

From bottiger1 at gmail.com  Sun Feb  1 11:38:00 2009
From: bottiger1 at gmail.com (Bot Tiger)
Date: Sun, 1 Feb 2009 11:38:00 -0800
Subject: [antlr-interest] Antlr3 C Runtime Improvement Patches
In-Reply-To: <4985D433.2050201@temporal-wave.com>
References: <3490668a0901311902i6539b85bi1707fd870c51d005@mail.gmail.com>
	<4985D433.2050201@temporal-wave.com>
Message-ID: <3490668a0902011138l2f6f0c6dm23f250173de62f95@mail.gmail.com>

Dear Jim,

I don't know about the strdup, but for compiling as C, it was at that
setting already when I loaded up the project.

I am using Visual Studio 2008 Version 9.0.21022.8 RTM with SP1 and hotfixes
up to KB953256.

I am fairly certain that those patches for compiling as STDCALL instead of
CDECL are required, because when I switched the compilier to STDCALL, those
places were attempting to cast a STDCALL function to a CDECL function
pointer.


On Sun, Feb 1, 2009 at 8:56 AM, Jim Idle <jimi at temporal-wave.com> wrote:

> Bot Tiger wrote:
>
>> Here are some patches to get the antlr3 C runtime to compile as STDCALL.
>>
>
> Shouldn't be. Are you trying to compile the runtime as C++? It should be
> compiled as C.
>
>> Apparently strdup is also deprecated in recent versions of visual studio.
>>
> Again, this is catered for already as the headers turn off the requirement
> to use the secure versions, though you can certainly choose to do so.
>
>  @@ -152,9 +152,9 @@
>>     /// Returns the description string if there is one available (check
>> for NULL).
>>     ///
>>     void *            (*getDescription)    (struct
>> ANTLR3_REWRITE_RULE_ELEMENT_STREAM_struct * stream);
>> +    void    (ANTLR3_CDECL    *free)                    (struct
>> ANTLR3_REWRITE_RULE_ELEMENT_STREAM_struct * stream);
>>  -    void        (*free)                    (struct
>> ANTLR3_REWRITE_RULE_ELEMENT_STREAM_struct * stream);
>>
> I doubt that this change is required - it certainly isn't with my version
> of Visual Studio 2008 (latest service packs) and wasn't with VS2005. There
> must be some other reason that you are getting these errors.
>
> Jim
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090201/341740b5/attachment.html 

From paul.bouche at apertio.com  Sun Feb  1 16:57:46 2009
From: paul.bouche at apertio.com (=?ISO-8859-1?Q?Paul_Bouch=E9?=)
Date: Mon, 02 Feb 2009 01:57:46 +0100
Subject: [antlr-interest] ANTLR for syntax highlighting and word completion
Message-ID: <4986450A.2070308@apertio.com>

Hi,

I am about to build a new parser for our rules language replacing a hand 
written parser. So I want to show the hand-written-parser disciples what 
ANTLR is all about ;-)

Anyway, I have read on this list that someone planned an integrated 
environment for doing just that - where can I find it?

I have heard that Eclipse uses ANTLR internally for its highlighting and 
word completion features - can you confirm this?
I have read somewhere else that it uses the Jikes Parser Generator 
(jikespg).

Actually I have already completed a preliminary version of a grammer 
which does syntax highlighting by providing a list of marker objects 
where each marker is created of a token has sucessfully been recognized 
with the start and end position, i.e.:
@members {
            }
            public void marker(String kind) {
                   // get last delivered token - I thought my I idea 
doing this is pretty slick
                    Token token = input.LT(-1);
                    if (token instanceof CommonToken) {
                        CommonToken ct = (CommonToken) token;
                        Marker marker =                        
                            new Marker(ct.getStartIndex(),
                                       ct.getStopIndex() - 
ct.getStartIndex() + 1,
                                       kind);
                        marks.add(marker);                       
                    }
            }
}

statment :
    JUMP { marker("Keyword"); }  destination  { marker("Variable"); }
    ;

destination :    NAME | VARIABLE    ;

...
I would enrich this grammar with completion actions, in the case of 
exceptions and being in "completion mode". It also took me so fiddling 
to find out how make ANTLR recover the way I want (I should've read the 
book first ;-)).

A co-worder suggested constructing an AST first (cleaner parser and more 
flexibilty), also Terence does so in the book and in the AST parser then 
do the things I'd like. The deal is that my predecessor did this for 
another project and the Tree parser is 7 times slower than the previous 
non-AST parser. Do you have any suggestion what to avoid so that there 
won't be a significant loss of speed? This is especially important for 
syntax highlighting because the GUI user must not be hindered by the 
highlighting process.

Any other comments or suggestions on syntax highlighting or word 
completion with ANTLR are highly appreciated!

Have a great day,
Paul

From sharwell at pixelminegames.com  Sun Feb  1 19:39:47 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Sun, 1 Feb 2009 21:39:47 -0600
Subject: [antlr-interest] ANTLR for syntax highlighting and word
	completion
In-Reply-To: <4986450A.2070308@apertio.com>
References: <4986450A.2070308@apertio.com>
Message-ID: <86403CA0939415448BCCB83855EFE09AA67871@Bloodymary.ironwillgames.com>

I have many posts on my blog about this subject. Here's the link to my blog, and a link to the first major post specific to using ANTLR in an IDE. The ANTLR-based highlighters we're using are nowhere near as slow as Eclipse. However, there are many places where IDE performance imposed "interesting" constraints on grammar designs, and we had to take care of them on a case-by-case basis.

http://blog.280z28.org/

http://blog.280z28.org/archives/2008/10/21/

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Paul Bouch?
Sent: Sunday, February 01, 2009 6:58 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] ANTLR for syntax highlighting and word completion

Hi,

I am about to build a new parser for our rules language replacing a hand 
written parser. So I want to show the hand-written-parser disciples what 
ANTLR is all about ;-)

Anyway, I have read on this list that someone planned an integrated 
environment for doing just that - where can I find it?

I have heard that Eclipse uses ANTLR internally for its highlighting and 
word completion features - can you confirm this?
I have read somewhere else that it uses the Jikes Parser Generator 
(jikespg).

Actually I have already completed a preliminary version of a grammer 
which does syntax highlighting by providing a list of marker objects 
where each marker is created of a token has sucessfully been recognized 
with the start and end position, i.e.:
@members {
            }
            public void marker(String kind) {
                   // get last delivered token - I thought my I idea 
doing this is pretty slick
                    Token token = input.LT(-1);
                    if (token instanceof CommonToken) {
                        CommonToken ct = (CommonToken) token;
                        Marker marker =                        
                            new Marker(ct.getStartIndex(),
                                       ct.getStopIndex() - 
ct.getStartIndex() + 1,
                                       kind);
                        marks.add(marker);                       
                    }
            }
}

statment :
    JUMP { marker("Keyword"); }  destination  { marker("Variable"); }
    ;

destination :    NAME | VARIABLE    ;

...
I would enrich this grammar with completion actions, in the case of 
exceptions and being in "completion mode". It also took me so fiddling 
to find out how make ANTLR recover the way I want (I should've read the 
book first ;-)).

A co-worder suggested constructing an AST first (cleaner parser and more 
flexibilty), also Terence does so in the book and in the AST parser then 
do the things I'd like. The deal is that my predecessor did this for 
another project and the Tree parser is 7 times slower than the previous 
non-AST parser. Do you have any suggestion what to avoid so that there 
won't be a significant loss of speed? This is especially important for 
syntax highlighting because the GUI user must not be hindered by the 
highlighting process.

Any other comments or suggestions on syntax highlighting or word 
completion with ANTLR are highly appreciated!

Have a great day,
Paul

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From sharwell at pixelminegames.com  Sun Feb  1 21:11:40 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Sun, 1 Feb 2009 23:11:40 -0600
Subject: [antlr-interest] adding "version" option to ANTLR grammars
In-Reply-To: <7CE79C20-C277-42F4-8636-460CA7AFA397@cs.usfca.edu>
References: <4931B730.7070903@gmx.de>
	<7CE79C20-C277-42F4-8636-460CA7AFA397@cs.usfca.edu>
Message-ID: <86403CA0939415448BCCB83855EFE09AA67873@Bloodymary.ironwillgames.com>

(I'm only offering an independent opinion on this - definitely not
trying to insult anyone.)

This option feels "gimmicky" to me. It doesn't address the asynchronous
nature of core/target updates, target-to-target incompatibilities, and
doesn't identify breaking changes in the Tool between versions. I don't
think it adds anything that a comment at the top doesn't already give.
This is what the Breaking Changes section of release notes is for. :)

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Terence Parr
Sent: Monday, January 19, 2009 5:45 PM
To: Johannes Luber
Cc: antlr-interest Interest
Subject: Re: [antlr-interest] adding "version" option to ANTLR grammars

That is an interesting idea. I am cc'ing the  interest list. sorry for  
the long delay.

I take it that you are suggesting the following

grammar T;
options {
	language = ...;
	version = "3.1.1";
}

Ter
On Nov 29, 2008, at 1:42 PM, Johannes Luber wrote:

> Hi!
>
> Thinking about the upcoming dialects of ANTLR grammars (one for each
> version, which aren't totally upwardscompatible), I had this idea.  
> Would
> it make sense to make an option named "version" mandatory, which  
> simply
> records the used ANTLR version for writing. It's mandatory because
> people don't seem ever to write a comment explaining the requirements
> (myself included ;). It makes easier for people to diagnose problems
> with a third-party grammar.
>
> Johannes


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From g.r.vansickle at att.net  Sun Feb  1 22:44:18 2009
From: g.r.vansickle at att.net (Gary R. Van Sickle)
Date: Mon, 2 Feb 2009 00:44:18 -0600
Subject: [antlr-interest] adding "version" option to ANTLR grammars
In-Reply-To: <86403CA0939415448BCCB83855EFE09AA67873@Bloodymary.ironwillgames.com>
References: <4931B730.7070903@gmx.de><7CE79C20-C277-42F4-8636-460CA7AFA397@cs.usfca.edu>
	<86403CA0939415448BCCB83855EFE09AA67873@Bloodymary.ironwillgames.com>
Message-ID: <B7EB911C5DA04241814E849EA757AB5F@DFW5RB41>

> From:  Sam Harwell
> 
> (I'm only offering an independent opinion on this - 
> definitely not trying to insult anyone.)
> 
> This option feels "gimmicky" to me. It doesn't address the 
> asynchronous nature of core/target updates, target-to-target 
> incompatibilities, and doesn't identify breaking changes in 
> the Tool between versions.

It certainly could/could/does:

options
{
	written_to_antlr_version="3.1.2";
	language=C;
	written_to_runtime_version="1.2.3";
}

All bases covered, no?

> I don't think it adds anything 
> that a comment at the top doesn't already give.

A comment at the top makes enforcing any restrictions, or indeed doing
anything at all at "ANTLR-time" related to the version of either the ANTLR
tool or the runtime in use, impossible.  And I can guarantee you that the
number of any such comments, regardless of their utiliy, in the wild will be
able to be counted on one hand.  People simply don't do this sort of thing
unless forced.

> This is what the Breaking Changes section of release notes is for. :)
> 

Unfortunately, tools aren't able to read release notes yet, nor are they in
general able to divine the version of a language the original source was
written to.  Until they somehow magically grow both these abilities,
everybody wins if such information is explicitly communicated by the writer
to the tool.

> Sam
> 

-- 
Gary R. Van Sickle
 
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Terence Parr
> Sent: Monday, January 19, 2009 5:45 PM
> To: Johannes Luber
> Cc: antlr-interest Interest
> Subject: Re: [antlr-interest] adding "version" option to 
> ANTLR grammars
> 
> That is an interesting idea. I am cc'ing the  interest list. 
> sorry for the long delay.
> 
> I take it that you are suggesting the following
> 
> grammar T;
> options {
> 	language = ...;
> 	version = "3.1.1";
> }
> 
> Ter
> On Nov 29, 2008, at 1:42 PM, Johannes Luber wrote:
> 
> > Hi!
> >
> > Thinking about the upcoming dialects of ANTLR grammars (one 
> for each 
> > version, which aren't totally upwardscompatible), I had this idea.
> > Would
> > it make sense to make an option named "version" mandatory, which 
> > simply records the used ANTLR version for writing. It's mandatory 
> > because people don't seem ever to write a comment explaining the 
> > requirements (myself included ;). It makes easier for people to 
> > diagnose problems with a third-party grammar.
> >
> > Johannes
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: 
> http://www.antlr.org/mailman/options/antlr-interest/your-email
-address


From gunjgupta at gmail.com  Mon Feb  2 00:45:26 2009
From: gunjgupta at gmail.com (Chal Chale apne Ghar)
Date: Mon, 2 Feb 2009 14:15:26 +0530
Subject: [antlr-interest] Error: TokenStreamException while reading Grammer
Message-ID: <f205f60902020045v2bec9cd2n5c7e9ff86fff3be5@mail.gmail.com>

Hi All,
I am new to Antlr. So i need some help on this.
<br>
While running this as follows  on command prompt.<br>
<p>
D:\Actuate\Samplelexer-parser\ConversionTool>java antlr.Tool vb_org.txt
ANTLR Parser Generator   Version 2.7.5 (20050128)   1989-2005 jGuru.com
error: Token stream error reading grammar(s):
vb_org.txt:45:7: expecting ''', found 'p'
TokenStreamException: expecting ''', found 'p'
<p>
as seen, i am getting TokenStream Exception. But when i am using AntlrWorks
to check the Grammer syntax, it is showing correct to me.
<br>
Could anybody help me on this ?
I would like to send my Grammer as reference.
<br>
Any help would be appreciated.

regards,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090202/32829097/attachment.html 

From robgreene at gmail.com  Mon Feb  2 05:25:55 2009
From: robgreene at gmail.com (Rob Greene)
Date: Mon, 2 Feb 2009 07:25:55 -0600
Subject: [antlr-interest] Newbie question about lex token matching
	priority
In-Reply-To: <80531546B1EAB64CBA160D97566FC7E52F171CB65C@NA-EXMSG-C117.redmond.corp.microsoft.com>
References: <80531546B1EAB64CBA160D97566FC7E52F170D4DD0@NA-EXMSG-C117.redmond.corp.microsoft.com>
	<738584f80901301849r421bba8cqa32cc96920b87ee@mail.gmail.com>
	<80531546B1EAB64CBA160D97566FC7E52F171CB65C@NA-EXMSG-C117.redmond.corp.microsoft.com>
Message-ID: <738584f80902020525o23f612d3t4e444db848ec27a9@mail.gmail.com>

Ok, how about this?  The problem I had was I'd define the '(' and ')'
as a lexer rule and then try to use it as such in the grammar.  I had
to break it out --

/* Parsing input such as "(#)name" */
grammar CurtCarpenter;

language:	data+ ;
data	:	LPAREN NUMBER RPAREN name NEWLINE ;
name	:	(CHAR | LPAREN | RPAREN)+ ;

NUMBER	:	'-'? '0'..'9'+ ;
CHAR 	:	' ' | '!'..'\'' | '*'..'\u00fe' ;
NEWLINE	:	'\r'? '\n';
LPAREN	:	'(';
RPAREN	:	')';

Is that close to what you need?  It seemed to work in ANTLRWorks and I
checked it against this input:

(1)apple
(2)george
(3)bad (one)
(-5) lots of spaces in here! ((()))

-Rob

On Sun, Feb 1, 2009 at 9:13 AM, Curt Carpenter
<Curt.Carpenter at microsoft.com> wrote:
> Hi Rob, thanks for the reply. I was beginning to wonder whether my email went off into the ether.
>
> The problem with making PARENNUM a parse rule is that it ALSO matches NAME. In fact it would ONLY match NAME, and never the parse rule, since (0) is also a valid NAME (a lex token). So what I finally came up with (not sure this is exactly what I said in my follow-up) is a bunch of different tokens, matching the combinations that a name can appear in:
> ID_NAME_COLON   : PARENNUM ('!'..'\u00FE')+ ':';        // (0)curtc:
> ID_NAME         : PARENNUM ('!'..'\u00FE')+ ;           // (0)curtc
> NAME_COLON              : ('!'..'\u00FE')+ ':';                 // curtc:
> PARENNUM                : '(' NUMBER ')';                               // (0)
> NUMBER          : '-'? ('0'..'9')+;                     // 0
> fragment NAME   : ('!'..'\u00FE')+;                     // curtc
> WS                      : ( '\t' | ' ' | '\r' | '\n'| '\u000C' )+ { $channel = HIDDEN; } ;
>
> Then in parse rules, given whichever token matches, I can know which portion is the name, and whether there is an id, by using different target language actions for each separate token, and trivially cracking. After I think finally wrapping my head around it, I'm pretty sure what I have is reasonable (passes all 250,000+ existing source files), given that I can't change the input. But if you think there's a much better way, I'd still be interested to hear, even though I'm not blocked.
>
> Thanks,
>
> Curt
>
> -----Original Message-----
> From: Rob Greene
> Sent: Saturday, January 31, 2009 10:50 AM
>
> Hi Curt --
>
> First off, I'm a total hack at ANTLR.  And that's in the golfing sense
> with grass flying everywhere and not in the geek sense of being
> totally awesome.  Awesome is reserved for others on this list.  So, if
> I mislead you, sorry in advance!!
>
> Anyway, from your description, think PARENNUM isn't a lexer rule but a
> grammar rule.
>
> So you'd have something like:
>
> language: data+ ;
> data: '(' NUMBER ')' NAME ;
>
> and the same lex rules for NUMBER and NAME as before.  Also, don't
> forget a whitespace rule (I assume you need one?)
>
> WS: (' ' | '\t' | '\n' | '\r')+ {skip();}
>
> I hope I'm leading you in the right direction at least!
> -Rob
>
> On Thu, Jan 29, 2009 at 10:14 AM, Curt Carpenter
> <Curt.Carpenter at microsoft.com> wrote:
>> Hi all, I am 1 day in on ANTLR, so be gentle. J
>>
>>
>>
>> I have gone through the tutorials and such, and have created a grammar from
>> scratch, debugged it and have it mostly working, except for one problem. I
>> want to parse something like this:
>>
>> (#)name
>>
>> Where # is a number, but name can be virtually anything except space. I
>> think. I don't own the language, so please don't suggest that name should be
>> further restricted. So I defined the lex rules as so:
>>
>> PARENNUM       : '(' NUMBER ')';
>>
>> NUMBER             : '-'? ('0'..'9')+;
>>
>> NAME                   : ('!'..'\u00FE')+; // ansi only
>>
>>
>>
>> You can see the problem at NAME. (0)curt is a valid name. But what I really
>> want is to parse as PARENNUM=(0) NAME=curt. I have a parse rule to match
>> that. But, the lex rules match longest string first, so (0)curt is always
>> tokenized as NAME. Is there any way to change the priority of matching lex
>> tokens to be the order they're defined, rather than order only breaking ties
>> in string length?
>>
>>
>>
>> Or is there some other way to accomplish the simple parse rule I'm trying to
>> solve?
>>
>>
>>
>> Thanks,
>>
>>
>>
>> Curt
>

From Curt.Carpenter at microsoft.com  Mon Feb  2 07:25:28 2009
From: Curt.Carpenter at microsoft.com (Curt Carpenter)
Date: Mon, 2 Feb 2009 07:25:28 -0800
Subject: [antlr-interest] Newbie question about lex token
	matching	priority
In-Reply-To: <738584f80902020525o23f612d3t4e444db848ec27a9@mail.gmail.com>
References: <80531546B1EAB64CBA160D97566FC7E52F170D4DD0@NA-EXMSG-C117.redmond.corp.microsoft.com>
	<738584f80901301849r421bba8cqa32cc96920b87ee@mail.gmail.com>
	<80531546B1EAB64CBA160D97566FC7E52F171CB65C@NA-EXMSG-C117.redmond.corp.microsoft.com>
	<738584f80902020525o23f612d3t4e444db848ec27a9@mail.gmail.com>
Message-ID: <80531546B1EAB64CBA160D97566FC7E52F171CB7FF@NA-EXMSG-C117.redmond.corp.microsoft.com>

Note that ' ' is expressly not allowed in a name. Unfortunately, a name only sometimes has (#) before it, but also sometimes has colon after it. See my lexer rules. And these names (with or without ids and/or colon) have other elements on a line. I only mentioned the part that was not straight-forward. I guess you could make more parse rules like the one you made, using the idea of making a lex rule for a single character (and don't forget to allow NUMBER in your name rule). But the downside is that the token stream gets much longer, with a token for every character in every name. That seems like a clear disadvantage, but I'm less clear on what the upside would be of moving paren matching to parser rule.

BTW, by my  understanding, you needn't complicate the CHAR lex rule to get what you're after (removing the parens). Rather, you can simply put the paren rules ahead of the CHAR rule. This was a bit of frustration for me before I finally got that internalized.

BTW#2, I just noticed that in my previous email's lex rules, the fragment NAME is obsolete. It doesn't work and I stopped using it for reasons I already explained.

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Rob Greene
Sent: Monday, February 02, 2009 9:26 PM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Newbie question about lex token matching priority

Ok, how about this?  The problem I had was I'd define the '(' and ')'
as a lexer rule and then try to use it as such in the grammar.  I had
to break it out --

/* Parsing input such as "(#)name" */
grammar CurtCarpenter;

language:       data+ ;
data    :       LPAREN NUMBER RPAREN name NEWLINE ;
name    :       (CHAR | LPAREN | RPAREN)+ ;

NUMBER  :       '-'? '0'..'9'+ ;
CHAR    :       ' ' | '!'..'\'' | '*'..'\u00fe' ;
NEWLINE :       '\r'? '\n';
LPAREN  :       '(';
RPAREN  :       ')';

Is that close to what you need?  It seemed to work in ANTLRWorks and I
checked it against this input:

(1)apple
(2)george
(3)bad (one)
(-5) lots of spaces in here! ((()))

-Rob

On Sun, Feb 1, 2009 at 9:13 AM, Curt Carpenter
<Curt.Carpenter at microsoft.com> wrote:
> Hi Rob, thanks for the reply. I was beginning to wonder whether my email went off into the ether.
>
> The problem with making PARENNUM a parse rule is that it ALSO matches NAME. In fact it would ONLY match NAME, and never the parse rule, since (0) is also a valid NAME (a lex token). So what I finally came up with (not sure this is exactly what I said in my follow-up) is a bunch of different tokens, matching the combinations that a name can appear in:
> ID_NAME_COLON   : PARENNUM ('!'..'\u00FE')+ ':';        // (0)curtc:
> ID_NAME         : PARENNUM ('!'..'\u00FE')+ ;           // (0)curtc
> NAME_COLON              : ('!'..'\u00FE')+ ':';                 // curtc:
> PARENNUM                : '(' NUMBER ')';                               // (0)
> NUMBER          : '-'? ('0'..'9')+;                     // 0
> fragment NAME   : ('!'..'\u00FE')+;                     // curtc
> WS                      : ( '\t' | ' ' | '\r' | '\n'| '\u000C' )+ { $channel = HIDDEN; } ;
>
> Then in parse rules, given whichever token matches, I can know which portion is the name, and whether there is an id, by using different target language actions for each separate token, and trivially cracking. After I think finally wrapping my head around it, I'm pretty sure what I have is reasonable (passes all 250,000+ existing source files), given that I can't change the input. But if you think there's a much better way, I'd still be interested to hear, even though I'm not blocked.
>
> Thanks,
>
> Curt
>
> -----Original Message-----
> From: Rob Greene
> Sent: Saturday, January 31, 2009 10:50 AM
>
> Hi Curt --
>
> First off, I'm a total hack at ANTLR.  And that's in the golfing sense
> with grass flying everywhere and not in the geek sense of being
> totally awesome.  Awesome is reserved for others on this list.  So, if
> I mislead you, sorry in advance!!
>
> Anyway, from your description, think PARENNUM isn't a lexer rule but a
> grammar rule.
>
> So you'd have something like:
>
> language: data+ ;
> data: '(' NUMBER ')' NAME ;
>
> and the same lex rules for NUMBER and NAME as before.  Also, don't
> forget a whitespace rule (I assume you need one?)
>
> WS: (' ' | '\t' | '\n' | '\r')+ {skip();}
>
> I hope I'm leading you in the right direction at least!
> -Rob
>
> On Thu, Jan 29, 2009 at 10:14 AM, Curt Carpenter
> <Curt.Carpenter at microsoft.com> wrote:
>> Hi all, I am 1 day in on ANTLR, so be gentle. J
>>
>>
>>
>> I have gone through the tutorials and such, and have created a grammar from
>> scratch, debugged it and have it mostly working, except for one problem. I
>> want to parse something like this:
>>
>> (#)name
>>
>> Where # is a number, but name can be virtually anything except space. I
>> think. I don't own the language, so please don't suggest that name should be
>> further restricted. So I defined the lex rules as so:
>>
>> PARENNUM       : '(' NUMBER ')';
>>
>> NUMBER             : '-'? ('0'..'9')+;
>>
>> NAME                   : ('!'..'\u00FE')+; // ansi only
>>
>>
>>
>> You can see the problem at NAME. (0)curt is a valid name. But what I really
>> want is to parse as PARENNUM=(0) NAME=curt. I have a parse rule to match
>> that. But, the lex rules match longest string first, so (0)curt is always
>> tokenized as NAME. Is there any way to change the priority of matching lex
>> tokens to be the order they're defined, rather than order only breaking ties
>> in string length?
>>
>>
>>
>> Or is there some other way to accomplish the simple parse rule I'm trying to
>> solve?
>>
>>
>>
>> Thanks,
>>
>>
>>
>> Curt
>

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From code_dude at nym.hush.com  Mon Feb  2 09:11:30 2009
From: code_dude at nym.hush.com (code_dude at nym.hush.com)
Date: Mon, 02 Feb 2009 17:11:30 +0000
Subject: [antlr-interest] Theading Tree Walkers
Message-ID: <20090202171130.DE98E118049@smtp.hushmail.com>

Hi there,
Im using antr-2.7.6 (C++ code generation) and have a threading 
problem with the antlr generated tree walker. 
 
Basically what Im doing if taking the parse tree and sorting the 
expressions ( using my custom function openmp_sort(tr, &inn_vtr) ) 
into  their own basic blocks then and then parallel process (using 
Open MP) the expressions in each block.   

The thing I when I run it , every so often I get a segmentation 
fault from my tree parser. Below is the stack trace from ddd
  

antlr::ASTRef::~ASTRef ()  (destructor called from ASTRefCount.hpp)
ncoTree::assign            (process an essign expression)  
ncoTree::out               (expression walker)
ncoTree::statements        (statement walker) 


Below is an example of my "openmp_sort(RefAST 
tr,std::vector<RefAST> &inn_vtr)"  function in action. Also 
attached is ( a big simplification ) code detailing how I invoke 
the antlr generated code. I hope I have made clear what I'm doing.



// Input Expressions
A=10;
B=20;
C=30;
D=40;
A++;
B*=20;
C-=40;
E=A+B;
F=A+B+C+D+E;
G=A;
G++;
D++;
H=20/++A;
I=A+C+D;
J=40;
K=H*(C-=1);

// Sorted Expressions
-------------------------------
 ( EXPR ( = A 10 ) )
 ( EXPR ( = B 20 ) )
 ( EXPR ( = C 30 ) )
 ( EXPR ( = D 40 ) )
 ( EXPR ( = J 40 ) )
-------------------------------
-------------------------------
 ( EXPR ( POST_INC A ) )
 ( EXPR ( *= B 20 ) )
 ( EXPR ( -= C 40 ) )
-------------------------------
-------------------------------
 ( EXPR ( = E ( + A B ) ) )
 ( EXPR ( = G A ) )
-------------------------------
-------------------------------
 ( EXPR ( = F ( + ( + ( + ( + A B ) C ) D ) E ) ) )
 ( EXPR ( POST_INC G ) )
-------------------------------
-------------------------------
 ( EXPR ( POST_INC D ) )
 ( EXPR ( = H ( / 20 ( ++ A ) ) ) )
-------------------------------
-------------------------------
 ( EXPR ( = I ( + ( + A C ) D ) ) )
-------------------------------
-------------------------------
 ( EXPR ( = K ( * H ( -= C 1 ) ) ) )
-------------------------------


/********************** Code 
*************************************************/

int parse_antlr(std::vector<prs_cls> &prs_vtr,char* fl_spt_usr,char 
*cmd_ln_sng)
{
  
  ANTLR_USING_NAMESPACE(std);
  ANTLR_USING_NAMESPACE(antlr);
  

  int idx;  
  prs_cls *prs_arg;
  std::string filename(fl_spt_usr);

  std::vector<ncoTree*> wlk_vtr;
  std::vector<RefAST> inn_vtr;

  ncoLexer *lexer=NULL;
  ncoParser *parser=NULL;

  istringstream *sin=NULL;
  ifstream *in=NULL;
  
  
  RefAST tr,a;
  ASTFactory ast_factory;

  prs_arg=&prs_vtr[0]; 
  
  std::vector<ncoTree*> wlk_vtr;
  std::vector<RefAST> inn_vtr;


    
    if( cmd_ln_sng ){
      sin= new  istringstream(cmd_ln_sng);
      lexer= new ncoLexer( *sin, prs_arg);
      selector.addInputStream(lexer,cmd_ln_sng);
      selector.select(cmd_ln_sng);
    }else {
      in=new ifstream(filename.c_str());          
      lexer= new ncoLexer( *in, prs_arg);
      selector.addInputStream(lexer,filename);
      selector.select(filename);

    }     
    
    
    lexer->setFilename(filename);
    
    parser= new ncoParser(selector);
    parser->setFilename(filename);
    parser->inc_vtr.push_back(filename);
    

    parser->initializeASTFactory(ast_factory);
    parser->setASTFactory(&ast_factory);
    
    
    // Parse the input expressions
    parser->program();
    a = parser->getAST();
  
  tr=a;

  // Do an OpenMP Sort
  (void)openmp_sort(tr,&inn_vtr);   
  
  // initialize walkers   
    ncoTree* wlk_obj;    
    for(idx=0 ; idx< (int)prs_vtr.size(); idx++){
      wlk_obj=new ncoTree(&prs_vtr[idx]);  
      wlk_obj->initializeASTFactory(ast_factory);
      wlk_obj->setASTFactory(&ast_factory);
      wlk_vtr.push_back(wlk_obj); 
    }      
    
     


    // walk the tree in parallel processing statements
   
#ifdef _OPENMP
#pragma omp parallel for default(none) private(kdx,wlk_vtr,tr) 
#endif
   for(kdx=0 ;kdx< nbr_sz; kdx++) {      

     tr=inn_vtr[kdx];
     wlk_vtr[omp_get_thread_num]->statements(tr);


   } //end OPENMP parallel loop






   
  return 1;
}


/********************** Code 
*************************************************/




From lgcraymer at yahoo.com  Mon Feb  2 10:51:14 2009
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Mon, 2 Feb 2009 10:51:14 -0800 (PST)
Subject: [antlr-interest] Theading Tree Walkers
References: <20090202171130.DE98E118049@smtp.hushmail.com>
Message-ID: <501785.20176.qm@web55906.mail.re3.yahoo.com>

C++ garbage collection (uses reference counting in ASTRef) for ANTLR 2 is _not_ thread safe, nor was it intended to be.  You'll have to judiciously add in lock/unlock calls to make it so.  AFAIK, no one has taken the effort to make any of the ANTLR runtimes thread safe, nor is there any reason to do so under normal conditions--ANTLR operates serially on input data, including trees.

--Loring



----- Original Message ----
> From: "code_dude at nym.hush.com" <code_dude at nym.hush.com>
> To: antlr-interest at antlr.org
> Sent: Monday, February 2, 2009 9:11:30 AM
> Subject: [antlr-interest] Theading Tree Walkers
> 
> Hi there,
> Im using antr-2.7.6 (C++ code generation) and have a threading 
> problem with the antlr generated tree walker. 
> 
> Basically what Im doing if taking the parse tree and sorting the 
> expressions ( using my custom function openmp_sort(tr, &inn_vtr) ) 
> into  their own basic blocks then and then parallel process (using 
> Open MP) the expressions in each block.  
> 
> The thing I when I run it , every so often I get a segmentation 
> fault from my tree parser. Below is the stack trace from ddd
>   
> 
> antlr::ASTRef::~ASTRef ()  (destructor called from ASTRefCount.hpp)
> ncoTree::assign            (process an essign expression)  
> ncoTree::out               (expression walker)
> ncoTree::statements        (statement walker) 
> 
> 
> Below is an example of my "openmp_sort(RefAST 
> tr,std::vector&inn_vtr)"  function in action. Also 
> attached is ( a big simplification ) code detailing how I invoke 
> the antlr generated code. I hope I have made clear what I'm doing.
> 
> 
> 
> // Input Expressions
> A=10;
> B=20;
> C=30;
> D=40;
> A++;
> B*=20;
> C-=40;
> E=A+B;
> F=A+B+C+D+E;
> G=A;
> G++;
> D++;
> H=20/++A;
> I=A+C+D;
> J=40;
> K=H*(C-=1);
> 
> // Sorted Expressions
> -------------------------------
> ( EXPR ( = A 10 ) )
> ( EXPR ( = B 20 ) )
> ( EXPR ( = C 30 ) )
> ( EXPR ( = D 40 ) )
> ( EXPR ( = J 40 ) )
> -------------------------------
> -------------------------------
> ( EXPR ( POST_INC A ) )
> ( EXPR ( *= B 20 ) )
> ( EXPR ( -= C 40 ) )
> -------------------------------
> -------------------------------
> ( EXPR ( = E ( + A B ) ) )
> ( EXPR ( = G A ) )
> -------------------------------
> -------------------------------
> ( EXPR ( = F ( + ( + ( + ( + A B ) C ) D ) E ) ) )
> ( EXPR ( POST_INC G ) )
> -------------------------------
> -------------------------------
> ( EXPR ( POST_INC D ) )
> ( EXPR ( = H ( / 20 ( ++ A ) ) ) )
> -------------------------------
> -------------------------------
> ( EXPR ( = I ( + ( + A C ) D ) ) )
> -------------------------------
> -------------------------------
> ( EXPR ( = K ( * H ( -= C 1 ) ) ) )
> -------------------------------
> 
> 
> /********************** Code 
> *************************************************/
> 
> int parse_antlr(std::vector&prs_vtr,char* fl_spt_usr,char 
> *cmd_ln_sng)
> {
>   
>   ANTLR_USING_NAMESPACE(std);
>   ANTLR_USING_NAMESPACE(antlr);
>   
> 
>   int idx;  
>   prs_cls *prs_arg;
>   std::string filename(fl_spt_usr);
> 
>   std::vectorwlk_vtr;
>   std::vectorinn_vtr;
> 
>   ncoLexer *lexer=NULL;
>   ncoParser *parser=NULL;
> 
>   istringstream *sin=NULL;
>   ifstream *in=NULL;
>   
>   
>   RefAST tr,a;
>   ASTFactory ast_factory;
> 
>   prs_arg=&prs_vtr[0]; 
>   
>   std::vectorwlk_vtr;
>   std::vectorinn_vtr;
> 
> 
>     
>     if( cmd_ln_sng ){
>       sin= new  istringstream(cmd_ln_sng);
>       lexer= new ncoLexer( *sin, prs_arg);
>       selector.addInputStream(lexer,cmd_ln_sng);
>       selector.select(cmd_ln_sng);
>     }else {
>       in=new ifstream(filename.c_str());          
>       lexer= new ncoLexer( *in, prs_arg);
>       selector.addInputStream(lexer,filename);
>       selector.select(filename);
> 
>     }    
>     
>     
>     lexer->setFilename(filename);
>     
>     parser= new ncoParser(selector);
>     parser->setFilename(filename);
>     parser->inc_vtr.push_back(filename);
>     
> 
>     parser->initializeASTFactory(ast_factory);
>     parser->setASTFactory(&ast_factory);
>     
>     
>     // Parse the input expressions
>     parser->program();
>     a = parser->getAST();
>   
>   tr=a;
> 
>   // Do an OpenMP Sort
>   (void)openmp_sort(tr,&inn_vtr);  
>   
>   // initialize walkers  
>     ncoTree* wlk_obj;    
>     for(idx=0 ; idx< (int)prs_vtr.size(); idx++){
>       wlk_obj=new ncoTree(&prs_vtr[idx]);  
>       wlk_obj->initializeASTFactory(ast_factory);
>       wlk_obj->setASTFactory(&ast_factory);
>       wlk_vtr.push_back(wlk_obj); 
>     }      
>     
>     
> 
> 
>     // walk the tree in parallel processing statements
>   
> #ifdef _OPENMP
> #pragma omp parallel for default(none) private(kdx,wlk_vtr,tr) 
> #endif
>    for(kdx=0 ;kdx< nbr_sz; kdx++) {      
> 
>      tr=inn_vtr[kdx];
>      wlk_vtr[omp_get_thread_num]->statements(tr);
> 
> 
>    } //end OPENMP parallel loop
> 
> 
> 
> 
> 
> 
>   
>   return 1;
> }
> 
> 
> /********************** Code 
> *************************************************/
> 
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: 
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address



      

From jimi at temporal-wave.com  Mon Feb  2 10:56:47 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 02 Feb 2009 10:56:47 -0800
Subject: [antlr-interest] Theading Tree Walkers
In-Reply-To: <501785.20176.qm@web55906.mail.re3.yahoo.com>
References: <20090202171130.DE98E118049@smtp.hushmail.com>
	<501785.20176.qm@web55906.mail.re3.yahoo.com>
Message-ID: <498741EF.4080504@temporal-wave.com>

Loring Craymer wrote:
> C++ garbage collection (uses reference counting in ASTRef) for ANTLR 2 is _not_ thread safe, nor was it intended to be.  You'll have to judiciously add in lock/unlock calls to make it so.  AFAIK, no one has taken the effort to make any of the ANTLR runtimes thread safe, nor is there any reason to do so under normal conditions--ANTLR operates serially on input data, including trees.
>   
The 3.1 C runtime is free threading :-)

Jim

From code_dude at nym.hush.com  Mon Feb  2 11:09:34 2009
From: code_dude at nym.hush.com (code_dude at nym.hush.com)
Date: Mon, 02 Feb 2009 19:09:34 +0000
Subject: [antlr-interest] Theading Tree Walkers
Message-ID: <20090202190947.A6D3B11804E@smtp.hushmail.com>


Thanks Loring,
Thats a bit of a blow- My interpreter depends heavily on Tree 
parsing, and it needs to be multi-threaded. 
Can you think of any quick fixes ? 
Would the correct solution to be convert the Parse tree into a 
thread safe tree Of my choosing ?
what about creating my Parse tree with a custom ast factory thats 
thread safe ?

Regards code dude



On Mon, 02 Feb 2009 18:51:14 +0000 Loring Craymer 
<lgcraymer at yahoo.com> wrote:
>C++ garbage collection (uses reference counting in ASTRef) for 
>ANTLR 2 is _not_ thread safe, nor was it intended to be.  You'll 
>have to judiciously add in lock/unlock calls to make it so.  
>AFAIK, no one has taken the effort to make any of the ANTLR 
>runtimes thread safe, nor is there any reason to do so under 
>normal conditions--ANTLR operates serially on input data, 
>including trees.
>
>--Loring
>
>
>
>----- Original Message ----
>> From: "code_dude at nym.hush.com" <code_dude at nym.hush.com>
>> To: antlr-interest at antlr.org
>> Sent: Monday, February 2, 2009 9:11:30 AM
>> Subject: [antlr-interest] Theading Tree Walkers
>> 
>> Hi there,
>> Im using antr-2.7.6 (C++ code generation) and have a threading 
>> problem with the antlr generated tree walker. 
>> 
>> Basically what Im doing if taking the parse tree and sorting the 
>
>> expressions ( using my custom function openmp_sort(tr, &inn_vtr) 
>) 
>> into  their own basic blocks then and then parallel process 
>(using 
>> Open MP) the expressions in each block.  
>> 
>> The thing I when I run it , every so often I get a segmentation 
>> fault from my tree parser. Below is the stack trace from ddd
>>   
>> 
>> antlr::ASTRef::~ASTRef ()  (destructor called from 
>ASTRefCount.hpp)
>> ncoTree::assign            (process an essign expression)  
>> ncoTree::out               (expression walker)
>> ncoTree::statements        (statement walker) 
>> 
>> 
>> Below is an example of my "openmp_sort(RefAST 
>> tr,std::vector&inn_vtr)"  function in action. Also 
>> attached is ( a big simplification ) code detailing how I invoke 
>
>> the antlr generated code. I hope I have made clear what I'm 
>doing.
>> 
>> 
>> 
>> // Input Expressions
>> A=10;
>> B=20;
>> C=30;
>> D=40;
>> A++;
>> B*=20;
>> C-=40;
>> E=A+B;
>> F=A+B+C+D+E;
>> G=A;
>> G++;
>> D++;
>> H=20/++A;
>> I=A+C+D;
>> J=40;
>> K=H*(C-=1);
>> 
>> // Sorted Expressions
>> -------------------------------
>> ( EXPR ( = A 10 ) )
>> ( EXPR ( = B 20 ) )
>> ( EXPR ( = C 30 ) )
>> ( EXPR ( = D 40 ) )
>> ( EXPR ( = J 40 ) )
>> -------------------------------
>> -------------------------------
>> ( EXPR ( POST_INC A ) )
>> ( EXPR ( *= B 20 ) )
>> ( EXPR ( -= C 40 ) )
>> -------------------------------
>> -------------------------------
>> ( EXPR ( = E ( + A B ) ) )
>> ( EXPR ( = G A ) )
>> -------------------------------
>> -------------------------------
>> ( EXPR ( = F ( + ( + ( + ( + A B ) C ) D ) E ) ) )
>> ( EXPR ( POST_INC G ) )
>> -------------------------------
>> -------------------------------
>> ( EXPR ( POST_INC D ) )
>> ( EXPR ( = H ( / 20 ( ++ A ) ) ) )
>> -------------------------------
>> -------------------------------
>> ( EXPR ( = I ( + ( + A C ) D ) ) )
>> -------------------------------
>> -------------------------------
>> ( EXPR ( = K ( * H ( -= C 1 ) ) ) )
>> -------------------------------
>> 
>> 
>> /********************** Code 
>> *************************************************/
>> 
>> int parse_antlr(std::vector&prs_vtr,char* fl_spt_usr,char 
>> *cmd_ln_sng)
>> {
>>   
>>   ANTLR_USING_NAMESPACE(std);
>>   ANTLR_USING_NAMESPACE(antlr);
>>   
>> 
>>   int idx;  
>>   prs_cls *prs_arg;
>>   std::string filename(fl_spt_usr);
>> 
>>   std::vectorwlk_vtr;
>>   std::vectorinn_vtr;
>> 
>>   ncoLexer *lexer=NULL;
>>   ncoParser *parser=NULL;
>> 
>>   istringstream *sin=NULL;
>>   ifstream *in=NULL;
>>   
>>   
>>   RefAST tr,a;
>>   ASTFactory ast_factory;
>> 
>>   prs_arg=&prs_vtr[0]; 
>>   
>>   std::vectorwlk_vtr;
>>   std::vectorinn_vtr;
>> 
>> 
>>     
>>     if( cmd_ln_sng ){
>>       sin= new  istringstream(cmd_ln_sng);
>>       lexer= new ncoLexer( *sin, prs_arg);
>>       selector.addInputStream(lexer,cmd_ln_sng);
>>       selector.select(cmd_ln_sng);
>>     }else {
>>       in=new ifstream(filename.c_str());          
>>       lexer= new ncoLexer( *in, prs_arg);
>>       selector.addInputStream(lexer,filename);
>>       selector.select(filename);
>> 
>>     }    
>>     
>>     
>>     lexer->setFilename(filename);
>>     
>>     parser= new ncoParser(selector);
>>     parser->setFilename(filename);
>>     parser->inc_vtr.push_back(filename);
>>     
>> 
>>     parser->initializeASTFactory(ast_factory);
>>     parser->setASTFactory(&ast_factory);
>>     
>>     
>>     // Parse the input expressions
>>     parser->program();
>>     a = parser->getAST();
>>   
>>   tr=a;
>> 
>>   // Do an OpenMP Sort
>>   (void)openmp_sort(tr,&inn_vtr);  
>>   
>>   // initialize walkers  
>>     ncoTree* wlk_obj;    
>>     for(idx=0 ; idx< (int)prs_vtr.size(); idx++){
>>       wlk_obj=new ncoTree(&prs_vtr[idx]);  
>>       wlk_obj->initializeASTFactory(ast_factory);
>>       wlk_obj->setASTFactory(&ast_factory);
>>       wlk_vtr.push_back(wlk_obj); 
>>     }      
>>     
>>     
>> 
>> 
>>     // walk the tree in parallel processing statements
>>   
>> #ifdef _OPENMP
>> #pragma omp parallel for default(none) private(kdx,wlk_vtr,tr) 
>> #endif
>>    for(kdx=0 ;kdx< nbr_sz; kdx++) {      
>> 
>>      tr=inn_vtr[kdx];
>>      wlk_vtr[omp_get_thread_num]->statements(tr);
>> 
>> 
>>    } //end OPENMP parallel loop
>> 
>> 
>> 
>> 
>> 
>> 
>>   
>>   return 1;
>> }
>> 
>> 
>> /********************** Code 
>> *************************************************/
>> 
>> 
>> 
>> 
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: 
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
>address


From antlr at mirality.co.nz  Mon Feb  2 11:53:57 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 03 Feb 2009 08:53:57 +1300
Subject: [antlr-interest] Error: TokenStreamException while reading
 Grammer
In-Reply-To: <f205f60902020045v2bec9cd2n5c7e9ff86fff3be5@mail.gmail.com>
References: <f205f60902020045v2bec9cd2n5c7e9ff86fff3be5@mail.gmail.com>
Message-ID: <20090202195407.C4F4E341847A@www.antlr.org>

At 21:45 2/02/2009, Chal Chale apne Ghar wrote:
>D:\Actuate\Samplelexer-parser\ConversionTool>java antlr.Tool 
>vb_org.txt
>ANTLR Parser Generator   Version 2.7.5 (20050128)   1989-2005 
>jGuru.com
>error: Token stream error reading grammar(s):
>vb_org.txt:45:7: expecting ''', found 'p'
>TokenStreamException: expecting ''', found 'p'
>
>as seen, i am getting TokenStream Exception. But when i am using 
>AntlrWorks to check the Grammer syntax, it is showing correct to 
>me.

You're running ANTLR v2 on the command line, but ANTLRWorks is for 
ANTLR v3.  To run ANTLR v3, you need to use "org.antlr.Tool", not 
"antlr.Tool".

Also, by convention grammar files have a .g extension.  This 
doesn't really matter (ANTLR will still happily compile the file 
regardless of extension), but it's a good idea to follow the 
convention, since that's what tools are expecting.


From code_dude at nym.hush.com  Mon Feb  2 12:09:04 2009
From: code_dude at nym.hush.com (code_dude at nym.hush.com)
Date: Mon, 02 Feb 2009 20:09:04 +0000
Subject: [antlr-interest] Theading Tree Walkers
Message-ID: <20090202200904.92FEE118049@smtp.hushmail.com>

Hi Jim,
Will the v3 antlr C++ module be free threading when its finally 
released ?

Regards code_dude

On Mon, 02 Feb 2009 18:56:47 +0000 Jim Idle <jimi at temporal-
wave.com> wrote:
>Loring Craymer wrote:
>> C++ garbage collection (uses reference counting in ASTRef) for 
>ANTLR 2 is _not_ thread safe, nor was it intended to be.  You'll 
>have to judiciously add in lock/unlock calls to make it so.  
>AFAIK, no one has taken the effort to make any of the ANTLR 
>runtimes thread safe, nor is there any reason to do so under 
>normal conditions--ANTLR operates serially on input data, 
>including trees.
>>   
>The 3.1 C runtime is free threading :-)
>
>Jim
>
>List: http://www.antlr.org/mailman/listinfo/antlr-interest
>Unsubscribe: http://www.antlr.org/mailman/options/antlr-
>interest/your-email-address


From jimi at temporal-wave.com  Mon Feb  2 12:14:03 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 02 Feb 2009 12:14:03 -0800
Subject: [antlr-interest] Theading Tree Walkers
In-Reply-To: <20090202200904.92FEE118049@smtp.hushmail.com>
References: <20090202200904.92FEE118049@smtp.hushmail.com>
Message-ID: <4987540B.1080100@temporal-wave.com>

code_dude at nym.hush.com wrote:
> Hi Jim,
> Will the v3 antlr C++ module be free threading when its finally 
> released ?
>   

Yes, but you can use the C runtime with C++ right now.

Jim

From antlr at jazillian.com  Mon Feb  2 12:34:21 2009
From: antlr at jazillian.com (Andy Tripp)
Date: Mon, 02 Feb 2009 15:34:21 -0500
Subject: [antlr-interest] tree walking and semantic analysis
In-Reply-To: <729100.21422.qm@web50104.mail.re2.yahoo.com>
References: <729100.21422.qm@web50104.mail.re2.yahoo.com>
Message-ID: <498758CD.1090703@jazillian.com>

Carter,

You'll probably need to be more specific in order to get a response.
On handling errors during treewalking, did you read the section in the TDAR book?
On the issue of keeping things "clean" in the treewalker, you'll have to be more specific
on what you've tried and what you don't like about it.
The treewalker approach naturally means that you specify the shape of the tree in your tree grammar.
If you want to slice the problem a different way, then maybe a treewalker isn't the right approach.

Andy

Carter Cheng wrote:
> Hi,
> 
> This is my first attempt at trying to build a compiler frontend and I have run into some problems which I am not sure how to resolve with ANTLR. The two issues are how to generate semantic analysis pass errors from the tree walking code and how best to design the passes code which conceptually keeps things like various context checks and type checks cleanly separated. 
> 
> Is there a canonical way to do this with ANTLR (and perhaps some example projects out there from ppl who have implemented full compilers)?
> 
> Thanks in advance,
> 
> Carter.  
> 
> 
>       
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From carter_cheng at yahoo.com  Mon Feb  2 13:35:53 2009
From: carter_cheng at yahoo.com (Carter Cheng)
Date: Mon, 2 Feb 2009 13:35:53 -0800 (PST)
Subject: [antlr-interest] tree walking and semantic analysis
In-Reply-To: <498758CD.1090703@jazillian.com>
Message-ID: <818821.34795.qm@web50102.mail.re2.yahoo.com>

Hi Andy and the others,

Thanks for the reply. I am currently reworking my tree code and doing it somewhat manually because I was having some difficulties with working with the C runtime in C++ mode. The difficulty I was having was something along these lines- 

program[int pass] 
: (declarations[pass])*
; 

declarations[int pass]
: /* some CFG rule case */ { switch(pass) { /* do something depending on the pass */ } }
;

This obviously seems like quite a mess. Especially when in different passes you need to percolate different types of data up the tree and left to right depending on the pass. 

A possible alternative is to using some sort of visitor or function object which behaves differently on each pass. However I am not quite sure how to get this to work properly. The issue primarily is with the return value types in my language I have certain expression constants which need to be checked and if possible reduced to their actual values in certain descents of the grammar and in other cases return the whole expression tree- 

declaration[Functor f] returns [??? retval ]
: /* some CFG rule case */ { $retval = f(e); }
;

The return type can be quite different depending on the functor in question making it somewhat difficult to determine what the type of retval should be. 

This is getting a bit long I suspect with the error situation with multiple errors the only thing that can be done is return something... pass in some sort of functor or I/O stream which can be used to dump data back to the user etc.

I hope that sort of makes sense.

Regards,

Carter.


      

From andy.grove at codefutures.com  Mon Feb  2 13:37:18 2009
From: andy.grove at codefutures.com (Andy Grove)
Date: Mon, 2 Feb 2009 14:37:18 -0700
Subject: [antlr-interest] C runtime issue
Message-ID: <2b951e7d0902021337y662606f8pc20b1f3be883f0f1@mail.gmail.com>

Hi,

When I invoke my generated C parser, I see memory usage climb from 770MB to
4GB in a few seconds and the parser never returns. My init code is as
follows:

    input = antlr3NewAsciiStringInPlaceStream((pANTLR3_UINT8)stringCopy,
stringLength, NULL);
    if (input == NULL) {
        log->error("input error");
        return;
    }

    lexer = DbsMySQL_CPPLexerNew(input);
    if (lexer == NULL) {
        log->error("lexer error");
        return;
    }

    tstream = antlr3CommonTokenStreamSourceNew(ANTLR3_SIZE_HINT,
lexer->pLexer->rec->state->tokSource);
    if (tstream == NULL) {
        log->error("token stream error");
        return;
    }

    parser = DbsMySQL_CPPParserNew(tstream);
     if (parser == NULL) {
        log->error("parser error");
         return;
     }

     parser->statement(parser);

I added some printf() statements to the generated code and tracked the issue
down to the "LA(1)" macro which expands to
"ctx->pParser->tstream->istream->_LA(ctx->pParser->tstream->istream, 1)". It
seems that this call never completes. Here is the code in question:

statement(pDbsMySQL_CPPParser ctx)
{
    printf("statement()\n");
    /* Initialize rule variables
     */
     /* Empty */
    {
        {
            //  DbsMySQL_CPP.g:74:1: (i= insertStatement EOF | s=
selectStatement[true] EOF | u= updateStatement EOF | d= deleteStatement EOF
)
            printf("** 1\n");

            ANTLR3_UINT32 alt1;
            alt1=4;

            printf("** 2\n");

            switch ( LA(1) )  // this call never completes
            {
            case INSERT:

I'd appreciate any pointers on fixing this or at least debugging it further.

Thanks!

Andy.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090202/bd9839d7/attachment.html 

From lgcraymer at yahoo.com  Mon Feb  2 14:04:50 2009
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Mon, 2 Feb 2009 14:04:50 -0800 (PST)
Subject: [antlr-interest] Theading Tree Walkers
References: <20090202190947.A6D3B11804E@smtp.hushmail.com>
Message-ID: <259042.28835.qm@web55902.mail.re3.yahoo.com>

Since you are only walking the tree, not rewriting it, in parallel, you could probably get by with a model where only one thread "owns" the AST nodes and does reference counting.  That is, look at
ASTRefCount.hpp
ASTRefCount.cpp
RefCount.hpp

and change the reference counting/deletion logic to recognize one node as owner:
add "if (mynode == ASTRef::mynode) ..." around the reference counting code for ASTs
and initialize ASTRef::mynode during parser creation.
(BTW:  replace "mynode" by whatever OpenMP uses for getting the local thread id.)

There are other approaches which might work, as well, but this one is a good way to eliminate race conditions without impacting ANTLR behavior and with minimal impact on performance.

--Loring



----- Original Message ----
> From: "code_dude at nym.hush.com" <code_dude at nym.hush.com>
> To: code_dude at nym.hush.com; antlr-interest at antlr.org; lgcraymer at yahoo.com
> Sent: Monday, February 2, 2009 11:09:34 AM
> Subject: Re: [antlr-interest] Theading Tree Walkers
> 
> 
> Thanks Loring,
> Thats a bit of a blow- My interpreter depends heavily on Tree 
> parsing, and it needs to be multi-threaded. 
> Can you think of any quick fixes ? 
> Would the correct solution to be convert the Parse tree into a 
> thread safe tree Of my choosing ?
> what about creating my Parse tree with a custom ast factory thats 
> thread safe ?
> 
> Regards code dude
> 
> 
> 
> On Mon, 02 Feb 2009 18:51:14 +0000 Loring Craymer 
> wrote:
> >C++ garbage collection (uses reference counting in ASTRef) for 
> >ANTLR 2 is _not_ thread safe, nor was it intended to be.  You'll 
> >have to judiciously add in lock/unlock calls to make it so.  
> >AFAIK, no one has taken the effort to make any of the ANTLR 
> >runtimes thread safe, nor is there any reason to do so under 
> >normal conditions--ANTLR operates serially on input data, 
> >including trees.
> >
> >--Loring
> >
> >
> >
> >----- Original Message ----
> >> From: "code_dude at nym.hush.com" 
> >> To: antlr-interest at antlr.org
> >> Sent: Monday, February 2, 2009 9:11:30 AM
> >> Subject: [antlr-interest] Theading Tree Walkers
> >> 
> >> Hi there,
> >> Im using antr-2.7.6 (C++ code generation) and have a threading 
> >> problem with the antlr generated tree walker. 
> >> 
> >> Basically what Im doing if taking the parse tree and sorting the 
> >
> >> expressions ( using my custom function openmp_sort(tr, &inn_vtr) 
> >) 
> >> into  their own basic blocks then and then parallel process 
> >(using 
> >> Open MP) the expressions in each block.  
> >> 
> >> The thing I when I run it , every so often I get a segmentation 
> >> fault from my tree parser. Below is the stack trace from ddd
> >>  
> >> 
> >> antlr::ASTRef::~ASTRef ()  (destructor called from 
> >ASTRefCount.hpp)
> >> ncoTree::assign            (process an essign expression)  
> >> ncoTree::out               (expression walker)
> >> ncoTree::statements        (statement walker) 
> >> 
> >> 
> >> Below is an example of my "openmp_sort(RefAST 
> >> tr,std::vector&inn_vtr)"  function in action. Also 
> >> attached is ( a big simplification ) code detailing how I invoke 
> >
> >> the antlr generated code. I hope I have made clear what I'm 
> >doing.
> >> 
> >> 
> >> 
> >> // Input Expressions
> >> A=10;
> >> B=20;
> >> C=30;
> >> D=40;
> >> A++;
> >> B*=20;
> >> C-=40;
> >> E=A+B;
> >> F=A+B+C+D+E;
> >> G=A;
> >> G++;
> >> D++;
> >> H=20/++A;
> >> I=A+C+D;
> >> J=40;
> >> K=H*(C-=1);
> >> 
> >> // Sorted Expressions
> >> -------------------------------
> >> ( EXPR ( = A 10 ) )
> >> ( EXPR ( = B 20 ) )
> >> ( EXPR ( = C 30 ) )
> >> ( EXPR ( = D 40 ) )
> >> ( EXPR ( = J 40 ) )
> >> -------------------------------
> >> -------------------------------
> >> ( EXPR ( POST_INC A ) )
> >> ( EXPR ( *= B 20 ) )
> >> ( EXPR ( -= C 40 ) )
> >> -------------------------------
> >> -------------------------------
> >> ( EXPR ( = E ( + A B ) ) )
> >> ( EXPR ( = G A ) )
> >> -------------------------------
> >> -------------------------------
> >> ( EXPR ( = F ( + ( + ( + ( + A B ) C ) D ) E ) ) )
> >> ( EXPR ( POST_INC G ) )
> >> -------------------------------
> >> -------------------------------
> >> ( EXPR ( POST_INC D ) )
> >> ( EXPR ( = H ( / 20 ( ++ A ) ) ) )
> >> -------------------------------
> >> -------------------------------
> >> ( EXPR ( = I ( + ( + A C ) D ) ) )
> >> -------------------------------
> >> -------------------------------
> >> ( EXPR ( = K ( * H ( -= C 1 ) ) ) )
> >> -------------------------------
> >> 
> >> 
> >> /********************** Code 
> >> *************************************************/
> >> 
> >> int parse_antlr(std::vector&prs_vtr,char* fl_spt_usr,char 
> >> *cmd_ln_sng)
> >> {
> >>  
> >>   ANTLR_USING_NAMESPACE(std);
> >>   ANTLR_USING_NAMESPACE(antlr);
> >>  
> >> 
> >>   int idx;  
> >>   prs_cls *prs_arg;
> >>   std::string filename(fl_spt_usr);
> >> 
> >>   std::vectorwlk_vtr;
> >>   std::vectorinn_vtr;
> >> 
> >>   ncoLexer *lexer=NULL;
> >>   ncoParser *parser=NULL;
> >> 
> >>   istringstream *sin=NULL;
> >>   ifstream *in=NULL;
> >>  
> >>  
> >>   RefAST tr,a;
> >>   ASTFactory ast_factory;
> >> 
> >>   prs_arg=&prs_vtr[0]; 
> >>  
> >>   std::vectorwlk_vtr;
> >>   std::vectorinn_vtr;
> >> 
> >> 
> >>    
> >>     if( cmd_ln_sng ){
> >>       sin= new  istringstream(cmd_ln_sng);
> >>       lexer= new ncoLexer( *sin, prs_arg);
> >>       selector.addInputStream(lexer,cmd_ln_sng);
> >>       selector.select(cmd_ln_sng);
> >>     }else {
> >>       in=new ifstream(filename.c_str());          
> >>       lexer= new ncoLexer( *in, prs_arg);
> >>       selector.addInputStream(lexer,filename);
> >>       selector.select(filename);
> >> 
> >>     }    
> >>    
> >>    
> >>     lexer->setFilename(filename);
> >>    
> >>     parser= new ncoParser(selector);
> >>     parser->setFilename(filename);
> >>     parser->inc_vtr.push_back(filename);
> >>    
> >> 
> >>     parser->initializeASTFactory(ast_factory);
> >>     parser->setASTFactory(&ast_factory);
> >>    
> >>    
> >>     // Parse the input expressions
> >>     parser->program();
> >>     a = parser->getAST();
> >>  
> >>   tr=a;
> >> 
> >>   // Do an OpenMP Sort
> >>   (void)openmp_sort(tr,&inn_vtr);  
> >>  
> >>   // initialize walkers  
> >>     ncoTree* wlk_obj;    
> >>     for(idx=0 ; idx< (int)prs_vtr.size(); idx++){
> >>       wlk_obj=new ncoTree(&prs_vtr[idx]);  
> >>       wlk_obj->initializeASTFactory(ast_factory);
> >>       wlk_obj->setASTFactory(&ast_factory);
> >>       wlk_vtr.push_back(wlk_obj); 
> >>     }      
> >>    
> >>    
> >> 
> >> 
> >>     // walk the tree in parallel processing statements
> >>  
> >> #ifdef _OPENMP
> >> #pragma omp parallel for default(none) private(kdx,wlk_vtr,tr) 
> >> #endif
> >>    for(kdx=0 ;kdx< nbr_sz; kdx++) {      
> >> 
> >>      tr=inn_vtr[kdx];
> >>      wlk_vtr[omp_get_thread_num]->statements(tr);
> >> 
> >> 
> >>    } //end OPENMP parallel loop
> >> 
> >> 
> >> 
> >> 
> >> 
> >> 
> >>  
> >>   return 1;
> >> }
> >> 
> >> 
> >> /********************** Code 
> >> *************************************************/
> >> 
> >> 
> >> 
> >> 
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe: 
> >> http://www.antlr.org/mailman/options/antlr-interest/your-email-
> >address



      

From andy.grove at codefutures.com  Mon Feb  2 19:49:23 2009
From: andy.grove at codefutures.com (Andy Grove)
Date: Mon, 2 Feb 2009 20:49:23 -0700
Subject: [antlr-interest] Error in generated C code (struct referenced
	without being initialized)
Message-ID: <2b951e7d0902021949m31327d3ag343d641726b57c74@mail.gmail.com>

Hi,

In my generated parse, a variable "a1" is declared thus:

    DbsMySQL_CPPParser_alias1_return a1;

Under certain conditions the variable gets initialized by calling a method:

a1=alias(ctx);

However, when parsing my input, the variable is not getting initialized but
it *is* getting referenced in the following expression, causing a seg fault:

(a1.start != NULL ? STRSTREAM->toStringTT(STRSTREAM, a1.start, a1.stop) :
NULL )

Because a1 is never initialized, a1.start refers to non null value. If I add
a1.start = NULL after a1 is declared then the seg fault is fixed.

Is this a known issue? Do I need to specify special options when generating
the code to make sure structs get initialized?

Thanks,

Andy.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090202/3762b46f/attachment.html 

From g.r.vansickle at att.net  Mon Feb  2 20:09:32 2009
From: g.r.vansickle at att.net (Gary R. Van Sickle)
Date: Mon, 2 Feb 2009 22:09:32 -0600
Subject: [antlr-interest] Theading Tree Walkers
In-Reply-To: <4987540B.1080100@temporal-wave.com>
References: <20090202200904.92FEE118049@smtp.hushmail.com>
	<4987540B.1080100@temporal-wave.com>
Message-ID: <5FFFE7AD4A0C466ABE1EA3477F3ADC2C@DFW5RB41>

> From: Jim Idle
> 
> code_dude at nym.hush.com wrote:
> > Hi Jim,
> > Will the v3 antlr C++ module be free threading when its finally 
> > released ?
> >   
> 
> Yes, but you can use the C runtime with C++ right now.
> 
> Jim
> 

FWIW, I can confirm this works well.  Be careful with using objects as
params, return values, or in scopes though - for reasons I haven't
completely determined, it seems like you don't get your constructors called,
so you have to use a pointer-to-class and an explicit new() somewhere.  My
SWAG is that the structs used for these purposes are malloc()'ed, hence no
object construction.

Hmmm....

"#ifdef __cplusplus
// We're being compiled as C++
NEW_SCOPE	new ScopeStruct()
#else
// We're in C
NEW_SCOPE	malloc(sizeof(ScopeStruct))
#endif

ScopeStruct the_scope = NEW_SCOPE;"

...?

-- 
Gary R. Van Sickle


From antlr at mirality.co.nz  Mon Feb  2 23:22:33 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 03 Feb 2009 20:22:33 +1300
Subject: [antlr-interest] C runtime issue
In-Reply-To: <2b951e7d0902021337y662606f8pc20b1f3be883f0f1@mail.gmail.co
 m>
References: <2b951e7d0902021337y662606f8pc20b1f3be883f0f1@mail.gmail.com>
Message-ID: <20090203072256.94FDF341814F@www.antlr.org>

At 10:37 3/02/2009, Andy Grove wrote:
>When I invoke my generated C parser, I see memory usage climb 
>from 770MB to 4GB in a few seconds and the parser never returns. 
>My init code is as follows:
[...]
>I added some printf() statements to the generated code and 
>tracked the issue down to the "LA(1)" macro which expands to 
>"ctx->pParser->tstream->istream->_LA(ctx->pParser->tstream->istream, 
>1)". It seems that this call never completes. Here is the code in 
>question:

If this is happening the first time this is called (which it 
sounds like is the case), then the problem is with your lexer 
grammar/rules.

Most likely, you have created an infinite loop in the lexer.  The 
most likely reason for this in turn is that you have created a 
top-level lexer rule that can successfully match zero 
characters.  And the most likely cause of that in turn is that 
you've used * when you really mean +.


From jimi at temporal-wave.com  Tue Feb  3 08:35:45 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 03 Feb 2009 08:35:45 -0800
Subject: [antlr-interest] C runtime issue
In-Reply-To: <2b951e7d0902021337y662606f8pc20b1f3be883f0f1@mail.gmail.com>
References: <2b951e7d0902021337y662606f8pc20b1f3be883f0f1@mail.gmail.com>
Message-ID: <49887261.6060803@temporal-wave.com>

Andy Grove wrote:
> Hi,
>
> When I invoke my generated C parser, I see memory usage climb from 
> 770MB to 4GB in a few seconds and the parser never returns. My init 
> code is as follows:
>
Hi Andy,

I have recently made a lot of changes to try an auto-track and release 
memory and rewrite streams in the C runtime this will help everyone 
(more details ot his later this week once I have tested it more).

However this does not look like your issue here. Usually, this problem 
is created by an incorrect lexer rule that is matching nothing, hence 
the parser asks the lexer for the first token and the empty rule matches 
and nothing is consumed from the input stream. Hence your lexer will 
carry on returning empty tokens until it runs out of memory.

Look for the following errors:

TOKEN : ('a'..'z')* ;  // Note that this should be + and not *

TOK : ;      // Forgot to define this or meant it to be fragment

I am pretty sure that this is what you will find somewhere. If you 
single step into the LA routine, then you can trace through to the 
fillBuffer() method, which is trying to create the token stream before 
it gives the first token back to the parser. Keep stepping and you will 
find yourself in the code for a lexer rule. It is likely that first 
lexer rule that you enter that is in error.

Jim


From jimi at temporal-wave.com  Tue Feb  3 08:50:12 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 03 Feb 2009 08:50:12 -0800
Subject: [antlr-interest] Error in generated C code (struct referenced
 without being initialized)
In-Reply-To: <2b951e7d0902021949m31327d3ag343d641726b57c74@mail.gmail.com>
References: <2b951e7d0902021949m31327d3ag343d641726b57c74@mail.gmail.com>
Message-ID: <498875C4.5060104@temporal-wave.com>

Andy Grove wrote:
> Hi,
>
> In my generated parse, a variable "a1" is declared thus:
>
>     DbsMySQL_CPPParser_alias1_return a1;
>
> Under certain conditions the variable gets initialized by calling a 
> method:
>
> a1=alias(ctx);
>
> However, when parsing my input, the variable is not getting 
> initialized but it *is* getting referenced in the following 
> expression, causing a seg fault:
>
> (a1.start != NULL ? STRSTREAM->toStringTT(STRSTREAM, a1.start, 
> a1.stop) : NULL )
>
> Because a1 is never initialized, a1.start refers to non null value. If 
> I add a1.start = NULL after a1 is declared then the seg fault is fixed.
>
> Is this a known issue? Do I need to specify special options when 
> generating the code to make sure structs get initialized?
I have never known the initialization code not to be initialized - can 
you provide a grammar sample that shows this? It is usually grammar 
samples rather than the generated code that i need to reproduce things :-)

Jim

From andy.grove at codefutures.com  Tue Feb  3 09:01:04 2009
From: andy.grove at codefutures.com (Andy Grove)
Date: Tue, 3 Feb 2009 10:01:04 -0700
Subject: [antlr-interest] Error in generated C code (struct referenced
	without being initialized)
In-Reply-To: <498875C4.5060104@temporal-wave.com>
References: <2b951e7d0902021949m31327d3ag343d641726b57c74@mail.gmail.com>
	<498875C4.5060104@temporal-wave.com>
Message-ID: <2b951e7d0902030901p58586de2mb4975080c0f888be@mail.gmail.com>

Hi Jim,

I have further info on this now. Here's the relevant portion of grammar. The
"a1" is optional but is always referenced in the action. This works fine
when generating Java code from the grammar (the action gets passed a NULL
parameter for "a1"). The generated C code has a NULL check for a1.start just
like the generated Java code does, but because a1.start is never initialized
in C it blows up.

| e = expression
            ( a1 = alias1  )?
        { sse.addSelectItem($e.text, $a1.text); }

Would it be possible to modify the generator to initialize these variables
to sensible defaults e.g. NULL for compatibility with the Java generator?

Alternatively, how could I modify the grammar to check if a1 is NULL or not?

Thanks,

Andy.


On Tue, Feb 3, 2009 at 9:50 AM, Jim Idle <jimi at temporal-wave.com> wrote:

> I have never known the initialization code not to be initialized - can
> you provide a grammar sample that shows this? It is usually grammar
> samples rather than the generated code that i need to reproduce things :-)
>
> Jim
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090203/ad3eaaaa/attachment.html 

From jimi at temporal-wave.com  Tue Feb  3 09:07:01 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 03 Feb 2009 09:07:01 -0800
Subject: [antlr-interest] Theading Tree Walkers
In-Reply-To: <5FFFE7AD4A0C466ABE1EA3477F3ADC2C@DFW5RB41>
References: <20090202200904.92FEE118049@smtp.hushmail.com>	<4987540B.1080100@temporal-wave.com>
	<5FFFE7AD4A0C466ABE1EA3477F3ADC2C@DFW5RB41>
Message-ID: <498879B5.4030201@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090203/2c421889/attachment.html 

From jimi at temporal-wave.com  Tue Feb  3 09:18:30 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 03 Feb 2009 09:18:30 -0800
Subject: [antlr-interest] Error in generated C code (struct referenced
 without being initialized)
In-Reply-To: <2b951e7d0902030901p58586de2mb4975080c0f888be@mail.gmail.com>
References: <2b951e7d0902021949m31327d3ag343d641726b57c74@mail.gmail.com>	
	<498875C4.5060104@temporal-wave.com>
	<2b951e7d0902030901p58586de2mb4975080c0f888be@mail.gmail.com>
Message-ID: <49887C66.2040805@temporal-wave.com>

Andy Grove wrote:
> Hi Jim,
>
> I have further info on this now. Here's the relevant portion of 
> grammar. The "a1" is optional but is always referenced in the action. 
> This works fine when generating Java code from the grammar (the action 
> gets passed a NULL parameter for "a1"). The generated C code has a 
> NULL check for a1.start just like the generated Java code does, but 
> because a1.start is never initialized in C it blows up.
>
> | e = expression
>             ( a1 = alias1  )?
>         { sse.addSelectItem($e.text, $a1.text); }
>
> Would it be possible to modify the generator to initialize these 
> variables to sensible defaults e.g. NULL for compatibility with the 
> Java generator?
>
> Alternatively, how could I modify the grammar to check if a1 is NULL 
> or not?

Yes, well we could argue that this isn't quite Kosher use, but I was 
pretty sure that the value should be initialized. The thing is that this 
is a structure return, so the structure is allocated but I don't really 
know about the elements within the structure, that is just part of the 
codegen. However this should work better:

| e = expression
            ( a1 = alias1
                   { sse.addSelectItem($e.text, $a1.text); }
             |     { sse.addSelectItem($e.text, NULL); }
            )
...


Jim


From andy.grove at codefutures.com  Tue Feb  3 09:49:47 2009
From: andy.grove at codefutures.com (Andy Grove)
Date: Tue, 3 Feb 2009 10:49:47 -0700
Subject: [antlr-interest] Error in generated C code (struct referenced
	without being initialized)
In-Reply-To: <49887C66.2040805@temporal-wave.com>
References: <2b951e7d0902021949m31327d3ag343d641726b57c74@mail.gmail.com>
	<498875C4.5060104@temporal-wave.com>
	<2b951e7d0902030901p58586de2mb4975080c0f888be@mail.gmail.com>
	<49887C66.2040805@temporal-wave.com>
Message-ID: <2b951e7d0902030949k17a9069bp8f375d0f00bbfe6a@mail.gmail.com>

Jim,

Thanks. I'll modify the grammar and that will work fine with Java or C. It
would be nice if the C generator could init the member variables of the
struct so that the generated NULL check doesn't cause a seg fault. Just a
nice to have though.

Thanks again.

Andy.

On Tue, Feb 3, 2009 at 10:18 AM, Jim Idle <jimi at temporal-wave.com> wrote:

> Andy Grove wrote:
> > Hi Jim,
> >
> > I have further info on this now. Here's the relevant portion of
> > grammar. The "a1" is optional but is always referenced in the action.
> > This works fine when generating Java code from the grammar (the action
> > gets passed a NULL parameter for "a1"). The generated C code has a
> > NULL check for a1.start just like the generated Java code does, but
> > because a1.start is never initialized in C it blows up.
> >
> > | e = expression
> >             ( a1 = alias1  )?
> >         { sse.addSelectItem($e.text, $a1.text); }
> >
> > Would it be possible to modify the generator to initialize these
> > variables to sensible defaults e.g. NULL for compatibility with the
> > Java generator?
> >
> > Alternatively, how could I modify the grammar to check if a1 is NULL
> > or not?
>
> Yes, well we could argue that this isn't quite Kosher use, but I was
> pretty sure that the value should be initialized. The thing is that this
> is a structure return, so the structure is allocated but I don't really
> know about the elements within the structure, that is just part of the
> codegen. However this should work better:
>
> | e = expression
>            ( a1 = alias1
>                   { sse.addSelectItem($e.text, $a1.text); }
>              |     { sse.addSelectItem($e.text, NULL); }
>            )
> ...
>
>
> Jim
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090203/55dd9d9b/attachment.html 

From jimi at temporal-wave.com  Tue Feb  3 10:46:13 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 03 Feb 2009 10:46:13 -0800
Subject: [antlr-interest] Error in generated C code (struct referenced
 without being initialized)
In-Reply-To: <2b951e7d0902030949k17a9069bp8f375d0f00bbfe6a@mail.gmail.com>
References: <2b951e7d0902021949m31327d3ag343d641726b57c74@mail.gmail.com>	
	<498875C4.5060104@temporal-wave.com>	
	<2b951e7d0902030901p58586de2mb4975080c0f888be@mail.gmail.com>	
	<49887C66.2040805@temporal-wave.com>
	<2b951e7d0902030949k17a9069bp8f375d0f00bbfe6a@mail.gmail.com>
Message-ID: <498890F5.2040504@temporal-wave.com>

Andy Grove wrote:
> Jim,
>
> Thanks. I'll modify the grammar and that will work fine with Java or 
> C. It would be nice if the C generator could init the member variables 
> of the struct so that the generated NULL check doesn't cause a seg 
> fault. Just a nice to have though.
I can no longer remember why it does not do this. I will look in to it, 
but I think that the issue is you can return anything you like in the 
structure and so if it is not something that can be initialized to NULL, 
it breaks the code generation.

Jim


From antlr at mirality.co.nz  Tue Feb  3 11:52:05 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 04 Feb 2009 08:52:05 +1300
Subject: [antlr-interest] Error in generated C code (struct referenced
 without being initialized)
In-Reply-To: <498890F5.2040504@temporal-wave.com>
References: <2b951e7d0902021949m31327d3ag343d641726b57c74@mail.gmail.com>
	<498875C4.5060104@temporal-wave.com>
	<2b951e7d0902030901p58586de2mb4975080c0f888be@mail.gmail.com>
	<49887C66.2040805@temporal-wave.com>
	<2b951e7d0902030949k17a9069bp8f375d0f00bbfe6a@mail.gmail.com>
	<498890F5.2040504@temporal-wave.com>
Message-ID: <20090203195217.1BBF3341845F@www.antlr.org>

At 07:46 4/02/2009, Jim Idle wrote:
 >I can no longer remember why it does not do this. I will look
 >in to it, but I think that the issue is you can return anything
 >you like in the structure and so if it is not something that
 >can be initialized to NULL, it breaks the code generation.

You could memset(foo, 0, sizeof(*foo)) it... :)  (Arguably this 
should be done for scopes as well, especially if you're reusing 
previously populated structures.)


From jackgzhang2 at yahoo.com  Tue Feb  3 12:11:58 2009
From: jackgzhang2 at yahoo.com (jack zhang)
Date: Tue, 3 Feb 2009 12:11:58 -0800 (PST)
Subject: [antlr-interest] Evaluate the AST tree Twice
Message-ID: <714548.8639.qm@web65513.mail.ac4.yahoo.com>

Hi,
? I need to walk the resulting ast tree twice with different tree parser. Is it possible ? I tried following code but it give me "NullPointerException".
?
// Build the tree...
QueryParser.start_return r = parser.parse();

// Walk the tree once...
CommonTreeNodeStream nodes = new CommonTreeNodeStream((Tree) r.getTree());
QueryTree walker = new QueryTree(nodes);
result = walker.start();

// Walk the tree with another treeparser. I got "Null Pointer Exception" here.
CommonTreeNodeStream nodes2= new CommonTreeNodeStream((Tree) r.getTree());
QueryTree walker = new QueryTree(nodes);
result = walker.start();


Is there some reseting or rewiding of tree pointer I need to do after the first iteration?

Thx !
-Jack


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090203/154617e5/attachment.html 

From jimi at temporal-wave.com  Tue Feb  3 12:19:39 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 03 Feb 2009 12:19:39 -0800
Subject: [antlr-interest] Error in generated C code (struct referenced
 without being initialized)
In-Reply-To: <20090203194506.7C62F120E842@msf1.dnsmadeeasy.com>
References: <2b951e7d0902021949m31327d3ag343d641726b57c74@mail.gmail.com>
	<498875C4.5060104@temporal-wave.com>
	<2b951e7d0902030901p58586de2mb4975080c0f888be@mail.gmail.com>
	<49887C66.2040805@temporal-wave.com>
	<2b951e7d0902030949k17a9069bp8f375d0f00bbfe6a@mail.gmail.com>
	<498890F5.2040504@temporal-wave.com>
	<20090203194506.7C62F120E842@msf1.dnsmadeeasy.com>
Message-ID: <4988A6DB.4010605@temporal-wave.com>

Gavin Lambert wrote:
> At 07:46 4/02/2009, Jim Idle wrote:
> >I can no longer remember why it does not do this. I will look
> >in to it, but I think that the issue is you can return anything
> >you like in the structure and so if it is not something that
> >can be initialized to NULL, it breaks the code generation.
>
> You could memset(foo, 0, sizeof(*foo)) it... :)  (Arguably this should 
> be done for scopes as well, especially if you're reusing previously 
> populated structures.)
>
The overhead of memset is too much. That is why I changed from callocing 
it to having the user initialize the data. Valgrind makes it painfully 
obvious that these sorts of things really drag down the performance and 
it is better to explicitly initialize and free just those things that 
need to be. I also think that for maintainability it is better to 
program with explicit intent.

Jim


From brian at neuesoftware.com  Tue Feb  3 12:21:05 2009
From: brian at neuesoftware.com (Brian Nelson)
Date: Tue, 3 Feb 2009 12:21:05 -0800
Subject: [antlr-interest] ActionScript target - new to parsers
Message-ID: <B816EF30-6F6B-4E3B-88E6-F3954CBDD9A6@neuesoftware.com>

Let me start off by saying that my background is not in parsers or  
compilers.

I am trying to parse CSS files. I have found a working grammar and the  
source works when I pass a string of random CSS I have generated. I  
now have no clue as to how to hook into those points and get the  
results of the lexing or parsing. I need to assemble objects for  
rules, properties, etc.

I am not looking for an answer so much as I am looking for available  
resources on-line, examples, or sample projects that I can learn to do  
what I need to do.

Or maybe I am looking for someone to tell me I am going the wrong  
route about the problem, and I should continue to do my own parsing as  
it's not necessary to use ANTLR for a simple description language. :)

--
Brian Nelson
Software Engineer, Neue Software
e. brian at neuesoftware.com



From jimi at temporal-wave.com  Tue Feb  3 12:30:57 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 03 Feb 2009 12:30:57 -0800
Subject: [antlr-interest] ActionScript target - new to parsers
In-Reply-To: <B816EF30-6F6B-4E3B-88E6-F3954CBDD9A6@neuesoftware.com>
References: <B816EF30-6F6B-4E3B-88E6-F3954CBDD9A6@neuesoftware.com>
Message-ID: <4988A981.1000403@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090203/ae31f0b6/attachment.html 

From gunjgupta at gmail.com  Tue Feb  3 19:56:17 2009
From: gunjgupta at gmail.com (Chal Chale apne Ghar)
Date: Wed, 4 Feb 2009 09:26:17 +0530
Subject: [antlr-interest] Error: TokenStreamException while reading
	Grammer
In-Reply-To: <f205f60902022037w30cc2a37h94cf91f3f7e59b7@mail.gmail.com>
References: <f205f60902020045v2bec9cd2n5c7e9ff86fff3be5@mail.gmail.com>
	<49874f5f.010bca0a.6096.3a35SMTPIN_ADDED@mx.google.com>
	<f205f60902022037w30cc2a37h94cf91f3f7e59b7@mail.gmail.com>
Message-ID: <f205f60902031956g570c61c6q2b316878ad779718@mail.gmail.com>

 Hi Gavin,
Thanks for quick Response.
It was really helpful to me.
After trying with the antlr v3 , I am getting different error in console.

D:\Actuate\Samplelexer-parser\ConversionTool>java org.antlr.Tool
D:\Actuate\VB\v
b_org.g
ANTLR Parser Generator  Version 3.1.1
error(100): D:\Actuate\VB\vb_org.g:1:1: syntax error: antlr:
D:\Actuate\VB\vb_or
g.g:1:1: unexpected token: class
warning(149): D:\Actuate\VB\vb_org.g:0:0: rewrite syntax or operator with no
out
put option; setting output=AST
error(150):  grammar file D:\Actuate\VB\vb_org.g has no rules
error(100): D:\Actuate\VB\vb_org.g:0:0: syntax error: assign.types:
<AST>:0:0: u
nexpected end of subtree
error(100): D:\Actuate\VB\vb_org.g:0:0: syntax error: define: <AST>:0:0:
unexpec
ted end of subtree
i am attching my .g file fro reference.
Any help would be appriciated.
regards,
Gunjan
  On Tue, Feb 3, 2009 at 1:23 AM, Gavin Lambert <antlr at mirality.co.nz>wrote:

> At 21:45 2/02/2009, Chal Chale apne Ghar wrote:
>
>> D:\Actuate\Samplelexer-parser\ConversionTool>java antlr.Tool vb_org.txt
>> ANTLR Parser Generator   Version 2.7.5 (20050128)   1989-2005 jGuru.com
>> error: Token stream error reading grammar(s):
>> vb_org.txt:45:7: expecting ''', found 'p'
>> TokenStreamException: expecting ''', found 'p'
>>
>> as seen, i am getting TokenStream Exception. But when i am using
>> AntlrWorks to check the Grammer syntax, it is showing correct to me.
>>
>
> You're running ANTLR v2 on the command line, but ANTLRWorks is for ANTLR
> v3.  To run ANTLR v3, you need to use "org.antlr.Tool", not "antlr.Tool".
>
> Also, by convention grammar files have a .g extension.  This doesn't really
> matter (ANTLR will still happily compile the file regardless of extension),
> but it's a good idea to follow the convention, since that's what tools are
> expecting.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090204/f562182f/attachment.html 
-------------- next part --------------
class VisualBasicParser extends Parser;

options {
  buildAST=true;
  k=2;
  exportVocab=VisualBasic;
  defaultErrorHandler=false;
}

tokens {
PROGRAM;
CLASS;
CLASSNAME;
SUPERCLASSNAME;
DECLARE;
METHOD;
STATEMENT;
FUNCTIONAME;
ASSIGNMENT_STATEMENT;
TYPE_NAME;
IF_STATEMENT;
LOOP_STATEMENT;
SET_STATEMENT;
FOR_STATEMENT;
STATIC_STATEMENT;
EXIT_STATEMENT;
VAR_DECLARATION;
VARIABLE_NAME;
VARIABLE_NODE;
ARGUMENT_LIST;
VAR_ARGUMENT_LIST;
ARGUMENT;
VAR_ARGUMENT;
SELECT_STATEMENT;
VARIABLE;
EXPRESSION;
UNARY_MINUS;
OBJECT_NAME;
NEW_OBJECT_DECLN;


}

option_statement!
  : 'option' ( 'base' (NUMBER)?
                   | 'compare' ('text'|'binary'|'database')?
                   | 'explicit'
                   | 'private' 'module'
                   | 'internal' );

goto_statement!
  : 'goto' goto_label;

exit_statement
  : 'exit' ('do' | 'while' | 'try' | 'for' | 'function' | 'property' | 'select' | 'sub' )
  { #exit_statement = #([EXIT_STATEMENT, "exit"], #exit_statement); };

nl!   : ( options { greedy=true; } : NEWLINE)+;

beep_statement!
  : 'beep';

error_statement!
  : 'error' expression (COMMA expression )?;

error_number
  : NUMBER;

goto_label
  : IDENTIFIER | NUMBER;

on_error_statement!
  : 'on' 'error' ( 'goto' goto_label | 'resume' 'next' );

resume_statement!
  : 'resume' ( goto_label | 'next' );

load_statement!
  : 'load' object_name;

message_statement!
  : 'msgbox' expression;

unload_statement!
  : 'unload' object_name;

object_name
  : ( IDENTIFIER | 'me' | 'myclass' | 'mybase' | 'nothing' )
{ #object_name = #([OBJECT_NAME, "object_name"], #object_name); };
expression
  : complete_expression
 { #expression = #([EXPRESSION, "expression"], #expression); };

complete_expression
  : and_expression ( ( 'or'^ | 'orelse'^ | 'xor'^ ) and_expression )*;

and_expression
  : not_expression ( ( 'and'^ | 'andalso'^ ) not_expression )*;

not_expression
  : ('not'^ )? compare_expression;
  

compare_op
  : LT | LE | GT | GE | EQ | NE;

compare_expression
  : shift_expression ( (LT^ | LE^ | GT^ | GE^ | EQ^ | NE^) shift_expression
                           | 'is'^ object_name
                           | 'like' value)?
  | 'typeof' add_expression 'is' object_name;

shift_expression
  : concat_expression ( ( LSHIFT^ | RSHIFT^ ) concat_expression )*;

concat_expression
  : add_expression ( CONCAT^ add_expression )*;

add_expression
  : modulus_expression ( (PLUS^|MINUS^) modulus_expression )*;

modulus_expression
  : intdiv_expression ( 'mod'^ intdiv_expression )?;

intdiv_expression
  : mult_expression  ( INTDIVIDE^ mult_expression )*;

mult_expression
  : negate_expression ( (MULTIPLY^|DIVIDE^) negate_expression )*;

negate_expression
  : (options { greedy=true;} : MINUS^ {#MINUS.setType(UNARY_MINUS);} )? power_expression;

power_expression
  : value ( POWER^ value )?;

value   :
  | ( LPAREN complete_expression RPAREN ) => LPAREN^ complete_expression RPAREN!
  | ( 'new' ) => new_object_decln
  | ( variable ) => variable
  | ( function_call ) => function_call
  | literal;

idents : IDENTIFIER | 'text' | 'compare' | 'me' | 'new' | 'property';

identifier
  : ( ( idents )? SCOPE )* idents ( DOT idents )*;

new_object_decln
  : 'new' ('persistent')? variable
  { #new_object_decln = #([NEW_OBJECT_DECLN, "new_object_decln"], #new_object_decln); };

literal : 'true' | 'false' | 'me' | 'myclass' | 'mybase' | 'nothing' | NUMBER | STRING;

type_name
  : identifier
 { #type_name = #([TYPE_NAME, "type"], #type_name); };

dim_statement!
  : 'dim'! var_declaration ( COMMA! var_declaration )*;

var_declaration
  : ('withevents'!)? variable_name ( bound_argument_list )? ('as'! ('transient'|'new'|'volatile')? type_name (bound_argument_list)? )? (EQ! expression)?
 { #var_declaration = #([VAR_DECLARATION, "var_decl"], #var_declaration); };

variable_name : ( identifier | 'property' )
 { #variable_name = #([VARIABLE_NAME, "var_name"], #variable_name); };
 
bound_argument_list
  : LPAREN! ( options { greedy=true; } : argument_list )? RPAREN!
 { #bound_argument_list = #([ARGUMENT_LIST, "var_name"], #bound_argument_list); };

argument_list
  : argument ( COMMA! argument )*;

argument
  : ( ( identifier ASSIGN ) => identifier ASSIGN expression
    | expression ( 'to' complete_expression )? )
 { #argument = #([ARGUMENT, "argument"], #argument); };

var_bound_argument_list
  : LPAREN! ( options { greedy=true; } : var_argument_list )? RPAREN!
  { #var_bound_argument_list = #([VAR_ARGUMENT_LIST, "var_name"], #var_bound_argument_list); };

var_argument_list
  : var_argument ( COMMA! var_argument )*;

var_argument
  : ( identifier ASSIGN ) => identifier ASSIGN expression
  | expression ( 'to' expression )?
  { #var_argument = #([VAR_ARGUMENT, "var_argument"], #var_argument); };

const_statement!
  : 'const' var_declaration ( COMMA var_declaration )*;

global_statement!
  : 'global' var_declaration ( COMMA var_declaration )*;

static_statement
  : 'static'! var_declaration ( COMMA var_declaration )*
  { #static_statement = #([STATIC_STATEMENT, "static"], #static_statement); };

reset_statement!
  : 'reset';

declaration_statement
  : dim_statement
  | static_statement
  | const_statement
  | global_statement
  | redim_statement;

io_statement
  : reset_statement
  | close_statement
  | kill_statement;

kill_statement!
  : 'kill' expression;

close_statement!
  : 'close' expression;

label_statement!
  : IDENTIFIER COLON;

erase_statement!
  : 'erase' expression;

statement
  : ( ( 'if' )                     => if_statement
  | ( 'select' )                   => select_statement
  | ( 'do' | 'while' )             => loop_statement
  | ( 'for' )                      => for_statement
  | ( 'dim' | 'const' | 'static' ) => declaration_statement
  | ( 'option' )                   => option_statement
  | ( 'load' )                     => load_statement
  | ( 'unload' )                   => unload_statement
  | ( 'error')                     => error_statement
  | ( 'exit' )                     => exit_statement
  | ( 'goto' )                     => goto_statement
  | ( 'on' 'error' )               => on_error_statement
  | ( 'resume' )                   => resume_statement
  | ( 'reset' | 'kill' | 'close' ) => io_statement
  | ( 'set' )                      => set_statement
  | ( 'msgbox' )                   => message_statement
  | ( 'erase' )                    => erase_statement  
  | ( label_statement )            => label_statement
  | assignment_statement );

if_statement
  : 'if'! expression
     ( ( ('then')? nl ) => ('then'!)? nl ( statement nl )* ( 'elseif' expression ('then')? nl ( statement nl )* )* ('else'nl (statement nl)* )? 'end' 'if'!
     | 'then' statement ( options { greedy=true; } : ('else') => 'else' statement )?
     )
 { #if_statement = #([IF_STATEMENT, "if"], #if_statement); };

loop_statement
  : ( 'do' ('while' | 'until') expression nl (statement nl)* 'loop'!
  | 'do' nl (statement nl)* 'loop' ( ('while'|'until') expression )?
  | 'while' expression nl (statement nl)* 'end' 'while'! )
 { #loop_statement = #([LOOP_STATEMENT, "loop"], #loop_statement); };

for_statement
  : ( 'for'! identifier EQ expression 'to' expression ( 'step' expression )? nl (statement nl)* 'next' ( identifier )?
  | 'for' 'each' identifier 'in' identifier nl (statement nl)* 'next' ( identifier )? )
 { #for_statement = #([FOR_STATEMENT, "for"], #for_statement); };

select_statement
  : 'select'! ('case'!)? expression nl
          ( options { greedy=true;} : 'case' case_clause_list nl (statement nl)* )*
          ('case' 'else' nl (statement nl)* )? 'end' 'select'
 { #select_statement = #([SELECT_STATEMENT, "select"], #select_statement); };

case_clause_list
  : case_clause (COMMA case_clause )*;


case_clause
  : ( ( ('is')? compare_op ) => ('is')? compare_op expression 
    | expression ( 'to' expression )? 
    );
    

redim_statement!
  : 'redim' ('preserve')? var_declaration ( COMMA var_declaration )*;

function_call
  : identifier bound_argument_list;

assign_op
  : EQ | POWER_EQ | LSHIFT_EQ | RSHIFT_EQ | MULTIPLY_EQ | DIVIDE_EQ | ADD_EQ | MINUS_EQ | INTDIVIDE_EQ | CONCAT_EQ;

assign_variable
  : ( assign_variable_node ( (SCOPE!|DOT!) assign_variable_node )* )
 { #assign_variable = #([VARIABLE, "variable"], #assign_variable); };

assign_variable_node
  : ( idents ( options { greedy=true; } : var_bound_argument_list)? )
  {#assign_variable_node = #([VARIABLE_NODE, "assign_variable_node"], #assign_variable_node);};

variable
  : ( variable_node ( (SCOPE!|DOT!) variable_node )* )
  {#variable = #([VARIABLE, "variable"], #variable);};

variable_node
  : idents ( options { greedy=true; } : bound_argument_list)?
  {#variable_node = #([VARIABLE_NODE, "variable_node"], #variable_node);};

set_statement
  : 'set'! assign_variable assign_op expression
 { #set_statement = #([SET_STATEMENT, "set"], #set_statement); };

assignment_statement
  : assign_variable ( assign_op expression )?
 { #assignment_statement = #([ASSIGNMENT_STATEMENT, "assignment"], #assignment_statement); };

function_name
  : ( identifier | 'new' )
 { #function_name = #([FUNCTIONAME, "name"], #function_name); };

return_type
  : identifier;

bound_var_decln_list
  : LPAREN ( var_decln_list )? RPAREN;

var_decln_list
  : var_declaration ( COMMA var_declaration )*;

function_definition
  : ( (modifier!)*
    ( 'function'! function_name bound_var_decln_list! 'as'! return_type! nl (statement nl)* 'end'! 'function'!
    | 'sub'! function_name bound_var_decln_list! nl (statement nl)* 'end'! 'sub'!
    ) ) { #function_definition = #([METHOD, "method"], #function_definition); };

modifier
  : 'shadows' | 'shared' | 'mustinherit' | 'notinheritable'
  | 'overridable' | 'notoverridable' | 'mustoverride' | 'overrides'
  | 'overloads' | 'default' | 'readonly' | 'writeonly' | 'global'
  | access;

access  : 'public'
  | 'private'
  | 'friend'
  | 'protected';

class_name
  : identifier
 { #class_name = #([CLASSNAME, "name"], #class_name); };

subclass_name
  : identifier
 { #subclass_name = #([SUPERCLASSNAME, "super class"], #subclass_name); };

class_definition
  : (modifier!)*
    'class'! class_name ( 'subclass'! 'of'! subclass_name )? nl class_members 'end'! 'class'!
 { #class_definition = #([CLASS, "class"], #class_definition); };

class_members
  : ( class_member nl )*;

class_member
  : ( (modifier)* 'class' ) => class_definition
  | ( (modifier)* ( 'function' | 'sub') ) => function_definition
  | member_var_definition;

member_var_definition!
  : (modifier)* declaration_statement;

declare_definition!
  : (modifier)* 'declare' nl declare_members 'end' 'declare';
// { #declare_definition = #([DECLARE, "declare"], #declare_definition); };

declare_members
  : ( declare_member nl )*;

declare_member
  : declaration_statement
  | option_statement;

program : (nl)? ( program_member (nl)? )* EOF!
 { #program = #([PROGRAM, "program"], #program); };

program_member
  : ( (modifier)* 'class' ) => class_definition
  | ( (modifier)* ( 'function' | 'sub' ) ) => function_definition
  | declare_definition;

class VisualBasicLexer extends Lexer;

options {
  exportVocab=VisualBasic;
  caseSensitive=false;
  caseSensitiveLiterals=false;
  testLiterals=false;
  defaultErrorHandler=false;
  charVocabulary='\u0003'..'\uFFFE';
  k=4;
}

SINGLE_LINE_COMMENT
  : ('\''|'#') (~('\r'|'\n'))* { $setType(Token.SKIP); };

REMARK_COMMENT : 'r' 'e' 'm' (~('a' ..'z'|'0'..'9'|'_'|'$')) (~('\r'|'\n'))* { $setType(Token.SKIP); };

NEWLINE : ( ('\r' ('\n')? | '\n') ( '+' { $setType(Token.SKIP); } )? ) { newline(); };

WHITE_SPACE
  : ( (' ' | '\t')+ | '_' (' '|'\t')* NEWLINE ) { $setType(Token.SKIP); };

STRING  : '"' ( (~('"')) | '"' '"' )* '"';

protected INTEGER : ('0' .. '9')+;

NUMBER : ( INTEGER '.' ) => INTEGER '.' INTEGER ( 'e' (PLUS|MINUS)? INTEGER)?
       | ( '.' INTEGER ) => '.' INTEGER ( 'e' (PLUS|MINUS)? INTEGER)?
       | ( INTEGER ) => INTEGER ( 'e' (PLUS|MINUS)? INTEGER)?
       | '.' { $setType(DOT); };

IDENTIFIER options { testLiterals=true; } : ('a'..'z') ('a'..'z'|'0'..'9'|'_')* ('$')?;

EQ  : '=';

LT  : '<';

LE  : '<=';

GT  : '>';

GE  : '>=';

NE  : '<>';

LSHIFT  : '<<';

RSHIFT  : '>>';

CONCAT  : '&';

PLUS  : '+';

MINUS : '-';

MULTIPLY
  : '*';

DIVIDE  : '/';

INTDIVIDE
  : '\\';

POWER : '^';

LPAREN  : '(';

RPAREN  : ')';

COMMA   : ',';

ASSIGN  : ':=';

SCOPE : '::';

POWER_EQ
  : '^=';

MULTIPLY_EQ
  : '*=';

DIVIDE_EQ
  : '/=';

INTDIVIDE_EQ
  : '\\=';

ADD_EQ  : '+=';

MINUS_EQ
  : '-=';

CONCAT_EQ
  : '&=';

LSHIFT_EQ
  : '<<=';

RSHIFT_EQ
  : '>>=';

COLON : ':';

DOT	:
	;


From gunjgupta at gmail.com  Tue Feb  3 21:51:32 2009
From: gunjgupta at gmail.com (Chal Chale apne Ghar)
Date: Wed, 4 Feb 2009 11:21:32 +0530
Subject: [antlr-interest] Fwd: Error: TokenStreamException while reading
	Grammer
In-Reply-To: <f205f60902022037w30cc2a37h94cf91f3f7e59b7@mail.gmail.com>
References: <f205f60902020045v2bec9cd2n5c7e9ff86fff3be5@mail.gmail.com>
	<49874f5f.010bca0a.6096.3a35SMTPIN_ADDED@mx.google.com>
	<f205f60902022037w30cc2a37h94cf91f3f7e59b7@mail.gmail.com>
Message-ID: <f205f60902032151k198e9e67nf64752b9a25de72f@mail.gmail.com>

 Hi Gavin,
Thanks for quick Response.
It was really helpful to me.
After trying with the antlr v3 , I am getting different error in console.

D:\Actuate\Samplelexer-parser\ConversionTool>java org.antlr.Tool
D:\Actuate\VB\v
b_org.g
ANTLR Parser Generator  Version 3.1.1
error(100): D:\Actuate\VB\vb_org.g:1:1: syntax error: antlr:
D:\Actuate\VB\vb_or
g.g:1:1: unexpected token: class
warning(149): D:\Actuate\VB\vb_org.g:0:0: rewrite syntax or operator with no
out
put option; setting output=AST
error(150):  grammar file D:\Actuate\VB\vb_org.g has no rules
error(100): D:\Actuate\VB\vb_org.g:0:0: syntax error: assign.types:
<AST>:0:0: u
nexpected end of subtree
error(100): D:\Actuate\VB\vb_org.g:0:0: syntax error: define: <AST>:0:0:
unexpec
ted end of subtree
i am attching my .g file fro reference.
Any help would be appriciated.
regards,
Gunjan
  On Tue, Feb 3, 2009 at 1:23 AM, Gavin Lambert <antlr at mirality.co.nz>wrote:

> At 21:45 2/02/2009, Chal Chale apne Ghar wrote:
>
>> D:\Actuate\Samplelexer-parser\ConversionTool>java antlr.Tool vb_org.txt
>> ANTLR Parser Generator   Version 2.7.5 (20050128)   1989-2005 jGuru.com
>> error: Token stream error reading grammar(s):
>> vb_org.txt:45:7: expecting ''', found 'p'
>> TokenStreamException: expecting ''', found 'p'
>>
>> as seen, i am getting TokenStream Exception. But when i am using
>> AntlrWorks to check the Grammer syntax, it is showing correct to me.
>>
>
> You're running ANTLR v2 on the command line, but ANTLRWorks is for ANTLR
> v3.  To run ANTLR v3, you need to use "org.antlr.Tool", not "antlr.Tool".
>
> Also, by convention grammar files have a .g extension.  This doesn't really
> matter (ANTLR will still happily compile the file regardless of extension),
> but it's a good idea to follow the convention, since that's what tools are
> expecting.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090204/88468635/attachment.html 
-------------- next part --------------
class VisualBasicParser extends Parser;

options {
  buildAST=true;
  k=2;
  exportVocab=VisualBasic;
  defaultErrorHandler=false;
}

tokens {
PROGRAM;
CLASS;
CLASSNAME;
SUPERCLASSNAME;
DECLARE;
METHOD;
STATEMENT;
FUNCTIONAME;
ASSIGNMENT_STATEMENT;
TYPE_NAME;
IF_STATEMENT;
LOOP_STATEMENT;
SET_STATEMENT;
FOR_STATEMENT;
STATIC_STATEMENT;
EXIT_STATEMENT;
VAR_DECLARATION;
VARIABLE_NAME;
VARIABLE_NODE;
ARGUMENT_LIST;
VAR_ARGUMENT_LIST;
ARGUMENT;
VAR_ARGUMENT;
SELECT_STATEMENT;
VARIABLE;
EXPRESSION;
UNARY_MINUS;
OBJECT_NAME;
NEW_OBJECT_DECLN;


}

option_statement!
  : 'option' ( 'base' (NUMBER)?
                   | 'compare' ('text'|'binary'|'database')?
                   | 'explicit'
                   | 'private' 'module'
                   | 'internal' );

goto_statement!
  : 'goto' goto_label;

exit_statement
  : 'exit' ('do' | 'while' | 'try' | 'for' | 'function' | 'property' | 'select' | 'sub' )
  { #exit_statement = #([EXIT_STATEMENT, "exit"], #exit_statement); };

nl!   : ( options { greedy=true; } : NEWLINE)+;

beep_statement!
  : 'beep';

error_statement!
  : 'error' expression (COMMA expression )?;

error_number
  : NUMBER;

goto_label
  : IDENTIFIER | NUMBER;

on_error_statement!
  : 'on' 'error' ( 'goto' goto_label | 'resume' 'next' );

resume_statement!
  : 'resume' ( goto_label | 'next' );

load_statement!
  : 'load' object_name;

message_statement!
  : 'msgbox' expression;

unload_statement!
  : 'unload' object_name;

object_name
  : ( IDENTIFIER | 'me' | 'myclass' | 'mybase' | 'nothing' )
{ #object_name = #([OBJECT_NAME, "object_name"], #object_name); };
expression
  : complete_expression
 { #expression = #([EXPRESSION, "expression"], #expression); };

complete_expression
  : and_expression ( ( 'or'^ | 'orelse'^ | 'xor'^ ) and_expression )*;

and_expression
  : not_expression ( ( 'and'^ | 'andalso'^ ) not_expression )*;

not_expression
  : ('not'^ )? compare_expression;
  

compare_op
  : LT | LE | GT | GE | EQ | NE;

compare_expression
  : shift_expression ( (LT^ | LE^ | GT^ | GE^ | EQ^ | NE^) shift_expression
                           | 'is'^ object_name
                           | 'like' value)?
  | 'typeof' add_expression 'is' object_name;

shift_expression
  : concat_expression ( ( LSHIFT^ | RSHIFT^ ) concat_expression )*;

concat_expression
  : add_expression ( CONCAT^ add_expression )*;

add_expression
  : modulus_expression ( (PLUS^|MINUS^) modulus_expression )*;

modulus_expression
  : intdiv_expression ( 'mod'^ intdiv_expression )?;

intdiv_expression
  : mult_expression  ( INTDIVIDE^ mult_expression )*;

mult_expression
  : negate_expression ( (MULTIPLY^|DIVIDE^) negate_expression )*;

negate_expression
  : (options { greedy=true;} : MINUS^ {#MINUS.setType(UNARY_MINUS);} )? power_expression;

power_expression
  : value ( POWER^ value )?;

value   :
  | ( LPAREN complete_expression RPAREN ) => LPAREN^ complete_expression RPAREN!
  | ( 'new' ) => new_object_decln
  | ( variable ) => variable
  | ( function_call ) => function_call
  | literal;

idents : IDENTIFIER | 'text' | 'compare' | 'me' | 'new' | 'property';

identifier
  : ( ( idents )? SCOPE )* idents ( DOT idents )*;

new_object_decln
  : 'new' ('persistent')? variable
  { #new_object_decln = #([NEW_OBJECT_DECLN, "new_object_decln"], #new_object_decln); };

literal : 'true' | 'false' | 'me' | 'myclass' | 'mybase' | 'nothing' | NUMBER | STRING;

type_name
  : identifier
 { #type_name = #([TYPE_NAME, "type"], #type_name); };

dim_statement!
  : 'dim'! var_declaration ( COMMA! var_declaration )*;

var_declaration
  : ('withevents'!)? variable_name ( bound_argument_list )? ('as'! ('transient'|'new'|'volatile')? type_name (bound_argument_list)? )? (EQ! expression)?
 { #var_declaration = #([VAR_DECLARATION, "var_decl"], #var_declaration); };

variable_name : ( identifier | 'property' )
 { #variable_name = #([VARIABLE_NAME, "var_name"], #variable_name); };
 
bound_argument_list
  : LPAREN! ( options { greedy=true; } : argument_list )? RPAREN!
 { #bound_argument_list = #([ARGUMENT_LIST, "var_name"], #bound_argument_list); };

argument_list
  : argument ( COMMA! argument )*;

argument
  : ( ( identifier ASSIGN ) => identifier ASSIGN expression
    | expression ( 'to' complete_expression )? )
 { #argument = #([ARGUMENT, "argument"], #argument); };

var_bound_argument_list
  : LPAREN! ( options { greedy=true; } : var_argument_list )? RPAREN!
  { #var_bound_argument_list = #([VAR_ARGUMENT_LIST, "var_name"], #var_bound_argument_list); };

var_argument_list
  : var_argument ( COMMA! var_argument )*;

var_argument
  : ( identifier ASSIGN ) => identifier ASSIGN expression
  | expression ( 'to' expression )?
  { #var_argument = #([VAR_ARGUMENT, "var_argument"], #var_argument); };

const_statement!
  : 'const' var_declaration ( COMMA var_declaration )*;

global_statement!
  : 'global' var_declaration ( COMMA var_declaration )*;

static_statement
  : 'static'! var_declaration ( COMMA var_declaration )*
  { #static_statement = #([STATIC_STATEMENT, "static"], #static_statement); };

reset_statement!
  : 'reset';

declaration_statement
  : dim_statement
  | static_statement
  | const_statement
  | global_statement
  | redim_statement;

io_statement
  : reset_statement
  | close_statement
  | kill_statement;

kill_statement!
  : 'kill' expression;

close_statement!
  : 'close' expression;

label_statement!
  : IDENTIFIER COLON;

erase_statement!
  : 'erase' expression;

statement
  : ( ( 'if' )                     => if_statement
  | ( 'select' )                   => select_statement
  | ( 'do' | 'while' )             => loop_statement
  | ( 'for' )                      => for_statement
  | ( 'dim' | 'const' | 'static' ) => declaration_statement
  | ( 'option' )                   => option_statement
  | ( 'load' )                     => load_statement
  | ( 'unload' )                   => unload_statement
  | ( 'error')                     => error_statement
  | ( 'exit' )                     => exit_statement
  | ( 'goto' )                     => goto_statement
  | ( 'on' 'error' )               => on_error_statement
  | ( 'resume' )                   => resume_statement
  | ( 'reset' | 'kill' | 'close' ) => io_statement
  | ( 'set' )                      => set_statement
  | ( 'msgbox' )                   => message_statement
  | ( 'erase' )                    => erase_statement  
  | ( label_statement )            => label_statement
  | assignment_statement );

if_statement
  : 'if'! expression
     ( ( ('then')? nl ) => ('then'!)? nl ( statement nl )* ( 'elseif' expression ('then')? nl ( statement nl )* )* ('else'nl (statement nl)* )? 'end' 'if'!
     | 'then' statement ( options { greedy=true; } : ('else') => 'else' statement )?
     )
 { #if_statement = #([IF_STATEMENT, "if"], #if_statement); };

loop_statement
  : ( 'do' ('while' | 'until') expression nl (statement nl)* 'loop'!
  | 'do' nl (statement nl)* 'loop' ( ('while'|'until') expression )?
  | 'while' expression nl (statement nl)* 'end' 'while'! )
 { #loop_statement = #([LOOP_STATEMENT, "loop"], #loop_statement); };

for_statement
  : ( 'for'! identifier EQ expression 'to' expression ( 'step' expression )? nl (statement nl)* 'next' ( identifier )?
  | 'for' 'each' identifier 'in' identifier nl (statement nl)* 'next' ( identifier )? )
 { #for_statement = #([FOR_STATEMENT, "for"], #for_statement); };

select_statement
  : 'select'! ('case'!)? expression nl
          ( options { greedy=true;} : 'case' case_clause_list nl (statement nl)* )*
          ('case' 'else' nl (statement nl)* )? 'end' 'select'
 { #select_statement = #([SELECT_STATEMENT, "select"], #select_statement); };

case_clause_list
  : case_clause (COMMA case_clause )*;


case_clause
  : ( ( ('is')? compare_op ) => ('is')? compare_op expression 
    | expression ( 'to' expression )? 
    );
    

redim_statement!
  : 'redim' ('preserve')? var_declaration ( COMMA var_declaration )*;

function_call
  : identifier bound_argument_list;

assign_op
  : EQ | POWER_EQ | LSHIFT_EQ | RSHIFT_EQ | MULTIPLY_EQ | DIVIDE_EQ | ADD_EQ | MINUS_EQ | INTDIVIDE_EQ | CONCAT_EQ;

assign_variable
  : ( assign_variable_node ( (SCOPE!|DOT!) assign_variable_node )* )
 { #assign_variable = #([VARIABLE, "variable"], #assign_variable); };

assign_variable_node
  : ( idents ( options { greedy=true; } : var_bound_argument_list)? )
  {#assign_variable_node = #([VARIABLE_NODE, "assign_variable_node"], #assign_variable_node);};

variable
  : ( variable_node ( (SCOPE!|DOT!) variable_node )* )
  {#variable = #([VARIABLE, "variable"], #variable);};

variable_node
  : idents ( options { greedy=true; } : bound_argument_list)?
  {#variable_node = #([VARIABLE_NODE, "variable_node"], #variable_node);};

set_statement
  : 'set'! assign_variable assign_op expression
 { #set_statement = #([SET_STATEMENT, "set"], #set_statement); };

assignment_statement
  : assign_variable ( assign_op expression )?
 { #assignment_statement = #([ASSIGNMENT_STATEMENT, "assignment"], #assignment_statement); };

function_name
  : ( identifier | 'new' )
 { #function_name = #([FUNCTIONAME, "name"], #function_name); };

return_type
  : identifier;

bound_var_decln_list
  : LPAREN ( var_decln_list )? RPAREN;

var_decln_list
  : var_declaration ( COMMA var_declaration )*;

function_definition
  : ( (modifier!)*
    ( 'function'! function_name bound_var_decln_list! 'as'! return_type! nl (statement nl)* 'end'! 'function'!
    | 'sub'! function_name bound_var_decln_list! nl (statement nl)* 'end'! 'sub'!
    ) ) { #function_definition = #([METHOD, "method"], #function_definition); };

modifier
  : 'shadows' | 'shared' | 'mustinherit' | 'notinheritable'
  | 'overridable' | 'notoverridable' | 'mustoverride' | 'overrides'
  | 'overloads' | 'default' | 'readonly' | 'writeonly' | 'global'
  | access;

access  : 'public'
  | 'private'
  | 'friend'
  | 'protected';

class_name
  : identifier
 { #class_name = #([CLASSNAME, "name"], #class_name); };

subclass_name
  : identifier
 { #subclass_name = #([SUPERCLASSNAME, "super class"], #subclass_name); };

class_definition
  : (modifier!)*
    'class'! class_name ( 'subclass'! 'of'! subclass_name )? nl class_members 'end'! 'class'!
 { #class_definition = #([CLASS, "class"], #class_definition); };

class_members
  : ( class_member nl )*;

class_member
  : ( (modifier)* 'class' ) => class_definition
  | ( (modifier)* ( 'function' | 'sub') ) => function_definition
  | member_var_definition;

member_var_definition!
  : (modifier)* declaration_statement;

declare_definition!
  : (modifier)* 'declare' nl declare_members 'end' 'declare';
// { #declare_definition = #([DECLARE, "declare"], #declare_definition); };

declare_members
  : ( declare_member nl )*;

declare_member
  : declaration_statement
  | option_statement;

program : (nl)? ( program_member (nl)? )* EOF!
 { #program = #([PROGRAM, "program"], #program); };

program_member
  : ( (modifier)* 'class' ) => class_definition
  | ( (modifier)* ( 'function' | 'sub' ) ) => function_definition
  | declare_definition;

class VisualBasicLexer extends Lexer;

options {
  exportVocab=VisualBasic;
  caseSensitive=false;
  caseSensitiveLiterals=false;
  testLiterals=false;
  defaultErrorHandler=false;
  charVocabulary='\u0003'..'\uFFFE';
  k=4;
}

SINGLE_LINE_COMMENT
  : ('\''|'#') (~('\r'|'\n'))* { $setType(Token.SKIP); };

REMARK_COMMENT : 'r' 'e' 'm' (~('a' ..'z'|'0'..'9'|'_'|'$')) (~('\r'|'\n'))* { $setType(Token.SKIP); };

NEWLINE : ( ('\r' ('\n')? | '\n') ( '+' { $setType(Token.SKIP); } )? ) { newline(); };

WHITE_SPACE
  : ( (' ' | '\t')+ | '_' (' '|'\t')* NEWLINE ) { $setType(Token.SKIP); };

STRING  : '"' ( (~('"')) | '"' '"' )* '"';

protected INTEGER : ('0' .. '9')+;

NUMBER : ( INTEGER '.' ) => INTEGER '.' INTEGER ( 'e' (PLUS|MINUS)? INTEGER)?
       | ( '.' INTEGER ) => '.' INTEGER ( 'e' (PLUS|MINUS)? INTEGER)?
       | ( INTEGER ) => INTEGER ( 'e' (PLUS|MINUS)? INTEGER)?
       | '.' { $setType(DOT); };

IDENTIFIER options { testLiterals=true; } : ('a'..'z') ('a'..'z'|'0'..'9'|'_')* ('$')?;

EQ  : '=';

LT  : '<';

LE  : '<=';

GT  : '>';

GE  : '>=';

NE  : '<>';

LSHIFT  : '<<';

RSHIFT  : '>>';

CONCAT  : '&';

PLUS  : '+';

MINUS : '-';

MULTIPLY
  : '*';

DIVIDE  : '/';

INTDIVIDE
  : '\\';

POWER : '^';

LPAREN  : '(';

RPAREN  : ')';

COMMA   : ',';

ASSIGN  : ':=';

SCOPE : '::';

POWER_EQ
  : '^=';

MULTIPLY_EQ
  : '*=';

DIVIDE_EQ
  : '/=';

INTDIVIDE_EQ
  : '\\=';

ADD_EQ  : '+=';

MINUS_EQ
  : '-=';

CONCAT_EQ
  : '&=';

LSHIFT_EQ
  : '<<=';

RSHIFT_EQ
  : '>>=';

COLON : ':';

DOT	:
	;


From jaluber at gmx.de  Tue Feb  3 22:50:27 2009
From: jaluber at gmx.de (Johannes Luber)
Date: Wed, 04 Feb 2009 07:50:27 +0100
Subject: [antlr-interest] Error: TokenStreamException while
	reading	Grammer
In-Reply-To: <f205f60902031956g570c61c6q2b316878ad779718@mail.gmail.com>
References: <f205f60902020045v2bec9cd2n5c7e9ff86fff3be5@mail.gmail.com>	<49874f5f.010bca0a.6096.3a35SMTPIN_ADDED@mx.google.com>	<f205f60902022037w30cc2a37h94cf91f3f7e59b7@mail.gmail.com>
	<f205f60902031956g570c61c6q2b316878ad779718@mail.gmail.com>
Message-ID: <49893AB3.1090500@gmx.de>

Chal Chale apne Ghar schrieb:
> 
> 
> Hi Gavin,
> Thanks for quick Response.
> It was really helpful to me.
> After trying with the antlr v3 , I am getting different error in console.

You are using the syntax for ANTLR 2.7.7 which is mostly incompatible
with the one used by ANTLR 3. The general form of a grammar is:

/** This is a grammar doc comment */
grammar-type grammar name;
options { name1 = value; name2 = value2; ... }
import delegateName1=grammar1, ..., delegateNameN=grammarN; // can omit
delegateName
tokens { token-name1; token-name2 = value; ... }
scope global-scope-name-1 { ?attribute-definitions? }
scope global-scope-name-2 { ?attribute-definitions? }
...
@header {...}
@lexer::header {...}
@members {...}

?rules?

To set the superclass of the generated class, use the superClass option.

See
<http://www.antlr.org/wiki/display/ANTLR3/ANTLR+v3+printable+documentation>
for further information. Although I'm really wondering how ANTLRworks
didn't complain about the fact, that you are actually using a ANTLR 2
grammar. I suggest that you either convert the grammar to the new syntax
or just use ANTLR 2.7.7.

Johannes
>  
> D:\Actuate\Samplelexer-parser\ConversionTool>java org.antlr.Tool
> D:\Actuate\VB\v
> b_org.g
> ANTLR Parser Generator  Version 3.1.1
> error(100): D:\Actuate\VB\vb_org.g:1:1: syntax error: antlr:
> D:\Actuate\VB\vb_or
> g.g:1:1: unexpected token: class
> warning(149): D:\Actuate\VB\vb_org.g:0:0: rewrite syntax or operator
> with no out
> put option; setting output=AST
> error(150):  grammar file D:\Actuate\VB\vb_org.g has no rules
> error(100): D:\Actuate\VB\vb_org.g:0:0: syntax error: assign.types:
> <AST>:0:0: u
> nexpected end of subtree
> error(100): D:\Actuate\VB\vb_org.g:0:0: syntax error: define: <AST>:0:0:
> unexpec
> ted end of subtree
> i am attching my .g file fro reference.
> Any help would be appriciated.
> regards,
> Gunjan
> On Tue, Feb 3, 2009 at 1:23 AM, Gavin Lambert <antlr at mirality.co.nz
> <mailto:antlr at mirality.co.nz>> wrote:
> 
>     At 21:45 2/02/2009, Chal Chale apne Ghar wrote:
> 
>         D:\Actuate\Samplelexer-parser\ConversionTool>java antlr.Tool
>         vb_org.txt
>         ANTLR Parser Generator   Version 2.7.5 (20050128)   1989-2005
>         jGuru.com
>         error: Token stream error reading grammar(s):
>         vb_org.txt:45:7: expecting ''', found 'p'
>         TokenStreamException: expecting ''', found 'p'
> 
>         as seen, i am getting TokenStream Exception. But when i am using
>         AntlrWorks to check the Grammer syntax, it is showing correct to me.
> 
> 
>     You're running ANTLR v2 on the command line, but ANTLRWorks is for
>     ANTLR v3.  To run ANTLR v3, you need to use "org.antlr.Tool", not
>     "antlr.Tool".
> 
>     Also, by convention grammar files have a .g extension.  This doesn't
>     really matter (ANTLR will still happily compile the file regardless
>     of extension), but it's a good idea to follow the convention, since
>     that's what tools are expecting.
> 
> 
> 
> 
> ------------------------------------------------------------------------
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From gunjgupta at gmail.com  Tue Feb  3 22:57:30 2009
From: gunjgupta at gmail.com (Chal Chale apne Ghar)
Date: Wed, 4 Feb 2009 12:27:30 +0530
Subject: [antlr-interest] Error: TokenStreamException while reading
	Grammer
In-Reply-To: <49893AB3.1090500@gmx.de>
References: <f205f60902020045v2bec9cd2n5c7e9ff86fff3be5@mail.gmail.com>
	<49874f5f.010bca0a.6096.3a35SMTPIN_ADDED@mx.google.com>
	<f205f60902022037w30cc2a37h94cf91f3f7e59b7@mail.gmail.com>
	<f205f60902031956g570c61c6q2b316878ad779718@mail.gmail.com>
	<49893AB3.1090500@gmx.de>
Message-ID: <f205f60902032257t5f91bc2at72e578a35bedea6a@mail.gmail.com>

HI Johannes,
Thanks for your reply.

As you said the given grammer syntax is fro Antlr 2.7.7.
Is there any previous version of AnltrWorks compatible with this grammer?

regards,
Gunjan



On Wed, Feb 4, 2009 at 12:20 PM, Johannes Luber <jaluber at gmx.de> wrote:

> Chal Chale apne Ghar schrieb:
> >
> >
> > Hi Gavin,
> > Thanks for quick Response.
> > It was really helpful to me.
> > After trying with the antlr v3 , I am getting different error in console.
>
> You are using the syntax for ANTLR 2.7.7 which is mostly incompatible
> with the one used by ANTLR 3. The general form of a grammar is:
>
> /** This is a grammar doc comment */
> grammar-type grammar name;
> options { name1 = value; name2 = value2; ... }
> import delegateName1=grammar1, ..., delegateNameN=grammarN; // can omit
> delegateName
> tokens { token-name1; token-name2 = value; ... }
> scope global-scope-name-1 { ?attribute-definitions? }
> scope global-scope-name-2 { ?attribute-definitions? }
> ...
> @header {...}
> @lexer::header {...}
> @members {...}
>
> ?rules?
>
> To set the superclass of the generated class, use the superClass option.
>
> See
> <http://www.antlr.org/wiki/display/ANTLR3/ANTLR+v3+printable+documentation
> >
> for further information. Although I'm really wondering how ANTLRworks
> didn't complain about the fact, that you are actually using a ANTLR 2
> grammar. I suggest that you either convert the grammar to the new syntax
> or just use ANTLR 2.7.7.
>
> Johannes
> >
> > D:\Actuate\Samplelexer-parser\ConversionTool>java org.antlr.Tool
> > D:\Actuate\VB\v
> > b_org.g
> > ANTLR Parser Generator  Version 3.1.1
> > error(100): D:\Actuate\VB\vb_org.g:1:1: syntax error: antlr:
> > D:\Actuate\VB\vb_or
> > g.g:1:1: unexpected token: class
> > warning(149): D:\Actuate\VB\vb_org.g:0:0: rewrite syntax or operator
> > with no out
> > put option; setting output=AST
> > error(150):  grammar file D:\Actuate\VB\vb_org.g has no rules
> > error(100): D:\Actuate\VB\vb_org.g:0:0: syntax error: assign.types:
> > <AST>:0:0: u
> > nexpected end of subtree
> > error(100): D:\Actuate\VB\vb_org.g:0:0: syntax error: define: <AST>:0:0:
> > unexpec
> > ted end of subtree
> > i am attching my .g file fro reference.
> > Any help would be appriciated.
> > regards,
> > Gunjan
> > On Tue, Feb 3, 2009 at 1:23 AM, Gavin Lambert <antlr at mirality.co.nz
> > <mailto:antlr at mirality.co.nz>> wrote:
> >
> >     At 21:45 2/02/2009, Chal Chale apne Ghar wrote:
> >
> >         D:\Actuate\Samplelexer-parser\ConversionTool>java antlr.Tool
> >         vb_org.txt
> >         ANTLR Parser Generator   Version 2.7.5 (20050128)   1989-2005
> >         jGuru.com
> >         error: Token stream error reading grammar(s):
> >         vb_org.txt:45:7: expecting ''', found 'p'
> >         TokenStreamException: expecting ''', found 'p'
> >
> >         as seen, i am getting TokenStream Exception. But when i am using
> >         AntlrWorks to check the Grammer syntax, it is showing correct to
> me.
> >
> >
> >     You're running ANTLR v2 on the command line, but ANTLRWorks is for
> >     ANTLR v3.  To run ANTLR v3, you need to use "org.antlr.Tool", not
> >     "antlr.Tool".
> >
> >     Also, by convention grammar files have a .g extension.  This doesn't
> >     really matter (ANTLR will still happily compile the file regardless
> >     of extension), but it's a good idea to follow the convention, since
> >     that's what tools are expecting.
> >
> >
> >
> >
> > ------------------------------------------------------------------------
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090204/cfa6bc56/attachment.html 

From gunjgupta at gmail.com  Tue Feb  3 23:00:38 2009
From: gunjgupta at gmail.com (Chal Chale apne Ghar)
Date: Wed, 4 Feb 2009 12:30:38 +0530
Subject: [antlr-interest] Error: TokenStreamException while reading
	Grammer
In-Reply-To: <49893AB3.1090500@gmx.de>
References: <f205f60902020045v2bec9cd2n5c7e9ff86fff3be5@mail.gmail.com>
	<49874f5f.010bca0a.6096.3a35SMTPIN_ADDED@mx.google.com>
	<f205f60902022037w30cc2a37h94cf91f3f7e59b7@mail.gmail.com>
	<f205f60902031956g570c61c6q2b316878ad779718@mail.gmail.com>
	<49893AB3.1090500@gmx.de>
Message-ID: <f205f60902032300k24155f75m83e86f9cec74497f@mail.gmail.com>

Hi Johannes,
One more thinig i woudl like to say that in my very first mail, i had tested
this Grammer with Antlr version 2.7.5. Then alos it was throwing me Token
StreamException as below mentioned:

D:\Actuate\Samplelexer-parser\ConversionTool>java antlr.Tool
>         vb_org.txt
>         ANTLR Parser Generator   Version 2.7.5 (20050128)   1989-2005
>         jGuru.com
>         error: Token stream error reading grammar(s):
>         vb_org.txt:45:7: expecting ''', found 'p'
>         TokenStreamException: expecting ''', found 'p'
>
regards,
Gunjan

On Wed, Feb 4, 2009 at 12:20 PM, Johannes Luber <jaluber at gmx.de> wrote:

> Chal Chale apne Ghar schrieb:
> >
> >
> > Hi Gavin,
> > Thanks for quick Response.
> > It was really helpful to me.
> > After trying with the antlr v3 , I am getting different error in console.
>
> You are using the syntax for ANTLR 2.7.7 which is mostly incompatible
> with the one used by ANTLR 3. The general form of a grammar is:
>
> /** This is a grammar doc comment */
> grammar-type grammar name;
> options { name1 = value; name2 = value2; ... }
> import delegateName1=grammar1, ..., delegateNameN=grammarN; // can omit
> delegateName
> tokens { token-name1; token-name2 = value; ... }
> scope global-scope-name-1 { ?attribute-definitions? }
> scope global-scope-name-2 { ?attribute-definitions? }
> ...
> @header {...}
> @lexer::header {...}
> @members {...}
>
> ?rules?
>
> To set the superclass of the generated class, use the superClass option.
>
> See
> <http://www.antlr.org/wiki/display/ANTLR3/ANTLR+v3+printable+documentation
> >
> for further information. Although I'm really wondering how ANTLRworks
> didn't complain about the fact, that you are actually using a ANTLR 2
> grammar. I suggest that you either convert the grammar to the new syntax
> or just use ANTLR 2.7.7.
>
> Johannes
> >
> > D:\Actuate\Samplelexer-parser\ConversionTool>java org.antlr.Tool
> > D:\Actuate\VB\v
> > b_org.g
> > ANTLR Parser Generator  Version 3.1.1
> > error(100): D:\Actuate\VB\vb_org.g:1:1: syntax error: antlr:
> > D:\Actuate\VB\vb_or
> > g.g:1:1: unexpected token: class
> > warning(149): D:\Actuate\VB\vb_org.g:0:0: rewrite syntax or operator
> > with no out
> > put option; setting output=AST
> > error(150):  grammar file D:\Actuate\VB\vb_org.g has no rules
> > error(100): D:\Actuate\VB\vb_org.g:0:0: syntax error: assign.types:
> > <AST>:0:0: u
> > nexpected end of subtree
> > error(100): D:\Actuate\VB\vb_org.g:0:0: syntax error: define: <AST>:0:0:
> > unexpec
> > ted end of subtree
> > i am attching my .g file fro reference.
> > Any help would be appriciated.
> > regards,
> > Gunjan
> > On Tue, Feb 3, 2009 at 1:23 AM, Gavin Lambert <antlr at mirality.co.nz
> > <mailto:antlr at mirality.co.nz>> wrote:
> >
> >     At 21:45 2/02/2009, Chal Chale apne Ghar wrote:
> >
> >         D:\Actuate\Samplelexer-parser\ConversionTool>java antlr.Tool
> >         vb_org.txt
> >         ANTLR Parser Generator   Version 2.7.5 (20050128)   1989-2005
> >         jGuru.com
> >         error: Token stream error reading grammar(s):
> >         vb_org.txt:45:7: expecting ''', found 'p'
> >         TokenStreamException: expecting ''', found 'p'
> >
> >         as seen, i am getting TokenStream Exception. But when i am using
> >         AntlrWorks to check the Grammer syntax, it is showing correct to
> me.
> >
> >
> >     You're running ANTLR v2 on the command line, but ANTLRWorks is for
> >     ANTLR v3.  To run ANTLR v3, you need to use "org.antlr.Tool", not
> >     "antlr.Tool".
> >
> >     Also, by convention grammar files have a .g extension.  This doesn't
> >     really matter (ANTLR will still happily compile the file regardless
> >     of extension), but it's a good idea to follow the convention, since
> >     that's what tools are expecting.
> >
> >
> >
> >
> > ------------------------------------------------------------------------
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090204/02363a37/attachment.html 

From jaluber at gmx.de  Tue Feb  3 23:03:38 2009
From: jaluber at gmx.de (Johannes Luber)
Date: Wed, 04 Feb 2009 08:03:38 +0100
Subject: [antlr-interest] Error: TokenStreamException while reading
	Grammer
In-Reply-To: <f205f60902032300k24155f75m83e86f9cec74497f@mail.gmail.com>
References: <f205f60902020045v2bec9cd2n5c7e9ff86fff3be5@mail.gmail.com>	
	<49874f5f.010bca0a.6096.3a35SMTPIN_ADDED@mx.google.com>	
	<f205f60902022037w30cc2a37h94cf91f3f7e59b7@mail.gmail.com>	
	<f205f60902031956g570c61c6q2b316878ad779718@mail.gmail.com>	
	<49893AB3.1090500@gmx.de>
	<f205f60902032300k24155f75m83e86f9cec74497f@mail.gmail.com>
Message-ID: <49893DCA.70903@gmx.de>

Chal Chale apne Ghar schrieb:
> Hi Johannes,
> One more thinig i woudl like to say that in my very first mail, i had
> tested this Grammer with Antlr version 2.7.5. Then alos it was throwing
> me Token StreamException as below mentioned:
>  
> D:\Actuate\Samplelexer-parser\ConversionTool>java antlr.Tool
>>         vb_org.txt
>>         ANTLR Parser Generator   Version 2.7.5 (20050128)   1989-2005
>>         jGuru.com
>>         error: Token stream error reading grammar(s):
>>         vb_org.txt:45:7: expecting ''', found 'p'
>>         TokenStreamException: expecting ''', found 'p'
>>
> regards,
> Gunjan

Sorry, I've never used ANTLR 2.7.7 or even 2.7.7 (which you should try
yourself in case it's a runtime bug), so I can't help you there.
ANTLRworks works only for ANTLR 3 upwards.

Johannes
> 
> On Wed, Feb 4, 2009 at 12:20 PM, Johannes Luber <jaluber at gmx.de
> <mailto:jaluber at gmx.de>> wrote:
> 
>     Chal Chale apne Ghar schrieb:
>     >
>     >
>     > Hi Gavin,
>     > Thanks for quick Response.
>     > It was really helpful to me.
>     > After trying with the antlr v3 , I am getting different error in
>     console.
> 
>     You are using the syntax for ANTLR 2.7.7 which is mostly incompatible
>     with the one used by ANTLR 3. The general form of a grammar is:
> 
>     /** This is a grammar doc comment */
>     grammar-type grammar name;
>     options { name1 = value; name2 = value2; ... }
>     import delegateName1=grammar1, ..., delegateNameN=grammarN; // can omit
>     delegateName
>     tokens { token-name1; token-name2 = value; ... }
>     scope global-scope-name-1 { ?attribute-definitions? }
>     scope global-scope-name-2 { ?attribute-definitions? }
>     ...
>     @header {...}
>     @lexer::header {...}
>     @members {...}
> 
>     ?rules?
> 
>     To set the superclass of the generated class, use the superClass option.
> 
>     See
>     <http://www.antlr.org/wiki/display/ANTLR3/ANTLR+v3+printable+documentation>
>     for further information. Although I'm really wondering how ANTLRworks
>     didn't complain about the fact, that you are actually using a ANTLR 2
>     grammar. I suggest that you either convert the grammar to the new syntax
>     or just use ANTLR 2.7.7.
> 
>     Johannes
>     >
>     > D:\Actuate\Samplelexer-parser\ConversionTool>java org.antlr.Tool
>     > D:\Actuate\VB\v
>     > b_org.g
>     > ANTLR Parser Generator  Version 3.1.1
>     > error(100): D:\Actuate\VB\vb_org.g:1:1: syntax error: antlr:
>     > D:\Actuate\VB\vb_or
>     > g.g:1:1: unexpected token: class
>     > warning(149): D:\Actuate\VB\vb_org.g:0:0: rewrite syntax or operator
>     > with no out
>     > put option; setting output=AST
>     > error(150):  grammar file D:\Actuate\VB\vb_org.g has no rules
>     > error(100): D:\Actuate\VB\vb_org.g:0:0: syntax error: assign.types:
>     > <AST>:0:0: u
>     > nexpected end of subtree
>     > error(100): D:\Actuate\VB\vb_org.g:0:0: syntax error: define:
>     <AST>:0:0:
>     > unexpec
>     > ted end of subtree
>     > i am attching my .g file fro reference.
>     > Any help would be appriciated.
>     > regards,
>     > Gunjan
>     > On Tue, Feb 3, 2009 at 1:23 AM, Gavin Lambert
>     <antlr at mirality.co.nz <mailto:antlr at mirality.co.nz>
>     > <mailto:antlr at mirality.co.nz <mailto:antlr at mirality.co.nz>>> wrote:
>     >
>     >     At 21:45 2/02/2009, Chal Chale apne Ghar wrote:
>     >
>     >         D:\Actuate\Samplelexer-parser\ConversionTool>java antlr.Tool
>     >         vb_org.txt
>     >         ANTLR Parser Generator   Version 2.7.5 (20050128)   1989-2005
>     >         jGuru.com
>     >         error: Token stream error reading grammar(s):
>     >         vb_org.txt:45:7: expecting ''', found 'p'
>     >         TokenStreamException: expecting ''', found 'p'
>     >
>     >         as seen, i am getting TokenStream Exception. But when i am
>     using
>     >         AntlrWorks to check the Grammer syntax, it is showing
>     correct to me.
>     >
>     >
>     >     You're running ANTLR v2 on the command line, but ANTLRWorks is for
>     >     ANTLR v3.  To run ANTLR v3, you need to use "org.antlr.Tool", not
>     >     "antlr.Tool".
>     >
>     >     Also, by convention grammar files have a .g extension.  This
>     doesn't
>     >     really matter (ANTLR will still happily compile the file
>     regardless
>     >     of extension), but it's a good idea to follow the convention,
>     since
>     >     that's what tools are expecting.
>     >
>     >
>     >
>     >
>     >
>     ------------------------------------------------------------------------
>     >
>     >
>     > List: http://www.antlr.org/mailman/listinfo/antlr-interest
>     > Unsubscribe:
>     http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
> 


From gunjgupta at gmail.com  Wed Feb  4 04:45:31 2009
From: gunjgupta at gmail.com (Chal Chale apne Ghar)
Date: Wed, 4 Feb 2009 18:15:31 +0530
Subject: [antlr-interest] Lexer/parser grammer for Antlrv2
Message-ID: <f205f60902040445xdf3b9doc7f3448240a6b186@mail.gmail.com>

Hi  All,

Is there any way to generate the Lexer/parser grammer for Antlr V2 ?
If if we have to manually write the Grammer where can i find the
specification for Lexer/parser grammer for Antlr V2?
I currently have Antlr2.7.5 version.
Any help would be appreciated.
regards,
Gunjan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090204/0ea2eaba/attachment.html 

From antlr at jazillian.com  Wed Feb  4 07:04:12 2009
From: antlr at jazillian.com (Andy Tripp)
Date: Wed, 04 Feb 2009 10:04:12 -0500
Subject: [antlr-interest] tree walking and semantic analysis
In-Reply-To: <818821.34795.qm@web50102.mail.re2.yahoo.com>
References: <818821.34795.qm@web50102.mail.re2.yahoo.com>
Message-ID: <4989AE6C.8040307@jazillian.com>

Hi Carter,

Sounds like you should just walk the AST "by hand".
I think the ANTLR treewalkers are geared more toward simple cases where you have
just a few actions at various points in the AST.
See http://www.antlr2.org/article/1170602723163/treewalkers.html
for more info.

Andy

Carter Cheng wrote:
> Hi Andy and the others,
> 
> Thanks for the reply. I am currently reworking my tree code and doing it somewhat manually because I was having some difficulties with working with the C runtime in C++ mode. The difficulty I was having was something along these lines- 
> 
> program[int pass] 
> : (declarations[pass])*
> ; 
> 
> declarations[int pass]
> : /* some CFG rule case */ { switch(pass) { /* do something depending on the pass */ } }
> ;
> 
> This obviously seems like quite a mess. Especially when in different passes you need to percolate different types of data up the tree and left to right depending on the pass. 
> 
> A possible alternative is to using some sort of visitor or function object which behaves differently on each pass. However I am not quite sure how to get this to work properly. The issue primarily is with the return value types in my language I have certain expression constants which need to be checked and if possible reduced to their actual values in certain descents of the grammar and in other cases return the whole expression tree- 
> 
> declaration[Functor f] returns [??? retval ]
> : /* some CFG rule case */ { $retval = f(e); }
> ;
> 
> The return type can be quite different depending on the functor in question making it somewhat difficult to determine what the type of retval should be. 
> 
> This is getting a bit long I suspect with the error situation with multiple errors the only thing that can be done is return something... pass in some sort of functor or I/O stream which can be used to dump data back to the user etc.
> 
> I hope that sort of makes sense.
> 
> Regards,
> 
> Carter.
> 
> 
>       
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From sharwell at pixelminegames.com  Wed Feb  4 08:46:47 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Wed, 4 Feb 2009 10:46:47 -0600
Subject: [antlr-interest] Lexer/parser grammer for Antlrv2
In-Reply-To: <f205f60902040445xdf3b9doc7f3448240a6b186@mail.gmail.com>
References: <f205f60902040445xdf3b9doc7f3448240a6b186@mail.gmail.com>
Message-ID: <86403CA0939415448BCCB83855EFE09AA678B3@Bloodymary.ironwillgames.com>

Are you trying to write a grammar that is build by/targets ANTLR v2
runtime, or are you trying to write a grammar that can parse ANTLR v2
grammar files themselves?

 

I haven't worked with ANTLR v2, but I believe the information you are
looking for could be here:

http://www.antlr2.org/

 

Sam

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Chal Chale apne
Ghar
Sent: Wednesday, February 04, 2009 6:46 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Lexer/parser grammer for Antlrv2

 

Hi  All,

 

Is there any way to generate the Lexer/parser grammer for Antlr V2 ?

If if we have to manually write the Grammer where can i find the
specification for Lexer/parser grammer for Antlr V2?

I currently have Antlr2.7.5 version.

Any help would be appreciated.

regards,

Gunjan 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090204/a38502ec/attachment.html 

From sharwell at pixelminegames.com  Wed Feb  4 08:50:11 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Wed, 4 Feb 2009 10:50:11 -0600
Subject: [antlr-interest] Lexer/parser grammer for Antlrv2
In-Reply-To: <f205f60902040445xdf3b9doc7f3448240a6b186@mail.gmail.com>
References: <f205f60902040445xdf3b9doc7f3448240a6b186@mail.gmail.com>
Message-ID: <86403CA0939415448BCCB83855EFE09AA678B4@Bloodymary.ironwillgames.com>

PS: Sorry about the duplicated mail. When I cc'd the author it bounced,
so I have to send it here again for him to see it.

 

Are you trying to write a grammar that is build by/targets ANTLR v2
runtime, or are you trying to write a grammar that can parse ANTLR v2
grammar files themselves?

 

I haven't worked with ANTLR v2, but I believe the information you are
looking for could be here:

http://www.antlr2.org/

 

Sam

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Chal Chale apne
Ghar
Sent: Wednesday, February 04, 2009 6:46 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Lexer/parser grammer for Antlrv2

 

Hi  All,

 

Is there any way to generate the Lexer/parser grammer for Antlr V2 ?

If if we have to manually write the Grammer where can i find the
specification for Lexer/parser grammer for Antlr V2?

I currently have Antlr2.7.5 version.

Any help would be appreciated.

regards,

Gunjan 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090204/2e345389/attachment.html 

From greg.brownell at mikelinc.com  Wed Feb  4 11:06:52 2009
From: greg.brownell at mikelinc.com (Gregory Brownell)
Date: Wed, 04 Feb 2009 14:06:52 -0500
Subject: [antlr-interest] ANTLR Javadoc
Message-ID: <4989E74C.20303@mikelinc.com>

Where is the ANTLR Javadoc?  It did not come bundled with either the 
binary or source download.

Thanks,

Greg.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: greg_brownell.vcf
Type: text/x-vcard
Size: 223 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090204/473b090f/attachment.vcf 

From antlr at mirality.co.nz  Wed Feb  4 11:38:07 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 05 Feb 2009 08:38:07 +1300
Subject: [antlr-interest] ANTLR Javadoc
In-Reply-To: <4989E74C.20303@mikelinc.com>
References: <4989E74C.20303@mikelinc.com>
Message-ID: <20090204193837.AFEEC341847A@www.antlr.org>

At 08:06 5/02/2009, Gregory Brownell wrote:
 >Where is the ANTLR Javadoc?  It did not come bundled with
 >either the binary or source download.

IIRC, you have to build it yourself from the source 
download.  It's not pre-built in either.


From brothers at bros.com  Wed Feb  4 12:47:15 2009
From: brothers at bros.com (Dennis Brothers)
Date: Wed, 4 Feb 2009 15:47:15 -0500
Subject: [antlr-interest] Debug issues
Message-ID: <A4713D18-0710-4F31-8728-99D2ADD1924E@bros.com>

I may be (probably am) missing something, but I think the debugging  
experience could be improved a bit.

On my system (Vista under Bootcamp and Fusion on a MacBook Pro, C#  
target), the default debug port (49153?) seems to be in use by some  
other process - possibly Outlook, from a quick Google search.  To  
change the port in the generated parser, you need to hand a port  
number to the constructor of a debug-enabled parser.  _But_, a non- 
debug parser doesn't have a constructor with that signature, so you  
have to edit your code whenever you switch debugging on or off.

It would be good if the non-debug parser accepted (and ignored) the  
port number, or if the debug port could be specified some other way -  
possibly by being able to put something like -debug:1234 on the  
command line.

Am I missing something?

     - Dennis Brothers


From parrt at cs.usfca.edu  Wed Feb  4 12:54:13 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 4 Feb 2009 12:54:13 -0800
Subject: [antlr-interest] ANTLR Javadoc
In-Reply-To: <20090204193837.AFEEC341847A@www.antlr.org>
References: <4989E74C.20303@mikelinc.com>
	<20090204193837.AFEEC341847A@www.antlr.org>
Message-ID: <05B5D538-3734-4838-AAEF-58CF2D5512B1@cs.usfca.edu>

http://www.antlr.org/api/index.html
Ter
On Feb 4, 2009, at 11:38 AM, Gavin Lambert wrote:

> At 08:06 5/02/2009, Gregory Brownell wrote:
>> Where is the ANTLR Javadoc?  It did not come bundled with
>> either the binary or source download.
>
> IIRC, you have to build it yourself from the source
> download.  It's not pre-built in either.
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From antlr at jazillian.com  Wed Feb  4 13:12:32 2009
From: antlr at jazillian.com (Andy Tripp)
Date: Wed, 04 Feb 2009 16:12:32 -0500
Subject: [antlr-interest] ANTLR Javadoc
In-Reply-To: <05B5D538-3734-4838-AAEF-58CF2D5512B1@cs.usfca.edu>
References: <4989E74C.20303@mikelinc.com>	<20090204193837.AFEEC341847A@www.antlr.org>
	<05B5D538-3734-4838-AAEF-58CF2D5512B1@cs.usfca.edu>
Message-ID: <498A04C0.4060707@jazillian.com>

That link is Doxygen format, not javadoc.
I'll be happy to upload and maintain a javadoc version if someone will tell me how.

In the meantime, to generate your own, go to the
runtime/Java/src directory and run:
 
javadoc -d api org.antlr org.antlr.runtime org.antlr.runtime.debug org.antlr.runtime.misc org.antlr.runtime.tree

Andy

Terence Parr wrote:
> http://www.antlr.org/api/index.html
> Ter
> On Feb 4, 2009, at 11:38 AM, Gavin Lambert wrote:
> 
>> At 08:06 5/02/2009, Gregory Brownell wrote:
>>> Where is the ANTLR Javadoc?  It did not come bundled with
>>> either the binary or source download.
>> IIRC, you have to build it yourself from the source
>> download.  It's not pre-built in either.
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From jimi at temporal-wave.com  Wed Feb  4 13:49:39 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 04 Feb 2009 13:49:39 -0800
Subject: [antlr-interest] Debug issues
In-Reply-To: <A4713D18-0710-4F31-8728-99D2ADD1924E@bros.com>
References: <A4713D18-0710-4F31-8728-99D2ADD1924E@bros.com>
Message-ID: <498A0D73.7050206@temporal-wave.com>

Dennis Brothers wrote:
> I may be (probably am) missing something, but I think the debugging  
> experience could be improved a bit.
>
> On my system (Vista under Bootcamp and Fusion on a MacBook Pro, C#  
> target), the default debug port (49153?) seems to be in use by some  
> other process - possibly Outlook, from a quick Google search.  To  
> change the port in the generated parser, you need to hand a port  
> number to the constructor of a debug-enabled parser.  _But_, a non- 
> debug parser doesn't have a constructor with that signature, so you  
> have to edit your code whenever you switch debugging on or off.
>
> It would be good if the non-debug parser accepted (and ignored) the  
> port number, or if the debug port could be specified some other way -  
> possibly by being able to put something like -debug:1234 on the  
> command line.
>
> Am I missing something?
>   
We are currently out of step a bit on the port number thing I think.

We tried to decide on a port number that did not clash in Vista but I 
think that somehow we ended up back with the port number that clashed 
even though we all agreed to change it ;-). I'll make a note to remember 
to sort this out with Jean and Ter and the other target guys before 
3.1.2. Changing the default port is trivial, but has to be coordinated 
of course.

Jim

From jimi at temporal-wave.com  Wed Feb  4 14:06:44 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 04 Feb 2009 14:06:44 -0800
Subject: [antlr-interest] ANTLR Javadoc
In-Reply-To: <498A04C0.4060707@jazillian.com>
References: <4989E74C.20303@mikelinc.com>	<20090204193837.AFEEC341847A@www.antlr.org>	<05B5D538-3734-4838-AAEF-58CF2D5512B1@cs.usfca.edu>
	<498A04C0.4060707@jazillian.com>
Message-ID: <498A1174.4060501@temporal-wave.com>

Andy Tripp wrote:
> That link is Doxygen format, not javadoc.
> I'll be happy to upload and maintain a javadoc version if someone will tell me how.
>
> In the meantime, to generate your own, go to the
> runtime/Java/src directory and run:
>  
> javadoc -d api org.antlr org.antlr.runtime org.antlr.runtime.debug org.antlr.runtime.misc org.antlr.runtime.tree
>
> Andy
No need for any of this ;-).

Hudson handles it (at least it does as of 5 minutes ago when I told it 
to build the Javadoc as well as the source jar). Just follow this link 
(which always points to the latest successful build artifacts [jars, 
sources, docs]):

http://antlr.org/hudson/job/ANTLR_Runtime/lastSuccessfulBuild/org.antlr$antlr-runtime/

At the next release (3.1.2), the Maven repository will also have the 
Javadoc for the Java runtime release.

If you want to build manually/locally, then the command is just:

mvn javadoc:javadoc

or

mvn javadoc:jar

If you want a compressed version for an IDE or something.

Jim

From jaluber at gmx.de  Wed Feb  4 14:07:37 2009
From: jaluber at gmx.de (Johannes Luber)
Date: Wed, 04 Feb 2009 23:07:37 +0100
Subject: [antlr-interest] Debug issues
In-Reply-To: <A4713D18-0710-4F31-8728-99D2ADD1924E@bros.com>
References: <A4713D18-0710-4F31-8728-99D2ADD1924E@bros.com>
Message-ID: <498A11A9.6010409@gmx.de>

Dennis Brothers schrieb:
> I may be (probably am) missing something, but I think the debugging  
> experience could be improved a bit.
> 
> On my system (Vista under Bootcamp and Fusion on a MacBook Pro, C#  
> target), the default debug port (49153?) seems to be in use by some  
> other process - possibly Outlook, from a quick Google search.  To  
> change the port in the generated parser, you need to hand a port  
> number to the constructor of a debug-enabled parser.  _But_, a non- 
> debug parser doesn't have a constructor with that signature, so you  
> have to edit your code whenever you switch debugging on or off.
> 
> It would be good if the non-debug parser accepted (and ignored) the  
> port number, or if the debug port could be specified some other way -  
> possibly by being able to put something like -debug:1234 on the  
> command line.
> 
> Am I missing something?
> 
>      - Dennis Brothers

Sam Harwell is already trying to untangle the problem with the
constructors for the CSharp3 target. Hopefully I can port back this to
CSharp2 without much difficulty, although it would be a good idea, if
all targets would support this. You can use preprocessor directives in
the meantime to ease the switch between debug and non-debug in the
meanwhile.

Johannes

From a.serebrenik at tue.nl  Wed Feb  4 14:41:10 2009
From: a.serebrenik at tue.nl (Serebrenik, A.)
Date: Wed, 4 Feb 2009 23:41:10 +0100
Subject: [antlr-interest] Call for Papers: 2nd International Conference on
 Software Language Engineering
In-Reply-To: <7DF2365FF07C0E4E89419D65CCC93C9E015BEB8353CC@EXCHANGE11.campus.tue.nl>
References: <7DF2365FF07C0E4E89419D65CCC93C9E015BEB8353CA@EXCHANGE11.campus.tue.nl>,
	<7DF2365FF07C0E4E89419D65CCC93C9E015BEB8353CC@EXCHANGE11.campus.tue.nl>
Message-ID: <7DF2365FF07C0E4E89419D65CCC93C9E015BEB8353CE@EXCHANGE11.campus.tue.nl>


__________________________________________________________________
                       Call for Papers - SLE 2009

    2nd International Conference on Software Language Engineering

                     http://planet-sl.org/sle2009

                 Denver, Colorado, October 5-6, 2009

___________________________________________________________________

           Co-located with 12th International Conference on
    Model-Driven Engineering Languages and Systems (MODELS 2009)
                and 8th International Conference on
     Generative Programming and Component Engineering (GPCE 2009)

Proceedings will be published in the LNCS series (subject to
Springer's approval).

The 2nd International Conference on Software Language Engineering (SLE)
is devoted to topics related to artificial languages in software
engineering. SLE's foremost mission is to encourage and organize
communication between communities that have traditionally looked
at software languages from different, more specialized, and yet
complementary perspectives. SLE emphasizes the fundamental notion
of languages as opposed to any realization in specific "technical
spaces". SLE 2009 will be co-located with the 12th IEEE/ACM
International Conference on Model-Driven Engineering Languages and
Systems (MODELS 2009).


Scope
-----

The term 'software language' comprises all sorts of artificial
languages used in software development including general-purpose
programming languages, domain-specific languages, modeling and
meta-modeling languages, data models, and ontologies. Used in its
broadest sense, examples include modeling languages such as
UML-based and domain-specific modeling languages, business process
modeling languages, and web application modeling languages.  The
term 'software language' also comprises APIs and collections of
design patterns that are implicitly defined languages.

Software language engineering is the application of a systematic,
disciplined, quantifiable approach to the development, use, and
maintenance of these languages. Thus, the SLE conference is
concerned with all phases of the life cycle of software languages;
these include the design, implementation, documentation, testing,
deployment, evolution, recovery, and retirement of languages. Of
special interest are tools, techniques, methods and formalisms that
support these activities. In particular, tools are often based on
or even automatically generated from a formal description of the
language. Hence, of special interest is the treatment of language
descriptions as software artifacts, akin to programs - while paying
attention to the special status of language descriptions, subject
to tailored engineering principles and methods for modularization,
refactoring, refinement, composition, versioning, co-evolution,
and analysis.


Topics of interest
------------------

We solicit high-quality contributions in the area of SLE ranging
from theoretical and conceptual contributions to tools, techniques
and frameworks that support the aforementioned life cycle activities.
Some examples of tools, techniques, applications, and problems are
listed below in order to clarify the types of contributions sought
by SLE.

* Formalisms used in designing and specifying languages and tools
  that analyze such language descriptions.

* Language implementation techniques, grammar-based and
  metamodel-based.


* Program and model transformation tools.

* Composition, integration, and mapping tools for managing different
  aspects of software languages or different manifestations of a
  given language.

* Language evolution.

* Approaches to the elicitation, specification, and verification of
  requirements for software languages.

* Language development frameworks, methodologies, techniques, best
  practices, and tools for the broader language life cycle covering
  phases such as analysis, testing, and documentation.

* Design challenges in SLE.

* Applications of languages including innovative domain-specific
  languages or "little" languages

Do note that this list is not exclusive and many examples of tools,
techniques, approaches have not been listed. Please visit the
conference web site to see a more elaborate description of the
topics of interests. The program committee chairs encourage potential
contributors to contact them with questions about the scope and
topics of interest of SLE.


Paper Submission
----------------

We solicit the following types of papers:

 * Research papers. These should report a substantial research
   contribution to SLE and/or successful application of SLE
   techniques. Full paper submissions must not exceed 20 pages.

 * Short papers. These may describe interesting or thought-provoking
   concepts that are not yet fully developed or evaluated, make an
   initial contribution to challenging research issues in SLE, or
   discuss and analyze controversial issues in the field. These papers
   must not exceed 10 pages.

 * Tool demonstration papers. Because of SLE's ample interest in
   tools, we seek papers that present software tools related to the
   field of SLE. These papers will accompany a tool demonstration to
   be given at the conference. These papers must not exceed 10
   pages. The selection criteria include the originality of the tool,
   its innovative aspects, the relevance of the tool to SLE, and the
   maturity of the tool. Submissions may also include an appendix
   (that will not be published) containing additional screen-shots and
   discussion of the proposed demonstration.

 * Mini-tutorial papers. SLE is composed of various research areas,
   such as grammarware, modelware, language schemas, and semantic
   technologies. The cross product of attendees at SLE creates a
   situation where the contribution from one session may be difficult
   to understand by those not initiated to the area. To help unite the
   various communitues of SLE 2009, mini-tutorials are solicited
   that provide discussion points for mapping common ideas between the
   area and differentiating among variations. A mini-tutorial submisson
   should be between 15 and 20 pages.

Submitted articles must not have been previously published or currently
be submitted for publication elsewhere. All submitted papers will be
closely reviewed by at least three members of the program committee. All
accepted papers will be made available at the conference in the
pre-proceedings and published in the post-proceedings of the conference,
which will appear in Springer's Lecture Notes in Computer Science series.
Authors will have the opportunity to revise their accepted paper for the
pre- and post-proceedings.

All papers must be formatted by following Springer's LNCS style and
must be submitted using EasyChair (open early June):

     http://www.easychair.org/conferences/?conf=sle09

Further details regarding submission can be found on the SLE web page:

     http://planet-sl.org/sle2009


Invited Speakers
----------------
James Cordy, Queens University, Canada
Jean Bezivin, University of Nantes, France


Important Dates
---------------
 * Initial abstract submission (required)              July  3, 2009
 * Paper submission:                                   July 10, 2009
 * Author notification:                                August 21, 2009
 * Paper submission for pre-proceedings:               September 14, 2009
 * Conference:                                         October 5-6, 2009
 * Camera-ready paper submission for post-proceedings: December 7, 2009
 * LNCS post-proceedings mailed to authors (approx.):  February 2010


Organization
------------

General Chair
 * Dragan Gasevic, Athabasca University, Canada

Program Committee Co-Chairs
 * Mark van den Brand, TU Eindhoven, The Netherlands
 * Jeff Gray, University of Alabama at Birmingham, USA

Program Committee
 * Colin Atkinson, Universit?t Mannheim, Germany
 * Don Batory, University of Texas at Austin, USA
 * Paulo Borba, Universidade Federal de Pernambuco, Brazil
 * John Boyland, University of Wisconsin, Milwaukee, USA
 * Marco Brambilla, Politecnico di Milano, Italy
 * Shigeru Chiba, Tokyo Institute of Technology, Japan
 * Charles Consel, LaBRI / INRIA, France
 * Gregor Engels, Universit?t Paderborn, Germany
 * Stephen A. Edwards, Columbia University, USA
 * Robert Fuhrer, IBM T.J. Watson Research, USA
 * Martin Gogolla, University of Bremen, Germany
 * Giancarlo Guizzardi, Federal University of Esp?rito Santo, Brazil
 * Reiko Heckel, University of Leicester, UK
 * Fr?d?ric Jouault, INRIA & Ecole des Mines de Nantes, France
 * Nicholas Kraft, University of Alabama, USA
 * Thomas K?hne, Victoria University of Wellington, New Zealand
 * Julia Lawall, University of Copenhagen, Denmark
 * Timothy Lethbridge, University Ottawa, Canada
 * Brian Malloy, Clemson University, USA
 * Kim Mens, Universit? catholique de Louvain, Belgium
 * Marjan Mernik, University of Maribor, Slovenia
 * Todd Millstein, University of California, Los Angeles, USA
 * Pierre-Etienne Moreau, INRIA Nancy - Grand Est, France
 * Pierre-Alain Muller, University of Haute-Alsace, France
 * Daniel Oberle, SAP Research, Germany
 * Richard Paige, University of York, UK
 * James Power, National University of Ireland, Ireland
 * Jo?o Saraiva, Universidade do Minho, Portugal
 * Mary Lou Soffa, University of Virginia, USA
 * Juha-Pekka Tolvanen, MetaCase, Finland
 * Alexander Serebrenik, Eindhoven University of Technology, Netherlands
 * Tony Sloane, Macquarie University, Australia
 * Steffen Staab, Universit?t Koblenz-Landau, Germany
 * Jun Suzuki, University of Massachusetts, Boston, USA
 * Walid Taha, Rice University, USA
 * Eli Tilevich, Virginia Tech, USA
 * Jurgen Vinju, CWI, Netherlands
 * Eelco Visser, Delft University of Technology, Netherlands
 * Ren? Witte, Concordia University, Canada

Organization Committee
 * Bardia Mohabbati, Simon Fraser University, Canada (Web Chair)
 * Alexander Serebrenik, TU Eindhoven, The Netherlands (Publicity co-Chair)
 * James Hill, Vanderbilt University, USA (Publicity co-Chair)

From brothers at bros.com  Wed Feb  4 15:18:34 2009
From: brothers at bros.com (Dennis Brothers)
Date: Wed, 4 Feb 2009 18:18:34 -0500
Subject: [antlr-interest] Debug issues
In-Reply-To: <498A11A9.6010409@gmx.de>
References: <A4713D18-0710-4F31-8728-99D2ADD1924E@bros.com>
	<498A11A9.6010409@gmx.de>
Message-ID: <809A56A5-6F6D-417A-B220-188B5444A43F@bros.com>


On Feb 4, 2009, at 5:07 PM, Johannes Luber wrote:

> Sam Harwell is already trying to untangle the problem with the
> constructors for the CSharp3 target. Hopefully I can port back this to
> CSharp2 without much difficulty, although it would be a good idea, if
> all targets would support this. You can use preprocessor directives in
> the meantime to ease the switch between debug and non-debug in the
> meanwhile.
>
> Johannes
>
Is there a "debug" pre-proc symbol defined in the generated code?  I  
didn't see one, but if there is I can conditionally compile a  
constructor in the @members section.

Thanks -
     - Dennis Brothers


From andy.grove at codefutures.com  Wed Feb  4 16:41:19 2009
From: andy.grove at codefutures.com (Andy Grove)
Date: Wed, 4 Feb 2009 17:41:19 -0700
Subject: [antlr-interest] C generator is not generating @after actions
Message-ID: <8309A93C-CEE0-40F3-9A38-9C8BB3315F3E@codefutures.com>

Hi,

Here's an extract from a grammar I am working with:

statement
@init { /* Empty */ }
@after 	{ sse.afterStatement(); }
:
/* rest omitted */

When I generate Java code from this grammar, I see both the @init and  
@after action code generated. However, when I generate C code I see  
the @init but not the @after code.

Is this feature not supported in the C target?

Thanks,

Andy.








From jimi at temporal-wave.com  Wed Feb  4 17:23:42 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 04 Feb 2009 17:23:42 -0800
Subject: [antlr-interest] C generator is not generating @after actions
In-Reply-To: <8309A93C-CEE0-40F3-9A38-9C8BB3315F3E@codefutures.com>
References: <8309A93C-CEE0-40F3-9A38-9C8BB3315F3E@codefutures.com>
Message-ID: <498A3F9E.9010402@temporal-wave.com>

Andy Grove wrote:
> Hi,
>
> Here's an extract from a grammar I am working with:
>
> statement
> @init { /* Empty */ }
> @after 	{ sse.afterStatement(); }
> :
> /* rest omitted */
>
> When I generate Java code from this grammar, I see both the @init and  
> @after action code generated. However, when I generate C code I see  
> the @init but not the @after code.
>
> Is this feature not supported in the C target?
>
> Thanks,
>
> Andy.
>   

@after is not supported in the C target. Use this:

statement
@declarations
@init { /* Empty */ }
	
: ( x | Y | x | g)
	
	{ 
		sse.afterStatement();
	}

;




From gunjgupta at gmail.com  Wed Feb  4 19:19:29 2009
From: gunjgupta at gmail.com (Chal Chale apne Ghar)
Date: Thu, 5 Feb 2009 08:49:29 +0530
Subject: [antlr-interest] Lexer/parser grammer for Antlrv2
In-Reply-To: <86403CA0939415448BCCB83855EFE09AA678B3@Bloodymary.ironwillgames.com>
References: <f205f60902040445xdf3b9doc7f3448240a6b186@mail.gmail.com>
	<86403CA0939415448BCCB83855EFE09AA678B3@Bloodymary.ironwillgames.com>
Message-ID: <f205f60902041919q6ec171fu83fc6a4a67e5bc6a@mail.gmail.com>

HI Sam,
Thanks for your Reply.

I have one antlr grammer file(not created by me) which i came to know from
this forum that follows 2.7.7. syntax.
when i am trying to generate java implementation of this existing grammer
file, it is failing saying this:
>         D:\Actuate\Samplelexer-parser\ConversionTool>java antlr.Tool
>         vb_org.txt
>         ANTLR Parser Generator   Version 2.7.5 (20050128)   1989-2005
>         jGuru.com
>         error: Token stream error reading grammar(s):
>         vb_org.txt:45:7: expecting ''', found 'p'
>         TokenStreamException: expecting ''', found 'p'

SO what i understood it , there is some problem with this Gramme file.. if i
am not wrong..
NOw how can i solve this issue?
As i am new to Antlr , i wanted to know like Antlrworks which works for
antr3 , is there any editor or some thing which i can use to create this
grammer file again or validate it for syntax error?

I hope now it woudl be clear what i am looking for..

ANy Help would be appreciated.
regards,
Gunjan

On Wed, Feb 4, 2009 at 10:16 PM, Sam Harwell <sharwell at pixelminegames.com>wrote:

>  Are you trying to write a grammar that is build by/targets ANTLR v2
> runtime, or are you trying to write a grammar that can parse ANTLR v2
> grammar files themselves?
>
>
>
> I haven't worked with ANTLR v2, but I believe the information you are
> looking for could be here:
>
> http://www.antlr2.org/
>
>
>
> Sam
>
>
>
> *From:* antlr-interest-bounces at antlr.org [mailto:
> antlr-interest-bounces at antlr.org] *On Behalf Of *Chal Chale apne Ghar
> *Sent:* Wednesday, February 04, 2009 6:46 AM
> *To:* antlr-interest at antlr.org
> *Subject:* [antlr-interest] Lexer/parser grammer for Antlrv2
>
>
>
> Hi  All,
>
>
>
> Is there any way to generate the Lexer/parser grammer for Antlr V2 ?
>
> If if we have to manually write the Grammer where can i find the
> specification for Lexer/parser grammer for Antlr V2?
>
> I currently have Antlr2.7.5 version.
>
> Any help would be appreciated.
>
> regards,
>
> Gunjan
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090205/abe16f30/attachment.html 

From carter_cheng at yahoo.com  Wed Feb  4 23:44:57 2009
From: carter_cheng at yahoo.com (Carter Cheng)
Date: Wed, 4 Feb 2009 23:44:57 -0800 (PST)
Subject: [antlr-interest] tree walking and semantic analysis
In-Reply-To: <4989AE6C.8040307@jazillian.com>
Message-ID: <413405.96821.qm@web50102.mail.re2.yahoo.com>


Thanks Andy. 

--- On Wed, 2/4/09, Andy Tripp <antlr at jazillian.com> wrote:

> From: Andy Tripp <antlr at jazillian.com>
> Subject: Re: [antlr-interest] tree walking and semantic analysis
> To: carter_cheng at yahoo.com
> Cc: antlr-interest at antlr.org
> Date: Wednesday, February 4, 2009, 7:04 AM
> Hi Carter,
> 
> Sounds like you should just walk the AST "by
> hand".
> I think the ANTLR treewalkers are geared more toward simple
> cases where you have
> just a few actions at various points in the AST.
> See
> http://www.antlr2.org/article/1170602723163/treewalkers.html
> for more info.
> 
> Andy
> 
> Carter Cheng wrote:
> > Hi Andy and the others,
> > 
> > Thanks for the reply. I am currently reworking my tree
> code and doing it somewhat manually because I was having
> some difficulties with working with the C runtime in C++
> mode. The difficulty I was having was something along these
> lines- 
> > program[int pass] : (declarations[pass])*
> > ; 
> > declarations[int pass]
> > : /* some CFG rule case */ { switch(pass) { /* do
> something depending on the pass */ } }
> > ;
> > 
> > This obviously seems like quite a mess. Especially
> when in different passes you need to percolate different
> types of data up the tree and left to right depending on the
> pass. 
> > A possible alternative is to using some sort of
> visitor or function object which behaves differently on each
> pass. However I am not quite sure how to get this to work
> properly. The issue primarily is with the return value types
> in my language I have certain expression constants which
> need to be checked and if possible reduced to their actual
> values in certain descents of the grammar and in other cases
> return the whole expression tree- 
> > declaration[Functor f] returns [??? retval ]
> > : /* some CFG rule case */ { $retval = f(e); }
> > ;
> > 
> > The return type can be quite different depending on
> the functor in question making it somewhat difficult to
> determine what the type of retval should be. 
> > This is getting a bit long I suspect with the error
> situation with multiple errors the only thing that can be
> done is return something... pass in some sort of functor or
> I/O stream which can be used to dump data back to the user
> etc.
> > 
> > I hope that sort of makes sense.
> > 
> > Regards,
> > 
> > Carter.
> > 
> > 
> >       
> > List:
> http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >


      

From JALuber at gmx.de  Thu Feb  5 00:12:17 2009
From: JALuber at gmx.de (Johannes Luber)
Date: Thu, 05 Feb 2009 09:12:17 +0100
Subject: [antlr-interest] Debug issues
In-Reply-To: <809A56A5-6F6D-417A-B220-188B5444A43F@bros.com>
References: <A4713D18-0710-4F31-8728-99D2ADD1924E@bros.com>
	<498A11A9.6010409@gmx.de>
	<809A56A5-6F6D-417A-B220-188B5444A43F@bros.com>
Message-ID: <20090205081217.300400@gmx.net>

> On Feb 4, 2009, at 5:07 PM, Johannes Luber wrote:
> 
> > Sam Harwell is already trying to untangle the problem with the
> > constructors for the CSharp3 target. Hopefully I can port back this to
> > CSharp2 without much difficulty, although it would be a good idea, if
> > all targets would support this. You can use preprocessor directives in
> > the meantime to ease the switch between debug and non-debug in the
> > meanwhile.
> >
> > Johannes
> >
> Is there a "debug" pre-proc symbol defined in the generated code?  I  
> didn't see one, but if there is I can conditionally compile a  
> constructor in the @members section.
> 
> Thanks -
>      - Dennis Brothers

There isn't one available yet, though one can be certainly introduced. Should it be a separate DEBUG symbol like ANTLR_DEBUG? Using DEBUG would probably collide with using the -debug option.

Johannes
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address

-- 
Jetzt 1 Monat kostenlos! GMX FreeDSL - Telefonanschluss + DSL 
f?r nur 17,95 Euro/mtl.!* http://dsl.gmx.de/?ac=OM.AD.PD003K11308T4569a

From antlr at mirality.co.nz  Thu Feb  5 01:53:23 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 05 Feb 2009 22:53:23 +1300
Subject: [antlr-interest] C generator is not generating @after  actions
In-Reply-To: <498A3F9E.9010402@temporal-wave.com>
References: <8309A93C-CEE0-40F3-9A38-9C8BB3315F3E@codefutures.com>
	<498A3F9E.9010402@temporal-wave.com>
Message-ID: <20090205095345.E621834183AB@www.antlr.org>

At 14:23 5/02/2009, Jim Idle wrote:
 >@after is not supported in the C target. Use this:
 >
 >statement
 >@init { /* Empty */ }
 >: ( x | Y | x | g)
 >	{
 >		sse.afterStatement();
 >	}
 >;

Isn't that semantically different?  I thought the point of @after 
is that it's like "finally" code -- it gets executed regardless of 
success/failure/explosions.  Whereas an inline block at the end of 
the rule would only get executed on a successful match.

(Although parser rules should usually not fail anyway, so it may 
be a moot point.)


From chris at lambrou.net  Thu Feb  5 02:27:03 2009
From: chris at lambrou.net (Chris Lambrou)
Date: Thu, 5 Feb 2009 10:27:03 +0000
Subject: [antlr-interest] Why (or why not) reuse parsers and lexers?
Message-ID: <70bbae280902050227j37e0d22ndea882c767cf1d3b@mail.gmail.com>

Hi all,

Is there any reason why I should consider recycling lexers and parsers in
preference to creating new instances on demand?

For example, should I consider doing this:

    existingLexer.Reser();
    existingLexer.CharStream = charStream;

instead of this:

    new MyGrammarLexer(charStream);


And should I do this:

    existingParser.Reset();
    existingParser.TokenStream = tokenStream

instead of this:

    new MyGrammarParser(tokenStream)


Are parsers and lexers especially heavyweight at all?  If the answer depends
on the context, then I should point out that I'm using the C# runtime, and
parsing many different input strings.


Thanks,

Chris
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090205/5e34c8a0/attachment.html 

From paul.bouche at nsn.com  Thu Feb  5 04:36:46 2009
From: paul.bouche at nsn.com (=?ISO-8859-1?Q?=22Paul_Bouch=E9_=28NSN=29=22?=)
Date: Thu, 05 Feb 2009 13:36:46 +0100
Subject: [antlr-interest]  Why (or why not) reuse parsers and lexers?
In-Reply-To: <70bbae280902050227j37e0d22ndea882c767cf1d3b@mail.gmail.com>
References: <70bbae280902050227j37e0d22ndea882c767cf1d3b@mail.gmail.com>
Message-ID: <498ADD5E.7090706@nsn.com>

Hi,

I also thought about doing this. I guess it really depends on the 
Parser, if it has state associated it needs to be resetted. Since a 
grammer can contain arbitrary member definitions of a parser it also 
really depends on the grammar at hand.

But I guess you are wondering about the internal state that a parser 
always has, i.e. in Java the BaseRecognizer class. I am not sure about 
that, but I am also interested in a definitive answer. Yet my 
performance tests have shown that creating these objects a new is not 
expensive not regarding the generated GC load though. If an application 
is already at a tight memory state one wants to avoid creating new 
objects as far as possible.

Best,
Paul

Chris Lambrou schrieb:
> Hi all,
>
> Is there any reason why I should consider recycling lexers and parsers 
> in preference to creating new instances on demand?
>
> For example, should I consider doing this:
>
>     existingLexer.Reser();
>     existingLexer.CharStream = charStream;
>
> instead of this:
>
>     new MyGrammarLexer(charStream);
>
>
> And should I do this:
>
>     existingParser.Reset();
>     existingParser.TokenStream = tokenStream
>
> instead of this:
>
>     new MyGrammarParser(tokenStream)
>
>
> Are parsers and lexers especially heavyweight at all?  If the answer 
> depends on the context, then I should point out that I'm using the C# 
> runtime, and parsing many different input strings.
>
>
> Thanks,
>
> Chris
>
>
> ------------------------------------------------------------------------
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>   


-- 
Paul Bouch?
Voice: +49 30 590080-1284
 
Nokia Siemens Networks GmbH & Co. KG, An den Treptowers 1, 12435 Berlin, Germany
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRA 88537
WEEE-Reg.-Nr.: DE 52984304

Pers?nlich haftende Gesellschafterin / General Partner: Nokia Siemens Networks Management GmbH
Gesch?ftsleitung / Board of Directors: Lydia Sommer, Olaf Horsthemke
Vorsitzender des Aufsichtsrats / Chairman of supervisory board: Lauri Kivinen
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRB 163416

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090205/f1d34592/attachment.html 

From brothers at bros.com  Thu Feb  5 04:43:13 2009
From: brothers at bros.com (Dennis Brothers)
Date: Thu, 5 Feb 2009 07:43:13 -0500
Subject: [antlr-interest] Debug issues
In-Reply-To: <20090205081217.300400@gmx.net>
References: <A4713D18-0710-4F31-8728-99D2ADD1924E@bros.com>
	<498A11A9.6010409@gmx.de>
	<809A56A5-6F6D-417A-B220-188B5444A43F@bros.com>
	<20090205081217.300400@gmx.net>
Message-ID: <C5107EFF-5309-46A5-99BF-39D9EE569349@bros.com>

Yes, it should certainly be something other than the simple "DEBUG"  
that Visual Studio uses.  "ANTLR_DEBUG" is good.

     - Dennis Brothers

On Feb 5, 2009, at 3:12 AM, Johannes Luber wrote:

>> On Feb 4, 2009, at 5:07 PM, Johannes Luber wrote:
>>
>>> Sam Harwell is already trying to untangle the problem with the
>>> constructors for the CSharp3 target. Hopefully I can port back  
>>> this to
>>> CSharp2 without much difficulty, although it would be a good idea,  
>>> if
>>> all targets would support this. You can use preprocessor  
>>> directives in
>>> the meantime to ease the switch between debug and non-debug in the
>>> meanwhile.
>>>
>>> Johannes
>>>
>> Is there a "debug" pre-proc symbol defined in the generated code?  I
>> didn't see one, but if there is I can conditionally compile a
>> constructor in the @members section.
>>
>> Thanks -
>>     - Dennis Brothers
>
> There isn't one available yet, though one can be certainly  
> introduced. Should it be a separate DEBUG symbol like ANTLR_DEBUG?  
> Using DEBUG would probably collide with using the -debug option.
>
> Johannes
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email- 
>> address
>
> -- 
> Jetzt 1 Monat kostenlos! GMX FreeDSL - Telefonanschluss + DSL
> f?r nur 17,95 Euro/mtl.!* http://dsl.gmx.de/? 
> ac=OM.AD.PD003K11308T4569a
>


From paul.bouche at nsn.com  Thu Feb  5 05:31:39 2009
From: paul.bouche at nsn.com (=?ISO-8859-15?Q?=22Paul_Bouch=E9_=28NSN=29=22?=)
Date: Thu, 05 Feb 2009 14:31:39 +0100
Subject: [antlr-interest] Generate Language examples from ANTLR Grammar
Message-ID: <498AEA3B.7080801@nsn.com>

Hi,

I am wondering if it is already possible to generate language examples 
from a given ANTLR grammar. I.e. in language theory we say that for a 
given grammar /G/ the language that it defines is denoted by L(/G/).

An example for the very simple grammar /simpleLetters/
start : '"' LetterSequence '"';
LetterSequence : LETTER*;
LETTER : 'a'|'b'|'c';

the language it defines would be
L(/simpleLetters/) = { "", "a", "b", "c", "ab", "ac", "aa", "aaa", 
"aab", "aac", "aba", "abb", "abc", ... }

I of course could try all strings of all combinations of unicode chars 
of length /n/, but maybe there is a better way?

Best,
Paul

-- 
Paul Bouch?
Voice: +49 30 590080-1284
 
Nokia Siemens Networks GmbH & Co. KG, An den Treptowers 1, 12435 Berlin, Germany
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRA 88537
WEEE-Reg.-Nr.: DE 52984304

Pers?nlich haftende Gesellschafterin / General Partner: Nokia Siemens Networks Management GmbH
Gesch?ftsleitung / Board of Directors: Lydia Sommer, Olaf Horsthemke
Vorsitzender des Aufsichtsrats / Chairman of supervisory board: Lauri Kivinen
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRB 163416

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090205/1b9ded4c/attachment.html 

From paul.bouche at nsn.com  Thu Feb  5 05:34:04 2009
From: paul.bouche at nsn.com (=?ISO-8859-15?Q?=22Paul_Bouch=E9_=28NSN=29=22?=)
Date: Thu, 05 Feb 2009 14:34:04 +0100
Subject: [antlr-interest] Generate a grammar rule without actions,
	assignments etc.
Message-ID: <498AEACC.2060309@nsn.com>

Hi,

is there already a tool or "hidden function" with ANTLRWorks to generate 
a "clean" grammar from a given ANTLR grammar, i.e. one which basically 
only contains the parsre and lexer rules.
I would like to use that for documentation purposes.

Best,
Paul

-- 
Paul Bouch?
Voice: +49 30 590080-1284
 
Nokia Siemens Networks GmbH & Co. KG, An den Treptowers 1, 12435 Berlin, Germany
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRA 88537
WEEE-Reg.-Nr.: DE 52984304

Pers?nlich haftende Gesellschafterin / General Partner: Nokia Siemens Networks Management GmbH
Gesch?ftsleitung / Board of Directors: Lydia Sommer, Olaf Horsthemke
Vorsitzender des Aufsichtsrats / Chairman of supervisory board: Lauri Kivinen
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRB 163416


From spriolo at walkerinfo.com  Thu Feb  5 05:47:35 2009
From: spriolo at walkerinfo.com (Priolo, Scott)
Date: Thu, 5 Feb 2009 08:47:35 -0500
Subject: [antlr-interest] Generate a grammar rule without actions,
	assignments etc.
In-Reply-To: <498AEACC.2060309@nsn.com>
References: <498AEACC.2060309@nsn.com>
Message-ID: <A94D52854588164583AA892FECB259950745ED06@wimail.wi>

You could write a grammar that does this work for you.  (sort of a grammar that documents grammars).  Sounds like a great project.

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of "Paul Bouch? (NSN)"
Sent: Thursday, February 05, 2009 8:34 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Generate a grammar rule without actions,assignments etc.

Hi,

is there already a tool or "hidden function" with ANTLRWorks to generate 
a "clean" grammar from a given ANTLR grammar, i.e. one which basically 
only contains the parsre and lexer rules.
I would like to use that for documentation purposes.

Best,
Paul

-- 
Paul Bouch?
Voice: +49 30 590080-1284
 
Nokia Siemens Networks GmbH & Co. KG, An den Treptowers 1, 12435 Berlin, Germany
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRA 88537
WEEE-Reg.-Nr.: DE 52984304

Pers?nlich haftende Gesellschafterin / General Partner: Nokia Siemens Networks Management GmbH
Gesch?ftsleitung / Board of Directors: Lydia Sommer, Olaf Horsthemke
Vorsitzender des Aufsichtsrats / Chairman of supervisory board: Lauri Kivinen
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRB 163416


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From paul.bouche at nsn.com  Thu Feb  5 05:59:18 2009
From: paul.bouche at nsn.com (=?ISO-8859-1?Q?=22Paul_Bouch=E9_=28NSN=29=22?=)
Date: Thu, 05 Feb 2009 14:59:18 +0100
Subject: [antlr-interest]  [solved] Generate a grammar rule without actions,
 assignments etc.
In-Reply-To: <A94D52854588164583AA892FECB259950745ED06@wimail.wi>
References: <498AEACC.2060309@nsn.com>
	<A94D52854588164583AA892FECB259950745ED06@wimail.wi>
Message-ID: <498AF0B6.2080302@nsn.com>

I thought about that already, actually that would be a string template 
or rewriter project, I could use the existent antlr grammar parser for 
that, the AntlrTool has a switch -print which I tried with 2.7.7 and it 
did not what I wanted. But actually in 3.0 it works =)

So simply one uses
org.antlr.Tool -print <path to grammar file>

Priolo, Scott schrieb:
> You could write a grammar that does this work for you.  (sort of a grammar that documents grammars).  Sounds like a great project.
>
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of "Paul Bouch? (NSN)"
> Sent: Thursday, February 05, 2009 8:34 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Generate a grammar rule without actions,assignments etc.
>
> Hi,
>
> is there already a tool or "hidden function" with ANTLRWorks to generate 
> a "clean" grammar from a given ANTLR grammar, i.e. one which basically 
> only contains the parsre and lexer rules.
> I would like to use that for documentation purposes.
>
> Best,
> Paul
>
>   


-- 
Paul Bouch?
Voice: +49 30 590080-1284
 
Nokia Siemens Networks GmbH & Co. KG, An den Treptowers 1, 12435 Berlin, Germany
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRA 88537
WEEE-Reg.-Nr.: DE 52984304

Pers?nlich haftende Gesellschafterin / General Partner: Nokia Siemens Networks Management GmbH
Gesch?ftsleitung / Board of Directors: Lydia Sommer, Olaf Horsthemke
Vorsitzender des Aufsichtsrats / Chairman of supervisory board: Lauri Kivinen
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRB 163416


From jimi at temporal-wave.com  Thu Feb  5 08:31:46 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 05 Feb 2009 08:31:46 -0800
Subject: [antlr-interest] C generator is not generating @after  actions
In-Reply-To: <20090205094622.85852120F835@msf1.dnsmadeeasy.com>
References: <8309A93C-CEE0-40F3-9A38-9C8BB3315F3E@codefutures.com>
	<498A3F9E.9010402@temporal-wave.com>
	<20090205094622.85852120F835@msf1.dnsmadeeasy.com>
Message-ID: <498B1472.2020006@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090205/4dd39f1b/attachment.html 

From robert.soule at gmail.com  Thu Feb  5 11:19:44 2009
From: robert.soule at gmail.com (Robert Soule)
Date: Thu, 5 Feb 2009 14:19:44 -0500
Subject: [antlr-interest] custom AST with re-write rules in C runtime
Message-ID: <d1316fd70902051119m589ac4a6u3b164e1475e27339@mail.gmail.com>

Hi,

I'd like to use my own custom AST instead of the pANTLR_BASE_TREE
provided in the C runtime. What I was wondering is if I can use antlr's re-write
rules ( -> ^(...) ) to generate the tree with my own node implementation? If
so, can you provide any guidance on how to do that?

I've been looking at antlr3basetree.h. Is the idea that we use this
base tree, but
set the "u" pointer to our own data structures?

thank you,
Robert

From jimi at temporal-wave.com  Thu Feb  5 12:26:30 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 05 Feb 2009 12:26:30 -0800
Subject: [antlr-interest] custom AST with re-write rules in C runtime
In-Reply-To: <d1316fd70902051119m589ac4a6u3b164e1475e27339@mail.gmail.com>
References: <d1316fd70902051119m589ac4a6u3b164e1475e27339@mail.gmail.com>
Message-ID: <498B4B76.9010508@temporal-wave.com>

Robert Soule wrote:
> Hi,
>
> I'd like to use my own custom AST instead of the pANTLR_BASE_TREE
> provided in the C runtime. What I was wondering is if I can use antlr's re-write
> rules ( -> ^(...) ) to generate the tree with my own node implementation? If
> so, can you provide any guidance on how to do that?
>
> I've been looking at antlr3basetree.h. Is the idea that we use this
> base tree, but
> set the "u" pointer to our own data structures?
>   
That's by far the easiest way, which is why I did that. Mostly, that's 
all people need. However, you can also write your own tree adaptor that 
just passes around (void *). Not a task for the inexperienced C 
programmer though. But if you copy the adaptor code and fill in your own 
functions, that will work. Much easier to just add your nodes to the u 
pointer though and let the current stuff do all the work :-)

Jim



From leicheimteich at googlemail.com  Thu Feb  5 13:09:04 2009
From: leicheimteich at googlemail.com (leiche im teich)
Date: Thu, 5 Feb 2009 22:09:04 +0100
Subject: [antlr-interest] Grammar definition problem
Message-ID: <61bdfdda0902051309k583425f8j14ffac220a9df66a@mail.gmail.com>

Hello,

I'm a ANTLR newbie and have a problem to define the right grammar for the
following input.
- one input line is one record
- the structure is: <fieldname> <one colon followed by one or more spaces as
delimiter> <fieldvalue> <newline>*
- the fieldnames are known

My problem is, than the fieldvalue can have colon or space characters too.

This is my grammar:

grammar Foo;

options {
    output=AST;
    ASTLabelType=CommonTree;
}

entry    : fieldname FIELDSEPERATOR  fieldvalue '\n'*
    ;

fieldvalue    : ID
    ;

fieldname: NAME
    |GIVENNAME
    |STREET
    |ZIP
    |CITY
    |COUNTRY
    |TEXT
    ;

NAME            : 'Name';
GIVENNAME         : 'Givenname';
STREET         : 'Street';
ZIP            : 'Zip';
CITY            : 'City';
COUNTRY        : 'Country';
TEXT            : 'Text';

FIELDSEPERATOR    : ':' ' '+
    ;

ID    : AllowedChars+
    ;

fragment
AllowedChars    : 'A'..'Z'
    | 'a'..'z'
    | '0'..'9'
    | '+'
    | '-'
    | ' '
//    | ':'
    | '#'
    | '.'
    ;


If i try the input "Text:      Free Text with # sign" it works. But if i do
not comment the ':' in the AllowedChars and try the input "Text:      Free
Text with : sign" it goes wrong :-(

How can i solve this problem????

Thank's


Matthias
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090205/7b0e8032/attachment.html 

From jaluber at gmx.de  Thu Feb  5 13:56:47 2009
From: jaluber at gmx.de (Johannes Luber)
Date: Thu, 05 Feb 2009 22:56:47 +0100
Subject: [antlr-interest] Grammar definition problem
In-Reply-To: <61bdfdda0902051309k583425f8j14ffac220a9df66a@mail.gmail.com>
References: <61bdfdda0902051309k583425f8j14ffac220a9df66a@mail.gmail.com>
Message-ID: <498B609F.2050000@gmx.de>

leiche im teich schrieb:
> Hello,
> 
> I'm a ANTLR newbie and have a problem to define the right grammar for
> the following input.
> - one input line is one record
> - the structure is: <fieldname> <one colon followed by one or more
> spaces as delimiter> <fieldvalue> <newline>*
> - the fieldnames are known
> 
> My problem is, than the fieldvalue can have colon or space characters too.
> 
> This is my grammar:
> 
> grammar Foo;
> 
> options {
>     output=AST;
>     ASTLabelType=CommonTree;
> }
> 
> entry    : fieldname FIELDSEPERATOR  fieldvalue '\n'*
>     ;
> 
> fieldvalue    : ID
>     ;
> 
> fieldname: NAME
>     |GIVENNAME
>     |STREET
>     |ZIP
>     |CITY
>     |COUNTRY
>     |TEXT
>     ;
> 
> NAME            : 'Name';
> GIVENNAME         : 'Givenname';
> STREET         : 'Street';
> ZIP            : 'Zip';
> CITY            : 'City';
> COUNTRY        : 'Country';
> TEXT            : 'Text';
> 
> FIELDSEPERATOR    : ':' ' '+
>     ;
> 
> ID    : AllowedChars+
>     ;
> 
> fragment
> AllowedChars    : 'A'..'Z'
>     | 'a'..'z'
>     | '0'..'9'
>     | '+'
>     | '-'
>     | ' '
> //    | ':'
>     | '#'
>     | '.'
>     ;
> 
> 
> If i try the input "Text:      Free Text with # sign" it works. But if i
> do not comment the ':' in the AllowedChars and try the input "Text:     
> Free Text with : sign" it goes wrong :-(
> 
> How can i solve this problem????
> 
> Thank's

Make the colon its fragment rule and call it from ID and FIELDSEPARATOR.
A further improvement would be a rule

WS : ' '+ {skip();};

to remove all WS handling from the parser (modify the FIELDSEPARATOR
rule at your leisure as the spaces would be correctly recognized here,
but doing so will make the rule cleaner).

Johannes
> 
> 
> Matthias
> 
> 
> ------------------------------------------------------------------------
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From antlr at mirality.co.nz  Thu Feb  5 14:58:15 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 06 Feb 2009 11:58:15 +1300
Subject: [antlr-interest] C generator is not generating @after actions
In-Reply-To: <498B1472.2020006@temporal-wave.com>
References: <8309A93C-CEE0-40F3-9A38-9C8BB3315F3E@codefutures.com>
	<498A3F9E.9010402@temporal-wave.com>
	<20090205094622.85852120F835@msf1.dnsmadeeasy.com>
	<498B1472.2020006@temporal-wave.com>
Message-ID: <20090205225838.1D62D34184B8@www.antlr.org>

At 05:31 6/02/2009, Jim Idle wrote:
>You are correct that it isn't exactly semantically equivalent, 
>but I have never seen a case where people wanted to do anything 
>different. The exception clause would generally be more useful. 
>In a realt @after clause, you would have to make sure you checked 
>any references for NULL before trying to do anything anyway. So, 
>at least for the more usual case, it makes more sense to have the 
>action that you want to happen at the rule end, when it is 
>successful, in an action at the end. Then, if there is something 
>special you need to do upon failure, you want an exception clause 
>like the Java target. I think most people are reading @after and 
>just see "when this rule finishes successfully".

I think the theory is that if the @init does something that needs 
cleaning up after -- such as allocating memory or opening a file 
-- then the @after does the cleanup.  In practice for C# / Java 
targets it's not critical, as the GC will eventually get around to 
tidying things up anyway (though not useless, if the rule is 
re-entered faster than the GC can tidy up), but for C it'd be more 
useful.

Having said that, there's always another way to write the code to 
avoid that kind of dependency anyway, so in practice I've never 
needed to do it that way.

>I still plan on working through all the possible combinations 
>before 3.1.2 is released. The difficulty is not adding an @after 
>section of course, but that using a static template, can I make 
>sure that all possible code paths, given all possible rule 
>element combinations, including backtracking, @after, exceptions 
>and so on, thread their way correctly through the generated C 
>code and are semantically equivalent to the Java code. The answer 
>may well be yes, but I want consider performance and complexity, 
>as if there is a semantically equivalent way of expressing this 
>in the grammar, then it might make more sense to just instruct 
>people in the documentation.

I can't see how you could ever make the C target tolerate 
exceptions being thrown mid-rule without turning it into a partial 
C++ target :)

Besides, nobody ever reads documentation anyway ;)

>So, in the C target I have removed pretty much all the NULL 
>guards as it is better to get a violation than mask 
>grammar/coding errors. In the case of the return from a rule, the 
>return is in fact a struct, which is declared as such in the 
>calling rule. The struct in the calling rule will therefore never 
>be NULL, and memsetting it to 0 does not solve that issue, though 
>it could have a special field that says if it has been used yet 
>and so on.

Memsetting it to 0 will clear the contents of the struct, though, 
thereby ensuring that any embedded pointers etc will actually be 
NULL and will fail quickly instead of being some random address 
that happened to be on the heap (or worse, a valid address put 
into a previous instance of the same structure that's being 
reused), which will fail subtly rather than obviously and be just 
as hard to track down.

I can understand your reasoning, though; once the grammar *is* 
doing the right things then the memsets are just wasting 
time.  But during initial development and debugging they're 
invaluable to prevent subtle bugs, as you yourself basically 
admitted in the paragraph prior to the one I quoted.

Maybe grammars should have an additional option, telling ANTLR 
whether to aim for robustness (thereby including extra sanity 
checks, such as the memsets) or for performance (leaving them out, 
once the author is happy that their grammar works properly, if 
slowly).  The default should be for robustness, so that newly 
developed grammars get sanity checked.  In fact, rather than 
memsetting to 0, you could take a page from VC++ and memset to 
0xCD when in robust mode (and do nothing in performance mode), 
thereby basically guaranteeing a crash in robust mode if someone 
tries to use something without initialising it first, since NULL 
checks wouldn't work.

(A grammar compiled with -debug should probably also use robust 
mode regardless of the option, but there should still be the 
separate option for non -debug compiles, since not everyone uses 
-debug at all.)


From tu219717 at gmail.com  Thu Feb  5 15:07:20 2009
From: tu219717 at gmail.com (=?ISO-8859-2?Q?Tomasz_Uli=F1ski?=)
Date: Fri, 6 Feb 2009 00:07:20 +0100
Subject: [antlr-interest] Grammar reuse without dynamic binding
Message-ID: <e91b9f350902051507s5aacab47kb5f821002563b2c7@mail.gmail.com>

Hi,

I would like to reuse a grammar in this kind of way:
I have Pascal grammar 'pas.g' and I need to create Estelle grammar 'est.g'.
Some rules from Pascal must be extended in Estelle.

For example:
'pas.g'
assignment_statement:
     (variable_access | function_identifier) ":=" expression;


'est.g'
assignment_statement:
     pas.assignment_statement
   | module_variable ":=" module_variable;

I would like that alternative pas.assignment_statement in 'est.g'
assignment_statement rule expand to rules from 'pas.g', even though we
call rule in 'est.g' grammar and some of rules (variable_access |
function_identifier) ":=" expression are also redefined in 'est.g'.
I would like to get effect of namespace rather than inheritance.
Is there better solution than unique renaming all nonterminals in 'pas.g'?

Sorry for my poor English.
Best Regards!
Tomasz Ulinski

From parrt at cs.usfca.edu  Thu Feb  5 15:26:32 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 5 Feb 2009 15:26:32 -0800
Subject: [antlr-interest] [solved] Generate a grammar rule without
	actions, assignments etc.
In-Reply-To: <498AF0B6.2080302@nsn.com>
References: <498AEACC.2060309@nsn.com>
	<A94D52854588164583AA892FECB259950745ED06@wimail.wi>
	<498AF0B6.2080302@nsn.com>
Message-ID: <F78FF4D3-D5F9-45B8-8C35-23BDC3D8DDA6@cs.usfca.edu>

We'll have a better version soon.
Ter
On Feb 5, 2009, at 5:59 AM, Paul Bouch? (NSN) wrote:

> I thought about that already, actually that would be a string template
> or rewriter project, I could use the existent antlr grammar parser for
> that, the AntlrTool has a switch -print which I tried with 2.7.7 and  
> it
> did not what I wanted. But actually in 3.0 it works =)
>
> So simply one uses
> org.antlr.Tool -print <path to grammar file>
>
> Priolo, Scott schrieb:
>> You could write a grammar that does this work for you.  (sort of a  
>> grammar that documents grammars).  Sounds like a great project.
>>
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org 
>> ] On Behalf Of "Paul Bouch? (NSN)"
>> Sent: Thursday, February 05, 2009 8:34 AM
>> To: antlr-interest at antlr.org
>> Subject: [antlr-interest] Generate a grammar rule without  
>> actions,assignments etc.
>>
>> Hi,
>>
>> is there already a tool or "hidden function" with ANTLRWorks to  
>> generate
>> a "clean" grammar from a given ANTLR grammar, i.e. one which  
>> basically
>> only contains the parsre and lexer rules.
>> I would like to use that for documentation purposes.
>>
>> Best,
>> Paul
>>
>>
>
>
> -- 
> Paul Bouch?
> Voice: +49 30 590080-1284
>
> Nokia Siemens Networks GmbH & Co. KG, An den Treptowers 1, 12435  
> Berlin, Germany
> Sitz der Gesellschaft: M?nchen / Registered office: Munich
> Registergericht: M?nchen / Commercial registry: Munich, HRA 88537
> WEEE-Reg.-Nr.: DE 52984304
>
> Pers?nlich haftende Gesellschafterin / General Partner: Nokia  
> Siemens Networks Management GmbH
> Gesch?ftsleitung / Board of Directors: Lydia Sommer, Olaf Horsthemke
> Vorsitzender des Aufsichtsrats / Chairman of supervisory board:  
> Lauri Kivinen
> Sitz der Gesellschaft: M?nchen / Registered office: Munich
> Registergericht: M?nchen / Commercial registry: Munich, HRB 163416
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From jimi at temporal-wave.com  Thu Feb  5 15:43:47 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 05 Feb 2009 15:43:47 -0800
Subject: [antlr-interest] C generator is not generating @after actions
In-Reply-To: <20090205225111.C7540120F973@msf1.dnsmadeeasy.com>
References: <8309A93C-CEE0-40F3-9A38-9C8BB3315F3E@codefutures.com>
	<498A3F9E.9010402@temporal-wave.com>
	<20090205094622.85852120F835@msf1.dnsmadeeasy.com>
	<498B1472.2020006@temporal-wave.com>
	<20090205225111.C7540120F973@msf1.dnsmadeeasy.com>
Message-ID: <498B79B3.5090406@temporal-wave.com>

Gavin Lambert wrote:
> At 05:31 6/02/2009, Jim Idle wrote:
>
>
> (A grammar compiled with -debug should probably also use robust mode 
> regardless of the option, but there should still be the separate 
> option for non -debug compiles, since not everyone uses -debug at all.)
>
Yes, I think that that is a sensible option, however with the C target 
that implies that you need to link with the socket library and it isn't 
available everywhere. Maybe a good thing would be to have a -mode=xxxxx 
option and the xxx options would be just passed into the string 
templates for the target. Then the target code generation templates 
could all support target specific things, even if there were some things 
that made sense to all targets. or perhaps expand -debug to optionally 
allow -debug=xxxx, yyyy

That said, perhaps the fact that @sections are passed on might mean this 
could be done already, but that means modifying the grammar and using 
#define or similar, which means expanding the number of source code lines.

Anyway, food for thought.

Jim

From chainone at gmail.com  Thu Feb  5 18:15:12 2009
From: chainone at gmail.com (chain one)
Date: Fri, 6 Feb 2009 10:15:12 +0800
Subject: [antlr-interest] How to optimize this piece of C/C++ code
Message-ID: <5a92ffb60902051815t29524254u80ac07f33b8c5e2e@mail.gmail.com>

void NUEDataManager::ParseOneEntry(const char* entry_start)
{
    p_semi = strchr(entry_start,';');
    assert(p_semi);


    m_input  =
antlr3NewAsciiStringInPlaceStream((pANTLR3_UINT8)entry_start,p_semi-entry_start+1,NULL);
    m_lex    = StepDataEntryLexerNew(m_input);
    m_tokens = antlr3CommonTokenStreamSourceNew(ANTLR3_SIZE_HINT,
TOKENSOURCE(m_lex));
    m_parser = StepDataEntryParserNew(m_tokens);

    m_parser  ->entry(m_parser,id);

    m_parser->free(m_parser);
    m_tokens->free(m_tokens);
    m_lex->free(m_lex);
    m_input->close(m_input);
}


the ParseOneEntry function will be called more than 1000000 times in most
cases.
So I am wondering if it is feasible to get this piece of code improved
further?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090206/619169ef/attachment.html 

From spprtmail09 at yahoo.com  Thu Feb  5 21:19:10 2009
From: spprtmail09 at yahoo.com (Meena Vinod)
Date: Thu, 5 Feb 2009 21:19:10 -0800 (PST)
Subject: [antlr-interest] (no subject)
Message-ID: <501702.60630.qm@web112209.mail.gq1.yahoo.com>

Hi,
?? I have a .g file.If i give invalid values as input,most of them report the error:"cannot match to predicted input" .Is there any way by which i can generate different errors.I inserted a new exception macro in antlr3exception.h file but since my rule is for eg:
?? new_cmd: new_verb (new_options)* (target_Instance)*? ..here the valid input would be "cd -k ./dir" (or) cd (or) cd -k (or) cd ./dir
(note :-?? new_verb:cd,? new_options=-k,? target_Instance=./dir? )
?but if i give cd -g which is invalid and i try to catch the new error in the new_options rule in parser.c file it doesnt catch the error as it is optional and goes to the next rule which is target_Instance.How do i catch the error in the second rule only even though its optional.Pls help
?
Thanks


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090205/5f10c079/attachment.html 

From spprtmail09 at yahoo.com  Thu Feb  5 21:23:21 2009
From: spprtmail09 at yahoo.com (Meena Vinod)
Date: Thu, 5 Feb 2009 21:23:21 -0800 (PST)
Subject: [antlr-interest] to create new ANTLR EXCEPTIONS
Message-ID: <204651.21823.qm@web112208.mail.gq1.yahoo.com>

Hi,
?? I have a .g file.If i give invalid values as input,most of them report the error:"cannot match to predicted input" .Is there any way by which i can generate different errors.I inserted a new exception macro in antlr3exception.h file but since my rule is for eg:
?? new_cmd: new_verb (new_options)* (target_Instance)*? ..here the valid input would be "cd -k ./dir" (or) cd (or) cd -k (or) cd ./dir
(note :-?? new_verb:cd,? new_options=-k,? target_Instance=./dir? )
?but if i give cd -g which is invalid and i try to catch the new error in the new_options rule in parser.c file it doesnt catch the error as it is optional and goes to the next rule which is target_Instance.How do i catch the error in the second rule only even though its optional.Pls help
?
Thanks


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090205/012ea567/attachment.html 

From jimi at temporal-wave.com  Thu Feb  5 22:28:19 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 05 Feb 2009 22:28:19 -0800
Subject: [antlr-interest] (no subject)
In-Reply-To: <501702.60630.qm@web112209.mail.gq1.yahoo.com>
References: <501702.60630.qm@web112209.mail.gq1.yahoo.com>
Message-ID: <498BD883.5020804@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090205/2ddc0bde/attachment.html 

From antlr at mirality.co.nz  Thu Feb  5 23:28:37 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 06 Feb 2009 20:28:37 +1300
Subject: [antlr-interest] C generator is not generating @after  actions
In-Reply-To: <498B79B3.5090406@temporal-wave.com>
References: <8309A93C-CEE0-40F3-9A38-9C8BB3315F3E@codefutures.com>
	<498A3F9E.9010402@temporal-wave.com>
	<20090205094622.85852120F835@msf1.dnsmadeeasy.com>
	<498B1472.2020006@temporal-wave.com>
	<20090205225111.C7540120F973@msf1.dnsmadeeasy.com>
	<498B79B3.5090406@temporal-wave.com>
Message-ID: <20090206072852.5C15034184AB@www.antlr.org>

At 12:43 6/02/2009, Jim Idle wrote:
 >Yes, I think that that is a sensible option, however with the C
 >target that implies that you need to link with the socket
 >library and it isn't available everywhere. Maybe a good thing
 >would be to have a -mode=xxxxx option and the xxx options would
 >be just passed into the string templates for the target. Then
 >the target code generation templates could all support target
 >specific things, even if there were some things that made
 >sense to all targets. or perhaps expand -debug to optionally
 >allow -debug=xxxx, yyyy

My point though is that without doing anything extra (no extra 
command line options, nothing altered in existing grammars) it 
ought to default to the "robust" mode, that does extra sanity 
checking (which could compromise performance a bit) -- that way 
the people who need the benefit the most (those starting out with 
a new grammar) will get it immediately.

Then, once people are confident that their grammars are correct, 
they set the option to strip out the sanity checks, thereby 
improving the performance.  Something in the options {} block 
seems like the best idea for those using ANTLRworks to compile, 
though a command-line option would be more convenient for those 
using a build system (then they could compile with sanity checks 
for their unit test suite and without for the final release).

I don't think it's necessarily target-specific; while the specific 
tests might be, I'm sure that there are still sanity checks that 
could be done even in the other targets.

But for now possibly the "cheapest" option (requiring no changes 
to ANTLR itself) would be to use something like:
@headers {
#define ANTLR_PERFORMANCE
}
and use macros in the generated code that compile to nothing if 
that is defined.


From cmundi at gmail.com  Thu Feb  5 23:49:36 2009
From: cmundi at gmail.com (C. Mundi)
Date: Fri, 6 Feb 2009 00:49:36 -0700
Subject: [antlr-interest] Q: opinions on ikvm + antlr3 ?
Message-ID: <e794390902052349k3691b276x9d22f6862f1889fc@mail.gmail.com>

I've been asking myself what I would do if I needed to target parsers for
.NET *and* needed to stay current with the latest from TParr.  This is not a
troll.  It's a serious issue for me.  I've Googled a fair bit of
misinformation.  So I've concluded that I should just ask the people who
know best, who logically are among you who frequent this list.  And I seem
to recall seeing some discussion of this months ago, before I appreciated
its significance.

I'm very impressed with the C# target and the recent work to port the antlr
tool to Visual Studio.  It's really amazing.  It also seems like an enormous
effort for these projects to keep up with TParr's prodigious pace.  So I was
wondering what my experience might be like if I stuck to the "reference"
Java target and used IKVM.NET to re-target my parser's Java bytecode to the
CLI.  I have every intention of trying this out, but first I thought of some
obvious pros and cons:

Pro: meets requirement of staying up-to-the-minute with TParr
Pro: meets requirement of targeting .net
Pro: allows access to arbitrary .net via java stubs created from assemblies,
pretty cool but not required
Pro: gives me an excuse to use java for real after all these years  :)

Con: adds another step to the build-chain, i.e. dependence on the stability
of javac; maybe academic, but listed for completeness
Con: at the mercy of the quality of ikvmc -- debugging is ugly if tests pass
in java but fail in .net
Con: possibly slow runtime performance -- I have to believe that the C#
target is able to do more optimization than the two-step Java --> Bytecode
--> CIL process
Con: hours lost cursing classpath  :)

Some of the con's might be mitigated by runtime profiling in combination
with decompiling the CIL, but any hand-tuning on the .NET side would be hard
to maintain unless accepted by the upstream ikvm developers, which might not
be practical anyway.

These observations may be naive.  I'm interested in what the experts here
have to say about what I should be prepared to face if I go this route.

This is in no way a comment on the incredible work discussed regularly on
this list.  My requirements might push me in a slightly different direction,
is all.

And I have to believe that some of you have tried ikvm or are using it and
already know a lot that I need to learn.

Thanks,
C. Mundi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090206/d4515301/attachment.html 

From JALuber at gmx.de  Fri Feb  6 00:32:03 2009
From: JALuber at gmx.de (Johannes Luber)
Date: Fri, 06 Feb 2009 09:32:03 +0100
Subject: [antlr-interest] Grammar reuse without dynamic binding
In-Reply-To: <e91b9f350902051507s5aacab47kb5f821002563b2c7@mail.gmail.com>
References: <e91b9f350902051507s5aacab47kb5f821002563b2c7@mail.gmail.com>
Message-ID: <20090206083203.41730@gmx.net>

> Hi,
> 
> I would like to reuse a grammar in this kind of way:
> I have Pascal grammar 'pas.g' and I need to create Estelle grammar
> 'est.g'.
> Some rules from Pascal must be extended in Estelle.
> 
> For example:
> 'pas.g'
> assignment_statement:
>      (variable_access | function_identifier) ":=" expression;
> 
> 
> 'est.g'
> assignment_statement:
>      pas.assignment_statement
>    | module_variable ":=" module_variable;
> 
> I would like that alternative pas.assignment_statement in 'est.g'
> assignment_statement rule expand to rules from 'pas.g', even though we
> call rule in 'est.g' grammar and some of rules (variable_access |
> function_identifier) ":=" expression are also redefined in 'est.g'.
> I would like to get effect of namespace rather than inheritance.
> Is there better solution than unique renaming all nonterminals in 'pas.g'?
> 
> Sorry for my poor English.
> Best Regards!
> Tomasz Ulinski

This sounds like a case for composite grammars described here: <http://www.antlr.org/wiki/display/ANTLR3/Composite+Grammars> You can then override only those rules which are different.

Johannes
-- 
Jetzt 1 Monat kostenlos! GMX FreeDSL - Telefonanschluss + DSL 
f?r nur 17,95 Euro/mtl.!* http://dsl.gmx.de/?ac=OM.AD.PD003K11308T4569a

From sharwell at pixelminegames.com  Fri Feb  6 00:50:12 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Fri, 6 Feb 2009 02:50:12 -0600
Subject: [antlr-interest] Q: opinions on ikvm + antlr3 ?
In-Reply-To: <e794390902052349k3691b276x9d22f6862f1889fc@mail.gmail.com>
References: <e794390902052349k3691b276x9d22f6862f1889fc@mail.gmail.com>
Message-ID: <86403CA0939415448BCCB83855EFE09AA678D4@Bloodymary.ironwillgames.com>

I'm behind on my obligations right now (i.e. the StringTemplate request
from earlier this week), but I'll let you know where I'm at and how I'm
planning to solve things.

 

Here at our office we use Perforce internally, but we're not in a
position to expose the ANTLR ports directly. I'm planning on either
setting up a SVN server or requesting a branch in the P4 repo at
antlr.org to mirror my work on the C# ports so people have access to
both the code and binaries. I use ANTLR extensively in some commercial
C# products, so keeping up to date isn't really the problem. Actually,
there are a significant number of changes in the C# port that haven't
made it back to the Java version yet, such as the use of v3 grammars.

 

I've been hesitant to just package up the current source because I'll be
making a number of breaking changes as I continue working. Two examples
are the continued move from get/set functions to properties, and making
function names start with a capital letter. I'll try and get a new set
of binaries and an updated version of nFringe's ANTLR language module
posted next week. I've made a few tweaks to the Visual Studio support
since the last post.

 

Thanks,

Sam Harwell

Pixel Mine, Inc.

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of C. Mundi
Sent: Friday, February 06, 2009 1:50 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Q: opinions on ikvm + antlr3 ?

 


I've been asking myself what I would do if I needed to target parsers
for .NET and needed to stay current with the latest from TParr.  This is
not a troll.  It's a serious issue for me.  I've Googled a fair bit of
misinformation.  So I've concluded that I should just ask the people who
know best, who logically are among you who frequent this list.  And I
seem to recall seeing some discussion of this months ago, before I
appreciated its significance.

I'm very impressed with the C# target and the recent work to port the
antlr tool to Visual Studio.  It's really amazing.  It also seems like
an enormous effort for these projects to keep up with TParr's prodigious
pace.  So I was wondering what my experience might be like if I stuck to
the "reference" Java target and used IKVM.NET to re-target my parser's
Java bytecode to the CLI.  I have every intention of trying this out,
but first I thought of some obvious pros and cons:

Pro: meets requirement of staying up-to-the-minute with TParr
Pro: meets requirement of targeting .net
Pro: allows access to arbitrary .net via java stubs created from
assemblies, pretty cool but not required
Pro: gives me an excuse to use java for real after all these years  :)

Con: adds another step to the build-chain, i.e. dependence on the
stability of javac; maybe academic, but listed for completeness
Con: at the mercy of the quality of ikvmc -- debugging is ugly if tests
pass in java but fail in .net
Con: possibly slow runtime performance -- I have to believe that the C#
target is able to do more optimization than the two-step Java -->
Bytecode --> CIL process
Con: hours lost cursing classpath  :)

Some of the con's might be mitigated by runtime profiling in combination
with decompiling the CIL, but any hand-tuning on the .NET side would be
hard to maintain unless accepted by the upstream ikvm developers, which
might not be practical anyway.

These observations may be naive.  I'm interested in what the experts
here have to say about what I should be prepared to face if I go this
route.

This is in no way a comment on the incredible work discussed regularly
on this list.  My requirements might push me in a slightly different
direction, is all.

And I have to believe that some of you have tried ikvm or are using it
and already know a lot that I need to learn.

Thanks,
C. Mundi

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090206/a0293c49/attachment.html 

From JALuber at gmx.de  Fri Feb  6 01:03:11 2009
From: JALuber at gmx.de (Johannes Luber)
Date: Fri, 06 Feb 2009 10:03:11 +0100
Subject: [antlr-interest] Q: opinions on ikvm + antlr3 ?
In-Reply-To: <e794390902052349k3691b276x9d22f6862f1889fc@mail.gmail.com>
References: <e794390902052349k3691b276x9d22f6862f1889fc@mail.gmail.com>
Message-ID: <20090206090311.41720@gmx.net>

> I've been asking myself what I would do if I needed to target parsers for
> .NET *and* needed to stay current with the latest from TParr.  This is not
> a
> troll.  It's a serious issue for me.  I've Googled a fair bit of
> misinformation.  So I've concluded that I should just ask the people who
> know best, who logically are among you who frequent this list.  And I seem
> to recall seeing some discussion of this months ago, before I appreciated
> its significance.
> 
> I'm very impressed with the C# target and the recent work to port the
> antlr
> tool to Visual Studio.  It's really amazing.  It also seems like an
> enormous
> effort for these projects to keep up with TParr's prodigious pace.

So far keeping up hasn't been a real problem.

>  So I
> was
> wondering what my experience might be like if I stuck to the "reference"
> Java target and used IKVM.NET to re-target my parser's Java bytecode to
> the
> CLI.  I have every intention of trying this out, but first I thought of
> some
> obvious pros and cons:
> 
> Pro: meets requirement of staying up-to-the-minute with TParr
> Pro: meets requirement of targeting .net
> Pro: allows access to arbitrary .net via java stubs created from
> assemblies,
> pretty cool but not required
> Pro: gives me an excuse to use java for real after all these years  :)
> 
> Con: adds another step to the build-chain, i.e. dependence on the
> stability
> of javac; maybe academic, but listed for completeness
> Con: at the mercy of the quality of ikvmc -- debugging is ugly if tests
> pass
> in java but fail in .net
> Con: possibly slow runtime performance -- I have to believe that the C#
> target is able to do more optimization than the two-step Java --> Bytecode
> --> CIL process
> Con: hours lost cursing classpath  :)

Con: I haven't checked it, but I believe that IKVM won't create the .NETisms like properties instead getters and setters. If true, your parser backend will be schizophrenic regarding the approaches.
Con: .NET-only additions like #pragmas to silence warnings won't be inlcuded.
> 
> Some of the con's might be mitigated by runtime profiling in combination
> with decompiling the CIL, but any hand-tuning on the .NET side would be
> hard
> to maintain unless accepted by the upstream ikvm developers, which might
> not
> be practical anyway.
> 
> These observations may be naive.  I'm interested in what the experts here
> have to say about what I should be prepared to face if I go this route.
> 
> This is in no way a comment on the incredible work discussed regularly on
> this list.  My requirements might push me in a slightly different
> direction,
> is all.
> 
> And I have to believe that some of you have tried ikvm or are using it and
> already know a lot that I need to learn.

I've once tried to run org.ANTLR.Tool on IKVM but didn't get far. So I know only what the homepage and the blog (featured on go-mono.com/monologue) says. In general, I'd advise against using the IKVM solution, as the native solution does work and the main targets are current with the Java one when doing a release.

FYI: Another approach to use the Java code as baseline is using the tool "sharpen" from the db4o team. It takes Java source code and transform it into C# code, which uses properties, etc. Cons are that you have to add annotations to the Java code and you may have to move untranslatable code into extra classes, for which you have to provide manual replacements.

Furthermore, you can't simply provide .NET-specific optimizations without doing a potentially harmful change to Java target or having to maintain code manually, if you can't teach sharpen about this special case. Another problem would be if other targets would want to go the same route. Then the Java code is going to be cluttered even more - which wouldn't be practicable or requiring some kind of annotations-standard for sharpen-like tools.

Johannes
> 
> Thanks,
> C. Mundi

-- 
Jetzt 1 Monat kostenlos! GMX FreeDSL - Telefonanschluss + DSL 
f?r nur 17,95 Euro/mtl.!* http://dsl.gmx.de/?ac=OM.AD.PD003K11308T4569a

From JALuber at gmx.de  Fri Feb  6 04:25:19 2009
From: JALuber at gmx.de (Johannes Luber)
Date: Fri, 06 Feb 2009 13:25:19 +0100
Subject: [antlr-interest] Q: opinions on ikvm + antlr3 ?
In-Reply-To: <86403CA0939415448BCCB83855EFE09AA678D4@Bloodymary.ironwillgames.com>
References: <e794390902052349k3691b276x9d22f6862f1889fc@mail.gmail.com>
	<86403CA0939415448BCCB83855EFE09AA678D4@Bloodymary.ironwillgames.com>
Message-ID: <20090206122519.124210@gmx.net>

> I'm behind on my obligations right now (i.e. the StringTemplate request
> from earlier this week), but I'll let you know where I'm at and how I'm
> planning to solve things.
> 
> Here at our office we use Perforce internally, but we're not in a
> position to expose the ANTLR ports directly. I'm planning on either
> setting up a SVN server or requesting a branch in the P4 repo at
> antlr.org to mirror my work on the C# ports so people have access to
> both the code and binaries.

It would be more consistent to use the same repo as Ter, although I'm not sure if a true branch is necessary. Wouldn't at least the CSharp3 target work in parallel with the existing ones?

> I use ANTLR extensively in some commercial
> C# products, so keeping up to date isn't really the problem. Actually,
> there are a significant number of changes in the C# port that haven't
> made it back to the Java version yet, such as the use of v3 grammars.
> 
> I've been hesitant to just package up the current source because I'll be
> making a number of breaking changes as I continue working. Two examples
> are the continued move from get/set functions to properties, and making
> function names start with a capital letter. I'll try and get a new set
> of binaries and an updated version of nFringe's ANTLR language module
> posted next week. I've made a few tweaks to the Visual Studio support
> since the last post.

Just mark it as being "Alpha" stage and people know the risk. At the very least one can look at the source code to quench the own curiosity.

Johannes
-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt? Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger01

From bruno.marc-aurele at polymtl.ca  Fri Feb  6 06:17:45 2009
From: bruno.marc-aurele at polymtl.ca (Bruno Marc-Aurele)
Date: Fri, 06 Feb 2009 09:17:45 -0500
Subject: [antlr-interest] Changing the base node type
Message-ID: <1233929865.498c46897fbfe@www.imp.polymtl.ca>

Hello all,

I am trying to do a grammar with a new base type for nodes. I can see that I am
provided with ASTLabelType, whose value I set to Node, the name of my
CommonTree subclass. The only difference between the two classes is the
presence of a "Accept" method. The parser, however, still creates CommonTree
nodes (of course, the ITreeAdaptor is still a CommonTreeAdaptor).

What would be the suggested method to make my parser create Node objects instead
of CommonTree objects?

Thanks a lot,
Bruno M-A.

P.S.: I am using the C#2 target.
--
Bruno Marc-Aur?le
courriel Poly: bruno.marc-aurele at polymtl.ca
courriel perso: bruno.m-a at hotmail.com





From qwizv9b02 at sneakemail.com  Fri Feb  6 07:39:16 2009
From: qwizv9b02 at sneakemail.com (Hendrik Maryns)
Date: Fri, 06 Feb 2009 16:39:16 +0100
Subject: [antlr-interest] @SuppressWarnings
Message-ID: <gmhlj4$dhs$1@ger.gmane.org>

Hi all,

I?d like to have ANTLR put a @SuppressWarnings("all") at the top of each
file it generates, such that I do not see the warnings in the Eclipse
Problem view.

Any neat way of doing this?

If not, see it as a feature request?

Cheers, H.
-- 
Hendrik Maryns
http://tcl.sfs.uni-tuebingen.de/~hendrik/
==================
www.lieverleven.be
http://catb.org/~esr/faqs/smart-questions.html

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 257 bytes
Desc: OpenPGP digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090206/0d6e027d/attachment.bin 

From cmundi at gmail.com  Fri Feb  6 07:42:43 2009
From: cmundi at gmail.com (C. Mundi)
Date: Fri, 6 Feb 2009 08:42:43 -0700
Subject: [antlr-interest] Q: opinions on ikvm + antlr3 ?
In-Reply-To: <86403CA0939415448BCCB83855EFE09AA678D4@Bloodymary.ironwillgames.com>
References: <e794390902052349k3691b276x9d22f6862f1889fc@mail.gmail.com>
	<86403CA0939415448BCCB83855EFE09AA678D4@Bloodymary.ironwillgames.com>
Message-ID: <e794390902060742k5d9dfd17p58b291fc397ee66@mail.gmail.com>

I hope you didn't think I was suggesting that your work (or Johannes' work)
is lagging TParr.  Quite the opposite.  It's amazing how well you guys have
mind-melded.  And I recognize from my own work elsewhere the almost
super-human effort that requires.  "Thank you."  You contributors don't hear
that nearly enough here.

You've just about talked me out of IKVM.  I need to ponder it more.  Thank
you.

And you make an excellent point about the C# target being ahead of Java in
some aspects.

Although I failed to say so, my desire to sync with TParr (or at least have
the option) is stability.  I'm not interested in chasing the latest
pre-release features.  But I am interested in getting the latest fixes.  So
even if the C# target gets "ahead" of the Java reference, I would probably
not use the C# enhancements until they were cross-ported to Java anyway.

Thanks and congratulations to all of you who make this amazing tool work for
so many more of us.

C. Mundi


On Fri, Feb 6, 2009 at 1:50 AM, Sam Harwell <sharwell at pixelminegames.com>wrote:

>  I'm behind on my obligations right now (i.e. the StringTemplate request
> from earlier this week), but I'll let you know where I'm at and how I'm
> planning to solve things.
>
>
>
> Here at our office we use Perforce internally, but we're not in a position
> to expose the ANTLR ports directly. I'm planning on either setting up a SVN
> server or requesting a branch in the P4 repo at antlr.org to mirror my
> work on the C# ports so people have access to both the code and binaries. I
> use ANTLR extensively in some commercial C# products, so keeping up to date
> isn't really the problem. Actually, there are a significant number of
> changes in the C# port that haven't made it back to the Java version yet,
> such as the use of v3 grammars.
>
>
>
> I've been hesitant to just package up the current source because I'll be
> making a number of breaking changes as I continue working. Two examples are
> the continued move from get/set functions to properties, and making function
> names start with a capital letter. I'll try and get a new set of binaries
> and an updated version of nFringe's ANTLR language module posted next week.
> I've made a few tweaks to the Visual Studio support since the last post.
>
>
>
> Thanks,
>
> Sam Harwell
>
> Pixel Mine, Inc.
>
>
>
> *From:* antlr-interest-bounces at antlr.org [mailto:
> antlr-interest-bounces at antlr.org] *On Behalf Of *C. Mundi
> *Sent:* Friday, February 06, 2009 1:50 AM
> *To:* antlr-interest at antlr.org
> *Subject:* [antlr-interest] Q: opinions on ikvm + antlr3 ?
>
>
>
>
> I've been asking myself what I would do if I needed to target parsers for
> .NET *and* needed to stay current with the latest from TParr.  This is not
> a troll.  It's a serious issue for me.  I've Googled a fair bit of
> misinformation.  So I've concluded that I should just ask the people who
> know best, who logically are among you who frequent this list.  And I seem
> to recall seeing some discussion of this months ago, before I appreciated
> its significance.
>
> I'm very impressed with the C# target and the recent work to port the antlr
> tool to Visual Studio.  It's really amazing.  It also seems like an enormous
> effort for these projects to keep up with TParr's prodigious pace.  So I was
> wondering what my experience might be like if I stuck to the "reference"
> Java target and used IKVM.NET to re-target my parser's Java bytecode to
> the CLI.  I have every intention of trying this out, but first I thought of
> some obvious pros and cons:
>
> Pro: meets requirement of staying up-to-the-minute with TParr
> Pro: meets requirement of targeting .net
> Pro: allows access to arbitrary .net via java stubs created from
> assemblies, pretty cool but not required
> Pro: gives me an excuse to use java for real after all these years  :)
>
> Con: adds another step to the build-chain, i.e. dependence on the stability
> of javac; maybe academic, but listed for completeness
> Con: at the mercy of the quality of ikvmc -- debugging is ugly if tests
> pass in java but fail in .net
> Con: possibly slow runtime performance -- I have to believe that the C#
> target is able to do more optimization than the two-step Java --> Bytecode
> --> CIL process
> Con: hours lost cursing classpath  :)
>
> Some of the con's might be mitigated by runtime profiling in combination
> with decompiling the CIL, but any hand-tuning on the .NET side would be hard
> to maintain unless accepted by the upstream ikvm developers, which might not
> be practical anyway.
>
> These observations may be naive.  I'm interested in what the experts here
> have to say about what I should be prepared to face if I go this route.
>
> This is in no way a comment on the incredible work discussed regularly on
> this list.  My requirements might push me in a slightly different direction,
> is all.
>
> And I have to believe that some of you have tried ikvm or are using it and
> already know a lot that I need to learn.
>
> Thanks,
> C. Mundi
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090206/898a0a74/attachment.html 

From cmundi at gmail.com  Fri Feb  6 07:50:25 2009
From: cmundi at gmail.com (C. Mundi)
Date: Fri, 6 Feb 2009 08:50:25 -0700
Subject: [antlr-interest] Q: opinions on ikvm + antlr3 ?
In-Reply-To: <20090206090311.41720@gmx.net>
References: <e794390902052349k3691b276x9d22f6862f1889fc@mail.gmail.com>
	<20090206090311.41720@gmx.net>
Message-ID: <e794390902060750k781ec8fdv2b5b758f15fc11e0@mail.gmail.com>

On Fri, Feb 6, 2009 at 2:03 AM, Johannes Luber <JALuber at gmx.de> wrote:

>
> Con: I haven't checked it, but I believe that IKVM won't create the
> .NETisms like properties instead getters and setters. If true, your parser
> backend will be schizophrenic regarding the approaches.


Ouch!  I need to check on that.  Thank you for alerting me to this!


> Con: .NET-only additions like #pragmas to silence warnings won't be
> inlcuded.
>

I could probably manage that, but it would be more work.  Good point.

FYI: Another approach to use the Java code as baseline is using the tool
> "sharpen" from the db4o team. It takes Java source code and transform it
> into C# code, which uses properties, etc. Cons are that you have to add
> annotations to the Java code and you may have to move untranslatable code
> into extra classes, for which you have to provide manual replacements.


Sounds dangerous, but worth researching.  Thanks for the idea.


> Furthermore, you can't simply provide .NET-specific optimizations without
> doing a potentially harmful change to Java target or having to maintain code
> manually, if you can't teach sharpen about this special case. Another
> problem would be if other targets would want to go the same route. Then the
> Java code is going to be cluttered even more - which wouldn't be practicable
> or requiring some kind of annotations-standard for sharpen-like tools.


I see your point.  This would definitely be a mess for multiple targets.
But for a time-limited project which is only ever going to target C#, this
would not be an issue.  So I will give it some thought.  Having the C#
properties is very tempting.

Thank you for your insightful help.

C. Mundi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090206/ed90dd73/attachment.html 

From Dennis.Benzinger at gmx.net  Fri Feb  6 07:53:05 2009
From: Dennis.Benzinger at gmx.net (Dennis Benzinger)
Date: Fri, 06 Feb 2009 16:53:05 +0100
Subject: [antlr-interest] @SuppressWarnings
In-Reply-To: <gmhlj4$dhs$1@ger.gmane.org>
References: <gmhlj4$dhs$1@ger.gmane.org>
Message-ID: <498C5CE1.6030805@gmx.net>

Hi Hendrik!

Am 06.02.2009 16:39, Hendrik Maryns schrieb:
> Hi all,
> 
> I?d like to have ANTLR put a @SuppressWarnings("all") at the top of each
> file it generates, such that I do not see the warnings in the Eclipse
> Problem view.
> 
> Any neat way of doing this?
> [...]

Try putting that in the @header section in your grammar.


HTH,
Dennis Benzinger

From parrt at cs.usfca.edu  Fri Feb  6 07:55:57 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 6 Feb 2009 07:55:57 -0800
Subject: [antlr-interest] Changing the base node type
In-Reply-To: <1233929865.498c46897fbfe@www.imp.polymtl.ca>
References: <1233929865.498c46897fbfe@www.imp.polymtl.ca>
Message-ID: <5E554FDE-3C9B-46DB-8BA9-4CA1F420593B@cs.usfca.edu>

Hi. There should be a faq entry on this or an example.  Implement  
TreeAdaptor :)
Ter
On Feb 6, 2009, at 6:17 AM, Bruno Marc-Aurele wrote:

> Hello all,
>
> I am trying to do a grammar with a new base type for nodes. I can  
> see that I am
> provided with ASTLabelType, whose value I set to Node, the name of my
> CommonTree subclass. The only difference between the two classes is  
> the
> presence of a "Accept" method. The parser, however, still creates  
> CommonTree
> nodes (of course, the ITreeAdaptor is still a CommonTreeAdaptor).
>
> What would be the suggested method to make my parser create Node  
> objects instead
> of CommonTree objects?
>
> Thanks a lot,
> Bruno M-A.
>
> P.S.: I am using the C#2 target.
> --
> Bruno Marc-Aur?le
> courriel Poly: bruno.marc-aurele at polymtl.ca
> courriel perso: bruno.m-a at hotmail.com
>
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From jimi at temporal-wave.com  Fri Feb  6 08:05:25 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 06 Feb 2009 08:05:25 -0800
Subject: [antlr-interest] C generator is not generating @after  actions
In-Reply-To: <20090206072133.7FB73120F94A@msf1.dnsmadeeasy.com>
References: <8309A93C-CEE0-40F3-9A38-9C8BB3315F3E@codefutures.com>
	<498A3F9E.9010402@temporal-wave.com>
	<20090205094622.85852120F835@msf1.dnsmadeeasy.com>
	<498B1472.2020006@temporal-wave.com>
	<20090205225111.C7540120F973@msf1.dnsmadeeasy.com>
	<498B79B3.5090406@temporal-wave.com>
	<20090206072133.7FB73120F94A@msf1.dnsmadeeasy.com>
Message-ID: <498C5FC5.2030905@temporal-wave.com>

Gavin Lambert wrote:
> At 12:43 6/02/2009, Jim Idle wrote:
> >Yes, I think that that is a sensible option, however with the C
> >target that implies that you need to link with the socket
> >library and it isn't available everywhere. Maybe a good thing
> >would be to have a -mode=xxxxx option and the xxx options would
> >be just passed into the string templates for the target. Then
> >the target code generation templates could all support target
> >specific things, even if there were some things that made
> >sense to all targets. or perhaps expand -debug to optionally
> >allow -debug=xxxx, yyyy
>
> My point though is that without doing anything extra (no extra command 
> line options, nothing altered in existing grammars) it ought to 
> default to the "robust" mode, that does extra sanity checking (which 
> could compromise performance a bit) -- that way the people who need 
> the benefit the most (those starting out with a new grammar) will get 
> it immediately.
All my experience tells me that I will be answering "How do I make this 
go faster forever though". It is better require a request for debug 
'style' information/instrumentation, in the way the C compilers do.
>
> Then, once people are confident that their grammars are correct, they 
> set the option to strip out the sanity checks, thereby improving the 
> performance.  Something in the options {} block seems like the best 
> idea for those using ANTLRworks to compile, though a command-line 
> option would be more convenient for those using a build system (then 
> they could compile with sanity checks for their unit test suite and 
> without for the final release).
>
> I don't think it's necessarily target-specific; 
No, neither do I. For instance there could possibly be a 'robust' mode 
in all targets, though exactly what it meant to each target will be 
different.
> while the specific tests might be, I'm sure that there are still 
> sanity checks that could be done even in the other targets.
>
> But for now possibly the "cheapest" option (requiring no changes to 
> ANTLR itself) would be to use something like:
> @headers {
> #define ANTLR_PERFORMANCE
> }
#define ANTLR3_SANITY_CHECK

But otherwise that would do it assuming that I wanted to add lots of 
#ifdefs. It is however easy to extend the debug option, assuming that 
Ter believes the idea is a worthwhile one.

Jim
> and use macros in the generated code that compile to nothing if that 
> is defined.
>


From sharwell at pixelminegames.com  Fri Feb  6 08:06:20 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Fri, 6 Feb 2009 10:06:20 -0600
Subject: [antlr-interest] Changing the base node type
In-Reply-To: <5E554FDE-3C9B-46DB-8BA9-4CA1F420593B@cs.usfca.edu>
References: <1233929865.498c46897fbfe@www.imp.polymtl.ca>
	<5E554FDE-3C9B-46DB-8BA9-4CA1F420593B@cs.usfca.edu>
Message-ID: <86403CA0939415448BCCB83855EFE09AA678D7@Bloodymary.ironwillgames.com>

You'll also see to call setTreeAdaptor (java target) in the @init section of the entry rule(s) to your grammar. Your implementation of TreeAdaptor should include implementations of at least the following 2 functions (example here is the C# target just because I had it ):

class GrammarASTAdaptor : CommonTreeAdaptor
{
    public override object create( IToken payload )
    {
        GrammarAST t = new GrammarAST( payload );
        return t;
    }
    public override object errorNode( ITokenStream input, IToken start, IToken stop, RecognitionException e )
    {
        GrammarAST t = new GrammarASTErrorNode( input, start, stop, e );
        return t;
    }
}

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Terence Parr
Sent: Friday, February 06, 2009 9:56 AM
To: Bruno Marc-Aurele
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Changing the base node type

Hi. There should be a faq entry on this or an example.  Implement  
TreeAdaptor :)
Ter
On Feb 6, 2009, at 6:17 AM, Bruno Marc-Aurele wrote:

> Hello all,
>
> I am trying to do a grammar with a new base type for nodes. I can  
> see that I am
> provided with ASTLabelType, whose value I set to Node, the name of my
> CommonTree subclass. The only difference between the two classes is  
> the
> presence of a "Accept" method. The parser, however, still creates  
> CommonTree
> nodes (of course, the ITreeAdaptor is still a CommonTreeAdaptor).
>
> What would be the suggested method to make my parser create Node  
> objects instead
> of CommonTree objects?
>
> Thanks a lot,
> Bruno M-A.
>
> P.S.: I am using the C#2 target.
> --
> Bruno Marc-Aur?le
> courriel Poly: bruno.marc-aurele at polymtl.ca
> courriel perso: bruno.m-a at hotmail.com
>
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From jimi at temporal-wave.com  Fri Feb  6 08:11:34 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 06 Feb 2009 08:11:34 -0800
Subject: [antlr-interest] Q: opinions on ikvm + antlr3 ?
In-Reply-To: <e794390902052349k3691b276x9d22f6862f1889fc@mail.gmail.com>
References: <e794390902052349k3691b276x9d22f6862f1889fc@mail.gmail.com>
Message-ID: <498C6136.6070909@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090206/54229046/attachment.html 

From cmundi at gmail.com  Fri Feb  6 08:13:40 2009
From: cmundi at gmail.com (C. Mundi)
Date: Fri, 6 Feb 2009 09:13:40 -0700
Subject: [antlr-interest] Q: opinions on ikvm + antlr3 ?
In-Reply-To: <20090206090311.41720@gmx.net>
References: <e794390902052349k3691b276x9d22f6862f1889fc@mail.gmail.com>
	<20090206090311.41720@gmx.net>
Message-ID: <e794390902060813w24ab4d50pd17fe46c150f05fa@mail.gmail.com>

I have a further thought on this:

On Fri, Feb 6, 2009 at 2:03 AM, Johannes Luber <JALuber at gmx.de> wrote:

Con: I haven't checked it, but I believe that IKVM won't create the .NETisms
> like properties instead getters and setters. If true, your parser backend
> will be schizophrenic regarding the approaches.
> Con: .NET-only additions like #pragmas to silence warnings won't be
> inlcuded.


I think I managed to trick myself, by forgetting that I've been looking at
too many alternatives.

What I'm thinking of is using the ANTLR java tool and writing all of my
actions in Java.  Next, compile the java to bytecode targeting the JVM.
 Then, use ikvmc to do a one-time translation of the JVM bytecode to .NET IL
bytecode, i.e. a .NET assembly.  According to the IKVM folks, I would have
to write my own classloder if I need to load Java classes dynamicaly.
Otherwise, I would never see C#, because I'd be coding in Java.

(Ok, it's actually a little more complex.  Write lexer in Java.  Compile
lexer class to JVM bytecode.  Recompile to IL (ikvmc).  Create java stub for
lexer IL (ikvmstub).  Write parser in Java, by getting token stream from
java stub of lexer.  Compile parser class to JVM bytecode.  Recompile to
IL.  Done.

It seems like the properties v. setter/getter concern goes away in this
scenario.  Am I completely wrong?

C. Mundi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090206/1c6a8d7c/attachment.html 

From cmundi at gmail.com  Fri Feb  6 08:16:53 2009
From: cmundi at gmail.com (C. Mundi)
Date: Fri, 6 Feb 2009 09:16:53 -0700
Subject: [antlr-interest] Q: opinions on ikvm + antlr3 ?
In-Reply-To: <498C6136.6070909@temporal-wave.com>
References: <e794390902052349k3691b276x9d22f6862f1889fc@mail.gmail.com>
	<498C6136.6070909@temporal-wave.com>
Message-ID: <e794390902060816o185e4924g8cada9be6e100d12@mail.gmail.com>

Thanks.  That seems to be the consensus forming here.  I'm asking you guys
because you are the experts and I should listen to that.  Maybe I'm making
this harder than I have to.  I'll share any results I get with IVKM.

Cheers!
C. Mundi


On Fri, Feb 6, 2009 at 9:11 AM, Jim Idle <jimi at temporal-wave.com> wrote:


> It's an interesting idea, but I would say that so long as you are using a
> released version, then apart from bugs, you would expect the same behavior
> and features from the C# runtime probably more than any other runtime, just
> because the gestalt of C# and the .Net runtime are a lot closer than that of
> say C and Java.
>
> So, I guess that if we assume IKVM works as advertised, then it would be
> valuable IF you really do need to stay on the edge of the Java runtime
> development. Perhaps you might if you are doing research, but generally I
> have a hard time thinking that you would need to do this really.
>
> I am interested to hear of your experiences with IKVM though!
>
> Jim
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090206/f5af15d8/attachment.html 

From JALuber at gmx.de  Fri Feb  6 08:25:10 2009
From: JALuber at gmx.de (Johannes Luber)
Date: Fri, 06 Feb 2009 17:25:10 +0100
Subject: [antlr-interest] Q: opinions on ikvm + antlr3 ?
In-Reply-To: <e794390902060813w24ab4d50pd17fe46c150f05fa@mail.gmail.com>
References: <e794390902052349k3691b276x9d22f6862f1889fc@mail.gmail.com>	
	<20090206090311.41720@gmx.net>
	<e794390902060813w24ab4d50pd17fe46c150f05fa@mail.gmail.com>
Message-ID: <20090206162510.7540@gmx.net>

> I have a further thought on this:
> 
> On Fri, Feb 6, 2009 at 2:03 AM, Johannes Luber <JALuber at gmx.de> wrote:
> 
> Con: I haven't checked it, but I believe that IKVM won't create the
> .NETisms
> > like properties instead getters and setters. If true, your parser
> backend
> > will be schizophrenic regarding the approaches.
> > Con: .NET-only additions like #pragmas to silence warnings won't be
> > inlcuded.
> 
> 
> I think I managed to trick myself, by forgetting that I've been looking at
> too many alternatives.
> 
> What I'm thinking of is using the ANTLR java tool and writing all of my
> actions in Java.  Next, compile the java to bytecode targeting the JVM.
>  Then, use ikvmc to do a one-time translation of the JVM bytecode to .NET
> IL
> bytecode, i.e. a .NET assembly.  According to the IKVM folks, I would have
> to write my own classloder if I need to load Java classes dynamicaly.
> Otherwise, I would never see C#, because I'd be coding in Java.
> 
> (Ok, it's actually a little more complex.  Write lexer in Java.  Compile
> lexer class to JVM bytecode.  Recompile to IL (ikvmc).  Create java stub
> for
> lexer IL (ikvmstub).  Write parser in Java, by getting token stream from
> java stub of lexer.  Compile parser class to JVM bytecode.  Recompile to
> IL.  Done.
> 
> It seems like the properties v. setter/getter concern goes away in this
> scenario.  Am I completely wrong?
> 
> C. Mundi

You still have to interface your parser. Depending on how you do it, you may or may not have the need to access things like "token.getText()" in C#.

Johannes

-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt? Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger01

From bruno.marc-aurele at polymtl.ca  Fri Feb  6 08:27:22 2009
From: bruno.marc-aurele at polymtl.ca (Bruno Marc-Aurele)
Date: Fri, 06 Feb 2009 11:27:22 -0500
Subject: [antlr-interest] Changing the base node type
In-Reply-To: <86403CA0939415448BCCB83855EFE09AA678D7@Bloodymary.ironwillgames.com>
References: <1233929865.498c46897fbfe@www.imp.polymtl.ca>
	<5E554FDE-3C9B-46DB-8BA9-4CA1F420593B@cs.usfca.edu>
	<86403CA0939415448BCCB83855EFE09AA678D7@Bloodymary.ironwillgames.com>
Message-ID: <1233937642.498c64ea23a33@www.imp.polymtl.ca>

Thanks a lot Sam & Ter. Your answers helped a lot!

Bruno M-A
--
Bruno Marc-Aur?le
courriel Poly: bruno.marc-aurele at polymtl.ca
courriel perso: bruno.m-a at hotmail.com


Selon Sam Harwell <sharwell at pixelminegames.com>:

> You'll also see to call setTreeAdaptor (java target) in the @init section of
> the entry rule(s) to your grammar. Your implementation of TreeAdaptor should
> include implementations of at least the following 2 functions (example here
> is the C# target just because I had it ):
>
> class GrammarASTAdaptor : CommonTreeAdaptor
> {
>     public override object create( IToken payload )
>     {
>         GrammarAST t = new GrammarAST( payload );
>         return t;
>     }
>     public override object errorNode( ITokenStream input, IToken start,
> IToken stop, RecognitionException e )
>     {
>         GrammarAST t = new GrammarASTErrorNode( input, start, stop, e );
>         return t;
>     }
> }
>
> Sam
>
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Terence Parr
> Sent: Friday, February 06, 2009 9:56 AM
> To: Bruno Marc-Aurele
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Changing the base node type
>
> Hi. There should be a faq entry on this or an example.  Implement
> TreeAdaptor :)
> Ter
> On Feb 6, 2009, at 6:17 AM, Bruno Marc-Aurele wrote:
>
> > Hello all,
> >
> > I am trying to do a grammar with a new base type for nodes. I can
> > see that I am
> > provided with ASTLabelType, whose value I set to Node, the name of my
> > CommonTree subclass. The only difference between the two classes is
> > the
> > presence of a "Accept" method. The parser, however, still creates
> > CommonTree
> > nodes (of course, the ITreeAdaptor is still a CommonTreeAdaptor).
> >
> > What would be the suggested method to make my parser create Node
> > objects instead
> > of CommonTree objects?
> >
> > Thanks a lot,
> > Bruno M-A.
> >
> > P.S.: I am using the C#2 target.
> > --
> > Bruno Marc-Aur?le
> > courriel Poly: bruno.marc-aurele at polymtl.ca
> > courriel perso: bruno.m-a at hotmail.com
> >
> >
> >
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>


From carter_cheng at yahoo.com  Fri Feb  6 10:25:28 2009
From: carter_cheng at yahoo.com (Carter Cheng)
Date: Fri, 6 Feb 2009 10:25:28 -0800 (PST)
Subject: [antlr-interest] Manually walking constructed trees in C
Message-ID: <717055.46532.qm@web50101.mail.re2.yahoo.com>


Hi everyone,

As I mentioned before I have been having problems working with the tree gramars when compiling under g++ so I have decided perhaps it might be best to manually walk the constructed trees for now with a recursive function. Could someone point out to me how this might be done?

Thanks again,

Carter.


      

From Andreas.Meyer at smartshift.de  Fri Feb  6 11:01:29 2009
From: Andreas.Meyer at smartshift.de (Andreas Meyer)
Date: Fri, 6 Feb 2009 20:01:29 +0100
Subject: [antlr-interest] Composing tree grammars
Message-ID: <001801c9888d$5227b4f0$f6771ed0$@Meyer@smartshift.de>

Hi!

 

I am using ANTLR 3.1 and I want to compose tree grammars in a way, that I
have one "base" grammar that contains all rules, in order to define a
traversal, but without actions/rewrites. Then, a second grammar imports the
"base" grammar, and overrides only some rules. Now, if I try to use the
second grammar on the input, the ANTLR runtimes complain about mismatched
input: it seems that internally, the walker does not consume enough tokens,
so that it expects the tokens "behind" the current token. FYI, I used the
java/simplecTreeWalker example from the antlr 3.1 distribution and basically
copied the walker, spelled "import ." and removed all but one rule from the
copy.

 

Did I use composite tree grammars in a wrong way? If so, how can I define
multiple tree grammars for only small parts of the grammar?

Andreas Meyer
Developer
_____
smartShift
smartShift GmbH
Willy-Brandt-Platz 6
68161 Mannheim
T +49 (0)621 / 400 676-09
F +49 (0)621 / 400 676-06
E:  <mailto:katja.reinig at smarshift.de> andreas.meyer at smartShift.de

 <http://www.smartshift.de/> smartshift.de

Information contained in this message is confidential and may be legally
privileged. If you are not the addressee indicated in this message (or
responsible for the delivery of the message to such person), you may not
copy, disclose or deliver this message or any part of it to anyone, in any
form. In such case, you should delete this message and kindly notify the
sender by reply Email. 
Opinions, conclusions and other information in this message that does not
relate to the official business of smartShift shall be understood as neither
given nor endorsed by it.

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090206/e2dc768b/attachment.html 

From parrt at cs.usfca.edu  Fri Feb  6 11:15:38 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 6 Feb 2009 11:15:38 -0800
Subject: [antlr-interest] Composing tree grammars
In-Reply-To: <001801c9888d$5227b4f0$f6771ed0$@Meyer@smartshift.de>
References: <001801c9888d$5227b4f0$f6771ed0$@Meyer@smartshift.de>
Message-ID: <528F3236-7F05-4E99-AB03-F5C6737C6207@cs.usfca.edu>


On Feb 6, 2009, at 11:01 AM, Andreas Meyer wrote:

> Hi!
>
> I am using ANTLR 3.1 and I want to compose tree grammars in a way,  
> that I have one ?base? grammar that contains all rules, in order to  
> define a traversal, but without actions/rewrites. Then, a second  
> grammar imports the ?base? grammar, and overrides only some rules.  
> Now, if I try to use the second grammar on the input,

hi. what does that mean?
Ter


From sharwell at pixelminegames.com  Fri Feb  6 12:15:19 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Fri, 6 Feb 2009 14:15:19 -0600
Subject: [antlr-interest] Composing tree grammars
In-Reply-To: <001801c9888d$5227b4f0$f6771ed0$@Meyer@smartshift.de>
References: <001801c9888d$5227b4f0$f6771ed0$@Meyer@smartshift.de>
Message-ID: <86403CA0939415448BCCB83855EFE09AA678E7@Bloodymary.ironwillgames.com>

Hi Andreas,

 

Make the actions in your tree grammar call virtual/abstract functions. Then derive a new all-code class from the tree grammar class that overrides those functions to provide the action implementation. The ANTLR Tool itself uses this pattern in the AssignTokenTypesWalker tree grammar.

 

Sam

 

From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Andreas Meyer
Sent: Friday, February 06, 2009 1:01 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Composing tree grammars

 

Hi!

 

I am using ANTLR 3.1 and I want to compose tree grammars in a way, that I have one "base" grammar that contains all rules, in order to define a traversal, but without actions/rewrites. Then, a second grammar imports the "base" grammar, and overrides only some rules. Now, if I try to use the second grammar on the input, the ANTLR runtimes complain about mismatched input: it seems that internally, the walker does not consume enough tokens, so that it expects the tokens "behind" the current token. FYI, I used the java/simplecTreeWalker example from the antlr 3.1 distribution and basically copied the walker, spelled "import ..." and removed all but one rule from the copy.

 

Did I use composite tree grammars in a wrong way? If so, how can I define multiple tree grammars for only small parts of the grammar?

Andreas Meyer
Developer
_____
smartShift
smartShift GmbH
Willy-Brandt-Platz 6
68161 Mannheim
T +49 (0)621 / 400 676-09
F +49 (0)621 / 400 676-06
E: andreas.meyer at smartShift.de <mailto:katja.reinig at smarshift.de> 

smartshift.de <http://www.smartshift.de/> 

Information contained in this message is confidential and may be legally privileged. If you are not the addressee indicated in this message (or responsible for the delivery of the message to such person), you may not copy, disclose or deliver this message or any part of it to anyone, in any form. In such case, you should delete this message and kindly notify the sender by reply Email. 
Opinions, conclusions and other information in this message that does not relate to the official business of smartShift shall be understood as neither given nor endorsed by it.

 



__________ Hinweis von ESET Smart Security, Signaturdatenbank-Version 3834 (20090206) __________

E-Mail wurde gepr?ft mit ESET Smart Security.

http://www.eset.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090206/376e0b4f/attachment.html 

From andreas.meyer at smartshift.de  Fri Feb  6 12:19:54 2009
From: andreas.meyer at smartshift.de (andreas.meyer at smartshift.de)
Date: Fri, 06 Feb 2009 21:19:54 +0100
Subject: [antlr-interest] Composing tree grammars
Message-ID: <18740481.359241233951594363.JavaMail.servlet@kundenserver>

>On Feb 6, 2009, at 11:01 AM, Andreas Meyer wrote:
>
>> Hi!
>>
>> I am using ANTLR 3.1 and I want to compose tree grammars in a way,  
>> that I have one ?base? grammar that contains all rules, in order to  
>> define a traversal, but without actions/rewrites. Then, a second  
>> grammar imports the ?base? grammar, and overrides only some rules.  
>> Now, if I try to use the second grammar on the input,
>
>hi. what does that mean?
>Ter
>

Ok, I have 

* a base grammar SimpleC.g
* a tree grammar SimpleCWalker.g with a set of rules, mirroring the base grammar's result tree
* a tree grammar SimpleCWalker2.g that imports SimpleCWalker and overrides one rule (variable), 
* in Main.java, I call the start rule from SimpleCWalker, namely "program", but using the SimpleCWalker2:

SimpleCWalker2 walker = new SimpleCWalker2(nodes);
walker.program();

Btw, when generating SimpleCWalker2, ANTLR complains:

warning(138): SimpleCWalker2.g:0:0: grammar SimpleCWalker2: no start rule (no rule can obviously be followed by EOF)

When using the input file "input" from the example, eventually, the rule "program" calls the overridden rule "variable", where the ANTLR runtimes complain about some mismatched input:

$ java Main input
tree=(VAR_DEF char c) (VAR_DEF int x) (FUNC_DECL (FUNC_HDR void bar (ARG_DEF int x))) (FUNC_DEF (FUNC_HDR int foo (ARG_DEF int y) (ARG_DEF c
DEF int i) (for (= i 0) (< i 3) (= i (+ i 1)) (BLOCK (= x 3) (= y 5)))))
SimpleCWalker.g: node from line 1:0 mismatched input 'char' expecting set null

Debugging showed that the ANTLR runtimes expected an identifier, whereas the input stream (containing the generated tree nodes from the parser) still has a LT(1) of VAR_DEF.

I attach the (modified) simpleCTreewalker example in case you want to test it.

Thanks a lot for any hint!
A.Meyer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: simplecTreeParser2.tgz
Type: application/octet-stream
Size: 1486 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090206/6d8f5c6b/attachment.obj 

From parrt at cs.usfca.edu  Fri Feb  6 12:22:22 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 6 Feb 2009 12:22:22 -0800
Subject: [antlr-interest] Composing tree grammars
In-Reply-To: <18740481.359241233951594363.JavaMail.servlet@kundenserver>
References: <18740481.359241233951594363.JavaMail.servlet@kundenserver>
Message-ID: <B293DB5B-6F4D-4E32-AD4F-311031042F33@cs.usfca.edu>

Hi. Can you try putting

     tokenVocab=SimpleC;

in  the root grammar too?
T

From andreas.meyer at smartshift.de  Fri Feb  6 12:51:17 2009
From: andreas.meyer at smartshift.de (andreas.meyer at smartshift.de)
Date: Fri, 06 Feb 2009 21:51:17 +0100
Subject: [antlr-interest] Composing tree grammars
Message-ID: <376237.361441233953477651.JavaMail.servlet@kundenserver>

>Hi. Can you try putting
>
> tokenVocab=SimpleC;
>
>in the root grammar too?
>T

I tried both SimpleC and SimpleCWalker vocabs (specified both in SimpleCWalker.g and ...Walker2.g), but anyway:


warning(160): SimpleCWalker.g:4:5: tokenVocab option ignored in imported grammar SimpleCWalker

Andreas

From parrt at cs.usfca.edu  Fri Feb  6 13:08:05 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 6 Feb 2009 13:08:05 -0800
Subject: [antlr-interest] Composing tree grammars
In-Reply-To: <376237.361441233953477651.JavaMail.servlet@kundenserver>
References: <376237.361441233953477651.JavaMail.servlet@kundenserver>
Message-ID: <23CCE32A-7708-4C97-88BD-BEE3B6C3E264@cs.usfca.edu>

oh. right.

ok, it's a token type problem. it *must* import the vocab.

crap. adding to bug list.  no easy fix unless you comment out some  
code.  remove this test:

	/** Load a vocab file <vocabName>.tokens and return max token type  
found. */
	public int importTokenVocabulary(GrammarAST tokenVocabOptionAST,
									 String vocabName)
	{
		if ( !getGrammarIsRoot() ) {
			ErrorManager.grammarWarning(ErrorManager.MSG_TOKEN_VOCAB_IN_DELEGATE,
										this,
										tokenVocabOptionAST.token,
										name);
			return composite.maxTokenType;
		}

in Grammar.java

Ter

On Feb 6, 2009, at 12:51 PM, andreas.meyer at smartshift.de wrote:

>> Hi. Can you try putting
>>
>> tokenVocab=SimpleC;
>>
>> in the root grammar too?
>> T
>
> I tried both SimpleC and SimpleCWalker vocabs (specified both in  
> SimpleCWalker.g and ...Walker2.g), but anyway:
>
>
> warning(160): SimpleCWalker.g:4:5: tokenVocab option ignored in  
> imported grammar SimpleCWalker
>
> Andreas
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From andreas.meyer at smartshift.de  Fri Feb  6 13:23:20 2009
From: andreas.meyer at smartshift.de (andreas.meyer at smartshift.de)
Date: Fri, 06 Feb 2009 22:23:20 +0100
Subject: [antlr-interest] Composing tree grammars
Message-ID: <20738550.363341233955400263.JavaMail.servlet@kundenserver>

Ok, that solves it :-) Just tested. Good to know that it works. Thanks a lot for the realtime answer!

Andreas

>oh. right.
>
>ok, it's a token type problem. it *must* import the vocab.
>
>crap. adding to bug list.  no easy fix unless you comment out some  
>code.  remove this test:
> ......

From bob.marinier at soartech.com  Fri Feb  6 14:07:01 2009
From: bob.marinier at soartech.com (Bob Marinier)
Date: Fri, 06 Feb 2009 17:07:01 -0500
Subject: [antlr-interest] trouble with ids and keywords
Message-ID: <498CB485.7020702@soartech.com>

Hi,

I'm using antlr 2.7.6 and I have a problem with keywords and identifiers 
conflicting. Specifically, if I have an identifier that starts with a 
keyword, then the beginning gets picked up as a keyword, as opposed to 
the whole thing getting recognized as an identifier. For example, one of 
my keywords is "new". If the input contains "newX", then this gets 
tokenized as the "new" keyword and an identifier "X", whereas I want 
just an identifier "newX". That is, I want the identifier rule to be 
greedy, and only check the literals table after it's read as much as it can.

Here's the part of the lexer that I think is relevant:

class MyLexer extends Lexer;

options
{
    importVocab=Hlsr;
    charVocabulary = '\0'..'\377';
    testLiterals=false;    // don't automatically test for literals
    k=11;
}

NEW_EXPRESSION: "new";

IDENT
options
{
    testLiterals=true;
}
:
    ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'_'|'0'..'9')*
;

How can I fix the issue?
Thanks,
Bob

From antlr at mirality.co.nz  Fri Feb  6 18:52:30 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 07 Feb 2009 15:52:30 +1300
Subject: [antlr-interest] trouble with ids and keywords
In-Reply-To: <498CB485.7020702@soartech.com>
References: <498CB485.7020702@soartech.com>
Message-ID: <20090207025242.167EF3418491@www.antlr.org>

At 11:07 7/02/2009, Bob Marinier wrote:
 >I'm using antlr 2.7.6 and I have a problem with keywords and
 >identifiers conflicting. Specifically, if I have an identifier
 >that starts with a keyword, then the beginning gets picked up
 >as a keyword, as opposed to the whole thing getting recognized
 >as an identifier. For example, one of my keywords is "new". If
 >the input contains "newX", then this gets tokenized as the
 >"new" keyword and an identifier "X", whereas I want just an
 >identifier "newX". That is, I want the identifier rule to
 >be greedy, and only check the literals table after it's read
 >as much as it can.

One of the classic resolutions to this problem is to avoid 
matching the keywords in the lexer at all -- match them all just 
as IDs in the lexer, and then test the text of the ID in the 
parser to verify whether it's a keyword or not.  (If you're 
outputting an AST, you can then swap it to a keyword token type, 
if you want.)


From antlr at mirality.co.nz  Fri Feb  6 19:05:31 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 07 Feb 2009 16:05:31 +1300
Subject: [antlr-interest] C generator is not generating @after actions
In-Reply-To: <498C5FC5.2030905@temporal-wave.com>
References: <8309A93C-CEE0-40F3-9A38-9C8BB3315F3E@codefutures.com>
	<498A3F9E.9010402@temporal-wave.com>
	<20090205094622.85852120F835@msf1.dnsmadeeasy.com>
	<498B1472.2020006@temporal-wave.com>
	<20090205225111.C7540120F973@msf1.dnsmadeeasy.com>
	<498B79B3.5090406@temporal-wave.com>
	<20090206072133.7FB73120F94A@msf1.dnsmadeeasy.com>
	<498C5FC5.2030905@temporal-wave.com>
Message-ID: <20090207030556.930D534184B3@www.antlr.org>

At 05:05 7/02/2009, Jim Idle wrote:
 >All my experience tells me that I will be answering "How do I
 >make this go faster forever though". It is better require a
 >request for debug 'style' information/instrumentation, in
 >the way the C compilers do.

That's what FAQs are for :)  (You're going to get this sort of 
question either way -- and "how do I make it faster" is an easier 
question to answer than "why does this mysteriously fail on 
certain input".)

Possibly though we're just coming at this from different 
perspectives.  Performance has never really been a big issue for 
me, as most of the ANTLR grammars I've created have been used 
either in hobby projects where I didn't really care about the time 
required (even though these probably ended up having the largest 
amount of input pumped through them at a time) or as DSL compilers 
for professional projects where the overall non-ANTLR compile-time 
was in the minutes anyway so a few more seconds here or there 
didn't really make much difference.

Getting the grammars robust, though, was at times quite 
un-obvious, especially when I was first starting out.

 >#define ANTLR3_SANITY_CHECK
 >
 >But otherwise that would do it assuming that I wanted to add 
lots
 >of #ifdefs. It is however easy to extend the debug option,
 >assuming that Ter believes the idea is a worthwhile one.

I still think the default should be to sanity check.  (Similar to 
how most people work on their projects in "debug mode" and only 
switch to "release mode" for final testing and release.)  And this 
is quite a different idea than ANTLR's current debug mode.

You also wouldn't need all that many #ifdefs -- just one or two at 
the top of the file where you create a bunch of macros that either 
compile to sanity-checking code or to nothing.  It's a pity you 
can't rely on being compiled with gcc, though, since that compiler 
has extensions that make doing this sort of thing much easier :)


From bob.marinier at soartech.com  Sat Feb  7 05:16:34 2009
From: bob.marinier at soartech.com (Bob Marinier)
Date: Sat, 07 Feb 2009 08:16:34 -0500
Subject: [antlr-interest] trouble with ids and keywords
In-Reply-To: <498CB485.7020702@soartech.com> 
References: <498CB485.7020702@soartech.com> 
Message-ID: <498D89B2.8070505@soartech.com>

Gavin Lambert wrote:
> At 11:07 7/02/2009, Bob Marinier wrote:
> >I'm using antlr 2.7.6 and I have a problem with keywords and
> >identifiers conflicting. Specifically, if I have an identifier
> >that starts with a keyword, then the beginning gets picked up
> >as a keyword, as opposed to the whole thing getting recognized
> >as an identifier. For example, one of my keywords is "new". If
> >the input contains "newX", then this gets tokenized as the
> >"new" keyword and an identifier "X", whereas I want just an
> >identifier "newX". That is, I want the identifier rule to
> >be greedy, and only check the literals table after it's read
> >as much as it can.
>
> One of the classic resolutions to this problem is to avoid matching 
> the keywords in the lexer at all -- match them all just as IDs in the 
> lexer, and then test the text of the ID in the parser to verify 
> whether it's a keyword or not.  (If you're outputting an AST, you can 
> then swap it to a keyword token type, if you want.)
>
The problem is that IDs in my system don't allow dashes, but some 
keywords have dashes in them. So keywords with dashes don't get 
recognized in the parser. But it seems to work if I put all of the 
keywords with dashes in the lexer, and the ones without dashes in the 
parser. Having the keywords list spread out over two locations makes me 
cringe a bit, but maybe this is the cleanest solution?

Thanks,
Bob

From qwizv9b02 at sneakemail.com  Sat Feb  7 06:04:50 2009
From: qwizv9b02 at sneakemail.com (Hendrik Maryns)
Date: Sat, 07 Feb 2009 15:04:50 +0100
Subject: [antlr-interest] @SuppressWarnings
In-Reply-To: <498C5CE1.6030805@gmx.net>
References: <gmhlj4$dhs$1@ger.gmane.org> <498C5CE1.6030805@gmx.net>
Message-ID: <gmk4ee$igm$1@ger.gmane.org>

Op 06-02-09 16:53 heeft Dennis Benzinger Dennis.Benzinger-at-gmx.net
|news.gmane.org| als volgt van zich laten horen:
> Hi Hendrik!
> 
> Am 06.02.2009 16:39, Hendrik Maryns schrieb:
>> Hi all,
>>
>> I?d like to have ANTLR put a @SuppressWarnings("all") at the top of each
>> file it generates, such that I do not see the warnings in the Eclipse
>> Problem view.
>>
>> Any neat way of doing this?
>> [...]
> 
> Try putting that in the @header section in your grammar.

Nope, this leads to

Syntax error on token(s), misplaced construct(s)

since the @header part appears before the imports of the antlr-runtime.

(You get this:

  package de.uni_tuebingen.sfb.lichtenstein.formulas.parsing;

  @SuppressWarnings("all")


import org.antlr.runtime.*;
import java.util.Stack;
import java.util.List;
import java.util.ArrayList;
)

Cheers, H.
-- 
Hendrik Maryns
http://tcl.sfs.uni-tuebingen.de/~hendrik/
==================
www.lieverleven.be
http://catb.org/~esr/faqs/smart-questions.html

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 257 bytes
Desc: OpenPGP digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090207/c9cb765a/attachment.bin 

From parrt at cs.usfca.edu  Sat Feb  7 10:48:58 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 7 Feb 2009 10:48:58 -0800
Subject: [antlr-interest] Kudos from Guido
Message-ID: <F2DB2B29-C893-407A-9229-1CF1EBE8B96B@cs.usfca.edu>

Guido van Rossum, the Python creator, has been playing around with  
ANTLR (and the Python target) on a project of his. He was nice enough  
to send a nice note about his experiences. He gave me permission to  
add them to the testimonials list:

http://antlr.org/testimonial/list

Terence

From antlr at mirality.co.nz  Sat Feb  7 12:06:38 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sun, 08 Feb 2009 09:06:38 +1300
Subject: [antlr-interest] trouble with ids and keywords
In-Reply-To: <498D89B2.8070505@soartech.com>
References: <498CB485.7020702@soartech.com>
 <498D89B2.8070505@soartech.com>
Message-ID: <20090207200700.2664E34183AB@www.antlr.org>

At 02:16 8/02/2009, Bob Marinier wrote:
 >The problem is that IDs in my system don't allow dashes, but 
some
 >keywords have dashes in them. So keywords with dashes don't get
 >recognized in the parser. But it seems to work if I put all of
 >the keywords with dashes in the lexer, and the ones without
 >dashes in the parser. Having the keywords list spread out over
 >two locations makes me cringe a bit, but maybe this is the
 >cleanest solution?

It might be.  Another option would be to accept the dashes in the 
lexer regardless and raise an error in the parser if they're used 
inappropriately (since it's better to have the parser raise errors 
than for the lexer to do so).  The downside of that, though, is 
that it becomes harder to recognise "a-b" (no spaces) as "a minus 
b".


From e_d_k at yahoo.com  Sat Feb  7 14:14:41 2009
From: e_d_k at yahoo.com (Ed Keith)
Date: Sat, 7 Feb 2009 14:14:41 -0800 (PST)
Subject: [antlr-interest] Problem runnign ANTLR
Message-ID: <339658.41137.qm@web54110.mail.re2.yahoo.com>

I am at a machine running Windows XP.

I downloaded antlrworks-1.2.2.jar and ran it.

Then I tried to work through the tutorial at http://www.antlr.org/works/help/tutorial/calculator.html.

I pasted the Expr grammar into the editor window, selected the interpreter tab, entered "2+3*4", selected "prog", clicked on the indicated button. . .

A message in red appeared at the bottom of the window. It Read "Errors reported in console", So I clicked on the console tab and found the following message:

[16:56:01] java.lang.NullPointerException
	at org.antlr.xjlib.foundation.XJUtils.concatPath(Unknown Source)
	at org.antlr.xjlib.foundation.XJUtils.concatPath(Unknown Source)
	at org.antlr.works.components.editor.ComponentEditorGrammar.getOutputPath(Unknown Source)
	at org.antlr.works.components.editor.ComponentEditorGrammar.getANTLRTool(Unknown Source)
	at org.antlr.works.grammar.engine.GrammarEngineImpl.getANTLRTool(Unknown Source)
	at org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.createNewGrammar(Unknown Source)
	at org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.createParserGrammar(Unknown Source)
	at org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.createCombinedGrammar(Unknown Source)
	at org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.createGrammars(Unknown Source)
	at org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.analyze(Unknown Source)
	at org.antlr.works.grammar.engine.GrammarEngineImpl.analyze(Unknown Source)
	at org.antlr.works.interpreter.EditorInterpreter.run(Unknown Source)
	at java.lang.Thread.run(Unknown Source)


A friend who is trying to convince to to give up C++ and move to Java tells me the main reason I should change is that you do not need to worry about NULL pointers in Java, looks like he is wrong.

Can anyone point me to a solution for this problem?

Thanks in advance,

   -EdK



Ed Keith
e_d_k at yahoo.com

Blog: edkeith.blogspot.com


      

From parrt at cs.usfca.edu  Sat Feb  7 14:16:17 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 7 Feb 2009 14:16:17 -0800
Subject: [antlr-interest] Problem runnign ANTLR
In-Reply-To: <339658.41137.qm@web54110.mail.re2.yahoo.com>
References: <339658.41137.qm@web54110.mail.re2.yahoo.com>
Message-ID: <0F253A90-691E-4F36-B009-99D0AAE55872@cs.usfca.edu>

space in path?
Ter
On Feb 7, 2009, at 2:14 PM, Ed Keith wrote:

> I am at a machine running Windows XP.
>
> I downloaded antlrworks-1.2.2.jar and ran it.
>
> Then I tried to work through the tutorial at http://www.antlr.org/works/help/tutorial/calculator.html 
> .
>
> I pasted the Expr grammar into the editor window, selected the  
> interpreter tab, entered "2+3*4", selected "prog", clicked on the  
> indicated button. . .
>
> A message in red appeared at the bottom of the window. It Read  
> "Errors reported in console", So I clicked on the console tab and  
> found the following message:
>
> [16:56:01] java.lang.NullPointerException
> 	at org.antlr.xjlib.foundation.XJUtils.concatPath(Unknown Source)
> 	at org.antlr.xjlib.foundation.XJUtils.concatPath(Unknown Source)
> 	at  
> org 
> .antlr 
> .works 
> .components.editor.ComponentEditorGrammar.getOutputPath(Unknown  
> Source)
> 	at  
> org 
> .antlr 
> .works.components.editor.ComponentEditorGrammar.getANTLRTool(Unknown  
> Source)
> 	at  
> org 
> .antlr.works.grammar.engine.GrammarEngineImpl.getANTLRTool(Unknown  
> Source)
> 	at  
> org 
> .antlr 
> .works.grammar.antlr.ANTLRGrammarEngineImpl.createNewGrammar(Unknown  
> Source)
> 	at  
> org 
> .antlr 
> .works 
> .grammar.antlr.ANTLRGrammarEngineImpl.createParserGrammar(Unknown  
> Source)
> 	at  
> org 
> .antlr 
> .works 
> .grammar.antlr.ANTLRGrammarEngineImpl.createCombinedGrammar(Unknown  
> Source)
> 	at  
> org 
> .antlr 
> .works.grammar.antlr.ANTLRGrammarEngineImpl.createGrammars(Unknown  
> Source)
> 	at  
> org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.analyze(Unknown  
> Source)
> 	at org.antlr.works.grammar.engine.GrammarEngineImpl.analyze(Unknown  
> Source)
> 	at org.antlr.works.interpreter.EditorInterpreter.run(Unknown Source)
> 	at java.lang.Thread.run(Unknown Source)
>
>
> A friend who is trying to convince to to give up C++ and move to  
> Java tells me the main reason I should change is that you do not  
> need to worry about NULL pointers in Java, looks like he is wrong.
>
> Can anyone point me to a solution for this problem?
>
> Thanks in advance,
>
>   -EdK
>
>
>
> Ed Keith
> e_d_k at yahoo.com
>
> Blog: edkeith.blogspot.com
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From e_d_k at yahoo.com  Sat Feb  7 14:30:56 2009
From: e_d_k at yahoo.com (Ed Keith)
Date: Sat, 7 Feb 2009 14:30:56 -0800 (PST)
Subject: [antlr-interest] Problem runnign ANTLR
Message-ID: <288639.36721.qm@web54111.mail.re2.yahoo.com>

I'm not sure what you mean. 

There are no spaces in the path the antlrworks-1.2.2.jar.

My path environment variable has many spaces in it, as I suspect every XP systems does. Microsoft puts many necessary files in directories with spaces in the name (not a good idea IMHO, but they did not ask me). If I removed all spaces from the path I think Windows would crash. I know most of my applications would stop working. If this is what is preventing ANTL from working then I will need to use my Linux box, because ANTLR does not work on windows.

   -EdK

Ed Keith
e_d_k at yahoo.com

Blog: edkeith.blogspot.com

--- On Sat, 2/7/09, Terence Parr <parrt at cs.usfca.edu> wrote:

From: Terence Parr <parrt at cs.usfca.edu>
Subject: Re: [antlr-interest] Problem runnign ANTLR
To: "Ed Keith" <e_d_k at yahoo.com>
Cc: antlr-interest at antlr.org
Date: Saturday, February 7, 2009, 5:16 PM

space in path?
Ter
On Feb 7, 2009, at 2:14 PM, Ed Keith wrote:

> I am at a machine running Windows XP.
> 
> I downloaded antlrworks-1.2.2.jar and ran it.
> 
> Then I tried to work through the tutorial at http://www.antlr.org/works/help/tutorial/calculator.html.
> 
> I pasted the Expr grammar into the editor window, selected the interpreter tab, entered "2+3*4", selected "prog", clicked on the indicated button. . .
> 
> A message in red appeared at the bottom of the window. It Read "Errors reported in console", So I clicked on the console tab and found the following message:
> 
> [16:56:01] java.lang.NullPointerException
> ??? at org.antlr.xjlib.foundation.XJUtils.concatPath(Unknown Source)
> ??? at org.antlr.xjlib.foundation.XJUtils.concatPath(Unknown Source)
> ??? at org.antlr.works.components.editor.ComponentEditorGrammar.getOutputPath(Unknown Source)
> ??? at org.antlr.works.components.editor.ComponentEditorGrammar.getANTLRTool(Unknown Source)
> ??? at org.antlr.works.grammar.engine.GrammarEngineImpl.getANTLRTool(Unknown Source)
> ??? at org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.createNewGrammar(Unknown Source)
> ??? at org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.createParserGrammar(Unknown Source)
> ??? at org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.createCombinedGrammar(Unknown Source)
> ??? at org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.createGrammars(Unknown Source)
> ??? at org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.analyze(Unknown Source)
> ??? at org.antlr.works.grammar.engine.GrammarEngineImpl.analyze(Unknown Source)
> ??? at org.antlr.works.interpreter.EditorInterpreter.run(Unknown Source)
> ??? at java.lang.Thread.run(Unknown Source)
> 
> 
> A friend who is trying to convince to to give up C++ and move to Java tells me the main reason I should change is that you do not need to worry about NULL pointers in Java, looks like he is wrong.
> 
> Can anyone point me to a solution for this problem?
> 
> Thanks in advance,
> 
>???-EdK
> 
> 
> 
> Ed Keith
> e_d_k at yahoo.com
> 
> Blog: edkeith.blogspot.com
> 
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address




      

From parrt at cs.usfca.edu  Sat Feb  7 14:32:34 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 7 Feb 2009 14:32:34 -0800
Subject: [antlr-interest] Problem runnign ANTLR
In-Reply-To: <288639.36721.qm@web54111.mail.re2.yahoo.com>
References: <288639.36721.qm@web54111.mail.re2.yahoo.com>
Message-ID: <A16D2593-9A0E-494B-9A05-7E6110DF092F@cs.usfca.edu>

Hi. Yeah, I remember something about spaces in filenames or pathnames  
causing trouble. Judging from the location the code, it has some  
particular problem. I would search in the list archives to see if you  
can get a hit.
Ter
On Feb 7, 2009, at 2:30 PM, Ed Keith wrote:

> I'm not sure what you mean.
>
> There are no spaces in the path the antlrworks-1.2.2.jar.
>
> My path environment variable has many spaces in it, as I suspect  
> every XP systems does. Microsoft puts many necessary files in  
> directories with spaces in the name (not a good idea IMHO, but they  
> did not ask me). If I removed all spaces from the path I think  
> Windows would crash. I know most of my applications would stop  
> working. If this is what is preventing ANTL from working then I will  
> need to use my Linux box, because ANTLR does not work on windows.
>
>   -EdK
>
> Ed Keith
> e_d_k at yahoo.com
>
> Blog: edkeith.blogspot.com
>
> --- On Sat, 2/7/09, Terence Parr <parrt at cs.usfca.edu> wrote:
>
> From: Terence Parr <parrt at cs.usfca.edu>
> Subject: Re: [antlr-interest] Problem runnign ANTLR
> To: "Ed Keith" <e_d_k at yahoo.com>
> Cc: antlr-interest at antlr.org
> Date: Saturday, February 7, 2009, 5:16 PM
>
> space in path?
> Ter
> On Feb 7, 2009, at 2:14 PM, Ed Keith wrote:
>
>> I am at a machine running Windows XP.
>>
>> I downloaded antlrworks-1.2.2.jar and ran it.
>>
>> Then I tried to work through the tutorial at http://www.antlr.org/works/help/tutorial/calculator.html 
>> .
>>
>> I pasted the Expr grammar into the editor window, selected the  
>> interpreter tab, entered "2+3*4", selected "prog", clicked on the  
>> indicated button. . .
>>
>> A message in red appeared at the bottom of the window. It Read  
>> "Errors reported in console", So I clicked on the console tab and  
>> found the following message:
>>
>> [16:56:01] java.lang.NullPointerException
>>     at org.antlr.xjlib.foundation.XJUtils.concatPath(Unknown Source)
>>     at org.antlr.xjlib.foundation.XJUtils.concatPath(Unknown Source)
>>     at  
>> org 
>> .antlr 
>> .works 
>> .components.editor.ComponentEditorGrammar.getOutputPath(Unknown  
>> Source)
>>     at  
>> org 
>> .antlr 
>> .works 
>> .components.editor.ComponentEditorGrammar.getANTLRTool(Unknown  
>> Source)
>>     at  
>> org 
>> .antlr.works.grammar.engine.GrammarEngineImpl.getANTLRTool(Unknown  
>> Source)
>>     at  
>> org 
>> .antlr 
>> .works 
>> .grammar.antlr.ANTLRGrammarEngineImpl.createNewGrammar(Unknown  
>> Source)
>>     at  
>> org 
>> .antlr 
>> .works 
>> .grammar.antlr.ANTLRGrammarEngineImpl.createParserGrammar(Unknown  
>> Source)
>>     at  
>> org 
>> .antlr 
>> .works 
>> .grammar.antlr.ANTLRGrammarEngineImpl.createCombinedGrammar(Unknown  
>> Source)
>>     at  
>> org 
>> .antlr 
>> .works.grammar.antlr.ANTLRGrammarEngineImpl.createGrammars(Unknown  
>> Source)
>>     at  
>> org 
>> .antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.analyze(Unknown  
>> Source)
>>     at  
>> org.antlr.works.grammar.engine.GrammarEngineImpl.analyze(Unknown  
>> Source)
>>     at org.antlr.works.interpreter.EditorInterpreter.run(Unknown  
>> Source)
>>     at java.lang.Thread.run(Unknown Source)
>>
>>
>> A friend who is trying to convince to to give up C++ and move to  
>> Java tells me the main reason I should change is that you do not  
>> need to worry about NULL pointers in Java, looks like he is wrong.
>>
>> Can anyone point me to a solution for this problem?
>>
>> Thanks in advance,
>>
>>    -EdK
>>
>>
>>
>> Ed Keith
>> e_d_k at yahoo.com
>>
>> Blog: edkeith.blogspot.com
>>
>>
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
>
>
>


From spamhole at gmx.at  Sat Feb  7 14:46:02 2009
From: spamhole at gmx.at (Markus Stoeger)
Date: Sat, 07 Feb 2009 23:46:02 +0100
Subject: [antlr-interest] Problem runnign ANTLR
In-Reply-To: <0F253A90-691E-4F36-B009-99D0AAE55872@cs.usfca.edu>
References: <339658.41137.qm@web54110.mail.re2.yahoo.com>
	<0F253A90-691E-4F36-B009-99D0AAE55872@cs.usfca.edu>
Message-ID: <498E0F2A.4030408@gmx.at>

Terence Parr schrieb:
> space in path?
>   

nope, space in path was my problem. Ed's problem is that he hasn't saved 
the file before starting the interpreter :-) Saving the file first 
should fix the problem.

Max


From e_d_k at yahoo.com  Sat Feb  7 17:09:19 2009
From: e_d_k at yahoo.com (Ed Keith)
Date: Sat, 7 Feb 2009 17:09:19 -0800 (PST)
Subject: [antlr-interest] Problem runnign ANTLR
Message-ID: <320835.34734.qm@web54103.mail.re2.yahoo.com>

Thanks, that was it!

    -EdK

Ed Keith
e_d_k at yahoo.com

Blog: edkeith.blogspot.com

--- On Sat, 2/7/09, Markus Stoeger <spamhole at gmx.at> wrote:

From: Markus Stoeger <spamhole at gmx.at>
Subject: Re: [antlr-interest] Problem runnign ANTLR
To: antlr-interest at antlr.org
Date: Saturday, February 7, 2009, 5:46 PM

Terence Parr schrieb:
> space in path?
>???

nope, space in path was my problem. Ed's problem is that he hasn't saved 
the file before starting the interpreter :-) Saving the file first 
should fix the problem.

Max


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address



      

From Vitaliy at dbsophic.com  Sun Feb  8 02:48:53 2009
From: Vitaliy at dbsophic.com (Vitaliy)
Date: Sun, 8 Feb 2009 12:48:53 +0200
Subject: [antlr-interest] Antlr won't backtrack?
Message-ID: <B0DE8B66453D0F4AA67D2A150934999B01195F14FA83@ex01.dbsophicHQ.com>

Hi all,

I've encountered a very interesting case in which it seems to me that Antlr simply won't backtrack far enough.
The (very) simplified test case of this issue can be demonstrated by the following grammar:

grammar TestCase;

options
{
                language = CSharp;
                backtrack=true;
                memoize=true;
}

tokens
{
    KEYWORD = 'keyword';
}

@parser::members
{
        protected override void Mismatch(IIntStream input, int ttype, BitSet follow)
        {
            throw new MismatchedTokenException(ttype, input);
        }
}
@parser::rulecatch
{
                        catch (RecognitionException recognitionException)
                        {
                                                throw recognitionException;
                        }
}

COLON                   : ':' ;
Whitespace           : (' ' | '\t' | '\n' | '\r')  {$channel=HIDDEN;};
Identifier               : ('a'..'z')+ ;

root                        : statements EOF;
statements            : (statement)+;
statement             : label
                                  | keyword
                                  | variable
                                  ;

identifier               : Identifier;
label                       : identifier COLON;
keyword                : KEYWORD (identifier)?;
variable                 : identifier;

For the input:
keyword label:
Antlr will throw a MismatchedTokenException.
Moreover, if the variable alternative in the statement rule (which seems irrelevant) is removed from the rule, everything works perfect.

After some debugging I found out that:

*         In the first case with the variable alternative,
Antlr generates a synpred in the keyword rule, which tries to consume an identifier.
Upon success of the synpred, the keyword rule indeed consumes the input 'keyword label', including the 'label' identifier - which is too early,
and fails to find anything which would match the ':'.
At this point, instead of backtracking, Antlr throws the MismatchedTokenException exception.

*         In the second case, without the variable alternative,
Antlr does not generate a synpred.
Instead it uses a look ahead of 2, to see the ':' token,
matches just the 'keyword' input for the keyword rule, does not consume the 'label' input too early,
and finally successfully matches the 'label:' input for the label rule, and the end of the input for the root rule.

Also, please note that I'm using the backtrack=true; option which should, by my understanding, handle the backtracking correctly.
So, what am I missing??

Thanks so much for any clue,
Vitaliy
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090208/39968c4b/attachment.html 

From carter_cheng at yahoo.com  Sun Feb  8 07:41:47 2009
From: carter_cheng at yahoo.com (Carter Cheng)
Date: Sun, 8 Feb 2009 07:41:47 -0800 (PST)
Subject: [antlr-interest] Manually walking constructed trees in C
In-Reply-To: <717055.46532.qm@web50101.mail.re2.yahoo.com>
Message-ID: <153770.24077.qm@web50112.mail.re2.yahoo.com>


Hi,

I managed to answer my own question by looking through the runtime source. I will try looking at the generator source next and see if I can make some modifications to it to workaround the problem I have been having with compiling tree grammar generated code under g++.

Regards,

Carter.


--- On Fri, 2/6/09, Carter Cheng <carter_cheng at yahoo.com> wrote:

> From: Carter Cheng <carter_cheng at yahoo.com>
> Subject: [antlr-interest] Manually walking constructed trees in C
> To: antlr-interest at antlr.org
> Date: Friday, February 6, 2009, 10:25 AM
> Hi everyone,
> 
> As I mentioned before I have been having problems working
> with the tree gramars when compiling under g++ so I have
> decided perhaps it might be best to manually walk the
> constructed trees for now with a recursive function. Could
> someone point out to me how this might be done?
> 
> Thanks again,
> 
> Carter.
> 
> 
>       
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address


      

From parrt at cs.usfca.edu  Sun Feb  8 09:46:27 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 8 Feb 2009 09:46:27 -0800
Subject: [antlr-interest] Antlr won't backtrack?
In-Reply-To: <B0DE8B66453D0F4AA67D2A150934999B01195F14FA83@ex01.dbsophicHQ.com>
References: <B0DE8B66453D0F4AA67D2A150934999B01195F14FA83@ex01.dbsophicHQ.com>
Message-ID: <94B43E6A-821F-4A34-BC4E-D44233864138@cs.usfca.edu>


On Feb 8, 2009, at 2:48 AM, Vitaliy wrote:
> root                        : statements EOF;
> statements            : (statement)+;
> statement             : label
>                                   | keyword
>                                   | variable
>                                   ;
>
> identifier               : Identifier;
> label                       : identifier COLON;
> keyword                : KEYWORD (identifier)?;
> variable                 : identifier;


"keyword label:" will always match rule keyword and then fail.  ANTLR  
will match greedily because you told it to shut up and backtrack.   
It's hiding the warning that identifier can match now or later (during  
statements loop).

Ter
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090208/3d00ad04/attachment.html 

From antlr-list at arizona-software.ch  Sun Feb  8 10:41:49 2009
From: antlr-list at arizona-software.ch (Jean Bovet)
Date: Sun, 8 Feb 2009 10:41:49 -0800
Subject: [antlr-interest] Problem runnign ANTLR
In-Reply-To: <A16D2593-9A0E-494B-9A05-7E6110DF092F@cs.usfca.edu>
References: <288639.36721.qm@web54111.mail.re2.yahoo.com>
	<A16D2593-9A0E-494B-9A05-7E6110DF092F@cs.usfca.edu>
Message-ID: <B2997819-A5D7-4B23-96EF-574160F36E93@arizona-software.ch>

Yes, this is a problem with ANTLRWorks 1.2.2. Version 1.2.3 will fix  
that. The workaround is to avoid a white space in the path of the  
grammar file.

Jean

On Feb 7, 2009, at 2:32 PM, Terence Parr wrote:

> Hi. Yeah, I remember something about spaces in filenames or pathnames
> causing trouble. Judging from the location the code, it has some
> particular problem. I would search in the list archives to see if you
> can get a hit.
> Ter
> On Feb 7, 2009, at 2:30 PM, Ed Keith wrote:
>
>> I'm not sure what you mean.
>>
>> There are no spaces in the path the antlrworks-1.2.2.jar.
>>
>> My path environment variable has many spaces in it, as I suspect
>> every XP systems does. Microsoft puts many necessary files in
>> directories with spaces in the name (not a good idea IMHO, but they
>> did not ask me). If I removed all spaces from the path I think
>> Windows would crash. I know most of my applications would stop
>> working. If this is what is preventing ANTL from working then I will
>> need to use my Linux box, because ANTLR does not work on windows.
>>
>>  -EdK
>>
>> Ed Keith
>> e_d_k at yahoo.com
>>
>> Blog: edkeith.blogspot.com
>>
>> --- On Sat, 2/7/09, Terence Parr <parrt at cs.usfca.edu> wrote:
>>
>> From: Terence Parr <parrt at cs.usfca.edu>
>> Subject: Re: [antlr-interest] Problem runnign ANTLR
>> To: "Ed Keith" <e_d_k at yahoo.com>
>> Cc: antlr-interest at antlr.org
>> Date: Saturday, February 7, 2009, 5:16 PM
>>
>> space in path?
>> Ter
>> On Feb 7, 2009, at 2:14 PM, Ed Keith wrote:
>>
>>> I am at a machine running Windows XP.
>>>
>>> I downloaded antlrworks-1.2.2.jar and ran it.
>>>
>>> Then I tried to work through the tutorial at http://www.antlr.org/works/help/tutorial/calculator.html
>>> .
>>>
>>> I pasted the Expr grammar into the editor window, selected the
>>> interpreter tab, entered "2+3*4", selected "prog", clicked on the
>>> indicated button. . .
>>>
>>> A message in red appeared at the bottom of the window. It Read
>>> "Errors reported in console", So I clicked on the console tab and
>>> found the following message:
>>>
>>> [16:56:01] java.lang.NullPointerException
>>>    at org.antlr.xjlib.foundation.XJUtils.concatPath(Unknown Source)
>>>    at org.antlr.xjlib.foundation.XJUtils.concatPath(Unknown Source)
>>>    at
>>> org
>>> .antlr
>>> .works
>>> .components.editor.ComponentEditorGrammar.getOutputPath(Unknown
>>> Source)
>>>    at
>>> org
>>> .antlr
>>> .works
>>> .components.editor.ComponentEditorGrammar.getANTLRTool(Unknown
>>> Source)
>>>    at
>>> org
>>> .antlr.works.grammar.engine.GrammarEngineImpl.getANTLRTool(Unknown
>>> Source)
>>>    at
>>> org
>>> .antlr
>>> .works
>>> .grammar.antlr.ANTLRGrammarEngineImpl.createNewGrammar(Unknown
>>> Source)
>>>    at
>>> org
>>> .antlr
>>> .works
>>> .grammar.antlr.ANTLRGrammarEngineImpl.createParserGrammar(Unknown
>>> Source)
>>>    at
>>> org
>>> .antlr
>>> .works
>>> .grammar.antlr.ANTLRGrammarEngineImpl.createCombinedGrammar(Unknown
>>> Source)
>>>    at
>>> org
>>> .antlr
>>> .works.grammar.antlr.ANTLRGrammarEngineImpl.createGrammars(Unknown
>>> Source)
>>>    at
>>> org
>>> .antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.analyze(Unknown
>>> Source)
>>>    at
>>> org.antlr.works.grammar.engine.GrammarEngineImpl.analyze(Unknown
>>> Source)
>>>    at org.antlr.works.interpreter.EditorInterpreter.run(Unknown
>>> Source)
>>>    at java.lang.Thread.run(Unknown Source)
>>>
>>>
>>> A friend who is trying to convince to to give up C++ and move to
>>> Java tells me the main reason I should change is that you do not
>>> need to worry about NULL pointers in Java, looks like he is wrong.
>>>
>>> Can anyone point me to a solution for this problem?
>>>
>>> Thanks in advance,
>>>
>>>   -EdK
>>>
>>>
>>>
>>> Ed Keith
>>> e_d_k at yahoo.com
>>>
>>> Blog: edkeith.blogspot.com
>>>
>>>
>>>
>>>
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>>
>>
>>
>>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From jaluber at gmx.de  Sun Feb  8 11:10:37 2009
From: jaluber at gmx.de (Johannes Luber)
Date: Sun, 08 Feb 2009 20:10:37 +0100
Subject: [antlr-interest] Antlr won't backtrack?
In-Reply-To: <B0DE8B66453D0F4AA67D2A150934999B01195F14FA83@ex01.dbsophicHQ.com>
References: <B0DE8B66453D0F4AA67D2A150934999B01195F14FA83@ex01.dbsophicHQ.com>
Message-ID: <498F2E2D.1050907@gmx.de>

Vitaliy schrieb:
...
> 
> options
> {
>                 language = CSharp;
>                 backtrack=true;
>                 memoize=true;
> }

One other thing: You are using the CSharp target for your grammar. As it
will be removed in ANTLR 3.2, you should switch to the CSharp2 target,
if you don't have to use .NET 1.1.

Johannes

From carter_cheng at yahoo.com  Sun Feb  8 11:53:16 2009
From: carter_cheng at yahoo.com (Carter Cheng)
Date: Sun, 8 Feb 2009 11:53:16 -0800 (PST)
Subject: [antlr-interest] rebuilding antlr 3.1.1 with ant
Message-ID: <948071.379.qm@web50101.mail.re2.yahoo.com>


I tried making a slight correction to one of the templates for tree parser building in the C directory to hopefully fix the problem I was having w.r.t. the tree parser not compiling under g++ by changing the line:

retval.tree = ADAPTOR->rulePostProcessing(ADAPTOR, root_0);

to

retval.tree = (<ASTLabelType>)ADAPTOR->rulePostProcessing(ADAPTOR, root_0);

I was hoping to test this change by rebuilding antlr 3.1.1 using ant build from the top level directory but keep getting the following error message:

/home/cwcheng/antlr-3.1.1/build.xml:111: The following error occurred while executing this line:
/home/cwcheng/antlr-3.1.1/build.xml:55: Problem: failed to create task or type antlr
Cause: the class org.apache.tools.ant.taskdefs.optional.ANTLR was not found.
        This looks like one of Ant's optional components.
Action: Check that the appropriate optional JAR exists in
        -/usr/share/ant/lib
        -/home/cwcheng/.ant/lib
        -a directory added on the command line with the -lib argument


>From the web resources I am uncertain which .jar file to insert into this directory. I tried putting the antlr.3.1.1.jar renamed as antlr.jar but this does not seem to correct the problem. Any advice on this would be appreciated.

Thanks,

Carter.  


      

From antlr at mirality.co.nz  Sun Feb  8 12:02:20 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Mon, 09 Feb 2009 09:02:20 +1300
Subject: [antlr-interest] rebuilding antlr 3.1.1 with ant
In-Reply-To: <948071.379.qm@web50101.mail.re2.yahoo.com>
References: <948071.379.qm@web50101.mail.re2.yahoo.com>
Message-ID: <20090208200246.D2F883418460@www.antlr.org>

At 08:53 9/02/2009, Carter Cheng wrote:
 >I tried making a slight correction to one of the templates for 
tree
 >parser building in the C directory to hopefully fix the problem 
I
 >was having w.r.t. the tree parser not compiling under g++ by
 >changing the line:
[...]
 >I was hoping to test this change by rebuilding antlr 3.1.1 using 

 >ant build from the top level directory but keep getting the
 >following error message:

I can't answer your question directly, but I can tell you that you 
don't actually need to rebuild anything in order to modify the 
templates.

Just unzip the .jar file (rename to .zip first if necessary), 
modify the template, re-zip it, and rename it to .jar.  Done.


From carter_cheng at yahoo.com  Sun Feb  8 12:42:31 2009
From: carter_cheng at yahoo.com (Carter Cheng)
Date: Sun, 8 Feb 2009 12:42:31 -0800 (PST)
Subject: [antlr-interest] rebuilding antlr 3.1.1 with ant
Message-ID: <512668.93271.qm@web50103.mail.re2.yahoo.com>


Thanks Gavin. That seems to have worked :-). 


--- On Sun, 2/8/09, Gavin Lambert <antlr at mirality.co.nz> wrote:

> From: Gavin Lambert <antlr at mirality.co.nz>
> Subject: Re: [antlr-interest] rebuilding antlr 3.1.1 with ant
> To: carter_cheng at yahoo.com, antlr-interest at antlr.org
> Date: Sunday, February 8, 2009, 12:02 PM
> At 08:53 9/02/2009, Carter Cheng wrote:
> >I tried making a slight correction to one of the
> templates for tree
> >parser building in the C directory to hopefully fix the
> problem I
> >was having w.r.t. the tree parser not compiling under
> g++ by
> >changing the line:
> [...]
> >I was hoping to test this change by rebuilding antlr
> 3.1.1 using 
> >ant build from the top level directory but keep getting
> the
> >following error message:
> 
> I can't answer your question directly, but I can tell
> you that you don't actually need to rebuild anything in
> order to modify the templates.
> 
> Just unzip the .jar file (rename to .zip first if
> necessary), modify the template, re-zip it, and rename it to
> .jar.  Done.


      

From michael.bedward at gmail.com  Sun Feb  8 19:07:43 2009
From: michael.bedward at gmail.com (Michael Bedward)
Date: Mon, 9 Feb 2009 14:07:43 +1100
Subject: [antlr-interest] multiple tree walkers
Message-ID: <e24c4c270902081907r287d7aa6ma176e6b580a33ebe@mail.gmail.com>

Hi folks,

I'm working on a little DSL, called jiffle, to create raster images
from maths expressions.  I build an initial AST from the input jiffle
script, and next use a couple of tree walkers to (1) check for
undefined vars and (2) categorize vars on whether thay depend on pixel
position or not.

The grammar for each of these tree-walkers is essentially the same as
that for the token parser, except that only a very small number of
rules / sub-rules have actions.  Everything is working swimmingly at
the moment - but I'm concerned that this approach of cloning a grammar
might be prone to error as the language evolves since it depends on
keeping all of clones in sync.

Are there other approaches / best-practices for writing multiple tree walkers ?

cheers
Michael

From Vitaliy at dbsophic.com  Sun Feb  8 23:11:15 2009
From: Vitaliy at dbsophic.com (Vitaliy)
Date: Mon, 9 Feb 2009 09:11:15 +0200
Subject: [antlr-interest] Antlr won't backtrack?
In-Reply-To: <94B43E6A-821F-4A34-BC4E-D44233864138@cs.usfca.edu>
References: <B0DE8B66453D0F4AA67D2A150934999B01195F14FA83@ex01.dbsophicHQ.com>
	<94B43E6A-821F-4A34-BC4E-D44233864138@cs.usfca.edu>
Message-ID: <B0DE8B66453D0F4AA67D2A150934999B01195F14FABC@ex01.dbsophicHQ.com>

Hi Ter,

Thanks for your quick response!

I'm still confused:

1.       What can I do to suggest Antlr to consider the other alternative, and backtrack instead of failing?

2.       Shouldn't the backtrack option do just that - make Antlr backtrack if it has failed upon a given input?

3.       Why would the variable alternative effect its behavior?

Thanks allot for your help,
Vitaliy

From: Terence Parr [mailto:parrt at cs.usfca.edu]
Sent: Sunday, February 08, 2009 19:46
To: Vitaliy
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Antlr won't backtrack?


On Feb 8, 2009, at 2:48 AM, Vitaliy wrote:
root                        : statements EOF;
statements            : (statement)+;
statement             : label
                                  | keyword
                                  | variable
                                  ;

identifier               : Identifier;
label                       : identifier COLON;
keyword                : KEYWORD (identifier)?;
variable                 : identifier;


"keyword label:" will always match rule keyword and then fail.  ANTLR will match greedily because you told it to shut up and backtrack.  It's hiding the warning that identifier can match now or later (during statements loop).

Ter


__________ Information from ESET NOD32 Antivirus, version of virus signature database 3837 (20090208) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090209/49a98b1b/attachment.html 

From Vitaliy at dbsophic.com  Sun Feb  8 23:24:51 2009
From: Vitaliy at dbsophic.com (Vitaliy)
Date: Mon, 9 Feb 2009 09:24:51 +0200
Subject: [antlr-interest] Antlr won't backtrack?
In-Reply-To: <498F2E2D.1050907@gmx.de>
References: <B0DE8B66453D0F4AA67D2A150934999B01195F14FA83@ex01.dbsophicHQ.com>
	<498F2E2D.1050907@gmx.de>
Message-ID: <B0DE8B66453D0F4AA67D2A150934999B01195F14FABE@ex01.dbsophicHQ.com>

Hi Johannes,

Thanks for pointing that one out.
I was unaware that there is another target for c#.
What are the differences between the two?
I couldn't find too much about it on the website..

Thanks,
Vitaliy

-----Original Message-----
From: Johannes Luber [mailto:jaluber at gmx.de]
Sent: Sunday, February 08, 2009 21:11
To: Vitaliy
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Antlr won't backtrack?

Vitaliy schrieb:
...
>
> options
> {
>                 language = CSharp;
>                 backtrack=true;
>                 memoize=true;
> }

One other thing: You are using the CSharp target for your grammar. As it
will be removed in ANTLR 3.2, you should switch to the CSharp2 target,
if you don't have to use .NET 1.1.

Johannes





__________ Information from ESET NOD32 Antivirus, version of virus signature database 3837 (20090208) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com



__________ Information from ESET NOD32 Antivirus, version of virus signature database 3837 (20090208) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com


From oliver.zeigermann at gmail.com  Mon Feb  9 00:51:28 2009
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Mon, 9 Feb 2009 09:51:28 +0100
Subject: [antlr-interest] multiple tree walkers
In-Reply-To: <e24c4c270902081907r287d7aa6ma176e6b580a33ebe@mail.gmail.com>
References: <e24c4c270902081907r287d7aa6ma176e6b580a33ebe@mail.gmail.com>
Message-ID: <9da4f4520902090051u5340e2c5vbef37b75717c16c9@mail.gmail.com>

Hi Michael!

I do the same thing and have the same concerns. I have no better
solution now, but ANTLR 3.2 will feature pattern based tree rewriting
which might solve this:

http://www.antlr.org/wiki/display/~admin/2008/11/30/Example+tree+rewriting+with+patterns

I set up a page where I share my experience with multiple tree
transformer stages:

http://www.antlr.org/wiki/display/ANTLR3/Complex+tree+transformations+using+cascading+tree+rewriters

Maybe you would like to add yours?

-Oliver

2009/2/9 Michael Bedward <michael.bedward at gmail.com>:
> Hi folks,
>
> I'm working on a little DSL, called jiffle, to create raster images
> from maths expressions.  I build an initial AST from the input jiffle
> script, and next use a couple of tree walkers to (1) check for
> undefined vars and (2) categorize vars on whether thay depend on pixel
> position or not.
>
> The grammar for each of these tree-walkers is essentially the same as
> that for the token parser, except that only a very small number of
> rules / sub-rules have actions.  Everything is working swimmingly at
> the moment - but I'm concerned that this approach of cloning a grammar
> might be prone to error as the language evolves since it depends on
> keeping all of clones in sync.
>
> Are there other approaches / best-practices for writing multiple tree walkers ?
>
> cheers
> Michael
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From steve at flasby.org  Mon Feb  9 01:32:18 2009
From: steve at flasby.org (Steve Flasby)
Date: Mon, 09 Feb 2009 10:32:18 +0100
Subject: [antlr-interest] AntlrWorks - Interpreter fails for ! and ~
Message-ID: <498FF822.90701@flasby.org>

Chaps,
     My first post here, I hope someone can help.

I have updated to AntlrWorks 1.2.2 from 1.2.1 but find I have problems
both with using the interpreter and parsing.

I have the classic String rule:

STRING_LITERAL
   : '"'!
     ( '"' '"'!
     | ~('"'|'\n'|'\r')
     )*
     ( '"'!
     | // nothing -- write error message
     )
    ;

The presence of the '!' in this code causes the grammar checking to fail
with the message 'Illegal output option' is there an alternative I
should be using instead?

Also (but I am less sure about this) I think the '~' is not being
correctly recognized as any string in my test input which I expect to
match this fails. Has this been reported by anyone else?


Hope someone can offer me a hint.

Regards - Steve

From antlr at mirality.co.nz  Mon Feb  9 02:13:01 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Mon, 09 Feb 2009 23:13:01 +1300
Subject: [antlr-interest] AntlrWorks - Interpreter fails for ! and ~
In-Reply-To: <498FF822.90701@flasby.org>
References: <498FF822.90701@flasby.org>
Message-ID: <20090209101341.3EA7B341847C@www.antlr.org>

At 22:32 9/02/2009, Steve Flasby wrote:
 >I have the classic String rule:
 >
 >STRING_LITERAL
 >   : '"'!
 >     ( '"' '"'!
 >     | ~('"'|'\n'|'\r')
 >     )*
 >     ( '"'!
 >     | // nothing -- write error message
 >     )
 >    ;
 >
 >The presence of the '!' in this code causes the grammar checking 
to
 >fail with the message 'Illegal output option' is there an
 >alternative I should be using instead?

The use of ! in lexer rules is a v2ism, and doesn't work in 
v3.  (! is still supported in parser rules to indicate tokens that 
shouldn't be included in the AST.)

See also:
   http://www.antlr.org/wiki/pages/viewpage.action?pageId=1461

 >Also (but I am less sure about this) I think the '~' is not 
being
 >correctly recognized as any string in my test input which I 
expect
 >to match this fails. Has this been reported by anyone else?

~ does work (but only when used on sets, not sequences; what you 
have above should be ok though).  Possibly the !s are confusing 
it; try taking them out and see if it behaves better.

There might also be an issue with your 'unterminated string' 
clause.  I'm not entirely certain, but I suspect that it could 
cause something weird to happen.  Try changing it to just a simple 
'"' with no alternative and see if that helps.


From JALuber at gmx.de  Mon Feb  9 04:01:04 2009
From: JALuber at gmx.de (Johannes Luber)
Date: Mon, 09 Feb 2009 13:01:04 +0100
Subject: [antlr-interest] Antlr won't backtrack?
In-Reply-To: <B0DE8B66453D0F4AA67D2A150934999B01195F14FABE@ex01.dbsophicHQ.com>
References: <B0DE8B66453D0F4AA67D2A150934999B01195F14FA83@ex01.dbsophicHQ.com>
	<498F2E2D.1050907@gmx.de>
	<B0DE8B66453D0F4AA67D2A150934999B01195F14FABE@ex01.dbsophicHQ.com>
Message-ID: <20090209120104.207210@gmx.net>

> Hi Johannes,
> 
> Thanks for pointing that one out.
> I was unaware that there is another target for c#.
> What are the differences between the two?
> I couldn't find too much about it on the website..
> 
> Thanks,
> Vitaliy

Basically the website describes all the differences for now. I never got around to create a real .NET 2 runtime as I planned and with the upcoming CSharp3 target I won't make this effort anymore. If your grammar works with the CSharp option, then I doubt that changing to CSharp2 breaks it.

This will be different for CSharp3 as it is created with .NETism in mind (turning setter/getters into propertes, proper casing, etc). I plan to alleviate this with adding the additional properties/method, while deprecating the old ones, so unchanged grammars will still work and users know to take the appropriate action.

Johannes
> 
> -----Original Message-----
> From: Johannes Luber [mailto:jaluber at gmx.de]
> Sent: Sunday, February 08, 2009 21:11
> To: Vitaliy
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Antlr won't backtrack?
> 
> Vitaliy schrieb:
> ...
> >
> > options
> > {
> >                 language = CSharp;
> >                 backtrack=true;
> >                 memoize=true;
> > }
> 
> One other thing: You are using the CSharp target for your grammar. As it
> will be removed in ANTLR 3.2, you should switch to the CSharp2 target,
> if you don't have to use .NET 1.1.
> 
> Johannes
> 
> 
> 
> 
> 
> __________ Information from ESET NOD32 Antivirus, version of virus
> signature database 3837 (20090208) __________
> 
> The message was checked by ESET NOD32 Antivirus.
> 
> http://www.eset.com
> 
> 
> 
> __________ Information from ESET NOD32 Antivirus, version of virus
> signature database 3837 (20090208) __________
> 
> The message was checked by ESET NOD32 Antivirus.
> 
> http://www.eset.com

-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt? Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger01

From JALuber at gmx.de  Mon Feb  9 07:18:41 2009
From: JALuber at gmx.de (Johannes Luber)
Date: Mon, 09 Feb 2009 16:18:41 +0100
Subject: [antlr-interest] Antlr won't backtrack?
In-Reply-To: <B0DE8B66453D0F4AA67D2A150934999B01195F14FADF@ex01.dbsophicHQ.com>
References: <B0DE8B66453D0F4AA67D2A150934999B01195F14FA83@ex01.dbsophicHQ.com>
	<498F2E2D.1050907@gmx.de>
	<B0DE8B66453D0F4AA67D2A150934999B01195F14FABE@ex01.dbsophicHQ.com>
	<20090209120104.207210@gmx.net>
	<B0DE8B66453D0F4AA67D2A150934999B01195F14FADF@ex01.dbsophicHQ.com>
Message-ID: <20090209151841.8020@gmx.net>

> Sounds great..
> Do you believe it will improve performance?
> 
> Vitaliy

To a certain extent, yes. But I haven't done serious profiling yet, so I can't say if we happen to squash the real bottlenecks. Until CSharp3 is finshed, increased performance has a low priority. At least it shouldn't deteriorate.

Johannes
> 
> -----Original Message-----
> From: Johannes Luber [mailto:JALuber at gmx.de]
> Sent: Monday, February 09, 2009 14:01
> To: Vitaliy
> Cc: antlr-interest at antlr.org
> Subject: Re: RE: [antlr-interest] Antlr won't backtrack?
> 
> > Hi Johannes,
> >
> > Thanks for pointing that one out.
> > I was unaware that there is another target for c#.
> > What are the differences between the two?
> > I couldn't find too much about it on the website..
> >
> > Thanks,
> > Vitaliy
> 
> Basically the website describes all the differences for now. I never got
> around to create a real .NET 2 runtime as I planned and with the upcoming
> CSharp3 target I won't make this effort anymore. If your grammar works with
> the CSharp option, then I doubt that changing to CSharp2 breaks it.
> 
> This will be different for CSharp3 as it is created with .NETism in mind
> (turning setter/getters into propertes, proper casing, etc). I plan to
> alleviate this with adding the additional properties/method, while deprecating
> the old ones, so unchanged grammars will still work and users know to take
> the appropriate action.
> 
> Johannes
> >
> > -----Original Message-----
> > From: Johannes Luber [mailto:jaluber at gmx.de]
> > Sent: Sunday, February 08, 2009 21:11
> > To: Vitaliy
> > Cc: antlr-interest at antlr.org
> > Subject: Re: [antlr-interest] Antlr won't backtrack?
> >
> > Vitaliy schrieb:
> > ...
> > >
> > > options
> > > {
> > >                 language = CSharp;
> > >                 backtrack=true;
> > >                 memoize=true;
> > > }
> >
> > One other thing: You are using the CSharp target for your grammar. As it
> > will be removed in ANTLR 3.2, you should switch to the CSharp2 target,
> > if you don't have to use .NET 1.1.
> >
> > Johannes
> >
> >
> >
> >
> >
> > __________ Information from ESET NOD32 Antivirus, version of virus
> > signature database 3837 (20090208) __________
> >
> > The message was checked by ESET NOD32 Antivirus.
> >
> > http://www.eset.com
> >
> >
> >
> > __________ Information from ESET NOD32 Antivirus, version of virus
> > signature database 3837 (20090208) __________
> >
> > The message was checked by ESET NOD32 Antivirus.
> >
> > http://www.eset.com
> 
> --
> Psssst! Schon vom neuen GMX MultiMessenger geh?rt? Der kann`s mit allen:
> http://www.gmx.net/de/go/multimessenger01
> 
> 
> 
> 
> 
> __________ Information from ESET NOD32 Antivirus, version of virus
> signature database 3838 (20090209) __________
> 
> The message was checked by ESET NOD32 Antivirus.
> 
> http://www.eset.com
> 
> 
> 
> __________ Information from ESET NOD32 Antivirus, version of virus
> signature database 3838 (20090209) __________
> 
> The message was checked by ESET NOD32 Antivirus.
> 
> http://www.eset.com

-- 
Jetzt 1 Monat kostenlos! GMX FreeDSL - Telefonanschluss + DSL 
f?r nur 17,95 Euro/mtl.!* http://dsl.gmx.de/?ac=OM.AD.PD003K11308T4569a

-- 
Jetzt 1 Monat kostenlos! GMX FreeDSL - Telefonanschluss + DSL 
f?r nur 17,95 Euro/mtl.!* http://dsl.gmx.de/?ac=OM.AD.PD003K11308T4569a

From micha-1 at fantasymail.de  Mon Feb  9 07:42:37 2009
From: micha-1 at fantasymail.de (micha)
Date: Mon, 9 Feb 2009 16:42:37 +0100
Subject: [antlr-interest] Heterogeneous tree nodes question
Message-ID: <200902091642.37948.micha-1@fantasymail.de>

in this docu:

http://www.antlr.org/wiki/display/ANTLR3/Tree+construction#Treeconstruction-
treegrammarAST

there is as sample on how to use the node token option to indicate node types 
for parsers and tree parsers.

I've tried this and the parser allocates my new class correctly, but how do I 
access the class in the treeparser?
the parser generates the following tree node (Fub is my new class):
root_1 = (CommonTree)adaptor.becomeRoot(new Fub(ADDRESS, 
(arg!=null)?arg.data:null)), root_1);

So the Fub is generated, but in the Treeparser the Fub ist lost, even if I 
write the rule as follows:

test: ^ADDRESS<Fub> ...  {
	   //where is my Fub data?
	}
	;

it seems, that in the treeparser the <Fub> is lost...

cheers
 Michael



From sprevrha at gmail.com  Mon Feb  9 08:03:03 2009
From: sprevrha at gmail.com (Sven Prevrhal)
Date: Mon, 9 Feb 2009 08:03:03 -0800
Subject: [antlr-interest] [WARNING - NOT VIRUS SCANNED] Re: natural-language
 parsing problem: How to distinguish between special words and regular words
Message-ID: <015f01c98acf$e3905480$aab0fd80$@com>

Markus,

Thanks - almost totally worked! The only thing that needed change was 

 

unit: {IsUnit(input.LT(1).Text)}?=> WORD;

 

instead of

 

unit: {IsUnit(input.LA(1).Text)}?=> WORD;

 

Cheers, Sven

 

>>> Markus wrote:

 

I don't know much about your grammar, but if you want to do this then 

gated semantic predicates might help:

 

unit: {IsUnit(input.LA(1).Text)}?=> WORD;

 

This uses the IsUnit method to decide if the next token is a unit 

without taking the token off the token stream. If IsUnit returns false 

the unit rule will be invisible to the parser and it will try to find 

another rule that matches.

 

Markus

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090209/0f91622a/attachment.html 

From paul.bouche at nsn.com  Mon Feb  9 08:28:45 2009
From: paul.bouche at nsn.com (=?ISO-8859-15?Q?=22Paul_Bouch=E9_=28NSN=29=22?=)
Date: Mon, 09 Feb 2009 17:28:45 +0100
Subject: [antlr-interest] AntltWorks 1.2.2 on windows output path problem
Message-ID: <499059BD.3010009@nsn.com>

Hi,

I am using AntlrWorks on Windows XP SP2 Java version:
java version "1.6.0_04"
Java(TM) SE Runtime Environment (build 1.6.0_04-b12)
Java HotSpot(TM) Client VM (build 10.0-b19, mixed mode, sharing)

When I try to generate a parser/lexer I get the error:
'directory "C:\bla\C:\bla" not found'

I just upgraded from AntlrWorks 1.1.7, after I wanted to change the 
default output directory it stopped working and created the wrong path.

I could delete all my preferences, but I want to keep the list of 
recently used files.

BR,
Paul

-- 
Paul Bouch?
Voice: +49 30 590080-1284
 
Nokia Siemens Networks GmbH & Co. KG, An den Treptowers 1, 12435 Berlin, Germany
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRA 88537
WEEE-Reg.-Nr.: DE 52984304

Pers?nlich haftende Gesellschafterin / General Partner: Nokia Siemens Networks Management GmbH
Gesch?ftsleitung / Board of Directors: Lydia Sommer, Olaf Horsthemke
Vorsitzender des Aufsichtsrats / Chairman of supervisory board: Lauri Kivinen
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRB 163416


From jimi at temporal-wave.com  Mon Feb  9 08:50:38 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 09 Feb 2009 08:50:38 -0800
Subject: [antlr-interest] Antlr won't backtrack?
In-Reply-To: <B0DE8B66453D0F4AA67D2A150934999B01195F14FABC@ex01.dbsophicHQ.com>
References: <B0DE8B66453D0F4AA67D2A150934999B01195F14FA83@ex01.dbsophicHQ.com>	<94B43E6A-821F-4A34-BC4E-D44233864138@cs.usfca.edu>
	<B0DE8B66453D0F4AA67D2A150934999B01195F14FABC@ex01.dbsophicHQ.com>
Message-ID: <49905EDE.1000109@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090209/8215c4e2/attachment.html 

From frestrepo at dtic.ua.es  Mon Feb  9 08:53:43 2009
From: frestrepo at dtic.ua.es (Felipe Restrepo Calle)
Date: Mon, 09 Feb 2009 17:53:43 +0100
Subject: [antlr-interest] Rule exception
Message-ID: <49905F97.3040704@dtic.ua.es>

Hi!

I'm new in ANTLR? world. Id like to know how to add a rule exception. 
For example i have a rule for comments, that looks like:

COMMENT:    ( ';' | '//' ) .* NEWLINE { $channel = HIDDEN; } ;

But there is ONLY one special case where i need to catch something like: 
"//REG.........." and obviously  doesn't work because the compiler 
assume that it is another comment and hide it to the parser. how can i 
add a kind of exception to this rule that allow me to catch "//REG" and 
also other comments? thanks for any help.

Regards,

Felipe Restrepo



From Andreas.Meyer at smartshift.de  Mon Feb  9 09:37:35 2009
From: Andreas.Meyer at smartshift.de (Andreas Meyer)
Date: Mon, 9 Feb 2009 18:37:35 +0100
Subject: [antlr-interest] multiple tree walkers
In-Reply-To: <9da4f4520902090051u5340e2c5vbef37b75717c16c9@mail.gmail.com>
References: <e24c4c270902081907r287d7aa6ma176e6b580a33ebe@mail.gmail.com>
	<9da4f4520902090051u5340e2c5vbef37b75717c16c9@mail.gmail.com>
Message-ID: <002301c98add$18aebc80$4a0c3580$@Meyer@smartshift.de>

Hi!

What I did: have a "base" tree grammar with only the rules, but no actions.
Then, have a "do something" tree grammar that imports the base grammar, and
only overrides the interesting rules. However, it seems that ANTLR 3.1
currently has a bug when using it like this (see previous mails), so you
need to uncomment some lines within the ANTLR sources.

Cheers,
Andreas Meyer

-----Urspr?ngliche Nachricht-----
Von: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] Im Auftrag von Oliver Zeigermann
Gesendet: Montag, 9. Februar 2009 09:51
An: Michael Bedward
Cc: antlr-interest at antlr.org
Betreff: Re: [antlr-interest] multiple tree walkers

Hi Michael!

I do the same thing and have the same concerns. I have no better
solution now, but ANTLR 3.2 will feature pattern based tree rewriting
which might solve this:

http://www.antlr.org/wiki/display/~admin/2008/11/30/Example+tree+rewriting+w
ith+patterns

I set up a page where I share my experience with multiple tree
transformer stages:

http://www.antlr.org/wiki/display/ANTLR3/Complex+tree+transformations+using+
cascading+tree+rewriters

Maybe you would like to add yours?

-Oliver

2009/2/9 Michael Bedward <michael.bedward at gmail.com>:
> Hi folks,
>
> I'm working on a little DSL, called jiffle, to create raster images
> from maths expressions.  I build an initial AST from the input jiffle
> script, and next use a couple of tree walkers to (1) check for
> undefined vars and (2) categorize vars on whether thay depend on pixel
> position or not.
>
> The grammar for each of these tree-walkers is essentially the same as
> that for the token parser, except that only a very small number of
> rules / sub-rules have actions.  Everything is working swimmingly at
> the moment - but I'm concerned that this approach of cloning a grammar
> might be prone to error as the language evolves since it depends on
> keeping all of clones in sync.
>
> Are there other approaches / best-practices for writing multiple tree
walkers ?
>
> cheers
> Michael
 

__________ Hinweis von ESET Smart Security, Signaturdatenbank-Version 3839
(20090209) __________

E-Mail wurde gepr?ft mit ESET Smart Security.

http://www.eset.com
 


From cscott at cscott.net  Mon Feb  9 11:55:45 2009
From: cscott at cscott.net (C. Scott Ananian)
Date: Mon, 9 Feb 2009 14:55:45 -0500
Subject: [antlr-interest] Bug in DFA matching?
Message-ID: <c6d9bea0902091155l14a17623x5d1d787d45b9e81b@mail.gmail.com>

I have a grammar for a configuration file where indentation is
significant, as in Python.  It contains the following lexer rules:

WS
  : {getCharPositionInLine()!=1}? // not start-of-line whitespace
  ( ' ' | TAB )
    { $channel=HIDDEN; }
    ;
// whitespace at start of line used for INDENT processing
INITIAL_WS
	: {getCharPositionInLine()==1 && !afterIndent}? // at start of line.
	( ' ' | TAB )*
    { this.afterIndent=true; }
    ;

Note the star in the INITIAL_WS rule, which means that *every* line
should emit an INITIAL_WS token, possibly matching nothing, before
matching anything else.

The generated DFA contains the following code:
                    case 0 :
                        int LA10_25 = input.LA(1);


                        int index10_25 = input.index();
                        input.rewind();
                        s = -1;
                        if ( ((getCharPositionInLine()!=1)) ) {s = 26;}

                        else if ( ((getCharPositionInLine()==1 &&
!afterIndent)) ) {s = 6;}


                        input.seek(index10_25);
                        if ( s>=0 ) return s;
                        break;

which seems to be "obviously wrong" -- getCharPosition is going to be
evaluated in the rewound state, and then we're going to advance the
input and return, which will then invoke the proper lexer rule and
re-evaluate getCharPostion() in the *advanced* state, not where the
DFA evaluated it.

I don't quite understand the DFA well enough yet to attempt a proper
fix.  Anyone want to lend a hand?

Thanks--
 --scott

-- 
                         ( http://cscott.net/ )

From antlr at mirality.co.nz  Mon Feb  9 12:12:23 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 10 Feb 2009 09:12:23 +1300
Subject: [antlr-interest] Bug in DFA matching?
In-Reply-To: <c6d9bea0902091155l14a17623x5d1d787d45b9e81b@mail.gmail.com
 >
References: <c6d9bea0902091155l14a17623x5d1d787d45b9e81b@mail.gmail.com>
Message-ID: <20090209201246.3E70B3418486@www.antlr.org>

At 08:55 10/02/2009, C. Scott Ananian wrote:
 >// whitespace at start of line used for INDENT processing
 >INITIAL_WS
 >	: {getCharPositionInLine()==1 && !afterIndent}? // at start of
 >line.
 >	( ' ' | TAB )*
 >    { this.afterIndent=true; }
 >    ;
 >
 >Note the star in the INITIAL_WS rule, which means that *every*
 >line should emit an INITIAL_WS token, possibly matching nothing, 

 >before matching anything else.

You must never do that.  If a lexer rule can ever match nothing, 
then it can always match nothing, and will therefore produce an 
infinite number of matching-nothing tokens, causing an infinite 
loop (until you run out of memory).  Top-level lexer rules must 
always match at least one character.


From jimi at temporal-wave.com  Mon Feb  9 12:17:07 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 09 Feb 2009 12:17:07 -0800
Subject: [antlr-interest] Bug in DFA matching?
In-Reply-To: <c6d9bea0902091155l14a17623x5d1d787d45b9e81b@mail.gmail.com>
References: <c6d9bea0902091155l14a17623x5d1d787d45b9e81b@mail.gmail.com>
Message-ID: <49908F43.7010903@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090209/caae75de/attachment.html 

From cscott at cscott.net  Mon Feb  9 15:14:21 2009
From: cscott at cscott.net (C. Scott Ananian)
Date: Mon, 9 Feb 2009 18:14:21 -0500
Subject: [antlr-interest] Bug in DFA matching?
In-Reply-To: <49908e37.080bca0a.0c3c.ffff9884SMTPIN_ADDED@mx.google.com>
References: <c6d9bea0902091155l14a17623x5d1d787d45b9e81b@mail.gmail.com>
	<49908e37.080bca0a.0c3c.ffff9884SMTPIN_ADDED@mx.google.com>
Message-ID: <c6d9bea0902091514o3b51a526y22677b695d5254a@mail.gmail.com>

On Mon, Feb 9, 2009 at 3:12 PM, Gavin Lambert <antlr at mirality.co.nz> wrote:
> At 08:55 10/02/2009, C. Scott Ananian wrote:
>>// whitespace at start of line used for INDENT processing
>>INITIAL_WS
>>       : {getCharPositionInLine()==1 && !afterIndent}? // at start of
>>line.
>>       ( ' ' | TAB )*
>>    { this.afterIndent=true; }
>>    ;
>>
>>Note the star in the INITIAL_WS rule, which means that *every*
>>line should emit an INITIAL_WS token, possibly matching nothing,
>>before matching anything else.
>
> You must never do that.  If a lexer rule can ever match nothing, then it can
> always match nothing, and will therefore produce an infinite number of
> matching-nothing tokens, causing an infinite loop (until you run out of
> memory).  Top-level lexer rules must always match at least one character.

I think you misunderstood me, or misread the grammer.  It matches
nothing *at the beginning of the line* and then afterIndent is set to
false, and it doesn't match any more.
That's the intended behavior.  It worked in ANTLRv2; it seems to be a
regression in ANTLRv3.
 --scott

-- 
                         ( http://cscott.net/ )

From cscott at cscott.net  Mon Feb  9 15:21:44 2009
From: cscott at cscott.net (C. Scott Ananian)
Date: Mon, 9 Feb 2009 18:21:44 -0500
Subject: [antlr-interest] Bug in DFA matching?
In-Reply-To: <49908F43.7010903@temporal-wave.com>
References: <c6d9bea0902091155l14a17623x5d1d787d45b9e81b@mail.gmail.com>
	<49908F43.7010903@temporal-wave.com>
Message-ID: <c6d9bea0902091521q19357953p329fc9d899ad35a7@mail.gmail.com>

On Mon, Feb 9, 2009 at 3:17 PM, Jim Idle <jimi at temporal-wave.com> wrote:
> C. Scott Ananian wrote:
>
> I have a grammar for a configuration file where indentation is
> significant, as in Python.  It contains the following lexer rules:
>
> WS
>   : {getCharPositionInLine()!=1}? // not start-of-line whitespace
>   ( ' ' | TAB )
>     { $channel=HIDDEN; }
>     ;
> // whitespace at start of line used for INDENT processing
> INITIAL_WS
> 	: {getCharPositionInLine()==1 && !afterIndent}? // at start of line.
> 	( ' ' | TAB )*
>     { this.afterIndent=true; }
>     ;
> First try a gated predicate rather than straight semantic predicate and fix
> your INITIAL_WS so that it does not match a completely empty sequence (+ not
> *) :
>
> {getCharPositionInLine()!=1}?=>

The gated predicate did the trick, thanks!  (The * to + change wasn't
necessary; ANTLR's fine with matching an empty sequence, as long as
you use a gated predicate I guess.)
 --scott

-- 
                         ( http://cscott.net/ )

From des at deshartman.com  Mon Feb  9 15:53:50 2009
From: des at deshartman.com (Des Hartman)
Date: Tue, 10 Feb 2009 10:53:50 +1100
Subject: [antlr-interest] Fwd: Referencing an expression on another parser
	tree branch
In-Reply-To: <8773d42e0902081535j77c18724s453c68ce676a6469@mail.gmail.com>
References: <8773d42e0902081535j77c18724s453c68ce676a6469@mail.gmail.com>
Message-ID: <8773d42e0902091553j7471de10t4d1caad16d02a0a1@mail.gmail.com>

Hi,

I have been working on a formula input parser, using a lot of the code
Robert Stehwien wrote here
http://arcanearcade.blogspot.com/2008/04/using-antlr-to-create-excel-like.htmlI
changed the code to use the concept of a cell reference instead of
predefined values.

Think of this as an Excel spreadsheet where all the formulas of a column are
the same, so I refer to a column like this "=B+5-SUM(8,A)" for example. I am
stroring the row as a ";" separated string and thus process the ";" as part
of the input. I can get neat separation between cells and in the parser tree
you can see the value of each cell. this means I can store the values of
column A,B and C as follows:

34;12;=B+5-SUM(8,A)

I have attached my grammar code below and if you run the formula, you get a
nice grammar tree showing the decoded cells and references.

Question I have is, is there a way to now decode the references to the
previous cells A and B? In effect I want to "copy" the tress that the actual
cell has and then calculate the value. This is indicated by the red arrows
in the attached tree grammar.

another reason for doing this is that I want to check for circular
references while doing this, so if cell A has any references to cell C for
example, I will flag a circular reference.

I have been learning as fast as I can and really just need a nudge in the
right direction on this one, so any help would be great. Do I need to build
a specific tree grammar to do this?


Thanks
Des
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090210/c24e79c6/attachment.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: CellFormula.g
Type: application/octet-stream
Size: 2407 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090210/c24e79c6/attachment.obj 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: cellformulatree.GIF
Type: image/gif
Size: 37088 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090210/c24e79c6/attachment.gif 

From cscott at cscott.net  Mon Feb  9 16:04:30 2009
From: cscott at cscott.net (C. Scott Ananian)
Date: Mon, 9 Feb 2009 19:04:30 -0500
Subject: [antlr-interest] Bug in DFA matching?
In-Reply-To: <c6d9bea0902091521q19357953p329fc9d899ad35a7@mail.gmail.com>
References: <c6d9bea0902091155l14a17623x5d1d787d45b9e81b@mail.gmail.com>
	<49908F43.7010903@temporal-wave.com>
	<c6d9bea0902091521q19357953p329fc9d899ad35a7@mail.gmail.com>
Message-ID: <c6d9bea0902091604s1da53dx9ffbebdd3a219dfb@mail.gmail.com>

On Mon, Feb 9, 2009 at 6:21 PM, C. Scott Ananian <cscott at cscott.net> wrote:
> On Mon, Feb 9, 2009 at 3:17 PM, Jim Idle <jimi at temporal-wave.com> wrote:
>> C. Scott Ananian wrote:
>>
>> I have a grammar for a configuration file where indentation is
>> significant, as in Python.  It contains the following lexer rules:
>>
>> WS
>>   : {getCharPositionInLine()!=1}? // not start-of-line whitespace
>>   ( ' ' | TAB )
>>     { $channel=HIDDEN; }
>>     ;
>> // whitespace at start of line used for INDENT processing
>> INITIAL_WS
>>       : {getCharPositionInLine()==1 && !afterIndent}? // at start of line.
>>       ( ' ' | TAB )*
>>     { this.afterIndent=true; }
>>     ;
>> First try a gated predicate rather than straight semantic predicate and fix
>> your INITIAL_WS so that it does not match a completely empty sequence (+ not
>> *) :
>>
>> {getCharPositionInLine()!=1}?=>
>
> The gated predicate did the trick, thanks!  (The * to + change wasn't
> necessary; ANTLR's fine with matching an empty sequence, as long as
> you use a gated predicate I guess.)

(In case anyone is following along at home) ANTLR doesn't have a
problem with matching an empty sequence, but the lexer does try to use
the longest match available (not the first matching rule).  This
doesn't seem to be clearly documented anywhere, and it's a change from
ANTLRv2 (or a bug?).  The gated predicate works fine, but you need to
add {!afterIndent}?=> to all the other rules in your lexer to ensure
that the zero-length INITIAL_WS rule actually matches in preference to
all the other rules, since even a one-character match from another
rule will prevent INITIAL_WS from being chosen.
 --scott

-- 
                         ( http://cscott.net/ )

From michael.bedward at gmail.com  Mon Feb  9 16:48:57 2009
From: michael.bedward at gmail.com (Michael Bedward)
Date: Tue, 10 Feb 2009 11:48:57 +1100
Subject: [antlr-interest] multiple tree walkers
In-Reply-To: <-8804911314030284963@unknownmsgid>
References: <e24c4c270902081907r287d7aa6ma176e6b580a33ebe@mail.gmail.com>
	<9da4f4520902090051u5340e2c5vbef37b75717c16c9@mail.gmail.com>
	<-8804911314030284963@unknownmsgid>
Message-ID: <e24c4c270902091648o50920a6fw3d8ec0e09432e34f@mail.gmail.com>

Andreas - many thanks for the tip about grammar imports.  That sound
like a good way to do some of what I'm trying (and learning how) to
do.  I didn't know about this since composite grammars are more recent
than the book (my primary learning resource so far).

Oliver - thanks for the useful page links. I'm only just getting up to
the tree transformation stuff.  in my use case there will be some
variables / expressions that depend on pixel position and some that
don't.  So it makes sense to calculate the non-positional vars, store
them as constants and prune them out of the AST, leaving it with only
the positional components to be evaluated at each image pixel
position.

Michael

From rschneid at bridgewater.edu  Mon Feb  9 18:28:41 2009
From: rschneid at bridgewater.edu (Raymond J. Schneider)
Date: Mon, 9 Feb 2009 21:28:41 -0500
Subject: [antlr-interest] ANTLR installation
Message-ID: <172455A9DFDEF941A54573F5463F106528D859F434@bcex01.Bridgewater.local>


I'm trying to use ANTLR in a compiler design class and have been running into installation issues.
We can make ANTLRWorks run but seem to have difficulties with the runtime aspects and none of my student have been able to get it all running.
I think they are mostly running Windows Vista although I'm running Windows XP.

Is there a clear up to date installation document that walks through the whole installation with some confirmatory checks at the end?
The biggest issue seems to be setting the CLASSPATH correctly and getting parsers to run outside of the ANTLRWorks environment.

Thanks ahead of time for any help you can offer.

Regards, Ray

--
Ray Schneider,PE, Ph.D
Associate Professor
Math and Computer Science
Bridgewater College
http://www.bridgewater.edu/~rschneid/
http://theweedlessgarden.blogspot.com

From spprtmail09 at yahoo.com  Tue Feb 10 00:26:46 2009
From: spprtmail09 at yahoo.com (Meena Vinod)
Date: Tue, 10 Feb 2009 00:26:46 -0800 (PST)
Subject: [antlr-interest] Exception handling doubts for C language.
Message-ID: <175232.73237.qm@web112219.mail.gq1.yahoo.com>

Hello,
I need help on the following grammar file:

---------------------------
grammar Test;

options
{
   output = AST;
   language = C;
   ASTLabelType    = pANTLR3_BASE_TREE;
}

tokens
{
    T_COMMAND;
    T_ACTION;
    T_OPT;
}

validate_cmd:        command  EOF -> ^(T_COMMAND command);

command:                action1 | action2;

action1:             action1_name (action1_opt)* ;

action2:            action2_name (action2_opt)* ;

action1_name:            ACTION1 -> ^(T_ACTION ACTION1) ;

action2_name:            ACTION2 -> ^(T_ACTION ACTION2) ;

action1_opt:            tsep action1_tree -> ^(T_OPT action1_tree);

action1_tree:            (common_options | wait_option)+;

action2_opt:            tsep action2_tree -> ^(T_OPT action2_tree);

action2_tree:            (common_options)+;

common_options:            version_option | help_option ;

wait_option:            WAIT tsep Digit+;

version_option:            VERSION_OPTION;

help_option:            HELP_OPTION tsep Literal+;

ACTION1    :            'copy';

ACTION2    :            'cut';

VERSION_OPTION:         '-v'('ersion')?;

HELP_OPTION:             '-h'('elp')?;

WAIT    :            '-w'('ait')?;

SEMI:                ';' ;

fragment DIGIT    :     ('0'..'9');

fragment ALPHA      :    ('a'..'z' | 'A'..'Z')*;

Literal    :        DIGIT | ALPHA;

Digit    :        DIGIT+;

tsep    :           WSP;

WSP    :            ('\u0009' | ' ')+;        
-------------------------------------------------------------------------------

When I enter the command "copy -w aa", where the -w is expecting a digit, I get an early exit exception.

My doubts include the following:
1. How do I handle exceptions when my language option is "C"?

2. More specifically, can I have the "wait_option" rule handle the exception when a digit is not supplied
equivalent of 
   if wait_option:    WAIT tsep Digit+, then continue
   else wait_option:     WAIT tsep <not a digit>, then flag error!


   I dont want to do soemthing like
   wait_option:        WAIT tsep Digit+
               {   //Success
               }
            |
            WAIT tsep NonDigit+
               {    //Failure
               }
            ;
   with the fear that my source code might get bigger.

3. Can I have a common error block, that is whenever any parser has a problem, it executes a common function?

Thanks a ton,
Swift



      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090210/4c160af7/attachment.html 

From liviu.u at gmail.com  Tue Feb 10 01:03:05 2009
From: liviu.u at gmail.com (Liviu U)
Date: Tue, 10 Feb 2009 11:03:05 +0200
Subject: [antlr-interest] ANTLR3 has an equivalent of LA(1)?
Message-ID: <c522653d0902100103s4f3107c8s73223bcc546dea11@mail.gmail.com>

Hi all,

I am new to ANTLR. I have an old grammar to start from. I use antlr3
with CSharp2 target.
The condition does not compile:

 */
NUM_INT
	:	('0'..'9')+ // everything starts with a digit sequence
		(	(	{(LA(2)!='.')&&(LA(2)!=')')}?				// force k=2; avoid ".."
//PSPSPS example ARRAY (.1..99.) OF char; // after .. thinks it's a NUM_REAL
				'.' {state.type = NUM_REAL;}	// dot means we are float
				('0'..'9')+ (EXPONENT)?
			)?
		|	EXPONENT {state.type = NUM_REAL;}	// 'E' means we are float
		)
	;

But,  the function: LA(2)  is not defined? Is there an equivalent?

Thank you

From liviu.u at gmail.com  Tue Feb 10 01:28:36 2009
From: liviu.u at gmail.com (Liviu U)
Date: Tue, 10 Feb 2009 11:28:36 +0200
Subject: [antlr-interest] Is it possible to create a custom "channel"?
Message-ID: <c522653d0902100128j473199e5jc3a43b2055b3c013@mail.gmail.com>

Hi all, i am new to antlr and i have a conceptual problem:

I want to parse delphi pascal source code.
In pascal the preprocessor directive is fast the same as a comment:

directive    { $R *.dfm }

I want to collect the directives also but i dont't want to have them
in the rules. It will be impossible to handle this because
preprocessor directives can appear fast anywhere.

Is there a possibility to create a custom channel and write

COMMENT
    :   '{' WS* '$'  ( options {greedy=false;} : . )* '}' {$channel=CUSTOM;}


Thanks

From antlr at mirality.co.nz  Tue Feb 10 01:43:08 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 10 Feb 2009 22:43:08 +1300
Subject: [antlr-interest] ANTLR installation
In-Reply-To: <172455A9DFDEF941A54573F5463F106528D859F434@bcex01.Bridgewa
	ter.local>
References: <172455A9DFDEF941A54573F5463F106528D859F434@bcex01.Bridgewater.local>
Message-ID: <20090210094332.BEBD73418475@www.antlr.org>

At 15:28 10/02/2009, Raymond J. Schneider wrote:
 >Is there a clear up to date installation document that walks
 >through the whole installation with some confirmatory checks at 
the
 >end?
 >The biggest issue seems to be setting the CLASSPATH correctly 
and
 >getting parsers to run outside of the ANTLRWorks environment.

The easiest way to run it (given that you already have ANTLRWorks) 
is like this:

java -cp path\to\antlrworks-1.x.jar org.antlr.Tool Foo.g

(And yes, you need to name the .jar file in the classpath.  It's 
not sufficient to name the folder where the .jar file sits.)


From ajr24 at u.washington.edu  Tue Feb 10 02:10:04 2009
From: ajr24 at u.washington.edu (Alexander James Rickett)
Date: Tue, 10 Feb 2009 02:10:04 -0800 (PST)
Subject: [antlr-interest] Making function tables...
Message-ID: <Pine.LNX.4.43.0902100210040.32539@hymn31.u.washington.edu>

Hello,

This is a pretty vague question.  I'm using ANTLR to translate COBOL code into use-case diagrams, and when parsing my AST, I need some way to access function bodies at function calls (or whatever functions are called in COBOL).  In my mind, having a table with function's semi-translated subtree, (i.e. the subtree encompassing the function declaration and body) would be just the ticket, but I'm not really sure and function table information has been elusive.  The google search for "ANTLR function table" didn't yield much.  What are your thoughts?

preemptive thanks.



From JALuber at gmx.de  Tue Feb 10 03:24:29 2009
From: JALuber at gmx.de (Johannes Luber)
Date: Tue, 10 Feb 2009 12:24:29 +0100
Subject: [antlr-interest] Is it possible to create a custom "channel"?
In-Reply-To: <c522653d0902100128j473199e5jc3a43b2055b3c013@mail.gmail.com>
References: <c522653d0902100128j473199e5jc3a43b2055b3c013@mail.gmail.com>
Message-ID: <20090210112429.254120@gmx.net>

> Hi all, i am new to antlr and i have a conceptual problem:
> 
> I want to parse delphi pascal source code.
> In pascal the preprocessor directive is fast the same as a comment:
> 
> directive    { $R *.dfm }
> 
> I want to collect the directives also but i dont't want to have them
> in the rules. It will be impossible to handle this because
> preprocessor directives can appear fast anywhere.
> 
> Is there a possibility to create a custom channel and write
> 
> COMMENT
>     :   '{' WS* '$'  ( options {greedy=false;} : . )* '}'
> {$channel=CUSTOM;}

If you have a constant named CUSTOM, then the above syntax should work. HIDDEN is simply a predefined integer (probably with the value 100) and the NextToken() method compares the channel property to the used one.

Johannes
-- 
Jetzt 1 Monat kostenlos! GMX FreeDSL - Telefonanschluss + DSL 
f?r nur 17,95 Euro/mtl.!* http://dsl.gmx.de/?ac=OM.AD.PD003K11308T4569a

From JALuber at gmx.de  Tue Feb 10 04:00:36 2009
From: JALuber at gmx.de (Johannes Luber)
Date: Tue, 10 Feb 2009 13:00:36 +0100
Subject: [antlr-interest] ANTLR3 has an equivalent of LA(1)?
In-Reply-To: <c522653d0902100103s4f3107c8s73223bcc546dea11@mail.gmail.com>
References: <c522653d0902100103s4f3107c8s73223bcc546dea11@mail.gmail.com>
Message-ID: <20090210120036.66950@gmx.net>

> Hi all,
> 
> I am new to ANTLR. I have an old grammar to start from. I use antlr3
> with CSharp2 target.
> The condition does not compile:
> 
>  */
> NUM_INT
> 	:	('0'..'9')+ // everything starts with a digit sequence
> 		(	(	{(LA(2)!='.')&&(LA(2)!=')')}?				// force k=2; avoid ".."
> //PSPSPS example ARRAY (.1..99.) OF char; // after .. thinks it's a
> NUM_REAL
> 				'.' {state.type = NUM_REAL;}	// dot means we are float
> 				('0'..'9')+ (EXPONENT)?
> 			)?
> 		|	EXPONENT {state.type = NUM_REAL;}	// 'E' means we are float
> 		)
> 	;
> 
> But,  the function: LA(2)  is not defined? Is there an equivalent?
> 
> Thank you

Being a lexer rule, try using input.LA(2) instead.

Johannes
-- 
Jetzt 1 Monat kostenlos! GMX FreeDSL - Telefonanschluss + DSL 
f?r nur 17,95 Euro/mtl.!* http://dsl.gmx.de/?ac=OM.AD.PD003K11308T4569a

From seitter.claus at muenchener-verein.de  Tue Feb 10 06:16:33 2009
From: seitter.claus at muenchener-verein.de (seitter.claus at muenchener-verein.de)
Date: Tue, 10 Feb 2009 15:16:33 +0100
Subject: [antlr-interest] save a parsers output to a file and read it back
	in with a tree parser?
Message-ID: <9F5C4C3DD057BC448952F9D1B28288ED1429221D@mail.mv.com>

Hi all,
is there a way to save a parsers output to a file and read it back in with a tree parser? Think that would be helpful i.e. debugging a tree parser in antlr works.
Best Regards,
Claus

 <?xml:namespace prefix = o ns = "urn:schemas-microsoft-com:office:office" />

 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090210/ccdc34c4/attachment.html 

From JALuber at gmx.de  Tue Feb 10 06:30:07 2009
From: JALuber at gmx.de (Johannes Luber)
Date: Tue, 10 Feb 2009 15:30:07 +0100
Subject: [antlr-interest] save a parsers output to a file and read it
	back	in with a tree parser?
In-Reply-To: <9F5C4C3DD057BC448952F9D1B28288ED1429221D@mail.mv.com>
References: <9F5C4C3DD057BC448952F9D1B28288ED1429221D@mail.mv.com>
Message-ID: <20090210143007.312850@gmx.net>

> Hi all,
> is there a way to save a parsers output to a file and read it back in with
> a tree parser? Think that would be helpful i.e. debugging a tree parser in
> antlr works.
> Best Regards,
> Claus

The best idea I had is to create a debug parser with a special IDebugListener implementation, which saves the created nodes in a text format (a direct parse tree reading will not work if you change/delete nodes). Then you could create a special stream (not sure what tree parsers expect), which can work with the input format. Maybe others know about another shortcut.

Johannes
-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt? Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger01

From carter_cheng at yahoo.com  Tue Feb 10 07:50:48 2009
From: carter_cheng at yahoo.com (Carter Cheng)
Date: Tue, 10 Feb 2009 07:50:48 -0800 (PST)
Subject: [antlr-interest] tree grammar error (newbie)- missing attribute
	access
Message-ID: <833274.2239.qm@web50103.mail.re2.yahoo.com>

Hello,

I am getting a missing attribute access error on a number of rules which I do not quite understand and was hoping I might be able to get some help fixing them. The errors point to the following rules in the tree grammar. 


varDecls[std::list<std::string> & err] returns [std::map<Symbol,Type*> vars]
        : (v=varDecl { $vars.insert($v); } )+
	;

formalList returns [pair< std::list<Type*>, bool > p] 
	: { $p.second = false; } (t=formal { $p.first.push_back($t); } )* (ELLIPSIS { $p.second = true; } )?
	;

with 

varDecl returns [pair<Symbol,Type*> var]
	: t=type (s=STAR)? i=IDENT { $var = pair<Symbol,Type*>($i.text, $t); }
	;

formal returns [Type* type]
	: ^(FORMAL t=formalType (s=STAR)? IDENT) { $type = $t; }
	; 

I was searching through the archive on this but couldnt find a solution that seemed to work. i.e. changing $v --> $v.value gives an unknown attribute type error. Any help would be appreciated.

Thanks in advance,

Carter.


      
-------------- next part --------------
A non-text attachment was scrubbed...
Name: LPCCollect.g
Type: application/octet-stream
Size: 4087 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090210/fbe3a653/attachment.obj 

From robert.soule at gmail.com  Tue Feb 10 08:06:10 2009
From: robert.soule at gmail.com (Robert Soule)
Date: Tue, 10 Feb 2009 11:06:10 -0500
Subject: [antlr-interest] custom AST with re-write rules in C runtime
In-Reply-To: <498B4B76.9010508@temporal-wave.com>
References: <d1316fd70902051119m589ac4a6u3b164e1475e27339@mail.gmail.com>
	<498B4B76.9010508@temporal-wave.com>
Message-ID: <d1316fd70902100806k354327du399677b0f67007a@mail.gmail.com>

Hi Jim,

I'd like to use my own custom AST and write my own tree adapter.
One thing that I haven't been able to figure out is how to substitute
my adapter for the default adapter when the parser code is generated.

The adapter is declared in the parser header file as:
 pANTLR3_BASE_TREE_ADAPTOR   adaptor;

and then used with the macro definition:
#define     ADAPTOR                         ctx->adaptor

What I was wondering is, is there an option that I can specify to
have antlr generate a parser that refers to my adapter?

 pMY_CUSTOM_TREE_ADAPTOR   adaptor;

and the associated functions like:
ANTLR3_TREE_ADAPTORNew(..) ?

thank you,
Robert


On Thu, Feb 5, 2009 at 3:26 PM, Jim Idle <jimi at temporal-wave.com> wrote:
> Robert Soule wrote:
>> Hi,
>>
>> I'd like to use my own custom AST instead of the pANTLR_BASE_TREE
>> provided in the C runtime. What I was wondering is if I can use antlr's re-write
>> rules ( -> ^(...) ) to generate the tree with my own node implementation? If
>> so, can you provide any guidance on how to do that?
>>
>> I've been looking at antlr3basetree.h. Is the idea that we use this
>> base tree, but
>> set the "u" pointer to our own data structures?
>>
> That's by far the easiest way, which is why I did that. Mostly, that's
> all people need. However, you can also write your own tree adaptor that
> just passes around (void *). Not a task for the inexperienced C
> programmer though. But if you copy the adaptor code and fill in your own
> functions, that will work. Much easier to just add your nodes to the u
> pointer though and let the current stuff do all the work :-)
>
> Jim
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From micha-1 at fantasymail.de  Tue Feb 10 08:10:12 2009
From: micha-1 at fantasymail.de (micha)
Date: Tue, 10 Feb 2009 17:10:12 +0100
Subject: [antlr-interest] tree grammar error (newbie)- missing attribute
	access
In-Reply-To: <833274.2239.qm@web50103.mail.re2.yahoo.com>
References: <833274.2239.qm@web50103.mail.re2.yahoo.com>
Message-ID: <200902101710.12117.micha-1@fantasymail.de>

On Tuesday 10 February 2009 16:50:48 Carter Cheng wrote:
> Hello,
>
> I am getting a missing attribute access error on a number of rules which I
> do not quite understand and was hoping I might be able to get some help
> fixing them. The errors point to the following rules in the tree grammar.
>

> varDecls[std::list<std::string> & err] returns [std::map<Symbol,Type*>
> vars]
>
>         : (v=varDecl { $vars.insert($v); } )+
>
> 	;

I think you want to  insert the return value from varDecl, so  you can write 
$vars.insert($v.var)
(i.e. use the name you gave to the return value in the rule)

the other rule should work similar...

cheers,
 Michael



From jimi at temporal-wave.com  Tue Feb 10 08:13:13 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 10 Feb 2009 08:13:13 -0800
Subject: [antlr-interest] tree grammar error (newbie)- missing attribute
 access
In-Reply-To: <833274.2239.qm@web50103.mail.re2.yahoo.com>
References: <833274.2239.qm@web50103.mail.re2.yahoo.com>
Message-ID: <4991A799.7010509@temporal-wave.com>

Carter Cheng wrote:
> Hello,
>
> I am getting a missing attribute access error on a number of rules which I do not quite understand and was hoping I might be able to get some help fixing them. The errors point to the following rules in the tree grammar. 
>
>
> varDecls[std::list<std::string> & err] returns [std::map<Symbol,Type*> vars]
>         : (v=varDecl { $vars.insert($v); } )+
> 	;
>
> formalList returns [pair< std::list<Type*>, bool > p] 
> 	: { $p.second = false; } (t=formal { $p.first.push_back($t); } )* (ELLIPSIS { $p.second = true; } )?
> 	;
>
> with 
>
> varDecl returns [pair<Symbol,Type*> var]
> 	: t=type (s=STAR)? i=IDENT { $var = pair<Symbol,Type*>($i.text, $t); }
> 	;
>
> formal returns [Type* type]
> 	: ^(FORMAL t=formalType (s=STAR)? IDENT) { $type = $t; }
> 	; 
>
> I was searching through the archive on this but couldnt find a solution that seemed to work. i.e. changing $v --> $v.value gives an unknown attribute type error. Any help would be appreciated.
>
> Thanks in advance,
>
> Carter.
>   
Internally, your $v refers to a struct representing the return type of 
varDecl and you cannot reference it alone. At some point I think we 
became a little over-zealous on this checking and I mean to review it.

However, in your case, assuming that ANTLR will correctly parser your 
template and say that var is of that type (and it may not, you might 
have typedef it, and it might need to be a pointer) then you will want 
to use $v.var.

Jim

From jimi at temporal-wave.com  Tue Feb 10 08:17:47 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 10 Feb 2009 08:17:47 -0800
Subject: [antlr-interest] custom AST with re-write rules in C runtime
In-Reply-To: <d1316fd70902100806k354327du399677b0f67007a@mail.gmail.com>
References: <d1316fd70902051119m589ac4a6u3b164e1475e27339@mail.gmail.com>	
	<498B4B76.9010508@temporal-wave.com>
	<d1316fd70902100806k354327du399677b0f67007a@mail.gmail.com>
Message-ID: <4991A8AB.7020407@temporal-wave.com>

Robert Soule wrote:
> Hi Jim,
>
> I'd like to use my own custom AST and write my own tree adapter.
> One thing that I haven't been able to figure out is how to substitute
> my adapter for the default adapter when the parser code is generated.
>
> The adapter is declared in the parser header file as:
>  pANTLR3_BASE_TREE_ADAPTOR   adaptor;
>
> and then used with the macro definition:
> #define     ADAPTOR                         ctx->adaptor
>
> What I was wondering is, is there an option that I can specify to
> have antlr generate a parser that refers to my adapter?
>
>  pMY_CUSTOM_TREE_ADAPTOR   adaptor;
>
> and the associated functions like:
> ANTLR3_TREE_ADAPTORNew(..) ?
>   
Once you have created the parser, just install a pointer to your own 
adaptor. You can also do this in @apifuncs I think. As in:

ADAPTOR = pointerToMyAdaptor;

You adaptor structure needs to be the same structure that the common 
adaptor uses and provide the same function set.

To be honest with you, even in Java I have found it easier just to call 
my own functions directly from actions and not try and create an 
adaptor, thoguh this is essentially because of what type of tree is 
needed in the case of errors and so on.

Jim

From rschneid at bridgewater.edu  Tue Feb 10 08:34:50 2009
From: rschneid at bridgewater.edu (Raymond J. Schneider)
Date: Tue, 10 Feb 2009 11:34:50 -0500
Subject: [antlr-interest] ANTLR installation
In-Reply-To: <20090210094322.7F3DC55B8CC@conan.bridgewater.edu>
References: <172455A9DFDEF941A54573F5463F106528D859F434@bcex01.Bridgewater.local>,
	<20090210094322.7F3DC55B8CC@conan.bridgewater.edu>
Message-ID: <172455A9DFDEF941A54573F5463F106528D859F43B@bcex01.Bridgewater.local>

Not entirely sure what you mean by "run it" Gavin.  The problem we're having is not generating the lexer and parser code from ANTLRWorks but compiling it and running it.
I tried something like:
 javac Test.java ExprLexer.java ExprParser.java
and instead of getting compiled classes and a runable system I got 100 errors pretty much all of the "cannot find symbol" type which implies to me that I don't have the library set up
and I'm not sure how to do that.  

Does that clarify my problem?

Regards, Ray
--
Ray Schneider,PE, Ph.D
Associate Professor
Math and Computer Science
Bridgewater College
http://www.bridgewater.edu/~rschneid/
http://theweedlessgarden.blogspot.com
________________________________________
From: Gavin Lambert [antlr at mirality.co.nz]
Sent: Tuesday, February 10, 2009 04:43
To: Raymond J. Schneider; antlr-interest at antlr.org
Subject: Re: [antlr-interest] ANTLR installation

At 15:28 10/02/2009, Raymond J. Schneider wrote:
 >Is there a clear up to date installation document that walks
 >through the whole installation with some confirmatory checks at
the
 >end?
 >The biggest issue seems to be setting the CLASSPATH correctly
and
 >getting parsers to run outside of the ANTLRWorks environment.

The easiest way to run it (given that you already have ANTLRWorks)
is like this:

java -cp path\to\antlrworks-1.x.jar org.antlr.Tool Foo.g

(And yes, you need to name the .jar file in the classpath.  It's
not sufficient to name the folder where the .jar file sits.)


From robert.soule at gmail.com  Tue Feb 10 08:49:46 2009
From: robert.soule at gmail.com (Robert Soule)
Date: Tue, 10 Feb 2009 11:49:46 -0500
Subject: [antlr-interest] ANTLR installation
In-Reply-To: <172455A9DFDEF941A54573F5463F106528D859F43B@bcex01.Bridgewater.local>
References: <172455A9DFDEF941A54573F5463F106528D859F434@bcex01.Bridgewater.local>
	<20090210094322.7F3DC55B8CC@conan.bridgewater.edu>
	<172455A9DFDEF941A54573F5463F106528D859F43B@bcex01.Bridgewater.local>
Message-ID: <d1316fd70902100849g10de60bcj86fbd81784566b55@mail.gmail.com>

It looks like you are not specifying your classpath when you invoke
the java compiler.

java -cp path\to\antlrworks-1.x.jar org.antlr.Tool Foo.g

to use the antlr took to create your parser....

javac -classpath .:path\to\antlrworks-1.x.jar Test.java ExprLexer.java
ExprParser.java

to get your class files....

java -classpath .:path\to\antlrworks-1.x.jar Test

to run your parser...

-Robert

On Tue, Feb 10, 2009 at 11:34 AM, Raymond J. Schneider
<rschneid at bridgewater.edu> wrote:
> Not entirely sure what you mean by "run it" Gavin.  The problem we're having is not generating the lexer and parser code from ANTLRWorks but compiling it and running it.
> I tried something like:
>  javac Test.java ExprLexer.java ExprParser.java
> and instead of getting compiled classes and a runable system I got 100 errors pretty much all of the "cannot find symbol" type which implies to me that I don't have the library set up
> and I'm not sure how to do that.
>
> Does that clarify my problem?
>
> Regards, Ray
> --
> Ray Schneider,PE, Ph.D
> Associate Professor
> Math and Computer Science
> Bridgewater College
> http://www.bridgewater.edu/~rschneid/
> http://theweedlessgarden.blogspot.com
> ________________________________________
> From: Gavin Lambert [antlr at mirality.co.nz]
> Sent: Tuesday, February 10, 2009 04:43
> To: Raymond J. Schneider; antlr-interest at antlr.org
> Subject: Re: [antlr-interest] ANTLR installation
>
> At 15:28 10/02/2009, Raymond J. Schneider wrote:
>  >Is there a clear up to date installation document that walks
>  >through the whole installation with some confirmatory checks at
> the
>  >end?
>  >The biggest issue seems to be setting the CLASSPATH correctly
> and
>  >getting parsers to run outside of the ANTLRWorks environment.
>
> The easiest way to run it (given that you already have ANTLRWorks)
> is like this:
>
> java -cp path\to\antlrworks-1.x.jar org.antlr.Tool Foo.g
>
> (And yes, you need to name the .jar file in the classpath.  It's
> not sufficient to name the folder where the .jar file sits.)
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From jimi at temporal-wave.com  Tue Feb 10 08:51:34 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 10 Feb 2009 08:51:34 -0800
Subject: [antlr-interest] ANTLR installation
In-Reply-To: <172455A9DFDEF941A54573F5463F106528D859F43B@bcex01.Bridgewater.local>
References: <172455A9DFDEF941A54573F5463F106528D859F434@bcex01.Bridgewater.local>,
	<20090210094322.7F3DC55B8CC@conan.bridgewater.edu>
	<172455A9DFDEF941A54573F5463F106528D859F43B@bcex01.Bridgewater.local>
Message-ID: <4991B096.8070209@temporal-wave.com>

Raymond J. Schneider wrote:
> Not entirely sure what you mean by "run it" Gavin.  The problem we're having is not generating the lexer and parser code from ANTLRWorks but compiling it and running it.
> I tried something like:
>  javac Test.java ExprLexer.java ExprParser.java
> and instead of getting compiled classes and a runable system I got 100 errors pretty much all of the "cannot find symbol" type which implies to me that I don't have the library set up
> and I'm not sure how to do that.  
>
> Does that clarify my problem?
>   
Ray,

The output is not standalone java - there is a runtime library that must 
be available both at compile time and run time.

The various jars that you need at that point are all encapsulated in the 
antlrworks jar, so if you refer the javac compiler to that jar via the 
-cp option and when you run the code refer the java command to that jar 
via CLASSPATH or -cp then everything will work as advertised.

You are getting those undefined errors because the compiler has not been 
told where to find them.

You need:

javac -cp "c:\antlr\antlrworks.jar" x.java y.java

And the equivalent at runtime.

Jim

From robert.soule at gmail.com  Tue Feb 10 09:03:46 2009
From: robert.soule at gmail.com (Robert Soule)
Date: Tue, 10 Feb 2009 12:03:46 -0500
Subject: [antlr-interest] custom AST with re-write rules in C runtime
In-Reply-To: <4991A8AB.7020407@temporal-wave.com>
References: <d1316fd70902051119m589ac4a6u3b164e1475e27339@mail.gmail.com>
	<498B4B76.9010508@temporal-wave.com>
	<d1316fd70902100806k354327du399677b0f67007a@mail.gmail.com>
	<4991A8AB.7020407@temporal-wave.com>
Message-ID: <d1316fd70902100903q12df4b85u41eb6cce970a8257@mail.gmail.com>

>>
> Once you have created the parser, just install a pointer to your own
> adaptor. You can also do this in @apifuncs I think. As in:
>
> ADAPTOR = pointerToMyAdaptor;
>

OK, thank you. This worked for me, but I end up with code like:

    ADAPTOR     = ANTLR3_TREE_ADAPTORNew(...);
    ctx->vectors        = antlr3VectorFactoryNew(64);

    ADAPTOR = MY_CUSTOM_TREE_ADAPTORNew(...);

Which works, but calls the ANTLR3_TREE_ADAPTORNew unnecessarily.
Is there a way to avoid that?
>
> To be honest with you, even in Java I have found it easier just to call
> my own functions directly from actions and not try and create an
> adaptor, thoguh this is essentially because of what type of tree is
> needed in the case of errors and so on.
>

You mean to use the actions instead of the re-write rules? I can see
that being true, but it does end up tying your grammar in to a specific
generated code. Ideally, I'd like my grammar to be as target-language
agnostic as possible.

thanks for your help,
Robert

From jimi at temporal-wave.com  Tue Feb 10 09:14:18 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 10 Feb 2009 09:14:18 -0800
Subject: [antlr-interest] custom AST with re-write rules in C runtime
In-Reply-To: <d1316fd70902100903q12df4b85u41eb6cce970a8257@mail.gmail.com>
References: <d1316fd70902051119m589ac4a6u3b164e1475e27339@mail.gmail.com>	
	<498B4B76.9010508@temporal-wave.com>	
	<d1316fd70902100806k354327du399677b0f67007a@mail.gmail.com>	
	<4991A8AB.7020407@temporal-wave.com>
	<d1316fd70902100903q12df4b85u41eb6cce970a8257@mail.gmail.com>
Message-ID: <4991B5EA.4090608@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090210/4327266b/attachment.html 

From cmundi at gmail.com  Tue Feb 10 09:48:33 2009
From: cmundi at gmail.com (C. Mundi)
Date: Tue, 10 Feb 2009 10:48:33 -0700
Subject: [antlr-interest] Q: opinions on ikvm + antlr3 ?
In-Reply-To: <20090206162510.7540@gmx.net>
References: <e794390902052349k3691b276x9d22f6862f1889fc@mail.gmail.com>
	<20090206090311.41720@gmx.net>
	<e794390902060813w24ab4d50pd17fe46c150f05fa@mail.gmail.com>
	<20090206162510.7540@gmx.net>
Message-ID: <e794390902100948v2e3703b7pb45983d1db0452ef@mail.gmail.com>

Johannes,

You've convinced me.  After some time experimenting with IKVM, I have to say
I am very impressed and am motivated to find uses for it.  But I have
decided to make no changes to how I apply the ANTLR tools.

I plan to continue targeting C# directly and not via bytecode-to-IL
translation.  This decision is based partly on the fact that I am more
hooked than I like to admit on the syntactic sugar of C# properties and --
more importantly -- any work that I might have to invest into smoothing out
wrinkles in ikvm I would rather invest into giving back to the antlr
community.

All that said, I would encourage anyone who needs to get a chunk of java
going on .NET -- or call .NET assemblies from Java -- to check out IKVM.
Despite the very modest version number (0.38) it seems very mature.  Full
disclosure: I did not get around to passing antlr through IKVM.  I only
tried some in-house Java classes that I thoroughly understand, and it worked
great.  I even called .NET stubs from Java.  Nice.

Thanks again!


On Fri, Feb 6, 2009 at 9:25 AM, Johannes Luber <JALuber at gmx.de> wrote:

> > I have a further thought on this:
> >
> > On Fri, Feb 6, 2009 at 2:03 AM, Johannes Luber <JALuber at gmx.de> wrote:
> >
> > Con: I haven't checked it, but I believe that IKVM won't create the
> > .NETisms
> > > like properties instead getters and setters. If true, your parser
> > backend
> > > will be schizophrenic regarding the approaches.
> > > Con: .NET-only additions like #pragmas to silence warnings won't be
> > > inlcuded.
> >
> >
> > I think I managed to trick myself, by forgetting that I've been looking
> at
> > too many alternatives.
> >
> > What I'm thinking of is using the ANTLR java tool and writing all of my
> > actions in Java.  Next, compile the java to bytecode targeting the JVM.
> >  Then, use ikvmc to do a one-time translation of the JVM bytecode to .NET
> > IL
> > bytecode, i.e. a .NET assembly.  According to the IKVM folks, I would
> have
> > to write my own classloder if I need to load Java classes dynamicaly.
> > Otherwise, I would never see C#, because I'd be coding in Java.
> >
> > (Ok, it's actually a little more complex.  Write lexer in Java.  Compile
> > lexer class to JVM bytecode.  Recompile to IL (ikvmc).  Create java stub
> > for
> > lexer IL (ikvmstub).  Write parser in Java, by getting token stream from
> > java stub of lexer.  Compile parser class to JVM bytecode.  Recompile to
> > IL.  Done.
> >
> > It seems like the properties v. setter/getter concern goes away in this
> > scenario.  Am I completely wrong?
> >
> > C. Mundi
>
> You still have to interface your parser. Depending on how you do it, you
> may or may not have the need to access things like "token.getText()" in C#.
>
> Johannes
>
> --
> Psssst! Schon vom neuen GMX MultiMessenger geh?rt? Der kann`s mit allen:
> http://www.gmx.net/de/go/multimessenger01
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090210/cdd75ef5/attachment.html 

From brothers at bros.com  Tue Feb 10 13:50:09 2009
From: brothers at bros.com (Dennis Brothers)
Date: Tue, 10 Feb 2009 16:50:09 -0500
Subject: [antlr-interest] Debug port problem in Visual Studio test project
Message-ID: <123E25D8-52CB-4B24-8660-4C036B93E07A@bros.com>

I'm developing a parser to be integrated into a large system (C#  
target).  When I run it in a VS unit-test project in debug mode,  
ANTLRWorks connects to it, and shows the beginning of the parse when I  
hit Step Forward.  When I hit Step Forward again, the project throws  
an exception "Unable to write data to the transport connection: An  
established connection was aborted by the software in your host  
machine".  I'm using a port (81) that is unused by anything on the  
machine.  If I switch to port 49000 (also unused), I get the same  
behavior.

A simpler, console-app test harness worked fine in the debugger, but  
the full-up parser requires the context of the large project.

I've done a lot of Googling, looking for anything about port behavior  
in a VS test/debug environment, and come up empty.  Has anyone seen  
anything like this?  I'd really like to see the ASTs my parser is  
generating.

     - Dennis Brothers


From jason.s.moore at gmail.com  Tue Feb 10 14:09:11 2009
From: jason.s.moore at gmail.com (Jason Moore)
Date: Tue, 10 Feb 2009 15:09:11 -0700
Subject: [antlr-interest] Access Specifier for lexer's and parsers
Message-ID: <bffbf6430902101409s64a8fbb8gb50a02e902e8854e@mail.gmail.com>

Using ANTLR v3 and the CSharp2 language specifier, is there any way to
indicate that you want the generated lexer or parser to be internal
versus the default of public?

The namespace is specified with:

@lexer::namespace {My.Namespace}

and I would assume something similar exists for the access specifier,
but I have been unable to find it.

Thanks,
Jason

From jaluber at gmx.de  Tue Feb 10 14:21:59 2009
From: jaluber at gmx.de (Johannes Luber)
Date: Tue, 10 Feb 2009 23:21:59 +0100
Subject: [antlr-interest] Access Specifier for lexer's and parsers
In-Reply-To: <bffbf6430902101409s64a8fbb8gb50a02e902e8854e@mail.gmail.com>
References: <bffbf6430902101409s64a8fbb8gb50a02e902e8854e@mail.gmail.com>
Message-ID: <4991FE07.20107@gmx.de>

Jason Moore schrieb:
> Using ANTLR v3 and the CSharp2 language specifier, is there any way to
> indicate that you want the generated lexer or parser to be internal
> versus the default of public?
> 
> The namespace is specified with:
> 
> @lexer::namespace {My.Namespace}
> 
> and I would assume something similar exists for the access specifier,
> but I have been unable to find it.
> 
> Thanks,
> Jason
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
Currently there is no way to do so. At least with the Java version of
the tool. Sam Harwell is working a C# port with some extended features,
which allows at least to use access modifiers on rules. Currently there
is only a preview somewhere I can't find the link to - maybe Sam can
help out? Otherwise I hope that things can be ported back to the Java
original.

Johannes

From sharwell at pixelminegames.com  Tue Feb 10 14:28:41 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Tue, 10 Feb 2009 16:28:41 -0600
Subject: [antlr-interest] Access Specifier for lexer's and parsers
In-Reply-To: <4991FE07.20107@gmx.de>
References: <bffbf6430902101409s64a8fbb8gb50a02e902e8854e@mail.gmail.com>
	<4991FE07.20107@gmx.de>
Message-ID: <86403CA0939415448BCCB83855EFE09AA6791E@Bloodymary.ironwillgames.com>

My local build does allow access specifiers on parser rules. The default
visibility is private, so protected/public rules must be marked as such
after the update. Since there are generally very few entry points to a
grammar, you may only have to mark 1 or 2 rules as public. I'll try and
get a public build up by next week. I'm closing an independent contract
right now so time is tight.

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Johannes Luber
Sent: Tuesday, February 10, 2009 4:22 PM
To: Jason Moore
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Access Specifier for lexer's and parsers

Jason Moore schrieb:
> Using ANTLR v3 and the CSharp2 language specifier, is there any way to
> indicate that you want the generated lexer or parser to be internal
> versus the default of public?
> 
> The namespace is specified with:
> 
> @lexer::namespace {My.Namespace}
> 
> and I would assume something similar exists for the access specifier,
> but I have been unable to find it.
> 
> Thanks,
> Jason
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
Currently there is no way to do so. At least with the Java version of
the tool. Sam Harwell is working a C# port with some extended features,
which allows at least to use access modifiers on rules. Currently there
is only a preview somewhere I can't find the link to - maybe Sam can
help out? Otherwise I hope that things can be ported back to the Java
original.

Johannes

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From jason.s.moore at gmail.com  Tue Feb 10 14:30:48 2009
From: jason.s.moore at gmail.com (Jason Moore)
Date: Tue, 10 Feb 2009 15:30:48 -0700
Subject: [antlr-interest] Access Specifier for lexer's and parsers
In-Reply-To: <86403CA0939415448BCCB83855EFE09AA6791E@Bloodymary.ironwillgames.com>
References: <bffbf6430902101409s64a8fbb8gb50a02e902e8854e@mail.gmail.com>
	<4991FE07.20107@gmx.de>
	<86403CA0939415448BCCB83855EFE09AA6791E@Bloodymary.ironwillgames.com>
Message-ID: <bffbf6430902101430h5ff4495fp582c92fdc3d64e60@mail.gmail.com>

So does this apply to just the rules within the parser or can you
specify the entire generated parser class be internal?

Jason

On Tue, Feb 10, 2009 at 3:28 PM, Sam Harwell
<sharwell at pixelminegames.com> wrote:
> My local build does allow access specifiers on parser rules. The default
> visibility is private, so protected/public rules must be marked as such
> after the update. Since there are generally very few entry points to a
> grammar, you may only have to mark 1 or 2 rules as public. I'll try and
> get a public build up by next week. I'm closing an independent contract
> right now so time is tight.
>
> Sam
>
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Johannes Luber
> Sent: Tuesday, February 10, 2009 4:22 PM
> To: Jason Moore
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Access Specifier for lexer's and parsers
>
> Jason Moore schrieb:
>> Using ANTLR v3 and the CSharp2 language specifier, is there any way to
>> indicate that you want the generated lexer or parser to be internal
>> versus the default of public?
>>
>> The namespace is specified with:
>>
>> @lexer::namespace {My.Namespace}
>>
>> and I would assume something similar exists for the access specifier,
>> but I have been unable to find it.
>>
>> Thanks,
>> Jason
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
> Currently there is no way to do so. At least with the Java version of
> the tool. Sam Harwell is working a C# port with some extended features,
> which allows at least to use access modifiers on rules. Currently there
> is only a preview somewhere I can't find the link to - maybe Sam can
> help out? Otherwise I hope that things can be ported back to the Java
> original.
>
> Johannes
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From cscott at cscott.net  Tue Feb 10 15:19:04 2009
From: cscott at cscott.net (C. Scott Ananian)
Date: Tue, 10 Feb 2009 18:19:04 -0500
Subject: [antlr-interest] ANTLRv3 Task for Apache Ant?
Message-ID: <c6d9bea0902101519m6c9e955ei3a99d421dcf68686@mail.gmail.com>

I'm looking for the antlr3 task for apache ant.  Through the magic of
google I managed to find various old versions in
http://www.antlr.org/share/*/antlr3-task.zip and located the fisheye
view of the buildtools repository at
http://fisheye2.atlassian.com/browse/antlr-buildtools -- but I can't
seem to find either a public respository or a release I am confident
is the latest.  Could somebody give me a pointer?
 --scott

-- 
                         ( http://cscott.net/ )

From dave.peckham at me.com  Tue Feb 10 15:24:47 2009
From: dave.peckham at me.com (David Peckham)
Date: Tue, 10 Feb 2009 15:24:47 -0800
Subject: [antlr-interest] ANTLRv3 Task for Apache Ant?
In-Reply-To: <c6d9bea0902101519m6c9e955ei3a99d421dcf68686@mail.gmail.com>
References: <c6d9bea0902101519m6c9e955ei3a99d421dcf68686@mail.gmail.com>
Message-ID: <62340060237203523812980017721520477784-Webmail@me.com>

This version works for me:

    http://antlr.org/share/1169924912745/antlr3-task.zip

 
On Tuesday, February 10, 2009, at 03:19PM, "C. Scott Ananian" <cscott at cscott.net> wrote:

>I'm looking for the antlr3 task for apache ant.  Through the magic of
>google I managed to find various old versions in
>http://www.antlr.org/share/*/antlr3-task.zip and located the fisheye
>view of the buildtools repository at
>http://fisheye2.atlassian.com/browse/antlr-buildtools -- but I can't
>seem to find either a public respository or a release I am confident
>is the latest.  Could somebody give me a pointer?
> --scott


From jimi at temporal-wave.com  Tue Feb 10 15:47:22 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 10 Feb 2009 15:47:22 -0800
Subject: [antlr-interest] ANTLRv3 Task for Apache Ant?
In-Reply-To: <c6d9bea0902101519m6c9e955ei3a99d421dcf68686@mail.gmail.com>
References: <c6d9bea0902101519m6c9e955ei3a99d421dcf68686@mail.gmail.com>
Message-ID: <4992120A.2060600@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090210/a3c02fd5/attachment.html 

From michael.bedward at gmail.com  Tue Feb 10 17:22:36 2009
From: michael.bedward at gmail.com (Michael Bedward)
Date: Wed, 11 Feb 2009 12:22:36 +1100
Subject: [antlr-interest] multiple tree walkers
In-Reply-To: <9da4f4520902090051u5340e2c5vbef37b75717c16c9@mail.gmail.com>
References: <e24c4c270902081907r287d7aa6ma176e6b580a33ebe@mail.gmail.com>
	<9da4f4520902090051u5340e2c5vbef37b75717c16c9@mail.gmail.com>
Message-ID: <e24c4c270902101722r22206626j239306d9fa980016@mail.gmail.com>

2009/2/9 Oliver Zeigermann:
>
> I set up a page where I share my experience with multiple tree
> transformer stages:
>
> http://www.antlr.org/wiki/display/ANTLR3/Complex+tree+transformations+using+cascading+tree+rewriters
>
> Maybe you would like to add yours?
>

Hi Oliver,

I'm loving the tree rewriting - it works like a charm !  I've also
found your tips on the wiki page very helpful.

I'm not sure in which of your categories, if any, my tree
transformations belong.  If I describe what I'm doing I wonder if you
can you tell me ?

Apologies in advance for the following long winded text :-)

My DSL is intended to let a user create a raster image from a
mathematical expression where the inputs to the expression can include
other images, pixel coordinates, numeric values...

There are three categories of variables...
- image vars which reference raster images and are either for input or ouput
- positional vars: user defined vars that depend directly or
indirectly on the current pixel position
- simple local vars

Here's an example program to generate an image of concentric ripples...

// calculate proportional distance of current
// pixel from ripple origin
xorigin = 0.5;
yorigin = 0.5;
dx2 = (x() / (width() - 1) - xorigin)^2;
dy2 = (y() / (height() - 1) - yorigin)^2;
d = sqrt(dx2 + dy2);

// pixel value in output image
ripples = sin(8 * PI * d);

This isn't an efficient algorithm (in fact, it sucks) but it
illustrates the language features...

- xorigin and yorigin are simple local vars

- dx2, dy2 and d are 'positional' vars because they depend on x() and
y(), functions that return the current pixel x and y ordinates when
the program is being run

- ripples is an image var

To 'compile' this program I do the following
1. Generate preliminary AST

2. Walk the tree and classify the non-image variables as either
positional or simple local (vars corresponding to images are
pre-defined by the user).  I use a very simple grammar to do this.

3. Rewrite the tree to separate variable types and transform image
property function calls (e.g. width(), x()) to special variables names
for a symbol table...


assignment : ^(ASSIGN assign_op var expr)
                     -> { isImageVar($var.text) }? ^(IMAGE_WRITE
assign_op var expr)
                     -> ^(ASSIGN assign_op var expr)
                   ;

expr : ^(FUNC_CALL id=ID expr_list)
          -> { isImageFunc($id.text) }? ID["__" + $id.text]
          -> ^(FUNC_CALL id=ID expr_list)

        | ... other alternatives with no transformation ...
        ;

var : ID
        -> { isPositionalVar($ID.text) }? POS_VAR[$ID.text]
        -> { isImageVar($ID.text) }? ID
        -> SIMPLE_VAR[$ID.text]
    ;

4. Rewrite tree from 3, replacing any expressions that involve only
SIMPLE_VARs and constants with a SIMPLE_VAR (I think, haven't done
this bit yet)

5. Walk the tree from 4, evaluating result for each ouput image pixel.

When the interpreter class that does step (5) runs, it will first set
the values of the special vars __width and __height in the symbol
table, plus values for the SIMPLE_VARs identified in step (4).  It
then iterates over each pixel position in the output image, updating
the values of the special vars __x and __y in the symbol table as well
as the POS_VARs which depend on them, and calculating the value to
write to the output image pixel.

Dunno if that makes sense...  If you read this far perhaps you can
tell me where the above transformations fit into your taxonomy.  And
any other comments would also be welcome of course.

cheers
Michael

From cscott at cscott.net  Tue Feb 10 17:24:45 2009
From: cscott at cscott.net (C. Scott Ananian)
Date: Tue, 10 Feb 2009 20:24:45 -0500
Subject: [antlr-interest] ANTLRv3 Task for Apache Ant?
In-Reply-To: <4992120A.2060600@temporal-wave.com>
References: <c6d9bea0902101519m6c9e955ei3a99d421dcf68686@mail.gmail.com>
	<4992120A.2060600@temporal-wave.com>
Message-ID: <c6d9bea0902101724v1e4dcdd7h1ba53b1983edb2fa@mail.gmail.com>

On Tue, Feb 10, 2009 at 6:47 PM, Jim Idle <jimi at temporal-wave.com> wrote:
> C. Scott Ananian wrote:
>
> I'm looking for the antlr3 task for apache ant.  Through the magic of
> google I managed to find various old versions in
> http://www.antlr.org/share/*/antlr3-task.zip and located the fisheye
> view of the buildtools repository at
> http://fisheye2.atlassian.com/browse/antlr-buildtools -- but I can't
> seem to find either a public respository or a release I am confident
> is the latest.  Could somebody give me a pointer?
>
> The version in Fisheye is always the latest version. If you already have a
> big ant script then this will work for you, but if you are just looking to
> construct a build from scratch, then Maven is much better than ant and it
> knows how to find the particular version of the antlr tool to use and so on.

How do I download a version from Fisheye?  (I'm definitely in the
"have a big ant script" camp.)
 --scott

-- 
                         ( http://cscott.net/ )

From michael.bedward at gmail.com  Tue Feb 10 17:59:53 2009
From: michael.bedward at gmail.com (Michael Bedward)
Date: Wed, 11 Feb 2009 12:59:53 +1100
Subject: [antlr-interest] grammar highlighting in Netbeans
Message-ID: <e24c4c270902101759v50eede6bv1cbffac3cec73443@mail.gmail.com>

Just another plug for the netbeans plugin :-)

I've been using it with NB 6.1 and it's _so_ nice.  The only real prob
that I've found with it so far is that it doesn't seem to like catch[
] clauses at the end of a rule - unless i'm doing something wrong...

Michael

From jimi at temporal-wave.com  Tue Feb 10 17:59:54 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 10 Feb 2009 17:59:54 -0800
Subject: [antlr-interest] ANTLRv3 Task for Apache Ant?
In-Reply-To: <c6d9bea0902101724v1e4dcdd7h1ba53b1983edb2fa@mail.gmail.com>
References: <c6d9bea0902101519m6c9e955ei3a99d421dcf68686@mail.gmail.com>	
	<4992120A.2060600@temporal-wave.com>
	<c6d9bea0902101724v1e4dcdd7h1ba53b1983edb2fa@mail.gmail.com>
Message-ID: <4992311A.5010301@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090210/8008aece/attachment.html 

From jimi at temporal-wave.com  Tue Feb 10 18:10:14 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 10 Feb 2009 18:10:14 -0800
Subject: [antlr-interest] grammar highlighting in Netbeans
In-Reply-To: <e24c4c270902101759v50eede6bv1cbffac3cec73443@mail.gmail.com>
References: <e24c4c270902101759v50eede6bv1cbffac3cec73443@mail.gmail.com>
Message-ID: <49923386.1010208@temporal-wave.com>

Michael Bedward wrote:
> Just another plug for the netbeans plugin :-)
>
> I've been using it with NB 6.1 and it's _so_ nice.  The only real prob
> that I've found with it so far is that it doesn't seem to like catch[
> ] clauses at the end of a rule - unless i'm doing something wrong...
>   
Yes - I like what I see so far. It needs some updates for actions and 
stuff like that (most of my grammar shows up red ;-), but I think that 
it will be really good as it develops.

JIm

From michael.bedward at gmail.com  Tue Feb 10 19:23:13 2009
From: michael.bedward at gmail.com (Michael Bedward)
Date: Wed, 11 Feb 2009 14:23:13 +1100
Subject: [antlr-interest] grammar highlighting in Netbeans
In-Reply-To: <49923386.1010208@temporal-wave.com>
References: <e24c4c270902101759v50eede6bv1cbffac3cec73443@mail.gmail.com>
	<49923386.1010208@temporal-wave.com>
Message-ID: <e24c4c270902101923h521b98d3meec77da3f8db4191@mail.gmail.com>

> Yes - I like what I see so far. It needs some updates for actions and
> stuff like that (most of my grammar shows up red ;-), but I think that
> it will be really good as it develops.

Well your grammars would probably make excellent advanced test cases
for the developer Jim...

Michael

From spprtmail09 at yahoo.com  Tue Feb 10 20:01:29 2009
From: spprtmail09 at yahoo.com (Meena Vinod)
Date: Tue, 10 Feb 2009 20:01:29 -0800 (PST)
Subject: [antlr-interest] Need help on handling exceptions in C......
Message-ID: <860544.5406.qm@web112201.mail.gq1.yahoo.com>

Hello,
I need help on the following grammar file:

---------------------------
grammar Test;

options
{
   output = AST;
   language = C;
   ASTLabelType    = pANTLR3_BASE_TREE;
}

tokens
{
    T_COMMAND;
    T_ACTION;
    T_OPT;
}

validate_cmd:        command  EOF -> ^(T_COMMAND command);

command:                action1 | action2;

action1:             action1_name (action1_opt)* ;

action2:            action2_name (action2_opt)* ;

action1_name:            ACTION1 -> ^(T_ACTION ACTION1) ;

action2_name:            ACTION2 -> ^(T_ACTION ACTION2) ;

action1_opt:            tsep action1_tree -> ^(T_OPT action1_tree);

action1_tree:            (common_options | wait_option)+;

action2_opt:            tsep action2_tree -> ^(T_OPT action2_tree);

action2_tree:            (common_options)+;

common_options:            version_option | help_option ;

wait_option:            WAIT tsep Digit+;

version_option:            VERSION_OPTION;

help_option:            HELP_OPTION tsep Literal+;

ACTION1    :            'copy';

ACTION2    :            'cut';

VERSION_OPTION:         '-v'('ersion')?;

HELP_OPTION:             '-h'('elp')?;

WAIT    :            '-w'('ait')?;

SEMI:                ';' ;

fragment DIGIT    :     ('0'..'9');

fragment ALPHA      :    ('a'..'z' | 'A'..'Z')*;

Literal    :        DIGIT | ALPHA;

Digit    :        DIGIT+;

tsep    :           WSP;

WSP    :            ('\u0009' | ' ')+;        
-------------------------------------------------------------------------------

When I enter the command "copy -w aa", where the -w is expecting a digit, I get an early exit exception.

My doubts include the following:
1. How do I handle exceptions when my language option is "C"?

2. More specifically, can I have the "wait_option" rule handle the exception when a digit is not supplied
equivalent of 
   if wait_option:    WAIT tsep Digit+, then continue
   else wait_option:     WAIT tsep <not a digit>, then flag error!


   I dont want to do soemthing like
   wait_option:        WAIT tsep Digit+
               {   //Success
               }
            |
            WAIT tsep NonDigit+
               {    //Failure
               }
            ;
   with the fear that my source code might get bigger.

3. Can I have a common error block, that is whenever any parser has a problem, it executes a common function?

Thanks a ton,
Swift


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090210/7d5707aa/attachment.html 

From driscoll at cs.wisc.edu  Wed Feb 11 00:52:15 2009
From: driscoll at cs.wisc.edu (Evan Driscoll)
Date: Wed, 11 Feb 2009 02:52:15 -0600
Subject: [antlr-interest] Writing (for now) just a lexer
Message-ID: <499291BF.4020601@cs.wisc.edu>

Hi all,

I'm teaching a compilers class at University of Wisconsin-Madison. 
Traditionally the class has followed sort of a classic sequence of 
projects 'write a lexer', 'write a parser', etc., and in the past has 
used either JLex/Java CUP or Flex/Bison for the lexer and parser 
generator. This is my first time teaching this class, and I'm writing 
these assignments assuming the use of ANTLR instead. I don't really want 
to make major changes to the class, so I want to keep these assignments 
separate, but the combined nature of ANTLR grammars has thrown a couple 
oddities into the way this works. Anyway, this is the one I'm not really 
sure how to deal with, as I'm also new to ANTLR.

The question is this: how do I store additional information in a token? 
(E.g. for the token corresponding to an int literal, how would I store 
the value as an int?)

Using something like Flex, I know how to do this; just add an additional 
option in the union representing the token type. But under ANTLR, I'm 
not sure. I see "How do I use a custom token type?" 
(http://www.antlr.org/wiki/pages/viewpage.action?pageId=1844), but this 
isn't quite what I want, as I want to be able to return a subclass of 
CommonToken for just a couple particular rules.

The couple grammars I've looked at (for Java) don't do this, presumably 
leaving the string->integer conversion for later, but this doesn't make 
a whole lot of sense to be to be honest. There are potentially multiple 
contexts where this sort of thing would need to be done later, while 
doing it in lexing seems cleaner. It also allows me to keep better 
consistency with the fact that I've been giving "an integer literal is 
too large" as an example of an error that could arise during lexing. 
(Not that you *couldn't* do it later.)

Evan Driscoll


From liviu.u at gmail.com  Wed Feb 11 01:09:46 2009
From: liviu.u at gmail.com (Liviu U)
Date: Wed, 11 Feb 2009 11:09:46 +0200
Subject: [antlr-interest] How to create a rule that matches fast
	everything!!!
Message-ID: <c522653d0902110109y5916fef9p64d4f23ad4f0b27b@mail.gmail.com>

Hi all,

I have a pascal function:

procedure TFBItemType.ItemTypeAfterInsert(DataSet: TDataSet);
begin
  inherited;
  ItemTypeItemTypeId.Value := FBContext.GetNextId('DictionaryItem');
  ItemTypeSiteId.Value := FBContext.InitializationParamByName('SiteId');
  ItemTypeDictionaryId.Value := FDictionaryId;
  ItemTypeSystemRecord.Value := 0;
end;


I want to match in a rule everything between BEGIN and END without
creating any inner nodes or rules.
Is there a way to specify:


rule
: BEGIN   ANY* END;

?

thank you

From gunjgupta at gmail.com  Wed Feb 11 01:12:31 2009
From: gunjgupta at gmail.com (Chal Chale apne Ghar)
Date: Wed, 11 Feb 2009 14:42:31 +0530
Subject: [antlr-interest] Antlr Grammer help
Message-ID: <f205f60902110112q52ff3b06o327e3cc7de77e351@mail.gmail.com>

Hi All,

I am new to Antlr.
I have one grammer file with this syntax:

*option_statement !*  : "option" ( "base" (NUMBER)?
                   | "compare" ("text"|"binary"|"database")?
                   | "explicit"
                   | "private" "module"
                   | "internal" );
*goto_statement !*  : "goto" goto_label;

What does this exclaimatory mark significants here?
 i have generated parser from both ways keeping and removing and there are
some change correspondingly.

Could anybody make me understand this ?

ANy help would be appreciated.

Thanks and Regards,
Gunjan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090211/bffce8cb/attachment.html 

From antlr at mirality.co.nz  Wed Feb 11 01:29:56 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 11 Feb 2009 22:29:56 +1300
Subject: [antlr-interest] How to create a rule that matches fast
 everything!!!
In-Reply-To: <c522653d0902110109y5916fef9p64d4f23ad4f0b27b@mail.gmail.co
 m>
References: <c522653d0902110109y5916fef9p64d4f23ad4f0b27b@mail.gmail.com>
Message-ID: <20090211093008.9EAED341847A@www.antlr.org>

At 22:09 11/02/2009, Liviu U wrote:
 >Is there a way to specify:
 >
 >rule
 >: BEGIN   ANY* END;
 >?

Either:

rule
   : BEGIN .* END
   ;

Or (more explicitly):

rule
   : BEGIN (~END)* END
   ;

(ANTLR is normally smart enough to compile the first as if it were 
the second, provided that your end-phrase is inline and fairly 
simple.)

Note however that at parser level this will still create tokens 
for everything between BEGIN and END.  If you don't want to do 
that, then you'll have to create a lexer rule that smooshes 
everything into one token -- but then that'll take out all of 
them, not just at one particular context level.


From carter_cheng at yahoo.com  Wed Feb 11 01:54:35 2009
From: carter_cheng at yahoo.com (Carter Cheng)
Date: Wed, 11 Feb 2009 01:54:35 -0800 (PST)
Subject: [antlr-interest] tree grammar error (newbie)- missing attribute
	access
In-Reply-To: <4991A799.7010509@temporal-wave.com>
Message-ID: <482955.59932.qm@web50108.mail.re2.yahoo.com>


Thanks both.


      

From Vitaliy at dbsophic.com  Wed Feb 11 04:18:12 2009
From: Vitaliy at dbsophic.com (Vitaliy)
Date: Wed, 11 Feb 2009 14:18:12 +0200
Subject: [antlr-interest] Antlr won't backtrack?
In-Reply-To: <49905EDE.1000109@temporal-wave.com>
References: <B0DE8B66453D0F4AA67D2A150934999B01195F14FA83@ex01.dbsophicHQ.com>
	<94B43E6A-821F-4A34-BC4E-D44233864138@cs.usfca.edu>
	<B0DE8B66453D0F4AA67D2A150934999B01195F14FABC@ex01.dbsophicHQ.com>
	<49905EDE.1000109@temporal-wave.com>
Message-ID: <B0DE8B66453D0F4AA67D2A150934999B01195F14FB32@ex01.dbsophicHQ.com>

Jim,

Thanks for your response.
The problem is that the grammar I've presented below is a very simplified version of the real grammar I'm handling.
In the actual grammar there are many rules which might end in some cases with an identifier, while in other cases - not.
It's simply impractical to analyze all these cases, go over them and add the semantic predicate you've suggested.
Moreover, there is unfortunately no statement terminator in my grammar, which no doubt could have made my life so much easier, like you said.

Is there any other alternative?
Can't I just tell it somehow to try all alternatives upon failure in an exhaustive search until success?
Or somehow increase the lookahead in this case?

BTW, I still don't get it why Antlr won't backtrack upon failure in this case.. Again, isn't it just what the 'backtrack' option is all about??

I would really appreciate any suggestion,
Vitaliy

From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jim Idle
Sent: Monday, February 09, 2009 18:51
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Antlr won't backtrack?

Vitaliy wrote:
Hi Ter,

Thanks for your quick response!

I'm still confused:

What can I do to suggest Antlr to consider the other alternative, and backtrack instead of failing?

Shouldn't the backtrack option do just that - make Antlr backtrack if it has failed upon a given input?

Why would the variable alternative effect its behavior?

I would recommend that you do not use backtrack at this point. While it can be useful for prototyping, one off conversion grammars and some horrible grammars such as VBSCript, it will generally be more difficult to work out why the grammar isn't working. The errors and warnings that non-backtrack gives are real and you can backtrack on specific rule rather than the entire grammar if you must. Left factor the rules:

statement
 : Identifier (COLON {isLabel =true;} |  {isVariable=true; })
 | KEYWORD ((Identifier)=>Identifier)?
 | etc.

In some grammars it is necessary to look for some kind of terminator. For instance a statement might end in ';' or at '\n'. If it did then you grammar would avoid the ambiguity between the optional Identifier that follows KEYWORD and Identifier and Identifier COLON.

The answers to your quests are that your grammar is so ambiguous that even the best guess of backtrack mode cannot make the correct guess in all cases. As soon as it if fins an alt that looks correct it will take it.

So if you have:

KEYWORD IDENTIFIER COLON

It consumes IDENTIFIER with the KEYWORD and leaves you with a COLON, as will my example above. If you must really have the grammar this way, then you will have to use a semantic predicate:

| KEYWORD ( {input.LA(1) == Identifier && input.LA(2) != COLON}=> Identifier)?

Jim



Thanks allot for your help,
Vitaliy

From: Terence Parr [mailto:parrt at cs.usfca.edu]
Sent: Sunday, February 08, 2009 19:46
To: Vitaliy
Cc: antlr-interest at antlr.org<mailto:antlr-interest at antlr.org>
Subject: Re: [antlr-interest] Antlr won't backtrack?


On Feb 8, 2009, at 2:48 AM, Vitaliy wrote:
root                        : statements EOF;
statements            : (statement)+;
statement             : label
                                  | keyword
                                  | variable
                                  ;

identifier               : Identifier;
label                       : identifier COLON;
keyword                : KEYWORD (identifier)?;
variable                 : identifier;


"keyword label:" will always match rule keyword and then fail.  ANTLR will match greedily because you told it to shut up and backtrack.  It's hiding the warning that identifier can match now or later (during statements loop).

Ter


__________ Information from ESET NOD32 Antivirus, version of virus signature database 3837 (20090208) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com






________________________________








List: http://www.antlr.org/mailman/listinfo/antlr-interest

Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address





__________ Information from ESET NOD32 Antivirus, version of virus signature database 3844 (20090211) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090211/7d53da3f/attachment.html 

From JALuber at gmx.de  Wed Feb 11 04:36:51 2009
From: JALuber at gmx.de (Johannes Luber)
Date: Wed, 11 Feb 2009 13:36:51 +0100
Subject: [antlr-interest] Antlr Grammer help
In-Reply-To: <f205f60902110112q52ff3b06o327e3cc7de77e351@mail.gmail.com>
References: <f205f60902110112q52ff3b06o327e3cc7de77e351@mail.gmail.com>
Message-ID: <20090211123651.86030@gmx.net>

> Hi All,
> 
> I am new to Antlr.
> I have one grammer file with this syntax:
> 
> *option_statement !*  : "option" ( "base" (NUMBER)?
>                    | "compare" ("text"|"binary"|"database")?
>                    | "explicit"
>                    | "private" "module"
>                    | "internal" );
> *goto_statement !*  : "goto" goto_label;
> 
> What does this exclaimatory mark significants here?
>  i have generated parser from both ways keeping and removing and there are
> some change correspondingly.
> 
> Could anybody make me understand this ?
> 
> ANy help would be appreciated.
> 
> Thanks and Regards,
> Gunjan

Are you using ANTLR 3 or ANTLR 2.7.7? AFAIK, using ! at this place is used only in ANTLR 2.7.7 grammars. On <http://antlr2.org/> you might find the documentation.

Johannes

-- 
Jetzt 1 Monat kostenlos! GMX FreeDSL - Telefonanschluss + DSL 
f?r nur 17,95 Euro/mtl.!* http://dsl.gmx.de/?ac=OM.AD.PD003K11308T4569a

From JALuber at gmx.de  Wed Feb 11 04:46:14 2009
From: JALuber at gmx.de (Johannes Luber)
Date: Wed, 11 Feb 2009 13:46:14 +0100
Subject: [antlr-interest] Writing (for now) just a lexer
In-Reply-To: <499291BF.4020601@cs.wisc.edu>
References: <499291BF.4020601@cs.wisc.edu>
Message-ID: <20090211124614.51250@gmx.net>

> Hi all,
> 
> I'm teaching a compilers class at University of Wisconsin-Madison. 
> Traditionally the class has followed sort of a classic sequence of 
> projects 'write a lexer', 'write a parser', etc., and in the past has 
> used either JLex/Java CUP or Flex/Bison for the lexer and parser 
> generator. This is my first time teaching this class, and I'm writing 
> these assignments assuming the use of ANTLR instead. I don't really want 
> to make major changes to the class, so I want to keep these assignments 
> separate, but the combined nature of ANTLR grammars has thrown a couple 
> oddities into the way this works.

You can specify separate lexer and parser grammars by using "lexer grammar Test;" resp. "parser grammar Test;". Beware that ANTLR uses both the order (first matching rule wins) and the matched input length (longer input wins) to determine the winning rule. Furthermore, tokens with similar starting sequences need to be treated specially, as shown on < http://www.antlr.org/wiki/display/ANTLR3/Lexer+grammar+for+floating+point,+dot,+range,+time+specs>.

> Anyway, this is the one I'm not really 
> sure how to deal with, as I'm also new to ANTLR.
> 
> The question is this: how do I store additional information in a token? 
> (E.g. for the token corresponding to an int literal, how would I store 
> the value as an int?)
> 
> Using something like Flex, I know how to do this; just add an additional 
> option in the union representing the token type. But under ANTLR, I'm 
> not sure. I see "How do I use a custom token type?" 
> (http://www.antlr.org/wiki/pages/viewpage.action?pageId=1844), but this 
> isn't quite what I want, as I want to be able to return a subclass of 
> CommonToken for just a couple particular rules.

I suppose, you could decide via a flag, if the current context requires a custom token.

Johannes
> 
> The couple grammars I've looked at (for Java) don't do this, presumably 
> leaving the string->integer conversion for later, but this doesn't make 
> a whole lot of sense to be to be honest. There are potentially multiple 
> contexts where this sort of thing would need to be done later, while 
> doing it in lexing seems cleaner. It also allows me to keep better 
> consistency with the fact that I've been giving "an integer literal is 
> too large" as an example of an error that could arise during lexing. 
> (Not that you *couldn't* do it later.)
> 
> Evan Driscoll
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address

-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt? Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger01

From tbrandonau at gmail.com  Wed Feb 11 06:08:28 2009
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Thu, 12 Feb 2009 01:08:28 +1100
Subject: [antlr-interest] Writing (for now) just a lexer
In-Reply-To: <499291BF.4020601@cs.wisc.edu>
References: <499291BF.4020601@cs.wisc.edu>
Message-ID: <ebc876d70902110608i95b7672oa69bf5331a915a2a@mail.gmail.com>

On Wed, Feb 11, 2009 at 7:52 PM, Evan Driscoll <driscoll at cs.wisc.edu> wrote:

> Hi all,
>
> I'm teaching a compilers class at University of Wisconsin-Madison.
> Traditionally the class has followed sort of a classic sequence of
> projects 'write a lexer', 'write a parser', etc., and in the past has
> used either JLex/Java CUP or Flex/Bison for the lexer and parser
> generator. This is my first time teaching this class, and I'm writing
> these assignments assuming the use of ANTLR instead. I don't really want
> to make major changes to the class, so I want to keep these assignments
> separate, but the combined nature of ANTLR grammars has thrown a couple
> oddities into the way this works. Anyway, this is the one I'm not really
> sure how to deal with, as I'm also new to ANTLR.
>
> The question is this: how do I store additional information in a token?
> (E.g. for the token corresponding to an int literal, how would I store
> the value as an int?)
>
> Using something like Flex, I know how to do this; just add an additional
> option in the union representing the token type. But under ANTLR, I'm
> not sure. I see "How do I use a custom token type?"
> (http://www.antlr.org/wiki/pages/viewpage.action?pageId=1844), but this
> isn't quite what I want, as I want to be able to return a subclass of
> CommonToken for just a couple particular rules.

You could emit your own token in a lexer rule in ANTLR which will prevent
ANTLR generating it's own token. Something like:
INT:
    '0'..'9'+
    {    Token t = new IntLiteralToken(input, state.type, state.channel,
state.tokenStartCharIndex, getCharIndex()-1);
         t.setLine(state.tokenStartLine);
         t.setText(state.text);
         t.setCharPositionInLine(state.tokenStartCharPositionInLine);
         emit(t);
    }
    ;


>
>
> The couple grammars I've looked at (for Java) don't do this, presumably
> leaving the string->integer conversion for later, but this doesn't make
> a whole lot of sense to be to be honest. There are potentially multiple
> contexts where this sort of thing would need to be done later, while
> doing it in lexing seems cleaner. It also allows me to keep better
> consistency with the fact that I've been giving "an integer literal is
> too large" as an example of an error that could arise during lexing.
> (Not that you *couldn't* do it later.)

You can easily isolate it in the parser through a parser rule that takes
care of it like (check syntax):
int: INT -> INT<IntLiteralNode>[$INT];
Where the IntLiteralNode constructor takes care of parsing the text to get
an int value.
As you can see custom nodes are rather simpler to do than custom tokens. And
I think having custom nodes rather than tokens would be the more standard
practice as you would more often have most of your functionality in the AST
rather than the tokens.
Ths issue of whether int range checking should be in the lexer or parser
seems neither here nor there. It doesn't seem like something that should
halt further processing or that will introduce any syntactic ambiguity so it
doesn't seem like it *needs* to be in the lexer.

Tom.

>
>
> Evan Driscoll
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090212/0d0225e3/attachment.html 

From rschneid at bridgewater.edu  Wed Feb 11 08:05:18 2009
From: rschneid at bridgewater.edu (Raymond J. Schneider)
Date: Wed, 11 Feb 2009 11:05:18 -0500
Subject: [antlr-interest] Thanks ...
Message-ID: <172455A9DFDEF941A54573F5463F106528D859F441@bcex01.Bridgewater.local>

Thanks to Jim and Gavin for their help.
It was obvious what my problem was once you guys pointed out that the jar files have to be included explicitly in the classpath.
Moreover I didn't realize that there was an option that would let me do that at the command line.  Very helpful, especially in my IT environment.
Regards, Ray
--
Ray Schneider,PE, Ph.D
Associate Professor
Math and Computer Science
Bridgewater College
http://www.bridgewater.edu/~rschneid/
http://theweedlessgarden.blogspot.com

From jcruise at volanticesolutions.com  Wed Feb 11 08:32:13 2009
From: jcruise at volanticesolutions.com (Jamie Cruise)
Date: Wed, 11 Feb 2009 16:32:13 +0000 (GMT)
Subject: [antlr-interest] Older version of antlrworks ...
In-Reply-To: <8917147.1641234368216867.JavaMail.jcruise@volsol-04.volanticesolutions.local>
Message-ID: <4081270.1681234368503909.JavaMail.jcruise@volsol-04.volanticesolutions.local>

Hi,

I am using antlrworks to build a grammar that will be embedded in an application that uses drools. Drools has a dependency on antlr 3.0.1 (as best I could figure out) but antlrworks 1.2.2 embeds a later version. I tried unpacking antlrworks 1.2.2 and downgrading the antlr runtime, but that didn't work out. 

I was therefore wondering if any of the esteemed members on on this list could point me in the direction of a antlrworks-1.1.7.jar file (or whatever version had 3.0.1 embedded).

Best regards 
Jamie 

From brent.yates at gmail.com  Wed Feb 11 09:52:23 2009
From: brent.yates at gmail.com (Brent Yates)
Date: Wed, 11 Feb 2009 12:52:23 -0500
Subject: [antlr-interest] Lexer issues when block ends with EOF instead of
	EOL
Message-ID: <6edc6c380902110952h15ac80a7n1235f0f76b53c633@mail.gmail.com>

Assuming a standard LINE comment form such as:
SL_COMMENT
    : '//'  ( options {greedy=false;} : . )*  '\r'? '\n' {$channel=HIDDEN;}
    ;

What is the best way to handle a file which ends with a single line comment
but no EOL?

If I add the EOF to the rule I get the following error:

SL_COMMENT
    : '//'  ( options {greedy=false;} : . )*  '\r'? ('\n'|EOF)
{$channel=HIDDEN;}
    ;

ANTLR Parser Generator  Version 3.1.1
error(201): SystemVerilogLexer.g:592:43: The following alternatives can
never be matched: 1

This problem occurs with other rules as well.  Is it expected that files
which end with no EOL are bad or should the lexer handle it?

Thanks.

Brent Yates
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090211/57437f48/attachment.html 

From parrt at cs.usfca.edu  Wed Feb 11 09:54:23 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 11 Feb 2009 09:54:23 -0800
Subject: [antlr-interest] Older version of antlrworks ...
In-Reply-To: <4081270.1681234368503909.JavaMail.jcruise@volsol-04.volanticesolutions.local>
References: <4081270.1681234368503909.JavaMail.jcruise@volsol-04.volanticesolutions.local>
Message-ID: <3602C6AA-9654-4078-8D59-5DF29A589A79@cs.usfca.edu>

there may be some internal incompatibilities with the versions.  the  
drools guys are upgrading as we speak though to 3.1.1
T
On Feb 11, 2009, at 8:32 AM, Jamie Cruise wrote:

> Hi,
>
> I am using antlrworks to build a grammar that will be embedded in an  
> application that uses drools. Drools has a dependency on antlr 3.0.1  
> (as best I could figure out) but antlrworks 1.2.2 embeds a later  
> version. I tried unpacking antlrworks 1.2.2 and downgrading the  
> antlr runtime, but that didn't work out.
>
> I was therefore wondering if any of the esteemed members on on this  
> list could point me in the direction of a antlrworks-1.1.7.jar file  
> (or whatever version had 3.0.1 embedded).
>
> Best regards
> Jamie
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From jimi at temporal-wave.com  Wed Feb 11 10:20:51 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 11 Feb 2009 10:20:51 -0800
Subject: [antlr-interest] Lexer issues when block ends with EOF instead
 of	EOL
In-Reply-To: <6edc6c380902110952h15ac80a7n1235f0f76b53c633@mail.gmail.com>
References: <6edc6c380902110952h15ac80a7n1235f0f76b53c633@mail.gmail.com>
Message-ID: <49931703.9040500@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090211/342d6614/attachment.html 

From jimi at temporal-wave.com  Wed Feb 11 10:59:19 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 11 Feb 2009 10:59:19 -0800
Subject: [antlr-interest] Lexer issues when block ends with EOF instead
 of	EOL
In-Reply-To: <6edc6c380902110952h15ac80a7n1235f0f76b53c633@mail.gmail.com>
References: <6edc6c380902110952h15ac80a7n1235f0f76b53c633@mail.gmail.com>
Message-ID: <49932007.2080904@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090211/aef7fa91/attachment.html 

From sharwell at pixelminegames.com  Wed Feb 11 11:05:25 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Wed, 11 Feb 2009 13:05:25 -0600
Subject: [antlr-interest] Lexer issues when block ends with EOF instead
	ofEOL
In-Reply-To: <6edc6c380902110952h15ac80a7n1235f0f76b53c633@mail.gmail.com>
References: <6edc6c380902110952h15ac80a7n1235f0f76b53c633@mail.gmail.com>
Message-ID: <86403CA0939415448BCCB83855EFE09AA67938@Bloodymary.ironwillgames.com>

This works because lexer tokens are greedy:

 

LINE_COMMENT

        :       '//' (~('\n'|'\r'))* '\r'? '\n'?

                { $channel=HIDDEN; }

        ;

 

Sam

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Brent Yates
Sent: Wednesday, February 11, 2009 11:52 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Lexer issues when block ends with EOF instead
ofEOL

 

Assuming a standard LINE comment form such as:

 

SL_COMMENT

    : '//'  ( options {greedy=false;} : . )*  '\r'? '\n'
{$channel=HIDDEN;}

    ;

 

What is the best way to handle a file which ends with a single line
comment but no EOL?

 

If I add the EOF to the rule I get the following error:

 

SL_COMMENT

    : '//'  ( options {greedy=false;} : . )*  '\r'? ('\n'|EOF)
{$channel=HIDDEN;}

    ;

 

ANTLR Parser Generator  Version 3.1.1

error(201): SystemVerilogLexer.g:592:43: The following alternatives can
never be matched: 1

 

This problem occurs with other rules as well.  Is it expected that files
which end with no EOL are bad or should the lexer handle it?

 

Thanks.

 

Brent Yates

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090211/300e1cb8/attachment.html 

From brent.yates at gmail.com  Wed Feb 11 11:09:21 2009
From: brent.yates at gmail.com (Brent Yates)
Date: Wed, 11 Feb 2009 14:09:21 -0500
Subject: [antlr-interest] Lexer issues when block ends with EOF instead
	ofEOL
In-Reply-To: <86403CA0939415448BCCB83855EFE09AA67938@Bloodymary.ironwillgames.com>
References: <6edc6c380902110952h15ac80a7n1235f0f76b53c633@mail.gmail.com>
	<86403CA0939415448BCCB83855EFE09AA67938@Bloodymary.ironwillgames.com>
Message-ID: <6edc6c380902111109t2f704559ycd81013b205d73bc@mail.gmail.com>

Thanks for the comments guys.  I like Jim's idea of adding an EOL to the
input source.  I can do that very easily and then I don't have to fix all my
block rules in the lexer.  Line comments were just an easy example, but
there are several more places where the same thing happens.
Regards,

Brent Yates

On Wed, Feb 11, 2009 at 2:05 PM, Sam Harwell <sharwell at pixelminegames.com>wrote:

>  This works because lexer tokens are greedy:
>
>
>
> LINE_COMMENT
>
>         :       '//' (~('\n'|'\r'))* '\r'? '\n'?
>
>                 { $channel=HIDDEN; }
>
>         ;
>
>
>
> Sam
>
>
>
> *From:* antlr-interest-bounces at antlr.org [mailto:
> antlr-interest-bounces at antlr.org] *On Behalf Of *Brent Yates
> *Sent:* Wednesday, February 11, 2009 11:52 AM
> *To:* antlr-interest at antlr.org
> *Subject:* [antlr-interest] Lexer issues when block ends with EOF instead
> ofEOL
>
>
>
> Assuming a standard LINE comment form such as:
>
>
>
> SL_COMMENT
>
>     : '//'  ( options {greedy=false;} : . )*  '\r'? '\n' {$channel=HIDDEN;}
>
>     ;
>
>
>
> What is the best way to handle a file which ends with a single line comment
> but no EOL?
>
>
>
> If I add the EOF to the rule I get the following error:
>
>
>
> SL_COMMENT
>
>     : '//'  ( options {greedy=false;} : . )*  '\r'? ('\n'|EOF)
> {$channel=HIDDEN;}
>
>     ;
>
>
>
> ANTLR Parser Generator  Version 3.1.1
>
> error(201): SystemVerilogLexer.g:592:43: The following alternatives can
> never be matched: 1
>
>
>
> This problem occurs with other rules as well.  Is it expected that files
> which end with no EOL are bad or should the lexer handle it?
>
>
>
> Thanks.
>
>
>
> Brent Yates
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090211/dc00680a/attachment.html 

From paul.mckee at mckeetech.com  Wed Feb 11 14:22:29 2009
From: paul.mckee at mckeetech.com (Paul McKee)
Date: Wed, 11 Feb 2009 22:22:29 -0000
Subject: [antlr-interest] Having a problem with AST construction: rule
	fromClause alt 1 uses rewrite syntax and also an AST operator
Message-ID: <032AFE26E63E435D9B71F5FFC950E09B@mckeepaPC>




Hello:

I'm a Newbie to ANTLR and I hope someone can offer me some advice. I'm trying to create a T-SQL Parser with output as an AST. I have:
options {
 backtrack=true;
 output=AST;
} 
Lines 410 and 411 of the grammar file are:

fromClause  :
 FROM! tableSource
 ( COMMA! tableSource )* -> ^(FROM tableSource)+
 ;

And this generates the error mesages:

[21:43:33] error(165): Z:\tsql\Tsql_a1.g:410:2: rule fromClause alt 1 uses rewrite syntax and also an AST operator
[21:43:33] error(165): Z:\tsql\Tsql_a1.g:411:4: rule fromClause alt 1 uses rewrite syntax and also an AST operator

However, when I split this into two rules as follows:

fromClause 
 : fromClause1 -> ^(FROM fromClause1);
fromClause1  :
 FROM! tableSource
 ( COMMA! tableSource )*  ;

Then it all works fine.
I am using the latest version of ANTLRworks.
Any help or ideas would be much appreciated.

Best Regards

Paul McKee


__________ Information from ESET NOD32 Antivirus, version of virus signature database 3846 (20090211) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090211/7ce24872/attachment.html 

From parrt at cs.usfca.edu  Wed Feb 11 14:30:37 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 11 Feb 2009 14:30:37 -0800
Subject: [antlr-interest] Having a problem with AST construction: rule
	fromClause alt 1 uses rewrite syntax and also an AST operator
In-Reply-To: <032AFE26E63E435D9B71F5FFC950E09B@mckeepaPC>
References: <032AFE26E63E435D9B71F5FFC950E09B@mckeepaPC>
Message-ID: <360F522F-A01E-4937-AC5C-36A6C1202659@cs.usfca.edu>

Hi Paul, don't use ! and ->.  Just remove ! here and life is good.
Ter
On Feb 11, 2009, at 2:22 PM, Paul McKee wrote:

>
>
> Hello:
>
> I'm a Newbie to ANTLR and I hope someone can offer me some advice.  
> I'm trying to create a T-SQL Parser with output as an AST. I have:
> options {
>  backtrack=true;
>  output=AST;
> }
> Lines 410 and 411 of the grammar file are:
>
> fromClause  :
>  FROM! tableSource
>  ( COMMA! tableSource )* -> ^(FROM tableSource)+
>  ;
>
> And this generates the error mesages:
>
> [21:43:33] error(165): Z:\tsql\Tsql_a1.g:410:2: rule fromClause alt  
> 1 uses rewrite syntax and also an AST operator
> [21:43:33] error(165): Z:\tsql\Tsql_a1.g:411:4: rule fromClause alt  
> 1 uses rewrite syntax and also an AST operator
>
> However, when I split this into two rules as follows:
>
> fromClause
>  : fromClause1 -> ^(FROM fromClause1);
> fromClause1  :
>  FROM! tableSource
>  ( COMMA! tableSource )*  ;
>
> Then it all works fine.
> I am using the latest version of ANTLRworks.
> Any help or ideas would be much appreciated.
>
> Best Regards
>
> Paul McKee
>
>
> __________ Information from ESET NOD32 Antivirus, version of virus  
> signature database 3846 (20090211) __________
>
> The message was checked by ESET NOD32 Antivirus.
>
> http://www.eset.com
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From paul.mckee at mckeetech.com  Wed Feb 11 14:41:00 2009
From: paul.mckee at mckeetech.com (Paul McKee)
Date: Wed, 11 Feb 2009 22:41:00 -0000
Subject: [antlr-interest] Having a problem with AST construction: rule
	fromClause alt 1 uses rewrite syntax and also an AST operator
In-Reply-To: <360F522F-A01E-4937-AC5C-36A6C1202659@cs.usfca.edu>
References: <032AFE26E63E435D9B71F5FFC950E09B@mckeepaPC>
	<360F522F-A01E-4937-AC5C-36A6C1202659@cs.usfca.edu>
Message-ID: <F9C7FF6316A34FA9B69257F81CA94FE2@mckeepaPC>

That did it, and I understand why as well!
Thanks very much Ter!

----- Original Message ----- 
From: "Terence Parr" <parrt at cs.usfca.edu>
To: "Paul McKee" <paul.mckee at mckeetech.com>
Cc: <antlr-interest at antlr.org>
Sent: Wednesday, February 11, 2009 10:30 PM
Subject: Re: [antlr-interest] Having a problem with AST construction: rule 
fromClause alt 1 uses rewrite syntax and also an AST operator


> Hi Paul, don't use ! and ->.  Just remove ! here and life is good.
> Ter
> On Feb 11, 2009, at 2:22 PM, Paul McKee wrote:
>
>>
>>
>> Hello:
>>
>> I'm a Newbie to ANTLR and I hope someone can offer me some advice.  I'm 
>> trying to create a T-SQL Parser with output as an AST. I have:
>> options {
>>  backtrack=true;
>>  output=AST;
>> }
>> Lines 410 and 411 of the grammar file are:
>>
>> fromClause  :
>>  FROM! tableSource
>>  ( COMMA! tableSource )* -> ^(FROM tableSource)+
>>  ;
>>
>> And this generates the error mesages:
>>
>> [21:43:33] error(165): Z:\tsql\Tsql_a1.g:410:2: rule fromClause alt  1 
>> uses rewrite syntax and also an AST operator
>> [21:43:33] error(165): Z:\tsql\Tsql_a1.g:411:4: rule fromClause alt  1 
>> uses rewrite syntax and also an AST operator
>>
>> However, when I split this into two rules as follows:
>>
>> fromClause
>>  : fromClause1 -> ^(FROM fromClause1);
>> fromClause1  :
>>  FROM! tableSource
>>  ( COMMA! tableSource )*  ;
>>
>> Then it all works fine.
>> I am using the latest version of ANTLRworks.
>> Any help or ideas would be much appreciated.
>>
>> Best Regards
>>
>> Paul McKee
>>
>>
>> __________ Information from ESET NOD32 Antivirus, version of virus 
>> signature database 3846 (20090211) __________
>>
>> The message was checked by ESET NOD32 Antivirus.
>>
>> http://www.eset.com
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: 
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
> __________ Information from ESET NOD32 Antivirus, version of virus 
> signature database 3846 (20090211) __________
>
> The message was checked by ESET NOD32 Antivirus.
>
> http://www.eset.com
>
>
> 


From Richard.Lewis at ite.com.au  Wed Feb 11 15:38:33 2009
From: Richard.Lewis at ite.com.au (Richard Lewis)
Date: Thu, 12 Feb 2009 10:38:33 +1100
Subject: [antlr-interest] Are C++ STL instances safe to use with the C
	runtime?
Message-ID: <1633C11AAD5C1C47A79C673A32A64FBADC0F9E@webmail.ite.com.au>

Hi, I just started the process of determining how to convert my JAVA
runtime based grammar into the C runtime. Will I run into memory
allocation issues if I embed STL? For example, in my current grammar I
use:

 

scope RScope {

                String name;

                HashMap<String,Enum> symbols;

}

 

If I translate this to:

 

scope RScope {

                std::string name;

                std::map<std::string, int> symbols;

}

 

Is this even going to compile? And if it does, will it blow up or leak
memory?

 

The second part of my question is: Will there be a C++ runtime available
in the near future?

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090212/e0d291c8/attachment.html 

From driscoll at cs.wisc.edu  Wed Feb 11 15:42:19 2009
From: driscoll at cs.wisc.edu (Evan Driscoll)
Date: Wed, 11 Feb 2009 17:42:19 -0600
Subject: [antlr-interest] Writing (for now) just a lexer
In-Reply-To: <20090211124614.51250@gmx.net>
References: <499291BF.4020601@cs.wisc.edu> <20090211124614.51250@gmx.net>
Message-ID: <4993625B.8020009@cs.wisc.edu>

Thanks for the responses before. I mention them below. I have a new
question though, which is that it doesn't seem to ignore
hidden/whitespace tokens.

I have this definition:
    NEWLINE : '\n'   { $channel=HIDDEN; }
            | '\r\n' { $channel=HIDDEN; }
            | '\r'   { $channel=HIDDEN; }
            ;
but it still gets returned by the nextToken() function.

Does the $channel=HIDDEN only work if you start using it in the context
of a lexer or something?

If you want to see code,
   Grammar: www.cs.wisc.edu/~cs536-1/projects/pr2/html/Tea.g.html
   Main fn: www.cs.wisc.edu/~cs536-1/projects/pr2/html/Test.java.html

(While I'm throwing out questions, is there a better way to do the
tokenNames() function in the main class? There's a getTokenNames()
method in the generated class, but it doesn't seem to work; my
impression is that it's generated for /parsers/ to contain the tokens
they refer to.)


Johannes Luber wrote:
> Furthermore, tokens with similar starting sequences need to be treated specially, as shown on < http://www.antlr.org/wiki/display/ANTLR3/Lexer+grammar+for+floating+point,+dot,+range,+time+specs>.

This is something I don't quite understand, because I can do this:
    INT_LITERAL
        : ('0'..'9')+
        ;

   FLOAT_LITERAL
        : ('0'..'9')+ '.' ('0'..'9')+
        ;
and it seems to just work. I can even use "INT_LITERAL '.' INT_LITERAL"
as the pattern for the float.

(I'm ignoring exponential numbers.)


Thomas Brandon wrote:
> You could emit your own token in a lexer rule in ANTLR which will
> prevent ANTLR generating it's own token. Something like:
> INT:
>     '0'..'9'+
>     {
>          Token t = new IntLiteralToken(input, state.type,
>                      state.channel, state.tokenStartCharIndex,
>                      getCharIndex()-1);
>          t.setLine(state.tokenStartLine);
>          t.setText(state.text);
>          t.setCharPositionInLine(state.tokenStartCharPositionInLine);
>          emit(t);
>     }
>     ;

This makes sense; thanks.


> You can easily isolate it in the parser through a parser rule that
> takes care of it like (check syntax):
> int: INT -> INT<IntLiteralNode>[$INT];
> Where the IntLiteralNode constructor takes care of parsing the text to
> get an int value. As you can see custom nodes are rather simpler to do
> than custom tokens. And I think having custom nodes rather than tokens
> would be the more standard practice as you would more often have most
> of your functionality in the AST rather than the tokens.

I'll give this some thought too. (Maybe my conceptual model is different
for not having worked with a combined lexer/parser or something like
that, or maybe for having done a lot of processing of ASTs that are
unrelated to actual parsing, but it seems more natural to me to have the
text->int conversion done outside of the AST constructor.)


> Ths issue of whether int range checking should be in the lexer or
> parser seems neither here nor there. It doesn't seem like something
> that should halt further processing or that will introduce any
> syntactic ambiguity so it doesn't seem like it *needs* to be in the
> lexer.

Well, it doesn't need to be in the lexer. From a compiler construction
standpoint, it seems like a toss-up to me. I'm more interested from a
pedagogical standpoint, and it's only a slight preference even then.

(You could also split up range detection so it's separate from actually
converting the number like the sample in the example Johannes Luber
linked to, and check the range in the lexer but actually convert it
later. But seems to me the best way to check the range is to try to
convert it anyway, so this seems the least attractive.)


Evan Driscoll


From jimi at temporal-wave.com  Wed Feb 11 15:57:05 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 11 Feb 2009 15:57:05 -0800
Subject: [antlr-interest] Are C++ STL instances safe to use with the C
 runtime?
In-Reply-To: <1633C11AAD5C1C47A79C673A32A64FBADC0F9E@webmail.ite.com.au>
References: <1633C11AAD5C1C47A79C673A32A64FBADC0F9E@webmail.ite.com.au>
Message-ID: <499365D1.7050406@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090211/e951fa45/attachment.html 

From driscoll at cs.wisc.edu  Wed Feb 11 16:08:55 2009
From: driscoll at cs.wisc.edu (Evan Driscoll)
Date: Wed, 11 Feb 2009 18:08:55 -0600
Subject: [antlr-interest] Writing (for now) just a lexer
In-Reply-To: <4993625B.8020009@cs.wisc.edu>
References: <499291BF.4020601@cs.wisc.edu> <20090211124614.51250@gmx.net>
	<4993625B.8020009@cs.wisc.edu>
Message-ID: <49936897.2020606@cs.wisc.edu>

Evan Driscoll wrote:
> Thanks for the responses before. I mention them below. I have a new
> question though, which is that it doesn't seem to ignore
> hidden/whitespace tokens.

Sorry to reply to myself, but I should be a little more explicit here.

If I run the program whose code I linked to before (which basically just
calls nextToken() for a while and echoes each thing it gets), if I give
it the input "10 443.7" followed by a newline, I will get this as the
output:

  1:0: INT_LITERAL
  org.antlr.runtime.CommonToken
  1:3: FLOAT_LITERAL
  org.antlr.runtime.CommonToken
  1:8: NEWLINE                        <--- note the newline
  org.antlr.runtime.CommonToken
  0:-1: EOF
  org.antlr.runtime.CommonToken



> Does the $channel=HIDDEN only work if you start using it in the context
> of a lexer or something?
       ^^^^^
This should say "parser, not lexer. (In other words, hidden tokens will
be ignored by parser rules that don't explicitly ask for them, but since
there's an implicit nextToken parser rule for lexer grammars that looks
like 'nextToken: INT_LITERAL | FLOAT_LITERAL | WHITESPACE | NEWLINE' for
me, and it explicitly lists the newline, it's returned?)


Finally, running skip() instead of $channel=HIDDEN does do what I want,
so this isn't a critical issue either.

Evan Driscoll

From Richard.Lewis at ite.com.au  Wed Feb 11 16:24:40 2009
From: Richard.Lewis at ite.com.au (Richard Lewis)
Date: Thu, 12 Feb 2009 11:24:40 +1100
Subject: [antlr-interest] Are C++ STL instances safe to use with the C
	runtime?
In-Reply-To: <499365D1.7050406@temporal-wave.com>
References: <1633C11AAD5C1C47A79C673A32A64FBADC0F9E@webmail.ite.com.au>
	<499365D1.7050406@temporal-wave.com>
Message-ID: <1633C11AAD5C1C47A79C673A32A64FBADC0FA6@webmail.ite.com.au>

Thanks! Having looked at the examples, I'm starting to think that using
pANTLR3_HASH_TABLE and pANTLR3_STRING might cause less pain. I don't
have a requirement to use STL but it seemed easier when converting from
JAVA. 

 

Looking forward to the C++ runtime. 

 

-Richard

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jim Idle
Sent: Thursday, 12 February 2009 10:57 AM
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Are C++ STL instances safe to use with the
C runtime?

 

Richard Lewis wrote: 

Hi, I just started the process of determining how to convert my JAVA
runtime based grammar into the C runtime. Will I run into memory
allocation issues if I embed STL? For example, in my current grammar I
use:

 

scope RScope {

                String name;

                HashMap<String,Enum> symbols;

}

 

If I translate this to:

 

scope RScope {

                std::string name;

                std::map<std::string, int> symbols;

}

Basically, so long as it gets by the ANTLR parser, then it will pretty
much be spit out as seen. However, you need to copy the code in the C
parser example to initialize anything in the scope that isn't automatic,
and also to register a freeScope() function that knows how to free
anything in the scope that isn't automatic. So you r symbol map probably
wants to be a pointer, which you create with new and delete it when the
scope is freed (it will call you back to tell you).

I will be updating the examples for 3.1.2 shortly, and this will show
you how to handle such things much more efficiently than the current
examples (which was really meant as a scope example rather than an
efficiency example.



 

Is this even going to compile? And if it does, will it blow up or leak
memory?


You might find that you have to typedef it to fool ANTLR in some cases,
but generally it will be OK. The output file will be a C file, but if
you compile it is as C++ then it should be fine. There are a couple of
bugs with rewrites and casts that are on my list to fix very soon, ready
for 3.1.2.



 

The second part of my question is: Will there be a C++ runtime available
in the near future?

Don't know how near because I keep getting pulled off into other things,
but I have been working on it. You should be fine with the C runtime but
please read through all the examples and the docs before going to far
;-)

Jim



 

 


________________________________



 
 
List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address
  

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090212/283e47ff/attachment.html 

From tbrandonau at gmail.com  Wed Feb 11 17:50:53 2009
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Thu, 12 Feb 2009 12:50:53 +1100
Subject: [antlr-interest] Writing (for now) just a lexer
In-Reply-To: <4993625B.8020009@cs.wisc.edu>
References: <499291BF.4020601@cs.wisc.edu> <20090211124614.51250@gmx.net>
	<4993625B.8020009@cs.wisc.edu>
Message-ID: <ebc876d70902111750ydee60f1l8db97cf9c28bae6@mail.gmail.com>

On Thu, Feb 12, 2009 at 10:42 AM, Evan Driscoll <driscoll at cs.wisc.edu>wrote:

> Thanks for the responses before. I mention them below. I have a new
> question though, which is that it doesn't seem to ignore
> hidden/whitespace tokens.
>
> I have this definition:
>    NEWLINE : '\n'   { $channel=HIDDEN; }
>            | '\r\n' { $channel=HIDDEN; }
>            | '\r'   { $channel=HIDDEN; }
>            ;
> but it still gets returned by the nextToken() function.
>
> Does the $channel=HIDDEN only work if you start using it in the context
> of a lexer or something?

Ignoring of off-channel tokens (like those on the HIDDEN channel) is handled
in the TokenStream. Either attach a TokenStream and access tokens through
that or implement your own handling of them. Or as you found use skip().

>
>
> If you want to see code,
>   Grammar: www.cs.wisc.edu/~cs536-1/projects/pr2/html/Tea.g.html<http://www.cs.wisc.edu/%7Ecs536-1/projects/pr2/html/Tea.g.html>
>   Main fn: www.cs.wisc.edu/~cs536-1/projects/pr2/html/Test.java.html<http://www.cs.wisc.edu/%7Ecs536-1/projects/pr2/html/Test.java.html>
>
> (While I'm throwing out questions, is there a better way to do the
> tokenNames() function in the main class? There's a getTokenNames()
> method in the generated class, but it doesn't seem to work; my
> impression is that it's generated for /parsers/ to contain the tokens
> they refer to.)
>
>
> Johannes Luber wrote:
> > Furthermore, tokens with similar starting sequences need to be treated
> specially, as shown on <
> http://www.antlr.org/wiki/display/ANTLR3/Lexer+grammar+for+floating+point,+dot,+range,+time+specs
> >.
>
> This is something I don't quite understand, because I can do this:
>    INT_LITERAL
>        : ('0'..'9')+
>        ;
>
>   FLOAT_LITERAL
>        : ('0'..'9')+ '.' ('0'..'9')+
>        ;
> and it seems to just work. I can even use "INT_LITERAL '.' INT_LITERAL"
> as the pattern for the float.
>
> (I'm ignoring exponential numbers.)
>
The problem is not tokens with similar starting sequences per se but an
issue of matching a single token versus a sequence of tokens. In generating
lookaheads ANTLR only considers a single token, so in your grammar ANTLR
will have no problem as both are single tokens and so are fully considered.
If you add the following rules:
DOT: '.';
ID: ('a'..'z')+;
And give it as input something like "10.abc" then I think you should see the
problem. Here at the start of the input ANTLR will lookahead over the
initial numbers and then as soon as it sees the '.' will decide that it must
be a float, then when it encounters a letter rather than a number it will
generate an error as it can't match the second ('0'..'9')+ loop of the float
rule.
As ANTLR only considers single tokens it is essentially matching the input
against an implicit rule:
MTOKENS: (INT_LITERAL|FLOAT_LITERAL|DOT|ID);
You can see this rule in the generated mTokens method. Given this choice
seeing the dot is enough to predict that it is a float literal (given that
the longest match wins) so ANTLR will make this decision.

Tom.

>
>
> Thomas Brandon wrote:
> > You could emit your own token in a lexer rule in ANTLR which will
> > prevent ANTLR generating it's own token. Something like:
> > INT:
> >     '0'..'9'+
> >     {
> >          Token t = new IntLiteralToken(input, state.type,
> >                      state.channel, state.tokenStartCharIndex,
> >                      getCharIndex()-1);
> >          t.setLine(state.tokenStartLine);
> >          t.setText(state.text);
> >          t.setCharPositionInLine(state.tokenStartCharPositionInLine);
> >          emit(t);
> >     }
> >     ;
>
> This makes sense; thanks.
>
>
> > You can easily isolate it in the parser through a parser rule that
> > takes care of it like (check syntax):
> > int: INT -> INT<IntLiteralNode>[$INT];
> > Where the IntLiteralNode constructor takes care of parsing the text to
> > get an int value. As you can see custom nodes are rather simpler to do
> > than custom tokens. And I think having custom nodes rather than tokens
> > would be the more standard practice as you would more often have most
> > of your functionality in the AST rather than the tokens.
>
> I'll give this some thought too. (Maybe my conceptual model is different
> for not having worked with a combined lexer/parser or something like
> that, or maybe for having done a lot of processing of ASTs that are
> unrelated to actual parsing, but it seems more natural to me to have the
> text->int conversion done outside of the AST constructor.)
>
>
> > Ths issue of whether int range checking should be in the lexer or
> > parser seems neither here nor there. It doesn't seem like something
> > that should halt further processing or that will introduce any
> > syntactic ambiguity so it doesn't seem like it *needs* to be in the
> > lexer.
>
> Well, it doesn't need to be in the lexer. From a compiler construction
> standpoint, it seems like a toss-up to me. I'm more interested from a
> pedagogical standpoint, and it's only a slight preference even then.
>
> (You could also split up range detection so it's separate from actually
> converting the number like the sample in the example Johannes Luber
> linked to, and check the range in the lexer but actually convert it
> later. But seems to me the best way to check the range is to try to
> convert it anyway, so this seems the least attractive.)
>
>
> Evan Driscoll
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090212/83e874ea/attachment.html 

From g.r.vansickle at att.net  Wed Feb 11 21:37:53 2009
From: g.r.vansickle at att.net (Gary R. Van Sickle)
Date: Wed, 11 Feb 2009 23:37:53 -0600
Subject: [antlr-interest] Labels broken?
Message-ID: <87E212780E0241F6AA690D85CA05FE61@DFW5RB41>

>From what I can tell from page 170 of the book, this should result in
"^(DECL_SPECS <<list of decl specs>>)":

declaration_specifiers
	: ds+=(   storage_class_specifier
		  |   type_specifier
      |   type_qualifier
      | function_specifier
      | extended_decl_specs
    )+ -> ^(DECL_SPECS $ds+)
	;

With "ANTLR Parser Generator  Version 3.1.2-2008-10-21", it doesn't, in fact
it results in a broken parser (not the tree parser, there isn't one yet).  I
instead get a bunch of this sort of error:

./test/testprog1/test.c(2)  : error 8 : Unexpected token, at offset 12
    near [Index: 6 (Start: 8980854-Stop: 8980870) ='THIS_IS_A_TYPEDEF',
type<39> Line: 2 LinePos:12]
     : syntax not recognized...

Doing "ds=" results in the same problem.  Am I misunderstanding something,
or is this breakage?

-- 
Gary R. Van Sickle


From antlr at mirality.co.nz  Wed Feb 11 23:06:07 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 12 Feb 2009 20:06:07 +1300
Subject: [antlr-interest] Are C++ STL instances safe to use with the C
 runtime?
In-Reply-To: <1633C11AAD5C1C47A79C673A32A64FBADC0F9E@webmail.ite.com.au>
References: <1633C11AAD5C1C47A79C673A32A64FBADC0F9E@webmail.ite.com.au>
Message-ID: <20090212070637.882E13418467@www.antlr.org>

At 12:38 12/02/2009, Richard Lewis wrote:
>Hi, I just started the process of determining how to convert my 
>JAVA runtime based grammar into the C runtime. Will I run into 
>memory allocation issues if I embed STL? For example, in my 
>current grammar I use:
[...]
>If I translate this to:
>
>scope RScope {
>                 std::string name;
>                 std::map<std::string, int> symbols;
>}
>
>Is this even going to compile? And if it does, will it blow up or 
>leak memory?

IIRC from a related discussion last week, this will indeed blow up 
unless (as Jim suggested) you make these into pointers and call 
new/delete at the appropriate points.  (Or you leave it as is and 
use placement new and explicit destruction; but those are just 
weird-looking.)

This is because the default initialisation of the scope structures 
just calls malloc, which won't invoke any constructors (and the 
free at cleanup time won't call destructors).


Jim: maybe it'd be useful to put the definition of ANTLR3_MALLOC, 
ANTLR3_CALLOC, and ANTLR3_FREE into an #ifdef __cplusplus block, 
so that if the parser is being compiled as C++ it'll invoke 
new/delete instead of malloc/free.  (Though some care might be 
needed if arrays of parser-definable structures are ever 
allocated.)  That ought to automatically make the use of C++ types 
within scopes "safe", at least as far as construction/destruction 
goes.

Or possibly (to limit the blast radius) rather than changing those 
three macros directly the templates for the scope code could be 
changed to call different macros that call malloc/new as 
appropriate.  (Something similar should be done for the rule 
return structures, too.)

Of course, none of this is exception-safe, which does complicate 
the use of C++ types, since most will assume that they can throw 
exceptions with impunity.  It seems probable that any thrown 
exceptions would lead to a memory leak somewhere.


From jaluber at gmx.de  Wed Feb 11 23:09:00 2009
From: jaluber at gmx.de (Johannes Luber)
Date: Thu, 12 Feb 2009 08:09:00 +0100
Subject: [antlr-interest] Labels broken?
In-Reply-To: <87E212780E0241F6AA690D85CA05FE61@DFW5RB41>
References: <87E212780E0241F6AA690D85CA05FE61@DFW5RB41>
Message-ID: <4993CB0C.30901@gmx.de>

Gary R. Van Sickle schrieb:
>> >From what I can tell from page 170 of the book, this should result in
> "^(DECL_SPECS <<list of decl specs>>)":
> 
> declaration_specifiers
> 	: ds+=(   storage_class_specifier
> 		  |   type_specifier
>       |   type_qualifier
>       | function_specifier
>       | extended_decl_specs
>     )+ -> ^(DECL_SPECS $ds+)
> 	;
> 
> With "ANTLR Parser Generator  Version 3.1.2-2008-10-21", it doesn't, in fact
> it results in a broken parser (not the tree parser, there isn't one yet).  I
> instead get a bunch of this sort of error:
> 
> ./test/testprog1/test.c(2)  : error 8 : Unexpected token, at offset 12
>     near [Index: 6 (Start: 8980854-Stop: 8980870) ='THIS_IS_A_TYPEDEF',
> type<39> Line: 2 LinePos:12]
>      : syntax not recognized...
> 
> Doing "ds=" results in the same problem.  Am I misunderstanding something,
> or is this breakage?
> 
It's a long standing bug that labels don't work with parentheses. Either
put the label in front of every alternative or put the contents of the
parentheses into an extra rule so you can get rid of the parentheses.

Johannes

From michael.bedward at gmail.com  Thu Feb 12 03:06:00 2009
From: michael.bedward at gmail.com (Michael Bedward)
Date: Thu, 12 Feb 2009 22:06:00 +1100
Subject: [antlr-interest] maven plugin always regenerates sources
Message-ID: <e24c4c270902120306u5bbf05b8sad6d0de44210c1dc@mail.gmail.com>

Hi folks,

I'm using the org.antlr maven plugin.  It does a great job - it just
seems to want to do it all the time :-)  In other words, it _always_
wants to re-generate the sources, even when the existing files are
more recent that the grammar files.

I'm using maven from within Netbeans.  I've fiddled with the plugin
section in the pom a bit but I must be missing something.  My present
setup is below.

If someone could enlighten me I'd be very grateful.

            <plugin>
                <groupId>org.antlr</groupId>
                <artifactId>antlr3-maven-plugin</artifactId>
                <version>3.1.1.2</version>
                <configuration>

<libDirectory>target/generated-sources/antlr/jaitools/jiffle/parser</libDirectory>
                </configuration>
                <executions>
                    <execution>
                        <phase>generate-sources</phase>
                        <goals>
                            <goal>antlr</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>

cheers
Michael

From blinku at gmail.com  Thu Feb 12 03:13:28 2009
From: blinku at gmail.com (=?KOI8-R?B?5dfHxc7JyiDi2d7Lz9c=?=)
Date: Thu, 12 Feb 2009 14:13:28 +0300
Subject: [antlr-interest] lexer lookahead in antlr v3
In-Reply-To: <5fa8bf4a0902120245k40b97348kba902928f39d4d4b@mail.gmail.com>
References: <5fa8bf4a0902120245k40b97348kba902928f39d4d4b@mail.gmail.com>
Message-ID: <5fa8bf4a0902120313p62fb5695m17fbb6b8a09b6daf@mail.gmail.com>

 Hello everyone!

How can I set k=4(for example) for lexer in v3
I'm trying to convert my v2 grammar...

Thanks in advance.

Jon
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090212/bb9ed551/attachment.html 

From des at deshartman.com  Thu Feb 12 03:22:36 2009
From: des at deshartman.com (Des Hartman)
Date: Thu, 12 Feb 2009 22:22:36 +1100
Subject: [antlr-interest] Summing values from "+="
Message-ID: <8773d42e0902120322m23dad36fub7f5fb23c8a2c3d6@mail.gmail.com>

I have a simple function to sum values, where expression is numbers with
operands, etc.

sumStat    :    'SUM' '('  (e+=expression (',' e+=expression)+) ')' ->
^('SUM' $e);

What I need to know is how I write the action statements to add the various
numbers? Just to complicate it I am doing it using Flex ActionScript? If I
understand it correctly += returns a Java List, so what would be returned
with ActionScript?

^('SUM' e=expression) {$value =??????;}

Thanks
Des
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090212/25f43fa1/attachment.html 

From michael.bedward at gmail.com  Thu Feb 12 03:50:29 2009
From: michael.bedward at gmail.com (Michael Bedward)
Date: Thu, 12 Feb 2009 22:50:29 +1100
Subject: [antlr-interest] Summing values from "+="
In-Reply-To: <8773d42e0902120322m23dad36fub7f5fb23c8a2c3d6@mail.gmail.com>
References: <8773d42e0902120322m23dad36fub7f5fb23c8a2c3d6@mail.gmail.com>
Message-ID: <e24c4c270902120350h58b79d5cv1b9301481913009d@mail.gmail.com>

At the start of the rule the generated parser code will have...

var e:Token=null;
var list_e:Array=null;

and then in the sumStat rule loop...

if (list_e==null) list_e=new Array();
list_e.push(e);

Hope this helps,
Michael


2009/2/12 Des Hartman <des at deshartman.com>:
> I have a simple function to sum values, where expression is numbers with
> operands, etc.
>
> sumStat    :    'SUM' '('  (e+=expression (',' e+=expression)+) ')' ->
> ^('SUM' $e);
>
> What I need to know is how I write the action statements to add the various
> numbers? Just to complicate it I am doing it using Flex ActionScript? If I
> understand it correctly += returns a Java List, so what would be returned
> with ActionScript?
>
> ^('SUM' e=expression) {$value =??????;}
>
> Thanks
> Des
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>

From JALuber at gmx.de  Thu Feb 12 03:51:38 2009
From: JALuber at gmx.de (Johannes Luber)
Date: Thu, 12 Feb 2009 12:51:38 +0100
Subject: [antlr-interest] Summing values from "+="
In-Reply-To: <8773d42e0902120322m23dad36fub7f5fb23c8a2c3d6@mail.gmail.com>
References: <8773d42e0902120322m23dad36fub7f5fb23c8a2c3d6@mail.gmail.com>
Message-ID: <20090212115138.151370@gmx.net>

> I have a simple function to sum values, where expression is numbers with
> operands, etc.
> 
> sumStat    :    'SUM' '('  (e+=expression (',' e+=expression)+) ')' ->
> ^('SUM' $e);
> 
> What I need to know is how I write the action statements to add the
> various
> numbers? Just to complicate it I am doing it using Flex ActionScript? If I
> understand it correctly += returns a Java List, so what would be returned
> with ActionScript?
> 
> ^('SUM' e=expression) {$value =??????;}

I don't know ActionScript, but you could simply look at the generated code to discern the correct class.

Johannes
> 
> Thanks
> Des

-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt? Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger01

From JALuber at gmx.de  Thu Feb 12 03:55:49 2009
From: JALuber at gmx.de (Johannes Luber)
Date: Thu, 12 Feb 2009 12:55:49 +0100
Subject: [antlr-interest] lexer lookahead in antlr v3
In-Reply-To: <5fa8bf4a0902120313p62fb5695m17fbb6b8a09b6daf@mail.gmail.com>
References: <5fa8bf4a0902120245k40b97348kba902928f39d4d4b@mail.gmail.com>
	<5fa8bf4a0902120313p62fb5695m17fbb6b8a09b6daf@mail.gmail.com>
Message-ID: <20090212115549.151280@gmx.net>

>  Hello everyone!
> 
> How can I set k=4(for example) for lexer in v3
> I'm trying to convert my v2 grammar...

Use the option "k=4;" in the options block. You can set it globally or for only certain rules (which can have their own option blocks). The default behavior is switched on by "k=*;".

Johannes
> 
> Thanks in advance.
> 
> Jon

-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt? Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger01

From paul.bouche at nsn.com  Thu Feb 12 05:28:34 2009
From: paul.bouche at nsn.com (=?ISO-8859-15?Q?=22Paul_Bouch=E9_=28NSN=29=22?=)
Date: Thu, 12 Feb 2009 14:28:34 +0100
Subject: [antlr-interest] ANTLRWorks: Rule Syntax Graph - negated sets
Message-ID: <49942402.50702@nsn.com>

Hi,

I have many lexer rules with negation, i.e.

fragment Value
    :
    // unquoted value   
     ~('%' | Delim | '[' | '{' | '"' | '\'' | '`' ) ~('%' | Delim | '}')*
    |
    // quoted value
    '"' ~('%' | '\'' | '`' | '}' | ']')* '"'
    ;

The diagram produced looks a lot bigger, i.e. it collapses the negated 
sets to positive sets (sorry for the html mail):


I want to use the diagrams for documentation purposes. The negated sets 
are lot more plausible than the positive sets, is there a way to change 
this behaviour, such that ANTLRWorks will display the negated sets?
I am using the latest ANTLRWorks (1.2.2).

Thanks,
Paul

-- 
Paul Bouch?
Voice: +49 30 590080-1284
 
Nokia Siemens Networks GmbH & Co. KG, An den Treptowers 1, 12435 Berlin, Germany
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRA 88537
WEEE-Reg.-Nr.: DE 52984304

Pers?nlich haftende Gesellschafterin / General Partner: Nokia Siemens Networks Management GmbH
Gesch?ftsleitung / Board of Directors: Lydia Sommer, Olaf Horsthemke
Vorsitzender des Aufsichtsrats / Chairman of supervisory board: Lauri Kivinen
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRB 163416

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090212/cd453aee/attachment.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: moz-screenshot-7.jpg
Type: image/jpeg
Size: 22432 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090212/cd453aee/attachment.jpg 

From matteo.romanello at gmail.com  Thu Feb 12 07:12:28 2009
From: matteo.romanello at gmail.com (Matteo Romanello)
Date: Thu, 12 Feb 2009 10:12:28 -0500
Subject: [antlr-interest] AST to DOM Tree
Message-ID: <2666EE7E-3825-42B6-96F5-4BA6CF9E9393@gmail.com>

Hi all -
I'm implementing a parser using ANTLRv3 and I want it to return as  
output a DOM tree.
I'm working on implementing a DOMNodeAdaptor and a DOMNode to do this,  
but I wonder if does anything like this already exist somewhere...

Thanks

Matteo Romanello
The Perseus Project

From cscott at cscott.net  Thu Feb 12 07:40:25 2009
From: cscott at cscott.net (C. Scott Ananian)
Date: Thu, 12 Feb 2009 10:40:25 -0500
Subject: [antlr-interest] Buglet in literal escaping
Message-ID: <c6d9bea0902120740i340ef044vae4283d8d57bc69a@mail.gmail.com>

Using '\\"' as a literal in an ANTLR grammar causes ANTLRv3.1.1 to emit:
  match("\\"")
which is an unterminated string constant.  Oops!
 --scott

-- 
                         ( http://cscott.net/ )

From JALuber at gmx.de  Thu Feb 12 08:06:13 2009
From: JALuber at gmx.de (Johannes Luber)
Date: Thu, 12 Feb 2009 17:06:13 +0100
Subject: [antlr-interest] Buglet in literal escaping
In-Reply-To: <c6d9bea0902120740i340ef044vae4283d8d57bc69a@mail.gmail.com>
References: <c6d9bea0902120740i340ef044vae4283d8d57bc69a@mail.gmail.com>
Message-ID: <20090212160613.141110@gmx.net>

> Using '\\"' as a literal in an ANTLR grammar causes ANTLRv3.1.1 to emit:
>   match("\\"")
> which is an unterminated string constant.  Oops!

That's no bug, ANTLR does exactly what it is supposed to do. I think you want to use "\\\"" instead.

Johannes
>  --scott
> 
> -- 
>                          ( http://cscott.net/ )
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address

-- 
Jetzt 1 Monat kostenlos! GMX FreeDSL - Telefonanschluss + DSL 
f?r nur 17,95 Euro/mtl.!* http://dsl.gmx.de/?ac=OM.AD.PD003K11308T4569a

From jimi at temporal-wave.com  Thu Feb 12 08:07:50 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 12 Feb 2009 08:07:50 -0800
Subject: [antlr-interest] maven plugin always regenerates sources
In-Reply-To: <e24c4c270902120306u5bbf05b8sad6d0de44210c1dc@mail.gmail.com>
References: <e24c4c270902120306u5bbf05b8sad6d0de44210c1dc@mail.gmail.com>
Message-ID: <49944956.5060102@temporal-wave.com>

Michael Bedward wrote:
> Hi folks,
>
> I'm using the org.antlr maven plugin.  It does a great job - it just
> seems to want to do it all the time :-)  In other words, it _always_
> wants to re-generate the sources, even when the existing files are
> more recent that the grammar files.
>
> I'm using maven from within Netbeans.  I've fiddled with the plugin
> section in the pom a bit but I must be missing something.  My present
> setup is below.
>
> If someone could enlighten me I'd be very grateful.
>
>             <plugin>
>                 <groupId>org.antlr</groupId>
>                 <artifactId>antlr3-maven-plugin</artifactId>
>                 <version>3.1.1.2</version>
>                 <configuration>
>
> <libDirectory>target/generated-sources/antlr/jaitools/jiffle/parser</libDirectory>
>                 </configuration>
>                 <executions>
>                     <execution>
>                         <phase>generate-sources</phase>
>                         <goals>
>                             <goal>antlr</goal>
>                         </goals>
>                     </execution>
>                 </executions>
>             </plugin>
>
> cheers
Did you tell Netbeans to use the the Maven 2.0.9 installation, or di d 
you let it use its supplied one, which in Netbeans 6.1 is the 
development version M2 or M1 of 2.0.10 and has a few issues.

That said, I think there might indeed be something not quite right about 
it and it is on my list of things to look into. It is just a lower 
priority than it would be if it chose NOT to generate the sources ;-)

Jim

From jimi at temporal-wave.com  Thu Feb 12 08:13:58 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 12 Feb 2009 08:13:58 -0800
Subject: [antlr-interest] Summing values from "+="
In-Reply-To: <8773d42e0902120322m23dad36fub7f5fb23c8a2c3d6@mail.gmail.com>
References: <8773d42e0902120322m23dad36fub7f5fb23c8a2c3d6@mail.gmail.com>
Message-ID: <49944AC6.4030101@temporal-wave.com>

Des Hartman wrote:
> I have a simple function to sum values, where expression is numbers 
> with operands, etc.
>
> sumStat    :    'SUM' '('  (e+=expression (',' e+=expression)+) ')' -> 
> ^('SUM' $e);
>
> What I need to know is how I write the action statements to add the 
> various numbers? Just to complicate it I am doing it using Flex 
> ActionScript? If I understand it correctly += returns a Java List, so 
> what would be returned with ActionScript?
>
> ^('SUM' e=expression) {$value =??????;}
Well, if there can only be two expressions ever then:


'SUM' '('  (e1=expression (',' e2=expression)+) ')' -> ^('SUM' $e1 $e2);

...
^(SUM e1=expression e2=expression)
{
    // Add values converted from string to int....
}


For a list though, you can do this:


r

@init
{
    int summation = 0;
}
: ^(SUM 
     ( e= expression
        {
            summation += // String value converted to int
         }
      )+
;

Actions can be anywhere, including in list iteration.

Jim



From jimi at temporal-wave.com  Thu Feb 12 08:35:09 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 12 Feb 2009 08:35:09 -0800
Subject: [antlr-interest] Buglet in literal escaping
In-Reply-To: <c6d9bea0902120740i340ef044vae4283d8d57bc69a@mail.gmail.com>
References: <c6d9bea0902120740i340ef044vae4283d8d57bc69a@mail.gmail.com>
Message-ID: <49944FBD.1090101@temporal-wave.com>

C. Scott Ananian wrote:
> Using '\\"' as a literal in an ANTLR grammar causes ANTLRv3.1.1 to emit:
>   match("\\"")
> which is an unterminated string constant.  Oops!
>
>   
This catches us all at some point I think. The junit test wasn't quite 
right (or maybe it was and I discovered that the codegen was not quite 
right), but anyway, you will be pleased to know that I fixed this some 
time ago in the current development source. So you could use the latest 
snapshot from Hudson.

Please don't forget to say which target your using. I am assuming Java 
here of course.

Jim

PS, I am also assuming that you were trying to match '\' followed by '"' 
and don't have your spec wrong ;-)

From jimi at temporal-wave.com  Thu Feb 12 08:37:04 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 12 Feb 2009 08:37:04 -0800
Subject: [antlr-interest] Buglet in literal escaping
In-Reply-To: <20090212160613.141110@gmx.net>
References: <c6d9bea0902120740i340ef044vae4283d8d57bc69a@mail.gmail.com>
	<20090212160613.141110@gmx.net>
Message-ID: <49945030.8070408@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090212/ae64295f/attachment.html 

From parrt at cs.usfca.edu  Thu Feb 12 09:24:17 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 12 Feb 2009 09:24:17 -0800
Subject: [antlr-interest] ANTLRWorks: Rule Syntax Graph - negated sets
In-Reply-To: <49942402.50702@nsn.com>
References: <49942402.50702@nsn.com>
Message-ID: <D8571F10-FC3E-4068-B321-9E1EBBD72327@cs.usfca.edu>

Sorry, but ANTLR normalizes all sets before passing to ANTLRWorks.
Ter
On Feb 12, 2009, at 5:28 AM, Paul Bouch? (NSN) wrote:

> Hi,
>
> I have many lexer rules with negation, i.e.
>
> fragment Value
>     :
>     // unquoted value
>      ~('%' | Delim | '[' | '{' | '"' | '\'' | '`' ) ~('%' | Delim |  
> '}')*
>     |
>     // quoted value
>     '"' ~('%' | '\'' | '`' | '}' | ']')* '"'
>     ;
>
> The diagram produced looks a lot bigger, i.e. it collapses the  
> negated sets to positive sets (sorry for the html mail):
>
> <moz-screenshot-7.jpg>
> I want to use the diagrams for documentation purposes. The negated  
> sets are lot more plausible than the positive sets, is there a way  
> to change this behaviour, such that ANTLRWorks will display the  
> negated sets?
> I am using the latest ANTLRWorks (1.2.2).
>
> Thanks,
> Paul
> -- 
> Paul Bouch?
> Voice: +49 30 590080-1284
>
> Nokia Siemens Networks GmbH & Co. KG, An den Treptowers 1, 12435  
> Berlin, Germany
> Sitz der Gesellschaft: M?nchen / Registered office: Munich
> Registergericht: M?nchen / Commercial registry: Munich, HRA 88537
> WEEE-Reg.-Nr.: DE 52984304
>
> Pers?nlich haftende Gesellschafterin / General Partner: Nokia  
> Siemens Networks Management GmbH
> Gesch?ftsleitung / Board of Directors: Lydia Sommer, Olaf Horsthemke
> Vorsitzender des Aufsichtsrats / Chairman of supervisory board:  
> Lauri Kivinen
> Sitz der Gesellschaft: M?nchen / Registered office: Munich
> Registergericht: M?nchen / Commercial registry: Munich, HRB 163416
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From jaluber at gmx.de  Thu Feb 12 11:27:06 2009
From: jaluber at gmx.de (Johannes Luber)
Date: Thu, 12 Feb 2009 20:27:06 +0100
Subject: [antlr-interest] Buglet in literal escaping
In-Reply-To: <49945030.8070408@temporal-wave.com>
References: <c6d9bea0902120740i340ef044vae4283d8d57bc69a@mail.gmail.com>	<20090212160613.141110@gmx.net>
	<49945030.8070408@temporal-wave.com>
Message-ID: <4994780A.7000503@gmx.de>

Jim Idle schrieb:
> Johannes Luber wrote:
>>> Using '\\"' as a literal in an ANTLR grammar causes ANTLRv3.1.1 to emit:
>>>   match("\\"")
>>> which is an unterminated string constant.  Oops!
>>>     
>>
>> That's no bug, ANTLR does exactly what it is supposed to do. I think you want to use "\\\"" instead.
>>   
> In fact it was a bug in 3.1.1, take a look at the sequence again :-) It
> is a correct spec, assuming that Scott wants to match backslash followed
> by doublequote. ANTLR strings are in single quotes and there is no need
> to escape double quotes.
> 
> Jim

But that would suppose that ANTLR would escape the " on its own? And in
Java \\\" equals \", so I wasn't completely off target. :)

Johannes

From jimi at temporal-wave.com  Thu Feb 12 11:47:19 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 12 Feb 2009 11:47:19 -0800
Subject: [antlr-interest] Buglet in literal escaping
In-Reply-To: <4994780A.7000503@gmx.de>
References: <c6d9bea0902120740i340ef044vae4283d8d57bc69a@mail.gmail.com>	<20090212160613.141110@gmx.net>
	<49945030.8070408@temporal-wave.com> <4994780A.7000503@gmx.de>
Message-ID: <49947CC7.6060503@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090212/c50f8a9f/attachment.html 

From jaluber at gmx.de  Thu Feb 12 12:15:36 2009
From: jaluber at gmx.de (Johannes Luber)
Date: Thu, 12 Feb 2009 21:15:36 +0100
Subject: [antlr-interest] Buglet in literal escaping
In-Reply-To: <49947CC7.6060503@temporal-wave.com>
References: <c6d9bea0902120740i340ef044vae4283d8d57bc69a@mail.gmail.com>	<20090212160613.141110@gmx.net>	<49945030.8070408@temporal-wave.com>
	<4994780A.7000503@gmx.de> <49947CC7.6060503@temporal-wave.com>
Message-ID: <49948368.3050105@gmx.de>

Jim Idle schrieb:
> Johannes Luber wrote:
>> Jim Idle schrieb:
>>   
>>> Johannes Luber wrote:
>>>     
>>>>> Using '\\"' as a literal in an ANTLR grammar causes ANTLRv3.1.1 to emit:
>>>>>   match("\\"")
>>>>> which is an unterminated string constant.  Oops!
>>>>>     
>>>>>         
>>>> That's no bug, ANTLR does exactly what it is supposed to do. I think you want to use "\\\"" instead.
>>>>   
>>>>       
>>> In fact it was a bug in 3.1.1, take a look at the sequence again :-) It
>>> is a correct spec, assuming that Scott wants to match backslash followed
>>> by doublequote. ANTLR strings are in single quotes and there is no need
>>> to escape double quotes.
>>>
>>> Jim
>>>     
>>
>> But that would suppose that ANTLR would escape the " on its own? And in
>> Java \\\" equals \", so I wasn't completely off target. :)
>>
>> Johannes
>>   
> Each target is responsible for converting the string as seen by ANTLR,
> where " is not required to be escaped, into the required representation
> for the target language. You must unescape the ANTLR string, then escape
> for the target language.
> 
> Thinking about this, you should check the C# target as it probably
> copied the Java code! I think that you can pretty much copy the new Java
> target code, at least algorithmically :-)
> 
> Jim

I'll take a look then - as always, when I sync the code. :)

Johannes

From michael.bedward at gmail.com  Thu Feb 12 13:20:42 2009
From: michael.bedward at gmail.com (Michael Bedward)
Date: Fri, 13 Feb 2009 08:20:42 +1100
Subject: [antlr-interest] maven plugin always regenerates sources
In-Reply-To: <49944956.5060102@temporal-wave.com>
References: <e24c4c270902120306u5bbf05b8sad6d0de44210c1dc@mail.gmail.com>
	<49944956.5060102@temporal-wave.com>
Message-ID: <e24c4c270902121320h26dad8aej4d47bb9e05ecee77@mail.gmail.com>

Hi Jim

> Did you tell Netbeans to use the the Maven 2.0.9 installation, or di d
> you let it use its supplied one, which in Netbeans 6.1 is the
> development version M2 or M1 of 2.0.10 and has a few issues.

I've tried both, as well as running 2.0.9 from the command line just
in case it was an IDE issue.

> That said, I think there might indeed be something not quite right about
> it and it is on my list of things to look into. It is just a lower
> priority than it would be if it chose NOT to generate the sources ;-)

*chuckle* - this sounds a bit like my usual 3F priority system: FIX >
FINE > FORGOTTEN

Is the plugin source available ?  I'm no expert but I've done a bit of
maven plugin hacking and I'd be happy to look at it.

cheers
Michael

From jimi at temporal-wave.com  Thu Feb 12 13:56:52 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 12 Feb 2009 13:56:52 -0800
Subject: [antlr-interest] maven plugin always regenerates sources
In-Reply-To: <e24c4c270902121320h26dad8aej4d47bb9e05ecee77@mail.gmail.com>
References: <e24c4c270902120306u5bbf05b8sad6d0de44210c1dc@mail.gmail.com>	<49944956.5060102@temporal-wave.com>
	<e24c4c270902121320h26dad8aej4d47bb9e05ecee77@mail.gmail.com>
Message-ID: <49949B24.5080902@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090212/1975a30b/attachment.html 

From michael.bedward at gmail.com  Thu Feb 12 14:08:16 2009
From: michael.bedward at gmail.com (Michael Bedward)
Date: Fri, 13 Feb 2009 09:08:16 +1100
Subject: [antlr-interest] maven plugin always regenerates sources
In-Reply-To: <49949B24.5080902@temporal-wave.com>
References: <e24c4c270902120306u5bbf05b8sad6d0de44210c1dc@mail.gmail.com>
	<49944956.5060102@temporal-wave.com>
	<e24c4c270902121320h26dad8aej4d47bb9e05ecee77@mail.gmail.com>
	<49949B24.5080902@temporal-wave.com>
Message-ID: <e24c4c270902121408y5e2fd27ev94911074930afadc@mail.gmail.com>

super - thanks Jim

Michael

From Richard.Lewis at ite.com.au  Thu Feb 12 15:27:30 2009
From: Richard.Lewis at ite.com.au (Richard Lewis)
Date: Fri, 13 Feb 2009 10:27:30 +1100
Subject: [antlr-interest] status of libantlr3c-3.1.1.tar.gz in Hudson
Message-ID: <1633C11AAD5C1C47A79C673A32A64FBADC0FF7@webmail.ite.com.au>

Does the libantlr3c-3.1.1 tarball contain all patches to date or is it
frozen as of Oct 1,2008?

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090213/fa2719b4/attachment.html 

From Richard.Lewis at ite.com.au  Thu Feb 12 15:30:30 2009
From: Richard.Lewis at ite.com.au (Richard Lewis)
Date: Fri, 13 Feb 2009 10:30:30 +1100
Subject: [antlr-interest] status of libantlr3c-3.1.1.tar.gz in Hudson
In-Reply-To: <1633C11AAD5C1C47A79C673A32A64FBADC0FF7@webmail.ite.com.au>
References: <1633C11AAD5C1C47A79C673A32A64FBADC0FF7@webmail.ite.com.au>
Message-ID: <1633C11AAD5C1C47A79C673A32A64FBADC0FF8@webmail.ite.com.au>

Sorry, wanted to add that is part of the C runtime...

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Richard Lewis
Sent: Friday, 13 February 2009 10:28 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] status of libantlr3c-3.1.1.tar.gz in Hudson

 

Does the libantlr3c-3.1.1 tarball contain all patches to date or is it
frozen as of Oct 1,2008?

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090213/1e29c396/attachment.html 

From jimi at temporal-wave.com  Thu Feb 12 15:45:54 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 12 Feb 2009 15:45:54 -0800
Subject: [antlr-interest] status of libantlr3c-3.1.1.tar.gz in Hudson
In-Reply-To: <1633C11AAD5C1C47A79C673A32A64FBADC0FF7@webmail.ite.com.au>
References: <1633C11AAD5C1C47A79C673A32A64FBADC0FF7@webmail.ite.com.au>
Message-ID: <4994B4B2.7080208@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090212/ef66f07b/attachment.html 

From jimi at temporal-wave.com  Thu Feb 12 17:44:29 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 12 Feb 2009 17:44:29 -0800
Subject: [antlr-interest] Maven plugin source etc now available from ANTLR
	Hudson
Message-ID: <4994D07D.802@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090212/d2dc2ba0/attachment.html 

From michael.bedward at gmail.com  Thu Feb 12 17:49:55 2009
From: michael.bedward at gmail.com (Michael Bedward)
Date: Fri, 13 Feb 2009 12:49:55 +1100
Subject: [antlr-interest] Maven plugin source etc now available from
	ANTLR Hudson
In-Reply-To: <4994D07D.802@temporal-wave.com>
References: <4994D07D.802@temporal-wave.com>
Message-ID: <e24c4c270902121749p794776e0j571118352e143ef5@mail.gmail.com>

that's terrific Jim - many thanks

Michael

2009/2/13 Jim Idle <jimi at temporal-wave.com>:
> As well as deploying the source and javadoc jars to the ANTLR snapshot
> repository (which means they will go to the maven central respository at the
> next point release), the ANTLR Hudson continuous build system is also aware
> of the project.
>
> If you want/need to look at the source code for this project, rather than
> trawl through fisheye, you can just visit here:
>
> http://antlr.org/hudson/job/Maven_Plugin/lastSuccessfulBuild/
>
> >From whence you can click the module builds link and download the build,
> pom, sources etc.
>
> Jim
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>

From carter_cheng at yahoo.com  Fri Feb 13 00:52:50 2009
From: carter_cheng at yahoo.com (Carter Cheng)
Date: Fri, 13 Feb 2009 00:52:50 -0800 (PST)
Subject: [antlr-interest] c runtime with templates
Message-ID: <65904.36582.qm@web50107.mail.re2.yahoo.com>


Hi,

I have been playing around with intermingling the C runtime with some C++ STL constructs (admittedly not exception safe) and noticed I that I get what I believe are linker errors doing to interactions between the extern "C" { ... } declaration which shows up in the header file and stl includes such as #include <list> etc.

Is there a way workaround this issue (ignoring for the moment the issue of STL containers throwing exceptions in C code which are uncaught). 

Thanks in advance,

Carter


      

From isabelle.perseil at enst.fr  Fri Feb 13 03:19:52 2009
From: isabelle.perseil at enst.fr (Isabelle Perseil)
Date: Fri, 13 Feb 2009 12:19:52 +0100 (CET)
Subject: [antlr-interest]   UML&AADL'2009 : LAST CALL FOR PAPERS
Message-ID: <1a80288b47c134def9ec4c0f6b31e8a3.squirrel@webmail1.telecom-paristech.fr>

**********************************************************************
                     CALL FOR PAPERS:  UML&AADL?2009
           http://www.artist-embedded.org/artist/UML-AADL-2009.html

                Workshop held in conjunction with ICECCS 2009
                The fourteenth IEEE International Conference on
                    Engineering of Complex Computer Systems
                            http://www.iceccs.org/
                               June 02, 2009
                              Potsdam, Germany

************************************************************************

                   Submission deadline: February 20, 2009
                   --------------------------------------



Topics
======
New real-time systems have increasingly complex architectures because of
the intricacy of the multiple interdependent features they have to manage.
They must meet new requirements of reusability, interoperability,
flexibility and portability. These new dimensions favor the use of an
architecture description language that offers a global vision of the
system, and which is particularly suitable for handling real-time
characteristics.

Due to the even more increased complexity of distributed, real-time and
embedded systems (DRE), the need for a model-driven approach is more
obvious in this domain than in monolithic RT systems. The purpose of this
workshop is to provide an opportunity to gather researchers and industrial
practitioners to survey existing efforts related to behavior modeling and
model-based analysis of DRE systems.

This workshop seeks contributions from researchers and practitioners
interested in all aspects of the representation, analysis, and
implementation of DRE system behavior and/or architecture models. To this
end, we solicit papers (no more than 6 pages long) related to, but not
limited to, the following principal topics:

- Multi-domain specific modeling languages
- Model transformation and generative approaches
- Model-based Methodologies
- Integration of different formalisms (e.g., Simulink/StateFlow, StateMate
  and Scade-drive)
- Model Checking of architecture specifications
- ADLs behavioral models simulation, Scheduling analysis and Worst-case
execution time prediction


Workshop Format
===============
This full-day workshop will consist of an introduction of the topic by the
workshop organizers, presentations of accepted papers, and in depth
discussion of previously identified subjects emerging from the
submissions. A summary of the discussions will be made available.


Submission and Publication
==========================
To contribute, please send a position paper or a technical paper to
agusti[dot]canals[at]c-s[dot]fr with ?ICECCS09 UML&AADL Workshop? in the
title. Papers should not exceed 6 pages. Submitted manuscripts should be
in English and formatted in the style of the IEEE Computer Society
Proceedings Format. Preferably, submissions should be in PDF format.

All selected papers will be published in the IEEE Computer Society Press
Proceedings.


IMPORTANT DATES
===============
Submission deadline:             February 20, 2009
All Notification of acceptance:  March 05, 2009
Workshop date:           	June 02, 2009


Organizational sponsors
=======================
ARTIST NoE
OMG


Organizers and Programme Steering Committee
===========================================

Jean-Michel Bruel (IRIT, France)
Agusti Canals (CS, France)
Robert de Simone (INRIA, France)
S?bastien G?rard (CEA-LIST, France)
Isabelle Perseil (TELECOM ParisTech, France)


IEEE CS TCCX Coordinator
========================
Mike Hinchey (NASA GSFC and Loyola College in Maryland, USA)


Programme Committee
===================

Yamine Ait Ameur (LISI / ENSMA, France)
Keijiro Araki (Kyushu University, Japan)
Grady Booch (IBM Fellow, USA)
Agusti Canals (CS, France)
Juan Antonio de la Puente (Universidad Polit?cnica de Madrid, Spain)
Sebastien Demathieu (THALES, France)
Dionisio De Niz Villasenor (SEI, Carnegie Mellon, USA)
Vincent Englebert (University of Namur, Belgium)
Madeleine Faug?re (THALES, France)
Mamoun Filali (IRIT, France)
Robert France (Colorado State University, USA)
S?bastien G?rard (CEA-LIST, France)
Patrick Heymans (University of Namur, Belgium)
Irfan Hamid (Microsoft Corp, Canada)
J.J.M. Hooman (Embedded Systems Institute, The Netherlands)
Bruce Lewis (US Army AMCOM)
Johan Lilius (?bo Akademi University, Finland)
Ricardo J. Machado (University of Minho, Portugal)
Dominique Mery (LORIA, France)
Nenad Medvidovi&#263; (University of Southern California, USA)
Thierry Millan (IRIT, France)
Richard Paige (University of York, United Kingdom)
Marc Reynolds (University of Western Australia, Australia)
Jos? Ra?l Romero Salguero (Universidad de C?rdoba, Spain)
Bernhard Rumpe (Braunschweig University of Technology, Germany)
Douglas C. Schmidt (Vanderbild University, USA)
Fran?oise Simonot Lion (LORIA, France)
Oleg Sokolsky (University of Pennsylvania, USA)
Roy Sterritt (University of Ulster, United Kingdom)
J?rn Guy S?? ( University of Queensland, Australia)
Jing Sun (University of Auckland, New Zealand)
Bedir Tekinerdogan (Bilkent University, Turkey)
Martin T?rngren (KTH - Royal Institute of Technology, Sweden)
Laurence Tratt (Bournemouth University, United Kingdom)
Tullio Vardanega (University of Padua, Italy)
Fran?ois Vernadat (CNRS-LAAS, France)
Thomas Vergnaud (THALES, France)
Eugenio Villar (Universidad de Cantabria, Spain)
Sergio Yovine (CNRS-Verimag, France)
Roberto V. Zicari (Goethe University Frankfurt, Germany)




From robert.soule at gmail.com  Fri Feb 13 06:36:53 2009
From: robert.soule at gmail.com (Robert Soule)
Date: Fri, 13 Feb 2009 09:36:53 -0500
Subject: [antlr-interest] c runtime with templates
In-Reply-To: <65904.36582.qm@web50107.mail.re2.yahoo.com>
References: <65904.36582.qm@web50107.mail.re2.yahoo.com>
Message-ID: <d1316fd70902130636r5638084etf658c5ae61f69615@mail.gmail.com>

Try adding this to your grammar:

@header {
#ifndef _YourFile_H
  #include <your_includes>
  using namespace std;
#endif
}

where you replace YourFile and your_includes appropriately.
I think that you want to be able to include your stl related stuff
in your .c file, but not in your header file, and the above should
work.

-Robert

On Fri, Feb 13, 2009 at 3:52 AM, Carter Cheng <carter_cheng at yahoo.com> wrote:
>
> Hi,
>
> I have been playing around with intermingling the C runtime with some C++ STL constructs (admittedly not exception safe) and noticed I that I get what I believe are linker errors doing to interactions between the extern "C" { ... } declaration which shows up in the header file and stl includes such as #include <list> etc.
>
> Is there a way workaround this issue (ignoring for the moment the issue of STL containers throwing exceptions in C code which are uncaught).
>
> Thanks in advance,
>
> Carter
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From paul.bouche at nsn.com  Fri Feb 13 07:57:29 2009
From: paul.bouche at nsn.com (=?ISO-8859-15?Q?=22Paul_Bouch=E9_=28NSN=29=22?=)
Date: Fri, 13 Feb 2009 16:57:29 +0100
Subject: [antlr-interest] ANTLRWorks upgrading problem
In-Reply-To: <499059BD.3010009@nsn.com>
References: <499059BD.3010009@nsn.com>
Message-ID: <49959869.2050103@nsn.com>

Hi,

sorry for my repost, but this is a really annoying problem. The only 
workaround that I have found is deleting the registry entry under 
HKCU\Software\JavaSoft\Prefs\org\antlr\works

Besides that fact that I find storing this information in the registry 
questionable - could it be stored in a file in the user home directory?

Thanks & BR,
Paul

Paul Bouch? (NSN) schrieb:
> Hi,
>
> I am using AntlrWorks on Windows XP SP2 Java version:
> java version "1.6.0_04"
> Java(TM) SE Runtime Environment (build 1.6.0_04-b12)
> Java HotSpot(TM) Client VM (build 10.0-b19, mixed mode, sharing)
>
> When I try to generate a parser/lexer I get the error:
> 'directory "C:\bla\C:\bla" not found'
>
> I just upgraded from AntlrWorks 1.1.7, after I wanted to change the 
> default output directory it stopped working and created the wrong path.
>
> I could delete all my preferences, but I want to keep the list of 
> recently used files.
>
> BR,
> Paul
>
>   


-- 
Paul Bouch?
Voice: +49 30 590080-1284
 
Nokia Siemens Networks GmbH & Co. KG, An den Treptowers 1, 12435 Berlin, Germany
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRA 88537
WEEE-Reg.-Nr.: DE 52984304

Pers?nlich haftende Gesellschafterin / General Partner: Nokia Siemens Networks Management GmbH
Gesch?ftsleitung / Board of Directors: Lydia Sommer, Olaf Horsthemke
Vorsitzender des Aufsichtsrats / Chairman of supervisory board: Lauri Kivinen
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRB 163416


From lgcraymer at yahoo.com  Fri Feb 13 08:23:16 2009
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Fri, 13 Feb 2009 08:23:16 -0800 (PST)
Subject: [antlr-interest] Lexer issues when block ends with EOF instead
	of EOL
References: <6edc6c380902110952h15ac80a7n1235f0f76b53c633@mail.gmail.com>
Message-ID: <921533.50610.qm@web55905.mail.re3.yahoo.com>

No--this is a factoring issue.  Unless your parser needs to see EOL tokens, they should be in a separate rule and marked as "hidden".  If you take out the
'\r/? '\n' from this rule, I expect that your grammar will work (provided that you separately recognize newlines).

--Loring



________________________________
From: Brent Yates <brent.yates at gmail.com>
To: "antlr-interest at antlr.org" <antlr-interest at antlr.org>
Sent: Wednesday, February 11, 2009 9:52:23 AM
Subject: [antlr-interest] Lexer issues when block ends with EOF instead of EOL

Assuming a standard LINE comment form such as:

SL_COMMENT
    : '//'  ( options {greedy=false;} : . )*  '\r'? '\n' {$channel=HIDDEN;}
    ;

What is the best way to handle a file which ends with a single line comment but no EOL
If I add the EOF to the rule I get the following error:

SL_COMMENT
    : '//'  ( options {greedy=false;} : . )*  '\r'? ('\n'|EOF) {$channel=HIDDEN;}
    ;

ANTLR Parser Generator  Version 3.1.1
error(201): SystemVerilogLexer.g:592:43: The following alternatives can never be matched: 1

This problem occurs with other rules as well.  Is it expected that files which end with no EOL are bad or should the lexer handle it?

Thanks.

Brent Yates


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090213/899bd176/attachment.html 

From brent.yates at gmail.com  Fri Feb 13 08:41:02 2009
From: brent.yates at gmail.com (Brent Yates)
Date: Fri, 13 Feb 2009 11:41:02 -0500
Subject: [antlr-interest] Lexer issues when block ends with EOF instead
	of EOL
In-Reply-To: <921533.50610.qm@web55905.mail.re3.yahoo.com>
References: <6edc6c380902110952h15ac80a7n1235f0f76b53c633@mail.gmail.com>
	<921533.50610.qm@web55905.mail.re3.yahoo.com>
Message-ID: <6edc6c380902130841x40c101ebp33c42f79e7ea4383@mail.gmail.com>

My problem is that in addition to the single line comment which can be
handled nicely the way you specified, I also mix in preprocessor style
patterns (single pass parsing).  These patterns can span multiple lines and
therefore the EOL's are part of them.
fragment PREPROSSOR_BLOCK
    :   (options {greedy = false;} : ('\\\r\n' | '\\\n' | ~'\n' ) )*
        (
            '\n'
        )
    ;

I also have places where I have to explicitly check for white space
(including EOL).

NUMBER_WITH_EXPLICIT_BASE
    :   (DECIMAL_BASE | BINARY_BASE | OCTAL_BASE | HEX_BASE)
        WS_OR_NEWLINE?
        (POST_BASE_NUMBER | MACRO_INSTANTIATION)
    ;

I could fight with the lexer patterns to see if I could find a better
solution, but I'm lazy ;-) .  For the most part my lexer and parser are
stable and working and I have moved on to coding the interesting parts of
the application - actually using the AST data.  I am loath to go back to
fighting the lexer.
I do have issues in the lexer and if I write another (or re-write this one
again) what I learned this time around (including your suggestions) will
result is a much cleaner process.  Right now I am ok with hacking in an
extra EOL to the input stream just to handle the odd malformed file.

Thanks!

Brent Yates

On Fri, Feb 13, 2009 at 11:23 AM, Loring Craymer <lgcraymer at yahoo.com>wrote:

> No--this is a factoring issue.  Unless your parser needs to see EOL tokens,
> they should be in a separate rule and marked as "hidden".  If you take out
> the
> '\r/? '\n' from this rule, I expect that your grammar will work (provided
> that you separately recognize newlines).
>
> --Loring
>
> ------------------------------
> *From:* Brent Yates <brent.yates at gmail.com>
> *To:* "antlr-interest at antlr.org" <antlr-interest at antlr.org>
> *Sent:* Wednesday, February 11, 2009 9:52:23 AM
> *Subject:* [antlr-interest] Lexer issues when block ends with EOF instead
> of EOL
>
> Assuming a standard LINE comment form such as:
> SL_COMMENT
>     : '//'  ( options {greedy=false;} : . )*  '\r'? '\n' {$channel=HIDDEN;}
>     ;
>
> What is the best way to handle a file which ends with a single line comment
> but no EOL
> If I add the EOF to the rule I get the following error:
>
> SL_COMMENT
>     : '//'  ( options {greedy=false;} : . )*  '\r'? ('\n'|EOF)
> {$channel=HIDDEN;}
>     ;
>
> ANTLR Parser Generator  Version 3.1.1
> error(201): SystemVerilogLexer.g:592:43: The following alternatives can
> never be matched: 1
>
> This problem occurs with other rules as well.  Is it expected that files
> which end with no EOL are bad or should the lexer handle it?
>
> Thanks.
>
> Brent Yates
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090213/12176c1d/attachment.html 

From andreas.meyer at smartshift.de  Fri Feb 13 08:50:25 2009
From: andreas.meyer at smartshift.de (Andreas Meyer)
Date: Fri, 13 Feb 2009 17:50:25 +0100
Subject: [antlr-interest] Huge amounts of follow sets
Message-ID: <4995A4D1.4040305@smartshift.de>

Dear ANTLR developers!

I have a huge grammar with lots of ambiguities (its a language with 600 
keywords, that can also be used as identifiers ...). It worked fine with 
ANTLR 2.7, but after upgrading it to 3.1, I finally get an error when 
compiling the generated parser: method size exceeds 64k. This is due to 
the number of follow-sets being generated and initialized ( > 6000). One 
workaround would be: move assignments from class-level to methods (up to 
some number of assignments per method), and then call these functions 
from one "master" function. Are there any other alternatives, other than 
(probably) making the grammar less ambiguous? Thanks for any hints!

Best Regards,
Andreas Meyer
(smartshift.de)

From carter_cheng at yahoo.com  Fri Feb 13 09:01:38 2009
From: carter_cheng at yahoo.com (Carter Cheng)
Date: Fri, 13 Feb 2009 09:01:38 -0800 (PST)
Subject: [antlr-interest] c runtime with templates
In-Reply-To: <d1316fd70902130636r5638084etf658c5ae61f69615@mail.gmail.com>
Message-ID: <948792.94951.qm@web50101.mail.re2.yahoo.com>


Thanks for the reply.

I did actually manage to find a semi workaround for this though it is a bit cumbersome (involves manually editing the extern "C" scopes in the tree grammar .h generated file). I am a bit of a C++ newbie and part of me is curious if this extern "C" stuff is really needed here since I am compiling everything with g++.

Unfortunately given how the declarations look in the header it seems that since in certain cases I am returning stl types these show up in some of the generated structs in the header i suspect that #ifdefing them out of the header would mean the header would not compile.


--- On Fri, 2/13/09, Robert Soule <robert.soule at gmail.com> wrote:

> From: Robert Soule <robert.soule at gmail.com>
> Subject: Re: [antlr-interest] c runtime with templates
> To: carter_cheng at yahoo.com
> Cc: antlr-interest at antlr.org
> Date: Friday, February 13, 2009, 6:36 AM
> Try adding this to your grammar:
> 
> @header {
> #ifndef _YourFile_H
>   #include <your_includes>
>   using namespace std;
> #endif
> }
> 
> where you replace YourFile and your_includes appropriately.
> I think that you want to be able to include your stl
> related stuff
> in your .c file, but not in your header file, and the above
> should
> work.
> 
> -Robert
> 
> On Fri, Feb 13, 2009 at 3:52 AM, Carter Cheng
> <carter_cheng at yahoo.com> wrote:
> >
> > Hi,
> >
> > I have been playing around with intermingling the C
> runtime with some C++ STL constructs (admittedly not
> exception safe) and noticed I that I get what I believe are
> linker errors doing to interactions between the extern
> "C" { ... } declaration which shows up in the
> header file and stl includes such as #include <list>
> etc.
> >
> > Is there a way workaround this issue (ignoring for the
> moment the issue of STL containers throwing exceptions in C
> code which are uncaught).
> >
> > Thanks in advance,
> >
> > Carter
> >
> >
> >
> >
> > List:
> http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >


      

From jimi at temporal-wave.com  Fri Feb 13 09:32:44 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 13 Feb 2009 09:32:44 -0800
Subject: [antlr-interest] c runtime with templates
In-Reply-To: <948792.94951.qm@web50101.mail.re2.yahoo.com>
References: <948792.94951.qm@web50101.mail.re2.yahoo.com>
Message-ID: <4995AEBC.60104@temporal-wave.com>

Carter Cheng wrote:
> Thanks for the reply.
>
> I did actually manage to find a semi workaround for this though it is a bit cumbersome (involves manually editing the extern "C" scopes in the tree grammar .h generated file). I am a bit of a C++ newbie and part of me is curious if this extern "C" stuff is really needed here since I am compiling everything with g++.
>
> Unfortunately given how the declarations look in the header it seems that since in certain cases I am returning stl types these show up in some of the generated structs in the header i suspect that #ifdefing them out of the header would mean the header would not compile.
>
>   
In the latest source I think that the #ifdefs are more selective, but 
you probably want to put your #includes inside @preincludes and not 
@header. Chack the docs on the various sections.  Also don't put any of 
your classes and things directly into the grammar, place them in .cpp 
files and the include the headers the define the classes in the 
preincludes sections. Then your classes won't be marked as extern "C". 
There are comments about the approach you take to structure in the 
examples - separate include that includes your headers and the 
parser/lexer headers and so on. Keep as much of your own code as 
possible out of the .g file and the generated headers basically.

Jim

From paul.bouche at nsn.com  Fri Feb 13 09:42:20 2009
From: paul.bouche at nsn.com (=?ISO-8859-15?Q?=22Paul_Bouch=E9_=28NSN=29=22?=)
Date: Fri, 13 Feb 2009 18:42:20 +0100
Subject: [antlr-interest] Error message  in AST parser/lexer: expecting EOA,
	found
Message-ID: <4995B0FC.4070306@nsn.com>

Hi,

I tried everything I know so I am tending to you. I have a 
context-sensitive construct in my lexer. I have two tokens where where 
one is a superset of the other, but shall only be recognized after an 
equals was found and is basically any character until a komma. 
Therefore, I defined a predicate which is set to true once an equals is 
reached which enables the gated superset token and when a comma is found 
the predicate is set to false.

In order to allow the following:
key = value = 3
where key is key and everything after the '=' is a value until EOF or 
',' ,i..e. in this case "value = 3". Yes I know this is very strange and 
usually you would quote string, but we need it for legacy reasons, 
mainly incoperating legacy hand-written parser funcitonality into ANTLR ;-)

But unfortunately I get a strange syntax error? Please see below: I also 
attached the full grammar, in case you need that.

I include a snippet of the AST grammar, where the rule in question is used:
// parser...
properties
        :
        ( property ( Delim property )* )? Delim?
        -> property*
        ;
attributes
        :  // FIXME is this wanted h=(d=3 k=3) , i.e. with komma?
        ( attribute ( Delim attribute )* )* Delim?
        -> ^( ATTRIBUTES attribute* )
        ;
list
        :
        ( value ( Delim value )* )*
        -> ^( TYPE LIST ) ^( VALUE value* )
        ;
// lexer...
Delim
    :
    ','
    {
        unsetFoundFirstEqualsInPropert();
    }   
    ;
fragment USTRING_
    :
    {hasFoundFirstEqualsInProperty()}?=>
    (~(' ' /*| '\t'*/ | '%' | Delim | '\n' | '[' | '{' | '"' | '\'' | 
'`' | '<' | '\\' | '/') | HEXESCAPE | '%' ~HEXDIGIT_) (~('%' | Delim | 
'\n' | '}' | ']' ) | HEXESCAPE | '%' ~HEXDIGIT_)*
    ;

The error is "syntax error: buildnfa: <AST>:227:2: expecting EOA, found '
        unsetFoundFirstEqualsInPropert();
    '".

I get from the list that EOA means End-Of-Alternative, but the rules 
does not have an alternative. This may also be related to the bug 
http://www.antlr.org/jira/browse/ANTLR-305 ? It seems very similar to my 
problem.

Please help, we really need this. Also if you have another suggestion 
for a solution to this problem.

Thanks,
Paul



ANTLR Parser Generator  Version 3.1.1
error(100): 
T:\Workspaces\paulb\AAA-nemip\ag\netzwert\nemip\StringProps.g:0:0: 
syntax error: buildnfa: <AST>:227:2: expecting EOA, found '
        unsetFoundFirstEqualsInPropert();
    '
error(100): 
T:\Workspaces\paulb\AAA-nemip\ag\netzwert\nemip\StringProps.g:0:0: 
syntax error: buildnfa: <AST>: expecting EOA, found '<empty tree>'
error(100): 
T:\Workspaces\paulb\AAA-nemip\ag\netzwert\nemip\StringProps.g:0:0: 
syntax error: buildnfa: <AST>:227:2: expecting EOA, found '
        unsetFoundFirstEqualsInPropert();
    '
error(100): 
T:\Workspaces\paulb\AAA-nemip\ag\netzwert\nemip\StringProps.g:0:0: 
syntax error: buildnfa: <AST>: expecting EOA, found '<empty tree>'
error(10):  internal error: Can't get property javaCompressedTransition 
using method get/isJavaCompressedTransition from org.antlr.analysis.DFA 
instance : java.lang.OutOfMemoryError: Java heap space
java.util.ArrayList.<init>(ArrayList.java:112)
org.antlr.analysis.DFA.getRunLengthEncoding(DFA.java:357)
org.antlr.analysis.DFA.getJavaCompressedTransition(DFA.java:333)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
java.lang.reflect.Method.invoke(Method.java:597)
org.antlr.stringtemplate.language.ASTExpr.invokeMethod(ASTExpr.java:563)
org.antlr.stringtemplate.language.ASTExpr.rawGetObjectProperty(ASTExpr.java:514)
org.antlr.stringtemplate.language.ASTExpr.getObjectProperty(ASTExpr.java:416)
org.antlr.stringtemplate.language.ActionEvaluator.attribute(ActionEvaluator.java:351)
org.antlr.stringtemplate.language.ActionEvaluator.expr(ActionEvaluator.java:136)
org.antlr.stringtemplate.language.ActionEvaluator.templateApplication(ActionEvaluator.java:216)
org.antlr.stringtemplate.language.ActionEvaluator.expr(ActionEvaluator.java:126)
org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:84)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:700)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:722)
org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:659)
org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:86)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:700)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:722)
org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:659)
org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:86)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:700)
org.antlr.codegen.CodeGenerator.write(CodeGenerator.java:1275)
org.antlr.codegen.Target.genRecognizerFile(Target.java:94)
org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:460)
org.antlr.Tool.generateRecognizer(Tool.java:420)
org.antlr.Tool.process(Tool.java:342)

-- 
Paul Bouch?
Voice: +49 30 590080-1284
 
Nokia Siemens Networks GmbH & Co. KG, An den Treptowers 1, 12435 Berlin, Germany
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRA 88537
WEEE-Reg.-Nr.: DE 52984304

Pers?nlich haftende Gesellschafterin / General Partner: Nokia Siemens Networks Management GmbH
Gesch?ftsleitung / Board of Directors: Lydia Sommer, Olaf Horsthemke
Vorsitzender des Aufsichtsrats / Chairman of supervisory board: Lauri Kivinen
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRB 163416

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: properties.g
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20090213/ea0e0508/attachment.pl 

From paul.bouche at nsn.com  Fri Feb 13 11:38:41 2009
From: paul.bouche at nsn.com (=?ISO-8859-15?Q?=22Paul_Bouch=E9_=28NSN=29=22?=)
Date: Fri, 13 Feb 2009 20:38:41 +0100
Subject: [antlr-interest] [solved] Error message in AST parser/lexer:
	expecting EOA, found
In-Reply-To: <4995B0FC.4070306@nsn.com>
References: <4995B0FC.4070306@nsn.com>
Message-ID: <4995CC41.30200@nsn.com>

Hi,

I keep solving my own problems :-)

The problem was, that the lexer rule in question Delim was also called 
in the gated fragment rule USTRING_ well since the Delim rule changes 
the gate for the entry into the USTRING_ rule the result of the lexer 
would not be clearly defined, therefore it must have been forbidden to 
do so which I think is a good thing, but in my case would not have been 
a problem plus I used it as part of a negated set where the rule will 
not be actually called since ANTLR normalizes negated sets.

@Ter would it not be easier to just test for the nonexistence of the 
elements of the negated sets instead of normalizing it? This would also 
be much more readable...

The solution is to defer the token(s) of interest to a fragment rule and 
call this rule from both token rules, i.e.
Delim
    :
    Delim_ { unsetFoundFirstEqualsInProperty(); }
    ;
fragment Delim_
    ','
    ;
fragment USTRING_
    :
    ~( ... | Delim_ | ...) ~( ... |  Delim_ | ...)
    ;
// I left out the other alternatives for readablility

BR,
Paul

Paul Bouch? (NSN) schrieb:
> Hi,
>
> I tried everything I know so I am tending to you. I have a 
> context-sensitive construct in my lexer. I have two tokens where where 
> one is a superset of the other, but shall only be recognized after an 
> equals was found and is basically any character until a komma. 
> Therefore, I defined a predicate which is set to true once an equals 
> is reached which enables the gated superset token and when a comma is 
> found the predicate is set to false.
>
> In order to allow the following:
> key = value = 3
> where key is key and everything after the '=' is a value until EOF or 
> ',' ,i..e. in this case "value = 3". Yes I know this is very strange 
> and usually you would quote string, but we need it for legacy reasons, 
> mainly incoperating legacy hand-written parser funcitonality into 
> ANTLR ;-)
>
> But unfortunately I get a strange syntax error? Please see below: I 
> also attached the full grammar, in case you need that.
>
> I include a snippet of the AST grammar, where the rule in question is 
> used:
> // parser...
> properties
>        :
>        ( property ( Delim property )* )? Delim?
>        -> property*
>        ;
> attributes
>        :  // FIXME is this wanted h=(d=3 k=3) , i.e. with komma?
>        ( attribute ( Delim attribute )* )* Delim?
>        -> ^( ATTRIBUTES attribute* )
>        ;
> list
>        :
>        ( value ( Delim value )* )*
>        -> ^( TYPE LIST ) ^( VALUE value* )
>        ;
> // lexer...
> Delim
>    :
>    ','
>    {
>        unsetFoundFirstEqualsInPropert();
>    }      ;
> fragment USTRING_
>    :
>    {hasFoundFirstEqualsInProperty()}?=>
>    (~(' ' /*| '\t'*/ | '%' | Delim | '\n' | '[' | '{' | '"' | '\'' | 
> '`' | '<' | '\\' | '/') | HEXESCAPE | '%' ~HEXDIGIT_) (~('%' | Delim | 
> '\n' | '}' | ']' ) | HEXESCAPE | '%' ~HEXDIGIT_)*
>    ;
>
> The error is "syntax error: buildnfa: <AST>:227:2: expecting EOA, found '
>        unsetFoundFirstEqualsInPropert();
>    '".
>
> I get from the list that EOA means End-Of-Alternative, but the rules 
> does not have an alternative. This may also be related to the bug 
> http://www.antlr.org/jira/browse/ANTLR-305 ? It seems very similar to 
> my problem.
>
> Please help, we really need this. Also if you have another suggestion 
> for a solution to this problem.
>
> Thanks,
> Paul
>
>
>
> ANTLR Parser Generator  Version 3.1.1
> error(100): 
> T:\Workspaces\paulb\AAA-nemip\ag\netzwert\nemip\StringProps.g:0:0: 
> syntax error: buildnfa: <AST>:227:2: expecting EOA, found '
>        unsetFoundFirstEqualsInPropert();
>    '
> error(100): 
> T:\Workspaces\paulb\AAA-nemip\ag\netzwert\nemip\StringProps.g:0:0: 
> syntax error: buildnfa: <AST>: expecting EOA, found '<empty tree>'
> error(100): 
> T:\Workspaces\paulb\AAA-nemip\ag\netzwert\nemip\StringProps.g:0:0: 
> syntax error: buildnfa: <AST>:227:2: expecting EOA, found '
>        unsetFoundFirstEqualsInPropert();
>    '
> error(100): 
> T:\Workspaces\paulb\AAA-nemip\ag\netzwert\nemip\StringProps.g:0:0: 
> syntax error: buildnfa: <AST>: expecting EOA, found '<empty tree>'
> error(10):  internal error: Can't get property 
> javaCompressedTransition using method get/isJavaCompressedTransition 
> from org.antlr.analysis.DFA instance : java.lang.OutOfMemoryError: 
> Java heap space
> java.util.ArrayList.<init>(ArrayList.java:112)
> org.antlr.analysis.DFA.getRunLengthEncoding(DFA.java:357)
> org.antlr.analysis.DFA.getJavaCompressedTransition(DFA.java:333)
> sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
> sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 
>
> sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 
>
> java.lang.reflect.Method.invoke(Method.java:597)
> org.antlr.stringtemplate.language.ASTExpr.invokeMethod(ASTExpr.java:563)
> org.antlr.stringtemplate.language.ASTExpr.rawGetObjectProperty(ASTExpr.java:514) 
>
> org.antlr.stringtemplate.language.ASTExpr.getObjectProperty(ASTExpr.java:416) 
>
> org.antlr.stringtemplate.language.ActionEvaluator.attribute(ActionEvaluator.java:351) 
>
> org.antlr.stringtemplate.language.ActionEvaluator.expr(ActionEvaluator.java:136) 
>
> org.antlr.stringtemplate.language.ActionEvaluator.templateApplication(ActionEvaluator.java:216) 
>
> org.antlr.stringtemplate.language.ActionEvaluator.expr(ActionEvaluator.java:126) 
>
> org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:84) 
>
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
> org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:700)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:722)
> org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:659) 
>
> org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:86) 
>
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
> org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:700)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:722)
> org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:659) 
>
> org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:86) 
>
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
> org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:700)
> org.antlr.codegen.CodeGenerator.write(CodeGenerator.java:1275)
> org.antlr.codegen.Target.genRecognizerFile(Target.java:94)
> org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:460)
> org.antlr.Tool.generateRecognizer(Tool.java:420)
> org.antlr.Tool.process(Tool.java:342)
>
> ------------------------------------------------------------------------
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


-- 
Paul Bouch?
Voice: +49 30 590080-1284
 
Nokia Siemens Networks GmbH & Co. KG, An den Treptowers 1, 12435 Berlin, Germany
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRA 88537
WEEE-Reg.-Nr.: DE 52984304

Pers?nlich haftende Gesellschafterin / General Partner: Nokia Siemens Networks Management GmbH
Gesch?ftsleitung / Board of Directors: Lydia Sommer, Olaf Horsthemke
Vorsitzender des Aufsichtsrats / Chairman of supervisory board: Lauri Kivinen
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRB 163416

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090213/555dc6d5/attachment.html 

From matthieu at offthelip.org  Fri Feb 13 17:27:21 2009
From: matthieu at offthelip.org (Matthieu Riou)
Date: Fri, 13 Feb 2009 17:27:21 -0800
Subject: [antlr-interest] CommonErrorNode and using ASTLabelType (3.0.1 ->
	3.1.1)
Message-ID: <fbdc6a970902131727u7f12361eoe6f363ffeb2af6c5@mail.gmail.com>

Hi,

I've just migrated from 3.0.1 to 3.1.1 and the new use of CommonErrorNode to
handle errors is giving some pain. I use my own AST tree type, so in my
grammar I have:

options {
    output=AST;
    language=Java;
    ASTLabelType=LinkedListTree;
}

But it seems that ANTLR casts a little too generously in the generated
parser as I end up with code like this in all catch blocks:

        retval.tree = (LinkedListTree)adaptor.errorNode(input, retval.start,
input.LT(-1), re);

The method call returns a CommonErrorNode which can't be cast to my tree
implementation, resulting in a ClassCastException. I'm wondering wheter my
tree should extend CommonErrorNode instead of BaseTree but the
CommonErrorNode implementation (especially the constructors) look fairly
specific to error handling.

What would be the recommended solution here?

Thanks!
Matthieu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090213/b31110ee/attachment.html 

From antlr at mirality.co.nz  Fri Feb 13 18:40:55 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 14 Feb 2009 15:40:55 +1300
Subject: [antlr-interest] ANTLRWorks upgrading problem
In-Reply-To: <49959869.2050103@nsn.com>
References: <499059BD.3010009@nsn.com>
 <49959869.2050103@nsn.com>
Message-ID: <20090214024121.9F1DD34183AB@www.antlr.org>

At 04:57 14/02/2009, Paul Bouch? (NSN) wrote:
 >sorry for my repost, but this is a really annoying problem.
 >The only workaround that I have found is deleting the
 >registry entry under 
HKCU\Software\JavaSoft\Prefs\org\antlr\works
[...]
 >> When I try to generate a parser/lexer I get the error:
 >> 'directory "C:\bla\C:\bla" not found'

I had a similar problem with the early 1.2.x 
versions, but it went away when I started using 1.2.3.


From antlr at mirality.co.nz  Fri Feb 13 18:55:01 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 14 Feb 2009 15:55:01 +1300
Subject: [antlr-interest] Lexer issues when block ends with EOF instead
 of EOL
In-Reply-To: <6edc6c380902130841x40c101ebp33c42f79e7ea4383@mail.gmail.co
 m>
References: <6edc6c380902110952h15ac80a7n1235f0f76b53c633@mail.gmail.com>
	<921533.50610.qm@web55905.mail.re3.yahoo.com>
	<6edc6c380902130841x40c101ebp33c42f79e7ea4383@mail.gmail.com>
Message-ID: <20090214025530.12FA234183AB@www.antlr.org>

At 05:41 14/02/2009, Brent Yates wrote:
>My problem is that in addition to the single line comment which 
>can be handled nicely the way you specified, I also mix in 
>preprocessor style patterns (single pass parsing).  These 
>patterns can span multiple lines and therefore the EOL's are part 
>of them.
>
>fragment PREPROSSOR_BLOCK
>     :   (options {greedy = false;} : ('\\\r\n' | '\\\n' | ~'\n' 
> ) )*
>         (
>             '\n'
>         )
>     ;

Using the same principles, that could simply choose to not match 
the last newline (since it shouldn't need to):

fragment PREPROCESSOR_BLOCK
   : ('\\' '\r'? '\n'? | ~('\\' | '\r' | '\n'))*
   ;

This will consume the newline and keep going if it is preceded by 
a backslash, but otherwise a newline will exit the loop (and 
backslashes can also occur without having to be followed by 
newlines); presumably you're calling this at the end of another 
lexer rule (hopefully one that matches at least one character, to 
avoid an infinite loop); after that exits, the newline (if any) 
can be matched with the regular newline rule.

Possibly one downside of this is that it will still accept a 
backslash at end of file (not followed by a newline), but that's 
probably something you can report an error for at the parser level 
rather than the lexer level.

>I also have places where I have to explicitly check for white 
>space (including EOL).
>
>NUMBER_WITH_EXPLICIT_BASE
>     :   (DECIMAL_BASE | BINARY_BASE | OCTAL_BASE | HEX_BASE)
>         WS_OR_NEWLINE?
>         (POST_BASE_NUMBER | MACRO_INSTANTIATION)
>     ;

I don't see why that one would cause any EOF/missing-newline 
related problems.


From rschneid at bridgewater.edu  Fri Feb 13 20:10:28 2009
From: rschneid at bridgewater.edu (Raymond J. Schneider)
Date: Fri, 13 Feb 2009 23:10:28 -0500
Subject: [antlr-interest] Ultimately Frustrated
Message-ID: <172455A9DFDEF941A54573F5463F106528D859F465@bcex01.Bridgewater.local>

I'm really frustrated with what must be a trivial problem but I seem to be chasing my tail.
To try to isolate things I put the antlrworks-1.2.2.jar file in a folder with Expr.g
I ran:> java -cp antlrworks-1.2.2.jar org.antlr.Tool Expr.g 
That generated ExprLexer.java, ExprParser.java, and Expr.tokens
So I added to the directory the Test Harness Test.java with the code:

---
import org.antlr.runtime.*;

public class Test {
    public static void main(String[] args) throws Exception {
        ANTLRInputStream input = new ANTLRInputStream(System.in);
        ExprLexer lexer = new ExprLexer(input);
        CommonTokenStream tokens = new CommonTokenStream(lexer);
        ExprParser parser = new ExprParser(tokens);
        parser.prog();
    }
}
---
Then I tried to compile it with:
>javac -cp antlrworks-1.2.2.jar Test.java ExprLexer.java ExprParser.java

All the documentation seems to indicate this should work but what I get is:
I:\E>javac -classpath antlrworks-1.2.2.jar Test.java ExprLexer.java ExprParser.java
Test.java:6: cannot find symbol
symbol  : class ExprLexer
location: class Test
        ExprLexer lexer = new ExprLexer(input);
        ^
Test.java:6: cannot find symbol
symbol  : class ExprLexer
location: class Test
        ExprLexer lexer = new ExprLexer(input);
                              ^
Test.java:8: cannot find symbol
symbol  : class ExprParser
location: class Test
        ExprParser parser = new ExprParser(tokens);
        ^
Test.java:8: cannot find symbol
symbol  : class ExprParser
location: class Test
        ExprParser parser = new ExprParser(tokens);
                                ^
Note: ExprParser.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
4 errors

All the .java files are in the same directory
Probably some old hand can look at this as identify my error, but I certainly can't seem to.
I'd appreciate any help.
I can run Expr.g in ANTLRWorks directly but not from the command line.

Regards, Ray
--
Ray Schneider,PE, Ph.D
Associate Professor
Math and Computer Science
Bridgewater College
http://www.bridgewater.edu/~rschneid/
http://theweedlessgarden.blogspot.com
 

From robert.soule at gmail.com  Fri Feb 13 20:22:32 2009
From: robert.soule at gmail.com (Robert Soule)
Date: Fri, 13 Feb 2009 23:22:32 -0500
Subject: [antlr-interest] Ultimately Frustrated
In-Reply-To: <172455A9DFDEF941A54573F5463F106528D859F465@bcex01.Bridgewater.local>
References: <172455A9DFDEF941A54573F5463F106528D859F465@bcex01.Bridgewater.local>
Message-ID: <d1316fd70902132022h38901ae3je68e47790eed77b9@mail.gmail.com>

Hi Raymond,

Try adding "." to your classpath, to include the current directory.

javac -classpath .:antlrworks-1.2.2.jar Test.java ExprLexer.java ExprParser.java

-Robert

On Fri, Feb 13, 2009 at 11:10 PM, Raymond J. Schneider
<rschneid at bridgewater.edu> wrote:
> I'm really frustrated with what must be a trivial problem but I seem to be chasing my tail.
> To try to isolate things I put the antlrworks-1.2.2.jar file in a folder with Expr.g
> I ran:> java -cp antlrworks-1.2.2.jar org.antlr.Tool Expr.g
> That generated ExprLexer.java, ExprParser.java, and Expr.tokens
> So I added to the directory the Test Harness Test.java with the code:
>
> ---
> import org.antlr.runtime.*;
>
> public class Test {
>    public static void main(String[] args) throws Exception {
>        ANTLRInputStream input = new ANTLRInputStream(System.in);
>        ExprLexer lexer = new ExprLexer(input);
>        CommonTokenStream tokens = new CommonTokenStream(lexer);
>        ExprParser parser = new ExprParser(tokens);
>        parser.prog();
>    }
> }
> ---
> Then I tried to compile it with:
>>javac -cp antlrworks-1.2.2.jar Test.java ExprLexer.java ExprParser.java
>
> All the documentation seems to indicate this should work but what I get is:
> I:\E>javac -classpath antlrworks-1.2.2.jar Test.java ExprLexer.java ExprParser.java
> Test.java:6: cannot find symbol
> symbol  : class ExprLexer
> location: class Test
>        ExprLexer lexer = new ExprLexer(input);
>        ^
> Test.java:6: cannot find symbol
> symbol  : class ExprLexer
> location: class Test
>        ExprLexer lexer = new ExprLexer(input);
>                              ^
> Test.java:8: cannot find symbol
> symbol  : class ExprParser
> location: class Test
>        ExprParser parser = new ExprParser(tokens);
>        ^
> Test.java:8: cannot find symbol
> symbol  : class ExprParser
> location: class Test
>        ExprParser parser = new ExprParser(tokens);
>                                ^
> Note: ExprParser.java uses unchecked or unsafe operations.
> Note: Recompile with -Xlint:unchecked for details.
> 4 errors
>
> All the .java files are in the same directory
> Probably some old hand can look at this as identify my error, but I certainly can't seem to.
> I'd appreciate any help.
> I can run Expr.g in ANTLRWorks directly but not from the command line.
>
> Regards, Ray
> --
> Ray Schneider,PE, Ph.D
> Associate Professor
> Math and Computer Science
> Bridgewater College
> http://www.bridgewater.edu/~rschneid/
> http://theweedlessgarden.blogspot.com
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From paul.bouche at apertio.com  Fri Feb 13 20:34:06 2009
From: paul.bouche at apertio.com (=?ISO-8859-1?Q?Paul_Bouch=E9?=)
Date: Sat, 14 Feb 2009 05:34:06 +0100
Subject: [antlr-interest] ANTLRWorks upgrading problem
In-Reply-To: <PATyfwjHNuQuN6tdqVv00000dd8@pat.apertio.com>
References: <499059BD.3010009@nsn.com> <49959869.2050103@nsn.com>
	<PATyfwjHNuQuN6tdqVv00000dd8@pat.apertio.com>
Message-ID: <499649BE.5010104@apertio.com>

Gavin Lambert schrieb:
> At 04:57 14/02/2009, Paul Bouch? (NSN) wrote:
> >sorry for my repost, but this is a really annoying problem.
> >The only workaround that I have found is deleting the
> >registry entry under HKCU\Software\JavaSoft\Prefs\org\antlr\works
> [...]
> >> When I try to generate a parser/lexer I get the error:
> >> 'directory "C:\bla\C:\bla" not found'
>
> I had a similar problem with the early 1.2.x versions, but it went 
> away when I started using 1.2.3.
>

1.2.3 version is out - where can I get it ?-)

From rschneid at bridgewater.edu  Fri Feb 13 20:39:52 2009
From: rschneid at bridgewater.edu (Raymond J. Schneider)
Date: Fri, 13 Feb 2009 23:39:52 -0500
Subject: [antlr-interest] Ultimately Frustrated
In-Reply-To: <d1316fd70902132022h38901ae3je68e47790eed77b9@mail.gmail.com>
References: <172455A9DFDEF941A54573F5463F106528D859F465@bcex01.Bridgewater.local>,
	<d1316fd70902132022h38901ae3je68e47790eed77b9@mail.gmail.com>
Message-ID: <172455A9DFDEF941A54573F5463F106528D859F468@bcex01.Bridgewater.local>

Doesn't work: (I've tried that! although it seems to reduce the number of errors.  I included the folder's directory if that helps at all)
 Directory of I:\E

02/13/2009  09:55 PM    <DIR>          .
02/13/2009  09:55 PM    <DIR>          ..
01/28/2009  01:38 PM         2,239,854 antlrworks-1.2.2.jar
02/13/2009  09:41 PM             1,164 Expr.g
10/28/2008  05:08 PM           116,205 antlr-3.1.1-runtime.jar
02/13/2009  10:46 PM            13,618 ExprParser.java
02/13/2009  10:46 PM               132 Expr.tokens
02/13/2009  10:46 PM            13,082 ExprLexer.java
02/13/2009  10:55 PM               382 Test.java
               7 File(s)      2,384,437 bytes
               2 Dir(s)   3,649,765,376 bytes free

I:\E>javac -classpath .;antlrworks-1.2.2.jar Test.java ExprLexer.java ExprParser
.java
.\ExprLexer.java:9: duplicate class: test.ExprLexer
public class ExprLexer extends Lexer {
       ^
Test.java:6: cannot access ExprLexer
bad class file: .\ExprLexer.java
file does not contain class ExprLexer
Please remove or make sure it appears in the correct subdirectory of the classpa
th.
        ExprLexer lexer = new ExprLexer(input);
        ^
2 errors
--
Ray Schneider,PE, Ph.D
Associate Professor
Math and Computer Science
Bridgewater College
http://www.bridgewater.edu/~rschneid/
http://theweedlessgarden.blogspot.com
________________________________________
From: Robert Soule [robert.soule at gmail.com]
Sent: Friday, February 13, 2009 23:22
To: Raymond J. Schneider
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Ultimately Frustrated

Hi Raymond,

Try adding "." to your classpath, to include the current directory.

javac -classpath .:antlrworks-1.2.2.jar Test.java ExprLexer.java ExprParser.java

-Robert

On Fri, Feb 13, 2009 at 11:10 PM, Raymond J. Schneider
<rschneid at bridgewater.edu> wrote:
> I'm really frustrated with what must be a trivial problem but I seem to be chasing my tail.
> To try to isolate things I put the antlrworks-1.2.2.jar file in a folder with Expr.g
> I ran:> java -cp antlrworks-1.2.2.jar org.antlr.Tool Expr.g
> That generated ExprLexer.java, ExprParser.java, and Expr.tokens
> So I added to the directory the Test Harness Test.java with the code:
>
> ---
> import org.antlr.runtime.*;
>
> public class Test {
>    public static void main(String[] args) throws Exception {
>        ANTLRInputStream input = new ANTLRInputStream(System.in);
>        ExprLexer lexer = new ExprLexer(input);
>        CommonTokenStream tokens = new CommonTokenStream(lexer);
>        ExprParser parser = new ExprParser(tokens);
>        parser.prog();
>    }
> }
> ---
> Then I tried to compile it with:
>>javac -cp antlrworks-1.2.2.jar Test.java ExprLexer.java ExprParser.java
>
> All the documentation seems to indicate this should work but what I get is:
> I:\E>javac -classpath antlrworks-1.2.2.jar Test.java ExprLexer.java ExprParser.java
> Test.java:6: cannot find symbol
> symbol  : class ExprLexer
> location: class Test
>        ExprLexer lexer = new ExprLexer(input);
>        ^
> Test.java:6: cannot find symbol
> symbol  : class ExprLexer
> location: class Test
>        ExprLexer lexer = new ExprLexer(input);
>                              ^
> Test.java:8: cannot find symbol
> symbol  : class ExprParser
> location: class Test
>        ExprParser parser = new ExprParser(tokens);
>        ^
> Test.java:8: cannot find symbol
> symbol  : class ExprParser
> location: class Test
>        ExprParser parser = new ExprParser(tokens);
>                                ^
> Note: ExprParser.java uses unchecked or unsafe operations.
> Note: Recompile with -Xlint:unchecked for details.
> 4 errors
>
> All the .java files are in the same directory
> Probably some old hand can look at this as identify my error, but I certainly can't seem to.
> I'd appreciate any help.
> I can run Expr.g in ANTLRWorks directly but not from the command line.
>
> Regards, Ray
> --
> Ray Schneider,PE, Ph.D
> Associate Professor
> Math and Computer Science
> Bridgewater College
> http://www.bridgewater.edu/~rschneid/
> http://theweedlessgarden.blogspot.com
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From robert.soule at gmail.com  Fri Feb 13 20:56:10 2009
From: robert.soule at gmail.com (Robert Soule)
Date: Fri, 13 Feb 2009 23:56:10 -0500
Subject: [antlr-interest] Ultimately Frustrated
In-Reply-To: <172455A9DFDEF941A54573F5463F106528D859F468@bcex01.Bridgewater.local>
References: <172455A9DFDEF941A54573F5463F106528D859F465@bcex01.Bridgewater.local>
	<d1316fd70902132022h38901ae3je68e47790eed77b9@mail.gmail.com>
	<172455A9DFDEF941A54573F5463F106528D859F468@bcex01.Bridgewater.local>
Message-ID: <d1316fd70902132056x51e972eex1bc44541132cc5d5@mail.gmail.com>

It looks like you are expecting your files to be in the package "test".
I would remove the line "package test;" from your grammar. Alternatively,
you could make a directory "test", and move all the files that expect to
be in the package "test" into the test directory.

On Fri, Feb 13, 2009 at 11:39 PM, Raymond J. Schneider
<rschneid at bridgewater.edu> wrote:
> Doesn't work: (I've tried that! although it seems to reduce the number of errors.  I included the folder's directory if that helps at all)
>  Directory of I:\E
>
> 02/13/2009  09:55 PM    <DIR>          .
> 02/13/2009  09:55 PM    <DIR>          ..
> 01/28/2009  01:38 PM         2,239,854 antlrworks-1.2.2.jar
> 02/13/2009  09:41 PM             1,164 Expr.g
> 10/28/2008  05:08 PM           116,205 antlr-3.1.1-runtime.jar
> 02/13/2009  10:46 PM            13,618 ExprParser.java
> 02/13/2009  10:46 PM               132 Expr.tokens
> 02/13/2009  10:46 PM            13,082 ExprLexer.java
> 02/13/2009  10:55 PM               382 Test.java
>               7 File(s)      2,384,437 bytes
>               2 Dir(s)   3,649,765,376 bytes free
>
> I:\E>javac -classpath .;antlrworks-1.2.2.jar Test.java ExprLexer.java ExprParser
> .java
> .\ExprLexer.java:9: duplicate class: test.ExprLexer
> public class ExprLexer extends Lexer {
>       ^
> Test.java:6: cannot access ExprLexer
> bad class file: .\ExprLexer.java
> file does not contain class ExprLexer
> Please remove or make sure it appears in the correct subdirectory of the classpa
> th.
>        ExprLexer lexer = new ExprLexer(input);
>        ^
> 2 errors
> --
> Ray Schneider,PE, Ph.D
> Associate Professor
> Math and Computer Science
> Bridgewater College
> http://www.bridgewater.edu/~rschneid/
> http://theweedlessgarden.blogspot.com
> ________________________________________
> From: Robert Soule [robert.soule at gmail.com]
> Sent: Friday, February 13, 2009 23:22
> To: Raymond J. Schneider
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Ultimately Frustrated
>
> Hi Raymond,
>
> Try adding "." to your classpath, to include the current directory.
>
> javac -classpath .:antlrworks-1.2.2.jar Test.java ExprLexer.java ExprParser.java
>
> -Robert
>
> On Fri, Feb 13, 2009 at 11:10 PM, Raymond J. Schneider
> <rschneid at bridgewater.edu> wrote:
>> I'm really frustrated with what must be a trivial problem but I seem to be chasing my tail.
>> To try to isolate things I put the antlrworks-1.2.2.jar file in a folder with Expr.g
>> I ran:> java -cp antlrworks-1.2.2.jar org.antlr.Tool Expr.g
>> That generated ExprLexer.java, ExprParser.java, and Expr.tokens
>> So I added to the directory the Test Harness Test.java with the code:
>>
>> ---
>> import org.antlr.runtime.*;
>>
>> public class Test {
>>    public static void main(String[] args) throws Exception {
>>        ANTLRInputStream input = new ANTLRInputStream(System.in);
>>        ExprLexer lexer = new ExprLexer(input);
>>        CommonTokenStream tokens = new CommonTokenStream(lexer);
>>        ExprParser parser = new ExprParser(tokens);
>>        parser.prog();
>>    }
>> }
>> ---
>> Then I tried to compile it with:
>>>javac -cp antlrworks-1.2.2.jar Test.java ExprLexer.java ExprParser.java
>>
>> All the documentation seems to indicate this should work but what I get is:
>> I:\E>javac -classpath antlrworks-1.2.2.jar Test.java ExprLexer.java ExprParser.java
>> Test.java:6: cannot find symbol
>> symbol  : class ExprLexer
>> location: class Test
>>        ExprLexer lexer = new ExprLexer(input);
>>        ^
>> Test.java:6: cannot find symbol
>> symbol  : class ExprLexer
>> location: class Test
>>        ExprLexer lexer = new ExprLexer(input);
>>                              ^
>> Test.java:8: cannot find symbol
>> symbol  : class ExprParser
>> location: class Test
>>        ExprParser parser = new ExprParser(tokens);
>>        ^
>> Test.java:8: cannot find symbol
>> symbol  : class ExprParser
>> location: class Test
>>        ExprParser parser = new ExprParser(tokens);
>>                                ^
>> Note: ExprParser.java uses unchecked or unsafe operations.
>> Note: Recompile with -Xlint:unchecked for details.
>> 4 errors
>>
>> All the .java files are in the same directory
>> Probably some old hand can look at this as identify my error, but I certainly can't seem to.
>> I'd appreciate any help.
>> I can run Expr.g in ANTLRWorks directly but not from the command line.
>>
>> Regards, Ray
>> --
>> Ray Schneider,PE, Ph.D
>> Associate Professor
>> Math and Computer Science
>> Bridgewater College
>> http://www.bridgewater.edu/~rschneid/
>> http://theweedlessgarden.blogspot.com
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>

From yimm8369 at hotmail.com  Fri Feb 13 22:33:36 2009
From: yimm8369 at hotmail.com (=?gb2312?B?06LD9w==?=)
Date: Sat, 14 Feb 2009 14:33:36 +0800
Subject: [antlr-interest] (no subject)
Message-ID: <BAY122-W10D4413AB5BF553358D307DBB90@phx.gbl>




Hi guys,

I want to change the "+" to "-" using antlr, there is the testcase:

package {

    public class bitwise extends Sprite
    {    var time:Number = getTimer();
        
      }
        
            function runOperatorTest():Number
                {
                for(var i:int=0; i<1000000; i++)
                {
                    var val1:int = i + 2;
                    }
                }
                }
 
There is the java file:

public void testNormal1() throws Exception {
        CharStream input = new ANTLRFileStream("TestASTBlockStatment_testcase001");
        ActionScript3Lexer lex = new ActionScript3Lexer(input);
        ASTokenRewriteStream tokens = new ASTokenRewriteStream(lex);
        ActionScript3Parser parser = new ActionScript3Parser(tokens);
        parser.setTreeAdaptor(new ASCommonTreeAdapter());
        parser.packageDeclaration();
        System.out.println("after:" + tokens);
  }


In the .g file, I use:


@members{
     TokenRewriteStream tokens;
   .....
}
....
packageDeclaration
@init {

   tokens = (TokenRewriteStream)input; 
  // Token start = input.LT(1);
   .....
}

....
additiveExpression
    :   multiplicativeExpression ( sss=(add^)  {if($add.text.equals("+")){tokens.replace($sss, "123");}}  multiplicativeExpression)*     
    ;

And I rewrite the TokenRewriteStream.java to ASTokenRewriteStream.

When I run it, here is the error:

java.lang.NullPointerException
    at org.antlr.runtime.TokenRewriteStream.replace(TokenRewriteStream.java:272)
    at heyesh.app.language.as3.parser.ASTokenRewriteStream.replace(ASTokenRewriteStream.java:120)
    at heyesh.app.language.as3.parser.ActionScript3Parser.additiveExpression(ActionScript3Parser.java:14087)
    at heyesh.app.language.as3.parser.ActionScript3Parser.shiftExpression(ActionScript3Parser.java:13945)
    at heyesh.app.language.as3.parser.ActionScript3Parser.relationalExpression(ActionScript3Parser.java:13734)
    at heyesh.app.language.as3.parser.ActionScript3Parser.equalityExpression(ActionScript3Parser.java:13532)
    at heyesh.app.language.as3.parser.ActionScript3Parser.bitwiseANDExpression(ActionScript3Parser.java:13346)
    at heyesh.app.language.as3.parser.ActionScript3Parser.bitwiseXORExpression(ActionScript3Parser.java:13160)
    at heyesh.app.language.as3.parser.ActionScript3Parser.bitwiseORExpression(ActionScript3Parser.java:12974)
    at heyesh.app.language.as3.parser.ActionScript3Parser.logicalANDExpression(ActionScript3Parser.java:12788)
    at heyesh.app.language.as3.parser.ActionScript3Parser.logicalORExpression(ActionScript3Parser.java:12602)
    at heyesh.app.language.as3.parser.ActionScript3Parser.conditionalExpression(ActionScript3Parser.java:12329)
    at heyesh.app.language.as3.parser.ActionScript3Parser.assignmentExpression(ActionScript3Parser.java:12055)
    at heyesh.app.language.as3.parser.ActionScript3Parser.variableDeclaration(ActionScript3Parser.java:10835)
    at heyesh.app.language.as3.parser.ActionScript3Parser.variableStatement(ActionScript3Parser.java:10436)
    at heyesh.app.language.as3.parser.ActionScript3Parser.statement(ActionScript3Parser.java:6888)
    at heyesh.app.language.as3.parser.ActionScript3Parser.blockStatement(ActionScript3Parser.java:7020)
    at heyesh.app.language.as3.parser.ActionScript3Parser.statement(ActionScript3Parser.java:6650)
    at heyesh.app.language.as3.parser.ActionScript3Parser.forStatement(ActionScript3Parser.java:9021)
    at heyesh.app.language.as3.parser.ActionScript3Parser.statement(ActionScript3Parser.java:6804)
    at heyesh.app.language.as3.parser.ActionScript3Parser.blockStatement(ActionScript3Parser.java:7020)
    at heyesh.app.language.as3.parser.ActionScript3Parser.functionDeclaration(ActionScript3Parser.java:5793)
    at heyesh.app.language.as3.parser.ActionScript3Parser.statement(ActionScript3Parser.java:6902)
    at heyesh.app.language.as3.parser.ActionScript3Parser.packageElement(ActionScript3Parser.java:4156)
    at heyesh.app.language.as3.parser.ActionScript3Parser.packageDeclaration(ActionScript3Parser.java:4000)
    at heyesh.app.language.as3.semantic.internal.statement.TestASTBlockStatement.testNormal1(TestASTBlockStatement.java:35)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at junit.framework.TestCase.runTest(TestCase.java:164)
    at junit.framework.TestCase.runBare(TestCase.java:130)
    at junit.framework.TestResult$1.protect(TestResult.java:106)
    at junit.framework.TestResult.runProtected(TestResult.java:124)
    at junit.framework.TestResult.run(TestResult.java:109)
    at junit.framework.TestCase.run(TestCase.java:120)
    at junit.framework.TestSuite.runTest(TestSuite.java:230)
    at junit.framework.TestSuite.run(TestSuite.java:225)
    at org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run(JUnit3TestReference.java:130)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:460)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:673)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196)

TokenRewriteStream.java:272 is :
     public void replace(Token indexT, Object text) {
                              replace(DEFAULT_PROGRAM_NAME, indexT, indexT, text);
                    }

and  ASTokenRewriteStream.java:120 is :

 public void replace(ASCommonToken indexT, Object text) {

                              replace(DEFAULT_PROGRAM_NAME, indexT, indexT, text);

                    }

ASCommonToken extends CommonToken.


any idea?


Annie


_________________________________________________________________
MSN??????????????????MSN???
http://im.live.cn/safe/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090214/5619844b/attachment.html 

From yimm8369 at hotmail.com  Fri Feb 13 22:36:21 2009
From: yimm8369 at hotmail.com (=?gb2312?B?06LD9w==?=)
Date: Sat, 14 Feb 2009 14:36:21 +0800
Subject: [antlr-interest] TokenRewriteStream.replace Problem
Message-ID: <BAY122-W161927420868A26FDD7085DBB90@phx.gbl>




Hi guys,

I want to change the "+" to "-" using antlr, there is the testcase:

package {

    public class bitwise extends Sprite
    {    var time:Number = getTimer();
        
      }
        
            function runOperatorTest():Number
                {
                for(var i:int=0; i<1000000; i++)
                {
                    var val1:int = i + 2;
                    }
                }
                }
 
There is the java file:

public void testNormal1() throws Exception {
        CharStream input = new ANTLRFileStream("TestASTBlockStatment_testcase001");
        ActionScript3Lexer lex = new ActionScript3Lexer(input);
        ASTokenRewriteStream tokens = new ASTokenRewriteStream(lex);
        ActionScript3Parser parser = new ActionScript3Parser(tokens);
        parser.setTreeAdaptor(new ASCommonTreeAdapter());
        parser.packageDeclaration();
        System.out.println("after:" + tokens);
  }


In the .g file, I use:


@members{
     TokenRewriteStream tokens;
   .....
}
....
packageDeclaration
@init {

   tokens = (TokenRewriteStream)input; 
  // Token start = input.LT(1);
   .....
}

....
additiveExpression
    :   multiplicativeExpression ( sss=(add^)  {if($add.text.equals("+")){tokens.replace($sss, "123");}}  multiplicativeExpression)*     
    ;

And I rewrite the TokenRewriteStream.java to ASTokenRewriteStream.

When I run it, here is the error:

java.lang.NullPointerException
    at org.antlr.runtime.TokenRewriteStream.replace(TokenRewriteStream.java:272)
    at heyesh.app.language.as3.parser.ASTokenRewriteStream.replace(ASTokenRewriteStream.java:120)
    at heyesh.app.language.as3.parser.ActionScript3Parser.additiveExpression(ActionScript3Parser.java:14087)
    at heyesh.app.language.as3.parser.ActionScript3Parser.shiftExpression(ActionScript3Parser.java:13945)
    at heyesh.app.language.as3.parser.ActionScript3Parser.relationalExpression(ActionScript3Parser.java:13734)
    at heyesh.app.language.as3.parser.ActionScript3Parser.equalityExpression(ActionScript3Parser.java:13532)
    at heyesh.app.language.as3.parser.ActionScript3Parser.bitwiseANDExpression(ActionScript3Parser.java:13346)
    at heyesh.app.language.as3.parser.ActionScript3Parser.bitwiseXORExpression(ActionScript3Parser.java:13160)
    at heyesh.app.language.as3.parser.ActionScript3Parser.bitwiseORExpression(ActionScript3Parser.java:12974)
    at heyesh.app.language.as3.parser.ActionScript3Parser.logicalANDExpression(ActionScript3Parser.java:12788)
    at heyesh.app.language.as3.parser.ActionScript3Parser.logicalORExpression(ActionScript3Parser.java:12602)
    at heyesh.app.language.as3.parser.ActionScript3Parser.conditionalExpression(ActionScript3Parser.java:12329)
    at heyesh.app.language.as3.parser.ActionScript3Parser.assignmentExpression(ActionScript3Parser.java:12055)
    at heyesh.app.language.as3.parser.ActionScript3Parser.variableDeclaration(ActionScript3Parser.java:10835)
    at heyesh.app.language.as3.parser.ActionScript3Parser.variableStatement(ActionScript3Parser.java:10436)
    at heyesh.app.language.as3.parser.ActionScript3Parser.statement(ActionScript3Parser.java:6888)
    at heyesh.app.language.as3.parser.ActionScript3Parser.blockStatement(ActionScript3Parser.java:7020)
    at heyesh.app.language.as3.parser.ActionScript3Parser.statement(ActionScript3Parser.java:6650)
    at heyesh.app.language.as3.parser.ActionScript3Parser.forStatement(ActionScript3Parser.java:9021)
    at heyesh.app.language.as3.parser.ActionScript3Parser.statement(ActionScript3Parser.java:6804)
    at heyesh.app.language.as3.parser.ActionScript3Parser.blockStatement(ActionScript3Parser.java:7020)
    at heyesh.app.language.as3.parser.ActionScript3Parser.functionDeclaration(ActionScript3Parser.java:5793)
    at heyesh.app.language.as3.parser.ActionScript3Parser.statement(ActionScript3Parser.java:6902)
    at heyesh.app.language.as3.parser.ActionScript3Parser.packageElement(ActionScript3Parser.java:4156)
    at heyesh.app.language.as3.parser.ActionScript3Parser.packageDeclaration(ActionScript3Parser.java:4000)
    at heyesh.app.language.as3.semantic.internal.statement.TestASTBlockStatement.testNormal1(TestASTBlockStatement.java:35)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at junit.framework.TestCase.runTest(TestCase.java:164)
    at junit.framework.TestCase.runBare(TestCase.java:130)
    at junit.framework.TestResult$1.protect(TestResult.java:106)
    at junit.framework.TestResult.runProtected(TestResult.java:124)
    at junit.framework.TestResult.run(TestResult.java:109)
    at junit.framework.TestCase.run(TestCase.java:120)
    at junit.framework.TestSuite.runTest(TestSuite.java:230)
    at junit.framework.TestSuite.run(TestSuite.java:225)
    at org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run(JUnit3TestReference.java:130)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:460)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:673)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196)

TokenRewriteStream.java:272 is :
     public void replace(Token indexT, Object text) {
                              replace(DEFAULT_PROGRAM_NAME, indexT, indexT, text);
                    }

and  ASTokenRewriteStream.java:120 is :

 public void replace(ASCommonToken indexT, Object text) {

                              replace(DEFAULT_PROGRAM_NAME, indexT, indexT, text);

                    }

ASCommonToken extends CommonToken.


any idea?


Annie



_________________________________________________________________
????????????????????????????
http://chunjie.live.com/?form=PANER01
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090214/fb23f39d/attachment.html 

From carter_cheng at yahoo.com  Sat Feb 14 01:00:37 2009
From: carter_cheng at yahoo.com (Carter Cheng)
Date: Sat, 14 Feb 2009 01:00:37 -0800 (PST)
Subject: [antlr-interest] c runtime with templates
In-Reply-To: <4995AEBC.60104@temporal-wave.com>
Message-ID: <838636.64923.qm@web50111.mail.re2.yahoo.com>


Thanks Jim.


--- On Fri, 2/13/09, Jim Idle <jimi at temporal-wave.com> wrote:

> From: Jim Idle <jimi at temporal-wave.com>
> Subject: Re: [antlr-interest] c runtime with templates
> To: 
> Cc: antlr-interest at antlr.org
> Date: Friday, February 13, 2009, 9:32 AM
> Carter Cheng wrote:
> > Thanks for the reply.
> >
> > I did actually manage to find a semi workaround for
> this though it is a bit cumbersome (involves manually
> editing the extern "C" scopes in the tree grammar
> .h generated file). I am a bit of a C++ newbie and part of
> me is curious if this extern "C" stuff is really
> needed here since I am compiling everything with g++.
> >
> > Unfortunately given how the declarations look in the
> header it seems that since in certain cases I am returning
> stl types these show up in some of the generated structs in
> the header i suspect that #ifdefing them out of the header
> would mean the header would not compile.
> >
> >   
> In the latest source I think that the #ifdefs are more
> selective, but 
> you probably want to put your #includes inside @preincludes
> and not 
> @header. Chack the docs on the various sections.  Also
> don't put any of 
> your classes and things directly into the grammar, place
> them in .cpp 
> files and the include the headers the define the classes in
> the 
> preincludes sections. Then your classes won't be marked
> as extern "C". 
> There are comments about the approach you take to structure
> in the 
> examples - separate include that includes your headers and
> the 
> parser/lexer headers and so on. Keep as much of your own
> code as 
> possible out of the .g file and the generated headers
> basically.
> 
> Jim
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address


      

From carter_cheng at yahoo.com  Sat Feb 14 03:24:08 2009
From: carter_cheng at yahoo.com (Carter Cheng)
Date: Sat, 14 Feb 2009 03:24:08 -0800 (PST)
Subject: [antlr-interest] subtrees which I don't care about and .*
Message-ID: <772167.67409.qm@web50111.mail.re2.yahoo.com>


Hi,

I was spending sometime with my tree grammar today and noticed that the .* rules dont seem to properly match/ignore subtrees and instead generate an error upon encountering DOWN. 

If I am correct about this, what is the proper way of creating tree grammars where I am only interested in a subset of the rules in the generated tree? Is there some method for doing this using grammar inheritance?

Thanks in advance,

Carter.




      

From swaroopch at gmail.com  Sat Feb 14 07:18:49 2009
From: swaroopch at gmail.com (Swaroop C H)
Date: Sat, 14 Feb 2009 20:48:49 +0530
Subject: [antlr-interest] How to match a phrase i.e. multiple words?
Message-ID: <351e88710902140718p7075c7bek6b8d14ffcaf671bc@mail.gmail.com>

Hello,

I'm trying to implement something like gmail-search where the user can
enter key:word or key:"more than one word" -> where the multiple words
are enclosed in double quotes (would like to remove that constraint if
possible, but I don't know enough of ANTLR to do that yet)

So far I have the following which correctly matches `description:"something"`:

    grammar Search;

    options {
        language=Python;
    }

    main
        : k=WORD ':' v=PHRASE { print $k.text, '=', $v.text }
        ;

    PHRASE
        : '"' WORD '"' { $text = $WORD.text }
        ;

    WORD
        : ( 'a'..'z' | 'A'..'Z' | '.' )+
        ;

    WHITESPACE
        :   (' '|'\t'|'\n'|'\r')+ { self.skip() }
        ;


The problem is that I'm unable to proceed from here. If I put

    PHRASE
        : '"' w=WORD+ '"' { $text = $w.text }
        ;


Then I get the following error:

    ANTLR Parser Generator  Version 3.1.1
    line 1:22 mismatched character u' ' expecting u'"'
    line 1:28 required (...)+ loop did not match anything at character '<EOF>'
    line 1:23 missing PHRASE at u'todo'
    description = <missing PHRASE>


I am not sure how to match a phrase as multiple words.

Any help would be greatly appreciated. Please be gentle on a newbie :-)

Regards,
Swaroop

From rschneid at bridgewater.edu  Sat Feb 14 07:32:11 2009
From: rschneid at bridgewater.edu (Raymond J. Schneider)
Date: Sat, 14 Feb 2009 10:32:11 -0500
Subject: [antlr-interest] Ultimately Frustrated
In-Reply-To: <d1316fd70902132056x51e972eex1bc44541132cc5d5@mail.gmail.com>
References: <172455A9DFDEF941A54573F5463F106528D859F465@bcex01.Bridgewater.local>
	<d1316fd70902132022h38901ae3je68e47790eed77b9@mail.gmail.com>
	<172455A9DFDEF941A54573F5463F106528D859F468@bcex01.Bridgewater.local>,
	<d1316fd70902132056x51e972eex1bc44541132cc5d5@mail.gmail.com>
Message-ID: <172455A9DFDEF941A54573F5463F106528D859F469@bcex01.Bridgewater.local>

Thanks tremendously Robert ... that was exactly my problem although I was totally oblivious to it.

Actually I wasn't expecting anything ... I'm not particularly familiar with packages and jar files so the significance of those lines in the grammar shot right over my head.  I'm working through "The Definitive ANTLR Reference" book with my Compiler Design class and we are all total newbies to ANTLR and are only in chapter 3.

Thanks Robert ... you got me on the right track all right.  It was still confusing because there were two lines in the grammar that referred to package test and I only caught the first one the first time.
In my Expr.g grammar I just made the following modification at the top:
---
grammar Expr;

@header {
/*package test;*/
import java.util.HashMap;
}

@lexer::header {/*package test;*/}
...
---
Then it stopped looking for the lexer and parser in another file.  Then the whole thing worked.  A blow by blow account follows and may help other newbies.
---
1. Removed package test from Expr.g
2. ran 
java -cp antlrworks-1.2.2.jar org.antlr.Tool Expr.g 
3. found a package test; line in the generated ExprLexer.java file and eliminated it
4. compiled with
I:\E>javac -cp .;antlrworks-1.2.2.jar Test.java ExprLexer.java ExprParser.java
Note: ExprParser.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
 

5.And ran it I:\E>java -classpath .;antlrworks-1.2.2.jar Test
a=3
b=4
a+b
^Z
7

I:\E>


6. Made a small test file input with
I:\E>copy con input
a=3
b=4
c=a+b
a*b
c*a
c
^Z
        1 file(s) copied.

7. Then ran it with 
I:\E>java -classpath .;antlrworks-1.2.2.jar Test < input
12
21
7

I:\E>

8. Changed a line in ExprLexer to @lexer::header {/*package test;*/} to comment out the package test; line
and ran the following
I:\E>java -cp antlrworks-1.2.2.jar org.antlr.Tool Expr.g
ANTLR Parser Generator  Version 3.1.1

I:\E>javac -cp antlrworks-1.2.2.jar;. Test.java ExprLexer.java ExprParser.java
Note: ExprParser.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.

I:\E>java -cp antlrworks-1.2.2.jar;. Test < input
12
21
7

I:\E>
----
I think I've got this now ... at least until the next glitch.
Thanks very much again Robert and all.  Great resource and I'm looking forward to getting proficient enough to use it for some nice DSLs.

Regards, Ray
--
Ray Schneider,PE, Ph.D
Associate Professor
Math and Computer Science
Bridgewater College
http://www.bridgewater.edu/~rschneid/
http://theweedlessgarden.blogspot.com
________________________________________
From: Robert Soule [robert.soule at gmail.com]
Sent: Friday, February 13, 2009 23:56
To: Raymond J. Schneider
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Ultimately Frustrated

It looks like you are expecting your files to be in the package "test".
I would remove the line "package test;" from your grammar. Alternatively,
you could make a directory "test", and move all the files that expect to
be in the package "test" into the test directory.


From bruno.marc-aurele at polymtl.ca  Sat Feb 14 15:33:00 2009
From: bruno.marc-aurele at polymtl.ca (Bruno Marc-Aurele)
Date: Sat, 14 Feb 2009 18:33:00 -0500
Subject: [antlr-interest] CommonErrorNode and using ASTLabelType (3.0.1
	->	3.1.1)
In-Reply-To: <fbdc6a970902131727u7f12361eoe6f363ffeb2af6c5@mail.gmail.com>
References: <fbdc6a970902131727u7f12361eoe6f363ffeb2af6c5@mail.gmail.com>
Message-ID: <1234654380.499754ac7ffb4@www.imp.polymtl.ca>

I don't know what would be recommended, but I also need to have an ErrorNode
that derives from my custom node.

What I did is I overloaded the errorNode method in my NodeAdaptor to tkae as an
input a CustomErrorNode error node. My CustomErrorNode class derives from my
CustomNode and is actually only a wrapper of CommonErrorNode. That way, there
are no class cast exceptions AND I get the full functionnality or error nodes.

Hope that helped,
Bruno M-A.


Selon Matthieu Riou <matthieu at offthelip.org>:

> Hi,
>
> I've just migrated from 3.0.1 to 3.1.1 and the new use of CommonErrorNode to
> handle errors is giving some pain. I use my own AST tree type, so in my
> grammar I have:
>
> options {
>     output=AST;
>     language=Java;
>     ASTLabelType=LinkedListTree;
> }
>
> But it seems that ANTLR casts a little too generously in the generated
> parser as I end up with code like this in all catch blocks:
>
>         retval.tree = (LinkedListTree)adaptor.errorNode(input, retval.start,
> input.LT(-1), re);
>
> The method call returns a CommonErrorNode which can't be cast to my tree
> implementation, resulting in a ClassCastException. I'm wondering wheter my
> tree should extend CommonErrorNode instead of BaseTree but the
> CommonErrorNode implementation (especially the constructors) look fairly
> specific to error handling.
>
> What would be the recommended solution here?
>
> Thanks!
> Matthieu
>


From cmundi at gmail.com  Sat Feb 14 17:36:53 2009
From: cmundi at gmail.com (C. Mundi)
Date: Sat, 14 Feb 2009 18:36:53 -0700
Subject: [antlr-interest] ANTLRWorks: Rule Syntax Graph - negated sets
In-Reply-To: <D8571F10-FC3E-4068-B321-9E1EBBD72327@cs.usfca.edu>
References: <49942402.50702@nsn.com>
	<D8571F10-FC3E-4068-B321-9E1EBBD72327@cs.usfca.edu>
Message-ID: <e794390902141736g254c6f9dq85943ff5c57a74e6@mail.gmail.com>

Once in a while, I wish for this also, but only very rarely, for
documentation.

Based on Terence's  comment below, it seems that the thing to do is to look
at adding an output filter to ANTLRWorks to selectively replace a set  with
its complement.  Honestly, for the number of times I have wanted this, it
was just as easy for me to edit it by hand.

On Thu, Feb 12, 2009 at 10:24 AM, Terence Parr <parrt at cs.usfca.edu> wrote:

> Sorry, but ANTLR normalizes all sets before passing to ANTLRWorks.
> Ter
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090214/eb7f27b4/attachment.html 

From antlr at mirality.co.nz  Sat Feb 14 23:11:37 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sun, 15 Feb 2009 20:11:37 +1300
Subject: [antlr-interest] How to match a phrase i.e. multiple words?
In-Reply-To: <351e88710902140718p7075c7bek6b8d14ffcaf671bc@mail.gmail.co
 m>
References: <351e88710902140718p7075c7bek6b8d14ffcaf671bc@mail.gmail.com>
Message-ID: <20090215071201.B99B334183AB@www.antlr.org>

At 04:18 15/02/2009, Swaroop C H wrote:
 >    PHRASE
 >        : '"' WORD '"' { $text = $WORD.text }
 >        ;
 >
 >    WORD
 >        : ( 'a'..'z' | 'A'..'Z' | '.' )+
 >        ;
 >
 >    WHITESPACE
 >        :   (' '|'\t'|'\n'|'\r')+ { self.skip() }
 >        ;
 >
 >The problem is that I'm unable to proceed from here. If I put
 >
 >    PHRASE
 >        : '"' w=WORD+ '"' { $text = $w.text }
 >        ;
 >
 >Then I get the following error:
 >
 >    ANTLR Parser Generator  Version 3.1.1
 >    line 1:22 mismatched character u' ' expecting u'"'
 >    line 1:28 required (...)+ loop did not match anything at
 >character '<EOF>'
 >    line 1:23 missing PHRASE at u'todo'
 >    description = <missing PHRASE>

Since PHRASE is a lexer rule, it is at the same "level" as the 
WHITESPACE rule, and thus whitespace isn't magically removed from 
the character stream (like it would be if it were a parser rule 
instead).

If you want to retain the discrete WORD tokens, then you could 
change PHRASE into a parser rule.  I suspect that's not really 
what you want, though.

The simplest thing to do is simply to define a PHRASE as anything 
at all within quotes:

PHRASE
   : '"' .* '"'
   ;

If you want to restrict the accepted characters, though, then you 
could use something like this:

PHRASE
   : '"' (~('\r' | '\n' | '"'))* '"'
   ;

or this:

PHRASE
   : '"' (WORD | ' ' | '\t')* '"'
   ;

It's usually best though to let your lexer be fairly tolerant, and 
raise errors about invalid content at parse or tree-walk time 
instead.


From carter_cheng at yahoo.com  Sun Feb 15 10:30:15 2009
From: carter_cheng at yahoo.com (Carter Cheng)
Date: Sun, 15 Feb 2009 10:30:15 -0800 (PST)
Subject: [antlr-interest] Diagnosing errors in the tree grammar
In-Reply-To: <772167.67409.qm@web50111.mail.re2.yahoo.com>
Message-ID: <274934.4512.qm@web50109.mail.re2.yahoo.com>


Hi,

I have been having some problems diagnosing errors in the tree grammar. The problem is that the error messages though perhaps useful if the grammars are correct are somewhat uninformative if they are not. Is there so method which can be used to diagnose or check if tree grammars are correct?

Thanks in advance,

Carter.


      

From jimi at temporal-wave.com  Sun Feb 15 19:30:28 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun, 15 Feb 2009 19:30:28 -0800
Subject: [antlr-interest] subtrees which I don't care about and .*
In-Reply-To: <772167.67409.qm@web50111.mail.re2.yahoo.com>
References: <772167.67409.qm@web50111.mail.re2.yahoo.com>
Message-ID: <4998DDD4.8000202@temporal-wave.com>

Carter Cheng wrote:
> Hi,
>
> I was spending sometime with my tree grammar today and noticed that the .* rules dont seem to properly match/ignore subtrees and instead generate an error upon encountering DOWN. 
>
> If I am correct about this, what is the proper way of creating tree grammars where I am only interested in a subset of the rules in the generated tree? Is there some method for doing this using grammar inheritance?
>   
There are changes for this in the latest Java source that have yet to 
come in to the latest C source,so I suspect that you are running in to 
the need for those changes.

Jim

From swaroopch at gmail.com  Sun Feb 15 22:47:42 2009
From: swaroopch at gmail.com (Swaroop C H)
Date: Mon, 16 Feb 2009 12:17:42 +0530
Subject: [antlr-interest] How to match a phrase i.e. multiple words?
In-Reply-To: <4997c033.1c0bca0a.3626.2f88SMTPIN_ADDED@mx.google.com>
References: <351e88710902140718p7075c7bek6b8d14ffcaf671bc@mail.gmail.com>
	<4997c033.1c0bca0a.3626.2f88SMTPIN_ADDED@mx.google.com>
Message-ID: <351e88710902152247v2841083cx35e6138861f0aeab@mail.gmail.com>

Hi Gavin,

On Sun, Feb 15, 2009 at 12:41 PM, Gavin Lambert wrote:
> Since PHRASE is a lexer rule, it is at the same "level" as the WHITESPACE
> rule, and thus whitespace isn't magically removed from the character stream
> (like it would be if it were a parser rule instead).
> <snip />
> The simplest thing to do is simply to define a PHRASE as anything at all
> within quotes:
>
> PHRASE
>  : '"' .* '"'
>  ;


Thanks a ton, this understanding was indeed what I was missing. It is
now working as expected :)

Regards,
Swaroop

From Vitaliy at dbsophic.com  Mon Feb 16 00:34:54 2009
From: Vitaliy at dbsophic.com (Vitaliy)
Date: Mon, 16 Feb 2009 10:34:54 +0200
Subject: [antlr-interest] FW:  Antlr won't backtrack?
Message-ID: <B0DE8B66453D0F4AA67D2A150934999B01195F14FBEA@ex01.dbsophicHQ.com>

Hi guys,



I would really appreciate any kind of an advice,

I'm really stuck here..



Thanks again,

Vitaliy



From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Vitaliy
Sent: Wednesday, February 11, 2009 14:18
To: Jim Idle
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Antlr won't backtrack?



Jim,



Thanks for your response.

The problem is that the grammar I've presented below is a very simplified version of the real grammar I'm handling.

In the actual grammar there are many rules which might end in some cases with an identifier, while in other cases - not.

It's simply impractical to analyze all these cases, go over them and add the semantic predicate you've suggested.

Moreover, there is unfortunately no statement terminator in my grammar, which no doubt could have made my life so much easier, like you said.



Is there any other alternative?

Can't I just tell it somehow to try all alternatives upon failure in an exhaustive search until success?

Or somehow increase the lookahead in this case?



BTW, I still don't get it why Antlr won't backtrack upon failure in this case.. Again, isn't it just what the 'backtrack' option is all about??



I would really appreciate any suggestion,

Vitaliy



From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jim Idle
Sent: Monday, February 09, 2009 18:51
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Antlr won't backtrack?



Vitaliy wrote:

Hi Ter,



Thanks for your quick response!



I'm still confused:

What can I do to suggest Antlr to consider the other alternative, and backtrack instead of failing?

Shouldn't the backtrack option do just that - make Antlr backtrack if it has failed upon a given input?

Why would the variable alternative effect its behavior?


I would recommend that you do not use backtrack at this point. While it can be useful for prototyping, one off conversion grammars and some horrible grammars such as VBSCript, it will generally be more difficult to work out why the grammar isn't working. The errors and warnings that non-backtrack gives are real and you can backtrack on specific rule rather than the entire grammar if you must. Left factor the rules:

statement
 : Identifier (COLON {isLabel =true;} |  {isVariable=true; })
 | KEYWORD ((Identifier)=>Identifier)?
 | etc.

In some grammars it is necessary to look for some kind of terminator. For instance a statement might end in ';' or at '\n'. If it did then you grammar would avoid the ambiguity between the optional Identifier that follows KEYWORD and Identifier and Identifier COLON.

The answers to your quests are that your grammar is so ambiguous that even the best guess of backtrack mode cannot make the correct guess in all cases. As soon as it if fins an alt that looks correct it will take it.

So if you have:

KEYWORD IDENTIFIER COLON

It consumes IDENTIFIER with the KEYWORD and leaves you with a COLON, as will my example above. If you must really have the grammar this way, then you will have to use a semantic predicate:

| KEYWORD ( {input.LA(1) == Identifier && input.LA(2) != COLON}=> Identifier)?

Jim





Thanks allot for your help,

Vitaliy



From: Terence Parr [mailto:parrt at cs.usfca.edu]
Sent: Sunday, February 08, 2009 19:46
To: Vitaliy
Cc: antlr-interest at antlr.org<mailto:antlr-interest at antlr.org>
Subject: Re: [antlr-interest] Antlr won't backtrack?





On Feb 8, 2009, at 2:48 AM, Vitaliy wrote:

root                        : statements EOF;

statements            : (statement)+;

statement             : label

                                  | keyword

                                  | variable

                                  ;



identifier               : Identifier;

label                       : identifier COLON;

keyword                : KEYWORD (identifier)?;

variable                 : identifier;





"keyword label:" will always match rule keyword and then fail.  ANTLR will match greedily because you told it to shut up and backtrack.  It's hiding the warning that identifier can match now or later (during statements loop).



Ter



__________ Information from ESET NOD32 Antivirus, version of virus signature database 3837 (20090208) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com






  _____







List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address





__________ Information from ESET NOD32 Antivirus, version of virus signature database 3844 (20090211) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com



__________ Information from ESET NOD32 Antivirus, version of virus signature database 3845 (20090211) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090216/93a2c485/attachment.html 
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: ATT00001.txt
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20090216/93a2c485/attachment.txt 

From paul.bouche at nsn.com  Mon Feb 16 01:48:28 2009
From: paul.bouche at nsn.com (=?UTF-8?B?IlBhdWwgQm91Y2jDqSAoTlNOKSI=?=)
Date: Mon, 16 Feb 2009 10:48:28 +0100
Subject: [antlr-interest] ANTLRWorks upgrading problem
In-Reply-To: <PATxHbHucVXqxsD1Ty900000de1@pat.apertio.com>
References: <499059BD.3010009@nsn.com> <49959869.2050103@nsn.com>
	<PATyfwjHNuQuN6tdqVv00000dd8@pat.apertio.com>
	<499649BE.5010104@apertio.com>
	<PATxHbHucVXqxsD1Ty900000de1@pat.apertio.com>
Message-ID: <4999366C.10701@nsn.com>

Hi Gavin,

thanks much for the tip. It works now!

:)

I think the developers just rolled the preferences dialog back 
completely - this is at least the way it looks and it's the best quick 
fix one can do

Paul

Gavin Lambert schrieb:
> At 17:34 14/02/2009, you wrote:
> >1.2.3 version is out - where can I get it ?-)
>
> IIRC, I think Kay emailed it to me directly, when I reported a similar 
> bug a while back.  I guess it's a prerelease build :)
>
> I've attached the version I was sent, anyway -- I guess it's "use at 
> your own risk" though.
>
> You can probably get an even more up to the wire build from Hudson:
>   
> <http://www.antlr.org/hudson/job/ANTLRWorks/lastStableBuild/org.antlr$antlrworks/> 
>
>
> [Because of the attachment, I've taken this off-list.  Further replies 
> should probably go back to the list, though.]


-- 
Paul Bouch?
Voice: +49 30 590080-1284
 
Nokia Siemens Networks GmbH & Co. KG, An den Treptowers 1, 12435 Berlin, Germany
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRA 88537
WEEE-Reg.-Nr.: DE 52984304

Pers?nlich haftende Gesellschafterin / General Partner: Nokia Siemens Networks Management GmbH
Gesch?ftsleitung / Board of Directors: Lydia Sommer, Olaf Horsthemke
Vorsitzender des Aufsichtsrats / Chairman of supervisory board: Lauri Kivinen
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRB 163416


From paul.bouche at nsn.com  Mon Feb 16 03:07:58 2009
From: paul.bouche at nsn.com (=?ISO-8859-15?Q?=22Paul_Bouch=E9_=28NSN=29=22?=)
Date: Mon, 16 Feb 2009 12:07:58 +0100
Subject: [antlr-interest] rulecatch in lexer
Message-ID: <4999490E.7070702@nsn.com>

Hi,

I would need a rulecatch statement support for lexers. I tried
@lexer::rulecatch {
    catch (RecoginitionException e) {
        System.out.println(huhu);
    }
}

but it didn't work... it was ignored.  I need this inorder to elegantly 
include a backward compatible adoption to our lexer. It supports only 
quoted strings, but now we need backward compatible behaviour. We need 
to also understand unquoted strings. This would not be a problem, but we 
have several tokens which are unquoted: identifiers, ipaddresses etc. Of 
course I could build a rather complex lexer rule, i.e. making sure 
anything else may not be matched, but the things I want.. Acutally I 
failed and at one time I got a "code too large" error, so I conclude 
upon lexical error and in the right context (via a gated syntactic 
predicate) I would try to match an unquoted string. Currently I can only 
do this by overrider nextToken() because in recover I cannot emit a 
token or rather after recovery the while loop in nextToken starts over 
overwriting the token. I would like to avoid overriding nextToken as 
much as possible, but I need to do it.

BR,
Paul

-- 
Paul Bouch?
Voice: +49 30 590080-1284
 
Nokia Siemens Networks GmbH & Co. KG, An den Treptowers 1, 12435 Berlin, Germany
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRA 88537
WEEE-Reg.-Nr.: DE 52984304

Pers?nlich haftende Gesellschafterin / General Partner: Nokia Siemens Networks Management GmbH
Gesch?ftsleitung / Board of Directors: Lydia Sommer, Olaf Horsthemke
Vorsitzender des Aufsichtsrats / Chairman of supervisory board: Lauri Kivinen
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRB 163416


From cowang at comcast.net  Mon Feb 16 06:47:25 2009
From: cowang at comcast.net (George S. Cowan)
Date: Mon, 16 Feb 2009 09:47:25 -0500
Subject: [antlr-interest] BUG: Initialization for 3 levels of import
Message-ID: <4E41172EC9B543FBB2CCA0DCE2C66237@gsce0ae1cfad8d>

First, I want to thank you again for ANTLR. I can't imagine going back to
hand-coding or using other parser generators. Unfortunately, I have found
another bug in the composite grammar code.
 
I modified the final example at
http://www.antlr.org/wiki/display/ANTLR3/Composite+Grammars slightly to add
an additional level of grammar import. The generated CParser.java does not
initialize the delegate for the lowest level correctly.
 
--------- Grammar and Lexer files ------------
lexer grammar L ;
 
LETTER : 'a'..'z' ;
SPACE : ' ' ;
----------------------------------------------
parser grammar P0 ;
 
letter : LETTER ;
----------------------------------------------
parser grammar P1 ;
import P0 ;
 
// letter : LETTER ;
spaces : SPACE+ ;
----------------------------------------------
parser grammar P2 ;
import P1 ;
 
letters : letter+ ;
----------------------------------------------
grammar C ;
import L, P2 ;
 
stuff : ( letters spaces )+ ;
 
LETTER: 'a'..'z' | 'A'..'Z' ;
------- End of Grammar and Lexer files -------
 
Here is the delegation code generated for the CParser.java. Note that in the
CParser constructor gP0 and gP1 are initialized in the wrong order. If those
last two lines are swapped, my tests work fine.
 
--------------- CParser.java -----------------
    // delegates
    public C_P2_P1_P0 gP0;
    public C_P2_P1 gP1;
    public C_P2 gP2;
    // delegators
 

        public CParser(TokenStream input) {
            this(input, new RecognizerSharedState());
        }
        public CParser(TokenStream input, RecognizerSharedState state) {
            super(input, state);
            gP2 = new C_P2(input, state, this);         
            gP0 = gP1.gP0;
            gP1 = gP2.gP1;
        }
------- End extract from CParser.java --------
 
Regards,
George
 

 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090216/4a19f57c/attachment.html 

From fatih at diyezon.com  Mon Feb 16 07:30:08 2009
From: fatih at diyezon.com (Fatih Tolga Ata)
Date: Mon, 16 Feb 2009 17:30:08 +0200
Subject: [antlr-interest] Recursive parenthesises in the tree.
Message-ID: <49998680.3050108@diyezon.com>

Hi,

I'm learning antlr by implementing a javascript parser. My target 
language is C#. I'm using Patrick Hulsmeijer's Ecmascript3 grammar. I 
converted java codes to c# code in the grammar file. I was able to 
compile a lexer, a parser and a tree walker with this grammar. I tried a 
lot of js input, and I fixed some errors in the c# code in the grammar 
file. But in the belov input, tree walker display "no viable alternative 
at input 'PAREXPR'".
The input is :
if ((a1 = this.prototype[a1])) return add(this, a2, a1, a3);

I looked at grammar and tree walker files, but I didn't solve this 
problem. In grammar file, I saw:

primaryExpression
    : THIS
    | Identifier
    | literal
    | arrayLiteral
    | objectLiteral
    | lpar=LPAREN expression RPAREN -> ^( PAREXPR[$lpar, "PAREXPR"] 
expression )
    ;

And in the tree walker file, there is:
primaryExpression
    : Identifier
    | literal
    ;

This implementation works well when the input has not recursive 
parenthesises. If the input has recursive parens like "((( expression 
)))", the tree walker gives the error I mentioned before.

I studied compilers before. But I am new at antlr grammar. I couldn't 
understand what PARAEXPR is and what is the "-> ^(    )" in the 
primaryExpression.

How can solve this problem?

Any help'll be appreciated.

Regards.

From parrt at cs.usfca.edu  Mon Feb 16 10:47:02 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 16 Feb 2009 10:47:02 -0800
Subject: [antlr-interest] BUG: Initialization for 3 levels of import
In-Reply-To: <4E41172EC9B543FBB2CCA0DCE2C66237@gsce0ae1cfad8d>
References: <4E41172EC9B543FBB2CCA0DCE2C66237@gsce0ae1cfad8d>
Message-ID: <CB487EEB-D32E-4016-87AF-10269E8861F1@cs.usfca.edu>

doh! thanks...

http://www.antlr.org/jira/browse/ANTLR-385

Ter
On Feb 16, 2009, at 6:47 AM, George S. Cowan wrote:

> First, I want to thank you again for ANTLR. I can't imagine going  
> back to hand-coding or using other parser generators. Unfortunately,  
> I have found another bug in the composite grammar code.
>
> I modified the final example at http://www.antlr.org/wiki/display/ANTLR3/Composite+Grammars 
>  slightly to add an additional level of grammar import. The  
> generated CParser.java does not initialize the delegate for the  
> lowest level correctly.
>
> --------- Grammar and Lexer files ------------
> lexer grammar L ;
>
> LETTER : 'a'..'z' ;
> SPACE : ' ' ;
> ----------------------------------------------
> parser grammar P0 ;
>
> letter : LETTER ;
> ----------------------------------------------
> parser grammar P1 ;
> import P0 ;
>
> // letter : LETTER ;
> spaces : SPACE+ ;
> ----------------------------------------------
> parser grammar P2 ;
> import P1 ;
>
> letters : letter+ ;
> ----------------------------------------------
> grammar C ;
> import L, P2 ;
>
> stuff : ( letters spaces )+ ;
>
> LETTER: 'a'..'z' | 'A'..'Z' ;
> ------- End of Grammar and Lexer files -------
>
> Here is the delegation code generated for the CParser.java. Note  
> that in the CParser constructor gP0 and gP1 are initialized in the  
> wrong order. If those last two lines are swapped, my tests work fine.
>
> --------------- CParser.java -----------------
>     // delegates
>     public C_P2_P1_P0 gP0;
>     public C_P2_P1 gP1;
>     public C_P2 gP2;
>     // delegators
>
>
>         public CParser(TokenStream input) {
>             this(input, new RecognizerSharedState());
>         }
>         public CParser(TokenStream input, RecognizerSharedState  
> state) {
>             super(input, state);
>             gP2 = new C_P2(input, state, this);
>             gP0 = gP1.gP0;
>             gP1 = gP2.gP1;
>         }
> ------- End extract from CParser.java --------
>
> Regards,
> George
>
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From carter_cheng at yahoo.com  Mon Feb 16 13:31:16 2009
From: carter_cheng at yahoo.com (Carter Cheng)
Date: Mon, 16 Feb 2009 13:31:16 -0800 (PST)
Subject: [antlr-interest] subtrees which I don't care about and .*
In-Reply-To: <4998DDD4.8000202@temporal-wave.com>
Message-ID: <763753.87159.qm@web50105.mail.re2.yahoo.com>


Thanks Jim. What I am doing in the mean time is just replicating my entire tree grammar for each of the two passes. I suspect given my file sizes are not large this should not be a problem.


--- On Sun, 2/15/09, Jim Idle <jimi at temporal-wave.com> wrote:

> From: Jim Idle <jimi at temporal-wave.com>
> Subject: Re: [antlr-interest] subtrees which I don't care about and .*
> To: 
> Cc: antlr-interest at antlr.org
> Date: Sunday, February 15, 2009, 7:30 PM
> Carter Cheng wrote:
> > Hi,
> >
> > I was spending sometime with my tree grammar today and
> noticed that the .* rules dont seem to properly match/ignore
> subtrees and instead generate an error upon encountering
> DOWN. 
> >
> > If I am correct about this, what is the proper way of
> creating tree grammars where I am only interested in a
> subset of the rules in the generated tree? Is there some
> method for doing this using grammar inheritance?
> >   
> There are changes for this in the latest Java source that
> have yet to 
> come in to the latest C source,so I suspect that you are
> running in to 
> the need for those changes.
> 
> Jim
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address


      

From jaluber at gmx.de  Mon Feb 16 22:43:37 2009
From: jaluber at gmx.de (Johannes Luber)
Date: Tue, 17 Feb 2009 07:43:37 +0100
Subject: [antlr-interest] Recursive parenthesises in the tree.
In-Reply-To: <49998680.3050108@diyezon.com>
References: <49998680.3050108@diyezon.com>
Message-ID: <499A5C99.8060701@gmx.de>

Fatih Tolga Ata schrieb:
> Hi,
> 
> I'm learning antlr by implementing a javascript parser. My target 
> language is C#. I'm using Patrick Hulsmeijer's Ecmascript3 grammar. I 
> converted java codes to c# code in the grammar file. I was able to 
> compile a lexer, a parser and a tree walker with this grammar. I tried a 
> lot of js input, and I fixed some errors in the c# code in the grammar 
> file. But in the belov input, tree walker display "no viable alternative 
> at input 'PAREXPR'".
> The input is :
> if ((a1 = this.prototype[a1])) return add(this, a2, a1, a3);
> 
> I looked at grammar and tree walker files, but I didn't solve this 
> problem. In grammar file, I saw:
> 
> primaryExpression
>     : THIS
>     | Identifier
>     | literal
>     | arrayLiteral
>     | objectLiteral
>     | lpar=LPAREN expression RPAREN -> ^( PAREXPR[$lpar, "PAREXPR"] 
> expression )
>     ;
> 
> And in the tree walker file, there is:
> primaryExpression
>     : Identifier
>     | literal
>     ;
> 
> This implementation works well when the input has not recursive 
> parenthesises. If the input has recursive parens like "((( expression 
> )))", the tree walker gives the error I mentioned before.
> 
> I studied compilers before. But I am new at antlr grammar. I couldn't 
> understand what PARAEXPR is and what is the "-> ^(    )" in the 
> primaryExpression.

PAREXPR is a imaginary token, adding semantics to otherwise
indiscriminable situations or just some additional clarity like in this
case. The "-> ^()" is a tree rewrite operator, saying that the created
AST should look differently than the original input. I suppose your
problem with the tree walker is that it doesn't recognize all
possibilities created by the parser. Unless the missing alternatives are
somehow covered in the Identifier and literal rules, try

primaryExpression
    : THIS
    | Identifier
    | literal
    | arrayLiteral
    | objectLiteral
    | ^( PAREXPR expression )
    ;

In general, look at the documentation about ASTs to learn more about them.

Johannes
> 
> How can solve this problem?
> 
> Any help'll be appreciated.
> 
> Regards.
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From antlr at mirality.co.nz  Mon Feb 16 23:25:24 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 17 Feb 2009 20:25:24 +1300
Subject: [antlr-interest] subtrees which I don't care about and .*
In-Reply-To: <763753.87159.qm@web50105.mail.re2.yahoo.com>
References: <4998DDD4.8000202@temporal-wave.com>
	<763753.87159.qm@web50105.mail.re2.yahoo.com>
Message-ID: <20090217072549.8E2883418486@www.antlr.org>

At 10:31 17/02/2009, Carter Cheng wrote:
 >
 >Thanks Jim. What I am doing in the mean time is just replicating 
my
 >entire tree grammar for each of the two passes. I suspect given 
my
 >file sizes are not large this should not be a problem.

I haven't tested this, but I believe you can manually construct an 
"ignore" rule thusly (until the new . changes come through):

ignore
   : .
   | ^(. ignore*)
   ;


From ralf.duesedau at imc-berlin.de  Tue Feb 17 03:06:29 2009
From: ralf.duesedau at imc-berlin.de (=?ISO-8859-15?Q?Ralf_D=FCsedau?=)
Date: Tue, 17 Feb 2009 12:06:29 +0100
Subject: [antlr-interest] Editor using ANTLR-Parser
Message-ID: <499A9A35.5010409@imc-berlin.de>

Hi there,

i'm new to ANTLR and my knowledge about it is not large. Is there a 
generic editor or IDE, which can use the parser generated bei ANTLR for 
debugging and compiling/interpreting my selfdefined language? If there 
such a editor or IDE, can it use the ANTLR- language definition for 
highlighting and code completion?

Thanks in advance!

regards
Ralf

From gabriel.petrovay at 28msec.com  Tue Feb 17 03:14:18 2009
From: gabriel.petrovay at 28msec.com (Gabriel Petrovay)
Date: Tue, 17 Feb 2009 12:14:18 +0100
Subject: [antlr-interest] How do you build this AST?
Message-ID: <dc6ce1e40902170314v3ad2c444i8de4d36a00adb060@mail.gmail.com>

Hi all,

(In this e-mail I talk about result obtained with ANTLR 3.1.1)

Below you have a simple sample grammar. I what to get from this
grammar an AST as illustrates below for the following input:
"example child leaf other child leaf child leaf done".

I am not asking you to check is the grammar is correct. Just give me
please an example on how should I write this in antlr3 grammar in
order to get a tree like below. Or give me an example for one rule and
I'll find the way for the others.

It seems that the output=AST option is not enough. Now I only get a
CommonTree node having 9 CommonTree children each representing one of
the lexer tokens.

(I have found a solution though, but there is a problem with it. See
bottom of email. Is this the way to do it?)

//---------------------------------
grammar example ;
options {
output=AST;
}

// parser rules
root      :    subroot1? (subroot2 | subroot3) ;
subroot1  :    EXAMPLE ;
subroot2  :    child1 child2 ;
child1    :    CHILD subchild ;
child2    :    OTHER CHILD subchild ;
subchild  :    LEAF ;
subroot3  :    child1 DONE;

// lexer rules
EXAMPLE   :    'example' ;
LEAF      :    'leaf' ;
CHILD     :    'child' ;
OTHER     :    'OTHER' ;
DONE      :    'done' ;
WS        :    ''\t' | '\s' | '\r' | '\n' {$channel=HIDDEN} ;
//---------------------------------

!USE MONOSPACE FONTS TO PROPERLY SEE THE BELOW TREE!
       ------ root ------
     /         |          \
    /          |           \
subroot1    subroot2      subroot3
           /      \          |
          /        \       child1
      child1      child2
         |          |
     subchild    subchild


Thank you!
(very much)



Possible solution? (Problem described after the grammar.)

//---------------------------------
grammar example ;
options {
output=AST;
}

// imaginary tokens (nodes)
tokens {
Root;
Subroot1;
Subroot2;
Subroot3;
Child1;
Child2;
Subchild;
}

// parser rules
root      :    subroot1? (subroot2 | subroot3) -> ^(Root subroot1?
subroot2? subroot3?);
subroot1  :    EXAMPLE;
subroot2  :    child1 child2 -> ^(Subroot2 child1 child2);
child1    :    CHILD subchild -> ^(Child1 subchild);
child2    :    OTHER CHILD subchild -> ^(Child2 subchild);
subchild  :    LEAF;
subroot3  :    child1 DONE -> ^(Subroot3 child1);

// lexer rules
EXAMPLE   :    'example' ;
LEAF      :    'leaf' ;
CHILD     :    'child' ;
OTHER     :    'OTHER' ;
DONE      :    'done' ;
WS        :    ''\t' | '\s' | '\r' | '\n' {$channel=HIDDEN} ;
//---------------------------------


The problem with the above grammar apeares with the following example.
Assume that 'root' has the following rule:
root      :    subroot1? (subroot2 | subroot3)* -> ??? how to
transform this ??? ;
This rule allows any sequence of subroot2's and subroot3's.

The problem with this transformation is that the '|' operator is not
allowed in the rule transformation. The following is illegal:
root      :    subroot1? (subroot2 | subroot3)* -> subroot1? (subroot2
| subroot3)* ;

If I write it like:
root      :    subroot1? (subroot2 | subroot3)* -> subroot1? subroot2*
subroot3* ;
then I loose the ordering.

How can I solve this? Am I on a wrong track?

-- 
MSc Gabriel Petrovay
MCSA, MCDBA, MCAD
Mobile: +41(0)787978034

From indhu.b at s7software.com  Tue Feb 17 03:29:11 2009
From: indhu.b at s7software.com (Indhu Bharathi)
Date: Tue, 17 Feb 2009 16:59:11 +0530 (IST)
Subject: [antlr-interest] Editor using ANTLR-Parser
In-Reply-To: <499A9A35.5010409@imc-berlin.de>
Message-ID: <25860284.2201234870151481.JavaMail.root@star>


ANTLRWorks - http://www.antlr.org/works/index.html

----- Original Message -----
From: Ralf D?sedau <ralf.duesedau at imc-berlin.de>
To: antlr-interest at antlr.org
Sent: Tuesday, February 17, 2009 4:36:29 PM GMT+0530 Asia/Calcutta
Subject: [antlr-interest] Editor using ANTLR-Parser

Hi there,

i'm new to ANTLR and my knowledge about it is not large. Is there a 
generic editor or IDE, which can use the parser generated bei ANTLR for 
debugging and compiling/interpreting my selfdefined language? If there 
such a editor or IDE, can it use the ANTLR- language definition for 
highlighting and code completion?

Thanks in advance!

regards
Ralf

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From indhu.b at s7software.com  Tue Feb 17 03:32:47 2009
From: indhu.b at s7software.com (Indhu Bharathi)
Date: Tue, 17 Feb 2009 17:02:47 +0530 (IST)
Subject: [antlr-interest] Editor using ANTLR-Parser
In-Reply-To: <25860284.2201234870151481.JavaMail.root@star>
Message-ID: <16157254.2231234870367256.JavaMail.root@star>


oops.. Didn't read the mail carefully. There was a discussion previously on this. These links might help:

http://www.antlr.org/pipermail/antlr-interest/2009-January/032496.html

http://www.antlr.org/pipermail/antlr-interest/2009-January/032492.html

- Indhu

----- Original Message -----
From: Indhu Bharathi <indhu.b at s7software.com>
To: Ralf D?sedau <ralf.duesedau at imc-berlin.de>
Cc: antlr-interest at antlr.org
Sent: Tuesday, February 17, 2009 4:59:11 PM GMT+0530 Asia/Calcutta
Subject: Re: [antlr-interest] Editor using ANTLR-Parser


ANTLRWorks - http://www.antlr.org/works/index.html

----- Original Message -----
From: Ralf D?sedau <ralf.duesedau at imc-berlin.de>
To: antlr-interest at antlr.org
Sent: Tuesday, February 17, 2009 4:36:29 PM GMT+0530 Asia/Calcutta
Subject: [antlr-interest] Editor using ANTLR-Parser

Hi there,

i'm new to ANTLR and my knowledge about it is not large. Is there a 
generic editor or IDE, which can use the parser generated bei ANTLR for 
debugging and compiling/interpreting my selfdefined language? If there 
such a editor or IDE, can it use the ANTLR- language definition for 
highlighting and code completion?

Thanks in advance!

regards
Ralf

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From JALuber at gmx.de  Tue Feb 17 03:46:17 2009
From: JALuber at gmx.de (Johannes Luber)
Date: Tue, 17 Feb 2009 12:46:17 +0100
Subject: [antlr-interest] How do you build this AST?
In-Reply-To: <dc6ce1e40902170314v3ad2c444i8de4d36a00adb060@mail.gmail.com>
References: <dc6ce1e40902170314v3ad2c444i8de4d36a00adb060@mail.gmail.com>
Message-ID: <20090217114617.326740@gmx.net>

> Hi all,
> 
> (In this e-mail I talk about result obtained with ANTLR 3.1.1)
> 
> Below you have a simple sample grammar. I what to get from this
> grammar an AST as illustrates below for the following input:
> "example child leaf other child leaf child leaf done".
> 
> I am not asking you to check is the grammar is correct. Just give me
> please an example on how should I write this in antlr3 grammar in
> order to get a tree like below. Or give me an example for one rule and
> I'll find the way for the others.
> 
> It seems that the output=AST option is not enough. Now I only get a
> CommonTree node having 9 CommonTree children each representing one of
> the lexer tokens.
> 
> (I have found a solution though, but there is a problem with it. See
> bottom of email. Is this the way to do it?)
> 
> //---------------------------------
> grammar example ;
> options {
> output=AST;
> }
> 
> // parser rules
> root      :    subroot1? (subroot2 | subroot3) ;
> subroot1  :    EXAMPLE ;
> subroot2  :    child1 child2 ;
> child1    :    CHILD subchild ;
> child2    :    OTHER CHILD subchild ;
> subchild  :    LEAF ;
> subroot3  :    child1 DONE;
> 
> // lexer rules
> EXAMPLE   :    'example' ;
> LEAF      :    'leaf' ;
> CHILD     :    'child' ;
> OTHER     :    'OTHER' ;
> DONE      :    'done' ;
> WS        :    ''\t' | '\s' | '\r' | '\n' {$channel=HIDDEN} ;
> //---------------------------------
> 
> !USE MONOSPACE FONTS TO PROPERLY SEE THE BELOW TREE!
>        ------ root ------
>      /         |          \
>     /          |           \
> subroot1    subroot2      subroot3
>            /      \          |
>           /        \       child1
>       child1      child2
>          |          |
>      subchild    subchild
> 
> 
> Thank you!
> (very much)
> 
> 
> 
> Possible solution? (Problem described after the grammar.)
> 
> //---------------------------------
> grammar example ;
> options {
> output=AST;
> }
> 
> // imaginary tokens (nodes)
> tokens {
> Root;
> Subroot1;
> Subroot2;
> Subroot3;
> Child1;
> Child2;
> Subchild;
> }
> 
> // parser rules
> root      :    subroot1? (subroot2 | subroot3) -> ^(Root subroot1?
> subroot2? subroot3?);
> subroot1  :    EXAMPLE;
> subroot2  :    child1 child2 -> ^(Subroot2 child1 child2);
> child1    :    CHILD subchild -> ^(Child1 subchild);
> child2    :    OTHER CHILD subchild -> ^(Child2 subchild);
> subchild  :    LEAF;
> subroot3  :    child1 DONE -> ^(Subroot3 child1);
> 
> // lexer rules
> EXAMPLE   :    'example' ;
> LEAF      :    'leaf' ;
> CHILD     :    'child' ;
> OTHER     :    'OTHER' ;
> DONE      :    'done' ;
> WS        :    ''\t' | '\s' | '\r' | '\n' {$channel=HIDDEN} ;
> //---------------------------------
> 
> 
> The problem with the above grammar apeares with the following example.
> Assume that 'root' has the following rule:
> root      :    subroot1? (subroot2 | subroot3)* -> ??? how to
> transform this ??? ;
> This rule allows any sequence of subroot2's and subroot3's.
> 
> The problem with this transformation is that the '|' operator is not
> allowed in the rule transformation. The following is illegal:
> root      :    subroot1? (subroot2 | subroot3)* -> subroot1? (subroot2
> | subroot3)* ;
> 
> If I write it like:
> root      :    subroot1? (subroot2 | subroot3)* -> subroot1? subroot2*
> subroot3* ;
> then I loose the ordering.
> 
> How can I solve this? Am I on a wrong track?

Try

root      :    subroot1? subroots* -> subroot1? subroots* ;

subroots : subroot2 | subroot3;

Johannes
-- 
Jetzt 1 Monat kostenlos! GMX FreeDSL - Telefonanschluss + DSL 
f?r nur 17,95 Euro/mtl.!* http://dsl.gmx.de/?ac=OM.AD.PD003K11308T4569a

From ralf.duesedau at imc-berlin.de  Tue Feb 17 03:53:40 2009
From: ralf.duesedau at imc-berlin.de (=?UTF-8?B?UmFsZiBEw7xzZWRhdQ==?=)
Date: Tue, 17 Feb 2009 12:53:40 +0100
Subject: [antlr-interest] Editor using ANTLR-Parser
In-Reply-To: <25860284.2201234870151481.JavaMail.root@star>
References: <25860284.2201234870151481.JavaMail.root@star>
Message-ID: <499AA544.2070209@imc-berlin.de>

Sorry for another stupid question,but

is ANTLRWorks not made to write and debug grammars and build a parser?

What i'm locking for is a Editor which just can take the grammar file 
and the parser and let me write and debug the language wich is defined 
by the grammar.

thx

Ralf

Indhu Bharathi schrieb:
> ANTLRWorks - http://www.antlr.org/works/index.html
> 
> ----- Original Message -----
> From: Ralf D?sedau <ralf.duesedau at imc-berlin.de>
> To: antlr-interest at antlr.org
> Sent: Tuesday, February 17, 2009 4:36:29 PM GMT+0530 Asia/Calcutta
> Subject: [antlr-interest] Editor using ANTLR-Parser
> 
> Hi there,
> 
> i'm new to ANTLR and my knowledge about it is not large. Is there a 
> generic editor or IDE, which can use the parser generated bei ANTLR for 
> debugging and compiling/interpreting my selfdefined language? If there 
> such a editor or IDE, can it use the ANTLR- language definition for 
> highlighting and code completion?
> 
> Thanks in advance!
> 
> regards
> Ralf
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
> 
> 

From granvillebarnett at googlemail.com  Tue Feb 17 04:17:54 2009
From: granvillebarnett at googlemail.com (Granville Barnett)
Date: Tue, 17 Feb 2009 22:17:54 +1000
Subject: [antlr-interest] Editor using ANTLR-Parser
In-Reply-To: <499AA544.2070209@imc-berlin.de>
References: <25860284.2201234870151481.JavaMail.root@star>
	<499AA544.2070209@imc-berlin.de>
Message-ID: <80a70730902170417k5cfdba42tb94674d91a45e61b@mail.gmail.com>

ANTLR works can do that, I believe only for Java though unless its changed
since I used it several months ago.

On Tue, Feb 17, 2009 at 9:53 PM, Ralf D?sedau
<ralf.duesedau at imc-berlin.de>wrote:

> Sorry for another stupid question,but
>
> is ANTLRWorks not made to write and debug grammars and build a parser?
>
> What i'm locking for is a Editor which just can take the grammar file
> and the parser and let me write and debug the language wich is defined
> by the grammar.
>
> thx
>
> Ralf
>
> Indhu Bharathi schrieb:
> > ANTLRWorks - http://www.antlr.org/works/index.html
> >
> > ----- Original Message -----
> > From: Ralf D?sedau <ralf.duesedau at imc-berlin.de>
> > To: antlr-interest at antlr.org
> > Sent: Tuesday, February 17, 2009 4:36:29 PM GMT+0530 Asia/Calcutta
> > Subject: [antlr-interest] Editor using ANTLR-Parser
> >
> > Hi there,
> >
> > i'm new to ANTLR and my knowledge about it is not large. Is there a
> > generic editor or IDE, which can use the parser generated bei ANTLR for
> > debugging and compiling/interpreting my selfdefined language? If there
> > such a editor or IDE, can it use the ANTLR- language definition for
> > highlighting and code completion?
> >
> > Thanks in advance!
> >
> > regards
> > Ralf
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >
> >
> >
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090217/7e8dd7fc/attachment.html 

From thomas.woelfle at interactive-objects.com  Tue Feb 17 05:38:25 2009
From: thomas.woelfle at interactive-objects.com (Thomas Woelfle)
Date: Tue, 17 Feb 2009 14:38:25 +0100
Subject: [antlr-interest] Problem when parsing numerics
Message-ID: <499ABDD1.7030805@interactive-objects.com>

Hi,

I've been running into a strange problem using ANTLR 3.1.1. I don't know 
wether it is a bug in my grammar or a bug in ANTLR.
In the language that has to be parsed following lines are legal strings:

1.
1.5.

There is a rule where a numeric is followed by a dot.

The problem with my grammar can be reduced to following sample grammar:


grammar test;

options {language=Java;}

foo     :     NUMERIC '.';

NUMERIC :    '0'..'9'+ ('.' '0'..'9'+)?;


When using this grammar the string '1.5.' can be parsed successfully but 
parsing the string '1.' fails with a MismatchedTokenException. Has 
anybody an idea what is going wrong with my grammar?

Any help appreciated.

Regards,
Thomas

-- 
Interactive Objects Software GmbH
Basler Strasse 61
79100 Freiburg, Germany

Phone:  +49 761 400 73 0
mailto:thomas.woelfle at interactive-objects.com


------------------------------------------------------------------------

Interactive Objects' Legacy Modernization Solutions 

Get Your Applications SOA-Ready!

See http://www.interactive-objects.com/ for more information.

------------------------------------------------------------------------


Interactive Objects Software GmbH | Freiburg | Gesch?ftsf?hrer: Alberto Perandones, Andrea Hemprich
| AG Frbg. HRB 5810 | USt-ID: DE 197983057


From sharwell at pixelminegames.com  Tue Feb 17 06:04:37 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Tue, 17 Feb 2009 08:04:37 -0600
Subject: [antlr-interest] Editor using ANTLR-Parser
In-Reply-To: <16157254.2231234870367256.JavaMail.root@star>
References: <25860284.2201234870151481.JavaMail.root@star>
	<16157254.2231234870367256.JavaMail.root@star>
Message-ID: <86403CA0939415448BCCB83855EFE09AA6798B@Bloodymary.ironwillgames.com>

Yep, this is exactly what I use ANTLR for. If you choose to use Visual Studio as your framework IDE, then feel free to ask specific questions here or on the Visual Studio Extensibility (VSX) forum. If you ask ANTLR-related questions over at VSX, you can drop me an email separately to let me know to take a look at it:
http://social.msdn.microsoft.com/forums/en-US/vsx/threads/

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Indhu Bharathi
Sent: Tuesday, February 17, 2009 5:33 AM
To: antlr-interest at antlr.org; Ralf D?sedau
Subject: Re: [antlr-interest] Editor using ANTLR-Parser


oops.. Didn't read the mail carefully. There was a discussion previously on this. These links might help:

http://www.antlr.org/pipermail/antlr-interest/2009-January/032496.html

http://www.antlr.org/pipermail/antlr-interest/2009-January/032492.html

- Indhu

----- Original Message -----
From: Indhu Bharathi <indhu.b at s7software.com>
To: Ralf D?sedau <ralf.duesedau at imc-berlin.de>
Cc: antlr-interest at antlr.org
Sent: Tuesday, February 17, 2009 4:59:11 PM GMT+0530 Asia/Calcutta
Subject: Re: [antlr-interest] Editor using ANTLR-Parser


ANTLRWorks - http://www.antlr.org/works/index.html

----- Original Message -----
From: Ralf D?sedau <ralf.duesedau at imc-berlin.de>
To: antlr-interest at antlr.org
Sent: Tuesday, February 17, 2009 4:36:29 PM GMT+0530 Asia/Calcutta
Subject: [antlr-interest] Editor using ANTLR-Parser

Hi there,

i'm new to ANTLR and my knowledge about it is not large. Is there a 
generic editor or IDE, which can use the parser generated bei ANTLR for 
debugging and compiling/interpreting my selfdefined language? If there 
such a editor or IDE, can it use the ANTLR- language definition for 
highlighting and code completion?

Thanks in advance!

regards
Ralf

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From fatih at diyezon.com  Tue Feb 17 06:07:33 2009
From: fatih at diyezon.com (Fatih Tolga Ata)
Date: Tue, 17 Feb 2009 16:07:33 +0200
Subject: [antlr-interest] Recursive parenthesises in the tree.
In-Reply-To: <499A5C99.8060701@gmx.de>
References: <49998680.3050108@diyezon.com> <499A5C99.8060701@gmx.de>
Message-ID: <499AC4A5.8090105@diyezon.com>

Johannes Luber wrote:
> PAREXPR is a imaginary token, adding semantics to otherwise
> indiscriminable situations or just some additional clarity like in this
> case. The "-> ^()" is a tree rewrite operator, saying that the created
> AST should look differently than the original input. I suppose your
> problem with the tree walker is that it doesn't recognize all
> possibilities created by the parser. Unless the missing alternatives are
> somehow covered in the Identifier and literal rules, try
I appreciated for this information.
> primaryExpression
>     : THIS
>     | Identifier
>     | literal
>     | arrayLiteral
>     | objectLiteral
>     | ^( PAREXPR expression )
>     ;
I'm not sure, but I think, it worked! Thanks a lot. But I had to add 
"backtrack=true" options because of LL(*) conflicts. I said "I think, it 
worked", because I don't know exactly that it worked. The treewalker 
didn't give me an error, but I didn't look at the tree yet that it is 
correct or not. Now I try to learn using the parser and the treewalker.
> In general, look at the documentation about ASTs to learn more about them.
>
> Johannes
I'm studying now how the parser and tree walker works. After that I want 
to learn ANTLR grammar and the other things from the book (I haven't buy 
it, but I'll)

Thanks for helping. This gives me more desire to learn compilers and antlr.

Fatih Tolga Ata

From sharwell at pixelminegames.com  Tue Feb 17 06:17:50 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Tue, 17 Feb 2009 08:17:50 -0600
Subject: [antlr-interest] How do you build this AST?
In-Reply-To: <20090217114617.326740@gmx.net>
References: <dc6ce1e40902170314v3ad2c444i8de4d36a00adb060@mail.gmail.com>
	<20090217114617.326740@gmx.net>
Message-ID: <86403CA0939415448BCCB83855EFE09AA6798C@Bloodymary.ironwillgames.com>

If you have the option output=AST specified, then your rewrite rules are the default behavior. Unnecessary rewrites will incur a significant performance penalty since they are not optimized. The penalty is masked if the grammar is not properly left-factored, but it should still be avoided. The ^,! Notation has better performance than rewrites as well. IE, this:

root     :    subroot1? subroots* -> subroot1? subroots* ;
subroots : subroot2 | subroot3;

Is the same as both this:

root     : subroot1? subroots*;
subroots : subroot2 | subroot3;

And this:

root : subroot1? (subroot2 | subroot3)*;

If you absolutely must have the Root node in your output tree, use this:

root : subroot1? (subroots+=subroot2 | subroots+=subroot3)* -> ^(Root subroot1? subroots*);

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Johannes Luber
Sent: Tuesday, February 17, 2009 5:46 AM
To: Gabriel Petrovay; antlr-interest at antlr.org
Subject: Re: [antlr-interest] How do you build this AST?

> Hi all,
> 
> (In this e-mail I talk about result obtained with ANTLR 3.1.1)
> 
> Below you have a simple sample grammar. I what to get from this
> grammar an AST as illustrates below for the following input:
> "example child leaf other child leaf child leaf done".
> 
> I am not asking you to check is the grammar is correct. Just give me
> please an example on how should I write this in antlr3 grammar in
> order to get a tree like below. Or give me an example for one rule and
> I'll find the way for the others.
> 
> It seems that the output=AST option is not enough. Now I only get a
> CommonTree node having 9 CommonTree children each representing one of
> the lexer tokens.
> 
> (I have found a solution though, but there is a problem with it. See
> bottom of email. Is this the way to do it?)
> 
> //---------------------------------
> grammar example ;
> options {
> output=AST;
> }
> 
> // parser rules
> root      :    subroot1? (subroot2 | subroot3) ;
> subroot1  :    EXAMPLE ;
> subroot2  :    child1 child2 ;
> child1    :    CHILD subchild ;
> child2    :    OTHER CHILD subchild ;
> subchild  :    LEAF ;
> subroot3  :    child1 DONE;
> 
> // lexer rules
> EXAMPLE   :    'example' ;
> LEAF      :    'leaf' ;
> CHILD     :    'child' ;
> OTHER     :    'OTHER' ;
> DONE      :    'done' ;
> WS        :    ''\t' | '\s' | '\r' | '\n' {$channel=HIDDEN} ;
> //---------------------------------
> 
> !USE MONOSPACE FONTS TO PROPERLY SEE THE BELOW TREE!
>        ------ root ------
>      /         |          \
>     /          |           \
> subroot1    subroot2      subroot3
>            /      \          |
>           /        \       child1
>       child1      child2
>          |          |
>      subchild    subchild
> 
> 
> Thank you!
> (very much)
> 
> 
> 
> Possible solution? (Problem described after the grammar.)
> 
> //---------------------------------
> grammar example ;
> options {
> output=AST;
> }
> 
> // imaginary tokens (nodes)
> tokens {
> Root;
> Subroot1;
> Subroot2;
> Subroot3;
> Child1;
> Child2;
> Subchild;
> }
> 
> // parser rules
> root      :    subroot1? (subroot2 | subroot3) -> ^(Root subroot1?
> subroot2? subroot3?);
> subroot1  :    EXAMPLE;
> subroot2  :    child1 child2 -> ^(Subroot2 child1 child2);
> child1    :    CHILD subchild -> ^(Child1 subchild);
> child2    :    OTHER CHILD subchild -> ^(Child2 subchild);
> subchild  :    LEAF;
> subroot3  :    child1 DONE -> ^(Subroot3 child1);
> 
> // lexer rules
> EXAMPLE   :    'example' ;
> LEAF      :    'leaf' ;
> CHILD     :    'child' ;
> OTHER     :    'OTHER' ;
> DONE      :    'done' ;
> WS        :    ''\t' | '\s' | '\r' | '\n' {$channel=HIDDEN} ;
> //---------------------------------
> 
> 
> The problem with the above grammar apeares with the following example.
> Assume that 'root' has the following rule:
> root      :    subroot1? (subroot2 | subroot3)* -> ??? how to
> transform this ??? ;
> This rule allows any sequence of subroot2's and subroot3's.
> 
> The problem with this transformation is that the '|' operator is not
> allowed in the rule transformation. The following is illegal:
> root      :    subroot1? (subroot2 | subroot3)* -> subroot1? (subroot2
> | subroot3)* ;
> 
> If I write it like:
> root      :    subroot1? (subroot2 | subroot3)* -> subroot1? subroot2*
> subroot3* ;
> then I loose the ordering.
> 
> How can I solve this? Am I on a wrong track?

Try

root      :    subroot1? subroots* -> subroot1? subroots* ;

subroots : subroot2 | subroot3;

Johannes
-- 
Jetzt 1 Monat kostenlos! GMX FreeDSL - Telefonanschluss + DSL 
f?r nur 17,95 Euro/mtl.!* http://dsl.gmx.de/?ac=OM.AD.PD003K11308T4569a

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From paul.bouche at nsn.com  Tue Feb 17 06:25:51 2009
From: paul.bouche at nsn.com (=?ISO-8859-15?Q?=22Paul_Bouch=E9_=28NSN=29=22?=)
Date: Tue, 17 Feb 2009 15:25:51 +0100
Subject: [antlr-interest] lexer Code too large
Message-ID: <499AC8EF.80908@nsn.com>

Hi,

I have a rather complex lexer and I arrived at a state where I cannot 
reduce the rules anymore. When I try to compile the lexer I get the 
following exception:
StringPropsLexer.java:3444: code too large
public int specialStateTransition(int s, IntStream _input) throws 
NoViableAltException {
^
1 error

I added backward compatibility for unquoted strings which complicates 
the lexer obviously. Is there a way I can avoid this problem? The rule 
in questions this:
USTRING : /* backward compatibility... added, should support all 
simulation props semantics
           * the other tokens are listed here to ensure that the last 
match-everything alternative is disabled for
           * tokens that should be matched as they are if they are by 
themselfes, i.e.
           * i = 3 is still matched as a number and not as an ustring
           * k = ::1.2.3.4 should still be matched as an ip not as a 
ustring etc. */
     {foundFirstEquals}?=>
     ( NUMERIC ~('\.' | DIGIT_ | DL_ | '\n' | CB_ | CL_ | ')') USTRINGEND_
     | USTRINGBEGIN_ USTRINGEND_
     )
     { foundFirstEquals = false; }
    ;

I am using ANTLR 3.11 / ANTLRWorks 1.2.2.

Thanks,
Paul

-- 
Paul Bouch?
Voice: +49 30 590080-1284
 
Nokia Siemens Networks GmbH & Co. KG, An den Treptowers 1, 12435 Berlin, Germany
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRA 88537
WEEE-Reg.-Nr.: DE 52984304

Pers?nlich haftende Gesellschafterin / General Partner: Nokia Siemens Networks Management GmbH
Gesch?ftsleitung / Board of Directors: Lydia Sommer, Olaf Horsthemke
Vorsitzender des Aufsichtsrats / Chairman of supervisory board: Lauri Kivinen
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRB 163416


From ralf.duesedau at imc-berlin.de  Tue Feb 17 06:48:35 2009
From: ralf.duesedau at imc-berlin.de (=?ISO-8859-15?Q?Ralf_D=FCsedau?=)
Date: Tue, 17 Feb 2009 15:48:35 +0100
Subject: [antlr-interest] Editor using ANTLR-Parser #2
Message-ID: <499ACE43.7000509@imc-berlin.de>

Thanks for responses of my first request.

unfortunately there was not the solution for my problem (cause of a lag 
of discribing my problem).

What i look for:

I need an Editor or IDE, which I can start out of my own close source 
software. This IDE or Editor should use ANTLR parser, which parse c#,VB, 
python or my own script langauge. And the execution of this script, have 
to run without any environment (.Net or JaveVM).

(unfortunately Visual Studio and Visual Studio Tool for Applications are 
not for free :) )

I hope somebody have suggestion for me.

Thanks in advance

Ralf

IMC


From lars.vonwedel at bayertechnology.com  Tue Feb 17 07:03:08 2009
From: lars.vonwedel at bayertechnology.com (lars.vonwedel at bayertechnology.com)
Date: Tue, 17 Feb 2009 16:03:08 +0100
Subject: [antlr-interest] =?iso-8859-1?q?Lars_von_Wedel_ist_au=DFer_Haus?=
	=?iso-8859-1?q?=2E?=
Message-ID: <OF399BB7D2.3F68D1A6-ONC1257560.0052AF89-C1257560.0052AF89@bayer.de>


Ich werde ab  14.02.2009 nicht im B?ro sein. Ich kehre zur?ck am  25.02.2009.

Ich werde Ihre Nachricht nach meiner R?ckkehr beantworten.


From jimi at temporal-wave.com  Tue Feb 17 09:25:49 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 17 Feb 2009 09:25:49 -0800
Subject: [antlr-interest] Problem when parsing numerics
In-Reply-To: <499ABDD1.7030805@interactive-objects.com>
References: <499ABDD1.7030805@interactive-objects.com>
Message-ID: <499AF31D.8090802@temporal-wave.com>

Thomas Woelfle wrote:
> Hi,
>
> I've been running into a strange problem using ANTLR 3.1.1. I don't know 
> wether it is a bug in my grammar or a bug in ANTLR.
> In the language that has to be parsed following lines are legal strings:
>
> 1.
> 1.5.
>
> There is a rule where a numeric is followed by a dot.
>   
Please look in the FAQ/examples:

http://www.antlr.org/wiki/display/ANTLR3/Lexer+grammar+for+floating+point%2C+dot%2C+range%2C+time+specs

You should be able to simplify the grammar here to just what you need.

Jim

From jaluber at gmx.de  Tue Feb 17 09:52:08 2009
From: jaluber at gmx.de (Johannes Luber)
Date: Tue, 17 Feb 2009 18:52:08 +0100
Subject: [antlr-interest] Recursive parenthesises in the tree.
In-Reply-To: <499AC4A5.8090105@diyezon.com>
References: <49998680.3050108@diyezon.com> <499A5C99.8060701@gmx.de>
	<499AC4A5.8090105@diyezon.com>
Message-ID: <499AF948.2040309@gmx.de>

Fatih Tolga Ata schrieb:
> Johannes Luber wrote:
>> PAREXPR is a imaginary token, adding semantics to otherwise
>> indiscriminable situations or just some additional clarity like in this
>> case. The "-> ^()" is a tree rewrite operator, saying that the created
>> AST should look differently than the original input. I suppose your
>> problem with the tree walker is that it doesn't recognize all
>> possibilities created by the parser. Unless the missing alternatives are
>> somehow covered in the Identifier and literal rules, try
> I appreciated for this information.
>> primaryExpression
>>     : THIS
>>     | Identifier
>>     | literal
>>     | arrayLiteral
>>     | objectLiteral
>>     | ^( PAREXPR expression )
>>     ;
> I'm not sure, but I think, it worked! Thanks a lot. But I had to add
> "backtrack=true" options because of LL(*) conflicts. I said "I think, it
> worked", because I don't know exactly that it worked.

Look at
<http://www.antlr.org/wiki/display/ANTLR3/How+to+remove+global+backtracking+from+your+grammar>
for some tips to deal with this.

Johannes

> The treewalker
> didn't give me an error, but I didn't look at the tree yet that it is
> correct or not. Now I try to learn using the parser and the treewalker.
>> In general, look at the documentation about ASTs to learn more about
>> them.
>>
>> Johannes
> I'm studying now how the parser and tree walker works. After that I want
> to learn ANTLR grammar and the other things from the book (I haven't buy
> it, but I'll)
> 
> Thanks for helping. This gives me more desire to learn compilers and antlr.
> 
> Fatih Tolga Ata
> 


From sharwell at pixelminegames.com  Tue Feb 17 10:02:14 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Tue, 17 Feb 2009 12:02:14 -0600
Subject: [antlr-interest] Editor using ANTLR-Parser #2
In-Reply-To: <499ACE43.7000509@imc-berlin.de>
References: <499ACE43.7000509@imc-berlin.de>
Message-ID: <86403CA0939415448BCCB83855EFE09AA67992@Bloodymary.ironwillgames.com>

Visual Studio Shell 2008 is free for commercial use. That's what we use.

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Ralf D?sedau
Sent: Tuesday, February 17, 2009 8:49 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Editor using ANTLR-Parser #2

Thanks for responses of my first request.

unfortunately there was not the solution for my problem (cause of a lag 
of discribing my problem).

What i look for:

I need an Editor or IDE, which I can start out of my own close source 
software. This IDE or Editor should use ANTLR parser, which parse c#,VB, 
python or my own script langauge. And the execution of this script, have 
to run without any environment (.Net or JaveVM).

(unfortunately Visual Studio and Visual Studio Tool for Applications are 
not for free :) )

I hope somebody have suggestion for me.

Thanks in advance

Ralf

IMC


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From andreas.meyer at smartshift.de  Tue Feb 17 10:34:46 2009
From: andreas.meyer at smartshift.de (Andreas Meyer)
Date: Tue, 17 Feb 2009 19:34:46 +0100
Subject: [antlr-interest] Gated semantic predicates without lookahead?
Message-ID: <499B0346.1070906@smartshift.de>

Hi!

Is it possible to have a gated semantic predicate, that somehow "hides" 
the tokens behind it, so that the prediction _only_ uses the predicate? 
Currently, gated semantic predicates take into account _both_ the input 
that follows _and_ the predicate:

int LA = input.LA(...);
if( LA == .. _and_ semanticPredicate() ) { alternative = ... }

What I would like to be generated:
if( semanticPredicate() ) { alternative = ... }

Let's say I have 600 keywords that I want to recognize as something like 
an identifier, but in other places, I really want different tokens. 
Currently, I have 600 rules that do some table lookup, so that they 
consume an identifier and return one of the 600 possible artificial 
keyword tokens. But still, this makes the stream of tokens look like an 
endless stream of identifiers to the parser, and I have a vague feeling 
that this might be not the best possible solution.

Best Regards,
Andreas Meyer

From parrt at cs.usfca.edu  Tue Feb 17 10:55:02 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 17 Feb 2009 10:55:02 -0800
Subject: [antlr-interest] Gated semantic predicates without lookahead?
In-Reply-To: <499B0346.1070906@smartshift.de>
References: <499B0346.1070906@smartshift.de>
Message-ID: <375FEFCA-0EDA-4775-8AB5-02A6BB1C07B1@cs.usfca.edu>

hi, you can set k=1 but it will still check at least one symbol of  
lookahead. I don't believe there's a way to totally turn off look ahead.
Ter
On Feb 17, 2009, at 10:34 AM, Andreas Meyer wrote:

> Hi!
>
> Is it possible to have a gated semantic predicate, that somehow  
> "hides"
> the tokens behind it, so that the prediction _only_ uses the  
> predicate?
> Currently, gated semantic predicates take into account _both_ the  
> input
> that follows _and_ the predicate:
>
> int LA = input.LA(...);
> if( LA == .. _and_ semanticPredicate() ) { alternative = ... }
>
> What I would like to be generated:
> if( semanticPredicate() ) { alternative = ... }
>
> Let's say I have 600 keywords that I want to recognize as something  
> like
> an identifier, but in other places, I really want different tokens.
> Currently, I have 600 rules that do some table lookup, so that they
> consume an identifier and return one of the 600 possible artificial
> keyword tokens. But still, this makes the stream of tokens look like  
> an
> endless stream of identifiers to the parser, and I have a vague  
> feeling
> that this might be not the best possible solution.
>
> Best Regards,
> Andreas Meyer
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From paul.bouche at nsn.com  Tue Feb 17 11:53:02 2009
From: paul.bouche at nsn.com (=?ISO-8859-15?Q?=22Paul_Bouch=E9_=28NSN=29=22?=)
Date: Tue, 17 Feb 2009 20:53:02 +0100
Subject: [antlr-interest] Lexer ambigiuoties
Message-ID: <499B159E.2060406@nsn.com>

Hi,

I have a lexer which already recognizes valid tokens of different types, 
e.g. an integer will generate an integer token, a quoted string a string 
token, an ip address and ipaddress token etc.
E.g:

property : key '=' value;
key : Name;
value : Integer | String | Ipaddress;
Name : ('a'..'z' | 'A'..'Z' | '0'..'9' | '_' | '-' | ':' | '%')+
Integer : ('+'|'-')? ('0'..'9')+;
Ipaddress : ('0'..'9')+ '.' ('0'..'9')+ '.' ('0'..'9')+ '.' ('0'..'9')+ 
// simplified, actual grammar is correct max of three digits
String :  ( '\'' ( STRING_ | '`' | '"' | '\\' '\'' )* '\''
         | '"' ( STRING_ | '`' | '\'' | '\\' '"' )* '"'
         );
WHITESPACE
       :
       ( ' ' | '\t' | '\n' )+
       { skip(); }
       ;

All works fine. Now I need to include unquoted strings with blanks. The 
problem is '0 ' (zero blank - without quotes of course). I cannot get 
the lexer to match this as an Integer as before. Basically I want a rule 
which says, if it is not something of the previous tokens, try if is an 
unquoted string. Of course an unquoted string may not have newlines.
Any hints on how to archive this?
I tried everything and ran several times into code too large exceptions 
because the actual grammar is much more complex (there are more unquoted 
values which are recognized by certain prefixed characters such as < 0x 
:: etc.).

Thanks a bunch!
Paul

-- 
Paul Bouch?
Voice: +49 30 590080-1284
 
Nokia Siemens Networks GmbH & Co. KG, An den Treptowers 1, 12435 Berlin, Germany
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRA 88537
WEEE-Reg.-Nr.: DE 52984304

Pers?nlich haftende Gesellschafterin / General Partner: Nokia Siemens Networks Management GmbH
Gesch?ftsleitung / Board of Directors: Lydia Sommer, Olaf Horsthemke
Vorsitzender des Aufsichtsrats / Chairman of supervisory board: Lauri Kivinen
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRB 163416


From sidharth.kuruvila at gmail.com  Tue Feb 17 12:28:13 2009
From: sidharth.kuruvila at gmail.com (Sidharth Kuruvila)
Date: Wed, 18 Feb 2009 01:58:13 +0530
Subject: [antlr-interest] Lexer ambigiuoties
In-Reply-To: <499B159E.2060406@nsn.com>
References: <499B159E.2060406@nsn.com>
Message-ID: <2ab2ed550902171228m23460ee9n750db59358b581c3@mail.gmail.com>

Try moveing the rule for Name bellow Ipaddress.

Regards,
Sidharth

On Wed, Feb 18, 2009 at 1:23 AM, "Paul Bouch? (NSN)" <paul.bouche at nsn.com>wrote:

> Hi,
>
> I have a lexer which already recognizes valid tokens of different types,
> e.g. an integer will generate an integer token, a quoted string a string
> token, an ip address and ipaddress token etc.
> E.g:
>
> property : key '=' value;
> key : Name;
> value : Integer | String | Ipaddress;
> Name : ('a'..'z' | 'A'..'Z' | '0'..'9' | '_' | '-' | ':' | '%')+
> Integer : ('+'|'-')? ('0'..'9')+;
> Ipaddress : ('0'..'9')+ '.' ('0'..'9')+ '.' ('0'..'9')+ '.' ('0'..'9')+
> // simplified, actual grammar is correct max of three digits
> String :  ( '\'' ( STRING_ | '`' | '"' | '\\' '\'' )* '\''
>         | '"' ( STRING_ | '`' | '\'' | '\\' '"' )* '"'
>         );
> WHITESPACE
>       :
>       ( ' ' | '\t' | '\n' )+
>       { skip(); }
>       ;
>
> All works fine. Now I need to include unquoted strings with blanks. The
> problem is '0 ' (zero blank - without quotes of course). I cannot get
> the lexer to match this as an Integer as before. Basically I want a rule
> which says, if it is not something of the previous tokens, try if is an
> unquoted string. Of course an unquoted string may not have newlines.
> Any hints on how to archive this?
> I tried everything and ran several times into code too large exceptions
> because the actual grammar is much more complex (there are more unquoted
> values which are recognized by certain prefixed characters such as < 0x
> :: etc.).
>
> Thanks a bunch!
> Paul
>
> --
> Paul Bouch?
> Voice: +49 30 590080-1284
>
> Nokia Siemens Networks GmbH & Co. KG, An den Treptowers 1, 12435 Berlin,
> Germany
> Sitz der Gesellschaft: M?nchen / Registered office: Munich
> Registergericht: M?nchen / Commercial registry: Munich, HRA 88537
> WEEE-Reg.-Nr.: DE 52984304
>
> Pers?nlich haftende Gesellschafterin / General Partner: Nokia Siemens
> Networks Management GmbH
> Gesch?ftsleitung / Board of Directors: Lydia Sommer, Olaf Horsthemke
> Vorsitzender des Aufsichtsrats / Chairman of supervisory board: Lauri
> Kivinen
> Sitz der Gesellschaft: M?nchen / Registered office: Munich
> Registergericht: M?nchen / Commercial registry: Munich, HRB 163416
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>



-- 
I am but a man.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090218/d688093e/attachment.html 

From paul.bouche at apertio.com  Tue Feb 17 15:51:20 2009
From: paul.bouche at apertio.com (=?ISO-8859-1?Q?Paul_Bouch=E9?=)
Date: Wed, 18 Feb 2009 00:51:20 +0100
Subject: [antlr-interest] Lexer ambigiuoties
In-Reply-To: <2ab2ed550902171228m23460ee9n750db59358b581c3@mail.gmail.com>
References: <499B159E.2060406@nsn.com>
	<2ab2ed550902171228m23460ee9n750db59358b581c3@mail.gmail.com>
Message-ID: <499B4D78.1070106@apertio.com>

Hi,

that does not work. The problem is when I define a rule for unquoted 
strings like: (where komma is a delimiter):

Ustring : Integer ' '+ ~('\n' | '{' | ',') |  Name ' '+ ~('\n' | '{' | 
',') | ~(' ' | '\n' | ',')+;

The lexer will match >>3<< as an integer but >>3 << causes an error 
whereas before this was ok. Of course how should the lexer know that in 
one case blank is supposed to be a whitespace and in another case is 
part of the value, i.e. >>3 a<<.

What I would like to write is:

Ustring : ~Name | ~Integer;

but this is not possible.

BR,
Paul

Sidharth Kuruvila schrieb:
> Try moveing the rule for Name bellow Ipaddress.
>
> Regards,
> Sidharth
>
> On Wed, Feb 18, 2009 at 1:23 AM, "Paul Bouch? (NSN)" 
> <paul.bouche at nsn.com <mailto:paul.bouche at nsn.com>> wrote:
>
>     Hi,
>
>     I have a lexer which already recognizes valid tokens of different
>     types,
>     e.g. an integer will generate an integer token, a quoted string a
>     string
>     token, an ip address and ipaddress token etc.
>     E.g:
>
>     property : key '=' value;
>     key : Name;
>     value : Integer | String | Ipaddress;
>     Name : ('a'..'z' | 'A'..'Z' | '0'..'9' | '_' | '-' | ':' | '%')+
>     Integer : ('+'|'-')? ('0'..'9')+;
>     Ipaddress : ('0'..'9')+ '.' ('0'..'9')+ '.' ('0'..'9')+ '.'
>     ('0'..'9')+
>     // simplified, actual grammar is correct max of three digits
>     String :  ( '\'' ( STRING_ | '`' | '"' | '\\' '\'' )* '\''
>             | '"' ( STRING_ | '`' | '\'' | '\\' '"' )* '"'
>             );
>     WHITESPACE
>           :
>           ( ' ' | '\t' | '\n' )+
>           { skip(); }
>           ;
>
>     All works fine. Now I need to include unquoted strings with
>     blanks. The
>     problem is '0 ' (zero blank - without quotes of course). I cannot get
>     the lexer to match this as an Integer as before. Basically I want
>     a rule
>     which says, if it is not something of the previous tokens, try if
>     is an
>     unquoted string. Of course an unquoted string may not have newlines.
>     Any hints on how to archive this?
>     I tried everything and ran several times into code too large
>     exceptions
>     because the actual grammar is much more complex (there are more
>     unquoted
>     values which are recognized by certain prefixed characters such as
>     < 0x
>     :: etc.).
>
>     Thanks a bunch!
>     Paul
>
>     --
>     Paul Bouch?
>     Voice: +49 30 590080-1284
>
>     Nokia Siemens Networks GmbH & Co. KG, An den Treptowers 1, 12435
>     Berlin, Germany
>     Sitz der Gesellschaft: M?nchen / Registered office: Munich
>     Registergericht: M?nchen / Commercial registry: Munich, HRA 88537
>     WEEE-Reg.-Nr.: DE 52984304
>
>     Pers?nlich haftende Gesellschafterin / General Partner: Nokia
>     Siemens Networks Management GmbH
>     Gesch?ftsleitung / Board of Directors: Lydia Sommer, Olaf Horsthemke
>     Vorsitzender des Aufsichtsrats / Chairman of supervisory board:
>     Lauri Kivinen
>     Sitz der Gesellschaft: M?nchen / Registered office: Munich
>     Registergericht: M?nchen / Commercial registry: Munich, HRB 163416
>
>
>     List: http://www.antlr.org/mailman/listinfo/antlr-interest
>     Unsubscribe:
>     http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
>
>
> -- 
> I am but a man.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090218/a8734b6c/attachment.html 

From indhu.b at s7software.com  Tue Feb 17 19:25:12 2009
From: indhu.b at s7software.com (Indhu Bharathi)
Date: Wed, 18 Feb 2009 08:55:12 +0530
Subject: [antlr-interest] Lexer ambigiuoties
In-Reply-To: <499B4D78.1070106@apertio.com>
References: <499B159E.2060406@nsn.com>	<2ab2ed550902171228m23460ee9n750db59358b581c3@mail.gmail.com>
	<499B4D78.1070106@apertio.com>
Message-ID: <000001c99178$8302c670$89085350$@b@s7software.com>

Looks like you are trying to do things in Lexer that actually have to be
done in parser. Try keeping the bare minimum in Lexer and move other parsing
logics into Parser. 

 

Can you post a small sample input you are trying to parse?

 

- Indhu

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Paul Bouch?
Sent: Wednesday, February 18, 2009 5:21 AM
To: Sidharth Kuruvila
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Lexer ambigiuoties

 

Hi,

that does not work. The problem is when I define a rule for unquoted strings
like: (where komma is a delimiter):

Ustring : Integer ' '+ ~('\n' | '{' | ',') |  Name ' '+ ~('\n' | '{' | ',')
| ~(' ' | '\n' | ',')+;

The lexer will match >>3<< as an integer but >>3 << causes an error whereas
before this was ok. Of course how should the lexer know that in one case
blank is supposed to be a whitespace and in another case is part of the
value, i.e. >>3 a<<.

What I would like to write is:

Ustring : ~Name | ~Integer;

but this is not possible.

BR,
Paul

Sidharth Kuruvila schrieb: 

Try moveing the rule for Name bellow Ipaddress.

Regards,
Sidharth

On Wed, Feb 18, 2009 at 1:23 AM, "Paul Bouch? (NSN)" <paul.bouche at nsn.com>
wrote:

Hi,

I have a lexer which already recognizes valid tokens of different types,
e.g. an integer will generate an integer token, a quoted string a string
token, an ip address and ipaddress token etc.
E.g:

property : key '=' value;
key : Name;
value : Integer | String | Ipaddress;
Name : ('a'..'z' | 'A'..'Z' | '0'..'9' | '_' | '-' | ':' | '%')+
Integer : ('+'|'-')? ('0'..'9')+;
Ipaddress : ('0'..'9')+ '.' ('0'..'9')+ '.' ('0'..'9')+ '.' ('0'..'9')+
// simplified, actual grammar is correct max of three digits
String :  ( '\'' ( STRING_ | '`' | '"' | '\\' '\'' )* '\''
        | '"' ( STRING_ | '`' | '\'' | '\\' '"' )* '"'
        );
WHITESPACE
      :
      ( ' ' | '\t' | '\n' )+
      { skip(); }
      ;

All works fine. Now I need to include unquoted strings with blanks. The
problem is '0 ' (zero blank - without quotes of course). I cannot get
the lexer to match this as an Integer as before. Basically I want a rule
which says, if it is not something of the previous tokens, try if is an
unquoted string. Of course an unquoted string may not have newlines.
Any hints on how to archive this?
I tried everything and ran several times into code too large exceptions
because the actual grammar is much more complex (there are more unquoted
values which are recognized by certain prefixed characters such as < 0x
:: etc.).

Thanks a bunch!
Paul

--
Paul Bouch?
Voice: +49 30 590080-1284

Nokia Siemens Networks GmbH & Co. KG, An den Treptowers 1, 12435 Berlin,
Germany
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRA 88537
WEEE-Reg.-Nr.: DE 52984304

Pers?nlich haftende Gesellschafterin / General Partner: Nokia Siemens
Networks Management GmbH
Gesch?ftsleitung / Board of Directors: Lydia Sommer, Olaf Horsthemke
Vorsitzender des Aufsichtsrats / Chairman of supervisory board: Lauri
Kivinen
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRB 163416


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address




-- 
I am but a man.

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090218/ceededdc/attachment.html 

From jaluber at gmx.de  Tue Feb 17 22:38:45 2009
From: jaluber at gmx.de (Johannes Luber)
Date: Wed, 18 Feb 2009 07:38:45 +0100
Subject: [antlr-interest] Lexer ambigiuoties
In-Reply-To: <499B159E.2060406@nsn.com>
References: <499B159E.2060406@nsn.com>
Message-ID: <499BACF5.8060806@gmx.de>

Paul Bouch? (NSN) schrieb:
> Hi,
> 
> I have a lexer which already recognizes valid tokens of different types, 
> e.g. an integer will generate an integer token, a quoted string a string 
> token, an ip address and ipaddress token etc.
> E.g:
> 
> property : key '=' value;
> key : Name;
> value : Integer | String | Ipaddress;
> Name : ('a'..'z' | 'A'..'Z' | '0'..'9' | '_' | '-' | ':' | '%')+
> Integer : ('+'|'-')? ('0'..'9')+;
> Ipaddress : ('0'..'9')+ '.' ('0'..'9')+ '.' ('0'..'9')+ '.' ('0'..'9')+ 
> // simplified, actual grammar is correct max of three digits
> String :  ( '\'' ( STRING_ | '`' | '"' | '\\' '\'' )* '\''
>          | '"' ( STRING_ | '`' | '\'' | '\\' '"' )* '"'
>          );
> WHITESPACE
>        :
>        ( ' ' | '\t' | '\n' )+
>        { skip(); }
>        ;
> 
> All works fine. Now I need to include unquoted strings with blanks. The 
> problem is '0 ' (zero blank - without quotes of course). I cannot get 
> the lexer to match this as an Integer as before. Basically I want a rule 
> which says, if it is not something of the previous tokens, try if is an 
> unquoted string. Of course an unquoted string may not have newlines.
> Any hints on how to archive this?
> I tried everything and ran several times into code too large exceptions 
> because the actual grammar is much more complex (there are more unquoted 
> values which are recognized by certain prefixed characters such as < 0x 
> :: etc.).
> 
> Thanks a bunch!
> Paul
> 
Try to set the appropriate type later like it is done here:
<http://www.antlr.org/wiki/display/ANTLR3/Lexer+grammar+for+floating+point,+dot,+range,+time+specs>

Johannes

From thomas.woelfle at interactive-objects.com  Tue Feb 17 23:51:02 2009
From: thomas.woelfle at interactive-objects.com (Thomas Woelfle)
Date: Wed, 18 Feb 2009 08:51:02 +0100
Subject: [antlr-interest] Problem when parsing numerics
In-Reply-To: <499AF31D.8090802@temporal-wave.com>
References: <499ABDD1.7030805@interactive-objects.com>
	<499AF31D.8090802@temporal-wave.com>
Message-ID: <499BBDE6.50401@interactive-objects.com>

Hi Jim,

thanks for the tip. This lexer grammar for floating points is quite 
impressive and answers some interesting questions to me. But it did not 
solve my problem. Using the toekn rule 'FLOATING_POINT_LITERAL' in my 
grammar results in the same MismatchedTokenException. My adjusted 
grammar is:

foo     :     FLOATING_POINT_LITERAL '.';

where "FLOATING_POINT_LITERAL" is the rule from your example.

Parsing the input string "1.5." results in a MismatchedTokenException. 
Any idea what is going wrong?

Regards,
Thomas
> Thomas Woelfle wrote:
>   
>> Hi,
>>
>> I've been running into a strange problem using ANTLR 3.1.1. I don't know 
>> wether it is a bug in my grammar or a bug in ANTLR.
>> In the language that has to be parsed following lines are legal strings:
>>
>> 1.
>> 1.5.
>>
>> There is a rule where a numeric is followed by a dot.
>>   
>>     
> Please look in the FAQ/examples:
>
> http://www.antlr.org/wiki/display/ANTLR3/Lexer+grammar+for+floating+point%2C+dot%2C+range%2C+time+specs
>
> You should be able to simplify the grammar here to just what you need.
>
> Jim
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>   


-- 
Interactive Objects Software GmbH
Basler Strasse 61
79100 Freiburg, Germany

Phone:  +49 761 400 73 0
mailto:thomas.woelfle at interactive-objects.com


------------------------------------------------------------------------

Interactive Objects' Legacy Modernization Solutions 

Get Your Applications SOA-Ready!

See http://www.interactive-objects.com/ for more information.

------------------------------------------------------------------------


Interactive Objects Software GmbH | Freiburg | Gesch?ftsf?hrer: Alberto Perandones, Andrea Hemprich
| AG Frbg. HRB 5810 | USt-ID: DE 197983057


From indhu.b at s7software.com  Wed Feb 18 00:57:19 2009
From: indhu.b at s7software.com (Indhu Bharathi)
Date: Wed, 18 Feb 2009 14:27:19 +0530 (IST)
Subject: [antlr-interest] Problem when parsing numerics
In-Reply-To: <499BBDE6.50401@interactive-objects.com>
Message-ID: <1346516.3081234947439126.JavaMail.root@star>

The following grammar will fix your problem.

-------------------------------------------
grammar Test;

options {language=Java;}

foo     :     numeric DOT;

numeric :    NUMBER (DOT NUMBER)?;

NUMBER	:	'0'..'9'+
	;

DOT	:	'.'
	;
	
--------------------------------------------


I dont know the exact reason why this occours. Will try my best to explain.  

The lexer will always try to form a token with maximum string length possible. In this case (1.) , on seeing a '.' the lexer 'predicts' it to be '0'..'9'+ ('.' '0'..'9'+) assuming the second part (under ?) is present and runs the DFA and the DFA crashes. I guess it is generally not a good idea to have two rules R1 and R2 in lexer where R1 starts with R2.

Will be good if someone can add more clarity to the explanation.

- Indhu


----- Original Message -----
From: Thomas Woelfle <thomas.woelfle at interactive-objects.com>
To: jimi at temporal-wave.com
Cc: antlr-interest at antlr.org
Sent: Wednesday, February 18, 2009 1:21:02 PM GMT+0530 Asia/Calcutta
Subject: Re: [antlr-interest] Problem when parsing numerics

Hi Jim,

thanks for the tip. This lexer grammar for floating points is quite 
impressive and answers some interesting questions to me. But it did not 
solve my problem. Using the toekn rule 'FLOATING_POINT_LITERAL' in my 
grammar results in the same MismatchedTokenException. My adjusted 
grammar is:

foo     :     FLOATING_POINT_LITERAL '.';

where "FLOATING_POINT_LITERAL" is the rule from your example.

Parsing the input string "1.5." results in a MismatchedTokenException. 
Any idea what is going wrong?

Regards,
Thomas
> Thomas Woelfle wrote:
>   
>> Hi,
>>
>> I've been running into a strange problem using ANTLR 3.1.1. I don't know 
>> wether it is a bug in my grammar or a bug in ANTLR.
>> In the language that has to be parsed following lines are legal strings:
>>
>> 1.
>> 1.5.
>>
>> There is a rule where a numeric is followed by a dot.
>>   
>>     
> Please look in the FAQ/examples:
>
> http://www.antlr.org/wiki/display/ANTLR3/Lexer+grammar+for+floating+point%2C+dot%2C+range%2C+time+specs
>
> You should be able to simplify the grammar here to just what you need.
>
> Jim
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>   


-- 
Interactive Objects Software GmbH
Basler Strasse 61
79100 Freiburg, Germany

Phone:  +49 761 400 73 0
mailto:thomas.woelfle at interactive-objects.com


------------------------------------------------------------------------

Interactive Objects' Legacy Modernization Solutions 

Get Your Applications SOA-Ready!

See http://www.interactive-objects.com/ for more information.

------------------------------------------------------------------------


Interactive Objects Software GmbH | Freiburg | Gesch?ftsf?hrer: Alberto Perandones, Andrea Hemprich
| AG Frbg. HRB 5810 | USt-ID: DE 197983057


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From indhu.b at s7software.com  Wed Feb 18 01:02:49 2009
From: indhu.b at s7software.com (Indhu Bharathi)
Date: Wed, 18 Feb 2009 14:32:49 +0530 (IST)
Subject: [antlr-interest] Problem when parsing numerics
In-Reply-To: <1346516.3081234947439126.JavaMail.root@star>
Message-ID: <21221983.3111234947769643.JavaMail.root@star>


Well.. There is a bug in my explanation. I got confused with a problem I was facing. Your problem is actually simpler. Here goes the explanation.

Lexer sees "1." and since lexer always forms tokens with max string length possible it forms a token NUMERIC with the string "1." and this comes to your parser. But what your parser is expacting is NUMERIC followed by a '.'. So parsing fails. Simple.

- Indhu


----- Original Message -----
From: Indhu Bharathi <indhu.b at s7software.com>
To: Thomas Woelfle <thomas.woelfle at interactive-objects.com>
Cc: antlr-interest at antlr.org, jimi at temporal-wave.com
Sent: Wednesday, February 18, 2009 2:27:19 PM GMT+0530 Asia/Calcutta
Subject: Re: [antlr-interest] Problem when parsing numerics

The following grammar will fix your problem.

-------------------------------------------
grammar Test;

options {language=Java;}

foo     :     numeric DOT;

numeric :    NUMBER (DOT NUMBER)?;

NUMBER	:	'0'..'9'+
	;

DOT	:	'.'
	;
	
--------------------------------------------


I dont know the exact reason why this occours. Will try my best to explain.  

The lexer will always try to form a token with maximum string length possible. In this case (1.) , on seeing a '.' the lexer 'predicts' it to be '0'..'9'+ ('.' '0'..'9'+) assuming the second part (under ?) is present and runs the DFA and the DFA crashes. I guess it is generally not a good idea to have two rules R1 and R2 in lexer where R1 starts with R2.

Will be good if someone can add more clarity to the explanation.

- Indhu


----- Original Message -----
From: Thomas Woelfle <thomas.woelfle at interactive-objects.com>
To: jimi at temporal-wave.com
Cc: antlr-interest at antlr.org
Sent: Wednesday, February 18, 2009 1:21:02 PM GMT+0530 Asia/Calcutta
Subject: Re: [antlr-interest] Problem when parsing numerics

Hi Jim,

thanks for the tip. This lexer grammar for floating points is quite 
impressive and answers some interesting questions to me. But it did not 
solve my problem. Using the toekn rule 'FLOATING_POINT_LITERAL' in my 
grammar results in the same MismatchedTokenException. My adjusted 
grammar is:

foo     :     FLOATING_POINT_LITERAL '.';

where "FLOATING_POINT_LITERAL" is the rule from your example.

Parsing the input string "1.5." results in a MismatchedTokenException. 
Any idea what is going wrong?

Regards,
Thomas
> Thomas Woelfle wrote:
>   
>> Hi,
>>
>> I've been running into a strange problem using ANTLR 3.1.1. I don't know 
>> wether it is a bug in my grammar or a bug in ANTLR.
>> In the language that has to be parsed following lines are legal strings:
>>
>> 1.
>> 1.5.
>>
>> There is a rule where a numeric is followed by a dot.
>>   
>>     
> Please look in the FAQ/examples:
>
> http://www.antlr.org/wiki/display/ANTLR3/Lexer+grammar+for+floating+point%2C+dot%2C+range%2C+time+specs
>
> You should be able to simplify the grammar here to just what you need.
>
> Jim
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>   


-- 
Interactive Objects Software GmbH
Basler Strasse 61
79100 Freiburg, Germany

Phone:  +49 761 400 73 0
mailto:thomas.woelfle at interactive-objects.com


------------------------------------------------------------------------

Interactive Objects' Legacy Modernization Solutions 

Get Your Applications SOA-Ready!

See http://www.interactive-objects.com/ for more information.

------------------------------------------------------------------------


Interactive Objects Software GmbH | Freiburg | Gesch?ftsf?hrer: Alberto Perandones, Andrea Hemprich
| AG Frbg. HRB 5810 | USt-ID: DE 197983057


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From indhu.b at s7software.com  Wed Feb 18 01:19:54 2009
From: indhu.b at s7software.com (Indhu Bharathi)
Date: Wed, 18 Feb 2009 14:49:54 +0530 (IST)
Subject: [antlr-interest] Problem when parsing numerics
In-Reply-To: <1106316.3141234948600775.JavaMail.root@star>
Message-ID: <2969488.3161234948794703.JavaMail.root@star>


Looks like I'm in half sleep today :-) Previous explanation (that the problem is in the lexer) is infact correct. 

Try running a test program which just gets all tokens from the lexer and does no parsing as shown below: 


public class __Test__ { 

public static void main(String args[]) throws Exception { 
TestLexer lex = new TestLexer(new ANTLRFileStream("/root/workspace/Test/output/__Test___input.txt")); 
CommonTokenStream tokens = new CommonTokenStream(lex); 

tokens.getTokens(); 

} 
} 

With the input "1.", I get the error 

line 1:2 required (...)+ loop did not match anything at character '<EOF>' 

- Indhu 


----- Original Message ----- 
From: Indhu Bharathi <indhu.b at s7software.com> 
To: Thomas Woelfle <thomas.woelfle at interactive-objects.com> 
Cc: antlr-interest at antlr.org 
Sent: Wednesday, February 18, 2009 2:32:49 PM GMT+0530 Asia/Calcutta 
Subject: Re: [antlr-interest] Problem when parsing numerics 


Well.. There is a bug in my explanation. I got confused with a problem I was facing. Your problem is actually simpler. Here goes the explanation. 

Lexer sees "1." and since lexer always forms tokens with max string length possible it forms a token NUMERIC with the string "1." and this comes to your parser. But what your parser is expacting is NUMERIC followed by a '.'. So parsing fails. Simple. 

- Indhu 


----- Original Message ----- 
From: Indhu Bharathi <indhu.b at s7software.com> 
To: Thomas Woelfle <thomas.woelfle at interactive-objects.com> 
Cc: antlr-interest at antlr.org, jimi at temporal-wave.com 
Sent: Wednesday, February 18, 2009 2:27:19 PM GMT+0530 Asia/Calcutta 
Subject: Re: [antlr-interest] Problem when parsing numerics 

The following grammar will fix your problem. 

------------------------------------------- 
grammar Test; 

options {language=Java;} 

foo : numeric DOT; 

numeric : NUMBER (DOT NUMBER)?; 

NUMBER : '0'..'9'+ 
; 

DOT : '.' 
; 

-------------------------------------------- 


I dont know the exact reason why this occours. Will try my best to explain. 

The lexer will always try to form a token with maximum string length possible. In this case (1.) , on seeing a '.' the lexer 'predicts' it to be '0'..'9'+ ('.' '0'..'9'+) assuming the second part (under ?) is present and runs the DFA and the DFA crashes. I guess it is generally not a good idea to have two rules R1 and R2 in lexer where R1 starts with R2. 

Will be good if someone can add more clarity to the explanation. 

- Indhu 


----- Original Message ----- 
From: Thomas Woelfle <thomas.woelfle at interactive-objects.com> 
To: jimi at temporal-wave.com 
Cc: antlr-interest at antlr.org 
Sent: Wednesday, February 18, 2009 1:21:02 PM GMT+0530 Asia/Calcutta 
Subject: Re: [antlr-interest] Problem when parsing numerics 

Hi Jim, 

thanks for the tip. This lexer grammar for floating points is quite 
impressive and answers some interesting questions to me. But it did not 
solve my problem. Using the toekn rule 'FLOATING_POINT_LITERAL' in my 
grammar results in the same MismatchedTokenException. My adjusted 
grammar is: 

foo : FLOATING_POINT_LITERAL '.'; 

where "FLOATING_POINT_LITERAL" is the rule from your example. 

Parsing the input string "1.5." results in a MismatchedTokenException. 
Any idea what is going wrong? 

Regards, 
Thomas 
> Thomas Woelfle wrote: 
> 
>> Hi, 
>> 
>> I've been running into a strange problem using ANTLR 3.1.1. I don't know 
>> wether it is a bug in my grammar or a bug in ANTLR. 
>> In the language that has to be parsed following lines are legal strings: 
>> 
>> 1. 
>> 1.5. 
>> 
>> There is a rule where a numeric is followed by a dot. 
>> 
>> 
> Please look in the FAQ/examples: 
> 
> http://www.antlr.org/wiki/display/ANTLR3/Lexer+grammar+for+floating+point%2C+dot%2C+range%2C+time+specs 
> 
> You should be able to simplify the grammar here to just what you need. 
> 
> Jim 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest 
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address 
> 


-- 
Interactive Objects Software GmbH 
Basler Strasse 61 
79100 Freiburg, Germany 

Phone: +49 761 400 73 0 
mailto:thomas.woelfle at interactive-objects.com 


------------------------------------------------------------------------ 

Interactive Objects' Legacy Modernization Solutions 

Get Your Applications SOA-Ready! 

See http://www.interactive-objects.com/ for more information. 

------------------------------------------------------------------------ 


Interactive Objects Software GmbH | Freiburg | Gesch?ftsf?hrer: Alberto Perandones, Andrea Hemprich 
| AG Frbg. HRB 5810 | USt-ID: DE 197983057 


List: http://www.antlr.org/mailman/listinfo/antlr-interest 
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address 


List: http://www.antlr.org/mailman/listinfo/antlr-interest 
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090218/13207997/attachment.html 

From paul.bouche at nsn.com  Wed Feb 18 02:25:13 2009
From: paul.bouche at nsn.com (=?ISO-8859-15?Q?=22Paul_Bouch=E9_=28NSN=29=22?=)
Date: Wed, 18 Feb 2009 11:25:13 +0100
Subject: [antlr-interest] Lexer ambigiuoties
In-Reply-To: <499BACF5.8060806@gmx.de>
References: <499B159E.2060406@nsn.com> <499BACF5.8060806@gmx.de>
Message-ID: <499BE209.8040106@nsn.com>

Hi,

thanks for the pointer - very interesting. I found the comment by Lonnie 
VanZandt enlightning: "

Forgive me, I am dimwitted: I see that the point of the example is to 
illustrate insitu error reporting for malformed inputs. However, is the 
example /also/ the canonical recommended way to write a grammar for 
parsing numeric literals--without regard to whether or not one kindly 
detects malformities?

For example, programmatically peeking ahead via input.LA(2) rather than 
using a pattern matcher that implicitly looks at the character two 
characters ahead. Is that the preferred style?

Also, is this compound case/switch rule the recommended approach versus 
a collection of "token-specific" rules? That is, isn't it more 
elegant-when possible-to write a separate rule for OCTAL_LITERAL, 
FLOATING_POINT_LITERAL, HEX_LITERAL, TIME_LITERAL, etc? The approach 
shown seems very procedural versus a declarative approach.

(I realize that I can't have my Elegance Cake and eat it in the presence 
of ambiguous sentences...)

".

The deal is we have a lexer in place which does exactly what Lonnie 
suggest in the last sentence. A lexer which has seperate rules for each 
of token types. The given example here imo is more or less a combination 
of hand-written lexer and auto-generation. I guess if you want to do 
more complex stuff with ANTLR which though is needed for so called real 
world applications you need to get down and dirty, or you have to be a 
Terrance Parr ;-)

The example illustrates that it can be done, but it would mean a half 
rewrite of the current lexer.

Thanks,
Paul

Johannes Luber schrieb:
> Paul Bouch? (NSN) schrieb:
>   
>> Hi,
>>
>> I have a lexer which already recognizes valid tokens of different types, 
>> e.g. an integer will generate an integer token, a quoted string a string 
>> token, an ip address and ipaddress token etc.
>> E.g:
>>
>> property : key '=' value;
>> key : Name;
>> value : Integer | String | Ipaddress;
>> Name : ('a'..'z' | 'A'..'Z' | '0'..'9' | '_' | '-' | ':' | '%')+
>> Integer : ('+'|'-')? ('0'..'9')+;
>> Ipaddress : ('0'..'9')+ '.' ('0'..'9')+ '.' ('0'..'9')+ '.' ('0'..'9')+ 
>> // simplified, actual grammar is correct max of three digits
>> String :  ( '\'' ( STRING_ | '`' | '"' | '\\' '\'' )* '\''
>>          | '"' ( STRING_ | '`' | '\'' | '\\' '"' )* '"'
>>          );
>> WHITESPACE
>>        :
>>        ( ' ' | '\t' | '\n' )+
>>        { skip(); }
>>        ;
>>
>> All works fine. Now I need to include unquoted strings with blanks. The 
>> problem is '0 ' (zero blank - without quotes of course). I cannot get 
>> the lexer to match this as an Integer as before. Basically I want a rule 
>> which says, if it is not something of the previous tokens, try if is an 
>> unquoted string. Of course an unquoted string may not have newlines.
>> Any hints on how to archive this?
>> I tried everything and ran several times into code too large exceptions 
>> because the actual grammar is much more complex (there are more unquoted 
>> values which are recognized by certain prefixed characters such as < 0x 
>> :: etc.).
>>
>> Thanks a bunch!
>> Paul
>>
>>     
> Try to set the appropriate type later like it is done here:
> <http://www.antlr.org/wiki/display/ANTLR3/Lexer+grammar+for+floating+point,+dot,+range,+time+specs>
>
> Johannes
>   
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090218/91c2feb6/attachment.html 

From JALuber at gmx.de  Wed Feb 18 03:42:35 2009
From: JALuber at gmx.de (Johannes Luber)
Date: Wed, 18 Feb 2009 12:42:35 +0100
Subject: [antlr-interest] Lexer ambigiuoties
In-Reply-To: <499BE209.8040106@nsn.com>
References: <499B159E.2060406@nsn.com> <499BACF5.8060806@gmx.de>
	<499BE209.8040106@nsn.com>
Message-ID: <20090218114235.158920@gmx.net>

> Hi,
> 
> thanks for the pointer - very interesting.
...
> 
> The example illustrates that it can be done, but it would mean a half 
> rewrite of the current lexer.
> 
> Thanks,
> Paul

The deeper problem lies in the fact that ANTLR uses an insufficent algorithm to sort out - for humans - non-ambiguous input in all cases correctly. Not sure if changing the algorithm would help here, too, but it would at least simplify the common cases. Unfortunately, it isn't clear when Ter does finally do a rewrite here.

Johannes
> 
> Johannes Luber schrieb:
> > Paul Bouch? (NSN) schrieb:
> >   
> >> Hi,
> >>
> >> I have a lexer which already recognizes valid tokens of different
> types, 
> >> e.g. an integer will generate an integer token, a quoted string a
> string 
> >> token, an ip address and ipaddress token etc.
> >> E.g:
> >>
> >> property : key '=' value;
> >> key : Name;
> >> value : Integer | String | Ipaddress;
> >> Name : ('a'..'z' | 'A'..'Z' | '0'..'9' | '_' | '-' | ':' | '%')+
> >> Integer : ('+'|'-')? ('0'..'9')+;
> >> Ipaddress : ('0'..'9')+ '.' ('0'..'9')+ '.' ('0'..'9')+ '.' ('0'..'9')+
> >> // simplified, actual grammar is correct max of three digits
> >> String :  ( '\'' ( STRING_ | '`' | '"' | '\\' '\'' )* '\''
> >>          | '"' ( STRING_ | '`' | '\'' | '\\' '"' )* '"'
> >>          );
> >> WHITESPACE
> >>        :
> >>        ( ' ' | '\t' | '\n' )+
> >>        { skip(); }
> >>        ;
> >>
> >> All works fine. Now I need to include unquoted strings with blanks. The
> >> problem is '0 ' (zero blank - without quotes of course). I cannot get 
> >> the lexer to match this as an Integer as before. Basically I want a
> rule 
> >> which says, if it is not something of the previous tokens, try if is an
> >> unquoted string. Of course an unquoted string may not have newlines.
> >> Any hints on how to archive this?
> >> I tried everything and ran several times into code too large exceptions
> >> because the actual grammar is much more complex (there are more
> unquoted 
> >> values which are recognized by certain prefixed characters such as < 0x
> >> :: etc.).
> >>
> >> Thanks a bunch!
> >> Paul
> >>
> >>     
> > Try to set the appropriate type later like it is done here:
> >
> <http://www.antlr.org/wiki/display/ANTLR3/Lexer+grammar+for+floating+point,+dot,+range,+time+specs>
> >
> > Johannes
> >   

-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt? Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger01

From paul.bouche at nsn.com  Wed Feb 18 05:27:12 2009
From: paul.bouche at nsn.com (=?ISO-8859-1?Q?=22Paul_Bouch=E9_=28NSN=29=22?=)
Date: Wed, 18 Feb 2009 14:27:12 +0100
Subject: [antlr-interest] Lexer ambigiuoties
In-Reply-To: <20090218114235.158920@gmx.net>
References: <499B159E.2060406@nsn.com> <499BACF5.8060806@gmx.de>
	<499BE209.8040106@nsn.com> <20090218114235.158920@gmx.net>
Message-ID: <499C0CB0.2010202@nsn.com>

Johannes Luber schrieb:
> The deeper problem lies in the fact that ANTLR uses an insufficent algorithm to sort out - for humans - non-ambiguous input in all cases correctly.
 From the book I glean that LL(*) does cover all context free languages. 
Those for humans non ambiguous but for computers ambiguous cases are 
only non ambiguous to humans because they have context? Because a blank 
or any other character for that matter may be interpreted as white space 
in one case it shall be interpreted differently in another case. The 
difference between those cases is context, i.e. what came before and 
what the next k-ahead symbol is.

Or could you be more concrete by what you mean with "uses an insufficent 
algorithm" - ah I just thought that the parser is LL(*) but the lexer 
uses a cyclic DFA for prediction  which  may not cover all context free 
languages and certainly not context-sensitive.

BR,
Paul

Paul
>  Not sure if changing the algorithm would help here, too, but it would at least simplify the common cases. Unfortunately, it isn't clear when Ter does finally do a rewrite here.
>
> Johannes
>   
>> Johannes Luber schrieb:
>>     
>>> Paul Bouch? (NSN) schrieb:
>>>   
>>>       
>>>> Hi,
>>>>
>>>> I have a lexer which already recognizes valid tokens of different
>>>>         
>> types, 
>>     
>>>> e.g. an integer will generate an integer token, a quoted string a
>>>>         
>> string 
>>     
>>>> token, an ip address and ipaddress token etc.
>>>> E.g:
>>>>
>>>> property : key '=' value;
>>>> key : Name;
>>>> value : Integer | String | Ipaddress;
>>>> Name : ('a'..'z' | 'A'..'Z' | '0'..'9' | '_' | '-' | ':' | '%')+
>>>> Integer : ('+'|'-')? ('0'..'9')+;
>>>> Ipaddress : ('0'..'9')+ '.' ('0'..'9')+ '.' ('0'..'9')+ '.' ('0'..'9')+
>>>> // simplified, actual grammar is correct max of three digits
>>>> String :  ( '\'' ( STRING_ | '`' | '"' | '\\' '\'' )* '\''
>>>>          | '"' ( STRING_ | '`' | '\'' | '\\' '"' )* '"'
>>>>          );
>>>> WHITESPACE
>>>>        :
>>>>        ( ' ' | '\t' | '\n' )+
>>>>        { skip(); }
>>>>        ;
>>>>
>>>> All works fine. Now I need to include unquoted strings with blanks. The
>>>> problem is '0 ' (zero blank - without quotes of course). I cannot get 
>>>> the lexer to match this as an Integer as before. Basically I want a
>>>>         
>> rule 
>>     
>>>> which says, if it is not something of the previous tokens, try if is an
>>>> unquoted string. Of course an unquoted string may not have newlines.
>>>> Any hints on how to archive this?
>>>> I tried everything and ran several times into code too large exceptions
>>>> because the actual grammar is much more complex (there are more
>>>>         
>> unquoted 
>>     
>>>> values which are recognized by certain prefixed characters such as < 0x
>>>> :: etc.).
>>>>
>>>> Thanks a bunch!
>>>> Paul
>>>>
>>>>     
>>>>         
>>> Try to set the appropriate type later like it is done here:
>>>
>>>       
>> <http://www.antlr.org/wiki/display/ANTLR3/Lexer+grammar+for+floating+point,+dot,+range,+time+specs>
>>     
>>> Johannes
>>>   
>>>       
>
>   


-- 
Paul Bouch?
Voice: +49 30 590080-1284
 
Nokia Siemens Networks GmbH & Co. KG, An den Treptowers 1, 12435 Berlin, Germany
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRA 88537
WEEE-Reg.-Nr.: DE 52984304

Pers?nlich haftende Gesellschafterin / General Partner: Nokia Siemens Networks Management GmbH
Gesch?ftsleitung / Board of Directors: Lydia Sommer, Olaf Horsthemke
Vorsitzender des Aufsichtsrats / Chairman of supervisory board: Lauri Kivinen
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRB 163416

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090218/d35449cf/attachment.html 

From JALuber at gmx.de  Wed Feb 18 06:03:20 2009
From: JALuber at gmx.de (Johannes Luber)
Date: Wed, 18 Feb 2009 15:03:20 +0100
Subject: [antlr-interest] Lexer ambigiuoties
In-Reply-To: <499C0CB0.2010202@nsn.com>
References: <499B159E.2060406@nsn.com> <499BACF5.8060806@gmx.de>
	<499BE209.8040106@nsn.com> <20090218114235.158920@gmx.net>
	<499C0CB0.2010202@nsn.com>
Message-ID: <20090218140320.103030@gmx.net>

> Johannes Luber schrieb:
> > The deeper problem lies in the fact that ANTLR uses an insufficent
> algorithm to sort out - for humans - non-ambiguous input in all cases correctly.
>  From the book I glean that LL(*) does cover all context free languages. 
> Those for humans non ambiguous but for computers ambiguous cases are 
> only non ambiguous to humans because they have context? Because a blank 
> or any other character for that matter may be interpreted as white space 
> in one case it shall be interpreted differently in another case. The 
> difference between those cases is context, i.e. what came before and 
> what the next k-ahead symbol is.
> 
> Or could you be more concrete by what you mean with "uses an insufficent 
> algorithm" - ah I just thought that the parser is LL(*) but the lexer 
> uses a cyclic DFA for prediction  which  may not cover all context free 
> languages and certainly not context-sensitive.

I actually refer to the way how ANTLR decides which token has to be generated next. The simplest case would be that one has a NUMBER rule, a DOT rule and a FLOGTING_POINT rule. With the input "1." ANTLR could theoritically create a NUMBER token followed by a DOT token, but just tries to match FLOATING_POINT, which fails.

Johannes
> 
> BR,
> Paul
> 
> Paul
> >  Not sure if changing the algorithm would help here, too, but it would
> at least simplify the common cases. Unfortunately, it isn't clear when Ter
> does finally do a rewrite here.
> >
> > Johannes
> >   
> >> Johannes Luber schrieb:
> >>     
> >>> Paul Bouch? (NSN) schrieb:
> >>>   
> >>>       
> >>>> Hi,
> >>>>
> >>>> I have a lexer which already recognizes valid tokens of different
> >>>>         
> >> types, 
> >>     
> >>>> e.g. an integer will generate an integer token, a quoted string a
> >>>>         
> >> string 
> >>     
> >>>> token, an ip address and ipaddress token etc.
> >>>> E.g:
> >>>>
> >>>> property : key '=' value;
> >>>> key : Name;
> >>>> value : Integer | String | Ipaddress;
> >>>> Name : ('a'..'z' | 'A'..'Z' | '0'..'9' | '_' | '-' | ':' | '%')+
> >>>> Integer : ('+'|'-')? ('0'..'9')+;
> >>>> Ipaddress : ('0'..'9')+ '.' ('0'..'9')+ '.' ('0'..'9')+ '.'
> ('0'..'9')+
> >>>> // simplified, actual grammar is correct max of three digits
> >>>> String :  ( '\'' ( STRING_ | '`' | '"' | '\\' '\'' )* '\''
> >>>>          | '"' ( STRING_ | '`' | '\'' | '\\' '"' )* '"'
> >>>>          );
> >>>> WHITESPACE
> >>>>        :
> >>>>        ( ' ' | '\t' | '\n' )+
> >>>>        { skip(); }
> >>>>        ;
> >>>>
> >>>> All works fine. Now I need to include unquoted strings with blanks.
> The
> >>>> problem is '0 ' (zero blank - without quotes of course). I cannot get
> >>>> the lexer to match this as an Integer as before. Basically I want a
> >>>>         
> >> rule 
> >>     
> >>>> which says, if it is not something of the previous tokens, try if is
> an
> >>>> unquoted string. Of course an unquoted string may not have newlines.
> >>>> Any hints on how to archive this?
> >>>> I tried everything and ran several times into code too large
> exceptions
> >>>> because the actual grammar is much more complex (there are more
> >>>>         
> >> unquoted 
> >>     
> >>>> values which are recognized by certain prefixed characters such as <
> 0x
> >>>> :: etc.).
> >>>>
> >>>> Thanks a bunch!
> >>>> Paul
> >>>>
> >>>>     
> >>>>         
> >>> Try to set the appropriate type later like it is done here:
> >>>
> >>>       
> >>
> <http://www.antlr.org/wiki/display/ANTLR3/Lexer+grammar+for+floating+point,+dot,+range,+time+specs>
> >>     
> >>> Johannes
> >>>   
> >>>       
> >
> >   
> 
> 
> -- 
> Paul Bouch?
> Voice: +49 30 590080-1284
>  
> Nokia Siemens Networks GmbH & Co. KG, An den Treptowers 1, 12435 Berlin,
> Germany
> Sitz der Gesellschaft: M?nchen / Registered office: Munich
> Registergericht: M?nchen / Commercial registry: Munich, HRA 88537
> WEEE-Reg.-Nr.: DE 52984304
> 
> Pers?nlich haftende Gesellschafterin / General Partner: Nokia Siemens
> Networks Management GmbH
> Gesch?ftsleitung / Board of Directors: Lydia Sommer, Olaf Horsthemke
> Vorsitzender des Aufsichtsrats / Chairman of supervisory board: Lauri
> Kivinen
> Sitz der Gesellschaft: M?nchen / Registered office: Munich
> Registergericht: M?nchen / Commercial registry: Munich, HRB 163416
> 

-- 
Jetzt 1 Monat kostenlos! GMX FreeDSL - Telefonanschluss + DSL 
f?r nur 17,95 Euro/mtl.!* http://dsl.gmx.de/?ac=OM.AD.PD003K11308T4569a

From indhu.b at s7software.com  Wed Feb 18 06:22:24 2009
From: indhu.b at s7software.com (Indhu Bharathi)
Date: Wed, 18 Feb 2009 19:52:24 +0530 (IST)
Subject: [antlr-interest] Lexer ambigiuoties
In-Reply-To: <20090218140320.103030@gmx.net>
Message-ID: <26413986.3491234966944901.JavaMail.root@star>


I actually refer to the way how ANTLR decides which token has to be generated next. The simplest case would be that one has a NUMBER rule, a DOT rule and a FLOGTING_POINT rule. With the input "1." ANTLR could theoritically create a NUMBER token followed by a DOT token, but just tries to match FLOATING_POINT, which fails. 

Curious... Why not in such cases, backtrack and return NUMBER? 

----- Original Message ----- 
From: Johannes Luber <JALuber at gmx.de> 
To: paul bouche <paul.bouche at apertio.com> 
Cc: antlr-interest at antlr.org 
Sent: Wednesday, February 18, 2009 7:33:20 PM GMT+0530 Asia/Calcutta 
Subject: Re: [antlr-interest] Lexer ambigiuoties 

> Johannes Luber schrieb: 
> > The deeper problem lies in the fact that ANTLR uses an insufficent 
> algorithm to sort out - for humans - non-ambiguous input in all cases correctly. 
> From the book I glean that LL(*) does cover all context free languages. 
> Those for humans non ambiguous but for computers ambiguous cases are 
> only non ambiguous to humans because they have context? Because a blank 
> or any other character for that matter may be interpreted as white space 
> in one case it shall be interpreted differently in another case. The 
> difference between those cases is context, i.e. what came before and 
> what the next k-ahead symbol is. 
> 
> Or could you be more concrete by what you mean with "uses an insufficent 
> algorithm" - ah I just thought that the parser is LL(*) but the lexer 
> uses a cyclic DFA for prediction which may not cover all context free 
> languages and certainly not context-sensitive. 

I actually refer to the way how ANTLR decides which token has to be generated next. The simplest case would be that one has a NUMBER rule, a DOT rule and a FLOGTING_POINT rule. With the input "1." ANTLR could theoritically create a NUMBER token followed by a DOT token, but just tries to match FLOATING_POINT, which fails. 

Johannes 
> 
> BR, 
> Paul 
> 
> Paul 
> > Not sure if changing the algorithm would help here, too, but it would 
> at least simplify the common cases. Unfortunately, it isn't clear when Ter 
> does finally do a rewrite here. 
> > 
> > Johannes 
> > 
> >> Johannes Luber schrieb: 
> >> 
> >>> Paul Bouch? (NSN) schrieb: 
> >>> 
> >>> 
> >>>> Hi, 
> >>>> 
> >>>> I have a lexer which already recognizes valid tokens of different 
> >>>> 
> >> types, 
> >> 
> >>>> e.g. an integer will generate an integer token, a quoted string a 
> >>>> 
> >> string 
> >> 
> >>>> token, an ip address and ipaddress token etc. 
> >>>> E.g: 
> >>>> 
> >>>> property : key '=' value; 
> >>>> key : Name; 
> >>>> value : Integer | String | Ipaddress; 
> >>>> Name : ('a'..'z' | 'A'..'Z' | '0'..'9' | '_' | '-' | ':' | '%')+ 
> >>>> Integer : ('+'|'-')? ('0'..'9')+; 
> >>>> Ipaddress : ('0'..'9')+ '.' ('0'..'9')+ '.' ('0'..'9')+ '.' 
> ('0'..'9')+ 
> >>>> // simplified, actual grammar is correct max of three digits 
> >>>> String : ( '\'' ( STRING_ | '`' | '"' | '\\' '\'' )* '\'' 
> >>>> | '"' ( STRING_ | '`' | '\'' | '\\' '"' )* '"' 
> >>>> ); 
> >>>> WHITESPACE 
> >>>> : 
> >>>> ( ' ' | '\t' | '\n' )+ 
> >>>> { skip(); } 
> >>>> ; 
> >>>> 
> >>>> All works fine. Now I need to include unquoted strings with blanks. 
> The 
> >>>> problem is '0 ' (zero blank - without quotes of course). I cannot get 
> >>>> the lexer to match this as an Integer as before. Basically I want a 
> >>>> 
> >> rule 
> >> 
> >>>> which says, if it is not something of the previous tokens, try if is 
> an 
> >>>> unquoted string. Of course an unquoted string may not have newlines. 
> >>>> Any hints on how to archive this? 
> >>>> I tried everything and ran several times into code too large 
> exceptions 
> >>>> because the actual grammar is much more complex (there are more 
> >>>> 
> >> unquoted 
> >> 
> >>>> values which are recognized by certain prefixed characters such as < 
> 0x 
> >>>> :: etc.). 
> >>>> 
> >>>> Thanks a bunch! 
> >>>> Paul 
> >>>> 
> >>>> 
> >>>> 
> >>> Try to set the appropriate type later like it is done here: 
> >>> 
> >>> 
> >> 
> <http://www.antlr.org/wiki/display/ANTLR3/Lexer+grammar+for+floating+point,+dot,+range,+time+specs> 
> >> 
> >>> Johannes 
> >>> 
> >>> 
> > 
> > 
> 
> 
> -- 
> Paul Bouch? 
> Voice: +49 30 590080-1284 
> 
> Nokia Siemens Networks GmbH & Co. KG, An den Treptowers 1, 12435 Berlin, 
> Germany 
> Sitz der Gesellschaft: M?nchen / Registered office: Munich 
> Registergericht: M?nchen / Commercial registry: Munich, HRA 88537 
> WEEE-Reg.-Nr.: DE 52984304 
> 
> Pers?nlich haftende Gesellschafterin / General Partner: Nokia Siemens 
> Networks Management GmbH 
> Gesch?ftsleitung / Board of Directors: Lydia Sommer, Olaf Horsthemke 
> Vorsitzender des Aufsichtsrats / Chairman of supervisory board: Lauri 
> Kivinen 
> Sitz der Gesellschaft: M?nchen / Registered office: Munich 
> Registergericht: M?nchen / Commercial registry: Munich, HRB 163416 
> 

-- 
Jetzt 1 Monat kostenlos! GMX FreeDSL - Telefonanschluss + DSL 
f?r nur 17,95 Euro/mtl.!* http://dsl.gmx.de/?ac=OM.AD.PD003K11308T4569a 

List: http://www.antlr.org/mailman/listinfo/antlr-interest 
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090218/2c3eda06/attachment.html 

From thomas.woelfle at interactive-objects.com  Wed Feb 18 06:43:36 2009
From: thomas.woelfle at interactive-objects.com (Thomas Woelfle)
Date: Wed, 18 Feb 2009 15:43:36 +0100
Subject: [antlr-interest] Problem when parsing numerics
In-Reply-To: <2969488.3161234948794703.JavaMail.root@star>
References: <2969488.3161234948794703.JavaMail.root@star>
Message-ID: <499C1E98.4070805@interactive-objects.com>

Hi Indhu,

thanks for your reply. You are right. The lexer tries to find the 
longest valid next token. But given my sample grammer and the sample 
input '1.' the first valid token is '1' which is a NUMERIC and then the 
next token is '.'. It is correct that the NUMERIC rule cannot match '1.' 
since that is not a valid NUMERIC token. What it should match is '1' 
which is a valid NUMERIC token.

What I don't understand is why the lexer assumes that if there is a '.' 
after some DIGITs it has to be a NUMERIC.

foo     :     NUMERIC '.';

NUMERIC :    '0'..'9'+ ('.' '0'..'9'+)?;


The NUMERIC rules defines that after the initial DIGITS there may be a 
'.' followed by at least one DIGIT. Therefore the lexer prediction that 
a NUMERIC is the next token if a '.' has been recognized after some 
DIGITS isn't correct, isn't it?

Any ideas?

Regards,
Thomas



>
> Looks like I'm in half sleep today :-) Previous explanation (that the 
> problem is in the lexer) is infact correct.
>
> Try running a test program which just gets all tokens from the lexer 
> and does no parsing as shown below:
>
> public class __Test__ {
>
>     public static void main(String args[]) throws Exception {
>         TestLexer lex = new TestLexer(new 
> ANTLRFileStream("/root/workspace/Test/output/__Test___input.txt"));
>         CommonTokenStream tokens = new CommonTokenStream(lex);
>
>         tokens.getTokens();
>         
>     }
> }
>
> With the input "1.", I get the error
>
> line 1:2 required (...)+ loop did not match anything at character '<EOF>'
>
> - Indhu
>
>
> ----- Original Message -----
> From: Indhu Bharathi <indhu.b at s7software.com>
> To: Thomas Woelfle <thomas.woelfle at interactive-objects.com>
> Cc: antlr-interest at antlr.org
> Sent: Wednesday, February 18, 2009 2:32:49 PM GMT+0530 Asia/Calcutta
> Subject: Re: [antlr-interest] Problem when parsing numerics
>
>
> Well.. There is a bug in my explanation. I got confused with a problem 
> I was facing. Your problem is actually simpler. Here goes the explanation.
>
> Lexer sees "1." and since lexer always forms tokens with max string 
> length possible it forms a token NUMERIC with the string "1." and this 
> comes to your parser. But what your parser is expacting is NUMERIC 
> followed by a '.'. So parsing fails. Simple.
>
> - Indhu
>
>
> ----- Original Message -----
> From: Indhu Bharathi <indhu.b at s7software.com>
> To: Thomas Woelfle <thomas.woelfle at interactive-objects.com>
> Cc: antlr-interest at antlr.org, jimi at temporal-wave.com
> Sent: Wednesday, February 18, 2009 2:27:19 PM GMT+0530 Asia/Calcutta
> Subject: Re: [antlr-interest] Problem when parsing numerics
>
> The following grammar will fix your problem.
>
> -------------------------------------------
> grammar Test;
>
> options {language=Java;}
>
> foo     :     numeric DOT;
>
> numeric :    NUMBER (DOT NUMBER)?;
>
> NUMBER        :        '0'..'9'+
>         ;
>
> DOT        :        '.'
>         ;
>         
> --------------------------------------------
>
>
> I dont know the exact reason why this occours. Will try my best to 
> explain.  
>
> The lexer will always try to form a token with maximum string length 
> possible. In this case (1.) , on seeing a '.' the lexer 'predicts' it 
> to be '0'..'9'+ ('.' '0'..'9'+) assuming the second part (under ?) is 
> present and runs the DFA and the DFA crashes. I guess it is generally 
> not a good idea to have two rules R1 and R2 in lexer where R1 starts 
> with R2.
>
> Will be good if someone can add more clarity to the explanation.
>
> - Indhu
>
>
> ----- Original Message -----
> From: Thomas Woelfle <thomas.woelfle at interactive-objects.com>
> To: jimi at temporal-wave.com
> Cc: antlr-interest at antlr.org
> Sent: Wednesday, February 18, 2009 1:21:02 PM GMT+0530 Asia/Calcutta
> Subject: Re: [antlr-interest] Problem when parsing numerics
>
> Hi Jim,
>
> thanks for the tip. This lexer grammar for floating points is quite
> impressive and answers some interesting questions to me. But it did not
> solve my problem. Using the toekn rule 'FLOATING_POINT_LITERAL' in my
> grammar results in the same MismatchedTokenException. My adjusted
> grammar is:
>
> foo     :     FLOATING_POINT_LITERAL '.';
>
> where "FLOATING_POINT_LITERAL" is the rule from your example.
>
> Parsing the input string "1.5." results in a MismatchedTokenException.
> Any idea what is going wrong?
>
> Regards,
> Thomas
> > Thomas Woelfle wrote:
> >  
> >> Hi,
> >>
> >> I've been running into a strange problem using ANTLR 3.1.1. I don't 
> know
> >> wether it is a bug in my grammar or a bug in ANTLR.
> >> In the language that has to be parsed following lines are legal 
> strings:
> >>
> >> 1.
> >> 1.5.
> >>
> >> There is a rule where a numeric is followed by a dot.
> >>  
> >>    
> > Please look in the FAQ/examples:
> >
> > 
> http://www.antlr.org/wiki/display/ANTLR3/Lexer+grammar+for+floating+point%2C+dot%2C+range%2C+time+specs
> >
> > You should be able to simplify the grammar here to just what you need.
> >
> > Jim
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: 
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >  
>
>
> -- 
> Interactive Objects Software GmbH
> Basler Strasse 61
> 79100 Freiburg, Germany
>
> Phone:  +49 761 400 73 0
> mailto:thomas.woelfle at interactive-objects.com
>
>
> ------------------------------------------------------------------------
>
> Interactive Objects' Legacy Modernization Solutions
>
> Get Your Applications SOA-Ready!
>
> See http://www.interactive-objects.com/ for more information.
>
> ------------------------------------------------------------------------
>
>
> Interactive Objects Software GmbH | Freiburg | Gesch?ftsf?hrer: 
> Alberto Perandones, Andrea Hemprich
> | AG Frbg. HRB 5810 | USt-ID: DE 197983057
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: 
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: 
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address


-- 
Interactive Objects Software GmbH
Basler Strasse 61
79100 Freiburg, Germany

Phone:  +49 761 400 73 0
mailto:thomas.woelfle at interactive-objects.com


------------------------------------------------------------------------

Interactive Objects' Legacy Modernization Solutions 

Get Your Applications SOA-Ready!

See http://www.interactive-objects.com/ for more information.

------------------------------------------------------------------------


Interactive Objects Software GmbH | Freiburg | Gesch?ftsf?hrer: Alberto Perandones, Andrea Hemprich
| AG Frbg. HRB 5810 | USt-ID: DE 197983057


From jimi at temporal-wave.com  Wed Feb 18 08:16:13 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 18 Feb 2009 08:16:13 -0800
Subject: [antlr-interest] Problem when parsing numerics
In-Reply-To: <499BBDE6.50401@interactive-objects.com>
References: <499ABDD1.7030805@interactive-objects.com>
	<499AF31D.8090802@temporal-wave.com>
	<499BBDE6.50401@interactive-objects.com>
Message-ID: <499C344D.3040809@temporal-wave.com>

Thomas Woelfle wrote:
> Hi Jim,
>
> thanks for the tip. This lexer grammar for floating points is quite 
> impressive and answers some interesting questions to me. But it did 
> not solve my problem. Using the toekn rule 'FLOATING_POINT_LITERAL' in 
> my grammar results in the same MismatchedTokenException. My adjusted 
> grammar is:
>
> foo     :     FLOATING_POINT_LITERAL '.';
>
> where "FLOATING_POINT_LITERAL" is the rule from your example.
>
> Parsing the input string "1.5." results in a MismatchedTokenException. 
> Any idea what is going wrong?

You will need more than just the FLOATING_POINT_LITERAL rule I think. 
You will need to allow the lexer to return the DOT token, but just 
delete the RANGE token, then your parser rule would be foo : 
FLOATING_POINT_LITERAL DOT ; When you add the '.' to your parser it 
auto-creates a lexer rule that will not fit well with the other lexer rules.

Jim
>
> Regards,
> Thomas
>> Thomas Woelfle wrote:
>>  
>>> Hi,
>>>
>>> I've been running into a strange problem using ANTLR 3.1.1. I don't 
>>> know wether it is a bug in my grammar or a bug in ANTLR.
>>> In the language that has to be parsed following lines are legal 
>>> strings:
>>>
>>> 1.
>>> 1.5.
>>>
>>> There is a rule where a numeric is followed by a dot.
>>>       
>> Please look in the FAQ/examples:
>>
>> http://www.antlr.org/wiki/display/ANTLR3/Lexer+grammar+for+floating+point%2C+dot%2C+range%2C+time+specs 
>>
>>
>> You should be able to simplify the grammar here to just what you need.
>>
>> Jim
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: 
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>   
>
>


From jimi at temporal-wave.com  Wed Feb 18 08:23:09 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 18 Feb 2009 08:23:09 -0800
Subject: [antlr-interest] Lexer ambigiuoties
In-Reply-To: <499BE209.8040106@nsn.com>
References: <499B159E.2060406@nsn.com> <499BACF5.8060806@gmx.de>
	<499BE209.8040106@nsn.com>
Message-ID: <499C35ED.5060908@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090218/5abfb8c8/attachment.html 

From jimi at temporal-wave.com  Wed Feb 18 08:28:50 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 18 Feb 2009 08:28:50 -0800
Subject: [antlr-interest] Lexer ambigiuoties
In-Reply-To: <26413986.3491234966944901.JavaMail.root@star>
References: <26413986.3491234966944901.JavaMail.root@star>
Message-ID: <499C3742.9070607@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090218/0987942b/attachment.html 

From jimi at temporal-wave.com  Wed Feb 18 08:34:54 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 18 Feb 2009 08:34:54 -0800
Subject: [antlr-interest] Problem when parsing numerics
In-Reply-To: <499C1E98.4070805@interactive-objects.com>
References: <2969488.3161234948794703.JavaMail.root@star>
	<499C1E98.4070805@interactive-objects.com>
Message-ID: <499C38AE.2060205@temporal-wave.com>

Thomas Woelfle wrote:
> Hi Indhu,
>
> thanks for your reply. You are right. The lexer tries to find the 
> longest valid next token. But given my sample grammer and the sample 
> input '1.' the first valid token is '1' which is a NUMERIC and then the 
> next token is '.'. It is correct that the NUMERIC rule cannot match '1.' 
> since that is not a valid NUMERIC token. What it should match is '1' 
> which is a valid NUMERIC token.
>
> What I don't understand is why the lexer assumes that if there is a '.' 
> after some DIGITs it has to be a NUMERIC.
>
> foo     :     NUMERIC '.';
>
> NUMERIC :    '0'..'9'+ ('.' '0'..'9'+)?;
>
>
> The NUMERIC rules defines that after the initial DIGITS there may be a 
> '.' followed by at least one DIGIT. Therefore the lexer prediction that 
> a NUMERIC is the next token if a '.' has been recognized after some 
> DIGITS isn't correct, isn't it?
>
> Any ideas?
>   
You have to tell it what to do to verify its selection. the '.' tells it 
to look for 0..9 and that fails. Then you have auto-generated a lexer 
rule for '.' and made it all ambiguous ;-). Rule number one if you are 
not yet very familiar with ANTLR is to NOT put 'literals' in your 
parser. It tempts you to think that the lexer is being driven by the 
parser, but the lexer runs all the way through the input first.

For your simple rule, you can have:


foo : NUMERIC DOT;


NUMERIC  : ('0'..'9')+ ( ('.' '0'..'9')=> '.' ('0'..'9')+) ;
DOT : '.' ;

But that precludes:

5.

from being a floating point number of course.


Jim

From joe.peterson at intel.com  Wed Feb 18 10:51:56 2009
From: joe.peterson at intel.com (Peterson, Joe)
Date: Wed, 18 Feb 2009 10:51:56 -0800
Subject: [antlr-interest] When a comment not a comment
Message-ID: <BCF80163639E9F4296FC4B208F99BA47A285F788@orsmsx504.amr.corp.intel.com>

Hello all,

I have a need to have an exception to my comment rule that I want to know the best way to handle.  Basically, I need to not treat something that starts with, say, #ABCD as not a comment. (This is for backward compatibility.)

For example:
# This is a comment
Something = value;
#ABCD This = that
This needs to treat the third line as if the #ABCD didn't exist.  So I'm trying something like this:

fragment  NONCOMMENT :  '#ABCD' ;

COMMENT
     :   NONCOMMENT  { $channel=HIDDEN; }
    |   '#' ~('\r' | '\n')* { $channel=HIDDEN; };

This seems to work fine, but when I check the grammar, I get a warning that #ABCD can match multiple alternatives and so the second alternative is disabled.  This is the desired behavior, of course, but since it gives me a warning, I wonder if there a better way to switch off treating this thing that looks like a comment as a comment.

Thanks,
-JEEP
Joe Peterson
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090218/c9ecaec5/attachment.html 

From michael.bedward at gmail.com  Wed Feb 18 16:04:15 2009
From: michael.bedward at gmail.com (Michael Bedward)
Date: Thu, 19 Feb 2009 11:04:15 +1100
Subject: [antlr-interest] When a comment not a comment
In-Reply-To: <BCF80163639E9F4296FC4B208F99BA47A285F788@orsmsx504.amr.corp.intel.com>
References: <BCF80163639E9F4296FC4B208F99BA47A285F788@orsmsx504.amr.corp.intel.com>
Message-ID: <e24c4c270902181604s14365c49mce857702ccc4c8f6@mail.gmail.com>

Hi Joe,

How about this...

NONCOMMENT  : '#ABCD' { $channel = HIDDEN; }
            ;

COMMENT     : '#' ~('\r' | '\n')* NEWLINE   { $channel = HIDDEN; }
            ;

NEWLINE     : '\r' ('\n')?
            | '\n'
            ;

Michael

From g.r.vansickle at att.net  Wed Feb 18 23:18:41 2009
From: g.r.vansickle at att.net (Gary R. Van Sickle)
Date: Thu, 19 Feb 2009 01:18:41 -0600
Subject: [antlr-interest] Bug in Imaginary Node Constructors
Message-ID: <1B19127F84C244D58467BD1D79084CDC@DFW5RB41>

This is with the C target.  This builds, and the resulting target files
compile:

declarator_suffix
  :   '[' constant_expression ']' -> ^(BRACKETED_CONST_EXPR[$lc,
"BRACKETED_CONST_EXPR"] constant_expression)
  [...etc...]

But you'll notice it's missing an "lc=" anywhere.  When the resulting parser
is run, it segfaults.  Seems to me that ANTLR should refuse to compile this.

-- 
Gary R. Van Sickle


From avidtrober at gmail.com  Thu Feb 19 00:30:16 2009
From: avidtrober at gmail.com (Avid Trober)
Date: Thu, 19 Feb 2009 02:30:16 -0600
Subject: [antlr-interest]  DFA argument "s"
Message-ID: <0F84387C41C04C6D93AA0D676E32C344@homelaptop>

What determines the value of the "s" argument to a DFA routine such as this?

protected internal int DFA21_SpecialStateTransition(DFA dfa, int s, IIntStream _input) 

The DFA is called via this in the parser:

alt21 = dfa21.Predict(input);

then, goes through some ANTLR call frames before emerging in the above DFA call with "s" set to some value.  (That value is braching to the wrong case statement that I would expect, but can't figure out why).

Thanks in advance.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090219/161dc1aa/attachment.html 

From thomas.woelfle at interactive-objects.com  Thu Feb 19 00:54:03 2009
From: thomas.woelfle at interactive-objects.com (Thomas Woelfle)
Date: Thu, 19 Feb 2009 09:54:03 +0100
Subject: [antlr-interest] Problem when parsing numerics
In-Reply-To: <499C38AE.2060205@temporal-wave.com>
References: <2969488.3161234948794703.JavaMail.root@star>	<499C1E98.4070805@interactive-objects.com>
	<499C38AE.2060205@temporal-wave.com>
Message-ID: <499D1E2B.9090907@interactive-objects.com>

Hi Jim,
> You have to tell it what to do to verify its selection. the '.' tells it 
> to look for 0..9 and that fails. Then you have auto-generated a lexer 
> rule for '.' and made it all ambiguous ;-). Rule number one if you are 
> not yet very familiar with ANTLR is to NOT put 'literals' in your 
> parser. It tempts you to think that the lexer is being driven by the 
> parser, but the lexer runs all the way through the input first.
>
> For your simple rule, you can have:
>
>
> foo : NUMERIC DOT;
>
>
> NUMERIC  : ('0'..'9')+ ( ('.' '0'..'9')=> '.' ('0'..'9')+) ;
> DOT : '.' ;
>
> But that precludes:
>
> 5.
>
> from being a floating point number of course.
>
>
> Jim
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>   
Ok, you're right. Putting literals in a parser rule isn't a good idea. 
But even when factoring out "." into the DOT lexer rule the result is 
the same.
I think my problem is not the parser but the lexer. As far as I know a 
lexer usually tokenizes an input stream always trying to find the 
longest valid token. In my case valid tokens are NUMERICs and DOTs. 
Where a NUMERIC can be "5", "5.5", "123.56".
"5." is not a NUMERIC. Having that input stream I would have expected 
the lexer to tokenize it into two tokens NUMERIC "5" and DOT ".".

I have reduced the grammer to a a lexer grammer containing only the two 
rules for NUMERIC and DOT

lexer grammar Simple;

options {language=Java;}

@header
{
package test;
}

NUMERIC  : ('0'..'9')+ ('.' ('0'..'9')+)? ;
DOT : '.' ;

Then I've tried to print out all tokens for the input '5.' using 
following simple test runner:

package test;

import org.antlr.runtime.ANTLRStringStream;
import org.antlr.runtime.CommonTokenStream;

public class Main
{
    public static void main(final String[] args)
    {
        final Simple lexer = new Simple(new ANTLRStringStream("5."));
        final CommonTokenStream stream = new CommonTokenStream(lexer);
        for(final Object token : stream.getTokens())
        {
            System.out.println(token);
        }
    }
}

The result is the same. It cannot tokenize that string. It works with 
the input strings "5" and "5.5." but not with "5.". Using a syntactic 
predicate as you suggested in your previous mail  resulted in the same 
exception.

Regards,
Thomas

-- 
Interactive Objects Software GmbH
Basler Strasse 61
79100 Freiburg, Germany

Phone:  +49 761 400 73 0
mailto:thomas.woelfle at interactive-objects.com


------------------------------------------------------------------------

Interactive Objects' Legacy Modernization Solutions 

Get Your Applications SOA-Ready!

See http://www.interactive-objects.com/ for more information.

------------------------------------------------------------------------


Interactive Objects Software GmbH | Freiburg | Gesch?ftsf?hrer: Alberto Perandones, Andrea Hemprich
| AG Frbg. HRB 5810 | USt-ID: DE 197983057


From Achim.Dahlhoff at de.bosch.com  Thu Feb 19 07:10:04 2009
From: Achim.Dahlhoff at de.bosch.com (Dahlhoff Achim (CM-AI/PJ-VW37))
Date: Thu, 19 Feb 2009 16:10:04 +0100
Subject: [antlr-interest] Using the python output with ANTLR3
Message-ID: <F460390DA2C115469AFACD3583F4198502337EC3@SI-MBX07.de.bosch.com>

Hi all.

I just signed up on this list after contacting Mr. Niemann about the antlr Python binding. He suggested checking here for a little help.

To transform a large bunch of java interface files to classes and stubs for a (broad) Java-to-C interface, I would like to generate all of the wrapper code and tables needed for JNI using a code-generator written in Python (I have more experience in python and think it es better suited for creating text outputs).

When I launch ANTLR 3.1.1 with the Python output option on the Java 1.5 grammar file (from the antlr website), I am experiencing some problems.

First of all, antlr outputs an internal error and some warnings. Then, the generated python files contain a few lines of code, which are more java than python and won't compile without some manual fixing. And when I'm done with that, the generated parser won't work... :-(

Am I missing something here?



The output of antlr when taking the Java 1.5 grammer and just adding the 'language=Python' option:


C:\MIB\ANTLR>java -classpath ./antlrworks-1.2.1.jar org.antlr.Tool grammar\Java.g

ANTLR Parser Generator  Version 3.1.1
error(10):  internal error: eval tree parse error : <AST>:0:0: unexpected AST node:

org.antlr.stringtemplate.language.ActionEvaluator.expr(Unknown Source)
org.antlr.stringtemplate.language.ActionEvaluator.action(Unknown Source)
org.antlr.stringtemplate.language.ASTExpr.evaluateExpression(Unknown Source)
org.antlr.stringtemplate.language.ASTExpr.handleExprOptions(Unknown Source)
org.antlr.stringtemplate.language.ASTExpr.write(Unknown Source)
org.antlr.stringtemplate.StringTemplate.write(Unknown Source)
org.antlr.stringtemplate.language.ConditionalExpr.writeSubTemplate(Unknown Sourc
e)
org.antlr.stringtemplate.language.ConditionalExpr.write(Unknown Source)
org.antlr.stringtemplate.StringTemplate.write(Unknown Source)
org.antlr.stringtemplate.language.ASTExpr.write(Unknown Source)
org.antlr.stringtemplate.language.ASTExpr.writeAttribute(Unknown Source)
org.antlr.stringtemplate.language.ActionEvaluator.action(Unknown Source)
org.antlr.stringtemplate.language.ASTExpr.write(Unknown Source)
org.antlr.stringtemplate.StringTemplate.write(Unknown Source)
org.antlr.stringtemplate.language.ASTExpr.write(Unknown Source)
org.antlr.stringtemplate.language.ASTExpr.writeAttribute(Unknown Source)
org.antlr.stringtemplate.language.ActionEvaluator.action(Unknown Source)
org.antlr.stringtemplate.language.ASTExpr.write(Unknown Source)
org.antlr.stringtemplate.StringTemplate.write(Unknown Source)
org.antlr.codegen.CodeGenerator.write(CodeGenerator.java:1275)
org.antlr.codegen.Target.genRecognizerFile(Target.java:94)
org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:460)
org.antlr.Tool.generateRecognizer(Tool.java:420)
org.antlr.Tool.process(Tool.java:287)
org.antlr.Tool.main(Tool.java:72)



Then, the python interpreter stumbles over this:

   if not ((t1.getLine() == t2.getLine() && .....

(python requires 'and', not '&&'.)

or this:

   protected boolean enumIsKeyword = true;

that looks like java. Python wood need something like    enumIsKeyword=True
Finally this:

   if (!enumIsKeyword) _type=Identifier;

Here, the ! operator instead of 'not' is used, and the colon is missing.
It should be:     if not enumIsKeyword: _type=Identifier


When I fix these little bugs manually in the antlr output and try to feed it with a sample java file, the parser fails:

 Traceback (most recent call last):
   File "testprog.py", line 59, in ?
     main(sys.argv[1:])
   File "testprog.py", line 35, in main
     parser.compilationUnit()
   File "grammar\JavaParser.py", line 361, in compilationUnit
     alt8 = self.dfa8.predict(self.input)
   File "C:\Dahlhoff\MIB\ANTLRtest\antlr3\dfa.py", line 92, in predict
     c = input.LA(1)
   File "C:\Dahlhoff\MIB\ANTLRtest\antlr3\streams.py", line 859, in LA
     return self.LT(i).type
   File "C:\Dahlhoff\MIB\ANTLRtest\antlr3\streams.py", line 801, in LT
     self.fillBuffer()
   File "C:\Dahlhoff\MIB\ANTLRtest\antlr3\streams.py", line 669, in fillBuffer
     t = self.tokenSource.nextToken()
   File "C:\Dahlhoff\MIB\ANTLRtest\antlr3\recognizers.py", line 1133, in nextToken
     self._state.tokenStartCharIndex = self.input.index()
 TypeError: find/rfind/index/rindex() takes at least 1 argument (0 given)



Thanks for any help with this.

Achim.
____________________________________

. (CM-AI/PJ-VW37)

Blaupunkt GmbH
Robert-Bosch-Stra?e 200
31139 Hildesheim
www.blaupunkt.com

Tel. 5395
Fax -
PC-Fax -
Mobil -
Achim.Dahlhoff at de.bosch.com

Sitz: Hildesheim, Registergericht: Amtsgericht Hildesheim HRB 120
Aufsichtsratsvorsitzender: Volkmar Denner; Gesch?ftsf?hrung: Uwe Thomas,
Egbert Hellwig, Dirk Hoheisel, Michael Klemm
Blaupunkt GmbH - Ein Unternehmen der Bosch Gruppe


From jimi at temporal-wave.com  Thu Feb 19 07:25:47 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 19 Feb 2009 07:25:47 -0800
Subject: [antlr-interest] Bug in Imaginary Node Constructors
In-Reply-To: <1B19127F84C244D58467BD1D79084CDC@DFW5RB41>
References: <1B19127F84C244D58467BD1D79084CDC@DFW5RB41>
Message-ID: <499D79FB.9010507@temporal-wave.com>

Gary R. Van Sickle wrote:
> This is with the C target.  This builds, and the resulting target files
> compile:
>
> declarator_suffix
>   :   '[' constant_expression ']' -> ^(BRACKETED_CONST_EXPR[$lc,
> "BRACKETED_CONST_EXPR"] constant_expression)
>   [...etc...]
>
> But you'll notice it's missing an "lc=" anywhere.  When the resulting parser
> is run, it segfaults.  Seems to me that ANTLR should refuse to compile this.
>
>   
Yeah - nothing I can do in the target codegen. This is one of those 
things that will improve a lot once v3 is using a the v3 grammar to 
parse the input files.


Jim

From sharwell at pixelminegames.com  Thu Feb 19 08:26:26 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Thu, 19 Feb 2009 10:26:26 -0600
Subject: [antlr-interest] Using the python output with ANTLR3
In-Reply-To: <F460390DA2C115469AFACD3583F4198502337EC3@SI-MBX07.de.bosch.com>
References: <F460390DA2C115469AFACD3583F4198502337EC3@SI-MBX07.de.bosch.com>
Message-ID: <86403CA0939415448BCCB83855EFE09AA679B8@Bloodymary.ironwillgames.com>

You'll need to convert all actions and semantic predicates to valid python code. These are present in [at least] the following rules:

assignmentOperator
relationalOp
shiftOp
ENUM
ASSERT

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Dahlhoff Achim (CM-AI/PJ-VW37)
Sent: Thursday, February 19, 2009 9:10 AM
To: 'antlr-interest at antlr.org'
Subject: [antlr-interest] Using the python output with ANTLR3

Hi all.

I just signed up on this list after contacting Mr. Niemann about the antlr Python binding. He suggested checking here for a little help.

To transform a large bunch of java interface files to classes and stubs for a (broad) Java-to-C interface, I would like to generate all of the wrapper code and tables needed for JNI using a code-generator written in Python (I have more experience in python and think it es better suited for creating text outputs).

When I launch ANTLR 3.1.1 with the Python output option on the Java 1.5 grammar file (from the antlr website), I am experiencing some problems.

First of all, antlr outputs an internal error and some warnings. Then, the generated python files contain a few lines of code, which are more java than python and won't compile without some manual fixing. And when I'm done with that, the generated parser won't work... :-(

Am I missing something here?



The output of antlr when taking the Java 1.5 grammer and just adding the 'language=Python' option:


C:\MIB\ANTLR>java -classpath ./antlrworks-1.2.1.jar org.antlr.Tool grammar\Java.g

ANTLR Parser Generator  Version 3.1.1
error(10):  internal error: eval tree parse error : <AST>:0:0: unexpected AST node:

org.antlr.stringtemplate.language.ActionEvaluator.expr(Unknown Source)
org.antlr.stringtemplate.language.ActionEvaluator.action(Unknown Source)
org.antlr.stringtemplate.language.ASTExpr.evaluateExpression(Unknown Source)
org.antlr.stringtemplate.language.ASTExpr.handleExprOptions(Unknown Source)
org.antlr.stringtemplate.language.ASTExpr.write(Unknown Source)
org.antlr.stringtemplate.StringTemplate.write(Unknown Source)
org.antlr.stringtemplate.language.ConditionalExpr.writeSubTemplate(Unknown Sourc
e)
org.antlr.stringtemplate.language.ConditionalExpr.write(Unknown Source)
org.antlr.stringtemplate.StringTemplate.write(Unknown Source)
org.antlr.stringtemplate.language.ASTExpr.write(Unknown Source)
org.antlr.stringtemplate.language.ASTExpr.writeAttribute(Unknown Source)
org.antlr.stringtemplate.language.ActionEvaluator.action(Unknown Source)
org.antlr.stringtemplate.language.ASTExpr.write(Unknown Source)
org.antlr.stringtemplate.StringTemplate.write(Unknown Source)
org.antlr.stringtemplate.language.ASTExpr.write(Unknown Source)
org.antlr.stringtemplate.language.ASTExpr.writeAttribute(Unknown Source)
org.antlr.stringtemplate.language.ActionEvaluator.action(Unknown Source)
org.antlr.stringtemplate.language.ASTExpr.write(Unknown Source)
org.antlr.stringtemplate.StringTemplate.write(Unknown Source)
org.antlr.codegen.CodeGenerator.write(CodeGenerator.java:1275)
org.antlr.codegen.Target.genRecognizerFile(Target.java:94)
org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:460)
org.antlr.Tool.generateRecognizer(Tool.java:420)
org.antlr.Tool.process(Tool.java:287)
org.antlr.Tool.main(Tool.java:72)



Then, the python interpreter stumbles over this:

   if not ((t1.getLine() == t2.getLine() && .....

(python requires 'and', not '&&'.)

or this:

   protected boolean enumIsKeyword = true;

that looks like java. Python wood need something like    enumIsKeyword=True
Finally this:

   if (!enumIsKeyword) _type=Identifier;

Here, the ! operator instead of 'not' is used, and the colon is missing.
It should be:     if not enumIsKeyword: _type=Identifier


When I fix these little bugs manually in the antlr output and try to feed it with a sample java file, the parser fails:

 Traceback (most recent call last):
   File "testprog.py", line 59, in ?
     main(sys.argv[1:])
   File "testprog.py", line 35, in main
     parser.compilationUnit()
   File "grammar\JavaParser.py", line 361, in compilationUnit
     alt8 = self.dfa8.predict(self.input)
   File "C:\Dahlhoff\MIB\ANTLRtest\antlr3\dfa.py", line 92, in predict
     c = input.LA(1)
   File "C:\Dahlhoff\MIB\ANTLRtest\antlr3\streams.py", line 859, in LA
     return self.LT(i).type
   File "C:\Dahlhoff\MIB\ANTLRtest\antlr3\streams.py", line 801, in LT
     self.fillBuffer()
   File "C:\Dahlhoff\MIB\ANTLRtest\antlr3\streams.py", line 669, in fillBuffer
     t = self.tokenSource.nextToken()
   File "C:\Dahlhoff\MIB\ANTLRtest\antlr3\recognizers.py", line 1133, in nextToken
     self._state.tokenStartCharIndex = self.input.index()
 TypeError: find/rfind/index/rindex() takes at least 1 argument (0 given)



Thanks for any help with this.

Achim.
____________________________________

. (CM-AI/PJ-VW37)

Blaupunkt GmbH
Robert-Bosch-Stra?e 200
31139 Hildesheim
www.blaupunkt.com

Tel. 5395
Fax -
PC-Fax -
Mobil -
Achim.Dahlhoff at de.bosch.com

Sitz: Hildesheim, Registergericht: Amtsgericht Hildesheim HRB 120
Aufsichtsratsvorsitzender: Volkmar Denner; Gesch?ftsf?hrung: Uwe Thomas,
Egbert Hellwig, Dirk Hoheisel, Michael Klemm
Blaupunkt GmbH - Ein Unternehmen der Bosch Gruppe


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From pink at odahoda.de  Thu Feb 19 11:15:21 2009
From: pink at odahoda.de (Benjamin Niemann)
Date: Thu, 19 Feb 2009 20:15:21 +0100
Subject: [antlr-interest] Using the python output with ANTLR3
In-Reply-To: <F460390DA2C115469AFACD3583F4198502337EC3@SI-MBX07.de.bosch.com>
References: <F460390DA2C115469AFACD3583F4198502337EC3@SI-MBX07.de.bosch.com>
Message-ID: <543531490902191115x544f1cafo9512969e41ceb62@mail.gmail.com>

Hi,

On Thu, Feb 19, 2009 at 4:10 PM, Dahlhoff Achim (CM-AI/PJ-VW37)
<Achim.Dahlhoff at de.bosch.com> wrote:
> Hi all.
>
> I just signed up on this list after contacting Mr. Niemann about the antlr Python binding. He suggested checking here for a little help.
>
> To transform a large bunch of java interface files to classes and stubs for a (broad) Java-to-C interface, I would like to generate all of the wrapper code and tables needed for JNI using a code-generator written in Python (I have more experience in python and think it es better suited for creating text outputs).
>
> When I launch ANTLR 3.1.1 with the Python output option on the Java 1.5 grammar file (from the antlr website), I am experiencing some problems.
>
> First of all, antlr outputs an internal error and some warnings. Then, the generated python files contain a few lines of code, which are more java than python and won't compile without some manual fixing. And when I'm done with that, the generated parser won't work... :-(
>
> Am I missing something here?
>
>
>
> The output of antlr when taking the Java 1.5 grammer and just adding the 'language=Python' option:
>
>
> C:\MIB\ANTLR>java -classpath ./antlrworks-1.2.1.jar org.antlr.Tool grammar\Java.g
>
> ANTLR Parser Generator  Version 3.1.1
> error(10):  internal error: eval tree parse error : <AST>:0:0: unexpected AST node:
>
> org.antlr.stringtemplate.language.ActionEvaluator.expr(Unknown Source)
> org.antlr.stringtemplate.language.ActionEvaluator.action(Unknown Source)
> org.antlr.stringtemplate.language.ASTExpr.evaluateExpression(Unknown Source)
> org.antlr.stringtemplate.language.ASTExpr.handleExprOptions(Unknown Source)
> org.antlr.stringtemplate.language.ASTExpr.write(Unknown Source)
> org.antlr.stringtemplate.StringTemplate.write(Unknown Source)
> org.antlr.stringtemplate.language.ConditionalExpr.writeSubTemplate(Unknown Sourc
> e)
> org.antlr.stringtemplate.language.ConditionalExpr.write(Unknown Source)
> org.antlr.stringtemplate.StringTemplate.write(Unknown Source)
> org.antlr.stringtemplate.language.ASTExpr.write(Unknown Source)
> org.antlr.stringtemplate.language.ASTExpr.writeAttribute(Unknown Source)
> org.antlr.stringtemplate.language.ActionEvaluator.action(Unknown Source)
> org.antlr.stringtemplate.language.ASTExpr.write(Unknown Source)
> org.antlr.stringtemplate.StringTemplate.write(Unknown Source)
> org.antlr.stringtemplate.language.ASTExpr.write(Unknown Source)
> org.antlr.stringtemplate.language.ASTExpr.writeAttribute(Unknown Source)
> org.antlr.stringtemplate.language.ActionEvaluator.action(Unknown Source)
> org.antlr.stringtemplate.language.ASTExpr.write(Unknown Source)
> org.antlr.stringtemplate.StringTemplate.write(Unknown Source)
> org.antlr.codegen.CodeGenerator.write(CodeGenerator.java:1275)
> org.antlr.codegen.Target.genRecognizerFile(Target.java:94)
> org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:460)
> org.antlr.Tool.generateRecognizer(Tool.java:420)
> org.antlr.Tool.process(Tool.java:287)
> org.antlr.Tool.main(Tool.java:72)

That looks like a known problem. I don't know what the exact issue was
(something with the way antlrworks was packages, I think), but using
the antlr.jar instead of antlrworks.jar (plus stringtemplate and
antlr2 which are bundled with antlrworks) should fix it.

> Then, the python interpreter stumbles over this:
>
>   if not ((t1.getLine() == t2.getLine() && .....
>
> (python requires 'and', not '&&'.)
>
> or this:
>
>   protected boolean enumIsKeyword = true;
>
> that looks like java. Python wood need something like    enumIsKeyword=True
> Finally this:
>
>   if (!enumIsKeyword) _type=Identifier;
>
> Here, the ! operator instead of 'not' is used, and the colon is missing.
> It should be:     if not enumIsKeyword: _type=Identifier

As Sam already wrote the action code has to be Python (or whatever the
target is). There is a Python version of Java.g in the example
package.

> When I fix these little bugs manually in the antlr output and try to feed it with a sample java file, the parser fails:
>
>  Traceback (most recent call last):
>   File "testprog.py", line 59, in ?
>     main(sys.argv[1:])
>   File "testprog.py", line 35, in main
>     parser.compilationUnit()
>   File "grammar\JavaParser.py", line 361, in compilationUnit
>     alt8 = self.dfa8.predict(self.input)
>   File "C:\Dahlhoff\MIB\ANTLRtest\antlr3\dfa.py", line 92, in predict
>     c = input.LA(1)
>   File "C:\Dahlhoff\MIB\ANTLRtest\antlr3\streams.py", line 859, in LA
>     return self.LT(i).type
>   File "C:\Dahlhoff\MIB\ANTLRtest\antlr3\streams.py", line 801, in LT
>     self.fillBuffer()
>   File "C:\Dahlhoff\MIB\ANTLRtest\antlr3\streams.py", line 669, in fillBuffer
>     t = self.tokenSource.nextToken()
>   File "C:\Dahlhoff\MIB\ANTLRtest\antlr3\recognizers.py", line 1133, in nextToken
>     self._state.tokenStartCharIndex = self.input.index()
>  TypeError: find/rfind/index/rindex() takes at least 1 argument (0 given)

That looks like the input of the lexer is a string. The input for the
lexer has to be one of the CharStream classes.


-Ben

From cowang at comcast.net  Thu Feb 19 13:11:08 2009
From: cowang at comcast.net (George S. Cowan)
Date: Thu, 19 Feb 2009 16:11:08 -0500
Subject: [antlr-interest] SUGGESTION: Make unit testing available for
	Composite Grammars
Message-ID: <8BCB14464A274F0594AB399F0525553C@gsce0ae1cfad8d>

ANTLR's new Composite Grammar facility presents some difficulties when
trying to use good unit testing practices, and I hope that these
difficulties can be addressed in an upcoming release. The problems apply to
both gUnit and JUnit.
 
In both of the cases that follow, the general problem is that a test must
include code that references the level at which a rule is defined - thus a
test will break when a fix is implemented by overriding the rule at a new
level. A test will also break when a change is made to a rule by overriding
it at a new level, even if the change does not affect that particular test. 
 
No matter how hard it may be to change ANTLR and its templates, at least the
fix for the problems is simple to state: "ANTLR must delegate all rule
access from the top level in a way that external callers are not required to
know about which level the rule is delegated to." 
 
First, an easy problem. The lexers generated by ANTLR 3.1.1 do not delegate
their rules from the top level at all. For a workaround, see
http://www.antlr.org/pipermail/antlr-interest/2009-January/032201.html
My impression is that this Lexer problem can be easily solved by having
ANTLR add the delegating rules to the main lexer, but my experience is only
with very straightforward lexers.
 
THE BIGGER PROBLEM
 
AST results generated from a rule have a return type that depends upon the
subgrammar in which the rule is defined. Here is an example of a delegation
from the a top level grammar C that might be generated in its parser
CParser.java:
 
  public C_P2_P1.spaces_return spaces() throws RecognitionException { 
    return gP1.spaces(); 
  }
 
(For those not already familiar with this code: The spaces() function
returns a value of type "C_P2_P1.spaces_return", which is a a subclass
defined in the class "C_P2_P1"  generated by ANTLR for the grammar P1 which
is imported by P2 which is imported by the top level grammar, C. This
"spaces_return" subclass contains, among other things, the tree that must be
accessed by a test of the rule for "spaces".) 
 
Therefore, the testing program must know that the rule is delegated to the
P1 subgrammar in order to know  the return type of the rule. If the spaces
rule is overridden in the C grammar, the return value will become
"CParser.spaces_return" and any tests that assume "C_P2_P1.spaces_return"
will be broken, even if the issue they are testing still works.
 
Note that the problem applies not just with tests of AST trees but with
tests of any value returned from a rule, which includes string template
results.
 
SUGGESTED SOLUTIONS
 
One possible solution is to define all the rule_return subclasses in the
generated parser for the top level, no matter what level the rule is from,
e.g., "CParser.spaces_return". Since all the generated subgrammar parsers
know about the top level parser, this should not cause any problems.
 
An alternative is for every rule to return a Map or an array of maplets. For
ordinary programming, I don't like this as much because its generality
introduces too many opportunities for errors. In generated code, it's more
controlled and simplifies ANTLR's situation where there must be many
different kinds of return collections. It also gets rid of all those
subclass files in the class directory, like "C_P2_P1$spaces_return.class".
On the negative side, I expect it would use a little more space and time for
each return value.
 
A compromise would be to define a single class that had the usual start,
stop, tree, and/or st values along with a map to hold extra return values
when needed.
 
The key issue is to maintain the unit test pattern while allowing all the
new patterns that Composite grammars introduce.
 

George
 
P.S. see
http://www.antlr.org/wiki/display/ANTLR3/Test-Driven+Development+with+ANTLR
for an example of test-driven development of a grammar using TestNG, but not
using composite grammars.

 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090219/493733a6/attachment.html 

From joe.peterson at intel.com  Thu Feb 19 15:32:59 2009
From: joe.peterson at intel.com (Peterson, Joe)
Date: Thu, 19 Feb 2009 15:32:59 -0800
Subject: [antlr-interest] When a comment not a comment
In-Reply-To: <e24c4c270902181604s14365c49mce857702ccc4c8f6@mail.gmail.com>
References: <BCF80163639E9F4296FC4B208F99BA47A285F788@orsmsx504.amr.corp.intel.com>
	<e24c4c270902181604s14365c49mce857702ccc4c8f6@mail.gmail.com>
Message-ID: <BCF80163639E9F4296FC4B208F99BA47A298080C@orsmsx504.amr.corp.intel.com>

Michael,

Thanks for the response.  You suggested:
> NONCOMMENT  : '#ABCD' { $channel = HIDDEN; };
> COMMENT     : '#' ~('\r' | '\n')* NEWLINE   { $channel = HIDDEN; };
> NEWLINE     : '\r' ('\n')? | '\n';

I've tried that but then a line like the one below is treated as a comment:
        #ABCD this = that
Apparently unless you set it to fuzzy, you get the longest match.  I can't turn on fuzzy, so I need to figure out another method.

-JEEP


From kedar.mhaswade at gmail.com  Thu Feb 19 16:10:13 2009
From: kedar.mhaswade at gmail.com (kedar mhaswade)
Date: Thu, 19 Feb 2009 16:10:13 -0800
Subject: [antlr-interest] Parsing a command line?
Message-ID: <2aa2621c0902191610h2391fb4q6f18973ea489b825@mail.gmail.com>

I am writing a command line interface program in Java. The syntax of the
command line is sort of defined, but is not really formally defined in terms
of an EBNF or railroad diagram. My questions are:

- Is ANTLR (and ANTLRWorks) the right tool to define the grammar and write
the parser to parse the command line?

- An implementation of the command line parsing works, but there are rather
too many hacks and although I haven't done any parsing course in school, it
occurs to me that that is not the right way of doing things.  Should I be
investing into ANTLR for this problem?

- Has anyone done this kind of thing?

Thanks,
Kedar
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090219/3f2c5a25/attachment.html 

From lgcraymer at yahoo.com  Thu Feb 19 16:17:05 2009
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Thu, 19 Feb 2009 16:17:05 -0800 (PST)
Subject: [antlr-interest] Using the python output with ANTLR3
References: <F460390DA2C115469AFACD3583F4198502337EC3@SI-MBX07.de.bosch.com>
Message-ID: <186991.21216.qm@web55901.mail.re3.yahoo.com>


Take a look at SWIG (http://www.swig.org/).? It may do everything that you want already.

--Loring



----- Original Message ----
> From: Dahlhoff Achim (CM-AI/PJ-VW37) <Achim.Dahlhoff at de.bosch.com>
> To: "antlr-interest at antlr.org" <antlr-interest at antlr.org>
> Sent: Thursday, February 19, 2009 7:10:04 AM
> Subject: [antlr-interest] Using the python output with ANTLR3
> 
> Hi all.
> 
> I just signed up on this list after contacting Mr. Niemann about the antlr 
> Python binding. He suggested checking here for a little help.
> 
> To transform a large bunch of java interface files to classes and stubs for a 
> (broad) Java-to-C interface, I would like to generate all of the wrapper code 
> and tables needed for JNI using a code-generator written in Python (I have more 
> experience in python and think it es better suited for creating text outputs).
> 
> When I launch ANTLR 3.1.1 with the Python output option on the Java 1.5 grammar 
> file (from the antlr website), I am experiencing some problems.
> 
> First of all, antlr outputs an internal error and some warnings. Then, the 
> generated python files contain a few lines of code, which are more java than 
> python and won't compile without some manual fixing. And when I'm done with 
> that, the generated parser won't work... :-(
> 
> Am I missing something here?
> 
> 
> 
> The output of antlr when taking the Java 1.5 grammer and just adding the 
> 'language=Python' option:
> 
> 
> C:\MIB\ANTLR>java -classpath ./antlrworks-1.2.1.jar org.antlr.Tool 
> grammar\Java.g
> 
> ANTLR Parser Generator? Version 3.1.1
> error(10):? internal error: eval tree parse error : :0:0: unexpected AST 
> node:
> 
> org.antlr.stringtemplate.language.ActionEvaluator.expr(Unknown Source)
> org.antlr.stringtemplate.language.ActionEvaluator.action(Unknown Source)
> org.antlr.stringtemplate.language.ASTExpr.evaluateExpression(Unknown Source)
> org.antlr.stringtemplate.language.ASTExpr.handleExprOptions(Unknown Source)
> org.antlr.stringtemplate.language.ASTExpr.write(Unknown Source)
> org.antlr.stringtemplate.StringTemplate.write(Unknown Source)
> org.antlr.stringtemplate.language.ConditionalExpr.writeSubTemplate(Unknown Sourc
> e)
> org.antlr.stringtemplate.language.ConditionalExpr.write(Unknown Source)
> org.antlr.stringtemplate.StringTemplate.write(Unknown Source)
> org.antlr.stringtemplate.language.ASTExpr.write(Unknown Source)
> org.antlr.stringtemplate.language.ASTExpr.writeAttribute(Unknown Source)
> org.antlr.stringtemplate.language.ActionEvaluator.action(Unknown Source)
> org.antlr.stringtemplate.language.ASTExpr.write(Unknown Source)
> org.antlr.stringtemplate.StringTemplate.write(Unknown Source)
> org.antlr.stringtemplate.language.ASTExpr.write(Unknown Source)
> org.antlr.stringtemplate.language.ASTExpr.writeAttribute(Unknown Source)
> org.antlr.stringtemplate.language.ActionEvaluator.action(Unknown Source)
> org.antlr.stringtemplate.language.ASTExpr.write(Unknown Source)
> org.antlr.stringtemplate.StringTemplate.write(Unknown Source)
> org.antlr.codegen.CodeGenerator.write(CodeGenerator.java:1275)
> org.antlr.codegen.Target.genRecognizerFile(Target.java:94)
> org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:460)
> org.antlr.Tool.generateRecognizer(Tool.java:420)
> org.antlr.Tool.process(Tool.java:287)
> org.antlr.Tool.main(Tool.java:72)
> 
> 
> 
> Then, the python interpreter stumbles over this:
> 
> ? if not ((t1.getLine() == t2.getLine() && .....
> 
> (python requires 'and', not '&&'.)
> 
> or this:
> 
> ? protected boolean enumIsKeyword = true;
> 
> that looks like java. Python wood need something like? ? enumIsKeyword=True
> Finally this:
> 
> ? if (!enumIsKeyword) _type=Identifier;
> 
> Here, the ! operator instead of 'not' is used, and the colon is missing.
> It should be:? ? if not enumIsKeyword: _type=Identifier
> 
> 
> When I fix these little bugs manually in the antlr output and try to feed it 
> with a sample java file, the parser fails:
> 
> Traceback (most recent call last):
> ? File "testprog.py", line 59, in ?
> ? ? main(sys.argv[1:])
> ? File "testprog.py", line 35, in main
> ? ? parser.compilationUnit()
> ? File "grammar\JavaParser.py", line 361, in compilationUnit
> ? ? alt8 = self.dfa8.predict(self.input)
> ? File "C:\Dahlhoff\MIB\ANTLRtest\antlr3\dfa.py", line 92, in predict
> ? ? c = input.LA(1)
> ? File "C:\Dahlhoff\MIB\ANTLRtest\antlr3\streams.py", line 859, in LA
> ? ? return self.LT(i).type
> ? File "C:\Dahlhoff\MIB\ANTLRtest\antlr3\streams.py", line 801, in LT
> ? ? self.fillBuffer()
> ? File "C:\Dahlhoff\MIB\ANTLRtest\antlr3\streams.py", line 669, in fillBuffer
> ? ? t = self.tokenSource.nextToken()
> ? File "C:\Dahlhoff\MIB\ANTLRtest\antlr3\recognizers.py", line 1133, in 
> nextToken
> ? ? self._state.tokenStartCharIndex = self.input.index()
> TypeError: find/rfind/index/rindex() takes at least 1 argument (0 given)
> 
> 
> 
> Thanks for any help with this.
> 
> Achim.
> ____________________________________
> 
> . (CM-AI/PJ-VW37)
> 
> Blaupunkt GmbH
> Robert-Bosch-Stra?e 200
> 31139 Hildesheim
> www.blaupunkt.com
> 
> Tel. 5395
> Fax -
> PC-Fax -
> Mobil -
> Achim.Dahlhoff at de.bosch.com
> 
> Sitz: Hildesheim, Registergericht: Amtsgericht Hildesheim HRB 120
> Aufsichtsratsvorsitzender: Volkmar Denner; Gesch?ftsf?hrung: Uwe Thomas,
> Egbert Hellwig, Dirk Hoheisel, Michael Klemm
> Blaupunkt GmbH - Ein Unternehmen der Bosch Gruppe
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: 
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address



      

From jimi at temporal-wave.com  Thu Feb 19 16:44:48 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 19 Feb 2009 16:44:48 -0800
Subject: [antlr-interest] When a comment not a comment
In-Reply-To: <BCF80163639E9F4296FC4B208F99BA47A298080C@orsmsx504.amr.corp.intel.com>
References: <BCF80163639E9F4296FC4B208F99BA47A285F788@orsmsx504.amr.corp.intel.com>	<e24c4c270902181604s14365c49mce857702ccc4c8f6@mail.gmail.com>
	<BCF80163639E9F4296FC4B208F99BA47A298080C@orsmsx504.amr.corp.intel.com>
Message-ID: <499DFD00.2030102@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090219/94e884eb/attachment.html 

From parrt at cs.usfca.edu  Thu Feb 19 17:44:07 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 19 Feb 2009 17:44:07 -0800
Subject: [antlr-interest] SUGGESTION: Make unit testing available for
	Composite Grammars
In-Reply-To: <8BCB14464A274F0594AB399F0525553C@gsce0ae1cfad8d>
References: <8BCB14464A274F0594AB399F0525553C@gsce0ae1cfad8d>
Message-ID: <D3439AAC-112A-4A15-86CC-0E63E747AF13@cs.usfca.edu>


On Feb 19, 2009, at 1:11 PM, George S. Cowan wrote:

> ANTLR's new Composite Grammar facility presents some difficulties  
> when trying to use good unit testing practices, and I hope that  
> these difficulties can be addressed in an upcoming release. The  
> problems apply to both gUnit and JUnit.
>
> In both of the cases that follow, the general problem is that a test  
> must include code that references the level at which a rule is  
> defined - thus a test will break when a fix is implemented by  
> overriding the rule at a new level. A test will also break when a  
> change is made to a rule by overriding it at a new level, even if  
> the change does not affect that particular test.
>
> No matter how hard it may be to change ANTLR and its templates, at  
> least the fix for the problems is simple to state: "ANTLR must  
> delegate all rule access from the top level in a way that external  
> callers are not required to know about which level the rule is  
> delegated to."

That was my intent anyway ;)  Top level is only reliable object to  
test I think.

> First, an easy problem. The lexers generated by ANTLR 3.1.1 do not  
> delegate their rules from the top level at all.

  i think we have  number of errorsRelated to this; for example

http://www.antlr.org/jira/browse/ANTLR-353
http://www.antlr.org/jira/browse/ANTLR-386

> For a workaround, see http://www.antlr.org/pipermail/antlr-interest/2009-January/032201.html
> My impression is that this Lexer problem can be easily solved by  
> having ANTLR add the delegating rules to the main lexer, but my  
> experience is only with very straightforward lexers.

Well, the issue I see is that I don't think I intended people to call  
individual lexer rules, even from the root grammar. I expect all  
lexical stuff to go through the implicit Tokens rule invoke from  
nextToken

> THE BIGGER PROBLEM
>
> AST results generated from a rule have a return type that depends  
> upon the subgrammar in which the rule is defined. Here is an example  
> of a delegation from the a top level grammar C that might be  
> generated in its parser CParser.java:
>
>   public C_P2_P1.spaces_return spaces() throws RecognitionException {
>     return gP1.spaces();
>   }
>
> (For those not already familiar with this code: The spaces()  
> function returns a value of type "C_P2_P1.spaces_return", which is a  
> a subclass defined in the class "C_P2_P1"  generated by ANTLR for  
> the grammar P1 which is imported by P2 which is imported by the top  
> level grammar, C. This "spaces_return" subclass contains, among  
> other things, the tree that must be accessed by a test of the rule  
> for "spaces".)
>
> Therefore, the testing program must know that the rule is delegated  
> to the P1 subgrammar in order to know  the return type of the rule.  
> If the spaces rule is overridden in the C grammar, the return value  
> will become "CParser.spaces_return" and any tests that assume  
> "C_P2_P1.spaces_return" will be broken, even if the issue they are  
> testing still works.

Can we use the generic ParserRuleReturnScope object?  Hmm...that off  
work because we might have special elements in there that we need to  
access. crap.

Again, this might be a problem because we are trying to access these  
objects directly.

> Note that the problem applies not just with tests of AST trees but  
> with tests of any value returned from a rule, which includes string  
> template results.

yup. :(

> SUGGESTED SOLUTIONS
>
> One possible solution is to define all the rule_return subclasses in  
> the generated parser for the top level, no matter what level the  
> rule is from, e.g., "CParser.spaces_return". Since all the generated  
> subgrammar parsers know about the top level parser, this should not  
> cause any problems.
>
> An alternative is for every rule to return a Map or an array of  
> maplets. For ordinary programming, I don't like this as much because  
> its generality introduces too many opportunities for errors. In  
> generated code, it's more controlled and simplifies ANTLR's  
> situation where there must be many different kinds of return  
> collections. It also gets rid of all those subclass files in the  
> class directory, like "C_P2_P1$spaces_return.class". On the negative  
> side, I expect it would use a little more space and time for each  
> return value.
>
> A compromise would be to define a single class that had the usual  
> start, stop, tree, and/or st values along with a map to hold extra  
> return values when needed.
>
> The key issue is to maintain the unit test pattern while allowing  
> all the new patterns that Composite grammars introduce.

Hmm...would it be possible to test everything you need to test going  
through the root grammar rather than directly to the delegates?

Ter

From michael.bedward at gmail.com  Thu Feb 19 18:52:29 2009
From: michael.bedward at gmail.com (Michael Bedward)
Date: Fri, 20 Feb 2009 13:52:29 +1100
Subject: [antlr-interest] When a comment not a comment
In-Reply-To: <499DFD00.2030102@temporal-wave.com>
References: <BCF80163639E9F4296FC4B208F99BA47A285F788@orsmsx504.amr.corp.intel.com>
	<e24c4c270902181604s14365c49mce857702ccc4c8f6@mail.gmail.com>
	<BCF80163639E9F4296FC4B208F99BA47A298080C@orsmsx504.amr.corp.intel.com>
	<499DFD00.2030102@temporal-wave.com>
Message-ID: <e24c4c270902191852s18e649ffhff67a82a7d71e38a@mail.gmail.com>

2009/2/20 Jim Idle wrote:
> COMMENT : '#'
>                          (
>                               ( 'ABCD')=> 'ABCD'
>                             | ~('\r' | '\n')* NEWLINE
>                          )
>                          { $channel = HIDDEN; }
>                       ;
>
> NEWLINE     : '\r' ('\n')? | '\n';
>

Mmmm... I tried that one after seeing Joe's previous message, but
doesn't it have the same problem ?  ie. it will eats a line:
    #ABCD foo
...as a comment ?  Does for me in ANTLRWorks.  I must be missing something...

cheers
Michael

From jimi at temporal-wave.com  Thu Feb 19 18:54:33 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 19 Feb 2009 18:54:33 -0800
Subject: [antlr-interest] When a comment not a comment
In-Reply-To: <e24c4c270902191852s18e649ffhff67a82a7d71e38a@mail.gmail.com>
References: <BCF80163639E9F4296FC4B208F99BA47A285F788@orsmsx504.amr.corp.intel.com>	<e24c4c270902181604s14365c49mce857702ccc4c8f6@mail.gmail.com>	<BCF80163639E9F4296FC4B208F99BA47A298080C@orsmsx504.amr.corp.intel.com>	<499DFD00.2030102@temporal-wave.com>
	<e24c4c270902191852s18e649ffhff67a82a7d71e38a@mail.gmail.com>
Message-ID: <499E1B69.7030902@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090219/d8899a30/attachment.html 

From luc.traonmilin at gmail.com  Thu Feb 19 19:04:53 2009
From: luc.traonmilin at gmail.com (Luc Traonmilin)
Date: Fri, 20 Feb 2009 04:04:53 +0100
Subject: [antlr-interest]  JavaScript target status?
Message-ID: <499E1DD5.4010306@gmail.com>

Does anyone know whether this is still in active development? I get an 
error while trying to download the runtime...

Thanks.

Luc.

From luc.traonmilin at gmail.com  Thu Feb 19 19:06:28 2009
From: luc.traonmilin at gmail.com (Luc Traonmilin)
Date: Fri, 20 Feb 2009 04:06:28 +0100
Subject: [antlr-interest] JavaScript target status?
In-Reply-To: <499E1DD5.4010306@gmail.com>
References: <499E1DD5.4010306@gmail.com>
Message-ID: <499E1E34.6060207@gmail.com>

Luc Traonmilin a ?crit :
> Does anyone know whether this is still in active development? I get an 
> error while trying to download the runtime...
>
> Thanks.
>
> Luc.
>
Ok, I found it on google code...

From michael.bedward at gmail.com  Thu Feb 19 20:34:50 2009
From: michael.bedward at gmail.com (Michael Bedward)
Date: Fri, 20 Feb 2009 15:34:50 +1100
Subject: [antlr-interest] When a comment not a comment
In-Reply-To: <e24c4c270902192034r741ca857y19218ce6581fc816@mail.gmail.com>
References: <BCF80163639E9F4296FC4B208F99BA47A285F788@orsmsx504.amr.corp.intel.com>
	<e24c4c270902181604s14365c49mce857702ccc4c8f6@mail.gmail.com>
	<BCF80163639E9F4296FC4B208F99BA47A298080C@orsmsx504.amr.corp.intel.com>
	<499DFD00.2030102@temporal-wave.com>
	<e24c4c270902191852s18e649ffhff67a82a7d71e38a@mail.gmail.com>
	<499E1B69.7030902@temporal-wave.com>
	<e24c4c270902192034r741ca857y19218ce6581fc816@mail.gmail.com>
Message-ID: <e24c4c270902192034i590cf344h728cb5cea89e242a@mail.gmail.com>

> Shouldn't do - you are using the debug mode and not the interpreting mode?
>

yep

I must be doing something wrong but I can't spot it... (probably too
close to my nose :)

Michael

From jaluber at gmx.de  Thu Feb 19 22:45:18 2009
From: jaluber at gmx.de (Johannes Luber)
Date: Fri, 20 Feb 2009 07:45:18 +0100
Subject: [antlr-interest] Parsing a command line?
In-Reply-To: <2aa2621c0902191610h2391fb4q6f18973ea489b825@mail.gmail.com>
References: <2aa2621c0902191610h2391fb4q6f18973ea489b825@mail.gmail.com>
Message-ID: <499E517E.1000507@gmx.de>

kedar mhaswade schrieb:
> I am writing a command line interface program in Java. The syntax of the
> command line is sort of defined, but is not really formally defined in
> terms of an EBNF or railroad diagram. My questions are:
> 
> - Is ANTLR (and ANTLRWorks) the right tool to define the grammar and
> write the parser to parse the command line?

If you can define a grammar then you can create a grammar for ANTLR.
ANTLR possibly may be overkill here though.
> 
> - An implementation of the command line parsing works, but there are
> rather too many hacks and although I haven't done any parsing course in
> school, it occurs to me that that is not the right way of doing things. 
> Should I be investing into ANTLR for this problem?
> 
> - Has anyone done this kind of thing?

You should google for command line parsing to look at others'
implementations. GNU's getopt, NDesk.Options package, at least two
projects on CodeProject.com, and many more.

Johannes
> 
> Thanks,
> Kedar
> 
> 
> ------------------------------------------------------------------------
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From Achim.Dahlhoff at de.bosch.com  Fri Feb 20 08:50:56 2009
From: Achim.Dahlhoff at de.bosch.com (Dahlhoff Achim (CM-AI/PJ-VW37))
Date: Fri, 20 Feb 2009 17:50:56 +0100
Subject: [antlr-interest] Using the python output with ANTLR3
In-Reply-To: <543531490902191115x544f1cafo9512969e41ceb62@mail.gmail.com>
References: <F460390DA2C115469AFACD3583F4198502337EC3@SI-MBX07.de.bosch.com>
	<543531490902191115x544f1cafo9512969e41ceb62@mail.gmail.com>
Message-ID: <F460390DA2C115469AFACD3583F4198502337ECF@SI-MBX07.de.bosch.com>

Hello again...

I now tried using the antlr.jar package and the Java grammar for python from the examples package. Now both the generator and the generated parser run without warnings or errors. Thanks a lot for the hint.

Achim Dahlhoff.


> -----Urspr?ngliche Nachricht-----
> Von: Benjamin Niemann [mailto:pink at odahoda.de]
> Gesendet: Donnerstag, 19. Februar 2009 20:15
> An: Dahlhoff Achim (CM-AI/PJ-VW37)
> Cc: antlr-interest at antlr.org
> Betreff: Re: [antlr-interest] Using the python output with ANTLR3
>
> Hi,
>
> On Thu, Feb 19, 2009 at 4:10 PM, Dahlhoff Achim (CM-AI/PJ-VW37)
> <Achim.Dahlhoff at de.bosch.com> wrote:
> > Hi all.
> >
> > I just signed up on this list after contacting Mr. Niemann
> about the antlr Python binding. He suggested checking here
> for a little help.
> >
> > To transform a large bunch of java interface files to
> classes and stubs for a (broad) Java-to-C interface, I would
> like to generate all of the wrapper code and tables needed
> for JNI using a code-generator written in Python (I have more
> experience in python and think it es better suited for
> creating text outputs).
> >
> > When I launch ANTLR 3.1.1 with the Python output option on
> the Java 1.5 grammar file (from the antlr website), I am
> experiencing some problems.
> >
> > First of all, antlr outputs an internal error and some
> warnings. Then, the generated python files contain a few
> lines of code, which are more java than python and won't
> compile without some manual fixing. And when I'm done with
> that, the generated parser won't work... :-(
> >
> > Am I missing something here?
> >
> >
> >
> > The output of antlr when taking the Java 1.5 grammer and
> just adding the 'language=Python' option:
> >
> >
> > C:\MIB\ANTLR>java -classpath ./antlrworks-1.2.1.jar
> org.antlr.Tool grammar\Java.g
> >
> > ANTLR Parser Generator  Version 3.1.1
> > error(10):  internal error: eval tree parse error :
> <AST>:0:0: unexpected AST node:
> >
> >
> org.antlr.stringtemplate.language.ActionEvaluator.expr(Unknown Source)
> >
> org.antlr.stringtemplate.language.ActionEvaluator.action(Unkno
> wn Source)
> >
> org.antlr.stringtemplate.language.ASTExpr.evaluateExpression(U
> nknown Source)
> >
> org.antlr.stringtemplate.language.ASTExpr.handleExprOptions(Un
> known Source)
> > org.antlr.stringtemplate.language.ASTExpr.write(Unknown Source)
> > org.antlr.stringtemplate.StringTemplate.write(Unknown Source)
> >
> org.antlr.stringtemplate.language.ConditionalExpr.writeSubTemp
> late(Unknown Sourc
> > e)
> >
> org.antlr.stringtemplate.language.ConditionalExpr.write(Unknow
> n Source)
> > org.antlr.stringtemplate.StringTemplate.write(Unknown Source)
> > org.antlr.stringtemplate.language.ASTExpr.write(Unknown Source)
> >
> org.antlr.stringtemplate.language.ASTExpr.writeAttribute(Unkno
> wn Source)
> >
> org.antlr.stringtemplate.language.ActionEvaluator.action(Unkno
> wn Source)
> > org.antlr.stringtemplate.language.ASTExpr.write(Unknown Source)
> > org.antlr.stringtemplate.StringTemplate.write(Unknown Source)
> > org.antlr.stringtemplate.language.ASTExpr.write(Unknown Source)
> >
> org.antlr.stringtemplate.language.ASTExpr.writeAttribute(Unkno
> wn Source)
> >
> org.antlr.stringtemplate.language.ActionEvaluator.action(Unkno
> wn Source)
> > org.antlr.stringtemplate.language.ASTExpr.write(Unknown Source)
> > org.antlr.stringtemplate.StringTemplate.write(Unknown Source)
> > org.antlr.codegen.CodeGenerator.write(CodeGenerator.java:1275)
> > org.antlr.codegen.Target.genRecognizerFile(Target.java:94)
> >
> org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:460)
> > org.antlr.Tool.generateRecognizer(Tool.java:420)
> > org.antlr.Tool.process(Tool.java:287)
> > org.antlr.Tool.main(Tool.java:72)
>
> That looks like a known problem. I don't know what the exact issue was
> (something with the way antlrworks was packages, I think), but using
> the antlr.jar instead of antlrworks.jar (plus stringtemplate and
> antlr2 which are bundled with antlrworks) should fix it.
>
> > Then, the python interpreter stumbles over this:
> >
> >   if not ((t1.getLine() == t2.getLine() && .....
> >
> > (python requires 'and', not '&&'.)
> >
> > or this:
> >
> >   protected boolean enumIsKeyword = true;
> >
> > that looks like java. Python wood need something like
> enumIsKeyword=True
> > Finally this:
> >
> >   if (!enumIsKeyword) _type=Identifier;
> >
> > Here, the ! operator instead of 'not' is used, and the
> colon is missing.
> > It should be:     if not enumIsKeyword: _type=Identifier
>
> As Sam already wrote the action code has to be Python (or whatever the
> target is). There is a Python version of Java.g in the example
> package.
>
> > When I fix these little bugs manually in the antlr output
> and try to feed it with a sample java file, the parser fails:
> >
> >  Traceback (most recent call last):
> >   File "testprog.py", line 59, in ?
> >     main(sys.argv[1:])
> >   File "testprog.py", line 35, in main
> >     parser.compilationUnit()
> >   File "grammar\JavaParser.py", line 361, in compilationUnit
> >     alt8 = self.dfa8.predict(self.input)
> >   File "C:\Dahlhoff\MIB\ANTLRtest\antlr3\dfa.py", line 92,
> in predict
> >     c = input.LA(1)
> >   File "C:\Dahlhoff\MIB\ANTLRtest\antlr3\streams.py", line
> 859, in LA
> >     return self.LT(i).type
> >   File "C:\Dahlhoff\MIB\ANTLRtest\antlr3\streams.py", line
> 801, in LT
> >     self.fillBuffer()
> >   File "C:\Dahlhoff\MIB\ANTLRtest\antlr3\streams.py", line
> 669, in fillBuffer
> >     t = self.tokenSource.nextToken()
> >   File "C:\Dahlhoff\MIB\ANTLRtest\antlr3\recognizers.py",
> line 1133, in nextToken
> >     self._state.tokenStartCharIndex = self.input.index()
> >  TypeError: find/rfind/index/rindex() takes at least 1
> argument (0 given)
>
> That looks like the input of the lexer is a string. The input for the
> lexer has to be one of the CharStream classes.
>
>
> -Ben
>

From robert.soule at gmail.com  Fri Feb 20 12:36:39 2009
From: robert.soule at gmail.com (Robert Soule)
Date: Fri, 20 Feb 2009 15:36:39 -0500
Subject: [antlr-interest] void* conversion in C runtime
Message-ID: <d1316fd70902201236r4bbcaf52h1cd442ec62ff88e6@mail.gmail.com>

Hi Jim,

I am trying to write a tree grammar that recognizes an AST
and produces a second AST, using the C runtime, but compiling
with a C++ compiler.

In the generated code, I get a problem at lines that look like:

	retval.tree = ADAPTOR->rulePostProcessing(ADAPTOR, root_0);

In my grammar file which produces the first AST, the generated
code has the cast to let this be C++ compliant:

	retval.tree = (pANTLR3_BASE_TREE)(ADAPTOR->rulePostProcessing(ADAPTOR,
root_0));

Would it be possible to add the casts for tree grammars as well please?

Also, does the C runtime support AST to AST rewrite rules? So something like:

myrule: ^(A foo bar) -> ^(B bar foo);

thank you,
Robert

From jimi at temporal-wave.com  Fri Feb 20 12:40:37 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 20 Feb 2009 12:40:37 -0800
Subject: [antlr-interest] void* conversion in C runtime
In-Reply-To: <d1316fd70902201236r4bbcaf52h1cd442ec62ff88e6@mail.gmail.com>
References: <d1316fd70902201236r4bbcaf52h1cd442ec62ff88e6@mail.gmail.com>
Message-ID: <499F1545.8020802@temporal-wave.com>

Robert Soule wrote:
> Hi Jim,
>
> I am trying to write a tree grammar that recognizes an AST
> and produces a second AST, using the C runtime, but compiling
> with a C++ compiler.
>
> In the generated code, I get a problem at lines that look like:
>
> 	retval.tree = ADAPTOR->rulePostProcessing(ADAPTOR, root_0);
>
> In my grammar file which produces the first AST, the generated
> code has the cast to let this be C++ compliant:
>
> 	retval.tree = (pANTLR3_BASE_TREE)(ADAPTOR->rulePostProcessing(ADAPTOR,
> root_0));
>
> Would it be possible to add the casts for tree grammars as well please?
>   
Yes - though I am a little unsure if I will get these changes in before 
3.1.2 now :-( You are using the very latest ANTLR tool and C runtime right?
> Also, does the C runtime support AST to AST rewrite rules? So something like:
>
> myrule: ^(A foo bar) -> ^(B bar foo);
>   
Yes.

Jim

From joe.peterson at intel.com  Fri Feb 20 12:46:41 2009
From: joe.peterson at intel.com (Peterson, Joe)
Date: Fri, 20 Feb 2009 12:46:41 -0800
Subject: [antlr-interest] When a comment not a comment
In-Reply-To: <499DFD00.2030102@temporal-wave.com>
References: <BCF80163639E9F4296FC4B208F99BA47A285F788@orsmsx504.amr.corp.intel.com>
	<e24c4c270902181604s14365c49mce857702ccc4c8f6@mail.gmail.com>
	<BCF80163639E9F4296FC4B208F99BA47A298080C@orsmsx504.amr.corp.intel.com>
	<499DFD00.2030102@temporal-wave.com>
Message-ID: <BCF80163639E9F4296FC4B208F99BA47A2A3F12D@orsmsx504.amr.corp.intel.com>

This works perfectly.  Thanks!  I don't know why I thought that syntactic predicates didn't work on lexer rules.


COMMENT : '#'
                         (
                              ( 'ABCD')=> 'ABCD'
                            | ~('\r' | '\n')* NEWLINE
                         )
                         { $channel = HIDDEN; }
                      ;



NEWLINE     : '\r' ('\n')? | '\n';



-JEEP


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090220/4dc513bb/attachment.html 

From robert.soule at gmail.com  Fri Feb 20 12:48:57 2009
From: robert.soule at gmail.com (Robert Soule)
Date: Fri, 20 Feb 2009 15:48:57 -0500
Subject: [antlr-interest] void* conversion in C runtime
In-Reply-To: <499F1545.8020802@temporal-wave.com>
References: <d1316fd70902201236r4bbcaf52h1cd442ec62ff88e6@mail.gmail.com>
	<499F1545.8020802@temporal-wave.com>
Message-ID: <d1316fd70902201248m550b844bj18aae63ec359d0d9@mail.gmail.com>

I am using antlr-3.1.1.jar and libantlr3c-3.1.2.b1.

If this change doesn't get into the official release, can I get
a copy from cvs or something?

thanks,
Robert

On Fri, Feb 20, 2009 at 3:40 PM, Jim Idle <jimi at temporal-wave.com> wrote:
> Robert Soule wrote:
>> Hi Jim,
>>
>> I am trying to write a tree grammar that recognizes an AST
>> and produces a second AST, using the C runtime, but compiling
>> with a C++ compiler.
>>
>> In the generated code, I get a problem at lines that look like:
>>
>>       retval.tree = ADAPTOR->rulePostProcessing(ADAPTOR, root_0);
>>
>> In my grammar file which produces the first AST, the generated
>> code has the cast to let this be C++ compliant:
>>
>>       retval.tree = (pANTLR3_BASE_TREE)(ADAPTOR->rulePostProcessing(ADAPTOR,
>> root_0));
>>
>> Would it be possible to add the casts for tree grammars as well please?
>>
> Yes - though I am a little unsure if I will get these changes in before
> 3.1.2 now :-( You are using the very latest ANTLR tool and C runtime right?
>> Also, does the C runtime support AST to AST rewrite rules? So something like:
>>
>> myrule: ^(A foo bar) -> ^(B bar foo);
>>
> Yes.
>
> Jim
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From jimi at temporal-wave.com  Fri Feb 20 13:00:11 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 20 Feb 2009 13:00:11 -0800
Subject: [antlr-interest] void* conversion in C runtime
In-Reply-To: <d1316fd70902201248m550b844bj18aae63ec359d0d9@mail.gmail.com>
References: <d1316fd70902201236r4bbcaf52h1cd442ec62ff88e6@mail.gmail.com>	
	<499F1545.8020802@temporal-wave.com>
	<d1316fd70902201248m550b844bj18aae63ec359d0d9@mail.gmail.com>
Message-ID: <499F19DB.4050506@temporal-wave.com>

Robert Soule wrote:
> I am using antlr-3.1.1.jar and libantlr3c-3.1.2.b1.
>
> If this change doesn't get into the official release, can I get
> a copy from cvs or something?
>   

I have just fixed it, so that one will be in the release.

In order to get other fixes like this, you need to use the 
3.1.2-SNAPSHOT jar. You can get the latest jars by visiting 
org.antlr/hudson, where you will be able to pick up that change later 
this afternoon (check the recent changes link).

Jim

From robert.soule at gmail.com  Fri Feb 20 13:17:44 2009
From: robert.soule at gmail.com (Robert Soule)
Date: Fri, 20 Feb 2009 16:17:44 -0500
Subject: [antlr-interest] void* conversion in C runtime
In-Reply-To: <499F19DB.4050506@temporal-wave.com>
References: <d1316fd70902201236r4bbcaf52h1cd442ec62ff88e6@mail.gmail.com>
	<499F1545.8020802@temporal-wave.com>
	<d1316fd70902201248m550b844bj18aae63ec359d0d9@mail.gmail.com>
	<499F19DB.4050506@temporal-wave.com>
Message-ID: <d1316fd70902201317y481d89d8i8c8468c0cda33f83@mail.gmail.com>

Great! Thank you for your quick response!

-Robert

On Fri, Feb 20, 2009 at 4:00 PM, Jim Idle <jimi at temporal-wave.com> wrote:
> Robert Soule wrote:
>> I am using antlr-3.1.1.jar and libantlr3c-3.1.2.b1.
>>
>> If this change doesn't get into the official release, can I get
>> a copy from cvs or something?
>>
>
> I have just fixed it, so that one will be in the release.
>
> In order to get other fixes like this, you need to use the
> 3.1.2-SNAPSHOT jar. You can get the latest jars by visiting
> org.antlr/hudson, where you will be able to pick up that change later
> this afternoon (check the recent changes link).
>
> Jim
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From antlr at mirality.co.nz  Fri Feb 20 14:13:41 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 21 Feb 2009 11:13:41 +1300
Subject: [antlr-interest] Gated semantic predicates without  lookahead?
In-Reply-To: <499B0346.1070906@smartshift.de>
References: <499B0346.1070906@smartshift.de>
Message-ID: <20090220221407.EBF9C341849E@www.antlr.org>

At 07:34 18/02/2009, Andreas Meyer wrote:
 >Let's say I have 600 keywords that I want to recognize as
 >something like an identifier, but in other places, I really
 >want different tokens.
 >
 >Currently, I have 600 rules that do some table lookup, so
 >that they consume an identifier and return one of the 600
 >possible artificial keyword tokens. But still, this makes
 >the stream of tokens look like an endless stream of
 >identifiers to the parser, and I have a vague feeling
 >that this might be not the best possible solution.

You're right, that's going to make the parser slower.

That's one of the reasons why I prefer the other approach to solve 
the "keywords as identifiers" problem -- recognise the keywords as 
individual tokens in the lexer, and then have a ridiculously long 
"identifier" rule in the parser that accepts the catch-all ID 
token in addition to all the tokens for the individual 
keywords.  Since that's an integer match against a tokenset, it 
ought to be significantly faster than repeated string 
comparisons.  (Having said that, I haven't actually *measured* 
this.)

(It is slightly more work to add a new keyword, though, since you 
have to put it in two places.)


From antlr at mirality.co.nz  Fri Feb 20 14:32:43 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 21 Feb 2009 11:32:43 +1300
Subject: [antlr-interest] Problem when parsing numerics
In-Reply-To: <499D1E2B.9090907@interactive-objects.com>
References: <2969488.3161234948794703.JavaMail.root@star>
	<499C1E98.4070805@interactive-objects.com>
	<499C38AE.2060205@temporal-wave.com>
	<499D1E2B.9090907@interactive-objects.com>
Message-ID: <20090220223305.44D093418506@www.antlr.org>

At 21:54 19/02/2009, Thomas Woelfle wrote:
 >But even when factoring out "." into the DOT lexer rule the 
result
 >is the same.
 >I think my problem is not the parser but the lexer. As far as I
 >know a lexer usually tokenizes an input stream always trying to
 >find the longest valid token. In my case valid tokens are 
NUMERICs
 >and DOTs. Where a NUMERIC can be "5", "5.5", "123.56".
 >"5." is not a NUMERIC. Having that input stream I would have
 >expected the lexer to tokenize it into two tokens NUMERIC "5"
 >and DOT ".".

To understand why it's behaving like that, you need to understand 
the algorithm that ANTLR is currently using for the lexer.

Basically, whenever it wants to generate a token, it calls the 
mTOKENS method, which is effectively a rule that makes the 
following assumptions:
   - all top-level lexer rules are possible alternatives
   - exactly one token must be matched
   - if none of the alternatives can be matched, then skip one 
character and try again

Coupled with this is a performance criterion that has it examine 
the minimal amount of lookahead it can get away with to 
unambiguously decide between two rules or alternatives.

The upshot of all this is that when faced with the input "5.", the 
mTOKENS rule will always select NUMERIC since it's the only rule 
that allows the input to begin with digits.  Then the NUMERIC rule 
will consume both the digits and the dot because when faced with 
the decision whether to match the optional alt ('.' DIGIT+)? or to 
match nothing, it only uses one character of lookahead (the dot), 
due to the minimal-lookahead rule.

It's basically seeing it as a choice between a consume-nothing 
alternative and a consume-dot alternative, so the obvious 
condition is whether the next character is a dot or not.  It 
doesn't look "past" that and realise that if the dot isn't 
followed by a digit then it can't possibly match the full alt 
successfully.

You can force it to use two characters of lookahead via a 
syntactic predicate, though:
   NUMERIC : DIGIT+ (('.' DIGIT) => '.' DIGIT+)? ;


From michael.bedward at gmail.com  Fri Feb 20 19:54:42 2009
From: michael.bedward at gmail.com (Michael Bedward)
Date: Sat, 21 Feb 2009 14:54:42 +1100
Subject: [antlr-interest] request for comments on language implementation
Message-ID: <e24c4c270902201954l281ea80dt1f78fb2ac9957a89@mail.gmail.com>

Hi folks,

This is a plug and a request for feedback on my first ANTLR project:
Jiffle - a simple language for creating raster images from maths
expressions.

You can find it at http://code.google.com/p/jai-tools/

Look for the Jiffle link at the bottom of that page.  There is a
preliminary description of the language's purpose and grammar there
plus you can browse the code including the grammar files.

I'm using the cascading AST rewrites approach with Jiffle and I'd be
particularly grateful for any comments on this aspect of the
implementation.  Since I'm very much an ANTLR neophyte there is bound
to be a lot of inefficient / inappropriate / just plain wrong stuff in
the grammars and associated code.  Any feedback on how to do things
better will be gratefully received.  Be brutal !

cheers
Michael

From isabelle.perseil at enst.fr  Sat Feb 21 03:35:56 2009
From: isabelle.perseil at enst.fr (Isabelle Perseil)
Date: Sat, 21 Feb 2009 11:35:56 -0000 (UTC)
Subject: [antlr-interest]   UML&AADL'2009 CfP : EXTENDED DEADLINE
Message-ID: <56fbe3ec638469c0df030de00850d000.squirrel@webmail1.telecom-paristech.fr>

**********************************************************************
                     CALL FOR PAPERS:  UML&AADL?2009
           http://www.artist-embedded.org/artist/UML-AADL-2009.html

                Workshop held in conjunction with ICECCS 2009
                The fourteenth IEEE International Conference on
                    Engineering of Complex Computer Systems
                            http://www.iceccs.org/
                               June 02, 2009
                              Potsdam, Germany

************************************************************************

                   Submission deadline: March 1st, 2009
                   --------------------------------------



Topics
======
New real-time systems have increasingly complex architectures because of
the intricacy of the multiple interdependent features they have to manage.
They must meet new requirements of reusability, interoperability,
flexibility and portability. These new dimensions favor the use of an
architecture description language that offers a global vision of the
system, and which is particularly suitable for handling real-time
characteristics.

Due to the even more increased complexity of distributed, real-time and
embedded systems (DRE), the need for a model-driven approach is more
obvious in this domain than in monolithic RT systems. The purpose of this
workshop is to provide an opportunity to gather researchers and industrial
practitioners to survey existing efforts related to behavior modeling and
model-based analysis of DRE systems.

This workshop seeks contributions from researchers and practitioners
interested in all aspects of the representation, analysis, and
implementation of DRE system behavior and/or architecture models. To this
end, we solicit papers (no more than 6 pages long) related to, but not
limited to, the following principal topics:

- Multi-domain specific modeling languages
- Model transformation and generative approaches
- Model-based Methodologies
- Integration of different formalisms (e.g., Simulink/StateFlow, StateMate
  and Scade-drive)
- Model Checking of architecture specifications
- ADLs behavioral models simulation, Scheduling analysis and Worst-case
execution time prediction


Workshop Format
===============
This full-day workshop will consist of an introduction of the topic by the
workshop organizers, presentations of accepted papers, and in depth
discussion of previously identified subjects emerging from the
submissions. A summary of the discussions will be made available.


Submission and Publication
==========================
To contribute, please send a position paper or a technical paper to
agusti[dot]canals[at]c-s[dot]fr with ?ICECCS09 UML&AADL Workshop? in the
title. Papers should not exceed 6 pages. Submitted manuscripts should be
in English and formatted in the style of the IEEE Computer Society
Proceedings Format. Preferably, submissions should be in PDF format.

All selected papers will be published in the IEEE Computer Society Press
Proceedings.


IMPORTANT DATES
===============
Submission deadline:             March 01, 2009
All Notification of acceptance:  March 05, 2009
Workshop date:           	June 02, 2009


Organizational sponsors
=======================
ARTIST NoE
OMG


Organizers and Programme Steering Committee
===========================================

Jean-Michel Bruel (IRIT, France)
Agusti Canals (CS, France)
Robert de Simone (INRIA, France)
S?bastien G?rard (CEA-LIST, France)
Isabelle Perseil (TELECOM ParisTech, France)


IEEE CS TCCX Coordinator
========================
Mike Hinchey (NASA GSFC and Loyola College in Maryland, USA)


Programme Committee
===================

Yamine Ait Ameur (LISI / ENSMA, France)
Keijiro Araki (Kyushu University, Japan)
Grady Booch (IBM Fellow, USA)
Agusti Canals (CS, France)
Juan Antonio de la Puente (Universidad Polit?cnica de Madrid, Spain)
Sebastien Demathieu (THALES, France)
Dionisio De Niz Villasenor (SEI, Carnegie Mellon, USA)
Vincent Englebert (University of Namur, Belgium)
Madeleine Faug?re (THALES, France)
Mamoun Filali (IRIT, France)
Robert France (Colorado State University, USA)
S?bastien G?rard (CEA-LIST, France)
Patrick Heymans (University of Namur, Belgium)
Irfan Hamid (Microsoft Corp, Canada)
J.J.M. Hooman (Embedded Systems Institute, The Netherlands)
Bruce Lewis (US Army AMCOM)
Johan Lilius (?bo Akademi University, Finland)
Ricardo J. Machado (University of Minho, Portugal)
Dominique Mery (LORIA, France)
Nenad Medvidovi&#263; (University of Southern California, USA)
Thierry Millan (IRIT, France)
Richard Paige (University of York, United Kingdom)
Marc Reynolds (University of Western Australia, Australia)
Jos? Ra?l Romero Salguero (Universidad de C?rdoba, Spain)
Bernhard Rumpe (Braunschweig University of Technology, Germany)
Douglas C. Schmidt (Vanderbild University, USA)
Fran?oise Simonot Lion (LORIA, France)
Oleg Sokolsky (University of Pennsylvania, USA)
Roy Sterritt (University of Ulster, United Kingdom)
J?rn Guy S?? ( University of Queensland, Australia)
Jing Sun (University of Auckland, New Zealand)
Bedir Tekinerdogan (Bilkent University, Turkey)
Martin T?rngren (KTH - Royal Institute of Technology, Sweden)
Laurence Tratt (Bournemouth University, United Kingdom)
Tullio Vardanega (University of Padua, Italy)
Fran?ois Vernadat (CNRS-LAAS, France)
Thomas Vergnaud (THALES, France)
Eugenio Villar (Universidad de Cantabria, Spain)
Sergio Yovine (CNRS-Verimag, France)
Roberto V. Zicari (Goethe University Frankfurt, Germany)








From robert.soule at gmail.com  Sat Feb 21 13:27:35 2009
From: robert.soule at gmail.com (Robert Soule)
Date: Sat, 21 Feb 2009 16:27:35 -0500
Subject: [antlr-interest] void* conversion in C runtime
In-Reply-To: <499F19DB.4050506@temporal-wave.com>
References: <d1316fd70902201236r4bbcaf52h1cd442ec62ff88e6@mail.gmail.com>
	<499F1545.8020802@temporal-wave.com>
	<d1316fd70902201248m550b844bj18aae63ec359d0d9@mail.gmail.com>
	<499F19DB.4050506@temporal-wave.com>
Message-ID: <d1316fd70902211327n12e66596j9a8357cb06b8cea8@mail.gmail.com>

Hi Jim,

Is there a stable version of the antlr tool jar that supports this
change? I got:

antlr-3.1.2-SNAPSHOT-jar-with-dependencies.jar

from:

http://antlr.org/hudson/job/ANTLR_Tool/lastSuccessfulBuild/org.antlr$antlr/

but the code it generates doesn't compile. I see from the web page
that there are 17 failures in the unit tests.

thanks,
Robert


On Fri, Feb 20, 2009 at 4:00 PM, Jim Idle <jimi at temporal-wave.com> wrote:
> Robert Soule wrote:
>> I am using antlr-3.1.1.jar and libantlr3c-3.1.2.b1.
>>
>> If this change doesn't get into the official release, can I get
>> a copy from cvs or something?
>>
>
> I have just fixed it, so that one will be in the release.
>
> In order to get other fixes like this, you need to use the
> 3.1.2-SNAPSHOT jar. You can get the latest jars by visiting
> org.antlr/hudson, where you will be able to pick up that change later
> this afternoon (check the recent changes link).
>
> Jim
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From parrt at cs.usfca.edu  Sat Feb 21 16:04:39 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 21 Feb 2009 16:04:39 -0800
Subject: [antlr-interest] ANTLR v3.1.2 released :)
Message-ID: <AB58AF7D-2BA6-4B8C-A4CD-5C789578AEC6@cs.usfca.edu>

Get it while it's hot:

http://www.antlr.org/download.html

http://www.antlr.org/wiki/display/ANTLR3/ANTLR+3.1.2+Release+Notes

Thanks to all the hard work by target developers:

http://www.antlr.org/wiki/display/ANTLR3/Code+Generation+Targets

We'll get it into maven in about 1 week.

Expect ANTLRWorks 1.2.3 with ANTLR 3.1.2 within a week or so.

Ter

From jimi at temporal-wave.com  Sat Feb 21 17:45:55 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 21 Feb 2009 17:45:55 -0800
Subject: [antlr-interest] void* conversion in C runtime
In-Reply-To: <d1316fd70902211327n12e66596j9a8357cb06b8cea8@mail.gmail.com>
References: <d1316fd70902201236r4bbcaf52h1cd442ec62ff88e6@mail.gmail.com>	
	<499F1545.8020802@temporal-wave.com>	
	<d1316fd70902201248m550b844bj18aae63ec359d0d9@mail.gmail.com>	
	<499F19DB.4050506@temporal-wave.com>
	<d1316fd70902211327n12e66596j9a8357cb06b8cea8@mail.gmail.com>
Message-ID: <49A0AE53.1000400@temporal-wave.com>

Robert Soule wrote:
> Hi Jim,
>
> Is there a stable version of the antlr tool jar that supports this
> change? I got:
>
> antlr-3.1.2-SNAPSHOT-jar-with-dependencies.jar
>
> from:
>
> http://antlr.org/hudson/job/ANTLR_Tool/lastSuccessfulBuild/org.antlr$antlr/
>
> but the code it generates doesn't compile. I see from the web page
> that there are 17 failures in the unit tests.
>   

Unit tests are known failures, mostly down to the tests themselves, but 
you can download the 3.1.2 release now from the main download page.

Jim
> thanks,
> Robert
>
>
> On Fri, Feb 20, 2009 at 4:00 PM, Jim Idle <jimi at temporal-wave.com> wrote:
>   
>> Robert Soule wrote:
>>     
>>> I am using antlr-3.1.1.jar and libantlr3c-3.1.2.b1.
>>>
>>> If this change doesn't get into the official release, can I get
>>> a copy from cvs or something?
>>>
>>>       
>> I have just fixed it, so that one will be in the release.
>>
>> In order to get other fixes like this, you need to use the
>> 3.1.2-SNAPSHOT jar. You can get the latest jars by visiting
>> org.antlr/hudson, where you will be able to pick up that change later
>> this afternoon (check the recent changes link).
>>
>> Jim
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>>     


From jimi at temporal-wave.com  Sat Feb 21 18:00:01 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 21 Feb 2009 18:00:01 -0800
Subject: [antlr-interest] RElease 3.1.2 now in Maven repo
Message-ID: <49A0B1A1.4020809@temporal-wave.com>

Should make it to Maven central within about 4 hours. The main 
development builds will now all be bumped to 3.1.3-SNAPSHOT...

Also, maven antlr plugin becomes release 3.1.2 to reflect the fact that 
that version will build using ANTLR 3.1.2

Jim

From antlr at mirality.co.nz  Sat Feb 21 18:13:58 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sun, 22 Feb 2009 15:13:58 +1300
Subject: [antlr-interest] void* conversion in C runtime
In-Reply-To: <49A0AE53.1000400@temporal-wave.com>
References: <d1316fd70902201236r4bbcaf52h1cd442ec62ff88e6@mail.gmail.com>
	<499F1545.8020802@temporal-wave.com>
	<d1316fd70902201248m550b844bj18aae63ec359d0d9@mail.gmail.com>
	<499F19DB.4050506@temporal-wave.com>
	<d1316fd70902211327n12e66596j9a8357cb06b8cea8@mail.gmail.com>
	<49A0AE53.1000400@temporal-wave.com>
Message-ID: <20090222021424.37F883418472@www.antlr.org>

At 14:45 22/02/2009, Jim Idle wrote:
 >Unit tests are known failures, mostly down to the tests
 >themselves, but you can download the 3.1.2 release now
 >from the main download page.

Shouldn't the release not be released until the tests pass?  Isn't 
that the whole point of having unit tests?

Or are these tests for bugs that haven't been fixed yet?


From jimi at temporal-wave.com  Sat Feb 21 18:19:48 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 21 Feb 2009 18:19:48 -0800
Subject: [antlr-interest] void* conversion in C runtime
In-Reply-To: <20090222020625.EBC881215CA3@msf1.dnsmadeeasy.com>
References: <d1316fd70902201236r4bbcaf52h1cd442ec62ff88e6@mail.gmail.com>
	<499F1545.8020802@temporal-wave.com>
	<d1316fd70902201248m550b844bj18aae63ec359d0d9@mail.gmail.com>
	<499F19DB.4050506@temporal-wave.com>
	<d1316fd70902211327n12e66596j9a8357cb06b8cea8@mail.gmail.com>
	<49A0AE53.1000400@temporal-wave.com>
	<20090222020625.EBC881215CA3@msf1.dnsmadeeasy.com>
Message-ID: <49A0B644.6040506@temporal-wave.com>

Gavin Lambert wrote:
> At 14:45 22/02/2009, Jim Idle wrote:
> >Unit tests are known failures, mostly down to the tests
> >themselves, but you can download the 3.1.2 release now
> >from the main download page.
>
> Shouldn't the release not be released until the tests pass?  Isn't 
> that the whole point of having unit tests?
>
> Or are these tests for bugs that haven't been fixed yet?
>
These are test for bugs that were once fixed, but are no longer valid 
tests, but for which Ter has not had time to go and either decide to 
delete the test or make the test different. For instance tests for 
NFA-DFA conversions that no longer convert to the thing that the the 
teste is looking for. sometimes just things like A B C is now A C B 
(validly) I don't want to disable the tests or we will forget to do 
anything about them. There are better mechanisms but they take time to 
set up.

Also, don't forget that in a perfect world all releases would be without 
bugs, but it isn't a perfect world, even if you get paid to do such 
things as this :-)

Jim

From parrt at cs.usfca.edu  Sat Feb 21 19:01:25 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 21 Feb 2009 19:01:25 -0800
Subject: [antlr-interest] RElease 3.1.2 now in Maven repo
In-Reply-To: <49A0B1A1.4020809@temporal-wave.com>
References: <49A0B1A1.4020809@temporal-wave.com>
Message-ID: <74438C1F-F166-4660-A112-42070C3B3585@cs.usfca.edu>

thanks for all your hard work on getting ANTLR maven ready, Jim!

let's hope i made the software correctly so we don't mess up maven's  
repository ;)

Ter
On Feb 21, 2009, at 6:00 PM, Jim Idle wrote:

> Should make it to Maven central within about 4 hours. The main  
> development builds will now all be bumped to 3.1.3-SNAPSHOT...
>
> Also, maven antlr plugin becomes release 3.1.2 to reflect the fact  
> that that version will build using ANTLR 3.1.2
>
> Jim


From michael.bedward at gmail.com  Sat Feb 21 21:26:19 2009
From: michael.bedward at gmail.com (Michael Bedward)
Date: Sun, 22 Feb 2009 16:26:19 +1100
Subject: [antlr-interest] RElease 3.1.2 now in Maven repo
In-Reply-To: <74438C1F-F166-4660-A112-42070C3B3585@cs.usfca.edu>
References: <49A0B1A1.4020809@temporal-wave.com>
	<74438C1F-F166-4660-A112-42070C3B3585@cs.usfca.edu>
Message-ID: <e24c4c270902212126x1277f17ahe2df566295a07aa0@mail.gmail.com>

> On Feb 21, 2009, at 6:00 PM, Jim Idle wrote:
>
>> Should make it to Maven central within about 4 hours. The main
>> development builds will now all be bumped to 3.1.3-SNAPSHOT...
>>
>> Also, maven antlr plugin becomes release 3.1.2 to reflect the fact
>> that that version will build using ANTLR 3.1.2
>>

Jeepers that's service !

Many thanks Jim and Ter

Michael

From g.r.vansickle at att.net  Sun Feb 22 04:47:34 2009
From: g.r.vansickle at att.net (Gary R. Van Sickle)
Date: Sun, 22 Feb 2009 06:47:34 -0600
Subject: [antlr-interest] void* conversion in C runtime
In-Reply-To: <49A0AE53.1000400@temporal-wave.com>
References: <d1316fd70902201236r4bbcaf52h1cd442ec62ff88e6@mail.gmail.com>	<499F1545.8020802@temporal-wave.com>	<d1316fd70902201248m550b844bj18aae63ec359d0d9@mail.gmail.com>	<499F19DB.4050506@temporal-wave.com><d1316fd70902211327n12e66596j9a8357cb06b8cea8@mail.gmail.com>
	<49A0AE53.1000400@temporal-wave.com>
Message-ID: <B8027B6EC32D46308A11C9869CF6D94E@DFW5RB41>

Hi Jim,

Looks like you may have "missed a spot" or two.  With the recent 3.1.2
release I'm getting a number of such errors.  E.g. here's one:


static pss9_combined_lexer_parserParser_declaration_SCOPE
pss9_combined_lexer_parserParser_declarationPush(pss9_combined_lexer_parserP
arser ctx)
{
    /* Pointer used to create a new set of attributes
     */
    pss9_combined_lexer_parserParser_declaration_SCOPE      newAttributes;

    /* Allocate the memory for a new structure if we need one.
     */
    if
(ctx->pss9_combined_lexer_parserParser_declarationStack->size(ctx->pss9_comb
ined_lexer_parserParser_declarationStack) >
ctx->pss9_combined_lexer_parserParser_declarationStack_limit)
    {
        // The current limit value was less than the number of scopes
available on the stack so
        // we can just reuse one. Our limit tracks the stack count, so the
index of the entry we want
        // is one less than that, or conveniently, the current value of
limit.
        //
	///// GRVS: HERE'S THE ERROR:
        newAttributes =
ctx->pss9_combined_lexer_parserParser_declarationStack->get(ctx->pss9_combin
ed_lexer_parserParser_declarationStack,
ctx->pss9_combined_lexer_parserParser_declarationStack_limit);
    }
    else
    {
        // Need a new allocation
        //
        newAttributes = (pss9_combined_lexer_parserParser_declaration_SCOPE)
ANTLR3_MALLOC(sizeof(ss9_combined_lexer_parserParser_declaration_SCOPE));
        if  (newAttributes != NULL)
        {
            /* Standard ANTLR3 library implementation
             */
 
ctx->pss9_combined_lexer_parserParser_declarationStack->push(ctx->pss9_combi
ned_lexer_parserParser_declarationStack, newAttributes, (void (*)(void
*))declarationFree);
        }
    }
	[...etc...]


This gets me the following error from gcc:

ss9_combined_lexer_parserParser.cpp: In function
`ss9_combined_lexer_parserParser_declaration_SCOPE_struct*
pss9_combined_lexer_parserParser_declarationPush(ss9_combined_lexer_parserPa
rser_Ctx_struct*)':
ss9_combined_lexer_parserParser.cpp:353: error: invalid conversion from
`void*' to `ss9_combined_lexer_parserParser_declaration_SCOPE_struct*'

There's different breakage as well.  Check this out:


    	if	(SCOPE_TOP(external_declaration)>free != NULL)
	{
 
SCOPE_TOP(external_declaration)>->free(SCOPE_TOP(external_declaration));
	}


Not quite sure what's going on there, but in the first case it looks like
there's one too few "-"'s and in the second one too many ">"'s before the
"free".

-- 
Gary R. Van Sickle
 

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org 
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jim Idle
> Sent: Saturday, February 21, 2009 7:46 PM
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] void* conversion in C runtime
> 
> Robert Soule wrote:
> > Hi Jim,
> >
> > Is there a stable version of the antlr tool jar that supports this 
> > change? I got:
> >
> > antlr-3.1.2-SNAPSHOT-jar-with-dependencies.jar
> >
> > from:
> >
> > 
> http://antlr.org/hudson/job/ANTLR_Tool/lastSuccessfulBuild/org.antlr$a
> > ntlr/
> >
> > but the code it generates doesn't compile. I see from the web page 
> > that there are 17 failures in the unit tests.
> >   
> 
> Unit tests are known failures, mostly down to the tests 
> themselves, but you can download the 3.1.2 release now from 
> the main download page.
> 
> Jim
> > thanks,
> > Robert
> >
> >
> > On Fri, Feb 20, 2009 at 4:00 PM, Jim Idle 
> <jimi at temporal-wave.com> wrote:
> >   
> >> Robert Soule wrote:
> >>     
> >>> I am using antlr-3.1.1.jar and libantlr3c-3.1.2.b1.
> >>>
> >>> If this change doesn't get into the official release, can I get a 
> >>> copy from cvs or something?
> >>>
> >>>       
> >> I have just fixed it, so that one will be in the release.
> >>
> >> In order to get other fixes like this, you need to use the 
> >> 3.1.2-SNAPSHOT jar. You can get the latest jars by visiting 
> >> org.antlr/hudson, where you will be able to pick up that 
> change later 
> >> this afternoon (check the recent changes link).
> >>
> >> Jim
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe: 
> >> 
> http://www.antlr.org/mailman/options/antlr-interest/your-email-addres
> >> s
> >>
> >>     
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: 
> http://www.antlr.org/mailman/options/antlr-interest/your-email
-address


From parrt at cs.usfca.edu  Sun Feb 22 09:17:34 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 22 Feb 2009 09:17:34 -0800
Subject: [antlr-interest] void* conversion in C runtime
In-Reply-To: <B8027B6EC32D46308A11C9869CF6D94E@DFW5RB41>
References: <d1316fd70902201236r4bbcaf52h1cd442ec62ff88e6@mail.gmail.com>	<499F1545.8020802@temporal-wave.com>	<d1316fd70902201248m550b844bj18aae63ec359d0d9@mail.gmail.com>	<499F19DB.4050506@temporal-wave.com><d1316fd70902211327n12e66596j9a8357cb06b8cea8@mail.gmail.com>
	<49A0AE53.1000400@temporal-wave.com>
	<B8027B6EC32D46308A11C9869CF6D94E@DFW5RB41>
Message-ID: <CC872B7C-6171-4C7A-9D96-FDFC68FB3B1D@cs.usfca.edu>

Hi Jim is away for a week now; he should take a look when he comes back.
Ter
On Feb 22, 2009, at 4:47 AM, Gary R. Van Sickle wrote:

> Hi Jim,
>
> Looks like you may have "missed a spot" or two.  With the recent 3.1.2
> release I'm getting a number of such errors.  E.g. here's one:
>
>
> static pss9_combined_lexer_parserParser_declaration_SCOPE
> pss9_combined_lexer_parserParser_declarationPush
> (pss9_combined_lexer_parserP
> arser ctx)
> {
>    /* Pointer used to create a new set of attributes
>     */
>    pss9_combined_lexer_parserParser_declaration_SCOPE       
> newAttributes;
>
>    /* Allocate the memory for a new structure if we need one.
>     */
>    if
> (ctx->pss9_combined_lexer_parserParser_declarationStack->size(ctx- 
> >pss9_comb
> ined_lexer_parserParser_declarationStack) >
> ctx->pss9_combined_lexer_parserParser_declarationStack_limit)
>    {
>        // The current limit value was less than the number of scopes
> available on the stack so
>        // we can just reuse one. Our limit tracks the stack count,  
> so the
> index of the entry we want
>        // is one less than that, or conveniently, the current value of
> limit.
>        //
> 	///// GRVS: HERE'S THE ERROR:
>        newAttributes =
> ctx->pss9_combined_lexer_parserParser_declarationStack->get(ctx- 
> >pss9_combin
> ed_lexer_parserParser_declarationStack,
> ctx->pss9_combined_lexer_parserParser_declarationStack_limit);
>    }
>    else
>    {
>        // Need a new allocation
>        //
>        newAttributes =  
> (pss9_combined_lexer_parserParser_declaration_SCOPE)
> ANTLR3_MALLOC 
> (sizeof(ss9_combined_lexer_parserParser_declaration_SCOPE));
>        if  (newAttributes != NULL)
>        {
>            /* Standard ANTLR3 library implementation
>             */
>
> ctx->pss9_combined_lexer_parserParser_declarationStack->push(ctx- 
> >pss9_combi
> ned_lexer_parserParser_declarationStack, newAttributes, (void (*)(void
> *))declarationFree);
>        }
>    }
> 	[...etc...]
>
>
> This gets me the following error from gcc:
>
> ss9_combined_lexer_parserParser.cpp: In function
> `ss9_combined_lexer_parserParser_declaration_SCOPE_struct*
> pss9_combined_lexer_parserParser_declarationPush 
> (ss9_combined_lexer_parserPa
> rser_Ctx_struct*)':
> ss9_combined_lexer_parserParser.cpp:353: error: invalid conversion  
> from
> `void*' to `ss9_combined_lexer_parserParser_declaration_SCOPE_struct*'
>
> There's different breakage as well.  Check this out:
>
>
>    	if	(SCOPE_TOP(external_declaration)>free != NULL)
> 	{
>
> SCOPE_TOP(external_declaration)>- 
> >free(SCOPE_TOP(external_declaration));
> 	}
>
>
> Not quite sure what's going on there, but in the first case it looks  
> like
> there's one too few "-"'s and in the second one too many ">"'s  
> before the
> "free".
>
> -- 
> Gary R. Van Sickle
>
>
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org
>> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jim Idle
>> Sent: Saturday, February 21, 2009 7:46 PM
>> Cc: antlr-interest at antlr.org
>> Subject: Re: [antlr-interest] void* conversion in C runtime
>>
>> Robert Soule wrote:
>>> Hi Jim,
>>>
>>> Is there a stable version of the antlr tool jar that supports this
>>> change? I got:
>>>
>>> antlr-3.1.2-SNAPSHOT-jar-with-dependencies.jar
>>>
>>> from:
>>>
>>>
>> http://antlr.org/hudson/job/ANTLR_Tool/lastSuccessfulBuild/org.antlr 
>> $a
>>> ntlr/
>>>
>>> but the code it generates doesn't compile. I see from the web page
>>> that there are 17 failures in the unit tests.
>>>
>>
>> Unit tests are known failures, mostly down to the tests
>> themselves, but you can download the 3.1.2 release now from
>> the main download page.
>>
>> Jim
>>> thanks,
>>> Robert
>>>
>>>
>>> On Fri, Feb 20, 2009 at 4:00 PM, Jim Idle
>> <jimi at temporal-wave.com> wrote:
>>>
>>>> Robert Soule wrote:
>>>>
>>>>> I am using antlr-3.1.1.jar and libantlr3c-3.1.2.b1.
>>>>>
>>>>> If this change doesn't get into the official release, can I get a
>>>>> copy from cvs or something?
>>>>>
>>>>>
>>>> I have just fixed it, so that one will be in the release.
>>>>
>>>> In order to get other fixes like this, you need to use the
>>>> 3.1.2-SNAPSHOT jar. You can get the latest jars by visiting
>>>> org.antlr/hudson, where you will be able to pick up that
>> change later
>>>> this afternoon (check the recent changes link).
>>>>
>>>> Jim
>>>>
>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>> Unsubscribe:
>>>>
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-addres
>>>> s
>>>>
>>>>
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email
> -address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From pink at odahoda.de  Sun Feb 22 11:19:19 2009
From: pink at odahoda.de (Benjamin Niemann)
Date: Sun, 22 Feb 2009 20:19:19 +0100
Subject: [antlr-interest] [Python] Initial support for debugging with
	ANTLRWorks
Message-ID: <543531490902221119i6cd4bf7fk833e87543c8e5a8@mail.gmail.com>

Hello to all Pythonistas amongst us,

I just submitted a first implementation of the debug protocol to
Perforce. Feel free to give it a try, but be aware of its early
status.
Some basic instructions are on
http://www.antlr.org/wiki/display/ANTLR3/Antlr3PythonTarget

The easiest way to get the required files is probably through Hudson.
Download a zip with the runtime from
http://www.antlr.org/hudson/job/ANTLR_Tool/ws/runtime/Python/antlr3/
and the jar-with-dependencies for antlr from
http://www.antlr.org/hudson/job/ANTLR_Tool/lastSuccessfulBuild/org.antlr$antlr/

-Ben

From asoka250 at gmail.com  Sun Feb 22 14:12:28 2009
From: asoka250 at gmail.com (Ashok Varikuti)
Date: Sun, 22 Feb 2009 22:12:28 -0000
Subject: [antlr-interest] How to get value of next token match -  regd.
In-Reply-To: <491abc74.050bca0a.3cd3.282eSMTPIN_ADDED@mx.google.com>
References: <491AB62D.8030507@gmail.com>
	<491abc74.050bca0a.3cd3.282eSMTPIN_ADDED@mx.google.com>
Message-ID: <491ABE45.306@gmail.com>

Gavin Lambert wrote:
> At 23:55 12/11/2008, Ashok Varikuti wrote:
> >node_id[Object g,String subID] returns [int nodeID] @init {
> >nodeID=0;}
> >    :
> >    ( i=id
> >    | ^(COLON i=id (r=ID) ? ( compass ) ? )
> >    ) {}
> [...]
> >For this sample edge  cluster_A --> B, in the edges function,
> >start=node_id[g,subID] is the first match.
> >How do I do something like this, ( ^(D_EDGE_OP  (
> >start=edges[g,subID] | start=node_id[g,subID] (get value
> >of matched id in node_id func here) end=node_id[g,subID]
> >That is, I want to get the id of the matched node(which is
> >obvious node_id func) in the edges function.
>
> You mean like $start.nodeID?  Or something else?
>
> (To do that you'd need to make your node_id rule assign the ID to the 
> $nodeID return value as well.)
>
>
Can you suggest me some other way.

-- 
Ashok R Varikuti
Graduate Research Assistant
CIS Dept, Kansas State University
785-304-2401
ashokv at ksu.edu




From asoka250 at gmail.com  Sun Feb 22 14:12:31 2009
From: asoka250 at gmail.com (Ashok Varikuti)
Date: Sun, 22 Feb 2009 22:12:31 -0000
Subject: [antlr-interest] errors in embedding grammar files in maven
 project - regd.
In-Reply-To: <1228365002.4072.20.camel@jimi>
References: <49373FDC.8040507@gmail.com> <1228365002.4072.20.camel@jimi>
Message-ID: <4937F56E.4040402@gmail.com>

Jim Idle wrote:
> On Wed, 2008-12-03 at 20:26 -0600, Ashok Varikuti wrote:
>> Hi List,
>>
>> I encapsulated antlr grammar files in a eclipse maven project. The 
>> compilation task of grammar files is done at maven compile time. I 
>> specified the output directory to be the following :-
>>     
>
> Here is a sample configuration for antlr3-maven-plugin version 
> 3.1.1.1, which is now synced with Maven central (because I just used 
> it ;-).
>
>
>             <plugin>
>                 <groupId>org.antlr</groupId>
>                 <artifactId>antlr3-maven-plugin</artifactId>
>                 <version>3.1.1.1</version>
>                 <configuration>
>                     <sourceDirectory>src/main/java/com/temporalwave/parsers/aspdotnet</sourceDirectory>
>                     <outputDirectory>target/generated-sources/aspdotnetjava/com/temporalwave/parsers/aspdotnet</outputDirectory>
>                     <libDirectory>src/main/java/com/temporalwave/parsers/aspdotnet</libDirectory>
>                     <excludes>
>                         <exclude>commonwalker.g</exclude>
>                     </excludes>
>                 </configuration>
>                 
>                 <executions>
>
>                     <execution>
>                         <goals>
>                             <goal>antlr</goal>
>                         </goals>
>                     </execution>
>                 </executions>
>
>             </plugin>
>   
>
> If you do not specify a source and output directory then it looks for 
> grammar in the ./antlr directory and the output files should be in:
>
> target/generated-sources/nameofyourartifact/antlr
>
> But your package is:
>
>     @header {
>     package prefuse.parser.dotparser;
>     }
>     @lexer::header {
>       package prefuse.parser.dotparser;
>     }
>   
>
> So you want your grammar files to be in the directory:
>
>    <sourceDirectory>src/main/java/prefuse/parser/dotparser</sourceDirectory>
>   
>
> and your output files should be:
>
>    <outputDirectory>target/generated-sources/yourartifactname/prefuse/parser/dotparser</outputDirectory>
>   
>
> Then it will all work. Be sure to use version 3.1.1.1 of the plugin if 
> you have dependent grammars (tokenVocab option) as the 3.1.1 version 
> and below do not calculate dependencies correctly.
>
> Jim
> ------------------------------------------------------------------------
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>   
Hi Jim,

I was able to figure out what you are talking. It did work for me. Cheers.

-- 
Ashok R Varikuti
Graduate Research Assistant
CIS Dept, Kansas State University
785-304-2401
ashokv at ksu.edu




From vlas01 at yahoo.com  Sun Feb 22 17:51:40 2009
From: vlas01 at yahoo.com (Vlastimil Adamovsky)
Date: Sun, 22 Feb 2009 17:51:40 -0800 (PST)
Subject: [antlr-interest] Match A with exception of B .....how do I do that?
Message-ID: <642663.6955.qm@web57515.mail.re1.yahoo.com>

My weekend was a sleepless one. I have a problem and I hope ANTLR experts will help me....
?
Assume, I have defined lexer rules:
?
A? :?? '0' .. '9' ;
?
B? :?? '4' .. '7';
?
I want to parse digits, that are from 0 to 9? except those that are from 4 to 7.
In reality, I want to parse only digits? 0,1,2,3,8,9 ....
?
How do I set up a correct rule? 
?
Please HELP!
?
Thanks,
? Vlastimil 
?http://ironglue.wordpress.com
?
?


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090222/e2dc1266/attachment.html 

From michael.bedward at gmail.com  Sun Feb 22 18:26:41 2009
From: michael.bedward at gmail.com (Michael Bedward)
Date: Mon, 23 Feb 2009 13:26:41 +1100
Subject: [antlr-interest] Match A with exception of B .....how do I do
	that?
In-Reply-To: <642663.6955.qm@web57515.mail.re1.yahoo.com>
References: <642663.6955.qm@web57515.mail.re1.yahoo.com>
Message-ID: <e24c4c270902221826l37f146ebw5baf4f4f0b8ed954@mail.gmail.com>

2009/2/23 Vlastimil Adamovsky <vlas01 at yahoo.com>:
>
> I want to parse digits, that are from 0 to 9  except those that are from 4
> to 7.
> In reality, I want to parse only digits  0,1,2,3,8,9 ....
>

A: '0'..'3' | '8' | '9' ;

Is this what you want ?

Michael

From vlas01 at yahoo.com  Sun Feb 22 19:06:55 2009
From: vlas01 at yahoo.com (Vlastimil Adamovsky)
Date: Sun, 22 Feb 2009 19:06:55 -0800 (PST)
Subject: [antlr-interest] Match A with exception of B .....how do I do
	that?
In-Reply-To: <642663.6955.qm@web57515.mail.re1.yahoo.com>
Message-ID: <131587.12364.qm@web57515.mail.re1.yahoo.com>

Ok , I realize, my question was to simple. I will try to ask the question in a generic way...Assume, there are two rules: 1)  A : character_set_a;2)  B : character_set_b;How do I set up a rule for parsing a character which must be in the character_set_a but not in character_set_b? Or by other words, a rule C succeeds when the rule A succeeds but the rule B fails?Thanks to all who sent the responses, but still, it is not what I am looking for......Vlastimil 
?


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090222/5a85d273/attachment.html 

From michael.bedward at gmail.com  Sun Feb 22 19:30:00 2009
From: michael.bedward at gmail.com (Michael Bedward)
Date: Mon, 23 Feb 2009 14:30:00 +1100
Subject: [antlr-interest] Match A with exception of B .....how do I do
	that?
In-Reply-To: <131587.12364.qm@web57515.mail.re1.yahoo.com>
References: <642663.6955.qm@web57515.mail.re1.yahoo.com>
	<131587.12364.qm@web57515.mail.re1.yahoo.com>
Message-ID: <e24c4c270902221930l129ca657g4bb1c1d3325b4c40@mail.gmail.com>

>
> Assume, there are two rules:
>
> 1)  A : character_set_a;
>
> 2)  B : character_set_b;
>
> How do I set up a rule for parsing a character which must be in the
>
> character_set_a but not in character_set_b?
>

Are the characters in the A and B sets mutually exclusive ?  I'm
guessing they are not otherwise you would not be asking your question.
 But perhaps if you provide a specific example of something that
wasn't working for you during your sleepless weekend you will get
better suggestions.

Michael

From vlas01 at yahoo.com  Sun Feb 22 20:24:40 2009
From: vlas01 at yahoo.com (Vlastimil Adamovsky)
Date: Sun, 22 Feb 2009 20:24:40 -0800 (PST)
Subject: [antlr-interest] Match A with exception of B .....how do I do
	that?
In-Reply-To: <e24c4c270902221930l129ca657g4bb1c1d3325b4c40@mail.gmail.com>
Message-ID: <771018.80156.qm@web57509.mail.re1.yahoo.com>

Thanks,
?
the problem is something like this:
.......
?
Identifier???? :?(Letter | '_') (LetterOrDigit | '_')* ;
?
ReservedIdentifier? :?PseudoVariableReference | ConstantReference;

PseudoVariableReference? :?'self' | 'super' | 'thisContext';
?
ConstantReference :?'nil' | 'false' | 'true' ;
?
ConstantReference
?:?'nil' | 'false' | 'true'
?;
?
PseudoVariableReference
?:?'self' | 'super' | 'thisContext'
?;
?
ReservedIdentifier
?:?PseudoVariableReference | ConstantReference
?;
?
BindableIdentifier :?Identifier? -? ReservedIdentifier ;? //this is EBNF notation

How do I set up a BindableIdentifier rule so it is valid for ANTLR??
?
I have to admit, I just started using ANTLR and I like it a lot, but still, I think the learning curve is very steep....
?
Thanks,
? Vlastimil 


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090222/aa427fa8/attachment.html 

From jaluber at gmx.de  Sun Feb 22 22:31:15 2009
From: jaluber at gmx.de (Johannes Luber)
Date: Mon, 23 Feb 2009 07:31:15 +0100
Subject: [antlr-interest] Match A with exception of B .....how do I do
 that?
In-Reply-To: <771018.80156.qm@web57509.mail.re1.yahoo.com>
References: <771018.80156.qm@web57509.mail.re1.yahoo.com>
Message-ID: <49A242B3.1020204@gmx.de>

Vlastimil Adamovsky schrieb:
> Thanks,
>  
> the problem is something like this:
> ......
>  
> Identifier     : (Letter | '_') (LetterOrDigit | '_')* ;
>  
> ReservedIdentifier  : PseudoVariableReference | ConstantReference;
> PseudoVariableReference  : 'self' | 'super' | 'thisContext';
>  
> ConstantReference : 'nil' | 'false' | 'true' ;
>  
> ConstantReference
>  : 'nil' | 'false' | 'true'
>  ;
>  
> PseudoVariableReference
>  : 'self' | 'super' | 'thisContext'
>  ;
>  
> ReservedIdentifier
>  : PseudoVariableReference | ConstantReference
>  ;
>  
> *BindableIdentifier : Identifier  -  ReservedIdentifier ;  //this is
> EBNF notation*
> 
> How do I set up a *BindableIdentifier *rule so it is valid for ANTLR??
>  
> I have to admit, I just started using ANTLR and I like it a lot, but
> still, I think the learning curve is very steep....
>  
> Thanks,
>   Vlastimil

Well, theoretically you can use

C : (~B)=> A;

but for better error messages it is recommend just to match the superset
and to check in the parser for incorrect characters.

Johannes
> 
> 
> 
> ------------------------------------------------------------------------
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From ch.baeumer at gmx.de  Mon Feb 23 00:27:51 2009
From: ch.baeumer at gmx.de (=?iso-8859-1?Q?Christoph_B=E4umer?=)
Date: Mon, 23 Feb 2009 09:27:51 +0100
Subject: [antlr-interest] Featurerequest for ANTLR
Message-ID: <002d01c99590$9e6295a0$db27c0e0$@baeumer@gmx.de>

Hi Terence,

 

have you ever thought to support following directly in your tree parser:

 

-          A loop keyword.
When using the tree parser I guess it is not uncommon to use the parser for
writing interpreters. Today it?s a pain in the ass (sorry for being rude) to
execute some statements several times

-          A conditional keyword (if)
The same

 

Supporting this would speed up the development of interpreters. I know there
is the StringTemplate. But this is only usable when writing code that will
be compiled and not for an the fly generation. I use antlr for a report
language where such keywords could be useful.

 

Many thanks

 

Christoph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090223/b5d18bef/attachment.html 

From antlr at mirality.co.nz  Mon Feb 23 01:36:18 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Mon, 23 Feb 2009 22:36:18 +1300
Subject: [antlr-interest] How to get value of next token match - regd.
In-Reply-To: <491ABE45.306@gmail.com>
References: <491AB62D.8030507@gmail.com>
	<491abc74.050bca0a.3cd3.282eSMTPIN_ADDED@mx.google.com>
	<491ABE45.306@gmail.com>
Message-ID: <20090223093642.191C534183AB@www.antlr.org>

At 00:30 13/11/2008, Ashok Varikuti wrote:
 >Gavin Lambert wrote:
 >> At 23:55 12/11/2008, Ashok Varikuti wrote:
 >> >For this sample edge  cluster_A --> B, in the edges function,
 >> >start=node_id[g,subID] is the first match.
 >> >How do I do something like this, ( ^(D_EDGE_OP  (
 >> >start=edges[g,subID] | start=node_id[g,subID] (get value
 >> >of matched id in node_id func here) end=node_id[g,subID]
 >> >That is, I want to get the id of the matched node(which is
 >> >obvious node_id func) in the edges function.
 >>
 >> You mean like $start.nodeID?  Or something else?
 >>
 >> (To do that you'd need to make your node_id rule assign the ID 
to
 >> the $nodeID return value as well.)
 >>
 >Can you suggest me some other way.

Can you explain why that wasn't sufficient for what you're trying 
to do?  Or perhaps better explain what you're trying to do?  (Or 
both.)


From liviu.u at gmail.com  Mon Feb 23 05:09:02 2009
From: liviu.u at gmail.com (Liviu U)
Date: Mon, 23 Feb 2009 15:09:02 +0200
Subject: [antlr-interest] Heterogenous nodes
Message-ID: <c522653d0902230509q98f6ac3p8b09c72724cc8e3d@mail.gmail.com>

Hi all, i am back to antlr after version 3, an i have a program
regarding heterogenous trees.

I am using C# targets. If i use a REAL token with a custom node name
the tree is fine.
If i use a Virtual Node the tree is broken:

tokens
{
 USING='using';
 USING_VNODE;
....
}

Ok:
           USING  identifier (ASSIGN identifierStar)? SEMI
		->
		^(USING<NodeUsing> identifier identifierStar?)

Broken:
     USING  identifier (ASSIGN identifierStar)? SEMI
		->
		^(USING_VNODE<NodeUsing> identifier identifierStar?)

the NodeUsing is just a descendant of CommonTree

Am i missing something. There is no information on this...

From fdmanana at ieee.org  Mon Feb 23 06:21:10 2009
From: fdmanana at ieee.org (Filipe David Manana)
Date: Mon, 23 Feb 2009 15:21:10 +0100
Subject: [antlr-interest] quick question
Message-ID: <cadf1c690902230621q75e5928dja93a902e9e9c58c1@mail.gmail.com>

Hello,

quick question:

In ANTLRWorks, debugger parse tree window, tokens/rules with green boxes,
what do they mean?

What about other possible colors?

thanks

-- 
Filipe David Manana,
fdmanana at ieee.org
PGP key - http://pgp.mit.edu:11371/pks/lookup?op=get&search=0xC569452B

"Reasonable men adapt themselves to the world.
Unreasonable men adapt the world to themselves.
That's why all progress depends on unreasonable men."
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090223/776409d3/attachment.html 

From indhu.b at s7software.com  Mon Feb 23 06:55:50 2009
From: indhu.b at s7software.com (Indhu Bharathi)
Date: Mon, 23 Feb 2009 20:25:50 +0530
Subject: [antlr-interest] quick question
In-Reply-To: <cadf1c690902230621q75e5928dja93a902e9e9c58c1@mail.gmail.com>
References: <cadf1c690902230621q75e5928dja93a902e9e9c58c1@mail.gmail.com>
Message-ID: <001101c995c6$d25d8fa0$7718aee0$@b@s7software.com>

A quick guess:

 

Green:

                It was parsed since you had ?backtrack? option set and the parse was success. It will however be parsed again in black color.

 

Red:

                It was parsed since you had ?backtrack? option set but the parse was failure.

 

 

- Indhu

 

From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Filipe David Manana
Sent: Monday, February 23, 2009 7:51 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] quick question

 

Hello,

quick question:


In ANTLRWorks, debugger parse tree window, tokens/rules with green boxes, what do they mean?

What about other possible colors?

thanks


-- 
Filipe David Manana,
fdmanana at ieee.org
PGP key - http://pgp.mit.edu:11371/pks/lookup?op=get <http://pgp.mit.edu:11371/pks/lookup?op=get&search=0xC569452B> &search=0xC569452B

"Reasonable men adapt themselves to the world.
Unreasonable men adapt the world to themselves.
That's why all progress depends on unreasonable men."

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090223/28b8e066/attachment.html 

From hubdog at gmail.com  Mon Feb 23 07:04:58 2009
From: hubdog at gmail.com (Hub Dog)
Date: Tue, 24 Feb 2009 00:04:58 +0900
Subject: [antlr-interest] RElease 3.1.2 now in Maven repo
In-Reply-To: <49A0B1A1.4020809@temporal-wave.com>
References: <49A0B1A1.4020809@temporal-wave.com>
Message-ID: <4de0b9580902230704o5b8b1bfepb73c1133b53f20ca@mail.gmail.com>

Can somebody tell me how to build the antlr with maven, the maven looks like
very very complicated.  I can not figure out how to use maven and it make me
crazy.

On Sun, Feb 22, 2009 at 11:00 AM, Jim Idle <jimi at temporal-wave.com> wrote:

> Should make it to Maven central within about 4 hours. The main
> development builds will now all be bumped to 3.1.3-SNAPSHOT...
>
> Also, maven antlr plugin becomes release 3.1.2 to reflect the fact that
> that version will build using ANTLR 3.1.2
>
> Jim
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090224/3c5c86af/attachment.html 

From vlas01 at yahoo.com  Mon Feb 23 07:26:59 2009
From: vlas01 at yahoo.com (Vlastimil Adamovsky)
Date: Mon, 23 Feb 2009 07:26:59 -0800 (PST)
Subject: [antlr-interest] Match A with exception of B .....how do I do
	that?
In-Reply-To: <49A242B3.1020204@gmx.de>
Message-ID: <858362.89966.qm@web57501.mail.re1.yahoo.com>

Thank you Johannes,
?
I am still wrestling with ANLR and learning the secret ways ....:)))
You write: 
?
"but for better error messages it is recommend just to match the superset
and to check in the parser for incorrect characters."
?
How do I do that? BTW, yor suggestion with "C : (~B)=> A;" did not work for me, 
but it is possible it is all my fault. I like your second suggestion better, but don't know how 
do it.......I find the ANTLR an amazing software, but still it takes time to "get it"...
?
Vlastimil 



      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090223/a95fbdfc/attachment.html 

From parrt at cs.usfca.edu  Mon Feb 23 08:45:31 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 23 Feb 2009 08:45:31 -0800
Subject: [antlr-interest] Featurerequest for ANTLR
In-Reply-To: <002d01c99590$9e6295a0$db27c0e0$@baeumer@gmx.de>
References: <002d01c99590$9e6295a0$db27c0e0$@baeumer@gmx.de>
Message-ID: <6565E859-7343-4E56-82F3-8BEAA5C57179@cs.usfca.edu>

Hi. I don't understand what you mean.  *  and + mean loop.  ? means  
conditional.
Ter
On Feb 23, 2009, at 12:27 AM, Christoph B?umer wrote:

> Hi Terence,
>
> have you ever thought to support following directly in your tree  
> parser:
>
> -          A loop keyword.
> When using the tree parser I guess it is not uncommon to use the  
> parser for writing interpreters. Today it?s a pain in the ass (sorry  
> for being rude) to execute some statements several times
> -          A conditional keyword (if)
> The same
>
> Supporting this would speed up the development of interpreters. I  
> know there is the StringTemplate. But this is only usable when  
> writing code that will be compiled and not for an the fly  
> generation. I use antlr for a report language where such keywords  
> could be useful.
>
> Many thanks
>
> Christoph
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090223/4101824e/attachment.html 

From jaluber at gmx.de  Mon Feb 23 09:43:12 2009
From: jaluber at gmx.de (Johannes Luber)
Date: Mon, 23 Feb 2009 18:43:12 +0100
Subject: [antlr-interest] RElease 3.1.2 now in Maven repo
In-Reply-To: <4de0b9580902230704o5b8b1bfepb73c1133b53f20ca@mail.gmail.com>
References: <49A0B1A1.4020809@temporal-wave.com>
	<4de0b9580902230704o5b8b1bfepb73c1133b53f20ca@mail.gmail.com>
Message-ID: <49A2E030.7030704@gmx.de>

Hub Dog schrieb:
> Can somebody tell me how to build the antlr with maven, the maven looks
> like very very complicated.  I can not figure out how to use maven and
> it make me crazy.

Look into the antlr-dev list for the subject "ant build causes errors".
Within this thread the use of maven is explained.

Johannes
> 
> On Sun, Feb 22, 2009 at 11:00 AM, Jim Idle <jimi at temporal-wave.com
> <mailto:jimi at temporal-wave.com>> wrote:
> 
>     Should make it to Maven central within about 4 hours. The main
>     development builds will now all be bumped to 3.1.3-SNAPSHOT...
> 
>     Also, maven antlr plugin becomes release 3.1.2 to reflect the fact that
>     that version will build using ANTLR 3.1.2
> 
>     Jim
> 
>     List: http://www.antlr.org/mailman/listinfo/antlr-interest
>     Unsubscribe:
>     http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
> 
> 
> ------------------------------------------------------------------------
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From jaluber at gmx.de  Mon Feb 23 09:54:13 2009
From: jaluber at gmx.de (Johannes Luber)
Date: Mon, 23 Feb 2009 18:54:13 +0100
Subject: [antlr-interest] Match A with exception of B .....how do I do
 that?
In-Reply-To: <858362.89966.qm@web57501.mail.re1.yahoo.com>
References: <858362.89966.qm@web57501.mail.re1.yahoo.com>
Message-ID: <49A2E2C5.8070000@gmx.de>

Vlastimil Adamovsky schrieb:
> Thank you Johannes,
>  
> I am still wrestling with ANLR and learning the secret ways ....:)))
> You write:
>  
> "but for better error messages it is recommend just to match the superset
> and to check in the parser for incorrect characters."

I haven't gotten around using ANTLR error handling yet, so I can't be
more specific than that you use actions like "{Check($A.text);}",
possibly with "?" appended. ANTLR supports custom error messages in some
way, too. If it isn't described on the wiki, I can only say to look at
"The Definitive ANTLR Reference". Or maybe someone else can give more
details.

Johannes
>  
> How do I do that? BTW, yor suggestion with "C : (~B)=> A;" did not work
> for me,
> but it is possible it is all my fault. I like your second suggestion
> better, but don't know how
> do it.......I find the ANTLR an amazing software, but still it takes
> time to "get it"...
>  
> Vlastimil
> 
> 


From robert.soule at gmail.com  Mon Feb 23 10:16:32 2009
From: robert.soule at gmail.com (Robert Soule)
Date: Mon, 23 Feb 2009 13:16:32 -0500
Subject: [antlr-interest] void* conversion in C runtime
In-Reply-To: <CC872B7C-6171-4C7A-9D96-FDFC68FB3B1D@cs.usfca.edu>
References: <d1316fd70902201236r4bbcaf52h1cd442ec62ff88e6@mail.gmail.com>
	<499F1545.8020802@temporal-wave.com>
	<d1316fd70902201248m550b844bj18aae63ec359d0d9@mail.gmail.com>
	<499F19DB.4050506@temporal-wave.com>
	<d1316fd70902211327n12e66596j9a8357cb06b8cea8@mail.gmail.com>
	<49A0AE53.1000400@temporal-wave.com>
	<B8027B6EC32D46308A11C9869CF6D94E@DFW5RB41>
	<CC872B7C-6171-4C7A-9D96-FDFC68FB3B1D@cs.usfca.edu>
Message-ID: <d1316fd70902231016p5025eddp228af4802dfe7040@mail.gmail.com>

I am also getting compiler errors in 3.2.2 code that works with 3.1.1.
I believe there
is an extra ")" in the generated code:

 // Foo.g:127:108: ( '.' IDENTIFIER )*
 {
  while ( (stream_IDENTIFIER != NULL &&
             stream_IDENTIFIER->hasNext(stream_IDENTIFIER)) ||
             stream_207 != NULL &&
             stream_207->hasNext(stream_207))  )      // Line 11798 here.
  {
    // some other code
  }
 // some other code
}

FooParser.cpp:11798: error: expected primary-expression before ')' token
FooParser.cpp:11798: error: expected `;' before ')' token



On Sun, Feb 22, 2009 at 12:17 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
> Hi Jim is away for a week now; he should take a look when he comes back.
> Ter
> On Feb 22, 2009, at 4:47 AM, Gary R. Van Sickle wrote:
>
>> Hi Jim,
>>
>> Looks like you may have "missed a spot" or two.  With the recent 3.1.2
>> release I'm getting a number of such errors.  E.g. here's one:
>>
>>
>> static pss9_combined_lexer_parserParser_declaration_SCOPE
>> pss9_combined_lexer_parserParser_declarationPush
>> (pss9_combined_lexer_parserP
>> arser ctx)
>> {
>>    /* Pointer used to create a new set of attributes
>>     */
>>    pss9_combined_lexer_parserParser_declaration_SCOPE
>> newAttributes;
>>
>>    /* Allocate the memory for a new structure if we need one.
>>     */
>>    if
>> (ctx->pss9_combined_lexer_parserParser_declarationStack->size(ctx-
>> >pss9_comb
>> ined_lexer_parserParser_declarationStack) >
>> ctx->pss9_combined_lexer_parserParser_declarationStack_limit)
>>    {
>>        // The current limit value was less than the number of scopes
>> available on the stack so
>>        // we can just reuse one. Our limit tracks the stack count,
>> so the
>> index of the entry we want
>>        // is one less than that, or conveniently, the current value of
>> limit.
>>        //
>>       ///// GRVS: HERE'S THE ERROR:
>>        newAttributes =
>> ctx->pss9_combined_lexer_parserParser_declarationStack->get(ctx-
>> >pss9_combin
>> ed_lexer_parserParser_declarationStack,
>> ctx->pss9_combined_lexer_parserParser_declarationStack_limit);
>>    }
>>    else
>>    {
>>        // Need a new allocation
>>        //
>>        newAttributes =
>> (pss9_combined_lexer_parserParser_declaration_SCOPE)
>> ANTLR3_MALLOC
>> (sizeof(ss9_combined_lexer_parserParser_declaration_SCOPE));
>>        if  (newAttributes != NULL)
>>        {
>>            /* Standard ANTLR3 library implementation
>>             */
>>
>> ctx->pss9_combined_lexer_parserParser_declarationStack->push(ctx-
>> >pss9_combi
>> ned_lexer_parserParser_declarationStack, newAttributes, (void (*)(void
>> *))declarationFree);
>>        }
>>    }
>>       [...etc...]
>>
>>
>> This gets me the following error from gcc:
>>
>> ss9_combined_lexer_parserParser.cpp: In function
>> `ss9_combined_lexer_parserParser_declaration_SCOPE_struct*
>> pss9_combined_lexer_parserParser_declarationPush
>> (ss9_combined_lexer_parserPa
>> rser_Ctx_struct*)':
>> ss9_combined_lexer_parserParser.cpp:353: error: invalid conversion
>> from
>> `void*' to `ss9_combined_lexer_parserParser_declaration_SCOPE_struct*'
>>
>> There's different breakage as well.  Check this out:
>>
>>
>>       if      (SCOPE_TOP(external_declaration)>free != NULL)
>>       {
>>
>> SCOPE_TOP(external_declaration)>-
>> >free(SCOPE_TOP(external_declaration));
>>       }
>>
>>
>> Not quite sure what's going on there, but in the first case it looks
>> like
>> there's one too few "-"'s and in the second one too many ">"'s
>> before the
>> "free".
>>
>> --
>> Gary R. Van Sickle
>>
>>
>>> -----Original Message-----
>>> From: antlr-interest-bounces at antlr.org
>>> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jim Idle
>>> Sent: Saturday, February 21, 2009 7:46 PM
>>> Cc: antlr-interest at antlr.org
>>> Subject: Re: [antlr-interest] void* conversion in C runtime
>>>
>>> Robert Soule wrote:
>>>> Hi Jim,
>>>>
>>>> Is there a stable version of the antlr tool jar that supports this
>>>> change? I got:
>>>>
>>>> antlr-3.1.2-SNAPSHOT-jar-with-dependencies.jar
>>>>
>>>> from:
>>>>
>>>>
>>> http://antlr.org/hudson/job/ANTLR_Tool/lastSuccessfulBuild/org.antlr
>>> $a
>>>> ntlr/
>>>>
>>>> but the code it generates doesn't compile. I see from the web page
>>>> that there are 17 failures in the unit tests.
>>>>
>>>
>>> Unit tests are known failures, mostly down to the tests
>>> themselves, but you can download the 3.1.2 release now from
>>> the main download page.
>>>
>>> Jim
>>>> thanks,
>>>> Robert
>>>>
>>>>
>>>> On Fri, Feb 20, 2009 at 4:00 PM, Jim Idle
>>> <jimi at temporal-wave.com> wrote:
>>>>
>>>>> Robert Soule wrote:
>>>>>
>>>>>> I am using antlr-3.1.1.jar and libantlr3c-3.1.2.b1.
>>>>>>
>>>>>> If this change doesn't get into the official release, can I get a
>>>>>> copy from cvs or something?
>>>>>>
>>>>>>
>>>>> I have just fixed it, so that one will be in the release.
>>>>>
>>>>> In order to get other fixes like this, you need to use the
>>>>> 3.1.2-SNAPSHOT jar. You can get the latest jars by visiting
>>>>> org.antlr/hudson, where you will be able to pick up that
>>> change later
>>>>> this afternoon (check the recent changes link).
>>>>>
>>>>> Jim
>>>>>
>>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>>> Unsubscribe:
>>>>>
>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-addres
>>>>> s
>>>>>
>>>>>
>>>
>>>
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe:
>>> http://www.antlr.org/mailman/options/antlr-interest/your-email
>> -address
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From antlr at mirality.co.nz  Mon Feb 23 10:39:20 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 24 Feb 2009 07:39:20 +1300
Subject: [antlr-interest] void* conversion in C runtime
In-Reply-To: <d1316fd70902231016p5025eddp228af4802dfe7040@mail.gmail.com
 >
References: <d1316fd70902201236r4bbcaf52h1cd442ec62ff88e6@mail.gmail.com>
	<499F1545.8020802@temporal-wave.com>
	<d1316fd70902201248m550b844bj18aae63ec359d0d9@mail.gmail.com>
	<499F19DB.4050506@temporal-wave.com>
	<d1316fd70902211327n12e66596j9a8357cb06b8cea8@mail.gmail.com>
	<49A0AE53.1000400@temporal-wave.com>
	<B8027B6EC32D46308A11C9869CF6D94E@DFW5RB41>
	<CC872B7C-6171-4C7A-9D96-FDFC68FB3B1D@cs.usfca.edu>
	<d1316fd70902231016p5025eddp228af4802dfe7040@mail.gmail.com>
Message-ID: <20090223183946.38BB734184F5@www.antlr.org>

At 07:16 24/02/2009, Robert Soule wrote:
 >I believe there is an extra ")" in the generated code:
 >
 > // Foo.g:127:108: ( '.' IDENTIFIER )*
 > {
 >  while ( (stream_IDENTIFIER != NULL &&
 >             stream_IDENTIFIER->hasNext(stream_IDENTIFIER)) ||
 >             stream_207 != NULL &&
 >             stream_207->hasNext(stream_207))  )      // Line 
11798
 >here.
 >  {
 >    // some other code
 >  }
 > // some other code
 >}

Actually looks more like a *missing* ( on the prior line :)


From antlr at mirality.co.nz  Mon Feb 23 10:46:12 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 24 Feb 2009 07:46:12 +1300
Subject: [antlr-interest] Match A with exception of B .....how do I do
 that?
In-Reply-To: <858362.89966.qm@web57501.mail.re1.yahoo.com>
References: <49A242B3.1020204@gmx.de>
	<858362.89966.qm@web57501.mail.re1.yahoo.com>
Message-ID: <20090223184634.5BE7334184C2@www.antlr.org>

At 04:26 24/02/2009, Vlastimil Adamovsky wrote:
>I am still wrestling with ANLR and learning the secret ways 
>....:)))
>You write:
>
>"but for better error messages it is recommend just to match the 
>superset
>and to check in the parser for incorrect characters."
>
>How do I do that? BTW, yor suggestion with "C : (~B)=> A;" did 
>not work for me,
>but it is possible it is all my fault. I like your second 
>suggestion better, but don't know how do it.......I find the 
>ANTLR an amazing software, but still it takes time to "get it"...

There are a couple of "secret ways" that might help you here :)

The first is that in ANTLR, any rule that starts with a leading 
uppercase character is a lexer rule, and anything with a leading 
lowercase character is a parser rule.  You should try to keep the 
lexer as simple as possible, and in particular avoid creating 
multiple top-level lexer rules that can match the same input 
(which in general means that a non-fragment lexer rule should not 
refer to any other non-fragment lexer rules).  (Almost all of the 
rules you posted earlier look like they should be parser rules.)

The second is that ~ only operates on sets, not sequences.  In the 
lexer, that means that ~ will only work on individual characters; 
in the parser, that means that ~ will only work on individual 
tokens.


From parrt at cs.usfca.edu  Mon Feb 23 12:27:02 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 23 Feb 2009 12:27:02 -0800
Subject: [antlr-interest] ooops. missing resource for gunit in 3.1.2
Message-ID: <8AFBAA1A-5E31-4CEB-B854-72E43030AFA3@cs.usfca.edu>

Hi, since it's "early", I'm going to update the 3.1.2 release w/o a  
3.1.2-1 number increment; gunit is missing a jar file in there. damn!   
complaints?  Send 'em quick before I update ;)
Ter

From parrt at cs.usfca.edu  Mon Feb 23 12:32:48 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 23 Feb 2009 12:32:48 -0800
Subject: [antlr-interest] ooops. missing resource for gunit in 3.1.2
In-Reply-To: <8AFBAA1A-5E31-4CEB-B854-72E43030AFA3@cs.usfca.edu>
References: <8AFBAA1A-5E31-4CEB-B854-72E43030AFA3@cs.usfca.edu>
Message-ID: <48351FBD-3E44-4BF6-A51F-75B404E21C47@cs.usfca.edu>


On Feb 23, 2009, at 12:27 PM, Terence Parr wrote:

> Hi, since it's "early", I'm going to update the 3.1.2 release w/o a
> 3.1.2-1 number increment; gunit is missing a jar file in there. damn!
> complaints?  Send 'em quick before I update ;)

make that a missing stringtemplate file.

Ter


From michael.bedward at gmail.com  Mon Feb 23 13:52:08 2009
From: michael.bedward at gmail.com (Michael Bedward)
Date: Tue, 24 Feb 2009 08:52:08 +1100
Subject: [antlr-interest] RElease 3.1.2 now in Maven repo
In-Reply-To: <49A2E030.7030704@gmx.de>
References: <49A0B1A1.4020809@temporal-wave.com>
	<4de0b9580902230704o5b8b1bfepb73c1133b53f20ca@mail.gmail.com>
	<49A2E030.7030704@gmx.de>
Message-ID: <e24c4c270902231352q7b64e415y8bb1a87521c89987@mail.gmail.com>

also this wiki page...
http://www.antlr.org/wiki/display/ANTLR3/Using+ANTLR+3+with+Maven+2

Michael

From fdmanana at ieee.org  Mon Feb 23 14:22:21 2009
From: fdmanana at ieee.org (Filipe David Manana)
Date: Mon, 23 Feb 2009 23:22:21 +0100
Subject: [antlr-interest] ANTLRWorks interpreter vs debugger
Message-ID: <cadf1c690902231422t7c725f7fx65c6a6727084df3d@mail.gmail.com>

Hello,

I've just started learning and playing with ANTLR.
I am writing a subset of the JavaScript grammar (as the examples at
antlr.org don't work for me).
In ANTLRWorks, when I use the interpreter, the second rule generates two
errors with messages:

first node -> "FailedPredicateException(sourceElements, {can't deal with
predicates yet}?)"
second node -> "FailedPredicateException(sourceElements,
{synpred3_JavaScript}?)"

(parse tree with the error nodes can be found in the attachment)

However, if I use the debugger, the parsing is successful.
Why is this so?

My grammar is the following (also in attachment):

grammar JavaScript;

options {
    backtrack=true;
    memoize=true;
}

program
    : sourceElements EOF
    ;

sourceElements
    : LT* ( sourceElement LT* )*
    ;

sourceElement
    : functionDeclaration
    | statement
    ;

functionDeclaration
    : 'function' LT* Identifier LT* formalParameterList LT* functionBody
    ;

formalParameterList
    : '(' LT* ( Identifier ( LT* ',' LT* Identifier )* )? LT* ')'
    ;

functionBody
    : '{' sourceElements '}'
    ;

statement
    : emptyStatement
    | blockStatement
    ;

emptyStatement
    : ';'
    ;

blockStatement
    : '{' LT* statementList? LT* '}'
    ;

statementList
    : statement ( LT* statement )*
    ;


Identifier
    : IdentifierStart IdentifierPart*
    ;

fragment IdentifierStart
    : UnicodeLetter
    | '$'
    | '_'
        ;

fragment IdentifierPart
    : IdentifierStart
    | UnicodeDigit
    ;

fragment UnicodeLetter
    : 'a'..'z' | 'A'..'Z'
    ;

fragment UnicodeDigit
    : '0'..'9'
    ;

LT
    : '\n' | '\r'
    ;

MultilineComment
    : '/*' (options { greedy=false; } : .)* '*/' { $channel=HIDDEN; }
    ;

LineComment
    : '//' ~(LT)* { $channel=HIDDEN; }
    ;

WhiteSpace
    :  ( ' ' | '\t' | '\v' | '\f' )  { $channel=HIDDEN; }
    ;



Thank you,
regards


-- 
Filipe David Manana,
fdmanana at ieee.org
PGP key - http://pgp.mit.edu:11371/pks/lookup?op=get&search=0xC569452B

"Reasonable men adapt themselves to the world.
Unreasonable men adapt the world to themselves.
That's why all progress depends on unreasonable men."
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090223/80258da6/attachment.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: JavaScript.g
Type: application/octet-stream
Size: 1188 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090223/80258da6/attachment.obj 

From fdmanana at ieee.org  Mon Feb 23 14:28:05 2009
From: fdmanana at ieee.org (Filipe David Manana)
Date: Mon, 23 Feb 2009 23:28:05 +0100
Subject: [antlr-interest] ANTLRWorks interpreter vs debugger
Message-ID: <cadf1c690902231428g493b7e17i5a8ad60cbdedcd7e@mail.gmail.com>

Hello,

I've just started learning and playing with ANTLR.
I am writing a subset of the JavaScript grammar (as the ones at
antlr.orgdon't work for me).
In ANTLRWorks, when I use the interpreter, the second rule generates two
errors with messages:

first node -> "FailedPredicateException(sourceElements, {can't deal with
predicates yet}?)"
second node -> "FailedPredicateException(sourceElements,
{synpred3_JavaScript}?)"

However, if I use the debugger, the parsing is successful.
Why is this so?

My grammar is the following (also in attachment):

grammar JavaScript;

options {
    backtrack=true;
    memoize=true;
}

program
    : sourceElements EOF
    ;

sourceElements
    : LT* ( sourceElement LT* )*
    ;

sourceElement
    : functionDeclaration
    | statement
    ;

functionDeclaration
    : 'function' LT* Identifier LT* formalParameterList LT* functionBody
    ;

formalParameterList
    : '(' LT* ( Identifier ( LT* ',' LT* Identifier )* )? LT* ')'
    ;

functionBody
    : '{' sourceElements '}'
    ;

statement
    : emptyStatement
    | blockStatement
    ;

emptyStatement
    : ';'
    ;

blockStatement
    : '{' LT* statementList? LT* '}'
    ;

statementList
    : statement ( LT* statement )*
    ;


Identifier
    : IdentifierStart IdentifierPart*
    ;

fragment IdentifierStart
    : UnicodeLetter
    | '$'
    | '_'
        ;

fragment IdentifierPart
    : IdentifierStart
    | UnicodeDigit
    ;

fragment UnicodeLetter
    : 'a'..'z' | 'A'..'Z'
    ;

fragment UnicodeDigit
    : '0'..'9'
    ;

LT
    : '\n' | '\r'
    ;

MultilineComment
    : '/*' (options { greedy=false; } : .)* '*/' { $channel=HIDDEN; }
    ;

LineComment
    : '//' ~(LT)* { $channel=HIDDEN; }
    ;

WhiteSpace
    :  ( ' ' | '\t' | '\v' | '\f' )  { $channel=HIDDEN; }
    ;



Thank you,
regards


-- 
Filipe David Manana,
fdmanana at ieee.org
PGP key - http://pgp.mit.edu:11371/pks/lookup?op=get&search=0xC569452B

"Reasonable men adapt themselves to the world.
Unreasonable men adapt the world to themselves.
That's why all progress depends on unreasonable men."
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090223/b6adb49b/attachment.html 

From des at deshartman.com  Mon Feb 23 18:28:04 2009
From: des at deshartman.com (Des Hartman)
Date: Tue, 24 Feb 2009 13:28:04 +1100
Subject: [antlr-interest] simple "find-and-replace"
Message-ID: <8773d42e0902231828y237603xc8ea5d368b8d8a69@mail.gmail.com>

Hi,

I'm looking for a simple "find-and-replace" like way to use ANTLR to convert
the following back and forth:

"=SUM(A,5)"   ---->   "=SUM([3],5)"

and

"=SUM([3],5)"   ---->   "=SUM(A,5)"

I have written a lexer/parser for a user entered formula. In the formula,
the user references columns like in Excel and the parser picks these up as
localReferences (LREF). I need to convert these local references into an
internal reference (IREF) to speed up recalculations in another part of the
program. I need to preserve the formula text to allow the user to come back
and edit it in the original local reference format.

"=SUM(A,5)"   ---->   "=SUM([3],5)" - Internal reference has A in position 3
in the internal Array.

When the user edits this formula I need to reverse the "find-and-replace"
and convert IREF to LREF and present the formula back to the user

"=SUM([3],5)"   ---->   "=SUM(A,5)" - Internal reference has A in position 3
in the internal Array.


==========

I have been looking at StringTrees as a possible way to do this and have a
few questions about it:

1) Can I use it with ActionScript? I am using ActionScript for the
Lexer/Parser and Tree. I only see references to Java, C# and Python.
2) Is there a simple way to do this? Maybe a separate parser file instead of
a more complex Tree?
3) As part of the rewrite, I need to call a function that does the look up
to get [3] to "A" and back. Can this be inserted as part of the StringTree
rewrite?

Here is the relevant parts of the parser

operand
    : literal
    | localRefExpr             -> ^(LREF localRefExpr)
    | intRefExpr             -> ^(IREF intRefExpr)
    | LPAREN expression RPAREN     -> ^(expression)
    ;

intRefExpr
    // ={5}. Used for internal reference
    : '[' NUMBER ']'
    ;

localRefExpr
    // =A. Used for Formula editing to give Excel feel
    : NAME
    ;

NAME     : LETTER*
    ;

NUMBER    :
    ('0' .. '9')+ '.' ('0' .. '9')+ Exponent?
    |   '.' ( '0' .. '9' )+ Exponent?
    |   '0'..'9' ('0'..'9')* Exponent?
        ;

fragment
Exponent
    :   ( 'e' | 'E' ) ( '+' | '-' )? ( '0' .. '9' )+
    ;

fragment
LETTER
    : ('a'..'z') | ('A'..'Z')

Thanks
Des
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090224/7793a870/attachment.html 

From parrt at cs.usfca.edu  Mon Feb 23 18:34:23 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 23 Feb 2009 18:34:23 -0800
Subject: [antlr-interest] simple "find-and-replace"
In-Reply-To: <8773d42e0902231828y237603xc8ea5d368b8d8a69@mail.gmail.com>
References: <8773d42e0902231828y237603xc8ea5d368b8d8a69@mail.gmail.com>
Message-ID: <287DDB9E-C1F6-4D29-BAD6-F5BC70F3DA30@cs.usfca.edu>

Leon and I are working on getting ANTLRMorph ready to release. Given a  
grammar and a script like you have below, it will do the  
transformations for you. Unfortunately it's not ready. probably  
another two, three weeks
Ter
On Feb 23, 2009, at 6:28 PM, Des Hartman wrote:

> Hi,
>
> I'm looking for a simple "find-and-replace" like way to use ANTLR to  
> convert the following back and forth:
>
> "=SUM(A,5)"   ---->   "=SUM([3],5)"
>
> and
>
> "=SUM([3],5)"   ---->   "=SUM(A,5)"
>
> I have written a lexer/parser for a user entered formula. In the  
> formula, the user references columns like in Excel and the parser  
> picks these up as localReferences (LREF). I need to convert these  
> local references into an internal reference (IREF) to speed up  
> recalculations in another part of the program. I need to preserve  
> the formula text to allow the user to come back and edit it in the  
> original local reference format.
>
> "=SUM(A,5)"   ---->   "=SUM([3],5)" - Internal reference has A in  
> position 3 in the internal Array.
>
> When the user edits this formula I need to reverse the "find-and- 
> replace" and convert IREF to LREF and present the formula back to  
> the user
>
> "=SUM([3],5)"   ---->   "=SUM(A,5)" - Internal reference has A in  
> position 3 in the internal Array.
>
>
> ==========
>
> I have been looking at StringTrees as a possible way to do this and  
> have a few questions about it:
>
> 1) Can I use it with ActionScript? I am using ActionScript for the  
> Lexer/Parser and Tree. I only see references to Java, C# and Python.
> 2) Is there a simple way to do this? Maybe a separate parser file  
> instead of a more complex Tree?
> 3) As part of the rewrite, I need to call a function that does the  
> look up to get [3] to "A" and back. Can this be inserted as part of  
> the StringTree rewrite?
>
> Here is the relevant parts of the parser
>
> operand
>     : literal
>     | localRefExpr             -> ^(LREF localRefExpr)
>     | intRefExpr             -> ^(IREF intRefExpr)
>     | LPAREN expression RPAREN     -> ^(expression)
>     ;
>
> intRefExpr
>     // ={5}. Used for internal reference
>     : '[' NUMBER ']'
>     ;
>
> localRefExpr
>     // =A. Used for Formula editing to give Excel feel
>     : NAME
>     ;
>
> NAME     : LETTER*
>     ;
>
> NUMBER    :
>     ('0' .. '9')+ '.' ('0' .. '9')+ Exponent?
>     |   '.' ( '0' .. '9' )+ Exponent?
>     |   '0'..'9' ('0'..'9')* Exponent?
>         ;
>
> fragment
> Exponent
>     :   ( 'e' | 'E' ) ( '+' | '-' )? ( '0' .. '9' )+
>     ;
>
> fragment
> LETTER
>     : ('a'..'z') | ('A'..'Z')
>
> Thanks
> Des
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From antlr-list at arizona-software.ch  Mon Feb 23 18:38:16 2009
From: antlr-list at arizona-software.ch (Jean Bovet)
Date: Mon, 23 Feb 2009 18:38:16 -0800
Subject: [antlr-interest] ANTLRWorks 1.2.3 released
Message-ID: <D215B41D-20CD-4DC4-9E83-C9E04EA17651@arizona-software.ch>

Hi,

ANTLRWorks 1.2.3 is now available from http://www.antlr.org/works/index.html 
. It includes bug fixes and ANTLR 3.1.2 (along with gUnit and  
StringTemplate).

Regards,

Jean


From jaluber at gmx.de  Mon Feb 23 22:32:39 2009
From: jaluber at gmx.de (Johannes Luber)
Date: Tue, 24 Feb 2009 07:32:39 +0100
Subject: [antlr-interest] ANTLRWorks interpreter vs debugger
In-Reply-To: <cadf1c690902231422t7c725f7fx65c6a6727084df3d@mail.gmail.com>
References: <cadf1c690902231422t7c725f7fx65c6a6727084df3d@mail.gmail.com>
Message-ID: <49A39487.1030202@gmx.de>

Filipe David Manana schrieb:
> Hello,
> 
> I've just started learning and playing with ANTLR.
> I am writing a subset of the JavaScript grammar (as the examples at
> antlr.org <http://antlr.org> don't work for me).
> In ANTLRWorks, when I use the interpreter, the second rule generates two
> errors with messages:
> 
> first node -> "FailedPredicateException(sourceElements, {can't deal with
> predicates yet}?)"
> second node -> "FailedPredicateException(sourceElements,
> {synpred3_JavaScript}?)"
> 
> (parse tree with the error nodes can be found in the attachment)
> 
> However, if I use the debugger, the parsing is successful.
> Why is this so?

Because Jean Bovet hasn't done the effort required to make the
interpreter capable to deal with predicates yet. Considering that such
predicates can do everything like actions doing so is a lot of work,
compared to just using the debugger and improving the editor with other
features.

Johannes
> 
> My grammar is the following (also in attachment):
> 
> grammar JavaScript;
> 
> options {
>     backtrack=true;
>     memoize=true;
> }
> 
> program
>     : sourceElements EOF
>     ;
>    
> sourceElements
>     : LT* ( sourceElement LT* )*
>     ;
>    
> sourceElement
>     : functionDeclaration
>     | statement
>     ;
>    
> functionDeclaration
>     : 'function' LT* Identifier LT* formalParameterList LT* functionBody
>     ;
>    
> formalParameterList
>     : '(' LT* ( Identifier ( LT* ',' LT* Identifier )* )? LT* ')'
>     ;
> 
> functionBody
>     : '{' sourceElements '}'
>     ;
> 
> statement
>     : emptyStatement
>     | blockStatement
>     ;
>    
> emptyStatement
>     : ';'
>     ;
>    
> blockStatement
>     : '{' LT* statementList? LT* '}'
>     ;
>    
> statementList
>     : statement ( LT* statement )*
>     ;
> 
> 
> Identifier
>     : IdentifierStart IdentifierPart*
>     ;
>    
> fragment IdentifierStart
>     : UnicodeLetter
>     | '$'
>     | '_'
>         ;
>        
> fragment IdentifierPart
>     : IdentifierStart
>     | UnicodeDigit
>     ;
>    
> fragment UnicodeLetter
>     : 'a'..'z' | 'A'..'Z'
>     ;
> 
> fragment UnicodeDigit
>     : '0'..'9'
>     ;
> 
> LT
>     : '\n' | '\r'
>     ;
>    
> MultilineComment
>     : '/*' (options { greedy=false; } : .)* '*/' { $channel=HIDDEN; }
>     ;
> 
> LineComment
>     : '//' ~(LT)* { $channel=HIDDEN; }
>     ;
>    
> WhiteSpace
>     :  ( ' ' | '\t' | '\v' | '\f' )  { $channel=HIDDEN; }
>     ;
> 
> 
> 
> Thank you,
> regards
> 
> 
> -- 
> Filipe David Manana,
> fdmanana at ieee.org <mailto:fdmanana at ieee.org>
> PGP key - http://pgp.mit.edu:11371/pks/lookup?op=get&search=0xC569452B
> <http://pgp.mit.edu:11371/pks/lookup?op=get&search=0xC569452B>
> 
> "Reasonable men adapt themselves to the world.
> Unreasonable men adapt the world to themselves.
> That's why all progress depends on unreasonable men."
> 
> 
> ------------------------------------------------------------------------
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From paul.bouche at nsn.com  Tue Feb 24 02:57:55 2009
From: paul.bouche at nsn.com (=?ISO-8859-15?Q?=22Paul_Bouch=E9_=28NSN=29=22?=)
Date: Tue, 24 Feb 2009 11:57:55 +0100
Subject: [antlr-interest] ANTLR 3.1.2 bug in tree grammars? -
	RewriteEmptyStreamException
Message-ID: <49A3D2B3.3010903@nsn.com>

Hi,

I just upgraded to ANTLR v3.1.2 from 3.0. What worked before does not 
work anymore.... :-( I looked through the changes list, but could not 
find anything related.

We first create an AST and then parse it with a tree grammar. The syntax 
is a list key = value pairs, where a structure can be built using curly 
brackets. A structure is again a list of key-value pairs, i.e.
struct = { a = 3, b = 4 }

also
struct = { }

was allowed which created an empty sub structure.

This is broken now. I get the exception:
Exception in thread "main" 
org.antlr.runtime.tree.RewriteEmptyStreamException: rule properties
    at 
org.antlr.runtime.tree.RewriteRuleElementStream._next(RewriteRuleElementStream.java:158)
    at 
org.antlr.runtime.tree.RewriteRuleElementStream.nextTree(RewriteRuleElementStream.java:145)
    ...

I have no clue whatsoever what this means. Well obviously somehow the 
parser tries to rewrite an empty stream. Well before 3.1.2, in 3.0 this 
worked fine without errors. Now it does not work. Something must have 
changed or is it a bug?

The grammar for parsing the above syntax is basically as follows:
start
        :
        propertynode EOF
        ;
propertynode
        :
        properties        -> ^( TYPE PROPERTYNODE ) properties
        ;
properties
        :
        ( property ( ',' property )* )? ','?        -> property*
        ;
property
        :
        name        '='        value        -> ^( PROPERTY name cast? 
attributes? value )
        ;      
value
        :
        ( plain        | '{' propertynode '}'        )        -> plain? 
list? propertynode?
        ;

As you can see rule value calls propertynode which allows substructures. 
If the rule properties does match an empty obviously a stream is not 
instanciated as it was before in 3.0 hence the exception. Can you tell 
me how I need to modify the grammar to make it work in 3.1.2?

Thanks a bunch!
Paul

-- 
Paul Bouch?
Voice: +49 30 590080-1284
 
Nokia Siemens Networks GmbH & Co. KG, An den Treptowers 1, 12435 Berlin, Germany
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRA 88537
WEEE-Reg.-Nr.: DE 52984304

Pers?nlich haftende Gesellschafterin / General Partner: Nokia Siemens Networks Management GmbH
Gesch?ftsleitung / Board of Directors: Lydia Sommer, Olaf Horsthemke
Vorsitzender des Aufsichtsrats / Chairman of supervisory board: Lauri Kivinen
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRB 163416


From parrt at cs.usfca.edu  Tue Feb 24 10:06:30 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 24 Feb 2009 10:06:30 -0800
Subject: [antlr-interest] ANTLRWorks interpreter vs debugger
In-Reply-To: <49A39487.1030202@gmx.de>
References: <cadf1c690902231422t7c725f7fx65c6a6727084df3d@mail.gmail.com>
	<49A39487.1030202@gmx.de>
Message-ID: <17CA7545-C67A-40E2-80E7-6ACCABD5E718@cs.usfca.edu>


On Feb 23, 2009, at 10:32 PM, Johannes Luber wrote:
>> However, if I use the debugger, the parsing is successful.
>> Why is this so?
>
> Because Jean Bovet hasn't done the effort required to make the

It's my issue; Jean just uses my interp ;)

Ter

From parrt at cs.usfca.edu  Tue Feb 24 10:07:25 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 24 Feb 2009 10:07:25 -0800
Subject: [antlr-interest] ANTLR 3.1.2 bug in tree grammars? -
	RewriteEmptyStreamException
In-Reply-To: <49A3D2B3.3010903@nsn.com>
References: <49A3D2B3.3010903@nsn.com>
Message-ID: <03CC5FE0-FDC3-4ADE-B595-A38AB2A6CD1A@cs.usfca.edu>

Yeah, i fixed bugs. Naturally, you need:

> propertynode
>        :
>        properties        -> ^( TYPE PROPERTYNODE ) properties?

since properties can be empty

Ter

On Feb 24, 2009, at 2:57 AM, Paul Bouch? (NSN) wrote:

> Hi,
>
> I just upgraded to ANTLR v3.1.2 from 3.0. What worked before does not
> work anymore.... :-( I looked through the changes list, but could not
> find anything related.
>
> We first create an AST and then parse it with a tree grammar. The  
> syntax
> is a list key = value pairs, where a structure can be built using  
> curly
> brackets. A structure is again a list of key-value pairs, i.e.
> struct = { a = 3, b = 4 }
>
> also
> struct = { }
>
> was allowed which created an empty sub structure.
>
> This is broken now. I get the exception:
> Exception in thread "main"
> org.antlr.runtime.tree.RewriteEmptyStreamException: rule properties
>    at
> org 
> .antlr 
> .runtime 
> .tree.RewriteRuleElementStream._next(RewriteRuleElementStream.java: 
> 158)
>    at
> org 
> .antlr 
> .runtime 
> .tree 
> .RewriteRuleElementStream.nextTree(RewriteRuleElementStream.java:145)
>    ...
>
> I have no clue whatsoever what this means. Well obviously somehow the
> parser tries to rewrite an empty stream. Well before 3.1.2, in 3.0  
> this
> worked fine without errors. Now it does not work. Something must have
> changed or is it a bug?
>
> The grammar for parsing the above syntax is basically as follows:
> start
>        :
>        propertynode EOF
>        ;
> propertynode
>        :
>        properties        -> ^( TYPE PROPERTYNODE ) properties
>        ;
> properties
>        :
>        ( property ( ',' property )* )? ','?        -> property*
>        ;
> property
>        :
>        name        '='        value        -> ^( PROPERTY name cast?
> attributes? value )
>        ;
> value
>        :
>        ( plain        | '{' propertynode '}'        )        -> plain?
> list? propertynode?
>        ;
>
> As you can see rule value calls propertynode which allows  
> substructures.
> If the rule properties does match an empty obviously a stream is not
> instanciated as it was before in 3.0 hence the exception. Can you tell
> me how I need to modify the grammar to make it work in 3.1.2?
>
> Thanks a bunch!
> Paul
>
> -- 
> Paul Bouch?
> Voice: +49 30 590080-1284
>
> Nokia Siemens Networks GmbH & Co. KG, An den Treptowers 1, 12435  
> Berlin, Germany
> Sitz der Gesellschaft: M?nchen / Registered office: Munich
> Registergericht: M?nchen / Commercial registry: Munich, HRA 88537
> WEEE-Reg.-Nr.: DE 52984304
>
> Pers?nlich haftende Gesellschafterin / General Partner: Nokia  
> Siemens Networks Management GmbH
> Gesch?ftsleitung / Board of Directors: Lydia Sommer, Olaf Horsthemke
> Vorsitzender des Aufsichtsrats / Chairman of supervisory board:  
> Lauri Kivinen
> Sitz der Gesellschaft: M?nchen / Registered office: Munich
> Registergericht: M?nchen / Commercial registry: Munich, HRB 163416
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From s.barnett-cormack at lancaster.ac.uk  Tue Feb 24 11:18:40 2009
From: s.barnett-cormack at lancaster.ac.uk (Sam Barnett-Cormack)
Date: Tue, 24 Feb 2009 19:18:40 +0000
Subject: [antlr-interest] Strange behaviour
Message-ID: <49A44810.60503@lancaster.ac.uk>

Hi all,

I'm back to using ANTLR after a long time away, and in principle I have
to say I'm liking ANTLR3. However, I'm seeing something very strange.

Based on advice in various places, I'm using tokens{} to define keywords
in my combined grammar. However, if I define them all, I get lots of
warnings:

"warning(209): workspace/asn.1-parse/grammars/ASN_1.g:131:1: Multiple
token rules can match input such as "'V'": VideotexString,
VisibleString, CAPID

As a result, token(s) VisibleString,CAPID were disabled for that input"

These are topped off by:

"error(208): workspace/asn.1-parse/grammars/ASN_1.g:159:1: The following
token definitions can never be matched because prior tokens match the
same input:
ABSTRACT_SYNTAX,ALL,APPLICATION,AUTOMATIC,BIT,BMPString,BOOLEAN,BY,CHOICE,
CLASS,COMPONENT,COMPONENTS,CONSTRAINED,CONTAINING,DEFINITIONS,ENCODED,END,
ENUMERATED,EXCEPT,EXPLICIT,EXPORTS,EXTENSIBILITY,EXTERNAL,FROM,
GeneralString,GraphicString,IDENTIFIER,IMPLICIT,IMPLIED,IMPORTS,INCLUDES,
INSTANCE,INTEGER,INTERSECTION,ISO646String,MIN,MINUS_INFINITY,NumericString,
ObjectDescriptor,OCTET,OF,OPTIONAL,PDV,PLUS_INFITIY,PRESENT,PrintableString,
PRIVATE,RELATIVE_OID,SET,SIZE,STRING,SYNTAX,TAGS,TeletexString,TRUE,
TYPE_IDENTIFIER,UNIQUE,UNIVERSAL,UniversalString,UTCTime,UTF8String,
VisibleString,HSTRING"


Obviously, this result is bad. My grammar is attached, with sufficiently
few on the keywords uncommented to allow it to build. If I uncomment
them all, it gives me one of the above warnings for each letter of the
alphabet that a keyword starts with, pretty much.

Anyone have any idea what's going on?

Sam Barnett-Cormack
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: ASN_1.g
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20090224/efaf2523/attachment.pl 

From rschumeyer at gmail.com  Tue Feb 24 11:52:24 2009
From: rschumeyer at gmail.com (Rick Schumeyer)
Date: Tue, 24 Feb 2009 14:52:24 -0500
Subject: [antlr-interest] antlr beginner confused over ambiguities
Message-ID: <95b1cc100902241152v3e84bab3yd59f96d362d3699@mail.gmail.com>

I've read through the ambiguity section of the Definitive Reference, but I'm
still confused on what must be a common problem.  The following grammar is
supposed to recognize a time in the format hh:mm:ss, while also recognizing
arbitrary strings elsewhere.

If the input string is "12:34:45", then of course antlr returns a STRING
token.  I understand why it does that (I think) but I'm not really sure how
to fix that.  I'm fuzzy on the difference between a semantic and syntactic
predicate, and whether one of those is what I need.

grammar STest;

line    :    timestamp;

timestamp
    :    INT ':' INT ':' INT
    ;

INT    :    ('0'..'9')+;

STRING    :    ('!'..'+' | '-'..'~')+; /* anything but ws or comma */
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090224/534fe21c/attachment.html 

From antlr at mirality.co.nz  Tue Feb 24 12:32:52 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 25 Feb 2009 09:32:52 +1300
Subject: [antlr-interest] antlr beginner confused over ambiguities
In-Reply-To: <95b1cc100902241152v3e84bab3yd59f96d362d3699@mail.gmail.com
 >
References: <95b1cc100902241152v3e84bab3yd59f96d362d3699@mail.gmail.com>
Message-ID: <20090224203316.BD87E341841E@www.antlr.org>

At 08:52 25/02/2009, Rick Schumeyer wrote:
>If the input string is "12:34:45", then of course antlr returns a 
>STRING token.  I understand why it does that (I think) but I'm 
>not really sure how to fix that.  I'm fuzzy on the difference 
>between a semantic and syntactic predicate, and whether one of 
>those is what I need.
>
>grammar STest;
>
>line    :    timestamp;
>
>timestamp
>     :    INT ':' INT ':' INT
>     ;
>
>INT    :    ('0'..'9')+;
>
>STRING    :    ('!'..'+' | '-'..'~')+; /* anything but ws or 
>comma */

fragment TIMESTAMP: INT ':' INT ':' INT ;

INT : ('0'..'9')+ ;

STRING
   : (TIMESTAMP) => TIMESTAMP { $type = TIMESTAMP; }
   | ('!'..'+' | '-'..'~')+; /* anything but ws or comma */
   ;


From des at deshartman.com  Tue Feb 24 14:58:45 2009
From: des at deshartman.com (Des Hartman)
Date: Wed, 25 Feb 2009 09:58:45 +1100
Subject: [antlr-interest] simple "find-and-replace"
In-Reply-To: <287DDB9E-C1F6-4D29-BAD6-F5BC70F3DA30@cs.usfca.edu>
References: <8773d42e0902231828y237603xc8ea5d368b8d8a69@mail.gmail.com>
	<287DDB9E-C1F6-4D29-BAD6-F5BC70F3DA30@cs.usfca.edu>
Message-ID: <8773d42e0902241458k3a85b579scbd805316615d6e1@mail.gmail.com>

Terrence

Had a look at what you have so far on ANTLRMorph. The problem I am also
going to have is that I need to output the result using ActionScript. All
the code is for a Flex page and thus only have ActionScript available. :-(

I had a look at a possible way a parser can do it, but it is ugly (see
below). Any other way to simply replace a recognize token with another token
and spit out the original input using ActionScript???

===================================

formula returns [String value]
    : (EQ)? e=expression { if($EQ.text==null) {$value = $e.value;} else
{$value = $EQ.text + $e.value;} }
    ;


expression returns [String value]
    : e=boolExpr {$value = $e.value;}
    ;
boolExpr returns [String value]
    : e=concatExpr {$value = $e.value;} (
    ( AND   { if($AND.text==null)   {$value += $e.value;} else {$value +=
$AND.text + $e.value;} }
    | OR    { if($OR.text==null)    {$value += $e.value;} else {$value +=
$OR.text + $e.value;} }
    | LT    { if($LT.text==null)    {$value += $e.value;} else {$value +=
$LT.text + $e.value;} }
    | LTEQ  { if($LTEQ.text==null)  {$value += $e.value;} else {$value +=
$LTEQ.text + $e.value;} }
    | GT    { if($GT.text==null)    {$value += $e.value;} else {$value +=
$GT.text + $e.value;} }
    | GTEQ  { if($GTEQ.text==null)  {$value += $e.value;} else {$value +=
$GTEQ.text + $e.value;} }
    | EQ    { if($EQ.text==null)    {$value += $e.value;} else {$value +=
$EQ.text + $e.value;} }
    | NOTEQ { if($NOTEQ.text==null) {$value += $e.value;} else {$value +=
$NOTEQ.text + $e.value;} }
    )
      e=concatExpr {$value += $e.value;}
    )*
    ;
concatExpr returns [String value]
    : e=sumExpr {$value = $e.value;}
    (
    CONCAT { if($CONCAT.text==null) {$value += $e.value;} else {$value +=
$CONCAT.text + $e.value;} }
    e=sumExpr {$value += $e.value;}
    )*

Thanks
Des



2009/2/24 Terence Parr <parrt at cs.usfca.edu>

> Leon and I are working on getting ANTLRMorph ready to release. Given a
> grammar and a script like you have below, it will do the transformations for
> you. Unfortunately it's not ready. probably another two, three weeks
> Ter
>
> On Feb 23, 2009, at 6:28 PM, Des Hartman wrote:
>
>  Hi,
>>
>> I'm looking for a simple "find-and-replace" like way to use ANTLR to
>> convert the following back and forth:
>>
>> "=SUM(A,5)"   ---->   "=SUM([3],5)"
>>
>> and
>>
>> "=SUM([3],5)"   ---->   "=SUM(A,5)"
>>
>> I have written a lexer/parser for a user entered formula. In the formula,
>> the user references columns like in Excel and the parser picks these up as
>> localReferences (LREF). I need to convert these local references into an
>> internal reference (IREF) to speed up recalculations in another part of the
>> program. I need to preserve the formula text to allow the user to come back
>> and edit it in the original local reference format.
>>
>> "=SUM(A,5)"   ---->   "=SUM([3],5)" - Internal reference has A in position
>> 3 in the internal Array.
>>
>> When the user edits this formula I need to reverse the "find-and-replace"
>> and convert IREF to LREF and present the formula back to the user
>>
>> "=SUM([3],5)"   ---->   "=SUM(A,5)" - Internal reference has A in position
>> 3 in the internal Array.
>>
>>
>> ==========
>>
>> I have been looking at StringTrees as a possible way to do this and have a
>> few questions about it:
>>
>> 1) Can I use it with ActionScript? I am using ActionScript for the
>> Lexer/Parser and Tree. I only see references to Java, C# and Python.
>> 2) Is there a simple way to do this? Maybe a separate parser file instead
>> of a more complex Tree?
>> 3) As part of the rewrite, I need to call a function that does the look up
>> to get [3] to "A" and back. Can this be inserted as part of the StringTree
>> rewrite?
>>
>> Here is the relevant parts of the parser
>>
>> operand
>>    : literal
>>    | localRefExpr             -> ^(LREF localRefExpr)
>>    | intRefExpr             -> ^(IREF intRefExpr)
>>    | LPAREN expression RPAREN     -> ^(expression)
>>    ;
>>
>> intRefExpr
>>    // ={5}. Used for internal reference
>>    : '[' NUMBER ']'
>>    ;
>>
>> localRefExpr
>>    // =A. Used for Formula editing to give Excel feel
>>    : NAME
>>    ;
>>
>> NAME     : LETTER*
>>    ;
>>
>> NUMBER    :
>>    ('0' .. '9')+ '.' ('0' .. '9')+ Exponent?
>>    |   '.' ( '0' .. '9' )+ Exponent?
>>    |   '0'..'9' ('0'..'9')* Exponent?
>>        ;
>>
>> fragment
>> Exponent
>>    :   ( 'e' | 'E' ) ( '+' | '-' )? ( '0' .. '9' )+
>>    ;
>>
>> fragment
>> LETTER
>>    : ('a'..'z') | ('A'..'Z')
>>
>> Thanks
>> Des
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090225/62f7f4d7/attachment.html 

From parrt at cs.usfca.edu  Tue Feb 24 17:24:27 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 24 Feb 2009 17:24:27 -0800
Subject: [antlr-interest] simple "find-and-replace"
In-Reply-To: <8773d42e0902241458k3a85b579scbd805316615d6e1@mail.gmail.com>
References: <8773d42e0902231828y237603xc8ea5d368b8d8a69@mail.gmail.com>
	<287DDB9E-C1F6-4D29-BAD6-F5BC70F3DA30@cs.usfca.edu>
	<8773d42e0902241458k3a85b579scbd805316615d6e1@mail.gmail.com>
Message-ID: <65F7030A-2E43-45D0-8069-506767CE99EA@cs.usfca.edu>

  high. There is probably not an easy way in action script I'm afraid :(
Ter
On Feb 24, 2009, at 2:58 PM, Des Hartman wrote:

> Terrence
>
> Had a look at what you have so far on ANTLRMorph. The problem I am  
> also going to have is that I need to output the result using  
> ActionScript. All the code is for a Flex page and thus only have  
> ActionScript available. :-(
>
> I had a look at a possible way a parser can do it, but it is ugly  
> (see below). Any other way to simply replace a recognize token with  
> another token and spit out the original input using ActionScript???
>
> ===================================
>
> formula returns [String value]
>     : (EQ)? e=expression { if($EQ.text==null) {$value = $e.value;}  
> else {$value = $EQ.text + $e.value;} }
>     ;
>
>
> expression returns [String value]
>     : e=boolExpr {$value = $e.value;}
>     ;
> boolExpr returns [String value]
>     : e=concatExpr {$value = $e.value;} (
>     ( AND   { if($AND.text==null)   {$value += $e.value;} else  
> {$value += $AND.text + $e.value;} }
>     | OR    { if($OR.text==null)    {$value += $e.value;} else  
> {$value += $OR.text + $e.value;} }
>     | LT    { if($LT.text==null)    {$value += $e.value;} else  
> {$value += $LT.text + $e.value;} }
>     | LTEQ  { if($LTEQ.text==null)  {$value += $e.value;} else  
> {$value += $LTEQ.text + $e.value;} }
>     | GT    { if($GT.text==null)    {$value += $e.value;} else  
> {$value += $GT.text + $e.value;} }
>     | GTEQ  { if($GTEQ.text==null)  {$value += $e.value;} else  
> {$value += $GTEQ.text + $e.value;} }
>     | EQ    { if($EQ.text==null)    {$value += $e.value;} else  
> {$value += $EQ.text + $e.value;} }
>     | NOTEQ { if($NOTEQ.text==null) {$value += $e.value;} else  
> {$value += $NOTEQ.text + $e.value;} }
>     )
>       e=concatExpr {$value += $e.value;}
>     )*
>     ;
> concatExpr returns [String value]
>     : e=sumExpr {$value = $e.value;}
>     (
>     CONCAT { if($CONCAT.text==null) {$value += $e.value;} else  
> {$value += $CONCAT.text + $e.value;} }
>     e=sumExpr {$value += $e.value;}
>     )*
>
> Thanks
> Des
>
>
>
> 2009/2/24 Terence Parr <parrt at cs.usfca.edu>
> Leon and I are working on getting ANTLRMorph ready to release. Given  
> a grammar and a script like you have below, it will do the  
> transformations for you. Unfortunately it's not ready. probably  
> another two, three weeks
> Ter
>
> On Feb 23, 2009, at 6:28 PM, Des Hartman wrote:
>
> Hi,
>
> I'm looking for a simple "find-and-replace" like way to use ANTLR to  
> convert the following back and forth:
>
> "=SUM(A,5)"   ---->   "=SUM([3],5)"
>
> and
>
> "=SUM([3],5)"   ---->   "=SUM(A,5)"
>
> I have written a lexer/parser for a user entered formula. In the  
> formula, the user references columns like in Excel and the parser  
> picks these up as localReferences (LREF). I need to convert these  
> local references into an internal reference (IREF) to speed up  
> recalculations in another part of the program. I need to preserve  
> the formula text to allow the user to come back and edit it in the  
> original local reference format.
>
> "=SUM(A,5)"   ---->   "=SUM([3],5)" - Internal reference has A in  
> position 3 in the internal Array.
>
> When the user edits this formula I need to reverse the "find-and- 
> replace" and convert IREF to LREF and present the formula back to  
> the user
>
> "=SUM([3],5)"   ---->   "=SUM(A,5)" - Internal reference has A in  
> position 3 in the internal Array.
>
>
> ==========
>
> I have been looking at StringTrees as a possible way to do this and  
> have a few questions about it:
>
> 1) Can I use it with ActionScript? I am using ActionScript for the  
> Lexer/Parser and Tree. I only see references to Java, C# and Python.
> 2) Is there a simple way to do this? Maybe a separate parser file  
> instead of a more complex Tree?
> 3) As part of the rewrite, I need to call a function that does the  
> look up to get [3] to "A" and back. Can this be inserted as part of  
> the StringTree rewrite?
>
> Here is the relevant parts of the parser
>
> operand
>    : literal
>    | localRefExpr             -> ^(LREF localRefExpr)
>    | intRefExpr             -> ^(IREF intRefExpr)
>    | LPAREN expression RPAREN     -> ^(expression)
>    ;
>
> intRefExpr
>    // ={5}. Used for internal reference
>    : '[' NUMBER ']'
>    ;
>
> localRefExpr
>    // =A. Used for Formula editing to give Excel feel
>    : NAME
>    ;
>
> NAME     : LETTER*
>    ;
>
> NUMBER    :
>    ('0' .. '9')+ '.' ('0' .. '9')+ Exponent?
>    |   '.' ( '0' .. '9' )+ Exponent?
>    |   '0'..'9' ('0'..'9')* Exponent?
>        ;
>
> fragment
> Exponent
>    :   ( 'e' | 'E' ) ( '+' | '-' )? ( '0' .. '9' )+
>    ;
>
> fragment
> LETTER
>    : ('a'..'z') | ('A'..'Z')
>
> Thanks
> Des
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From yimm8369 at hotmail.com  Tue Feb 24 18:48:04 2009
From: yimm8369 at hotmail.com (YingAnnie)
Date: Wed, 25 Feb 2009 10:48:04 +0800
Subject: [antlr-interest] if..else in StringTemplate
Message-ID: <BAY122-W55B5AEB8FAA510E764D13DDBAC0@phx.gbl>


 

 

 

Hi everyone,

 

I want to use if else in the StringTemplateGroup,if (x ="org") print 1234 else print 5678, but <if(x=="org")> doesnot work. 

 

tree grammar Treegrammar;

.....

importDeclaration 

    :   ^(IMPORT_DECL importDeclarationTypeElement)
          ->assgin(x={$importDeclarationTypeElement.text})
    ;

 

.....

 

 

group T;
assgin(x)::= <<
<if(x=="org")><"1234"><else><"5678"><endif>
>>


Then I use the following, but it never replace.

 

In tree grammar Treegrammar, I add :

 

@members{

private StringTemplate template(String name)
         {
             return TestASTBlockStatement.templates.getInstanceOf(name);
         } 
}

 

TestASTBlockStatement.java is as follows:

 

 public static StringTemplateGroup templates;

 

public class TestASTBlockStatement extends BaseTestCase {

  
    public static StringTemplateGroup templates;
    public void testNormal1() throws Exception {
     FileReader groupFileR= new FileReader("T.stg");
     templates= new StringTemplateGroup(groupFileR);
    groupFileR.close();
     
     
     CharStream input = new ANTLRFileStream("TestASTBlockStatment_testcase001");
     ActionScript3Lexer lex = new ActionScript3Lexer(input); 
     ASTokenRewriteStream tokens = new ASTokenRewriteStream(lex);
    ActionScript3Parser parser = new ActionScript3Parser(tokens);
     parser.setTreeAdaptor(new ASCommonTreeAdaptor());
     packageDeclaration_return retval=parser.packageDeclaration();
      
     ASCommonTree tree = (ASCommonTree) retval.getTree();
     ASCommonTreeNodeStream nodes = new ASCommonTreeNodeStream(tree);
     nodes.setTokenStream(tokens);
    Treegrammar walker = new Treegrammar(nodes);
     walker.setTemplateLib(templates);
  
     Treegrammar.packageDeclaration_return r2= walker.packageDeclaration() ;
       System.out.println(tokens.toString());
       
    }

 

 

and in the tree grammar Treegrammar;

 

importDeclaration returns [StringTemplate code]
    :   ^(IMPORT_DECL a=importDeclarationTypeElement)
      {if($a.text.equals("org"))
        {StringTemplate code=null;
         code=template("assgin");
         code.setAttribute("x",a);
        } 
    ;  

 

 

There are no error but it does not work.

 

Any idea?

 

 

Thanks in advance.

 

 

Annie

_________________________________________________________________
??????????????????????????????
http://piao.live.com/?form=PANER01 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090225/eeb681d4/attachment.html 

From antlr-list at arizona-software.ch  Tue Feb 24 21:04:10 2009
From: antlr-list at arizona-software.ch (Jean Bovet)
Date: Tue, 24 Feb 2009 21:04:10 -0800
Subject: [antlr-interest] ANTLRWorks 1.2.3 released
In-Reply-To: <1633C11AAD5C1C47A79C673A32A64FBADC126B@webmail.ite.com.au>
References: <D215B41D-20CD-4DC4-9E83-C9E04EA17651@arizona-software.ch>
	<1633C11AAD5C1C47A79C673A32A64FBADC126B@webmail.ite.com.au>
Message-ID: <E96CEAAB-87F7-4524-B1A9-FD28E1C8A481@arizona-software.ch>

Oops... yeah, I am having problem updating the page. It will be fixed  
as soon as Terence fixes the permission. In the mean time, you can use  
the Check for Update menu item in ANTLRWorks to grab the latest version.

Jean

On Feb 24, 2009, at 2:51 PM, Richard Lewis wrote:

> Hi,
>
> The web page and links still refer to 1.2.2. I've been able to compile
> and build from source from here:
> http://www.antlr.org/hudson/job/ANTLRWorks/ws/
>
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jean Bovet
> Sent: Tuesday, 24 February 2009 1:38 PM
> To: antlr-interest at antlr.org ANTLR
> Subject: [antlr-interest] ANTLRWorks 1.2.3 released
>
> Hi,
>
> ANTLRWorks 1.2.3 is now available from
> http://www.antlr.org/works/index.html
> . It includes bug fixes and ANTLR 3.1.2 (along with gUnit and
> StringTemplate).
>
> Regards,
>
> Jean
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From thomas.woelfle at interactive-objects.com  Tue Feb 24 23:39:46 2009
From: thomas.woelfle at interactive-objects.com (Thomas Woelfle)
Date: Wed, 25 Feb 2009 08:39:46 +0100
Subject: [antlr-interest] Problem when parsing numerics
In-Reply-To: <0ML4cO-1LadvS28Bv-000Lzs@mx.kundenserver.de>
References: <2969488.3161234948794703.JavaMail.root@star>
	<499C1E98.4070805@interactive-objects.com>
	<499C38AE.2060205@temporal-wave.com>
	<499D1E2B.9090907@interactive-objects.com>
	<0ML4cO-1LadvS28Bv-000Lzs@mx.kundenserver.de>
Message-ID: <49A4F5C2.9020900@interactive-objects.com>

Hi Gavin,

thanks for the tip. Using a syntactic predicate works. But to me this 
seems to be a bug in the algorithm that examines the minimal amount of 
lookahread since it calculates a wrong minimal lookahead, isn't it?

Regards,
Thomas

> At 21:54 19/02/2009, Thomas Woelfle wrote:
> >But even when factoring out "." into the DOT lexer rule the result
> >is the same.
> >I think my problem is not the parser but the lexer. As far as I
> >know a lexer usually tokenizes an input stream always trying to
> >find the longest valid token. In my case valid tokens are NUMERICs
> >and DOTs. Where a NUMERIC can be "5", "5.5", "123.56".
> >"5." is not a NUMERIC. Having that input stream I would have
> >expected the lexer to tokenize it into two tokens NUMERIC "5"
> >and DOT ".".
>
> To understand why it's behaving like that, you need to understand the 
> algorithm that ANTLR is currently using for the lexer.
>
> Basically, whenever it wants to generate a token, it calls the mTOKENS 
> method, which is effectively a rule that makes the following assumptions:
>   - all top-level lexer rules are possible alternatives
>   - exactly one token must be matched
>   - if none of the alternatives can be matched, then skip one 
> character and try again
>
> Coupled with this is a performance criterion that has it examine the 
> minimal amount of lookahead it can get away with to unambiguously 
> decide between two rules or alternatives.
>
> The upshot of all this is that when faced with the input "5.", the 
> mTOKENS rule will always select NUMERIC since it's the only rule that 
> allows the input to begin with digits.  Then the NUMERIC rule will 
> consume both the digits and the dot because when faced with the 
> decision whether to match the optional alt ('.' DIGIT+)? or to match 
> nothing, it only uses one character of lookahead (the dot), due to the 
> minimal-lookahead rule.
>
> It's basically seeing it as a choice between a consume-nothing 
> alternative and a consume-dot alternative, so the obvious condition is 
> whether the next character is a dot or not.  It doesn't look "past" 
> that and realise that if the dot isn't followed by a digit then it 
> can't possibly match the full alt successfully.
>
> You can force it to use two characters of lookahead via a syntactic 
> predicate, though:
>   NUMERIC : DIGIT+ (('.' DIGIT) => '.' DIGIT+)? ;
>


-- 
Interactive Objects Software GmbH
Basler Strasse 61
79100 Freiburg, Germany

Phone:  +49 761 400 73 0
mailto:thomas.woelfle at interactive-objects.com


------------------------------------------------------------------------

Interactive Objects' Legacy Modernization Solutions 

Get Your Applications SOA-Ready!

See http://www.interactive-objects.com/ for more information.

------------------------------------------------------------------------


Interactive Objects Software GmbH | Freiburg | Gesch?ftsf?hrer: Alberto Perandones, Andrea Hemprich
| AG Frbg. HRB 5810 | USt-ID: DE 197983057


From antlr at mirality.co.nz  Tue Feb 24 23:57:34 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 25 Feb 2009 20:57:34 +1300
Subject: [antlr-interest] Problem when parsing numerics
In-Reply-To: <49A4F5C2.9020900@interactive-objects.com>
References: <2969488.3161234948794703.JavaMail.root@star>
	<499C1E98.4070805@interactive-objects.com>
	<499C38AE.2060205@temporal-wave.com>
	<499D1E2B.9090907@interactive-objects.com>
	<0ML4cO-1LadvS28Bv-000Lzs@mx.kundenserver.de>
	<49A4F5C2.9020900@interactive-objects.com>
Message-ID: <20090225075801.766EA341841E@www.antlr.org>

At 20:39 25/02/2009, Thomas Woelfle wrote:
 >thanks for the tip. Using a syntactic predicate works. But to me 

 >this seems to be a bug in the algorithm that examines the 
minimal
 >amount of lookahread since it calculates a wrong minimal 
lookahead,
 >isn't it?

Yes and no.  Because there's a loop involved, the minimal 
lookahead is infinite, which is a little hard to express in static 
code :)

ANTLR probably could be a little bit smarter and generate the 
synpred for you behind the scenes (which is something I was 
suggesting myself about a year ago), but the current architecture 
and its half-ANTLR-v2-ness apparently doesn't lend itself too well 
to that.  Hopefully that'll get better before too long, especially 
with the upcoming CSharp3 port being self-hosted ;)


From louisonrust at gmail.com  Wed Feb 25 00:55:51 2009
From: louisonrust at gmail.com (Louis Onrust)
Date: Wed, 25 Feb 2009 09:55:51 +0100
Subject: [antlr-interest] Loosing characters when choosing a less strong
	alternative
Message-ID: <49A50797.5070209@gmail.com>

Hi,

I'm busy with some sort of code generator, and for some reason I wanted
it to recognise both "unsigned long long" and "unsigned long" too. But
that's where it went wrong.

This is a heavily edited snippet of my grammar, but it still contains
the "error":

===
grammar test1;

options { backtrack = true; }

program        : class_statement+ program?      ;
   
class_statement: 'public' attribute_type ID ';' ;
   
attribute_ID   : ID                             ;

attribute_type
    : 'unsigned long long'
    | 'unsigned long'
    ;

ID : ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*  ;
WS : ( ' ' | '\t' | '\r' | '\n')+ { $channel = HIDDEN; } ;
===

The point is now that this input gets recognised:
public unsigned long long objectId;
public unsigned long long userId;

But this input is not:
public unsigned long long objectId;
public unsigned long userId;
The debugger sees this as input then:
public unsigned long long objectId;
public serId;

I thought because of putting the stronger/bigger choice above, it should
recognise the unsigned long long anyway. But I don't understand why it
doesn't recognise unsigned long, because the first option doesn't fit,
so I'd think he'd search through the other options to see what fits.

Anyone can shed some light on this matter?

louis

From indhu.b at s7software.com  Wed Feb 25 01:22:11 2009
From: indhu.b at s7software.com (Indhu Bharathi)
Date: Wed, 25 Feb 2009 14:52:11 +0530 (IST)
Subject: [antlr-interest] Loosing characters when choosing a less strong
 alternative
In-Reply-To: <49A50797.5070209@gmail.com>
Message-ID: <4152487.2261235553731118.JavaMail.root@star>


attribute_type
    : 'unsigned long long'
    | 'unsigned long'
    ;

Though you have written 'unsigned long long' and 'unsigned long' in the parser rule, they will be still considered as lexer rule only. 

The lexer after seeing 'unsigned long' will try to go for the bigger match ('unsigned long long') as it sees a space following 'unsigned long'. But after consuming the space it will find out that there is a 'mismatch' and report an error. 

A more correct and elegant way of doing what you need is:


attribute_type
    : UNSIGNED LONG LONG
    | UNSIGNED LONG
    ;

UNSIGNED	:	'unsigned'
	;
	
LONG	:	'long'
	;

Hope that helps. You can take a look at 'Problem when parsing numerics' thread to understand more on why this happens. 

- Indhu


----- Original Message -----
From: Louis Onrust <louisonrust at gmail.com>
To: antlr-interest at antlr.org
Sent: Wednesday, February 25, 2009 2:25:51 PM GMT+0530 Asia/Calcutta
Subject: [antlr-interest] Loosing characters when choosing a less strong alternative

Hi,

I'm busy with some sort of code generator, and for some reason I wanted
it to recognise both "unsigned long long" and "unsigned long" too. But
that's where it went wrong.

This is a heavily edited snippet of my grammar, but it still contains
the "error":

===
grammar test1;

options { backtrack = true; }

program        : class_statement+ program?      ;
   
class_statement: 'public' attribute_type ID ';' ;
   
attribute_ID   : ID                             ;

attribute_type
    : 'unsigned long long'
    | 'unsigned long'
    ;

ID : ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*  ;
WS : ( ' ' | '\t' | '\r' | '\n')+ { $channel = HIDDEN; } ;
===

The point is now that this input gets recognised:
public unsigned long long objectId;
public unsigned long long userId;

But this input is not:
public unsigned long long objectId;
public unsigned long userId;
The debugger sees this as input then:
public unsigned long long objectId;
public serId;

I thought because of putting the stronger/bigger choice above, it should
recognise the unsigned long long anyway. But I don't understand why it
doesn't recognise unsigned long, because the first option doesn't fit,
so I'd think he'd search through the other options to see what fits.

Anyone can shed some light on this matter?

louis

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From joern.gebhardt at gmail.com  Wed Feb 25 02:16:51 2009
From: joern.gebhardt at gmail.com (Joern Gebhardt)
Date: Wed, 25 Feb 2009 11:16:51 +0100
Subject: [antlr-interest] Parsing Strings with placeholders
Message-ID: <717d79080902250216j1102f0e8jce4a4c7778708440@mail.gmail.com>

Hi,

my language is able to define and use some variables/placeholders similar to
the UNIX shell scripts:

a = "wonderful"
b = "The weather is ${a}."

The usage of these placeholder variables is only allowed inside of STRING
expressions.

My question is now, how do I define the lexer/parser rules in an intelligent
way so that I can easily replace the placeholders by their content?

Without the placeholders my STRING lexer rules looks like this:

STRING
    :   '"' (  EscapeSequence | ~( '\\' | '"' | '\r' | '\n'  )  )*  '"'
    ;

fragment
EscapeSequence
    :   '\\' ( 'b' |  't'  |   'n'  |   'f'  |   'r'  |   '\"' |   '\''  |
'\\'   |  ('0'..'3') ('0'..'7') ('0'..'7')  | ('0'..'7') ('0'..'7')  |
('0'..'7')  )
    ;

Can anybody please give me a hint how I get the placeholders inside of that?

I tried this:

IDENTIFIER
    : ('_' | 'a'..'z' | 'A'..'Z' ) ( '_' | 'a'..'z' | 'A'..'Z' | '1'..'9' )*
  ;

STRING
    :    '"' ( LITERAL | PLACEHOLDER )* '"'
    ;

LITERAL
    :    (  EscapeSequence | ~( '\\' | '"' | '\r' | '\n'  )  )*
    ;


fragment
EscapeSequence
    :   '\\' ( 'b' |  't'  |   'n'  |   'f'  |   'r'  |   '\"' |   '\''  |
'\\'   |  ('0'..'3') ('0'..'7') ('0'..'7')  | ('0'..'7') ('0'..'7')  |
('0'..'7')  )
    ;

PLACEHOLDER
    :    '$' IDENTIFIER
    |    '${' IDENTIFIER '}'
    ;

However, now the Lexer has no idea that a "LITERAL" can only exist inside a
STRING and the matching for the above rules is not unambiguous any more.

Thanks in advance for any useful hints,
Joe
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090225/653ac88b/attachment.html 

From liviu.u at gmail.com  Wed Feb 25 03:13:41 2009
From: liviu.u at gmail.com (Liviu U)
Date: Wed, 25 Feb 2009 13:13:41 +0200
Subject: [antlr-interest] C# targets problem with custom tree nodes
Message-ID: <c522653d0902250313y324fa66ci3c0a4a9a0a9a15cb@mail.gmail.com>

Hi, I noticed very strange behaviour with custom nodes specified in the parser:

A) if constructor parameters are specified, the node is never added to
the final tree structure, only the subnodes
B) if the token is an imaginary one, the same behaviour, the custom
node is missing from the tree.


For example:

 CLASS IDENT -> ^(CLASS<NodeIndentifier> IDENT) is OK

 CLASS IDENT -> ^(VIRTUAL_CLASS<NodeIndentifier> IDENT) is NOT OK no
node of type NodeIndentifier is added to the tree

 CLASS id=IDENT -> ^(CLASS<NodeIndentifer>[$id.Text] is NOT OK, no
node of type NodeIndentifier is added to the tree


Are any other people having issues with this?

From JALuber at gmx.de  Wed Feb 25 03:47:30 2009
From: JALuber at gmx.de (Johannes Luber)
Date: Wed, 25 Feb 2009 12:47:30 +0100
Subject: [antlr-interest] Parsing Strings with placeholders
In-Reply-To: <717d79080902250216j1102f0e8jce4a4c7778708440@mail.gmail.com>
References: <717d79080902250216j1102f0e8jce4a4c7778708440@mail.gmail.com>
Message-ID: <20090225114730.227300@gmx.net>

> Hi,
> 
> my language is able to define and use some variables/placeholders similar
> to
> the UNIX shell scripts:
> 
> a = "wonderful"
> b = "The weather is ${a}."
> 
> The usage of these placeholder variables is only allowed inside of STRING
> expressions.
> 
> My question is now, how do I define the lexer/parser rules in an
> intelligent
> way so that I can easily replace the placeholders by their content?

I think using island-grammars may be the solution. See <http://www.antlr.org/wiki/display/ANTLR3/Island+Grammars+Under+Parser+Control> as well the mentioned example.

Johannes
> 
> Without the placeholders my STRING lexer rules looks like this:
> 
> STRING
>     :   '"' (  EscapeSequence | ~( '\\' | '"' | '\r' | '\n'  )  )*  '"'
>     ;
> 
> fragment
> EscapeSequence
>     :   '\\' ( 'b' |  't'  |   'n'  |   'f'  |   'r'  |   '\"' |   '\''  |
> '\\'   |  ('0'..'3') ('0'..'7') ('0'..'7')  | ('0'..'7') ('0'..'7')  |
> ('0'..'7')  )
>     ;
> 
> Can anybody please give me a hint how I get the placeholders inside of
> that?
> 
> I tried this:
> 
> IDENTIFIER
>     : ('_' | 'a'..'z' | 'A'..'Z' ) ( '_' | 'a'..'z' | 'A'..'Z' | '1'..'9'
> )*
>   ;
> 
> STRING
>     :    '"' ( LITERAL | PLACEHOLDER )* '"'
>     ;
> 
> LITERAL
>     :    (  EscapeSequence | ~( '\\' | '"' | '\r' | '\n'  )  )*
>     ;
> 
> 
> fragment
> EscapeSequence
>     :   '\\' ( 'b' |  't'  |   'n'  |   'f'  |   'r'  |   '\"' |   '\''  |
> '\\'   |  ('0'..'3') ('0'..'7') ('0'..'7')  | ('0'..'7') ('0'..'7')  |
> ('0'..'7')  )
>     ;
> 
> PLACEHOLDER
>     :    '$' IDENTIFIER
>     |    '${' IDENTIFIER '}'
>     ;
> 
> However, now the Lexer has no idea that a "LITERAL" can only exist inside
> a
> STRING and the matching for the above rules is not unambiguous any more.
> 
> Thanks in advance for any useful hints,
> Joe

-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt? Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger01

From JALuber at gmx.de  Wed Feb 25 03:53:46 2009
From: JALuber at gmx.de (Johannes Luber)
Date: Wed, 25 Feb 2009 12:53:46 +0100
Subject: [antlr-interest] C# targets problem with custom tree nodes
In-Reply-To: <c522653d0902250313y324fa66ci3c0a4a9a0a9a15cb@mail.gmail.com>
References: <c522653d0902250313y324fa66ci3c0a4a9a0a9a15cb@mail.gmail.com>
Message-ID: <20090225115346.227310@gmx.net>

> Hi, I noticed very strange behaviour with custom nodes specified in the
> parser:
> 
> A) if constructor parameters are specified, the node is never added to
> the final tree structure, only the subnodes
> B) if the token is an imaginary one, the same behaviour, the custom
> node is missing from the tree.

I don't know if these behaviors are correct or if they are bugs as I never used such syntax myself. But as I haven't changed the runtime in that area for special .NET needs, any bugs are probably present in the Java runtime. Can you please post a minimal grammar along required supporting files, so I and Ter can investigate this issue?

Johannes
> 
> 
> For example:
> 
>  CLASS IDENT -> ^(CLASS<NodeIndentifier> IDENT) is OK
> 
>  CLASS IDENT -> ^(VIRTUAL_CLASS<NodeIndentifier> IDENT) is NOT OK no
> node of type NodeIndentifier is added to the tree
> 
>  CLASS id=IDENT -> ^(CLASS<NodeIndentifer>[$id.Text] is NOT OK, no
> node of type NodeIndentifier is added to the tree
> 
> 
> Are any other people having issues with this?
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address

-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt? Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger01

From joern.gebhardt at gmail.com  Wed Feb 25 05:37:07 2009
From: joern.gebhardt at gmail.com (Joern Gebhardt)
Date: Wed, 25 Feb 2009 14:37:07 +0100
Subject: [antlr-interest] Parsing Strings with placeholders
In-Reply-To: <20090225114730.227300@gmx.net>
References: <717d79080902250216j1102f0e8jce4a4c7778708440@mail.gmail.com>
	<20090225114730.227300@gmx.net>
Message-ID: <717d79080902250537w1eedb76dg7575e8e7d545380e@mail.gmail.com>

Hi Johannes,

thanks for the quick response. However, I think that the island grammar
approach you pointed out might be a little bit overweight for my small
island grammer that has only one rule to match the variable placeholders
(i.e ${...})

Instead I might do this parsing manually in a lexer action and emit two or
more tokens in this lexer rule as described in
http://www.antlr.org/wiki/pages/viewpage.action?pageId=3604497

Regards,
Joe



On Wed, Feb 25, 2009 at 12:47 PM, Johannes Luber <JALuber at gmx.de> wrote:

> > Hi,
> >
> > my language is able to define and use some variables/placeholders similar
> > to
> > the UNIX shell scripts:
> >
> > a = "wonderful"
> > b = "The weather is ${a}."
> >
> > The usage of these placeholder variables is only allowed inside of STRING
> > expressions.
> >
> > My question is now, how do I define the lexer/parser rules in an
> > intelligent
> > way so that I can easily replace the placeholders by their content?
>
> I think using island-grammars may be the solution. See <
> http://www.antlr.org/wiki/display/ANTLR3/Island+Grammars+Under+Parser+Control>
> as well the mentioned example.
>
> Johannes
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090225/8c21200b/attachment.html 

From s.barnett-cormack at lancaster.ac.uk  Wed Feb 25 05:39:03 2009
From: s.barnett-cormack at lancaster.ac.uk (Sam Barnett-Cormack)
Date: Wed, 25 Feb 2009 13:39:03 +0000
Subject: [antlr-interest] Strange behaviour
In-Reply-To: <49A44810.60503@lancaster.ac.uk>
References: <49A44810.60503@lancaster.ac.uk>
Message-ID: <49A549F7.6050105@lancaster.ac.uk>

And today, with absolutely no changes, it works. Weird.

In case the info is useful to someone, I uncommented the keywords one at 
a time, expecting it to suddenly break again at some point, and thus 
give me some clue as to what on earth is going on. However, it didn't 
break. I've started adding parser rules, and all is well.

Sam

Sam Barnett-Cormack wrote:
> Hi all,
> 
> I'm back to using ANTLR after a long time away, and in principle I have
> to say I'm liking ANTLR3. However, I'm seeing something very strange.
> 
> Based on advice in various places, I'm using tokens{} to define keywords
> in my combined grammar. However, if I define them all, I get lots of
> warnings:
> 
> "warning(209): workspace/asn.1-parse/grammars/ASN_1.g:131:1: Multiple
> token rules can match input such as "'V'": VideotexString,
> VisibleString, CAPID
> 
> As a result, token(s) VisibleString,CAPID were disabled for that input"
> 
> These are topped off by:
> 
> "error(208): workspace/asn.1-parse/grammars/ASN_1.g:159:1: The following
> token definitions can never be matched because prior tokens match the
> same input:
> ABSTRACT_SYNTAX,ALL,APPLICATION,AUTOMATIC,BIT,BMPString,BOOLEAN,BY,CHOICE,
> CLASS,COMPONENT,COMPONENTS,CONSTRAINED,CONTAINING,DEFINITIONS,ENCODED,END,
> ENUMERATED,EXCEPT,EXPLICIT,EXPORTS,EXTENSIBILITY,EXTERNAL,FROM,
> GeneralString,GraphicString,IDENTIFIER,IMPLICIT,IMPLIED,IMPORTS,INCLUDES,
> INSTANCE,INTEGER,INTERSECTION,ISO646String,MIN,MINUS_INFINITY,NumericString, 
> 
> ObjectDescriptor,OCTET,OF,OPTIONAL,PDV,PLUS_INFITIY,PRESENT,PrintableString, 
> 
> PRIVATE,RELATIVE_OID,SET,SIZE,STRING,SYNTAX,TAGS,TeletexString,TRUE,
> TYPE_IDENTIFIER,UNIQUE,UNIVERSAL,UniversalString,UTCTime,UTF8String,
> VisibleString,HSTRING"
> 
> 
> Obviously, this result is bad. My grammar is attached, with sufficiently
> few on the keywords uncommented to allow it to build. If I uncomment
> them all, it gives me one of the above warnings for each letter of the
> alphabet that a keyword starts with, pretty much.
> 
> Anyone have any idea what's going on?
> 
> Sam Barnett-Cormack
> 
> 
> ------------------------------------------------------------------------
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From paul.bouche at nsn.com  Wed Feb 25 07:05:49 2009
From: paul.bouche at nsn.com (=?ISO-8859-1?Q?=22Paul_Bouch=E9_=28NSN=29=22?=)
Date: Wed, 25 Feb 2009 16:05:49 +0100
Subject: [antlr-interest] ANTLR 3.1.2 bug in tree grammars? -
	RewriteEmptyStreamException
In-Reply-To: <03CC5FE0-FDC3-4ADE-B595-A38AB2A6CD1A@cs.usfca.edu>
References: <49A3D2B3.3010903@nsn.com>
	<03CC5FE0-FDC3-4ADE-B595-A38AB2A6CD1A@cs.usfca.edu>
Message-ID: <49A55E4D.9080604@nsn.com>

Thank you very much Ter :-)

So it was  a bug that this problem was not detected before?

Anyway, it works now :-)

Thanks.

Terence Parr schrieb:
> Yeah, i fixed bugs. Naturally, you need:
>
>> propertynode
>>        :
>>        properties        -> ^( TYPE PROPERTYNODE ) properties?
>
> since properties can be empty
>
> Ter
>
> On Feb 24, 2009, at 2:57 AM, Paul Bouch? (NSN) wrote:
>
>> Hi,
>>
>> I just upgraded to ANTLR v3.1.2 from 3.0. What worked before does not
>> work anymore.... :-( I looked through the changes list, but could not
>> find anything related.
>>
>> We first create an AST and then parse it with a tree grammar. The syntax
>> is a list key = value pairs, where a structure can be built using curly
>> brackets. A structure is again a list of key-value pairs, i.e.
>> struct = { a = 3, b = 4 }
>>
>> also
>> struct = { }
>>
>> was allowed which created an empty sub structure.
>>
>> This is broken now. I get the exception:
>> Exception in thread "main"
>> org.antlr.runtime.tree.RewriteEmptyStreamException: rule properties
>>    at
>> org.antlr.runtime.tree.RewriteRuleElementStream._next(RewriteRuleElementStream.java:158) 
>>
>>    at
>> org.antlr.runtime.tree.RewriteRuleElementStream.nextTree(RewriteRuleElementStream.java:145) 
>>
>>    ...
>>
>> I have no clue whatsoever what this means. Well obviously somehow the
>> parser tries to rewrite an empty stream. Well before 3.1.2, in 3.0 this
>> worked fine without errors. Now it does not work. Something must have
>> changed or is it a bug?
>>
>> The grammar for parsing the above syntax is basically as follows:
>> start
>>        :
>>        propertynode EOF
>>        ;
>> propertynode
>>        :
>>        properties        -> ^( TYPE PROPERTYNODE ) properties
>>        ;
>> properties
>>        :
>>        ( property ( ',' property )* )? ','?        -> property*
>>        ;
>> property
>>        :
>>        name        '='        value        -> ^( PROPERTY name cast?
>> attributes? value )
>>        ;
>> value
>>        :
>>        ( plain        | '{' propertynode '}'        )        -> plain?
>> list? propertynode?
>>        ;
>>
>> As you can see rule value calls propertynode which allows substructures.
>> If the rule properties does match an empty obviously a stream is not
>> instanciated as it was before in 3.0 hence the exception. Can you tell
>> me how I need to modify the grammar to make it work in 3.1.2?
>>
>> Thanks a bunch!
>> Paul
>>
>> -- 
>> Paul Bouch?
>> Voice: +49 30 590080-1284
>>
>> Nokia Siemens Networks GmbH & Co. KG, An den Treptowers 1, 12435 
>> Berlin, Germany
>> Sitz der Gesellschaft: M?nchen / Registered office: Munich
>> Registergericht: M?nchen / Commercial registry: Munich, HRA 88537
>> WEEE-Reg.-Nr.: DE 52984304
>>
>> Pers?nlich haftende Gesellschafterin / General Partner: Nokia Siemens 
>> Networks Management GmbH
>> Gesch?ftsleitung / Board of Directors: Lydia Sommer, Olaf Horsthemke
>> Vorsitzender des Aufsichtsrats / Chairman of supervisory board: Lauri 
>> Kivinen
>> Sitz der Gesellschaft: M?nchen / Registered office: Munich
>> Registergericht: M?nchen / Commercial registry: Munich, HRB 163416
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: 
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


-- 
Paul Bouch?
Voice: +49 30 590080-1284
 
Nokia Siemens Networks GmbH & Co. KG, An den Treptowers 1, 12435 Berlin, Germany
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRA 88537
WEEE-Reg.-Nr.: DE 52984304

Pers?nlich haftende Gesellschafterin / General Partner: Nokia Siemens Networks Management GmbH
Gesch?ftsleitung / Board of Directors: Lydia Sommer, Olaf Horsthemke
Vorsitzender des Aufsichtsrats / Chairman of supervisory board: Lauri Kivinen
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRB 163416


From antlr at jazillian.com  Wed Feb 25 07:58:39 2009
From: antlr at jazillian.com (Andy Tripp)
Date: Wed, 25 Feb 2009 10:58:39 -0500
Subject: [antlr-interest] request for comments on language implementation
In-Reply-To: <e24c4c270902201954l281ea80dt1f78fb2ac9957a89@mail.gmail.com>
References: <e24c4c270902201954l281ea80dt1f78fb2ac9957a89@mail.gmail.com>
Message-ID: <49A56AAF.4050904@jazillian.com>

Hi Michael,
Jiffle looks very cool!

A quick "how to compile and run demos" document would be nice.

Now that you've implemented AST rewrites via ANTLR, I'm curious about whether
you're happy with what you have or whether you think it would have
been easier to implement by just manipulating the ASTs "by hand"
(i.e. just manipulate the tree structure in you Java code the way you
would if ANTLR treewalkers didn't exist).

Here's my take on the issue: 
http://www.antlr2.org/article/1170602723163/treewalkers.html

I can see already you're no longer a neophyte - I would bet that what you're
doing is more complicated than most usages of ANTLR.

A small guide to the code would be nice - just explaining how the code is structured
and maybe an example showing what each of the AST-transform steps is doing.

One issue that comes up occasionally is grammar inheritance.
For example, you have the exact same definition of expr_op in several of 
your .g files. So you might want to look into that.

Proving an ant build.xml would be nice.
And, uhhh, what happened to Morph2.g and Morph3.g?  :)

Andy

Michael Bedward wrote:
> Hi folks,
> 
> This is a plug and a request for feedback on my first ANTLR project:
> Jiffle - a simple language for creating raster images from maths
> expressions.
> 
> You can find it at http://code.google.com/p/jai-tools/
> 
> Look for the Jiffle link at the bottom of that page.  There is a
> preliminary description of the language's purpose and grammar there
> plus you can browse the code including the grammar files.
> 
> I'm using the cascading AST rewrites approach with Jiffle and I'd be
> particularly grateful for any comments on this aspect of the
> implementation.  Since I'm very much an ANTLR neophyte there is bound
> to be a lot of inefficient / inappropriate / just plain wrong stuff in
> the grammars and associated code.  Any feedback on how to do things
> better will be gratefully received.  Be brutal !
> 
> cheers
> Michael
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From rschumeyer at gmail.com  Wed Feb 25 08:26:57 2009
From: rschumeyer at gmail.com (Rick Schumeyer)
Date: Wed, 25 Feb 2009 11:26:57 -0500
Subject: [antlr-interest] antlr beginner confused over ambiguities
In-Reply-To: <49a4597e.0735640a.5a55.0759SMTPIN_ADDED@mx.google.com>
References: <95b1cc100902241152v3e84bab3yd59f96d362d3699@mail.gmail.com>
	<49a4597e.0735640a.5a55.0759SMTPIN_ADDED@mx.google.com>
Message-ID: <95b1cc100902250826u3bc66457y9a06dda051147a19@mail.gmail.com>

This works, but it gives me one token containing "12:34:56".  I still need
to parse the hh,mm,ss values.  What is the best way to do that?

It seems that I want the parser to be able to tell the lexer "normally you
can consider INT:INT:INT as a STRING.  But right now, return tokens for each
piece."  Isn't that what a semantic predicate does?  Or am I really missing
something?

On Tue, Feb 24, 2009 at 3:32 PM, Gavin Lambert <antlr at mirality.co.nz> wrote:

> At 08:52 25/02/2009, Rick Schumeyer wrote:
>
>> If the input string is "12:34:45", then of course antlr returns a STRING
>> token.  I understand why it does that (I think) but I'm not really sure how
>> to fix that.  I'm fuzzy on the difference between a semantic and syntactic
>> predicate, and whether one of those is what I need.
>>
>> grammar STest;
>>
>> line    :    timestamp;
>>
>> timestamp
>>    :    INT ':' INT ':' INT
>>    ;
>>
>> INT    :    ('0'..'9')+;
>>
>> STRING    :    ('!'..'+' | '-'..'~')+; /* anything but ws or comma */
>>
>
> fragment TIMESTAMP: INT ':' INT ':' INT ;
>
> INT : ('0'..'9')+ ;
>
> STRING
>  : (TIMESTAMP) => TIMESTAMP { $type = TIMESTAMP; }
>  | ('!'..'+' | '-'..'~')+; /* anything but ws or comma */
>  ;
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090225/dd6aa3ba/attachment.html 

From s.barnett-cormack at lancaster.ac.uk  Wed Feb 25 08:35:32 2009
From: s.barnett-cormack at lancaster.ac.uk (Sam Barnett-Cormack)
Date: Wed, 25 Feb 2009 16:35:32 +0000
Subject: [antlr-interest] antlr beginner confused over ambiguities
In-Reply-To: <95b1cc100902250826u3bc66457y9a06dda051147a19@mail.gmail.com>
References: <95b1cc100902241152v3e84bab3yd59f96d362d3699@mail.gmail.com>	<49a4597e.0735640a.5a55.0759SMTPIN_ADDED@mx.google.com>
	<95b1cc100902250826u3bc66457y9a06dda051147a19@mail.gmail.com>
Message-ID: <49A57354.4000008@lancaster.ac.uk>

Rick Schumeyer wrote:
> This works, but it gives me one token containing "12:34:56".  I still 
> need to parse the hh,mm,ss values.  What is the best way to do that?
> 
> It seems that I want the parser to be able to tell the lexer "normally 
> you can consider INT:INT:INT as a STRING.  But right now, return tokens 
> for each piece."  Isn't that what a semantic predicate does?  Or am I 
> really missing something? 

Well, you *could* do something funky with multiple-token emitting and so 
on, I suppose, but my immediate reaction would be "hh:mm:ss is a 
fixed-length, fixed-delimeter format. I can do that with a split 
function in the target language". It all depends on what you want to 
consider a "token". From a parse point of view, is a time like that an 
indivisible entity, or three INTs with a delimeter?

Sam

> On Tue, Feb 24, 2009 at 3:32 PM, Gavin Lambert <antlr at mirality.co.nz 
> <mailto:antlr at mirality.co.nz>> wrote:
> 
>     At 08:52 25/02/2009, Rick Schumeyer wrote:
> 
>         If the input string is "12:34:45", then of course antlr returns
>         a STRING token.  I understand why it does that (I think) but I'm
>         not really sure how to fix that.  I'm fuzzy on the difference
>         between a semantic and syntactic predicate, and whether one of
>         those is what I need.
> 
>         grammar STest;
> 
>         line    :    timestamp;
> 
>         timestamp
>            :    INT ':' INT ':' INT
>            ;
> 
>         INT    :    ('0'..'9')+;
> 
>         STRING    :    ('!'..'+' | '-'..'~')+; /* anything but ws or
>         comma */
> 
> 
>     fragment TIMESTAMP: INT ':' INT ':' INT ;
> 
>     INT : ('0'..'9')+ ;
> 
>     STRING
>      : (TIMESTAMP) => TIMESTAMP { $type = TIMESTAMP; }
> 
>      | ('!'..'+' | '-'..'~')+; /* anything but ws or comma */
>      ;
> 
> 
> 
> ------------------------------------------------------------------------
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From andreas.meyer at smartshift.de  Wed Feb 25 08:46:34 2009
From: andreas.meyer at smartshift.de (Andreas Meyer)
Date: Wed, 25 Feb 2009 17:46:34 +0100
Subject: [antlr-interest] request for comments on language implementation
In-Reply-To: <49A56AAF.4050904@jazillian.com>
References: <e24c4c270902201954l281ea80dt1f78fb2ac9957a89@mail.gmail.com>
	<49A56AAF.4050904@jazillian.com>
Message-ID: <49A575EA.6030206@smartshift.de>

Hi!

Your mail was addressed to Michael, but I hope it's ok to answer 
nonetheless:

I would consider hand-written code to walk an AST harmful. Maybe there 
are cases where it is useful, but walking a dynamically typed tree like 
this looks like a maintenance nightmare to me. Also, you make yourself 
highly dependent on the underlying tree-model, which changed a lot from 
antlr2 to antlr3.

I share some of your thoughts on tree-grammars: they are not solving 
every problem. But still, they are useful for computing easy properties 
like "contains comparison" or "contains assignment to variable of type 
xxx". I guess what you are looking for is a tool to look for certain 
patterns in a source language, and how to map this pattern to another 
pattern of the same language? Possibly in concrete syntax, with 
placeholders? Yesterday I found a library called MatchO 
(http://wiki.di.uminho.pt/twiki/bin/view/Personal/Joost/MatchO) that 
seems to do just that, but I still have to experiment with it. With some 
modifications, it might even work for antlr3.

Best,
Andreas Meyer

Andy Tripp schrieb:
> Hi Michael,
> Jiffle looks very cool!
>
> A quick "how to compile and run demos" document would be nice.
>
> Now that you've implemented AST rewrites via ANTLR, I'm curious about whether
> you're happy with what you have or whether you think it would have
> been easier to implement by just manipulating the ASTs "by hand"
> (i.e. just manipulate the tree structure in you Java code the way you
> would if ANTLR treewalkers didn't exist).
>
> Here's my take on the issue: 
> http://www.antlr2.org/article/1170602723163/treewalkers.html
>
> I can see already you're no longer a neophyte - I would bet that what you're
> doing is more complicated than most usages of ANTLR.
>
> A small guide to the code would be nice - just explaining how the code is structured
> and maybe an example showing what each of the AST-transform steps is doing.
>
> One issue that comes up occasionally is grammar inheritance.
> For example, you have the exact same definition of expr_op in several of 
> your .g files. So you might want to look into that.
>
> Proving an ant build.xml would be nice.
> And, uhhh, what happened to Morph2.g and Morph3.g?  :)
>
> Andy
>
>   


From antlr at mirality.co.nz  Wed Feb 25 11:04:30 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 26 Feb 2009 08:04:30 +1300
Subject: [antlr-interest] Parsing Strings with placeholders
In-Reply-To: <717d79080902250216j1102f0e8jce4a4c7778708440@mail.gmail.co
 m>
References: <717d79080902250216j1102f0e8jce4a4c7778708440@mail.gmail.com>
Message-ID: <20090225190459.C83FF341847F@www.antlr.org>

At 23:16 25/02/2009, Joern Gebhardt wrote:
>a = "wonderful"
>b = "The weather is ${a}."
>
>The usage of these placeholder variables is only allowed inside 
>of STRING expressions.
[...]
>My question is now, how do I define the lexer/parser rules in an 
>intelligent way so that I can easily replace the placeholders by 
>their content?

Personally, I wouldn't bother altering the rules -- just lex it 
exactly as you did before (as a monolithic string) and then at 
parse or tree-walk time put in some custom code to find and 
replace the placeholders.

>I tried this:
>
>IDENTIFIER
>     : ('_' | 'a'..'z' | 'A'..'Z' ) ( '_' | 'a'..'z' | 'A'..'Z' | 
> '1'..'9' )*
>   ;
>
>STRING
>     :    '"' ( LITERAL | PLACEHOLDER )* '"'
>     ;
>
>LITERAL
>     :    (  EscapeSequence | ~( '\\' | '"' | '\r' | '\n'  )  )*
>     ;
>
>
>fragment
>EscapeSequence
>     :   '\\' ( 'b' |  't'  |   'n'  |   'f'  |   'r'  |   '\"' 
> |   '\''  |   '\\'   |  ('0'..'3') ('0'..'7') ('0'..'7')  | 
> ('0'..'7') ('0'..'7')  |  ('0'..'7')  )
>     ;
>
>PLACEHOLDER
>     :    '$' IDENTIFIER
>     |    '${' IDENTIFIER '}'
>     ;
>
>However, now the Lexer has no idea that a "LITERAL" can only 
>exist inside a STRING and the matching for the above rules is not 
>unambiguous any more.

Your LITERAL and PLACEHOLDER rules should be fragments as well, 
since you don't want them being matched at the top level.


From parrt at cs.usfca.edu  Wed Feb 25 13:29:23 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 25 Feb 2009 13:29:23 -0800
Subject: [antlr-interest] if..else in StringTemplate
In-Reply-To: <BAY122-W55B5AEB8FAA510E764D13DDBAC0@phx.gbl>
References: <BAY122-W55B5AEB8FAA510E764D13DDBAC0@phx.gbl>
Message-ID: <956F67BC-F769-48A7-B8C5-8B49D8E545EC@cs.usfca.edu>


On Feb 24, 2009, at 6:48 PM, YingAnnie wrote:

>
>
>
> Hi everyone,
>
> I want to use if else in the StringTemplateGroup,if (x ="org") print  
> 1234 else print 5678, but <if(x=="org")> doesnot work.

Correct. ST does not allow you to do any logic computations in the  
view. You must do the computation in the model and pass the result to  
the template.

  this philosophy is explained in a number of places on the website  
and the wiki.

Ter

From antlr at jazillian.com  Wed Feb 25 14:02:52 2009
From: antlr at jazillian.com (Andy Tripp)
Date: Wed, 25 Feb 2009 17:02:52 -0500
Subject: [antlr-interest] request for comments on language implementation
In-Reply-To: <49A575EA.6030206@smartshift.de>
References: <e24c4c270902201954l281ea80dt1f78fb2ac9957a89@mail.gmail.com>	<49A56AAF.4050904@jazillian.com>
	<49A575EA.6030206@smartshift.de>
Message-ID: <49A5C00C.1000704@jazillian.com>

Hi Andreas,

Andreas Meyer wrote:
> Hi!
> 
> Your mail was addressed to Michael, but I hope it's ok to answer 
> nonetheless:
> 
> I would consider hand-written code to walk an AST harmful. Maybe there 
> are cases where it is useful, but walking a dynamically typed tree like 
> this looks like a maintenance nightmare to me. 

I've found it much easier to do "hand-written" AST transformations.
For example, to find cases like "x+0" and replace with just "x", you'd
have something like:

List<AST> pluses = root.findAncestorsOfType(MyTokenTypes.PLUS);
for (AST ast: plusses) {
        if (ast.getChildCount() == 2 
	    && ast.getSecondChild().getType() == MyTokenTypes.INTEGER
            && ast.getSecondChild().getText().equals("0")) {
		ast.replaceMyself(ast.getFirstChild());  // replace "x+0" with just "x"
	}
}

Isn't this simpler than the ANTLR treewalker equivalent?
Especially since whoever takes over this code when you leave will likely
already know Java but not know ANTLR?

It's maintainable because later, when you want to also replace "x*1" with just "x", and a few
other similar patterns, you can make this into a generic function:

void replaceIdentity(MyTokenType type, String value, AST root) {
	List<AST> asts = root.findAncestorsOfType(type);
	for (AST ast: plusses) {
        	if (ast.getChildCount() == 2 
		    && ast.getSecondChild().getType() == MyTokenTypes.INTEGER
        	    && ast.getSecondChild().getText().equals("0")) {
			ast.replaceMyself(ast.getFirstChild());  // replace "x OP VALUE" with just "x"
		}
	}
}

And now, you just have:
replaceIdentity(MyTokenType.PLUS, "0", root); // replace "x+0" with "x"
replaceIdentity(MyTokenType.MINUS, "0", root);// replace "x-0" with "x"
replaceIdentity(MyTokenType.MULTIPLY, "1", root);// replace "x*1" with "x"
replaceIdentity(MyTokenType.DIVIDE, "1", root);// replace "x/1" with "x"

I don't see how an ANTLR treewalker lets you make things modular (and thus maintainable)
like this.


> Also, you make yourself 
> highly dependent on the underlying tree-model, which changed a lot from 
> antlr2 to antlr3.

Assuming by "tree-model", you mean the shape of the AST you're creating, no,
that wouldn't (or shouldn't) change with the version of ANTLR that you're
using. You build the AST to be the shape that you want, regardless of ANTLR version.

I think "hand-written" code to walk an AST is less
dependent on AST structure than an ANTLR treewalker is.
For example, suppose I want to find all the ancestor nodes of type
"INT". The "hand-written" code is something like:

List<AST> nodes = someNode.findAncestorsOfType(MyLanguageTokenTypes.INT);

...while the ANTLR treewalker that does the same thing consists of the
*entire* tree shape, with extra code added. The ANTLR treewalker forces
you to specify much more info than you actually care about.

If by "tree-model" you mean the ANTLR syntax and semantics, then obviously
the "hand-written" treewalker is not dependent on it at all, while the
ANLTR treewalker is completely dependent on it. So a working "hand-written"
treewalker requires no changes at all when going from ANTLR v2 to v3, while
an ANTLR treewalker will obviously have to be rewritten.

> 
> I share some of your thoughts on tree-grammars: they are not solving 
> every problem. But still, they are useful for computing easy properties 
> like "contains comparison" or "contains assignment to variable of type 
> xxx". 

I'm convinced that "hand-written" treewalkers are easier for even these
trivial cases. "contains comparison" is simply:

boolean contains(MyTokenType type) {
	if (this.type == type) return true;
	for (AST child: getChildren()) {
		if (child.contains(type)) return true;
	}
	return false;
}

I wrote that off the top of my head as fast as I could type it, and I
think most Java programmers could. Can you say the same for writing
an ANTLR treewalker?

As for "contains assignment to variable of type xxx", we'll need a symbol
table and need to know about variable scoping and syntax
(e.g. what type do we have here:  a.b.f()[20].c = 1;)
So that's one of the complicated cases that I talked about.




> I guess what you are looking for is a tool to look for certain 
> patterns in a source language, and how to map this pattern to another 
> pattern of the same language? Possibly in concrete syntax, with 
> placeholders? Yesterday I found a library called MatchO 
> (http://wiki.di.uminho.pt/twiki/bin/view/Personal/Joost/MatchO) that 
> seems to do just that, but I still have to experiment with it. With some 
> modifications, it might even work for antlr3.

I'm always on the lookout for such tools, but here I'm just trying to
understand how a treewalker could be better than "hand-written" even for
the simpler cases. Michael's case seems like a good "middle of the road"
case: not trivial, but not a nightmare. He's just gone through building
a few treewalkers, and probably has a good feel for how difficult it was.

I especially wonder...suppose someone else takes over" his code and figures it out.
I suspect he enjoyed learning something new (ANTLR treewalkers), so it may not
have seemed difficult, in fact it was probably fun.  But 
the person who "takes over" will just want to minimize the maintenance effort.
I would guess that this "next person" would prefer vanilla tree-data-structure
stuff like "findAncestorsOfType()" rather than having to learn ANTLR.
But that's just a guess, I'd love to hear from someone who's actually
been through it.

Andy
> 
> Best,
> Andreas Meyer

From parrt at cs.usfca.edu  Wed Feb 25 14:08:59 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 25 Feb 2009 14:08:59 -0800
Subject: [antlr-interest] request for comments on language implementation
In-Reply-To: <49A5C00C.1000704@jazillian.com>
References: <e24c4c270902201954l281ea80dt1f78fb2ac9957a89@mail.gmail.com>	<49A56AAF.4050904@jazillian.com>
	<49A575EA.6030206@smartshift.de> <49A5C00C.1000704@jazillian.com>
Message-ID: <3D4E6484-22E2-4134-9F52-91BB5EADA142@cs.usfca.edu>


On Feb 25, 2009, at 2:02 PM, Andy Tripp wrote:

> Hi Andreas,
>
> Andreas Meyer wrote:
>> Hi!
>>
>> Your mail was addressed to Michael, but I hope it's ok to answer
>> nonetheless:
>>
>> I would consider hand-written code to walk an AST harmful. Maybe  
>> there
>> are cases where it is useful, but walking a dynamically typed tree  
>> like
>> this looks like a maintenance nightmare to me.
>
> I've found it much easier to do "hand-written" AST transformations.
> For example, to find cases like "x+0" and replace with just "x", you'd
> have something like:
>
> List<AST> pluses = root.findAncestorsOfType(MyTokenTypes.PLUS);
> for (AST ast: plusses) {
>        if (ast.getChildCount() == 2
> 	    && ast.getSecondChild().getType() == MyTokenTypes.INTEGER
>            && ast.getSecondChild().getText().equals("0")) {
> 		ast.replaceMyself(ast.getFirstChild());  // replace "x+0" with  
> just "x"
> 	}
> }
>
> Isn't this simpler than the ANTLR treewalker equivalent?

Only until the next release of ANTLR when you can do tree grammar  
filters, or tree pattern matchers:

add0 : ^('+' x=. INT {$INT.int==0}?) -> $x ;

:)

It's sitting in my development branch right now and is what the book  
is going to use all over the place.

Ter

From michael.bedward at gmail.com  Wed Feb 25 14:54:47 2009
From: michael.bedward at gmail.com (Michael Bedward)
Date: Thu, 26 Feb 2009 09:54:47 +1100
Subject: [antlr-interest] request for comments on language implementation
In-Reply-To: <3D4E6484-22E2-4134-9F52-91BB5EADA142@cs.usfca.edu>
References: <e24c4c270902201954l281ea80dt1f78fb2ac9957a89@mail.gmail.com>
	<49A56AAF.4050904@jazillian.com> <49A575EA.6030206@smartshift.de>
	<49A5C00C.1000704@jazillian.com>
	<3D4E6484-22E2-4134-9F52-91BB5EADA142@cs.usfca.edu>
Message-ID: <e24c4c270902251454o1d15bcf5w3733be7e0415a560@mail.gmail.com>

Hi folks,

Nice discussion - I'm finding it most interesting and helpful.

Andy: many thanks for your specific comments on Jiffle.  That's just
the kind of feedback that I was hoping for.

Regarding "how to" info: I'm in the process of adding demo code and
updating the wiki pages to help people try it out.  I hadn't thought
about providing an ant script for non-maven users but that's a great
idea.  Also, there will be binaries to download later on.

Regarding grammar imports: I was put off trying that first up after
someone commented that it wasn't working properly in ANTLR3.1.1 (a
post in the recent thread on cascading AST rewrites).

OK, regarding my experience with tree rewrites...  Andy is correct in
that it was fun for me because I was learning along the way.  My
(ill-defined) approach probably falls somewhere between Andy's
preference for manual coding and Andreas and Ter's preference for
rewrite grammars...  Once I have the preliminary AST from the token
parser and submit it to a tree walker (VarClassifier) to categorize
variables, track dependencies etc.  VarClassifier.g contains a lot
more Java than ANTLR statements.  The grammars for subsequent tree
rewriting are mostly ANTLR content.  For these I found it easiest to
break the process into a number of very simple transformation stages
so the grammars for each were straightforward.  (Andy, morph2.g and
morph3.g became redundant after a few coding iterations - I'll do some
file renaming when it all setlles a bit more so people don't worry
about missing files).

There are two things I worry about with the Jiffle code as it stands...

1. Andy's point about how easy it will be for anyone else to pick up
the tree rewriting stuff.  Of course this can be helped a lot by
documenting properly now and I'm trying to be virtuous in this regard.

2. Possible 'fragility' of a cascade of rewrites.  Yes, it works now
but have I unwittingly built a house of cards with these multiple
grammars ?  I plan to extend the language but each changed or new
feature has to be propagated up through the stack of grammars.  It
will be interesting to see how this goes.

Ter: I've looked longingly at your wiki page on tree pattern matching
:-)  This would be enormously useful for Jiffle.

Finally, I don't want to put a damper on this general discussion but
I'd also be really grateful for further specific feedback on Jiffle.

cheers
Michael

From gebhardt at joern-gebhardt.de  Thu Feb 26 00:12:48 2009
From: gebhardt at joern-gebhardt.de (Joern Gebhardt)
Date: Thu, 26 Feb 2009 09:12:48 +0100
Subject: [antlr-interest] Changed output path in ANTLRWorks: Cannot find
	tokens file <unset-dir> / X.tokens
Message-ID: <717d79080902260012m5f07605ve3c6236b4f631225@mail.gmail.com>

Hi,

I have a lexer/parser that creates an AST and a tree grammar that works on
it.
I'm using ANTLRWorks to modify my grammars, debug them etc. and everything
worked fine until I changed the output path to another directory.

When I did that, the lexer/parser generates the created files in the new
specified directory, however the tree parser doesn't find them, even though
I added the -lib option.

So here are my ANTLRWorks preferences:

output path:  /home/myuser/antlr/output
Options:      -g /home/myuser/antlr/output

I googled for that problem and some other users reported the same behaviour,
however I didn't find a solution :-(

So any help is very much appreciated.
Thanks in advance,
Joe
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090226/344ea50b/attachment.html 

From andreas.meyer at smartshift.de  Thu Feb 26 02:07:36 2009
From: andreas.meyer at smartshift.de (Andreas Meyer)
Date: Thu, 26 Feb 2009 11:07:36 +0100
Subject: [antlr-interest] request for comments on language implementation
In-Reply-To: <49A5C00C.1000704@jazillian.com>
References: <e24c4c270902201954l281ea80dt1f78fb2ac9957a89@mail.gmail.com>	<49A56AAF.4050904@jazillian.com>
	<49A575EA.6030206@smartshift.de> <49A5C00C.1000704@jazillian.com>
Message-ID: <49A669E8.2050603@smartshift.de>

Andy Tripp schrieb:
> Hi Andreas,
>
> Andreas Meyer wrote:
>> Hi!
>>
>> Your mail was addressed to Michael, but I hope it's ok to answer 
>> nonetheless:
>>
>> I would consider hand-written code to walk an AST harmful. Maybe 
>> there are cases where it is useful, but walking a dynamically typed 
>> tree like this looks like a maintenance nightmare to me. 
>
> I've found it much easier to do "hand-written" AST transformations.
> For example, to find cases like "x+0" and replace with just "x", you'd
> have something like:
>
> List<AST> pluses = root.findAncestorsOfType(MyTokenTypes.PLUS);
> for (AST ast: plusses) {
>        if (ast.getChildCount() == 2         && 
> ast.getSecondChild().getType() == MyTokenTypes.INTEGER
>            && ast.getSecondChild().getText().equals("0")) {
>         ast.replaceMyself(ast.getFirstChild());  // replace "x+0" with 
> just "x"
>     }
> }

Well, written out as a "concrete syntax pattern", this looks somewhat 
like "pattern(x) = x + 0 ==> x". There exist lots of tools that do this, 
MatchO maybe can be extended to do it with similar syntax, although some 
feature may be missing from a fully fledged term rewriting engine (order 
of rule application, traversal etc).  (I must admit I have not used any 
of these as of now, so I'm only repeating what I saw elsewhere. I still 
have to figure out what is feasible to implement).


>
> It's maintainable because later, when you want to also replace "x*1" 
> with just "x", and a few
> other similar patterns, you can make this into a generic function:
>
> void replaceIdentity(MyTokenType type, String value, AST root) {
>     List<AST> asts = root.findAncestorsOfType(type);
>     for (AST ast: plusses) {
>            if (ast.getChildCount() == 2             && 
> ast.getSecondChild().getType() == MyTokenTypes.INTEGER
>                && ast.getSecondChild().getText().equals("0")) {
>             ast.replaceMyself(ast.getFirstChild());  // replace "x OP 
> VALUE" with just "x"
>         }
>     }
> }
>
> And now, you just have:
> replaceIdentity(MyTokenType.PLUS, "0", root); // replace "x+0" with "x"
> replaceIdentity(MyTokenType.MINUS, "0", root);// replace "x-0" with "x"
> replaceIdentity(MyTokenType.MULTIPLY, "1", root);// replace "x*1" with 
> "x"
> replaceIdentity(MyTokenType.DIVIDE, "1", root);// replace "x/1" with "x"

Once you have such a generic function, indeed it looks interesting. If 
your application is built on top of a few of those, maybe this would 
also appeal to me. For our purposes, we need to recognize lots of 
patterns, that's why I prefer pattern matching :-)
>
> I don't see how an ANTLR treewalker lets you make things modular (and 
> thus maintainable)
> like this.

Me too. As said above, for transformations I would prefer patterns and a 
pattern-matching-engine.
>
>
>> Also, you make yourself highly dependent on the underlying 
>> tree-model, which changed a lot from antlr2 to antlr3.
>
> Assuming by "tree-model", you mean the shape of the AST you're 
> creating, no,
> that wouldn't (or shouldn't) change with the version of ANTLR that you're
> using. You build the AST to be the shape that you want, regardless of 
> ANTLR version.

Have you used antlr3? In our application, the migration to antlr3 is a 
major effort. For example, an antlr2 AST node can be a singular node,or 
a node with a sibling, which has another sibling. So, it can be either a 
node or a list of nodes. If your code depends on this, you end up 
replacing many type definitions with List<AST>. Or you add the nodes you 
actually want to return to a dummy parent, return the first child of 
that parent, and let the caller find out if the returned node has a 
parent and if so, regard all its childs as the rest of the list. If you 
did not write your program in such a fashion, maybe the translation to 
antlr3 gets easier then. But still, there is a function called 
"setNextSibling" in antlr2. How do you emulate that in antlr3? You have 
to distinguish lots of special cases to find out if it means: addChild, 
deleteChild, deleteRangeOfChildren .. whatever.
>
> I think "hand-written" code to walk an AST is less
> dependent on AST structure than an ANTLR treewalker is.
> For example, suppose I want to find all the ancestor nodes of type
> "INT". The "hand-written" code is something like:
>
> List<AST> nodes = someNode.findAncestorsOfType(MyLanguageTokenTypes.INT);
>
> ...while the ANTLR treewalker that does the same thing consists of the
> *entire* tree shape, with extra code added. The ANTLR treewalker forces
> you to specify much more info than you actually care about.

You could have only a basic tree walker and inherit from that, 
overriding only the places you want. So, if you have a lot more easy 
tree walkers, the single tree-walker copy of the antlr grammar is still 
a burden, but it only exists once.
> If by "tree-model" you mean the ANTLR syntax and semantics, then 
> obviously
> the "hand-written" treewalker is not dependent on it at all, while the
> ANLTR treewalker is completely dependent on it.

Well, there might be lots of syntactic changes, but I consider these a 
lot easier to deal with than a structural change of the internal tree 
representation, as was the case between antlr2->antlr3. And if you dont 
like treewalker's at all, then maybe generic visitors/combinators could 
be of interest to you (see JJtraveller). Maybe it's possible to also 
write such a tool for antlr, so that, in effect, you get a 
base-tree-walker (without any actions) for free.

So, although my mail contains lots of speculation, I hope it provides 
some ideas that seem useful to you :-)
Andreas

From antlr at jazillian.com  Thu Feb 26 07:13:18 2009
From: antlr at jazillian.com (Andy Tripp)
Date: Thu, 26 Feb 2009 10:13:18 -0500
Subject: [antlr-interest] request for comments on language implementation
In-Reply-To: <49A669E8.2050603@smartshift.de>
References: <e24c4c270902201954l281ea80dt1f78fb2ac9957a89@mail.gmail.com>	<49A56AAF.4050904@jazillian.com>	<49A575EA.6030206@smartshift.de>
	<49A5C00C.1000704@jazillian.com> <49A669E8.2050603@smartshift.de>
Message-ID: <49A6B18E.8020409@jazillian.com>

Andreas Meyer wrote:
(snip)
> Well, written out as a "concrete syntax pattern", this looks somewhat 
> like "pattern(x) = x + 0 ==> x". There exist lots of tools that do this, 
> MatchO maybe can be extended to do it with similar syntax, although some 
> feature may be missing from a fully fledged term rewriting engine (order 
> of rule application, traversal etc).  (I must admit I have not used any 
> of these as of now, so I'm only repeating what I saw elsewhere. I still 
> have to figure out what is feasible to implement).

I had tried out several term-rewrite engines tools (stratego, txl, etc) a few years ago,
and I didn't find any of them to be better than just writing stuff like
this "by hand". IIRC, they all seemed fine at simple stuff like "x+0 -> x", but
once you start putting in real-world requirements ("for all values that might
evaluate to zero", "as long as '+' hasn't been operator-overloaded") they got
pretty messy.

> Once you have such a generic function, indeed it looks interesting. If 
> your application is built on top of a few of those, maybe this would 
> also appeal to me. For our purposes, we need to recognize lots of 
> patterns, that's why I prefer pattern matching :-)

Yes, of course you make the code modular and build up a library of useful
methods. I also have lots of patterns - hundreds - in my C-to-Java translator.
Some are simple enough that a simple pattern-match thing works:
printf(X) -> sprintf(stdout, X)
...but others require a lot of code.

>> I don't see how an ANTLR treewalker lets you make things modular (and 
>> thus maintainable)
>> like this.
> 
> Me too. As said above, for transformations I would prefer patterns and a 
> pattern-matching-engine.

As Terrence mentioned, he's working on something new. I'm also trying to
put together something new.

>>
>>> Also, you make yourself highly dependent on the underlying 
>>> tree-model, which changed a lot from antlr2 to antlr3.
>> Assuming by "tree-model", you mean the shape of the AST you're 
>> creating, no,
>> that wouldn't (or shouldn't) change with the version of ANTLR that you're
>> using. You build the AST to be the shape that you want, regardless of 
>> ANTLR version.
> 
> Have you used antlr3? In our application, the migration to antlr3 is a 
> major effort. For example, an antlr2 AST node can be a singular node,or 
> a node with a sibling, which has another sibling. So, it can be either a 
> node or a list of nodes. If your code depends on this, you end up 
> replacing many type definitions with List<AST>. Or you add the nodes you 
> actually want to return to a dummy parent, return the first child of 
> that parent, and let the caller find out if the returned node has a 
> parent and if so, regard all its childs as the rest of the list. If you 
> did not write your program in such a fashion, maybe the translation to 
> antlr3 gets easier then. 
> But still, there is a function called 
> "setNextSibling" in antlr2. How do you emulate that in antlr3? You have 
> to distinguish lots of special cases to find out if it means: addChild, 
> deleteChild, deleteRangeOfChildren .. whatever.

Yes, I've used antlr3, but I haven't actually converted an existing
ANTLR2-based app to ANTLR3. I tended to subclass most of the AST functionality
anyway (for example, hiding the nary-tree implemented as a binary tree
getFirstChild/getNextSibling thing). I see now how upgrading to
antlr3 could be a pain. I guess that's why I'm just sticking with antlr2
for now.

>> I think "hand-written" code to walk an AST is less
>> dependent on AST structure than an ANTLR treewalker is.
>> For example, suppose I want to find all the ancestor nodes of type
>> "INT". The "hand-written" code is something like:
>>
>> List<AST> nodes = someNode.findAncestorsOfType(MyLanguageTokenTypes.INT);
>>
>> ...while the ANTLR treewalker that does the same thing consists of the
>> *entire* tree shape, with extra code added. The ANTLR treewalker forces
>> you to specify much more info than you actually care about.
> 
> You could have only a basic tree walker and inherit from that, 
> overriding only the places you want. So, if you have a lot more easy 
> tree walkers, the single tree-walker copy of the antlr grammar is still 
> a burden, but it only exists once.

But each time you change the structure of the AST, whatever treewalker grammar
you have is no longer valid. Michael has a handful (5-10) of AST-changing
rules, so ends up with a handful of grammars. I have many hundreds of
AST-changing rules. It's completely impractical to keep track of what a
valid AST looks like at each step.


>> If by "tree-model" you mean the ANTLR syntax and semantics, then 
>> obviously
>> the "hand-written" treewalker is not dependent on it at all, while the
>> ANLTR treewalker is completely dependent on it.
> 
> Well, there might be lots of syntactic changes, but I consider these a 
> lot easier to deal with than a structural change of the internal tree 
> representation, as was the case between antlr2->antlr3. And if you dont 
> like treewalker's at all, then maybe generic visitors/combinators could 
> be of interest to you (see JJtraveller).
Do you have a link for JJtraveller? Google can't find it.
 

> Maybe it's possible to also 
> write such a tool for antlr, so that, in effect, you get a 
> base-tree-walker (without any actions) for free.
> 
> So, although my mail contains lots of speculation, I hope it provides 
> some ideas that seem useful to you :-)

Yes, thanks for the discussion!
Andy

> Andreas
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From s.barnett-cormack at lancaster.ac.uk  Thu Feb 26 07:48:57 2009
From: s.barnett-cormack at lancaster.ac.uk (Sam Barnett-Cormack)
Date: Thu, 26 Feb 2009 15:48:57 +0000
Subject: [antlr-interest] Manipulating text in the lexer
Message-ID: <49A6B9E9.6000200@lancaster.ac.uk>

Hey again all,

So, having returned to ANTLR (as previously mentioned), I've been trying 
to do things that used to be possible, and appear no longer to be so. 
http://www.antlr.org/blog/antlr3/lexical.tml suggests that it's no 
longer possible to alter the content of a token away from what's on the 
input at all. Crafting an ASN.1 grammar this is rather a pain - as well 
as the obvious matter of wanting to be able to strip the '"' from each 
end of a string literal, ASN.1 string literals have an odd requirement 
on the handling of whitespace and newlines within them, hopefully 
illustrated by these grammar fragments:

fragment
CSTRINGNL : WSNONL* NL WSNONL* {setText("");};

CSTRING : '"' ((CSTRINGNL)=> CSTRINGNL | '""' | ~'"') '"';

WS : (WSNONL | NL) {$channel=HIDDEN;};

fragment
NL : ('\n' | '\r' | '\v' | '\f');

fragment
WSNONL : (' ' | '\t');

Ideally, I'd also want to turn the '""' that's found inside a string 
literal into a single '"' before passing it on to the parser, as there's 
no need whatsoever to hold onto that. However, it's a *requirement* to 
discard newlines, along with any other whitespace immediately preceding 
or succeeding each. It'd be really frustrating to have to change that at 
a later stage in processing.

So, can anyone clarify this for me, or let me know of some sort of 
workaround?

Thanks,

Sam Barnett-Cormack

From andreas.meyer at smartshift.de  Thu Feb 26 07:59:34 2009
From: andreas.meyer at smartshift.de (Andreas Meyer)
Date: Thu, 26 Feb 2009 16:59:34 +0100
Subject: [antlr-interest] request for comments on language implementation
In-Reply-To: <49A6B18E.8020409@jazillian.com>
References: <e24c4c270902201954l281ea80dt1f78fb2ac9957a89@mail.gmail.com>	<49A56AAF.4050904@jazillian.com>	<49A575EA.6030206@smartshift.de>
	<49A5C00C.1000704@jazillian.com> <49A669E8.2050603@smartshift.de>
	<49A6B18E.8020409@jazillian.com>
Message-ID: <49A6BC66.5070104@smartshift.de>

Andy Tripp schrieb:

> Do you have a link for JJtraveller? Google can't find it.

It's a bit hidden, and from what I understood, they are already working 
on something new. But you can find it inside the downloadable 
meta-environment package (www.meta-environment.org). A paper can be 
found here: http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.18.5999

Cheers,
Andreas


From indhu.b at s7software.com  Thu Feb 26 08:28:03 2009
From: indhu.b at s7software.com (Indhu Bharathi)
Date: Thu, 26 Feb 2009 21:58:03 +0530 (IST)
Subject: [antlr-interest] Error reporting with DebugListener attached
Message-ID: <17521201.3311235665683692.JavaMail.root@star>

Hi, 

I'm attaching a debug listener to my parser and overriding 'recognitionException' method as shown below. 


public void recognitionException (RecognitionException e) { 
System.err.println(e); 
} 

But I see that the error message printed is not as good as what is printed in stderr when the debug option is not set. Is there a way to attach debug listener and still get error messages in stderr? By default when debug listener is attached, error messages to stderr are turned off. Or is there a simple way to report error as good as how ANTLR does it in stderr instead of just printing 'e'? 

- Indhu 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090226/306d5fb3/attachment.html 

From gebhardt at joern-gebhardt.de  Thu Feb 26 08:19:44 2009
From: gebhardt at joern-gebhardt.de (Joern Gebhardt)
Date: Thu, 26 Feb 2009 17:19:44 +0100
Subject: [antlr-interest] Changed output path in ANTLRWorks: Cannot find
	tokens file <unset-dir> / X.tokens
In-Reply-To: <717d79080902260012m5f07605ve3c6236b4f631225@mail.gmail.com>
References: <717d79080902260012m5f07605ve3c6236b4f631225@mail.gmail.com>
Message-ID: <717d79080902260819t468f0368nb5c8563505a6cbb@mail.gmail.com>

Hi,

it's working now.
I upgraded from version 1.2.2 to 1.2.3 and after that it worked fine.

However, what confused me a little bit was the following:
Just for testing purposes I tried it with 1.2.2 again and it was also
working.
Maybe a restart of ANTLRWorks is needed when you add some options the FIRST
time. When changing the output a second time without restart, these second
changes have been accepted.

Regards,
Joern



On Thu, Feb 26, 2009 at 9:12 AM, Joern Gebhardt
<gebhardt at joern-gebhardt.de>wrote:

> Hi,
>
> I have a lexer/parser that creates an AST and a tree grammar that works on
> it.
> I'm using ANTLRWorks to modify my grammars, debug them etc. and everything
> worked fine until I changed the output path to another directory.
>
> When I did that, the lexer/parser generates the created files in the new
> specified directory, however the tree parser doesn't find them, even though
> I added the -lib option.
>
> So here are my ANTLRWorks preferences:
>
> output path:  /home/myuser/antlr/output
> Options:      -g /home/myuser/antlr/output
>
> I googled for that problem and some other users reported the same
> behaviour, however I didn't find a solution :-(
>
> So any help is very much appreciated.
> Thanks in advance,
> Joe
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090226/2a147cb7/attachment.html 

From s.barnett-cormack at lancaster.ac.uk  Thu Feb 26 08:39:15 2009
From: s.barnett-cormack at lancaster.ac.uk (Sam Barnett-Cormack)
Date: Thu, 26 Feb 2009 16:39:15 +0000
Subject: [antlr-interest] Manipulating text in the lexer
Message-ID: <49A6C5B3.5010001@lancaster.ac.uk>

Hey again all,

(apologies if this has already been received - as far as I can tell it 
didn't get through the first time)

So, having returned to ANTLR (as previously mentioned), I've been trying
to do things that used to be possible, and appear no longer to be so.
http://www.antlr.org/blog/antlr3/lexical.tml suggests that it's no
longer possible to alter the content of a token away from what's on the
input at all. Crafting an ASN.1 grammar this is rather a pain - as well
as the obvious matter of wanting to be able to strip the '"' from each
end of a string literal, ASN.1 string literals have an odd requirement
on the handling of whitespace and newlines within them, hopefully
illustrated by these grammar fragments:

fragment
CSTRINGNL : WSNONL* NL WSNONL* {setText("");};

CSTRING : '"' ((CSTRINGNL)=> CSTRINGNL | '""' | ~'"') '"';

WS : (WSNONL | NL) {$channel=HIDDEN;};

fragment
NL : ('\n' | '\r' | '\v' | '\f');

fragment
WSNONL : (' ' | '\t');

Ideally, I'd also want to turn the '""' that's found inside a string
literal into a single '"' before passing it on to the parser, as there's
no need whatsoever to hold onto that. However, it's a *requirement* to
discard newlines, along with any other whitespace immediately preceding
or succeeding each. It'd be really frustrating to have to change that at
a later stage in processing.

So, can anyone clarify this for me, or let me know of some sort of
workaround?

Thanks,

Sam Barnett-Cormack


From robert.soule at gmail.com  Thu Feb 26 08:51:08 2009
From: robert.soule at gmail.com (Robert Soule)
Date: Thu, 26 Feb 2009 11:51:08 -0500
Subject: [antlr-interest] common tokens
Message-ID: <d1316fd70902260851g2cfec80aw121a02dd0e9a641f@mail.gmail.com>

Hi,

I am converting from one language to another using tree re-write rules.
I am getting an error when both languages define the same token. For
example:

>From A.g:
grammar A;
options { output = AST; }
tokens { PROGRAM; A; }
accept : program EOF      ->   ^(PROGRAM program);
program : ',' 'a'         -> ^(A ',' 'a');
WHITE_SPACE      : (' '|'\t'|'\r'|'\n')+                     {
$channel = HIDDEN; };

>From B.g:
grammar B;
options { output = AST; }
tokens { BPROGRAM; B; }
accept : program EOF      ->   ^(BPROGRAM program);
program : 'b' ','             -> ^(B 'b' ',');
WHITE_SPACE      : (' '|'\t'|'\r'|'\n')+                     {
$channel = HIDDEN; };

>From AtoB.g:
tree grammar AtoB;
options { tokenVocab=A; tokenVocab=B;  ASTLabelType=CommonTree; output=AST; }
accept : ^(PROGRAM program)  -> ^(PROGRAM program);
program : ^(A ',' 'a')           -> ^(B 'b' ',');


The error seems to occur because both A.g and B.g use a ',' literal, assigned
different values in their respective .tokens files. When I reference
the ',' literal
in AtoB.g, I'm guessing that there is no way to tell if it is A's token or B's.

Is there either a way to scope tokens (A::';') or is there way to
define a common
set of tokens that are shared by both grammars, and then import them?

thank you,
Robert

From andreas.meyer at smartshift.de  Thu Feb 26 09:38:50 2009
From: andreas.meyer at smartshift.de (Andreas Meyer)
Date: Thu, 26 Feb 2009 18:38:50 +0100
Subject: [antlr-interest] Backtracking vs Lookahead
Message-ID: <49A6D3AA.4070403@smartshift.de>

Dear ANTLR users! (developers?)

I have a very basic problem: supposed I have two rules, one which 
basically includes any token, and another one that contains only a 
subset of them, say:

any : A | B | C | D ;
some
    : A B
    | B
    ;

Now, I want to combine those two rules:

rule     : ( options{ greedy=false;} : any )+ some      ;

.. such that the inner loop should consume any's, as long as LA(1)!=B && 
(LA(1)!=A||LA(2)!=B). This should be easily recognizable by the parser 
(in my opinion). However, ANTLR 3 (3.1.2) says:

warning: Decision can match input such as "A B" using multiple 
alternatives: 1, 2

Note that when I change the rule "some" to:

some : A | B;

such that only a lookahead of one character is enough, everything works 
as expected: "any" is consumed until a character is found from the 
difference "any-some".

Now, I thought "ok, use backtracking". Enabling it globally seems to 
work. But, if I try to enable it only locally, it does not seem to have 
any effect. Actually, I tried to enable it for any rule in my grammar - 
without any effect! (I include the grammar in question as attachement)

What can I do? Thanks for any hints!
Andreas Meyer
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: GreedyTest.g
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20090226/672ed088/attachment.pl 

From indhu.b at s7software.com  Thu Feb 26 10:09:17 2009
From: indhu.b at s7software.com (Indhu Bharathi)
Date: Thu, 26 Feb 2009 23:39:17 +0530 (IST)
Subject: [antlr-interest] Manipulating text in the lexer
In-Reply-To: <49A6C5B3.5010001@lancaster.ac.uk>
Message-ID: <18466794.3431235671757478.JavaMail.root@star>

>it's no longer possible to alter the content of a token away from what's on the input at all.

I'm not sure if this is right. I still do token.setText(...) in my actions and I'm using ANTLR 3.1.1. 

Just a guess... Maybe you have to use TokenRewriteStream instead of the regular CommonTokenStream.

- Indhu


----- Original Message -----
From: Sam Barnett-Cormack <s.barnett-cormack at lancaster.ac.uk>
To: ANTLR Interest Mailing List <antlr-interest at antlr.org>
Sent: Thursday, February 26, 2009 10:09:15 PM GMT+0530 Asia/Calcutta
Subject: [antlr-interest] Manipulating text in the lexer

Hey again all,

(apologies if this has already been received - as far as I can tell it 
didn't get through the first time)

So, having returned to ANTLR (as previously mentioned), I've been trying
to do things that used to be possible, and appear no longer to be so.
http://www.antlr.org/blog/antlr3/lexical.tml suggests that it's no
longer possible to alter the content of a token away from what's on the
input at all. Crafting an ASN.1 grammar this is rather a pain - as well
as the obvious matter of wanting to be able to strip the '"' from each
end of a string literal, ASN.1 string literals have an odd requirement
on the handling of whitespace and newlines within them, hopefully
illustrated by these grammar fragments:

fragment
CSTRINGNL : WSNONL* NL WSNONL* {setText("");};

CSTRING : '"' ((CSTRINGNL)=> CSTRINGNL | '""' | ~'"') '"';

WS : (WSNONL | NL) {$channel=HIDDEN;};

fragment
NL : ('\n' | '\r' | '\v' | '\f');

fragment
WSNONL : (' ' | '\t');

Ideally, I'd also want to turn the '""' that's found inside a string
literal into a single '"' before passing it on to the parser, as there's
no need whatsoever to hold onto that. However, it's a *requirement* to
discard newlines, along with any other whitespace immediately preceding
or succeeding each. It'd be really frustrating to have to change that at
a later stage in processing.

So, can anyone clarify this for me, or let me know of some sort of
workaround?

Thanks,

Sam Barnett-Cormack


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From antlr at mirality.co.nz  Thu Feb 26 12:12:07 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 27 Feb 2009 09:12:07 +1300
Subject: [antlr-interest] Manipulating text in the lexer
In-Reply-To: <49A6B9E9.6000200@lancaster.ac.uk>
References: <49A6B9E9.6000200@lancaster.ac.uk>
Message-ID: <20090226201233.B751E341849A@www.antlr.org>

At 04:48 27/02/2009, Sam Barnett-Cormack wrote:
 >http://www.antlr.org/blog/antlr3/lexical.tml suggests that it's
 >no longer possible to alter the content of a token away from
 >what's on the input at all.

That isn't true.  You can use setText or $text = "..." to change 
the text of a token just fine.

What's probably biting you, though, is that this only works from 
the top-level lexer rule.  You can't change the text of a fragment 
(or rather, you can, but it won't end up being used in the final 
token).

 >fragment
 >CSTRINGNL : WSNONL* NL WSNONL* {setText("");};

So this setText will have absolutely no effect.

 >CSTRING : '"' ((CSTRINGNL)=> CSTRINGNL | '""' | ~'"') '"';

But if you called it here, then it would work.


From parrt at cs.usfca.edu  Thu Feb 26 12:13:14 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 26 Feb 2009 12:13:14 -0800
Subject: [antlr-interest] Error reporting with DebugListener attached
In-Reply-To: <17521201.3311235665683692.JavaMail.root@star>
References: <17521201.3311235665683692.JavaMail.root@star>
Message-ID: <7B807018-2927-4429-A422-6D7263D877F3@cs.usfca.edu>

call the display recognition error method in your parser with the  
exception.
Ter
On Feb 26, 2009, at 8:28 AM, Indhu Bharathi wrote:

> Hi,
>
> I'm attaching a debug listener to my parser and overriding  
> 'recognitionException' method as shown below.
>
> public void recognitionException (RecognitionException e) {
>     System.err.println(e);
> }
>
> But I see that the error message printed is not as good as what is  
> printed in stderr when the debug option is not set. Is there a way  
> to attach debug listener and still get error messages in stderr? By  
> default when debug listener is attached, error messages to stderr  
> are turned off. Or is there a simple way to report error as good as  
> how ANTLR does it in stderr instead of just printing 'e'?
>
> - Indhu
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From indhu.b at s7software.com  Thu Feb 26 12:40:11 2009
From: indhu.b at s7software.com (Indhu Bharathi)
Date: Fri, 27 Feb 2009 02:10:11 +0530
Subject: [antlr-interest] Error reporting with DebugListener attached
In-Reply-To: <7B807018-2927-4429-A422-6D7263D877F3@cs.usfca.edu>
References: <17521201.3311235665683692.JavaMail.root@star>
	<7B807018-2927-4429-A422-6D7263D877F3@cs.usfca.edu>
Message-ID: <00e501c99852$6e21aa10$4a64fe30$@b@s7software.com>

Cool. Thanks :-)

- Indhu

-----Original Message-----
From: Terence Parr [mailto:parrt at cs.usfca.edu] 
Sent: Friday, February 27, 2009 1:43 AM
To: indhu.b at s7software.com
Cc: antlr-interest
Subject: Re: [antlr-interest] Error reporting with DebugListener attached

call the display recognition error method in your parser with the  
exception.
Ter
On Feb 26, 2009, at 8:28 AM, Indhu Bharathi wrote:

> Hi,
>
> I'm attaching a debug listener to my parser and overriding  
> 'recognitionException' method as shown below.
>
> public void recognitionException (RecognitionException e) {
>     System.err.println(e);
> }
>
> But I see that the error message printed is not as good as what is  
> printed in stderr when the debug option is not set. Is there a way  
> to attach debug listener and still get error messages in stderr? By  
> default when debug listener is attached, error messages to stderr  
> are turned off. Or is there a simple way to report error as good as  
> how ANTLR does it in stderr instead of just printing 'e'?
>
> - Indhu
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From indhu.b at s7software.com  Thu Feb 26 12:55:30 2009
From: indhu.b at s7software.com (Indhu Bharathi)
Date: Fri, 27 Feb 2009 02:25:30 +0530
Subject: [antlr-interest] Rewriting in non tree grammar
Message-ID: <00ee01c99854$8fac2c30$af048490$@b@s7software.com>

Hi,

 

Suppose I want to do something like this

 

methodDecl       :               scope t=returnType ident LRAPEN RPAREN

                                {

                                                insertBefore(t,
"something");

                                                or

                                                replace(t, "something");

                                                or

                                                insertAfter(t, "something");

                                }

 

 

How can I do this in ANTLR? Note that 'returnType' is non-terminal. Also, I
don't want to use tree grammar or string templates. Is this possible with
TokenRewriteStream. Is there some documented example in the wiki?

 

Advance thanks for any help.

 

- Indhu

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090227/2e6dd1c9/attachment.html 

From robert.soule at gmail.com  Thu Feb 26 13:14:24 2009
From: robert.soule at gmail.com (Robert Soule)
Date: Thu, 26 Feb 2009 16:14:24 -0500
Subject: [antlr-interest] common tokens
In-Reply-To: <d1316fd70902260851g2cfec80aw121a02dd0e9a641f@mail.gmail.com>
References: <d1316fd70902260851g2cfec80aw121a02dd0e9a641f@mail.gmail.com>
Message-ID: <d1316fd70902261314t4140a1fex6634fbb3eb1e00dc@mail.gmail.com>

Hi,

I just found this web page:

http://www.antlr.org/wiki/display/ANTLR3/Composite+Grammars

and I think this is close to what I want. I can create a lexer grammar
that is imported by my two language parsers/lexers, so they can share the
common lexer rule :

SEMI : ';' ;

However, I would prefer to share the literals. Is this possible? This
is preferable, for example, in 'for' loops, where I have something like:

forStmt : 'for' condition '{' body '}' ;

I would like to share a common definition of the 'for' literal, without
having to create a lexer rule:

FOR : 'for' ;
forStmt : FOR condition '{' body '}' ;

Is this possible with composite grammars?

thanks,
Robert

On Thu, Feb 26, 2009 at 11:51 AM, Robert Soule <robert.soule at gmail.com> wrote:
> Hi,
>
> I am converting from one language to another using tree re-write rules.
> I am getting an error when both languages define the same token. For
> example:
>
> From A.g:
> grammar A;
> options { output = AST; }
> tokens { PROGRAM; A; }
> accept : program EOF ? ? ?-> ? ^(PROGRAM program);
> program : ',' 'a' ? ? ? ? -> ^(A ',' 'a');
> WHITE_SPACE ? ? ?: (' '|'\t'|'\r'|'\n')+ ? ? ? ? ? ? ? ? ? ? {
> $channel = HIDDEN; };
>
> From B.g:
> grammar B;
> options { output = AST; }
> tokens { BPROGRAM; B; }
> accept : program EOF ? ? ?-> ? ^(BPROGRAM program);
> program : 'b' ',' ? ? ? ? ? ? -> ^(B 'b' ',');
> WHITE_SPACE ? ? ?: (' '|'\t'|'\r'|'\n')+ ? ? ? ? ? ? ? ? ? ? {
> $channel = HIDDEN; };
>
> From AtoB.g:
> tree grammar AtoB;
> options { tokenVocab=A; tokenVocab=B; ?ASTLabelType=CommonTree; output=AST; }
> accept : ^(PROGRAM program) ?-> ^(PROGRAM program);
> program : ^(A ',' 'a') ? ? ? ? ? -> ^(B 'b' ',');
>
>
> The error seems to occur because both A.g and B.g use a ',' literal, assigned
> different values in their respective .tokens files. When I reference
> the ',' literal
> in AtoB.g, I'm guessing that there is no way to tell if it is A's token or B's.
>
> Is there either a way to scope tokens (A::';') or is there way to
> define a common
> set of tokens that are shared by both grammars, and then import them?
>
> thank you,
> Robert
>

From parrt at cs.usfca.edu  Thu Feb 26 13:22:34 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 26 Feb 2009 13:22:34 -0800
Subject: [antlr-interest] Rewriting in non tree grammar
In-Reply-To: <00ee01c99854$8fac2c30$af048490$@b@s7software.com>
References: <00ee01c99854$8fac2c30$af048490$@b@s7software.com>
Message-ID: <0DB1607C-DCC5-4FD1-A180-986EEEB6BB6B@cs.usfca.edu>


On Feb 26, 2009, at 12:55 PM, Indhu Bharathi wrote:

> Hi,
>
> Suppose I want to do something like this
>
> methodDecl       :               scope t=returnType ident LRAPEN  
> RPAREN
>                                 {
>                                                 insertBefore(t,  
> ?something?);
>                                                 or
>                                                 replace(t,  
> ?something?);
>                                                 or
>                                                 insertAfter(t,  
> ?something?);
>                                 }
>
>
> How can I do this in ANTLR? Note that ?returnType? is non-terminal.  
> Also, I don?t want to use tree grammar or string templates. Is this  
> possible with TokenRewriteStream. Is there some documented example  
> in the wiki?
>

Yes, use that class.  easy.  Should be some examples somewhere.

Ter


From s.barnett-cormack at lancaster.ac.uk  Thu Feb 26 15:06:06 2009
From: s.barnett-cormack at lancaster.ac.uk (Sam Barnett-Cormack)
Date: Thu, 26 Feb 2009 23:06:06 +0000
Subject: [antlr-interest] Manipulating text in the lexer
In-Reply-To: <49A6B9E9.6000200@lancaster.ac.uk> 
References: <49A6B9E9.6000200@lancaster.ac.uk> 
Message-ID: <49A7205E.5000607@lancaster.ac.uk>

Gavin Lambert wrote:
> At 04:48 27/02/2009, Sam Barnett-Cormack wrote:
>  >http://www.antlr.org/blog/antlr3/lexical.tml suggests that it's
>  >no longer possible to alter the content of a token away from
>  >what's on the input at all.
> 
> That isn't true.  You can use setText or $text = "..." to change the 
> text of a token just fine.
> 
> What's probably biting you, though, is that this only works from the 
> top-level lexer rule.  You can't change the text of a fragment (or 
> rather, you can, but it won't end up being used in the final token).
> 
>  >fragment
>  >CSTRINGNL : WSNONL* NL WSNONL* {setText("");};
> 
> So this setText will have absolutely no effect.
> 
>  >CSTRING : '"' ((CSTRINGNL)=> CSTRINGNL | '""' | ~'"') '"';
> 
> But if you called it here, then it would work.

Of course, it would be hard to structure, if I have to set the text of 
the whole damn token at once. If we had the old ! operator, it'd be easy 
enough... make the '"' at the beginning and end be missed out, make the 
first of the three choices be ignored, and make the second be !'"' '"'. 
That'd be just grand. However, I can't see an easy way to make the 
resulting token text be what I want it to be with the current system. If 
anyone knows how I can, please let me know.

-- 
Sam Barnett-Cormack

From bill at qswtools.com  Thu Feb 26 15:20:12 2009
From: bill at qswtools.com (Bill Cox)
Date: Thu, 26 Feb 2009 15:20:12 -0800
Subject: [antlr-interest] antlr-interest Digest, Vol 51, Issue 26
In-Reply-To: <mailman.1.1235678401.27685.antlr-interest@antlr.org>
References: <mailman.1.1235678401.27685.antlr-interest@antlr.org>
Message-ID: <f7372f920902261520y75645502t11eece654386646c@mail.gmail.com>

Re: [antlr-interest] request for comments on language
On Thu, Feb 26, 2009 at 12:00 PM,  <antlr-interest-request at antlr.org> wrote:
> Send antlr-interest mailing list submissions to
>        antlr-interest at antlr.org
>
> To subscribe or unsubscribe via the World Wide Web, visit
>        http://www.antlr.org/mailman/listinfo/antlr-interest
> or, via email, send a message with subject or body 'help' to
>        antlr-interest-request at antlr.org
>
> You can reach the person managing the list at
>        antlr-interest-owner at antlr.org
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of antlr-interest digest..."
>
>
> Today's Topics:
>
>   1. Re: if..else in StringTemplate (Terence Parr)
>   2. Re: request for comments on language implementation (Andy Tripp)
>   3. Re: request for comments on language implementation (Terence Parr)
>   4. Re: request for comments on language implementation
>      (Michael Bedward)
>   5. Changed output path in ANTLRWorks: Cannot find    tokens file
>      <unset-dir> / X.tokens (Joern Gebhardt)
>   6. Re: request for comments on language implementation
>      (Andreas Meyer)
>   7. Re: request for comments on language implementation (Andy Tripp)
>   8. Manipulating text in the lexer (Sam Barnett-Cormack)
>   9. Re: request for comments on language implementation
>      (Andreas Meyer)
>  10. Error reporting with DebugListener attached (Indhu Bharathi)
>  11. Re: Changed output path in ANTLRWorks: Cannot find        tokens
>      file <unset-dir> / X.tokens (Joern Gebhardt)
>  12. Manipulating text in the lexer (Sam Barnett-Cormack)
>  13. common tokens (Robert Soule)
>  14. Backtracking vs Lookahead (Andreas Meyer)
>  15. Re: Manipulating text in the lexer (Indhu Bharathi)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Wed, 25 Feb 2009 13:29:23 -0800
> From: Terence Parr <parrt at cs.usfca.edu>
> Subject: Re: [antlr-interest] if..else in StringTemplate
> To: YingAnnie <yimm8369 at hotmail.com>
> Cc: antlr-interest at antlr.org
> Message-ID: <956F67BC-F769-48A7-B8C5-8B49D8E545EC at cs.usfca.edu>
> Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
>
>
> On Feb 24, 2009, at 6:48 PM, YingAnnie wrote:
>
>>
>>
>>
>> Hi everyone,
>>
>> I want to use if else in the StringTemplateGroup,if (x ="org") print
>> 1234 else print 5678, but <if(x=="org")> doesnot work.
>
> Correct. ST does not allow you to do any logic computations in the
> view. You must do the computation in the model and pass the result to
> the template.
>
>  this philosophy is explained in a number of places on the website
> and the wiki.
>
> Ter
>
>
> ------------------------------
>
> Message: 2
> Date: Wed, 25 Feb 2009 17:02:52 -0500
> From: Andy Tripp <antlr at jazillian.com>
> Subject: Re: [antlr-interest] request for comments on language
>        implementation
> To: Andreas Meyer <andreas.meyer at smartshift.de>
> Cc: antlr-interest at antlr.org
> Message-ID: <49A5C00C.1000704 at jazillian.com>
> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
>
> Hi Andreas,
>
> Andreas Meyer wrote:
>> Hi!
>>
>> Your mail was addressed to Michael, but I hope it's ok to answer
>> nonetheless:
>>
>> I would consider hand-written code to walk an AST harmful. Maybe there
>> are cases where it is useful, but walking a dynamically typed tree like
>> this looks like a maintenance nightmare to me.
>
> I've found it much easier to do "hand-written" AST transformations.
> For example, to find cases like "x+0" and replace with just "x", you'd
> have something like:
>
> List<AST> pluses = root.findAncestorsOfType(MyTokenTypes.PLUS);
> for (AST ast: plusses) {
>        if (ast.getChildCount() == 2
>            && ast.getSecondChild().getType() == MyTokenTypes.INTEGER
>            && ast.getSecondChild().getText().equals("0")) {
>                ast.replaceMyself(ast.getFirstChild());  // replace "x+0" with just "x"
>        }
> }
>
> Isn't this simpler than the ANTLR treewalker equivalent?
> Especially since whoever takes over this code when you leave will likely
> already know Java but not know ANTLR?
>
> It's maintainable because later, when you want to also replace "x*1" with just "x", and a few
> other similar patterns, you can make this into a generic function:
>
> void replaceIdentity(MyTokenType type, String value, AST root) {
>        List<AST> asts = root.findAncestorsOfType(type);
>        for (AST ast: plusses) {
>                if (ast.getChildCount() == 2
>                    && ast.getSecondChild().getType() == MyTokenTypes.INTEGER
>                    && ast.getSecondChild().getText().equals("0")) {
>                        ast.replaceMyself(ast.getFirstChild());  // replace "x OP VALUE" with just "x"
>                }
>        }
> }

I also like this style (in the generic form) very much.  I find it
very readable/
maintainable.  Is there anything in your tree building process that guarantees
that the literal zero is the second child?  It seems to me that for
full generality
you would also need to check the first child for zero.

Also, is the AST guaranteed to be a binary tree?  In one code generator that I
built, the arguments to an 'add' operator node were strung in a list,
from widest to narrowest.  Similarly for the multiply node.

From gerald at certiv.net  Thu Feb 26 16:00:07 2009
From: gerald at certiv.net (Gerald Rosenberg)
Date: Thu, 26 Feb 2009 16:00:07 -0800
Subject: [antlr-interest] Manipulating text in the lexer
In-Reply-To: <49A7205E.5000607@lancaster.ac.uk>
References: <49A6B9E9.6000200@lancaster.ac.uk>
	<49A7205E.5000607@lancaster.ac.uk>
Message-ID: <200902270005.n1R05vWH030799@zinc.newtechlaw.com>

At 03:06 PM 2/26/2009, Sam Barnett-Cormack wrote:

>Of course, it would be hard to structure, if I have to set the text of
>the whole damn token at once. If we had the old ! operator, it'd be easy
>enough... make the '"' at the beginning and end be missed out, make the
>first of the three choices be ignored, and make the second be !'"' '"'.
>That'd be just grand. However, I can't see an easy way to make the
>resulting token text be what I want it to be with the current system. If
>anyone knows how I can, please let me know.

Rule: A  B {skip();}  C ;

should work as the functional equivalent of

Rule: A !B C ; 


From virtuoso.coders at gmail.com  Thu Feb 26 17:34:10 2009
From: virtuoso.coders at gmail.com (SSG JJV)
Date: Thu, 26 Feb 2009 19:34:10 -0600
Subject: [antlr-interest] Java Parser to analyze C++ language syntax
Message-ID: <26e9b8c20902261734i223bebd3i409cb784048bb160@mail.gmail.com>

Hi,
Is there a any ANTLR grammar in Java, that can be used to validate C++
language syntax?

I tried Sun C/C++ parser mentioned under grammar list on antlr site. but
could not generate antlr parser for the grammar mentioned.

I got tons of errors.

Is there any documentation on how to use the above parser?

Thanks,
Suman
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090226/ed466b65/attachment.html 

From granvillebarnett at googlemail.com  Thu Feb 26 18:18:43 2009
From: granvillebarnett at googlemail.com (Granville Barnett)
Date: Fri, 27 Feb 2009 12:18:43 +1000
Subject: [antlr-interest] Java Parser to analyze C++ language syntax
In-Reply-To: <26e9b8c20902261734i223bebd3i409cb784048bb160@mail.gmail.com>
References: <26e9b8c20902261734i223bebd3i409cb784048bb160@mail.gmail.com>
Message-ID: <80a70730902261818w7d5265efg81276feb06392692@mail.gmail.com>

Have you tried the grammar by David Wigg??

On Fri, Feb 27, 2009 at 11:34 AM, SSG JJV <virtuoso.coders at gmail.com> wrote:

> Hi,
> Is there a any ANTLR grammar in Java, that can be used to validate C++
> language syntax?
>
> I tried Sun C/C++ parser mentioned under grammar list on antlr site. but
> could not generate antlr parser for the grammar mentioned.
>
> I got tons of errors.
>
> Is there any documentation on how to use the above parser?
>
> Thanks,
> Suman
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090227/970fa9bd/attachment.html 

From virtuoso.coders at gmail.com  Thu Feb 26 20:06:02 2009
From: virtuoso.coders at gmail.com (SSG JJV)
Date: Thu, 26 Feb 2009 22:06:02 -0600
Subject: [antlr-interest] Java Parser to analyze C++ language syntax
In-Reply-To: <80a70730902261818w7d5265efg81276feb06392692@mail.gmail.com>
References: <26e9b8c20902261734i223bebd3i409cb784048bb160@mail.gmail.com>
	<80a70730902261818w7d5265efg81276feb06392692@mail.gmail.com>
Message-ID: <26e9b8c20902262006o628874ddn321b8460cda7ae1e@mail.gmail.com>

Yes. But David's parser outputs C++ parser. I need a Java Parser to validate
C++ language syntax.
Thanks

On Thu, Feb 26, 2009 at 8:18 PM, Granville Barnett <
granvillebarnett at googlemail.com> wrote:

> Have you tried the grammar by David Wigg??
>
> On Fri, Feb 27, 2009 at 11:34 AM, SSG JJV <virtuoso.coders at gmail.com>wrote:
>
>> Hi,
>> Is there a any ANTLR grammar in Java, that can be used to validate C++
>> language syntax?
>>
>> I tried Sun C/C++ parser mentioned under grammar list on antlr site. but
>> could not generate antlr parser for the grammar mentioned.
>>
>> I got tons of errors.
>>
>> Is there any documentation on how to use the above parser?
>>
>> Thanks,
>> Suman
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090226/77412432/attachment.html 

From indhu.b at s7software.com  Thu Feb 26 20:11:20 2009
From: indhu.b at s7software.com (Indhu Bharathi)
Date: Fri, 27 Feb 2009 09:41:20 +0530
Subject: [antlr-interest] Rewriting in non tree grammar
In-Reply-To: <0DB1607C-DCC5-4FD1-A180-986EEEB6BB6B@cs.usfca.edu>
References: <00ee01c99854$8fac2c30$af048490$@b@s7software.com>
	<0DB1607C-DCC5-4FD1-A180-986EEEB6BB6B@cs.usfca.edu>
Message-ID: <014a01c99891$724bf430$56e3dc90$@b@s7software.com>

Hi,

I'm sorry I don't understand. When I write

a : t=B C ;

t will be of type token and I can use it in action. But when I write,

a : t=b c ;

t is not of type token. Infact no code is generated for 't'. So how do I do
I refer to it in action?
	
Also I don't find any example out there for this requirement. Can anybody
explain a little more clear. Sorry if there is some simple way to do it and
I'm not getting it.

- Indhu


-----Original Message-----
From: Terence Parr [mailto:parrt at cs.usfca.edu] 
Sent: Friday, February 27, 2009 2:53 AM
To: Indhu Bharathi
Cc: 'antlr-interest'
Subject: Re: [antlr-interest] Rewriting in non tree grammar


On Feb 26, 2009, at 12:55 PM, Indhu Bharathi wrote:

> Hi,
>
> Suppose I want to do something like this
>
> methodDecl       :               scope t=returnType ident LRAPEN  
> RPAREN
>                                 {
>                                                 insertBefore(t,  
> "something");
>                                                 or
>                                                 replace(t,  
> "something");
>                                                 or
>                                                 insertAfter(t,  
> "something");
>                                 }
>
>
> How can I do this in ANTLR? Note that 'returnType' is non-terminal.  
> Also, I don't want to use tree grammar or string templates. Is this  
> possible with TokenRewriteStream. Is there some documented example  
> in the wiki?
>

Yes, use that class.  easy.  Should be some examples somewhere.

Ter


From indhu.b at s7software.com  Fri Feb 27 00:43:12 2009
From: indhu.b at s7software.com (Indhu Bharathi)
Date: Fri, 27 Feb 2009 14:13:12 +0530 (IST)
Subject: [antlr-interest] Rewriting in non tree grammar
In-Reply-To: <014a01c99891$724bf430$56e3dc90$@b@s7software.com>
Message-ID: <23359115.3721235724192498.JavaMail.root@star>

Figured it out :-) Here is a sample grammar that does what is required:

grammar Test;

@members {
	TokenRewriteStream input = (TokenRewriteStream) getTokenStream();
}

r
@init {
	int pos;
}
	:	a { pos = input.index(); } b
		{
			input.insertBefore(pos, "inserted");
		}
	;

a	:	'a'
	;
	
b	:	'b'
	;


Let me know if there is a better or more elegant way to do this. But I'm fine with this :-)


Thanks, Indhu


----- Original Message -----
From: Indhu Bharathi <indhu.b at s7software.com>
To: Terence Parr <parrt at cs.usfca.edu>
Cc: antlr-interest <antlr-interest at antlr.org>
Sent: Friday, February 27, 2009 9:41:20 AM GMT+0530 Asia/Calcutta
Subject: Re: [antlr-interest] Rewriting in non tree grammar

Hi,

I'm sorry I don't understand. When I write

a : t=B C ;

t will be of type token and I can use it in action. But when I write,

a : t=b c ;

t is not of type token. Infact no code is generated for 't'. So how do I do
I refer to it in action?
	
Also I don't find any example out there for this requirement. Can anybody
explain a little more clear. Sorry if there is some simple way to do it and
I'm not getting it.

- Indhu


-----Original Message-----
From: Terence Parr [mailto:parrt at cs.usfca.edu] 
Sent: Friday, February 27, 2009 2:53 AM
To: Indhu Bharathi
Cc: 'antlr-interest'
Subject: Re: [antlr-interest] Rewriting in non tree grammar


On Feb 26, 2009, at 12:55 PM, Indhu Bharathi wrote:

> Hi,
>
> Suppose I want to do something like this
>
> methodDecl       :               scope t=returnType ident LRAPEN  
> RPAREN
>                                 {
>                                                 insertBefore(t,  
> "something");
>                                                 or
>                                                 replace(t,  
> "something");
>                                                 or
>                                                 insertAfter(t,  
> "something");
>                                 }
>
>
> How can I do this in ANTLR? Note that 'returnType' is non-terminal.  
> Also, I don't want to use tree grammar or string templates. Is this  
> possible with TokenRewriteStream. Is there some documented example  
> in the wiki?
>

Yes, use that class.  easy.  Should be some examples somewhere.

Ter


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From antlr at mirality.co.nz  Fri Feb 27 00:53:09 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 27 Feb 2009 21:53:09 +1300
Subject: [antlr-interest] Manipulating text in the lexer
In-Reply-To: <49A7205E.5000607@lancaster.ac.uk>
References: <49A6B9E9.6000200@lancaster.ac.uk>
	<49A7205E.5000607@lancaster.ac.uk>
Message-ID: <20090227085332.9ED833418475@www.antlr.org>

At 12:06 27/02/2009, Sam Barnett-Cormack wrote:
 >Of course, it would be hard to structure, if I have to set the
 >text of the whole damn token at once. If we had the old !
 >operator, it'd be easy enough... make the '"' at the beginning
 >and end be missed out, make the first of the three choices be
 >ignored, and make the second be !'"' '"'.
 >That'd be just grand. However, I can't see an easy way to make
 >the resulting token text be what I want it to be with the
 >current system. If anyone knows how I can, please let me know.

Use a combination of substring (to strip the surrounding quotes) 
and replace (to do anything else).  Easy.

(It's even easier if you have access to a parallel replace 
function, instead of the more common serial function.)


From andreas.meyer at smartshift.de  Fri Feb 27 04:31:52 2009
From: andreas.meyer at smartshift.de (Andreas Meyer)
Date: Fri, 27 Feb 2009 13:31:52 +0100
Subject: [antlr-interest] Backtracking vs Lookahead
In-Reply-To: <49A6D3AA.4070403@smartshift.de>
References: <49A6D3AA.4070403@smartshift.de>
Message-ID: <49A7DD38.20102@smartshift.de>

Hello again!

I have to be more precise here. Backtracking is not what I want, as it 
recognizes the string "AAB" as "any,any,some", whereas I want it to be 
recognized as "any,some". I understand that I could write a semantic 
predicate like :

   rule     : ( {input.LA(1) != B && (input.LA(1) != A || input.LA(2) != 
B)}? any )+ some;

which works very nice. However, I have (literally) hundreds of places in 
my grammar that would need this workaround (each with a different 
"lookahead language"), so I would like to ask if there is a more formal 
way to do it. If not, how hard would it be to extend ANTLR with such a 
mechanism? If you could provide me with some pointers/hints, I would be 
happy to implement this myself.

Best Regards,
Andreas Meyer

Andreas Meyer schrieb:
> Dear ANTLR users! (developers?)
>
> I have a very basic problem: supposed I have two rules, one which 
> basically includes any token, and another one that contains only a 
> subset of them, say:
>
> any : A | B | C | D ;
> some
>    : A B
>    | B
>    ;
>
> Now, I want to combine those two rules:
>
> rule     : ( options{ greedy=false;} : any )+ some      ;
>
> .. such that the inner loop should consume any's, as long as LA(1)!=B 
> && (LA(1)!=A||LA(2)!=B). This should be easily recognizable by the 
> parser (in my opinion). However, ANTLR 3 (3.1.2) says:
>
> warning: Decision can match input such as "A B" using multiple 
> alternatives: 1, 2
>
> Note that when I change the rule "some" to:
>
> some : A | B;
>
> such that only a lookahead of one character is enough, everything 
> works as expected: "any" is consumed until a character is found from 
> the difference "any-some".
>
> Now, I thought "ok, use backtracking". Enabling it globally seems to 
> work. But, if I try to enable it only locally, it does not seem to 
> have any effect. Actually, I tried to enable it for any rule in my 
> grammar - without any effect! (I include the grammar in question as 
> attachement)
>


From parrt at cs.usfca.edu  Fri Feb 27 08:23:21 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 27 Feb 2009 08:23:21 -0800
Subject: [antlr-interest] Rewriting in non tree grammar
In-Reply-To: <23359115.3721235724192498.JavaMail.root@star>
References: <23359115.3721235724192498.JavaMail.root@star>
Message-ID: <669BD892-C94D-4608-B149-1906B5140CA4@cs.usfca.edu>


On Feb 27, 2009, at 12:43 AM, Indhu Bharathi wrote:

> Figured it out :-) Here is a sample grammar that does what is  
> required:
>
> grammar Test;
>
> @members {
> 	TokenRewriteStream input = (TokenRewriteStream) getTokenStream();
> }
>
> r
> @init {
> 	int pos;
> }
> 	:	a { pos = input.index(); } b
> 		{
> 			input.insertBefore(pos, "inserted");
> 		}
> 	;

$a.start.getTokenIndex() is better than relying on index probably.
Ter

From xenome4 at gmail.com  Fri Feb 27 08:47:46 2009
From: xenome4 at gmail.com (Bob Smiley)
Date: Fri, 27 Feb 2009 08:47:46 -0800
Subject: [antlr-interest] Is this the correct use of ANTLR
Message-ID: <01f401c998fb$1fa96c20$5efc4460$@com>

Hi all,

 

I'm trying to create a simple scripting language that looks similar to C but
I don't actually need to implement an interpreter.   I just want to convert
this "ultra-simple C" subset language into basic C and then run it through
GCC to create an executable.  Is it easier to start with say an ANSI C
grammar and cut out what I don't need or actually find a more simple
programming language?  I really just want mathematical expressions,
functions defined within the file, if/else if/else, and loops  (while, for,
foreach).

 

My end goal is to be able to take a user's script file, process it, add the
required integration fluff and then create a .o I can link into my
application.

 

I'm a total newbie when it comes to this stuff so I apologize in advance for
the basic question.

 

Thanks

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090227/e349182b/attachment.html 

From rschneid at bridgewater.edu  Fri Feb 27 09:12:33 2009
From: rschneid at bridgewater.edu (Raymond J. Schneider)
Date: Fri, 27 Feb 2009 12:12:33 -0500
Subject: [antlr-interest] Is this the correct use of ANTLR
In-Reply-To: <01f401c998fb$1fa96c20$5efc4460$@com>
References: <01f401c998fb$1fa96c20$5efc4460$@com>
Message-ID: <172455A9DFDEF941A54573F5463F106528DECE523E@bcex01.Bridgewater.local>

There is already a very nice C interpreter out there you might want to look at see http://chscite.sourceforge.net/

--
Ray Schneider,PE, Ph.D
Associate Professor
Math and Computer Science
Bridgewater College
http://www.bridgewater.edu/~rschneid/
http://theweedlessgarden.blogspot.com
________________________________________
From: antlr-interest-bounces at antlr.org [antlr-interest-bounces at antlr.org] On Behalf Of Bob Smiley [xenome4 at gmail.com]
Sent: Friday, February 27, 2009 11:47
To: antlr-interest at antlr.org
Subject: [antlr-interest] Is this the correct use of ANTLR

Hi all,

I?m trying to create a simple scripting language that looks similar to C but I don?t actually need to implement an interpreter.   I just want to convert this ?ultra-simple C? subset language into basic C and then run it through GCC to create an executable.  Is it easier to start with say an ANSI C grammar and cut out what I don?t need or actually find a more simple programming language?  I really just want mathematical expressions, functions defined within the file, if/else if/else, and loops  (while, for, foreach).

My end goal is to be able to take a user?s script file, process it, add the required integration fluff and then create a .o I can link into my application.

I?m a total newbie when it comes to this stuff so I apologize in advance for the basic question.

Thanks


From xenome4 at gmail.com  Fri Feb 27 10:16:38 2009
From: xenome4 at gmail.com (Bob Smiley)
Date: Fri, 27 Feb 2009 10:16:38 -0800
Subject: [antlr-interest] Is this the correct use of ANTLR
In-Reply-To: <172455A9DFDEF941A54573F5463F106528DECE523E@bcex01.Bridgewater.local>
References: <01f401c998fb$1fa96c20$5efc4460$@com>
	<172455A9DFDEF941A54573F5463F106528DECE523E@bcex01.Bridgewater.local>
Message-ID: <01fc01c99907$89f7a9a0$9de6fce0$@com>

Thanks for the reply, but I'm actually not trying to create an
interpreter...my goal is to create a simple scripting language that I can
just translate into C and compile with GCC.  My question may have been
confusing because I was asking about a language similar to C, but really any
grammar with the features I listed below would probably work. 

Thanks

-----Original Message-----
From: Raymond J. Schneider [mailto:rschneid at bridgewater.edu] 
Sent: Friday, February 27, 2009 9:13 AM
To: Bob Smiley; antlr-interest at antlr.org
Subject: RE: [antlr-interest] Is this the correct use of ANTLR

There is already a very nice C interpreter out there you might want to look
at see http://chscite.sourceforge.net/

--
Ray Schneider,PE, Ph.D
Associate Professor
Math and Computer Science
Bridgewater College
http://www.bridgewater.edu/~rschneid/
http://theweedlessgarden.blogspot.com
________________________________________
From: antlr-interest-bounces at antlr.org [antlr-interest-bounces at antlr.org] On
Behalf Of Bob Smiley [xenome4 at gmail.com]
Sent: Friday, February 27, 2009 11:47
To: antlr-interest at antlr.org
Subject: [antlr-interest] Is this the correct use of ANTLR

Hi all,

I'm trying to create a simple scripting language that looks similar to C but
I don't actually need to implement an interpreter.   I just want to convert
this "ultra-simple C" subset language into basic C and then run it through
GCC to create an executable.  Is it easier to start with say an ANSI C
grammar and cut out what I don't need or actually find a more simple
programming language?  I really just want mathematical expressions,
functions defined within the file, if/else if/else, and loops  (while, for,
foreach).

My end goal is to be able to take a user's script file, process it, add the
required integration fluff and then create a .o I can link into my
application.

I'm a total newbie when it comes to this stuff so I apologize in advance for
the basic question.

Thanks


From parrt at cs.usfca.edu  Fri Feb 27 10:19:13 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 27 Feb 2009 10:19:13 -0800
Subject: [antlr-interest] Is this the correct use of ANTLR
In-Reply-To: <01fc01c99907$89f7a9a0$9de6fce0$@com>
References: <01f401c998fb$1fa96c20$5efc4460$@com>
	<172455A9DFDEF941A54573F5463F106528DECE523E@bcex01.Bridgewater.local>
	<01fc01c99907$89f7a9a0$9de6fce0$@com>
Message-ID: <CAA360F4-6545-46BA-B21B-D9B3D206B48E@cs.usfca.edu>


On Feb 27, 2009, at 10:16 AM, Bob Smiley wrote:

> Thanks for the reply, but I'm actually not trying to create an
> interpreter...my goal is to create a simple scripting language that  
> I can
> just translate into C and compile with GCC.  My question may have been
> confusing because I was asking about a language similar to C, but  
> really any
> grammar with the features I listed below would probably work.
>

I'm building lots of interpreters for upcoming language patterns  
book...cool stuff; should be out in beta in a couple of months.
Ter

From kaleb.pederson at gmail.com  Fri Feb 27 10:32:06 2009
From: kaleb.pederson at gmail.com (Kaleb Pederson)
Date: Fri, 27 Feb 2009 10:32:06 -0800
Subject: [antlr-interest] Java Parser to analyze C++ language syntax
In-Reply-To: <26e9b8c20902262006o628874ddn321b8460cda7ae1e@mail.gmail.com>
References: <26e9b8c20902261734i223bebd3i409cb784048bb160@mail.gmail.com>
	<80a70730902261818w7d5265efg81276feb06392692@mail.gmail.com>
	<26e9b8c20902262006o628874ddn321b8460cda7ae1e@mail.gmail.com>
Message-ID: <f14c01620902271032q1924dce2w32dcac03f810f69e@mail.gmail.com>

On Thu, Feb 26, 2009 at 8:06 PM, SSG JJV <virtuoso.coders at gmail.com> wrote:
> Yes. But David's parser outputs C++ parser. I need a Java Parser to validate
> C++ language syntax.
> Thanks

It looks as if LLVM now has capable and stable C++ support:

LLVM includes "Front-ends for C and C++ based on the GCC 3.4 and 4.0.1
parsers. They support the ANSI-standard C and C++ languages to the
same degree that GCC supports them. Additionally, many GCC extensions
are supported" [1].

I've followed some of their progress and architecture and I believe it
would be a good starting point.

HTH,

--Kaleb

[1] http://llvm.org/Features.html


> On Thu, Feb 26, 2009 at 8:18 PM, Granville Barnett
> <granvillebarnett at googlemail.com> wrote:
>>
>> Have you tried the grammar by David Wigg??
>>
>> On Fri, Feb 27, 2009 at 11:34 AM, SSG JJV <virtuoso.coders at gmail.com>
>> wrote:
>>>
>>> Hi,
>>> Is there a any ANTLR grammar in Java, that can be used to validate C++
>>> language syntax?
>>> I tried Sun C/C++ parser mentioned under grammar list on antlr site. but
>>> could not generate antlr parser for the grammar mentioned.
>>> I got tons of errors.
>>> Is there any documentation on how to use the above parser?
>>> Thanks,
>>> Suman
>>>
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe:
>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>>
>>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>

From antlr at jazillian.com  Fri Feb 27 13:27:33 2009
From: antlr at jazillian.com (Andy Tripp)
Date: Fri, 27 Feb 2009 16:27:33 -0500
Subject: [antlr-interest] Java Parser to analyze C++ language syntax
In-Reply-To: <f14c01620902271032q1924dce2w32dcac03f810f69e@mail.gmail.com>
References: <26e9b8c20902261734i223bebd3i409cb784048bb160@mail.gmail.com>	<80a70730902261818w7d5265efg81276feb06392692@mail.gmail.com>	<26e9b8c20902262006o628874ddn321b8460cda7ae1e@mail.gmail.com>
	<f14c01620902271032q1924dce2w32dcac03f810f69e@mail.gmail.com>
Message-ID: <49A85AC5.90205@jazillian.com>

Kaleb Pederson wrote:
> On Thu, Feb 26, 2009 at 8:06 PM, SSG JJV <virtuoso.coders at gmail.com> wrote:
>> Yes. But David's parser outputs C++ parser. I need a Java Parser to validate
>> C++ language syntax.
>> Thanks
> 
> It looks as if LLVM now has capable and stable C++ support:
> 
> LLVM includes "Front-ends for C and C++ based on the GCC 3.4 and 4.0.1
> parsers. They support the ANSI-standard C and C++ languages to the
> same degree that GCC supports them. Additionally, many GCC extensions
> are supported" [1].
> 
> I've followed some of their progress and architecture and I believe it
> would be a good starting point.

But it looks like your parser needs to be written in C++ to use LLVM, no?
And the wikipedia entry only mentions a front-end for parsing Java byte code,
with no mention of parsing Java source code (other than saying one could
be developed). Is there a Java source code frontend for LLVM in development?

Andy 

From kaleb.pederson at gmail.com  Fri Feb 27 14:48:41 2009
From: kaleb.pederson at gmail.com (Kaleb Pederson)
Date: Fri, 27 Feb 2009 14:48:41 -0800
Subject: [antlr-interest] Java Parser to analyze C++ language syntax
In-Reply-To: <49A85AC5.90205@jazillian.com>
References: <26e9b8c20902261734i223bebd3i409cb784048bb160@mail.gmail.com>
	<80a70730902261818w7d5265efg81276feb06392692@mail.gmail.com>
	<26e9b8c20902262006o628874ddn321b8460cda7ae1e@mail.gmail.com>
	<f14c01620902271032q1924dce2w32dcac03f810f69e@mail.gmail.com>
	<49A85AC5.90205@jazillian.com>
Message-ID: <f14c01620902271448s7306690es237a8d17a16ed620@mail.gmail.com>

On Fri, Feb 27, 2009 at 1:27 PM, Andy Tripp <antlr at jazillian.com> wrote:
> But it looks like your parser needs to be written in C++ to use LLVM, no?
> And the wikipedia entry only mentions a front-end for parsing Java byte
> code,
> with no mention of parsing Java source code (other than saying one could
> be developed). Is there a Java source code frontend for LLVM in development?

Ack, I didn't read the original request closely enough, sorry :(.

Yes, you'd need to interact with C/C++, although you might be able to
use Swig to generate Java bindings... but that definitely doesn't fit
the original request.

In looking at LLVM a bit more closely, although both the FAQ and the
features page mention full C++ support, the Clang C++ page doesn't:
http://clang.llvm.org/cxx_status.html.  I'd guess, therefore, that
llvm-gcc is a different front end from Clang, which could complicate
matters.

One note on David Wigg's C++ grammar, it seemed well documented
although, IIRC, it used a slightly patched version of ANTLR or its
runtime which makes it a bit more difficult to use than would be
typical.

--Kaleb

From laurent.caillette at gmail.com  Fri Feb 27 16:07:56 2009
From: laurent.caillette at gmail.com (Laurent Caillette)
Date: Sat, 28 Feb 2009 01:07:56 +0100
Subject: [antlr-interest] Bug in ANTLR-3.1.2 with tree grammar wildcard list
	label x+= ?
Message-ID: <3b7c64070902271607q4d0ef357ic641eb637466ebf6@mail.gmail.com>

Hi all,

I attempted to switch to ANTLR-3.1.2, and the Java code generated from
my grammar doesn't compile anymore.

I've something like this:

part
  : ( mediumbreak | largebreak )?

    (   p += levelIntroducer
      | p += paragraph
      | p += blockQuote
      | p += literal
      | p += bigDashedListItem
      | p += cellRowSequence
    )
    ( largebreak (
        p += levelIntroducer
      | p += paragraph
      | p += blockQuote
      | p += literal
      | p += bigDashedListItem
      | p += cellRowSequence
    ) )*
    ( mediumbreak | largebreak )?
    EOF
    -> ^( PART $p+ )
  ;

Here is a piece of generated code:

            switch (alt2) {
                case 1 :
                    //
/Users/Shared/Novelang/src/antlr/Novelang.g:120:9: p+= levelIntroducer
                    {
                    pushFollow(FOLLOW_levelIntroducer_in_part485);
                    p=levelIntroducer();

And the compiler doesn't like generated code, it spits errors like this:

/Users/Shared/Scratch/Novelang/antlrworks/java/NovelangParser.java:754:
incompatible types
found   : NovelangParser.levelIntroducer_return
required: NovelangParser.cellRowSequence_return
                     p=levelIntroducer();
                                   ^

It seems that p has taken the type of the first rule
(levelIntroducer). Then attempting to set the result of
cellRowSequence doesn't work.

This happens consistently using ANTLRWorks-1.2.3 or antlr-3.1.2.jar directly.

In ANTLR-3.1.2 release notes there is something about the += operator:
<< Bug in code gen for tree grammar wildcard list label x+=. >>

Could my problem be related to this, or should I investigate some more?

Regards,

c.

P.S. The whole grammar can be found at :
http://github.com/caillette/novelang/raw/ef85822091680f3bca06ddc511386ec39fdb8b75/src/antlr/Novelang.g

From antlr at mirality.co.nz  Fri Feb 27 16:17:03 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 28 Feb 2009 13:17:03 +1300
Subject: [antlr-interest] Bug in ANTLR-3.1.2 with tree grammar wildcard
 list label x+= ?
In-Reply-To: <3b7c64070902271607q4d0ef357ic641eb637466ebf6@mail.gmail.co
 m>
References: <3b7c64070902271607q4d0ef357ic641eb637466ebf6@mail.gmail.com>
Message-ID: <20090228001715.321C534184C2@www.antlr.org>

At 13:07 28/02/2009, Laurent Caillette wrote:
 >part
 >  : ( mediumbreak | largebreak )?
 >
 >    (   p += levelIntroducer
 >      | p += paragraph
 >      | p += blockQuote
 >      | p += literal
 >      | p += bigDashedListItem
 >      | p += cellRowSequence
 >    )
[...]
 >/Users/Shared/Scratch/Novelang/antlrworks/java/NovelangParser.java:
 >754:
 >incompatible types
 >found   : NovelangParser.levelIntroducer_return
 >required: NovelangParser.cellRowSequence_return
 >                     p=levelIntroducer();
 >                                   ^
 >
 >It seems that p has taken the type of the first rule
 >(levelIntroducer). Then attempting to set the result of
 >cellRowSequence doesn't work.

I'm surprised that you managed to get it to work as long as you 
did -- that's been on my list of "don't do that" for most of v3.

You can fix it by creating a subrule:

content
   : levelIntroducer
   | paragraph
   | blockQuote
   | literal
   | bigDashedListItem
   | cellRowSequence
   ;

And then use p+=content in your original rule.


From jimi at temporal-wave.com  Fri Feb 27 16:26:24 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 27 Feb 2009 16:26:24 -0800
Subject: [antlr-interest] Is this the correct use of ANTLR
In-Reply-To: <01fc01c99907$89f7a9a0$9de6fce0$@com>
References: <01f401c998fb$1fa96c20$5efc4460$@com>	<172455A9DFDEF941A54573F5463F106528DECE523E@bcex01.Bridgewater.local>
	<01fc01c99907$89f7a9a0$9de6fce0$@com>
Message-ID: <49A884B0.4020107@temporal-wave.com>

Bob Smiley wrote:
> Thanks for the reply, but I'm actually not trying to create an
> interpreter...my goal is to create a simple scripting language that I can
> just translate into C and compile with GCC.  My question may have been
> confusing because I was asking about a language similar to C, but really any
> grammar with the features I listed below would probably work. 
>   
For what you want to do, if you were familiar with grammars I would say 
it is easiest to type it in from scratch. However, as you are not, then 
why not take the example GNU C parser (download the examples from the 
download page), and take out the stuff you do not need (quite a lot of 
it). Advice: take out the keywords you don't want first, then remove the 
rules that use them, then remove other stuff you don't need.

The best thing to do then would be to use a string template to output 
your C file, then compile that to a .o file. The option output=AST; is 
what you need for that. However, you coudl also provide a few helper 
classes that build the .C file and just call into these with actions.

Jim

From michael.bedward at gmail.com  Fri Feb 27 18:25:59 2009
From: michael.bedward at gmail.com (Michael Bedward)
Date: Sat, 28 Feb 2009 13:25:59 +1100
Subject: [antlr-interest] Is this the correct use of ANTLR
In-Reply-To: <49A884B0.4020107@temporal-wave.com>
References: <01f401c998fb$1fa96c20$5efc4460$@com>
	<172455A9DFDEF941A54573F5463F106528DECE523E@bcex01.Bridgewater.local>
	<01fc01c99907$89f7a9a0$9de6fce0$@com>
	<49A884B0.4020107@temporal-wave.com>
Message-ID: <e24c4c270902271825l59ab2817x6090e25380795502@mail.gmail.com>

Hi Bob,

Have just written my first language, which is also quite C-ish, while
learning ANTLR at the same time my advice would be slightly different
to Jim's.  Yes, it's really helpful to start from an example.  No,
don't start with a giant C grammar because you're likely to get lost.
That was my experience.

Terence's really simple C-minus example in the ANTLR book got me
started.  After that I found it helpful to just look at little bits of
other grammars when I was looking for ways of implementing a
particular feature.  I found the Python grammars on the ANTLR site
very helpful, even though my language is not pythonesque...

Hope this helps

Michael

From indhu.b at s7software.com  Fri Feb 27 20:42:54 2009
From: indhu.b at s7software.com (Indhu Bharathi)
Date: Sat, 28 Feb 2009 10:12:54 +0530
Subject: [antlr-interest] Rewriting in non tree grammar
In-Reply-To: <669BD892-C94D-4608-B149-1906B5140CA4@cs.usfca.edu>
References: <23359115.3721235724192498.JavaMail.root@star>
	<669BD892-C94D-4608-B149-1906B5140CA4@cs.usfca.edu>
Message-ID: <020201c9995f$06590550$130b0ff0$@b@s7software.com>

>$a.start.getTokenIndex() is better than relying on index probably.

Great! But how to do the same when I have a production like this:

a : b c b
  ;

Suppose I need to insert some text before the first 'b' as well as the
second 'b', I cannot write

{
	Input.insertBefore( $b.start.getTokenIndex(), "some text");
	Input.insertBefore( $b.start.getTokenIndex(), "some other text");
}

If 'b' is a lexer rule ('B'). then I can do 

a : t1=B c t2=B
{
	Input.insertBefore( t1, "some text");
	Input.insertBefore( t2, "some other text");
}
;

I tried doing the same thing for parser rule 'b' but it doesn't work. Any
idea how to get this working?


- Indhu


-----Original Message-----
From: Terence Parr [mailto:parrt at cs.usfca.edu] 
Sent: Friday, February 27, 2009 9:53 PM
To: indhu.b at s7software.com
Cc: antlr-interest
Subject: Re: [antlr-interest] Rewriting in non tree grammar


On Feb 27, 2009, at 12:43 AM, Indhu Bharathi wrote:

> Figured it out :-) Here is a sample grammar that does what is  
> required:
>
> grammar Test;
>
> @members {
> 	TokenRewriteStream input = (TokenRewriteStream) getTokenStream();
> }
>
> r
> @init {
> 	int pos;
> }
> 	:	a { pos = input.index(); } b
> 		{
> 			input.insertBefore(pos, "inserted");
> 		}
> 	;

$a.start.getTokenIndex() is better than relying on index probably.
Ter


From parrt at cs.usfca.edu  Fri Feb 27 22:14:21 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 27 Feb 2009 22:14:21 -0800
Subject: [antlr-interest] Rewriting in non tree grammar
In-Reply-To: <020201c9995f$06590550$130b0ff0$@b@s7software.com>
References: <23359115.3721235724192498.JavaMail.root@star>
	<669BD892-C94D-4608-B149-1906B5140CA4@cs.usfca.edu>
	<020201c9995f$06590550$130b0ff0$@b@s7software.com>
Message-ID: <7767C838-B80F-4D6C-87C2-5421920826B4@cs.usfca.edu>

label the rule refs, dude :)
Ter
On Feb 27, 2009, at 8:42 PM, Indhu Bharathi wrote:

>> $a.start.getTokenIndex() is better than relying on index probably.
>
> Great! But how to do the same when I have a production like this:
>
> a : b c b
>  ;
>
> Suppose I need to insert some text before the first 'b' as well as the
> second 'b', I cannot write
>
> {
> 	Input.insertBefore( $b.start.getTokenIndex(), "some text");
> 	Input.insertBefore( $b.start.getTokenIndex(), "some other text");
> }
>
> If 'b' is a lexer rule ('B'). then I can do
>
> a : t1=B c t2=B
> {
> 	Input.insertBefore( t1, "some text");
> 	Input.insertBefore( t2, "some other text");
> }
> ;
>
> I tried doing the same thing for parser rule 'b' but it doesn't  
> work. Any
> idea how to get this working?
>
>
> - Indhu
>
>
> -----Original Message-----
> From: Terence Parr [mailto:parrt at cs.usfca.edu]
> Sent: Friday, February 27, 2009 9:53 PM
> To: indhu.b at s7software.com
> Cc: antlr-interest
> Subject: Re: [antlr-interest] Rewriting in non tree grammar
>
>
> On Feb 27, 2009, at 12:43 AM, Indhu Bharathi wrote:
>
>> Figured it out :-) Here is a sample grammar that does what is
>> required:
>>
>> grammar Test;
>>
>> @members {
>> 	TokenRewriteStream input = (TokenRewriteStream) getTokenStream();
>> }
>>
>> r
>> @init {
>> 	int pos;
>> }
>> 	:	a { pos = input.index(); } b
>> 		{
>> 			input.insertBefore(pos, "inserted");
>> 		}
>> 	;
>
> $a.start.getTokenIndex() is better than relying on index probably.
> Ter
>


From indhu.b at s7software.com  Fri Feb 27 23:22:13 2009
From: indhu.b at s7software.com (Indhu Bharathi)
Date: Sat, 28 Feb 2009 12:52:13 +0530 (IST)
Subject: [antlr-interest] Rewriting in non tree grammar
In-Reply-To: <7767C838-B80F-4D6C-87C2-5421920826B4@cs.usfca.edu>
Message-ID: <632416.3891235805733954.JavaMail.root@star>

Got it. What I missed is the '$' symbol while referencing

I wrote:

r : t=a b a
  {
    ... t.start.getTokenIndex() ...
  }

It must have been 

r : t=a b a
  {
    ... $t.start.getTokenIndex() ...
  }

Thanks :-)


----- Original Message -----
From: Terence Parr <parrt at cs.usfca.edu>
To: Indhu Bharathi <indhu.b at s7software.com>
Cc: antlr-interest <antlr-interest at antlr.org>
Sent: Saturday, February 28, 2009 11:44:21 AM GMT+0530 Asia/Calcutta
Subject: Re: [antlr-interest] Rewriting in non tree grammar

label the rule refs, dude :)
Ter
On Feb 27, 2009, at 8:42 PM, Indhu Bharathi wrote:

>> $a.start.getTokenIndex() is better than relying on index probably.
>
> Great! But how to do the same when I have a production like this:
>
> a : b c b
>  ;
>
> Suppose I need to insert some text before the first 'b' as well as the
> second 'b', I cannot write
>
> {
> 	Input.insertBefore( $b.start.getTokenIndex(), "some text");
> 	Input.insertBefore( $b.start.getTokenIndex(), "some other text");
> }
>
> If 'b' is a lexer rule ('B'). then I can do
>
> a : t1=B c t2=B
> {
> 	Input.insertBefore( t1, "some text");
> 	Input.insertBefore( t2, "some other text");
> }
> ;
>
> I tried doing the same thing for parser rule 'b' but it doesn't  
> work. Any
> idea how to get this working?
>
>
> - Indhu
>
>
> -----Original Message-----
> From: Terence Parr [mailto:parrt at cs.usfca.edu]
> Sent: Friday, February 27, 2009 9:53 PM
> To: indhu.b at s7software.com
> Cc: antlr-interest
> Subject: Re: [antlr-interest] Rewriting in non tree grammar
>
>
> On Feb 27, 2009, at 12:43 AM, Indhu Bharathi wrote:
>
>> Figured it out :-) Here is a sample grammar that does what is
>> required:
>>
>> grammar Test;
>>
>> @members {
>> 	TokenRewriteStream input = (TokenRewriteStream) getTokenStream();
>> }
>>
>> r
>> @init {
>> 	int pos;
>> }
>> 	:	a { pos = input.index(); } b
>> 		{
>> 			input.insertBefore(pos, "inserted");
>> 		}
>> 	;
>
> $a.start.getTokenIndex() is better than relying on index probably.
> Ter
>



From g.r.vansickle at att.net  Fri Feb 27 23:40:13 2009
From: g.r.vansickle at att.net (Gary R. Van Sickle)
Date: Sat, 28 Feb 2009 01:40:13 -0600
Subject: [antlr-interest] Bug in ANTLR-3.1.2 with tree grammar wildcard
	list label x+= ?
In-Reply-To: <20090228001715.321C534184C2@www.antlr.org>
References: <3b7c64070902271607q4d0ef357ic641eb637466ebf6@mail.gmail.com>
	<20090228001715.321C534184C2@www.antlr.org>
Message-ID: <61AC8149C40D468EAC3C78BDE03C68FF@DFW5RB41>

> From:  Gavin Lambert
> Sent: Friday, February 27, 2009 6:17 PM
> To: Laurent Caillette; antlr-interest
> Subject: Re: [antlr-interest] Bug in ANTLR-3.1.2 with tree 
> grammar wildcard list label x+= ?
> 
> At 13:07 28/02/2009, Laurent Caillette wrote:
>  >part
>  >  : ( mediumbreak | largebreak )?
>  >
>  >    (   p += levelIntroducer
>  >      | p += paragraph
>  >      | p += blockQuote
>  >      | p += literal
>  >      | p += bigDashedListItem
>  >      | p += cellRowSequence
>  >    )
> [...]
>  >/Users/Shared/Scratch/Novelang/antlrworks/java/NovelangParser.java:
>  >754:
>  >incompatible types
>  >found   : NovelangParser.levelIntroducer_return
>  >required: NovelangParser.cellRowSequence_return
>  >                     p=levelIntroducer();
>  >                                   ^
>  >
>  >It seems that p has taken the type of the first rule  
> >(levelIntroducer). Then attempting to set the result of  
> >cellRowSequence doesn't work.
> 
> I'm surprised that you managed to get it to work as long as 
> you did -- that's been on my list of "don't do that" for most of v3.
> 
> You can fix it by creating a subrule:
> 
> content
>    : levelIntroducer
>    | paragraph
>    | blockQuote
>    | literal
>    | bigDashedListItem
>    | cellRowSequence
>    ;
> 
> And then use p+=content in your original rule.

Bug or feature though?  It seems inconsistent for what appear to be two
semantically equivalent constructs to be totally fine in the one case and a
silent failure in the other.

-- 
Gary R. Van Sickle
 


From g.r.vansickle at att.net  Sat Feb 28 01:19:32 2009
From: g.r.vansickle at att.net (Gary R. Van Sickle)
Date: Sat, 28 Feb 2009 03:19:32 -0600
Subject: [antlr-interest] More label breakage?
Message-ID: <7AF6E3995E884B3B8E1034C45DF72843@DFW5RB41>

In a tree grammar this time.  This should work, right?:

selection_statement returns [If *retval]
  : ^(IF expression s1=statement s2=statement)
    { $retval = new If(NULL, $s1, $s2); }
  | ^(IF { cout << "IF" << endl; }
    expression statement)
  | ^(SWITCH expression statement)
  ;

(C target, "ANTLR Parser Generator  Version 3.1.2-2008-10-21")

It results in the following errors from ANTLR:

error(117): ss9_tree_parser.g3t:0:0: missing attribute access on rule scope:
s1
error(117): ss9_tree_parser.g3t:0:0: missing attribute access on rule scope:
s2

Broken?  If I comment out the action, it gets through ANTLR and compiles,
but of course that's of little use.  Apparently ANTLR is looking for
something along the lines of "new If(NULL, $something::s1, $something::s2)",
but I have no idea what $something is supposed to be, nor can I find any
documentation to that effect.

-- 
Gary R. Van Sickle


From g.r.vansickle at att.net  Sat Feb 28 01:52:20 2009
From: g.r.vansickle at att.net (Gary R. Van Sickle)
Date: Sat, 28 Feb 2009 03:52:20 -0600
Subject: [antlr-interest] More label breakage?
In-Reply-To: <7AF6E3995E884B3B8E1034C45DF72843@DFW5RB41>
References: <7AF6E3995E884B3B8E1034C45DF72843@DFW5RB41>
Message-ID: <5F1577A1B7E3485FB17E3CE33473D998@DFW5RB41>

Ok, to answer my own question, this works:

statement returns [ Statement *s ]
  : labeled_statement
  | [...whatever...]
  ;

selection_statement returns [If *retval]
  : ^(IF expression s1=statement s2=statement)
    {
      $retval = new If(NULL, $s1.s, $s2.s);
    }
  | [...]
  ;

...which matches what's on page 134 of the ANTLR book.  So, never mind.

-- 
Gary R. Van Sickle
 

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org 
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Gary 
> R. Van Sickle
> Sent: Saturday, February 28, 2009 3:20 AM
> To: 'antlr-interest'
> Subject: [antlr-interest] More label breakage?
> 
> In a tree grammar this time.  This should work, right?:
> 
> selection_statement returns [If *retval]
>   : ^(IF expression s1=statement s2=statement)
>     { $retval = new If(NULL, $s1, $s2); }
>   | ^(IF { cout << "IF" << endl; }
>     expression statement)
>   | ^(SWITCH expression statement)
>   ;
> 
> (C target, "ANTLR Parser Generator  Version 3.1.2-2008-10-21")
> 
> It results in the following errors from ANTLR:
> 
> error(117): ss9_tree_parser.g3t:0:0: missing attribute access 
> on rule scope:
> s1
> error(117): ss9_tree_parser.g3t:0:0: missing attribute access 
> on rule scope:
> s2
> 
> Broken?  If I comment out the action, it gets through ANTLR 
> and compiles, but of course that's of little use.  Apparently 
> ANTLR is looking for something along the lines of "new 
> If(NULL, $something::s1, $something::s2)", but I have no idea 
> what $something is supposed to be, nor can I find any 
> documentation to that effect.
> 
> --
> Gary R. Van Sickle
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: 
> http://www.antlr.org/mailman/options/antlr-interest/your-email
> -address


From fdmanana at ieee.org  Sat Feb 28 03:59:26 2009
From: fdmanana at ieee.org (Filipe David Manana)
Date: Sat, 28 Feb 2009 12:59:26 +0100
Subject: [antlr-interest] Inserting a token in the input stream
Message-ID: <cadf1c690902280359o44395e97n31e441985fb08feb@mail.gmail.com>

Hello,

Is it possible to do something in a rule's action that either makes the
parser finish (with success status) or insert a token in the input stream?

I need something like that for a JavaScript grammar. Considering the
following rules:

program
    : sourceElements EOF
    ;

sourceElements
    : LT* ( sourceElement LT* )*
    ;

sourceElement
    : functionDeclaration
    | statement
    ;

statement
    : emptyStatement
    | variableStatement
    | blockStatement
    ;

variableStatement
    : 'var'  LT*  variableDeclarationList  ( LT | ';'  )
    ;


If the input stream is for e.g. "var test" (no newline or semi-colon before
the EOF), my parser fails. ANTLRWorks debuggers shows "NoViableAltException"
nodes coming from the "variableDeclarationList" rule.

If I change my rules to:

program
    : sourceElements
    ;

/* rules in between remain unchanged */

variableStatement
    : 'var'  LT*  variableDeclarationList  ( LT | ';' | EOF )
    ;

The same thing happens.

So my initial thought is to add a ';' for e.g. into the input stream if an
EOF is following the "variableDeclarationList" ub tge "variableStatement"
rule.

As a complete beginner to ANTLR, any suggestions are very welcome.

cheers


-- 
Filipe David Manana,
fdmanana at ieee.org
PGP key - http://pgp.mit.edu:11371/pks/lookup?op=get&search=0xC569452B

"Reasonable men adapt themselves to the world.
Unreasonable men adapt the world to themselves.
That's why all progress depends on unreasonable men."
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090228/fe0bd573/attachment.html 

From s.barnett-cormack at lancaster.ac.uk  Sat Feb 28 07:18:15 2009
From: s.barnett-cormack at lancaster.ac.uk (Sam Barnett-Cormack)
Date: Sat, 28 Feb 2009 15:18:15 +0000
Subject: [antlr-interest] Difficult (to me) recursion problem
Message-ID: <49A955B7.3060707@lancaster.ac.uk>

Hey all,

So, my ASN.1 grammar is progressing, but I've run into a problem that I 
*think* is due to left-recursion complexities. I've attached the whole 
grammar (bits that are commented out are generally references to rules 
from other bits of the standards that I haven't reached yet - want to 
see about getting the basic one running without error), but the area I 
think the problem is actually in is lines 640--686:

constrainedType : type constraint | typeWithConstraint ;

typeWithConstraint : (SET | SEQUENCE) (constraint | sizeConstraint) OF 
type ;

constraint : '(' constraintSpec exceptionSpec ')' ;

constraintSpec : subtypeConstraint /*| generalConstraint*/ ;

subtypeConstraint : elementSetSpecs ;

elementSetSpecs : rootElementSetSpec (',' '...' (',' 
additionalElementSetSpec)?)? ;

rootElementSetSpec : elementSetSpec;

additionalElementSetSpec : elementSetSpec;

elementSetSpec : unions | ALL exclusions ;

unions : intersections uElems unionMark intersections ;

uElems : unions ;

intersections : intersectionElements iElems intersectionMark 
intersectionElements ;

iElems : intersections ;

intersectionElements : elements exclusions? ;

exclusions : EXCEPT elements ;

unionMark : '|' | UNION ;

intersectionMark : '^' | INTERSECTION ;

elements : subtypeElements /*| objectSetElements*/ | '(' elementSetSpec 
')' ;

subtypeElements
     : singleValue
     | containedSubtype
     | valueRange
     | permittedAlphabet
     | sizeConstraint
     | typeConstraint
     | innerTypeConstraints
     | patternConstraint;

singleValue : value;

Now, I can see where there could be recursion issues here. The grammar 
is taken from the ASN1 spec, which I think assumes a YACC-style parser.

The errors I end up getting are multitudinous, and I'm just not sure 
which are causes and which are effects, as I know you can get 
snowball-errors.

If anyone can offer me some guidance, I'd really appreciate it.

Sam
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: ASN_1.g
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20090228/d3a3073d/attachment.pl 

From jaluber at gmx.de  Sat Feb 28 07:43:46 2009
From: jaluber at gmx.de (Johannes Luber)
Date: Sat, 28 Feb 2009 16:43:46 +0100
Subject: [antlr-interest] Difficult (to me) recursion problem
In-Reply-To: <49A955B7.3060707@lancaster.ac.uk>
References: <49A955B7.3060707@lancaster.ac.uk>
Message-ID: <49A95BB2.8020703@gmx.de>

Sam Barnett-Cormack schrieb:
> Hey all,
> 
> So, my ASN.1 grammar is progressing, but I've run into a problem that I
> *think* is due to left-recursion complexities. I've attached the whole
> grammar (bits that are commented out are generally references to rules
> from other bits of the standards that I haven't reached yet - want to
> see about getting the basic one running without error), but the area I
> think the problem is actually in is lines 640--686:
> 
> constrainedType : type constraint | typeWithConstraint ;
> 
> typeWithConstraint : (SET | SEQUENCE) (constraint | sizeConstraint) OF
> type ;
> 
> constraint : '(' constraintSpec exceptionSpec ')' ;
> 
> constraintSpec : subtypeConstraint /*| generalConstraint*/ ;
> 
> subtypeConstraint : elementSetSpecs ;
> 
> elementSetSpecs : rootElementSetSpec (',' '...' (','
> additionalElementSetSpec)?)? ;
> 
> rootElementSetSpec : elementSetSpec;
> 
> additionalElementSetSpec : elementSetSpec;
> 
> elementSetSpec : unions | ALL exclusions ;
> 
> unions : intersections uElems unionMark intersections ;
> 
> uElems : unions ;
> 
> intersections : intersectionElements iElems intersectionMark
> intersectionElements ;
> 
> iElems : intersections ;
> 
> intersectionElements : elements exclusions? ;
> 
> exclusions : EXCEPT elements ;
> 
> unionMark : '|' | UNION ;
> 
> intersectionMark : '^' | INTERSECTION ;
> 
> elements : subtypeElements /*| objectSetElements*/ | '(' elementSetSpec
> ')' ;
> 
> subtypeElements
>     : singleValue
>     | containedSubtype
>     | valueRange
>     | permittedAlphabet
>     | sizeConstraint
>     | typeConstraint
>     | innerTypeConstraints
>     | patternConstraint;
> 
> singleValue : value;
> 
> Now, I can see where there could be recursion issues here. The grammar
> is taken from the ASN1 spec, which I think assumes a YACC-style parser.
> 
> The errors I end up getting are multitudinous, and I'm just not sure
> which are causes and which are effects, as I know you can get
> snowball-errors.
> 
> If anyone can offer me some guidance, I'd really appreciate it.

Did you see
<http://www.antlr.org/wiki/display/ANTLR3/Left-Recursion+Removal> already?

Johannes

> Sam
> 
> 
> ------------------------------------------------------------------------
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From parrt at cs.usfca.edu  Sat Feb 28 08:58:16 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 28 Feb 2009 08:58:16 -0800
Subject: [antlr-interest] Bug in ANTLR-3.1.2 with tree grammar wildcard
	list label x+= ?
In-Reply-To: <3b7c64070902271607q4d0ef357ic641eb637466ebf6@mail.gmail.com>
References: <3b7c64070902271607q4d0ef357ic641eb637466ebf6@mail.gmail.com>
Message-ID: <54F00E33-B1C6-40DD-938E-A17B5F558F3E@cs.usfca.edu>

hi. should work if output=AST (I added a comment to existing request  
to be sure):

http://www.antlr.org/jira/browse/ANTLR-381

if not output=AST, it doesn't know what to put in list.  the internal  
return object? one of the return values?

Ter
On Feb 27, 2009, at 4:07 PM, Laurent Caillette wrote:

>  (   p += levelIntroducer
>      | p += paragraph
>      | p += blockQuote
>      | p += literal
>      | p += bigDashedListItem
>      | p += cellRowSequence
>    )


From s.barnett-cormack at lancaster.ac.uk  Sat Feb 28 10:16:19 2009
From: s.barnett-cormack at lancaster.ac.uk (Sam Barnett-Cormack)
Date: Sat, 28 Feb 2009 18:16:19 +0000
Subject: [antlr-interest] Confusing, hopefully-final, problems
Message-ID: <49A97F73.5000303@lancaster.ac.uk>

Hi all

So, I solved the recursion issue (which had been complicated by me 
failing to notice a '|' in the standard), and fixed a lot of intractable 
issues using predicates (or backtracking, at least for now). However, 
I'm still getting some errors/warnings which I can't for the life of me 
figure out the reason for. I know what they mean, but they don't make 
sense. The grammar is, of course, attached. The build errors I'm getting 
are:

[18:09:42] warning(200): ASN_1.g:346:108: Decision can match input such 
as "'('" using multiple alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input
[18:09:42] warning(200): ASN_1.g:470:4: Decision can match input such as 
"'...'" using multiple alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input
[18:09:42] warning(200): ASN_1.g:473:31: Decision can match input such 
as "'}'" using multiple alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input
[18:09:42] warning(200): ASN_1.g:473:31: Decision can match input such 
as "','" using multiple alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input
[18:09:42] warning(200): ASN_1.g:473:31: Decision can match input such 
as "EOF" using multiple alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input
[18:09:42] error(201): ASN_1.g:473:31: The following alternatives can 
never be matched: 2

[18:09:42] warning(200): ASN_1.g:518:15: Decision can match input such 
as "'...'" using multiple alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input
[18:09:42] error(201): ASN_1.g:518:15: The following alternatives can 
never be matched: 2


In the case of line 473, some of those inputs that can supposedly be 
matched in more than one way can't really be matched at all, as far as I 
can tell. In the other cases, the inputs can be matched, but I'm pretty 
sure they can't be matched by the things it says they can be.

I'm sure that this isn't some sort of software bug, because I know antlr 
isn't that flaky and weird. Beginning to feel incredibly stupid, but can 
anyone offer me any tips or ideas, or even a full debugging of my code 
(hey, it's unlikely, but I can hope, right)?

Thanks all

Sam

From s.barnett-cormack at lancaster.ac.uk  Sat Feb 28 10:18:26 2009
From: s.barnett-cormack at lancaster.ac.uk (Sam Barnett-Cormack)
Date: Sat, 28 Feb 2009 18:18:26 +0000
Subject: [antlr-interest] Difficult (to me) recursion problem
In-Reply-To: <49A95BB2.8020703@gmx.de>
References: <49A955B7.3060707@lancaster.ac.uk> <49A95BB2.8020703@gmx.de>
Message-ID: <49A97FF2.5060105@lancaster.ac.uk>

Johannes Luber wrote:
> Sam Barnett-Cormack schrieb:
<snip>
>>
>> If anyone can offer me some guidance, I'd really appreciate it.
> 
> Did you see
> <http://www.antlr.org/wiki/display/ANTLR3/Left-Recursion+Removal> already?

Looked at it, didn't find anything too useful to me. However, once I'd 
discovered my copy-error in that part of the grammar, I realised how to 
refactor it with help from the relevant bit of Ter's book...

Sam


From fdmanana at ieee.org  Sat Feb 28 10:46:16 2009
From: fdmanana at ieee.org (Filipe David Manana)
Date: Sat, 28 Feb 2009 19:46:16 +0100
Subject: [antlr-interest] ANTLRWorks debugger
Message-ID: <cadf1c690902281046m91eb306u7c13e1b4a84ca409@mail.gmail.com>

Hello,

Suddenly, I am no longer able to use the debugger. ANTLRWorks reports that
it's not capable of establishing the connection (to my localhost).
I'm using port 49100, and have no other application using this port or
blocking firewall rules:


root at core2duo:~# netstat -apn | grep 49100
root at core2duo:~# iptables -L
Chain INPUT (policy ACCEPT)
target     prot opt source               destination

Chain FORWARD (policy ACCEPT)
target     prot opt source               destination

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination
root at core2duo:~#


tcpdump shows me that somehow the connection is refused through tcp reset
packets:


root at core2duo:~# tcpdump -i lo tcp
tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
listening on lo, link-type EN10MB (Ethernet), capture size 96 bytes
19:43:36.166844 IP localhost.50571 > localhost.49100: S
3500391462:3500391462(0) win 32792 <mss 16396,sackOK,timestamp 230981
0,nop,wscale 7>
19:43:36.167084 IP localhost.49100 > localhost.50571: R 0:0(0) ack
3500391463 win 0
19:43:36.667645 IP localhost.50572 > localhost.49100: S
3504550876:3504550876(0) win 32792 <mss 16396,sackOK,timestamp 231106
0,nop,wscale 7>
19:43:36.667661 IP localhost.49100 > localhost.50572: R 0:0(0) ack
3504550877 win 0
19:43:37.174907 IP localhost.50573 > localhost.49100: S
3518693368:3518693368(0) win 32792 <mss 16396,sackOK,timestamp 231233
0,nop,wscale 7>
19:43:37.174923 IP localhost.49100 > localhost.50573: R 0:0(0) ack
3518693369 win 0
19:43:37.675554 IP localhost.50574 > localhost.49100: S
3529403760:3529403760(0) win 32792 <mss 16396,sackOK,timestamp 231358
0,nop,wscale 7>
19:43:37.675569 IP localhost.49100 > localhost.50574: R 0:0(0) ack
3529403761 win 0

So there's no local app listening on that port.

I also tried using other ports for the debugger, although the problem
persists.

Any suggestion?

It was working fine some hours ago. I've even rebooted my machine...

thank you


-- 
Filipe David Manana,
fdmanana at ieee.org
PGP key - http://pgp.mit.edu:11371/pks/lookup?op=get&search=0xC569452B

"Reasonable men adapt themselves to the world.
Unreasonable men adapt the world to themselves.
That's why all progress depends on unreasonable men."
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090228/740cd7f8/attachment.html 

From indhu.b at s7software.com  Sat Feb 28 11:42:07 2009
From: indhu.b at s7software.com (Indhu Bharathi)
Date: Sun, 1 Mar 2009 01:12:07 +0530
Subject: [antlr-interest] ANTLRWorks debugger
In-Reply-To: <cadf1c690902281046m91eb306u7c13e1b4a84ca409@mail.gmail.com>
References: <cadf1c690902281046m91eb306u7c13e1b4a84ca409@mail.gmail.com>
Message-ID: <021a01c999dc$a4461140$ecd233c0$@b@s7software.com>

This sometime happens due to bug in the grammar. Try running debugger with some very simple grammar. If it works, then the mistake is with the grammar.

 

- Indhu

 

From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Filipe David Manana
Sent: Sunday, March 01, 2009 12:16 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] ANTLRWorks debugger

 

Hello,

Suddenly, I am no longer able to use the debugger. ANTLRWorks reports that it's not capable of establishing the connection (to my localhost).
I'm using port 49100, and have no other application using this port or blocking firewall rules:


root at core2duo:~# netstat -apn | grep 49100
root at core2duo:~# iptables -L
Chain INPUT (policy ACCEPT)
target     prot opt source               destination         

Chain FORWARD (policy ACCEPT)
target     prot opt source               destination         

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination         
root at core2duo:~# 


tcpdump shows me that somehow the connection is refused through tcp reset packets:


root at core2duo:~# tcpdump -i lo tcp
tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
listening on lo, link-type EN10MB (Ethernet), capture size 96 bytes
19:43:36.166844 IP localhost.50571 > localhost.49100: S 3500391462:3500391462(0) win 32792 <mss 16396,sackOK,timestamp 230981 0,nop,wscale 7>
19:43:36.167084 IP localhost.49100 > localhost.50571: R 0:0(0) ack 3500391463 win 0
19:43:36.667645 IP localhost.50572 > localhost.49100: S 3504550876:3504550876(0) win 32792 <mss 16396,sackOK,timestamp 231106 0,nop,wscale 7>
19:43:36.667661 IP localhost.49100 > localhost.50572: R 0:0(0) ack 3504550877 win 0
19:43:37.174907 IP localhost.50573 > localhost.49100: S 3518693368:3518693368(0) win 32792 <mss 16396,sackOK,timestamp 231233 0,nop,wscale 7>
19:43:37.174923 IP localhost.49100 > localhost.50573: R 0:0(0) ack 3518693369 win 0
19:43:37.675554 IP localhost.50574 > localhost.49100: S 3529403760:3529403760(0) win 32792 <mss 16396,sackOK,timestamp 231358 0,nop,wscale 7>
19:43:37.675569 IP localhost.49100 > localhost.50574: R 0:0(0) ack 3529403761 win 0

So there's no local app listening on that port.

I also tried using other ports for the debugger, although the problem persists.

Any suggestion?

It was working fine some hours ago. I've even rebooted my machine...

thank you


-- 
Filipe David Manana,
fdmanana at ieee.org
PGP key - http://pgp.mit.edu:11371/pks/lookup?op=get <http://pgp.mit.edu:11371/pks/lookup?op=get&search=0xC569452B> &search=0xC569452B

"Reasonable men adapt themselves to the world.
Unreasonable men adapt the world to themselves.
That's why all progress depends on unreasonable men."

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090301/0bbda496/attachment.html 

From andreas.meyer at smartshift.de  Sat Feb 28 11:57:39 2009
From: andreas.meyer at smartshift.de (Andreas Meyer)
Date: Sat, 28 Feb 2009 20:57:39 +0100
Subject: [antlr-interest] ANTLRWorks debugger
In-Reply-To: <cadf1c690902281046m91eb306u7c13e1b4a84ca409@mail.gmail.com>
References: <cadf1c690902281046m91eb306u7c13e1b4a84ca409@mail.gmail.com>
Message-ID: <49A99733.1090008@smartshift.de>

Have you tried using the port 49153 from within ANTLRWorks? That worked 
for me. (I have ANTLR 3.1.2 but only the previous-recent version of 
ANTLRworks, if that makes a difference).

Andreas

Filipe David Manana schrieb:
> Hello,
>
> Suddenly, I am no longer able to use the debugger. ANTLRWorks reports 
> that it's not capable of establishing the connection (to my localhost).
> I'm using port 49100, and have no other application using this port or 
> blocking firewall rules:
>
>
> root at core2duo:~# netstat -apn | grep 49100
> root at core2duo:~# iptables -L
> Chain INPUT (policy ACCEPT)
> target     prot opt source               destination        
>
> Chain FORWARD (policy ACCEPT)
> target     prot opt source               destination        
>
> Chain OUTPUT (policy ACCEPT)
> target     prot opt source               destination        
> root at core2duo:~#
>
>
> tcpdump shows me that somehow the connection is refused through tcp 
> reset packets:
>
>
> root at core2duo:~# tcpdump -i lo tcp
> tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
> listening on lo, link-type EN10MB (Ethernet), capture size 96 bytes
> 19:43:36.166844 IP localhost.50571 > localhost.49100: S 
> 3500391462:3500391462(0) win 32792 <mss 16396,sackOK,timestamp 230981 
> 0,nop,wscale 7>
> 19:43:36.167084 IP localhost.49100 > localhost.50571: R 0:0(0) ack 
> 3500391463 win 0
> 19:43:36.667645 IP localhost.50572 > localhost.49100: S 
> 3504550876:3504550876(0) win 32792 <mss 16396,sackOK,timestamp 231106 
> 0,nop,wscale 7>
> 19:43:36.667661 IP localhost.49100 > localhost.50572: R 0:0(0) ack 
> 3504550877 win 0
> 19:43:37.174907 IP localhost.50573 > localhost.49100: S 
> 3518693368:3518693368(0) win 32792 <mss 16396,sackOK,timestamp 231233 
> 0,nop,wscale 7>
> 19:43:37.174923 IP localhost.49100 > localhost.50573: R 0:0(0) ack 
> 3518693369 win 0
> 19:43:37.675554 IP localhost.50574 > localhost.49100: S 
> 3529403760:3529403760(0) win 32792 <mss 16396,sackOK,timestamp 231358 
> 0,nop,wscale 7>
> 19:43:37.675569 IP localhost.49100 > localhost.50574: R 0:0(0) ack 
> 3529403761 win 0
>
> So there's no local app listening on that port.
>
> I also tried using other ports for the debugger, although the problem 
> persists.
>
> Any suggestion?
>
> It was working fine some hours ago. I've even rebooted my machine...
>
> thank you
>
>
> -- 
> Filipe David Manana,
> fdmanana at ieee.org <mailto:fdmanana at ieee.org>
> PGP key - http://pgp.mit.edu:11371/pks/lookup?op=get&search=0xC569452B 
> <http://pgp.mit.edu:11371/pks/lookup?op=get&search=0xC569452B>
>
> "Reasonable men adapt themselves to the world.
> Unreasonable men adapt the world to themselves.
> That's why all progress depends on unreasonable men."
>
> ------------------------------------------------------------------------
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>   


From fdmanana at ieee.org  Sat Feb 28 12:44:37 2009
From: fdmanana at ieee.org (Filipe David Manana)
Date: Sat, 28 Feb 2009 21:44:37 +0100
Subject: [antlr-interest] ANTLRWorks debugger
In-Reply-To: <49A99733.1090008@smartshift.de>
References: <cadf1c690902281046m91eb306u7c13e1b4a84ca409@mail.gmail.com>
	<49A99733.1090008@smartshift.de>
Message-ID: <cadf1c690902281244q4ca3dfc2gefd7da62f02f5f9a@mail.gmail.com>

Holy cow!

It works using port 49153 :|
This gotta be one of the most mysterious things in the world!
Port 49100 doesn't work, neither 50000, neither 49123, neither...


On Sat, Feb 28, 2009 at 8:57 PM, Andreas Meyer
<andreas.meyer at smartshift.de>wrote:

> Have you tried using the port 49153 from within ANTLRWorks? That worked
> for me. (I have ANTLR 3.1.2 but only the previous-recent version of
> ANTLRworks, if that makes a difference).
>
> Andreas
>
> Filipe David Manana schrieb:
> > Hello,
> >
> > Suddenly, I am no longer able to use the debugger. ANTLRWorks reports
> > that it's not capable of establishing the connection (to my localhost).
> > I'm using port 49100, and have no other application using this port or
> > blocking firewall rules:
> >
> >
> > root at core2duo:~# netstat -apn | grep 49100
> > root at core2duo:~# iptables -L
> > Chain INPUT (policy ACCEPT)
> > target     prot opt source               destination
> >
> > Chain FORWARD (policy ACCEPT)
> > target     prot opt source               destination
> >
> > Chain OUTPUT (policy ACCEPT)
> > target     prot opt source               destination
> > root at core2duo:~#
> >
> >
> > tcpdump shows me that somehow the connection is refused through tcp
> > reset packets:
> >
> >
> > root at core2duo:~# tcpdump -i lo tcp
> > tcpdump: verbose output suppressed, use -v or -vv for full protocol
> decode
> > listening on lo, link-type EN10MB (Ethernet), capture size 96 bytes
> > 19:43:36.166844 IP localhost.50571 > localhost.49100: S
> > 3500391462:3500391462(0) win 32792 <mss 16396,sackOK,timestamp 230981
> > 0,nop,wscale 7>
> > 19:43:36.167084 IP localhost.49100 > localhost.50571: R 0:0(0) ack
> > 3500391463 win 0
> > 19:43:36.667645 IP localhost.50572 > localhost.49100: S
> > 3504550876:3504550876(0) win 32792 <mss 16396,sackOK,timestamp 231106
> > 0,nop,wscale 7>
> > 19:43:36.667661 IP localhost.49100 > localhost.50572: R 0:0(0) ack
> > 3504550877 win 0
> > 19:43:37.174907 IP localhost.50573 > localhost.49100: S
> > 3518693368:3518693368(0) win 32792 <mss 16396,sackOK,timestamp 231233
> > 0,nop,wscale 7>
> > 19:43:37.174923 IP localhost.49100 > localhost.50573: R 0:0(0) ack
> > 3518693369 win 0
> > 19:43:37.675554 IP localhost.50574 > localhost.49100: S
> > 3529403760:3529403760(0) win 32792 <mss 16396,sackOK,timestamp 231358
> > 0,nop,wscale 7>
> > 19:43:37.675569 IP localhost.49100 > localhost.50574: R 0:0(0) ack
> > 3529403761 win 0
> >
> > So there's no local app listening on that port.
> >
> > I also tried using other ports for the debugger, although the problem
> > persists.
> >
> > Any suggestion?
> >
> > It was working fine some hours ago. I've even rebooted my machine...
> >
> > thank you
> >
> >
> > --
> > Filipe David Manana,
> > fdmanana at ieee.org <mailto:fdmanana at ieee.org>
> > PGP key - http://pgp.mit.edu:11371/pks/lookup?op=get&search=0xC569452B
> > <http://pgp.mit.edu:11371/pks/lookup?op=get&search=0xC569452B>
> >
> > "Reasonable men adapt themselves to the world.
> > Unreasonable men adapt the world to themselves.
> > That's why all progress depends on unreasonable men."
> >
> > ------------------------------------------------------------------------
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>



-- 
Filipe David Manana,
fdmanana at ieee.org
PGP key - http://pgp.mit.edu:11371/pks/lookup?op=get&search=0xC569452B

"Reasonable men adapt themselves to the world.
Unreasonable men adapt the world to themselves.
That's why all progress depends on unreasonable men."
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090228/025b77cf/attachment.html 

From s.barnett-cormack at lancaster.ac.uk  Sat Feb 28 13:45:57 2009
From: s.barnett-cormack at lancaster.ac.uk (Sam Barnett-Cormack)
Date: Sat, 28 Feb 2009 21:45:57 +0000
Subject: [antlr-interest] Confusing, hopefully-final, problems
In-Reply-To: <49A97F73.5000303@lancaster.ac.uk>
References: <49A97F73.5000303@lancaster.ac.uk>
Message-ID: <49A9B095.1030909@lancaster.ac.uk>

Sam Barnett-Cormack wrote:
> Hi all
> 
> So, I solved the recursion issue (which had been complicated by me 
> failing to notice a '|' in the standard), and fixed a lot of intractable 
> issues using predicates (or backtracking, at least for now). However, 
> I'm still getting some errors/warnings which I can't for the life of me 
> figure out the reason for. I know what they mean, but they don't make 
> sense. The grammar is, of course, attached. 

Except, of course, it isn't... and I can't sent it from here. I'll send 
it out tomorrow in the hope that someone can help me.

Sam

From virtuoso.coders at gmail.com  Sat Feb 28 19:37:29 2009
From: virtuoso.coders at gmail.com (SSG JJV)
Date: Sat, 28 Feb 2009 21:37:29 -0600
Subject: [antlr-interest] Fwd:  Java Parser to analyze C++ language syntax
In-Reply-To: <26e9b8c20902281937n1b92e877q9f79a526175a36c3@mail.gmail.com>
References: <26e9b8c20902261734i223bebd3i409cb784048bb160@mail.gmail.com>
	<80a70730902261818w7d5265efg81276feb06392692@mail.gmail.com>
	<26e9b8c20902262006o628874ddn321b8460cda7ae1e@mail.gmail.com>
	<f14c01620902271032q1924dce2w32dcac03f810f69e@mail.gmail.com>
	<49A85AC5.90205@jazillian.com>
	<26e9b8c20902281937n1b92e877q9f79a526175a36c3@mail.gmail.com>
Message-ID: <26e9b8c20902281937y2037fce4wcb3cded342d71a8f@mail.gmail.com>

---------- Forwarded message ----------
From: SSG JJV <virtuoso.coders at gmail.com>
Date: Sat, Feb 28, 2009 at 9:37 PM
Subject: Re: [antlr-interest] Java Parser to analyze C++ language syntax
To: Andy Tripp <antlr at jazillian.com>


I am afraid, i could not find the parser in antlr. The one provided by Sun,
i could never get it to work.I found one parser on JavaCC, implemented in
Java. This seems to be the closest to my requirement. But that parser has
bugs which i need to address myself.

Thanks for the posts.

----


On Fri, Feb 27, 2009 at 3:27 PM, Andy Tripp <antlr at jazillian.com> wrote:

> Kaleb Pederson wrote:
>
>> On Thu, Feb 26, 2009 at 8:06 PM, SSG JJV <virtuoso.coders at gmail.com>
>> wrote:
>>
>>> Yes. But David's parser outputs C++ parser. I need a Java Parser to
>>> validate
>>> C++ language syntax.
>>> Thanks
>>>
>>
>> It looks as if LLVM now has capable and stable C++ support:
>>
>> LLVM includes "Front-ends for C and C++ based on the GCC 3.4 and 4.0.1
>> parsers. They support the ANSI-standard C and C++ languages to the
>> same degree that GCC supports them. Additionally, many GCC extensions
>> are supported" [1].
>>
>> I've followed some of their progress and architecture and I believe it
>> would be a good starting point.
>>
>
> But it looks like your parser needs to be written in C++ to use LLVM, no?
> And the wikipedia entry only mentions a front-end for parsing Java byte
> code,
> with no mention of parsing Java source code (other than saying one could
> be developed). Is there a Java source code frontend for LLVM in
> development?
>
> Andy
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090228/0c51123c/attachment.html 

From virtuoso.coders at gmail.com  Sat Feb 28 19:43:17 2009
From: virtuoso.coders at gmail.com (SSG JJV)
Date: Sat, 28 Feb 2009 21:43:17 -0600
Subject: [antlr-interest] C PreProcessor Errors
Message-ID: <26e9b8c20902281943me78518bre968e1cd68570d40@mail.gmail.com>

Hi,
I downloaded C Preprocessor posted by *Youngki KU* on antlr. But could not
get it to work.
On trying to generate the java file for Cpp.g, i ended up with lot of
warnings and generated Java file failed compilation.

warning(105): Cpp.g:290:5: no lexer rule corresponding to token: TEXT_END
warning(105): Cpp.g:78:5: no lexer rule corresponding to token: DEFINE
warning(105): Cpp.g:99:5: no lexer rule corresponding to token: IF
warning(105): Cpp.g:91:5: no lexer rule corresponding to token: EXEC_MACRO
warning(105): Cpp.g:74:5: no lexer rule corresponding to token:
INCLUDE_EXPAND
warning(105): Cpp.g:81:6: no lexer rule corresponding to token: DEFINE
warning(105): Cpp.g:110:5: no lexer rule corresponding to token: ERROR
warning(105): Cpp.g:79:5: no lexer rule corresponding to token: DEFINE
warning(105): Cpp.g:100:5: no lexer rule corresponding to token: ELIF
warning(105): Cpp.g:95:5: no lexer rule corresponding to token: UNDEF
warning(105): Cpp.g:100:81: no lexer rule corresponding to token: ENDIF

I am using antlr works jar in class path.
ANTLR Parser Generator  Version 3.0 (May 17, 2007)  1989-2007

Am is missing something?

Also the files mentioned in makefile( macro.g, MacroTree.g ) are missing in
the tar.

Is this the correct tar i am using?

Please help.

--------
Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090228/d8cfed3d/attachment.html 

From virtuoso.coders at gmail.com  Sat Feb 28 21:01:10 2009
From: virtuoso.coders at gmail.com (SSG JJV)
Date: Sat, 28 Feb 2009 23:01:10 -0600
Subject: [antlr-interest] C PreProcessor Errors
In-Reply-To: <26e9b8c20902281943me78518bre968e1cd68570d40@mail.gmail.com>
References: <26e9b8c20902281943me78518bre968e1cd68570d40@mail.gmail.com>
Message-ID: <26e9b8c20902282101w647d8dd8g172d13c6e6fa61c0@mail.gmail.com>

Please ignore my mail,..., in spite of the WARNINGs from ANTLR, i was able
to compile the Java files using antlr-3.1.1.jar. However i had to change the
all occurrences of CppTreeTreeParser with CppTree for successful
compilation.

Thanks

On Sat, Feb 28, 2009 at 9:43 PM, SSG JJV <virtuoso.coders at gmail.com> wrote:

> Hi,
> I downloaded C Preprocessor posted by *Youngki KU* on antlr. But could not
> get it to work.
> On trying to generate the java file for Cpp.g, i ended up with lot of
> warnings and generated Java file failed compilation.
>
> warning(105): Cpp.g:290:5: no lexer rule corresponding to token: TEXT_END
> warning(105): Cpp.g:78:5: no lexer rule corresponding to token: DEFINE
> warning(105): Cpp.g:99:5: no lexer rule corresponding to token: IF
> warning(105): Cpp.g:91:5: no lexer rule corresponding to token: EXEC_MACRO
> warning(105): Cpp.g:74:5: no lexer rule corresponding to token:
> INCLUDE_EXPAND
> warning(105): Cpp.g:81:6: no lexer rule corresponding to token: DEFINE
> warning(105): Cpp.g:110:5: no lexer rule corresponding to token: ERROR
> warning(105): Cpp.g:79:5: no lexer rule corresponding to token: DEFINE
> warning(105): Cpp.g:100:5: no lexer rule corresponding to token: ELIF
> warning(105): Cpp.g:95:5: no lexer rule corresponding to token: UNDEF
> warning(105): Cpp.g:100:81: no lexer rule corresponding to token: ENDIF
>
> I am using antlr works jar in class path.
> ANTLR Parser Generator  Version 3.0 (May 17, 2007)  1989-2007
>
> Am is missing something?
>
> Also the files mentioned in makefile( macro.g, MacroTree.g ) are missing in
> the tar.
>
> Is this the correct tar i am using?
>
> Please help.
>
> --------
> Thanks
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090228/f4727701/attachment.html 

From virtuoso.coders at gmail.com  Sat Feb 28 21:30:02 2009
From: virtuoso.coders at gmail.com (SSG JJV)
Date: Sat, 28 Feb 2009 23:30:02 -0600
Subject: [antlr-interest] Java Parser to analyze C++ language syntax
In-Reply-To: <26e9b8c20902281937n1b92e877q9f79a526175a36c3@mail.gmail.com>
References: <26e9b8c20902261734i223bebd3i409cb784048bb160@mail.gmail.com>
	<80a70730902261818w7d5265efg81276feb06392692@mail.gmail.com>
	<26e9b8c20902262006o628874ddn321b8460cda7ae1e@mail.gmail.com>
	<f14c01620902271032q1924dce2w32dcac03f810f69e@mail.gmail.com>
	<49A85AC5.90205@jazillian.com>
	<26e9b8c20902281937n1b92e877q9f79a526175a36c3@mail.gmail.com>
Message-ID: <26e9b8c20902282130q6fd9b8cdg80df6806553e927c@mail.gmail.com>

Is there a way that i can download all the source files in one short for Sun
C/C++ ANTLR parser files?
I want to download complete "src" folder under
http://hg.netbeans.org/main/file/234830caa1af/cnd.modelimpl/


Thanks,

On Sat, Feb 28, 2009 at 9:37 PM, SSG JJV <virtuoso.coders at gmail.com> wrote:

> I am afraid, i could not find the parser in antlr. The one provided by Sun,
> i could never get it to work.I found one parser on JavaCC, implemented in
> Java. This seems to be the closest to my requirement. But that parser has
> bugs which i need to address myself.
>
> Thanks for the posts.
>
> ----
>
>
> On Fri, Feb 27, 2009 at 3:27 PM, Andy Tripp <antlr at jazillian.com> wrote:
>
>> Kaleb Pederson wrote:
>>
>>> On Thu, Feb 26, 2009 at 8:06 PM, SSG JJV <virtuoso.coders at gmail.com>
>>> wrote:
>>>
>>>> Yes. But David's parser outputs C++ parser. I need a Java Parser to
>>>> validate
>>>> C++ language syntax.
>>>> Thanks
>>>>
>>>
>>> It looks as if LLVM now has capable and stable C++ support:
>>>
>>> LLVM includes "Front-ends for C and C++ based on the GCC 3.4 and 4.0.1
>>> parsers. They support the ANSI-standard C and C++ languages to the
>>> same degree that GCC supports them. Additionally, many GCC extensions
>>> are supported" [1].
>>>
>>> I've followed some of their progress and architecture and I believe it
>>> would be a good starting point.
>>>
>>
>> But it looks like your parser needs to be written in C++ to use LLVM, no?
>> And the wikipedia entry only mentions a front-end for parsing Java byte
>> code,
>> with no mention of parsing Java source code (other than saying one could
>> be developed). Is there a Java source code frontend for LLVM in
>> development?
>>
>> Andy
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090228/1f5e93a4/attachment.html 

From laurent.caillette at gmail.com  Sat Feb 28 22:04:39 2009
From: laurent.caillette at gmail.com (Laurent Caillette)
Date: Sun, 1 Mar 2009 07:04:39 +0100
Subject: [antlr-interest] Bug in ANTLR-3.1.2 with tree grammar wildcard
	list label x+= ?
In-Reply-To: <54F00E33-B1C6-40DD-938E-A17B5F558F3E@cs.usfca.edu>
References: <3b7c64070902271607q4d0ef357ic641eb637466ebf6@mail.gmail.com>
	<54F00E33-B1C6-40DD-938E-A17B5F558F3E@cs.usfca.edu>
Message-ID: <3b7c64070902282204u1240056dl62cf56a529d0c4d9@mail.gmail.com>

Hi Ter,

I've seen the Jira issue. It doesn't describe what I've found. My
grammar is OK with ANTLR-3.1.1 and it breaks with ANTLR-3.1.2. Sorry
if I was unclear the first time.

This should be reproduceable with following grammar Bug.g:

<<<<<<<<<<

grammar Bug ;

options { output = AST ; }

tokens {
  PART ;
}

part
  : (   p += levelIntroducer
      | p += cellRowSequence
    )
    EOF
    -> ^( PART $p+ )
  ;

levelIntroducer : 'L' ;
cellRowSequence : 'C' ;

>>>>>>>>>>

I try to start the debugger from ANTLRWorks-1.2.3. As it compiles the
Java code I get this:

[06:39:46] Checking Grammar...
[06:39:57] /Users/Laurent/Novelang/antlrworks/BugParser.java:142:
incompatible types
[06:39:57] found   : BugParser.levelIntroducer_return
[06:39:57] required: BugParser.cellRowSequence_return
[06:39:57]                     p=levelIntroducer();
[06:39:57]                                      ^
[06:39:57] Note: /Users/Laurent/Novelang/antlrworks/BugParser.java
uses unchecked or unsafe operations.
[06:39:57] Note: Recompile with -Xlint:unchecked for details.
[06:39:57] 1 error
[06:40:45] /Users/Laurent/Novelang/antlrworks/BugParser.java:142:
incompatible types
[06:40:45] found   : BugParser.levelIntroducer_return
[06:40:45] required: BugParser.cellRowSequence_return
[06:40:45]                     p=levelIntroducer();
[06:40:45]                                      ^
[06:40:45] Note: /Users/Laurent/Novelang/antlrworks/BugParser.java
uses unchecked or unsafe operations.
[06:40:45] Note: Recompile with -Xlint:unchecked for details.
[06:40:45] 1 error

I had a look at the Java code generated by ANTLR-3.1.1 where p seems
declared as RuleReturnScope. With ANTLR-3.1.2, p has the type of the
last rule (BugParser.cellRowSequence_return).


Thanks for all the hard work,

c.


On Sat, Feb 28, 2009 at 5:58 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
> hi. should work if output=AST (I added a comment to existing request to be
> sure):
>
> http://www.antlr.org/jira/browse/ANTLR-381
>
> if not output=AST, it doesn't know what to put in list. ?the internal return
> object? one of the return values?
>
> Ter
> On Feb 27, 2009, at 4:07 PM, Laurent Caillette wrote:
>
>> ?( ? p += levelIntroducer
>> ? ? | p += paragraph
>> ? ? | p += blockQuote
>> ? ? | p += literal
>> ? ? | p += bigDashedListItem
>> ? ? | p += cellRowSequence
>> ? )
>
>

From g.r.vansickle at att.net  Sat Feb 28 22:56:55 2009
From: g.r.vansickle at att.net (Gary R. Van Sickle)
Date: Sun, 1 Mar 2009 00:56:55 -0600
Subject: [antlr-interest] ^(TOKEN) vs. TOKEN
Message-ID: <16E8B7233C3A49ECB8412A7F4C3F726E@DFW5RB41>

Hi guys,

Can somebody explain to me why this is ok in a parser grammar:

pointer
	: '*' -> ^(POINTER)
	;

But this is an error in a tree grammar?:

pointer
	: ^(POINTER)
	;

?  The following appears to be the correct way to do this, and does in fact
appear to work:

pointer
	: POINTER
	;

But it's not clear to me why this should be so.  Shouldn't both these cases
share the same syntax, either both ^(POINTER) or both POINTER?

Thanks,

-- 
Gary R. Van Sickle


