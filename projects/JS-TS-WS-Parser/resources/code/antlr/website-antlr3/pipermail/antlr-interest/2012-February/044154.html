<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Newbie with a simple problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Newbie%20with%20a%20simple%20problem&In-Reply-To=%3CCAPU76L-nyvLO1A%2BJ28%3Dj1SM%2BBN71OimeZe-uMDjQgjrdhWvndg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="044153.html">
   <LINK REL="Next"  HREF="044155.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Newbie with a simple problem</H1>
    <B>Tom Hicks</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Newbie%20with%20a%20simple%20problem&In-Reply-To=%3CCAPU76L-nyvLO1A%2BJ28%3Dj1SM%2BBN71OimeZe-uMDjQgjrdhWvndg%40mail.gmail.com%3E"
       TITLE="[antlr-interest] Newbie with a simple problem">headhunter3 at gmail.com
       </A><BR>
    <I>Mon Feb 27 10:37:45 PST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="044153.html">[antlr-interest] C# target: String Templates and translation bug?
</A></li>
        <LI>Next message: <A HREF="044155.html">[antlr-interest] Newbie with a simple problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44154">[ date ]</a>
              <a href="thread.html#44154">[ thread ]</a>
              <a href="subject.html#44154">[ subject ]</a>
              <a href="author.html#44154">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I need to implement a fairly simple scripting language for a project
I'm working on and I'm trying to use antlr to help.

I'm not sure if antlr is the right tool for this so I'm going to start
by explaining how I'm trying to use the script.
Each line is either whitespace, a directive, or an action.
Whitespace is only for readability and when I load the script should be ignored.
Actions are things like show a message box, play a bgm, or change the
current character and background images.  There are more but they are
all implemented the same way.
Directives are used to set options on groups of actions.  Each action
has a play condition so if I put a message box action after an &quot;#if
HasHadConversation dlg_darren_photos&quot; directive and before the
corresponding &quot;#endif&quot; directive, then the action should have it's
playcondition set to &quot;HasHadConversation dlg_darren_photos&quot; Which is
another data model object.
I can explain that in more detail if necessarry, but I don't want to
make this too long.

When I load the script file I want to generate a list of the
appropriate actions.  I have this working except for the directives
just using regular expressions, unfortunately the logical expressions
in the directives can't be matched to regular expressions.
So I started looking at parser generators but everything else I've
found expects that I'm familiar with bison/lex and I'm not.  Antlr
looks far more friendly and supports C# which is what I need.

I tried writing a grammar for the script other than an extremely
trivial example I'm completely stumped.

When I use the following grammar with the input &quot;_SC play test 01&quot;
(without the quotes). I get a NoViableAltException.  &quot;_SC stop&quot; works
though
grammar PBScript;
options {
output = AST;
}

line	:	'_SC stop'
	|	'_SC play ' ASSETNAME
	;
ASSETNAME
	:	(~('\n'|'\r'))+ ;

If instead I use this grammar it works but captures the space as part
of ASSETNAME
grammar PBScript;
options {
output = AST;
}

line	:	'_SC stop'
	|	'_SC play' ASSETNAME
	;
ASSETNAME
	:	' '(~('\n'|'\r'))+ ;

~Tom
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="044153.html">[antlr-interest] C# target: String Templates and translation bug?
</A></li>
	<LI>Next message: <A HREF="044155.html">[antlr-interest] Newbie with a simple problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44154">[ date ]</a>
              <a href="thread.html#44154">[ thread ]</a>
              <a href="subject.html#44154">[ subject ]</a>
              <a href="author.html#44154">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
