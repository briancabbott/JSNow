<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Preserving Whitespace
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Preserving%20Whitespace&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001410.html">
   <LINK REL="Next"  HREF="001407.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Preserving Whitespace</H1>
    <B>mzukowski at yci.com</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Preserving%20Whitespace&In-Reply-To="
       TITLE="[antlr-interest] Preserving Whitespace">mzukowski at yci.com
       </A><BR>
    <I>Mon Jun 17 06:50:21 PDT 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="001410.html">[antlr-interest] Lexer States, HTML and &lt;SCRIPT&gt; tag
</A></li>
        <LI>Next message: <A HREF="001407.html">[antlr-interest] Aspects and ANTLR (was: Re: nice threads)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1405">[ date ]</a>
              <a href="thread.html#1405">[ thread ]</a>
              <a href="subject.html#1405">[ subject ]</a>
              <a href="author.html#1405">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>- imaginary tokens added during parse (as you mentioned)
</I>
What I tend to do is create my fragments of code out of text that I pass to
the parser to get a little AST to insert.  That way I can set the source
file to be a mythical filename that I can track back to that pass.  This
also gives me commas and semicolons in the original source that can be saved
and known when printing out.  Should be easy to make it inherit the current
indentation as well.

&gt;<i> It would be nice if the root of the return tree would carry 
</I>&gt;<i> information
</I>&gt;<i> about the range of the input covered by itself *and* its 
</I>&gt;<i> children. This way
</I>&gt;<i> it will be easy to make the source reflect the deletion or 
</I>&gt;<i> movement of a
</I>&gt;<i> subtree in AST.
</I>
This would be easily accomplished by traversing the tree after it is all
parsed.  That's a great idea.
 
&gt;<i> When source text is not available, I think the solution is to keep the
</I>&gt;<i> tokens processed by the parser in a linked list (what is now doing
</I>&gt;<i> TokenStreamHiddenTokenFilter, but keeping the tokens ignored 
</I>&gt;<i> in parser as
</I>&gt;<i> well) and construct the AST over this list. Hidden tokens 
</I>&gt;<i> between two rules
</I>&gt;<i> should be appended in some way to the root of the return tree of the
</I>&gt;<i> previous rule, so that comments and spaces following a subtree can be
</I>&gt;<i> recovered, even if the subtree is completely transformed.
</I>
I think it'd be easier to save the source text yourself, but this should
work too.
 
&gt;<i> This way no information is lost, and one can use the AST as a 
</I>&gt;<i> convenient
</I>&gt;<i> structure for (possibly complex) transformations, and the 
</I>&gt;<i> token list for
</I>&gt;<i> printing back the result.
</I>
Let us know how this works for you.

Monty

 

Your use of Yahoo! Groups is subject to <A HREF="http://docs.yahoo.com/info/terms/">http://docs.yahoo.com/info/terms/</A> 

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001410.html">[antlr-interest] Lexer States, HTML and &lt;SCRIPT&gt; tag
</A></li>
	<LI>Next message: <A HREF="001407.html">[antlr-interest] Aspects and ANTLR (was: Re: nice threads)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1405">[ date ]</a>
              <a href="thread.html#1405">[ thread ]</a>
              <a href="subject.html#1405">[ subject ]</a>
              <a href="author.html#1405">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
