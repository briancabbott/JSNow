<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Dynamic scope for lexer rule
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Dynamic%20scope%20for%20lexer%20rule&In-Reply-To=%3C4BFAFBFC.7070705%40junkwallah.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="038773.html">
   <LINK REL="Next"  HREF="038798.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Dynamic scope for lexer rule</H1>
    <B>Junkman</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Dynamic%20scope%20for%20lexer%20rule&In-Reply-To=%3C4BFAFBFC.7070705%40junkwallah.org%3E"
       TITLE="[antlr-interest] Dynamic scope for lexer rule">j at junkwallah.org
       </A><BR>
    <I>Mon May 24 15:21:48 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="038773.html">[antlr-interest] Dynamic scope for lexer rule
</A></li>
        <LI>Next message: <A HREF="038798.html">[antlr-interest] Dynamic scope for lexer rule
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38797">[ date ]</a>
              <a href="thread.html#38797">[ thread ]</a>
              <a href="subject.html#38797">[ subject ]</a>
              <a href="author.html#38797">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Greetings,

Let me raise the question again.  Sorry that this is becoming something
of pattern for me.

Adding a dynamically scoped attribute to a lexer rule seems to generate
the error message (shown at the bottom as part of my previous post on
this subject) when generating recognizers.

The grammar is as follows:
---------------------

grammar Junkscript;



NEWLINE	
@init { $channel=HIDDEN; }
	:	'\n'
	;
	

COMMENT
/*
scope {
	String dynamic;
	}
@init {
	$COMMENT::dynamic = null;
	}
	*/
	:	'#' ( options {greedy=false;} : (~ NEWLINE)* ) ;


stmt	:	
	( . )+
	;
	


------------------------

The simple grammar works fine, but with the &quot;scope&quot; section (along with
init action) under COMMENT uncommented, Antlr generates the error.

Are dynamically scoped attributes allowed for lexer rules?   If so, what
is the error in the grammar above?

Thanks for any assistance.

Junkman

Junkman wrote:
&gt;<i> Greetings,
</I>&gt;<i> 
</I>&gt;<i> I've added an attribute with dynamic scoping to a lexer rule, and when
</I>&gt;<i> generating code, I'm encountering an &quot;internal error&quot;.  Listed below is
</I>&gt;<i> partial call stack reported:
</I>&gt;<i> 
</I>&gt;<i> error(10): internal error: Junkscript.g : java.lang.NullPointerException
</I>&gt;<i> 	org.antlr.grammar.v2.DefineGrammarItemsWalker.ruleScopeSpec(DefineGrammarItemsWalker.java:1050)
</I>&gt;<i> 	at
</I>&gt;<i> org.antlr.grammar.v2.DefineGrammarItemsWalker.rule(DefineGrammarItemsWalker.java:891)
</I>&gt;<i> 	at
</I>&gt;<i> org.antlr.grammar.v2.DefineGrammarItemsWalker.rules(DefineGrammarItemsWalker.java:576)
</I>&gt;<i> 	at
</I>&gt;<i> org.antlr.grammar.v2.DefineGrammarItemsWalker.grammarSpec(DefineGrammarItemsWalker.java:361)
</I>&gt;<i> 	at
</I>&gt;<i> org.antlr.grammar.v2.DefineGrammarItemsWalker.grammar(DefineGrammarItemsWalker.java:193)
</I>&gt;<i> 	at org.antlr.tool.Grammar.defineGrammarSymbols(Grammar.java:702)
</I>&gt;<i> 	at
</I>&gt;<i> org.antlr.tool.CompositeGrammar.defineGrammarSymbols(CompositeGrammar.java:351)
</I>&gt;<i> ...
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Is dynamic scoping allowed for lexer rule attributes?
</I>&gt;<i> 
</I>&gt;<i> Thanks for any info.
</I>&gt;<i> 
</I>&gt;<i> J
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="038773.html">[antlr-interest] Dynamic scope for lexer rule
</A></li>
	<LI>Next message: <A HREF="038798.html">[antlr-interest] Dynamic scope for lexer rule
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38797">[ date ]</a>
              <a href="thread.html#38797">[ thread ]</a>
              <a href="subject.html#38797">[ subject ]</a>
              <a href="author.html#38797">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
