<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Re: Line numbers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Re%3A%20Line%20numbers&In-Reply-To=b0hkf8%2B2eno%40eGroups.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002675.html">
   <LINK REL="Next"  HREF="002671.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Re: Line numbers</H1>
    <B>Terence Parr</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Re%3A%20Line%20numbers&In-Reply-To=b0hkf8%2B2eno%40eGroups.com"
       TITLE="[antlr-interest] Re: Line numbers">parrt at jguru.com
       </A><BR>
    <I>Mon Jan 20 12:13:34 PST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="002675.html">[antlr-interest] Re: Line numbers
</A></li>
        <LI>Next message: <A HREF="002671.html">[antlr-interest] I cannot compile antlr-2.7.2rc2  cpp dll
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2676">[ date ]</a>
              <a href="thread.html#2676">[ thread ]</a>
              <a href="subject.html#2676">[ subject ]</a>
              <a href="author.html#2676">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Monday, January 20, 2003, at 11:59 AM, micheal_jor 
&lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">open.zone at virgin.net</A>&gt; wrote:

&gt;<i>
</I>&gt;&gt;<i> Hi there.  I believe there was a quick thread previously where I
</I>&gt;&gt;<i> decided to add getToken() method to the AST interface and then
</I>&gt;<i> modify
</I>&gt;&gt;<i> the AST factory method create(Token t) to just store the token not
</I>&gt;<i> pull
</I>&gt;&gt;<i> out the text/type and store it.  This way the tree will have a ref
</I>&gt;<i> to
</I>&gt;&gt;<i> the token and you can ask (and my tree parsers can ask) for the
</I>&gt;<i> line
</I>&gt;&gt;<i> number.
</I>&gt;<i>
</I>&gt;<i> -1
</I>&gt;<i>
</I>&gt;<i> With large files, the AST consumes lots of memory. More memory than
</I>&gt;<i> I'd like usually. With lots of Token objects hanging around
</I>&gt;<i> indefinitely, the problem would be compounded.
</I>
This was the original reason I didn't just have the AST point at the 
token ;)

&gt;<i>
</I>&gt;<i> My humble alternatives:
</I>&gt;<i>
</I>&gt;<i> 1. Supply a new xxxAST class with ANTLR that overrides initialize
</I>&gt;<i> (Token) to copy the line/column/file values from the Token object.
</I>&gt;<i>
</I>&gt;<i> 2. For those who have no memory issues or prefer having the Token
</I>&gt;<i> objects around - Supply another new xxxAST class with ANTLR that has
</I>&gt;<i> getToken() and overrides initialize(Token) to do what you described.
</I>
Problem here is that they all use the AST interface...i'll have to add 
that method (can be dummy for old classes).

Yep, these kinds of things should work.  I'd like to see how i can 
integrate in by default though so that the tree parsers can provide 
meaningful errors.  Right now they don't ;)

&gt;<i>
</I>&gt;&gt;<i> I would do this yourself until all ANTLR does it. :)
</I>&gt;<i>
</I>&gt;<i> ANTLR already makes it easy to do ;-)
</I>
:<i>)
</I>
Ter
--
Co-founder, <A HREF="http://www.jguru.com">http://www.jguru.com</A>
Creator, ANTLR Parser Generator: <A HREF="http://www.antlr.org">http://www.antlr.org</A>
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to <A HREF="http://docs.yahoo.com/info/terms/">http://docs.yahoo.com/info/terms/</A> 

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002675.html">[antlr-interest] Re: Line numbers
</A></li>
	<LI>Next message: <A HREF="002671.html">[antlr-interest] I cannot compile antlr-2.7.2rc2  cpp dll
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2676">[ date ]</a>
              <a href="thread.html#2676">[ thread ]</a>
              <a href="subject.html#2676">[ subject ]</a>
              <a href="author.html#2676">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
