<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Why don't parsers support character  ranges?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Why%20don%27t%20parsers%20support%20character%20%20ranges%3F&In-Reply-To=%3C20080423081703.C962611ED13%40www.antlr.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027986.html">
   <LINK REL="Next"  HREF="027990.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Why don't parsers support character  ranges?</H1>
    <B>Gavin Lambert</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Why%20don%27t%20parsers%20support%20character%20%20ranges%3F&In-Reply-To=%3C20080423081703.C962611ED13%40www.antlr.org%3E"
       TITLE="[antlr-interest] Why don't parsers support character  ranges?">antlr at mirality.co.nz
       </A><BR>
    <I>Wed Apr 23 01:16:49 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="027986.html">[antlr-interest] Why don't parsers support character ranges?
</A></li>
        <LI>Next message: <A HREF="027990.html">[antlr-interest] Why don't parsers support character ranges?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27989">[ date ]</a>
              <a href="thread.html#27989">[ thread ]</a>
              <a href="subject.html#27989">[ subject ]</a>
              <a href="author.html#27989">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>At 14:16 23/04/2008, Hannes Schmidt wrote:
 &gt;Why can't I use ranges in parsers?

You can, they just don't mean what you think they mean.

 &gt;Why doesn't ANTLR emit a warning when it ignores ranges in 
grammar
 &gt;rules?

Because it's not ignoring them.  When you say &quot;'a'..'z'&quot; in a 
parser rule, the parser first automatically creates tokens for the 
quoted terms (because it's a combined grammar; if it were a 
standalone grammar you'd just get an error).  Now the rule says 
something like &quot;T16..T17&quot;, which is a range of tokens.  If you're 
lucky, this will be the first time it's seen those tokens and 
they'll have contiguous values, so your range basically just means 
those two tokens and nothing else.  If you're not lucky, there may 
be other tokens in between those two, so you'll be referring to 
those as well.  Either way, it's probably not what you thought you 
were saying.

Given that there currently isn't any official way of controlling 
the token ids generated by rules, ranges in the parser probably 
*should* generate warnings, since (while valid) they're not 
especially useful.

(I also dislike the way that quoted constants are permitted in 
parser rules in the first place [since I think it leads to just 
this sort of confusion], but that's a different issue.)

 &gt;How can I emulate the missing range feature without obfuscating
 &gt;my grammar too much? Semantic predicates?

Probably.  Or move whatever construct you're trying to match that 
includes ranges into the lexer as a single token.

 &gt;Now let me put my tinfoil hat on and theorize a little bit: I
 &gt;think that the root cause of  my confusion is ANTLR's 
distinction
 &gt;between lexer and parser. I think this distinction is purely
 &gt;historical and ANTLR might be better of without it. When writing 

 &gt;grammars, I often find myself in situations where I know that
 &gt;certain lexer rules make sense in a certain parser context only
 &gt;but that context is not available to the lexer because the state 

 &gt;that defines it is maintained in the parser.

At times I agree with you, but it's usually not all that hard to 
get a decent set of lexer rules.  The tactic I usually follow is 
to write the lexer rules *first*, and unit test them by themselves 
to ensure the token stream is being generated as I expect.  *Then* 
I start writing parser rules to either transform the token stream 
into an AST or to directly do something more interesting.  If you 
think of it in layers then it's not hard to keep it all straight.

</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027986.html">[antlr-interest] Why don't parsers support character ranges?
</A></li>
	<LI>Next message: <A HREF="027990.html">[antlr-interest] Why don't parsers support character ranges?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27989">[ date ]</a>
              <a href="thread.html#27989">[ thread ]</a>
              <a href="subject.html#27989">[ subject ]</a>
              <a href="author.html#27989">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
