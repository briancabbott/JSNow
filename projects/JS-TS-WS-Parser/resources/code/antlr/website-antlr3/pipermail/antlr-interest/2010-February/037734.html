<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] rewrite rule element cardinality
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20rewrite%20rule%20element%20cardinality&In-Reply-To=%3C19-9-0d87e9e3-05cf-4bdc-a48b-f15d5d20ba2d%40zenbe.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037737.html">
   <LINK REL="Next"  HREF="037738.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] rewrite rule element cardinality</H1>
    <B>joestelmach at gmail.com</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20rewrite%20rule%20element%20cardinality&In-Reply-To=%3C19-9-0d87e9e3-05cf-4bdc-a48b-f15d5d20ba2d%40zenbe.com%3E"
       TITLE="[antlr-interest] rewrite rule element cardinality">joestelmach at gmail.com
       </A><BR>
    <I>Tue Feb 23 11:40:27 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="037737.html">[antlr-interest] ANTLR IDE 2.0.0: Syntax question on '.'
</A></li>
        <LI>Next message: <A HREF="037738.html">[antlr-interest] rewrite rule element cardinality
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37734">[ date ]</a>
              <a href="thread.html#37734">[ thread ]</a>
              <a href="subject.html#37734">[ subject ]</a>
              <a href="author.html#37734">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm having some trouble understanding the behavior of AST rewrite rule element cardinality in certain cases. Consider the following grammar:

grammar Test;

options {
output=AST;
}

tokens {
GROUP;
FOO;
BAR;
BAZ;
}

search 
:<i> c (SPACE option)+ -&gt; ^(GROUP c option)+
</I>;

c
:<i> C -&gt; FOO BAR
</I>;

option 
:<i> (A | B) -&gt; BAZ
</I>;

A : 'a';
B : 'b';
C : 'c';
SPACE : ' ';

If we feed the parser the input string: &quot;c a b a&quot;, I'm expecting to see the following AST:

(GROUP FOO BAR BAZ) (GROUP FOO BAR BAZ) (GROUP FOO BAR BAZ)

but instead, I get the following:

(GROUP FOO BAR BAZ) (GROUP FOO BAR BAZ BAZ) (GROUP FOO BAR BAZ BAZ)

Notice the extra BAZ in each child after the first? Can someone explain why this is happening? I'm using ANTLR 3.2 with the java target.

Thanks

- Joe
</PRE>





























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037737.html">[antlr-interest] ANTLR IDE 2.0.0: Syntax question on '.'
</A></li>
	<LI>Next message: <A HREF="037738.html">[antlr-interest] rewrite rule element cardinality
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37734">[ date ]</a>
              <a href="thread.html#37734">[ thread ]</a>
              <a href="subject.html#37734">[ subject ]</a>
              <a href="author.html#37734">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
