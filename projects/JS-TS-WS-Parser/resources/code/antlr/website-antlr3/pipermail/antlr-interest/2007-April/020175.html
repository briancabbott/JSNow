<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Lexer lookahead overoptimizes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Lexer%20lookahead%20overoptimizes&In-Reply-To=%3CEBCBE1FB-C447-4E4A-AB34-8EBE3C3DFD1F%40cs.usfca.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020174.html">
   <LINK REL="Next"  HREF="020177.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Lexer lookahead overoptimizes</H1>
    <B>Terence Parr</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Lexer%20lookahead%20overoptimizes&In-Reply-To=%3CEBCBE1FB-C447-4E4A-AB34-8EBE3C3DFD1F%40cs.usfca.edu%3E"
       TITLE="[antlr-interest] Lexer lookahead overoptimizes">parrt at cs.usfca.edu
       </A><BR>
    <I>Thu Apr 12 15:28:42 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="020174.html">[antlr-interest] Lexer lookahead overoptimizes
</A></li>
        <LI>Next message: <A HREF="020177.html">[antlr-interest] Lexer lookahead overoptimizes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20175">[ date ]</a>
              <a href="thread.html#20175">[ thread ]</a>
              <a href="subject.html#20175">[ subject ]</a>
              <a href="author.html#20175">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Apr 12, 2007, at 3:26 PM, shmuel siegel wrote:

&gt;<i> Gavin Lambert wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> (I don't know whether ANTLR is actually working this way or not,  
</I>&gt;&gt;<i> of course -- if it still doesn't work when you haven't specified  
</I>&gt;&gt;<i> any k= options then I would consider it a bug.)
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks for the confirmation of my sanity. But I wouldn't call it a  
</I>&gt;<i> bug when it is doing exactly what Terence expects. It is more of a  
</I>&gt;<i> &quot;feature&quot; that you and I disagree with. Anyway, try the following  
</I>&gt;<i> grammar. It demonstrates that it is not honoring my desire that  
</I>&gt;<i> ('\u00d7' '\u0081')? is optional when '\u00d7' matches.
</I>&gt;<i>
</I>&gt;<i> Terence, this has nothing to do with greedy/ not greedy. I would  
</I>&gt;<i> not expect SHIN to throw an exception on the sequence '\u00d7'  
</I>&gt;<i> '\u00a9' '\u00d7' '\u0035', although mTokens should throw a  
</I>&gt;<i> noViableAltException since it doesn't know what to do with '\u00d7'  
</I>&gt;<i> '\u0035'.
</I>
Well, ANTLR cannot know how much lookahead to use when you cannot see  
past the end of the token. consequently it merely sees the first  
symbol as the predictor.  Without information to the contrary, this  
is the only reasonable decision antlr can make. It is doing exactly  
as I intended it to do even if it is not what you want. ;) Did you  
try the k=2? on that subrule?  Actually that probably won't work.   
ANTLR will optimize it down. You will have use a syntax predicate on  
that last alternative I would say to indicate the context in which  
antlr should match the final optional subrule.

Ter
</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020174.html">[antlr-interest] Lexer lookahead overoptimizes
</A></li>
	<LI>Next message: <A HREF="020177.html">[antlr-interest] Lexer lookahead overoptimizes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20175">[ date ]</a>
              <a href="thread.html#20175">[ thread ]</a>
              <a href="subject.html#20175">[ subject ]</a>
              <a href="author.html#20175">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
