<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Unresolved externals building C executable
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Unresolved%20externals%20building%20C%20executable&In-Reply-To=%3C1215801453.8615.185.camel%40jimi%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029107.html">
   <LINK REL="Next"  HREF="029095.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Unresolved externals building C executable</H1>
    <B>Jim Idle</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Unresolved%20externals%20building%20C%20executable&In-Reply-To=%3C1215801453.8615.185.camel%40jimi%3E"
       TITLE="[antlr-interest] Unresolved externals building C executable">jimi at temporal-wave.com
       </A><BR>
    <I>Fri Jul 11 11:37:33 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="029107.html">[antlr-interest] Unresolved externals building C executable
</A></li>
        <LI>Next message: <A HREF="029095.html">[antlr-interest] Converting Tree operands ('^' '!') to rewrite	rules ( '-&gt; ^(...)')
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29109">[ date ]</a>
              <a href="thread.html#29109">[ thread ]</a>
              <a href="subject.html#29109">[ subject ]</a>
              <a href="author.html#29109">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, 2008-07-11 at 18:35 +0100, Artemus Ward wrote:

&gt;<i> 2008/7/11 Jim Idle &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">jimi at temporal-wave.com</A>&gt;:
</I>&gt;<i> &gt; On Fri, 2008-07-11 at 22:08 +1200, Gavin Lambert wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; At 21:37 11/07/2008, Artemus Ward wrote:
</I>&gt;<i> &gt;  &gt;If I don't use /NODEFAULTLIB:MSVCRT then I get these errors
</I>&gt;<i> &gt;  &gt;instead:
</I>&gt;<i> &gt; [...]
</I>&gt;<i> &gt;  &gt;MSVCRT.lib(MSVCR90.dll) : error LNK2005: _free already defined
</I>&gt;<i> &gt; in
</I>&gt;<i> &gt;  &gt;LIBCMT.lib(free.obj)
</I>&gt;<i> &gt;  &gt;MSVCRT.lib(MSVCR90.dll) : error LNK2005: _calloc already defined
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;  &gt;in LIBCMT.lib(calloc.obj)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Which means that you've probably set the ANTLR library to use the
</I>&gt;<i> &gt; CRT DLL and the application to use the CRT statically.  They must
</I>&gt;<i> &gt; agree with each other exactly if you're going to statically link
</I>&gt;<i> &gt; them.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; There really is not any reason to use the static versions of the libraries -
</I>&gt;<i> &gt; you should abandon your current MS project and create a new one. This time
</I>&gt;<i> &gt; don't change the default settings until you know what they all mean.
</I>&gt;<i> 
</I>&gt;<i> I didn't start changing them off until the MS compiler and linker
</I>&gt;<i> started displaying messages suggesting that was the thing to do.
</I>&gt;<i> Clearly one could spend a long time reading the copious documentation,
</I>&gt;<i> but one could also seek the advice of those who've done it already.
</I>&gt;<i> 
</I>&gt;<i> I shall do as you suggest, although that means I now have to go back
</I>&gt;<i> and figure out why I was able to compile the static libraries
</I>&gt;<i> successfully but the DLL is somehow corrupt.  I didn't knowingly mess
</I>&gt;<i> with any flags when I built it.
</I>

It is unfortunately, all too easy to do. If you don't want to start
again with the project, then the easiest thing to do is to start two VS
sessions, one with your project, one with the C demo solution (which I
put together so that  people had a start point, for exactly this reason
- Visual Studio 2008 is by far the best C IDE I have ever used, but the
project config takes a bit of leanring, though I suppose so does
autoconf and gmake ;-). Go through the General settings and the C/C++
and Linker settings and make sure you have the library configurations
set the same way as the demo projects do. That should fix it all up for
you. Any minute now you will be saying &quot;AhhhhhhH!&quot; and not
&quot;Arrrrrgh!&quot; :-)

Jim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://www.antlr.org/pipermail/antlr-interest/attachments/20080711/ef097568/attachment.html">http://www.antlr.org/pipermail/antlr-interest/attachments/20080711/ef097568/attachment.html</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029107.html">[antlr-interest] Unresolved externals building C executable
</A></li>
	<LI>Next message: <A HREF="029095.html">[antlr-interest] Converting Tree operands ('^' '!') to rewrite	rules ( '-&gt; ^(...)')
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29109">[ date ]</a>
              <a href="thread.html#29109">[ thread ]</a>
              <a href="subject.html#29109">[ subject ]</a>
              <a href="author.html#29109">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
