<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Unexpected CommonTokenStream.Size() result in CSharp runtime
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Unexpected%20CommonTokenStream.Size%28%29%20result%20in%0A%20CSharp%20runtime&In-Reply-To=%3C49E6F774.4010706%40s7software.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034062.html">
   <LINK REL="Next"  HREF="034083.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Unexpected CommonTokenStream.Size() result in CSharp runtime</H1>
    <B>Indhu Bharathi</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Unexpected%20CommonTokenStream.Size%28%29%20result%20in%0A%20CSharp%20runtime&In-Reply-To=%3C49E6F774.4010706%40s7software.com%3E"
       TITLE="[antlr-interest] Unexpected CommonTokenStream.Size() result in CSharp runtime">indhu.b at s7software.com
       </A><BR>
    <I>Thu Apr 16 02:16:36 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="034062.html">[antlr-interest] Unexpected CommonTokenStream.Size() result in	CSharp runtime
</A></li>
        <LI>Next message: <A HREF="034083.html">[antlr-interest] Unexpected CommonTokenStream.Size() result in	CSharp runtime
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34063">[ date ]</a>
              <a href="thread.html#34063">[ thread ]</a>
              <a href="subject.html#34063">[ subject ]</a>
              <a href="author.html#34063">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is expected behavior only. It is designed this way so that user can 
filter for a particular channel if needed. For your task, you can use 
getTokens() method which will return a List of tokens that can be iterated.

Cheers, Indhu

Chris Lambrou wrote:
&gt;<i> Yesterday I was stung by some odd behaviour in CommonTokenStream, 
</I>&gt;<i> whereby I was trying to iterate over the token stream looking for 
</I>&gt;<i> tokens of a specific type. Since ITokenStream doesn't implement 
</I>&gt;<i> IEnumerable, it appears that the way to do this is as follows:
</I>&gt;<i>
</I>&gt;<i> for (int i = 0; i &lt; tokenStream.Size(); i++)
</I>&gt;<i> {
</I>&gt;<i>     IToken token = tokenStream.Get(i);
</I>&gt;<i>
</I>&gt;<i>     //... do stuff with token...
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> However, I was finding that tokenStream.Size() returned 0, despite my 
</I>&gt;<i> token stream being non-empty. It seems that the underlying stream is 
</I>&gt;<i> lazily populated internally, and CommonTokenStream.Size() doesn't 
</I>&gt;<i> trigger a load. I had to invoke tokenStream.LT(0) to trigger the lazy 
</I>&gt;<i> load prior to looping through the tokens. Is this intended behaviour? 
</I>&gt;<i> Does is happen in all of the different runtimes? If so, it's very 
</I>&gt;<i> counterintuitive.
</I>&gt;<i>
</I>&gt;<i> Incidentally, could ITokenStream be updated to implement 
</I>&gt;<i> IEnumerable&lt;IToken&gt; please? Would others find this useful? I don't 
</I>&gt;<i> mind doing the work, but to whom should I submit a patch?
</I>&gt;<i>
</I>&gt;<i> Chris
</I>&gt;<i> ------------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> List: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">http://www.antlr.org/mailman/listinfo/antlr-interest</A>
</I>&gt;<i> Unsubscribe: <A HREF="http://www.antlr.org/mailman/options/antlr-interest/your-email-address">http://www.antlr.org/mailman/options/antlr-interest/your-email-address</A>
</I>&gt;<i>   
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://www.antlr.org/pipermail/antlr-interest/attachments/20090416/517c9c1f/attachment.html">http://www.antlr.org/pipermail/antlr-interest/attachments/20090416/517c9c1f/attachment.html</A> 
</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034062.html">[antlr-interest] Unexpected CommonTokenStream.Size() result in	CSharp runtime
</A></li>
	<LI>Next message: <A HREF="034083.html">[antlr-interest] Unexpected CommonTokenStream.Size() result in	CSharp runtime
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34063">[ date ]</a>
              <a href="thread.html#34063">[ thread ]</a>
              <a href="subject.html#34063">[ subject ]</a>
              <a href="author.html#34063">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
