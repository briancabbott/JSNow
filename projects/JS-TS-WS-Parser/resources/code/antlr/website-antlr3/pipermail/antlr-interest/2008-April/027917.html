<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Problems with semantic predicates
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Problems%20with%20semantic%20predicates&In-Reply-To=%3C4808827E.7000407%40gmx.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027904.html">
   <LINK REL="Next"  HREF="027919.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Problems with semantic predicates</H1>
    <B>Johannes Luber</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Problems%20with%20semantic%20predicates&In-Reply-To=%3C4808827E.7000407%40gmx.de%3E"
       TITLE="[antlr-interest] Problems with semantic predicates">jaluber at gmx.de
       </A><BR>
    <I>Fri Apr 18 04:14:06 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="027904.html">[antlr-interest] Problems with semantic predicates
</A></li>
        <LI>Next message: <A HREF="027919.html">[antlr-interest] Problems with semantic predicates
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27917">[ date ]</a>
              <a href="thread.html#27917">[ thread ]</a>
              <a href="subject.html#27917">[ subject ]</a>
              <a href="author.html#27917">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Haralambi Haralambiev schrieb:
&gt;<i> Hi Johannes,
</I>&gt;<i> 
</I>&gt;<i> I don't understand what's the benefit of the two brackets.
</I>&gt;<i> 
</I>&gt;<i> When I write {{$r::flag = false;}} the code that ANTLR produces is 
</I>&gt;<i> &quot;{((r_scope)r_stack.peek()).flag = false;}&quot;, 
</I>&gt;<i> i.e. the brackets are added also, but they are still in &quot;if (backtracking == 0)&quot; statement, which is the check I want to skip somehow.
</I>&gt;<i> 
</I>&gt;<i> Hari
</I>
The two braces (brackets are &quot;[]&quot;) should be the syntax which enables an 
action to be executed always, even during backtracking. But either you 
are using an too old version of ANTLR or Ter didn't implement this 
variant after all.

Johannes
&gt;<i> 
</I>&gt;<i> On 4/17/08, *Johannes Luber* &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">jaluber at gmx.de</A> &lt;mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">jaluber at gmx.de</A>&gt;&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i>     Haralambi Haralambiev schrieb:
</I>&gt;<i> 
</I>&gt;<i>         Hello Johannes,
</I>&gt;<i> 
</I>&gt;<i>         So, if I understand correctly, you suggest to have the following
</I>&gt;<i>         (using a scope):
</I>&gt;<i> 
</I>&gt;<i>         r2
</I>&gt;<i>         : {$r::flag}? Token1 -&gt; ^(NODE Token1)
</I>&gt;<i>         | Token1
</I>&gt;<i>         ;
</I>&gt;<i> 
</I>&gt;<i>         If the above is a correct assumption, then how can I set the
</I>&gt;<i>         scope variable, as I could only think of the following way:
</I>&gt;<i> 
</I>&gt;<i>         r
</I>&gt;<i>         scope {
</I>&gt;<i>          boolean flag;
</I>&gt;<i>         }
</I>&gt;<i>         : Token1^ Token2!
</I>&gt;<i>            {$r::flag = true;}    r2
</I>&gt;<i>         | Token1^
</I>&gt;<i>          {$r::flag = false;}
</I>&gt;<i>          r2
</I>&gt;<i>         ;
</I>&gt;<i> 
</I>&gt;<i>         This solution, however, will fail, as the action for setting the
</I>&gt;<i>         scope variable will not be executed until the backtracking is
</I>&gt;<i>         over. But I need this variable set, as it will be used as a
</I>&gt;<i>         predicate for the parsing. Thus, we have a catch-22 situation.
</I>&gt;<i> 
</I>&gt;<i>         A solution I could think of is not to have two alternatives for
</I>&gt;<i>         r2, but rather construct the CommonTree manually with java code
</I>&gt;<i>         and within to use the knowledge of the boolean flag. But I
</I>&gt;<i>         dislike this solution and am open to suggestions.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     Try using {{$r::flag = true;}}.
</I>&gt;<i> 
</I>&gt;<i>     Johannes
</I>&gt;<i> 
</I>&gt;<i> 
</I>
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027904.html">[antlr-interest] Problems with semantic predicates
</A></li>
	<LI>Next message: <A HREF="027919.html">[antlr-interest] Problems with semantic predicates
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27917">[ date ]</a>
              <a href="thread.html#27917">[ thread ]</a>
              <a href="subject.html#27917">[ subject ]</a>
              <a href="author.html#27917">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
