<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Yet another idea for a completlygenericTreeParser
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Yet%20another%20idea%20for%20a%20completlygenericTreeParser&In-Reply-To=6.2.1.2.2.20050516225157.02ab8f78%40mail.jpl.nasa.gov">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012188.html">
   <LINK REL="Next"  HREF="012210.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Yet another idea for a completlygenericTreeParser</H1>
    <B>Martin Probst</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Yet%20another%20idea%20for%20a%20completlygenericTreeParser&In-Reply-To=6.2.1.2.2.20050516225157.02ab8f78%40mail.jpl.nasa.gov"
       TITLE="[antlr-interest] Yet another idea for a completlygenericTreeParser">mail at martin-probst.com
       </A><BR>
    <I>Tue May 17 05:15:21 PDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="012188.html">[antlr-interest] Yet another idea for a 
	completlygenericTreeParser
</A></li>
        <LI>Next message: <A HREF="012210.html">[antlr-interest] Yet another idea for a completlygenericTreeParser
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12195">[ date ]</a>
              <a href="thread.html#12195">[ thread ]</a>
              <a href="subject.html#12195">[ subject ]</a>
              <a href="author.html#12195">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

just a small addition:

&gt;<i> As I have pointed out several times, &quot;tons of extra nodes&quot; is not what 
</I>&gt;<i> the analysis shows.
</I>
That is true for the case when you maintain a list of unused wrapper 
nodes and reuse them. While that is definetly possible it create some 
effort to implement such a thing. Also, the statement from Sun is that 
it's nearly always a bad thing to do something like that (and I think 
they have good arguments for that).

So space performance wise you approach is only on a close par if you put 
some questionable extra burden on the ANTLR user.

But maybe the question we state is simply wrong. What is the use case 
for this? Where does an ANTLR user need to reuse trees generated by 
something he doesn't have access to?

Scott repeats his Eclipse IDE example, and in that case the overhead 
introduced by the current system might be 30000 nodes/hour, without node 
reuse. So what? I can't see any problem with GCing 30000 nodes/hour on a 
computer that's able to run Eclipse. I would be really surprised if that 
created an noticeable performance ditch.

With compilers &amp; translators, I don't see the problem too. I would guess 
that only very few compilers actually consume &quot;foreign&quot; trees, and if 
they do, the performance overhead of some GCing compared to the overall 
cost is again neglectible.

The only application where you really have to pay that much attention to 
performance are probably high-load server applications. And in that 
case, most of the time you parse relatively short queries in a query 
language you implement yourself, so the tree is small and you probably 
have control over the type of the nodes anyways.

So basically my question is: who cares? If this is just about reducing 
GC cost in some IDE application by 30000 objects/hour (all of which are 
probably caught in generation 0) I really don't see the point of 
creating something complex, possibly hard to maintain, and of 
practically no use to most of the ANTLR users. Or even enforcing it on 
them(!), possibly resulting in a (very slight) performance reduction and 
again, maintenance overhead.

Regarding the casts in the parser, you can probably get rid of them in a 
lot easier way (--&gt; generics).

Regards,
Martin
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012188.html">[antlr-interest] Yet another idea for a 
	completlygenericTreeParser
</A></li>
	<LI>Next message: <A HREF="012210.html">[antlr-interest] Yet another idea for a completlygenericTreeParser
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12195">[ date ]</a>
              <a href="thread.html#12195">[ thread ]</a>
              <a href="subject.html#12195">[ subject ]</a>
              <a href="author.html#12195">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
