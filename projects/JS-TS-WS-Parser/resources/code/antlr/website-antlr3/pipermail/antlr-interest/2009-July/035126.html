<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Implementation decision help
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Implementation%20decision%20help&In-Reply-To=%3C5f59a7210907080744v64fe8e4epea4a185ddf221d91%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="035125.html">
   <LINK REL="Next"  HREF="035129.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Implementation decision help</H1>
    <B>Gustaf Johansson</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Implementation%20decision%20help&In-Reply-To=%3C5f59a7210907080744v64fe8e4epea4a185ddf221d91%40mail.gmail.com%3E"
       TITLE="[antlr-interest] Implementation decision help">gustaf.j at gmail.com
       </A><BR>
    <I>Wed Jul  8 07:44:19 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="035125.html">[antlr-interest] Implementation decision help
</A></li>
        <LI>Next message: <A HREF="035129.html">[antlr-interest] Fragment tokens are not generated by emit() --	breaks setting TokenLabelType
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35126">[ date ]</a>
              <a href="thread.html#35126">[ thread ]</a>
              <a href="subject.html#35126">[ subject ]</a>
              <a href="author.html#35126">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Jul 8, 2009 at 4:16 PM, Jim Idle&lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">jimi at temporal-wave.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Jul 8, 2009, at 4:59 AM, Gustaf Johansson &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">gustaf.j at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hello!
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I am trying to implement the ETSI TTCN-3 BNF into Antlr.
</I>&gt;&gt;<i> The major part is done and working as it should but there are some
</I>&gt;&gt;<i> quirks which i don't know how to solve.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have rules like this:
</I>&gt;&gt;<i> stm : stmGroup1 | stmGroup2 ... | stmGroupX;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> And all/some of these stmGroup's can start with the same type of
</I>&gt;&gt;<i> token, but they are distinguishable by some token along the line
</I>&gt;&gt;<i> further down the parse tree.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have tried to solve this by using backtrack=true which didn't work.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> My current solution is a specific order of the stmGroup's and a few
</I>&gt;&gt;<i> syntactic predicates. But i don't like this solution since i don't
</I>&gt;&gt;<i> know if it will work for all possible input (the grammar is really
</I>&gt;&gt;<i> complex).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Basically what i want to accomplish is make Antlr try all of the rules
</I>&gt;&gt;<i> in &quot;stm&quot; and only report error if none of them matches. Currently it
</I>&gt;&gt;<i> reports errors even though a rule later in the list will match the
</I>&gt;&gt;<i> input completely, just because the rule reporting the error matches it
</I>&gt;&gt;<i> partly.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The only solution other then syntactic predicates and backtrack i can
</I>&gt;&gt;<i> think of is to combine the stmGroup's into a rule which has truly
</I>&gt;&gt;<i> distinctive paths depending on the next token.
</I>&gt;&gt;<i> Is this the way to do it?
</I>&gt;<i>
</I>&gt;<i> Yes.
</I>&gt;<i>
</I>&gt;&gt;<i> It will require a huge amount of work since all the stmGroup's are
</I>&gt;&gt;<i> quite large and complex themselves. Also it will make the grammar
</I>&gt;&gt;<i> almost unreadable.
</I>&gt;<i>
</I>&gt;<i> I think you will find that it doesn't result in an readable grammar in fact.
</I>&gt;<i> Formatting is your friend here.
</I>&gt;<i>
</I>You mean it will be readable i suppose.

&gt;<i> I keep trying to influence people to practice by presenting an approach to
</I>&gt;<i> writing such grammars. But I think people basically download Works and start
</I>&gt;<i> typing. There are lots of posts about left factoring, not using backtrack
</I>&gt;<i> and so on. Basically the normative spec is rarely written with the parser
</I>&gt;<i> programmer in mind and you must interpolate.
</I>&gt;<i>
</I>I want the parser grammar to differ from the spec as little as
possible so its easy to add changes aso for other people.

&gt;<i> Generally you can get backtrack to work as you want but with terrible error
</I>&gt;<i> messages. If you can't then I would suggest starting again and use the
</I>&gt;<i> recommended incremental approach to building grammars. You already have a
</I>&gt;<i> lexer so you can cut and paste parser pieces until you get it correct.
</I>&gt;<i>
</I>This is what ive done, i had backtrack on at first, which you
suggested me to remove and then redo the grammar.

Ive done that and have 12 rules that currently have syntactic
predicates in order to remove:
&quot;Decision can match x using multiple alts...&quot; warnings and
&quot;non-LL(*) recursion&quot; errors.

So i just want to know the correct way to get those right as well,
without using syntactic predicates if possible.


As you have stated, my next move will be to left-factor the statements
rule and format it nicely if possible.

Thanks for the help!

/Gustaf

&gt;<i>
</I>&gt;<i> Jim
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> An example of a problematic rule is:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://www.trex.informatik.uni-goettingen.de/trac/wiki/ttcn-3_4.0.4#FunctionStatement">http://www.trex.informatik.uni-goettingen.de/trac/wiki/ttcn-3_4.0.4#FunctionStatement</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> These are two parts of that problem:
</I>&gt;&gt;<i> -&gt; ConfigurationStatements -&gt; StartTCStatement
</I>&gt;&gt;<i> -&gt; TimerStatements -&gt; StartTimerStatement
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> PS. backtrack is not used at all in the grammar.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> BR Gustaf
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> List: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">http://www.antlr.org/mailman/listinfo/antlr-interest</A>
</I>&gt;&gt;<i> Unsubscribe:
</I>&gt;&gt;<i> <A HREF="http://www.antlr.org/mailman/options/antlr-interest/your-email-address">http://www.antlr.org/mailman/options/antlr-interest/your-email-address</A>
</I>&gt;<i>
</I></PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="035125.html">[antlr-interest] Implementation decision help
</A></li>
	<LI>Next message: <A HREF="035129.html">[antlr-interest] Fragment tokens are not generated by emit() --	breaks setting TokenLabelType
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35126">[ date ]</a>
              <a href="thread.html#35126">[ thread ]</a>
              <a href="subject.html#35126">[ subject ]</a>
              <a href="author.html#35126">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
