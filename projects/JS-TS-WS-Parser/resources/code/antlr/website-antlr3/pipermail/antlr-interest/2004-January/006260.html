<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Re: Intermitent bug with ANTLR.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Re%3A%20Intermitent%20bug%20with%20ANTLR.&In-Reply-To=4019647F.8050402%40zeigermann.de">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006248.html">
   <LINK REL="Next"  HREF="006261.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Re: Intermitent bug with ANTLR.</H1>
    <B>Oliver Zeigermann</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Re%3A%20Intermitent%20bug%20with%20ANTLR.&In-Reply-To=4019647F.8050402%40zeigermann.de"
       TITLE="[antlr-interest] Re: Intermitent bug with ANTLR.">oliver at zeigermann.de
       </A><BR>
    <I>Fri Jan 30 13:44:27 PST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="006248.html">[antlr-interest] Re: Intermitent bug with ANTLR.
</A></li>
        <LI>Next message: <A HREF="006261.html">[antlr-interest] help required: accessing intermediary output ASTs in tree parser
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6260">[ date ]</a>
              <a href="thread.html#6260">[ thread ]</a>
              <a href="subject.html#6260">[ subject ]</a>
              <a href="author.html#6260">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I just checked this and I guess it actually does not apply. As far as I 
know Daniel uses the XPA XML parser, not a SAX one to drive ANTLR, but 
this one is single-threaded. Thus it can't be a race and I am clueless 
as well...

Oliver

Oliver Zeigermann wrote:
&gt;<i> Hi guys,
</I>&gt;<i> 
</I>&gt;<i> I really can't believe this is a VM bug (although I just found an 
</I>&gt;<i> obvious one the other day, so, hmmmm, maybe). What I rather suspect is 
</I>&gt;<i> there is some sort of race. At least this is indicated by this 
</I>&gt;<i> undeterministic behavior. To have a race you need at least two threads 
</I>&gt;<i> running. As far as I know ANTLR is strictly single-threaded, right? But, 
</I>&gt;<i> trara, XPA is *not*. It uses a producer/consumer thing to give both SAX 
</I>&gt;<i> parser an ANTLR the impression they are the master of it all. Although 
</I>&gt;<i> this code is very simple, there might still be a bug in it. If you can 
</I>&gt;<i> give me any hint upon which conditions this error occurs, I would highly 
</I>&gt;<i> appreciate this.
</I>&gt;<i> 
</I>&gt;<i> Cheers,
</I>&gt;<i> Oliver
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> lachinois2002 wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i>Hi Monty,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Well... I'm outa luck, after adding 2 or 3 rules to my grammar it 
</I>&gt;&gt;<i>seems like the bug doesnt show up anymore. This really looks like a 
</I>&gt;&gt;<i>java VM bug. In anycase, if this happens again I'll trace it and 
</I>&gt;&gt;<i>hope it behaves the same with the trace activated.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Daniel Shane
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>--- In <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at yahoogroups.com</A>, <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">mzukowski at y...</A> wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>To continue on the theme of the week, try building with -trace and 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>then
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>running.  I'd be curious to see the difference between success &amp; 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>failure.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>Monty
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>-----Original Message-----
</I>&gt;&gt;&gt;<i>From: Daniel Shane [mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">lachinois at h...</A>] 
</I>&gt;&gt;&gt;<i>Sent: Wednesday, January 28, 2004 11:49 AM
</I>&gt;&gt;&gt;<i>To: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at yahoogroups.com</A>
</I>&gt;&gt;&gt;<i>Subject: [antlr-interest] Intermitent bug with ANTLR.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>Hi everyone, mostly Terence.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>I will greatly need your help on this one. I have a grammar (that 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>uses XPA) 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>and, listen to this, I sometimes get a grammar error, and 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>sometimes not by 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>executing the same command line with the same input.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>Here is what happens:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>$ java -cp 
</I>&gt;&gt;&gt;<i>&quot;/usr/local/soft/antlr-2.7.2/lib/antlr.jar:/usr/local/soft/xpa-
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>1.0.1/lib/xpa
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>1_0_1-full.jar:.:Code&quot; 
</I>&gt;&gt;&gt;<i>MainRegulationParser tmp/Fr/C.R.C.,_c._100.06-MTE.html &gt; /tmp/g
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>$ java -cp 
</I>&gt;&gt;&gt;<i>&quot;/usr/local/soft/antlr-2.7.2/lib/antlr.jar:/usr/local/soft/xpa-
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>1.0.1/lib/xpa
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>1_0_1-full.jar:.:Code&quot; 
</I>&gt;&gt;&gt;<i>MainRegulationParser tmp/Fr/C.R.C.,_c._100.06-MTE.html &gt; /tmp/g
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>$ java -cp 
</I>&gt;&gt;&gt;<i>&quot;/usr/local/soft/antlr-2.7.2/lib/antlr.jar:/usr/local/soft/xpa-
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>1.0.1/lib/xpa
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>1_0_1-full.jar:.:Code&quot; 
</I>&gt;&gt;&gt;<i>MainRegulationParser tmp/Fr/C.R.C.,_c._100.06-MTE.html &gt; /tmp/g
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>$ java -cp 
</I>&gt;&gt;&gt;<i>&quot;/usr/local/soft/antlr-2.7.2/lib/antlr.jar:/usr/local/soft/xpa-
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>1.0.1/lib/xpa
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>1_0_1-full.jar:.:Code&quot; 
</I>&gt;&gt;&gt;<i>MainRegulationParser tmp/Fr/C.R.C.,_c._100.06-MTE.html &gt; /tmp/g
</I>&gt;&gt;&gt;<i>line 3: expecting &quot;&lt;IdOfRegulation&gt;&quot;, found 'TitleOfAct'
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>$ java -cp 
</I>&gt;&gt;&gt;<i>&quot;/usr/local/soft/antlr-2.7.2/lib/antlr.jar:/usr/local/soft/xpa-
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>1.0.1/lib/xpa
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>1_0_1-full.jar:.:Code&quot; 
</I>&gt;&gt;&gt;<i>MainRegulationParser tmp/Fr/C.R.C.,_c._100.06-MTE.html &gt; /tmp/g
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>$
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>These invocation were done in sequence and the input file has not 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>changed 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>between invocations. I printed some debug out of ANTLR to show the 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>sequence 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>of tokens that have been read and in both cases the token sequence 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>is the 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>same.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>Something is happening in ANTLR that is causing it to take a 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>different path 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>for what seems like a random reason.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>This is really causing me a headache, and I can trace the problem 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>to one 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>rule I added in the grammar. If I remove this rule, then I do not 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>get this 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>strange behavior (BTW, the rule is simple, so I'm not doing 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>anything tricky 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>here). I really cannot see why this additionnal rule would break 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>anything 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>and specially not like this.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>I really out of clues here, what would you like me to do to give 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>you some 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>additionnal information? Do you want the java files/grammar so 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>that you can 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>run it on your setup see if it does the same? Would you like an 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>ssh access 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>to this linux machine to see for yourself? Do you think the bug 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>arrises from
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>XPA?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>I'm running on Linux, RedHat 9 with the SUN JDK 1.4.2 for linux.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>Daniel Shane
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>_________________________________________________________________
</I>&gt;&gt;&gt;<i>MSN Search, le moteur de recherche qui pense comme vous !  
</I>&gt;&gt;&gt;<i><A HREF="http://fr.ca.search.msn.com/">http://fr.ca.search.msn.com/</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>Yahoo! Groups Links
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>To visit your group on the web, go to:
</I>&gt;&gt;&gt;<i><A HREF="http://groups.yahoo.com/group/antlr-interest/">http://groups.yahoo.com/group/antlr-interest/</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>To unsubscribe from this group, send an email to:
</I>&gt;&gt;&gt;<i><A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-unsubscribe at yahoogroups.com</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>Your use of Yahoo! Groups is subject to:
</I>&gt;&gt;&gt;<i><A HREF="http://docs.yahoo.com/info/terms/">http://docs.yahoo.com/info/terms/</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Yahoo! Groups Links
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>To visit your group on the web, go to:
</I>&gt;&gt;<i> <A HREF="http://groups.yahoo.com/group/antlr-interest/">http://groups.yahoo.com/group/antlr-interest/</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>To unsubscribe from this group, send an email to:
</I>&gt;&gt;<i> <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-unsubscribe at yahoogroups.com</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Your use of Yahoo! Groups is subject to:
</I>&gt;&gt;<i> <A HREF="http://docs.yahoo.com/info/terms/">http://docs.yahoo.com/info/terms/</A> 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> Yahoo! Groups Links
</I>&gt;<i> 
</I>&gt;<i> To visit your group on the web, go to:
</I>&gt;<i>  <A HREF="http://groups.yahoo.com/group/antlr-interest/">http://groups.yahoo.com/group/antlr-interest/</A>
</I>&gt;<i> 
</I>&gt;<i> To unsubscribe from this group, send an email to:
</I>&gt;<i>  <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-unsubscribe at yahoogroups.com</A>
</I>&gt;<i> 
</I>&gt;<i> Your use of Yahoo! Groups is subject to:
</I>&gt;<i>  <A HREF="http://docs.yahoo.com/info/terms/">http://docs.yahoo.com/info/terms/</A> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>



 

Yahoo! Groups Links

To visit your group on the web, go to:
 <A HREF="http://groups.yahoo.com/group/antlr-interest/">http://groups.yahoo.com/group/antlr-interest/</A>

To unsubscribe from this group, send an email to:
 <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-unsubscribe at yahoogroups.com</A>

Your use of Yahoo! Groups is subject to:
 <A HREF="http://docs.yahoo.com/info/terms/">http://docs.yahoo.com/info/terms/</A> 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006248.html">[antlr-interest] Re: Intermitent bug with ANTLR.
</A></li>
	<LI>Next message: <A HREF="006261.html">[antlr-interest] help required: accessing intermediary output ASTs in tree parser
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6260">[ date ]</a>
              <a href="thread.html#6260">[ thread ]</a>
              <a href="subject.html#6260">[ subject ]</a>
              <a href="author.html#6260">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
