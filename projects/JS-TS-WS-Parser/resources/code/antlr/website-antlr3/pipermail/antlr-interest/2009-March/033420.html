<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Interface between a C preprocessor and the C	grammar parsers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Interface%20between%20a%20C%20preprocessor%20and%20the%20C%0A%09grammar%20parsers&In-Reply-To=%3C49BE9B51.7090100%40googlemail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033422.html">
   <LINK REL="Next"  HREF="033481.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Interface between a C preprocessor and the C	grammar parsers</H1>
    <B>Vincent De Groote</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Interface%20between%20a%20C%20preprocessor%20and%20the%20C%0A%09grammar%20parsers&In-Reply-To=%3C49BE9B51.7090100%40googlemail.com%3E"
       TITLE="[antlr-interest] Interface between a C preprocessor and the C	grammar parsers">list.encelade at gmail.com
       </A><BR>
    <I>Mon Mar 16 11:32:49 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="033422.html">[antlr-interest] How do I skip a subtree walking in a tree grammar?
</A></li>
        <LI>Next message: <A HREF="033481.html">[antlr-interest] Interface between a C preprocessor and the C grammar parsers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33420">[ date ]</a>
              <a href="thread.html#33420">[ thread ]</a>
              <a href="subject.html#33420">[ subject ]</a>
              <a href="author.html#33420">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I need to build a program which reads C language files, modifies the 
files (code transformations), then save the files back to disk. The 
saved files must have the original file structure, with unexpanded 
include files,  unexpanded macros, inactive lines (skipped by the 
preprocessor), ...  Beside the code rewrite functionnality, the program 
must also be able to reformat source code, based on its syntactic structure.

This means that the tokens hidden to the grammatical parser must be 
accessible to the final application.

I'm really a newbie in parsing, and I need some advices on how to do this.

My first questions are about the interface between the preprocessor and 
the C grammar parser:

- Should the preprocessor parser be embedded in the C grammar ?  (This 
seems a little ugly)
- Should the preprocessor parser be a syntaxical parser (with 
productions like active/incative lines, start and end of includes, ...), 
or a lexical parser ?
-  What should this preprocessor parser return ? 
   - A list of tokens (with their channel set to hidden / visible) (is 
it possible for a grammatical parser to return a token list) ?
   - A tree structure with the structure of the file ?
   - Something other ?

Other questions about the C grammar parser:

In the reference book (The Definitive ANTLR Reference: Building Domain 
Specific languages), I read that an AST should not contain syntax-only 
tokens, like the ';' statement separator, parentheses used to change 
operation precedence ...  I do not understand why  an AST should not 
contain such tokens.  I suppose they are just useless in an AST.  Are 
there other reasons ?

This book is well written, but I'm not sure to be able to select the 
best choice  between AST, Tree, custom made structures ...

If the AST is not the good structure to return the parsed grammar to the 
caller, I suppose I could use custom made structures.  But is that the 
best choice ?

I do not understand very well the differences between an abstract tree 
and a concrete tree (I'm really a newbie ...). 
Some hints about these differences are welcome.


Thanks for your replies,

Vincent De Groote




 


 





 
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033422.html">[antlr-interest] How do I skip a subtree walking in a tree grammar?
</A></li>
	<LI>Next message: <A HREF="033481.html">[antlr-interest] Interface between a C preprocessor and the C grammar parsers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33420">[ date ]</a>
              <a href="thread.html#33420">[ thread ]</a>
              <a href="subject.html#33420">[ subject ]</a>
              <a href="author.html#33420">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
