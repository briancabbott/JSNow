<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Token position 0, -1
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Token%20position%200%2C%20-1&In-Reply-To=%3C4FF6CE59.4010701%40gmx.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="044853.html">
   <LINK REL="Next"  HREF="044855.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Token position 0, -1</H1>
    <B>Ale Strooisma</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Token%20position%200%2C%20-1&In-Reply-To=%3C4FF6CE59.4010701%40gmx.net%3E"
       TITLE="[antlr-interest] Token position 0, -1">alestrooisma at gmx.net
       </A><BR>
    <I>Fri Jul  6 04:39:05 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="044853.html">[antlr-interest] Token position 0, -1
</A></li>
        <LI>Next message: <A HREF="044855.html">[antlr-interest] Token position 0, -1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44854">[ date ]</a>
              <a href="thread.html#44854">[ thread ]</a>
              <a href="subject.html#44854">[ subject ]</a>
              <a href="author.html#44854">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I was trying to find out how to fix my problem, but is seems that your 
solution works perfectly, thanks!

On 07/06/2012 01:23 PM, Stefan M&#228;tje (d) wrote:
&gt;<i> Am 06.07.2012 11:47:27 schrieb(en) Ale Strooisma:
</I>&gt;<i>    
</I>&gt;&gt;<i> Hello,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> if I try to get the position of a token in the file with getLine and
</I>&gt;&gt;<i> getCharPositionInLine, many of my tokens give the co&#246;rdinates 0, -1,
</I>&gt;&gt;<i> which obviously is wrong. Why is this the case, and how can I fix it?
</I>&gt;&gt;<i>      
</I>&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> please be aware of the fact that imaginary tokens that you create by using
</I>&gt;<i> rewrite rules don't have any location information by default (and no text
</I>&gt;<i> either).
</I>&gt;<i>
</I>&gt;<i> So I think you should first look if all the tokens generated by the lexer
</I>&gt;<i> contains the expected location information. Also you then can see which tokens
</I>&gt;<i> were generated by the lexer and which were generated by a rewrite rule of the
</I>&gt;<i> parser.
</I>&gt;<i>
</I>&gt;<i> In rewrite rules you can attach the location information of a real lexer token
</I>&gt;<i> to a generated imaginary token by a syntax like that (see ANTLR book paragraph
</I>&gt;<i> &quot;Deriving Imaginary Nodes from Real Tokens&quot;):
</I>&gt;<i>
</I>&gt;<i> compoundStatement
</I>&gt;<i> 	:  lc='{' statement*  '}'
</I>&gt;<i> 		-&gt;   ^(SLIST[$lc]  statement*)
</I>&gt;<i> 	;
</I>&gt;<i>
</I>&gt;<i> All over all my answer is a little bit guesswork because your question is a
</I>&gt;<i> little bit unspecific (lexer / parser or combined grammar ...? What are you
</I>&gt;<i> doing exactly?).
</I>&gt;<i>
</I>&gt;<i> Hope that helps,
</I>&gt;<i> 	Stefan
</I>&gt;<i>
</I>&gt;<i> Some example code to dump the lexer tokens:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>      /** Dump all tokens the&lt;lexer&gt;  provides in a readable form to the
</I>&gt;<i> 	location where&lt;outFileName&gt;  points to.
</I>&gt;<i>          */
</I>&gt;<i>      private static void generateTokenOutput(Lexer lexer, String outFileName) {
</I>&gt;<i>          PrintWriter tknOut;
</I>&gt;<i>          boolean     useOutFile;
</I>&gt;<i>          Token token;
</I>&gt;<i>
</I>&gt;<i>          System.err.print(&quot;==== TKN to &quot;);
</I>&gt;<i>          if (null == outFileName) {
</I>&gt;<i>              useOutFile = false;
</I>&gt;<i>              System.err.println(&quot;stdout&quot;);
</I>&gt;<i>              tknOut = new PrintWriter(System.out);
</I>&gt;<i>          }
</I>&gt;<i>          else {
</I>&gt;<i>              useOutFile = true;
</I>&gt;<i> 	    /* SNIP-SNAP  .... */
</I>&gt;<i>          }
</I>&gt;<i>          // Proceed with the real output
</I>&gt;<i>          while (null != (token = lexer.nextToken())) {
</I>&gt;<i>              int tokenType = token.getType();
</I>&gt;<i>              if (tokenType == -1) break;
</I>&gt;<i>              tknOut.printf(&quot;%4d,%3d, tkn:%4d  name:%-8s\t '%s'%n&quot;,
</I>&gt;<i>                  token.getLine(), token.getCharPositionInLine(),
</I>&gt;<i>                  tokenType, MyOwnParser.tokenNames[tokenType],
</I>&gt;<i>                  token.getText());
</I>&gt;<i>          }
</I>&gt;<i>          // Need to close or flush the Writer to get the output
</I>&gt;<i>          if (useOutFile) tknOut.close();
</I>&gt;<i>          else tknOut.flush();
</I>&gt;<i>      }
</I>&gt;<i>
</I>&gt;<i> Call like this ...
</I>&gt;<i> {
</I>&gt;<i>          MyOwnLexer lexer = new MyOwnLexer(input);
</I>&gt;<i>
</I>&gt;<i>          // Dump all tokens?
</I>&gt;<i>          generateTokenOutput(lexer, null);
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> List: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">http://www.antlr.org/mailman/listinfo/antlr-interest</A>
</I>&gt;<i> Unsubscribe: <A HREF="http://www.antlr.org/mailman/options/antlr-interest/your-email-address">http://www.antlr.org/mailman/options/antlr-interest/your-email-address</A>
</I>&gt;<i>    
</I>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="044853.html">[antlr-interest] Token position 0, -1
</A></li>
	<LI>Next message: <A HREF="044855.html">[antlr-interest] Token position 0, -1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44854">[ date ]</a>
              <a href="thread.html#44854">[ thread ]</a>
              <a href="subject.html#44854">[ subject ]</a>
              <a href="author.html#44854">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
