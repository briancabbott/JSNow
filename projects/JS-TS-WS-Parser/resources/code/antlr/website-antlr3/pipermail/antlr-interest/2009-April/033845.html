<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Question: Compiling generated parser code using C	target with VC++
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Question%3A%20Compiling%20generated%20parser%20code%20using%20C%0A%09target%20with%20VC%2B%2B&In-Reply-To=%3CPine.LNX.4.64.0904011816340.11897%40titan14.inf.uni-konstanz.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033884.html">
   <LINK REL="Next"  HREF="033850.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Question: Compiling generated parser code using C	target with VC++</H1>
    <B>Wei.Wei at uni-konstanz.de</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Question%3A%20Compiling%20generated%20parser%20code%20using%20C%0A%09target%20with%20VC%2B%2B&In-Reply-To=%3CPine.LNX.4.64.0904011816340.11897%40titan14.inf.uni-konstanz.de%3E"
       TITLE="[antlr-interest] Question: Compiling generated parser code using C	target with VC++">Wei.Wei at uni-konstanz.de
       </A><BR>
    <I>Wed Apr  1 09:16:56 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="033884.html">[antlr-interest] Failure on OpenJDK on Debian
</A></li>
        <LI>Next message: <A HREF="033850.html">[antlr-interest] Question: Compiling generated parser code using C	target with VC++
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33845">[ date ]</a>
              <a href="thread.html#33845">[ thread ]</a>
              <a href="subject.html#33845">[ subject ]</a>
              <a href="author.html#33845">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dear all,

we are using ANTLR3 (ver. 3.1.3) to generate a Java parser using C target. 
The generated code is supposed to be compiled with Visual Studio 2008, and 
later used in a VC++ project.

The grammar file that we used is Java 1.5 grammar for ANTLR v3 written by 
Terence Parr. We found it in the list of grammar files at

<A HREF="http://www.antlr.org/grammar/list.">http://www.antlr.org/grammar/list.</A>

We inserted the following language option into the above mentioned grammar 
file:

options 
{
    language = C;
    ASTLabelType=pANTLR3_BASE_TREE;    
} 

To integrate ANTLR3 into VS2008, we followed the instructions for using C 
target on the Wiki page at

<A HREF="http://www.antlr.org/wiki/display/ANTLR3/Using+the+ANTLR3+C+Target">http://www.antlr.org/wiki/display/ANTLR3/Using+the+ANTLR3+C+Target</A>

We successfully built the C runtime library (version 3.1.3) with 
antlr3c_dll.lib generated. Then, we created a new VS project, and included 
the references to the necessary header and library files in the project. 
We also imported the custom build rules that we found within the 
vsrulefiles subfolder inside the antlr3.1.3 release package.

Next, we added the Java grammar file into the project. The 
antlr3lexerandparser.rules rule automatically applied to generate the 
source code of both parser and lexer. However, when we tried to compile 
the generated C code, we got the compilation errors like the one below:

javaparser.c(21743) : error C2231: '.getLine' : left operand points to
'struct', use '-&gt;'

We also tried to define &quot;_cplusplus&quot; and then got compilation errors like 
this:

sourceannotations.h(42) : error C2061: syntax error : identifier 
'vc_attributes'

We suspect the reason of compile failures to be the incompatibility of the 
C target with C++. However, we see in the list of ANTLR3 targets list that 
the C target should be compatible with C++ as of ver. 3.1.

We will greatly appreciate if you can give some hints where we might have 
done things wrong, and advise us how to successfully compile the C code of
the parser in VC++.

Thank you in advance.
 
Greetings,
Wei
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033884.html">[antlr-interest] Failure on OpenJDK on Debian
</A></li>
	<LI>Next message: <A HREF="033850.html">[antlr-interest] Question: Compiling generated parser code using C	target with VC++
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33845">[ date ]</a>
              <a href="thread.html#33845">[ thread ]</a>
              <a href="subject.html#33845">[ subject ]</a>
              <a href="author.html#33845">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
