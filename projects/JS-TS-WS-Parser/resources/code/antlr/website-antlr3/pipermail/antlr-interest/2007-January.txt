From kroepke at classdump.org  Mon Jan  1 08:11:13 2007
From: kroepke at classdump.org (Kay Roepke)
Date: Mon, 1 Jan 2007 17:11:13 +0100
Subject: [antlr-interest] C++ compliance of antlr generated code
In-Reply-To: <4597C23A.5060407@dii.unisi.it>
References: <4594FA4C.7000604@dii.unisi.it>
	<20061229103437.u0n5oct0fb1cgogs@taggedtype.net>
	<F9DAB36D-7121-4F8F-8D75-D6B621110E18@classdump.org>
	<4597C23A.5060407@dii.unisi.it>
Message-ID: <3331CF40-86D2-471F-84AA-39C79E87139F@classdump.org>

Happy New Year :)

On 31. Dec 2006, at 14:59 , Maurizio de Pascale wrote:

> I've read the old post you pointed to, and I agree this is not a  
> bug/issue, but the real (still to be answered) question is:
> Is there a good reason to keep in ANTLR3 C++ generated code  
> variables starting with '_' ?
> Why is _ttype better than ttype, tokenType, token_type, or whatever  
> one can choose?

The reason why we have switched to the '_' prefix is that we want to  
force people to use the $label syntax in actions.
For example the usual action to change the token channel is

WS: ' '|'\t'|'\r'|'\n' { $channel = HIDDEN; } // $channel = 99 as it  
used to be

The actual variable is called _channel and not channel. By forcing  
people to use $channel or $label we have the chance
to validate access and rewrite it if necessary. Thus changes to the  
internal structure don't require people to
change their grammar's actions. In other words, we wanted to have a  
way to hide the implementation.

Just as programmers using '_' identifiers in C++ and other languages  
know that they are treading on unsteady ground,
it is the same with ANTLR. If you access something which hasn't a '$'  
prefix, you better have a very good reason for it,
because it might be totally different in the next version. Using  
$label will always work, no matter what the actual variable
is named. Obviously this is different for custom members you defined...

> P.S. is ANTLR3 C++ target complete?

No, it isn't AFAIK. I haven't heard anything on Ric's progress lately  
so it seems he's incredibly busy with other things.
I have no idea what his timescale is.

At the current time the only thing that's "complete" is the Java  
target, naturally. Jim and I are busy picking up the
latest changes Ter has made, Jim for the C target and myself for the  
Objective-C target.
What the state is for C#, I don't know, but it should be pretty far  
along as well.
I think Benjamin Niemann has recently started working on a Python  
target.
There's been work for Ruby by Martin Traverso, but I'm not sure how  
far along he is, either.
The other targets are pretty much non-existent at the moment.

I'm pretty sure that Ric would be delighted if someone steps up to  
help with the C++ target. ;)

cheers!

-k
-- 
Kay R?pke
http://classdump.org/





From prm225 at gmail.com  Mon Jan  1 08:15:12 2007
From: prm225 at gmail.com (Rajesh Menon)
Date: Mon, 01 Jan 2007 10:15:12 -0600
Subject: [antlr-interest] Newbie questions: How to traverse the AST ...
In-Reply-To: <670513.56204.qm@web32604.mail.mud.yahoo.com>
References: <670513.56204.qm@web32604.mail.mud.yahoo.com>
Message-ID: <45993390.5020204@gmail.com>

Agnisys wrote:
> Hi Rajesh,
>  I'm using 2.7.7 so I converted your code but when running Antlr on it I got the following. Once
> again the  problem is that '=' can be in the RHS.
> 
> ANTLR Parser Generator   Version 2.7.7 (20060930)   1989-2005
> menon.g:12: warning:nondeterminism upon
> menon.g:12:     k==1:"="
> menon.g:12:     between alt 1 and exit branch of block
> 
>   Here is my conversion:
> 
> class FlexParser  extends Parser;
> expressions
> 	:	(expression)*
> 	;
> expression
> 	:	lhs EQUALS rhs NEWLINE!
> 	;
> lhs
> 	:	IDENTIFIER
> 	;
> rhs
> 	:	lhs(EQUALS rhs)*
> 	|	NUMBER
> 	;
> class FlexLexer extends Lexer;
> options {
> 	k=2;
> }
> tokens {
> 	EQUALS="=";
> }
> NEWLINE :('\r''\n')=> '\r''\n' //DOS
>      | '\n'                  //UNIX
>      { newline(); }
>      ;
> IDENTIFIER
> 	:	('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*
> 	;
> NUMBER
> 	:	('0'..'9')+('.'('0'..'9')+)?
> 	;	
> 
> Thanks for your help,
> Anupam.
> 
> 

Right, there'll be a non-determinism in the production for `rhs`.
For the sample inputs you had provided,
	rhs:lhs(EQUALS rhs)? | NUMBER ;
should work.

lhs(EQUALS rhs)* was just trying to handle the last case of the input I 
had tried, namely LHS5=CDE=ABC=XYZ=10.

From ric.klaren at gmail.com  Mon Jan  1 08:46:28 2007
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon, 1 Jan 2007 17:46:28 +0100
Subject: [antlr-interest] C++ compliance of antlr generated code
In-Reply-To: <4597C23A.5060407@dii.unisi.it>
References: <4594FA4C.7000604@dii.unisi.it>
	<20061229103437.u0n5oct0fb1cgogs@taggedtype.net>
	<F9DAB36D-7121-4F8F-8D75-D6B621110E18@classdump.org>
	<4597C23A.5060407@dii.unisi.it>
Message-ID: <bc607a4e0701010846j4dc69b67gc0b2ec39b52aa992@mail.gmail.com>

Hi,

On 12/31/06, Maurizio de Pascale <mdepascale at dii.unisi.it> wrote:
> So I was not saying that this is a bug, or that it will break some code
> in the future, but since I suppose that the C++ target for ANTLR3 is
> already being rewritten, I still suggest that it could be worth to do a
> bit of find-and-replace to handle this.

There's variable names coming from some parts of the 'base'
codegenerator. If these do not need additionial processing then I'll
probably will not touch them (so '_' may creep in there). In the
support code itself you will probably never see '_' at the start of a
variable since I dislike it.

> Why is _ttype better than ttype, tokenType, token_type, or whatever one
> can choose?

Whichever works ;) as long as it's used structurally across the
library. I like consistency.

> P.S. is ANTLR3 C++ target complete?

I was catching up before I bought my house, but the C++ target never
left prototype stage. At the moment work will probably restart end of
januari after I've done most of the decorating moving. I can give no
timeframe since work interferes a lot as well.

Cheers,

Ric

From dsplaisted at gmail.com  Mon Jan  1 08:58:21 2007
From: dsplaisted at gmail.com (Daniel Plaisted)
Date: Mon, 1 Jan 2007 11:58:21 -0500
Subject: [antlr-interest] Several questions
Message-ID: <af2527a40701010858q41b214e1m77ef7b7882fc8167@mail.gmail.com>

I am working on a source-to-source compiler using ANTLR 3 and
ANTLRWorks.  I have a few questions.

1. Case insensitivity - I need my grammar to be case insensitive.
There was a Wiki FAQ entry that linked to this thread:
http://www.antlr.org/pipermail/antlr-interest/2006-May/016269.html

I couldn't find any case insensitive lexer class in the ANTLR source
code, so it appears I will need to write my own.  In addition, I can't
find a way to specify from inside my grammar that the lexer should
derive from a different class than "Lexer".  Is there a way to do
this?

2. C# runtime - I can use Java if need be, but C# would be
preferrable.  I can set the language=CSharp option and get C# output.
However, I can't find the runtime libraries for C#.  Do they exist at
this point?  If I remember correctly, db4o uses a Java to C# compiler
to support both Java and .NET, so maybe the same type of thing could
be used to generate the C# runtime files.

3. If Then Else ambiguity - I have a rule which looks like:
ifStat : 'if' expr 'then' stat ('else' stat)?;
where stat is the nonterminal for a statement, which could be an if
statement also.  This grammar is ambiguous, because with nested if
statements such as "if a=1 then if b=2 then c=3 else c=4" it is not
clear which if the else belongs to.  ANTLR gives the following
warning:
[15:49:08] warning(200): EasyLanguage.g:111:30: Decision can match
input such as "'else'" using multiple alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input

My compiler book suggests a solution such as the following to remove
the ambiguity:

ifStat : 'if' expr 'then' ifWithElse 'else' stat
    | 'if' expr 'then' stat
    ;

ifWithElse : 'if' expr 'then' ifWithElse 'else' ifWithElse
    | nonIfStat
    ;

This resolves the ambiguity in the grammar, but makes parsing the
grammar harder.  I get this error:
[15:58:51] error(211): EasyLanguage.g:109:21: [fatal] rule ifStat has
non-LL(*) decision due to recursive rule invocations reachable from
alts 1,2.  Resolve by left-factoring or using syntactic predicates or
using backtrack=true option.

If I turn on backtracking, it works.  However, I would prefer to be
able to parse the grammar without backtracking.

Is there a solution for this problem that avoids both backtracking and
ambiguity?

Thanks,
Daniel

From agnisys at yahoo.com  Mon Jan  1 09:33:16 2007
From: agnisys at yahoo.com (Agnisys)
Date: Mon, 1 Jan 2007 09:33:16 -0800 (PST)
Subject: [antlr-interest] Newbie questions: How to traverse the AST ...
In-Reply-To: <45993390.5020204@gmail.com>
Message-ID: <8067.19893.qm@web32608.mail.mud.yahoo.com>

Thats my problem! I need to be able to match the following: 
LHS5=CDE=ABC=XYZ=10

How can I do it, any ideas? 

Thanks,
Anupam.


> Right, there'll be a non-determinism in the production for `rhs`.
> For the sample inputs you had provided,
> 	rhs:lhs(EQUALS rhs)? | NUMBER ;
> should work.
> 
> lhs(EQUALS rhs)* was just trying to handle the last case of the input I 
> had tried, namely LHS5=CDE=ABC=XYZ=10.
> 


From dave at badgers-in-foil.co.uk  Mon Jan  1 10:37:23 2007
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Mon, 1 Jan 2007 18:37:23 +0000
Subject: [antlr-interest] Several questions
In-Reply-To: <af2527a40701010858q41b214e1m77ef7b7882fc8167@mail.gmail.com>
References: <af2527a40701010858q41b214e1m77ef7b7882fc8167@mail.gmail.com>
Message-ID: <20070101183723.GB29802@badgers-in-foil.co.uk>

Hi,

On Mon, Jan 01, 2007 at 11:58:21AM -0500, Daniel Plaisted wrote:
> 3. If Then Else ambiguity - I have a rule which looks like:
> ifStat : 'if' expr 'then' stat ('else' stat)?;

> ANTLR gives the following warning:
> [15:49:08] warning(200): EasyLanguage.g:111:30: Decision can match
> input such as "'else'" using multiple alternatives: 1, 2
> As a result, alternative(s) 2 were disabled for that input

ANTLR is dealing with the grammar ambiguity by removing it for you.

i.e. given that the grammar gives,
  alternative 1: match the "else" now
  alternative 2: exit the (..)? and match the else in an enclosing
                 recursive invocation

it has disabled the second option, which is probably what you want (i.e.
the "else" binds to the closest if..then).

I got the warning to go away in my grammar by using a predicate to
explicitly request this behaviour,

  ifStatement
      :    IF^ condition statement
           ((ELSE)=>ELSE statement)?
      ;

Hopefully that's the correct thing to do.


ta,
dave

-- 
http://david.holroyd.me.uk/

From antlr at mirality.co.nz  Mon Jan  1 11:37:25 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 02 Jan 2007 08:37:25 +1300
Subject: [antlr-interest] Newbie questions: How to traverse the AST ...
In-Reply-To: <670513.56204.qm@web32604.mail.mud.yahoo.com>
References: <4598421B.20109@gmail.com>
	<670513.56204.qm@web32604.mail.mud.yahoo.com>
Message-ID: <7.0.1.0.0.20070102083321.037b7368@mirality.co.nz>

At 13:59 1/01/2007, Agnisys wrote:
 >NEWLINE :('\r''\n')=> '\r''\n' //DOS
 >     | '\n'                  //UNIX
 >     { newline(); }
 >     ;

FYI, that definition is incorrect -- it's only going to call the 
newline() function if it encounters UNIX-style line breaks, not 
DOS-style line breaks.

You need to enclose the alt-block in an additional set of 
parentheses, so that the action follows a single term, not an 
alt.  Or put the same action on both alts.

Alternatively, you can probably get away with writing it as a 
single alt, like so:
   '\r'? '\n'


From dave at badgers-in-foil.co.uk  Mon Jan  1 12:59:52 2007
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Mon, 1 Jan 2007 20:59:52 +0000
Subject: [antlr-interest] synpred busted for parametrised rules
Message-ID: <20070101205952.GA31444@badgers-in-foil.co.uk>

[I downloaded and compiled the ANTLR source earlier today.]

In my grammar, I have the following rules,

relationalExpression[int inAllowed]
    :   (    shiftExpression
             -> shiftExpression
        )
        (    relationalOperator[inAllowed] shiftExpression
             -> ^(relationalOperator $relationalExpression
                                     shiftExpression)
        )*
    ;

relationalOperator[int inAllowed]
    :    {inAllowed==ALLOW_IN}? IN
    |    LT | GT | LE | GE | isKeyword | asKeyword | 'instanceof'
    ;

When compiling the grammar, ANTLR gives "Decision can match input ..
using multiple alternatives" warnings for relationalExpression and so
(I'm assuming) adds a syntactic predicate to disable the second alt.

However, the generated predicate looks like this:

  public void synpred7_fragment() throws RecognitionException {   
      // as3.g3:781:21: ( relationalOperator[inAllowed] )
      // as3.g3:781:22: relationalOperator[inAllowed]
      {
      pushFollow(FOLLOW_relationalOperator_in_synpred73344);
      relationalOperator(inAllowed);
      _fsp--;
      if (failed) return ;

      }
  }

Which doesn't compile, since 'inAllowed' is not passed to this method.

If I add '(relationalOperator[inAllowed])=>' by hand to disable the
warnings, the same sort of thing happens.

Is the eventual aim to allow code like this to work, or is this
something unsupported which just lacks better error reporting at the
moment?

I'll try to convert the code to use a global scope for the moment.


ta,
dave

-- 
http://david.holroyd.me.uk/

From jab.antlr at species.org  Mon Jan  1 14:15:29 2007
From: jab.antlr at species.org (James Briant)
Date: Mon, 1 Jan 2007 14:15:29 -0800
Subject: [antlr-interest] charvocab?
Message-ID: <e063fb510701011415y3599a02at7cd818bc463e23e8@mail.gmail.com>

Is there an equivalent for charVocabular in 3.0 or is it automatically
unicode?

Jamie
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070101/84c69c3b/attachment.html 

From jimi at intersystems.com  Mon Jan  1 15:39:10 2007
From: jimi at intersystems.com (Jim Idle)
Date: Mon, 1 Jan 2007 18:39:10 -0500
Subject: [antlr-interest] Several questions
In-Reply-To: <af2527a40701010858q41b214e1m77ef7b7882fc8167@mail.gmail.com>
Message-ID: <20070101233907.783685B1@mail.intersystems.com>

Here is a case insenstive input stream, you should be able to adapt it
to any other type of stream. Basically this uses case insensitivity fgor
matching tokens but leaves the input stream in tact, which is generally
what is wanted:

import org.antlr.runtime.*;
import java.io.*;

/**
 *
 * @author jimi
 */
public class ANTLRNoCaseFileStream  extends ANTLRFileStream
{
	public ANTLRNoCaseFileStream(String fileName) throws IOException
{
		super(fileName, null);
	}

	public ANTLRNoCaseFileStream(String fileName, String encoding)
throws IOException {
		super(fileName, encoding);
	}
	    
	public int LA(int i) {
		if ( i==0 ) {
			return 0; // undefined
		}
		if ( i<0 ) {
			i++; // e.g., translate LA(-1) to use offset 0 
		}

		if ( (p+i-1) >= n ) {
            //System.out.println("char LA("+i+")=EOF; p="+p);
            return CharStream.EOF;
        }
        //System.out.println("char LA("+i+")="+data.charAt(p+i-1)+";
p="+p);
        return Character.toUpperCase(data[p+i-1]);
    }
}

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest- 


I am working on a source-to-source compiler using ANTLR 3 and
ANTLRWorks.  I have a few questions.

1. Case insensitivity - I need my grammar to be case insensitive.
There was a Wiki FAQ entry that linked to this thread:
http://www.antlr.org/pipermail/antlr-interest/2006-May/016269.html


From ilia at obnovlenie.ru  Tue Jan  2 06:34:56 2007
From: ilia at obnovlenie.ru (Ilia Kantor)
Date: Tue, 2 Jan 2007 17:34:56 +0300
Subject: [antlr-interest] How to use predicate or workaround the bug ?
Message-ID: <200701021734.56783.ilia@obnovlenie.ru>


I'm using antlr 3b6 build from Tue Jan  2 14:28:20 UTC 2007. Also tried 3b5.

Trying to make use of predicate, but fail.. Is there a workaround ?

Here I try to rewrite 
'LCURL  exprs? RCURL' into 'TEXT exprs? TEXT' in common case and strip 
LCURL/RCURL if this LCURL/RCURL block is outmost, that is: if LCURL is first 
token.

==================== rule with predicate=====
curly_block
	:	
	 {input.index()==0}? LCURL exprs? RCURL -> exprs? |
     LCURL exprs? RCURL -> TEXT[$LCURL] exprs? TEXT[$RCURL]       
===================== error  ===========


ANTLR Parser Generator  Version 3.0b6 (??)  1989-2007
Exception in thread "main" java.lang.StackOverflowError
        at java.util.HashMap$KeyIterator.<init>(HashMap.java:875)
        at java.util.HashMap$KeyIterator.<init>(HashMap.java:875)
        at java.util.HashMap.newKeyIterator(HashMap.java:889)
        at java.util.HashMap$KeySet.iterator(HashMap.java:921)
        at java.util.HashSet.iterator(HashSet.java:154)
        at 
org.antlr.analysis.DFAState.getGatedPredicatesInNFAConfigurations(DFAState.java:695)
        at 
org.antlr.codegen.CodeGenerator.canGenerateSwitch(CodeGenerator.java:1119)
        at 
org.antlr.codegen.ACyclicDFACodeGenerator.walkFixedDFAGeneratingStateMachine(ACyclicDFACodeGenerator.java:72)
        at 
org.antlr.codegen.ACyclicDFACodeGenerator.walkFixedDFAGeneratingStateMachine(ACyclicDFACodeGenerator.java:146)
=..................... the latest line repeats many times ..........=



======= Full grammar ===========


/* putting this to tokens { .. } causes antlrworks bugs like "...no lexer rule 
for IF..." */
IF	:	{false}? .;
THEN	:	{false}? .;
ELSE	:	{false}? .;
EVAL	:	{false}? .;
TEXT	:	{false}? .;
RULE_PROPERTY	:	{false}? .;
RULE_PART	:	{false}? .;

LCURL	:	'{';
RCURL	:	'}';

RULE_CALL
	:	'#';

CONTROL
	:	'~';
	
SEMI:	';';

DOT	:	'.';

MINUS
	:	'-';

GT	:	'>';

SPECIAL_CHAR
	:	'`' | '!' | '@' | '$' | '%' | '^' | '&' | '*' | '(' | ')' |  
	'+' | '=' | '[' | ']' | ':' | '\'' | '"' | '\\' | '|' | ',' | '<' |
	 '/' | '?';
	


fragment WS_CHAR  :
       (' '|'\r'|'\t'|'\u000C'|'\n' )
    ;
    
WS	:	WS_CHAR+;

// not SPECIAL_CHAR not WS_CHAR
WORD:	
{
	// check if previous token was CONTROL
	Boolean afterControl = input.index()>0 && input.LT(-1)=='~';
}
	(~ ('`' | '!' | '@' | '$' | '%' | '^' | '&' | '*' | '(' | ')' |  
	'+' | '=' | '[' | ']' | ':' | '\'' | '"' | '\\' | '|' | ',' | '<' | '/' | '?'
	| '{' 
	| '~'
	| '}'
	| '#'
	| ';'
	| '.'
	| '-'
	| '>'	
	| ' '|'\r'|'\t'|'\u000C'|'\n' ) )+ 
{
    if (afterControl) {
    	// output WORDs as commands if after control
		if (getText().equalsIgnoreCase("if")) $type=IF;
		else if (getText().equalsIgnoreCase("else")) $type=ELSE;
		else if (getText().equalsIgnoreCase("then")) $type=THEN;
	}
}
;



document
	:	 exprs;


exprs:
        (expr)+
;


expr:
(
        expr_no_semi -> expr_no_semi | 
        SEMI -> TEXT[$SEMI]
)
;

exprs_no_semi
        :       (expr_no_semi)+
;


expr_no_semi 
        :
                (expr_simple) | (curly_block)
        ;



exprs_simple 
        :       (expr_simple)+
        ;

/* expression without curl at start and ; */
expr_simple 
        :
        command   
        | rule_call 
        | text
;


command:
         command_eval |
         command_if  
;


command_if
       :
        CONTROL IF LCURL exprs? command_if_part_then command_if_part_else? 
RCURL ->
        ^(IF exprs? command_if_part_then command_if_part_else?)
;


command_if_part_else:
        CONTROL ELSE exprs? -> ^(ELSE exprs?)
;

command_if_part_then 
        : CONTROL THEN exprs? -> ^(THEN exprs?)
;



command_eval:
        CONTROL LCURL exprs? RCURL -> ^(EVAL exprs?)
;



rule_call: RULE_CALL WORD -> ^(RULE_CALL WORD) |
	RULE_CALL LCURL WORD rule_long_def_part* RCURL -> ^(RULE_CALL WORD 
rule_long_def_part*)
;

rule_long_def_part
	:	MINUS GT WORD -> ^(RULE_PROPERTY WORD) | 
		DOT WORD -> ^(RULE_PART WORD)
	;
	

curly_block
	:	
	 {true}? LCURL exprs? RCURL -> exprs? 
	 |  LCURL exprs? RCURL -> TEXT[$LCURL] exprs? TEXT[$RCURL]       
;

text:
	DOT -> TEXT[$DOT] | MINUS -> TEXT[$MINUS] | WORD -> TEXT[$WORD] 
	| WS -> TEXT[$WS] | GT -> TEXT[$GT] | SPECIAL_CHAR -> TEXT[$SPECIAL_CHAR]
;




From ning883 at gmail.com  Tue Jan  2 14:18:10 2007
From: ning883 at gmail.com (Ning Ji)
Date: Tue, 2 Jan 2007 17:18:10 -0500
Subject: [antlr-interest] <AST>: unexpected AST node: (
Message-ID: <e8a10f300701021418n5b861615wfd84f466321c9a3c@mail.gmail.com>

hi everyone, i have this very simple code exercising AST,
when i input (1+2),  it gives me

/home/antlr>./calc
(1+2)
<AST>: unexpected AST node: (
 ( 1 + 2 ) = 0

Anyone can give me some hints ? thanks !

------------------------- this is the main.cpp ---------------
//main.cpp
#include "CalcLexer.hpp"
#include "CalcParser.hpp"
#include "CalcTreeWalker.hpp"
#include <iostream.h>

using namespace std;
using namespace antlr;

int main()
{
  try {
    CalcLexer lexer(cin);
    CalcParser parser(lexer);
    ASTFactory factory;
    parser.initializeASTFactory(factory);
    parser.setASTFactory(&factory);
    parser.expr();
    RefAST t = parser.getAST();
    CalcTreeWalker walker;
    float r = walker.expr(t);
    cout << t->toStringList() << " = " << r << endl;
  } catch(exception& e) {
    cerr << "exception: " << e.what() << endl;
  }

  return 0;
}


----------- this is the *.g --------------------------------------------
// calc.g
options
{
    language="Cpp";
}

class CalcLexer extends Lexer;

public
INTEGER: (DIGIT)+;
LPAREN: '(';
RPAREN: ')';
PLUS: '+';
protected
DIGIT: '0'..'9';

class CalcParser extends Parser;
options
{
    buildAST=true;
}
expr: LPAREN INTEGER (PLUS INTEGER)* RPAREN;


class CalcTreeWalker extends TreeParser;

expr returns [float r]
{
    float a,b;
    r=0;
}
: #(PLUS a=expr b=expr) {r = a+b;}
| i:DIGIT {r = atof(i->getText().c_str());}
;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070102/88ca0d93/attachment.html 

From parrt at cs.usfca.edu  Tue Jan  2 15:20:00 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 2 Jan 2007 15:20:00 -0800
Subject: [antlr-interest] <AST>: unexpected AST node: (
In-Reply-To: <e8a10f300701021418n5b861615wfd84f466321c9a3c@mail.gmail.com>
References: <e8a10f300701021418n5b861615wfd84f466321c9a3c@mail.gmail.com>
Message-ID: <E4EAB3B1-1E4C-4733-81C3-C12AF6097128@cs.usfca.edu>

hi.

in

expr: LPAREN INTEGER (PLUS INTEGER)* RPAREN;

you need make it

expr: LPAREN! INTEGER (PLUS^ INTEGER)* RPAREN!;


Ter


From boutter at ps.uni-sb.de  Wed Jan  3 03:10:09 2007
From: boutter at ps.uni-sb.de (Christophe Boutter)
Date: Wed, 03 Jan 2007 12:10:09 +0100
Subject: [antlr-interest] Line and Column information lost during AST
	creation
Message-ID: <459B8F11.5000004@ps.uni-sb.de>

Hey folks,

I hope you can help me. This is my first message on the list, so I hope
I do not ask something asked a lot of times before.

My problem is that during the AST creation in the parser all information
about lines and columns of the lexer Token is lost. But I need this
informations badly. Why is that?

I use ANTLR 2.7.7 in conjunction with Java.

An example of a parser rule which I used to test this, is:
actionDeclaration
	: "action" idList SEMI
	| "patient" "action" idList SEMI
	| "impatient" "action" idList SEMI
	;

idList
	: ID (COMMA ID)*
	;

Nothing fancy as I see it. The AST is created just as expected, only the
line and column infos are lost.

I would be very thankful for any help.

Cheers Chris
-- 
Try not to become a man of success, but rather try to become a man of value.
-- Albert Einstein


From nobrow at eircom.net  Wed Jan  3 05:22:31 2007
From: nobrow at eircom.net (Alan Larkin)
Date: Wed, 03 Jan 2007 13:22:31 +0000
Subject: [antlr-interest] How to Compile Wiggs' C++ Grammar
Message-ID: <459BAE17.9030105@eircom.net>

I am new to Antlr and come in search of a useful C++ grammar. I have
found David Wiggs' one
(www.antlr.org/grammar/1132152279791/CPP_parser_v_3.1.zip) but I have no
idea what I am supposed to do with it after running antlr.Tool as there
are no instructions on how the resulting .cpp/.hpp files should be compiled.

As this is the only C++ grammar in the Antlr grammar list and it seems
to be well maintained, I assume it is widely used. So hopefully someone
knows how I should compile these files (using gcc ... NOT MSVC!).

Many thanks in advance.


From mdepascale at dii.unisi.it  Wed Jan  3 06:34:07 2007
From: mdepascale at dii.unisi.it (Maurizio de Pascale)
Date: Wed, 03 Jan 2007 15:34:07 +0100
Subject: [antlr-interest] bug: token names stored with enclosing quotation
	marks
Message-ID: <459BBEDF.8090301@dii.unisi.it>

Hi,
I've noticed that token names specified in the tokens section of the 
lexer get (wrongly?) stored with the enclosing quotation marks:

tokens
{
    IDENTIFIER = "identifier";
}

const char* TestParser::tokenNames[] = {
    ...
    "\"identifier\""
    ...
}


while those specified in the paraphrase option for the token get stored 
without, just like implicit names assigned to unnamed tokens.


IDENTIFIER
    options{paraphrase = "identifier";}
   
const char* TestParser::tokenNames[] = {
    ...
    "identifier"
    "LPAREN"
    ...
}



using ANTLR2.7.7/C++

From ryan.hollom at us.lawson.com  Wed Jan  3 07:00:17 2007
From: ryan.hollom at us.lawson.com (Ryan Hollom)
Date: Wed, 3 Jan 2007 09:00:17 -0600
Subject: [antlr-interest] Multi-word keyword matching question
Message-ID: <OF07557148.335840DB-ON86257258.005070FC-86257258.00526C28@lawson.com>

Greetings all-

I have posted the following message a couple of times in the past, and 
have not yet received an answer that describes how the antlr keyword 
recognition really works.  Perhaps the new year will bring forth a new 
perspective on the topic.

I am writing a parser/lexer for a language with the following constructs, 
and am having difficulty getting the lexer to work properly. 

identifier is a Field 
        identifier is a LocalField 
        identifier is Numeric 
        identifier is an AddressField 

So, I have the keywords 'is a Field', 'is a', 'is', and 'is an' 
('LocalField' and 'AddressField' can be any name, and 'Numeric' can be one 
of about 30 different things). 

I've had a difficult time defining the rules for these, as I get a lexer 
no viable alt error.  Here is an example of my rule:
fieldDefinition : 
        identifier 'is a Field' 
                (identifier  
                        (('is a' | 'is an') identifier) | 'is' 
primitiveType)
                ); 

primitiveType : 'Alpha' | 'Numeric'; 

Here is the example lexer:
NEWLINE :   (('\r')? '\n' )+ ; 
ID        : ( 'A' .. 'Z' | '0' .. '9') ( 'A' .. 'Z' | 'a' .. 'z' | '0' .. 
'9')*; 
WS        :        (' '|'\t')+ {$channel=HIDDEN;}; <-- is this rule the 
problem???

The lexer then chokes on input like: 
MyField is a Field 
        MyNumericField is Numeric 

with a no viable alt line 2:20; char='N' 

The solution in the past has been to break apart the multi-word keywords 
into multiple single-word keywords.  This, conceptually, makes sense 
(although there are added complications with keyword vs identifier 
matching).  However, my grammar is quite large (the generated parser is 
~3Mb), and breaking apart all of the multi-word keywords increases the 
size of the parser by over 200k.  More disconcerting, however, is that 
when I do so the parser no longer compiles as "the static initializer 
exceeds 65k bytes".  It also increases the max fixed k by 6, and I wonder 
what it will do to performance (consider that some of the multi word 
keywords are 6+ words).

It would seem to me that the lexer should match the longest keyword 
possible.  That is, it should first try to match 'is a Field', followed by 
'is a', and finally 'is'.

Can anyone shed some light as to why antlr does not behave this way?

Thanks in advance, 
Ryan 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070103/4413f994/attachment.html 

From ssiegel at finjan.com  Wed Jan  3 08:39:53 2007
From: ssiegel at finjan.com (Shmuel Siegel)
Date: Wed, 3 Jan 2007 18:39:53 +0200
Subject: [antlr-interest] Antlr3 b.5 treeparser problem - misplaced action
Message-ID: <E344C433F006AB45A306D422F9C3EB4C0121A749@exmail1.finjan.com>

I wrote the following pattern

            ^(e=entity{value=$e} X?)

 

Antlr produced the following logic

 

            e=entity();

            if( input.LA(1) == Token.DOWN){

                        match(input Token.DOWN, null);

                        value = e;.

            ......

                        match(input Token.UP, null);

            }

 

In other words, Antlr was perfectly willing to deal with the possibility
that no X means no tree. But the action was only done if there was a
tree.

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070103/0edfcfef/attachment-0001.html 

From zhixueyong at hotmail.com  Wed Jan  3 10:39:43 2007
From: zhixueyong at hotmail.com (Xue Yong Zhi)
Date: Wed, 03 Jan 2007 13:39:43 -0500
Subject: [antlr-interest] Line and Column information lost during AST
	creation
In-Reply-To: <459B8F11.5000004@ps.uni-sb.de>
References: <459B8F11.5000004@ps.uni-sb.de>
Message-ID: <459BF86F.5060702@hotmail.com>

You need to replace the default AST class with the one like this:
http://xruby.googlecode.com/svn/trunk/src/com/xruby/compiler/parser/ASTWithLineNumber.java

Then call setASTNodeClass in your parser to use your AST class, e.g.
setASTNodeClass("com.xruby.compiler.parser.ASTWithLineNumber");

Christophe Boutter wrote:
> My problem is that during the AST creation in the parser all information
> about lines and columns of the lexer Token is lost. But I need this
> informations badly. Why is that?
> 


-- 
Xue Yong Zhi
http://seclib.blogspot.com


From parrt at cs.usfca.edu  Wed Jan  3 11:37:44 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 3 Jan 2007 11:37:44 -0800
Subject: [antlr-interest] Antlr3 b.5 treeparser problem - misplaced
	action
In-Reply-To: <E344C433F006AB45A306D422F9C3EB4C0121A749@exmail1.finjan.com>
References: <E344C433F006AB45A306D422F9C3EB4C0121A749@exmail1.finjan.com>
Message-ID: <40CF5BE3-D320-4C91-A7EF-3B79ED43276A@cs.usfca.edu>

Thanks!  Adding to list.
Ter
On Jan 3, 2007, at 8:39 AM, Shmuel Siegel wrote:

> I wrote the following pattern
>
>             ^(e=entity{value=$e} X?)
>
>
>
> Antlr produced the following logic
>
>
>
>             e=entity();
>
>             if( input.LA(1) == Token.DOWN){
>
>                         match(input Token.DOWN, null);
>
>                         value = e;.
>
>             ??
>
>                         match(input Token.UP, null);
>
>             }
>
>
>
> In other words, Antlr was perfectly willing to deal with the  
> possibility that no X means no tree. But the action was only done  
> if there was a tree.
>
>
>
>


From parrt at cs.usfca.edu  Wed Jan  3 11:40:05 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 3 Jan 2007 11:40:05 -0800
Subject: [antlr-interest] How to use predicate or workaround the bug ?
In-Reply-To: <200701021734.56783.ilia@obnovlenie.ru>
References: <200701021734.56783.ilia@obnovlenie.ru>
Message-ID: <39EA86BA-D220-4DEA-B61D-160A438A958D@cs.usfca.edu>

 From the book:

Another limitation on semantic predicates is that they should not
reference local variables, parameters, or anything else that is not
visible to all rules just in case they are hoisted out of one rule
into another's prediction DFA. If you are positive that the predicate
will not be hoisted out of the rule, you can use a parameter, for
example, to alter prediction in a rule:

method[boolean allowConcrete]
     :   {allowConcrete}?=> methodHead body
     |   methodHead ';'
     ;

Workaround is a field or dynamically scope var.

Ter
On Jan 2, 2007, at 6:34 AM, Ilia Kantor wrote:

>
> I'm using antlr 3b6 build from Tue Jan  2 14:28:20 UTC 2007. Also  
> tried 3b5.
>
> Trying to make use of predicate, but fail.. Is there a workaround ?
>
> Here I try to rewrite
> 'LCURL  exprs? RCURL' into 'TEXT exprs? TEXT' in common case and strip
> LCURL/RCURL if this LCURL/RCURL block is outmost, that is: if LCURL  
> is first
> token.
>
> ==================== rule with predicate=====
> curly_block
> 	:	
> 	 {input.index()==0}? LCURL exprs? RCURL -> exprs? |
>      LCURL exprs? RCURL -> TEXT[$LCURL] exprs? TEXT[$RCURL]
> ===================== error  ===========
>
>
> ANTLR Parser Generator  Version 3.0b6 (??)  1989-2007
> Exception in thread "main" java.lang.StackOverflowError
>         at java.util.HashMap$KeyIterator.<init>(HashMap.java:875)
>         at java.util.HashMap$KeyIterator.<init>(HashMap.java:875)
>         at java.util.HashMap.newKeyIterator(HashMap.java:889)
>         at java.util.HashMap$KeySet.iterator(HashMap.java:921)
>         at java.util.HashSet.iterator(HashSet.java:154)
>         at
> org.antlr.analysis.DFAState.getGatedPredicatesInNFAConfigurations 
> (DFAState.java:695)
>         at
> org.antlr.codegen.CodeGenerator.canGenerateSwitch 
> (CodeGenerator.java:1119)
>         at
> org.antlr.codegen.ACyclicDFACodeGenerator.walkFixedDFAGeneratingStateM 
> achine(ACyclicDFACodeGenerator.java:72)
>         at
> org.antlr.codegen.ACyclicDFACodeGenerator.walkFixedDFAGeneratingStateM 
> achine(ACyclicDFACodeGenerator.java:146)
> =..................... the latest line repeats many times ..........=
>
>
>
> ======= Full grammar ===========
>
>
> /* putting this to tokens { .. } causes antlrworks bugs like "...no  
> lexer rule
> for IF..." */
> IF	:	{false}? .;
> THEN	:	{false}? .;
> ELSE	:	{false}? .;
> EVAL	:	{false}? .;
> TEXT	:	{false}? .;
> RULE_PROPERTY	:	{false}? .;
> RULE_PART	:	{false}? .;
>
> LCURL	:	'{';
> RCURL	:	'}';
>
> RULE_CALL
> 	:	'#';
>
> CONTROL
> 	:	'~';
> 	
> SEMI:	';';
>
> DOT	:	'.';
>
> MINUS
> 	:	'-';
>
> GT	:	'>';
>
> SPECIAL_CHAR
> 	:	'`' | '!' | '@' | '$' | '%' | '^' | '&' | '*' | '(' | ')' |
> 	'+' | '=' | '[' | ']' | ':' | '\'' | '"' | '\\' | '|' | ',' | '<' |
> 	 '/' | '?';
> 	
>
>
> fragment WS_CHAR  :
>        (' '|'\r'|'\t'|'\u000C'|'\n' )
>     ;
>
> WS	:	WS_CHAR+;
>
> // not SPECIAL_CHAR not WS_CHAR
> WORD:	
> {
> 	// check if previous token was CONTROL
> 	Boolean afterControl = input.index()>0 && input.LT(-1)=='~';
> }
> 	(~ ('`' | '!' | '@' | '$' | '%' | '^' | '&' | '*' | '(' | ')' |
> 	'+' | '=' | '[' | ']' | ':' | '\'' | '"' | '\\' | '|' | ',' | '<'  
> | '/' | '?'
> 	| '{'
> 	| '~'
> 	| '}'
> 	| '#'
> 	| ';'
> 	| '.'
> 	| '-'
> 	| '>'	
> 	| ' '|'\r'|'\t'|'\u000C'|'\n' ) )+
> {
>     if (afterControl) {
>     	// output WORDs as commands if after control
> 		if (getText().equalsIgnoreCase("if")) $type=IF;
> 		else if (getText().equalsIgnoreCase("else")) $type=ELSE;
> 		else if (getText().equalsIgnoreCase("then")) $type=THEN;
> 	}
> }
> ;
>
>
>
> document
> 	:	 exprs;
>
>
> exprs:
>         (expr)+
> ;
>
>
> expr:
> (
>         expr_no_semi -> expr_no_semi |
>         SEMI -> TEXT[$SEMI]
> )
> ;
>
> exprs_no_semi
>         :       (expr_no_semi)+
> ;
>
>
> expr_no_semi
>         :
>                 (expr_simple) | (curly_block)
>         ;
>
>
>
> exprs_simple
>         :       (expr_simple)+
>         ;
>
> /* expression without curl at start and ; */
> expr_simple
>         :
>         command
>         | rule_call
>         | text
> ;
>
>
> command:
>          command_eval |
>          command_if
> ;
>
>
> command_if
>        :
>         CONTROL IF LCURL exprs? command_if_part_then  
> command_if_part_else?
> RCURL ->
>         ^(IF exprs? command_if_part_then command_if_part_else?)
> ;
>
>
> command_if_part_else:
>         CONTROL ELSE exprs? -> ^(ELSE exprs?)
> ;
>
> command_if_part_then
>         : CONTROL THEN exprs? -> ^(THEN exprs?)
> ;
>
>
>
> command_eval:
>         CONTROL LCURL exprs? RCURL -> ^(EVAL exprs?)
> ;
>
>
>
> rule_call: RULE_CALL WORD -> ^(RULE_CALL WORD) |
> 	RULE_CALL LCURL WORD rule_long_def_part* RCURL -> ^(RULE_CALL WORD
> rule_long_def_part*)
> ;
>
> rule_long_def_part
> 	:	MINUS GT WORD -> ^(RULE_PROPERTY WORD) |
> 		DOT WORD -> ^(RULE_PART WORD)
> 	;
> 	
>
> curly_block
> 	:	
> 	 {true}? LCURL exprs? RCURL -> exprs?
> 	 |  LCURL exprs? RCURL -> TEXT[$LCURL] exprs? TEXT[$RCURL]
> ;
>
> text:
> 	DOT -> TEXT[$DOT] | MINUS -> TEXT[$MINUS] | WORD -> TEXT[$WORD]
> 	| WS -> TEXT[$WS] | GT -> TEXT[$GT] | SPECIAL_CHAR -> TEXT 
> [$SPECIAL_CHAR]
> ;
>
>
>


From parrt at cs.usfca.edu  Wed Jan  3 13:37:01 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 3 Jan 2007 13:37:01 -0800
Subject: [antlr-interest] should finally actions be put in the try-finally
	section?
Message-ID: <4DFEE724-68E6-4007-A232-EA3340AFAC7F@cs.usfca.edu>

Hi,

  check out the following rule that generates a template

prog
@finally {
// number of elements on stack is roughly number of operations + 1
// and add one for the address of the System.out object
%{$st}.maxStackDepth = new Integer(numOps+1+1);
}
     :   (s+=stat)+ -> jasminFile(instructions={$s})
     ;

note that there is an action that I want to be done after the  
template has been created by the rewrite rule so I put it in the  
finally action.  However, it actually goes into the finally{} of the  
try block for the rule, meaning that it will always be executed even  
if an exception is thrown in the rule.  If an exception is thrown in  
the rule, the template will not be generated and this action will  
throw a null pointer exception.  By a quirk of Java, the original  
exception is thrown away and you get the new null pointer exception,  
hiding the old one.  Very very mysterious and difficult to track down.

I am suggesting that we move where @finally actions are placed in the  
output to simply "after code for all alternatives has been generated"  
rather than in the actual finally clause of the rule.  The only  
negative is that you cannot then specify something that must be  
executed regardless of exceptions in the rule. We could split this  
into a @finally action and an @after action or something like that.  
Anybody have an opinion?

Ter

From ilia at obnovlenie.ru  Wed Jan  3 13:49:32 2007
From: ilia at obnovlenie.ru (Ilia Kantor)
Date: Thu, 4 Jan 2007 00:49:32 +0300
Subject: [antlr-interest] How to use predicate or workaround the bug ?
In-Reply-To: <39EA86BA-D220-4DEA-B61D-160A438A958D@cs.usfca.edu>
References: <200701021734.56783.ilia@obnovlenie.ru>
	<39EA86BA-D220-4DEA-B61D-160A438A958D@cs.usfca.edu>
Message-ID: <200701040049.32612.ilia@obnovlenie.ru>


Thanks for answering, Ter. The book is going to be a must-read for me =).

Still confused, what's up with predicate:

curly_block
	:	
	 {true}? LCURL exprs? RCURL -> TEXT[$LCURL] exprs? TEXT[$RCURL] |
	   LCURL exprs? RCURL -> exprs? 

The predicate does not reference anything, it's a plain "true" value.

How should I change it to work ? 

The ultimate question is  how to make 'input.index()==0' to work, but 'true' 
fails to compile also..

>  From the book:
>
> Another limitation on semantic predicates is that they should not
> reference local variables, parameters, or anything else that is not
> visible to all rules just in case they are hoisted out of one rule
> into another's prediction DFA. If you are positive that the predicate
> will not be hoisted out of the rule, you can use a parameter, for
> example, to alter prediction in a rule:
>
> method[boolean allowConcrete]
>
>      :   {allowConcrete}?=> methodHead body
>      :
>      |   methodHead ';'
>
>      ;
>
> Workaround is a field or dynamically scope var.
>
> Ter
>
> On Jan 2, 2007, at 6:34 AM, Ilia Kantor wrote:
> > I'm using antlr 3b6 build from Tue Jan  2 14:28:20 UTC 2007. Also
> > tried 3b5.
> >
> > Trying to make use of predicate, but fail.. Is there a workaround ?
> >
> > Here I try to rewrite
> > 'LCURL  exprs? RCURL' into 'TEXT exprs? TEXT' in common case and strip
> > LCURL/RCURL if this LCURL/RCURL block is outmost, that is: if LCURL
> > is first
> > token.
> >
> > ==================== rule with predicate=====
> > curly_block
> >
> > 	 {input.index()==0}? LCURL exprs? RCURL -> exprs? |
> >      LCURL exprs? RCURL -> TEXT[$LCURL] exprs? TEXT[$RCURL]
> > ===================== error  ===========
> >
> >
> > ANTLR Parser Generator  Version 3.0b6 (??)  1989-2007
> > Exception in thread "main" java.lang.StackOverflowError
> >         at java.util.HashMap$KeyIterator.<init>(HashMap.java:875)
> >         at java.util.HashMap$KeyIterator.<init>(HashMap.java:875)
> >         at java.util.HashMap.newKeyIterator(HashMap.java:889)
> >         at java.util.HashMap$KeySet.iterator(HashMap.java:921)
> >         at java.util.HashSet.iterator(HashSet.java:154)
> >         at
> > org.antlr.analysis.DFAState.getGatedPredicatesInNFAConfigurations
> > (DFAState.java:695)
> >         at
> > org.antlr.codegen.CodeGenerator.canGenerateSwitch
> > (CodeGenerator.java:1119)
> >         at
> > org.antlr.codegen.ACyclicDFACodeGenerator.walkFixedDFAGeneratingStateM
> > achine(ACyclicDFACodeGenerator.java:72)
> >         at
> > org.antlr.codegen.ACyclicDFACodeGenerator.walkFixedDFAGeneratingStateM
> > achine(ACyclicDFACodeGenerator.java:146)
> > =..................... the latest line repeats many times ..........=
> >
> >
> >
> > ======= Full grammar ===========
> >
> >
> > /* putting this to tokens { .. } causes antlrworks bugs like "...no
> > lexer rule
> > for IF..." */
> > IF	:	{false}? .;
> > THEN	:	{false}? .;
> > ELSE	:	{false}? .;
> > EVAL	:	{false}? .;
> > TEXT	:	{false}? .;
> > RULE_PROPERTY	:	{false}? .;
> > RULE_PART	:	{false}? .;
> >
> > LCURL	:	'{';
> > RCURL	:	'}';
> >
> > RULE_CALL
> >
> > 	:	'#';
> >
> > CONTROL
> >
> > 	:	'~';
> >
> > SEMI:	';';
> >
> > DOT	:	'.';
> >
> > MINUS
> >
> > 	:	'-';
> >
> > GT	:	'>';
> >
> > SPECIAL_CHAR
> >
> > 	:	'`' | '!' | '@' | '$' | '%' | '^' | '&' | '*' | '(' | ')' |
> >
> > 	'+' | '=' | '[' | ']' | ':' | '\'' | '"' | '\\' | '|' | ',' | '<' |
> > 	 '/' | '?';
> >
> >
> >
> > fragment WS_CHAR  :
> >        (' '|'\r'|'\t'|'\u000C'|'\n' )
> >     ;
> >
> > WS	:	WS_CHAR+;
> >
> > // not SPECIAL_CHAR not WS_CHAR
> > WORD:
> > {
> > 	// check if previous token was CONTROL
> > 	Boolean afterControl = input.index()>0 && input.LT(-1)=='~';
> > }
> > 	(~ ('`' | '!' | '@' | '$' | '%' | '^' | '&' | '*' | '(' | ')' |
> > 	'+' | '=' | '[' | ']' | ':' | '\'' | '"' | '\\' | '|' | ',' | '<'
> >
> > | '/' | '?'
> > |
> > 	| '{'
> > 	| '~'
> > 	| '}'
> > 	| '#'
> > 	| ';'
> > 	| '.'
> > 	| '-'
> > 	| '>'
> > 	| ' '|'\r'|'\t'|'\u000C'|'\n' ) )+
> >
> > {
> >     if (afterControl) {
> >     	// output WORDs as commands if after control
> > 		if (getText().equalsIgnoreCase("if")) $type=IF;
> > 		else if (getText().equalsIgnoreCase("else")) $type=ELSE;
> > 		else if (getText().equalsIgnoreCase("then")) $type=THEN;
> > 	}
> > }
> > ;
> >
> >
> >
> > document
> >
> > 	:	 exprs;
> >
> > exprs:
> >         (expr)+
> > ;
> >
> >
> > expr:
> > (
> >         expr_no_semi -> expr_no_semi |
> >         SEMI -> TEXT[$SEMI]
> > )
> > ;
> >
> > exprs_no_semi
> >
> >         :       (expr_no_semi)+
> >
> > ;
> >
> >
> > expr_no_semi
> >
> >                 (expr_simple) | (curly_block)
> >         ;
> >
> >
> >
> > exprs_simple
> >
> >         :       (expr_simple)+
> >
> >         ;
> >
> > /* expression without curl at start and ; */
> > expr_simple
> >
> >         command
> >
> >         | rule_call
> >         | text
> >
> > ;
> >
> >
> > command:
> >          command_eval |
> >          command_if
> > ;
> >
> >
> > command_if
> >
> >         CONTROL IF LCURL exprs? command_if_part_then
> > command_if_part_else?
> > RCURL ->
> >         ^(IF exprs? command_if_part_then command_if_part_else?)
> > ;
> >
> >
> > command_if_part_else:
> >         CONTROL ELSE exprs? -> ^(ELSE exprs?)
> > ;
> >
> > command_if_part_then
> >
> >         : CONTROL THEN exprs? -> ^(THEN exprs?)
> >
> > ;
> >
> >
> >
> > command_eval:
> >         CONTROL LCURL exprs? RCURL -> ^(EVAL exprs?)
> > ;
> >
> >
> >
> > rule_call: RULE_CALL WORD -> ^(RULE_CALL WORD) |
> > 	RULE_CALL LCURL WORD rule_long_def_part* RCURL -> ^(RULE_CALL WORD
> > rule_long_def_part*)
> > ;
> >
> > rule_long_def_part
> >
> > 	:	MINUS GT WORD -> ^(RULE_PROPERTY WORD) |
> >
> > 		DOT WORD -> ^(RULE_PART WORD)
> > 	;
> >
> >
> > curly_block
> >
> > 	 {true}? LCURL exprs? RCURL -> exprs?
> >
> > 	 |  LCURL exprs? RCURL -> TEXT[$LCURL] exprs? TEXT[$RCURL]
> >
> > ;
> >
> > text:
> > 	DOT -> TEXT[$DOT] | MINUS -> TEXT[$MINUS] | WORD -> TEXT[$WORD]
> >
> > 	| WS -> TEXT[$WS] | GT -> TEXT[$GT] | SPECIAL_CHAR -> TEXT
> >
> > [$SPECIAL_CHAR]
> > ;

From cyrixlin at yahoo.com  Thu Jan  4 02:20:24 2007
From: cyrixlin at yahoo.com (lin cyrix)
Date: Thu, 4 Jan 2007 02:20:24 -0800 (PST)
Subject: [antlr-interest] Odd problem about ANTLR
Message-ID: <852164.65272.qm@web38005.mail.mud.yahoo.com>

Hi, everybody,

I try to learn ANTLR (2.7.5) to write a small
calculator. I compose the file calc.g, generating java
class files with ANTLR 2.7.5 (also 2.7.7 with this
problem), it's ok. But when I compile the generated
java files, it fails, and obviously wrong code in it. 

Such as:
(In ArithParser.java)
//////////////////////////////////
	public final double  neg_expr() throws
RecognitionException, TokenStreamException {
		double result = 0;
		
		
		if ( inputState.guessing==0 ) {
			double value = 0;
		}
		match(MINUS);
		value=atom_expr();
		if ( inputState.guessing==0 ) {
			
			result = - value;
			
		}
		return result;
	}
//////////////////////////////////

Can anyone tell me what's wrong ? Is it a bug in
ANTLR, or I make some mistakes in my calc.g ?

Thanks a lot in advance.
Cyrix Lin



__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: calc.g
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20070104/125abca0/attachment.pl 

From jeremy.rayner at gmail.com  Thu Jan  4 02:46:08 2007
From: jeremy.rayner at gmail.com (Jeremy Rayner)
Date: Thu, 4 Jan 2007 10:46:08 +0000
Subject: [antlr-interest] Groovy 1.0 released
Message-ID: <90a60e760701040246q2d2f2681r5cdb117c0d1197b9@mail.gmail.com>

Hiya,
  Just wanted to share our success story with antlr...

Groovy 1.0 has just been released (
http://javanicus.com/blog2/items/204-index.html )
and it is using antlr 2.7.2 for the language parser.

* I took as the base the Studman java.g grammar (v1.22.4) which
includes Java1.5 syntax, and built groovy.g which includes the
syntactic sugar for common user tasks (creating maps etc) and all the
other groovy stuff.

* I have created a visitor with separate tree traversal for navigating
the CST, and can successfully walk the tree and output
- valid groovy (pretty printer)
- coloured source in html
- mindmap representation of CST (in freemind format)

* I have also written a java2groovy tool which uses the original
java.g to read in java sources, convert the java CST to a groovy CST,
and then output again using the groovy pretty printer.
  http://javanicus.com/blog2/items/203-index.html

Antlr has given Groovy a solid, deterministic grammar, thanks soo much Ter!

I'll be giving a talk on these topics in London on 25 Jan, so maybe
see some of you there
  free signup -> http://www.skillsmatter.com/groovy-grails-ug

Cheers,
Jez.
-- 
Groovy Engineer
http://javanicus.com/blog2

From boutter at ps.uni-sb.de  Thu Jan  4 04:48:54 2007
From: boutter at ps.uni-sb.de (Christophe Boutter)
Date: Thu, 04 Jan 2007 13:48:54 +0100
Subject: [antlr-interest] Line and Column information lost during AST
 creation
In-Reply-To: <459BF86F.5060702@hotmail.com>
References: <459B8F11.5000004@ps.uni-sb.de> <459BF86F.5060702@hotmail.com>
Message-ID: <459CF7B6.1030207@ps.uni-sb.de>

Xue Yong Zhi wrote:
> You need to replace the default AST class with the one like this:
> http://xruby.googlecode.com/svn/trunk/src/com/xruby/compiler/parser/ASTWithLineNumber.java

I now wrote something very similar.

> Then call setASTNodeClass in your parser to use your AST class, e.g.
> setASTNodeClass("com.xruby.compiler.parser.ASTWithLineNumber");

I've done that too. I call:
setASTNodeClass("modesteditor.core.antlrparser.ASTWithOffsetInfos");

That gives me the following error message:
Can't find/access AST Node
typemodesteditor.core.antlrparser.ASTWithOffsetInfos

I came across a tutorial for self designed ASTs and found that one
should include in the options of the parser and tree walker the statement:
ASTLabelType="modesteditor.core.antlrparser.ASTWithOffsetInfos"

But that wouldn't help either.

The problem may be that the TokenTypeToASTClassMap isn't initialized and
I think therefore the right AST class is not used. This is probably due
to the fact that the parser doesn't find the AST Node type. But why?

Thanks for help.
Chris

> 
> Christophe Boutter wrote:
>> My problem is that during the AST creation in the parser all information
>> about lines and columns of the lexer Token is lost. But I need this
>> informations badly. Why is that?
>>
> 
> 


-- 
Try not to become a man of success, but rather try to become a man of value.
-- Albert Einstein

From jbb at acm.org  Thu Jan  4 05:52:02 2007
From: jbb at acm.org (John B. Brodie)
Date: Thu, 04 Jan 2007 08:52:02 -0500
Subject: [antlr-interest] Odd problem about ANTLR
In-Reply-To: <852164.65272.qm@web38005.mail.mud.yahoo.com> (message from lin
	cyrix on Thu, 04 Jan 2007 02:20:24 -0800 (PST))
References: <852164.65272.qm@web38005.mail.mud.yahoo.com>
Message-ID: <E1H2T0k-0004Hc-00@gecko>

Hi!

On on Thu, 04 Jan 2007 02:20:24 -0800 (PST)), cyrix wrote:
>I try to learn ANTLR (2.7.5) to write a small
>calculator. I compose the file calc.g, generating java
>class files with ANTLR 2.7.5 (also 2.7.7 with this
>problem), it's ok. But when I compile the generated
>java files, it fails, and obviously wrong code in it. 

>...snipped...

>Can anyone tell me what's wrong ?

>...snipped...

You should put rule local variable declarations BEFORE the colon.

neg_expr returns [double result = 0]
{double value = 0;} :
    MINUS value = atom_expr {
        result = - value;
    }
    ;

and same for your other rules that declare variables.

Hope this helps...
   -jbb

From mail at martin-probst.com  Thu Jan  4 06:08:53 2007
From: mail at martin-probst.com (Martin Probst)
Date: Thu, 4 Jan 2007 15:08:53 +0100
Subject: [antlr-interest] performance of the C runtime for ANTLR 3
In-Reply-To: <C8EB616CF20CA143AD2DE9BF45C911B4ED98D3@cx41.800onemail.com>
References: <C8EB616CF20CA143AD2DE9BF45C911B4ED98D3@cx41.800onemail.com>
Message-ID: <FFA99041-219B-40EF-A6C5-4ACE584E36D8@martin-probst.com>

Hi,

I've done some small comparisons between C++ and Java with ANTLR 2.7  
something, turned out that the Java version was significantly faster  
(5x). I'm not sure why that was, but I had the feeling it was about  
string copying and reference counted memory management. I didn't do  
proper tests however. I hear the 3.0 C++ runtime was largely  
enhanced, so this is probably no longer true for ANTLR 3.

Regards,
Martin

Am 22.12.2006 um 17:21 schrieb Tom Liu:

> Hi Jim
>
>
>
> Do you know if there are general performance comparison information
>
> between the C parsers and java parsers all generated by antlr ?
>
>
>
>
>
> Merry Christmas
>
>
>
> Tom
>
>
> --
> No virus found in this incoming message.
> Checked by AVG Free Edition.
> Version: 7.5.432 / Virus Database: 268.15.14/578 - Release Date:  
> 12/7/2006 1:27 AM
>
>
> --
> No virus found in this incoming message.
> Checked by AVG Free Edition.
> Version: 7.5.432 / Virus Database: 268.15.15/579 - Release Date:  
> 12/7/2006 1:31 PM
>
>
>
> --
> No virus found in this outgoing message.
> Checked by AVG Free Edition.
> Version: 7.5.432 / Virus Database: 268.15.15/579 - Release Date:  
> 12/7/2006 1:31 PM
>
>
> --
> No virus found in this incoming message.
> Checked by AVG Free Edition.
> Version: 7.5.432 / Virus Database: 268.15.15/579 - Release Date:  
> 12/7/2006 1:31 PM
>
>
> --
> No virus found in this outgoing message.
> Checked by AVG Free Edition.
> Version: 7.5.432 / Virus Database: 268.15.15/579 - Release Date:  
> 12/7/2006 1:31 PM
>
>


From zhixueyong at hotmail.com  Thu Jan  4 08:00:38 2007
From: zhixueyong at hotmail.com (Xue Yong Zhi)
Date: Thu, 04 Jan 2007 11:00:38 -0500
Subject: [antlr-interest] Line and Column information lost during AST
	creation
In-Reply-To: <459CF7B6.1030207@ps.uni-sb.de>
References: <459B8F11.5000004@ps.uni-sb.de> <459BF86F.5060702@hotmail.com>
	<459CF7B6.1030207@ps.uni-sb.de>
Message-ID: <459D24A6.2060608@hotmail.com>


> 
> I've done that too. I call:
> setASTNodeClass("modesteditor.core.antlrparser.ASTWithOffsetInfos");
> 
> That gives me the following error message:
> Can't find/access AST Node
> typemodesteditor.core.antlrparser.ASTWithOffsetInfos
> 

It can be as simple as your ASTWithOffsetInfos is not a public class, or 
in a wrong package.
Antlr uses reflection to find ASTWithOffsetInfos.


From nobrow at eircom.net  Thu Jan  4 08:40:09 2007
From: nobrow at eircom.net (Alan Larkin)
Date: Thu, 04 Jan 2007 16:40:09 +0000
Subject: [antlr-interest] Is ANTLR the right tool for the job?
Message-ID: <459D2DE9.4050808@eircom.net>

I need to modify some C++ code, performing tasks such as replacing
primitive numeric variables with new objects and converting arithmetic
expressions to different forms.

I would like very much to do this using JavaCC as I have had very
positive experiences using it on Java in the past. By first passing the
grammar file through Java Tree Builder (JTB) the resulting parser will
return an abstract syntax tree for the inputted code, which supports the
visitor design pattern. I could then write small visitors to locate and
replace the relevant sections of code, reformat the code using a
formatting visitor, and finally dump the new code to file.

Unfortunately the C++ grammars for JavaCC are woefully substandard (10
years old!). ANTLR looks like it has a better C++ grammar but I am
unsure if it can be used to satisfy the above objectives.

Can the list please advise on whether or not ANTLR is suitable for this
task and possibly direct me to some useful examples of such processes?

Many thanks,
Alan.

From parrt at cs.usfca.edu  Thu Jan  4 10:00:35 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 4 Jan 2007 10:00:35 -0800
Subject: [antlr-interest] How to use predicate or workaround the bug ?
In-Reply-To: <200701040049.32612.ilia@obnovlenie.ru>
References: <200701021734.56783.ilia@obnovlenie.ru>
	<39EA86BA-D220-4DEA-B61D-160A438A958D@cs.usfca.edu>
	<200701040049.32612.ilia@obnovlenie.ru>
Message-ID: <90F8648F-5161-40E1-AAAE-DB265790267D@cs.usfca.edu>


On Jan 3, 2007, at 1:49 PM, Ilia Kantor wrote:

>
> Thanks for answering, Ter. The book is going to be a must-read for  
> me =).
>
> Still confused, what's up with predicate:
>
> curly_block
> 	:	
> 	 {true}? LCURL exprs? RCURL -> TEXT[$LCURL] exprs? TEXT[$RCURL] |
> 	   LCURL exprs? RCURL -> exprs?
>
> The predicate does not reference anything, it's a plain "true" value.
>
> How should I change it to work ?
>
> The ultimate question is  how to make 'input.index()==0' to work,  
> but 'true'
> fails to compile also..

works fine for me.  input.index()==0 should be fine too.

Ter


From ilia at obnovlenie.ru  Thu Jan  4 11:31:11 2007
From: ilia at obnovlenie.ru (Ilia Kantor)
Date: Thu, 4 Jan 2007 22:31:11 +0300
Subject: [antlr-interest] How to use predicate or workaround the bug ?
In-Reply-To: <90F8648F-5161-40E1-AAAE-DB265790267D@cs.usfca.edu>
References: <200701021734.56783.ilia@obnovlenie.ru>
	<200701040049.32612.ilia@obnovlenie.ru>
	<90F8648F-5161-40E1-AAAE-DB265790267D@cs.usfca.edu>
Message-ID: <200701042231.11272.ilia@obnovlenie.ru>


> > The ultimate question is  how to make 'input.index()==0' to work,
> > but 'true'
> > fails to compile also..
>
> works fine for me.  input.index()==0 should be fine too.

You took my grammar, and it compiled for you? That would be strange indeed!

Is that only me having problems with such grammar ? 

Anyone, please run ANTLR3 on it ?!? 

========================
grammar CommonRule;


options {
   	superClass=CommonRuleParentParser; 
   	output=AST;
}




@parser::header {
    package grammar.parser;
    
	import grammar.*;	
	import grammar.parser.*;
	import grammar.parser.exception.*;

    import org.apache.log4j.Logger;
    import java.util.Stack;
    import java.util.ArrayList;
}

@rulecatch { }

@parser::members {

    private static Logger logger = Logger.getLogger(CommonRuleParser.class);    

    protected String getTokenName(Token tok) {
    	return tokenNames[tok.getType()];
    }
}



@lexer::header {
    package grammar.parser;	
    import grammar.*;
    
}

/* putting this to tokens { .. } causes antlrworks bugs like "...no lexer rule 
for IF..." */
IF	:	{false}? .;
THEN	:	{false}? .;
ELSE	:	{false}? .;
EVAL	:	{false}? .;
TEXT	:	{false}? .;
GET_PROPERTY	:	{false}? .;
GET_PART	:	{false}? .;

LCURL	:	'{';
RCURL	:	'}';

GET_SCOPE_VALUE
	:	'#';

CONTROL
	:	'~';
	
SEMI:	';';

DOT	:	'.';

MINUS
	:	'-';

GT	:	'>';

SPECIAL_CHAR
	:	'`' | '!' | '@' | '$' | '%' | '^' | '&' | '*' | '(' | ')' |  
	'+' | '=' | '[' | ']' | ':' | '\'' | '"' | '\\' | '|' | ',' | '<' |
	 '/' | '?';
	


fragment WS_CHAR  :
       (' '|'\r'|'\t'|'\u000C'|'\n' )
    ;
    
WS	:	WS_CHAR+;

// not SPECIAL_CHAR not WS_CHAR
WORD:	
{
	// check if previous character was CONTROL
	Boolean afterControl = input.index()>0 && input.LT(-1)=='~';
}
	(~ ('`' | '!' | '@' | '$' | '%' | '^' | '&' | '*' | '(' | ')' |  
	'+' | '=' | '[' | ']' | ':' | '\'' | '"' | '\\' | '|' | ',' | '<' | '/' | '?'
	| '{' 
	| '~'
	| '}'
	| '#'
	| ';'
	| '.'
	| '-'
	| '>'	
	| ' '|'\r'|'\t'|'\u000C'|'\n' ) )+ 
{
    if (afterControl) {
    	// output WORDs as commands if after control
		if (getText().equalsIgnoreCase("if")) $type=IF;
		else if (getText().equalsIgnoreCase("else")) $type=ELSE;
		else if (getText().equalsIgnoreCase("then")) $type=THEN;
	}
}
;



document
	:	exprs;


exprs:
        (expr)+
;


expr:
(
        expr_no_semi -> expr_no_semi | 
        SEMI -> TEXT[$SEMI]
)
;

exprs_no_semi
        :       (expr_no_semi)+
;


expr_no_semi 
        :
                (expr_simple) | (curly_block)
        ;



exprs_simple 
        :       (expr_simple)+
        ;

/* expression without curl at start and ; */
expr_simple 
        :
        command   
        | rule_call 
        | text
;


command:
         command_eval |
         command_if  
;


command_if
       :
        CONTROL IF LCURL exprs? command_if_part_then command_if_part_else? 
RCURL ->
        ^(IF exprs? command_if_part_then command_if_part_else?)
;


command_if_part_else:
        CONTROL ELSE exprs? -> ^(ELSE exprs?)
;

command_if_part_then 
        : CONTROL THEN exprs? -> ^(THEN exprs?)
;



command_eval:
        CONTROL LCURL exprs? RCURL -> ^(EVAL exprs?)
;



rule_call: GET_SCOPE_VALUE WORD -> ^(GET_SCOPE_VALUE WORD) |
	GET_SCOPE_VALUE LCURL WORD rule_long_def_part* RCURL -> ^(GET_SCOPE_VALUE 
WORD rule_long_def_part*)
;

rule_long_def_part
	:	MINUS GT WORD -> ^(GET_PROPERTY WORD) | 
		DOT WORD -> ^(GET_PART WORD)
	;
	

curly_block
	:	
	 {true}? LCURL exprs? RCURL -> TEXT[$LCURL] exprs? TEXT[$RCURL] |
	   LCURL exprs? RCURL -> exprs? 
;
/*
curly_block
	:	
	 LCURL exprs? RCURL -> TEXT[$LCURL] exprs? TEXT[$RCURL]  
;*/


text:
	DOT -> TEXT[$DOT] | MINUS -> TEXT[$MINUS] | WORD -> TEXT[$WORD] 
	| WS -> TEXT[$WS] | GT -> TEXT[$GT] | SPECIAL_CHAR -> TEXT[$SPECIAL_CHAR]
;

From parrt at cs.usfca.edu  Thu Jan  4 11:44:45 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 4 Jan 2007 11:44:45 -0800
Subject: [antlr-interest] How to use predicate or workaround the bug ?
In-Reply-To: <200701042231.11272.ilia@obnovlenie.ru>
References: <200701021734.56783.ilia@obnovlenie.ru>
	<200701040049.32612.ilia@obnovlenie.ru>
	<90F8648F-5161-40E1-AAAE-DB265790267D@cs.usfca.edu>
	<200701042231.11272.ilia@obnovlenie.ru>
Message-ID: <5CB18D45-5318-470C-9293-7443680F3245@cs.usfca.edu>

Actually this grammar is something ANTLR does not seem to like... I  
could not even get to the point where I could compile the output.   
Did you mean compile or run through antlr?

Ter

From parrt at cs.usfca.edu  Thu Jan  4 11:49:43 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 4 Jan 2007 11:49:43 -0800
Subject: [antlr-interest] How to use predicate or workaround the bug ?
In-Reply-To: <200701042231.11272.ilia@obnovlenie.ru>
References: <200701021734.56783.ilia@obnovlenie.ru>
	<200701040049.32612.ilia@obnovlenie.ru>
	<90F8648F-5161-40E1-AAAE-DB265790267D@cs.usfca.edu>
	<200701042231.11272.ilia@obnovlenie.ru>
Message-ID: <5E219ED4-62D6-4AAC-B8DF-7304284F1C0C@cs.usfca.edu>

Looks like it runs out of memory and the code generator, I have added  
a bug

http://www.antlr.org:8888/browse/ANTLR-83

Ter

From ilia at obnovlenie.ru  Thu Jan  4 11:59:17 2007
From: ilia at obnovlenie.ru (Ilia Kantor)
Date: Thu, 4 Jan 2007 22:59:17 +0300
Subject: [antlr-interest] How to use predicate or workaround the bug ?
In-Reply-To: <5CB18D45-5318-470C-9293-7443680F3245@cs.usfca.edu>
References: <200701021734.56783.ilia@obnovlenie.ru>
	<200701042231.11272.ilia@obnovlenie.ru>
	<5CB18D45-5318-470C-9293-7443680F3245@cs.usfca.edu>
Message-ID: <200701042259.17284.ilia@obnovlenie.ru>

? ????????? ?? 4 ?????? 2007 22:44 Terence Parr ???????(a):
> Actually this grammar is something ANTLR does not seem to like... I
> could not even get to the point where I could compile the output.
> Did you mean compile or run through antlr?

I mean run antlr on it.. like
java org.antlr.Tool <Grammar>

Here is the problematic part:
===============
curly_block 
 : 
 {true}? LCURL exprs? RCURL -> TEXT[$LCURL] exprs? TEXT[$RCURL] | 
 LCURL exprs? RCURL -> exprs? 
 ; 
===============

remove it and uncomment the following

=================
 /* 
 curly_block 
 : 
 LCURL exprs? RCURL -> TEXT[$LCURL] exprs? TEXT[$RCURL] 
 ;*/ 
================

So it compiles.

I'd like to add this directly to JIRA, but couldn't find a way to Log in.


From antlr at jazillian.com  Thu Jan  4 13:05:17 2007
From: antlr at jazillian.com (Andy Tripp)
Date: Thu, 04 Jan 2007 16:05:17 -0500
Subject: [antlr-interest] Is ANTLR the right tool for the job?
In-Reply-To: <459D2DE9.4050808@eircom.net>
References: <459D2DE9.4050808@eircom.net>
Message-ID: <459D6C0D.1040602@jazillian.com>

Alan Larkin wrote:
> I need to modify some C++ code, performing tasks such as replacing
> primitive numeric variables with new objects and converting arithmetic
> expressions to different forms.
>
> I would like very much to do this using JavaCC as I have had very
> positive experiences using it on Java in the past. By first passing the
> grammar file through Java Tree Builder (JTB) the resulting parser will
> return an abstract syntax tree for the inputted code, which supports the
> visitor design pattern. I could then write small visitors to locate and
> replace the relevant sections of code, reformat the code using a
> formatting visitor, and finally dump the new code to file.
>
> Unfortunately the C++ grammars for JavaCC are woefully substandard (10
> years old!). ANTLR looks like it has a better C++ grammar but I am
> unsure if it can be used to satisfy the above objectives.
>
> Can the list please advise on whether or not ANTLR is suitable for this
> task and possibly direct me to some useful examples of such processes?
>
> Many thanks,
> Alan.
>
>   
Hi Alan,
I use ANTLR to process C, and I'm using JavaCC with JTB to process COBOL 
because there
doesn't seem to be a ANTLR COBOL grammar.

Yes, ANTLR can certainly be used to do what you need. The "official" way 
to do what you want
is to create an ANTLR "treewalker". You basically create a grammar that 
describes the AST
structure, and then add actions withing that grammar as needed. I find 
that a bit cumbersome...
see this blog for details: 
http://www.jazillian.com/articles/treewalkers.html

So instead of treewalkers, what you could do is just walk the tree "by 
hand", visiting each node
and its children. That way you don't spend your time worrying about the 
exact structure of the AST,
and rather spend it thinking "If I hit this kind of node in the AST, do 
the following...".

It's been about a year since I've used the ANTLR C++ grammar, but I'll 
give my two cents anyway.
I think it's pretty solid, but not nearly as solid as the C, Java, and 
other ANTLR grammars. This is
mostly because C++ is just a horribly complex language, and there are 
just so many little holes in
the standard that it seems like the ANTLR C++ grammar would sometimes 
fail on particular C++ programs.

Andy

From ningd2004 at gmail.com  Thu Jan  4 15:24:05 2007
From: ningd2004 at gmail.com (ning dong)
Date: Thu, 4 Jan 2007 17:24:05 -0600
Subject: [antlr-interest] spice netlist parser
Message-ID: <c24b82630701041524t34ef7cb5sc238072e53c9231f@mail.gmail.com>

All,
  Seems some asked the same question years ago but no answer. I will
try it again.
  I'd like to write a spice netlist parser using antlr. Is there
anyone who like to share some experience? How difficult it is? Any
grammar can be shared for me as a jump start?
  Thank you!
-- 
Best Regards!
Ning Dong

From martin at martincmartin.com  Thu Jan  4 17:24:03 2007
From: martin at martincmartin.com (Martin C. Martin)
Date: Thu, 04 Jan 2007 20:24:03 -0500
Subject: [antlr-interest] Why is this ambiguous?
Message-ID: <459DA8B3.9050008@martincmartin.com>

Hi,

First of all, thanks for Antlr, it's a huge help!

But I don't understand why the following dead-simple lexer is ambiguous:

class MyLexer extends Lexer;

options {
    k=4;
}

IDENTIFIER: "+" ;

INT : ('+' | '-')? ( '0'..'9' )+ ;

An INT must contain at least one digit, and an IDENTIFIER no digits.  So 
if I receive a + followed by any non-digit (including end of stream), it 
must be an identifier.  If I get a + followed by a digit, it must be an 
INT.  It can't be an IDENTIFIER followed by an INT, because when 
deciding what token to use for the +, it must match the longest 
sequence, and + followed by digits is longer than just + alone.

Am I missing something?  How do I make this non-ambiguous?  For the 
record, the error message is:

$ java antlr.Tool MyLexer.g
ANTLR Parser Generator   Version 2.7.5 (20050128)   1989-2005 jGuru.com
MyLexer.g: warning:lexical nondeterminism between rules IDENTIFIER and 
INT upon
MyLexer.g:     k==1:'+'
MyLexer.g:     k==2:<end-of-token>
MyLexer.g:     k==3:<end-of-token>
MyLexer.g:     k==4:<end-of-token>

Best,
Martin


From mark.mandel at gmail.com  Thu Jan  4 20:47:51 2007
From: mark.mandel at gmail.com (Mark Mandel)
Date: Fri, 5 Jan 2007 15:47:51 +1100
Subject: [antlr-interest] v3: have in one file, or seperate?
Message-ID: <4153ee230701042047g14d1efe2ib848255cba7c535c@mail.gmail.com>

All,

An organisation question -

Is v3 setup such that you should have your lexer, parser and tree
grammers in the one .g file? or should they be seperate?

>From the tutorials, they are seperate, however, with the need to have
the file name be the same as the grammer name, I end up with java
classes that are named things like XXLexerLexer, and XXParserParser.

Figured it would be easier to put it all in one file then, so I can
have a XXParser and a XXLexer.. but thought I would ask, as the
tutorials seem to lean a different way.

Mark

-- 
E: mark.mandel at gmail.com
W: www.compoundtheory.com

From ilia at obnovlenie.ru  Thu Jan  4 22:38:20 2007
From: ilia at obnovlenie.ru (Ilia Kantor)
Date: Fri, 5 Jan 2007 09:38:20 +0300
Subject: [antlr-interest] Antlr3b6 [bug?] Can't find template
	matchSetTrack.st
Message-ID: <200701050938.20836.ilia@obnovlenie.ru>


The tested build is Antlr3b6 at Jan 5 06:34:41 UTC 2007


The problem appeared after I introduced tree construction syntax from 
http://www.antlr.org/wiki/display/ANTLR3/Tree+construction:

========== Error ================
ilia at home ~/taskpower/antlr $ ./antlr.sh GrammarReader.g
no such locale file org/antlr/tool/templates/messages/languages/ru.stg 
retrying with English locale
ANTLR Parser Generator  Version 3.0b6 (??)  1989-2007
error(10):  internal error: GrammarReader.g : 
java.lang.IllegalArgumentException: Can't find template matchSetTrack.st
org.antlr.stringtemplate.StringTemplateGroup.lookupTemplate(StringTemplateGroup.java:485)
org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:372)
org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:384)
org.antlr.stringtemplate.StringTemplateGroup.lookupTemplate(StringTemplateGroup.java:464)
org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:372)
org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:384)
org.antlr.codegen.CodeGenTreeWalker.getTokenElementST(CodeGenTreeWalker.java:160)
org.antlr.codegen.CodeGenTreeWalker.set(CodeGenTreeWalker.java:2557)
org.antlr.codegen.CodeGenTreeWalker.atom(CodeGenTreeWalker.java:2243)
org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java:1813)
org.antlr.codegen.CodeGenTreeWalker.alternative(CodeGenTreeWalker.java:1115)
org.antlr.codegen.CodeGenTreeWalker.block(CodeGenTreeWalker.java:999)
org.antlr.codegen.CodeGenTreeWalker.rule(CodeGenTreeWalker.java:725)
org.antlr.codegen.CodeGenTreeWalker.rules(CodeGenTreeWalker.java:516)
org.antlr.codegen.CodeGenTreeWalker.grammarSpec(CodeGenTreeWalker.java:458)
org.antlr.codegen.CodeGenTreeWalker.grammar(CodeGenTreeWalker.java:305)
org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:415)
org.antlr.Tool.processGrammar(Tool.java:329)
org.antlr.Tool.process(Tool.java:266)
org.antlr.Tool.main(Tool.java:69)

============= Grammar ===============

grammar GrammarReader;


options {
	output=AST;
}


OUTPUT : 'output';
FORMULA : 'formula';
GRAMMAR : 'grammar';
IMPORT:	'import';
FROM:	'from';

NAME	:	{false}? .;


fragment BLOCK : '{' (BLOCK | ~('{'|'}'))* '}' ;

ID : NAMECHAR+;

SEMI:	';';

DOT	:	'.';


BODY
	: BLOCK;


COMMAND
	: '~' NAMECHAR*;

GET_SCOPE_VALUE
	: '#' NAMECHAR+;

fragment NAMECHAR
    : ALPHA_NUM | '_'
    ;

fragment ALPHA_NUM
	:	DIGIT | LETTER_ENG;

fragment DIGIT
    :    '0'..'9'
    ;

fragment LETTER_ENG
    : 'a'..'z'
    | 'A'..'Z'
    ;


WS  :
       (' '|'\r'|'\t'|'\u000C'|'\n' )+ {$channel=HIDDEN;}
    ;


SL_COMMENT : '//' (options {greedy=false;}:.)* '\n' {$channel=HIDDEN;};
	
ML_COMMENT
        :       '/*'
                ( options {greedy=false;} : . )*
                '*/'
                {$channel=HIDDEN;}
;



document : grammarDefinition grammarBody;

grammarDefinition: 
GRAMMAR ID SEMI -> ^(GRAMMAR ID)
;

	
grammarBody: (imp|common_rule)*;


imp
	:	
	IMPORT dst=ID FROM src+=ID (DOT src+=ID)* SEMI -> 
	^(IMPORT ^(NAME $src+) ^(NAME $dst));

common_rule
: 
type=(FORMULA|OUTPUT) name+=ID (DOT name+=ID)* COMMAND? BODY ->
^($type ^(NAME $name+) COMMAND? BODY)
;






From dave at badgers-in-foil.co.uk  Fri Jan  5 00:56:57 2007
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Fri, 5 Jan 2007 08:56:57 +0000
Subject: [antlr-interest] Antlr3b6 [bug?] Can't find template
	matchSetTrack.st
In-Reply-To: <200701050938.20836.ilia@obnovlenie.ru>
References: <200701050938.20836.ilia@obnovlenie.ru>
Message-ID: <20070105085656.GA6071@badgers-in-foil.co.uk>

On Fri, Jan 05, 2007 at 09:38:20AM +0300, Ilia Kantor wrote:
> The problem appeared after I introduced tree construction syntax from 
> http://www.antlr.org/wiki/display/ANTLR3/Tree+construction:
> 
> ========== Error ================
> ilia at home ~/taskpower/antlr $ ./antlr.sh GrammarReader.g
> no such locale file org/antlr/tool/templates/messages/languages/ru.stg 
> retrying with English locale
> ANTLR Parser Generator  Version 3.0b6 (??)  1989-2007
> error(10):  internal error: GrammarReader.g : 
> java.lang.IllegalArgumentException: Can't find template matchSetTrack.st
[...]
> type=(FORMULA|OUTPUT) name+=ID (DOT name+=ID)* COMMAND? BODY ->
> ^($type ^(NAME $name+) COMMAND? BODY)
> ;

ANTLR doesn't let you do "a=(X|Y|Z)", though "(a=X|a=Y|a=Z)" works, I
think.


ta,
dave

-- 
http://david.holroyd.me.uk/

From jose.ventura.roda at gmail.com  Fri Jan  5 02:08:12 2007
From: jose.ventura.roda at gmail.com (Jose Ventura)
Date: Fri, 5 Jan 2007 11:08:12 +0100
Subject: [antlr-interest] Fwd:  Why is this ambiguous?
In-Reply-To: <459DA8B3.9050008@martincmartin.com>
References: <459DA8B3.9050008@martincmartin.com>
Message-ID: <e39abda10701050208x4d58ee81l7fb5874e89363d9d@mail.gmail.com>

Hi Martin,

You can see with an example why is ambiguous.

With the stream "+1" the lexer can make:

- IDENTIFIER(+) INT(1) <-- This solution is possible because the '+' of int
is optional.
- INT(+1)

There're two solutions.


Maybe, you can try:

INT_IDENTIFIER
    : '+' {$setType(IDENTIFIER);} ( ('0'..'9')+ {$setType(INT);}
                                               | ('a'..'z')*
                                               )
;

INT: ('-')? ('0'..'9')+ ;

I think this run ok, but you must check it.

Regards,
Jos? Ventura

---------- Forwarded message ----------
From: Martin C. Martin <martin at martincmartin.com>
Date: 05-ene-2007 2:24
Subject: [antlr-interest] Why is this ambiguous?
To: antlr-interest at antlr.org

Hi,

First of all, thanks for Antlr, it's a huge help!

But I don't understand why the following dead-simple lexer is ambiguous:

class MyLexer extends Lexer;

options {
   k=4;
}

IDENTIFIER: "+" ;

INT : ('+' | '-')? ( '0'..'9' )+ ;

An INT must contain at least one digit, and an IDENTIFIER no digits.  So
if I receive a + followed by any non-digit (including end of stream), it
must be an identifier.  If I get a + followed by a digit, it must be an
INT.  It can't be an IDENTIFIER followed by an INT, because when
deciding what token to use for the +, it must match the longest
sequence, and + followed by digits is longer than just + alone.

Am I missing something?  How do I make this non-ambiguous?  For the
record, the error message is:

$ java antlr.Tool MyLexer.g
ANTLR Parser Generator   Version 2.7.5 (20050128)   1989-2005 jGuru.com
MyLexer.g: warning:lexical nondeterminism between rules IDENTIFIER and
INT upon
MyLexer.g:     k==1:'+'
MyLexer.g:     k==2:<end-of-token>
MyLexer.g:     k==3:<end-of-token>
MyLexer.g:     k==4:<end-of-token>

Best,
Martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070105/edc7d7a9/attachment.html 

From jose.ventura.roda at gmail.com  Fri Jan  5 04:10:47 2007
From: jose.ventura.roda at gmail.com (Jose Ventura)
Date: Fri, 5 Jan 2007 13:10:47 +0100
Subject: [antlr-interest] About tree walker sintax (antlr 2.7.6)
Message-ID: <e39abda10701050410s2f4aaa20h4d1096132e442304@mail.gmail.com>

Hi all,
Can any body tell me why these rules are unlike:
        RULES 1
        =======
        expression
            : #(AND expression expression)
             | #(OR expression expression)
             | ...
        ;
        RULES 2
        =======
        expresion
             : (oper expression expression)
              |...
        ;
        oper
             : AND|OR
        ;


The rule 2 is not ok, but I don't know what tree is correct for it. Any
Suggestion?
Thank's in advance.
Jos? Ventura
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070105/6421b2ad/attachment-0001.html 

From jose.sanleandro at ventura24.es  Fri Jan  5 04:11:15 2007
From: jose.sanleandro at ventura24.es (Jose San Leandro)
Date: Fri, 5 Jan 2007 13:11:15 +0100
Subject: [antlr-interest] StringTemplate approach applied to ANTLR?
Message-ID: <200701051311.16250.jose.sanleandro@ventura24.es>

Hi,

One thing that could be cleaned up in ANTLR (in my opinion), is mixing grammar 
definition with custom parsing logic. I mean, in ANTLR you can write code to 
execute whenever a rule, an alternative or a pattern matches the input. Such 
logic can be used to direct the parser or to do anything else.
That makes the .g itself coupled with the language the custom code is and the 
output of antlr.Tool.
There's no clean separation between the rules describing the grammar and the 
custom parsing logic.
Also, it makes reusing grammars more difficult than it should. You start from 
a grammar and modify it to suit your needs, but whenever the grammar you 
started from changes you need to apply the changes to your branched grammar.

Shouldn't be better to separate the ANTLR flow into two steps?

1) You provide a .g file and the desired language the parser will be 
implemented in. ANTLR would then generate the lexer and/or parser in the 
target language, as it does currently.
2) From the .g file, ANTLR also generates an interface and an no-op 
implementation declaring all the hooks the grammar accepts. The generated API 
would support an optional parameter allowing a different implementation of 
the interface.

I haven't thought too deep in this. I wouldn't like a Context object back and 
forth, but the potential interests me: get a standard set of official ANTLR 
grammars ready-to-use with no source-level changes.
It makes ANTLR less coupled to Java as well.

From wiggjd at lsbu.ac.uk  Fri Jan  5 04:51:23 2007
From: wiggjd at lsbu.ac.uk (Wigg, J D)
Date: Fri, 5 Jan 2007 12:51:23 -0000
Subject: [antlr-interest] Is ANTLR the right tool for the job?
Message-ID: <10A786EB5741DE4DB252F7B9B9423D3A022C53A2@CSD-EXBE-VS2.lsbu.ac.uk>

Alan,
 
As the latest author of the C++ parser you are looking at I would
suggest you make quite sure the software you are used to (JavaCC?)
won't work for the code you have first.
 
If not, I think CPP_parser is as up to date as I can get it, so see if
it parses your code without any problems next.
 
If this is OK, then you need to consider other possible limitations of
CPP_parser.
 
1. It does not produce an AST. I haven't felt the need to do this. If
you produce an AST you still have to insert your own code in the
appropriate places to produce the output you need so you might as well
include your code (for output) in the parser. This is quite easy to do
using sub-classed code called MyCode as described in the read me file.
 
2. It does not have a feature for automatically writing all the source
code to a new file but I suppose this should be possible somewhere.
 
3. When writing the source code (amended) to a new file extra work
will be required to include the comments (since these are ignored by
the parser). Again, this should not be too difficult to do.
 
4. Replacement of code. Difficulty will depend how extensive this is
and how the changes match the grammar.
 
Hope this helps. FYI I am away on holiday from Sunday 7 January to
Sunday 21 January.
 
I would be interested to hear of any advantages you see in producing
and working from an AST.
 
I would be interested to hear how you get on.
 
David.
 
Message extracted from antlr-interest Digest, Vol 26, Issue 7
 
Message: 1
Date: Thu, 04 Jan 2007 16:40:09 +0000
From: Alan Larkin <nobrow at eircom.net>
Subject: [antlr-interest] Is ANTLR the right tool for the job?
To: antlr-interest at antlr.org
Message-ID: <459D2DE9.4050808 at eircom.net>
Content-Type: text/plain; charset=ISO-8859-1

I need to modify some C++ code, performing tasks such as replacing
primitive numeric variables with new objects and converting arithmetic
expressions to different forms.

I would like very much to do this using JavaCC as I have had very
positive experiences using it on Java in the past. By first passing
the
grammar file through Java Tree Builder (JTB) the resulting parser will
return an abstract syntax tree for the inputted code, which supports
the
visitor design pattern. I could then write small visitors to locate
and
replace the relevant sections of code, reformat the code using a
formatting visitor, and finally dump the new code to file.

Unfortunately the C++ grammars for JavaCC are woefully substandard (10
years old!). ANTLR looks like it has a better C++ grammar but I am
unsure if it can be used to satisfy the above objectives.

Can the list please advise on whether or not ANTLR is suitable for
this
task and possibly direct me to some useful examples of such processes?

Many thanks,
Alan.





This e-mail message may be confidential and is intended only for the use of the individual(s) to whom it is addressed.  It may contain information which is or may be confidential, non-public or legally privileged. Please do not disseminate or distribute this message other than to its intended recipient without permission of the author. You should not copy it or use it for any purpose nor disclose its contents to any other person. If you have received this message in error, please notify me by email immediately and delete the original message and all copies in your computer systems.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070105/3f300889/attachment.html 

From nobrow at eircom.net  Fri Jan  5 04:56:14 2007
From: nobrow at eircom.net (Alan Larkin)
Date: Fri, 05 Jan 2007 12:56:14 +0000
Subject: [antlr-interest] Is ANTLR the right tool for the job?
In-Reply-To: <10A786EB5741DE4DB252F7B9B9423D3A022C53A2@CSD-EXBE-VS2.lsbu.ac.uk>
References: <10A786EB5741DE4DB252F7B9B9423D3A022C53A2@CSD-EXBE-VS2.lsbu.ac.uk>
Message-ID: <459E4AEE.1060400@eircom.net>

Thanks to Andy and David for your replies. I feel assured.

Alan.

From boutter at ps.uni-sb.de  Fri Jan  5 05:16:25 2007
From: boutter at ps.uni-sb.de (Christophe Boutter)
Date: Fri, 05 Jan 2007 14:16:25 +0100
Subject: [antlr-interest] Line and Column information lost during AST
 creation
In-Reply-To: <459D24A6.2060608@hotmail.com>
References: <459B8F11.5000004@ps.uni-sb.de>
	<459BF86F.5060702@hotmail.com>	<459CF7B6.1030207@ps.uni-sb.de>
	<459D24A6.2060608@hotmail.com>
Message-ID: <459E4FA9.5030707@ps.uni-sb.de>

Xue Yong Zhi wrote:
>> I've done that too. I call:
>> setASTNodeClass("modesteditor.core.antlrparser.ASTWithOffsetInfos");
>>
>> That gives me the following error message:
>> Can't find/access AST Node
>> typemodesteditor.core.antlrparser.ASTWithOffsetInfos
>>
> 
> It can be as simple as your ASTWithOffsetInfos is not a public class, or
> in a wrong package.

Actually it is a public class and in the same package as the parser.

> Antlr uses reflection to find ASTWithOffsetInfos.

After having read some things about reflection I thought it should work
but didn't.

Now I've set it up with ASTLabeType="ASTWithOffsetInfos" as a parser
option. And in order not to get some cast errors I had to set the node
class type manually for the AST factory with:
astFactory.setASTNodeClass(ASTWithOffsetInfos.class);

Shouldn't that be set along with the ASTLabelType option? Or has that
something to do with the fact that one wants to be able to generate
heterogenous trees?

Thanks Xue Yong Zhi for the help.

Chris
-- 
Try not to become a man of success, but rather try to become a man of value.
-- Albert Einstein

From martin at martincmartin.com  Fri Jan  5 06:42:30 2007
From: martin at martincmartin.com (Martin C. Martin)
Date: Fri, 05 Jan 2007 09:42:30 -0500
Subject: [antlr-interest] Fwd:  Why is this ambiguous?
In-Reply-To: <e39abda10701050208x4d58ee81l7fb5874e89363d9d@mail.gmail.com>
References: <459DA8B3.9050008@martincmartin.com>
	<e39abda10701050208x4d58ee81l7fb5874e89363d9d@mail.gmail.com>
Message-ID: <459E63D6.7020904@martincmartin.com>

Thanks Jose,

Jose Ventura wrote:
> Hi Martin,
>  
> You can see with an example why is ambiguous.
>  
> With the stream "+1" the lexer can make:
>  
> - IDENTIFIER(+) INT(1) <-- This solution is possible because the '+' of 
> int is optional.
> - INT(+1)

Thanks, I mentioned this in my original email.  It's also true that the 
stream "254" is ambiguous:

- INT(254)
- INT(25) INT(4)
- INT(2) INT(54)
- INT(2) INT(5) INT(4)

The reason this isn't considered ambiguous is because it matches the 
longest possible string.

Is the "longest match" rule only used for choosing what to assign to a 
single token, and not to choose between tokens or something?

> There're two solutions.
>  
>  
> Maybe, you can try:
>  
> INT_IDENTIFIER
>     : '+' {$setType(IDENTIFIER);} ( ('0'..'9')+ {$setType(INT);}
>                                                | ('a'..'z')*
>                                                )
> ;
>  
> INT: ('-')? ('0'..'9')+ ;

Thanks, perhaps I'll give that a go.

- Martin

>  
> I think this run ok, but you must check it.
>  
> Regards,
> Jos? Ventura
>    
> ---------- Forwarded message ----------
> From: *Martin C. Martin* <martin at martincmartin.com 
> <mailto:martin at martincmartin.com>>
> Date: 05-ene-2007 2:24
> Subject: [antlr-interest] Why is this ambiguous?
> To: antlr-interest at antlr.org <mailto:antlr-interest at antlr.org>
> 
> Hi,
> 
> First of all, thanks for Antlr, it's a huge help!
> 
> But I don't understand why the following dead-simple lexer is ambiguous:
> 
> class MyLexer extends Lexer;
> 
> options {
>    k=4;
> }
> 
> IDENTIFIER: "+" ;
> 
> INT : ('+' | '-')? ( '0'..'9' )+ ;
> 
> An INT must contain at least one digit, and an IDENTIFIER no digits.  So
> if I receive a + followed by any non-digit (including end of stream), it
> must be an identifier.  If I get a + followed by a digit, it must be an
> INT.  It can't be an IDENTIFIER followed by an INT, because when
> deciding what token to use for the +, it must match the longest
> sequence, and + followed by digits is longer than just + alone.
> 
> Am I missing something?  How do I make this non-ambiguous?  For the
> record, the error message is:
> 
> $ java antlr.Tool MyLexer.g
> ANTLR Parser Generator   Version 2.7.5 (20050128)   1989-2005 jGuru.com
> MyLexer.g: warning:lexical nondeterminism between rules IDENTIFIER and
> INT upon
> MyLexer.g:     k==1:'+'
> MyLexer.g:     k==2:<end-of-token>
> MyLexer.g:     k==3:<end-of-token>
> MyLexer.g:     k==4:<end-of-token>
> 
> Best,
> Martin
> 
>  

From jose.ventura.roda at gmail.com  Fri Jan  5 06:58:00 2007
From: jose.ventura.roda at gmail.com (Jose Ventura)
Date: Fri, 5 Jan 2007 15:58:00 +0100
Subject: [antlr-interest] Fwd: Why is this ambiguous?
In-Reply-To: <459E63D6.7020904@martincmartin.com>
References: <459DA8B3.9050008@martincmartin.com>
	<e39abda10701050208x4d58ee81l7fb5874e89363d9d@mail.gmail.com>
	<459E63D6.7020904@martincmartin.com>
Message-ID: <e39abda10701050658g6a0bdb16rb63aef2c6f93f926@mail.gmail.com>

2007/1/5, Martin C. Martin <martin at martincmartin.com>:
>
> Thanks Jose,
>
> Jose Ventura wrote:
> > Hi Martin,
> >
> > You can see with an example why is ambiguous.
> >
> > With the stream "+1" the lexer can make:
> >
> > - IDENTIFIER(+) INT(1) <-- This solution is possible because the '+' of
> > int is optional.
> > - INT(+1)
>
> Thanks, I mentioned this in my original email.


Opps! Sometimes I don't understand very good the messages. I apologize by my
english.

It's also true that the
> stream "254" is ambiguous:

- INT(254)
> - INT(25) INT(4)
> - INT(2) INT(54)
> - INT(2) INT(5) INT(4)
>
> The reason this isn't considered ambiguous is because it matches the
> longest possible string.

Is the "longest match" rule only used for choosing what to assign to a
> single token, and not to choose between tokens or something?


I think no, every rule is independent from others.


> There're two solutions.
> >
> >
> > Maybe, you can try:
> >
> > INT_IDENTIFIER
> >     : '+' {$setType(IDENTIFIER);} ( ('0'..'9')+ {$setType(INT);}
> >                                                | ('a'..'z')*
> >                                                )
> > ;
> >
> > INT: ('-')? ('0'..'9')+ ;
>
> Thanks, perhaps I'll give that a go.
>
> - Martin
>
> >
> > I think this run ok, but you must check it.
> >
> > Regards,
> > Jos? Ventura
> >
> > ---------- Forwarded message ----------
> > From: *Martin C. Martin* <martin at martincmartin.com
> > <mailto:martin at martincmartin.com>>
> > Date: 05-ene-2007 2:24
> > Subject: [antlr-interest] Why is this ambiguous?
> > To: antlr-interest at antlr.org <mailto:antlr-interest at antlr.org>
> >
> > Hi,
> >
> > First of all, thanks for Antlr, it's a huge help!
> >
> > But I don't understand why the following dead-simple lexer is ambiguous:
> >
> > class MyLexer extends Lexer;
> >
> > options {
> >    k=4;
> > }
> >
> > IDENTIFIER: "+" ;
> >
> > INT : ('+' | '-')? ( '0'..'9' )+ ;
> >
> > An INT must contain at least one digit, and an IDENTIFIER no digits.  So
> > if I receive a + followed by any non-digit (including end of stream), it
> > must be an identifier.  If I get a + followed by a digit, it must be an
> > INT.  It can't be an IDENTIFIER followed by an INT, because when
> > deciding what token to use for the +, it must match the longest
> > sequence, and + followed by digits is longer than just + alone.
> >
> > Am I missing something?  How do I make this non-ambiguous?  For the
> > record, the error message is:
> >
> > $ java antlr.Tool MyLexer.g
> > ANTLR Parser Generator   Version 2.7.5 (20050128)   1989-2005 jGuru.com
> > MyLexer.g: warning:lexical nondeterminism between rules IDENTIFIER and
> > INT upon
> > MyLexer.g:     k==1:'+'
> > MyLexer.g:     k==2:<end-of-token>
> > MyLexer.g:     k==3:<end-of-token>
> > MyLexer.g:     k==4:<end-of-token>
> >
> > Best,
> > Martin
> >
> >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070105/8af8f460/attachment-0001.html 

From obdrzalek at gmail.com  Fri Jan  5 07:10:34 2007
From: obdrzalek at gmail.com (Jan Obdrzalek)
Date: Fri, 5 Jan 2007 15:10:34 +0000
Subject: [antlr-interest] C grammar problem
Message-ID: <66cce1fb0701050710l23412b7dk3ee65ed4d8c3d8e@mail.gmail.com>

Hello,

I think I've encountered a problem in the cgram C grammar. The code
below can pass "gcc -c -std=c89" (i.e. should be allright as far as
ISO C89 standard is concerned), but GnuCParser from cgram crashes on
it.

<<< test.c <<<
void a(void){
       int a=5;
       struct s *ps=({
       typedef int T;
       T t;
       &a;
       });
       return;
}
>>> test.c >>>

I've tried to investigate the problem and found that it looks to be
caused by the following sequence of steps:
- when the parser first encounters the initializer of ps (which is a
compound statement),  the action of opening new scope is not executed
because the parser is in "guess mode"
- for the same reason the new type T not added to the symbol table
- when "T t" is encountered, the check whether T is a tyoedef name
fails, since there is no typedef name T in our current symbol table

Have I missed something, or is it genuine error in cgram? Is there an
easy way to fix this?

Thanks,
Jan

From fulg at iname.com  Fri Jan  5 08:03:22 2007
From: fulg at iname.com (Benoit Miller)
Date: Fri, 05 Jan 2007 11:03:22 -0500
Subject: [antlr-interest] Integrating Antlr-3.0b5 with VS2005 C# projects
Message-ID: <459E76CA.3000703@iname.com>

Hello,

I am evaluating antlr3.0b5 for a C# project under VS2005. Unfortunately, 
when using C#, there is no support for custom build tools (there is when 
using C++).

Initially I was using a pre-build step to have antlr generate the code, 
however this step is performed /after/ the source dependencies have been 
calculated, so your executable lags behind your source (ie, every 
grammar change needs two recompiles to get in). Clearly that's no way to 
work!

After getting over the fact that Microsoft requires one to hand-edit the 
project file to add custom build commands (!!), here's what I came up with:

   <ItemGroup>
     <Antlr3 Include="SimpleCalc.g">
       <OutputFiles>
         SimpleCalcLexer.cs;SimpleCalcParser.cs
       </OutputFiles>
     </Antlr3>
   </ItemGroup>

   <Target Name="GenerateAntlrCode"
           Inputs="@(Antlr3)"
           Outputs="%(Antlr3.OutputFiles)">
     <Exec Command="java org.antlr.Tool -message-format vstudio @(Antlr3)"/>
   </Target>

   <PropertyGroup>
     <CompileDependsOn>
       GenerateAntlrCode;$(CompileDependsOn)
     </CompileDependsOn>
   </PropertyGroup>

(Excuse the odd XML formatting, I tried to make it list-friendly.)

Unload your project, edit your .csproj, and paste this at the end (still 
inside the <project> tag). Change according to taste.

In order to have VS2005/MSBuild detect errors (and enable 
double-clicking on error messages from the IDE), I made a simple VS-like 
message formatter, vstudio.stg:

   group vstudio;
   location(file, line, column) ::= "<file>(<line>,<column>):"
   message(id, text) ::= "<id>: <text>"
   report(location, message, type) ::= "<location> <type> <message>"
   wantsSingleLineMessage() ::= "false"

Until an official format file makes it in 3.0b6, add vstudio.stg to your 
antlr-3.0b5.jar file in org/antlr/tool/templates/messages/formats, next 
to the existing antlr.stg and gnu.stg.

It's not perfect because sometimes antlr gives an empty location field, 
or non-translated locations, such as this example:

   SimpleCalc.g(39,7): error 100: syntax error: antlr: 
SimpleCalc.g:39:7: unexpected token: foo

Also, antlr can generate output files even though the grammar has errors 
in it, so further dependency checks fail and the grammar won't be 
recompiled until changed. I think no output should be produced on 
errors... (otherwise, perhaps the error should have been a warning? :))

In any case, this may be obvious to some, but I wasted an evening 
figuring this out so I thought I'd contribute. Perhaps it can go on the 
wiki, as I could not find this kind of info anywhere.

Hope this helps,
Ben.

From gyula.laszlo at profund.hu  Fri Jan  5 08:04:05 2007
From: gyula.laszlo at profund.hu (=?ISO-8859-1?Q?Gyula_L=E1szl=F3?=)
Date: Fri, 5 Jan 2007 17:04:05 +0100
Subject: [antlr-interest] Partial grammars/include
Message-ID: <AAE70EF8-AD00-4639-9DF0-78D5601A89F0@profund.hu>

Hi,

Just a small idea, especially useful for tree parsers (I have more  
then one of those for the same AST):

Much of the tree parser code is shared between the different tree  
parsers (the rules for statements are a good example), and my  
grammars are just getting toooooo long for comfortable editing.

The solution I think is simple: partial grammars, or even more  
simple: an #include-like macro to include other files:

	#inlude "partials/statements.g"
	#inlude "partials/expressions.g"

, or something in options:

	options { language=ObjC; partials=["statements", "expressions",  
"annotations" ]; }

This could cut down the clutter of grammars.
Any toughts? Should I write a proof-of-concept java bit, or does this  
whole thing stink?

Gyula L?szl?

email:gyula.laszlo AT profund.hu
http://profund.hu

ps: the first one can be done using a C preprocessor on the grammar,  
however I think that's not a real solution of the issue...

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070105/daa258fd/attachment.html 

From wiggjd at lsbu.ac.uk  Fri Jan  5 09:23:56 2007
From: wiggjd at lsbu.ac.uk (Wigg, J D)
Date: Fri, 5 Jan 2007 17:23:56 -0000
Subject: [antlr-interest] StringTemplate approach applied to ANTLR?
Message-ID: <10A786EB5741DE4DB252F7B9B9423D3A022C53A6@CSD-EXBE-VS2.lsbu.ac.uk>

Hello,
 
I agree in principle with Jose's suggestion (though I think templates
are using a sledge hammer to crack a nut!). 
 
My approach in CPP_parser was to sub-class my application code to keep
it separate from the parsing code. This is quite easy to do, though it
still requires function calls from the .g file via CPPParser.cpp etc.
which can be controlled by #if statements. It is quite easy then to
remove my application code from the parser .g file by deleting these
#if blocks to enable the parser to be used by someone else for
different purposes. Don't forget that most application code will be
buried *somewhere inside* their  productions.
 
Anyone interested in doing this for other languages can look at my
ReadMe text. CPP_parser is coded in C++.
 
David Wigg.
 
Message copied from antlr-interest Digest, Vol 26, Issue 9
 
Message: 1
Date: Fri, 5 Jan 2007 13:11:15 +0100
From: Jose San Leandro <jose.sanleandro at ventura24.es>
Subject: [antlr-interest] StringTemplate approach applied to ANTLR?
To: Undisclosed.Recipients: ;
Cc: antlr-interest at antlr.org
Message-ID: <200701051311.16250.jose.sanleandro at ventura24.es>
Content-Type: text/plain;  charset="us-ascii"

Hi,

One thing that could be cleaned up in ANTLR (in my opinion), is mixing
grammar
definition with custom parsing logic. I mean, in ANTLR you can write
code to
execute whenever a rule, an alternative or a pattern matches the
input. Such
logic can be used to direct the parser or to do anything else.
That makes the .g itself coupled with the language the custom code is
and the
output of antlr.Tool.
There's no clean separation between the rules describing the grammar
and the
custom parsing logic.
Also, it makes reusing grammars more difficult than it should. You
start from
a grammar and modify it to suit your needs, but whenever the grammar
you
started from changes you need to apply the changes to your branched
grammar.

Shouldn't be better to separate the ANTLR flow into two steps?

1) You provide a .g file and the desired language the parser will be
implemented in. ANTLR would then generate the lexer and/or parser in
the
target language, as it does currently.
2) From the .g file, ANTLR also generates an interface and an no-op
implementation declaring all the hooks the grammar accepts. The
generated API
would support an optional parameter allowing a different
implementation of
the interface.

I haven't thought too deep in this. I wouldn't like a Context object
back and
forth, but the potential interests me: get a standard set of official
ANTLR
grammars ready-to-use with no source-level changes.
It makes ANTLR less coupled to Java as well.




This e-mail message may be confidential and is intended only for the use of the individual(s) to whom it is addressed.  It may contain information which is or may be confidential, non-public or legally privileged. Please do not disseminate or distribute this message other than to its intended recipient without permission of the author. You should not copy it or use it for any purpose nor disclose its contents to any other person. If you have received this message in error, please notify me by email immediately and delete the original message and all copies in your computer systems.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070105/03003aa1/attachment.html 

From kroepke at classdump.org  Fri Jan  5 09:31:52 2007
From: kroepke at classdump.org (Kay Roepke)
Date: Fri, 5 Jan 2007 18:31:52 +0100
Subject: [antlr-interest] Partial grammars/include
In-Reply-To: <AAE70EF8-AD00-4639-9DF0-78D5601A89F0@profund.hu>
References: <AAE70EF8-AD00-4639-9DF0-78D5601A89F0@profund.hu>
Message-ID: <58A86FFA-6E7B-496C-9575-B991B659CC43@classdump.org>

Hi Gyula!

On 5. Jan 2007, at 17:04 , Gyula L?szl? wrote:

> The solution I think is simple: partial grammars, or even more  
> simple: an #include-like macro to include other files:
>
> 	#inlude "partials/statements.g"
> 	#inlude "partials/expressions.g"
>
> , or something in options:
>
> 	options { language=ObjC; partials=["statements", "expressions",  
> "annotations" ]; }
>
> This could cut down the clutter of grammars.
> Any toughts? Should I write a proof-of-concept java bit, or does  
> this whole thing stink?

Ter wants to bring back grammar inheritance at some point in the  
future, that will be even more powerful. It's a bit much to do right now
with him finishing the book and trying to fix the last critical bugs  
for 3.0, but I gather it will come back.

Then you can just override the bits and pieces that are different for  
each pass while retaining the common parts. It should work even  
better than an including scheme. Also, in 3.0b6 skipping subtrees  
works, so that could make your live easier, too. Unfortunately work  
has kept me from integrating all the changes Ter has made over  
Christmas, so the depot version (ObjC target) will not run currently.

I'm working on it, but I can't promise any date. I've also no idea  
what Ter's timeframe for the b6 release is.

cheers,

-k
-- 
Kay R?pke
http://classdump.org/





From monty at codetransform.com  Fri Jan  5 10:05:40 2007
From: monty at codetransform.com (Monty Zukowski)
Date: Fri, 5 Jan 2007 10:05:40 -0800
Subject: [antlr-interest] C grammar problem
In-Reply-To: <66cce1fb0701050710l23412b7dk3ee65ed4d8c3d8e@mail.gmail.com>
References: <66cce1fb0701050710l23412b7dk3ee65ed4d8c3d8e@mail.gmail.com>
Message-ID: <598864c70701051005p9523241j9d094929f1ba89c6@mail.gmail.com>

You're probably right that it is a bug in cgram.  I don't remember
having a test quite like that one.  You are also probably on the right
track to believe that it has to do with guessing mode.  If you can
pinpoint the rules where this fails I might be able to help you solve
it, but I don't have the time to figure it out on my own.

There are ways to have "side effects" when in guessing mode, which is
probably what you will need to do to get T into the symbol table.

The other option is to see if the syntactic predicate can be truncated
in such a way as to match enough of a prefix to correctly know which
decision to make, without having to parse as far ahead as it is now,
which is what is getting it into trouble.

Monty

On 1/5/07, Jan Obdrzalek <obdrzalek at gmail.com> wrote:
> Hello,
>
> I think I've encountered a problem in the cgram C grammar. The code
> below can pass "gcc -c -std=c89" (i.e. should be allright as far as
> ISO C89 standard is concerned), but GnuCParser from cgram crashes on
> it.
>
> <<< test.c <<<
> void a(void){
>        int a=5;
>        struct s *ps=({
>        typedef int T;
>        T t;
>        &a;
>        });
>        return;
> }
> >>> test.c >>>
>
> I've tried to investigate the problem and found that it looks to be
> caused by the following sequence of steps:
> - when the parser first encounters the initializer of ps (which is a
> compound statement),  the action of opening new scope is not executed
> because the parser is in "guess mode"
> - for the same reason the new type T not added to the symbol table
> - when "T t" is encountered, the check whether T is a tyoedef name
> fails, since there is no typedef name T in our current symbol table
>
> Have I missed something, or is it genuine error in cgram? Is there an
> easy way to fix this?
>
> Thanks,
> Jan
>

From kroepke at classdump.org  Fri Jan  5 17:51:43 2007
From: kroepke at classdump.org (Kay Roepke)
Date: Sat, 6 Jan 2007 02:51:43 +0100
Subject: [antlr-interest] Integrating Antlr-3.0b5 with VS2005 C# projects
In-Reply-To: <459E76CA.3000703@iname.com>
References: <459E76CA.3000703@iname.com>
Message-ID: <03FCD55C-6852-4AB8-83B3-BE87AA5B2256@classdump.org>


On 5. Jan 2007, at 17:03 , Benoit Miller wrote:

> In order to have VS2005/MSBuild detect errors (and enable double- 
> clicking on error messages from the IDE), I made a simple VS-like  
> message formatter, vstudio.stg:
>
>   group vstudio;
>   location(file, line, column) ::= "<file>(<line>,<column>):"
>   message(id, text) ::= "<id>: <text>"
>   report(location, message, type) ::= "<location> <type> <message>"
>   wantsSingleLineMessage() ::= "false"
>
> Until an official format file makes it in 3.0b6, add vstudio.stg to  
> your antlr-3.0b5.jar file in org/antlr/tool/templates/messages/ 
> formats, next to the existing antlr.stg and gnu.stg.

Yeah, it works for people :)
I'd be more than happy to include this, if it works for people.
Jim, haven't you been working on VS support, too? If you don't  
object, I'll commit, ok?

> It's not perfect because sometimes antlr gives an empty location  
> field, or non-translated locations, such as this example:
>
>   SimpleCalc.g(39,7): error 100: syntax error: antlr: SimpleCalc.g: 
> 39:7: unexpected token: foo

This is due to the fact that some of the error messages come from the  
parsers for ANTLR itself, which are written in ANTLR v2. The error  
messages (and thus their formatting) will be better once v3 is built  
with v3. It just wasn't justifiable to invest a lot of work into  
this, if it will go away some time in the future anyway...

> Also, antlr can generate output files even though the grammar has  
> errors in it, so further dependency checks fail and the grammar  
> won't be recompiled until changed. I think no output should be  
> produced on errors... (otherwise, perhaps the error should have  
> been a warning? :))

I agree. If there's an error it shouldn't generate stuff. I thought  
there were some sets of messages that inhibit code generation, should  
be in ErrorManager.java. Do you have a list, so we could add tests  
and fix those cases?

A different thing that came up a while ago was that org.antlr.Tool  
doesn't give a proper return value when exiting with an error. This  
breaks the "stop build on fail" feature of Xcode, at least (I've been  
bitten by that in my Xcode support). It also has implications when  
embedding org.antlr.Tool in Java IDEs, since we can't just exit.
How does Visual Studio deal with this (exit codes from tools, I mean)?

> In any case, this may be obvious to some, but I wasted an evening  
> figuring this out so I thought I'd contribute. Perhaps it can go on  
> the wiki, as I could not find this kind of info anywhere.

Thanks very much! Every bit of work helps and I think it's great when  
people start using this stuff and find it at least a bit sensible!  
(And I know Ter loves that - more than anyone else :))

Again, thanks for the work Benoit!

cheers,

-k

-- 
Kay R?pke
http://classdump.org/





From fulg at iname.com  Fri Jan  5 20:08:17 2007
From: fulg at iname.com (Benoit Miller)
Date: Fri, 05 Jan 2007 23:08:17 -0500
Subject: [antlr-interest] Integrating Antlr-3.0b5 with VS2005 C# projects
In-Reply-To: <03FCD55C-6852-4AB8-83B3-BE87AA5B2256@classdump.org>
References: <459E76CA.3000703@iname.com>
	<03FCD55C-6852-4AB8-83B3-BE87AA5B2256@classdump.org>
Message-ID: <459F20B1.7010100@iname.com>

Kay Roepke wrote:
> Benoit Miller wrote:
>> [...] sometimes antlr gives an empty location 
>> field, or non-translated locations, such as this example:
>>
>>   SimpleCalc.g(39,7): error 100: syntax error: antlr: 
>> SimpleCalc.g:39:7: unexpected token: foo
> 
> This is due to the fact that some of the error messages come from the 
> parsers for ANTLR itself, which are written in ANTLR v2. The error 
> messages (and thus their formatting) will be better once v3 is built 
> with v3. It just wasn't justifiable to invest a lot of work into this, 
> if it will go away some time in the future anyway...

I should have chosen my example more carefully. Partially-translated 
messages aren't really a problem, it's the ones without any location 
that are (I'll mention below why that's important).

For example, changing the first line of a grammar to use a different 
grammar name (without renaming the file) yields the following message:

  : error 8: file SimpleCalc.g contains grammar Foo; names must be identical

Antlr knows the file that the error is in (it even tells us!) but it is 
not formatted correctly so we cannot directly go to the error in VS. 
With the posted version of the MSBuild snippet, we end up redirected to 
a non-existant "EXEC" file (which is the name of the MSBuild task used 
to launch antlr).

> If there's an error it shouldn't generate stuff. I thought 
> there were some sets of messages that inhibit code generation, should be 
> in ErrorManager.java. Do you have a list, so we could add tests and fix 
> those cases?

One easy repro case is to remove the end semicolon from a parser or 
lexer rule. Antlr will generate an error (and return -1) but still 
generate the code, thwarting further dependency checks from the build 
system.

I remember Terence saying in the antlr3 presentation that one of the new 
features is that antlr3 is much more resistant to missing/extra tokens, 
perhaps this is a misfeature after all? :)

> A different thing that came up a while ago was that org.antlr.Tool 
> doesn't give a proper return value when exiting with an error. This 
> breaks the "stop build on fail" feature of Xcode, at least (I've been 
> bitten by that in my Xcode support). It also has implications when 
> embedding org.antlr.Tool in Java IDEs, since we can't just exit.
> How does Visual Studio deal with this (exit codes from tools, I mean)?

Yes, I've seen this happen during my MSBuild experiments, but I don't 
remember what caused this behavior. I haven't seen this at all since...

It seems Visual Studio simply ignores nonzero return codes if it cannot 
find a correctly-formatted error message. If you don't use the 
"-message-format vstudio" option but get an error in antlr, VS will 
/not/ stop the build nor trigger an error (but it is clearly shown in 
the buildlog!).

Another odd behavior of Visual Studio is that you must *never ever* open 
the generated files in VS! If you do, then VS2005 compiles the code that 
was in the window at the time the build was started (instead of the 
newly-generated version) and we are back to the original dependency 
problem. Sigh!

It's actually quite possible that this "feature" is the reason the 
classic "custom build step" solution failed when I tried it... Aargh.

I think adding an "<AutoGen>True</AutoGen>" child tag to the Compile tag 
of the generated files will solve this problem, but the property isn't 
documented so YMMV. I will keep testing and update the Wiki accordingly.

Ben.

From parrt at cs.usfca.edu  Sat Jan  6 12:54:26 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 6 Jan 2007 12:54:26 -0800
Subject: [antlr-interest] out of action for 2 weeks
Message-ID: <62585FA9-3661-4EDF-B9CF-E73AEDC0CA45@cs.usfca.edu>

Howdy,

I will be even less responsive than usual over the next two weeks  
because of a family emergency. I will be out of town with a laptop,  
but doing only essential stuff like finishing the book ;)

Sorry...

Ter

From fulg at iname.com  Sat Jan  6 15:23:45 2007
From: fulg at iname.com (Benoit Miller)
Date: Sat, 06 Jan 2007 18:23:45 -0500
Subject: [antlr-interest] C# and '?' cardinality operator in AST rewrite
	rules
Message-ID: <45A02F81.1060102@iname.com>

When targeting C#, and given the following grammar snippet:

foo : attrList? 'int' ID
       -> ^(attrList? VAR_INT ID)
     ;

Antlr will generate parser code that references attrList no matter what 
when building the AST. If attrList isn't present in the input, an 
exception is thrown.

If I use '+' instead on attrList in the AST rewrite rule (keeping the 
'?' in the rule itself), then it works fine.

Looking at http://www.antlr.org/wiki/display/ANTLR3/Tree+construction 
implies that all cardinality operators (?, *, +) should work in AST 
rewrite rules.

Is this a bug, or a feature?

Not really a problem since '+' works fine, I'm just wondering if I 
understand this correctly. I'm using antlr-3.0b5.

Thanks,
Ben.

From kroepke at classdump.org  Sat Jan  6 15:42:52 2007
From: kroepke at classdump.org (Kay Roepke)
Date: Sun, 7 Jan 2007 00:42:52 +0100
Subject: [antlr-interest] C# and '?' cardinality operator in AST rewrite
	rules
In-Reply-To: <45A02F81.1060102@iname.com>
References: <45A02F81.1060102@iname.com>
Message-ID: <13397BF0-9649-45D5-9274-1340A7FA6D33@classdump.org>


On 7. Jan 2007, at 0:23 , Benoit Miller wrote:

> When targeting C#, and given the following grammar snippet:
>
> foo : attrList? 'int' ID
>       -> ^(attrList? VAR_INT ID)
>     ;
>
> Antlr will generate parser code that references attrList no matter  
> what when building the AST. If attrList isn't present in the input,  
> an exception is thrown.
>
> If I use '+' instead on attrList in the AST rewrite rule (keeping  
> the '?' in the rule itself), then it works fine.
>
> Looking at http://www.antlr.org/wiki/display/ANTLR3/Tree 
> +construction implies that all cardinality operators (?, *, +)  
> should work in AST rewrite rules.
>
> Is this a bug, or a feature?
>
> Not really a problem since '+' works fine, I'm just wondering if I  
> understand this correctly. I'm using antlr-3.0b5.


Hi Ben,

keep in mind that ^(attrList VAR_INT ID) is the tree:

          attrList
           /    \
       VAR_INT   ID

Making the root node optional is probably not well defined in any  
case...

I guess that's the problem with using ? for the root node in a  
rewrite. + works because
there's always at least one node to make the root. The rest will  
probably spill over into
the children list. I haven't actually tried this, but it should be  
what happens here.

cheers,
-k
-- 
Kay R?pke
http://classdump.org/





From fulg at iname.com  Sat Jan  6 16:28:38 2007
From: fulg at iname.com (Benoit Miller)
Date: Sat, 06 Jan 2007 19:28:38 -0500
Subject: [antlr-interest] C# and '?' cardinality operator in AST rewrite
 rules
In-Reply-To: <13397BF0-9649-45D5-9274-1340A7FA6D33@classdump.org>
References: <45A02F81.1060102@iname.com>
	<13397BF0-9649-45D5-9274-1340A7FA6D33@classdump.org>
Message-ID: <45A03EB6.5030908@iname.com>

Hello Kay,

Kay Roepke wrote:
> keep in mind that ^(attrList VAR_INT ID) is the tree:
> 
>          attrList
>           /    \
>       VAR_INT   ID
> 
> Making the root node optional is probably not well defined in any case...

Hmm, bitten by my example again :) I oversimplified the repro.

Here is the unedited rule:

classDecl : attrList? 'class' IDENTIFIER '{' property+ '}' ';'
             -> ^(CLASS IDENTIFIER attrList? property+)
           ;

In the AST rewrite rule, there is a dummy token as the root.

Thanks,
Ben.

[PS: I mistakenly sent this to Kay only, can someone fix the list 
Reply-To, or is this desired behavior?]

From kroepke at classdump.org  Sat Jan  6 16:34:21 2007
From: kroepke at classdump.org (Kay Roepke)
Date: Sun, 7 Jan 2007 01:34:21 +0100
Subject: [antlr-interest] C# and '?' cardinality operator in AST rewrite
	rules
In-Reply-To: <45A03EB6.5030908@iname.com>
References: <45A02F81.1060102@iname.com>
	<13397BF0-9649-45D5-9274-1340A7FA6D33@classdump.org>
	<45A03EB6.5030908@iname.com>
Message-ID: <404057FF-F1F0-4A18-95C2-A73A90C90954@classdump.org>


On 7. Jan 2007, at 1:28 , Benoit Miller wrote:

> [PS: I mistakenly sent this to Kay only, can someone fix the list  
> Reply-To, or is this desired behavior?]

And I of course have replied only to you ;)

I think it is desired behavior, but then again I can't think of the  
reason. I almost always use the 'reply all' button,
so...we'll have to ask Ter when he comes back. He's the master of the  
server and supreme (but benevolent) dictator at large. :)

cheers,
-k
-- 
Kay R?pke
http://classdump.org/





From kroepke at classdump.org  Sat Jan  6 16:36:08 2007
From: kroepke at classdump.org (Kay Roepke)
Date: Sun, 7 Jan 2007 01:36:08 +0100
Subject: [antlr-interest] C# and '?' cardinality operator in AST rewrite
	rules
In-Reply-To: <45A03EB6.5030908@iname.com>
References: <45A02F81.1060102@iname.com>
	<13397BF0-9649-45D5-9274-1340A7FA6D33@classdump.org>
	<45A03EB6.5030908@iname.com>
Message-ID: <5C899529-19C0-44EE-9987-2E7E40537A56@classdump.org>

For the record, as this has gone via private mail by accident:

Hi Ben!

On 7. Jan 2007, at 1:23 , Benoit Miller wrote:


> Hmm, bitten by my example again :) I oversimplified the repro.
>

Hah! :)


> Here is the unedited rule:
>
> classDecl : attrList? 'class' IDENTIFIER '{' property+ '}' ';'
>             -> ^(CLASS IDENTIFIER attrList? property+)
>           ;
>
> In the AST rewrite rule, there is a dummy token as the root.
>

Yes, that should work. I suspect a bug in the C# target, then. I use  
this in Java and Objective-C targets
quite often.

Unfortunately I have no inkling in what state both the target and its  
developers are right now ;)
Best bet is to ping the perpetrators and try to get them to supply  
you with a fix. 3.0b6 won't be out
within the next two weeks for sure, because Ter is away for that  
time. The next release could well be
away a month or so. :(

cheers,
-k

-- 
Kay R?pke
http://classdump.org/


From fulg at iname.com  Sun Jan  7 07:58:01 2007
From: fulg at iname.com (Benoit Miller)
Date: Sun, 07 Jan 2007 10:58:01 -0500
Subject: [antlr-interest] Customizing errors in antlr3
Message-ID: <45A11889.9000500@iname.com>

What is the best way to customize reported errors in antlr3?

For example, in the following snippet:

start
     :   forwardDecl* objectDecl*
     ;

forwardDecl
     :   classOrStruct IDENTIFIER ';'
         -> ^(classOrStruct IDENTIFIER)
     ;

objectDecl
     :   attrList? classOrStruct IDENTIFIER '{' property* '}' ';'
         -> ^(classOrStruct IDENTIFIER attrList? property*)
     ;

[unedited snippet, so this time it should be representative :)]

Given an input such as "[foo] class Bar;", I want to report to the tool 
user something like "cannot specify attributes on forward declarations", 
but it's unclear to me how to do this.

I tried using a syntactic predicate to throw my error from the parser:

objectDecl
     :   attrList? classOrStruct IDENTIFIER
         ( {input.LA(1)==';'}? { throw new Exception("foo"); }
         | '{' property* '}' ';'
           -> ^(classOrStruct IDENTIFIER attrList? property*)
         )
     ;

..but that didn't work, the parser still throws a NoViableAlt exception 
instead of my own:

[objectDecl]: line 1:20  state 0 (decision=5) no viable alt; 
token=[@7,20:20=';',<30>,1:20]

Any suggestions?

Thanks,
Ben.

From dave at badgers-in-foil.co.uk  Sun Jan  7 08:23:21 2007
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Sun, 7 Jan 2007 16:23:21 +0000
Subject: [antlr-interest] Customizing errors in antlr3
In-Reply-To: <45A11889.9000500@iname.com>
References: <45A11889.9000500@iname.com>
Message-ID: <20070107162321.GA13074@badgers-in-foil.co.uk>

On Sun, Jan 07, 2007 at 10:58:01AM -0500, Benoit Miller wrote:
> What is the best way to customize reported errors in antlr3?
> 
> For example, in the following snippet:
> 
> start
>     :   forwardDecl* objectDecl*
>     ;
> 
> forwardDecl
>     :   classOrStruct IDENTIFIER ';'
>         -> ^(classOrStruct IDENTIFIER)
>     ;
> 
> objectDecl
>     :   attrList? classOrStruct IDENTIFIER '{' property* '}' ';'
>         -> ^(classOrStruct IDENTIFIER attrList? property*)
>     ;
> 
> [unedited snippet, so this time it should be representative :)]
> 
> Given an input such as "[foo] class Bar;", I want to report to the tool 
> user something like "cannot specify attributes on forward declarations", 
> but it's unclear to me how to do this.
> 
> I tried using a syntactic predicate to throw my error from the parser:
> 
> objectDecl
>     :   attrList? classOrStruct IDENTIFIER
>         ( {input.LA(1)==';'}? { throw new Exception("foo"); }
>         | '{' property* '}' ';'
>           -> ^(classOrStruct IDENTIFIER attrList? property*)
>         )
>     ;
> 
> ..but that didn't work, the parser still throws a NoViableAlt exception 
> instead of my own:
> 
> [objectDecl]: line 1:20  state 0 (decision=5) no viable alt; 
> token=[@7,20:20=';',<30>,1:20]

Not sure if I'm right here, but maybe try creating a named token and
doing

  {input.LA(1)==SEMI}?

or look at the token text.

  {input.LT(1).getText().equals(";")}

because as it is, I suspect that predicate is equivalent to

  {input.LA(1)==59}?

(59 being the ASCII code point for ';').


ta,
dave

-- 
http://david.holroyd.me.uk/

From jab.antlr at species.org  Sun Jan  7 09:33:12 2007
From: jab.antlr at species.org (James Briant)
Date: Sun, 7 Jan 2007 09:33:12 -0800
Subject: [antlr-interest] Customizing errors in antlr3
In-Reply-To: <45A11889.9000500@iname.com>
References: <45A11889.9000500@iname.com>
Message-ID: <e063fb510701070933y4baa989cu79960f2a5942eb2e@mail.gmail.com>

Seems like, from the point of view of your grammar, that "[foo] class bar;"
is valid, i.e. recognizable, and only then do you want to tell the user that
its invalid.

On 1/7/07, Benoit Miller <fulg at iname.com> wrote:
>
> What is the best way to customize reported errors in antlr3?
>
> For example, in the following snippet:
>
> start
>      :   forwardDecl* objectDecl*
>      ;
>
> forwardDecl
>      :   classOrStruct IDENTIFIER ';'
>          -> ^(classOrStruct IDENTIFIER)
>      ;
>
> objectDecl
>      :   attrList? classOrStruct IDENTIFIER '{' property* '}' ';'
>          -> ^(classOrStruct IDENTIFIER attrList? property*)
>      ;
>
> [unedited snippet, so this time it should be representative :)]
>
> Given an input such as "[foo] class Bar;", I want to report to the tool
> user something like "cannot specify attributes on forward declarations",
> but it's unclear to me how to do this.
>
> I tried using a syntactic predicate to throw my error from the parser:
>
> objectDecl
>      :   attrList? classOrStruct IDENTIFIER
>          ( {input.LA(1)==';'}? { throw new Exception("foo"); }
>          | '{' property* '}' ';'
>            -> ^(classOrStruct IDENTIFIER attrList? property*)
>          )
>      ;
>
> ..but that didn't work, the parser still throws a NoViableAlt exception
> instead of my own:
>
> [objectDecl]: line 1:20  state 0 (decision=5) no viable alt;
> token=[@7,20:20=';',<30>,1:20]
>
> Any suggestions?
>
> Thanks,
> Ben.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070107/e9462608/attachment.html 

From antlrlist at moonlit.xs4all.nl  Sun Jan  7 12:53:00 2007
From: antlrlist at moonlit.xs4all.nl (Ron AF Greve)
Date: Sun, 7 Jan 2007 21:53:00 +0100
Subject: [antlr-interest] antlr works ignoring whitespace
Message-ID: <047f01c7329d$d16749d0$3201a8c0@saturnus>

Hi,

I am trying to use antlr-works to develop my grammar. It looks like a great 
tool. I tried to use it to test some input files. However I don't seem to be 
able to make it ignore whitespace. I tried the v2 and v3 ways like skip, 
channel=99, channel=HIDDEN, filter, but everything seems to fail. As soon as 
it hits whitespace the grammar fails. Anyone knows how to do this or is it 
not (yet) possible.

Below my grammar and last attempt with the filter option.

Any help greatly appreciated

Regards, Ron AF Greve

http://moonlit.xs4all.nl

Grammar
----------------------------------
grammar HTML;

options {

filter=WHITESPACE;

}

htmllist: ( bodylist )?;

bodylist: ( bodyblock )+;

blocklist: ( block )+;

block : ulblock

| hblock

| imgblock

| ablock

| pblock

| BR

;

bodyblock

: BODY ctag (blocklist)? CBODY

;

ulblock : UL ctag (lilist)? CUL

;

lilist : LI ctag (licontents)? CLI

;

pblock : P ctag (blocklist)? CP

;

hblock : ( H1 ctag | H2 ctag | H3 ctag | H4 ctag ) (textitems)? ( CH1 | CH2 
| CH3 |CH4 )

;

imgblock: IMG ctag CIMG

;

licontents

: (textitems)+

;

textitems

: TEXT

| pblock

| ablock

;

ablock : A ctag TEXT CA

;

ctag : (optionlist)? CLOSETAG

;

optionlist

: (property)+

;

property: ID EQUAL value

;

value : string1

| integer1

| float1

;


string1 : STRING

;

integer1 : INTEGER

;

float1 : FLOAT

;

FLOAT : INTEGER '.' INTEGER ;

protected

WHITESPACE : ( '\t' | ' ' | '\r' | '\n'| '\u000C' )+

;

ID : ( 'A'..'Z' | 'a'..'z' ) ( 'A'..'Z' | 'a'..'z' | '0'..'9' )+

;

STRING : '"' ( 'A'..'Z' | 'a'..'z' | '0'..'9' )* '"'

;

INTEGER : ( '0'..'9' )+

;

TEXT : ( 'A'..'Z'|'a'..'z'|'0'..'9'|' '|'.'|'?'|'!'|'@' )+

;

EQUAL : '=';

CLOSETAG: '>';

BODY : '<BODY';

P : '<P';

UL : '<UL';

LI : '<LI';

H1 : '<H1';

H2 : '<H2';

H3 : '<H3';

H4 : '<H4';

IMG : '<IMG';

A : '<A';

BR : '<BR>';

CBODY : '</BODY>';

CP : '</P>';

CUL : '</UL';

CLI : '</LI>';

CH1 : '</H1>';

CH2 : '</H2>';

CH3 : '</H3>';

CH4 : '</H4>';

CIMG : '</IMG>';

CA : '</CA>';




From fulg at iname.com  Sun Jan  7 14:33:49 2007
From: fulg at iname.com (Benoit Miller)
Date: Sun, 07 Jan 2007 17:33:49 -0500
Subject: [antlr-interest] Customizing errors in antlr3
In-Reply-To: <e063fb510701070933y4baa989cu79960f2a5942eb2e@mail.gmail.com>
References: <45A11889.9000500@iname.com>
	<e063fb510701070933y4baa989cu79960f2a5942eb2e@mail.gmail.com>
Message-ID: <45A1754D.7070903@iname.com>

I tried David's suggestion but there was no change in behavior. However 
you pointed me in the right direction.

I think the solution is to merge both rules in one, and perform that 
kind of validation after parsing is complete.

Thanks!
Ben.

James Briant wrote:
> Seems like, from the point of view of your grammar, that "[foo] class bar;"
> is valid, i.e. recognizable, and only then do you want to tell the user 
> that
> its invalid.
> 
> On 1/7/07, Benoit Miller <fulg at iname.com> wrote:
>> What is the best way to customize reported errors in antlr3?
>>
>> For example, in the following snippet:
>>
>> start
>>      :   forwardDecl* objectDecl*
>>      ;
>>
>> forwardDecl
>>      :   classOrStruct IDENTIFIER ';'
>>          -> ^(classOrStruct IDENTIFIER)
>>      ;
>>
>> objectDecl
>>      :   attrList? classOrStruct IDENTIFIER '{' property* '}' ';'
>>          -> ^(classOrStruct IDENTIFIER attrList? property*)
>>      ;
>>
>> [unedited snippet, so this time it should be representative :)]
>>
>> Given an input such as "[foo] class Bar;", I want to report to the tool
>> user something like "cannot specify attributes on forward declarations",
>> but it's unclear to me how to do this.


From kroepke at classdump.org  Sun Jan  7 14:58:52 2007
From: kroepke at classdump.org (Kay Roepke)
Date: Sun, 7 Jan 2007 23:58:52 +0100
Subject: [antlr-interest] antlr works ignoring whitespace
In-Reply-To: <047f01c7329d$d16749d0$3201a8c0@saturnus>
References: <047f01c7329d$d16749d0$3201a8c0@saturnus>
Message-ID: <EE464267-5140-4FEA-9F24-4486C208C629@classdump.org>

Hi Ron!

On 7. Jan 2007, at 21:53 , Ron AF Greve wrote:

> I am trying to use antlr-works to develop my grammar. It looks like  
> a great tool. I tried to use it to test some input files. However I  
> don't seem to be able to make it ignore whitespace. I tried the v2  
> and v3 ways like skip, channel=99, channel=HIDDEN, filter, but  
> everything seems to fail. As soon as it hits whitespace the grammar  
> fails. Anyone knows how to do this or is it not (yet) possible.
>
> Below my grammar and last attempt with the filter option.

the filter option is not to specify which tokens to skip or hide, it  
is to turn on filter mode in a lexer.
Also, note that the 'protected' keyword is now called 'fragment' in v3.

> Grammar
> ----------------------------------
> grammar HTML;
>
> options {
>
> filter=WHITESPACE;
>
> }

this should be
options {
	filter=true;
}

if you truly want filter mode (see <http://www.antlr.org/wiki/display/ 
ANTLR3/Lexical+filters> for more info on that).
But without knowing what you want to achieve, I'd say you don't want  
filter mode...ANTLRWorks doesn't support filter mode
right now, anyway, because the Interpreter can't handle syntactic  
predicates yet.

> protected
>
> WHITESPACE : ( '\t' | ' ' | '\r' | '\n'| '\u000C' )+
>
> ;

Use this instead:

WHITESPACE : ( '\t' | ' ' | '\r' | '\n'| '\u000C' )+  
{ $channel=HIDDEN;} ;

note the missing fragment keyword and the $ in front of the channel.

When you use ANTLRWorks to test sample input it should figure out  
which tokens to ignore automatically.
There's a dropdown list, IIRC, to specify tokens to ignore, but that  
shouldn't be necessary.

I haven't looked too close at your grammar to say whether there's  
another problem somewhere, but this
should get you started.

HTH,

-k


-- 
Kay R?pke
http://classdump.org/





From mark.mandel at gmail.com  Sun Jan  7 21:32:29 2007
From: mark.mandel at gmail.com (Mark Mandel)
Date: Mon, 8 Jan 2007 16:32:29 +1100
Subject: [antlr-interest] Antlr3: Help - line 0:-1 mismatched input '<EOF>' ?
Message-ID: <4153ee230701072132r1b45f19ft7734f13216ee4adb@mail.gmail.com>

Hey all -

I'm still working on my HQL like syntax, just being very basic at the
moment, just parsing a statement that looks like, to get a flat AST
tree.

"select emails.Email.emailName, emails.Email.emailFrom from
emails.Email where emails.Email.emailName = :name";

To get my feet wet and get going.

I've been following the XML Parser tutorial pretty closely on a lot of
things, and it's been a great help.

I get the error:
line 0:-1 mismatched input '<EOF>' expecting SELECT

Whenever I run my parser over my tokens, and I have no idea why.  Is
line:0:-1 at the beginning or the end of the string?

I've gone hunting as much as I can, but I have yet to find anything
that tells me where I should be looking to solve this issue.

Any and all help is appreciated.

My grammar and test bed is the following:

[Test.java]

	public static void main(String[] args)
	{
		try
		{
			String tql = "select emails.Email.emailName, emails.Email.emailFrom
from emails.Email where emails.Email.emailName = :name";
			System.out.println(tql);
			CharStream input = new ANTLRStringStream(tql);
	        TqlLexerLexer lexer = new TqlLexerLexer(input);
	        Token token;
	        while ((token = lexer.nextToken())!=Token.EOF_TOKEN) {
	        	System.out.println("Token["+ token.getType() +"]: "+token.getText());
	        }
	
	        CommonTokenStream tokens = new  CommonTokenStream(lexer);
	        TqlParserParser parser = new TqlParserParser(tokens);
	        TqlParserParser.selectStatement_return root = parser.selectStatement();
	        System.out.println("tree="+((Tree)root.tree).toStringTree());
		}
		catch(Throwable t)
	    {
	        System.out.println("Exception: "+t.getMessage());
	        t.printStackTrace();
	    }
	}

[TqlParser.g]

parser grammar TqlParser;

options
{
	tokenVocab=TqlLexer;
	output=AST;
}

selectStatement
	:
	selectExpression
	;

selectExpression
	:
	selectHeader
	fromStatement
	whereStatement
	;

selectHeader
	:
	SELECT PROPERTY_IDENTIFIER (COMMA PROPERTY_IDENTIFIER)*
	;

fromStatement
	:
	FROM CLASS_IDENTIFIER (COMMA CLASS_IDENTIFIER)*
	;
	
whereStatement
	:
	WHERE PROPERTY_IDENTIFIER OPERATOR MAPPED_VALUE
	;

[TqlLexer.g]
lexer grammar TqlLexer;

@members {
	private static final int STRING_MODE = 1;
	private static final int PROPERTY_IDENTIFIER_MODE = 2;
	private static final int CLASS_IDENTIFIER_MODE = 3;
	
	private int currentMode = STRING_MODE;
	private int pastMode;
	
	private void setMode(int mode)
	{
		pastMode = currentMode;
		currentMode = mode;
	}
}

SELECT	:
		{ currentMode == STRING_MODE }?=>
		'select'
		{ setMode(PROPERTY_IDENTIFIER_MODE);  }
		;
FROM	:
		{ currentMode == STRING_MODE }?=>
		'from'
		{ setMode(CLASS_IDENTIFIER_MODE); }
		;
WHERE	:		
		{ currentMode == STRING_MODE }?=>
		'where'
		{ setMode(PROPERTY_IDENTIFIER_MODE);  }
		;
COMMA	:
		','
		{ setMode(pastMode); }
		;
OPERATOR
		:
		'='|'>'|'<'|'!='|'<>'|'>='|'<='
		;
MAPPED_VALUE
		:	
		':'(LETTER|DIGIT|'_')+
		;
CLASS_IDENTIFIER
		:
		{ currentMode == CLASS_IDENTIFIER_MODE }?=>
		IDENTIFIER
		{ setMode(STRING_MODE);  }
		;		
PROPERTY_IDENTIFIER
		:
		{ currentMode == PROPERTY_IDENTIFIER_MODE }?=>
		IDENTIFIER
		{ setMode(STRING_MODE);  }
		;		
WS  	:
		(' '|'\r'|'\t'|'\u000C'|'\n') {$channel=HIDDEN;}
    	;		
fragment IDENTIFIER
		:
		LETTER(LETTER|DIGIT|'.'|'_')+
		;
fragment DIGIT
	    :
	    '0'..'9'
    	;
fragment LETTER
	    :
	    'a'..'z'| 'A'..'Z'
	    ;
Again, any help would be appreciated.

Regards,

Mark


-- 
E: mark.mandel at gmail.com
W: www.compoundtheory.com

From dave at badgers-in-foil.co.uk  Mon Jan  8 00:33:29 2007
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Mon, 8 Jan 2007 08:33:29 +0000
Subject: [antlr-interest] Antlr3: Help - line 0:-1 mismatched input
	'<EOF>' ?
In-Reply-To: <4153ee230701072132r1b45f19ft7734f13216ee4adb@mail.gmail.com>
References: <4153ee230701072132r1b45f19ft7734f13216ee4adb@mail.gmail.com>
Message-ID: <20070108083329.GA27287@badgers-in-foil.co.uk>

Hi,

On Mon, Jan 08, 2007 at 04:32:29PM +1100, Mark Mandel wrote:
> I get the error:
> line 0:-1 mismatched input '<EOF>' expecting SELECT
> 
> Whenever I run my parser over my tokens, and I have no idea why.  Is
> line:0:-1 at the beginning or the end of the string?

> My grammar and test bed is the following:
> 
> [Test.java]
> 
> 	public static void main(String[] args)
> 	{
> 		try
> 		{
> 			String tql = "select emails.Email.emailName, emails.Email.emailFrom from emails.Email where emails.Email.emailName = :name";
> 			System.out.println(tql);
> 			CharStream input = new ANTLRStringStream(tql);
> 	        TqlLexerLexer lexer = new TqlLexerLexer(input);
> 	        Token token;
> 	        while ((token = lexer.nextToken())!=Token.EOF_TOKEN) {
> 	        	System.out.println("Token["+ token.getType() +"]: 
> 	        	"+token.getText());
> 	        }

Does it work without the above while-loop in there?  If you've already
read all the tokens up to EOF from the lexer, that sounds like a good
reason for the parser to complain about EOF being the first thing it
sees.

> 	        CommonTokenStream tokens = new  CommonTokenStream(lexer);
> 	        TqlParserParser parser = new TqlParserParser(tokens);
> 	        TqlParserParser.selectStatement_return root = 
> 	        parser.selectStatement();
> 	        System.out.println("tree="+((Tree)root.tree).toStringTree());

[Didn't run the code to confirm that, sorry.]


ta,
dave

-- 
http://david.holroyd.me.uk/

From mark.mandel at gmail.com  Mon Jan  8 01:41:36 2007
From: mark.mandel at gmail.com (Mark Mandel)
Date: Mon, 8 Jan 2007 20:41:36 +1100
Subject: [antlr-interest] Antlr3: Help - line 0:-1 mismatched input
	'<EOF>' ?
In-Reply-To: <20070108083329.GA27287@badgers-in-foil.co.uk>
References: <4153ee230701072132r1b45f19ft7734f13216ee4adb@mail.gmail.com>
	<20070108083329.GA27287@badgers-in-foil.co.uk>
Message-ID: <4153ee230701080141v2ff767e4o2718169a5d8a0195@mail.gmail.com>

Omg... I didn't think of that.

I'll give it a shot.

>slaps forehead<

Mark

On 1/8/07, David Holroyd <dave at badgers-in-foil.co.uk> wrote:
> Hi,
>
> On Mon, Jan 08, 2007 at 04:32:29PM +1100, Mark Mandel wrote:
> > I get the error:
> > line 0:-1 mismatched input '<EOF>' expecting SELECT
> >
> > Whenever I run my parser over my tokens, and I have no idea why.  Is
> > line:0:-1 at the beginning or the end of the string?
>
> > My grammar and test bed is the following:
> >
> > [Test.java]
> >
> >       public static void main(String[] args)
> >       {
> >               try
> >               {
> >                       String tql = "select emails.Email.emailName, emails.Email.emailFrom from emails.Email where emails.Email.emailName = :name";
> >                       System.out.println(tql);
> >                       CharStream input = new ANTLRStringStream(tql);
> >               TqlLexerLexer lexer = new TqlLexerLexer(input);
> >               Token token;
> >               while ((token = lexer.nextToken())!=Token.EOF_TOKEN) {
> >                       System.out.println("Token["+ token.getType() +"]:
> >                       "+token.getText());
> >               }
>
> Does it work without the above while-loop in there?  If you've already
> read all the tokens up to EOF from the lexer, that sounds like a good
> reason for the parser to complain about EOF being the first thing it
> sees.
>
> >               CommonTokenStream tokens = new  CommonTokenStream(lexer);
> >               TqlParserParser parser = new TqlParserParser(tokens);
> >               TqlParserParser.selectStatement_return root =
> >               parser.selectStatement();
> >               System.out.println("tree="+((Tree)root.tree).toStringTree());
>
> [Didn't run the code to confirm that, sorry.]
>
>
> ta,
> dave
>
> --
> http://david.holroyd.me.uk/
>


-- 
E: mark.mandel at gmail.com
W: www.compoundtheory.com

From mark.mandel at gmail.com  Mon Jan  8 01:57:06 2007
From: mark.mandel at gmail.com (Mark Mandel)
Date: Mon, 8 Jan 2007 20:57:06 +1100
Subject: [antlr-interest] Antlr3: Help - line 0:-1 mismatched input
	'<EOF>' ?
In-Reply-To: <4153ee230701080141v2ff767e4o2718169a5d8a0195@mail.gmail.com>
References: <4153ee230701072132r1b45f19ft7734f13216ee4adb@mail.gmail.com>
	<20070108083329.GA27287@badgers-in-foil.co.uk>
	<4153ee230701080141v2ff767e4o2718169a5d8a0195@mail.gmail.com>
Message-ID: <4153ee230701080157o24a985e0g28cbad450833b88c@mail.gmail.com>

Yup, worked a charm... I'm such a idiot ;)

Thanks.

Mark.

On 1/8/07, Mark Mandel <mark.mandel at gmail.com> wrote:
> Omg... I didn't think of that.
>
> I'll give it a shot.
>
> >slaps forehead<
>
> Mark
>
> On 1/8/07, David Holroyd <dave at badgers-in-foil.co.uk> wrote:
> > Hi,
> >
> > On Mon, Jan 08, 2007 at 04:32:29PM +1100, Mark Mandel wrote:
> > > I get the error:
> > > line 0:-1 mismatched input '<EOF>' expecting SELECT
> > >
> > > Whenever I run my parser over my tokens, and I have no idea why.  Is
> > > line:0:-1 at the beginning or the end of the string?
> >
> > > My grammar and test bed is the following:
> > >
> > > [Test.java]
> > >
> > >       public static void main(String[] args)
> > >       {
> > >               try
> > >               {
> > >                       String tql = "select emails.Email.emailName, emails.Email.emailFrom from emails.Email where emails.Email.emailName = :name";
> > >                       System.out.println(tql);
> > >                       CharStream input = new ANTLRStringStream(tql);
> > >               TqlLexerLexer lexer = new TqlLexerLexer(input);
> > >               Token token;
> > >               while ((token = lexer.nextToken())!=Token.EOF_TOKEN) {
> > >                       System.out.println("Token["+ token.getType() +"]:
> > >                       "+token.getText());
> > >               }
> >
> > Does it work without the above while-loop in there?  If you've already
> > read all the tokens up to EOF from the lexer, that sounds like a good
> > reason for the parser to complain about EOF being the first thing it
> > sees.
> >
> > >               CommonTokenStream tokens = new  CommonTokenStream(lexer);
> > >               TqlParserParser parser = new TqlParserParser(tokens);
> > >               TqlParserParser.selectStatement_return root =
> > >               parser.selectStatement();
> > >               System.out.println("tree="+((Tree)root.tree).toStringTree());
> >
> > [Didn't run the code to confirm that, sorry.]
> >
> >
> > ta,
> > dave
> >
> > --
> > http://david.holroyd.me.uk/
> >
>
>
> --
> E: mark.mandel at gmail.com
> W: www.compoundtheory.com
>


-- 
E: mark.mandel at gmail.com
W: www.compoundtheory.com

From eastor1 at swarthmore.edu  Mon Jan  8 08:28:56 2007
From: eastor1 at swarthmore.edu (Eric Astor)
Date: Mon, 08 Jan 2007 11:28:56 -0500
Subject: [antlr-interest] Resolving a non-LL(*)
Message-ID: <45A27148.2000003@swarthmore.edu>

Hey everyone,

So, I'm new to ANTLR and to formal grammars - and I have this little
error in a critical grammar I'm writing that I just can't resolve. I'm
using 3.0b5, and the ANTLRWorks jar from the website:

[11:05:03] error(211): IndentTest.g:6:4: [fatal] rule macro_call has
non-LL(*) decision due to recursive rule invocations reachable from alts
1,2.  Resolve by left-factoring or using syntactic predicates or using
backtrack=true option.

I've reduced the grammar that induces the error to give a basic example,
and what I've come up with is below. Can anyone suggest a way around
this? I've found that eliminating the recursive alternate in
arbitrary_text does the trick, but I still need a way to match all text
to the end of an indentation block.

Any ideas?

Thanks very much,
Eric Astor

--- Example grammar follows ---

grammar IndentTest;

macro_call
	:	':' WORD NEWLINE
		INDENT
			( (WORD ':') => parameter_block NEWLINE arbitrary_text
			| arbitrary_text
			)
		DEDENT
	;

parameter_block
	:	(WORD ':' (~(NEWLINE))* NEWLINE)+
	;


arbitrary_text // Consume to the end of the current indentation block
	:	( ~(INDENT|DEDENT)
		| (INDENT arbitrary_text DEDENT)
		)+
	;

From jimi at intersystems.com  Mon Jan  8 08:51:31 2007
From: jimi at intersystems.com (Jim Idle)
Date: Mon, 8 Jan 2007 11:51:31 -0500
Subject: [antlr-interest] Integrating Antlr-3.0b5 with VS2005 C# projects
In-Reply-To: <03FCD55C-6852-4AB8-83B3-BE87AA5B2256@classdump.org>
Message-ID: <20070108165133.8E8EE1097@mail.intersystems.com>



-----Original Message-----
From: Kay Roepke [mailto:kroepke at classdump.org] 

> Until an official format file makes it in 3.0b6, add vstudio.stg to  
> your antlr-3.0b5.jar file in org/antlr/tool/templates/messages/ 
> formats, next to the existing antlr.stg and gnu.stg.

Yeah, it works for people :)
I'd be more than happy to include this, if it works for people.
Jim, haven't you been working on VS support, too? If you don't  
object, I'll commit, ok?

Yeah - I'm fine with that Kay - saves me doing it ;-)

Jim
 

-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.5.432 / Virus Database: 268.16.7/619 - Release Date: 1/7/2007 6:29 PM
 

From antlrlist at moonlit.xs4all.nl  Mon Jan  8 09:09:49 2007
From: antlrlist at moonlit.xs4all.nl (Ron AF Greve)
Date: Mon, 8 Jan 2007 18:09:49 +0100
Subject: [antlr-interest] antlr works ignoring whitespace
References: <047f01c7329d$d16749d0$3201a8c0@saturnus>
	<EE464267-5140-4FEA-9F24-4486C208C629@classdump.org>
Message-ID: <002101c73347$cfbd9030$3201a8c0@saturnus>

Hi,

Thanks Kay. I was actually indeeed more interested to get it to work in 
antlr-works. It seems like a big time saver to be able to debug a grammar in 
the gui instead of compiling the stuff to C++ (still using antlr2 actually) 
and debugging the grammar there.

I scrunitized the menus but found that it seems to be the 'guess' button in 
the interpreter menu that does the trick. In any case it does ignore 
whitespace now

Thanks :-)


Regards, Ron AF Greve

http://moonlit.xs4all.nl

----- Original Message ----- 
From: "Kay Roepke" <kroepke at classdump.org>
To: "Ron AF Greve" <antlrlist at moonlit.xs4all.nl>
Cc: <antlr-interest at antlr.org>
Sent: Sunday, January 07, 2007 11:58 PM
Subject: Re: [antlr-interest] antlr works ignoring whitespace


> Hi Ron!
>
> On 7. Jan 2007, at 21:53 , Ron AF Greve wrote:
>
>> I am trying to use antlr-works to develop my grammar. It looks like  a 
>> great tool. I tried to use it to test some input files. However I  don't 
>> seem to be able to make it ignore whitespace. I tried the v2  and v3 ways 
>> like skip, channel=99, channel=HIDDEN, filter, but  everything seems to 
>> fail. As soon as it hits whitespace the grammar  fails. Anyone knows how 
>> to do this or is it not (yet) possible.
>>
>> Below my grammar and last attempt with the filter option.
>
> the filter option is not to specify which tokens to skip or hide, it  is 
> to turn on filter mode in a lexer.
> Also, note that the 'protected' keyword is now called 'fragment' in v3.
>
>> Grammar
>> ----------------------------------
>> grammar HTML;
>>
>> options {
>>
>> filter=WHITESPACE;
>>
>> }
>
> this should be
> options {
> filter=true;
> }
>
> if you truly want filter mode (see <http://www.antlr.org/wiki/display/ 
> ANTLR3/Lexical+filters> for more info on that).
> But without knowing what you want to achieve, I'd say you don't want 
> filter mode...ANTLRWorks doesn't support filter mode
> right now, anyway, because the Interpreter can't handle syntactic 
> predicates yet.
>
>> protected
>>
>> WHITESPACE : ( '\t' | ' ' | '\r' | '\n'| '\u000C' )+
>>
>> ;
>
> Use this instead:
>
> WHITESPACE : ( '\t' | ' ' | '\r' | '\n'| '\u000C' )+  { $channel=HIDDEN;} 
> ;
>
> note the missing fragment keyword and the $ in front of the channel.
>
> When you use ANTLRWorks to test sample input it should figure out  which 
> tokens to ignore automatically.
> There's a dropdown list, IIRC, to specify tokens to ignore, but that 
> shouldn't be necessary.
>
> I haven't looked too close at your grammar to say whether there's  another 
> problem somewhere, but this
> should get you started.
>
> HTH,
>
> -k
>
>
> -- 
> Kay R?pke
> http://classdump.org/
>
>
>
>
> 


From jimi at intersystems.com  Mon Jan  8 10:40:39 2007
From: jimi at intersystems.com (Jim Idle)
Date: Mon, 8 Jan 2007 13:40:39 -0500
Subject: [antlr-interest] Customizing errors in antlr3
In-Reply-To: <45A11889.9000500@iname.com>
Message-ID: <20070108184041.B97938CE@mail.intersystems.com>

Ben,

In general it is best to override the error reporting routine itself and print out something more useful to the context in which you are compiling. In general, I override displayRecognitionError (in the C target, but that should be the same in any other target I would think). You can use the existing routine as your template and can then of course code for specific contexts. 

However, this is not that useful in the case you are tying to cover, whereby for instance you know that a common mistake is leaving out a ';', or adding an extra + or something akin to this. At one point, Ter discussed adding some constructs that would cover this sort of thing, whereby you could say 'Here is a syntax you might see, but it is an error", but I can?t find the emails we had about it nor remember the conclusion. I believe that this sort of thing would be very useful in structuring error recovery and so on, and I seem to remember that Ter did also.

Jim

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Benoit Miller
Sent: Sunday, January 07, 2007 7:58 AM
To: ANTLR Interest
Subject: [antlr-interest] Customizing errors in antlr3

What is the best way to customize reported errors in antlr3?

For example, in the following snippet:

start
     :   forwardDecl* objectDecl*
     ;

forwardDecl
     :   classOrStruct IDENTIFIER ';'
         -> ^(classOrStruct IDENTIFIER)
     ;

objectDecl
     :   attrList? classOrStruct IDENTIFIER '{' property* '}' ';'
         -> ^(classOrStruct IDENTIFIER attrList? property*)
     ;

[unedited snippet, so this time it should be representative :)]

Given an input such as "[foo] class Bar;", I want to report to the tool 
user something like "cannot specify attributes on forward declarations", 
but it's unclear to me how to do this.

I tried using a syntactic predicate to throw my error from the parser:

objectDecl
     :   attrList? classOrStruct IDENTIFIER
         ( {input.LA(1)==';'}? { throw new Exception("foo"); }
         | '{' property* '}' ';'
           -> ^(classOrStruct IDENTIFIER attrList? property*)
         )
     ;

..but that didn't work, the parser still throws a NoViableAlt exception 
instead of my own:

[objectDecl]: line 1:20  state 0 (decision=5) no viable alt; 
token=[@7,20:20=';',<30>,1:20]

Any suggestions?

Thanks,
Ben.

-- 
No virus found in this incoming message.
Checked by AVG Free Edition.
Version: 7.5.432 / Virus Database: 268.16.7/619 - Release Date: 1/7/2007 6:29 PM
 

-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.5.432 / Virus Database: 268.16.7/619 - Release Date: 1/7/2007 6:29 PM
 

From fhaupt at informatik.uni-wuerzburg.de  Mon Jan  8 16:35:48 2007
From: fhaupt at informatik.uni-wuerzburg.de (fhaupt at informatik.uni-wuerzburg.de)
Date: Tue, 9 Jan 2007 01:35:48 +0100
Subject: [antlr-interest] disable warnings in v3?
Message-ID: <20070109003548.GC17091@maya.lan>

Hi there,

I have made a grammar working quite well, so far for twiki-datafiles. However I now ran into a Problem:

There is a keyword <verbatim> </verbatim> in twiki in between which nothing should be interpreted. 

So I tried to use the rule:

verbatim: '<verbatim>' .* '</verbatim>'


however, now antlr complains a lot about ambiguity there. I see the point, that .* matches everything even my tags somewhere 
else, but in here that doesn't matter.

Is there a way to temporarily disable every matching besides the 
'</verbatim>'- endtag? Or to disable the warnings at least?



Thanks for any suggestions

Fabian

ps. if you need to look at the complete grammar tell me so, i'll send it along.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20070109/7fb1df5d/attachment.bin 

From kroepke at classdump.org  Mon Jan  8 20:02:51 2007
From: kroepke at classdump.org (Kay Roepke)
Date: Tue, 9 Jan 2007 05:02:51 +0100
Subject: [antlr-interest] disable warnings in v3?
In-Reply-To: <20070109003548.GC17091@maya.lan>
References: <20070109003548.GC17091@maya.lan>
Message-ID: <E299D2D9-9A7E-4B9F-8DC2-0DBDC843CFCA@classdump.org>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi Fabian!

On 9. Jan 2007, at 1:35 , fhaupt at informatik.uni-wuerzburg.de wrote:

> There is a keyword <verbatim> </verbatim> in twiki in between which  
> nothing should be interpreted.
>
> So I tried to use the rule:
>
> verbatim: '<verbatim>' .* '</verbatim>'
> however, now antlr complains a lot about ambiguity there. I see the  
> point, that .* matches everything even my tags somewhere
> else, but in here that doesn't matter.
>
> Is there a way to temporarily disable every matching besides the
> '</verbatim>'- endtag? Or to disable the warnings at least?

Indeed there is:

Assuming you are using v3, change that rule to

verbatim: '<verbatim>' (options{greedy=false;}:.*) '</verbatim>'

ANTLR matches greedily by default, so the ambiguities reported are  
between the .* loop
and the characters of the '</verbatim>' string.

That should do the trick, the same thing is normally done for  
comments :)

HTH,
- -k
- --
Kay R?pke
http://classdump.org/




-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.3 (Darwin)

iD8DBQFFoxPwfhv+DUzSptARAnZ5AJwJR5fTinxAoh2kn2mIIvepPSXHRgCfdfvT
J6oAI+2snIbQM+KI62N6/3c=
=IRXX
-----END PGP SIGNATURE-----

From fhaupt at informatik.uni-wuerzburg.de  Tue Jan  9 00:04:04 2007
From: fhaupt at informatik.uni-wuerzburg.de (fhaupt at informatik.uni-wuerzburg.de)
Date: Tue, 9 Jan 2007 09:04:04 +0100
Subject: [antlr-interest] disable warnings in v3?
In-Reply-To: <E299D2D9-9A7E-4B9F-8DC2-0DBDC843CFCA@classdump.org>
References: <20070109003548.GC17091@maya.lan>
	<E299D2D9-9A7E-4B9F-8DC2-0DBDC843CFCA@classdump.org>
Message-ID: <20070109080404.GA25155@maya.lan>

hi,

thanks for the reply,

however: 
the error remains.
My rule looks like this now:

verbatim

returns [Element verbatime=null]
@init {
	verbatime=new Element("programlisting");	
}
: '<verbatim>' (options {greedy=false;} : a=.
{
	verbatime.addContent(a.getText());
}
)*  '</verbatim>'
;

if I use the pure thing like:

verbatim: '<verbatim>' (options{greedy=false;}:.*) '</verbatim>';

it works fine :/

thanks:)


greets fabian



> Indeed there is:
> 
> Assuming you are using v3, change that rule to
> 
> verbatim: '<verbatim>' (options{greedy=false;}:.*) '</verbatim>'
> 
> ANTLR matches greedily by default, so the ambiguities reported are between the .* loop
> and the characters of the '</verbatim>' string.
> 
> That should do the trick, the same thing is normally done for comments :)
> 
> HTH,
> - -k
> - --
> Kay R?pke
> http://classdump.org/
> 
> 
> 
> 
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.3 (Darwin)
> 
> iD8DBQFFoxPwfhv+DUzSptARAnZ5AJwJR5fTinxAoh2kn2mIIvepPSXHRgCfdfvT
> J6oAI+2snIbQM+KI62N6/3c=
> =IRXX
> -----END PGP SIGNATURE-----
> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20070109/bcd8bb14/attachment.bin 

From nicolai at mainiero.de  Tue Jan  9 01:14:06 2007
From: nicolai at mainiero.de (Nicolai Mainiero)
Date: Tue, 9 Jan 2007 10:14:06 +0100
Subject: [antlr-interest] Help with mutually left-recursion
Message-ID: <70ABE4B5-EFB5-4DB2-A88F-CB8CEED31B93@mainiero.de>

Hello,

I try to write a grammar for Lua and have a problem with mutually  
left-recursion in the grammar definition. Here ist the section from  
the grammar so far.


prefixexp :'('exp')' | var  | functioncall
	;

functioncall : prefixexp args
	     | prefixexp ':' NAME args
	;

var	: NAME | prefixexp '['exp']' | prefixexp '.' NAME
	;

These three rules are my problem. Please has anyone suggestions or  
hints how to rewrite the grammar to remove the mutually left-recursion.

Thanks
	Nicolai
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2421 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20070109/ef2b211e/attachment.bin 

From ssiegel at finjan.com  Tue Jan  9 02:21:55 2007
From: ssiegel at finjan.com (Shmuel Siegel)
Date: Tue, 9 Jan 2007 12:21:55 +0200
Subject: [antlr-interest] ANTLR 3 internal error exception
Message-ID: <E344C433F006AB45A306D422F9C3EB4C012B1A20@exmail1.finjan.com>

Using antlrwork 1.0b8 on win xp I get the following error when I try to
generate code

 

[10:11:11] error(10):  internal error: C:\Documents and
Settings\ssiegel\My Documents\ANTLR3\alex.g :
java.util.NoSuchElementException: no such attribute: args in template
context [rewriteTokenRef]

 

The easiest reproducible grammar involves introducing an artificial
token in the rewrite rule which uses a token type of the matched
pattern. The following example throws the exception on generation.

 

grammar boo;

 

options

{

            output=AST;

}

 

token

            :           tn='x' ty='string' STRING 

            ->^($tn STRING[$ty])

            ;

            

            

STRING

            :           'y'

            ;

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070109/9030b5ea/attachment.html 

From alexander at gaengel.de  Tue Jan  9 06:21:43 2007
From: alexander at gaengel.de (=?ISO-8859-15?Q?Alexander_G=E4ngel?=)
Date: Tue, 9 Jan 2007 15:21:43 +0100 (MET)
Subject: [antlr-interest] Fragment for Parserrules
Message-ID: <45A3A54C.3010501@gaengel.de>

Is it possible to make a parserrule a fragment like in a lexer.

Alexander
-------------- next part --------------
A non-text attachment was scrubbed...
Name: alexander.vcf
Type: text/x-vcard
Size: 279 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20070109/d50d282f/attachment.vcf 

From kroepke at classdump.org  Tue Jan  9 06:35:18 2007
From: kroepke at classdump.org (Kay Roepke)
Date: Tue, 9 Jan 2007 15:35:18 +0100
Subject: [antlr-interest] Fragment for Parserrules
In-Reply-To: <45A3A54C.3010501@gaengel.de>
References: <45A3A54C.3010501@gaengel.de>
Message-ID: <9603F7D9-0798-4733-8560-ED4B0B0DCF0D@classdump.org>


On 9. Jan 2007, at 15:21 , Alexander G?ngel wrote:

> Is it possible to make a parserrule a fragment like in a lexer.

No, nor would you want to.

In a parser normally you have a designated start rule that you call  
and from that it recurses.
In a lexer ANTLR generates the implicit start rule 'mTokens' for you,  
which does the prediction
and then calls the individual lexer rules. Rules declared 'fragment'  
don't get included in that
mTokens rule, so they aren't called automatically to figure out the  
next token, they can
only be called explicitely by your own lexer rules.

What are you trying to solve?

cheers,
-k

-- 
Kay R?pke
http://classdump.org/





From cyrixlin at yahoo.com  Tue Jan  9 17:56:19 2007
From: cyrixlin at yahoo.com (lin cyrix)
Date: Tue, 9 Jan 2007 17:56:19 -0800 (PST)
Subject: [antlr-interest] small problem using antlr -- missing some
	charactor in generated java code
Message-ID: <20070110015619.61120.qmail@web38002.mail.mud.yahoo.com>

Hello, everyone,

When I use antlr (2.7.5/2.7.7) to translate my calc.g
file into lexer and parser java code, I alwayse find
some letter or charactor losing in the generated java
code. For example :

generated code:(using antlr 2.7.7, ArithLexer.java,
line 616, missing 'I')
/////////////////////////////////////
		match('^');
		if ( _createToken && _token==null &&
_ttype!=Token.SKP ) {
			_token = makeToken(_ttype);
			_token.setText(new String(text.getBuffer(), _begin,
text.length()-_begin));
		}
		_returnToken = _token;
	}
/////////////////////////////////////
there is a missing 'I' in the Token.SKP. In fact, in
calc.g, there is a 'I' in calc.g as the follow:
/////////////
WS    : ( ' '
        | '\t'
        )
        {$setType(Token.SKIP);}
      ;    
//////////////

And there are several other missings in the lexer and
parser too. Can anyone tell me why ? and how to avoid
it ?

Thanys a lot in advance !

Cyrix Lin

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: calc.g
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20070109/968e774d/attachment.pl 

From Gerz at fgan.de  Wed Jan 10 00:16:06 2007
From: Gerz at fgan.de (Gerz, Michael)
Date: Wed, 10 Jan 2007 09:16:06 +0100
Subject: [antlr-interest] Precompiled ANTLR 3.0b6 ?
Message-ID: <EF2ED99C54B0FD4188B64423658925EDBE1E2A@mailserv.lorien.fkie.fgan.de>

Hello,

to me it looks like ANTLR 3.0 beta 5 is no longer state of the art.

Could someone please provide us with a precompiled jar file ("antlr-3.0b6.jar") based on the latest sources?

Thanks in advance!

Michael

************************************************************************
Dr. Michael Gerz                                                        
FGAN e.V.                                      Phone:  +49 228 9435-414 
Department FKIE/ITF                            Fax:    +49 228 9435-685 
Neuenahrer Stra?e 20                           E-Mail: gerz at fgan.de     
53343 Wachtberg-Werthhoven                     WWW:    www.fgan.de     

From kroepke at classdump.org  Wed Jan 10 00:40:52 2007
From: kroepke at classdump.org (Kay Roepke)
Date: Wed, 10 Jan 2007 09:40:52 +0100
Subject: [antlr-interest] Precompiled ANTLR 3.0b6 ?
In-Reply-To: <EF2ED99C54B0FD4188B64423658925EDBE1E2A@mailserv.lorien.fkie.fgan.de>
References: <EF2ED99C54B0FD4188B64423658925EDBE1E2A@mailserv.lorien.fkie.fgan.de>
Message-ID: <060AF31B-00E0-4741-86CA-C4B3102D8E6F@classdump.org>


On 10. Jan 2007, at 9:16 , Gerz, Michael wrote:

> Hello,
>
> to me it looks like ANTLR 3.0 beta 5 is no longer state of the art.
>
> Could someone please provide us with a precompiled jar file  
> ("antlr-3.0b6.jar") based on the latest sources?

Hi!

I could see what I can do today, but I can't promise that I come  
around to it.
OTOH, you could download the latest sources yourself and do a build  
yourself:
<http://fisheye2.cenqua.com/browse/antlr> has links in the lower left  
hand corner to tarballs.
Those will include the very latest sources at all times.

You'll have to rebuild all the v2 grammars in there to be able to  
compile the whole shebang, I have a simple
shell script for that. I think there's also an ant build.xml. I've  
never used it, but it should work, as
Matt Benson seems to have kept that up to date.

Let me know if you have any troubles, then I'll try to get you  
prebuild .jar.

Oh, one more thing: Be sure to include the .stg files from  
org.antlr.codegen.templates.* in the jar file, as those
contain the necessary info for the code generator.

HTH,

-k
-- 
Kay R?pke
http://classdump.org/





From antlr at mirality.co.nz  Wed Jan 10 01:50:15 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 10 Jan 2007 22:50:15 +1300
Subject: [antlr-interest] disable warnings in v3?
In-Reply-To: <20070109080404.GA25155@maya.lan>
References: <20070109003548.GC17091@maya.lan>
	<E299D2D9-9A7E-4B9F-8DC2-0DBDC843CFCA@classdump.org>
	<20070109080404.GA25155@maya.lan>
Message-ID: <7.0.1.0.0.20070110224646.03767cd0@mirality.co.nz>

At 21:04 9/01/2007, fhaupt at informatik.uni-wuerzburg.de wrote:
 >: '<verbatim>' (options {greedy=false;} : a=.
 >{
 >	verbatime.addContent(a.getText());
 >}
 >)*  '</verbatim>'
 >;

IIRC, the greedy option needs to be in the same scope as both the 
. and the *.  Try writing it like this:

: '<verbatim>' (options {greedy=false;} :
   (a=. { verbatime.addContent(a.getText()); }
   )*) '</verbatim>'
;

(Haven't tested this, but it seems plausible.)


From Alexander at gaengel.de  Wed Jan 10 03:27:14 2007
From: Alexander at gaengel.de (=?ISO-8859-1?Q?Alexander_G=E4ngel?=)
Date: Wed, 10 Jan 2007 12:27:14 +0100 (MET)
Subject: [antlr-interest] Fragment for Parserrules
In-Reply-To: <9603F7D9-0798-4733-8560-ED4B0B0DCF0D@classdump.org>
References: <45A3A54C.3010501@gaengel.de>
	<9603F7D9-0798-4733-8560-ED4B0B0DCF0D@classdump.org>
Message-ID: <45A4CE06.9050302@gaengel.de>

I have some parserrule which should only be applied at special points,
the problem why I can't inline it because I use in an Syntactic Predicate.

or is there some better way I just don't see

Alexander

Kay Roepke schrieb:
>
> On 9. Jan 2007, at 15:21 , Alexander G?ngel wrote:
>
>> Is it possible to make a parserrule a fragment like in a lexer.
>
> No, nor would you want to.
>
> In a parser normally you have a designated start rule that you call
> and from that it recurses.
> In a lexer ANTLR generates the implicit start rule 'mTokens' for you,
> which does the prediction
> and then calls the individual lexer rules. Rules declared 'fragment'
> don't get included in that
> mTokens rule, so they aren't called automatically to figure out the
> next token, they can
> only be called explicitely by your own lexer rules.
>
> What are you trying to solve?
>
> cheers,
> -k
>
> --Kay R?pke
> http://classdump.org/
>
>
>
>


From kroepke at classdump.org  Wed Jan 10 03:42:58 2007
From: kroepke at classdump.org (Kay Roepke)
Date: Wed, 10 Jan 2007 12:42:58 +0100
Subject: [antlr-interest] Fragment for Parserrules
In-Reply-To: <45A4CE06.9050302@gaengel.de>
References: <45A3A54C.3010501@gaengel.de>
	<9603F7D9-0798-4733-8560-ED4B0B0DCF0D@classdump.org>
	<45A4CE06.9050302@gaengel.de>
Message-ID: <58BFE424-03E1-40D6-8664-13C6392F6ACE@classdump.org>


On 10. Jan 2007, at 12:27 , Alexander G?ngel wrote:

> I have some parserrule which should only be applied at special points,
> the problem why I can't inline it because I use in an Syntactic  
> Predicate.
>
> or is there some better way I just don't see

could you post some sample code/grammar?

I can't really see what you want to do here, that's easier to discuss  
if we have some sample stuff to
talk about ;)

cheers,

-k
-- 
Kay R?pke
http://classdump.org/





From ssiegel at finjan.com  Wed Jan 10 03:45:09 2007
From: ssiegel at finjan.com (Shmuel Siegel)
Date: Wed, 10 Jan 2007 13:45:09 +0200
Subject: [antlr-interest] Fragment for Parserrules
In-Reply-To: <45A4CE06.9050302@gaengel.de>
Message-ID: <E344C433F006AB45A306D422F9C3EB4C012F008B@exmail1.finjan.com>

It is still not clear what the problem is. Parser rules always behave like fragments in that they only get invoked if they are called or referenced.

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Alexander G?ngel
Sent: Wednesday, January 10, 2007 1:27 PM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Fragment for Parserrules

I have some parserrule which should only be applied at special points,
the problem why I can't inline it because I use in an Syntactic Predicate.

or is there some better way I just don't see

Alexander

Kay Roepke schrieb:
>
> On 9. Jan 2007, at 15:21 , Alexander G?ngel wrote:
>
>> Is it possible to make a parserrule a fragment like in a lexer.
>
> No, nor would you want to.
>
> In a parser normally you have a designated start rule that you call
> and from that it recurses.
> In a lexer ANTLR generates the implicit start rule 'mTokens' for you,
> which does the prediction
> and then calls the individual lexer rules. Rules declared 'fragment'
> don't get included in that
> mTokens rule, so they aren't called automatically to figure out the
> next token, they can
> only be called explicitely by your own lexer rules.
>
> What are you trying to solve?
>
> cheers,
> -k
>
> --Kay R?pke
> http://classdump.org/
>
>
>
>




From antlr at telenet.be  Wed Jan 10 07:43:35 2007
From: antlr at telenet.be (Bill Mayfield)
Date: Wed, 10 Jan 2007 16:43:35 +0100
Subject: [antlr-interest] When will the ANTLR3 BETA book be available?
Message-ID: <45A509A7.5020607@telenet.be>

Howdy,

I sure don't want to be an annoyance to Terence but does anybody have a 
clue on how many nights we need to sleep till the arrival of the ANTRL 
v3 BETA book? It would be of HUUUGE help!!! ;-)

I remember reading somewhere it was to appear last week or this week...


Thanks!

From fhaupt at informatik.uni-wuerzburg.de  Wed Jan 10 08:53:02 2007
From: fhaupt at informatik.uni-wuerzburg.de (fhaupt at informatik.uni-wuerzburg.de)
Date: Wed, 10 Jan 2007 17:53:02 +0100
Subject: [antlr-interest] disable warnings in v3?
In-Reply-To: <7.0.1.0.0.20070110224646.03767cd0@mirality.co.nz>
References: <20070109003548.GC17091@maya.lan>
	<E299D2D9-9A7E-4B9F-8DC2-0DBDC843CFCA@classdump.org>
	<20070109080404.GA25155@maya.lan>
	<7.0.1.0.0.20070110224646.03767cd0@mirality.co.nz>
Message-ID: <20070110165302.GD8230@maya.lan>

Hi,

actually using this version: 
verbatim

: '<verbatim>' (options {greedy=false;k=1;} : a=. {verbatime.addContent(a.getText());}
)*  '</verbatim>'
;

works so far, and only gives one warning ... but it discards the right match possibility, so its ok.

thanks

fabian

On Wed, Jan 10, 2007 at 10:50:15PM +1300, Gavin Lambert wrote:
> At 21:04 9/01/2007, fhaupt at informatik.uni-wuerzburg.de wrote:
> >: '<verbatim>' (options {greedy=false;} : a=.
> >{
> >	verbatime.addContent(a.getText());
> >}
> >)*  '</verbatim>'
> >;
> 
> IIRC, the greedy option needs to be in the same scope as both the . and the *.  Try writing it like 
> this:
> 
> : '<verbatim>' (options {greedy=false;} :
>   (a=. { verbatime.addContent(a.getText()); }
>   )*) '</verbatim>'
> ;
> 
> (Haven't tested this, but it seems plausible.)
> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20070110/37efa954/attachment.bin 

From foolishewe at hotmail.com  Wed Jan 10 09:01:46 2007
From: foolishewe at hotmail.com (Foolish Ewe)
Date: Wed, 10 Jan 2007 17:01:46 +0000
Subject: [antlr-interest] ANTLRWorks 1.0b8 under Windows XP,
	Addiing multiple directories to the classpath
Message-ID: <BAY107-F174A3201614407040B463AC0B20@phx.gbl>

Hi All:

I've been using ANTLRworks on a project that has grown a bit, and it is 
becoming an issue since I have
multiple directories I want to add to my class path, but it seems that 
ANTLRworks supports adding
only one additional directory using the custom class path option in the 
file->preferences, which
generates a tabbed pop-up with a Compiler option, with a radio box and a 
window to enter a
custom class path (which appears to append correctly to the system 
classpath).
Does anyone have any tricks/workarounds for this?

Thanks:

Bill M.

_________________________________________________________________
Fixing up the home? Live Search can help 
http://imagine-windowslive.com/search/kits/default.aspx?kit=improve&locale=en-US&source=hmemailtaglinenov06&FORM=WLMTAG


From parrt at cs.usfca.edu  Wed Jan 10 09:39:23 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 10 Jan 2007 10:39:23 -0700
Subject: [antlr-interest] When will the ANTLR3 BETA book be available?
In-Reply-To: <45A509A7.5020607@telenet.be>
References: <45A509A7.5020607@telenet.be>
Message-ID: <A50DD01A-4127-4F8D-B93B-FF8312A2BF15@cs.usfca.edu>


On Jan 10, 2007, at 8:43 AM, Bill Mayfield wrote:

> Howdy,
>
> I sure don't want to be an annoyance to Terence but does anybody  
> have a clue on how many nights we need to sleep till the arrival of  
> the ANTRL v3 BETA book? It would be of HUUUGE help!!! ;-)
>
> I remember reading somewhere it was to appear last week or this  
> week...

Hi.  The publisher wanted me to work on one of the chapters, which  
I'm trying to get to in snippets at the moment.  Once I finish, they  
can look it over quickly (hopefully).  Sorry!

Ter

From foolishewe at hotmail.com  Wed Jan 10 12:35:39 2007
From: foolishewe at hotmail.com (Foolish Ewe)
Date: Wed, 10 Jan 2007 20:35:39 +0000
Subject: [antlr-interest] Enabling ANTLR's tracing in ANTLRworks
Message-ID: <BAY107-F289537F22AF42CEC26532DC0B20@phx.gbl>

Hello All:

I'm trying to turn on the tracing in ANTLRWorks1.0b8 for a grammar of mine
(this corresponding ANTLR version is 3.0b5).  Currently I edit the ANTLR 
grammar
in ANTRworks, generate Java for the lexer, parser, etc. and then compile it 
with
other stuff I'm working on in eclipse.  Are there ANTLR code annotations or 
some setting
in ANTLR works I can use to enable trace output for the lexer and parser in 
the eclipse console?

Thanks:

Bill M.

_________________________________________________________________
Your Hotmail address already works to sign into Windows Live Messenger! Get 
it now 
http://clk.atdmt.com/MSN/go/msnnkwme0020000001msn/direct/01/?href=http://get.live.com/messenger/overview


From jbb at acm.org  Wed Jan 10 20:26:18 2007
From: jbb at acm.org (John B. Brodie)
Date: Wed, 10 Jan 2007 23:26:18 -0500
Subject: [antlr-interest] Help with mutually left-recursion
In-Reply-To: <70ABE4B5-EFB5-4DB2-A88F-CB8CEED31B93@mainiero.de> (message from
	Nicolai Mainiero on Tue, 09 Jan 2007 10:14:06 +0100)
References: <70ABE4B5-EFB5-4DB2-A88F-CB8CEED31B93@mainiero.de>
Message-ID: <E1H4rW6-0004BB-00@gecko>

on Tue, 09 Jan 2007 10:14:06, Nicolai Mainiero asked:
>Hello,

Hi!

>I try to write a grammar for Lua and have a problem with mutually  
>left-recursion in the grammar definition. Here ist the section from  
>the grammar so far.

i do not know Lua so the following is probably bogus, but here is what
i did to remove the left recursion (using antlr 3.0b5):

//----------begin lua.g----------
grammar lua;

start : prefixexp EOF ;

// original rules:
//prefixexp    : '('exp')' | var | functioncall ;
//functioncall : prefixexp args | prefixexp ':' NAME args ;
//var          : NAME | prefixexp '['exp']' | prefixexp '.' NAME ;

// step 1: left factor var and functioncall
//prefixexp    : '('exp')' | var  | functioncall ;
//functioncall : prefixexp (':' NAME)? args ;
//var          : NAME | (prefixexp ('['exp']' | '.' NAME)) ;

// step 2: collapse into a single rule.
//prefixexp
//    : '('exp')'
//    | NAME | (prefixexp ('['exp']' | '.' NAME)) /*var*/
//    | prefixexp (':' NAME)? args /*functioncall*/
//    ;

// step 3: re-arrange and left factor again
//prefixexp
//    : ( '('exp')' | NAME )
//    | prefixexp ( '['exp']' | '.' NAME | (':' NAME)? args )
//    ;

// step 4: remove left recursion
prefixexp
    : ( '('exp')' | NAME )
        ( '['exp']' | '.' NAME | (':' NAME)? args )*
    ;

exp : 'exp' ;
args : 'args' ;

NAME : 'name' ;
//----------end lua.g----------

hope this helps...
   -jbb

From trev at lycos.com  Wed Jan 10 21:55:47 2007
From: trev at lycos.com (trevor hansen)
Date: Thu, 11 Jan 2007 00:55:47 -0500 (EST)
Subject: [antlr-interest] [FW]Beginner,
	2.77: Error when using <AST=..> with a TreeParser.
Message-ID: <20070111005547.HM.0000000000000Gc@trev.bos-mail-wwl9.lycos.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070111/f2a46b8b/attachment.html 

From dnilesh0 at yahoo.co.in  Thu Jan 11 00:13:53 2007
From: dnilesh0 at yahoo.co.in (nilesh dhote)
Date: Thu, 11 Jan 2007 08:13:53 +0000 (GMT)
Subject: [antlr-interest] Regarding the ANTS grammar file
Message-ID: <20070111081353.25587.qmail@web7813.mail.in.yahoo.com>

hi,
        can anyone here please help me find the grammar file for ANTS. i am freaked out looking for the grammar for days together. I was able to find out the sql 2003 file for oracle but just could not find the sama for the ANTS.

nilesh

 				
---------------------------------
 Here?s a new way to find what you're looking for - Yahoo! Answers 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070111/9a847d0a/attachment.html 

From alexander at gaengel.de  Thu Jan 11 03:01:41 2007
From: alexander at gaengel.de (=?ISO-8859-1?Q?Alexander_G=E4ngel?=)
Date: Thu, 11 Jan 2007 12:01:41 +0100 (MET)
Subject: [antlr-interest] Fragment for Parserrules
In-Reply-To: <58BFE424-03E1-40D6-8664-13C6392F6ACE@classdump.org>
References: <45A3A54C.3010501@gaengel.de>
	<9603F7D9-0798-4733-8560-ED4B0B0DCF0D@classdump.org>
	<45A4CE06.9050302@gaengel.de>
	<58BFE424-03E1-40D6-8664-13C6392F6ACE@classdump.org>
Message-ID: <45A61987.1080408@gaengel.de>

Here is a small Grammar to show my Problem:

    grammar small;
    start    :(Identifier |    '->' keyword    )+;
    keyword:'test'|'test2';
    Identifier:('a'..'z'|'A'..'Z'|'_') (Letter)*;
    fragment
    Letter    :'a'..'z'|'A'..'Z'|'0'..'9'|'_'|'$';
    WS    :(' '|'\r'|'\t'|'\u000C'|'\n') {$channel=HIDDEN;};

for this Grammar input like this is true:

word word -> test word -> test2

but I would like that if the Input is just test it would also be true
but then be identified as an Identifier not a keyword.

ok in this example I could put my keyword also into the start rule but
in actual grammar I'm working on I would use it with a lot of keyword
(about 20) inside  a Syntactic Predicates so I would prefer to make the
rule keyword a fragment so it#s just recognized inside the start rule
when a -> is found.

Ok I hope you now understand what I want.

maybe there is a better way to do such a thing with Antlr I just don't
know about it.

Alexander


Kay Roepke schrieb:
>
> On 10. Jan 2007, at 12:27 , Alexander G?ngel wrote:
>
>> I have some parserrule which should only be applied at special points,
>> the problem why I can't inline it because I use in an Syntactic
>> Predicate.
>>
>> or is there some better way I just don't see
>
> could you post some sample code/grammar?
>
> I can't really see what you want to do here, that's easier to discuss
> if we have some sample stuff to
> talk about ;)
>
> cheers,
>
> -k
> --Kay R?pke
> http://classdump.org/
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070111/1ee05355/attachment.html 

From boutter at ps.uni-sb.de  Thu Jan 11 07:07:56 2007
From: boutter at ps.uni-sb.de (Christophe Boutter)
Date: Thu, 11 Jan 2007 16:07:56 +0100
Subject: [antlr-interest] Syntax error recognition in parser
Message-ID: <45A652CC.4020006@ps.uni-sb.de>

Hey folks,

I need help again. I use the generated parser to report syntactical
errors in the language I'm parsing. Everathing works fine if in the
programm a literal is replaced by an identifier:

action foo bar (action being a literal, and bar replacing ';')

In the case the literal (here ';') is replaced with another literal the
parser boils out and doesn't even give an error message
(defaultErrorHandler is set to true):

action foo . ('.' being a literal)

I would like the parser to report the error and continue with the next
input. Although this can also be a problem when someone just omits a ';'
and the parser matches the next literal to the actual rule. Then it
would be nice to recover the token and start anew:

action foo (error recognition here by matching the next action literal)
action bar; (start of the action rule with action)

If someone can help me or has any ideas how to solve my problems I would
be very thankful.

For Information here the action rule on which the examples are based:
actionDeclaration
	: "action" idList SEMI
	| "patient" "action" idList SEMI
	| "impatient" "action" idList SEMI
	;

idList
	: ID (COMMA ID)*
	;

And the identifier rule of the lexer:
ID options { testLiterals=true; paraphrase = "an identifier";}
    : ('a'..'z'|'A'..'Z') ('a'..'z'|'A'..'Z'|'0'..'9'|'_'|'$'|'-')*
    ;

SEMI: ';' ; (for completeness)


Chris

-- 
Try not to become a man of success, but rather try to become a man of value.
-- Albert Einstein

From kroepke at classdump.org  Thu Jan 11 14:45:33 2007
From: kroepke at classdump.org (Kay Roepke)
Date: Thu, 11 Jan 2007 23:45:33 +0100
Subject: [antlr-interest] Precompiled ANTLR 3.0b6 ?
In-Reply-To: <EF2ED99C54B0FD4188B64423658925EDBE1E2A@mailserv.lorien.fkie.fgan.de>
References: <EF2ED99C54B0FD4188B64423658925EDBE1E2A@mailserv.lorien.fkie.fgan.de>
Message-ID: <A3F8BB77-969C-4BEF-A5F0-89E78380AA4E@classdump.org>


On 10. Jan 2007, at 9:16 , Gerz, Michael wrote:

> to me it looks like ANTLR 3.0 beta 5 is no longer state of the art.
>
> Could someone please provide us with a precompiled jar file  
> ("antlr-3.0b6.jar") based on the latest sources?

Hi!

I don't know whether this will still help you, but I have just  
uploaded an "between-the-betas" jar to antlr.org.
Grab it at <http://www.antlr.org/share/1168554920793/antlr3-beta- 
rev3386.jar> while it's hot.

Note that it doesn't include any target runtimes (besides Java, of  
course) because most of the will be out of sync, probably.
This is not 3.0b6 (and it won't identify itself as it), because we  
decided we wanted to do a "real" beta release with all the
targets and stuff.
It also doesn't have a README, for the changes please see <http:// 
fisheye2.cenqua.com/browse/antlr/README.txt?r=3382>.

I tested it on the examples available on <http://antlr.org/v3>, so  
everything should be fine.
Please let me know of any problems.

cheers,

-k
-- 
Kay R?pke
http://classdump.org/





From bv-svp at artima.com  Thu Jan 11 22:34:27 2007
From: bv-svp at artima.com (Bill Venners)
Date: Thu, 11 Jan 2007 22:34:27 -0800
Subject: [antlr-interest] Predicate Syntax Problem
Message-ID: <B3518B52-0FAF-4831-9DF1-51A6BBF514BF@artima.com>

Hello,

I am not sure how to add a predicate to one element of an OR  
expression in ANLTR 3.

passedDecl
     :    'not-null'? ('byte' | 'short' | 'int' | 'long' | 'boolean'  
| 'float' | 'double'
          | 'char' | ID_UP )^ { isTypeName($ID_UP.getText()) }?
          ID_DOWN { isVarName($ID_DOWN.getText()) }?
     ;

This is apparently valid grammar syntax, but the $ID_UP doesn't work.  
I get:

com/artima/view/ViewParser.java:497: cannot find symbol
symbol  : variable $ID_UP
location: class com.artima.view.ViewParser
             if ( !( isTypeName($ID_UP.getText()) ) ) {

I am unable to find any help in the documentation I can find. Can  
someone help me understand what I should do here? What I'd like to  
accomplish is to kill the parse if the ID_UP variable returns false  
when passed to isTypeName().

Thanks.

Bill
----
Bill Venners
President
Artima, Inc.
http://www.artima.com

P.S. I also tried the following, which are apparently not valid ANTLR  
3 grammar syntax:

passedDecl
     :    'not-null'? ('byte' | 'short' | 'int' | 'long' | 'boolean'  
| 'float' | 'double'
          | 'char' | ID_UP { isTypeName($ID_UP.getText()) }?)^  
ID_DOWN { isVarName($ID_DOWN.getText()) }?
     ;


passedDecl
     :    'not-null'? ('byte' | 'short' | 'int' | 'long' | 'boolean'  
| 'float' | 'double'
          | 'char' | ID_UP ){ isTypeName($ID_UP.getText()) }?^  
ID_DOWN { isVarName($ID_DOWN.getText()) }?
     ;








From nicolai at mainiero.de  Fri Jan 12 01:43:19 2007
From: nicolai at mainiero.de (Nicolai Mainiero)
Date: Fri, 12 Jan 2007 10:43:19 +0100
Subject: [antlr-interest] Strange Mismatched Token Exception
Message-ID: <9710085A-9212-4201-A7C4-2F20EE94F551@mainiero.de>

Hi,

during the parsing of a file I get the following exception

mismatched token: [@2,26:26='(',<44>,1:26]; expecting type '('

wich seems a bit strange to me, because it is scanning what the  
parser is expecting,or not?

Please can anyone tell me why this error occurs?

Yours Nicolai Mainiero

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2421 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20070112/25c5ba26/attachment.bin 

From francis.andre at easynet.fr  Fri Jan 12 01:44:39 2007
From: francis.andre at easynet.fr (Francis ANDRE)
Date: Fri, 12 Jan 2007 10:44:39 +0100
Subject: [antlr-interest] ANTLR 277: Minor Functional extension: Allow
 abstract keyword for Java based Parser & Lexer
Message-ID: <45A75887.7070702@easynet.fr>

Hi Ter & All

I have a grammar that generates more than 50 000 lines of Java and it takes 
around 1 min elapse for producing the Parser & Lexer. I am using some semantic 
predicates and to avoid recompiling the grammar for fixing their code, I am 
using a subclass. But there is no way to define them as abstract and implement 
them properly in a subclass of the Parser.

The traditional bypass is to declared them with an empty body returning false in 
the Parser and overriding the implementation in the derivate class. But that's 
not quite clean and a abstract definition would be much better.

So that's why I am proposing to extend the ANTLR grammar for allowing abstract 
on the definition of the Parser class and allowing empty abstract methods as well.

Rgds

Francis ANDRE

From dave at badgers-in-foil.co.uk  Fri Jan 12 02:11:13 2007
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Fri, 12 Jan 2007 10:11:13 +0000
Subject: [antlr-interest] Strange Mismatched Token Exception
In-Reply-To: <9710085A-9212-4201-A7C4-2F20EE94F551@mainiero.de>
References: <9710085A-9212-4201-A7C4-2F20EE94F551@mainiero.de>
Message-ID: <20070112101113.GB6680@badgers-in-foil.co.uk>

On Fri, Jan 12, 2007 at 10:43:19AM +0100, Nicolai Mainiero wrote:
> mismatched token: [@2,26:26='(',<44>,1:26]; expecting type '('

Could it be that some other lexer rule than the one you expect has
matched the '(' character?

Look in the generated code, at the constants defined for token types,
and see what kind that one actually is (I think the 44 is the numeric
type value in the error message, but it might be one of the other
numbers).

Another possibility is that you've made a grammar change, and recompiled
the lexer but not the parser (or vice versa) so the constants are out
of sync between the .class files.


hope that helps,
dave

-- 
http://david.holroyd.me.uk/

From gyula.laszlo at profund.hu  Thu Jan 11 13:56:05 2007
From: gyula.laszlo at profund.hu (=?ISO-8859-1?Q?Gyula_L=E1szl=F3?=)
Date: Thu, 11 Jan 2007 22:56:05 +0100
Subject: [antlr-interest] ANTLRWorks 1.0b8 under Windows XP,
	Addiing multiple directories to the classpath
In-Reply-To: <BAY107-F174A3201614407040B463AC0B20@phx.gbl>
References: <BAY107-F174A3201614407040B463AC0B20@phx.gbl>
Message-ID: <91BB7158-B77B-4503-95B4-7DA7F05F4568@profund.hu>

Hi,

(I might be terribly wrong about this... :)
have you tried using the java-style classpath declaration, separating  
each classpath by the system-default-separator?

UNICES: lib/antlr-current.jar:lib/boooooo.jar:lib/hiss-hiss.jar
Windows: lib/antlr-current.jar;lib/boooooo.jar;lib/hiss-hiss.jar





On 2007.01.10., at 18:01, Foolish Ewe wrote:

> Hi All:
>
> I've been using ANTLRworks on a project that has grown a bit, and  
> it is becoming an issue since I have
> multiple directories I want to add to my class path, but it seems  
> that ANTLRworks supports adding
> only one additional directory using the custom class path option in  
> the file->preferences, which
> generates a tabbed pop-up with a Compiler option, with a radio box  
> and a window to enter a
> custom class path (which appears to append correctly to the system  
> classpath).
> Does anyone have any tricks/workarounds for this?
>
> Thanks:
>
>


Gyula L?szl?

email:gyula.laszlo AT profund.hu
http://profund.hu




From bradkumar at gmail.com  Fri Jan 12 07:43:17 2007
From: bradkumar at gmail.com (Rajesh Kumar)
Date: Fri, 12 Jan 2007 10:43:17 -0500
Subject: [antlr-interest] problem parsing a file
Message-ID: <39c22bd20701120743p2162eb77g68e83e2e1c2cba8e@mail.gmail.com>

Hi people,

I am having trouble parsing a file. I am attaching the grammar files
with this email.

I have been using the same grammar for a while and it worked without
any trouble for input files upto size ~60 KB.  However, today I tried
parsing an input file that was almost 700 KB and I got this error:

Exception in thread "main" java.lang.StackOverflowError
   at antlr.InputBuffer.LA(InputBuffer.java:86)
   at antlr.CharScanner.LA(CharScanner.java:166)
   at antlr.CharScanner.consume(CharScanner.java:82)
   at antlr.CharScanner.matchRange(CharScanner.java:230)
   at eolc.EOLCLexer.mLETTER(EOLCLexer.java:667)
   at eolc.EOLCLexer.mSTRING(EOLCLexer.java:703)
   at eolc.EOLCLexer.nextToken(EOLCLexer.java:162)
   at antlr.TokenBuffer.fill(TokenBuffer.java:69)
   at antlr.TokenBuffer.LA(TokenBuffer.java:80)
   at antlr.LLkParser.LA(LLkParser.java:52)
   at eolc.EOLCParser.argument(EOLCParser.java:792)
   at eolc.EOLCParser.optional_arguments(EOLCParser.java:756)
   at eolc.EOLCParser.atom(EOLCParser.java:731)
   at eolc.EOLCParser.literal(EOLCParser.java:300)
   at eolc.EOLCParser.labelled_rule(EOLCParser.java:194)
   at eolc.EOLCParser.labelled_rule_list_entries(EOLCParser.java:233)
   at eolc.EOLCParser.labelled_rule_list_entries(EOLCParser.java:235)
   at eolc.EOLCParser.labelled_rule_list_entries(EOLCParser.java:235)
.........................
......................
...................

Is there some option that I need to set. The fact that I have been
using the same grammar file unchanged for sometime makes me think that
there is nothing wrong with the grammar itself.

Any help would be appreciated!

-- 
Rajesh Kumar
http://www.ece.cmu.edu/~rajeshk
-------------- next part --------------
A non-text attachment was scrubbed...
Name: EOLC.g
Type: application/octet-stream
Size: 5010 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20070112/a0016ec0/attachment-0002.obj 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: EOLCTreeWalker.g
Type: application/octet-stream
Size: 6963 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20070112/a0016ec0/attachment-0003.obj 

From bradkumar at gmail.com  Fri Jan 12 08:21:05 2007
From: bradkumar at gmail.com (Rajesh Kumar)
Date: Fri, 12 Jan 2007 11:21:05 -0500
Subject: [antlr-interest] problem parsing a file
In-Reply-To: <8b56cad40701120809g5ef9eaer3bfe15d94762811e@mail.gmail.com>
References: <39c22bd20701120743p2162eb77g68e83e2e1c2cba8e@mail.gmail.com>
	<8b56cad40701120809g5ef9eaer3bfe15d94762811e@mail.gmail.com>
Message-ID: <39c22bd20701120821mc744dafi9bab63afdef3c038@mail.gmail.com>

You are right. There is a lot of recursion going on. However, I am not
sure how to rewrite the treewalker class if I specify the grammar with
a * instead of recursively

Can you point me to a small example so that I'll know how to re-write
the trewalker if I change the grammar to use "*"

Thanks a lot for you help. Actually I am not an extensive user of
Antlr and I just wrote this parser a while back. Since it seemed to
work I did not bother with the muances :)

> The implication of the stack overflow error (to me - I could well be
> wrong) is that you've got a lot of recursion going on - i.e. there's a
> recursive rule that's reading a lot of the file in one go. It might
> not crash for 60k files because the stack's big enough, but 700k
> causes too many levels of recursion.
>
> Looking at the stack trace, the recursion would seem to be in the rule
> 'labelled_rule_list_entries' - implication is that you're parsing a
> list - could it be refactored to use a * or + rather than a recursive
> rule?
>
> Stuart Dootson
>


-- 
Rajesh Kumar
http://www.ece.cmu.edu/~rajeshk

From nicolai at mainiero.de  Fri Jan 12 08:23:03 2007
From: nicolai at mainiero.de (Nicolai Mainiero)
Date: Fri, 12 Jan 2007 17:23:03 +0100
Subject: [antlr-interest] Strange Mismatched Token Exception
In-Reply-To: <20070112101113.GB6680@badgers-in-foil.co.uk>
References: <9710085A-9212-4201-A7C4-2F20EE94F551@mainiero.de>
	<20070112101113.GB6680@badgers-in-foil.co.uk>
Message-ID: <CFACA888-B979-415D-9EEB-7FAE793C6B25@mainiero.de>

Hi,

Am 12.01.2007 um 11:11 schrieb David Holroyd:

> On Fri, Jan 12, 2007 at 10:43:19AM +0100, Nicolai Mainiero wrote:
>> mismatched token: [@2,26:26='(',<44>,1:26]; expecting type '('
>
> Could it be that some other lexer rule than the one you expect has
> matched the '(' character?
>
> Look in the generated code, at the constants defined for token types,
> and see what kind that one actually is (I think the 44 is the numeric
> type value in the error message, but it might be one of the other
> numbers).
>
> Another possibility is that you've made a grammar change, and  
> recompiled
> the lexer but not the parser (or vice versa) so the constants are out
> of sync between the .class files.
>

It seems that the lexer and parser were actually out of sync. Thanks  
for this hint.

Greets Nicolai

>
> hope that helps,
> dave
>
> -- 
> http://david.holroyd.me.uk/

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2421 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20070112/74ac596f/attachment.bin 

From ewbank at gmail.com  Fri Jan 12 10:12:39 2007
From: ewbank at gmail.com (Bryan Ewbank)
Date: Fri, 12 Jan 2007 13:12:39 -0500
Subject: [antlr-interest] Separate compilation units for grammars (C++)
Message-ID: <dd3a065f0701121012l4673b2edlad6cafd8335b818d@mail.gmail.com>

All,

I've been exploring how to split a ANTLR-based compiler (v2.x; C++;
one parser, N tree walkers) into different libraries.  It looks as if
the input token set will be a problem for most systems, since it
appears to be required in the same directory as the *.g processed by
ANTLR.

Has anyone made this kind of front-end/back-end split?  Any pointers?

Oh.  I'm living in ANTLR v2.

Thanks,
- Bryan Ewbank

From parrt at cs.usfca.edu  Fri Jan 12 10:17:26 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 12 Jan 2007 11:17:26 -0700
Subject: [antlr-interest] Predicate Syntax Problem
In-Reply-To: <B3518B52-0FAF-4831-9DF1-51A6BBF514BF@artima.com>
References: <B3518B52-0FAF-4831-9DF1-51A6BBF514BF@artima.com>
Message-ID: <9449F731-F678-4A6B-82A3-08CAB005A339@cs.usfca.edu>


On Jan 11, 2007, at 11:34 PM, Bill Venners wrote:

> Hello,
>
> I am not sure how to add a predicate to one element of an OR  
> expression in ANLTR 3.
>
> passedDecl
>     :    'not-null'? ('byte' | 'short' | 'int' | 'long' | 'boolean'  
> | 'float' | 'double'
>          | 'char' | ID_UP )^ { isTypeName($ID_UP.getText()) }?
>          ID_DOWN { isVarName($ID_DOWN.getText()) }?
>     ;
>
> This is apparently valid grammar syntax, but the $ID_UP doesn't  
> work. I get:
>
> com/artima/view/ViewParser.java:497: cannot find symbol
> symbol  : variable $ID_UP
> location: class com.artima.view.ViewParser
>             if ( !( isTypeName($ID_UP.getText()) ) ) {
>
> I am unable to find any help in the documentation I can find. Can  
> someone help me understand what I should do here? What I'd like to  
> accomplish is to kill the parse if the ID_UP variable returns false  
> when passed to isTypeName().

Hi Bill,

Have you tried the latest jar in file sharing area?  It should fix  
lots of these.  Do you want the {...}? to validate input or  
disambiguate?  If the latter, they should go on the left edge. :)

Ter

From fhaupt at informatik.uni-wuerzburg.de  Fri Jan 12 11:13:40 2007
From: fhaupt at informatik.uni-wuerzburg.de (fhaupt at informatik.uni-wuerzburg.de)
Date: Fri, 12 Jan 2007 20:13:40 +0100
Subject: [antlr-interest] header for lexer in v3
Message-ID: <20070112191340.GI1963@maya.lan>

hi there,

where can i define the @header { } for the outputtet lexer-file? 

the normal header on top of my grammar is only put into the parser file. however i'd need the package declaration also in the lexer class...


thanks a lot

fabian
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20070112/1acd3d0e/attachment.bin 

From parrt at cs.usfca.edu  Fri Jan 12 11:25:11 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 12 Jan 2007 12:25:11 -0700
Subject: [antlr-interest] header for lexer in v3
In-Reply-To: <20070112191340.GI1963@maya.lan>
References: <20070112191340.GI1963@maya.lan>
Message-ID: <C6C72F26-F0AC-4420-A189-D251E87CAE46@cs.usfca.edu>

please see

http://www.antlr.org/wiki/display/ANTLR3/Migrating+from+ANTLR+2+to 
+ANTLR+3

and a search reveals

http://www.antlr.org/pipermail/antlr-interest/2006-October/ 
017948.html

Ter

On Jan 12, 2007, at 12:13 PM, fhaupt at informatik.uni-wuerzburg.de wrote:

> hi there,
>
> where can i define the @header { } for the outputtet lexer-file?
>
> the normal header on top of my grammar is only put into the parser  
> file. however i'd need the package declaration also in the lexer  
> class...
>
>
> thanks a lot
>
> fabian


From bv-svp at artima.com  Fri Jan 12 11:37:12 2007
From: bv-svp at artima.com (Bill Venners)
Date: Fri, 12 Jan 2007 11:37:12 -0800
Subject: [antlr-interest] Predicate Syntax Problem
In-Reply-To: <9449F731-F678-4A6B-82A3-08CAB005A339@cs.usfca.edu>
References: <B3518B52-0FAF-4831-9DF1-51A6BBF514BF@artima.com>
	<9449F731-F678-4A6B-82A3-08CAB005A339@cs.usfca.edu>
Message-ID: <A6B836DC-D6E9-4FAB-AE52-2CF58DF3ECB4@artima.com>

Hi Terence,

On Jan 12, 2007, at 10:17 AM, Terence Parr wrote:

>
> On Jan 11, 2007, at 11:34 PM, Bill Venners wrote:
>
>> Hello,
>>
>> I am not sure how to add a predicate to one element of an OR  
>> expression in ANLTR 3.
>>
>> passedDecl
>>     :    'not-null'? ('byte' | 'short' | 'int' | 'long' |  
>> 'boolean' | 'float' | 'double'
>>          | 'char' | ID_UP )^ { isTypeName($ID_UP.getText()) }?
>>          ID_DOWN { isVarName($ID_DOWN.getText()) }?
>>     ;
>>
>> This is apparently valid grammar syntax, but the $ID_UP doesn't  
>> work. I get:
>>
>> com/artima/view/ViewParser.java:497: cannot find symbol
>> symbol  : variable $ID_UP
>> location: class com.artima.view.ViewParser
>>             if ( !( isTypeName($ID_UP.getText()) ) ) {
>>
>> I am unable to find any help in the documentation I can find. Can  
>> someone help me understand what I should do here? What I'd like to  
>> accomplish is to kill the parse if the ID_UP variable returns  
>> false when passed to isTypeName().
>
> Hi Bill,
>
> Have you tried the latest jar in file sharing area?  It should fix  
> lots of these.  Do you want the {...}? to validate input or  
> disambiguate?  If the latter, they should go on the left edge. :)
>
I'll try the latest jar. I want to validate, but having slept on it  
I'm not sure what the advantage of putting this in the parser itself  
is. What I do is build an AST that I pass to a code generator (just  
some Java code that uses StringTemplate directly, and that code  
generator could do the same validation, print out nice error  
messages, kill the build, etc. I get the feeling there's some cool  
way to use StringTemplate with ANTLR 3 that I don't know about. If  
there is and there's some documentation somewhere, please point me to  
it.

I thought in the ANTLR 2 docs that validation predicates went *not*  
on the left. I've been trying to guess how ANTLR 3 works from ANTLR2  
docs.

Thanks. Really great stuff. I'm just quite the newbie.

Bill

From parrt at cs.usfca.edu  Fri Jan 12 11:45:09 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 12 Jan 2007 12:45:09 -0700
Subject: [antlr-interest] Predicate Syntax Problem
In-Reply-To: <A6B836DC-D6E9-4FAB-AE52-2CF58DF3ECB4@artima.com>
References: <B3518B52-0FAF-4831-9DF1-51A6BBF514BF@artima.com>
	<9449F731-F678-4A6B-82A3-08CAB005A339@cs.usfca.edu>
	<A6B836DC-D6E9-4FAB-AE52-2CF58DF3ECB4@artima.com>
Message-ID: <F6ED350E-B73D-414F-9DDD-24EAFDBB628C@cs.usfca.edu>

> I'll try the latest jar. I want to validate, but having slept on it  
> I'm not sure what the advantage of putting this in the parser  
> itself is. What I do is build an AST that I pass to a code  
> generator (just some Java code that uses StringTemplate directly,  
> and that code generator could do the same validation, print out  
> nice error messages, kill the build, etc. I get the feeling there's  
> some cool way to use StringTemplate with ANTLR 3 that I don't know  
> about. If there is and there's some documentation somewhere, please  
> point me to it.

Yeah I like doing validation in random java code not with sem preds.

doc: http://www.antlr.org/wiki/display/ANTLR3/Template+construction

You can use -> template construction in either parser or tree  
parser.  There's a new undocumented mode (only in book so far) called  
rewrite=true that uses templates to update the input token buffer in- 
place.  you can then just toString the buffer to see the altered  
buffer. :)  Probably not what you want in this case...

> I thought in the ANTLR 2 docs that validation predicates went *not*  
> on the left. I've been trying to guess how ANTLR 3 works from  
> ANTLR2 docs.

Actually all preds validate but some get hoisted to disambiguate. :)

> Thanks. Really great stuff. I'm just quite the newbie.

Great!


Ter

From ric.klaren at gmail.com  Fri Jan 12 13:04:45 2007
From: ric.klaren at gmail.com (Ric Klaren)
Date: Fri, 12 Jan 2007 22:04:45 +0100
Subject: [antlr-interest] Separate compilation units for grammars (C++)
In-Reply-To: <dd3a065f0701121012l4673b2edlad6cafd8335b818d@mail.gmail.com>
References: <dd3a065f0701121012l4673b2edlad6cafd8335b818d@mail.gmail.com>
Message-ID: <bc607a4e0701121304g3d4ecd1dw94758b3c56ded1a7@mail.gmail.com>

Hi Bryan,

On 1/12/07, Bryan Ewbank <ewbank at gmail.com> wrote:
> I've been exploring how to split a ANTLR-based compiler (v2.x; C++;
> one parser, N tree walkers) into different libraries.

I assume different libraries during building since you're talking
about the tokentypes file?

> It looks as if the input token set will be a problem for most systems, since it
> appears to be required in the same directory as the *.g processed by
> ANTLR.

I usually copy the tokentypes files around the different directories
with the help of Makefile rules. E.g. the simple straigthforward way.

Cheers,

Ric

PS my internet access may be limited the coming week. In the middle of
moving at the moment, mid next week my ADSL will move as well. I hope
they get it right in one go *fingers crossed*

From JOHNSJA at intelsat.com  Fri Jan 12 13:35:50 2007
From: JOHNSJA at intelsat.com (Johnson, Janeen)
Date: Fri, 12 Jan 2007 16:35:50 -0500
Subject: [antlr-interest] Custom Tree Node,
	AST Enumeration or something else?
Message-ID: <E1926A032DDAE4479D18501974D47A0B015C785C@US-EX1.na.ds.intelsat.com>

Hi,

I have a fairly complicated parser whose purpose is to calculate and
return the results of arbitrary complex equations that may include
function calls to my Java code.  The parsing and evaluation via a tree
walker works fine.  

I have a second need to fetch a list of a specific token type in the
order they are found in this same arbitrary complex equation.  Is there
a way to write a rule or use an AST Enumeration or something else to get
all of the data of my special token type in the order they appear in the
input equation?  I'm not hanging on to the input equations and may not
need the list of special tokens every time.  I parse once and pass the
CommonASTs around to the various functions that evaluate and reevaluate
the equations as things change in my application.

If there is an example of this please point me to it.  The examples and
reading of others' problems on this list and its archive have gotten me
this far, but the multiple AST rules have usually been to start
evaluating something in another part of the tree, not fetch only a
specific type of token that may be anywhere in the tree (any number of
times).  A rule to do that would be helpful and a way to integrate it
into my existing equation parser would be great as well.

Oh, I'm parsing a line at a time so I can't read in the line twice to
parse it twice (that I know of, anyway) and "discovering" this special
token can be context dependent at times so if I can use my original
parser to find these tokens it would really help.

I'm using antlr-2.7.7.  Any suggestions or sample code locations would
be appreciated!

Janeen
Intelsat is the world's largest provider of fixed satellite services.  Real-time, constant communications with people anywhere in the world is closer, by far.  

For more information about Intelsat, visit www.intelsat.com. 

 

This email message is for the sole use of the intended recipients and may contain confidential and privileged information. Any unauthorized review, use, disclosure or distribution is prohibited. If you are not the intended recipient, please contact the sender by reply email and destroy all copies of the original message. Any views expressed in this message are those of the individual sender, except where the sender specifically states them to be the views of Intelsat, Ltd. and its subsidiaries.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070112/3fd1585a/attachment.html 

From lsakaray at us.ibm.com  Sat Jan 13 15:14:04 2007
From: lsakaray at us.ibm.com (Lakshman Sakaray)
Date: Sat, 13 Jan 2007 16:14:04 -0700
Subject: [antlr-interest] Lakshman Sakaray/Lenexa/IBM is out of the office.
Message-ID: <OF2BEC9A47.DDB485E9-ON87257262.007FA198-87257262.007FA198@us.ibm.com>


I will be out of the office starting  01/13/2007 and will not return until
02/03/2007.

I will respond to your message when I return.
If need any immediate response please contact to my manager  Shawn Moe
"smoe at us.ibm.com"
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070113/9bf83664/attachment.html 

From antlr-list at arizona-software.ch  Sun Jan 14 22:06:12 2007
From: antlr-list at arizona-software.ch (Jean Bovet)
Date: Sun, 14 Jan 2007 22:06:12 -0800
Subject: [antlr-interest] ANTLRWorks 1.0b8 under Windows XP,
	Addiing multiple directories to the classpath
In-Reply-To: <BAY107-F174A3201614407040B463AC0B20@phx.gbl>
References: <BAY107-F174A3201614407040B463AC0B20@phx.gbl>
Message-ID: <AB4AFBFF-0DBD-454F-8D4C-80A4DDDAD6B4@arizona-software.ch>

Yeah... it's not really clear right now. In the custom "ANTLR 3"  
field, you can enter multiple paths with the system delimiter. Note  
that if the "System" check-box is checked, ANTLRWorks will also use  
the system classpath as defined by the CLASSPATH environment.

Regards,

Jean

On Jan 10, 2007, at 9:01 AM, Foolish Ewe wrote:

> Hi All:
>
> I've been using ANTLRworks on a project that has grown a bit, and  
> it is becoming an issue since I have
> multiple directories I want to add to my class path, but it seems  
> that ANTLRworks supports adding
> only one additional directory using the custom class path option in  
> the file->preferences, which
> generates a tabbed pop-up with a Compiler option, with a radio box  
> and a window to enter a
> custom class path (which appears to append correctly to the system  
> classpath).
> Does anyone have any tricks/workarounds for this?
>
> Thanks:
>
> Bill M.
>
> _________________________________________________________________
> Fixing up the home? Live Search can help http://imagine- 
> windowslive.com/search/kits/default.aspx?kit=improve&locale=en- 
> US&source=hmemailtaglinenov06&FORM=WLMTAG
>


From ceesbos83 at gmail.com  Sun Jan 14 23:42:37 2007
From: ceesbos83 at gmail.com (Cees Bos)
Date: Mon, 15 Jan 2007 08:42:37 +0100
Subject: [antlr-interest] Error with ecmascript and Antlr 3.0b5
Message-ID: <c9a4c1620701142342g5e2f21a3l291ffdb02268025c@mail.gmail.com>

Hi all,

I try to generate the lexer and parser class for ecmascript, but is failing
at my site.

D:\tools\rhino_workspace\antlr-3.0b5\lib>java -cp antlr-3.0b5.jar
;stringtemplate-3.0.jar;antlr-2.7.7.jar; org.antlr.Tool ecmascript.g
ANTLR Parser Generator  Version 3.0b5 (November 15, 2006)  1989-2006
error(100): ecmascript.g:5:25: syntax error: antlr: ecmascript.g:5:25:
expecting SEMI, found '..'
error(133): ecmascript.g:3:1: illegal option charVocabulary
error(8):  file ecmascript.g contains grammar ECMAScript; names must be
identical
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space

The ecmascript.g I uses it the one posted on the grammar list (
ecmascriptA3.g): http://www.antlr.org/grammar/1153976512034/ecmascriptA3.g

What am I doing wrong?
Or is this is bug in the ecmascript or antlr?

Increasing the heap size doesn't help, it only takes longer to get the heap
size error.

Can someone give me a hint to solve the problems?

Thanks and regards,
Cees
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070115/aa399578/attachment.html 

From alexander at gaengel.de  Mon Jan 15 01:16:31 2007
From: alexander at gaengel.de (=?ISO-8859-1?Q?Alexander_G=E4ngel?=)
Date: Mon, 15 Jan 2007 10:16:31 +0100 (MET)
Subject: [antlr-interest] Fragment for Parserrules
In-Reply-To: <45A61987.1080408@gaengel.de>
References: <45A3A54C.3010501@gaengel.de>
	<9603F7D9-0798-4733-8560-ED4B0B0DCF0D@classdump.org>
	<45A4CE06.9050302@gaengel.de>
	<58BFE424-03E1-40D6-8664-13C6392F6ACE@classdump.org>
	<45A61987.1080408@gaengel.de>
Message-ID: <45AB46E7.5090809@gaengel.de>

Can anybody give me a Hint where I am wrong?

Alexander

Alexander G?ngel schrieb:
> Here is a small Grammar to show my Problem:
>
>     grammar small;
>     start    :(Identifier |    '->' keyword    )+;
>     keyword:'test'|'test2';
>     Identifier:('a'..'z'|'A'..'Z'|'_') (Letter)*;
>     fragment
>     Letter    :'a'..'z'|'A'..'Z'|'0'..'9'|'_'|'$';
>     WS    :(' '|'\r'|'\t'|'\u000C'|'\n') {$channel=HIDDEN;};
>
> for this Grammar input like this is true:
>
> word word -> test word -> test2
>
> but I would like that if the Input is just test it would also be true
> but then be identified as an Identifier not a keyword.
>
> ok in this example I could put my keyword also into the start rule but
> in actual grammar I'm working on I would use it with a lot of keyword
> (about 20) inside  a Syntactic Predicates so I would prefer to make
> the rule keyword a fragment so it#s just recognized inside the start
> rule when a -> is found.
>
> Ok I hope you now understand what I want.
>
> maybe there is a better way to do such a thing with Antlr I just don't
> know about it.
>
> Alexander
>
>
> Kay Roepke schrieb:
>>
>> On 10. Jan 2007, at 12:27 , Alexander G?ngel wrote:
>>
>>> I have some parserrule which should only be applied at special points,
>>> the problem why I can't inline it because I use in an Syntactic
>>> Predicate.
>>>
>>> or is there some better way I just don't see
>>
>> could you post some sample code/grammar?
>>
>> I can't really see what you want to do here, that's easier to discuss
>> if we have some sample stuff to
>> talk about ;)
>>
>> cheers,
>>
>> -k
>> --Kay R?pke
>> http://classdump.org/
>>
>>
>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070115/b5827961/attachment.html 

From tas at ultersys.ru  Mon Jan 15 04:09:54 2007
From: tas at ultersys.ru (Andrey Timoshenkov)
Date: Mon, 15 Jan 2007 15:09:54 +0300
Subject: [antlr-interest] Grammar inheritance problem
Message-ID: <45AB6F12.1090304@ultersys.ru>

Hi All.

I have a trouble using ANTLR 2.7.5. I need 2 lexer grammars L1 and L2, 
where L2 inherits from L1 and I need to specify my own base class for 
resulting lexer. Below are simple examples:

L1.g:
--------------------------
options {
     language="Cpp";
}

class L1 extends Lexer("MyScanner");
options {
     k=2;
}

tokens {
     TOK1 = "abc";
}

NUM: '0'..'9';
---------------------------------

L2.g:
---------------------------------
options {
     language="Cpp";
}

class L2 extends L1("MyScanner");
options {
     k=2;
}

tokens {
     TOK2 = "def";
}

ID: ( 'a'..'z' ) ( 'a'..'z' | '0'..'9' )+;
---------------------------------

The second grammar fails due to the line:

	class L2 extends ("MyScanner");

in generated "expandedl2.g".

If I remove ("MyScanner") from L2 definition then ANTLR processes the 
grammar without errors but I lose inheritance from MyScanner.

Can somebody suggest a workaround?

Thank you in advance.
Andrey Timoshenkov, Ulter Systems Inc., Moscow, Russia.

From alexander at gaengel.de  Mon Jan 15 08:09:32 2007
From: alexander at gaengel.de (=?UTF-8?B?QWxleGFuZGVyIEfDpG5nZWw=?=)
Date: Mon, 15 Jan 2007 17:09:32 +0100 (MET)
Subject: [antlr-interest] Fragment for Parserrules
In-Reply-To: <E344C433F006AB45A306D422F9C3EB4C0133EDAB@exmail1.finjan.com>
References: <E344C433F006AB45A306D422F9C3EB4C0133EDAB@exmail1.finjan.com>
Message-ID: <45ABA7AF.1050906@gaengel.de>

Thank you

I will look for non-reserved keywords in the Mailing list.

But right now don't see why not just make it possible to make a parser
rule a fragment, cause it would solve the problem easy and would not
change the normal behavior of ANTLR when you just don't use fragment
before the rule. (but ok I'm not into the code from Antlr so maybe there
would be Problems I just don't know about right now)

Alexander

Shmuel Siegel schrieb:
>
> There are ways around it by controlling when idents are checked for
> matches against keyword. The actual order in ANTLR is for IDENT to
> match and then the IDENT is checked to see if it matches ?test?. If it
> does, the token type is changed. This process can be interfered with
> and can be made dependent on the state of the parser, but lookahead
> will probably cause you problems.
>
>  
>
> You can read a lot more about the subject by doing searches on the
> mailing list. The generic subject is non-reserved keywords.
>
>  
>
> The type of solution that I wrote is probably the most viable. And
> yes, everybody who deals with languages that accept none reserved
> keywords hits it at some time or other.
>
>  
>
> ------------------------------------------------------------------------
>
> *From:* Alexander G?ngel [mailto:alexander at gaengel.de]
> *Sent:* Monday, January 15, 2007 5:24 PM
> *To:* Shmuel Siegel
> *Subject:* Re: [antlr-interest] Fragment for Parserrules
>
>  
>
> And there is no way to get around this?
>
> cause I think that such a Problem could occur in may grammars when
> special keywords are only specil in certain positions.
>
> Alexander
>
>
> Shmuel Siegel schrieb:
>
> As I answered you before, keyword (or any parser rule) is effectively
> a fragment. It doesn?t matter that it has been extracted to a separate
> rule. The mistake that you are making is that you think that something
> is identified as ?keyword?. The parser doesn?t produce a keyword
> token. Even if you were building a tree, the parser wouldn?t have
> created anything special just because keyword matched. ?keyword? will
> only match because it was called from the ?start? rule. You are
> probably bothered by the fact that the mere presence of ?test? in a
> parser rule causes test to not match Identifier in the lexer. This is
> a fact of life.
>
>  
>
> You can achieve what you stated by rewriting the keyword parser rule as:
>
>  
>
> keyword: (t=?test? | t=?test2?) {$t.setType(Identifier);};
>
>  
>
> This will reset the ?test? and ?test2? tokens to be identifiers when
> they are accessed through keyword.
>
>  
>
> Hopefully, I was clear enough
>
> ------------------------------------------------------------------------
>
> *From:* antlr-interest-bounces at antlr.org
> <mailto:antlr-interest-bounces at antlr.org>
> [mailto:antlr-interest-bounces at antlr.org] *On Behalf Of *Alexander G?ngel
> *Sent:* Monday, January 15, 2007 11:17 AM
> *To:* antlr-interest at antlr.org <mailto:antlr-interest at antlr.org>
> *Subject:* Re: [antlr-interest] Fragment for Parserrules
>
>  
>
> Can anybody give me a Hint where I am wrong?
>
> Alexander
>
> Alexander G?ngel schrieb:
>
> Here is a small Grammar to show my Problem:
>
> grammar small;
> start    :(Identifier |    '->' keyword    )+;
> keyword:'test'|'test2';
> Identifier:('a'..'z'|'A'..'Z'|'_') (Letter)*;
> fragment
> Letter    :'a'..'z'|'A'..'Z'|'0'..'9'|'_'|'$';
> WS    :(' '|'\r'|'\t'|'\u000C'|'\n') {$channel=HIDDEN;};
>
> for this Grammar input like this is true:
>
> word word -> test word -> test2
>
> but I would like that if the Input is just test it would also be true
> but then be identified as an Identifier not a keyword.
>
> ok in this example I could put my keyword also into the start rule but
> in actual grammar I'm working on I would use it with a lot of keyword
> (about 20) inside  a Syntactic Predicates so I would prefer to make
> the rule keyword a fragment so it#s just recognized inside the start
> rule when a -> is found.
>
> Ok I hope you now understand what I want.
>
> maybe there is a better way to do such a thing with Antlr I just don't
> know about it.
>
> Alexander
>
>
> Kay Roepke schrieb:
>
>
> On 10. Jan 2007, at 12:27 , Alexander G?ngel wrote:
>
>
>
> I have some parserrule which should only be applied at special points,
> the problem why I can't inline it because I use in an Syntactic
> Predicate.
>
> or is there some better way I just don't see
>
>
> could you post some sample code/grammar?
>
> I can't really see what you want to do here, that's easier to discuss
> if we have some sample stuff to
> talk about ;)
>
> cheers,
>
> -k
> --Kay R?pke
> http://classdump.org/
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070115/32704559/attachment-0001.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: alexander.vcf
Type: text/x-vcard
Size: 289 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20070115/32704559/attachment-0001.vcf 

From kroepke at classdump.org  Mon Jan 15 12:47:23 2007
From: kroepke at classdump.org (Kay Roepke)
Date: Mon, 15 Jan 2007 21:47:23 +0100
Subject: [antlr-interest] Fragment for Parserrules
In-Reply-To: <45ABA7AF.1050906@gaengel.de>
References: <E344C433F006AB45A306D422F9C3EB4C0133EDAB@exmail1.finjan.com>
	<45ABA7AF.1050906@gaengel.de>
Message-ID: <F69E6E35-48C9-4594-8D71-F8285BF15BA3@classdump.org>


On 15. Jan 2007, at 17:09 , Alexander G?ngel wrote:

> But right now don't see why not just make it possible to make a parser
> rule a fragment, cause it would solve the problem easy and would not
> change the normal behavior of ANTLR when you just don't use fragment
> before the rule. (but ok I'm not into the code from Antlr so maybe  
> there
> would be Problems I just don't know about right now)

As Shmuel said, parser rules are effectively fragment rules. I don't
see how a (non-)fragment concept would help in the case with non- 
reserved
keywords. You will always have to supply some context and custom code to
make the right decision.

Could you elaborate what you mean by a fragment parser rule and how this
would solve the problem?

cheers,
-k
-- 
Kay R?pke
http://classdump.org/





From zhixueyong at hotmail.com  Mon Jan 15 14:01:02 2007
From: zhixueyong at hotmail.com (Xue Yong Zhi)
Date: Mon, 15 Jan 2007 17:01:02 -0500
Subject: [antlr-interest] Error with ecmascript and Antlr 3.0b5
In-Reply-To: <c9a4c1620701142342g5e2f21a3l291ffdb02268025c@mail.gmail.com>
References: <c9a4c1620701142342g5e2f21a3l291ffdb02268025c@mail.gmail.com>
Message-ID: <45ABF99E.6030900@hotmail.com>


> The ecmascript.g I uses it the one posted on the grammar list 
> (ecmascriptA3.g): http://www.antlr.org/grammar/1153976512034/ecmascriptA3.g

This ecmascript grammar is in bad shape. It is not a suprise that it 
does not work with antlr 3. Even with 2.7.7, it only compiles ok, but 
has tons of problems at runtime. It is not being maintained after the 
first release.

-- 
Xue Yong Zhi
http://seclib.blogspot.com


From vcobra at gmail.com  Mon Jan 15 15:38:48 2007
From: vcobra at gmail.com (Vincente Cobra)
Date: Mon, 15 Jan 2007 18:38:48 -0500
Subject: [antlr-interest] switching the lexer state
Message-ID: <876352a00701151538q661df5a4r481c7f2a114db3f6@mail.gmail.com>

Hi everybody,

I have a problem switching the lexer state in antlr. I would like to have
the javacc behavior (this.tokenmanager.switchTo(lexer.comment_mode)).

Everytime I find a multiline comment when lexing I want to put the lexer in
comment mode and later revert it back to default.

Thanks in advance

----------------------------------------------------
Yves Zoundi
http://xpontus.sf.net
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070115/1a8e3cce/attachment.html 

From mark.mandel at gmail.com  Mon Jan 15 21:00:14 2007
From: mark.mandel at gmail.com (Mark Mandel)
Date: Tue, 16 Jan 2007 16:00:14 +1100
Subject: [antlr-interest] v3: Using ANTLR with ColdFusion
Message-ID: <4153ee230701152100r5fb57fd5kef3af1f787e385f9@mail.gmail.com>

Just a note to let you guys know I'm having a blast using ANTLR with ColdFusion.

I've written then beginnings of my HQL like syntax for my ColdFusion
ORM, and it's been absolutely brilliant.

Basically, I generated my Lexer and Parser with it, and my Parser
outputs my AST.

I can't generate a tree parser with ANTLR due to the fact I need some
information that is available only in ColdFusion objects, which I
can't query from inside Java.

But rolling my own tree parser is so easy regardless when using the
type values as they are found against the Parser already generated by
ANTLR.  It's just a case of recursively travelling through the AST and
doing what I need as I travel down.

Honestly, couldn't be easier.

Just thought I would share.

Mark

-- 
E: mark.mandel at gmail.com
W: www.compoundtheory.com

From ceesbos83 at gmail.com  Mon Jan 15 23:20:39 2007
From: ceesbos83 at gmail.com (Cees Bos)
Date: Tue, 16 Jan 2007 08:20:39 +0100
Subject: [antlr-interest] Error with ecmascript and Antlr 3.0b5
In-Reply-To: <45ABF99E.6030900@hotmail.com>
References: <c9a4c1620701142342g5e2f21a3l291ffdb02268025c@mail.gmail.com>
	<45ABF99E.6030900@hotmail.com>
Message-ID: <c9a4c1620701152320g2ed09f90hee251d2a5c25c3c6@mail.gmail.com>

Is there another ecmascript grammar which is in better shape?
Or is someone working on maintaining the ecmascriptA3 grammar?

Thanks,
Cees

On 1/15/07, Xue Yong Zhi <zhixueyong at hotmail.com> wrote:
>
>
> > The ecmascript.g I uses it the one posted on the grammar list
> > (ecmascriptA3.g):
> http://www.antlr.org/grammar/1153976512034/ecmascriptA3.g
>
> This ecmascript grammar is in bad shape. It is not a suprise that it
> does not work with antlr 3. Even with 2.7.7, it only compiles ok, but
> has tons of problems at runtime. It is not being maintained after the
> first release.
>
> --
> Xue Yong Zhi
> http://seclib.blogspot.com
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070116/cf402556/attachment.html 

From angelo.zerr at gmail.com  Tue Jan 16 04:57:21 2007
From: angelo.zerr at gmail.com (Angelo zerr)
Date: Tue, 16 Jan 2007 13:57:21 +0100
Subject: [antlr-interest] Add fields, getter, setter,
	... into existing java file with antlr?
Message-ID: <c77e343c0701160457n1e809b93h784b95825bdca721@mail.gmail.com>

Hi,
I'm developping eclipse plugin Akrogen http://akrogen.sourceforge.net/ which
generate code (Freemarker, XSL,...) .
Today I would like manage the update of a file with generated content (ex :
generate content for getter and add it
to the existing file java class).

Is it possible to do that with antlr. If it's it possible, could you help
me, give me suggestion  (I'm new user with antlr).

Thank for your help.

Regards Angelo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070116/78db197b/attachment.html 

From dave at badgers-in-foil.co.uk  Tue Jan 16 09:28:32 2007
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Tue, 16 Jan 2007 17:28:32 +0000
Subject: [antlr-interest] Add fields, getter, setter,
	... into existing java file with antlr?
In-Reply-To: <c77e343c0701160457n1e809b93h784b95825bdca721@mail.gmail.com>
References: <c77e343c0701160457n1e809b93h784b95825bdca721@mail.gmail.com>
Message-ID: <20070116172832.GA19579@badgers-in-foil.co.uk>

On Tue, Jan 16, 2007 at 01:57:21PM +0100, Angelo zerr wrote:
> I'm developping eclipse plugin Akrogen http://akrogen.sourceforge.net/ which
> generate code (Freemarker, XSL,...) .
> Today I would like manage the update of a file with generated content (ex :
> generate content for getter and add it
> to the existing file java class).
> 
> Is it possible to do that with antlr. If it's it possible, could you help
> me, give me suggestion  (I'm new user with antlr).

I've written an ANTLRv3-based tool to do this kind of thing with
ActionScript, and might give you some ideas:

  http://www.badgers-in-foil.co.uk/projects/metaas/


I think that the JaxMeJS may do this for Java, to some extent (and it's
parser is ANTLR-based) but I'm not sure how pretty the resulting code
is, as I've never tried round-tripping with that lib, only straight code
generation,

  http://ws.apache.org/jaxme/js/index.html

However, if you are modifying Java files, and doing it in Eclipse too, I
suspect you'd be best off using the Eclipse JDT platform's inherent support
for Java code manipulation (not that I know which API's you need to look
at though ;)


ta,
dave

-- 
http://david.holroyd.me.uk/

From angelo.zerr at gmail.com  Tue Jan 16 09:40:45 2007
From: angelo.zerr at gmail.com (Angelo zerr)
Date: Tue, 16 Jan 2007 18:40:45 +0100
Subject: [antlr-interest] Add fields, getter, setter,
	... into existing java file with antlr?
In-Reply-To: <20070116172832.GA19579@badgers-in-foil.co.uk>
References: <c77e343c0701160457n1e809b93h784b95825bdca721@mail.gmail.com>
	<20070116172832.GA19579@badgers-in-foil.co.uk>
Message-ID: <c77e343c0701160940t1ce3ec6fo722b921f0fb81d07@mail.gmail.com>

Hi David,
thank you a lot for your answer. I will see your links.
I don't want use Eclipse to modify java file, because I want manage any
files
like xml, javascript, php, ... files. So I'm searching generic way to update
a file.

Regards Angelo

2007/1/16, David Holroyd <dave at badgers-in-foil.co.uk>:
>
> On Tue, Jan 16, 2007 at 01:57:21PM +0100, Angelo zerr wrote:
> > I'm developping eclipse plugin Akrogen http://akrogen.sourceforge.net/which
> > generate code (Freemarker, XSL,...) .
> > Today I would like manage the update of a file with generated content
> (ex :
> > generate content for getter and add it
> > to the existing file java class).
> >
> > Is it possible to do that with antlr. If it's it possible, could you
> help
> > me, give me suggestion  (I'm new user with antlr).
>
> I've written an ANTLRv3-based tool to do this kind of thing with
> ActionScript, and might give you some ideas:
>
>   http://www.badgers-in-foil.co.uk/projects/metaas/
>
>
> I think that the JaxMeJS may do this for Java, to some extent (and it's
> parser is ANTLR-based) but I'm not sure how pretty the resulting code
> is, as I've never tried round-tripping with that lib, only straight code
> generation,
>
>   http://ws.apache.org/jaxme/js/index.html
>
> However, if you are modifying Java files, and doing it in Eclipse too, I
> suspect you'd be best off using the Eclipse JDT platform's inherent
> support
> for Java code manipulation (not that I know which API's you need to look
> at though ;)
>
>
> ta,
> dave
>
> --
> http://david.holroyd.me.uk/
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070116/001b6288/attachment.html 

From dave at badgers-in-foil.co.uk  Tue Jan 16 12:17:43 2007
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Tue, 16 Jan 2007 20:17:43 +0000
Subject: [antlr-interest] Add fields, getter, setter,
	... into existing java file with antlr?
In-Reply-To: <c77e343c0701160940t1ce3ec6fo722b921f0fb81d07@mail.gmail.com>
References: <c77e343c0701160457n1e809b93h784b95825bdca721@mail.gmail.com>
	<20070116172832.GA19579@badgers-in-foil.co.uk>
	<c77e343c0701160940t1ce3ec6fo722b921f0fb81d07@mail.gmail.com>
Message-ID: <20070116201743.GA21275@badgers-in-foil.co.uk>

On Tue, Jan 16, 2007 at 06:40:45PM +0100, Angelo zerr wrote:
> thank you a lot for your answer. I will see your links.
> I don't want use Eclipse to modify java file, because I want manage any
> files
> like xml, javascript, php, ... files. So I'm searching generic way to update
> a file.

Good luck!

I have an occasional side project hacking on an Model Driven Development
system (of which MetaAS is the only released component), so I know that
these are hard problems

;)

dave

-- 
http://david.holroyd.me.uk/

From JOHNSJA at intelsat.com  Tue Jan 16 12:45:43 2007
From: JOHNSJA at intelsat.com (Johnson, Janeen)
Date: Tue, 16 Jan 2007 15:45:43 -0500
Subject: [antlr-interest] Documentation or Example further defining AST
	methods?
Message-ID: <E1926A032DDAE4479D18501974D47A0B015C785F@US-EX1.na.ds.intelsat.com>

All,

I believe the answer to my earlier post on "finding all tokens of a
particular type in an AST" may be contained in the AST routines, but I
don't know what some of the methods (such as equalsList,
equalsListPartial, initialize, findAll and findAllPartial) do and how
they might help me.  Is there an example or other reference that further
defines them?  The Class documentation lists their signatures, but
nothing more.  A one-liner on what the method is for should be all I
need.

Thanks in advance!

Janeen 
Intelsat is the world's largest provider of fixed satellite services.  Real-time, constant communications with people anywhere in the world is closer, by far.  

For more information about Intelsat, visit www.intelsat.com. 

 

This email message is for the sole use of the intended recipients and may contain confidential and privileged information. Any unauthorized review, use, disclosure or distribution is prohibited. If you are not the intended recipient, please contact the sender by reply email and destroy all copies of the original message. Any views expressed in this message are those of the individual sender, except where the sender specifically states them to be the views of Intelsat, Ltd. and its subsidiaries.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070116/ff8b7fb7/attachment.html 

From angelo.zerr at gmail.com  Tue Jan 16 12:47:52 2007
From: angelo.zerr at gmail.com (Angelo zerr)
Date: Tue, 16 Jan 2007 21:47:52 +0100
Subject: [antlr-interest] Add fields, getter, setter,
	... into existing java file with antlr?
In-Reply-To: <20070116201743.GA21275@badgers-in-foil.co.uk>
References: <c77e343c0701160457n1e809b93h784b95825bdca721@mail.gmail.com>
	<20070116172832.GA19579@badgers-in-foil.co.uk>
	<c77e343c0701160940t1ce3ec6fo722b921f0fb81d07@mail.gmail.com>
	<20070116201743.GA21275@badgers-in-foil.co.uk>
Message-ID: <c77e343c0701161247j6bdea82csdd268c675a24301b@mail.gmail.com>

Thank you david.
If you have time to see Akrogen http://akrogen.sourceforge.net/,
could you tell me what do you think about my plugin?

Thank you a lot.

Angelo

2007/1/16, David Holroyd <dave at badgers-in-foil.co.uk>:
>
> On Tue, Jan 16, 2007 at 06:40:45PM +0100, Angelo zerr wrote:
> > thank you a lot for your answer. I will see your links.
> > I don't want use Eclipse to modify java file, because I want manage any
> > files
> > like xml, javascript, php, ... files. So I'm searching generic way to
> update
> > a file.
>
> Good luck!
>
> I have an occasional side project hacking on an Model Driven Development
> system (of which MetaAS is the only released component), so I know that
> these are hard problems
>
> ;)
>
> dave
>
> --
> http://david.holroyd.me.uk/
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070116/d0042e51/attachment.html 

From AGibson at carrieraccess.com  Tue Jan 16 13:31:43 2007
From: AGibson at carrieraccess.com (Gibson, Andrea)
Date: Tue, 16 Jan 2007 14:31:43 -0700
Subject: [antlr-interest] AST Tree question
Message-ID: <52AB1243526C77459939EBB7976B622F07BDC045@newman.carrieraccess.com>

Hello,

 I am having some trouble with setting up a tree structure so that I can
easily get the text below, and I was wondering if someone could give me some
help. 

 

Here is the code I am working on

 

hostPort returns[HostPort hp = null]

            { Integer p=null;}

            : (h:host (c:COLON^ p1:port)?)

            { hp= new HostPort(#h.getText());

            if(#p1!=null) p=Integer.parseInt(#p1.getText());

            if(p!=null)hp = new HostPort(#h.getText(),p);};

 

And what I want is the text from the host and port. But with how I have it
set up now, #h.getText() is just the first character in the host, and if I
traverse the AST tree using getRight() it continues though all the
characters including into the port. Is there a way to separate these out? Is
there a way to make the host be a root of another tree and not have it based
around a token from the lexer?

 

Any help is appreciated.

 

-Gabbie

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070116/f16105ee/attachment.html 

From ganelin at mail.com  Tue Jan 16 19:09:08 2007
From: ganelin at mail.com (Pavel Ganelin)
Date: Tue, 16 Jan 2007 22:09:08 -0500
Subject: [antlr-interest] How to build parser for initialization statement
	in non LL(K) grammar
Message-ID: <45AD9354.6040607@mail.com>

Hi,

(ANTLR version 2.7.7)

I have a question about writing grammar for a language with the 
following variable initialization statement.

Here is an example of the statement in this language.

x y z 1 m n 2 k l p q ;

Variables x,y,z are set to 1; m,n are set to 2 and k,l,p,q are set to 0. 
Please note that for the last list you may skip the initial value and it 
is interpreted as 0.

I want the resulting parsing tree for this example look like this:
( 1 x y z) ( 2 m n ) ( 0 k l p q)

i.e. initialization value at the beginning of the list and then a list 
of variables for this value;

Originally I had the following grammar with very long look ahead. It 
worked OK for a while

grammar:
( list ) * SEMI
;

list!:
( vars INT ) => v:vars i:INT {##=([NODE],#i,#v)};}
| vars {##=([NODE],[INT,?0?],#v);}
;

vars:
(IDENT) +
;

The approach broke down when I had to add semantic actions to the vars 
(to convert unreserved keywords to identifiers). Is there a better way 
to solve this problem without large (i.e. the full variable list) look 
ahead?

Alternative approach below with just single variable lookahead is good 
for parsing, but I do not know how to build the tree here.

list:
recursive
;

recursive:
IDENT
(
(IDENT) =>recursive
| INT // how to build the tree here I have just the last var in the list 
here
| //ditto
)
;

Sincerely,
Pavel



From fhaupt at informatik.uni-wuerzburg.de  Tue Jan 16 23:14:24 2007
From: fhaupt at informatik.uni-wuerzburg.de (fhaupt at informatik.uni-wuerzburg.de)
Date: Wed, 17 Jan 2007 08:14:24 +0100
Subject: [antlr-interest] disable warnings in v3?
In-Reply-To: <20070110165302.GD8230@maya.lan>
References: <20070109003548.GC17091@maya.lan>
	<E299D2D9-9A7E-4B9F-8DC2-0DBDC843CFCA@classdump.org>
	<20070109080404.GA25155@maya.lan>
	<7.0.1.0.0.20070110224646.03767cd0@mirality.co.nz>
	<20070110165302.GD8230@maya.lan>
Message-ID: <20070117071424.GB9680@maya.lan>

hi,

using this version works quite well, however. it seems to have a problem with newline-characters.
Do i have to set anything so that the getText() option gives me back newline-characters?

In the wiki http://www.antlr.org/wiki/pages/viewpage.action?pageId=1573 there's only the description to 
ignore everything inbetween those two tags, but i actually have to use that data, including the newline chars.

thanks for any advice
fabian


On Wed, Jan 10, 2007 at 05:53:02PM +0100, fhaupt at informatik.uni-wuerzburg.de wrote:
> Hi,
> 
> actually using this version: 
> verbatim
> 
> : '<verbatim>' (options {greedy=false;k=1;} : a=. {verbatime.addContent(a.getText());}
> )*  '</verbatim>'
> ;
> 
> works so far, and only gives one warning ... but it discards the right match possibility, so its ok.
> 
> thanks
> 
> fabian
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20070117/a3b23e6c/attachment.bin 

From jose.ventura.roda at gmail.com  Wed Jan 17 03:25:07 2007
From: jose.ventura.roda at gmail.com (Jose Ventura)
Date: Wed, 17 Jan 2007 12:25:07 +0100
Subject: [antlr-interest] AST Tree question
In-Reply-To: <52AB1243526C77459939EBB7976B622F07BDC045@newman.carrieraccess.com>
References: <52AB1243526C77459939EBB7976B622F07BDC045@newman.carrieraccess.com>
Message-ID: <e39abda10701170325l2f45460n5bde5ae657cf6d6c@mail.gmail.com>

Can you put the 'host' and 'port' rules?



2007/1/16, Gibson, Andrea <AGibson at carrieraccess.com>:
>
>  Hello,
>
>  I am having some trouble with setting up a tree structure so that I can
> easily get the text below, and I was wondering if someone could give me some
> help.
>
>
>
> Here is the code I am working on
>
>
>
> hostPort returns[HostPort hp = null]
>
>             { Integer p=null;}
>
>             : (h:host (c:COLON^ p1:port)?)
>
>             { hp= new HostPort(#h.getText());
>
>             if(#p1!=null) p=Integer.parseInt(#p1.getText());
>
>             if(p!=null)hp = new HostPort(#h.getText(),p);};
>
>
>
> And what I want is the text from the host and port. But with how I have it
> set up now, #h.getText() is just the first character in the host, and if I
> traverse the AST tree using getRight() it continues though all the
> characters including into the port. Is there a way to separate these out? Is
> there a way to make the host be a root of another tree and not have it based
> around a token from the lexer?
>
>
>
> Any help is appreciated.
>
>
>
> -Gabbie
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070117/e45d98a4/attachment-0001.html 

From corno.schraverus at isd.nl  Wed Jan 17 09:48:17 2007
From: corno.schraverus at isd.nl (Corno Schraverus)
Date: Wed, 17 Jan 2007 18:48:17 +0100
Subject: [antlr-interest] Special filtering in a lexer
Message-ID: <F9BA06E293FD174B8EB3EAAA0B2A658E03861D@eva.ISDlan.local>

Hi all,
 
I want to make a lexer that splits a tokenstream up into known tokens and all the text that is in between 2 know tokens.
Say 'Foo' and 'Bar' are know tokens, then the following string;
 
bla bla bla Foo bla Bar xxx
 
should result in 5 tokens with the respective types and values;
 
OTHER "bla bla bla "
FOO "Foo"
OTHER " bla "
BAR "Bar"
OTHER " xxx"
 
Should I use filter=RULE and create a token manually in that rule or is there a better way to realize this?
 
TIA,
 
Corno
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070117/ea941ab8/attachment.html 

From JOHNSJA at intelsat.com  Wed Jan 17 10:49:18 2007
From: JOHNSJA at intelsat.com (Johnson, Janeen)
Date: Wed, 17 Jan 2007 13:49:18 -0500
Subject: [antlr-interest] Return Values from Tree Walker rules
Message-ID: <E1926A032DDAE4479D18501974D47A0B015C7861@US-EX1.na.ds.intelsat.com>

Thank you to all who work on Antlr.

I get warnings about every return value in my .g file when I generate
code, but the only thing I found about it appears at the end of this
message.  Clearly the rest of my code is useless, structured as it is,
if I should be interpretting the warning as an error message.  If the
use of return values when I get a warning is the crux of my problem,
please skip to my "Note" at the end of this message.  

If the warnings are not really errors in my case, do additional items in
the returnAST override the return values when the code gets back to the
"calling" rule?  Can this overwriting be circumvented?

Here is a portion of my print-statement-laden code's output and the
corresponding walker part of my parser.g file.  Can anyone shed some
light on what is overwriting the returned values?

First, my print statements' output from the Walker code with my comments
in << comment >>:

attribName is: STATUS				<< Strictly a value --
not involved in any calculations, but something I want to keep in the
AST -- OK >>
identifier = safe-symbol				<< Properly
parsed value  -- OK >>
q = safe-symbol  				<< From within the
bowels of the "statement" rule  -- OK >>
pinName going into status_value is 11000	<< From within the
bowels of the "statement" rule -- OK >>
value returned from statement (st2) is the	            << From a
"statement" within a "statement".  The value "the" (a token value needed
for correct parsing logic) is returned instead of my return value from
evaluating this "statement" -- not OK >>
rtnValue after safe_symbol is: unk                       << From the
bowels:  The expected rtn value and the correct value to return from the
"statement" rule even though I had an unexpected value from the
sub-statement above -- OK, I guess, although scary since I had the
erroneous value above >>
Found delimStmt and result is safe-symbol	<< Why wasn't "result"
my return value -- unk?? -- not OK >>
Exception:  java.lang.NullPointerException	<< From the java that
calls the walker -- my walker fails to return an acceptable value and
doesn't issue any clue about where it failed -- not OK  -- Is there a
code generation option to help me get some diagnostic output? What is
the syntax of that?  Is the option included in the "java antlr.Tool
parser.g" statement line or is it included somewhere else? (I've tried
every combo of placement I can think of for the -trace-related options
and never get generated code with diagnostic output so I know I'm doing
something wrong.)  >>

<partial walker code>

startRule returns [String result]
        { result = "";
        }
        : ((dls: delimStmt)+) EOF{ result = dls.toString();} ;

delimStmt returns [String dSresult]
        { dSresult = "";
          String naString = "NA";
        }
        :  ((attribName: ID COMMA)?
                { System.out.println("attribName is: " +
attribName.toString());
                }
           ) (STMTOPEN value: statement
                {
                        dSresult = value.toString();
                        System.out.println("Found delimStmt and result
is " +  value.toString());
                }
           STMTCLOSE SEMI BOOL (ID)* )
          | NA {dSresult = naString;
                System.out.println("dSresult = " + dSresult);
               }
          ;
statement returns [String rtnValue] {
        rtnValue = "";
	// within the statement rule, there are 4 or five options that
each populate rtnValue.  I refer to them in the output as the "bowels"
of the statement rule.  In the generated code, rtnValue is returned in
each case and I print out the value I've calculated in the code and it
is what I would expect to be returned.  My return value from
"statement", however, is not what I expected.

===================================================== NOTE below
=================================================
Note:  I assume that the warning I get about return values is coming
from here in the code generation code (found this by googling), but I
don't understand the ramifications.
// Warn about return value if any, but not inside syntactic predicate if
(!(grammar <javascript:searchRef('grammar')>  instanceof LexerGrammar
<javascript:searchRef('LexerGrammar')> ) && syntacticPredLevel
<javascript:searchRef('syntacticPredLevel')>  == 0 && rs
<javascript:searchRef('rs')> .block <javascript:searchRef('block')>
.returnAction <javascript:searchRef('returnAction')>  != null) { println
<javascript:searchRef('println')> ("Warning: Rule '" + rr
<javascript:searchRef('rr')> .targetRule
<javascript:searchRef('targetRule')>  + "' returns a value"); } 

If I'm totally screwed by the "ramifications" can anyone help me
off-list to learn a strategy to get the returnAST to contain what I
need?

Thanks for bearing with me.  Two previous emails were unanswered on or
off-list so if I've done or am doing something wrong in asking these
questions, please point it out -- on or off list.  There were a couple
of other questions about return values in the list archives, but they
never received any on-list answers either, so I'm at a loss.

Janeen
Intelsat is the world's largest provider of fixed satellite services.  Real-time, constant communications with people anywhere in the world is closer, by far.  

For more information about Intelsat, visit www.intelsat.com. 

 

This email message is for the sole use of the intended recipients and may contain confidential and privileged information. Any unauthorized review, use, disclosure or distribution is prohibited. If you are not the intended recipient, please contact the sender by reply email and destroy all copies of the original message. Any views expressed in this message are those of the individual sender, except where the sender specifically states them to be the views of Intelsat, Ltd. and its subsidiaries.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070117/43e79842/attachment.html 

From cyrixlin at yahoo.com  Thu Jan 18 01:14:26 2007
From: cyrixlin at yahoo.com (lin cyrix)
Date: Thu, 18 Jan 2007 01:14:26 -0800 (PST)
Subject: [antlr-interest] always missing some charactor when using ANTLR to
	generate lexer and parser
Message-ID: <713591.61038.qm@web38001.mail.mud.yahoo.com>

I encountered a problem when using ANTLR to generate
lexer or parser java files. for example :

1, missing '('
throw new NoViableAltExceptionLT(1), getFilename());
should be :
throw new NoViableAltException(LT(1), getFilename());

2, missing 's' of 'result'
reult.value = new Double(Math.atan(
((Double)a.value).doubleValue() ));
should be :
result.value = new Double(Math.atan(
((Double)a.value).doubleValue() ));

3, missing 't' of '_ttype'
_token = makeToken(_type);
should be :
_token = makeToken(_ttype);

Why? Each time when I use ANTLR to compile calc.g,
there are always several this kind of missings. Can
anyone tell me the probable reason ?

Thanks in advance
Cyrix Lin


 
____________________________________________________________________________________
Be a PS3 game guru.
Get your game face on with the latest PS3 news and previews at Yahoo! Games.
http://videogames.yahoo.com/platform?platform=120121
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: calc.g
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20070118/6f80451f/attachment.pl 

From AGibson at carrieraccess.com  Thu Jan 18 08:13:58 2007
From: AGibson at carrieraccess.com (Gibson, Andrea)
Date: Thu, 18 Jan 2007 09:13:58 -0700
Subject: [antlr-interest] AST Tree question
Message-ID: <52AB1243526C77459939EBB7976B622F07BDC6F3@newman.carrieraccess.com>

Yeah sure,

 

port: (DIGIT)+;

 

Where DIGIT is just 0-9

 

And

 

host : hostName

       | ipv6Reference;

 

hostName 

       :(domainLabel(PERIOD)?     )*;

 

ipv6Reference 

       : OPEN_BRACKET ipv6Address CLOSE_BRACKET;

 

-Gabbie

 

  _____  

From: Jose Ventura [mailto:jose.ventura.roda at gmail.com] 
Sent: Wednesday, January 17, 2007 4:25 AM
To: Gibson, Andrea
Cc: ANTLR Interest
Subject: Re: [antlr-interest] AST Tree question

 

Can you put the 'host' and 'port' rules?



 

2007/1/16, Gibson, Andrea <AGibson at carrieraccess.com
<mailto:AGibson at carrieraccess.com> >: 

Hello,

 I am having some trouble with setting up a tree structure so that I can
easily get the text below, and I was wondering if someone could give me some
help. 

 

Here is the code I am working on

 

hostPort returns[HostPort hp = null] 

            { Integer p=null;} 

            : (h:host (c:COLON^ p1:port)?) 

            { hp= new HostPort(#h.getText()); 

            if(#p1!=null) p=Integer.parseInt(#p1.getText()); 

            if(p!=null)hp = new HostPort(#h.getText(),p);}; 

 

And what I want is the text from the host and port. But with how I have it
set up now, #h.getText() is just the first character in the host, and if I
traverse the AST tree using getRight() it continues though all the
characters including into the port. Is there a way to separate these out? Is
there a way to make the host be a root of another tree and not have it based
around a token from the lexer? 

 

Any help is appreciated.

 

-Gabbie

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070118/7dd9fe30/attachment-0001.html 

From tirelli at post.com  Fri Jan 19 06:43:25 2007
From: tirelli at post.com (Edson Tirelli)
Date: Fri, 19 Jan 2007 11:43:25 -0300
Subject: [antlr-interest] Tracking Character Position in antlr3
Message-ID: <45B0D90D.4090000@post.com>


    Hello All,

    I think this is probably a recurring frequent question, but the 
answers I was able to find, both in the FAQ( 
http://www.jguru.com/faq/view.jsp?EID=550800 ) and the list archives 
seems to refer to antlr 2.x version. So, here we go again:

    We have a parser generated by antlr 3. We also have an IDE built 
over eclipse. We have a requirement from the IDE guys that the parser 
must provide location within the source files as character position from 
the beggining of the file, instead of line/columns.
    Looking through antlr source code, it seems that CommonToken has 
this information encoded as "start" and "stop" indexes and you can get 
them through methods: getStartIndex() and getStopIndex(). I developed 
some unit tests (hardcoding class casts from Token to CommonToken) and 
these attributes are consistent throughout the parsing.

    So, my questions:

1) Is there any reason for these methods to not be exposed in the Token 
interface? In other words, can they be exposed in the Token interface 
implemented by CommonToken? This would avoid the nasty class casts...

2) If not, do you see any reason for me to not do the casts and get the 
info from the CommonToken class?

3) Is there any other better alternative way of doing it?

   Thank you in advance,
    Edson

-- 
 Edson Tirelli
 Software Engineer - JBoss Rules Core Developer
 Office: +55 11 3124-6000
 Mobile: +55 11 9218-4151
 JBoss, a division of Red Hat @ www.jboss.com



From parrt at cs.usfca.edu  Fri Jan 19 08:16:10 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 19 Jan 2007 09:16:10 -0700
Subject: [antlr-interest] Tracking Character Position in antlr3
In-Reply-To: <45B0D90D.4090000@post.com>
References: <45B0D90D.4090000@post.com>
Message-ID: <AA409C26-CD73-482A-919A-370D4D9BB1BF@cs.usfca.edu>


On Jan 19, 2007, at 7:43 AM, Edson Tirelli wrote:

>
>    Hello All,
>
>    I think this is probably a recurring frequent question, but the  
> answers I was able to find, both in the FAQ( http://www.jguru.com/ 
> faq/view.jsp?EID=550800 ) and the list archives seems to refer to  
> antlr 2.x version. So, here we go again:
>
>    We have a parser generated by antlr 3. We also have an IDE built  
> over eclipse. We have a requirement from the IDE guys that the  
> parser must provide location within the source files as character  
> position from the beggining of the file, instead of line/columns.
>    Looking through antlr source code, it seems that CommonToken has  
> this information encoded as "start" and "stop" indexes and you can  
> get them through methods: getStartIndex() and getStopIndex(). I  
> developed some unit tests (hardcoding class casts from Token to  
> CommonToken) and these attributes are consistent throughout the  
> parsing.
>
>    So, my questions:
>
> 1) Is there any reason for these methods to not be exposed in the  
> Token interface? In other words, can they be exposed in the Token  
> interface implemented by CommonToken? This would avoid the nasty  
> class casts...

A minimal token doesn't need those...can just answer getText.

I can see your need though.

> 2) If not, do you see any reason for me to not do the casts and get  
> the info from the CommonToken class?

That is ok.

> 3) Is there any other better alternative way of doing it?

Not at the moment...we could extend Token, but it's getting complex.

Ter

From tirelli at post.com  Fri Jan 19 09:22:00 2007
From: tirelli at post.com (Edson Tirelli)
Date: Fri, 19 Jan 2007 14:22:00 -0300
Subject: [antlr-interest] Tracking Character Position in antlr3
In-Reply-To: <AA409C26-CD73-482A-919A-370D4D9BB1BF@cs.usfca.edu>
References: <45B0D90D.4090000@post.com>
	<AA409C26-CD73-482A-919A-370D4D9BB1BF@cs.usfca.edu>
Message-ID: <45B0FE38.3010608@post.com>

   Thanks for the quick answer Terence.

   I will go with the casts then.

   []s
   Edson

Terence Parr wrote:

>
> On Jan 19, 2007, at 7:43 AM, Edson Tirelli wrote:
>
>>
>>    Hello All,
>>
>>    I think this is probably a recurring frequent question, but the  
>> answers I was able to find, both in the FAQ( http://www.jguru.com/ 
>> faq/view.jsp?EID=550800 ) and the list archives seems to refer to  
>> antlr 2.x version. So, here we go again:
>>
>>    We have a parser generated by antlr 3. We also have an IDE built  
>> over eclipse. We have a requirement from the IDE guys that the  
>> parser must provide location within the source files as character  
>> position from the beggining of the file, instead of line/columns.
>>    Looking through antlr source code, it seems that CommonToken has  
>> this information encoded as "start" and "stop" indexes and you can  
>> get them through methods: getStartIndex() and getStopIndex(). I  
>> developed some unit tests (hardcoding class casts from Token to  
>> CommonToken) and these attributes are consistent throughout the  
>> parsing.
>>
>>    So, my questions:
>>
>> 1) Is there any reason for these methods to not be exposed in the  
>> Token interface? In other words, can they be exposed in the Token  
>> interface implemented by CommonToken? This would avoid the nasty  
>> class casts...
>
>
> A minimal token doesn't need those...can just answer getText.
>
> I can see your need though.
>
>> 2) If not, do you see any reason for me to not do the casts and get  
>> the info from the CommonToken class?
>
>
> That is ok.
>
>> 3) Is there any other better alternative way of doing it?
>
>
> Not at the moment...we could extend Token, but it's getting complex.
>
> Ter
>


-- 
 Edson Tirelli
 Software Engineer - JBoss Rules Core Developer
 Office: +55 11 3124-6000
 Mobile: +55 11 9218-4151
 JBoss, a division of Red Hat @ www.jboss.com



From jhvdven at xs4all.nl  Fri Jan 19 08:37:13 2007
From: jhvdven at xs4all.nl (Jan van der Ven)
Date: Fri, 19 Jan 2007 17:37:13 +0100
Subject: [antlr-interest] Tracking Character Position in antlr3
In-Reply-To: <45B0FE38.3010608@post.com>
References: <45B0D90D.4090000@post.com>	<AA409C26-CD73-482A-919A-370D4D9BB1BF@cs.usfca.edu>
	<45B0FE38.3010608@post.com>
Message-ID: <45B0F3B9.5050607@xs4all.nl>

Edson Tirelli wrote:
>   Thanks for the quick answer Terence.
>
>   I will go with the casts then.
>
>   []s
>   Edson
>
> Terence Parr wrote:
>
>>
>> On Jan 19, 2007, at 7:43 AM, Edson Tirelli wrote:
>>
>>>
>>>    Hello All,
>>>
>>>    I think this is probably a recurring frequent question, but the  
>>> answers I was able to find, both in the FAQ( http://www.jguru.com/ 
>>> faq/view.jsp?EID=550800 ) and the list archives seems to refer to  
>>> antlr 2.x version. So, here we go again:
>>>
>>>    We have a parser generated by antlr 3. We also have an IDE built  
>>> over eclipse. We have a requirement from the IDE guys that the  
>>> parser must provide location within the source files as character  
>>> position from the beggining of the file, instead of line/columns.
>>>    Looking through antlr source code, it seems that CommonToken has  
>>> this information encoded as "start" and "stop" indexes and you can  
>>> get them through methods: getStartIndex() and getStopIndex(). I  
>>> developed some unit tests (hardcoding class casts from Token to  
>>> CommonToken) and these attributes are consistent throughout the  
>>> parsing.
>>>
>>>    So, my questions:
>>>
>>> 1) Is there any reason for these methods to not be exposed in the  
>>> Token interface? In other words, can they be exposed in the Token  
>>> interface implemented by CommonToken? This would avoid the nasty  
>>> class casts...
>>
>>
>> A minimal token doesn't need those...can just answer getText.
>>
>> I can see your need though.
>>
>>> 2) If not, do you see any reason for me to not do the casts and get  
>>> the info from the CommonToken class?
>>
>>
>> That is ok.
>>
>>> 3) Is there any other better alternative way of doing it?
>>
>>
>> Not at the moment...we could extend Token, but it's getting complex.
>>
>> Ter
>>
>
>
What I did was to remove all newline() calls. Then everything is deemed 
to be on one line and that meets your criterium I think.

Jan


From tirelli at post.com  Fri Jan 19 09:48:28 2007
From: tirelli at post.com (Edson Tirelli)
Date: Fri, 19 Jan 2007 14:48:28 -0300
Subject: [antlr-interest] Tracking Character Position in antlr3
In-Reply-To: <45B0F3B9.5050607@xs4all.nl>
References: <45B0D90D.4090000@post.com>	<AA409C26-CD73-482A-919A-370D4D9BB1BF@cs.usfca.edu>
	<45B0FE38.3010608@post.com> <45B0F3B9.5050607@xs4all.nl>
Message-ID: <45B1046C.5010006@post.com>

   Hi Jan,

   Sorry, but I'm kind of new to antlr... what do you mean by "removed 
all newline() calls"?

   Thanks
      Edson


Jan van der Ven wrote:

>>
> What I did was to remove all newline() calls. Then everything is 
> deemed to be on one line and that meets your criterium I think.
>
> Jan
>
>


-- 
 Edson Tirelli
 Software Engineer - JBoss Rules Core Developer
 Office: +55 11 3124-6000
 Mobile: +55 11 9218-4151
 JBoss, a division of Red Hat @ www.jboss.com



From antlr at mirality.co.nz  Thu Jan 18 12:25:37 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 19 Jan 2007 09:25:37 +1300
Subject: [antlr-interest] AST Tree question
In-Reply-To: <52AB1243526C77459939EBB7976B622F07BDC6F3@newman.carrieracc
	ess.com>
References: <52AB1243526C77459939EBB7976B622F07BDC6F3@newman.carrieraccess.com>
Message-ID: <7.0.1.0.0.20070119092027.0377fd48@mirality.co.nz>

At 05:13 19/01/2007, Gibson, Andrea wrote:
>host : hostName
>        | ipv6Reference;
>
>hostName
>        :(domainLabel(PERIOD)?     )*;
>
>ipv6Reference
>        : OPEN_BRACKET ipv6Address CLOSE_BRACKET;

While this may not be directly causing your problem, the way 
you've got it set up there means that hostName (and therefore also 
host) can match nothing at all, which is probably not what you 
want.

I suspect you actually want:

hostName
     : domainLabel (PERIOD domainLabel)*
     ;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070119/69afbd3b/attachment.html 

From antlr at mirality.co.nz  Fri Jan 19 17:45:17 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 20 Jan 2007 14:45:17 +1300
Subject: [antlr-interest] Tracking Character Position in antlr3
In-Reply-To: <45B1046C.5010006@post.com>
References: <45B0D90D.4090000@post.com>
	<AA409C26-CD73-482A-919A-370D4D9BB1BF@cs.usfca.edu>
	<45B0FE38.3010608@post.com> <45B0F3B9.5050607@xs4all.nl>
	<45B1046C.5010006@post.com>
Message-ID: <7.0.1.0.0.20070120144233.03681a40@mirality.co.nz>

At 06:48 20/01/2007, Edson Tirelli wrote:
 >   Sorry, but I'm kind of new to antlr... what do you mean by
 >"removed all newline() calls"?

I think that's a V2-ism.  In ANTLR v2 you had to explicitly call 
newline() whenever you recognised a character or sequence that you 
wanted to consider as an end-of-line, and it used that to update 
its internal line and column tracking.  So if you removed those 
calls then it would report everything as being on one long line.

In V3 it handles all that internally, so there's nothing for you 
to remove (unless you start hacking apart the ANTLR code itself).


From digitalasp at yahoo.com  Sun Jan 21 01:30:30 2007
From: digitalasp at yahoo.com (Chet)
Date: Sun, 21 Jan 2007 01:30:30 -0800 (PST)
Subject: [antlr-interest] Grammar inheritance problem
In-Reply-To: <45AB6F12.1090304@ultersys.ru>
Message-ID: <751239.98520.qm@web36212.mail.mud.yahoo.com>

I'm having the same problem with 2.7.7. I know this same issue has been
reported to the list a couple of times and IIRC a preprocessor patch for this
problem was posted in 2003 for version 2.7.2. The patched code has changed
since then and seems to have reintroduced the bug.

I believe the problem is in antlr.preprocessor.Grammar.toString() in its
handling of the superclass and grammar type starting at line 250 (2.7.7).


-------------- [ SNIP: line 250] --------------
if ( superClass!=null ) {
// replace with specified superclass not actual grammar
// user must make sure that the superclass derives from super grammar class
	s.append("class " + name + " extends " + superClass + ";");
}
else {
	s.append("class " + name + " extends " + type + ";");
}
-----------------------------------------------


This should probably be something similar to this:

-------------- [ INSERT ] --------------
s.append("class " + name + " extends " + type);
if ( superClass != null ) {
	s.append(" " + superClass );
}
s.append(";");
----------------------------------------


As soon as I get a java dev environment setup (haven't done java in years) I'll
test the modified code and post the results. I'm not sure if the change even
works yet or how it may be affected by other portions of the preprocessor so if
anyone wants to give it a try feel free to have a go at it.


--- Andrey Timoshenkov <tas at ultersys.ru> wrote:

> Hi All.
> 
> I have a trouble using ANTLR 2.7.5. I need 2 lexer grammars L1 and L2, 
> where L2 inherits from L1 and I need to specify my own base class for 
> resulting lexer. Below are simple examples:



 
____________________________________________________________________________________
Never miss an email again!
Yahoo! Toolbar alerts you the instant new Mail arrives.
http://tools.search.yahoo.com/toolbar/features/mail/

From manunews at gmail.com  Sun Jan 21 03:04:56 2007
From: manunews at gmail.com (Manu)
Date: Sun, 21 Jan 2007 12:04:56 +0100
Subject: [antlr-interest] combining tokens in rewrite rule
Message-ID: <96f4581f0701210304v4412edsc20e37d18f14557d@mail.gmail.com>

Hi,

I want to combine tokens when generating the AST.

For example, for a rule like this:

namespaceSpec:	(ID) ('.' ID)*;

i want to generate a tree rule that returns a new tree with only one
ID token, that is the result of all ID and '.' concatenation. Is there
a way to do this?

Thanks.

From digitalasp at yahoo.com  Sun Jan 21 03:18:43 2007
From: digitalasp at yahoo.com (Chet)
Date: Sun, 21 Jan 2007 03:18:43 -0800 (PST)
Subject: [antlr-interest] Grammar inheritance problem
In-Reply-To: <751239.98520.qm@web36212.mail.mud.yahoo.com>
Message-ID: <441158.76856.qm@web36202.mail.mud.yahoo.com>

Just a quick follow up. I made the changes and even though I had the type and
superClass reversed in their order of generation it seems to have taken care of
the issue. Here's the code I am currently using (line 250 of Grammar.java)....


	s.append("class " + name + " extends " + type );
	if ( superClass != null ) 
	{
		s.append(" " + superClass);
	}
	s.append(";" + 
		System.getProperty("line.separator") +
                System.getProperty("line.separator"));



--- Chet <digitalasp at yahoo.com> wrote:

> I'm having the same problem with 2.7.7. I know this same issue has been
> reported to the list a couple of times and IIRC a preprocessor patch for this
> problem was posted in 2003 for version 2.7.2. The patched code has changed
> since then and seems to have reintroduced the bug.
>
> - snipped -
>
> --- Andrey Timoshenkov <tas at ultersys.ru> wrote:
> 
> > Hi All.
> > 
> > I have a trouble using ANTLR 2.7.5. I need 2 lexer grammars L1 and L2, 
> > where L2 inherits from L1 and I need to specify my own base class for 
> > resulting lexer. Below are simple examples:
> 




 
____________________________________________________________________________________
Need Mail bonding?
Go to the Yahoo! Mail Q&A for great tips from Yahoo! Answers users.
http://answers.yahoo.com/dir/?link=list&sid=396546091

From miguel.ping at gmail.com  Sun Jan 21 08:05:52 2007
From: miguel.ping at gmail.com (Miguel Ping)
Date: Sun, 21 Jan 2007 16:05:52 +0000
Subject: [antlr-interest] Antlr 3 beta 5
Message-ID: <45B38F60.4020101@gmail.com>

Hi all!

I am trying to use Antlr3 beta 5, and I am trying to develop a very 
primitive SQL parser. I am using antlr works to write up the grammar, 
and I can't even parse a simple query.

Here is my grammar:

///------------------------------------------------
grammar SQL;

//@parser::header {package etc;}
//@parseR::members {@SupressWarnings("all");}

/*------------------------------------------------------------------
 * PARSER RULES
 *------------------------------------------------------------------*/
 
 startRule
    :    sqlStatement (SEMI sqlStatement )* SEMI? EOF;

sqlStatement
    :    //sqlSchemaStatement
        sqlDataStatement ;
//    |    sqlTransactionStatement ;

sqlDataStatement
    :    SELECT ASTERISK FROM IDENT;
 
 
//@lexer::header{package etc;}

/*------------------------------------------------------------------
 * LEXER RULES
 *------------------------------------------------------------------*/


IDENT        :    (LETTER | UNDERS) (LETTER | UNDERS | DIGIT)*;
fragment LETTER    :    'a'..'z' | 'A'..'Z';
fragment DIGIT    :    '0'..'9';
fragment UNDERS    :    '_';

LPAREN    :    '(';
RPAREN    :    ')';        
        
//characters        
SEMI    :    ';';
COMMA    :    ',';
DOT    :    '.';
ASTERISK:    '*';

//SQL COMMANDS
ORDER    :    'order';
GROUP    :    'group';
BY    :    'by';
HAVING    :    'having';
UNION    :    'union';
EXCEPT    :    'except';
INTERSECT:    'intersect';    
ALL    :    'all';
FOR    :    'for';
IN    :    'in';

AND    :    'and';
NOT    :    'not';
NULL    :    'null';

SELECT    :    'select';
FROM    :    'from';
WHERE    :    'where';
AS    :    'as';
JOIN    :    'join';

PIVOT    :    'pivot';

COUNT    :    'count';
AVG    :    'avg';
MIN    :    'min';
MAX    :    'max';
SUM    :    'sum';
STDEV    :    'stdev';
STDEVP    :    'stdevp';
VAR    :    'var';
VARP    :    'varp';

DISTINCT:    'distinct';
NATURAL    :    'natural';

LEFT    :    'left';
RIGHT    :    'right';
INNER    :    'inner';
OUTER    :    'outer';
FULL    :    'full';
ON    :    'on';
USING    :    'using';
LIMIT    :    'limit';
OFFSET    :    'offset';
DEFAULT    :    'default';

//common stuff
WS    :   (   ' '
        |   '\t'
        |   '\r' '\n'
        |   '\n'
        |   '\r'
        ) {$channel=HIDDEN;};
 //ignore this token
        
UINT    :    '0'..'9';//correct this later    

//comentarios
ML_COMMENT
    :   '/*' (options {greedy=false;} : .)* {$channel=HIDDEN;}'*/';    

///------------------------------------------------

If i try and interpret a simple

 select * from sailors

query, antlr works gives me a 'MismatchedTokenException (8!=5)', altough 
this grammar is as simple as it gets! token 8 and 5 are the 'select' and 
'ident' tokens, what am I doing wrong?

I started doing a big piece of the grammar at one shot, and antlr3 
parser generation process gave me this error:

error(10):  internal error: 
org.antlr.misc.OrderedHashSet.size(OrderedHashSet.java:87): 
OrderedHashSet: elements and set size differs; 2097151!=1020508

So I changed my approach and tried the supplied grammar, one step at a 
time. I have read and re-read the documentation, and I cannot find my 
problem.

Thanks in advance, Miguel Ping

From parrt at cs.usfca.edu  Sun Jan 21 08:42:26 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 21 Jan 2007 08:42:26 -0800
Subject: [antlr-interest] Antlr 3 beta 5
In-Reply-To: <45B38F60.4020101@gmail.com>
References: <45B38F60.4020101@gmail.com>
Message-ID: <2DA28216-C8AA-46F2-A386-5DB20CD93A04@cs.usfca.edu>

put IDENT last.
Ter
On Jan 21, 2007, at 8:05 AM, Miguel Ping wrote:

> Hi all!
>
> I am trying to use Antlr3 beta 5, and I am trying to develop a very  
> primitive SQL parser. I am using antlr works to write up the  
> grammar, and I can't even parse a simple query.
>
> Here is my grammar:
>
> ///------------------------------------------------
> grammar SQL;
>
> //@parser::header {package etc;}
> //@parseR::members {@SupressWarnings("all");}
>
> /*------------------------------------------------------------------
> * PARSER RULES
> *------------------------------------------------------------------*/
> startRule
>    :    sqlStatement (SEMI sqlStatement )* SEMI? EOF;
>
> sqlStatement
>    :    //sqlSchemaStatement
>        sqlDataStatement ;
> //    |    sqlTransactionStatement ;
>
> sqlDataStatement
>    :    SELECT ASTERISK FROM IDENT;
> //@lexer::header{package etc;}
>
> /*------------------------------------------------------------------
> * LEXER RULES
> *------------------------------------------------------------------*/
>
>
> IDENT        :    (LETTER | UNDERS) (LETTER | UNDERS | DIGIT)*;
> fragment LETTER    :    'a'..'z' | 'A'..'Z';
> fragment DIGIT    :    '0'..'9';
> fragment UNDERS    :    '_';
>
> LPAREN    :    '(';
> RPAREN    :    ')';               //characters        SEMI    :     
> ';';
> COMMA    :    ',';
> DOT    :    '.';
> ASTERISK:    '*';
>
> //SQL COMMANDS
> ORDER    :    'order';
> GROUP    :    'group';
> BY    :    'by';
> HAVING    :    'having';
> UNION    :    'union';
> EXCEPT    :    'except';
> INTERSECT:    'intersect';    ALL    :    'all';
> FOR    :    'for';
> IN    :    'in';
>
> AND    :    'and';
> NOT    :    'not';
> NULL    :    'null';
>
> SELECT    :    'select';
> FROM    :    'from';
> WHERE    :    'where';
> AS    :    'as';
> JOIN    :    'join';
>
> PIVOT    :    'pivot';
>
> COUNT    :    'count';
> AVG    :    'avg';
> MIN    :    'min';
> MAX    :    'max';
> SUM    :    'sum';
> STDEV    :    'stdev';
> STDEVP    :    'stdevp';
> VAR    :    'var';
> VARP    :    'varp';
>
> DISTINCT:    'distinct';
> NATURAL    :    'natural';
>
> LEFT    :    'left';
> RIGHT    :    'right';
> INNER    :    'inner';
> OUTER    :    'outer';
> FULL    :    'full';
> ON    :    'on';
> USING    :    'using';
> LIMIT    :    'limit';
> OFFSET    :    'offset';
> DEFAULT    :    'default';
>
> //common stuff
> WS    :   (   ' '
>        |   '\t'
>        |   '\r' '\n'
>        |   '\n'
>        |   '\r'
>        ) {$channel=HIDDEN;};
> //ignore this token
>        UINT    :    '0'..'9';//correct this later
> //comentarios
> ML_COMMENT
>    :   '/*' (options {greedy=false;} : .)* {$channel=HIDDEN;}'*/';
> ///------------------------------------------------
>
> If i try and interpret a simple
>
> select * from sailors
>
> query, antlr works gives me a 'MismatchedTokenException (8!=5)',  
> altough this grammar is as simple as it gets! token 8 and 5 are the  
> 'select' and 'ident' tokens, what am I doing wrong?
>
> I started doing a big piece of the grammar at one shot, and antlr3  
> parser generation process gave me this error:
>
> error(10):  internal error: org.antlr.misc.OrderedHashSet.size 
> (OrderedHashSet.java:87): OrderedHashSet: elements and set size  
> differs; 2097151!=1020508
>
> So I changed my approach and tried the supplied grammar, one step  
> at a time. I have read and re-read the documentation, and I cannot  
> find my problem.
>
> Thanks in advance, Miguel Ping


From jhvdven at xs4all.nl  Sun Jan 21 14:27:50 2007
From: jhvdven at xs4all.nl (Jan van der Ven)
Date: Sun, 21 Jan 2007 23:27:50 +0100
Subject: [antlr-interest] Very general question,
	might require a book as an answer
Message-ID: <45B3E8E6.6040905@xs4all.nl>

Dear list,



I am involved in the Quantum DB eclipse plugin  for quite some time now. 
This is a plugin for uniform access to databases that have a JDBC driver 
(http://sourceforge.net/projects/quantum). I joined the development team 
for the frustration I kept getting with queries that contained errors 
that could have been solved at 'compile' time rather than at 'runtime'. 
This, imho, means that the syntax of the statement(s) need to be 
checked, which means a parser.

As you may be aware SQL comes in many dialects and our plugin aims to 
offer support for all of them.

So, I looked around and found antlr. It seemed very fit for the job as 
it allows inheritance. As plugin developers we deliver a base and allow 
others to enhance/specialize that for their specific database.

I got started, looked at some .g files, borrowed some constructs and got 
stuck on a very basic point: all the tables, columns, aliases and so on, 
were recognized as identifiers only. Once the statement was parsed 
'successfully', it was not possible to reason about it as the parser did 
not deliver tables involved, columns belonging to those tables and so 
on. (I think you would call this an interpreter...)

I posted to this list about 'promoting' certain tokens, and of course 
and thank you all, received an answer: promote them by adding an action:

<pre>
column_alias
    :
    i:id {#i.setType(COLUMN_IDENTIFIER_ALIAS);}
    ;
</pre>

So that my id gets promoted to a column alias whenever this rule executes.

I got this to work, finding out errors even when the syntax worked out 
ok (misspelled table and column names, wrong relationships), but it 
seemed to me that I had not unleashed the complete power of antlr.

So, now, finally, I come to the questions that may require a book (or 
2)  to answer:

1) Should I be using antlr, or should I stick with the stuff eclipse offers?
2) Is antlr the right tool of choice for a project in which each 
database vendor speaks its own dialect? In other words will the 
inheritance feature deliver the promise of less coding? And of course, 
what should be the base grammar of this all? And could we have one lexer?
3) We would like to support scripts, some dialects have statement 
separators, others do not. Does this mean I need to write something that 
separates the statements first, or is there a smarter way?
4) I never used the tree walker classes in antlr. I must admit, I do not 
understand the value of it yet. However I think they are what I need 
because after lexing and parsing I want to interpret the results. So far 
my AST is not a tree but a list. What are the benefits of using tree 
walkers?
5) Why should I upgrade to v3?

If anyone could find the time to answer even one of my questions, that 
would be greatly appreciated.

Kind regards,




Jan




From manunews at gmail.com  Sun Jan 21 15:07:01 2007
From: manunews at gmail.com (Manu)
Date: Mon, 22 Jan 2007 00:07:01 +0100
Subject: [antlr-interest] Bugs generating a tree walker?
Message-ID: <96f4581f0701211507te457324qc1cd28992aad0908@mail.gmail.com>

Hi,

The following problems were found using ANTLR 3.05b.

I'm creating a tree walker and I have noticed two strange things:

1) If you create a rule with a return type like this:

genericTypeArgs[int num_params] returns [Type[] types]

the generated code has a return type of Type not Type[]. Is this a bug
or arrays are not supported?

2) With the following rule:

genericTypeArgs[int num_params] returns [Type[] types]:	
^(ARG_LIST (type_names+=typeName)*)

ANTLR gives an error:

error(134): TypeExpressionEval.g:49:69: rule '+=' list labels are not
allowed unless building trees: type_names

However, if I change the rule to return two values:

genericTypeArgs[int num_params] returns [Type[] types, int
aux]:	^(ARG_LIST (type_names+=typeName)*)

it works without changing anything more. Any idea why???

Thanks for the help.

From parrt at cs.usfca.edu  Sun Jan 21 15:27:00 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 21 Jan 2007 15:27:00 -0800
Subject: [antlr-interest] Bugs generating a tree walker?
In-Reply-To: <96f4581f0701211507te457324qc1cd28992aad0908@mail.gmail.com>
References: <96f4581f0701211507te457324qc1cd28992aad0908@mail.gmail.com>
Message-ID: <CAFA3E34-D5A9-478F-8C75-B1CE2052FA94@cs.usfca.edu>


On Jan 21, 2007, at 3:07 PM, Manu wrote:

> Hi,
>
> The following problems were found using ANTLR 3.05b.
>
> I'm creating a tree walker and I have noticed two strange things:
>
> 1) If you create a rule with a return type like this:
>
> genericTypeArgs[int num_params] returns [Type[] types]
>
> the generated code has a return type of Type not Type[]. Is this a bug
> or arrays are not supported?

hi

The ']' terminates the [...] action.  Try \[, though I am not sure  
that that works.

>
> 2) With the following rule:
>
> genericTypeArgs[int num_params] returns [Type[] types]:	
> ^(ARG_LIST (type_names+=typeName)*)
>
> ANTLR gives an error:
>
> error(134): TypeExpressionEval.g:49:69: rule '+=' list labels are not
> allowed unless building trees: type_names
>
> However, if I change the rule to return two values:
>
> genericTypeArgs[int num_params] returns [Type[] types, int
> aux]:	^(ARG_LIST (type_names+=typeName)*)
>
> it works without changing anything more. Any idea why???

that's weird.

Ter

From manunews at gmail.com  Sun Jan 21 23:01:09 2007
From: manunews at gmail.com (Manu)
Date: Mon, 22 Jan 2007 08:01:09 +0100
Subject: [antlr-interest] Bugs generating a tree walker?
In-Reply-To: <CAFA3E34-D5A9-478F-8C75-B1CE2052FA94@cs.usfca.edu>
References: <96f4581f0701211507te457324qc1cd28992aad0908@mail.gmail.com>
	<CAFA3E34-D5A9-478F-8C75-B1CE2052FA94@cs.usfca.edu>
Message-ID: <96f4581f0701212301s6c87fc00j2d5091ecf6ce5c69@mail.gmail.com>

Hi

> The ']' terminates the [...] action.  Try \[, though I am not sure
> that that works.


escaping it doesn't help. Hopefully you can add array support for
types inside the [...] in a future.


> > 2) With the following rule:
> >
> > genericTypeArgs[int num_params] returns [Type[] types]:
> > ^(ARG_LIST (type_names+=typeName)*)
> >
> > ANTLR gives an error:
> >
> > error(134): TypeExpressionEval.g:49:69: rule '+=' list labels are not
> > allowed unless building trees: type_names
> >
> > However, if I change the rule to return two values:
> >
> > genericTypeArgs[int num_params] returns [Type[] types, int
> > aux]: ^(ARG_LIST (type_names+=typeName)*)
> >
> > it works without changing anything more. Any idea why???
>
> that's weird.


Yes, but looking at the source code, I found this:

LIST_LABEL_INVALID_UNLESS_RETVAL_STRUCT(arg) ::=
"rule '+=' list labels are not allowed unless building trees: <arg>"

so, based on the name, I added another parameter... and it worked.

Thanks

From jose.ventura.roda at gmail.com  Mon Jan 22 00:08:47 2007
From: jose.ventura.roda at gmail.com (Jose Ventura)
Date: Mon, 22 Jan 2007 09:08:47 +0100
Subject: [antlr-interest] combining tokens in rewrite rule
In-Reply-To: <96f4581f0701210304v4412edsc20e37d18f14557d@mail.gmail.com>
References: <96f4581f0701210304v4412edsc20e37d18f14557d@mail.gmail.com>
Message-ID: <e39abda10701220008g5ef03297t9de15551c7105a37@mail.gmail.com>

You can build the tree manually:

{## = #( #[ID, "text required"] ,##);}


2007/1/21, Manu <manunews at gmail.com>:
>
> Hi,
>
> I want to combine tokens when generating the AST.
>
> For example, for a rule like this:
>
> namespaceSpec:  (ID) ('.' ID)*;
>
> i want to generate a tree rule that returns a new tree with only one
> ID token, that is the result of all ID and '.' concatenation. Is there
> a way to do this?
>
> Thanks.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070122/b88274e9/attachment.html 

From jneeraj at us.ibm.com  Mon Jan 22 06:33:15 2007
From: jneeraj at us.ibm.com (Neeraj Joshi)
Date: Mon, 22 Jan 2007 09:33:15 -0500
Subject: [antlr-interest] Debugging tree parser antlr 2.7.5
In-Reply-To: <mailman.1.1169409601.16217.antlr-interest@antlr.org>
Message-ID: <OF981D4642.571DDE4C-ON8525726B.004EBA4D-8525726B.004FCB3E@us.ibm.com>

Hi All,
I am new to antlr so please pardon my ignorance. 
I am writing a tree parser for my grammar. When I run the parser I get a 
bunch of exceptions like

<AST>:0:0: unexpected end of subtree

How do I debug this? I have added    genHashLines = true;      to both the 
regular parser as well as the tree parser, however I still get <AST>:0:0 
How can I pinpoint the exact location where the problem is? 
When I do an antlr.Tool on my tree parser input file I get a 
non-determinism warning however as far as I understand antlr is handling 
it correctly
Here is the snippet 

identPrimary :
         collectExpr
        | IDENT ( 
                        (IDENT)? 
                                (  arrayIndex 
                                        | 
                                    #(
                                        METHOD_CALL  (exprList)? 
                                     ) 
                                )? 
                )
 
        ;
 
collectExpr
        :
            #(COLLECT_OP #(METHOD_CALL (exprList)?) (arrayIndex 
(methodPropArrForCollect)? )? );

The non determinism occurs in identPrimary because 
collectExpr requires "collect" as the first symbol while the 2nd 
alternative can be any identifier except "collect". The way the 
productions are ordered it seems it would resolve the ambiguity correctly
(collect is a special type of a method)

Does the non-determinism have anything to do with the unexpected end of 
subtree?

Any help would be greatly appreciated
Thanks!
Neeraj
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
"'In the end, everything is fine. If it is not, it is not the end" 
Neeraj Joshi
Staff Software Engineer
Autonomic Computing Division
(919)543-5298
TIE: 441-5298
Ext: 3-5298
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070122/d059f02c/attachment.html 

From zhixueyong at hotmail.com  Mon Jan 22 08:44:18 2007
From: zhixueyong at hotmail.com (Xue Yong Zhi)
Date: Mon, 22 Jan 2007 11:44:18 -0500
Subject: [antlr-interest] Debugging tree parser antlr 2.7.5
In-Reply-To: <OF981D4642.571DDE4C-ON8525726B.004EBA4D-8525726B.004FCB3E@us.ibm.com>
References: <mailman.1.1169409601.16217.antlr-interest@antlr.org>
	<OF981D4642.571DDE4C-ON8525726B.004EBA4D-8525726B.004FCB3E@us.ibm.com>
Message-ID: <45B4E9E2.4020809@hotmail.com>


> 
> <AST>:0:0: unexpected end of subtree
> 
> How do I debug this? I have added    genHashLines = true;      to both 
> the regular parser as well as the tree parser, however I still get 
> <AST>:0:0
> How can I pinpoint the exact location where the problem is?

The default AST node does not store line information. You can try to 
replace it with the follwoing:
http://xruby.googlecode.com/svn/trunk/src/com/xruby/compiler/parser/ASTWithLineNumber.java

Then in your parser, call this:
setASTNodeClass("com.xruby.compiler.parser.ASTWithLineNumber");

Btw, println is helpful for debugging, as always:)
AST ast = parser.getAST();
System.out.println(ast.toStringList());


From jimi at intersystems.com  Mon Jan 22 09:45:54 2007
From: jimi at intersystems.com (Jim Idle)
Date: Mon, 22 Jan 2007 12:45:54 -0500
Subject: [antlr-interest] combining tokens in rewrite rule
In-Reply-To: <96f4581f0701210304v4412edsc20e37d18f14557d@mail.gmail.com>
References: <96f4581f0701210304v4412edsc20e37d18f14557d@mail.gmail.com>
Message-ID: <20070122174555.39E3699@mail.intersystems.com>

Manu,

Firstly, from your questions, I am assuming that this is ANTLR 3, not ANTLR 2. If it is ANTLR2 then ignore this answer.

Declare an "Imaginary" token in the tokens section

tokens
{
	NAMESPACE;
}

Then accumulate the text of the individual IDs, '.' and dots, and rewrite the rule as the imaginary token, set to the concatenated text.

Jim

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Manu
Sent: Sunday, January 21, 2007 3:05 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] combining tokens in rewrite rule

Hi,

I want to combine tokens when generating the AST.

For example, for a rule like this:

namespaceSpec:	(ID) ('.' ID)*;

i want to generate a tree rule that returns a new tree with only one
ID token, that is the result of all ID and '.' concatenation. Is there
a way to do this?

Thanks.

-- 
No virus found in this incoming message.
Checked by AVG Free Edition.
Version: 7.5.432 / Virus Database: 268.17.4/644 - Release Date: 1/22/2007 7:30 AM
 

-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.5.432 / Virus Database: 268.17.4/644 - Release Date: 1/22/2007 7:30 AM
 

From aleksey at coral8.com  Mon Jan 22 12:10:08 2007
From: aleksey at coral8.com (Aleksey Sanin)
Date: Mon, 22 Jan 2007 12:10:08 -0800
Subject: [antlr-interest] antlr/c++ open position in SF/Bay Area
Message-ID: <45B51A20.5020400@coral8.com>

First of all, I would like to thanks the antlr developers
for building this great product! We are using it in our
development for more than 3 years and we had very very good
experience with it!

Next, I want to apologize if this is an inappropriate posting,
but I've seen job postings in the antlr mailing list in the
past.

We are looking for a strong C++/ANTLR software engineer
who will join our Coral8 Compiler team working on the
real-time event processing SQL-based language compiler:

http://www.coral8.com/developers/ccl_examples.html

Please, contact me at aleksey-at-coral8-dot-com and
I will be happy to provide more details.

Thanks,

Aleksey Sanin


From nobrow at eircom.net  Mon Jan 22 17:13:14 2007
From: nobrow at eircom.net (Alan Larkin)
Date: Tue, 23 Jan 2007 01:13:14 +0000
Subject: [antlr-interest] Subclass a subclass of TreeParser?
Message-ID: <45B5612A.7010100@eircom.net>

Would really appreciate some suggestions as to the problem below ...

Is it possible to subclass a subclass of TreeParser?

Working with the C grammar (cgram.tgz) from the archives, I am trying subclass GnuCEmitter (which
subclasses GnuCTreeParser, which subclasses TreeParser) but I get the following error:

   GnuCEmitterTokenTypes.txt:1:1: expecting ID, found 'null'

(GnuCEmitterTokenTypes.txt is empty). The goal is to override the output for just a couple of the
productions, and leverage the work of the authors of GnuCEmitter.g to output the rest of the
productions in a standard form (essentially, unchanged).

The following snippet is the Ant task Im using to build:

<antlr dir="${out.dir}/c" outputdirectory="${out.dir}/myC" target="${src.dir}/myC/MyCEmitter.g"
glib="${out.dir}/c/GnuCEmitter.g;${out.dir}/c/GnuCTreeParser.g">
   <classpath>
      <pathelement path="${out.dir}"/>
      <pathelement path="${antlr.jar}"/>
   </classpath>
</antlr>

The following is my MyCEmitter.g:

header
{
package myC;
}
	
{
import java.io.*;
}

class MyCEmitter extends GnuCEmitter;

options
{}

{}

<snip> OVERRIDDED PRODUCTIONS HERE <snip>

Im somewhat confused!

Thanks.

From mvilrokx at gmail.com  Mon Jan 22 19:11:52 2007
From: mvilrokx at gmail.com (Mark Vilrokx)
Date: Mon, 22 Jan 2007 19:11:52 -0800
Subject: [antlr-interest] How To ... Code Beautifier for PL/SQL
Message-ID: <90ca1670701221911u1ef2da6and779d33eef8404e9@mail.gmail.com>

Hi,

I am rather new to ANTLR and the whole compiler scene but I wasn't planning
on writing a compiler.  I am actually trying to write a Code Beautifier and
and Automatic Code Analyzer.  When I set out on this project, I was planning
on writing my own code (perl) and using regular expressions, however, I soon
found out that this is way to complex and it started to resemble a ...
parser.  So I started investigating ANTLR and other tools like JavaCC to see
what they can do for me.

Can someone please confirm whether ANTLR would be a good tool to write my
Code Beautifier and Code Analyzer?

I have been playing around with ANTLR and it all makes quite a lot of sense
using the example on how to get started, but my problem is I am writing a
parser for an existing language PL/SQL and I don't know how to ... begin.
The Lexar and Parsar in the end will probably be HUGH, but I want to start
small.  E.g. to start with I only want to "recognize" the start and end of
the PL/SQL function or procedure and ignore the bit in the middle.  Then,
later, I want to add some more to the lexer and parser to recognize the
declare section etc, slowly building up the lexer and parser.  Is this
possible?  Any examples?

Cheers,
Mark.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070122/b34fa5ef/attachment.html 

From tirelli at post.com  Tue Jan 23 06:58:23 2007
From: tirelli at post.com (Edson Tirelli)
Date: Tue, 23 Jan 2007 11:58:23 -0300
Subject: [antlr-interest] Error recovery problem?
Message-ID: <45B6228F.1060504@post.com>


   Hello All,

   I'm perceiving a strange behavior IMO on antlr parser when trying to 
recover from an error, and I don't know if it was supposed to behave 
like that or not.

   I'm implementing test cases for parsing "incomplete files", i.e., we 
have an IDE that must parser code while the user is typing and handle it 
accordingly. So, my unit test is this:

        input =
            "rule MyRule \n" +
            "    when \n" +
            "        Class ( name:";
        rule = parseRuleString(input);
        assertEquals(1, rule.getLhs().getDescrs().size());
        column = (ColumnDescr) rule.getLhs().getDescrs().get(0);
        assertEquals("Class", column.getObjectType());
        assertEquals(-1, column.getEndCharacter());

    The grammar rule that is behaving strangely is this:

fact returns [BaseDescr d]
    @init {
        d=null;
    }
     :    id=dotted_name
         {
             d = new ColumnDescr( id );
         }
         loc=LEFT_PAREN {
                 d.setLocation( offset(loc.getLine()), 
loc.getCharPositionInLine() );
                     d.setStartCharacter( 
((CommonToken)loc).getStartIndex() );
             }
         (    c=constraints
             {
                 for ( Iterator cIter = c.iterator() ; cIter.hasNext() ; ) {
                     ((ColumnDescr)d).addDescr( (BaseDescr) cIter.next() );
                 }
             }
          )?
         endLoc=RIGHT_PAREN
        {
            d.setEndLocation( offset(endLoc.getLine()), 
endLoc.getCharPositionInLine() );   
            d.setEndCharacter( ((CommonToken)endLoc).getStopIndex() );
         }
     ;

     So, what I expect is that the last semantic action (after it finds 
the RIGHT_PAREN) to be executed only when the right parentesis ')' 
character is found. But what IS happening is that as the input string 
finishes without a ')', it is executing the last semantic action anyway.
     As the input string finishes unexpectedly, I would expect it to 
raise an exception and stop executing semantic actions, as it is not 
possible to recover from this error.

     Am I wrong in my assumption? Is this the correct behavior? BTW, I'm 
using antlr 3.0b5.

     I can easily add an if() within the last semantic action, but that 
would mean I would have to do the same throughout my entire grammar in 
almost all semantic actions... what I think it is not the intent... :(

     I appreciate any advice.

     []s
     Edson

-- 
 Edson Tirelli
 Software Engineer - JBoss Rules Core Developer
 Office: +55 11 3124-6000
 Mobile: +55 11 9218-4151
 JBoss, a division of Red Hat @ www.jboss.com



From JOHNSJA at intelsat.com  Tue Jan 23 10:54:32 2007
From: JOHNSJA at intelsat.com (Johnson, Janeen)
Date: Tue, 23 Jan 2007 13:54:32 -0500
Subject: [antlr-interest] Inspecting return values
Message-ID: <E1926A032DDAE4479D18501974D47A0B015C7865@US-EX1.na.ds.intelsat.com>

All

I'm an antlr newbie using 2.7.7 with Java so forgive me (and enlighten
me) if this is a stupid question.  I've been working on this specific
problem for 3 days and am still stuck.  I created the ultra simple
sample data and tableswitch function below to use as a test-case-only
within my larger .g file.

I have a function 3-5 levels down in my parse tree that returns a String
value.  In the generated code, the return value isn't captured.  What
have I done wrong and how can I correct it?

I've snipped a lot of code away above and below these in the tree so if
what is needed to help me is not included let me know and I'll send
more.  Thank you.  Janeen

________________________________________________________________________
____
Sample input line returned by the lexer:

table-switch-input ( 101-ANT100 )
________________________________________________________________________
____
In the parser:

(snipped)

statement   : ((status)
                  | (tableswitch[#toggle])
... (snipped)
                  | (LITRL) )
                 ;
status        : ((THE) (ID) (OF) (EXTPINNAME));
tableswitch : ((TABLETSWITCHINPUT) (LPAREN) (EXTPINNAME) (RPAREN)) ;
(snipped)

________________________________________________________________________
______
In the ParseTree (.g file):

statement [String toggle]  returns [String rtnValue]
        {
          rtnValue = "";
        } : ((sttus: status [#toggle]! { /*  code snipped */} )
          | (tbs: tableswitch [#toggle]! { /* I would like to check the
return value at this level of code */ } )
          | (LITRL)
          );

tableswitch [String toggle] returns [String rtnValue]
        { rtnValue = "";
          int pinValue = 0;
          String pinName = "";
          int rtnInt = 0;
        } : (TABLETSWITCHINPUT! LPAREN! ttpin:EXTPINNAME! RPAREN!
                        {
		  (snipped)
                          rtnInt =
tableSwitchFunc.set_param("TABLE-SWITCH-INPUT", pinValue);  /*  Call to
outside function that returns the correct value */
                          rtnValue = new Integer(rtnInt).toString();
                          System.out.println("from tableswitch:
rtnValue); // Correct value prints here
                         }
           );

________________________________________________________________________
____
Q:  Where is the return value stored?  How can I inspect it?  How can I
also assign it as the return value for "statement"?

Generated code -- call from "statement" to tableswitch:
(snipped)
                                case TABLETSWITCHINPUT:
                                {
                                        {
                                        tbs = _t==ASTNULL ? null :
(AST)_t;
                                        tableswitch(_t,toggle);
/*  I thought ANTLR would save the return value here, but it doesn't
look like it */
                                        _t = _retTree;
                                        tbs_AST = (AST)returnAST;
                                        rtnValue =
tbs.getText().toString();
 
System.out.println("from statement:  tableswitch rtnValue = " + rtnValue
);

                                        }
                                        break;
                                }
 (snipped)
                        returnAST = statement_AST;
                        _retTree = _t;
                        return rtnValue;

(snipped)

Thank you in advance for any help you can give me.

Janeen
Intelsat is the world's largest provider of fixed satellite services.  Real-time, constant communications with people anywhere in the world is closer, by far.  

For more information about Intelsat, visit www.intelsat.com. 

 

This email message is for the sole use of the intended recipients and may contain confidential and privileged information. Any unauthorized review, use, disclosure or distribution is prohibited. If you are not the intended recipient, please contact the sender by reply email and destroy all copies of the original message. Any views expressed in this message are those of the individual sender, except where the sender specifically states them to be the views of Intelsat, Ltd. and its subsidiaries.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070123/d35c9bca/attachment-0001.html 

From mark.mandel at gmail.com  Tue Jan 23 14:48:19 2007
From: mark.mandel at gmail.com (Mark Mandel)
Date: Wed, 24 Jan 2007 09:48:19 +1100
Subject: [antlr-interest] v3: Throwing exception on an error
Message-ID: <4153ee230701231448s6857aa2u3392977045aa383c@mail.gmail.com>

All,

I wanted to have my parser be able to throw an exception if an error
occured during the process of evaluating my grammer, and this is what
I came up with.

I figured I would share it with you to see if there was a better way
of doing this:

I have this in both my lexer and my parser, but I'll just show you one:

@parser::members {
	private RecognitionException recognitionException;
	private String errorMessage;
	
	public void displayRecognitionError(String[] tokenNames,
RecognitionException e)
	{
		if(!hasError())
		{
			setRecognitionException(e);
			setErrorMessage(getErrorMessage(e, tokenNames));		
		}
	}
	
	public RecognitionException getRecognitionException()
	{
		return recognitionException;
	}
	
	private void setRecognitionException(RecognitionException e)
	{
		recognitionException = e;
	}
	
	public boolean hasError()
	{
		return (getRecognitionException() != null);
	}
	
	public String getErrorMessage()
	{
		return errorMessage;
	}
	
	private void setErrorMessage(String error)
	{
		errorMessage = error;
	}
}

Basically this just traps the first error as it comes through.  From
there, after a calling my parser, I can ask my lexer and my parser if
they have 'haveError()', get the error message, and the
RecognitionException and throw my own exception from there with the
details.

It seems to work very well, so I'm not complaining.

Is there a better way to do this?

Mark

-- 
E: mark.mandel at gmail.com
W: www.compoundtheory.com

From jsantander at alcatel-lucent.com  Wed Jan 24 00:47:39 2007
From: jsantander at alcatel-lucent.com (Julian Santander)
Date: Wed, 24 Jan 2007 09:47:39 +0100
Subject: [antlr-interest] Question on tree parsers
Message-ID: <45B71D2B.4090007@alcatel-lucent.com>

Folks,

  I hope you can help me with this one. I'm working with antlr v3
(currently the version directly from the source code repository, aka
pre-beta6) with Java output.

  I've got a grammar for an internal language working fairly well, but
now I'd like it to split the processing in two, one producing the AST,
and then a tree parser to process the AST and do more things.

  Among other things I've got in the Parser rules like this:

formal_parameter:
	ident_simple_type
	| ident_simple_type T_EQUAL expression   -> ^(ident_simple_type 
^(DEFAULT_VALUE expression))
	;

ident_simple_type:	
	memberName
	| T_IDENT simple_type -> ^(T_IDENT simple_type)


    This produces AST like:

(argument
  (REFTYPE
   (NAME typeName)))

or

(argument
  (REFTYPE
   (NAME typeValue))
  (DEFAULT_VALUE value))


    My question is how do I match this kind of AST production on the
TreeParser. So far the rules I've written is like:

formal_parameter:
        ident_simple_type
        | ^(ident_simple_type ^(DEFAULT_VALUE expression))
	;

ident_simple_type:	
	memberName
	| ^(T_IDENT simple_type)


    ... but they do not seem to work. My guess is that the  ^ seems to
carry different meaning, On tree rewrite it means "add this subtree one
level below", while on tree parsing is associated the UP and DOWN
tokens.....?????

    Thanks very much in advance and best regards

       Julian



From jose.ventura.roda at gmail.com  Wed Jan 24 00:57:42 2007
From: jose.ventura.roda at gmail.com (Jose Ventura)
Date: Wed, 24 Jan 2007 09:57:42 +0100
Subject: [antlr-interest] Inspecting return values
In-Reply-To: <E1926A032DDAE4479D18501974D47A0B015C7865@US-EX1.na.ds.intelsat.com>
References: <Acc/H+tY4owA0jp6QPG+fVv7VaLPPw==>
	<E1926A032DDAE4479D18501974D47A0B015C7865@US-EX1.na.ds.intelsat.com>
Message-ID: <e39abda10701240057m543a92adk6b62392f671fdda3@mail.gmail.com>

Hi Janeen,

For return a value from a rule you can put a variable for the invocation
(Sorry by my english). An example


rule1
    : value=r:rule2 {System.out.println ("Rule "+#r.getText+" return
"+value);
    ;
rule2 returns [String value=""]
     : c:command {value=#c.getText();}
     ;

I think the correct sentence is    "rtnValue=tbs: tableswitch [#toggle]! "


2007/1/23, Johnson, Janeen <JOHNSJA at intelsat.com>:
>
>  All
>
> I'm an antlr newbie using 2.7.7 with Java so forgive me (and enlighten me)
> if this is a stupid question.  I've been working on this specific problem
> for 3 days and am still stuck.  I created the ultra simple sample data and
> tableswitch function below to use as a test-case-only within my larger .g
> file.
>
> I have a function 3-5 levels down in my parse tree that returns a String
> value.  In the generated code, the return value isn't captured.  What have I
> done wrong and how can I correct it?
>
> I've snipped a lot of code away above and below these in the tree so if
> what is needed to help me is not included let me know and I'll send more.
> Thank you.  Janeen
>
>
> ____________________________________________________________________________
> Sample input line returned by the lexer:
>
> table-switch-input ( 101-ANT100 )
>
> ____________________________________________________________________________
> In the parser:
>
> (snipped)
>
> statement   : ((status)
>                   | (tableswitch[#toggle])
> ? (snipped)
>                   | (LITRL) )
>                  ;
> status        : ((THE) (ID) (OF) (EXTPINNAME));
> tableswitch : ((TABLETSWITCHINPUT) (LPAREN) (EXTPINNAME) (RPAREN)) ;
> (snipped)
>
>
> ______________________________________________________________________________
> In the ParseTree (.g file):
>
> statement [String toggle]  returns [String rtnValue]
>         {
>           rtnValue = "";
>         } : ((sttus: status [#toggle]! { /*  code snipped */} )
>           | (tbs: tableswitch [#toggle]! { /* I would like to check the
> return value at this level of code */ } )
>           | (LITRL)
>           );
>
> tableswitch [String toggle] returns [String rtnValue]
>         { rtnValue = "";
>           int pinValue = 0;
>           String pinName = "";
>           int rtnInt = 0;
>         } : (TABLETSWITCHINPUT! LPAREN! ttpin:EXTPINNAME! RPAREN!
>                         {
>                   (snipped)
>                           rtnInt = tableSwitchFunc.set_param("TABLE-SWITCH-INPUT",
> pinValue);  /*  Call to outside function that returns the correct value */
>
>                           rtnValue = new Integer(rtnInt).toString();
>                           System.out.println("from tableswitch:
> rtnValue); // Correct value prints here
>                          }
>            );
>
>
> ____________________________________________________________________________
> Q:  Where is the return value stored?  How can I inspect it?  How can I
> also assign it as the return value for "statement"?
>
> Generated code -- call from "statement" to tableswitch:
> (snipped)
>                                 case TABLETSWITCHINPUT:
>                                 {
>                                         {
>                                         tbs = _t==ASTNULL ? null :
> (AST)_t;
>                                         tableswitch(_t,toggle);
>         /*  I thought ANTLR would save the return value here, but it doesn't
> look like it */
>
>                                         _t = _retTree;
>                                         tbs_AST = (AST)returnAST;
>                                         rtnValue = tbs.getText
> ().toString();
>
> System.out.println("from statement:  tableswitch rtnValue = " + rtnValue
> );
>
>                                         }
>                                         break;
>                                 }
>  (snipped)
>                         returnAST = statement_AST;
>                         _retTree = _t;
>                         return rtnValue;
>
> (snipped)
>
> Thank you in advance for any help you can give me.
>
> Janeen
>
> Intelsat is the world's largest provider of fixed satellite services.  Real-time, constant communications with people anywhere in the world is closer, by far.
>
> For more information about Intelsat, visit www.intelsat.com.
>
>
>
> This email message is for the sole use of the intended recipients and may contain confidential and privileged information. Any unauthorized review, use, disclosure or distribution is prohibited. If you are not the intended recipient, please contact the sender by reply email and destroy all copies of the original message. Any views expressed in this message are those of the individual sender, except where the sender specifically states them to be the views of Intelsat, Ltd. and its subsidiaries.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070124/9cdd9729/attachment.html 

From antlr at shmuelhome.mine.nu  Wed Jan 24 09:21:18 2007
From: antlr at shmuelhome.mine.nu (shmuel siegel)
Date: Wed, 24 Jan 2007 19:21:18 +0200
Subject: [antlr-interest] How To ... Code Beautifier for PL/SQL
In-Reply-To: <90ca1670701221911u1ef2da6and779d33eef8404e9@mail.gmail.com>
References: <90ca1670701221911u1ef2da6and779d33eef8404e9@mail.gmail.com>
Message-ID: <45B7958E.7070507@shmuelhome.mine.nu>

Mark Vilrokx wrote:
> Hi,
>
> I am rather new to ANTLR and the whole compiler scene but I wasn't 
> planning on writing a compiler.  I am actually trying to write a Code 
> Beautifier and and Automatic Code Analyzer.  When I set out on this 
> project, I was planning on writing my own code (perl) and using 
> regular expressions, however, I soon found out that this is way to 
> complex and it started to resemble a ... parser.  So I started 
> investigating ANTLR and other tools like JavaCC to see what they can 
> do for me. 
>
> Can someone please confirm whether ANTLR would be a good tool to write 
> my Code Beautifier and Code Analyzer?
>
> I have been playing around with ANTLR and it all makes quite a lot of 
> sense using the example on how to get started, but my problem is I am 
> writing a parser for an existing language PL/SQL and I don't know how 
> to ... begin.  The Lexar and Parsar in the end will probably be HUGH, 
> but I want to start small.  E.g. to start with I only want to 
> "recognize" the start and end of the PL/SQL function or procedure and 
> ignore the bit in the middle.  Then, later, I want to add some more to 
> the lexer and parser to recognize the declare section etc, slowly 
> building up the lexer and parser.  Is this possible?  Any examples?
>
> Cheers,
> Mark.

I don't see that you were answered so I will venture a superficial 
response. I think that ANTLR is as good or better of a tool for what you 
are doing as any other parser generator. It is definitely better than 
using perl regular expressions. You should know that you will run into 
problems when you start dealing with unreserved keywords. The lexer 
might also give you problems unless it is easy to recognize when you 
switch between SQL and PL.




From hwk.cortex-brainware at t-online.de  Thu Jan 25 15:22:00 2007
From: hwk.cortex-brainware at t-online.de (Dr. Hartmut Kocher)
Date: Fri, 26 Jan 2007 00:22:00 +0100
Subject: [antlr-interest] Problem finding Template
Message-ID: <03cf01c740d7$9d989f80$1601a8c0@kocher>

Hi,

 

using ANTLR 3.0B5, I get an exception when I parse my grammar: error(10):
internal error: Test.g : java.lang.IllegalArgumentException: Can't find
template tokenRefRuleRootTrack.st

 

Has anybody encountered this?

 

Here?s a simple grammar to show the effect:

 

Thanks.

 

grammar Test;

 

options {

     language=CSharp;

     output=AST;

     ASTLabelType=CommonTree;

}

 

tokens { KK; }

 

logic     :    logicalExpression EOF;

 

logicalExpression    :    expr ('and'^^ expr)*;

 

expr :    term ('or'^^ term)*;

 

term :    (ID^^|lp=INT -> ^(KK[$lp] INT)| '('! logicalExpression^^ ')'!);

 

zahl :lp=INT -> ^(KK[$lp] INT);

 

fragment DIGIT  :    '0'..'9';

 

fragment LETTER :    ('a'..'z'|'A'..'Z');

 

INT :    DIGIT+;

 

ID   :    LETTER (LETTER|'_'|DIGIT)+;

 

 

WS  :  (' '|'\r'|'\t'|'\f'|'\n')+ { $channel=HIDDEN; };

 

SL_COMMENT :

        '//'

        ( options { greedy=false; } : . )*

        ( '\r' | '\r\n' | '\n' )

        { $channel=HIDDEN; }

    ;

 

// multiple-line comments

ML_COMMENT :

        '/*'

        ( options {greedy=false;} : . )*

        '*/'

        { $channel=HIDDEN; }

        ;

 

 

 

Dr. Hartmut Kocher

Cortex Brainware Consulting & Training GmbH

Kirchplatz 5
D-82049 Pullach

Tel: +49 (89) 744  850 0
Fax: +49 (89) 744  850 11

 <http://www.cortex-brainware.de/> http://www.cortex-brainware.de

E-Mail: hwk at cortex-brainware.de

Handelsregister:
Registergericht: Amtsgericht M?nchen
HRB-Nr. 120614

Vertretungsberechtigte Gesch?ftsf?hrer:
Dipl.-Inform. Dorothea Burger, Dr.-Ing. Hartmut Kocher, Dr.-Ing. Martin
Lang, Dr. rer. nat. Rolf Peter Wehrum 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070126/81843e62/attachment.html 

From parrt at cs.usfca.edu  Thu Jan 25 15:25:54 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 25 Jan 2007 15:25:54 -0800
Subject: [antlr-interest] Problem finding Template
In-Reply-To: <03cf01c740d7$9d989f80$1601a8c0@kocher>
References: <03cf01c740d7$9d989f80$1601a8c0@kocher>
Message-ID: <D31AA4C0-A4E5-4187-B3A2-00D18FEB7CA5@cs.usfca.edu>

Hi.  I think ID^^ is the problem, but not sure why... seems it  
doesn't like it for some reason.  Hmm...try 3.0 pre-b6 from site, but  
you can try using a label on any token^^ to avoid I think.
Ter

On Jan 25, 2007, at 3:22 PM, Dr. Hartmut Kocher wrote:

> Hi,
>
>
>
> using ANTLR 3.0B5, I get an exception when I parse my grammar: error 
> (10):  internal error: Test.g : java.lang.IllegalArgumentException:  
> Can't find template tokenRefRuleRootTrack.st
>
>
>
> Has anybody encountered this?
>
>
>
> Here?s a simple grammar to show the effect:
>
>
>
> Thanks.
>
>
>
> grammar Test;
>
>
>
> options {
>
>      language=CSharp;
>
>      output=AST;
>
>      ASTLabelType=CommonTree;
>
> }
>
>
>
> tokens { KK; }
>
>
>
> logic     :    logicalExpression EOF;
>
>
>
> logicalExpression    :    expr ('and'^^ expr)*;
>
>
>
> expr :    term ('or'^^ term)*;
>
>
>
> term :    (ID^^|lp=INT -> ^(KK[$lp] INT)| '('! logicalExpression^^  
> ')'!);
>
>
>
> zahl :lp=INT -> ^(KK[$lp] INT);
>
>
>
> fragment DIGIT  :    '0'..'9';
>
>
>
> fragment LETTER :    ('a'..'z'|'A'..'Z');
>
>
>
> INT :    DIGIT+;
>
>
>
> ID   :    LETTER (LETTER|'_'|DIGIT)+;
>
>
>
>
>
> WS  :  (' '|'\r'|'\t'|'\f'|'\n')+ { $channel=HIDDEN; };
>
>
>
> SL_COMMENT :
>
>         '//'
>
>         ( options { greedy=false; } : . )*
>
>         ( '\r' | '\r\n' | '\n' )
>
>         { $channel=HIDDEN; }
>
>     ;
>
>
>
> // multiple-line comments
>
> ML_COMMENT :
>
>         '/*'
>
>         ( options {greedy=false;} : . )*
>
>         '*/'
>
>         { $channel=HIDDEN; }
>
>         ;
>
>
>
>
>
>
>
> Dr. Hartmut Kocher
>
> Cortex Brainware Consulting & Training GmbH
>
> Kirchplatz 5
> D-82049 Pullach
>
> Tel: +49 (89) 744  850 0
> Fax: +49 (89) 744  850 11
>
> http://www.cortex-brainware.de
>
> E-Mail: hwk at cortex-brainware.de
>
> Handelsregister:
> Registergericht: Amtsgericht M?nchen
> HRB-Nr. 120614
>
> Vertretungsberechtigte Gesch?ftsf?hrer:
> Dipl.-Inform. Dorothea Burger, Dr.-Ing. Hartmut Kocher, Dr.-Ing.  
> Martin Lang, Dr. rer. nat. Rolf Peter Wehrum
>
>
>
>


From guillaume.helle at capgemini.com  Thu Jan 25 23:55:17 2007
From: guillaume.helle at capgemini.com (HELLE Guillaume)
Date: Fri, 26 Jan 2007 08:55:17 +0100
Subject: [antlr-interest] Left recursion problem
In-Reply-To: <A50DD01A-4127-4F8D-B93B-FF8312A2BF15@cs.usfca.edu>
Message-ID: <00c301c7411f$51c3da50$c6d0430a@sud.capgemini.fr>


Hi!

I have a left recursion problem and i don't know how to solve it...
The problem is between "structure_controle" and "instruction"...
How i can solve it?
I am using antlr V3

Thanks for your advicean your help!

Best regards

Guillaume Helle


My grammar :

grammar lpr;

program : (commentaire|structure_controle|predicat_generation)* ;

predicat_generation
	:	'DEBUTBLOC(' site (',' site)* ')' instruction* 'FINBLOC';

site	:	'sit_' ('a'..'z'|'A'..'Z')+;

structure_controle
	:	'SI' condition 'ALORS' instruction ('SINON' instruction)*
'FINSI' |
		'TANTQUE' condition 'FAIRE' instruction 'FINFAIRE' |
		instruction |
		code_C;
		
commentaire
	:	'#' ( ~(newline) )* 
                 {_ttype = Token.SKIP;};
                 
code_C	:	'&' ( ~(newline) )*;

texte_libre
	:	(chaine_caractere*|' '|'\t')*;

condition
	:	'(' 
		(condition (('ET'|'OU') condition)* | 
		expression_arithmetique ('='|'<'|'>'|'<='|'>='|'<>')
expression_arithmetique)
		')';
	
instruction
	:	(
		condition |
		'REGLE' nom_regle |
		'APPEL' action_gascon |
		variable '=' expression_arithmetique |
		variable '=' expression_chaine |
		variable '=' condition |
		structure_controle
		) newline;		
	
expression_arithmetique
	:	'(' (
		terme_compose (('+'|'*'|'/'|'-') terme_compose)* |
		'-'* terme_compose |
		terme_compose '**' constante_entiere
		) ')';		

terme_compose
	:	expression_arithmetique | 
		'(' expression_arithmetique ')' |
		terme |
		'(' terme ')';
		
terme	:	(variable|constante|repere);

expression_chaine
	:	variable ('+' variable | chaine_caractere)* |
		chaine_caractere;

variable:	variable_locale | variable_globale;

variable_locale
	:	'lo' ('E'|'D'|'F'|'R'|'C'|'L'|'1'..'9' 'E'|'1'..'9' 'F')
chaine_caractere;
	
variable_globale
	:	'gl' ('a'..'z'|'A'..'Z')+ nom |
		'gl' nom |
		'GL' nom 'PANNE';
	
nom_regle
	:	nom;
		
action_gascon
	:	nom;
	
repere	:
('a'..'z'|'A'..'Z')('a'..'z'|'A'..'Z')('0'..'9')('0'..'9')('a'..'z'|'A'..'Z'
)+;	
			
nom	:	('a'..'z'|'A'..'Z'|'0'..'9')*;	

chaine_caractere:
	(nom|'_')*;
	
constante_entiere
	:	('+'|'-')* ('1'..'9')* ('0'..'9')+;
	
constante
	:	constante_entiere;
	
	
	
newline	:	'\r\n'|'\r'|'\n';
			
		
WS      : (' '|'\t'|'\n')+ {channel=99;}
;

;


This message contains information that may be privileged or confidential and is the property of the Capgemini Group. It is intended only for the person to whom it is addressed. If you are not the intended recipient,  you are not authorized to read, print, retain, copy, disseminate,  distribute, or use this message or any part thereof. If you receive this  message in error, please notify the sender immediately and delete all  copies of this message.


From h.kocher at pharmatechnik.de  Fri Jan 26 00:35:51 2007
From: h.kocher at pharmatechnik.de (Dr. Kocher, Hartmut)
Date: Fri, 26 Jan 2007 09:35:51 +0100
Subject: [antlr-interest] Problem finding Template
In-Reply-To: <D31AA4C0-A4E5-4187-B3A2-00D18FEB7CA5@cs.usfca.edu>
Message-ID: <D43540A44D3F794787378D8B08E8AE53E755B4@staexc01.pharmatechnik.de>

I'll try this solution. How does the label help here?

I cannot use the pre-beta as it doesn't generate C# code yet (some templates seem to have changed and StringTemplates complains that the C#-template does not match the interface).

But I still don't quite understand: ANTLR tries to load a template which obviously isn't there. So either you have to include that template or you must change the part, which uses the template... Or am I missing something?

Thanks
Hartmut

-----Urspr?ngliche Nachricht-----
Von: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] Im Auftrag von Terence Parr
Gesendet: Freitag, 26. Januar 2007 00:26
An: ANTLR List
Betreff: Re: [antlr-interest] Problem finding Template

Hi.  I think ID^^ is the problem, but not sure why... seems it  
doesn't like it for some reason.  Hmm...try 3.0 pre-b6 from site, but  
you can try using a label on any token^^ to avoid I think.
Ter

On Jan 25, 2007, at 3:22 PM, Dr. Hartmut Kocher wrote:

> Hi,
>
>
>
> using ANTLR 3.0B5, I get an exception when I parse my grammar: error 
> (10):  internal error: Test.g : java.lang.IllegalArgumentException:  
> Can't find template tokenRefRuleRootTrack.st
>
>
>
> Has anybody encountered this?
>
>
>
> Here's a simple grammar to show the effect:
>
>
>
> Thanks.
>
>
>
> grammar Test;
>
>
>
> options {
>
>      language=CSharp;
>
>      output=AST;
>
>      ASTLabelType=CommonTree;
>
> }
>
>
>
> tokens { KK; }
>
>
>
> logic     :    logicalExpression EOF;
>
>
>
> logicalExpression    :    expr ('and'^^ expr)*;
>
>
>
> expr :    term ('or'^^ term)*;
>
>
>
> term :    (ID^^|lp=INT -> ^(KK[$lp] INT)| '('! logicalExpression^^  
> ')'!);
>
>
>
> zahl :lp=INT -> ^(KK[$lp] INT);
>
>
>
> fragment DIGIT  :    '0'..'9';
>
>
>
> fragment LETTER :    ('a'..'z'|'A'..'Z');
>
>
>
> INT :    DIGIT+;
>
>
>
> ID   :    LETTER (LETTER|'_'|DIGIT)+;
>
>
>
>
>
> WS  :  (' '|'\r'|'\t'|'\f'|'\n')+ { $channel=HIDDEN; };
>
>
>
> SL_COMMENT :
>
>         '//'
>
>         ( options { greedy=false; } : . )*
>
>         ( '\r' | '\r\n' | '\n' )
>
>         { $channel=HIDDEN; }
>
>     ;
>
>
>
> // multiple-line comments
>
> ML_COMMENT :
>
>         '/*'
>
>         ( options {greedy=false;} : . )*
>
>         '*/'
>
>         { $channel=HIDDEN; }
>
>         ;
>
>
>
>
>
>
>
> Dr. Hartmut Kocher
>
> Cortex Brainware Consulting & Training GmbH
>
> Kirchplatz 5
> D-82049 Pullach
>
> Tel: +49 (89) 744  850 0
> Fax: +49 (89) 744  850 11
>
> http://www.cortex-brainware.de
>
> E-Mail: hwk at cortex-brainware.de
>
> Handelsregister:
> Registergericht: Amtsgericht M?nchen
> HRB-Nr. 120614
>
> Vertretungsberechtigte Gesch?ftsf?hrer:
> Dipl.-Inform. Dorothea Burger, Dr.-Ing. Hartmut Kocher, Dr.-Ing.  
> Martin Lang, Dr. rer. nat. Rolf Peter Wehrum
>
>
>
>


From jose.ventura.roda at gmail.com  Fri Jan 26 05:39:31 2007
From: jose.ventura.roda at gmail.com (Jose Ventura)
Date: Fri, 26 Jan 2007 14:39:31 +0100
Subject: [antlr-interest] Stupid problem (Antlr 2.7.6)
Message-ID: <e39abda10701260539u1c45fea1x40fc2b12306d2c58@mail.gmail.com>

With this very simple antlr parser I have problems generating java program

 class pru extends Parser;
 copy: la:"COPY"    {System.out.println (#la.getText());};

Antlr generate

 try { // for error handling
   la = LT(1);
   match(LITERAL_COPY);
   System.out.println (#la.getText());
 }

Wy don't translate the #?

Is a stupid question, sure. But I don't see it.

Any help? Thank's.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070126/6598094f/attachment.html 

From zhixueyong at hotmail.com  Fri Jan 26 10:41:05 2007
From: zhixueyong at hotmail.com (Xue Yong Zhi)
Date: Fri, 26 Jan 2007 13:41:05 -0500
Subject: [antlr-interest] Stupid problem (Antlr 2.7.6)
In-Reply-To: <e39abda10701260539u1c45fea1x40fc2b12306d2c58@mail.gmail.com>
References: <e39abda10701260539u1c45fea1x40fc2b12306d2c58@mail.gmail.com>
Message-ID: <epdi02$adv$1@sea.gmane.org>

Jose Ventura wrote:
> With this very simple antlr parser I have problems generating java program
> 
>  class pru extends Parser;
>  copy: la:"COPY"    {System.out.println (#la.getText());};
> 
> Antlr generate
> 
>  try { // for error handling
>    la = LT(1);
>    match(LITERAL_COPY);
>    System.out.println (#la.getText());
>  }
>  
> Wy don't translate the #?
> 
> Is a stupid question, sure. But I don't see it.
> 
> Any help? Thank's.
> 

You do not need one. Just use
  copy: la:"COPY"    {System.out.println (la.getText());};

-- 
Xue Yong Zhi
http://seclib.blogspot.com


From jimi at intersystems.com  Fri Jan 26 10:53:40 2007
From: jimi at intersystems.com (Jim Idle)
Date: Fri, 26 Jan 2007 13:53:40 -0500
Subject: [antlr-interest] Problem finding Template
In-Reply-To: <D43540A44D3F794787378D8B08E8AE53E755B4@staexc01.pharmatechnik.de>
References: <D31AA4C0-A4E5-4187-B3A2-00D18FEB7CA5@cs.usfca.edu>
	<D43540A44D3F794787378D8B08E8AE53E755B4@staexc01.pharmatechnik.de>
Message-ID: <20070126185341.1B155A8@mail.intersystems.com>

The construct in your grammar is causing ANTLR to generate a reference to a template the does not exist in the codegen .st file. This is either erroneous or perhaps it is one of a missing few templates that Ter has not covered and so neither have the other targets (yet). I think that there are some comments in the c.st file about this, saying that there are going to have to be templates that track and label, or something similar.

I hitnk that this:

term :    (ID^^|lp=INT -> ^(KK[$lp] INT)| '('! logicalExpression^^  
> ')'!);

is "probably" what is causing it. The ID^^ without a label and lp=INT at the same time, but this is a bit of a guess to be honest. You could try rearranging this a little and you might be able to get it to go away:

term
	: ID					-> ID
	| INT					-> ^(KP INT)
	| '(' logicalExpresssion ')'	-> logicalExpression
	;

Or perhaps:

term
	: ( id=ID					-> $id				)
	| ( in=INT					-> ^(KP[$in.text] $in)		)
	| ( '(' le=logicalExpresssion ')'	-> $le				)
	;

But it will take a little experimentation. ANTLR 3 is still beta and there are a few quirks to iron out yet as you might expect.

Jim

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Dr. Kocher, Hartmut
Sent: Friday, January 26, 2007 12:36 AM
To: Terence Parr; ANTLR List
Subject: [antlr-interest] Problem finding Template

I'll try this solution. How does the label help here?

I cannot use the pre-beta as it doesn't generate C# code yet (some templates seem to have changed and StringTemplates complains that the C#-template does not match the interface).

But I still don't quite understand: ANTLR tries to load a template which obviously isn't there. So either you have to include that template or you must change the part, which uses the template... Or am I missing something?

Thanks
Hartmut

-----Urspr?ngliche Nachricht-----
Von: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] Im Auftrag von Terence Parr
Gesendet: Freitag, 26. Januar 2007 00:26
An: ANTLR List
Betreff: Re: [antlr-interest] Problem finding Template

Hi.  I think ID^^ is the problem, but not sure why... seems it  
doesn't like it for some reason.  Hmm...try 3.0 pre-b6 from site, but  
you can try using a label on any token^^ to avoid I think.
Ter

On Jan 25, 2007, at 3:22 PM, Dr. Hartmut Kocher wrote:

> Hi,
>
>
>
> using ANTLR 3.0B5, I get an exception when I parse my grammar: error 
> (10):  internal error: Test.g : java.lang.IllegalArgumentException:  
> Can't find template tokenRefRuleRootTrack.st
>
>
>
> Has anybody encountered this?
>
>
>
> Here's a simple grammar to show the effect:
>
>
>
> Thanks.
>
>
>
> grammar Test;
>
>
>
> options {
>
>      language=CSharp;
>
>      output=AST;
>
>      ASTLabelType=CommonTree;
>
> }
>
>
>
> tokens { KK; }
>
>
>
> logic     :    logicalExpression EOF;
>
>
>
> logicalExpression    :    expr ('and'^^ expr)*;
>
>
>
> expr :    term ('or'^^ term)*;
>
>
>
> term :    (ID^^|lp=INT -> ^(KK[$lp] INT)| '('! logicalExpression^^  
> ')'!);
>
>
>
> zahl :lp=INT -> ^(KK[$lp] INT);
>
>
>
> fragment DIGIT  :    '0'..'9';
>
>
>
> fragment LETTER :    ('a'..'z'|'A'..'Z');
>
>
>
> INT :    DIGIT+;
>
>
>
> ID   :    LETTER (LETTER|'_'|DIGIT)+;
>
>
>
>
>
> WS  :  (' '|'\r'|'\t'|'\f'|'\n')+ { $channel=HIDDEN; };
>
>
>
> SL_COMMENT :
>
>         '//'
>
>         ( options { greedy=false; } : . )*
>
>         ( '\r' | '\r\n' | '\n' )
>
>         { $channel=HIDDEN; }
>
>     ;
>
>
>
> // multiple-line comments
>
> ML_COMMENT :
>
>         '/*'
>
>         ( options {greedy=false;} : . )*
>
>         '*/'
>
>         { $channel=HIDDEN; }
>
>         ;
>
>
>
>
>
>
>
> Dr. Hartmut Kocher
>
> Cortex Brainware Consulting & Training GmbH
>
> Kirchplatz 5
> D-82049 Pullach
>
> Tel: +49 (89) 744  850 0
> Fax: +49 (89) 744  850 11
>
> http://www.cortex-brainware.de
>
> E-Mail: hwk at cortex-brainware.de
>
> Handelsregister:
> Registergericht: Amtsgericht M?nchen
> HRB-Nr. 120614
>
> Vertretungsberechtigte Gesch?ftsf?hrer:
> Dipl.-Inform. Dorothea Burger, Dr.-Ing. Hartmut Kocher, Dr.-Ing.  
> Martin Lang, Dr. rer. nat. Rolf Peter Wehrum
>
>
>
>


-- 
No virus found in this incoming message.
Checked by AVG Free Edition.
Version: 7.5.432 / Virus Database: 268.17.11/652 - Release Date: 1/25/2007 3:32 PM
 

-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.5.432 / Virus Database: 268.17.11/652 - Release Date: 1/25/2007 3:32 PM
 

From Jim.O'Connor at microfocus.com  Fri Jan 26 13:25:45 2007
From: Jim.O'Connor at microfocus.com (Jim O'Connor)
Date: Fri, 26 Jan 2007 16:25:45 -0500
Subject: [antlr-interest] 8 bit ASCII and cpp source code
Message-ID: <8818ADCA969F2F4DA513CEE078066DCA0299A0CC@rock-exchange.microfocus.com>

Hi all,
            Quick sanity check.  Background: Antlr 2.7.5 cpp source,
compiled into a library.  I am running into Swedish characters in my
input file octal 330, hex 0xd8, decimal 216.
 
 
I limited the charVocab in the test case to     
charVocabulary = '\3' .. '\177'|'\330';
 
Lexer checks for IDENTIFIERs
IDENTIFIER : 
       (SIMPLE_LETTER) (SIMPLE_LETTER | '_' | '0'..'9')* 
;
 
SIMPLE_LETTER : 
      'a'..'z' | '\330' 
;
 
the switch statement in the lexer is
 
void SqlCobolLexer::mSIMPLE_LETTER(bool _createToken) {
      int _ttype; ANTLR_USE_NAMESPACE(antlr)RefToken _token;
ANTLR_USE_NAMESPACE(std)string::size_type _begin = text.length();
      _ttype = SIMPLE_LETTER;
      ANTLR_USE_NAMESPACE(std)string::size_type _saveIndex;
      
      switch ( LA(1)) {
      case 0x61 /* 'a' */ :
      case 0x62 /* 'b' */ :
      case 0x63 /* 'c' */ :
      case 0x64 /* 'd' */ :
      case 0x65 /* 'e' */ :
      case 0x66 /* 'f' */ :
      case 0x67 /* 'g' */ :
      case 0x68 /* 'h' */ :
      case 0x69 /* 'i' */ :
      case 0x6a /* 'j' */ :
      case 0x6b /* 'k' */ :
      case 0x6c /* 'l' */ :
      case 0x6d /* 'm' */ :
      case 0x6e /* 'n' */ :
      case 0x6f /* 'o' */ :
      case 0x70 /* 'p' */ :
      case 0x71 /* 'q' */ :
      case 0x72 /* 'r' */ :
      case 0x73 /* 's' */ :
      case 0x74 /* 't' */ :
      case 0x75 /* 'u' */ :
      case 0x76 /* 'v' */ :
      case 0x77 /* 'w' */ :
      case 0x78 /* 'x' */ :
      case 0x79 /* 'y' */ :
      case 0x7a /* 'z' */ :
      {
            matchRange('a','z');
            break;
      }
      case 0xd8:
      {
            match(static_cast<unsigned char>('\330') /* charlit */ );
            break;
      }
 
 
 
 
 
 The charscanner and inputbuffer classes have a return type of int for
LA().  LA(1) returns 0Xffd8 for my "problem" character.  
 
 
Solution: change the LA() to return unsigned?  Ric hinted at such in a
2004 archive note.
 
Thanks for reading to here
 
Jim
 
Hope all is going well
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070126/cb524ae5/attachment-0001.html 

From Ronald.Petty at milliman.com  Fri Jan 26 13:35:34 2007
From: Ronald.Petty at milliman.com (Ronald Petty)
Date: Fri, 26 Jan 2007 15:35:34 -0600
Subject: [antlr-interest] MatLab
Message-ID: <OF4EED8540.F22AA989-ON8625726F.00769060-8625726F.00769CEE@milliman.com>

Does anyone have a grammar for MatLab? 

Ronald Petty
Milliman 
Financial Risk Management -- Technology Practice
Bloemgracht 5A
1016 KA Amsterdam
The Netherlands
+31.20.5244588  (Amsterdam Office)
+1.312.726.0677 (Chicago Office)
+1.312.714.2519 cell
+1.312.499.5721 direct 
+1.312.235.2348 laptop (Skype)
+1.312.499.5700 fax



**************************************************************************************
This communication is intended solely for the addressee and is
confidential. If you are not the intended recipient, any disclosure, 
copying, distribution or any action taken or omitted to be taken in
reliance on it, is prohibited and may be unlawful. Unless indicated
to the contrary: it does not constitute professional advice or 
opinions upon which reliance may be made by the addressee or any
other party, and it should be considered to be a work in progress.
**************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070126/ae990c83/attachment.html 

From voytechs at yahoo.com  Fri Jan 26 17:15:28 2007
From: voytechs at yahoo.com (Mark Bednarczyk)
Date: Fri, 26 Jan 2007 20:15:28 -0500
Subject: [antlr-interest] ANT for v3
Message-ID: <20070127011534.2490A1906BF@www.antlr.org>

Anyone have the ANT task for ANTLR v3? I've tried using a simple wrapper to
point ANT at "org.antlr.Tool" from the original location "antlr.Tool" but it
is still not working. I think more changed than just the location.

Has any one used ANT with ANTLR v3 yet?

Cheers,

mark...

 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070126/23ed62e7/attachment.html 

From voytechs at yahoo.com  Sat Jan 27 05:27:25 2007
From: voytechs at yahoo.com (Mark Bednarczyk)
Date: Sat, 27 Jan 2007 08:27:25 -0500
Subject: [antlr-interest] ANT for v3
In-Reply-To: <4153ee230701262101w52cbbc4frca98de4cadaa6034@mail.gmail.com>
Message-ID: <20070127132730.EDC3F1906F2@www.antlr.org>

Hey thanks Mark,

	I was going to do that next, but was hoping someone had already
recompiled that ANT ANTLR optional task, but no matter. I'm using Eclipse as
well.

Now a very ungly thing. I'm trying to get ANTLR3.0 working, which needed
StringTemplates which required ANTLR 2.77 in the build path. So now I have
both in order to satisfy StringTemplate. I'm using antlr-3-beta-rev3386.jar
downloaded from the "file share" website area.

Is there a better binary build I should use? Is there a may be a
StringTemplate based on ANTLR 3.0, that would be much better.

Cheers,
Mark...
> -----Original Message-----
> From: Mark Mandel [mailto:mark.mandel at gmail.com] 
> Sent: Saturday, January 27, 2007 12:01 AM
> To: voytechs at yahoo.com
> Subject: Re: [antlr-interest] ANT for v3
> 
> Yup, I have it working, no issues:
> 
> Pretty easy, this was my ant code:
> 
> <java classname="org.antlr.Tool">
> 	<arg value="${src}/Gammar.g"/>
> </java>
> 
> That was it.
> 
> I did find that when running this from within Eclipse I get a 
> org.eclipse.ant.internal.ui.antsupport.AntSecurityException
> 
> Which is annoying, but doesn't seem to actually interrupt anything.
> 
> Mark
> 
> 
> On 1/27/07, Mark Bednarczyk <voytechs at yahoo.com> wrote:
> >
> >
> >
> > Anyone have the ANT task for ANTLR v3? I've tried using a simple 
> > wrapper to point ANT at "org.antlr.Tool" from the original location 
> > "antlr.Tool" but it is still not working. I think more 
> changed than just the location.
> >
> >
> >
> > Has any one used ANT with ANTLR v3 yet?
> >
> >
> >
> > Cheers,
> >
> > mark...
> >
> 
> 
> --
> E: mark.mandel at gmail.com
> W: www.compoundtheory.com
> 



From parrt at cs.usfca.edu  Sat Jan 27 11:10:21 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 27 Jan 2007 11:10:21 -0800
Subject: [antlr-interest] ANT for v3
In-Reply-To: <20070127132730.EDC3F1906F2@www.antlr.org>
References: <20070127132730.EDC3F1906F2@www.antlr.org>
Message-ID: <506F6CB8-CC1B-4797-AB32-B559FBE2C9DB@cs.usfca.edu>


On Jan 27, 2007, at 5:27 AM, Mark Bednarczyk wrote:

> Hey thanks Mark,
>
> 	I was going to do that next, but was hoping someone had already
> recompiled that ANT ANTLR optional task, but no matter. I'm using  
> Eclipse as
> well.

Check out Juergen's Ant task for v3; top of list:

http://www.antlr.org/share/list

> Now a very ungly thing. I'm trying to get ANTLR3.0 working, which  
> needed
> StringTemplates which required ANTLR 2.77 in the build path. So now  
> I have
> both in order to satisfy StringTemplate. I'm using antlr-3-beta- 
> rev3386.jar
> downloaded from the "file share" website area.
>
> Is there a better binary build I should use? Is there a may be a
> StringTemplate based on ANTLR 3.0, that would be much better.

I will be rewriting both ANTLR v3 and stringtemplate in v3 at some  
point, but not in the near term.  I recognize the ugliness of having  
two versions of ANTLR.  New tools have to be written in something  
though, right? ;)

Ter

From antlr at mirality.co.nz  Sat Jan 27 12:14:23 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sun, 28 Jan 2007 09:14:23 +1300
Subject: [antlr-interest] 8 bit ASCII and cpp source code
In-Reply-To: <8818ADCA969F2F4DA513CEE078066DCA0299A0CC@rock-exchange.mic
	rofocus.com>
References: <8818ADCA969F2F4DA513CEE078066DCA0299A0CC@rock-exchange.microfocus.com>
Message-ID: <7.0.1.0.0.20070128091100.037456e0@mirality.co.nz>

At 10:25 27/01/2007, Jim O'Connor wrote:
>  The charscanner and inputbuffer classes have a return type of 
> int for LA().  LA(1) returns 0Xffd8 for my "problem" character.
>
>Solution: change the LA() to return unsigned?  Ric hinted at such 
>in a 2004 archive note.

I haven't actually looked at the code for LA, but probably a 
simpler solution is to cast through unsigned char along the way.

ie. somewhere it'll have a bit that says "return c;" where c is a 
char (or maybe "return (int)c;" -- change that to "return 
(int)(unsigned char)c;" (or the equivalent static_casts, if you're 
that way inclined) and it should fix up your problem character 
without changing the function signature, which might be important 
if something is depending on it to return negative answers 
sometimes.


From jono at mail2Juggler.com  Sun Jan 28 13:50:54 2007
From: jono at mail2Juggler.com (Jono Juggler)
Date: Sun, 28 Jan 2007 13:50:54 -0800
Subject: [antlr-interest] Printing parser rule names
Message-ID: <30a901c74326$625d7a20$8eca010a@mail2world.com>

Hello,

I need a way to count the number of function calls, if statements, etc
in source code. I am using several languages, but I am starting with the
java.g grammar. If DumpASTVisitor printed the names of the parser rules
instead of the token type, that would be fine.

I know I can edit the grammar file to add print statements into each
rule, but I would rather not since I am going to be using more then one
language.

I have done the getting started tutorial, and taken a quick look at the
API, but I have not found a way to print the names of the rules.

Any ideas?
Thanks.



FHA Home Loan Rates, Compare Rates
Refinance your FHA home loan today. Get 4 quotes from leading lenders!
<http://tagline.bidsystem.com/fc/MhtXpK1Q3oPXyfCgKIX5RyVPFbOH2LnBL8ZVU/>


<span id=m2wTl><p><font face="Arial, Helvetica, sans-serif" size="2" style="font-size:13.5px">_______________________________________________________________<BR>Get the Free email that has everyone talking at <a href=http://www.mail2world.com target=new>http://www.mail2world.com</a><br>  <font color=#999999>Unlimited Email Storage &#150; POP3 &#150; Calendar &#150; SMS &#150; Translator &#150; Much More!</font></font></span>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070128/34376d8d/attachment.html 

From mark.mandel at gmail.com  Sun Jan 28 21:26:55 2007
From: mark.mandel at gmail.com (Mark Mandel)
Date: Mon, 29 Jan 2007 16:26:55 +1100
Subject: [antlr-interest] V3: possible bug - whitespace at the beginning of
	a line causes error?
Message-ID: <4153ee230701282126v643e4090sa3b59d9a7171a646@mail.gmail.com>

Hey,

Before I make a test bed, I just wanted to see if anyone else has
encountered this issue:

If I have a line that reads a line such as:

"select from basic"

it parses fine

if I have one that reads:

"   select from basic"

I get a mismatched character error on my parser.

This is actually quite possible with the input I recieve.

All whitespace is hidden in my grammar, so I'm a little confused.

WS  	:
		(' '|'\r'|'\t'|'\u000C'|'\n') {$channel=HIDDEN;}
    	;

Is this possibly a bug? Or do I need to look deeper into my grammar?

Mark
-- 
E: mark.mandel at gmail.com
W: www.compoundtheory.com

From mark.mandel at gmail.com  Sun Jan 28 21:33:35 2007
From: mark.mandel at gmail.com (Mark Mandel)
Date: Mon, 29 Jan 2007 16:33:35 +1100
Subject: [antlr-interest] v3: Can someone explain ^^ to me in a Parser?
Message-ID: <4153ee230701282133y25469033p3562627e2a76d342@mail.gmail.com>

Okay.. I'm beating my head against this one - every time I try and
place '^^' on a node, I get the error that it is a 'unexpected token'
^.

So, while I believe I understand what it does - can someone please
explain to me:

1) Against what aspect of a grammar do I put it next to?
2) Exactly the scenario you would use this in? I think I get it, but
the XML tutorial wasn't very clear on this point.

Thanks in advance, I can't seem to wrap my head around this aspect of it.

Mark

-- 
E: mark.mandel at gmail.com
W: www.compoundtheory.com

From parrt at cs.usfca.edu  Sun Jan 28 21:52:26 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 28 Jan 2007 21:52:26 -0800
Subject: [antlr-interest] v3: Can someone explain ^^ to me in a Parser?
In-Reply-To: <4153ee230701282133y25469033p3562627e2a76d342@mail.gmail.com>
References: <4153ee230701282133y25469033p3562627e2a76d342@mail.gmail.com>
Message-ID: <78AF21C4-FC95-4867-9067-599CF593632E@cs.usfca.edu>


On Jan 28, 2007, at 9:33 PM, Mark Mandel wrote:

> Okay.. I'm beating my head against this one - every time I try and
> place '^^' on a node, I get the error that it is a 'unexpected token'
> ^.

if you're using > 3.0b5 it's just '^'.  Use the -> rewrite stuff if  
you can; the ^ and ! etc.. only make sense for expressions now.

You've probably seen this, but...

http://www.antlr.org/wiki/display/ANTLR3/Tree+construction

Ter

>
> So, while I believe I understand what it does - can someone please
> explain to me:
>
> 1) Against what aspect of a grammar do I put it next to?
> 2) Exactly the scenario you would use this in? I think I get it, but
> the XML tutorial wasn't very clear on this point.
>
> Thanks in advance, I can't seem to wrap my head around this aspect  
> of it.
>
> Mark
>
> -- 
> E: mark.mandel at gmail.com
> W: www.compoundtheory.com


From parrt at cs.usfca.edu  Sun Jan 28 21:53:42 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 28 Jan 2007 21:53:42 -0800
Subject: [antlr-interest] V3: possible bug - whitespace at the beginning
	of a line causes error?
In-Reply-To: <4153ee230701282126v643e4090sa3b59d9a7171a646@mail.gmail.com>
References: <4153ee230701282126v643e4090sa3b59d9a7171a646@mail.gmail.com>
Message-ID: <9B79332C-5CBC-414A-A1F6-4EDDAA263592@cs.usfca.edu>


On Jan 28, 2007, at 9:26 PM, Mark Mandel wrote:

> Hey,
>
> Before I make a test bed, I just wanted to see if anyone else has
> encountered this issue:
>
> If I have a line that reads a line such as:
>
> "select from basic"
>
> it parses fine
>
> if I have one that reads:
>
> "   select from basic"
>
> I get a mismatched character error on my parser.

Weird given the $channel=HIDDEN.  Never seen this.  Have you separate  
parser and lexer into two separate files?  If so, token types could  
be out of sync.

Have you tried a debugger?

Ter

From jose.ventura.roda at gmail.com  Mon Jan 29 01:01:29 2007
From: jose.ventura.roda at gmail.com (Jose Ventura)
Date: Mon, 29 Jan 2007 10:01:29 +0100
Subject: [antlr-interest] Stupid problem (Antlr 2.7.6)
In-Reply-To: <epdi02$adv$1@sea.gmane.org>
References: <e39abda10701260539u1c45fea1x40fc2b12306d2c58@mail.gmail.com>
	<epdi02$adv$1@sea.gmane.org>
Message-ID: <e39abda10701290101i3182e8ic8daf71ce97c10b3@mail.gmail.com>

Thank's Xue.

I'm still thinking why in another parser i have:

relationalExpression
    : e1:sumExpression (o:op e2:sumExpression)*

{ *if* (#e2==*null*) // a=10 or 2 --> entra '2'

....
And run. I don't know why.

Thank's again.



2007/1/26, Xue Yong Zhi <zhixueyong at hotmail.com>:
>
> Jose Ventura wrote:
> > With this very simple antlr parser I have problems generating java
> program
> >
> >  class pru extends Parser;
> >  copy: la:"COPY"    {System.out.println (#la.getText());};
> >
> > Antlr generate
> >
> >  try { // for error handling
> >    la = LT(1);
> >    match(LITERAL_COPY);
> >    System.out.println (#la.getText());
> >  }
> >
> > Wy don't translate the #?
> >
> > Is a stupid question, sure. But I don't see it.
> >
> > Any help? Thank's.
> >
>
> You do not need one. Just use
> copy: la:"COPY"    {System.out.println (la.getText());};
>
> --
> Xue Yong Zhi
> http://seclib.blogspot.com
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070129/f50a9d38/attachment.html 

From Jim.O'Connor at microfocus.com  Mon Jan 29 05:54:39 2007
From: Jim.O'Connor at microfocus.com (Jim O'Connor)
Date: Mon, 29 Jan 2007 08:54:39 -0500
Subject: [antlr-interest] 8 bit ASCII and cpp source code
Message-ID: <8818ADCA969F2F4DA513CEE078066DCA0299A26E@rock-exchange.microfocus.com>

Great minds think alike?? :0)

I tried that. The 8 bit character "turns into" 0xffd8 before getting to
the critical point

Switch(0xffd8) doesn't match case(0xd8).

> -----Original Message-----
> From: Gavin Lambert [mailto:antlr at mirality.co.nz]
> Sent: Saturday, January 27, 2007 3:14 PM
> To: Jim O'Connor
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] 8 bit ASCII and cpp source code
> 
> At 10:25 27/01/2007, Jim O'Connor wrote:
> >  The charscanner and inputbuffer classes have a return type of
> > int for LA().  LA(1) returns 0Xffd8 for my "problem" character.
> >
> >Solution: change the LA() to return unsigned?  Ric hinted at such
> >in a 2004 archive note.
> 
> I haven't actually looked at the code for LA, but probably a
> simpler solution is to cast through unsigned char along the way.
> 
> ie. somewhere it'll have a bit that says "return c;" where c is a
> char (or maybe "return (int)c;" -- change that to "return
> (int)(unsigned char)c;" (or the equivalent static_casts, if you're
> that way inclined) and it should fix up your problem character
> without changing the function signature, which might be important
> if something is depending on it to return negative answers
> sometimes.
> 
> 
> 
> This message has been scanned for viruses by MailController -
> www.MailController.altohiway.com

From rhill03 at eds.com  Mon Jan 29 06:07:22 2007
From: rhill03 at eds.com (Hill, Robert)
Date: Mon, 29 Jan 2007 14:07:22 -0000
Subject: [antlr-interest] 8 bit ASCII and cpp source code
In-Reply-To: <8818ADCA969F2F4DA513CEE078066DCA0299A26E@rock-exchange.microfocus.com>
Message-ID: <2E909902FD3A03419E3A905908AE3DD402D621FC@UKNSM201.emea.corp.eds.com>

Maybe im misunderstanding this but how about a simple

return (int) c & 0x000000ff;

You could also (just) switch on that too.

switch (c & 0xff) { ..blah.. }

Regards, 

Rob

Robert Hill
Information Engineer
Agile Alliance Member
UKIMEA DWP ACU, Hallamshire Business Park, 100 Napier St, Sheffield. S11
8HD
email:	rhill03 at eds.com
Office:	+44 114 291 1928
Mobile:	+44 7903 185 516

 

>-----Original Message-----
>From: antlr-interest-bounces at antlr.org 
>[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jim O'Connor
>Sent: 29 January 2007 13:55
>To: antlr-interest at antlr.org
>Subject: Re: [antlr-interest] 8 bit ASCII and cpp source code
>
>Great minds think alike?? :0)
>
>I tried that. The 8 bit character "turns into" 0xffd8 before 
>getting to the critical point
>
>Switch(0xffd8) doesn't match case(0xd8).
>
>> -----Original Message-----
>> From: Gavin Lambert [mailto:antlr at mirality.co.nz]
>> Sent: Saturday, January 27, 2007 3:14 PM
>> To: Jim O'Connor
>> Cc: antlr-interest at antlr.org
>> Subject: Re: [antlr-interest] 8 bit ASCII and cpp source code
>> 
>> At 10:25 27/01/2007, Jim O'Connor wrote:
>> >  The charscanner and inputbuffer classes have a return type of int 
>> > for LA().  LA(1) returns 0Xffd8 for my "problem" character.
>> >
>> >Solution: change the LA() to return unsigned?  Ric hinted 
>at such in 
>> >a 2004 archive note.
>> 
>> I haven't actually looked at the code for LA, but probably a simpler 
>> solution is to cast through unsigned char along the way.
>> 
>> ie. somewhere it'll have a bit that says "return c;" where c 
>is a char 
>> (or maybe "return (int)c;" -- change that to "return (int)(unsigned 
>> char)c;" (or the equivalent static_casts, if you're that way 
>inclined) 
>> and it should fix up your problem character without changing the 
>> function signature, which might be important if something is 
>depending 
>> on it to return negative answers sometimes.
>> 
>> 
>> 
>> This message has been scanned for viruses by MailController - 
>> www.MailController.altohiway.com
>

From parrt at cs.usfca.edu  Mon Jan 29 18:08:59 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 29 Jan 2007 18:08:59 -0800
Subject: [antlr-interest] Problem finding Template
In-Reply-To: <D43540A44D3F794787378D8B08E8AE53E755B4@staexc01.pharmatechnik.de>
References: <D43540A44D3F794787378D8B08E8AE53E755B4@staexc01.pharmatechnik.de>
Message-ID: <6CCDFFFD-2638-4DE5-8FD4-13273C961F4B@cs.usfca.edu>


On Jan 26, 2007, at 12:35 AM, Dr. Kocher, Hartmut wrote:

> I'll try this solution. How does the label help here?

Hi.

it just changes the template needed by antlr codegen.

> I cannot use the pre-beta as it doesn't generate C# code yet (some  
> templates seem to have changed and StringTemplates complains that  
> the C#-template does not match the interface).

oh, right.  crap.

> But I still don't quite understand: ANTLR tries to load a template  
> which obviously isn't there. So either you have to include that  
> template or you must change the part, which uses the template... Or  
> am I missing something?

I think I indeed missed something and fixed it in 3.0b6, which is not  
ready in C# as you say.

Ter



From ewbank at gmail.com  Tue Jan 30 06:10:01 2007
From: ewbank at gmail.com (Bryan Ewbank)
Date: Tue, 30 Jan 2007 09:10:01 -0500
Subject: [antlr-interest] psst! don't tell Ter :-)
Message-ID: <dd3a065f0701300610w1260c965vd5fbcd2355768214@mail.gmail.com>

http://www.amazon.com/Definitive-Antlr-Reference-Domain-Specific-Languages/dp/0978739256

From ewbank at gmail.com  Tue Jan 30 06:11:22 2007
From: ewbank at gmail.com (Bryan Ewbank)
Date: Tue, 30 Jan 2007 09:11:22 -0500
Subject: [antlr-interest] Printing parser rule names
In-Reply-To: <30a901c74326$625d7a20$8eca010a@mail2world.com>
References: <30a901c74326$625d7a20$8eca010a@mail2world.com>
Message-ID: <dd3a065f0701300611r2626a9bct10f1e8af9f8a8d79@mail.gmail.com>

It's a bit brutal, but consider using the trace mechanism - it reports the
function names as they are entered/exited, and this may contain enough
information to parse out what you want.

On 1/28/07, Jono Juggler <jono at mail2juggler.com> wrote:
>
>  Hello,
>
> I need a way to count the number of function calls, if statements, etc in
> source code. I am using several languages, but I am starting with the
> java.g grammar. If DumpASTVisitor printed the names of the parser rules
> instead of the token type, that would be fine.
>
> I know I can edit the grammar file to add print statements into each rule,
> but I would rather not since I am going to be using more then one language.
>
> I have done the getting started tutorial, and taken a quick look at the
> API, but I have not found a way to print the names of the rules.
>
> Any ideas?
> Thanks.
>
>
> FHA Home Loan Rates, Compare Rates
> Refinance your FHA home loan today. Get 4 quotes from leading lenders!<http://tagline.bidsystem.com/fc/MhtXpK1Q3oPXyfCgKIX5RyVPFbOH2LnBL8ZVU/>
>
> _______________________________________________________________
> Get the Free email that has everyone talking at http://www.mail2world.com
> Unlimited Email Storage ? POP3 ? Calendar ? SMS ? Translator ? Much More!
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070130/3c177cc8/attachment.html 

From rhill03 at eds.com  Tue Jan 30 06:49:37 2007
From: rhill03 at eds.com (Hill, Robert)
Date: Tue, 30 Jan 2007 14:49:37 -0000
Subject: [antlr-interest] psst! don't tell Ter :-)
In-Reply-To: <dd3a065f0701300610w1260c965vd5fbcd2355768214@mail.gmail.com>
Message-ID: <2E909902FD3A03419E3A905908AE3DD402D624FC@UKNSM201.emea.corp.eds.com>

Ter:
	will this be available on Amazon.co.uk? It will probably cost
more than the book to ship it to the UK! :(


Robert Hill
Information Engineer

EDS UKIMEA DWP ACU
Hallamshire Business Park, 100 Napier St, Sheffield. S11 8HD
email:	rhill03 at eds.com
Office:	+44 114 291 1928
Mobile:	+44 7903 185 516

This email contains information which is confidential and may be
privileged. Unless you are the intended addressee (or authorised to
receive for the addressee) you may not use, forward, copy or disclose to
anyone this email or any information contained in this email. If you
have received this email in error, please advise the sender by reply
email immediately and delete this email.

Electronic Data Systems Ltd
Registered Office:, Lansdowne House, Berkeley Square, London  W1J 6ER 
Registered in England no: 53419
VAT number: 432 99 5915


 

>-----Original Message-----
>From: antlr-interest-bounces at antlr.org 
>[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Bryan Ewbank
>Sent: 30 January 2007 14:10
>To: ANTLR Interest
>Subject: [antlr-interest] psst! don't tell Ter :-)
>
>http://www.amazon.com/Definitive-Antlr-Reference-Domain-Specifi
>c-Languages/dp/0978739256
>

From pink at odahoda.de  Tue Jan 30 07:43:39 2007
From: pink at odahoda.de (Benjamin Niemann)
Date: Tue, 30 Jan 2007 16:43:39 +0100
Subject: [antlr-interest] psst! don't tell Ter :-)
References: <dd3a065f0701300610w1260c965vd5fbcd2355768214@mail.gmail.com>
	<2E909902FD3A03419E3A905908AE3DD402D624FC@UKNSM201.emea.corp.eds.com>
Message-ID: <epnp3c$1uf$1@sea.gmane.org>

Hill, Robert wrote:

> Ter:
> will this be available on Amazon.co.uk? It will probably cost
> more than the book to ship it to the UK! :(

Just replace amazon.com with amazon.co.uk in the OPs URL and you'll see ;)

-- 
Benjamin Niemann
Email: pink at odahoda dot de
WWW: http://pink.odahoda.de/


From parrt at cs.usfca.edu  Tue Jan 30 08:11:42 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 30 Jan 2007 08:11:42 -0800
Subject: [antlr-interest] psst! don't tell Ter :-)
In-Reply-To: <dd3a065f0701300610w1260c965vd5fbcd2355768214@mail.gmail.com>
References: <dd3a065f0701300610w1260c965vd5fbcd2355768214@mail.gmail.com>
Message-ID: <F254536E-D5AC-4269-80E8-D0EDFF248F25@cs.usfca.edu>


On Jan 30, 2007, at 6:10 AM, Bryan Ewbank wrote:

> http://www.amazon.com/Definitive-Antlr-Reference-Domain-Specific- 
> Languages/dp/0978739256

It's been up for a while...I'm just waiting for the pragmatic  
programmers folks to release the beta...they've been holding off for  
marketing reasons...other books were just announced.  Anyway, I'm  
done with the content.  Now I edit.  It's out for tech review as  
well.  Hooray!  366 pages.

Ter

From prm225 at gmail.com  Tue Jan 30 08:14:57 2007
From: prm225 at gmail.com (Rajesh Menon)
Date: Tue, 30 Jan 2007 11:14:57 -0500
Subject: [antlr-interest] psst! don't tell Ter :-)
In-Reply-To: <F254536E-D5AC-4269-80E8-D0EDFF248F25@cs.usfca.edu>
References: <dd3a065f0701300610w1260c965vd5fbcd2355768214@mail.gmail.com>
	<F254536E-D5AC-4269-80E8-D0EDFF248F25@cs.usfca.edu>
Message-ID: <45BF6F01.9020107@gmail.com>

Terence Parr wrote:
> 
> On Jan 30, 2007, at 6:10 AM, Bryan Ewbank wrote:
> 
>> http://www.amazon.com/Definitive-Antlr-Reference-Domain-Specific-Languages/dp/0978739256 
>>
> 
> It's been up for a while...I'm just waiting for the pragmatic 
> programmers folks to release the beta...they've been holding off for 
> marketing reasons...other books were just announced.  Anyway, I'm done 
> with the content.  Now I edit.  It's out for tech review as well.  
> Hooray!  366 pages.
> 
> Ter
> 

Will there be incentives like "10 dollars for every error a reader 
points out!" ?  :)

-- 
Rajesh Menon


From parrt at cs.usfca.edu  Tue Jan 30 08:18:07 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 30 Jan 2007 08:18:07 -0800
Subject: [antlr-interest] psst! don't tell Ter :-)
In-Reply-To: <45BF6F01.9020107@gmail.com>
References: <dd3a065f0701300610w1260c965vd5fbcd2355768214@mail.gmail.com>
	<F254536E-D5AC-4269-80E8-D0EDFF248F25@cs.usfca.edu>
	<45BF6F01.9020107@gmail.com>
Message-ID: <8287DFE6-777E-43F7-AE56-0B81A0342107@cs.usfca.edu>


On Jan 30, 2007, at 8:14 AM, Rajesh Menon wrote:

> Terence Parr wrote:
>> On Jan 30, 2007, at 6:10 AM, Bryan Ewbank wrote:
>>> http://www.amazon.com/Definitive-Antlr-Reference-Domain-Specific- 
>>> Languages/dp/0978739256
>> It's been up for a while...I'm just waiting for the pragmatic  
>> programmers folks to release the beta...they've been holding off  
>> for marketing reasons...other books were just announced.  Anyway,  
>> I'm done with the content.  Now I edit.  It's out for tech review  
>> as well.  Hooray!  366 pages.
>> Ter
>
> Will there be incentives like "10 dollars for every error a reader  
> points out!" ?  :)

I'd go broke that way! ;)  How about my eternal praise?  That's worth  
about a dollar on ebay ;)

Ter


From vadimtro at yahoo.com  Tue Jan 30 15:14:56 2007
From: vadimtro at yahoo.com (Vadim Tropashko)
Date: Tue, 30 Jan 2007 15:14:56 -0800 (PST)
Subject: [antlr-interest] Lexer and Parser class packaging
Message-ID: <236822.88749.qm@web36811.mail.mud.yahoo.com>

As a general rule default packaging in java doest't
work (or rather gives you such a headache that you'll
never use default pakages). Therefore it is a good
idea to wrap grammar file into a package. 

grammar MyGrammar;

@header {
    package company.dir;
}

However, after I run antlr Tool, it generates two
classes Lexer and Parser, one packaged properly, and
the other one is not! Is it a bug? (I'm on v.3)




 
____________________________________________________________________________________
Expecting? Get great news right away with email Auto-Check. 
Try the Yahoo! Mail Beta.
http://advision.webevents.yahoo.com/mailbeta/newmail_tools.html 

From jimi at intersystems.com  Tue Jan 30 15:26:13 2007
From: jimi at intersystems.com (Jim Idle)
Date: Tue, 30 Jan 2007 18:26:13 -0500
Subject: [antlr-interest] Lexer and Parser class packaging
In-Reply-To: <236822.88749.qm@web36811.mail.mud.yahoo.com>
References: <236822.88749.qm@web36811.mail.mud.yahoo.com>
Message-ID: <20070130232613.EBC997A2@mail.intersystems.com>

You need to use @header::lexer and @header::parser. Otherwise the header element will only appear in one of them (can?t remember which it is now by default ;-).

Jim

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Vadim Tropashko
Sent: Tuesday, January 30, 2007 3:15 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Lexer and Parser class packaging

As a general rule default packaging in java doest't
work (or rather gives you such a headache that you'll
never use default pakages). Therefore it is a good
idea to wrap grammar file into a package. 

grammar MyGrammar;

@header {
    package company.dir;
}

However, after I run antlr Tool, it generates two
classes Lexer and Parser, one packaged properly, and
the other one is not! Is it a bug? (I'm on v.3)




 
____________________________________________________________________________________
Expecting? Get great news right away with email Auto-Check. 
Try the Yahoo! Mail Beta.
http://advision.webevents.yahoo.com/mailbeta/newmail_tools.html 

-- 
No virus found in this incoming message.
Checked by AVG Free Edition.
Version: 7.5.432 / Virus Database: 268.17.14/658 - Release Date: 1/29/2007 2:49 PM
 

-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.5.432 / Virus Database: 268.17.14/658 - Release Date: 1/29/2007 2:49 PM
 

From vadimtro at yahoo.com  Tue Jan 30 15:33:42 2007
From: vadimtro at yahoo.com (Vadim Tropashko)
Date: Tue, 30 Jan 2007 15:33:42 -0800 (PST)
Subject: [antlr-interest] Lexer and Parser class packaging
In-Reply-To: <20070130232613.EBC997A2@mail.intersystems.com>
Message-ID: <331887.44731.qm@web36813.mail.mud.yahoo.com>

--- Jim Idle <jimi at intersystems.com> wrote:

> You need to use @header::lexer and @header::parser.

@parser::header {} 

not the @header::lexer 

:-)

> Otherwise the header element will only appear in one
> of them (can?t remember which it is now by default
> ;-).
> 
> Jim
> 
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf
> Of Vadim Tropashko
> Sent: Tuesday, January 30, 2007 3:15 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Lexer and Parser class
> packaging
> 
> As a general rule default packaging in java doest't
> work (or rather gives you such a headache that
> you'll
> never use default pakages). Therefore it is a good
> idea to wrap grammar file into a package. 
> 
> grammar MyGrammar;
> 
> @header {
>     package company.dir;
> }
> 
> However, after I run antlr Tool, it generates two
> classes Lexer and Parser, one packaged properly, and
> the other one is not! Is it a bug? (I'm on v.3)
> 
> 
> 
> 
>  
>
____________________________________________________________________________________
> Expecting? Get great news right away with email
> Auto-Check. 
> Try the Yahoo! Mail Beta.
>
http://advision.webevents.yahoo.com/mailbeta/newmail_tools.html
> 
> 
> -- 
> No virus found in this incoming message.
> Checked by AVG Free Edition.
> Version: 7.5.432 / Virus Database: 268.17.14/658 -
> Release Date: 1/29/2007 2:49 PM
>  
> 
> -- 
> No virus found in this outgoing message.
> Checked by AVG Free Edition.
> Version: 7.5.432 / Virus Database: 268.17.14/658 -
> Release Date: 1/29/2007 2:49 PM
>  
> 



 
____________________________________________________________________________________
Never Miss an Email
Stay connected with Yahoo! Mail on your mobile.  Get started!
http://mobile.yahoo.com/services?promote=mail

From rob.hill at blueyonder.co.uk  Tue Jan 30 15:44:16 2007
From: rob.hill at blueyonder.co.uk (Rob Hill)
Date: Tue, 30 Jan 2007 23:44:16 -0000
Subject: [antlr-interest] psst! don't tell Ter :-)
In-Reply-To: <F254536E-D5AC-4269-80E8-D0EDFF248F25@cs.usfca.edu>
References: <dd3a065f0701300610w1260c965vd5fbcd2355768214@mail.gmail.com>
	<F254536E-D5AC-4269-80E8-D0EDFF248F25@cs.usfca.edu>
Message-ID: <000b01c744c8$8d9f6510$a8de2f30$@hill@blueyonder.co.uk>

Funny, replacing the amazon.com with .co.uk works, but searching for either
Ter's name or antlr brings back 0 results?!

Anyway... i've preordered my copy! :) can't wait!

I might actually be able to use the bloody thing lol! ;)

/2ob

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Terence Parr
> Sent: 30 January 2007 16:12
> To: ANTLR Interest
> Subject: Re: [antlr-interest] psst! don't tell Ter :-)
> 
> 
> On Jan 30, 2007, at 6:10 AM, Bryan Ewbank wrote:
> 
> > http://www.amazon.com/Definitive-Antlr-Reference-Domain-Specific-
> > Languages/dp/0978739256
> 
> It's been up for a while...I'm just waiting for the pragmatic
> programmers folks to release the beta...they've been holding off for
> marketing reasons...other books were just announced.  Anyway, I'm
> done with the content.  Now I edit.  It's out for tech review as
> well.  Hooray!  366 pages.
> 
> Ter



From rschulz at sonic.net  Tue Jan 30 15:46:09 2007
From: rschulz at sonic.net (Randall R Schulz)
Date: Tue, 30 Jan 2007 15:46:09 -0800
Subject: [antlr-interest] Lexer and Parser class packaging
In-Reply-To: <236822.88749.qm@web36811.mail.mud.yahoo.com>
References: <236822.88749.qm@web36811.mail.mud.yahoo.com>
Message-ID: <200701301546.09847.rschulz@sonic.net>

Vadim,

On Tuesday 30 January 2007 15:14, Vadim Tropashko wrote:
> As a general rule default packaging in java doest't
> work (or rather gives you such a headache that you'll
> never use default pakages). Therefore it is a good
> idea to wrap grammar file into a package.

It (the default package) works as specified, but the name "default" is 
poorly chosen. It's really anonymous, and as such, its constituent 
classes cannot be referenced in any import statement. Its classes can 
only be seen from other classes in the default (really anonymous) 
package.

But you're right, it's a headache and both the lexer and the parser need 
to be put in a named package to be useful anywhere other than in 
classes in the default (anonymous) package.


Randall Schulz

From parrt at cs.usfca.edu  Tue Jan 30 15:56:57 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 30 Jan 2007 15:56:57 -0800
Subject: [antlr-interest] psst! don't tell Ter :-)
In-Reply-To: <000b01c744c8$8d9f6510$a8de2f30$@hill@blueyonder.co.uk>
References: <dd3a065f0701300610w1260c965vd5fbcd2355768214@mail.gmail.com>
	<F254536E-D5AC-4269-80E8-D0EDFF248F25@cs.usfca.edu>
	<000b01c744c8$8d9f6510$a8de2f30$@hill@blueyonder.co.uk>
Message-ID: <C7B2FB81-B122-4F1E-95A5-C64AA81BDD3C@cs.usfca.edu>


On Jan 30, 2007, at 3:44 PM, Rob Hill wrote:

> Funny, replacing the amazon.com with .co.uk works, but searching  
> for either
> Ter's name or antlr brings back 0 results?!

I knew the British hated me!  It's all that Austin Powers mimicry I  
do! ;)

> Anyway... i've preordered my copy! :) can't wait!

> I might actually be able to use the bloody thing lol! ;)

:)

Well, a beta SHOULD be out soon...in PDF.

Ter


From mark.mandel at gmail.com  Tue Jan 30 16:23:43 2007
From: mark.mandel at gmail.com (Mark Mandel)
Date: Wed, 31 Jan 2007 11:23:43 +1100
Subject: [antlr-interest] Using ANTLRWorks with a Case Insensitive Char
	Stream?
Message-ID: <4153ee230701301623h3b567435ta0e8f9b98067569@mail.gmail.com>

Hi,

I've got a grammar that uses a custom case insensitive character stream.

Is there any way I can use this when developing with ANTLRWorks?

(I love AntlrWorks btw, but I think this issue may be causing it to
hand when trying to interpret some sample text at the moment)

Mark

-- 
E: mark.mandel at gmail.com
W: www.compoundtheory.com

From parrt at cs.usfca.edu  Tue Jan 30 16:50:54 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 30 Jan 2007 16:50:54 -0800
Subject: [antlr-interest] Using ANTLRWorks with a Case Insensitive Char
	Stream?
In-Reply-To: <4153ee230701301623h3b567435ta0e8f9b98067569@mail.gmail.com>
References: <4153ee230701301623h3b567435ta0e8f9b98067569@mail.gmail.com>
Message-ID: <E9CCDC8C-D725-4F11-8A83-CD483EE89C99@cs.usfca.edu>


On Jan 30, 2007, at 4:23 PM, Mark Mandel wrote:

> Hi,
>
> I've got a grammar that uses a custom case insensitive character  
> stream.

Can you implement CharStream?  If not, use ANTLRInputStream or  
something.

> Is there any way I can use this when developing with ANTLRWorks?

Well, I usually don't ask ANTLRWorks to build my main() once I start  
adding custom code.

Ter

From mark.mandel at gmail.com  Tue Jan 30 23:24:15 2007
From: mark.mandel at gmail.com (Mark Mandel)
Date: Wed, 31 Jan 2007 18:24:15 +1100
Subject: [antlr-interest] v3: failed predicate?
Message-ID: <4153ee230701302324q639a3370wf7537087017aa823@mail.gmail.com>

All,

I'm running the latest version of ANTLR v3

I get this error when I run the following input against my grammar:
'from onetomany.Basic join onetomany.Child'

rule ALIAS failed predicate: { currentMode == ALIAS_MODE }?

and I don't know what it means.

I believe these are the relevant portions of my grammar:

I've attached the full grammar in case this doesn't explain enough.

I'm totally stumped.. so any help would be appreciated.

fromStatement
	:
	FROM^ classClause (joinClause classClause ON joinCondition)*
	;
	
classClause
	:
	CLASS_IDENTIFIER^ (AS ALIAS)?
	;

joinClause
	:
	((LEFT | RIGHT)? OUTER)? JOIN^
	;
	
joinCondition
	:
	(
	PROPERTY_IDENTIFIER (BOOLEAN_LOGIC PROPERTY_IDENTIFIER)*
	|
	conditionStatement
	)
	;

FROM	:
	{ currentMode == STRING_MODE }?=>
	'from'
	{ setMode(CLASS_IDENTIFIER_MODE); }
	;
AS	: //special case, not worrying about past mode
	{ currentMode == STRING_MODE }?=>
	'as'
	{ currentMode = ALIAS_MODE; }
		;		
ALIAS	:
	{ currentMode == ALIAS_MODE }?=>
	LETTER(LETTER|DIGIT|'_')*
	{ currentMode = STRING_MODE; }
	;
JOIN	:
	{ currentMode == STRING_MODE }?=>
	'join'
	;
ON	:
	{ currentMode == STRING_MODE }?=>
	'join'
	{ setMode(PROPERTY_IDENTIFIER_MODE); }
	;
CLASS_IDENTIFIER
	:
	{ currentMode == CLASS_IDENTIFIER_MODE }?=>
	IDENTIFIER
	{ setMode(STRING_MODE);  }
	;		
PROPERTY_IDENTIFIER
	:
	{ currentMode == PROPERTY_IDENTIFIER_MODE }?=>
	IDENTIFIER
	{ setMode(STRING_MODE);  }
	;
fragment IDENTIFIER
	:
	LETTER(LETTER|DIGIT|'.'|'_')+
	;
TIA

Mark


-- 
E: mark.mandel at gmail.com
W: www.compoundtheory.com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Tql.g
Type: application/octet-stream
Size: 5985 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20070131/818f1c97/attachment-0001.obj 

From alexander at gaengel.de  Wed Jan 31 02:21:29 2007
From: alexander at gaengel.de (Alexander =?iso-8859-1?q?G=E4ngel?=)
Date: Wed, 31 Jan 2007 11:21:29 +0100 (MET)
Subject: [antlr-interest] AntlrDebugger cannot connect
Message-ID: <200701311315.44634.alexander@gaengel.de>

I just tried to use Antlr Works on an University Linux PC (Suse 9.3)  but the 
Debugger wount work.

just says: 
Cannot launch the debugger.
Time-out waiting to connect to the remote parser.

I have just an unser account on this maschine

Installed is Java 1.4.2_08 and 1.5.0_04

can sombody give me a hint what to to?

on my Laptop it works without a Problem with linux

Alexander

From rhill03 at eds.com  Wed Jan 31 02:27:15 2007
From: rhill03 at eds.com (Hill, Robert)
Date: Wed, 31 Jan 2007 10:27:15 -0000
Subject: [antlr-interest] psst! don't tell Ter :-)
In-Reply-To: <8287DFE6-777E-43F7-AE56-0B81A0342107@cs.usfca.edu>
Message-ID: <2E909902FD3A03419E3A905908AE3DD402D62681@UKNSM201.emea.corp.eds.com>

So either

A) you're skint or
B) you're saying there's lots of errors?

Kind of hope it's A) 

;)


>> Will there be incentives like "10 dollars for every error a reader 
>> points out!" ?  :)
>
>I'd go broke that way! ;)  How about my eternal praise?  
>That's worth about a dollar on ebay ;)
>
>Ter

From michael_ramirez44 at yahoo.com  Wed Jan 31 09:45:40 2007
From: michael_ramirez44 at yahoo.com (Michael Ramirez)
Date: Wed, 31 Jan 2007 09:45:40 -0800 (PST)
Subject: [antlr-interest] ANTLR v3 Book
Message-ID: <481898.71201.qm@web52501.mail.yahoo.com>

Would it be possible to get a preview of the TOC for the new book?

Michael Ramirez


 
____________________________________________________________________________________
Never Miss an Email
Stay connected with Yahoo! Mail on your mobile.  Get started!
http://mobile.yahoo.com/services?promote=mail

From hugo.a.garcia at gmail.com  Wed Jan 31 09:52:30 2007
From: hugo.a.garcia at gmail.com (Hugo Garcia)
Date: Wed, 31 Jan 2007 12:52:30 -0500
Subject: [antlr-interest] ANTLR v3 Book
In-Reply-To: <481898.71201.qm@web52501.mail.yahoo.com>
References: <481898.71201.qm@web52501.mail.yahoo.com>
Message-ID: <f9637ada0701310952j3df50fbajf05ee1471be4675d@mail.gmail.com>

how about a full preview, errata and all... I volunteer to correct or
at least work through some of the examples.

-H

On 1/31/07, Michael Ramirez <michael_ramirez44 at yahoo.com> wrote:
> Would it be possible to get a preview of the TOC for the new book?
>
> Michael Ramirez
>
>
>
> ____________________________________________________________________________________
> Never Miss an Email
> Stay connected with Yahoo! Mail on your mobile.  Get started!
> http://mobile.yahoo.com/services?promote=mail
>

From vadimtro at yahoo.com  Wed Jan 31 10:40:30 2007
From: vadimtro at yahoo.com (Vadim Tropashko)
Date: Wed, 31 Jan 2007 10:40:30 -0800 (PST)
Subject: [antlr-interest] java.lang.ClassNotFoundException:
	com.sun.tools.javac.Main when debugging
Message-ID: <300785.90477.qm@web36811.mail.mud.yahoo.com>

When starting debugger I'm getting 

java.lang.ClassNotFoundException:
com.sun.tools.javac.Main

I added tools.jar to classpath

D:\>java -cp "D:\Program
Files\Java\jdk1.5.0_06\lib\tools.jar" -jar
"...\antlrworks-1.0b8.jar"

but I'm still getting the same error.



 
____________________________________________________________________________________
Sucker-punch spam with award-winning protection. 
Try the free Yahoo! Mail Beta.
http://advision.webevents.yahoo.com/mailbeta/features_spam.html

From stuart.dootson at gmail.com  Wed Jan 31 11:15:24 2007
From: stuart.dootson at gmail.com (Stuart Dootson)
Date: Wed, 31 Jan 2007 19:15:24 +0000
Subject: [antlr-interest] psst! don't tell Ter :-)
In-Reply-To: <-2592678307190747279@unknownmsgid>
References: <dd3a065f0701300610w1260c965vd5fbcd2355768214@mail.gmail.com>
	<F254536E-D5AC-4269-80E8-D0EDFF248F25@cs.usfca.edu>
	<-2592678307190747279@unknownmsgid>
Message-ID: <8b56cad40701311115w353a8c59hb4f64d988d8aaa6c@mail.gmail.com>

On 1/30/07, Rob Hill <rob.hill at blueyonder.co.uk> wrote:
> Funny, replacing the amazon.com with .co.uk works, but searching for either
> Ter's name or antlr brings back 0 results?!
>
> Anyway... i've preordered my copy! :) can't wait!
>
> I might actually be able to use the bloody thing lol! ;)
>
> /2ob

Don't know if it's been added today, Rob, but try
http://www.amazon.co.uk/Complete-ANTLR-Reference-Guide-Terence/dp/0978739256/sr=1-2/qid=1170270656/ref=sr_1_2/203-0680622-3019132?ie=UTF8&s=books

Probably still cheaper from Amazon.com, though, as it's ?24 on .co.uk
- currently $47!!!!!

Stuart Dootson

From vadimtro at yahoo.com  Wed Jan 31 11:42:52 2007
From: vadimtro at yahoo.com (Vadim Tropashko)
Date: Wed, 31 Jan 2007 11:42:52 -0800 (PST)
Subject: [antlr-interest] java.lang.ClassNotFoundException:
	com.sun.tools.javac.Main when debugging
Message-ID: <58685.56762.qm@web36813.mail.mud.yahoo.com>

My previous message was not clear if this was a
statement or help question. It was the latter of
course.

Erased all JRE/JDK from my system. Installed brand new
and shiny JDK 1.6. Still can't debug... 


--- Vadim Tropashko <vadimtro at yahoo.com> wrote:

> When starting debugger I'm getting 
> 
> java.lang.ClassNotFoundException:
> com.sun.tools.javac.Main
> 
> I added tools.jar to classpath
> 
> D:\>java -cp "D:\Program
> Files\Java\jdk1.5.0_06\lib\tools.jar" -jar
> "...\antlrworks-1.0b8.jar"
> 
> but I'm still getting the same error.
> 
> 
> 
>  
>
____________________________________________________________________________________
> Sucker-punch spam with award-winning protection. 
> Try the free Yahoo! Mail Beta.
>
http://advision.webevents.yahoo.com/mailbeta/features_spam.html
> 



 
____________________________________________________________________________________
8:00? 8:25? 8:40? Find a flick in no time 
with the Yahoo! Search movie showtime shortcut.
http://tools.search.yahoo.com/shortcuts/#news

From parrt at cs.usfca.edu  Wed Jan 31 11:46:35 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 31 Jan 2007 11:46:35 -0800
Subject: [antlr-interest] java.lang.ClassNotFoundException:
	com.sun.tools.javac.Main when debugging
In-Reply-To: <58685.56762.qm@web36813.mail.mud.yahoo.com>
References: <58685.56762.qm@web36813.mail.mud.yahoo.com>
Message-ID: <0CE6E717-9DF1-485E-8606-340A3235972F@cs.usfca.edu>

Hmm...interesting...not sure where the javac is.  Look at the other  
jars...probably some sun package.
Ter
On Jan 31, 2007, at 11:42 AM, Vadim Tropashko wrote:

> My previous message was not clear if this was a
> statement or help question. It was the latter of
> course.
>
> Erased all JRE/JDK from my system. Installed brand new
> and shiny JDK 1.6. Still can't debug...
>
>
> --- Vadim Tropashko <vadimtro at yahoo.com> wrote:
>
>> When starting debugger I'm getting
>>
>> java.lang.ClassNotFoundException:
>> com.sun.tools.javac.Main
>>
>> I added tools.jar to classpath
>>
>> D:\>java -cp "D:\Program
>> Files\Java\jdk1.5.0_06\lib\tools.jar" -jar
>> "...\antlrworks-1.0b8.jar"
>>
>> but I'm still getting the same error.
>>
>>
>>
>>
>>
> ______________________________________________________________________ 
> ______________
>> Sucker-punch spam with award-winning protection.
>> Try the free Yahoo! Mail Beta.
>>
> http://advision.webevents.yahoo.com/mailbeta/features_spam.html
>>
>
>
>
>
> ______________________________________________________________________ 
> ______________
> 8:00? 8:25? 8:40? Find a flick in no time
> with the Yahoo! Search movie showtime shortcut.
> http://tools.search.yahoo.com/shortcuts/#news


From vadimtro at yahoo.com  Wed Jan 31 11:58:21 2007
From: vadimtro at yahoo.com (Vadim Tropashko)
Date: Wed, 31 Jan 2007 11:58:21 -0800 (PST)
Subject: [antlr-interest] java.lang.ClassNotFoundException:
	com.sun.tools.javac.Main when debugging
Message-ID: <671382.17752.qm@web36811.mail.mud.yahoo.com>

After playing with antlrworks preferences compiler
options section it works.


 
____________________________________________________________________________________
8:00? 8:25? 8:40? Find a flick in no time 
with the Yahoo! Search movie showtime shortcut.
http://tools.search.yahoo.com/shortcuts/#news

From vadimtro at yahoo.com  Wed Jan 31 13:40:51 2007
From: vadimtro at yahoo.com (Vadim Tropashko)
Date: Wed, 31 Jan 2007 13:40:51 -0800 (PST)
Subject: [antlr-interest] NoViableAltException on a very simple grammar
	fragment?
Message-ID: <20070131214051.85493.qmail@web36807.mail.mud.yahoo.com>

Sorry for the today's noise, no more setup issues --
grammar question.

I have the following grammar fragment:

block_stmt:
         d_o_tDECLARE__decl_partd_o_t
          'BEGIN'
             seq_of_stmts
          d_o_tEXC__ehd_o_td_o_tehd_o_td_o_td_o_t
             'END' d_o_tsim_nd_o_t ';'
;

d_o_tDECLARE__decl_partd_o_t:  
|
  'DECLARE'
  decl_part  
;

which I'm expecting to have no difficulties to
recognize

begin
NULL;
end;

And the debugging trace indicates that there is some
problem:

0	Commence				
1	Enter rule block_stmt				
2	Location (1409,1)				
3	Enter alt 1				
4	Location (1410,3)				
5	Enter rule ph1psh_				
6	Location (436,1)				
7	Enter alt 1				
8	Location (438,1)				
9	Exit rule ph1psh_				
10	Location (1411,10)				
11	Enter rule d_o_tDECLARE__decl_partd_o_t				
12	Location (1418,1)				
13	Enter decision 114		114		
14	LT 1 (begin)		114		
15	LT 1 (begin)		114		
16	LT 1 (begin)		114		
17	Recognition exception
NoViableAltException(0!=[null])	



 
____________________________________________________________________________________
Have a burning question?  
Go to www.Answers.yahoo.com and get answers from real people who know.

From parrt at cs.usfca.edu  Wed Jan 31 13:53:18 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 31 Jan 2007 13:53:18 -0800
Subject: [antlr-interest] ANTLR v3 Book
In-Reply-To: <481898.71201.qm@web52501.mail.yahoo.com>
References: <481898.71201.qm@web52501.mail.yahoo.com>
Message-ID: <4C5DCDFE-75B7-4198-8A92-8B5E3FD1DEB5@cs.usfca.edu>

On Jan 31, 2007, at 9:45 AM, Michael Ramirez wrote:

> Would it be possible to get a preview of the TOC for the new book?

Sure.

Ter

-------------- next part --------------
A non-text attachment was scrubbed...
Name: book.pdf.pdf
Type: application/pdf
Size: 70254 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20070131/764f0cdb/attachment-0001.pdf 
-------------- next part --------------


From mark.mandel at gmail.com  Wed Jan 31 13:59:20 2007
From: mark.mandel at gmail.com (Mark Mandel)
Date: Thu, 1 Feb 2007 08:59:20 +1100
Subject: [antlr-interest] v3: failed predicate?
In-Reply-To: <4153ee230701302324q639a3370wf7537087017aa823@mail.gmail.com>
References: <4153ee230701302324q639a3370wf7537087017aa823@mail.gmail.com>
Message-ID: <4153ee230701311359u59c3009av7b5855e882162828@mail.gmail.com>

Anyone? Even a pointer in the right direction?

I can't seem to even find out exactly what the error means?

I'm guessing it means that the parser expects there to a token of Type
ALIAS at this point, but the gateway condition is false? would that be
correct?

Any help would be greatly appreciated.

Mark

On 1/31/07, Mark Mandel <mark.mandel at gmail.com> wrote:
> All,
>
> I'm running the latest version of ANTLR v3
>
> I get this error when I run the following input against my grammar:
> 'from onetomany.Basic join onetomany.Child'
>
> rule ALIAS failed predicate: { currentMode == ALIAS_MODE }?
>
> and I don't know what it means.
>
> I believe these are the relevant portions of my grammar:
>
> I've attached the full grammar in case this doesn't explain enough.
>
> I'm totally stumped.. so any help would be appreciated.
>
> fromStatement
>         :
>         FROM^ classClause (joinClause classClause ON joinCondition)*
>         ;
>
> classClause
>         :
>         CLASS_IDENTIFIER^ (AS ALIAS)?
>         ;
>
> joinClause
>         :
>         ((LEFT | RIGHT)? OUTER)? JOIN^
>         ;
>
> joinCondition
>         :
>         (
>         PROPERTY_IDENTIFIER (BOOLEAN_LOGIC PROPERTY_IDENTIFIER)*
>         |
>         conditionStatement
>         )
>         ;
>
> FROM    :
>         { currentMode == STRING_MODE }?=>
>         'from'
>         { setMode(CLASS_IDENTIFIER_MODE); }
>         ;
> AS      : //special case, not worrying about past mode
>         { currentMode == STRING_MODE }?=>
>         'as'
>         { currentMode = ALIAS_MODE; }
>                 ;
> ALIAS   :
>         { currentMode == ALIAS_MODE }?=>
>         LETTER(LETTER|DIGIT|'_')*
>         { currentMode = STRING_MODE; }
>         ;
> JOIN    :
>         { currentMode == STRING_MODE }?=>
>         'join'
>         ;
> ON      :
>         { currentMode == STRING_MODE }?=>
>         'join'
>         { setMode(PROPERTY_IDENTIFIER_MODE); }
>         ;
> CLASS_IDENTIFIER
>         :
>         { currentMode == CLASS_IDENTIFIER_MODE }?=>
>         IDENTIFIER
>         { setMode(STRING_MODE);  }
>         ;
> PROPERTY_IDENTIFIER
>         :
>         { currentMode == PROPERTY_IDENTIFIER_MODE }?=>
>         IDENTIFIER
>         { setMode(STRING_MODE);  }
>         ;
> fragment IDENTIFIER
>         :
>         LETTER(LETTER|DIGIT|'.'|'_')+
>         ;
> TIA
>
> Mark
>
>
> --
> E: mark.mandel at gmail.com
> W: www.compoundtheory.com
>
>
>


-- 
E: mark.mandel at gmail.com
W: www.compoundtheory.com

From mark.mandel at gmail.com  Wed Jan 31 14:33:04 2007
From: mark.mandel at gmail.com (Mark Mandel)
Date: Thu, 1 Feb 2007 09:33:04 +1100
Subject: [antlr-interest] antlr irc channel anywhere?
Message-ID: <4153ee230701311433p4e0f9365k7cb096060bf98701@mail.gmail.com>

Just a random thought -

There isn't a ANTLR irc channel anywhere, is there?

Mark

-- 
E: mark.mandel at gmail.com
W: www.compoundtheory.com

From rob.hill at blueyonder.co.uk  Wed Jan 31 14:37:35 2007
From: rob.hill at blueyonder.co.uk (Rob Hill)
Date: Wed, 31 Jan 2007 22:37:35 -0000
Subject: [antlr-interest] ANTLR v3 Book
In-Reply-To: <4C5DCDFE-75B7-4198-8A92-8B5E3FD1DEB5@cs.usfca.edu>
References: <481898.71201.qm@web52501.mail.yahoo.com>
	<4C5DCDFE-75B7-4198-8A92-8B5E3FD1DEB5@cs.usfca.edu>
Message-ID: <003301c74588$6b8beeb0$42a3cc10$@hill@blueyonder.co.uk>

Oo oo!
I think I've just wet myself.

LOL

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Terence Parr
> Sent: 31 January 2007 21:53
> To: ANTLR Interest
> Cc: susannah at pragprog.com
> Subject: Re: [antlr-interest] ANTLR v3 Book
> 
> On Jan 31, 2007, at 9:45 AM, Michael Ramirez wrote:
> 
> > Would it be possible to get a preview of the TOC for the new book?
> 
> Sure.
> 
> Ter




From parrt at cs.usfca.edu  Wed Jan 31 19:12:24 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 31 Jan 2007 19:12:24 -0800
Subject: [antlr-interest] ANTLR 3.0b6 released!
Message-ID: <A1B65B68-F2B1-4E70-B10E-6AD78313BA2E@cs.usfca.edu>

Lots of bug fixes etc... Has some backward incompatibilities. This  
version corresponds to the beta PDF ANTLR v3 book.

Updated the 3.0 examples to ensure they work.  Working on updating  
mantra.org example.

Ter

From mbraid at sqlworks.com  Wed Jan 31 19:40:00 2007
From: mbraid at sqlworks.com (Martin Braid)
Date: Wed, 31 Jan 2007 22:40:00 -0500
Subject: [antlr-interest] ASTNULLType is not serializable
In-Reply-To: <mailman.0.1167595202.19460.antlr-interest@antlr.org>
Message-ID: <001701c745b2$ac4f93a0$6601a8c0@PCMartin>

I am unable to serialize an AST tree for storing in a blob column in a
database because ASTNULLType is not serializable. Any suggestions?
Thanks,
Martin



From mark.mandel at gmail.com  Wed Jan 31 19:48:54 2007
From: mark.mandel at gmail.com (Mark Mandel)
Date: Thu, 1 Feb 2007 14:48:54 +1100
Subject: [antlr-interest] v3: failed predicate?
In-Reply-To: <4153ee230701311359u59c3009av7b5855e882162828@mail.gmail.com>
References: <4153ee230701302324q639a3370wf7537087017aa823@mail.gmail.com>
	<4153ee230701311359u59c3009av7b5855e882162828@mail.gmail.com>
Message-ID: <4153ee230701311948j36991033i243b2ad648c5f850@mail.gmail.com>

You can ignore my whinging.. i worked it out... there was nowhere for
my grammar to go, as I hadn't set the correct gate for it go down.

My bad.

Mark

On 2/1/07, Mark Mandel <mark.mandel at gmail.com> wrote:
> Anyone? Even a pointer in the right direction?
>
> I can't seem to even find out exactly what the error means?
>
> I'm guessing it means that the parser expects there to a token of Type
> ALIAS at this point, but the gateway condition is false? would that be
> correct?
>
> Any help would be greatly appreciated.
>
> Mark
>
> On 1/31/07, Mark Mandel <mark.mandel at gmail.com> wrote:
> > All,
> >
> > I'm running the latest version of ANTLR v3
> >
> > I get this error when I run the following input against my grammar:
> > 'from onetomany.Basic join onetomany.Child'
> >
> > rule ALIAS failed predicate: { currentMode == ALIAS_MODE }?
> >
> > and I don't know what it means.
> >
> > I believe these are the relevant portions of my grammar:
> >
> > I've attached the full grammar in case this doesn't explain enough.
> >
> > I'm totally stumped.. so any help would be appreciated.
> >
> > fromStatement
> >         :
> >         FROM^ classClause (joinClause classClause ON joinCondition)*
> >         ;
> >
> > classClause
> >         :
> >         CLASS_IDENTIFIER^ (AS ALIAS)?
> >         ;
> >
> > joinClause
> >         :
> >         ((LEFT | RIGHT)? OUTER)? JOIN^
> >         ;
> >
> > joinCondition
> >         :
> >         (
> >         PROPERTY_IDENTIFIER (BOOLEAN_LOGIC PROPERTY_IDENTIFIER)*
> >         |
> >         conditionStatement
> >         )
> >         ;
> >
> > FROM    :
> >         { currentMode == STRING_MODE }?=>
> >         'from'
> >         { setMode(CLASS_IDENTIFIER_MODE); }
> >         ;
> > AS      : //special case, not worrying about past mode
> >         { currentMode == STRING_MODE }?=>
> >         'as'
> >         { currentMode = ALIAS_MODE; }
> >                 ;
> > ALIAS   :
> >         { currentMode == ALIAS_MODE }?=>
> >         LETTER(LETTER|DIGIT|'_')*
> >         { currentMode = STRING_MODE; }
> >         ;
> > JOIN    :
> >         { currentMode == STRING_MODE }?=>
> >         'join'
> >         ;
> > ON      :
> >         { currentMode == STRING_MODE }?=>
> >         'join'
> >         { setMode(PROPERTY_IDENTIFIER_MODE); }
> >         ;
> > CLASS_IDENTIFIER
> >         :
> >         { currentMode == CLASS_IDENTIFIER_MODE }?=>
> >         IDENTIFIER
> >         { setMode(STRING_MODE);  }
> >         ;
> > PROPERTY_IDENTIFIER
> >         :
> >         { currentMode == PROPERTY_IDENTIFIER_MODE }?=>
> >         IDENTIFIER
> >         { setMode(STRING_MODE);  }
> >         ;
> > fragment IDENTIFIER
> >         :
> >         LETTER(LETTER|DIGIT|'.'|'_')+
> >         ;
> > TIA
> >
> > Mark
> >
> >
> > --
> > E: mark.mandel at gmail.com
> > W: www.compoundtheory.com
> >
> >
> >
>
>
> --
> E: mark.mandel at gmail.com
> W: www.compoundtheory.com
>


-- 
E: mark.mandel at gmail.com
W: www.compoundtheory.com

From parrt at cs.usfca.edu  Wed Jan 31 19:55:01 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 31 Jan 2007 19:55:01 -0800
Subject: [antlr-interest] v3: failed predicate?
In-Reply-To: <4153ee230701311948j36991033i243b2ad648c5f850@mail.gmail.com>
References: <4153ee230701302324q639a3370wf7537087017aa823@mail.gmail.com>
	<4153ee230701311359u59c3009av7b5855e882162828@mail.gmail.com>
	<4153ee230701311948j36991033i243b2ad648c5f850@mail.gmail.com>
Message-ID: <9B3E5C3E-ED59-4E1C-8FB5-32292C7E0391@cs.usfca.edu>

cool
Ter
On Jan 31, 2007, at 7:48 PM, Mark Mandel wrote:

> You can ignore my whinging.. i worked it out... there was nowhere for
> my grammar to go, as I hadn't set the correct gate for it go down.
>
> My bad.
>
> Mark
>
> On 2/1/07, Mark Mandel <mark.mandel at gmail.com> wrote:
>> Anyone? Even a pointer in the right direction?
>>
>> I can't seem to even find out exactly what the error means?
>>
>> I'm guessing it means that the parser expects there to a token of  
>> Type
>> ALIAS at this point, but the gateway condition is false? would  
>> that be
>> correct?
>>
>> Any help would be greatly appreciated.
>>
>> Mark
>>
>> On 1/31/07, Mark Mandel <mark.mandel at gmail.com> wrote:
>> > All,
>> >
>> > I'm running the latest version of ANTLR v3
>> >
>> > I get this error when I run the following input against my grammar:
>> > 'from onetomany.Basic join onetomany.Child'
>> >
>> > rule ALIAS failed predicate: { currentMode == ALIAS_MODE }?
>> >
>> > and I don't know what it means.
>> >
>> > I believe these are the relevant portions of my grammar:
>> >
>> > I've attached the full grammar in case this doesn't explain enough.
>> >
>> > I'm totally stumped.. so any help would be appreciated.
>> >
>> > fromStatement
>> >         :
>> >         FROM^ classClause (joinClause classClause ON  
>> joinCondition)*
>> >         ;
>> >
>> > classClause
>> >         :
>> >         CLASS_IDENTIFIER^ (AS ALIAS)?
>> >         ;
>> >
>> > joinClause
>> >         :
>> >         ((LEFT | RIGHT)? OUTER)? JOIN^
>> >         ;
>> >
>> > joinCondition
>> >         :
>> >         (
>> >         PROPERTY_IDENTIFIER (BOOLEAN_LOGIC PROPERTY_IDENTIFIER)*
>> >         |
>> >         conditionStatement
>> >         )
>> >         ;
>> >
>> > FROM    :
>> >         { currentMode == STRING_MODE }?=>
>> >         'from'
>> >         { setMode(CLASS_IDENTIFIER_MODE); }
>> >         ;
>> > AS      : //special case, not worrying about past mode
>> >         { currentMode == STRING_MODE }?=>
>> >         'as'
>> >         { currentMode = ALIAS_MODE; }
>> >                 ;
>> > ALIAS   :
>> >         { currentMode == ALIAS_MODE }?=>
>> >         LETTER(LETTER|DIGIT|'_')*
>> >         { currentMode = STRING_MODE; }
>> >         ;
>> > JOIN    :
>> >         { currentMode == STRING_MODE }?=>
>> >         'join'
>> >         ;
>> > ON      :
>> >         { currentMode == STRING_MODE }?=>
>> >         'join'
>> >         { setMode(PROPERTY_IDENTIFIER_MODE); }
>> >         ;
>> > CLASS_IDENTIFIER
>> >         :
>> >         { currentMode == CLASS_IDENTIFIER_MODE }?=>
>> >         IDENTIFIER
>> >         { setMode(STRING_MODE);  }
>> >         ;
>> > PROPERTY_IDENTIFIER
>> >         :
>> >         { currentMode == PROPERTY_IDENTIFIER_MODE }?=>
>> >         IDENTIFIER
>> >         { setMode(STRING_MODE);  }
>> >         ;
>> > fragment IDENTIFIER
>> >         :
>> >         LETTER(LETTER|DIGIT|'.'|'_')+
>> >         ;
>> > TIA
>> >
>> > Mark
>> >
>> >
>> > --
>> > E: mark.mandel at gmail.com
>> > W: www.compoundtheory.com
>> >
>> >
>> >
>>
>>
>> --
>> E: mark.mandel at gmail.com
>> W: www.compoundtheory.com
>>
>
>
> -- 
> E: mark.mandel at gmail.com
> W: www.compoundtheory.com


