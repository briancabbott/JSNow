<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Fundamental question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Fundamental%20question&In-Reply-To=%3Ce94925cf740f827f3dd634e0f387f5bf%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="043256.html">
   <LINK REL="Next"  HREF="043258.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Fundamental question</H1>
    <B>Jim Idle</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Fundamental%20question&In-Reply-To=%3Ce94925cf740f827f3dd634e0f387f5bf%40mail.gmail.com%3E"
       TITLE="[antlr-interest] Fundamental question">jimi at temporal-wave.com
       </A><BR>
    <I>Fri Nov 11 07:27:51 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="043256.html">[antlr-interest] Fundamental question
</A></li>
        <LI>Next message: <A HREF="043258.html">[antlr-interest] Fundamental question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43262">[ date ]</a>
              <a href="thread.html#43262">[ thread ]</a>
              <a href="subject.html#43262">[ subject ]</a>
              <a href="author.html#43262">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>You need to write quite a but of custom code. However, for some pointers
on how to do this, get the source code for the JavaFX compiler, or at
least the front end. there you can see that I am building the standard
Java AST as per the Java compiler and not an ANTLR AST, but the techniques
are the same. Basically you need to add exception actions to your rules
that build the AST in whatever fashion you need.

Here:

<A HREF="http://kenai.com/projects/openjfx-compiler/sources/jfx-debug/show/src/shar">http://kenai.com/projects/openjfx-compiler/sources/jfx-debug/show/src/shar</A>
e/classes/com/sun/tools/javafx/antlr?rev=6727

You will find grammar files and a few super classes that do what you are
trying to do for this particular language because the netbeans source code
analyzers requires as complete a tree as can be formed. However, for your
own particular language, you may need further customizations. There is no
universal answer/solution to this I am afraid.

Jim


&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A> [mailto:antlr-interest-
</I>&gt;<i> <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">bounces at antlr.org</A>] On Behalf Of Hans-Georg Winkler
</I>&gt;<i> Sent: Friday, November 11, 2011 12:07 AM
</I>&gt;<i> To: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>
</I>&gt;<i> Subject: Re: [antlr-interest] Fundamental question
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> i already read this article and even did some custom recovery by
</I>&gt;<i> changing the order of recovery (-&gt;first insertion, then deletion) for
</I>&gt;<i> one specific problem.
</I>&gt;<i>
</I>&gt;<i> But again thats just a fix for a small group of error cases. What i
</I>&gt;<i> want to do is change how an error is passed up to the top node of my
</I>&gt;<i> tree.
</I>&gt;<i> If that is possible of course, but i've already tried several different
</I>&gt;<i> approaches to make my parser error resistant, i tried adding rules for
</I>&gt;<i> wrong code for example, but it doesnt seem like the way it should be
</I>&gt;<i> done.
</I>&gt;<i> There's incredibly little information about this on the web (or i'm
</I>&gt;<i> just to dumb to find it) though.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I don't know if i'm going in the right direction, but if someone knows
</I>&gt;<i> a good way to make a parser error resistant i would be willing to
</I>&gt;<i> learn.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Georg
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; From: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">jimi at temporal-wave.com</A>
</I>&gt;<i> &gt; Date: Thu, 10 Nov 2011 07:15:45 -0800
</I>&gt;<i> &gt; CC: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>
</I>&gt;<i> &gt; Subject: Re: [antlr-interest] Fundamental question
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Take a look at:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; <A HREF="http://www.antlr.org/wiki/display/ANTLR3/Custom+Syntax+Error+Recovery">http://www.antlr.org/wiki/display/ANTLR3/Custom+Syntax+Error+Recovery</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; as it may help. This is also useful for the other person asking about
</I>&gt;<i> &gt; AST construction on errors, though in the end that probably comes
</I>&gt;<i> down
</I>&gt;<i> &gt; to custom coding.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Jim
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; -----Original Message-----
</I>&gt;<i> &gt; &gt; From: Mari Matinlassi [mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">mmatinlassi at icinetic.com</A>]
</I>&gt;<i> &gt; &gt; Sent: Thursday, November 10, 2011 1:01 AM
</I>&gt;<i> &gt; &gt; To: 'Jim Idle'; 'Ian Kaplan'
</I>&gt;<i> &gt; &gt; Cc: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>
</I>&gt;<i> &gt; &gt; Subject: RE: [antlr-interest] Fundamental question
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Jim, Ian,
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Thanks for pointing me to missing EOF.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; However, it did not .. kind of.. solve my problem.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Resulting tree will now (after adding EOF and with same input) be
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; int test ;
</I>&gt;<i> &gt; &gt; &lt;missing EOF&gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Whereas, I would _like to have_ a tree something like below:
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; int test;
</I>&gt;<i> &gt; &gt; &lt;error&gt;
</I>&gt;<i> &gt; &gt; int variable;
</I>&gt;<i> &gt; &gt; string here;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; How to refactor my grammar to make a tree like above?
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Thanks in advance,
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; mari
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; -----Original Message-----
</I>&gt;<i> &gt; &gt; From: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A>
</I>&gt;<i> &gt; &gt; [mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A>] On Behalf Of Jim Idle
</I>&gt;<i> &gt; &gt; Sent: Wednesday, November 09, 2011 6:18 PM
</I>&gt;<i> &gt; &gt; Cc: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>
</I>&gt;<i> &gt; &gt; Subject: Re: [antlr-interest] Fundamental question
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Except that the rule &quot;type&quot; does not allow an ID as the type, and
</I>&gt;<i> so
</I>&gt;<i> &gt; &gt; this is a plain syntax error that is not picked up because of the
</I>&gt;<i> &gt; &gt; lack of EOF at the end of the start rule.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Jim
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; -----Original Message-----
</I>&gt;<i> &gt; &gt; &gt; From: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A> [mailto:antlr-interest-
</I>&gt;<i> &gt; &gt; &gt; <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">bounces at antlr.org</A>] On Behalf Of Ian Kaplan
</I>&gt;<i> &gt; &gt; &gt; Sent: Wednesday, November 09, 2011 9:09 AM
</I>&gt;<i> &gt; &gt; &gt; To: Mari Matinlassi
</I>&gt;<i> &gt; &gt; &gt; Cc: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>
</I>&gt;<i> &gt; &gt; &gt; Subject: Re: [antlr-interest] Fundamental question
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;   There is nothing wrong as far as the syntax goes with this.
</I>&gt;<i> &gt; &gt; &gt; There could, for example, be a user defined type called strig
</I>&gt;<i> &gt; &gt; &gt; (strings for trigonometry :).  So this is grammatically correct.
</I>&gt;<i> &gt; &gt; &gt; What is not correct is the semantics.  In fact, there probably is
</I>&gt;<i> &gt; &gt; &gt; no user defined type strig.  So this is an error may be issued
</I>&gt;<i> &gt; &gt; &gt; after the syntax tree is built, when a semantic phase makes a
</I>&gt;<i> pass
</I>&gt;<i> &gt; &gt; &gt; over the tree.  The semantic phase would discover that there was
</I>&gt;<i> &gt; &gt; &gt; no type strig and report an error (&quot;No type 'strig' on line 42&quot;).
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; On Wed, Nov 9, 2011 at 8:18 AM, Mari Matinlassi
</I>&gt;<i> &gt; &gt; &gt; &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">mmatinlassi at icinetic.com</A>&gt;wrote:
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; Hi,
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; There is something fundamental and important that I have not
</I>&gt;<i> &gt; &gt; &gt; &gt; understood with ANTLR grammars.
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; If I need to parse something like...
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;        int test;
</I>&gt;<i> &gt; &gt; &gt; &gt;        strig another;
</I>&gt;<i> &gt; &gt; &gt; &gt;        int variable;
</I>&gt;<i> &gt; &gt; &gt; &gt;        string here;
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; You notice there is a typing error on the second line ('strig'
</I>&gt;<i> &gt; &gt; &gt; instead
</I>&gt;<i> &gt; &gt; &gt; &gt; of 'string').
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; How do I make a grammar that will not stop parsing but,
</I>&gt;<i> &gt; &gt; &gt; &gt; continues after an error??
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; Below is an example how I CANNOT make it work the right way
</I>&gt;<i> &gt; &gt; (created
</I>&gt;<i> &gt; &gt; &gt; &gt; AST contains only 'int test ;')..
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; grammar List;
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; options {
</I>&gt;<i> &gt; &gt; &gt; &gt;        language = CSharp3;
</I>&gt;<i> &gt; &gt; &gt; &gt;        TokenLabelType = CommonToken;
</I>&gt;<i> &gt; &gt; &gt; &gt;        output=AST;
</I>&gt;<i> &gt; &gt; &gt; &gt;        ASTLabelType = CommonTree; }
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; @lexer::namespace{ConsoleApplication4}
</I>&gt;<i> &gt; &gt; &gt; &gt; @parser::namespace{ConsoleApplication4}
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; public r
</I>&gt;<i> &gt; &gt; &gt; &gt;        : variables*
</I>&gt;<i> &gt; &gt; &gt; &gt;        ;
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; variables
</I>&gt;<i> &gt; &gt; &gt; &gt;        : type ID ';'
</I>&gt;<i> &gt; &gt; &gt; &gt;        ;
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; type
</I>&gt;<i> &gt; &gt; &gt; &gt;        : 'int'
</I>&gt;<i> &gt; &gt; &gt; &gt;        | 'string'
</I>&gt;<i> &gt; &gt; &gt; &gt;        ;
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; ID : 'a'..'z' + ;
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; WS : (' ' |'\n' |'\r' ) {$channel=Hidden;} ;
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; Many thanks for your time and help,
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; Mari
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; List: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">http://www.antlr.org/mailman/listinfo/antlr-interest</A>
</I>&gt;<i> &gt; &gt; &gt; &gt; Unsubscribe:
</I>&gt;<i> &gt; &gt; &gt; &gt; <A HREF="http://www.antlr.org/mailman/options/antlr-interest/your-email-">http://www.antlr.org/mailman/options/antlr-interest/your-email-</A>
</I>&gt;<i> &gt; &gt; &gt; address
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; List: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">http://www.antlr.org/mailman/listinfo/antlr-interest</A>
</I>&gt;<i> &gt; &gt; &gt; Unsubscribe: <A HREF="http://www.antlr.org/mailman/options/antlr-">http://www.antlr.org/mailman/options/antlr-</A>
</I>&gt;<i> &gt; &gt; interest/your-
</I>&gt;<i> &gt; &gt; &gt; email-address
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; List: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">http://www.antlr.org/mailman/listinfo/antlr-interest</A>
</I>&gt;<i> &gt; &gt; Unsubscribe:
</I>&gt;<i> &gt; &gt; <A HREF="http://www.antlr.org/mailman/options/antlr-interest/your-email-">http://www.antlr.org/mailman/options/antlr-interest/your-email-</A>
</I>&gt;<i> addre
</I>&gt;<i> &gt; &gt; ss
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; List: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">http://www.antlr.org/mailman/listinfo/antlr-interest</A>
</I>&gt;<i> &gt; Unsubscribe:
</I>&gt;<i> &gt; <A HREF="http://www.antlr.org/mailman/options/antlr-interest/your-email-">http://www.antlr.org/mailman/options/antlr-interest/your-email-</A>
</I>&gt;<i> address
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> List: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">http://www.antlr.org/mailman/listinfo/antlr-interest</A>
</I>&gt;<i> Unsubscribe: <A HREF="http://www.antlr.org/mailman/options/antlr-interest/your-">http://www.antlr.org/mailman/options/antlr-interest/your-</A>
</I>&gt;<i> email-address
</I></PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="043256.html">[antlr-interest] Fundamental question
</A></li>
	<LI>Next message: <A HREF="043258.html">[antlr-interest] Fundamental question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43262">[ date ]</a>
              <a href="thread.html#43262">[ thread ]</a>
              <a href="subject.html#43262">[ subject ]</a>
              <a href="author.html#43262">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
