<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Compiler-exploding grammar
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Compiler-exploding%20grammar&In-Reply-To=%3C008d01c831ca%24b9fd28f0%240300a8c0%40chesterford%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024974.html">
   <LINK REL="Next"  HREF="024967.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Compiler-exploding grammar</H1>
    <B>Mark Edgeworth</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Compiler-exploding%20grammar&In-Reply-To=%3C008d01c831ca%24b9fd28f0%240300a8c0%40chesterford%3E"
       TITLE="[antlr-interest] Compiler-exploding grammar">mark.edgeworth at scarletcode.co.uk
       </A><BR>
    <I>Wed Nov 28 06:26:43 PST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="024974.html">[antlr-interest] Why the generated parser code tolerates	illegal expression?
</A></li>
        <LI>Next message: <A HREF="024967.html">[antlr-interest] Compiler-exploding grammar
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24966">[ date ]</a>
              <a href="thread.html#24966">[ thread ]</a>
              <a href="subject.html#24966">[ subject ]</a>
              <a href="author.html#24966">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Steve,

The last alternative in your rule is empty, and so need not contain a '-&gt;'.
This looks like a corner case that might just create an invalid AST tree and
an unconstrained recursion.  Remove the '-&gt;' :-)

close_bold_italics
@after {text_bold=false; text_italics = false;}
:<i> ;
</I>/*        {text_bold==true &amp;&amp; text_italics==true}? =&gt;  -&gt; B_OFF I_OFF
       |{text_bold==false &amp;&amp; text_italics==true}? =&gt; -&gt; I_OFF
       |{text_bold==true &amp;&amp; text_italics==false}? =&gt; -&gt; B_OFF
       |-&gt;;*/

Hope this helps,

Mark Edgeworth

-----Original Message-----
Message: 5
Date: Wed, 28 Nov 2007 23:05:45 +1100
From: &quot;Steve Bennett&quot; &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">stevagewp at gmail.com</A>&gt;
Subject: [antlr-interest] Compiler-exploding grammar

I have a grammar, which when generated, causes the java compiler to explode
with an out of stack space message:

The system is out of resources.
Consult the following stack trace for details. java.lang.StackOverflowError
at com.sun.tools.javac.comp.Attr.attribExpr(Attr.java:297)
at com.sun.tools.javac.comp.Attr.visitBinary(Attr.java:1518)
at com.sun.tools.javac.tree.Tree$Binary.accept(Tree.java:926)
at com.sun.tools.javac.comp.Attr.attribTree(Attr.java:275)
at com.sun.tools.javac.comp.Attr.attribExpr(Attr.java:297)
at com.sun.tools.javac.comp.Attr.visitBinary(Attr.java:1518)
at com.sun.tools.javac.tree.Tree$Binary.accept(Tree.java:926)
at com.sun.tools.javac.comp.Attr.attribTree(Attr.java:275)
at com.sun.tools.javac.comp.Attr.attribExpr(Attr.java:297)
at com.sun.tools.javac.comp.Attr.visitBinary(Attr.java:1518)
...
(hundreds of lines)

Is there a developer I should send this to? It's pretty big. I tried
trimming it down to the relevant bit, but strangely enough, that compiled
fine, and even stranger, ran as expected.

That is, the code that makes it explode is commented out in the following
snippet. But that snippet alone isn't enough to make the compiler explode, I
think.

close_bold_italics
@after {text_bold=false; text_italics = false;}
:<i> ;
</I>/*        {text_bold==true &amp;&amp; text_italics==true}? =&gt;  -&gt; B_OFF I_OFF
       |{text_bold==false &amp;&amp; text_italics==true}? =&gt; -&gt; I_OFF
       |{text_bold==true &amp;&amp; text_italics==false}? =&gt; -&gt; B_OFF
       |-&gt;;*/


Steve

</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024974.html">[antlr-interest] Why the generated parser code tolerates	illegal expression?
</A></li>
	<LI>Next message: <A HREF="024967.html">[antlr-interest] Compiler-exploding grammar
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24966">[ date ]</a>
              <a href="thread.html#24966">[ thread ]</a>
              <a href="subject.html#24966">[ subject ]</a>
              <a href="author.html#24966">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
