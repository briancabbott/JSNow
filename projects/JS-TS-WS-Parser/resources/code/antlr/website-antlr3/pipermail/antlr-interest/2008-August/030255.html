<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Help with error in C code generation (3.1)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Help%20with%20error%20in%20C%20code%20generation%20%283.1%29&In-Reply-To=%3C49DD7295-02AA-40F8-9430-D2D738947707%40lanl.gov%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030273.html">
   <LINK REL="Next"  HREF="030258.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Help with error in C code generation (3.1)</H1>
    <B>Patrick McCormick</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Help%20with%20error%20in%20C%20code%20generation%20%283.1%29&In-Reply-To=%3C49DD7295-02AA-40F8-9430-D2D738947707%40lanl.gov%3E"
       TITLE="[antlr-interest] Help with error in C code generation (3.1)">pat at lanl.gov
       </A><BR>
    <I>Thu Aug 21 16:30:42 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="030273.html">[antlr-interest] OT:Can we fix the list to a more reasonable line width?
</A></li>
        <LI>Next message: <A HREF="030258.html">[antlr-interest] Help with error in C code generation (3.1)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30255">[ date ]</a>
              <a href="thread.html#30255">[ thread ]</a>
              <a href="subject.html#30255">[ subject ]</a>
              <a href="author.html#30255">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I've run into some issues with generating C code under the 3.1 release  
(that is being compiled as part of a C++
project).  The errors I'm seeing are in the generated C code that is  
being compiled as C++ source:

	antlr/SParser.cpp:14982: error: invalid conversion from &#8216;void*&#8217; to  
&#8216;ANTLR3_BASE_TREE_struct*&#8217;

This corresponds to this line in the generated parser:

	 string_literal17_tree = ADAPTOR-&gt;create(ADAPTOR, string_literal17);

In looking over the code generation templates it appears that there is  
really only on possibility as to where
this is being generated from.  Here are the possible spots (the first  
one clearly missing a cast like the others):

	ASTParser.stg:&lt;label&gt;_tree = ADAPTOR-&gt;create(ADAPTOR, &lt;label&gt;);
	ASTParser.stg:&lt;label&gt;_tree = (&lt;ASTLabelType&gt;)(ADAPTOR- 
 &gt;create(ADAPTOR, &lt;label&gt;));
	ASTParser.stg:&lt;label&gt;_tree = (&lt;ASTLabelType&gt;)(ADAPTOR- 
 &gt;create(ADAPTOR, &lt;label&gt;));

I'm assuming adding the cast would fix this but I haven't been able to  
rebuild ANTLR successfully
from the source distribution to test it out.  I'm running under MacOS  
X 10.5.4 with XCode 3.1 installed.
I'm a newbie to both Java and ANTLR so any help would be  
appreciated.   In particular, I'd like to know how
I go about rebuilding the source distribution -- I'm using ant but get  
hundreds of errors during the build.

Thanks for any help you can provide,

--Patrick




</PRE>























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030273.html">[antlr-interest] OT:Can we fix the list to a more reasonable line width?
</A></li>
	<LI>Next message: <A HREF="030258.html">[antlr-interest] Help with error in C code generation (3.1)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30255">[ date ]</a>
              <a href="thread.html#30255">[ thread ]</a>
              <a href="subject.html#30255">[ subject ]</a>
              <a href="author.html#30255">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
