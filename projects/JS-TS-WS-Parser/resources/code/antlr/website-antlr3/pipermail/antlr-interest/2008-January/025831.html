<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] target language independent action code
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20target%20language%20independent%20action%20code&In-Reply-To=%3C20080121132219.00006ea2%40goanna%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025825.html">
   <LINK REL="Next"  HREF="025864.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] target language independent action code</H1>
    <B>Mark Wright</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20target%20language%20independent%20action%20code&In-Reply-To=%3C20080121132219.00006ea2%40goanna%3E"
       TITLE="[antlr-interest] target language independent action code">markwright at internode.on.net
       </A><BR>
    <I>Sun Jan 20 18:22:19 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="025825.html">[antlr-interest] target language independent action code
</A></li>
        <LI>Next message: <A HREF="025864.html">[antlr-interest] target language independent action code
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25831">[ date ]</a>
              <a href="thread.html#25831">[ thread ]</a>
              <a href="subject.html#25831">[ subject ]</a>
              <a href="author.html#25831">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, 20 Jan 2008 21:14:23 +0100
Arnulf Heller &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">aheller at gmx.at</A>&gt; wrote:

&gt;<i> hi,
</I>&gt;<i> 
</I>&gt;<i> I know this topic was discussed a couple of times here ...
</I>&gt;<i> 
</I>&gt;<i> But as far as I know there is no solution available right now 
</I>&gt;<i> (possibly apart from Loring Cramers yggdrasil).
</I>&gt;<i> 
</I>&gt;<i> I think target language independent action code would be of great
</I>&gt;<i> help because:
</I>&gt;<i> 
</I>&gt;<i> 1. ANTLR provides a steadily growing foundation of grammars for 
</I>&gt;<i> various languages (which is very cool). Unfortunately its almost 
</I>&gt;<i> certain that the grammar targets a different language ...
</I>&gt;<i> 2. Action code clutters the readability of the grammar - especially 
</I>&gt;<i> if its in a target language that you don't know.
</I>
Hello Arnulf,

The normal approach to avoid cluttering the grammar is to just
have one line of action code that calls a method in in target
language.
 
&gt;<i> Because ANTLR changes a lot over time, action code should be embedded 
</I>&gt;<i> into ANTLR directly with &quot;on board&quot; tools.
</I>
For a parser for a large language the ANTLR generated parser file
is already too large (2.5MB in my case) for the Netbeans debugger
to open when it only has at most one line in each action.  To
then go and embed the action code would stop me from being able to
debug it at all.  Even if the debugger could handle it, there is
no way I want to go searching through megabytes of generated
parser code looking for the place to set my breakpoint.

&gt;<i> So why not use these wonderful string templates?
</I>&gt;<i> 
</I>&gt;<i> Instead of writing
</I>&gt;<i> 
</I>&gt;<i> { myDict.add($ID.text()); }
</I>&gt;<i> 
</I>&gt;<i> one could write for instance
</I>&gt;<i> 
</I>&gt;<i> [ DictAdd(ID) ]
</I>&gt;<i> 
</I>&gt;<i> which ANTLR could translate on the fly to target language code at 
</I>&gt;<i> that position.
</I>
In practice the action code for a compiler for a large
language is thousands of lines of code just for entering the
information into a symbol table, which for an object orientated
language is a DAG (Directed Acyclic Graph), for looking up
information in the symbol table, etc.  It would be inconvenient
to develop and debug this using string templates.
 
&gt;<i> Then the writer of the grammar needs to provide a string template 
</I>&gt;<i> group (with a template &quot;DictAdd&quot;) which performs the translation to 
</I>&gt;<i> &quot;his&quot; target language.
</I>&gt;<i> This way targetting a different language amounts to rewriting the 
</I>&gt;<i> string template group.
</I>&gt;<i> This does not alter the original grammar and will hopefully be
</I>&gt;<i> posted :-)
</I>&gt;<i> 
</I>&gt;<i> The target language folks even could provide a minimal toolset for 
</I>&gt;<i> dictionaries and the like.
</I>
A dictionary is insufficient for a symbol table for an object
orientated language.  It would be impractical for the target language
developers to anticipate the symbol table language requirements for
evey conceivable language.

&gt;<i> If there is a good collection of tools, 
</I>&gt;<i> the action code gets structured, documented and well known by the
</I>&gt;<i> time.
</I>&gt;<i> 
</I>&gt;<i> What do you think?
</I>
In my dreams I wish there was some magic way to automatically translate
the Java ANTLR runtime and all my Java action code into C++ sometime
in the future when the C++ runtime is available.

Back in real world, what I am doing at the moment is I develop all
of my Java action code modelled in the freeware UML CASE tool called
BOUML:

<A HREF="http://bouml.free.fr/">http://bouml.free.fr/</A>

Then I hope that some time in the future that some other kind hearted
masochists (not me, sorry, I am already one level of indirection away
from real work) will develop a C++ ANTLR runtime including tree wizard,
and C++ string template.

Thanks, Mark

-- 
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025825.html">[antlr-interest] target language independent action code
</A></li>
	<LI>Next message: <A HREF="025864.html">[antlr-interest] target language independent action code
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25831">[ date ]</a>
              <a href="thread.html#25831">[ thread ]</a>
              <a href="subject.html#25831">[ subject ]</a>
              <a href="author.html#25831">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
