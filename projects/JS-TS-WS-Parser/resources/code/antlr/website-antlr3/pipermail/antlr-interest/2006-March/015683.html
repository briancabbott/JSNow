<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Antlr-2.7.6 with Visual Studio 8.0
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Antlr-2.7.6%20with%20Visual%20Studio%208.0&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015682.html">
   <LINK REL="Next"  HREF="015690.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Antlr-2.7.6 with Visual Studio 8.0</H1>
    <B>Mark Kattenbelt</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Antlr-2.7.6%20with%20Visual%20Studio%208.0&In-Reply-To="
       TITLE="[antlr-interest] Antlr-2.7.6 with Visual Studio 8.0">mark.kattenbelt at gmail.com
       </A><BR>
    <I>Tue Mar 14 02:40:59 PST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="015682.html">[antlr-interest] Looking for ANT build files....
</A></li>
        <LI>Next message: <A HREF="015690.html">[antlr-interest] Antlr-2.7.6 with Visual Studio 8.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15683">[ date ]</a>
              <a href="thread.html#15683">[ thread ]</a>
              <a href="subject.html#15683">[ subject ]</a>
              <a href="author.html#15683">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I've been trying to compile a dll of antlr 2.7.6 in Visual Studio 2005, 
so far unsuccessfully.
In mingw, I manage to compile it fine, only took a few minutes to set 
up! I use the following settings for VS:

Include dir: &quot;lib\cpp&quot;
Preprocessor: WIN32;_DEBUG;_WINDOWS;_USRDLL;ANTLR_EXPORTS
Run-time library: Multi-treaded debug.
Create precompiled headers: yes.
Function level linking: yes.
RTTI: yes.

Which results into compiling with the following line:

/O2 /I &quot;lib\cpp&quot; /D &quot;WIN32&quot; /D &quot;_DEBUG&quot; /D &quot;_WINDOWS&quot; /D &quot;_USRDLL&quot; /D 
&quot;ANTLR_EXPORTS&quot; /D &quot;_WINDLL&quot; /FD /EHsc /MTd /Gy /Yc 
/Fp&quot;Debug\antlr-2.7.6.pch&quot; /Fo&quot;Debug\\&quot; /Fd&quot;Debug\vc80.pdb&quot; /nologo /c 
/TP /errorReport:prompt

And linking with:

/OUT:&quot;d:\Fmt\antlr-2.7.6\Debug\antlr-2.7.6.dll&quot; /NOLOGO /DLL /MANIFEST 
/MANIFESTFILE:&quot;Debug\antlr-2.7.6.dll.intermediate.manifest&quot; 
/ASSEMBLYDEBUG /ERRORREPORT:PROMPT kernel32.lib user32.lib gdi32.lib 
winspool.lib comdlg32.lib advapi32.lib shell32.lib ole32.lib 
oleaut32.lib uuid.lib odbc32.lib odbccp32.lib

Now this fails during the linking stage, in particular it keeps finding 
symbols that are defined in multiple places:

ASTFactory.obj : error LNK2005: &quot;class std::basic_istream&lt;char,struct 
std::char_traits&lt;char&gt; &gt; &amp; __cdecl antlr::eatwhite(class 
std::basic_istream&lt;char,struct std::char_traits&lt;char&gt; &gt; &amp;)&quot; 
(?<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">eatwhite at antlr</A>@@YAAAV?$<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">basic_istream at DU</A>?$<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">char_traits at D</A>@std@@@std@@AAV23@@Z) 
already defined in ANTLRUtil.obj
ASTFactory.obj : error LNK2005: &quot;class std::basic_string&lt;char,struct 
std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt; __cdecl 
antlr::read_string(class std::basic_istream&lt;char,struct 
std::char_traits&lt;char&gt; &gt; &amp;)&quot; ...

I have tried to compile without precompiled headers, because I do not 
see the need for them, this results in:

MismatchedCharException.obj : error LNK2005: &quot;public: static int const 
antlr::MismatchedCharException::CHAR&quot; 
(?<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">CHAR at MismatchedCharException</A>@antlr@@2HB) already defined in 
CharScanner.obj
MismatchedCharException.obj : error LNK2005: &quot;public: static int const 
antlr::MismatchedCharException::NOT_CHAR&quot; 
(?<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">NOT_CHAR at MismatchedCharException</A>@antlr@@2HB) already defined in 
CharScanner.obj
MismatchedCharException.obj : error LNK2005: &quot;public: static int const 
antlr::MismatchedCharException::RANGE&quot; 
(?<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">RANGE at MismatchedCharException</A>@antlr@@2HB) already defined in 
CharScanner.obj

Clearly I am doing something wrong, and the settings need tweaking. Has 
anyone here managed to build antlr (2.7.6?) with Visual Studio (8.0?). 
If so could you please share your settings? Any help is appreciated.

Also, trying to compile it into a static library does not offer any 
relief, the errors still persist.

Cheers,

Mark Kattenbelt



</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015682.html">[antlr-interest] Looking for ANT build files....
</A></li>
	<LI>Next message: <A HREF="015690.html">[antlr-interest] Antlr-2.7.6 with Visual Studio 8.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15683">[ date ]</a>
              <a href="thread.html#15683">[ thread ]</a>
              <a href="subject.html#15683">[ subject ]</a>
              <a href="author.html#15683">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
