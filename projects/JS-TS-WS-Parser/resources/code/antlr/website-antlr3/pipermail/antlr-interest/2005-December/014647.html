<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Again: Source code position
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Again%3A%20Source%20code%20position&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014645.html">
   <LINK REL="Next"  HREF="014674.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Again: Source code position</H1>
    <B>Matthias Kempka</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Again%3A%20Source%20code%20position&In-Reply-To="
       TITLE="[antlr-interest] Again: Source code position">lists at mkempka.de
       </A><BR>
    <I>Sat Dec  3 05:25:34 PST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="014645.html">[antlr-interest] Antlr 3 and the newline token problem
</A></li>
        <LI>Next message: <A HREF="014674.html">[SOLUTION] Re: [antlr-interest] Again: Source code position
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14647">[ date ]</a>
              <a href="thread.html#14647">[ thread ]</a>
              <a href="subject.html#14647">[ subject ]</a>
              <a href="author.html#14647">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello all,

I'm aware that I'm not the first one to ask this question, but neither
the FAQ nor the mailing list archive give me answers that I can work
with, so here's my problem:

I'm working with ANTLR 2.7.5 and the Java 1.5 Grammar by Michael Studmann.
What I need is the source code position of an element in the AST.

I see that the tokens that are created by the lexer have exactly the
information I need. So I subclassed the CommonAST with a class named
TokenPreservingAST. In the section Tokens{} in the Grammar I added the
information which tokens should be represented by a TokenPreservingAST
object.
So far, it worked. But the token is always null. The problem is, that my
AST objects are always initialized with a call to
initialize(int,String) and never with initialize(Token). This is due to
the corresponding create-method in the ASTFactory.

I couldn't find out how to tell the JavaRecognizer that it should call
the method create(Token) instead of create(int, String).
Can somebody help me with this?

The FAQ tells me of another way with a special input stream that is
given to the lexer. However, I don't understand how I could get the
information of a token by counting how many characters the lexer has
consumed. There, I'm missing the information how to combine the
informations.

Regards,
Matthias Kempka
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014645.html">[antlr-interest] Antlr 3 and the newline token problem
</A></li>
	<LI>Next message: <A HREF="014674.html">[SOLUTION] Re: [antlr-interest] Again: Source code position
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14647">[ date ]</a>
              <a href="thread.html#14647">[ thread ]</a>
              <a href="subject.html#14647">[ subject ]</a>
              <a href="author.html#14647">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
