<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Using the TokenRewriteStream
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Using%20the%20TokenRewriteStream&In-Reply-To=%3C6D7F82E1-A700-455F-8CCF-19433CEFCC4B%40cs.usfca.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022953.html">
   <LINK REL="Next"  HREF="022947.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Using the TokenRewriteStream</H1>
    <B>Terence Parr</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Using%20the%20TokenRewriteStream&In-Reply-To=%3C6D7F82E1-A700-455F-8CCF-19433CEFCC4B%40cs.usfca.edu%3E"
       TITLE="[antlr-interest] Using the TokenRewriteStream">parrt at cs.usfca.edu
       </A><BR>
    <I>Wed Aug  1 10:40:21 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="022953.html">[antlr-interest] Global scopes for lexers
</A></li>
        <LI>Next message: <A HREF="022947.html">[antlr-interest] Request option to check for undefined tokens in	tree grammar, Antlr 3.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22942">[ date ]</a>
              <a href="thread.html#22942">[ thread ]</a>
              <a href="subject.html#22942">[ subject ]</a>
              <a href="author.html#22942">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Jul 30, 2007, at 1:53 PM, Susan Jolly wrote:

&gt;<i> However, I'm probably going to need modify  
</I>&gt;<i> TokenRewriteStream.toString() to
</I>&gt;<i> use and return a buffer that is a List (of imaginary and real  
</I>&gt;<i> Tokens) rather
</I>&gt;<i> than a StringBuffer.
</I>
Yeah, I have some thoughts on token stream rewrite on the blog.

&gt;<i> One of the things I need to be able to do is to interline the input  
</I>&gt;<i> (which
</I>&gt;<i> is print text) with its braille translation.  (&quot;Interline&quot; means  
</I>&gt;<i> alternating
</I>&gt;<i> a line of print with a line of braille.) This requires adding line  
</I>&gt;<i> breaks to
</I>&gt;<i> the input so as to keep it in sync with the braille since each line  
</I>&gt;<i> of the
</I>&gt;<i> braille translation has a maximum length and must be terminated by  
</I>&gt;<i> a hard
</I>&gt;<i> return.  (The print lines typically have more characters than the  
</I>&gt;<i> braille
</I>&gt;<i> lines.) This alone I could do by estimating the length of a braille  
</I>&gt;<i> line by
</I>&gt;<i> totaling the String length of the real Tokens and then invoking  
</I>&gt;<i> toString
</I>&gt;<i> again with a smaller &quot;end&quot; index if the imaginary Tokens added by the
</I>&gt;<i> Rewrite make the line too long. (I can't put the line breaks in at  
</I>&gt;<i> a later
</I>&gt;<i> point because I'd lose the synchronization with the input.)
</I>&gt;<i>
</I>&gt;<i> However, there are multiple ways to represent braille and a sighted  
</I>&gt;<i> user
</I>&gt;<i> might want more than one of them. In other words, the general case  
</I>&gt;<i> is that
</I>&gt;<i> the output consists of sets of lines where each set has one or more  
</I>&gt;<i> of the
</I>&gt;<i> following: a line of print, a line of standard braille (that  
</I>&gt;<i> controls the
</I>&gt;<i> line length), and possibly additional lines with other alternatives.
</I>&gt;<i>
</I>&gt;<i> This is (I think) easier to do if I associate each Token with an  
</I>&gt;<i> object that
</I>&gt;<i> has all these multiple alternatives which is why I want to get a  
</I>&gt;<i> List of the
</I>&gt;<i> Tokens rather than the concatenated text.
</I>&gt;<i>
</I>&gt;<i> The pictures at the tops of these two pages show what the output  
</I>&gt;<i> looks like
</I>&gt;<i> except that the first one doesn't include the original print text.
</I>&gt;<i> <A HREF="http://www.dotlessbraille.org/screencap.htm">http://www.dotlessbraille.org/screencap.htm</A>
</I>&gt;<i> <A HREF="http://www.dotlessbraille.org/gemini.htm">http://www.dotlessbraille.org/gemini.htm</A>
</I>
Interesting.  Well, a first pass to rewrite the token stream is a  
decent idea.  Then process the altered stream with another parser.
Ter
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022953.html">[antlr-interest] Global scopes for lexers
</A></li>
	<LI>Next message: <A HREF="022947.html">[antlr-interest] Request option to check for undefined tokens in	tree grammar, Antlr 3.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22942">[ date ]</a>
              <a href="thread.html#22942">[ thread ]</a>
              <a href="subject.html#22942">[ subject ]</a>
              <a href="author.html#22942">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
