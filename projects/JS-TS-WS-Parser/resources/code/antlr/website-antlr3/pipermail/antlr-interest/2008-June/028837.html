<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] AST optimizations
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20AST%20optimizations&In-Reply-To=%3C967247.57860.qm%40web55902.mail.re3.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028836.html">
   <LINK REL="Next"  HREF="028838.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] AST optimizations</H1>
    <B>Loring Craymer</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20AST%20optimizations&In-Reply-To=%3C967247.57860.qm%40web55902.mail.re3.yahoo.com%3E"
       TITLE="[antlr-interest] AST optimizations">lgcraymer at yahoo.com
       </A><BR>
    <I>Thu Jun 26 13:16:55 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="028836.html">[antlr-interest] ColonAssign vs Label Colon vs Colon
</A></li>
        <LI>Next message: <A HREF="028838.html">[antlr-interest] ETA on ANTLR 3.1?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28837">[ date ]</a>
              <a href="thread.html#28837">[ thread ]</a>
              <a href="subject.html#28837">[ subject ]</a>
              <a href="author.html#28837">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Heterogeneous ASTs (your option 2) is part of the solution, but the analysis usually involves data structures constructed from a tree walk, not just the trees.  Symbol tables and directed graphs are common data structures for analysis.  Usually the directed graphs reference nodes in the tree (and sometimes vice versa) so that the next tree transformation can incorporate the analysis findings.  Don't fixate on the AST:  look at the analysis algorithms first, then figure out how to capture the results in a syntax tree.

--Loring




----- Original Message ----
From: Andr&#233; van der Merwe &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">AndrevdM at pyrogenesis.co.za</A>&gt;
To: &quot;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>&quot; &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>&gt;
Sent: Thursday, June 26, 2008 3:02:05 AM
Subject: [antlr-interest] AST optimizations

 
Hi
all,
 
I&#146;m
trying to figure out what is the best way to do AST changes and optimizations. 
 
I
assume that for some (most?) optimisations a tree rewrite grammar will not be
powerful enough (e.g. for deciding on eager/lazy loading based on function
use). So what is the best way of making these types of changes (assume that the
changes can be significant) to an AST? I can think of a few options
 
1)
Use the ANTLR AST and add and remove nodes from it. (I&#146;ve got no idea how
I&#146;d create new nodes though as you need an IToken) 
2)
Build a custom AST from the ANTLR AST and make modifications to it. (This way I
can have different classes for each AST node)
 
I&#146;m
leaning towards option two as I think that would give me the greatest flexibility
but I&#146;d like to hear what others are doing. 
 
 
 
If
I do go with option two I can think of a few issues
1)
Can I still generate code using string template and an ANTLR tree grammar? (I
think I&#146;ve read something about using tree adapters for this...)
2)
I&#146;ll need to store the ITokens in my new AST so that I can do my own
error reporting.
 
 
Are
there any simple examples of this? I guess I could look at the BOO source (I&#146;m
pretty sure they use option 2) but it would nice to have a simpler example to
start with.
 
 
Thanks
in advance.
 
 
Andre


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://www.antlr.org/pipermail/antlr-interest/attachments/20080626/a0e149c6/attachment.html">http://www.antlr.org/pipermail/antlr-interest/attachments/20080626/a0e149c6/attachment.html</A> 
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028836.html">[antlr-interest] ColonAssign vs Label Colon vs Colon
</A></li>
	<LI>Next message: <A HREF="028838.html">[antlr-interest] ETA on ANTLR 3.1?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28837">[ date ]</a>
              <a href="thread.html#28837">[ thread ]</a>
              <a href="subject.html#28837">[ subject ]</a>
              <a href="author.html#28837">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
