<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Antlr3.4 Python bugs, workarounds
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Antlr3.4%20Python%20bugs%2C%20workarounds&In-Reply-To=%3CCAN51Nt5aQTu1jqeXuCUhHYHXCy0Xsq00vgCB-BEWhjSqT5z8Qw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="043553.html">
   <LINK REL="Next"  HREF="043564.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Antlr3.4 Python bugs, workarounds</H1>
    <B>Benjamin S Wolf</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Antlr3.4%20Python%20bugs%2C%20workarounds&In-Reply-To=%3CCAN51Nt5aQTu1jqeXuCUhHYHXCy0Xsq00vgCB-BEWhjSqT5z8Qw%40mail.gmail.com%3E"
       TITLE="[antlr-interest] Antlr3.4 Python bugs, workarounds">jokeserver at gmail.com
       </A><BR>
    <I>Mon Dec 26 17:20:39 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="043553.html">[antlr-interest] De-emphasizing tree grammars?
</A></li>
        <LI>Next message: <A HREF="043564.html">[antlr-interest] Antlr3.4 Python bugs, workarounds
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43556">[ date ]</a>
              <a href="thread.html#43556">[ thread ]</a>
              <a href="subject.html#43556">[ subject ]</a>
              <a href="author.html#43556">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, Oct 28, 2011 at 8:56 AM, Benjamin Niemann &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">pink at odahoda.de</A>&gt; wrote:
&gt;<i> On Fri, Oct 7, 2011 at 11:17 PM, Benjamin S Wolf &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">jokeserver at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> I've discovered two bugs in working with the Python target to generate lexers.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The first is in that when supplying k, the generated code for special
</I>&gt;&gt;<i> state transitions is invalid: the &quot;elif&quot; keyword is split across lines
</I>&gt;&gt;<i> as &quot;el\nif&quot;, so the python interpreter crashes upon reading &quot;el&quot;.
</I>&gt;<i>
</I>&gt;<i> That's been reported before, but I have problem reproducing it. Are
</I>&gt;<i> you using antlr-3.4-complete.jar (I can only see this problem with
</I>&gt;<i> that build) or did you build it yourself from antlr-3.4.tar.gz (or
</I>&gt;<i> something else completely)?
</I>&gt;<i>
</I>
Hi Benjamin,

I was meddling around with the stg templates for Python in trying to
fix some other bugs I reported in another thread, and after updating
the files in antlr-3.4-complete.jar this problem was alleviated.

I narrowed down the diff and discovered that the stg templates in the
original jar all had DOS line endings (that is, \r\n instead of just
\n), and that removing all the carriage returns in
org/antlr/codegen/templates/Python/Python.stg solved the issue of the
elif being split across a newline.

That certainly explains why it only showed in antlr-3.4-complete.jar,
since the templates included with antlr-3.4.tar.gz did not have the
carriage returns. :)
</PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="043553.html">[antlr-interest] De-emphasizing tree grammars?
</A></li>
	<LI>Next message: <A HREF="043564.html">[antlr-interest] Antlr3.4 Python bugs, workarounds
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43556">[ date ]</a>
              <a href="thread.html#43556">[ thread ]</a>
              <a href="subject.html#43556">[ subject ]</a>
              <a href="author.html#43556">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
