<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Problem with rewrite rule referencing the previous	value of the AST
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Problem%20with%20rewrite%20rule%20referencing%20the%20previous%0A%09value%20of%20the%20AST&In-Reply-To=%3C471E71F4.3090400%40ownit.nu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024348.html">
   <LINK REL="Next"  HREF="024350.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Problem with rewrite rule referencing the previous	value of the AST</H1>
    <B>Mats Behre</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Problem%20with%20rewrite%20rule%20referencing%20the%20previous%0A%09value%20of%20the%20AST&In-Reply-To=%3C471E71F4.3090400%40ownit.nu%3E"
       TITLE="[antlr-interest] Problem with rewrite rule referencing the previous	value of the AST">mb.fgel at ownit.nu
       </A><BR>
    <I>Tue Oct 23 15:13:08 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="024348.html">[antlr-interest] Problems parsing numbers
</A></li>
        <LI>Next message: <A HREF="024350.html">[antlr-interest] Problem with rewrite rule referencing the	previous	value of the AST
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24349">[ date ]</a>
              <a href="thread.html#24349">[ thread ]</a>
              <a href="subject.html#24349">[ subject ]</a>
              <a href="author.html#24349">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I am in the process of converting a v2 grammar to v3, and have some rules that (I would like to) look basically like this:

	optionCmd: p=OptionKeyword (Dot!)? (
			t=StrictKeyword
			| t=MaxDurationKeyword intData
		) -&gt; ^(GenericStatement $optionCmd);

The problem is that when I have the exclamation mark after the optional Dot token, I get a &quot;Can't find template tokenRefBangTrack.st&quot; exception.
The exception itself is obviously just a missing template, but it seems to indicate that when I want to reference the tree 'so far' in a rewrite rule, I am not allowed to exclude any of the matched parts.
Is this a correct assumption, or should my rule work?

I know that I can work around this by having several rewrite rules instead of just one, but that would make the grammar less readable, so I would prefer not to do it.
An equivalent construct worked fine in v2, but then the rule generation has changed dramatically, so I'm not really surprised that there are differences. Generally it appears that the grammar will be more readable in v3, except that I have to add many 'options {k = 1;}' followed by a syntactic predicate where earlier 'options {greedy = true;}' made the job.

Rgds,
Mats 

</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024348.html">[antlr-interest] Problems parsing numbers
</A></li>
	<LI>Next message: <A HREF="024350.html">[antlr-interest] Problem with rewrite rule referencing the	previous	value of the AST
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24349">[ date ]</a>
              <a href="thread.html#24349">[ thread ]</a>
              <a href="subject.html#24349">[ subject ]</a>
              <a href="author.html#24349">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
