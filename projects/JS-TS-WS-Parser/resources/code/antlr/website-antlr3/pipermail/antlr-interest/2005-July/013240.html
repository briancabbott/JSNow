<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Syntactic predicate not being generated
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Syntactic%20predicate%20not%20being%20generated&In-Reply-To=23C1D236-CEBA-4FC5-BC93-FDCD986068B7%40cs.usfca.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013239.html">
   <LINK REL="Next"  HREF="013243.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Syntactic predicate not being generated</H1>
    <B>Olivier Dragon</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Syntactic%20predicate%20not%20being%20generated&In-Reply-To=23C1D236-CEBA-4FC5-BC93-FDCD986068B7%40cs.usfca.edu"
       TITLE="[antlr-interest] Syntactic predicate not being generated">dragonoe at mcmaster.ca
       </A><BR>
    <I>Sun Jul 31 08:18:37 PDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="013239.html">[antlr-interest] Syntactic predicate not being generated
</A></li>
        <LI>Next message: <A HREF="013243.html">[antlr-interest] Syntactic predicate not being generated
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13240">[ date ]</a>
              <a href="thread.html#13240">[ thread ]</a>
              <a href="subject.html#13240">[ subject ]</a>
              <a href="author.html#13240">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, Jul 31, 2005 at 03:41:14PM +0700, Terence Parr wrote:
&gt;<i> On Jul 30, 2005, at 7:44 PM, Olivier Dragon wrote:
</I>&gt;<i> &gt;On Fri, Jul 29, 2005 at 11:54:37AM -0400, Olivier Dragon wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt;I have this problem where I put a syntactic predicate inside the  
</I>&gt;<i> &gt;&gt;lexer
</I>&gt;<i> &gt;&gt;and no code is being generated for it. I get no warnings or errors  
</I>&gt;<i> &gt;&gt;(it's
</I>&gt;<i> &gt;&gt;inside an alternative block with more than one). Here is the lexer  
</I>&gt;<i> &gt;&gt;rule:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;I found that by increasing codeGenMakeSwitchThreshold to something
</I>&gt;<i> &gt;higher than the number of alternatives I had would generate proper  
</I>&gt;<i> &gt;code
</I>&gt;<i> &gt;with the syntactic predicate check. Before that I was using the  
</I>&gt;<i> &gt;default
</I>&gt;<i> &gt;value, that is not specifying one.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;Is this a known bug with ANTLR?
</I>&gt;<i> 
</I>&gt;<i> Yikes!  That sounds like a problem.  I was going to suggest that  
</I>&gt;<i> perhaps ANTLR decided you didn't need the pred, but this second email  
</I>&gt;<i> makes it sounds just wrong; that switch shouldn't change  
</I>&gt;<i> functionality. :(
</I>
What happens is that you can't have a switch because of the predicate.
ANTLR should detect that and revert back to if-statements. The switch
causes problems because once LA(1) matches, the code is stuck in that
case (unless there's no break but that defeats the switch purpose and
complicates the logic). That makes predicates useless. ANTLR seems to
decide that using the switch is more important than using the predicate.

I can reproduce with 2.7.5 and 2.7.6 (which comes with antlr eclipse).

If there's anything I can do to help identify it better let me know. Try
building a lexer with that rule I put in my previous email.

-Olivier

-- 
          __-/|    ? ?     |\-__
     __--/  /  \   (^^)   /  \  \--__
  _-/   /   /  /\ / ( )  /\  \   \   \-_
 /  /   /  /  /  (   ^^ ~  \  \  \   \  \
 / Oli Dragon    ( <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">dragonoe at mcmaster.ca</A> \
/  B.Eng. Sfwr   (     )    \    \  \    \
/  /  /    /__--_ (   ) __--__\    \  \  \
|<i>  /  /  _/        \_ \_       \_  \  \  |
</I> \/  / _/            \_ \_       \_ \  \/
  \_/ /                -\_\        \ \_/
    \/                    )         \/
                        *~
        ___--&lt;***************&gt;--___
       [<A HREF="http://dragon.homelinux.org]">http://dragon.homelinux.org]</A>
        ~~~--&lt;***************&gt;--~~~
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : <A HREF="http://www.antlr.org/pipermail/antlr-interest/attachments/20050731/3c549749/attachment.bin">http://www.antlr.org/pipermail/antlr-interest/attachments/20050731/3c549749/attachment.bin</A>
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013239.html">[antlr-interest] Syntactic predicate not being generated
</A></li>
	<LI>Next message: <A HREF="013243.html">[antlr-interest] Syntactic predicate not being generated
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13240">[ date ]</a>
              <a href="thread.html#13240">[ thread ]</a>
              <a href="subject.html#13240">[ subject ]</a>
              <a href="author.html#13240">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
