<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Grammar help question (iCalendar)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Grammar%20help%20question%20%28iCalendar%29&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002252.html">
   <LINK REL="Next"  HREF="002265.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Grammar help question (iCalendar)</H1>
    <B>Jin Choi</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Grammar%20help%20question%20%28iCalendar%29&In-Reply-To="
       TITLE="[antlr-interest] Grammar help question (iCalendar)">jsc at alum.mit.edu
       </A><BR>
    <I>Thu Nov  7 15:55:06 PST 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="002252.html">[antlr-interest] skipping EOF.
</A></li>
        <LI>Next message: <A HREF="002265.html">[antlr-interest] Re: Grammar help question (iCalendar)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2254">[ date ]</a>
              <a href="thread.html#2254">[ thread ]</a>
              <a href="subject.html#2254">[ subject ]</a>
              <a href="author.html#2254">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm attempting to write a grammar to parse iCalendar files (rfc2445), and have 
some questions on how best to handle a grammar issue.

There are many variants of lines of the form
FIELD;param1=foo;param2=&quot;bar&quot;:field value

where the parameters are optional name value pairs, and the field value is 
typed, depending on the type of field you are trying to parse. Some fields take 
nearly arbitrary text, while others are limited to particular strings 
(&quot;VERSION:2.0&quot;) or are structured, such as timestamps. So, I have something 
like:

version : &quot;VERSION&quot; (params)* ':' &quot;2.0&quot; ;
prodid : &quot;PRODID&quot; (params)* ':' TEXTVALUE ;
params : ';' PARAMNAME '=' (PARAM_VALUE)? (',' PARAM_VALUE)* ;

So here's the problem: I obviously can't define a lexer rule for TEXTVALUE, 
since it would create all kinds of ambiguities. Perhaps I could use a 
multiplexed lexer for this, but it seems like you can only switch the lexer state 
from within a lexer rule, and not from the parser, which is where you know the 
type of value you should be looking for.

I could just define each component as a single token and do all the parsing in 
the lexer, using protected rules. Are there any downsides to that?

How would you write this?


 

Your use of Yahoo! Groups is subject to <A HREF="http://docs.yahoo.com/info/terms/">http://docs.yahoo.com/info/terms/</A> 

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002252.html">[antlr-interest] skipping EOF.
</A></li>
	<LI>Next message: <A HREF="002265.html">[antlr-interest] Re: Grammar help question (iCalendar)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2254">[ date ]</a>
              <a href="thread.html#2254">[ thread ]</a>
              <a href="subject.html#2254">[ subject ]</a>
              <a href="author.html#2254">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
