<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] @init actions in &quot;C Target &quot; have problems	with MSVS compilers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20%40init%20actions%20in%20%22C%20Target%20%22%20have%20problems%0A%09with%20MSVS%20compilers&In-Reply-To=%3CB36CCC332A32904F8FA3DE134A2353362522A0%40wavemachine.temporal-wave.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019856.html">
   <LINK REL="Next"  HREF="019860.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] @init actions in &quot;C Target &quot; have problems	with MSVS compilers</H1>
    <B>Jim Idle</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20%40init%20actions%20in%20%22C%20Target%20%22%20have%20problems%0A%09with%20MSVS%20compilers&In-Reply-To=%3CB36CCC332A32904F8FA3DE134A2353362522A0%40wavemachine.temporal-wave.com%3E"
       TITLE="[antlr-interest] @init actions in &quot;C Target &quot; have problems	with MSVS compilers">jimi at temporal-wave.com
       </A><BR>
    <I>Thu Mar 22 15:04:03 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="019856.html">[antlr-interest] @init actions in &#147;C Target  &#148; have problems with MSVS compilers
</A></li>
        <LI>Next message: <A HREF="019860.html">[antlr-interest] @init actions in &quot;C Target&quot; have problems with	MSVS compilers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19859">[ date ]</a>
              <a href="thread.html#19859">[ thread ]</a>
              <a href="subject.html#19859">[ subject ]</a>
              <a href="author.html#19859">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Yes - I can do that (add a new @declarations). I have not had much time
until recently to work on this other than to keep up to date with the
Java side. There are a few bugs to iron out and this is an enhancement
that may well be useful. However, the patch to the C.stg isn't quite as
simple as that, but it isn't too drastic - I'll see if I can put that
together today.

Jim

-----Original Message-----
From: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A>
[mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A>] On Behalf Of Gavin Lambert
Sent: Thursday, March 22, 2007 1:56 PM
To: Tobias Pape
Cc: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>
Subject: Re: [antlr-interest] @init actions in &quot;C Target &quot; have problems
with MSVS compilers

At 08:13 23/03/2007, Tobias Pape wrote:
 &gt;What about patching ;) the C.stg ??
[...]
 &gt;     ANTLR3_UINT32	    _type;
 &gt;     ANTLR3_UINT64	    _start;
 &gt;     ANTLR3_UINT64	    _end;
 &gt;     ANTLR3_UINT64	    _line;
 &gt;     ANTLR3_UINT32	    _charPosition;
 &gt;     ANTLR3_UINT32	    _channel;
 &gt;
 &gt;     &lt;ruleInitializations()&gt;
 &gt;     &lt;ruleLabelInitializations()&gt;
 &gt;     ctx-&gt;pLexer-&gt;ruleNestingLevel++;
 &gt;     _type	    = &lt;ruleName&gt;;
 &gt;     _start	    = getCharIndex();
 &gt;     _end	    = 0;
 &gt;     _line	    = getLine();
 &gt;     _charPosition   = getCharPositionInLine();
 &gt;     _channel	    = ANTLR3_TOKEN_DEFAULT_CHANNEL;
 &gt;
 &gt;     &lt;ruleDescriptor.actions.init&gt;
 &gt;     &lt;ruleMemoization(name=ruleName)&gt;

In actual fact, if I'm reading the wiki page right (and it's only 
briefly mentioned in one sentence, so could be wrong), actions can 
be defined on a target-specific basis.  So probably all that needs 
to get done is that *above* the &lt;ruleInitializations()&gt; line, add 
a new line with &lt;ruleDescriptor.actions.decls&gt; or similar.  Then 
you should be able to declare local variables in a @decls block 
rather than the @init block.

</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019856.html">[antlr-interest] @init actions in &#147;C Target  &#148; have problems with MSVS compilers
</A></li>
	<LI>Next message: <A HREF="019860.html">[antlr-interest] @init actions in &quot;C Target&quot; have problems with	MSVS compilers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19859">[ date ]</a>
              <a href="thread.html#19859">[ thread ]</a>
              <a href="subject.html#19859">[ subject ]</a>
              <a href="author.html#19859">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
