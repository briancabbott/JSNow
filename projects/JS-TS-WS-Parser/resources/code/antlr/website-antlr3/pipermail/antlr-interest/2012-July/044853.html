<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Token position 0, -1
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Token%20position%200%2C%20-1&In-Reply-To=%3C1341573789.31655.0%40esd-s7%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="044852.html">
   <LINK REL="Next"  HREF="044854.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Token position 0, -1</H1>
    <B>Stefan M&#228;tje (d)</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Token%20position%200%2C%20-1&In-Reply-To=%3C1341573789.31655.0%40esd-s7%3E"
       TITLE="[antlr-interest] Token position 0, -1">Stefan.Maetje at esd-electronics.com
       </A><BR>
    <I>Fri Jul  6 04:23:09 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="044852.html">[antlr-interest] Token position 0, -1
</A></li>
        <LI>Next message: <A HREF="044854.html">[antlr-interest] Token position 0, -1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44853">[ date ]</a>
              <a href="thread.html#44853">[ thread ]</a>
              <a href="subject.html#44853">[ subject ]</a>
              <a href="author.html#44853">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Am 06.07.2012 11:47:27 schrieb(en) Ale Strooisma:
&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> if I try to get the position of a token in the file with getLine and 
</I>&gt;<i> getCharPositionInLine, many of my tokens give the co&#246;rdinates 0, -1, 
</I>&gt;<i> which obviously is wrong. Why is this the case, and how can I fix it?
</I>
Hi,

please be aware of the fact that imaginary tokens that you create by using 
rewrite rules don't have any location information by default (and no text 
either).

So I think you should first look if all the tokens generated by the lexer 
contains the expected location information. Also you then can see which tokens 
were generated by the lexer and which were generated by a rewrite rule of the 
parser.

In rewrite rules you can attach the location information of a real lexer token
to a generated imaginary token by a syntax like that (see ANTLR book paragraph 
&quot;Deriving Imaginary Nodes from Real Tokens&quot;):

compoundStatement
	:  lc='{' statement*  '}'
		-&gt;  ^(SLIST[$lc]  statement*)
	;

All over all my answer is a little bit guesswork because your question is a 
little bit unspecific (lexer / parser or combined grammar ...? What are you 
doing exactly?).

Hope that helps,
	Stefan

Some example code to dump the lexer tokens:


    /** Dump all tokens the &lt;lexer&gt; provides in a readable form to the 
	location where &lt;outFileName&gt; points to.
        */
    private static void generateTokenOutput(Lexer lexer, String outFileName) {
        PrintWriter tknOut;
        boolean     useOutFile;
        Token token;

        System.err.print(&quot;==== TKN to &quot;);
        if (null == outFileName) {
            useOutFile = false;
            System.err.println(&quot;stdout&quot;);
            tknOut = new PrintWriter(System.out);
        }
        else {
            useOutFile = true;
	    /* SNIP-SNAP  .... */
        }
        // Proceed with the real output
        while (null != (token = lexer.nextToken())) {
            int tokenType = token.getType();
            if (tokenType == -1) break;
            tknOut.printf(&quot;%4d,%3d, tkn:%4d  name:%-8s\t '%s'%n&quot;,
                token.getLine(), token.getCharPositionInLine(),
                tokenType, MyOwnParser.tokenNames[tokenType],
                token.getText());
        }
        // Need to close or flush the Writer to get the output
        if (useOutFile) tknOut.close();
        else tknOut.flush();
    }

Call like this ...
{
        MyOwnLexer lexer = new MyOwnLexer(input);

        // Dump all tokens?
        generateTokenOutput(lexer, null);
}

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="044852.html">[antlr-interest] Token position 0, -1
</A></li>
	<LI>Next message: <A HREF="044854.html">[antlr-interest] Token position 0, -1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44853">[ date ]</a>
              <a href="thread.html#44853">[ thread ]</a>
              <a href="subject.html#44853">[ subject ]</a>
              <a href="author.html#44853">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
