From hugo.leeney at gmail.com  Fri May  1 01:10:17 2009
From: hugo.leeney at gmail.com (Hugo Leeney)
Date: Fri, 1 May 2009 09:10:17 +0100
Subject: [antlr-interest] Flumoxed by Javascript Target
In-Reply-To: <49F9DB36.8030009@temporal-wave.com>
References: <ccbc40a00904300805p1c65e391qcf3723ac51301b4@mail.gmail.com>
	<49F9CA9D.9080207@temporal-wave.com>
	<ccbc40a00904300934y3bbd372csddbc09779ed23bc6@mail.gmail.com>
	<49F9D843.6030401@temporal-wave.com>
	<1241111072.3237.22.camel@localhost.localdomain>
	<49F9DB36.8030009@temporal-wave.com>
Message-ID: <ccbc40a00905010110o40f402aegf2d723347142b95c@mail.gmail.com>

I'm thinking I need to stick with http://www.antlr.org/download.html
for my purposes. If I understand correctly there are files missing
from the source distro there at the moment so a full build of that is
not currently possible but should be soon. I can go into the separate
directories (tool/ runtime/ ..) and build each in turn. Is that right?

In the hope of providing useful information, this morning I downloaded
http://www.antlr.org/hudson/job/ANTLR_Tool/ws//*zip*/workspace.zip. I
unzipped and executed 'mvn -Dmaven.test.skip=true'. Console output is
included below [1]. Granted, this was a random effort to learn
something; I don't know if this should work; I don't even know if
ANTLR_Tool was the right component to try - the name ANTLR_Tool is
slightly confusing with the tool/ directory in the source distro.

Also taking either pom.xml from that same hudson download and dropping
it in the regular source download top directory produces [2].

Taking http://fisheye2.atlassian.com/browse/~raw,r=5943/antlr/pom.xml
and dropping it in the regular source download top directory produces
[3].

Thanks, Hugo

[1]*******************************************************************************

[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[ERROR] FATAL ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Error building POM (may not be this project's POM).


Project ID: org.antlr:antlr:jar:null

Reason: Cannot find parent: org.antlr:antlr-master for project: org.antlr:antlr:
jar:null for project org.antlr:antlr:jar:null


[INFO] ------------------------------------------------------------------------
[INFO] Trace
org.apache.maven.reactor.MavenExecutionException: Cannot find parent: org.antlr:
antlr-master for project: org.antlr:antlr:jar:null for project org.antlr:antlr:j
ar:null
        at org.apache.maven.DefaultMaven.getProjects(DefaultMaven.java:432)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:300)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:137)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:356)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
        at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
        at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)

        at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: org.apache.maven.project.ProjectBuildingException: Cannot find parent
: org.antlr:antlr-master for project: org.antlr:antlr:jar:null for project org.a
ntlr:antlr:jar:null
        at org.apache.maven.project.DefaultMavenProjectBuilder.assembleLineage(D
efaultMavenProjectBuilder.java:1398)
        at org.apache.maven.project.DefaultMavenProjectBuilder.buildInternal(Def
aultMavenProjectBuilder.java:823)
        at org.apache.maven.project.DefaultMavenProjectBuilder.buildFromSourceFi
leInternal(DefaultMavenProjectBuilder.java:508)
        at org.apache.maven.project.DefaultMavenProjectBuilder.build(DefaultMave
nProjectBuilder.java:200)
        at org.apache.maven.DefaultMaven.getProject(DefaultMaven.java:632)
        at org.apache.maven.DefaultMaven.collectProjects(DefaultMaven.java:515)
        at org.apache.maven.DefaultMaven.getProjects(DefaultMaven.java:419)
        ... 11 more
Caused by: org.apache.maven.project.ProjectBuildingException: POM 'org.antlr:ant
lr-master' not found in repository: Unable to download the artifact from any rep
ository

  org.antlr:antlr-master:pom:3.1.4-SNAPSHOT

from the specified remote repositories:
  central (http://repo1.maven.org/maven2)

 for project org.antlr:antlr-master
        at org.apache.maven.project.DefaultMavenProjectBuilder.findModelFromRepo
sitory(DefaultMavenProjectBuilder.java:605)
        at org.apache.maven.project.DefaultMavenProjectBuilder.assembleLineage(D
efaultMavenProjectBuilder.java:1394)
        ... 17 more
Caused by: org.apache.maven.artifact.resolver.ArtifactNotFoundException: Unable
to download the artifact from any repository

  org.antlr:antlr-master:pom:3.1.4-SNAPSHOT

from the specified remote repositories:
  central (http://repo1.maven.org/maven2)


        at org.apache.maven.artifact.resolver.DefaultArtifactResolver.resolve(De
faultArtifactResolver.java:228)
        at org.apache.maven.artifact.resolver.DefaultArtifactResolver.resolve(De
faultArtifactResolver.java:90)
        at org.apache.maven.project.DefaultMavenProjectBuilder.findModelFromRepo
sitory(DefaultMavenProjectBuilder.java:558)
        ... 18 more
Caused by: org.apache.maven.wagon.ResourceDoesNotExistException: Unable to downl
oad the artifact from any repository
        at org.apache.maven.artifact.manager.DefaultWagonManager.getArtifact(Def
aultWagonManager.java:349)
        at org.apache.maven.artifact.resolver.DefaultArtifactResolver.resolve(De
faultArtifactResolver.java:216)
        ... 20 more
[INFO] ------------------------------------------------------------------------
[INFO] Total time: < 1 second
[INFO] Finished at: Fri May 01 08:25:53 BST 2009
[INFO] Final Memory: 1M/4M
[INFO] ------------------------------------------------------------------------


[2] **************************************************************************

[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[ERROR] FATAL ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Error building POM (may not be this project's POM).


Project ID: org.antlr:antlr:jar:null

Reason: Cannot find parent: org.antlr:antlr-master for project: org.antlr:antlr:
jar:null for project org.antlr:antlr:jar:null


[INFO] ------------------------------------------------------------------------
[INFO] Trace
org.apache.maven.reactor.MavenExecutionException: Cannot find parent: org.antlr:
antlr-master for project: org.antlr:antlr:jar:null for project org.antlr:antlr:j
ar:null
        at org.apache.maven.DefaultMaven.getProjects(DefaultMaven.java:432)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:300)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:137)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:356)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
        at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
        at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)

        at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: org.apache.maven.project.ProjectBuildingException: Cannot find parent
: org.antlr:antlr-master for project: org.antlr:antlr:jar:null for project org.a
ntlr:antlr:jar:null
        at org.apache.maven.project.DefaultMavenProjectBuilder.assembleLineage(D
efaultMavenProjectBuilder.java:1398)
        at org.apache.maven.project.DefaultMavenProjectBuilder.buildInternal(Def
aultMavenProjectBuilder.java:823)
        at org.apache.maven.project.DefaultMavenProjectBuilder.buildFromSourceFi
leInternal(DefaultMavenProjectBuilder.java:508)
        at org.apache.maven.project.DefaultMavenProjectBuilder.build(DefaultMave
nProjectBuilder.java:200)
        at org.apache.maven.DefaultMaven.getProject(DefaultMaven.java:632)
        at org.apache.maven.DefaultMaven.collectProjects(DefaultMaven.java:515)
        at org.apache.maven.DefaultMaven.getProjects(DefaultMaven.java:419)
        ... 11 more
Caused by: org.apache.maven.project.ProjectBuildingException: POM 'org.antlr:ant
lr-master' not found in repository: Unable to download the artifact from any rep
ository

  org.antlr:antlr-master:pom:3.1.4-SNAPSHOT

from the specified remote repositories:
  central (http://repo1.maven.org/maven2)

 for project org.antlr:antlr-master
        at org.apache.maven.project.DefaultMavenProjectBuilder.findModelFromRepo
sitory(DefaultMavenProjectBuilder.java:605)
        at org.apache.maven.project.DefaultMavenProjectBuilder.assembleLineage(D
efaultMavenProjectBuilder.java:1394)
        ... 17 more
Caused by: org.apache.maven.artifact.resolver.ArtifactNotFoundException: Unable
to download the artifact from any repository

  org.antlr:antlr-master:pom:3.1.4-SNAPSHOT

from the specified remote repositories:
  central (http://repo1.maven.org/maven2)


        at org.apache.maven.artifact.resolver.DefaultArtifactResolver.resolve(De
faultArtifactResolver.java:228)
        at org.apache.maven.artifact.resolver.DefaultArtifactResolver.resolve(De
faultArtifactResolver.java:90)
        at org.apache.maven.project.DefaultMavenProjectBuilder.findModelFromRepo
sitory(DefaultMavenProjectBuilder.java:558)
        ... 18 more
Caused by: org.apache.maven.wagon.ResourceDoesNotExistException: Unable to downl
oad the artifact from any repository
        at org.apache.maven.artifact.manager.DefaultWagonManager.getArtifact(Def
aultWagonManager.java:349)
        at org.apache.maven.artifact.resolver.DefaultArtifactResolver.resolve(De
faultArtifactResolver.java:216)
        ... 20 more
[INFO] ------------------------------------------------------------------------
[INFO] Total time: < 1 second
[INFO] Finished at: Fri May 01 08:52:56 BST 2009
[INFO] Final Memory: 1M/4M
[INFO] ------------------------------------------------------------------------


[3]********************************************************************************

[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[ERROR] FATAL ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Error building POM (may not be this project's POM).


Project ID: unknown

Reason: Could not find the model file 'C:\antlr-3.1.3\antlr3-maven-plugin'. for
project unknown


[INFO] ------------------------------------------------------------------------
[INFO] Trace
org.apache.maven.reactor.MavenExecutionException: Could not find the model file
'C:\antlr-3.1.3\antlr3-maven-plugin'. for project unknown
        at org.apache.maven.DefaultMaven.getProjects(DefaultMaven.java:432)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:300)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:137)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:356)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
        at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
        at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)

        at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: org.apache.maven.project.ProjectBuildingException: Could not find the
 model file 'C:\antlr-3.1.3\antlr3-maven-plugin'. for project unknown
        at org.apache.maven.project.DefaultMavenProjectBuilder.readModel(Default
MavenProjectBuilder.java:1585)
        at org.apache.maven.project.DefaultMavenProjectBuilder.buildFromSourceFi
leInternal(DefaultMavenProjectBuilder.java:506)
        at org.apache.maven.project.DefaultMavenProjectBuilder.build(DefaultMave
nProjectBuilder.java:200)
        at org.apache.maven.DefaultMaven.getProject(DefaultMaven.java:632)
        at org.apache.maven.DefaultMaven.collectProjects(DefaultMaven.java:515)
        at org.apache.maven.DefaultMaven.collectProjects(DefaultMaven.java:588)
        at org.apache.maven.DefaultMaven.getProjects(DefaultMaven.java:419)
        ... 11 more
Caused by: java.io.FileNotFoundException: C:\antlr-3.1.3\antlr3-maven-plugin (Th
e system cannot find the file specified)
        at java.io.FileInputStream.open(Native Method)
        at java.io.FileInputStream.<init>(FileInputStream.java:106)
        at hidden.org.codehaus.plexus.util.xml.XmlReader.<init>(XmlReader.java:1
24)
        at hidden.org.codehaus.plexus.util.xml.XmlStreamReader.<init>(XmlStreamR
eader.java:67)
        at hidden.org.codehaus.plexus.util.ReaderFactory.newXmlReader(ReaderFact
ory.java:113)
        at org.apache.maven.project.DefaultMavenProjectBuilder.readModel(Default
MavenProjectBuilder.java:1580)
        ... 17 more
[INFO] ------------------------------------------------------------------------
[INFO] Total time: < 1 second
[INFO] Finished at: Fri May 01 08:55:31 BST 2009
[INFO] Final Memory: 1M/4M
[INFO] ------------------------------------------------------------------------

From antlr at mirality.co.nz  Fri May  1 01:36:08 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 01 May 2009 20:36:08 +1200
Subject: [antlr-interest] Weird problem with semantic predicates.
 Incorrect warning message
In-Reply-To: <dc6ce1e40904301451v2fccfd3avdfa0f490c3f3d89a@mail.gmail.co
 m>
References: <dc6ce1e40904301451v2fccfd3avdfa0f490c3f3d89a@mail.gmail.com>
Message-ID: <20090501083635.4B8A1341841B@www.antlr.org>

At 09:51 1/05/2009, Gabriel Petrovay wrote:
 >ANTLR could either ignore ambiguous rules (if the computed k is
 >toooo large, give up) and proceed with normal computation.
 >Another thing ANTLR could do is be to compute k per-rule and
 >not per grammar.

k is already computed per-rule, or possibly even per-alt (in v3; 
in v2 you had to specify it explicitly).  But in cases where ANTLR 
can't figure it out it will default to k=1, since that gives the 
best performance (if not always the correct result, when the 
grammar is ambiguous).

It always helps to try to remove ambiguity and to keep your 
grammar as left-factored as possible.  This will not only make 
ANTLR's job easier, it will also improve runtime performance :)


From betelgeuse at gentoo.org  Fri May  1 08:11:24 2009
From: betelgeuse at gentoo.org (=?UTF-8?B?UGV0dGVyaSBSw6R0eQ==?=)
Date: Fri, 01 May 2009 18:11:24 +0300
Subject: [antlr-interest] Possible gunit bug (NPE) with empty input
Message-ID: <49FB111C.9010903@gentoo.org>

The attached grammar seems to parse fine when given empty input and
calling into the parsing method but with gunit I it gives me
NullPointerException.

betelgeuse at pena ~/python/depend $ gunit Depend.testsuite
-----------------------------------------------------------------------
executing testsuite for grammar:Depend with 108 tests
-----------------------------------------------------------------------
1 failures found:
test3 (depend, line5) -
expected: ()
actual: java.lang.NullPointerException

Regards,
Petteri
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Depend.g
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20090501/7cf101e1/attachment.pl 
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Depend.testsuite
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20090501/7cf101e1/attachment-0001.pl 

From jimi at temporal-wave.com  Fri May  1 08:28:05 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 01 May 2009 08:28:05 -0700
Subject: [antlr-interest] Flumoxed by Javascript Target
In-Reply-To: <ccbc40a00905010110o40f402aegf2d723347142b95c@mail.gmail.com>
References: <ccbc40a00904300805p1c65e391qcf3723ac51301b4@mail.gmail.com>	
	<49F9CA9D.9080207@temporal-wave.com>	
	<ccbc40a00904300934y3bbd372csddbc09779ed23bc6@mail.gmail.com>	
	<49F9D843.6030401@temporal-wave.com>	
	<1241111072.3237.22.camel@localhost.localdomain>	
	<49F9DB36.8030009@temporal-wave.com>
	<ccbc40a00905010110o40f402aegf2d723347142b95c@mail.gmail.com>
Message-ID: <49FB1505.3010103@temporal-wave.com>

Hugo Leeney wrote:
> I'm thinking I need to stick with http://www.antlr.org/download.html
> for my purposes. If I understand correctly there are files missing
> from the source distro there at the moment so a full build of that is
> not currently possible but should be soon. I can go into the separate
> directories (tool/ runtime/ ..) and build each in turn. Is that right?
>
> In the hope of providing useful information, this morning I downloaded
> http://www.antlr.org/hudson/job/ANTLR_Tool/ws//*zip*/workspace.zip. I
> unzipped and executed 'mvn -Dmaven.test.skip=true'. Console output is
> included below [1]. Granted, this was a random effort to learn
> something; I don't know if this should work; I don't even know if
> ANTLR_Tool was the right component to try - the name ANTLR_Tool is
> slightly confusing with the tool/ directory in the source distro.
>
> Also taking either pom.xml from that same hudson download and dropping
> it in the regular source download top directory produces [2].
>   
Yeah - you need to be able to follow the instructions in BUILD.txt and 
my feeling is that without a perforce account, you can't do that know. I 
am going to fix up the source jars today.

Jim

From steerr at bellsouth.net  Fri May  1 11:32:17 2009
From: steerr at bellsouth.net (Bill Steer)
Date: Fri, 01 May 2009 14:32:17 -0400
Subject: [antlr-interest] C# code generation errors
Message-ID: <49FB4031.4020407@bellsouth.net>

I've now found four errors in the generation of the C# code for my grammar:

1. A statement is missing a semicolon
2. A statement is missing a cast from IList to ArrayList
3. A statement contains "Convert.toInt32" instead of "Convert.ToInt32"
4. An exception variable is "eee1" but it is referenced in the 'catch' 
block as "eee"

Attached is the grammar (certainly not guaranteed to be correct!) that 
generates the errors.

Do I need to do anything else to report the errors?

Bill

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: SGI.g
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20090501/4aac1b2e/attachment.pl 

From sharwell at pixelminegames.com  Fri May  1 11:44:00 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Fri, 1 May 2009 13:44:00 -0500
Subject: [antlr-interest] C# code generation errors
In-Reply-To: <49FB4031.4020407@bellsouth.net>
References: <49FB4031.4020407@bellsouth.net>
Message-ID: <86403CA0939415448BCCB83855EFE09AA67FD2@Bloodymary.ironwillgames.com>

Hi Bill,

In the 'expr' rule, you have the following action that is missing a
semicolon:
{$value = $e.value}

In the 'atom' rule, you have an action with a call to toInt32 instead of
ToInt32.

You should add a cast to ArrayList in your action in the 'elist' rule.

I can't reproduce the 'eee' error; it may have been corrected since the
build you are using. I do seem to remember it being a problem in the
past that was corrected. Johannes would know exactly which build
corrected this. :)

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Bill Steer
Sent: Friday, May 01, 2009 1:32 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] C# code generation errors

I've now found four errors in the generation of the C# code for my
grammar:

1. A statement is missing a semicolon
2. A statement is missing a cast from IList to ArrayList 3. A statement
contains "Convert.toInt32" instead of "Convert.ToInt32"
4. An exception variable is "eee1" but it is referenced in the 'catch' 
block as "eee"

Attached is the grammar (certainly not guaranteed to be correct!) that
generates the errors.

Do I need to do anything else to report the errors?

Bill


From JALuber at gmx.de  Fri May  1 12:42:36 2009
From: JALuber at gmx.de (Johannes Luber)
Date: Fri, 01 May 2009 21:42:36 +0200
Subject: [antlr-interest] C# code generation errors
In-Reply-To: <86403CA0939415448BCCB83855EFE09AA67FD2@Bloodymary.ironwillgames.com>
References: <49FB4031.4020407@bellsouth.net>
	<86403CA0939415448BCCB83855EFE09AA67FD2@Bloodymary.ironwillgames.com>
Message-ID: <20090501194236.313380@gmx.net>

> Hi Bill,
> 
> In the 'expr' rule, you have the following action that is missing a
> semicolon:
> {$value = $e.value}
> 
> In the 'atom' rule, you have an action with a call to toInt32 instead of
> ToInt32.
> 
> You should add a cast to ArrayList in your action in the 'elist' rule.
> 
> I can't reproduce the 'eee' error; it may have been corrected since the
> build you are using. I do seem to remember it being a problem in the
> past that was corrected. Johannes would know exactly which build
> corrected this. :)

I think it was version 3.1.3. As it has some other bug fixes everyone should upgrade to it. Unfortunately, ANTLRworks uses 3.1.2 so either you manage to update ANTLRworks or use the command tool separately.

Johannes

> 
> Sam
> 
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Bill Steer
> Sent: Friday, May 01, 2009 1:32 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] C# code generation errors
> 
> I've now found four errors in the generation of the C# code for my
> grammar:
> 
> 1. A statement is missing a semicolon
> 2. A statement is missing a cast from IList to ArrayList 3. A statement
> contains "Convert.toInt32" instead of "Convert.ToInt32"
> 4. An exception variable is "eee1" but it is referenced in the 'catch' 
> block as "eee"
> 
> Attached is the grammar (certainly not guaranteed to be correct!) that
> generates the errors.
> 
> Do I need to do anything else to report the errors?
> 
> Bill
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address

-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt? Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger01

From antlr at mirality.co.nz  Fri May  1 12:55:14 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 02 May 2009 07:55:14 +1200
Subject: [antlr-interest] C# code generation errors
In-Reply-To: <49FB4031.4020407@bellsouth.net>
References: <49FB4031.4020407@bellsouth.net>
Message-ID: <20090501195541.80AB53418516@www.antlr.org>

At 06:32 2/05/2009, Bill Steer wrote:
 >INT		: (DIGIT)+ ;
 >FLOAT	:	INT
 >		| INT '.' INT
 >		| '.' INT
 >;
 >CONSTANT:	FLOAT
 >		|	FLOAT ('e' | 'E') ('+' | '-')? INT
 >;
[...]
 >IDENT	:	LETTER (LETTER | DIGIT)* ;
 >REGISTER:	IDENT ('!'IDENT)* ;

You're quite likely to run into parsing trouble with these rule 
defintions.  Remember that lexer rules are executed without parser 
context; ANTLR will choose a rule based solely on what the input 
looks like, so having multiple top-level lexer rules that accept 
exactly the same input isn't really a good idea.

You should probably merge and left-factor these rules, and modify 
the parser rules to eg. accept either an INT or a FLOAT token in 
contexts where it is expecting a FLOAT, and an IDENT or REGISTER 
where it is expecting a REGISTER.  (And the distinction between 
FLOAT and CONSTANT doesn't make much sense to me.  Shouldn't that 
be part of FLOAT?)


From steve at hibernate.org  Fri May  1 13:14:34 2009
From: steve at hibernate.org (Steve Ebersole)
Date: Fri, 01 May 2009 15:14:34 -0500
Subject: [antlr-interest] "explosion" rewrite
Message-ID: <1241208874.3426.85.camel@localhost.localdomain>

Is there a syntax to "explode" a subrule result (sorry don't know a
better term).

I have a rule:

sortSpecification
    : sortKey collationSpecification? orderingSpecification?
        -> ^( SORT_SPEC sortKey collationSpecification?
orderingSpecification? )
    ;

The result of the sortKey subrule could be a Tree of type VECTOR_EXPR
(its a "row value constructor" for those familiar with SQL). 

In terms of eventual output, this rule translates as "(sort_key1,
sort_key2) asc" where "sort_key1, sort_key2)" is the VECTOR_EXPR.  

Instead what I need to have happen is "sort_key1 asc, sort_key2 asc".

I started down the path of trying an @after in the sortSpecification and
calling out to some java code to mutate the tree manually.  But I'd
prefer to keep this in the grammar if at all possible.


-- 
Steve Ebersole <steve at hibernate.org>
Hibernate.org


From parrt at cs.usfca.edu  Fri May  1 13:39:08 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 1 May 2009 13:39:08 -0700
Subject: [antlr-interest] "explosion" rewrite
In-Reply-To: <1241208874.3426.85.camel@localhost.localdomain>
References: <1241208874.3426.85.camel@localhost.localdomain>
Message-ID: <65E9EA70-85F7-458B-989A-166C032C6583@cs.usfca.edu>

Hi Steve, what's the tree you need rather than the output?
Thanks,
T
On May 1, 2009, at 1:14 PM, Steve Ebersole wrote:

> Is there a syntax to "explode" a subrule result (sorry don't know a
> better term).
>
> I have a rule:
>
> sortSpecification
>    : sortKey collationSpecification? orderingSpecification?
>        -> ^( SORT_SPEC sortKey collationSpecification?
> orderingSpecification? )
>    ;
>
> The result of the sortKey subrule could be a Tree of type VECTOR_EXPR
> (its a "row value constructor" for those familiar with SQL).
>
> In terms of eventual output, this rule translates as "(sort_key1,
> sort_key2) asc" where "sort_key1, sort_key2)" is the VECTOR_EXPR.
>
> Instead what I need to have happen is "sort_key1 asc, sort_key2 asc".
>
> I started down the path of trying an @after in the sortSpecification  
> and
> calling out to some java code to mutate the tree manually.  But I'd
> prefer to keep this in the grammar if at all possible.
>
>
> -- 
> Steve Ebersole <steve at hibernate.org>
> Hibernate.org
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From jimi at temporal-wave.com  Fri May  1 13:50:47 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 01 May 2009 13:50:47 -0700
Subject: [antlr-interest] "explosion" rewrite
In-Reply-To: <1241208874.3426.85.camel@localhost.localdomain>
References: <1241208874.3426.85.camel@localhost.localdomain>
Message-ID: <49FB60A7.6000709@temporal-wave.com>

Steve Ebersole wrote:
> Is there a syntax to "explode" a subrule result (sorry don't know a
> better term).
>
> I have a rule:
>
> sortSpecification
>     : sortKey collationSpecification? orderingSpecification?
>         -> ^( SORT_SPEC sortKey collationSpecification?
> orderingSpecification? )
>     ;
>
> The result of the sortKey subrule could be a Tree of type VECTOR_EXPR
> (its a "row value constructor" for those familiar with SQL). 
>
> In terms of eventual output, this rule translates as "(sort_key1,
> sort_key2) asc" where "sort_key1, sort_key2)" is the VECTOR_EXPR.  
>
> Instead what I need to have happen is "sort_key1 asc, sort_key2 asc".
>
> I started down the path of trying an @after in the sortSpecification and
> calling out to some java code to mutate the tree manually.  But I'd
> prefer to keep this in the grammar if at all possible.
>
>
>   
I would need to see your sortKey rule but you can do things like this:

x : a+=something x? y? ->^(NODE $a $x? $y)+

That will probably get you on track. Also, you could reorder the tree 
and more easily pick up the order:

-> ^( SORT_SPEC collationSpecification?
orderingSpecification? sortKey)

Assuming the first two optional sequences have a root node. Then you could assume that the elements in sortKey have whatever you have established in the ordering.

If what you are trying to do is parse a SQL statement you could try inputting this into my online SQL parser and looking at the tree output:

http://www.temporal-wave.com

Jim

From jimi at temporal-wave.com  Fri May  1 15:31:39 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 01 May 2009 15:31:39 -0700
Subject: [antlr-interest] New Maven artifacts, some fixes, buidlable source
Message-ID: <49FB784B.4060909@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090501/732cc978/attachment.html 

From michael.bedward at gmail.com  Fri May  1 16:22:38 2009
From: michael.bedward at gmail.com (Michael Bedward)
Date: Sat, 2 May 2009 09:22:38 +1000
Subject: [antlr-interest] New Maven artifacts, some fixes,
	buidlable 	source
In-Reply-To: <49FB784B.4060909@temporal-wave.com>
References: <49FB784B.4060909@temporal-wave.com>
Message-ID: <e24c4c270905011622r1e256ac3vbc875df43d94ff0@mail.gmail.com>

many thanks for all that Jim !

Michael

From steve at hibernate.org  Fri May  1 17:03:46 2009
From: steve at hibernate.org (Steve Ebersole)
Date: Fri, 01 May 2009 19:03:46 -0500
Subject: [antlr-interest] "explosion" rewrite
In-Reply-To: <65E9EA70-85F7-458B-989A-166C032C6583@cs.usfca.edu>
References: <1241208874.3426.85.camel@localhost.localdomain>
	<65E9EA70-85F7-458B-989A-166C032C6583@cs.usfca.edu>
Message-ID: <1241222626.3426.95.camel@localhost.localdomain>

Lets say sortKey comes back as 
^( VECTOR_EXPR 
    ^( COLUMN 
        ALIAS_REF["a"] IDENTIFIER["col1"]
    )
    ^( COLUMN 
        ALIAS_REF["a"] IDENTIFIER["col2"]
    )
)

I'd really like sortSpecification to go from:

^( SORT_SPEC ^( VECTOR_EXPR["see above"] ) )

to:

^( SORT_SPEC ^( COLUMN ALIAS_REF["a"] IDENTIFIER["col1"] ) )
^( SORT_SPEC ^( COLUMN ALIAS_REF["a"] IDENTIFIER["col2"] ) )

so its gets split from one Tree to two

On Fri, 2009-05-01 at 13:39 -0700, Terence Parr wrote:
> Hi Steve, what's the tree you need rather than the output?
> Thanks,
> T
> On May 1, 2009, at 1:14 PM, Steve Ebersole wrote:
> 
> > Is there a syntax to "explode" a subrule result (sorry don't know a
> > better term).
> >
> > I have a rule:
> >
> > sortSpecification
> >    : sortKey collationSpecification? orderingSpecification?
> >        -> ^( SORT_SPEC sortKey collationSpecification?
> > orderingSpecification? )
> >    ;
> >
> > The result of the sortKey subrule could be a Tree of type VECTOR_EXPR
> > (its a "row value constructor" for those familiar with SQL).
> >
> > In terms of eventual output, this rule translates as "(sort_key1,
> > sort_key2) asc" where "sort_key1, sort_key2)" is the VECTOR_EXPR.
> >
> > Instead what I need to have happen is "sort_key1 asc, sort_key2 asc".
> >
> > I started down the path of trying an @after in the sortSpecification  
> > and
> > calling out to some java code to mutate the tree manually.  But I'd
> > prefer to keep this in the grammar if at all possible.
> >
> >
> > -- 
> > Steve Ebersole <steve at hibernate.org>
> > Hibernate.org
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
-- 
Steve Ebersole <steve at hibernate.org>
Hibernate.org


From parrt at cs.usfca.edu  Fri May  1 17:08:41 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 1 May 2009 17:08:41 -0700
Subject: [antlr-interest] "explosion" rewrite
In-Reply-To: <1241222626.3426.95.camel@localhost.localdomain>
References: <1241208874.3426.85.camel@localhost.localdomain>
	<65E9EA70-85F7-458B-989A-166C032C6583@cs.usfca.edu>
	<1241222626.3426.95.camel@localhost.localdomain>
Message-ID: <DB0731F3-7D96-4AB2-9719-4A2A49AB635F@cs.usfca.edu>


On May 1, 2009, at 5:03 PM, Steve Ebersole wrote:

> Lets say sortKey comes back as
> ^( VECTOR_EXPR
>    ^( COLUMN
>        ALIAS_REF["a"] IDENTIFIER["col1"]
>    )
>    ^( COLUMN
>        ALIAS_REF["a"] IDENTIFIER["col2"]
>    )
> )
>
> I'd really like sortSpecification to go from:
>
> ^( SORT_SPEC ^( VECTOR_EXPR["see above"] ) )
>
> to:
>
> ^( SORT_SPEC ^( COLUMN ALIAS_REF["a"] IDENTIFIER["col1"] ) )
> ^( SORT_SPEC ^( COLUMN ALIAS_REF["a"] IDENTIFIER["col2"] ) )
>
> so its gets split from one Tree to two

Ok, that's easy enough I think. Have sortKey not return VECTOR_EXPR as  
the root; you don't want it. THen, if we are ignoring the other rules  
for now, this is what you want:

> sortSpecification : sortKey  -> ^( SORT_SPEC sortKey  )+  ;

The + on the outside duplicates the root, one for each child pulled  
from sortKey...ack, wait.  Will it see the tree coming back from  
sortKey as a "list" or a single element...hmm...try that first and see  
what happens.

Then, if that works, we can think about the rule references I deleted.

Ter

From steve at hibernate.org  Fri May  1 17:08:55 2009
From: steve at hibernate.org (Steve Ebersole)
Date: Fri, 01 May 2009 19:08:55 -0500
Subject: [antlr-interest] "explosion" rewrite
In-Reply-To: <49FB60A7.6000709@temporal-wave.com>
References: <1241208874.3426.85.camel@localhost.localdomain>
	<49FB60A7.6000709@temporal-wave.com>
Message-ID: <1241222935.3426.99.camel@localhost.localdomain>


sortKey : expression;

expression
    : QUOTED_IDENTIFIER -> ^( COLUMN ALIAS_REF[Template.TEMPLATE]
QUOTED_IDENTIFIER[$QUOTED_IDENTIFIER] )
    // we treat the so-called standard functions differently because
they are handled differently by the HQL lexer which we also use here...
    | standardFunction
    | literal
    // not identDotIdentStructure because we dont want
QUOTED_IDENTIFIERs is here
    | ( IDENTIFIER ( DOT IDENTIFIER )* LEFT_PAREN ) => generalFunction
    // otherwise we fully expect a dot-identifier series, and then we
just need to decode the semantic of that structure
    | identDotIdentStructure
        -> { ( isFunctionName($identDotIdentStructure.text) ) }?
              // we have a function with parens (thus no args)
              ^( FUNCTION[$identDotIdentStructure.start,
$identDotIdentStructure.text] )
        -> { ( isPropertyName($identDotIdentStructure.text) ) }?
              // we have a reference to a mapped property
              { buildPropertyColumns( $identDotIdentStructure.tree ) }
        -> { ( $identDotIdentStructure.tree.getType() == DOT ) }?
              // we have a reference to a column which is already
qualified
              identDotIdentStructure
        ->
              // we have a reference to a column which is not qualified
              ^( COLUMN ALIAS_REF[Template.TEMPLATE]
IDENTIFIER[$identDotIdentStructure.start,$identDotIdentStructure.text] )
    ;


The piece of interest here is fragment in expression that reads

-> { ( isPropertyName($identDotIdentStructure.text) ) }?
              // we have a reference to a mapped property
              { buildPropertyColumns( $identDotIdentStructure.tree ) }

buildPropertyColumns() is a java action where I account for the fact
that in Hibernate a single property might map to multiple columns; in
that case buildPropertyColumns() returns the VECTOR_EXPR


On Fri, 2009-05-01 at 13:50 -0700, Jim Idle wrote:
> Steve Ebersole wrote:
> > Is there a syntax to "explode" a subrule result (sorry don't know a
> > better term).
> >
> > I have a rule:
> >
> > sortSpecification
> >     : sortKey collationSpecification? orderingSpecification?
> >         -> ^( SORT_SPEC sortKey collationSpecification?
> > orderingSpecification? )
> >     ;
> >
> > The result of the sortKey subrule could be a Tree of type VECTOR_EXPR
> > (its a "row value constructor" for those familiar with SQL). 
> >
> > In terms of eventual output, this rule translates as "(sort_key1,
> > sort_key2) asc" where "sort_key1, sort_key2)" is the VECTOR_EXPR.  
> >
> > Instead what I need to have happen is "sort_key1 asc, sort_key2 asc".
> >
> > I started down the path of trying an @after in the sortSpecification and
> > calling out to some java code to mutate the tree manually.  But I'd
> > prefer to keep this in the grammar if at all possible.
> >
> >
> >   
> I would need to see your sortKey rule but you can do things like this:
> 
> x : a+=something x? y? ->^(NODE $a $x? $y)+
> 
> That will probably get you on track. Also, you could reorder the tree 
> and more easily pick up the order:
> 
> -> ^( SORT_SPEC collationSpecification?
> orderingSpecification? sortKey)
> 
> Assuming the first two optional sequences have a root node. Then you could assume that the elements in sortKey have whatever you have established in the ordering.
> 
> If what you are trying to do is parse a SQL statement you could try inputting this into my online SQL parser and looking at the tree output:
> 
> http://www.temporal-wave.com
> 
> Jim
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
-- 
Steve Ebersole <steve at hibernate.org>
Hibernate.org


From steve at hibernate.org  Fri May  1 17:30:30 2009
From: steve at hibernate.org (Steve Ebersole)
Date: Fri, 01 May 2009 19:30:30 -0500
Subject: [antlr-interest] "explosion" rewrite
In-Reply-To: <DB0731F3-7D96-4AB2-9719-4A2A49AB635F@cs.usfca.edu>
References: <1241208874.3426.85.camel@localhost.localdomain>
	<65E9EA70-85F7-458B-989A-166C032C6583@cs.usfca.edu>
	<1241222626.3426.95.camel@localhost.localdomain>
	<DB0731F3-7D96-4AB2-9719-4A2A49AB635F@cs.usfca.edu>
Message-ID: <1241224230.3426.104.camel@localhost.localdomain>

The problem is that sometimes you want the VECTOR_EXPR as such.  And
when you want which is not evident from the context of executing these
'expression' rules.  Perhaps this is a use-case for scopes?

And we haven't even gotten to the difficult cases of handling these
tuples (think something like VECTOR_EXPR = VECTOR_EXPR) ;)


On Fri, 2009-05-01 at 17:08 -0700, Terence Parr wrote:
> On May 1, 2009, at 5:03 PM, Steve Ebersole wrote:
> 
> > Lets say sortKey comes back as
> > ^( VECTOR_EXPR
> >    ^( COLUMN
> >        ALIAS_REF["a"] IDENTIFIER["col1"]
> >    )
> >    ^( COLUMN
> >        ALIAS_REF["a"] IDENTIFIER["col2"]
> >    )
> > )
> >
> > I'd really like sortSpecification to go from:
> >
> > ^( SORT_SPEC ^( VECTOR_EXPR["see above"] ) )
> >
> > to:
> >
> > ^( SORT_SPEC ^( COLUMN ALIAS_REF["a"] IDENTIFIER["col1"] ) )
> > ^( SORT_SPEC ^( COLUMN ALIAS_REF["a"] IDENTIFIER["col2"] ) )
> >
> > so its gets split from one Tree to two
> 
> Ok, that's easy enough I think. Have sortKey not return VECTOR_EXPR as  
> the root; you don't want it. THen, if we are ignoring the other rules  
> for now, this is what you want:
> 
> > sortSpecification : sortKey  -> ^( SORT_SPEC sortKey  )+  ;
> 
> The + on the outside duplicates the root, one for each child pulled  
> from sortKey...ack, wait.  Will it see the tree coming back from  
> sortKey as a "list" or a single element...hmm...try that first and see  
> what happens.
> 
> Then, if that works, we can think about the rule references I deleted.
> 
> Ter
-- 
Steve Ebersole <steve at hibernate.org>
Hibernate.org


From jimi at temporal-wave.com  Sat May  2 09:22:24 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 02 May 2009 09:22:24 -0700
Subject: [antlr-interest] "explosion" rewrite
In-Reply-To: <1241222935.3426.99.camel@localhost.localdomain>
References: <1241208874.3426.85.camel@localhost.localdomain>	
	<49FB60A7.6000709@temporal-wave.com>
	<1241222935.3426.99.camel@localhost.localdomain>
Message-ID: <49FC7340.7050602@temporal-wave.com>

Steve Ebersole wrote:
> sortKey : expression;
>
> expression
>     : QUOTED_IDENTIFIER -> ^( COLUMN ALIAS_REF[Template.TEMPLATE]
> QUOTED_IDENTIFIER[$QUOTED_IDENTIFIER] )
>     // we treat the so-called standard functions differently because
> they are handled differently by the HQL lexer which we also use here...
>     | standardFunction
>     | literal
>     // not identDotIdentStructure because we dont want
> QUOTED_IDENTIFIERs is here
>     | ( IDENTIFIER ( DOT IDENTIFIER )* LEFT_PAREN ) => generalFunction
>     // otherwise we fully expect a dot-identifier series, and then we
> just need to decode the semantic of that structure
>     | identDotIdentStructure
>         -> { ( isFunctionName($identDotIdentStructure.text) ) }?
>               // we have a function with parens (thus no args)
>               ^( FUNCTION[$identDotIdentStructure.start,
> $identDotIdentStructure.text] )
>         -> { ( isPropertyName($identDotIdentStructure.text) ) }?
>               // we have a reference to a mapped property
>               { buildPropertyColumns( $identDotIdentStructure.tree ) }
>         -> { ( $identDotIdentStructure.tree.getType() == DOT ) }?
>               // we have a reference to a column which is already
> qualified
>               identDotIdentStructure
>         ->
>               // we have a reference to a column which is not qualified
>               ^( COLUMN ALIAS_REF[Template.TEMPLATE]
> IDENTIFIER[$identDotIdentStructure.start,$identDotIdentStructure.text] )
>     ;
>
>
> The piece of interest here is fragment in expression that reads
>
> -> { ( isPropertyName($identDotIdentStructure.text) ) }?
>               // we have a reference to a mapped property
>               { buildPropertyColumns( $identDotIdentStructure.tree ) }
>
> buildPropertyColumns() is a java action where I account for the fact
> that in Hibernate a single property might map to multiple columns; in
> that case buildPropertyColumns() returns the VECTOR_EXPR
>
>   
Hi Steve,

As the expression does not give you context as to whether you need the 
vector node or not, I think that you have the following options:

1) Change expression to accept a parameter that says whether you need 
the vector or not, pass this to your Java rule. So that you don't need 
to change every reference to expression you can rename the current one 
to expression_xyz then use expression (which calls xyz with 
needsVector=true) and expression_novector and sets it to false. The 
catch here is if you have any predicates in that expression rule that 
may be hoisted, in which case your local variable will be out of scope 
in the calling generated code.

2) As I think you mention in another email, keep a scope at a level high 
enough in the tree that can hold flags and pass them in to your java code.

3) Have the expression return a value that says whether the expression 
is VECTORABLE or not. In rules that require the node, then call a 
different rule that calls expression and rewrites with a VECTOR node if 
it is required. The ability to do this of course depends on whether the 
return from your Java function can be just rewritten with a node.

It may be that your grammar can be "re-worked" not to need such nodes 
though, or to produce a tree that while it may not be absolutely 
intuitive when you look at it, is obvious when walking it that you 
should treat the children in one way or another. I always try to avoid 
as much logic as I can in parsing and do everything that can be in the 
walkers. Perhaps you can wrap the expression in a higher node which 
means it will take a different path through the tree walk. Many 
different ways to crack a nut of course.

Jim





From jsmith at infotrustgroup.com  Sat May  2 14:45:16 2009
From: jsmith at infotrustgroup.com (Jason Smith)
Date: Sat, 2 May 2009 15:45:16 -0600
Subject: [antlr-interest] Maven plugin
Message-ID: <47CD64D7E22C3949A40CA4751EB20E811174164E76@boumail.infotrustgroup.com>

I am interested in finding more information on the antlr3-maven-plugin v. 3.1.3-1.  I don't seem to be able to Google the web page yet - the 1.0 plugin keeps popping up.  The published POM doesn't appear to have source code repository information or a link to an official project website.  I haven't noticed anything that points me in the right direction on the antlr.org page.

Can someone point me in the right direction?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090502/6eda5f05/attachment.html 

From jimi at temporal-wave.com  Sat May  2 15:25:33 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 02 May 2009 15:25:33 -0700
Subject: [antlr-interest] Maven plugin
In-Reply-To: <47CD64D7E22C3949A40CA4751EB20E811174164E76@boumail.infotrustgroup.com>
References: <47CD64D7E22C3949A40CA4751EB20E811174164E76@boumail.infotrustgroup.com>
Message-ID: <49FCC85D.3070601@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090502/60e04a69/attachment.html 

From tbender at stud.hs-heilbronn.de  Sun May  3 05:01:06 2009
From: tbender at stud.hs-heilbronn.de (Tilman Bender)
Date: Sun, 3 May 2009 14:01:06 +0200
Subject: [antlr-interest] New Maven artifacts, some fixes,
	buidlable source
In-Reply-To: <49FB784B.4060909@temporal-wave.com>
References: <49FB784B.4060909@temporal-wave.com>
Message-ID: <754A5D0B-6AFE-40A7-BAC9-C71810E1888B@stud.hs-heilbronn.de>

Hi all,

Jim, first of all: Thank you veeery much for the gunit-plugin and the  
long anticipated fix to antlr3-maven-plugin :-)

Keen on using the new feature I followed your instructions to include  
the plugin into my projects.
Unfortunately updating failed with:

mvn test
[INFO] Scanning for projects...
[INFO]  
------------------------------------------------------------------------
[INFO] Building AirthPlus Compiler
[INFO]    task-segment: [test]
[INFO]  
------------------------------------------------------------------------
[INFO] snapshot org.antlr:antlr3-maven-plugin:3.1.4-SNAPSHOT: checking  
for updates from antlr-snapshot
Downloading: http://antlr.org/antlr-snapshot/org/antlr/antlr3-maven-plugin/3.1.4-SNAPSHOT/antlr3-maven-plugin-3.1.4-20090501.221241-30.pom
11K downloaded  (antlr3-maven-plugin-3.1.4-20090501.221241-30.pom)
[INFO]  
------------------------------------------------------------------------
[ERROR] BUILD FAILURE
[INFO]  
------------------------------------------------------------------------
[INFO] A required plugin was not found: Plugin could not be found -  
check that the goal name is correct: Unable to download the artifact  
from any repository

I could fix this by using PluginRepository instead of Repository.

	<pluginRepositories>
		<!--
         This is the ANTLR repository.
         -->
		<pluginRepository>
			<id>antlr-snapshot</id>
			<name>ANTLR Testing Snapshot Repository</name>
			<url>http://antlr.org/antlr-snapshot</url>
			<snapshots>
				<enabled>true</enabled>
				<updatePolicy>always</updatePolicy>
			</snapshots>
			<releases>
				<enabled>false</enabled>
			</releases>
		</pluginRepository>
	</pluginRepositories>


Tilman Bender
Student des Software Engineering
Hochschule Heilbronn
tbender at stud.hs-heilbronn.de



Am 02.05.2009 um 00:31 schrieb Jim Idle:

> 1) Add a reference to the ANTLR snapshot repository at the <project>  
> level:
>
>     <!--
>
>     Inform Maven of the ANTLR snapshot repository, which it will
>     need to consult to get the latest snapshot build of the runtime  
> and tool
>     if it was not built and installed locally.
>     -->
>     <repositories>
>
>       <!--
>         This is the ANTLR repository.
>         -->
>         <repository>
>             <id>antlr-snapshot</id>
>             <name>ANTLR Testing Snapshot Repository</name>
>             <url>http://antlr.org/antlr-snapshot</url>
>             <snapshots>
>                 <enabled>true</enabled>
>                 <updatePolicy>always</updatePolicy>
>             </snapshots>
>
>             <releases>
>                 <enabled>false</enabled>
>             </releases>
>
>         </repository>
>
>     </repositories>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090503/97df50eb/attachment.html 

From jimi at temporal-wave.com  Sun May  3 09:17:06 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun, 03 May 2009 09:17:06 -0700
Subject: [antlr-interest] New Maven artifacts, some fixes,
	buidlable source
In-Reply-To: <754A5D0B-6AFE-40A7-BAC9-C71810E1888B@stud.hs-heilbronn.de>
References: <49FB784B.4060909@temporal-wave.com>
	<754A5D0B-6AFE-40A7-BAC9-C71810E1888B@stud.hs-heilbronn.de>
Message-ID: <49FDC382.60700@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090503/d887cd83/attachment.html 

From aravind_ezee at yahoo.co.in  Sun May  3 22:38:45 2009
From: aravind_ezee at yahoo.co.in (aravind krishnamoorthy)
Date: Mon, 4 May 2009 11:08:45 +0530 (IST)
Subject: [antlr-interest] Help: Deserialize AST
Message-ID: <376196.98988.qm@web8506.mail.in.yahoo.com>

Hi All,

?? I got a very useful information of serializing an AST
object, using the xmlSerialize methof of the "BaseAST" class in antlr.
I was able to serialize it successfully. But I am not able to
deserialize those back again.

? If anyone could help me on this I would be helpful.

Thanks,
Aravind


      Bring your gang together. Do your thing. Find your favourite Yahoo! group at http://in.promos.yahoo.com/groups/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090504/dbbf063e/attachment.html 

From recluze at gmail.com  Sun May  3 23:34:55 2009
From: recluze at gmail.com (Nauman)
Date: Mon, 4 May 2009 11:34:55 +0500
Subject: [antlr-interest] Problem with StringTemplate
Message-ID: <179887f50905032334v7da62566tf6e3428379630ac1@mail.gmail.com>

Hi all,

I'm relatively new with Antlr and I'm having a little trouble with
StringTemplate. I tried searching on the mailing lists but without any luck.


I'm trying to use the StringTemplate in a simple example. I get this error
when I try to run my test file.
*
*
>
> *Exception in thread "main" java.lang.NoClassDefFoundError:
> antlr/TokenStream*
>     at Test.main(Test.java:17)
> Caused by: java.lang.ClassNotFoundException: antlr.TokenStream
>     at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
>     at java.security.AccessController.doPrivileged(Native Method)
>     at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
>     at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
>     at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:276)
>     at java.lang.ClassLoader.loadClass(ClassLoader.java:251)
>     at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)
>     ... 1 more
>

I'm using StringTemplate 3.2 and antlr 3.1.3. I can see that TokenStream
class is present in the org.antlr.runtime package. The buildpath is set
correctly and both stringtemplate and antlr jars are referenced properly.

Is there a version conflict here? The StringTemplate comes with antlr 2.7.7
but I don't want to use that. I want to use antlr v3. Can anyone help me out
here?

Thanks,
Nauman

Research Associate
Security Engineering Research Group
Institute of Management Sciences
Peshawar, Pakistan

Blog: http://recluze.wordpress.com
Group: http://serg.imsciences.edu.pk
Wiki: http://serg.imsciences.edu.pk/wiki
Art gallery: http://recluse.gfxartist.com

Contact number: +92 (0) 323 93 66 136
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090504/85193717/attachment.html 

From micha-1 at fantasymail.de  Sun May  3 23:57:29 2009
From: micha-1 at fantasymail.de (Michael)
Date: Mon, 4 May 2009 08:57:29 +0200
Subject: [antlr-interest] Problem with StringTemplate
In-Reply-To: <179887f50905032334v7da62566tf6e3428379630ac1@mail.gmail.com>
References: <179887f50905032334v7da62566tf6e3428379630ac1@mail.gmail.com>
Message-ID: <200905040857.29212.micha-1@fantasymail.de>

Am Monday 04 May 2009 08:34:55 schrieb Nauman:
> Hi all,
>
> I'm relatively new with Antlr and I'm having a little trouble with
> StringTemplate. I tried searching on the mailing lists but without any
> luck.
>
>
> I'm trying to use the StringTemplate in a simple example. I get this error
> when I try to run my test file.
> *
> *
> I'm using StringTemplate 3.2 and antlr 3.1.3. I can see that TokenStream
> class is present in the org.antlr.runtime package. The buildpath is set
> correctly and both stringtemplate and antlr jars are referenced properly.
>
> Is there a version conflict here? The StringTemplate comes with antlr 2.7.7
> but I don't want to use that. I want to use antlr v3. Can anyone help me
> out here?

you are using it: antlr3 depends on it, so add it to the classpath

cheers
 Michael

From recluze at gmail.com  Sun May  3 23:58:42 2009
From: recluze at gmail.com (Nauman)
Date: Mon, 4 May 2009 11:58:42 +0500
Subject: [antlr-interest] Problem with StringTemplate
In-Reply-To: <200905040857.29212.micha-1@fantasymail.de>
References: <179887f50905032334v7da62566tf6e3428379630ac1@mail.gmail.com> 
	<200905040857.29212.micha-1@fantasymail.de>
Message-ID: <179887f50905032358o21b60c22w96a277352891b67f@mail.gmail.com>

Thanks for the help. I was confusing it with antlr runtime jar. I added the
2.7.7 and it works now :)

Thanks again.

On Mon, May 4, 2009 at 11:57 AM, Michael <micha-1 at fantasymail.de> wrote:

> Am Monday 04 May 2009 08:34:55 schrieb Nauman:
> > Hi all,
> >
> > I'm relatively new with Antlr and I'm having a little trouble with
> > StringTemplate. I tried searching on the mailing lists but without any
> > luck.
> >
> >
> > I'm trying to use the StringTemplate in a simple example. I get this
> error
> > when I try to run my test file.
> > *
> > *
> > I'm using StringTemplate 3.2 and antlr 3.1.3. I can see that TokenStream
> > class is present in the org.antlr.runtime package. The buildpath is set
> > correctly and both stringtemplate and antlr jars are referenced properly.
> >
> > Is there a version conflict here? The StringTemplate comes with antlr
> 2.7.7
> > but I don't want to use that. I want to use antlr v3. Can anyone help me
> > out here?
>
> you are using it: antlr3 depends on it, so add it to the classpath
>
> cheers
>  Michael
>



-- 
Nauman

Research Associate
Security Engineering Research Group
Institute of Management Sciences
Peshawar, Pakistan

Blog: http://recluze.wordpress.com
Group: http://serg.imsciences.edu.pk
Wiki: http://serg.imsciences.edu.pk/wiki
Art gallery: http://recluse.gfxartist.com

Contact number: +92 (0) 323 93 66 136
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090504/1d203989/attachment.html 

From sven.van.echelpoel at empolis.com  Mon May  4 00:43:10 2009
From: sven.van.echelpoel at empolis.com (Sven Van Echelpoel)
Date: Mon, 04 May 2009 09:43:10 +0200
Subject: [antlr-interest] [3.1.1][C-target] @init/@after pairing
	lost	with	backtracking/semantic predicates?
In-Reply-To: <49F9BEF5.2000705@temporal-wave.com>
References: <1241079004.6313.26.camel@cartman>
	<49F9BEF5.2000705@temporal-wave.com>
Message-ID: <1241422990.6736.5.camel@cartman>


> 
> You can generally do what you need though like this:
> 
> s : {start();} ( alt1 | alt2 | alt3) { end(); } ;
> 
> I also recommend that you do not use backtracking for a production parser.
Well, I'm not using backtracking on the whole parser, but only the one
induced by syntactic predicates here and there (and in a single rule
with options { backtracking=true; }, because the semantic predicates
there would seriously hinder readability).
> 
> > Would it be correct to say that during backtracking the 'stack' is not
> > properly unwound,
> Sort of ;-) It is complicated to get all of this to work exactly like 
> try {} catch {} finally {}. I think I can probably do it, but it needs 
> some effort in the templates. I'll 'rule' on this for the next release.

A bit too late for me I'm afraid, with release only weeks away :-) But
with the information I have now, I think I can work around it.

Thanks,

Sven



From thomas.dill at teleport.ch  Mon May  4 02:04:26 2009
From: thomas.dill at teleport.ch (Thomas Dill)
Date: Mon, 4 May 2009 11:04:26 +0200
Subject: [antlr-interest] Comment Problem
In-Reply-To: <49F9C666.4020605@temporal-wave.com>
References: <004a01c9c9a1$d4c90030$7e5b0090$@dill@foery.ch>
	<49F9C666.4020605@temporal-wave.com>
Message-ID: <016a01c9cc97$7dd55230$797ff690$@dill@teleport.ch>

I tried your solution but wasn't successful. I understand the point with the
NLCHARS and NEWLINE but this doesn't really change something with my origin
problem.

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jim Idle
Sent: Donnerstag, 30. April 2009 17:40
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Comment Problem

 

Thomas Dill wrote: 

Hi there.

 

I got the following Problem:

 

In the syntax, I want to parse, a comment line starts with "-*" and ends at
the end of the line. It's possible that an asterisk can appear in a "text".

 

I can't find a solution. Below there's what I tried (and many other things).
Can somebody help me?

You need to eat the comment in your lexer and ignore it in the parser
(unless it is predictable and you want to preserve it).

COMMENT : '-*' (~(NLCHARS))* NEWLINE ;

fragment NLCHARS
: '\n' | '\r' | '\u2028'| '\u2029' ;

NEWLINE : NLCHARS+ ;

However, your grammar only defines these tokens so the set
~(COMMENT_START|NEWLINE) would not have anything to work with any way. Start
by eating the comments in the lexer though.

You should download the example grammar set and read through them, they will
help you a lot.

Jim




 

Example:

 

TABLE FILE CAR

PRINT * -* prtints all fields

BY MODEL

END

 

ANTLR Code:

grammar FexParser;

options {k=3; backtrack=true; memoize=true;}

 

report    :    (comment | text | NEWLINE)+ ;

 

comment   :    (COMMENT_START ~(NEWLINE))* ;

text      :    (~(COMMENT_START | NEWLINE))+;

 

fragment COMMENT_START

          :    '-*';

 

WS        :    ('\t' | '\v' | '\f' | ' ' | '\u00A0')     {$channel =
HIDDEN;};

NEWLINE   :    '\n' | '\r' | '\u2028'| '\u2029'    ;

 

Best regards,

Tom

 



  _____  



 
 
List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address
  

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090504/50bb9a7c/attachment.html 

From iztok.kavkler at fmf.uni-lj.si  Mon May  4 03:25:03 2009
From: iztok.kavkler at fmf.uni-lj.si (Iztok Kavkler)
Date: Mon, 04 May 2009 12:25:03 +0200
Subject: [antlr-interest] Tuning parser to non-default channel
Message-ID: <49FEC27F.5090807@fmf.uni-lj.si>

The ANTLR reference claims that parser can tune to any channel, however 
I couldn't find any mention about how this can be done. What I'd like is 
  to use grammar rule like this (or something equivalent):

end_statement: options { channels = NEWLINES; } : NEWLINE ;

Is something like this possible?

From indhu.b at s7software.com  Mon May  4 03:44:57 2009
From: indhu.b at s7software.com (Indhu Bharathi)
Date: Mon, 04 May 2009 16:14:57 +0530
Subject: [antlr-interest] Tuning parser to non-default channel
In-Reply-To: <49FEC27F.5090807@fmf.uni-lj.si>
References: <49FEC27F.5090807@fmf.uni-lj.si>
Message-ID: <49FEC729.3010108@s7software.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090504/05e378fc/attachment.html 

From marwan.alephn at gmail.com  Mon May  4 05:49:44 2009
From: marwan.alephn at gmail.com (Marwan Ajraoui)
Date: Mon, 4 May 2009 14:49:44 +0200
Subject: [antlr-interest] Problems defining a simple Integer Match
Message-ID: <6535fcb50905040549o59ce94cfs366083ca1c8a0517@mail.gmail.com>

Hi There;

I'm currently defining a grammar for a based tag language using ANTLR;
The problem I'm facing is that a single digit doesn't match my defined
rule INTEGER, here is the definition I put (as i saw in The Definitive
guide of ANTLR):

DIGITO: '0'..'9' ;
INT : DIGITO + ;

This rule should match any digit, but does match only numbers that are
composed of tow or more digits, like 45, 0567, etc. Numbers as 0, 7 or
5 doesn't match.

I will be gratefull, if you give me any issue about it;

Many thx



-- 
Marouane

From michaelst at gmail.com  Mon May  4 05:52:44 2009
From: michaelst at gmail.com (Michael Strelnikov)
Date: Mon, 4 May 2009 22:52:44 +1000
Subject: [antlr-interest] Problems defining a simple Integer Match
In-Reply-To: <6535fcb50905040549o59ce94cfs366083ca1c8a0517@mail.gmail.com>
References: <6535fcb50905040549o59ce94cfs366083ca1c8a0517@mail.gmail.com>
Message-ID: <73e3deb90905040552p42ebf849l723a3d879aa4b241@mail.gmail.com>

Try to add "fragment" prefix before "DIGITO"

On Mon, May 4, 2009 at 10:49 PM, Marwan Ajraoui <marwan.alephn at gmail.com> wrote:
> Hi There;
>
> I'm currently defining a grammar for a based tag language using ANTLR;
> The problem I'm facing is that a single digit doesn't match my defined
> rule INTEGER, here is the definition I put (as i saw in The Definitive
> guide of ANTLR):
>
> DIGITO: '0'..'9' ;
> INT : DIGITO + ;
>
> This rule should match any digit, but does match only numbers that are
> composed of tow or more digits, like 45, 0567, etc. Numbers as 0, 7 or
> 5 doesn't match.
>
> I will be gratefull, if you give me any issue about it;
>
> Many thx
>
>
>
> --
> Marouane
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From des at deshartman.com  Mon May  4 05:58:52 2009
From: des at deshartman.com (Des Hartman)
Date: Mon, 4 May 2009 22:58:52 +1000
Subject: [antlr-interest] accessing multiple return values
Message-ID: <8773d42e0905040558kb17f5d1m674e7c3250641059@mail.gmail.com>

I have an interesting problem. I have written a tree parser for Actionscript
and in it I call external code to convert a reference from Stirng to Number.
I also calculate additional attributes of this reference (Type and format)
The details of the actual reference call is not really relevant. the code
snippets look like this:

@members{
public function
evaluateInternalReference(ref:CommonTree):TreeRuleReturnScope {return null;}

}

reference returns [Object value, String formulaType, String formatString]
    : ^(IREF ir=INT )                {     $value         =
(evaluateInternalReference($ir) as TreeRuleReturnScope).values.value;
                                            $formulaType     =
(evaluateInternalReference($ir) as TreeRuleReturnScope).values.formulaType;
                                            $formatString     =
(evaluateInternalReference($ir) as
TreeRuleReturnScope).values.formatString;}

I am now converting this same Tree Grammar to Java and having a tough time
doing the same thing. Could someone help me out here with what I think
should be a simple solution? I need to somehow access value, formulaType and
formatString as I did above, but in Java?

@members{
public TreeRuleReturnScope evaluateInternalReference(CommonTree ref) {return
null;}
}

reference returns [Object value, String formulaType, String formatString]
    : ^(IREF ir=INT )                {     $value         =
(TreeRuleReturnScope)(evaluateInternalReference($ir)).values.value; ?????


Thanks
Des
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090504/8b8f82c7/attachment.html 

From jimi at temporal-wave.com  Mon May  4 07:08:11 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 04 May 2009 07:08:11 -0700
Subject: [antlr-interest] Problems defining a simple Integer Match
In-Reply-To: <6535fcb50905040549o59ce94cfs366083ca1c8a0517@mail.gmail.com>
References: <6535fcb50905040549o59ce94cfs366083ca1c8a0517@mail.gmail.com>
Message-ID: <49FEF6CB.7050301@temporal-wave.com>

Marwan Ajraoui wrote:
> Hi There;
>
> I'm currently defining a grammar for a based tag language using ANTLR;
> The problem I'm facing is that a single digit doesn't match my defined
> rule INTEGER, here is the definition I put (as i saw in The Definitive
> guide of ANTLR):
>
> DIGITO: '0'..'9' ;
> INT : DIGITO + ;
>
> This rule should match any digit, but does match only numbers that are
> composed of tow or more digits, like 45, 0567, etc. Numbers as 0, 7 or
> 5 doesn't match.
>
> I will be gratefull, if you give me any issue about it;
>   
You probably are best reading through the example grammars to get a full 
understanding, but here both of your lexer rules can match digits so the 
best ANTLR can do is realize that INT is selected when there are more 
than one DIGITs because DIGIT0 can only match 1 digit.

You cannot have two rules that match the same thing basically. When you 
want to use a rule as sort of 'subroutine' that does not create any 
tokens itself, then you need to mark it as a fragment. Then it will 
generate code that can be called by other rules but will not try and 
create tokens itself.

fragment DIGITO: '0'..'9' ;
INT : DIGITO + ;


Jim



From steve at hibernate.org  Mon May  4 08:08:40 2009
From: steve at hibernate.org (Steve Ebersole)
Date: Mon, 04 May 2009 10:08:40 -0500
Subject: [antlr-interest] "explosion" rewrite
In-Reply-To: <DB0731F3-7D96-4AB2-9719-4A2A49AB635F@cs.usfca.edu>
References: <1241208874.3426.85.camel@localhost.localdomain>
	<65E9EA70-85F7-458B-989A-166C032C6583@cs.usfca.edu>
	<1241222626.3426.95.camel@localhost.localdomain>
	<DB0731F3-7D96-4AB2-9719-4A2A49AB635F@cs.usfca.edu>
Message-ID: <1241449720.810.43.camel@localhost.localdomain>

One thing I could not decode here...

What is it that sortKey should be returning in this case we are
discussing, assuming I have changed the sortSpecification rule?

sortSpecification
    : sortKey collationSpecification? orderingSpecification?
        -> ^( SORT_SPEC sortKey collationSpecification?
orderingSpecification? )+
    ;

(I can remove the collationSpecification and orderingSpecification
subrules if need be later, just wanted to try as is and see what
happened).


On Fri, 2009-05-01 at 17:08 -0700, Terence Parr wrote:
> On May 1, 2009, at 5:03 PM, Steve Ebersole wrote:
> 
> > Lets say sortKey comes back as
> > ^( VECTOR_EXPR
> >    ^( COLUMN
> >        ALIAS_REF["a"] IDENTIFIER["col1"]
> >    )
> >    ^( COLUMN
> >        ALIAS_REF["a"] IDENTIFIER["col2"]
> >    )
> > )
> >
> > I'd really like sortSpecification to go from:
> >
> > ^( SORT_SPEC ^( VECTOR_EXPR["see above"] ) )
> >
> > to:
> >
> > ^( SORT_SPEC ^( COLUMN ALIAS_REF["a"] IDENTIFIER["col1"] ) )
> > ^( SORT_SPEC ^( COLUMN ALIAS_REF["a"] IDENTIFIER["col2"] ) )
> >
> > so its gets split from one Tree to two
> 
> Ok, that's easy enough I think. Have sortKey not return VECTOR_EXPR as  
> the root; you don't want it. THen, if we are ignoring the other rules  
> for now, this is what you want:
> 
> > sortSpecification : sortKey  -> ^( SORT_SPEC sortKey  )+  ;
> 
> The + on the outside duplicates the root, one for each child pulled  
> from sortKey...ack, wait.  Will it see the tree coming back from  
> sortKey as a "list" or a single element...hmm...try that first and see  
> what happens.
> 
> Then, if that works, we can think about the rule references I deleted.
> 
> Ter
-- 
Steve Ebersole <steve at hibernate.org>
Hibernate.org


From jimi at temporal-wave.com  Mon May  4 08:42:25 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 04 May 2009 08:42:25 -0700
Subject: [antlr-interest] New Maven artifacts, some fixes,
	buidlable source
In-Reply-To: <5659DE0A-F4C6-47F2-BA91-F5010C13A694@ucar.edu>
References: <49FB784B.4060909@temporal-wave.com>
	<5659DE0A-F4C6-47F2-BA91-F5010C13A694@ucar.edu>
Message-ID: <49FF0CE1.8050201@temporal-wave.com>

Pete Siemsen wrote:
> Jim,
>
> Sorry to be dense, but I couldn't get the snapshot to work.  My pom 
> file is probably wrong.  Attached are my new pom file and the results 
> of using it:
>
>   
It seems that you need <pluginRepostiry /> as well as just repository 
(though I have never needed that but I build the actual plugin locally 
too which is probably why).

Jim


From marwan.alephn at gmail.com  Mon May  4 11:59:35 2009
From: marwan.alephn at gmail.com (Marwan Ajraoui)
Date: Mon, 4 May 2009 20:59:35 +0200
Subject: [antlr-interest] Problems defining a simple Integer Match
In-Reply-To: <73e3deb90905040552p42ebf849l723a3d879aa4b241@mail.gmail.com>
References: <6535fcb50905040549o59ce94cfs366083ca1c8a0517@mail.gmail.com>
	<73e3deb90905040552p42ebf849l723a3d879aa4b241@mail.gmail.com>
Message-ID: <6535fcb50905041159i2b4b1beft56ab4b149fd3a469@mail.gmail.com>

MANY THX; The problem was solved.

Kind regards,

Marouane

2009/5/4 Michael Strelnikov <michaelst at gmail.com>:
> Try to add "fragment" prefix before "DIGITO"
>
> On Mon, May 4, 2009 at 10:49 PM, Marwan Ajraoui <marwan.alephn at gmail.com> wrote:
>> Hi There;
>>
>> I'm currently defining a grammar for a based tag language using ANTLR;
>> The problem I'm facing is that a single digit doesn't match my defined
>> rule INTEGER, here is the definition I put (as i saw in The Definitive
>> guide of ANTLR):
>>
>> DIGITO: '0'..'9' ;
>> INT : DIGITO + ;
>>
>> This rule should match any digit, but does match only numbers that are
>> composed of tow or more digits, like 45, 0567, etc. Numbers as 0, 7 or
>> 5 doesn't match.
>>
>> I will be gratefull, if you give me any issue about it;
>>
>> Many thx
>>
>>
>>
>> --
>> Marouane
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>



-- 
Marouane

From marwan.alephn at gmail.com  Mon May  4 12:00:55 2009
From: marwan.alephn at gmail.com (Marwan Ajraoui)
Date: Mon, 4 May 2009 21:00:55 +0200
Subject: [antlr-interest] Problems defining a simple Integer Match
In-Reply-To: <49FEF6CB.7050301@temporal-wave.com>
References: <6535fcb50905040549o59ce94cfs366083ca1c8a0517@mail.gmail.com>
	<49FEF6CB.7050301@temporal-wave.com>
Message-ID: <6535fcb50905041200s1dd2f6d4qf21d0a7fe427639f@mail.gmail.com>

MANY THX; The problem is solved thanks to the information you gave me.

Kind regards,

Marouane

2009/5/4 Jim Idle <jimi at temporal-wave.com>:
> Marwan Ajraoui wrote:
>> Hi There;
>>
>> I'm currently defining a grammar for a based tag language using ANTLR;
>> The problem I'm facing is that a single digit doesn't match my defined
>> rule INTEGER, here is the definition I put (as i saw in The Definitive
>> guide of ANTLR):
>>
>> DIGITO: '0'..'9' ;
>> INT : DIGITO + ;
>>
>> This rule should match any digit, but does match only numbers that are
>> composed of tow or more digits, like 45, 0567, etc. Numbers as 0, 7 or
>> 5 doesn't match.
>>
>> I will be gratefull, if you give me any issue about it;
>>
> You probably are best reading through the example grammars to get a full
> understanding, but here both of your lexer rules can match digits so the
> best ANTLR can do is realize that INT is selected when there are more
> than one DIGITs because DIGIT0 can only match 1 digit.
>
> You cannot have two rules that match the same thing basically. When you
> want to use a rule as sort of 'subroutine' that does not create any
> tokens itself, then you need to mark it as a fragment. Then it will
> generate code that can be called by other rules but will not try and
> create tokens itself.
>
> fragment DIGITO: '0'..'9' ;
> INT : DIGITO + ;
>
>
> Jim
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>



-- 
Marouane

From brian at neuesoftware.com  Mon May  4 12:08:50 2009
From: brian at neuesoftware.com (Brian Nelson)
Date: Mon, 04 May 2009 12:08:50 -0700
Subject: [antlr-interest] getting data from a grammar
Message-ID: <49FF3D42.3070606@neuesoftware.com>

So I have been working on this for about a week, and I even bought the 
ANTLR book, but I can't seem to find how to get what seems like simple 
data out of the grammar.

Here's a very, very limited example. I am merely trying to get data out 
of CSS files. I guess the questions I have are:
1) Should I be using an AST? I assumes I would, since CSS can br broken 
down to a tree very simply, but upon further reading, it may not 
actually be beneficial since I am not trying to solve a really complex 
language issue...
2) How would one, in speudo code, get the actual data out of the following:

The input would be "aa, bb, cc" and I simply want a list of 
['aa','bb','cc']. I am not trying to process it, just get the list out 
of it, ignoring the commas, in a variable I can use.

    prog : rone (COMMA rone)*
           ;

    rone : IDENT;

    IDENT: 'a'..'z' ('a'..'z')*;
    COMMA: ',';

Thanks in advance,
    Brian

-- 
Brian Nelson
Software Engineer, Neue Software

e. brian at neuesoftware.com
c. +1 408 373 8310

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090504/ce27d737/attachment.html 

From micha-1 at fantasymail.de  Mon May  4 12:21:31 2009
From: micha-1 at fantasymail.de (Micha)
Date: Mon, 4 May 2009 21:21:31 +0200
Subject: [antlr-interest] getting data from a grammar
In-Reply-To: <49FF3D42.3070606@neuesoftware.com>
References: <49FF3D42.3070606@neuesoftware.com>
Message-ID: <200905042121.31784.micha-1@fantasymail.de>

On Monday 04 May 2009 21:08:50 Brian Nelson wrote:
> The input would be "aa, bb, cc" and I simply want a list of
> ['aa','bb','cc']. I am not trying to process it, just get the list out
> of it, ignoring the commas, in a variable I can use.
>
>     prog : rone (COMMA rone)*
>            ;
>
>     rone : IDENT;
>
>     IDENT: 'a'..'z' ('a'..'z')*;
>     COMMA: ',';
>

for this I would do (in java):
String idents[] = text.split(",");

then, if needed:
for (String s: idents) {
	if (!s.matches("[a..z]([a..z])*")) throw new Argh();
}



cheers
 Michael


From brian at neuesoftware.com  Mon May  4 12:48:37 2009
From: brian at neuesoftware.com (Brian Nelson)
Date: Mon, 04 May 2009 12:48:37 -0700
Subject: [antlr-interest] getting data from a grammar
In-Reply-To: <200905042121.31784.micha-1@fantasymail.de>
References: <49FF3D42.3070606@neuesoftware.com>
	<200905042121.31784.micha-1@fantasymail.de>
Message-ID: <49FF4695.8000009@neuesoftware.com>

This was a small example of a much larger problem. This isn't this 
simple case only, I am processing CSS files and trying to object-ize the 
entire file (rules, declarations, media blocks, etc)

On 5/4/09 12:21 PM, Micha wrote:
> On Monday 04 May 2009 21:08:50 Brian Nelson wrote:
>    
>> The input would be "aa, bb, cc" and I simply want a list of
>> ['aa','bb','cc']. I am not trying to process it, just get the list out
>> of it, ignoring the commas, in a variable I can use.
>>
>>      prog : rone (COMMA rone)*
>>             ;
>>
>>      rone : IDENT;
>>
>>      IDENT: 'a'..'z' ('a'..'z')*;
>>      COMMA: ',';
>>
>>      
>
> for this I would do (in java):
> String idents[] = text.split(",");
>
> then, if needed:
> for (String s: idents) {
> 	if (!s.matches("[a..z]([a..z])*")) throw new Argh();
> }
>
>
>
> cheers
>   Michael
>
>    

-- 
Brian Nelson
Software Engineer, Neue Software

e. brian at neuesoftware.com
c. +1 408 373 8310

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090504/e173d96b/attachment.html 

From jimi at temporal-wave.com  Mon May  4 13:02:25 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 04 May 2009 13:02:25 -0700
Subject: [antlr-interest] getting data from a grammar
In-Reply-To: <49FF3D42.3070606@neuesoftware.com>
References: <49FF3D42.3070606@neuesoftware.com>
Message-ID: <49FF49D1.1070501@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090504/eb05cca0/attachment.html 

From brian at neuesoftware.com  Mon May  4 13:42:50 2009
From: brian at neuesoftware.com (Brian Nelson)
Date: Mon, 04 May 2009 13:42:50 -0700
Subject: [antlr-interest] getting data from a grammar
In-Reply-To: <49FF49D1.1070501@temporal-wave.com>
References: <49FF3D42.3070606@neuesoftware.com>
	<49FF49D1.1070501@temporal-wave.com>
Message-ID: <49FF534A.8000901@neuesoftware.com>

Thanks, Jim. That gets me pretty far... I think you gave me the initial 
CSS grammar I am working on, so you'd probably understand this more 
complex example:

given

foo>bar .foo as the selector, I want an array of ['foo>bar', '.foo']...

selector
     : elementName (elementSubsequent? elementName)*
     ;

Yeah, good times. Thanks for all the help, by the way!

On 5/4/09 1:02 PM, Jim Idle wrote:
> Brian Nelson wrote:
>> So I have been working on this for about a week, and I even bought 
>> the ANTLR book, but I can't seem to find how to get what seems like 
>> simple data out of the grammar.
>>
>> Here's a very, very limited example. I am merely trying to get data 
>> out of CSS files. I guess the questions I have are:
>> 1) Should I be using an AST? I assumes I would, since CSS can br 
>> broken down to a tree very simply, but upon further reading, it may 
>> not actually be beneficial since I am not trying to solve a really 
>> complex language issue...
>> 2) How would one, in speudo code, get the actual data out of the 
>> following:
>>
>> The input would be "aa, bb, cc" and I simply want a list of 
>> ['aa','bb','cc']. I am not trying to process it, just get the list 
>> out of it, ignoring the commas, in a variable I can use.
>>
>>     prog : rone (COMMA rone)*
>>           ;
>>
>>     rone : IDENT;
>>
> You probably do not need a tree if you are just extracting information 
> and you don't need to refer to other parts of the css. From your 
> example above, then  you probably just want the text of your rone 
> rule, which is trivial:
>
> prog
>    : r1=rone   { System.out.println($r1.text); }
>
>         (COMMA r2=rone  { System.out.println($r2.text); })*
> ;
>
> Obviously, though I use sout here, you can do anything with the String 
> that $rn.text gives you.
>
> Jim
> ------------------------------------------------------------------------
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>    

-- 
Brian Nelson
Software Engineer, Neue Software

e. brian at neuesoftware.com
c. +1 408 373 8310

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090504/3f02fbe4/attachment.html 

From mmburke at gwu.edu  Mon May  4 18:12:46 2009
From: mmburke at gwu.edu (Matthew M. Burke)
Date: Mon, 04 May 2009 21:12:46 -0400
Subject: [antlr-interest] Parsing Best Practices---Where to check for
	predefined names
Message-ID: <49FF928E.2070306@gwu.edu>

I am building a parser for a language that has the following syntax

    <name args*>

for function invocations and a few "function-like" usages.  In 
particular, statements such as

    Set <array 5> 17

are valid for a handful of predefined names.  In my grammar, I have a 
rule which describes what's allowed to be on the left-hand side of an 
assignment and I'm trying to decide between two possibilities for 
handling these "function-like" cases:

1) I could go with something that matches '<' ID expr* '>' and then in 
the parser action, I can test ID.text and act as appropriate

or

2) I could do something like

lhs
   : '<' 'array' expr '>' ->  ^(ARRAY_REF expr)
   | '<' 'socket' expr '>' -> ^(SOCKET_REF expr)
   | ...
   ;


Is either alternative especially better than the other?

Matt






From antlr at mirality.co.nz  Tue May  5 04:52:59 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 05 May 2009 23:52:59 +1200
Subject: [antlr-interest] Parsing Best Practices---Where to check for
 predefined names
In-Reply-To: <49FF928E.2070306@gwu.edu>
References: <49FF928E.2070306@gwu.edu>
Message-ID: <20090505115322.DF54D341814F@www.antlr.org>

At 13:12 5/05/2009, Matthew M. Burke wrote:
 >1) I could go with something that matches '<' ID expr* '>' and 
then
 >in the parser action, I can test ID.text and act as appropriate
 >
 >or
 >
 >2) I could do something like
 >
 >lhs
 >   : '<' 'array' expr '>' ->  ^(ARRAY_REF expr)
 >   | '<' 'socket' expr '>' -> ^(SOCKET_REF expr)
 >   | ...
 >   ;
 >
 >Is either alternative especially better than the other?

In general, option #2 is more efficient -- but you need to bear in 
mind that it'll introduce new top-level lexer tokens, and thus 
"array" will always be treated as a single token (with an obscure 
generated name), not as an ID or some other token.  So if "array" 
is not always a keyword in your language then you'll need a bit 
more intelligence in your identifier-matching (eg. id : ID | 
'array' | 'socket';) or go with option #1 instead.

(If you want to avoid the obscurely-named tokens, then you should 
avoid using quoted constants in parser rules and just create the 
corresponding lexer rules yourself.)


From tbender at stud.hs-heilbronn.de  Tue May  5 05:18:55 2009
From: tbender at stud.hs-heilbronn.de (Tilman Bender)
Date: Tue, 5 May 2009 14:18:55 +0200
Subject: [antlr-interest] New Maven artifacts, some fixes,
	buidlable source
In-Reply-To: <49FB784B.4060909@temporal-wave.com>
References: <49FB784B.4060909@temporal-wave.com>
Message-ID: <9807B025-13A5-4644-A649-73248EF6E484@stud.hs-heilbronn.de>

Hi list, Hi Jim,

I really like the gunit plugin and the fact, that it gives me a good  
feedback on what went wrong with my gunit-tests,
but it would also be cool to have a goal (maybe one that can only be  
called by explicitly stating so in the execution-element in the plugin  
section)
that also does the conversion of gunit to JUnit tests.

Why would you want that? Simple Answer: Reporting:

1. The results get included into the project website as all the other  
JUnit results do.
2. Using tools like corbertura or clover you can keep an eye on your  
test-coverage and see where your recognizer lacks proper unit tests.

I can get along very well with the plugin as it is, but this feature  
would really be the cherry  on top of the cake ;-)

kind regards
Tilman Bender
Student des Software Engineering
Hochschule Heilbronn
tbender at stud.hs-heilbronn.de



Am 02.05.2009 um 00:31 schrieb Jim Idle:

> Hi,
>
> We have a new Maven artifact available: maven-gunit-plugin, this  
> automates the running of gunit tests as part of a Maven build.  
> Documentation to follow, but it is fairly easy to work out if you  
> already know ANTLR and gUnit. It can be used as:
>
> <plugin>
>    <groupId>org.antlr</groupId>
>        <artifactId>maven-gunit-plugin</artifactId>
>        <version>3.1.3</version>
>        <configuration>
> ...
>        </configuration>
> </plugin>
>
>  - - - - - -
>
> I have also fixed the issue with the ANTLR 3.1.3 whereby the -make  
> option (which the Maven plugin relies on) was not detecting changes  
> in .g files correctly and was assuming that everything was up to  
> date. If this was bugging you enough that you want to use the  
> current snapshot of antlr, then configure your pom.xml file like this:
>
> 1) Add a reference to the ANTLR snapshot repository at the <project>  
> level:
>
>     <!--
>
>     Inform Maven of the ANTLR snapshot repository, which it will
>     need to consult to get the latest snapshot build of the runtime  
> and tool
>     if it was not built and installed locally.
>     -->
>     <repositories>
>
>       <!--
>         This is the ANTLR repository.
>         -->
>         <repository>
>             <id>antlr-snapshot</id>
>             <name>ANTLR Testing Snapshot Repository</name>
>             <url>http://antlr.org/antlr-snapshot</url>
>             <snapshots>
>                 <enabled>true</enabled>
>                 <updatePolicy>always</updatePolicy>
>             </snapshots>
>
>             <releases>
>                 <enabled>false</enabled>
>             </releases>
>
>         </repository>
>
>     </repositories>
>
> 2) Change the version number of the antlr3-maven-plugin to  
> <version>3.1.4-SNAPSHOT</version>
>
> - - - - - -
> Finally today, I have corrected the build of the source code  
> collection jars. You can always find the latest executable jar of  
> ANTLR (java -jar xxx.jar t.g) and the latest buildable source code  
> at this permalink:
>
> http://antlr.org/hudson/job/ANTLR_Tool_Daily/lastSuccessfulBuild/org.antlr$antlr-master/
>
> Similarly these artifacts are copied in to: http://antlr.org/download
>
> antlr-master-3.1.4-SNAPSHOT-completejar.jar
> antlr-master-3.1.4-SNAPSHOT-src.jar
>
>
> Jim
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090505/2fd5a672/attachment.html 

From martijn.reuvers at gmail.com  Tue May  5 06:38:29 2009
From: martijn.reuvers at gmail.com (Martijn Reuvers)
Date: Tue, 5 May 2009 15:38:29 +0200
Subject: [antlr-interest] Skip subtree in tree grammar
Message-ID: <c376e6ec0905050638t3bbf53cx2c298b33231831c@mail.gmail.com>

Hello everyone,

Is there an (easy) way to skip a subtree in a tree grammar? For
example in a conditional expression:

if bool_exp {
  // Whatever is here should be skipped
}

---
--- from the tree grammar:
---

bool_function_content[Boolean value]
	:	{value != null && value.booleanValue()}? => function_content*
	;	
	catch [FailedPredicateException e] {
		BufferedTreeNodeStream commonInput = (BufferedTreeNodeStream) input;
                // This is what I had in mind, but how to skip the
current subtree?
	}

I found the link
http://www.antlr.org/wiki/display/ANTLR3/6.+Advanced+processing , but
unfortunately that is about parser grammars. The incoming Boolean
value in bool_function_content already contains what to do (true means
evaluate and execute function_content*, false is skip the content).

Thanks a lot for your time!

Martijn

From micha-1 at fantasymail.de  Tue May  5 07:11:15 2009
From: micha-1 at fantasymail.de (Michael)
Date: Tue, 5 May 2009 16:11:15 +0200
Subject: [antlr-interest] Skip subtree in tree grammar
In-Reply-To: <c376e6ec0905050638t3bbf53cx2c298b33231831c@mail.gmail.com>
References: <c376e6ec0905050638t3bbf53cx2c298b33231831c@mail.gmail.com>
Message-ID: <200905051611.16001.micha-1@fantasymail.de>

Am Tuesday 05 May 2009 15:38:29 schrieb Martijn Reuvers:
> Hello everyone,
>

>                 // This is what I had in mind, but how to skip the
> current subtree?
>

"skip the current subtree" means reading it but doing nothing?
then write grammar rules which walk that subtree and do nothing with it, maybe 
like:
 bool_function_content[Boolean value]

 	:	{value != null && value.booleanValue()}? => function_content*
	|            {value != null && !value.booleanValue()}? => 
overread_function_content*
 	;


cheers,
 Michael

From hugo.leeney at gmail.com  Tue May  5 07:13:03 2009
From: hugo.leeney at gmail.com (Hugo Leeney)
Date: Tue, 5 May 2009 15:13:03 +0100
Subject: [antlr-interest] New Maven artifacts, some fixes,
	buidlable 	source
In-Reply-To: <9807B025-13A5-4644-A649-73248EF6E484@stud.hs-heilbronn.de>
References: <49FB784B.4060909@temporal-wave.com>
	<9807B025-13A5-4644-A649-73248EF6E484@stud.hs-heilbronn.de>
Message-ID: <ccbc40a00905050713n1fb4417fl595e893cd449237a@mail.gmail.com>

> Finally today, I have corrected the build of the source code collection
> jars. You can always find the latest executable jar of ANTLR (java -jar
> xxx.jar t.g) and the latest buildable source code at this permalink:
>
> http://antlr.org/hudson/job/ANTLR_Tool_Daily/lastSuccessfulBuild/org.antlr$antlr-master/
>
> Similarly these artifacts are copied in to: http://antlr.org/download
>
> antlr-master-3.1.4-SNAPSHOT-completejar.jar
> antlr-master-3.1.4-SNAPSHOT-src.jar

The master build works great! I've two notions that I'm not sure make
sense but I'll throw them out there anyway..

1) That a master build could exist with all targets included.
2) That using the master build you could assemble the lib directory
that you would normally see in an Antlr distro.

I can imagine that there are reasons why these are annoying and
illogical to do. I can also imagine that it might make life easier for
lazy people like me :), people benevolent enough to try help lazy
people like me on the mailing list and people close to the project but
who have no clue about the build process/maven. Then again maybe not.

Anyway, thanks very much!

From steerr at bellsouth.net  Tue May  5 07:51:35 2009
From: steerr at bellsouth.net (Bill Steer)
Date: Tue, 05 May 2009 10:51:35 -0400
Subject: [antlr-interest] Check individual stmt?
Message-ID: <4A005277.7060708@bellsouth.net>

Hello.  My grammar processes a "program," which consists of individual 
"statements."  Those statements are just semicolon-delimited 
expressions.  I'm storing all of the statements in a string and using 
the corresponding string as input to ANTLR.  So far, so good.  But I 
need to check the content of each individual statement to see if the IDs 
in it are in a symbol table or not.  Is it possible, from an input point 
of view, to send ANTLR a series of statements, one at a time?  I'm 
thinking here about the ANTLRStringStream, not the rule to run.  Do I 
have to create a new ANTLRStringStream and corresponding lexer each time 
I feed it a new statement, or can the ANTLRStringStream be reset to a 
new input string?

Thanks very much for any help.

Bill


From siemsen at ucar.edu  Tue May  5 08:06:10 2009
From: siemsen at ucar.edu (Pete Siemsen)
Date: Tue, 5 May 2009 09:06:10 -0600
Subject: [antlr-interest] New Maven artifacts, some fixes,
	buidlable source
In-Reply-To: <49FF0CE1.8050201@temporal-wave.com>
References: <49FB784B.4060909@temporal-wave.com>
	<5659DE0A-F4C6-47F2-BA91-F5010C13A694@ucar.edu>
	<49FF0CE1.8050201@temporal-wave.com>
Message-ID: <35DB9B46-C467-4CC6-8076-37538997EFA2@ucar.edu>

Jim,

Thanks, that fixed it.

-- Pete


On May 4, 2009, at 9:42 AM, Jim Idle wrote:

> Pete Siemsen wrote:
>> Jim,
>>
>> Sorry to be dense, but I couldn't get the snapshot to work.  My pom
>> file is probably wrong.  Attached are my new pom file and the results
>> of using it:
>>
>>
> It seems that you need <pluginRepostiry /> as well as just repository
> (though I have never needed that but I build the actual plugin locally
> too which is probably why).
>
> Jim
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090505/98eb8ffa/attachment.html 

From sharwell at pixelminegames.com  Tue May  5 08:30:41 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Tue, 5 May 2009 10:30:41 -0500
Subject: [antlr-interest] Check individual stmt?
In-Reply-To: <4A005277.7060708@bellsouth.net>
References: <4A005277.7060708@bellsouth.net>
Message-ID: <86403CA0939415448BCCB83855EFE09AA68008@Bloodymary.ironwillgames.com>

Hi Bill,

If the identifiers are uniquely determined by the lexer, you'll gain a
significant performance advantage by something like this:

for ( Token token = lexer.nextToken(); token != null; token =
lexer.nextToken() )
{
  if ( token.getType() == Token.EOF )
    break;

  if ( token.getType() == ID )
    checkSymbolTable(token);
}


The lexer can be reset to a new ANTLRStringStream input by calling
setCharStream(new ANTLRStringStream(text)). You don't need to call
reset() after setting it to the new char stream.

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Bill Steer
Sent: Tuesday, May 05, 2009 9:52 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Check individual stmt?

Hello.  My grammar processes a "program," which consists of individual 
"statements."  Those statements are just semicolon-delimited 
expressions.  I'm storing all of the statements in a string and using 
the corresponding string as input to ANTLR.  So far, so good.  But I 
need to check the content of each individual statement to see if the IDs

in it are in a symbol table or not.  Is it possible, from an input point

of view, to send ANTLR a series of statements, one at a time?  I'm 
thinking here about the ANTLRStringStream, not the rule to run.  Do I 
have to create a new ANTLRStringStream and corresponding lexer each time

I feed it a new statement, or can the ANTLRStringStream be reset to a 
new input string?

Thanks very much for any help.

Bill


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From martijn.reuvers at gmail.com  Tue May  5 09:55:32 2009
From: martijn.reuvers at gmail.com (Martijn Reuvers)
Date: Tue, 5 May 2009 18:55:32 +0200
Subject: [antlr-interest] Skip subtree in tree grammar
In-Reply-To: <200905051800.06107.micha-1@fantasymail.de>
References: <c376e6ec0905050638t3bbf53cx2c298b33231831c@mail.gmail.com>
	<200905051611.16001.micha-1@fantasymail.de>
	<c376e6ec0905050839v51406db2lc644dbbbdbee3364@mail.gmail.com>
	<200905051800.06107.micha-1@fantasymail.de>
Message-ID: <c376e6ec0905050955x7dc37b27pc599914040b786b2@mail.gmail.com>

Hello Micheal,

Somehow we've managed to forget to include the antlr-list in our
conversation, so here the update and solution for the others.

I've used the stack solution (which I can probably use for other
conditionals too). It seems to work fine, I wrote the following
method:

 public boolean isContentEvaluable() {
    return phase > 0 && (isConditionalStackEmpty() || peekConditionalResult());
  }	

The method is used in function_content's rules and determines if each
rule should evaluate or not. As said the solution is backed by a stack
which is pushed/popped in @init and @after with boolean results.
Ignore the phase, which is not relevant for this solution.

Finally: I am still curious if you can skip a tree grammar subtree
altogether (the if statement in this mail conversation), so if someone
knows,  I'd love to hear that too!

Thanks for thinking along!

Martijn



On Tue, May 5, 2009 at 6:00 PM, Micha <micha-1 at fantasymail.de> wrote:
> On Tuesday 05 May 2009 17:39:55 you wrote:
>> Hi Michael,
>>
>> Thanks for your reply. Preferably I would just like to move the
>> treestream up to after the if-statement (if the value is false). But I
>> don't know how to calculate the proper index from here and to properly
>> pop/push it.
>>
>> With your solution you mean overread_function_content* contains the
>> same rules as function_content, except without any logic?
>
> yes
>
>> Another thing I was thinking of but haven't tried yet, is to push the
>> conditional result on a stack and in function_content (its subrules),
>> peek the stack and if the stack is either empty (we're not in a
>> conditional check) or the top returns true - evaluate, else do
>> nothing. This might work, but I haven't tried it yet.
>
> that was another solution I thought about. I think this depends on the
> grammar...
>
>
> cheers
> ?Michael
>
>

From ian at telematter.com  Tue May  5 10:03:06 2009
From: ian at telematter.com (ian eyberg)
Date: Tue, 5 May 2009 12:03:06 -0500
Subject: [antlr-interest] <feff> ??
Message-ID: <20090505170306.GA3092@hypatia>

Hi,

  someone has sent me a file to parse and there are all sorts of
'<feff>' characters in them in arbritrary spots -- looking it up
online it appears it's some sort of character to indicate what
encoding the strings are -- '(bom) byte order mark'

  my question -- what should I do with these? should I accept that
some files are going to have these and convert them to spaces as a
sort of pre-processor or should I take the easy way out and say
"we don't support this" ;)

  the person handing me the file says he never opened it in a text
editor and it was a piece of software on a OSX box

  maybe if I detect a bom in one of my documents I can convert the
entire file to the appropriate encoding first??

thanks,

-- 
ian eyberg

From sharwell at pixelminegames.com  Tue May  5 10:08:23 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Tue, 5 May 2009 12:08:23 -0500
Subject: [antlr-interest] Skip subtree in tree grammar
In-Reply-To: <c376e6ec0905050955x7dc37b27pc599914040b786b2@mail.gmail.com>
References: <c376e6ec0905050638t3bbf53cx2c298b33231831c@mail.gmail.com><200905051611.16001.micha-1@fantasymail.de><c376e6ec0905050839v51406db2lc644dbbbdbee3364@mail.gmail.com><200905051800.06107.micha-1@fantasymail.de>
	<c376e6ec0905050955x7dc37b27pc599914040b786b2@mail.gmail.com>
Message-ID: <86403CA0939415448BCCB83855EFE09AA68009@Bloodymary.ironwillgames.com>

Hi Martijn,

The state stack is unreliable in combination with semantic predicates and "cannot" be used in that manner. Instead you should use a construct like . or ^(IF .*) to skip the subtree in your walker.

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Martijn Reuvers
Sent: Tuesday, May 05, 2009 11:56 AM
To: Micha; antlr-interest at antlr.org
Subject: Re: [antlr-interest] Skip subtree in tree grammar

Hello Micheal,

Somehow we've managed to forget to include the antlr-list in our
conversation, so here the update and solution for the others.

I've used the stack solution (which I can probably use for other
conditionals too). It seems to work fine, I wrote the following
method:

 public boolean isContentEvaluable() {
    return phase > 0 && (isConditionalStackEmpty() || peekConditionalResult());
  }	

The method is used in function_content's rules and determines if each
rule should evaluate or not. As said the solution is backed by a stack
which is pushed/popped in @init and @after with boolean results.
Ignore the phase, which is not relevant for this solution.

Finally: I am still curious if you can skip a tree grammar subtree
altogether (the if statement in this mail conversation), so if someone
knows,  I'd love to hear that too!

Thanks for thinking along!

Martijn



On Tue, May 5, 2009 at 6:00 PM, Micha <micha-1 at fantasymail.de> wrote:
> On Tuesday 05 May 2009 17:39:55 you wrote:
>> Hi Michael,
>>
>> Thanks for your reply. Preferably I would just like to move the
>> treestream up to after the if-statement (if the value is false). But I
>> don't know how to calculate the proper index from here and to properly
>> pop/push it.
>>
>> With your solution you mean overread_function_content* contains the
>> same rules as function_content, except without any logic?
>
> yes
>
>> Another thing I was thinking of but haven't tried yet, is to push the
>> conditional result on a stack and in function_content (its subrules),
>> peek the stack and if the stack is either empty (we're not in a
>> conditional check) or the top returns true - evaluate, else do
>> nothing. This might work, but I haven't tried it yet.
>
> that was another solution I thought about. I think this depends on the
> grammar...
>
>
> cheers
> ?Michael
>
>

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From jimi at temporal-wave.com  Tue May  5 10:11:01 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 05 May 2009 10:11:01 -0700
Subject: [antlr-interest] <feff> ??
In-Reply-To: <20090505170306.GA3092@hypatia>
References: <20090505170306.GA3092@hypatia>
Message-ID: <4A007325.4050801@temporal-wave.com>

ian eyberg wrote:
> Hi,
>
>   someone has sent me a file to parse and there are all sorts of
> '<feff>' characters in them in arbritrary spots -- looking it up
> online it appears it's some sort of character to indicate what
> encoding the strings are -- '(bom) byte order mark'
>
>   my question -- what should I do with these? should I accept that
> some files are going to have these and convert them to spaces as a
> sort of pre-processor or should I take the easy way out and say
> "we don't support this" ;)
>
>   the person handing me the file says he never opened it in a text
> editor and it was a piece of software on a OSX box
>
>   maybe if I detect a bom in one of my documents I can convert the
> entire file to the appropriate encoding first??
>
> thanks,
>
>   
You don;t say what target language you are going to use, but if you open 
the file using the correcting encoding, then I believe it will take care 
of the BOM for you. The BOM is optional but it indicates if the string 
that follows is Big Endian or Little Endian, which is important when 
reading UCS2 and similar character encodings (of more than one byte). 
You can't ignore it if the machine you are parsing on has a different 
ordering than the one where the file was created.

See: http://unicode.org/faq/utf_bom.html for more information than you 
could possibly want to know about the BOM.

Jim

From martijn.reuvers at gmail.com  Tue May  5 10:18:22 2009
From: martijn.reuvers at gmail.com (Martijn Reuvers)
Date: Tue, 5 May 2009 19:18:22 +0200
Subject: [antlr-interest] Skip subtree in tree grammar
In-Reply-To: <86403CA0939415448BCCB83855EFE09AA68009@Bloodymary.ironwillgames.com>
References: <c376e6ec0905050638t3bbf53cx2c298b33231831c@mail.gmail.com>
	<200905051611.16001.micha-1@fantasymail.de>
	<c376e6ec0905050839v51406db2lc644dbbbdbee3364@mail.gmail.com>
	<200905051800.06107.micha-1@fantasymail.de>
	<c376e6ec0905050955x7dc37b27pc599914040b786b2@mail.gmail.com>
	<86403CA0939415448BCCB83855EFE09AA68009@Bloodymary.ironwillgames.com>
Message-ID: <c376e6ec0905051018u595f43du7450bdda1b1efefc@mail.gmail.com>

Hi Sam,

I removed the predicates (I have none anymore), sorry I forgot to
mention that in the previous post. But thanks for pointing this out!

So ^(IF .*) can be used if I used a semantic predicate right? So I
should then use: {booleanCheck}? => ^(IF .*) I assume?

Martijn


On Tue, May 5, 2009 at 7:08 PM, Sam Harwell <sharwell at pixelminegames.com> wrote:
> Hi Martijn,
>
> The state stack is unreliable in combination with semantic predicates and "cannot" be used in that manner. Instead you should use a construct like . or ^(IF .*) to skip the subtree in your walker.
>
> Sam
>
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Martijn Reuvers
> Sent: Tuesday, May 05, 2009 11:56 AM
> To: Micha; antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Skip subtree in tree grammar
>
> Hello Micheal,
>
> Somehow we've managed to forget to include the antlr-list in our
> conversation, so here the update and solution for the others.
>
> I've used the stack solution (which I can probably use for other
> conditionals too). It seems to work fine, I wrote the following
> method:
>
> ?public boolean isContentEvaluable() {
> ? ?return phase > 0 && (isConditionalStackEmpty() || peekConditionalResult());
> ?}
>
> The method is used in function_content's rules and determines if each
> rule should evaluate or not. As said the solution is backed by a stack
> which is pushed/popped in @init and @after with boolean results.
> Ignore the phase, which is not relevant for this solution.
>
> Finally: I am still curious if you can skip a tree grammar subtree
> altogether (the if statement in this mail conversation), so if someone
> knows, ?I'd love to hear that too!
>
> Thanks for thinking along!
>
> Martijn
>
>
>
> On Tue, May 5, 2009 at 6:00 PM, Micha <micha-1 at fantasymail.de> wrote:
>> On Tuesday 05 May 2009 17:39:55 you wrote:
>>> Hi Michael,
>>>
>>> Thanks for your reply. Preferably I would just like to move the
>>> treestream up to after the if-statement (if the value is false). But I
>>> don't know how to calculate the proper index from here and to properly
>>> pop/push it.
>>>
>>> With your solution you mean overread_function_content* contains the
>>> same rules as function_content, except without any logic?
>>
>> yes
>>
>>> Another thing I was thinking of but haven't tried yet, is to push the
>>> conditional result on a stack and in function_content (its subrules),
>>> peek the stack and if the stack is either empty (we're not in a
>>> conditional check) or the top returns true - evaluate, else do
>>> nothing. This might work, but I haven't tried it yet.
>>
>> that was another solution I thought about. I think this depends on the
>> grammar...
>>
>>
>> cheers
>> ?Michael
>>
>>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From ian at telematter.com  Tue May  5 11:47:30 2009
From: ian at telematter.com (ian eyberg)
Date: Tue, 5 May 2009 13:47:30 -0500
Subject: [antlr-interest] <feff> ??
In-Reply-To: <4A007325.4050801@temporal-wave.com>
References: <20090505170306.GA3092@hypatia>
	<4A007325.4050801@temporal-wave.com>
Message-ID: <20090505184730.GA7562@hypatia>

Hi Jim,

  Thanks again for some help.

  So are you suggesting that when I read it I need to convert it
to UTF-16 if I detect the bom? (feff = utf-16, big-endian). Then
I should just throw in a lexer rule that does skips and make sure
that any line in my file can accept that first?

BOM     : '\u65279'{ skip(); };

On Tue, May 05, 2009 at 10:11:01AM -0700, Jim Idle wrote:
> ian eyberg wrote:
> > Hi,
> >
> >   someone has sent me a file to parse and there are all sorts of
> > '<feff>' characters in them in arbritrary spots -- looking it up
> > online it appears it's some sort of character to indicate what
> > encoding the strings are -- '(bom) byte order mark'
> >
> >   my question -- what should I do with these? should I accept that
> > some files are going to have these and convert them to spaces as a
> > sort of pre-processor or should I take the easy way out and say
> > "we don't support this" ;)
> >
> >   the person handing me the file says he never opened it in a text
> > editor and it was a piece of software on a OSX box
> >
> >   maybe if I detect a bom in one of my documents I can convert the
> > entire file to the appropriate encoding first??
> >
> > thanks,
> >
> >   
> You don;t say what target language you are going to use, but if you open 
> the file using the correcting encoding, then I believe it will take care 
> of the BOM for you. The BOM is optional but it indicates if the string 
> that follows is Big Endian or Little Endian, which is important when 
> reading UCS2 and similar character encodings (of more than one byte). 
> You can't ignore it if the machine you are parsing on has a different 
> ordering than the one where the file was created.
> 
> See: http://unicode.org/faq/utf_bom.html for more information than you 
> could possibly want to know about the BOM.
> 
> Jim
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

-- 
ian eyberg

From antlr at mirality.co.nz  Tue May  5 12:39:31 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 06 May 2009 07:39:31 +1200
Subject: [antlr-interest] Skip subtree in tree grammar
In-Reply-To: <c376e6ec0905050638t3bbf53cx2c298b33231831c@mail.gmail.com>
References: <c376e6ec0905050638t3bbf53cx2c298b33231831c@mail.gmail.com>
Message-ID: <20090505193958.D76E23418524@www.antlr.org>

At 01:38 6/05/2009, Martijn Reuvers wrote:
 >Is there an (easy) way to skip a subtree in a tree grammar? For
 >example in a conditional expression:
[...]
 >bool_function_content[Boolean value]
 >	:	{value != null && value.booleanValue()}? => function_content*
 >	;	
 >	catch [FailedPredicateException e] {
 >		BufferedTreeNodeStream commonInput = (BufferedTreeNodeStream)
 >input;
 >                // This is what I had in mind, but how to skip 
the
 >current subtree?
 >	}

If you're using the latest (perhaps forthcoming, I've lost track) 
version of ANTLR:

bool_function_content[Boolean value]
   : { value != null && value.booleanValue() }? => 
function_content*
   | .*
   ;

If you're using an older version:

skip : . | ^(. skip*) ;

bool_function_content[Boolean value]
   : { value != null && value.booleanValue() }? => 
function_content*
   | skip*
   ;


From marwan.alephn at gmail.com  Tue May  5 12:56:28 2009
From: marwan.alephn at gmail.com (Marwan Ajraoui)
Date: Tue, 5 May 2009 21:56:28 +0200
Subject: [antlr-interest] Problems with scoping (ID)*
Message-ID: <6535fcb50905051256u6c048c29tc17820daa177657a@mail.gmail.com>

Hi there;

I'm trying to get a scope of variables correspondant to method
declaration. but i'm geting this exception:

Exception in thread "main" java.util.EmptyStackException
	at java.util.Stack.peek(Unknown Source)
	at BTLParser.decl_var(BTLParser.java:462)
	at BTLParser.inst_decl(BTLParser.java:727)

If i put only one ID it does work;

Here is a part of my gramar:

decl_var 	: 	TAG_START_OPEN 'var' {System.out.println("ambito " +
$decl_funcion::ambito);}
				
				 ':' tipo  ids+=ID (',' ids+=ID)* ('=' value)? TAG_EMPTY_CLOSE
				 {
				 System.out.println("Definir un hash map para var con scope");	
				 System.out.println("ref "+$ids.toString() + " in ");				
				 }
	;


decl_funcion

scope {
    String ambito;
}
 	: TAG_START_OPEN 'function' tipo_return  '::' FN_ID
 	
 		{$decl_funcion::ambito = $FN_ID.text;}
 		
 	':' lista_params TAG_CLOSE lista_instrucciones TAG_END_OPEN
'function' TAG_CLOSE ;



Many thx in advance,
-- 
Marouane

From des at deshartman.com  Tue May  5 23:33:36 2009
From: des at deshartman.com (Des Hartman)
Date: Wed, 6 May 2009 16:33:36 +1000
Subject: [antlr-interest] CommonTree Serialization to XML
Message-ID: <8773d42e0905052333x6bb3fa8fm414deb13315a3d3@mail.gmail.com>

I saw there was some documentation on serializing an AST (CommonTree) to
XML. This appears to be only for ANTLR v2 (see below)

Is there a similar facility in 3.1.3?

AST (XML) Serialization

 [Oliver Zeigermann olli at zeigermann.de provided the initial implementation
of this serialization.  His XTAL <http://www.zeigermann.de/xtal.html> XML
translation code is worth checking out; particularly for reading
XML-serialized ASTs back in.]

 For a variety of reasons, you may want to store an AST or pass it to
another program or computer.  Class antlr.BaseAST is Serializable using the
Java code generator, which means you can write ASTs to the disk using the
standard Java stuff.  You can also write the ASTs out in XML form using the
following methods from BaseAST:

   - public void xmlSerialize(Writer out)
   - public void xmlSerializeNode(Writer out)
   - public void xmlSerializeRootOpen(Writer out)
   - public void xmlSerializeRootClose(Writer out)



Thanks
Des
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090506/185bb937/attachment.html 

From des at deshartman.com  Tue May  5 23:36:37 2009
From: des at deshartman.com (Des Hartman)
Date: Wed, 6 May 2009 16:36:37 +1000
Subject: [antlr-interest] Help: Deserialize AST
In-Reply-To: <376196.98988.qm@web8506.mail.in.yahoo.com>
References: <376196.98988.qm@web8506.mail.in.yahoo.com>
Message-ID: <8773d42e0905052336i7e1f3e2dy8df40afd066629a3@mail.gmail.com>

Was this in V3? I'm trying to serialise an AST between Actionscript and Java

Thanks
Des



2009/5/4 aravind krishnamoorthy <aravind_ezee at yahoo.co.in>

> Hi All,
>
>    I got a very useful information of serializing an AST object, using the
> xmlSerialize methof of the "BaseAST" class in antlr. I was able to serialize
> it successfully. But I am not able to deserialize those back again.
>
>   If anyone could help me on this I would be helpful.
>
> Thanks,
> Aravind
> ------------------------------
> Own a website.Get an unlimited package.Pay next to nothing.* Click here!.<http://in.rd.yahoo.com/tagline_ysb_website/*http://in.business.yahoo.com/>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090506/621986a4/attachment.html 

From johan at sikanda.be  Wed May  6 00:39:37 2009
From: johan at sikanda.be (Johan Cockx)
Date: Wed, 6 May 2009 09:39:37 +0200
Subject: [antlr-interest] Getting started with ANTLRWorks: interpreter does
	not show parse tree
Message-ID: <dc07c6b0905060039q493ce66drcb7cfae7627acc65@mail.gmail.com>

Hello,

This is the first time I am using ANTLRWorks.
When I paste the tutorial "Expr" example into ANTLRWorks 1.2.3,  select the
interpreter and enter an expression (followed by enter) ,  the parse tree
window remains empty.
What could be the cause?

Johan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090506/b0786d21/attachment.html 

From jevitha at gmail.com  Wed May  6 05:44:37 2009
From: jevitha at gmail.com (jevitha)
Date: Wed, 6 May 2009 18:14:37 +0530
Subject: [antlr-interest] Doubt regarding Tree grammar
Message-ID: <cb65abb00905060544u630e0efdh8552302fd3d566ff@mail.gmail.com>

Hi all,

   Im facing this problem of converting parser grammar to tree grammar.
I have some rules which incrementally build ASTs  like the following
example:

postfixExpression : (primary->primary)
( '(' args=expressionList ')'
-> ^(CALL $postfixExpression $args)
| '[' ie=expression ']'
-> ^(INDEX $postfixExpression $ie)
| '.' p=primary
-> ^(FIELDACCESS $postfixExpression $p)
)*
;

-- 
Best Regards,
Jevitha

"Faith is to believe what you do not see; the reward of this faith is to see
what you believed in."
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090506/3852ffca/attachment.html 

From jevitha at gmail.com  Wed May  6 05:48:50 2009
From: jevitha at gmail.com (jevitha)
Date: Wed, 6 May 2009 18:18:50 +0530
Subject: [antlr-interest] Doubt regarding Tree grammar
In-Reply-To: <cb65abb00905060544u630e0efdh8552302fd3d566ff@mail.gmail.com>
References: <cb65abb00905060544u630e0efdh8552302fd3d566ff@mail.gmail.com>
Message-ID: <cb65abb00905060548q6577c59cofd1bf69eeb744d8b@mail.gmail.com>

>
> Hi all,
>
>    Im facing this problem of converting parser grammar to tree grammar.
> I have some rules which incrementally build ASTs  like the following
> example:
>
> postfixExpression : (primary->primary)
>                                      ( '(' args=expressionList ')' ->
> ^(CALL $postfixExpression $args)
>                                    | '[' ie=expression ']'  -> ^(INDEX
> $postfixExpression $ie)
>                                    | '.' p=primary -> ^(FIELDACCESS
> $postfixExpression $p) )*;



> When i convert this to tree grammar by removing the parser grammar leaving
> alone the rewrite rules, im unable to use the $postfixExpression in the tree
> grammar ... What is the equivaent i should use to denote the node already
> built for the rule?



Thanks in advance,

>
> --
> Best Regards,
> Jevitha
>
> "Faith is to believe what you do not see; the reward of this faith is to
> see what you believed in."
>
>
>


-- 
Best Regards,
Jevitha

"Faith is to believe what you do not see; the reward of this faith is to see
what you believed in."
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090506/16de6aaf/attachment.html 

From hugo.leeney at gmail.com  Wed May  6 06:13:32 2009
From: hugo.leeney at gmail.com (Hugo Leeney)
Date: Wed, 6 May 2009 14:13:32 +0100
Subject: [antlr-interest] Getting started with ANTLRWorks: interpreter
	does not show parse tree
In-Reply-To: <dc07c6b0905060039q493ce66drcb7cfae7627acc65@mail.gmail.com>
References: <dc07c6b0905060039q493ce66drcb7cfae7627acc65@mail.gmail.com>
Message-ID: <ccbc40a00905060613i3f806168hdbfd259d4dc86a5b@mail.gmail.com>

Did you press the run button? (Black triangle on grey background to
the top left of the Interpreter input screen)

On Wed, May 6, 2009 at 8:39 AM, Johan Cockx <johan at sikanda.be> wrote:
> Hello,
>
> This is the first time I am using ANTLRWorks.
> When I paste the tutorial "Expr" example into ANTLRWorks 1.2.3,? select the
> interpreter and enter an expression (followed by enter) ,? the parse tree
> window remains empty.
> What could be the cause?
>
> Johan
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>

From johan at sikanda.be  Wed May  6 06:56:47 2009
From: johan at sikanda.be (Johan Cockx)
Date: Wed, 6 May 2009 15:56:47 +0200
Subject: [antlr-interest] Getting started with ANTLRWorks: interpreter
	does not show parse tree
In-Reply-To: <ccbc40a00905060613i3f806168hdbfd259d4dc86a5b@mail.gmail.com>
References: <dc07c6b0905060039q493ce66drcb7cfae7627acc65@mail.gmail.com> 
	<ccbc40a00905060613i3f806168hdbfd259d4dc86a5b@mail.gmail.com>
Message-ID: <dc07c6b0905060656v397f3ac8qc8a6c184f8384c5c@mail.gmail.com>

That's it,  thanks.

On Wed, May 6, 2009 at 3:13 PM, Hugo Leeney <hugo.leeney at gmail.com> wrote:

> Did you press the run button? (Black triangle on grey background to
> the top left of the Interpreter input screen)
>
> On Wed, May 6, 2009 at 8:39 AM, Johan Cockx <johan at sikanda.be> wrote:
> > Hello,
> >
> > This is the first time I am using ANTLRWorks.
> > When I paste the tutorial "Expr" example into ANTLRWorks 1.2.3,  select
> the
> > interpreter and enter an expression (followed by enter) ,  the parse tree
> > window remains empty.
> > What could be the cause?
> >
> > Johan
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >
> >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090506/c54cef44/attachment.html 

From johan at sikanda.be  Wed May  6 07:18:25 2009
From: johan at sikanda.be (Johan Cockx)
Date: Wed, 6 May 2009 16:18:25 +0200
Subject: [antlr-interest] Lexer.getNumberOfSyntaxErrors not reliable;
	is this a bug?
Message-ID: <dc07c6b0905060718t4831690cq9ea4aa46ba6a7c19@mail.gmail.com>

Hi,

I am using ANTLR 3.1.3.

The class BaseRecognizer has a method getNumberOfSyntaxErrors() that is
supposed to return the number of syntax errors detected.

The count is maintained in BaseRecognizer.reportError(...).

However,  the Lexer class overrides this method and does not update the
syntax error count when a lexer error is reported.  As a result,  the syntax
error count is not reliable in the lexer.

The only way to reliably count lexer syntax errors seems to be to override
reportError again and maintain the count yourself.

Is this a bug?  If it is a feature,  it seems to be an undocumented one.

Is there a better way to detect whether an error has ocurred during
parsing?  I could not find a way to suppress error recovery in the lexer,
and the comment in the Lexer.reportError implementation is not very
promising: it reads "TODO: not thought about recovery in lexer yet."

I am looking for a way to reliably detect whether my ANTLR-generated parser
and lexer have detected any syntax errors.

Regards, Johan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090506/a7c3b139/attachment.html 

From jimi at temporal-wave.com  Wed May  6 07:30:52 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 06 May 2009 07:30:52 -0700
Subject: [antlr-interest] Lexer.getNumberOfSyntaxErrors not reliable;
 is this a bug?
In-Reply-To: <dc07c6b0905060718t4831690cq9ea4aa46ba6a7c19@mail.gmail.com>
References: <dc07c6b0905060718t4831690cq9ea4aa46ba6a7c19@mail.gmail.com>
Message-ID: <4A019F1C.6000802@temporal-wave.com>

Johan Cockx wrote:
> Hi,
>
> I am using ANTLR 3.1.3.
>
> The class BaseRecognizer has a method getNumberOfSyntaxErrors() that 
> is supposed to return the number of syntax errors detected.
>
> The count is maintained in BaseRecognizer.reportError(...).
>
> However,  the Lexer class overrides this method and does not update 
> the syntax error count when a lexer error is reported.  As a result,  
> the syntax error count is not reliable in the lexer.
Take a look through past posts for advice on this, but basically you 
should code your lexer so that it cannot give syntax errors really. You 
should code it so that it intercepts things that go wrong and generates 
sensible errors.

If you want the simpler behavior, then you should indeed override the 
display error method. Whether the default one should increment the error 
count is a good question though. But it is unlikely that the default 
error message displayRecognitionError (which is what you normally 
override) would ever be what you want to display anyway of course.

Jim


From jimi at temporal-wave.com  Wed May  6 07:33:01 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 06 May 2009 07:33:01 -0700
Subject: [antlr-interest] CommonTree Serialization to XML
In-Reply-To: <8773d42e0905052333x6bb3fa8fm414deb13315a3d3@mail.gmail.com>
References: <8773d42e0905052333x6bb3fa8fm414deb13315a3d3@mail.gmail.com>
Message-ID: <4A019F9D.4060307@temporal-wave.com>

Des Hartman wrote:
> I saw there was some documentation on serializing an AST (CommonTree) 
> to XML. This appears to be only for ANTLR v2 (see below)
>
> Is there a similar facility in 3.1.3?
>
If I were you, I would just copy the code from 
org.antlr.runtime.tree.DOTTreeGenerator.java and change it to produce 
XML. Should be trivial.

Jim

From johan at sikanda.be  Wed May  6 07:41:07 2009
From: johan at sikanda.be (Johan Cockx)
Date: Wed, 6 May 2009 16:41:07 +0200
Subject: [antlr-interest] Lexer.getNumberOfSyntaxErrors not reliable;
	is 	this a bug?
In-Reply-To: <4A019F1C.6000802@temporal-wave.com>
References: <dc07c6b0905060718t4831690cq9ea4aa46ba6a7c19@mail.gmail.com> 
	<4A019F1C.6000802@temporal-wave.com>
Message-ID: <dc07c6b0905060741x6a242944ga654944fae938b36@mail.gmail.com>

On Wed, May 6, 2009 at 4:30 PM, Jim Idle <jimi at temporal-wave.com> wrote:

> Johan Cockx wrote:
> > Hi,
> >
> > I am using ANTLR 3.1.3.
> >
> > The class BaseRecognizer has a method getNumberOfSyntaxErrors() that
> > is supposed to return the number of syntax errors detected.
> >
> > The count is maintained in BaseRecognizer.reportError(...).
> >
> > However,  the Lexer class overrides this method and does not update
> > the syntax error count when a lexer error is reported.  As a result,
> > the syntax error count is not reliable in the lexer.
> Take a look through past posts for advice on this, but basically you
> should code your lexer so that it cannot give syntax errors really. You
> should code it so that it intercepts things that go wrong and generates
> sensible errors.
>
> If you want the simpler behavior, then you should indeed override the
> display error method. Whether the default one should increment the error
> count is a good question though. But it is unlikely that the default
> error message displayRecognitionError (which is what you normally
> override) would ever be what you want to display anyway of course.
>
> Jim
>

What you say makes sense.  However,  my point is that I have only just
started the development of my grammar and I don't want want to spend time on
error handling yet. It is also the first time I am using ANTLR (I have used
Flex/Bison before) and I was just looking for a simple way to detect whether
or not any parsing errors have occurred.  The current behavior is quite
confusing for a first time user,  so I'd say the default display error
method should increment the error count.

Even the error count method doesn't seem to be well documented,  I only
found it by looking at the source code.

Thank's anyway,   my problem is solved.

Johan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090506/912e23b9/attachment.html 

From mmburke at gwu.edu  Wed May  6 08:27:18 2009
From: mmburke at gwu.edu (Matthew M. Burke)
Date: Wed, 06 May 2009 11:27:18 -0400
Subject: [antlr-interest] Implementing if statements in a tree parsing
	Interpreter
Message-ID: <4A01AC56.2040708@gwu.edu>

My next question:

I am building an interpreter based on the ideas in 
http://www.antlr.org/wiki/display/ANTLR3/Simple+tree-based+interpeter.  
In particular, I am taking the first approach of starting a new tree 
parser for each function invocation.

Now I need to implement if statements (well, actually I have "smaller?", 
"notsmaller?", "same?".... but once I get one figured out I can 
generalize...) and I'm not quite sure how to do it.  I read through the 
recent thread on this list "Skip subtrees in tree grammar" since it 
touches on this subject, but I don't see how to adapt what was discussed 
in that thread to my situation.

My parser builds trees as follows:


statement
    : ...
    |  SAME val val NL+  block --> ^(SAME_CMD val val block)
    | ...
    ;


(where NL is a newline, val is essentially a standard expression rule, 
block is a list of statements)


Now in the tree parser, I have

statement
    : ...
    | ^(SAME_CMD a=val b=val .) {
                      int aval = $a.value;
                      int bval = $b.value;
                      if (a == b) {
                            // help ?!?
                      }
    }
    | ...
    ;

If I had ^(SAME_CMD a=val b=val block), then block is automatically 
evaluated before the action is run.  So it seems to me that I need to 
skip the block in the matching (as I have above) and then (at the spot 
marked 'help') get hold of the root of the block tree, create a new 
evaluator and run it.  But I haven't been able to figure out how to do 
that. 

One possibility I thought of was in the parser, each time I come to a 
block I could create a function with a unique name to wrap the block, 
but that seems like a kludge.

Any suggestions?

Thanks,

Matt




From martijn.reuvers at gmail.com  Wed May  6 10:56:18 2009
From: martijn.reuvers at gmail.com (Martijn Reuvers)
Date: Wed, 6 May 2009 19:56:18 +0200
Subject: [antlr-interest] Skip subtree in tree grammar
In-Reply-To: <4a009601.0c0bca0a.24a7.2c70SMTPIN_ADDED@mx.google.com>
References: <c376e6ec0905050638t3bbf53cx2c298b33231831c@mail.gmail.com>
	<4a009601.0c0bca0a.24a7.2c70SMTPIN_ADDED@mx.google.com>
Message-ID: <c376e6ec0905061056u2a51512bo6cc72fbebcd7358a@mail.gmail.com>

Hi Gavin,

I tried as you suggested ( I use antlr 3.1.3 ):

bool_function_content[Boolean value]
	:	{$value != null && $value.booleanValue()}?=> function_content*	
	|	.*
	;
But weird enough it comes with a lot of compile errors (92) that it
cannot find the 'value' symbol (I already tried without $ in front of
it and that does not help), e.g:

cannot find symbol
[javac] symbol  : variable value
[javac] location: class basic.test07.ResTree.DFA19
[javac]                         if ( (LA19_74==DOWN) && ((value !=
null && value.booleanValue()))) {s = 15;}

If I look at the source generated (treeparser) these errors are inside
a DFA19 (which extends DFA), and indeed there the value parameter is
not defined. If I remove the | .* option, it generates properly and
compiles fine. Any idea why this is happening?

Martijn

From jimi at temporal-wave.com  Wed May  6 11:04:27 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 06 May 2009 11:04:27 -0700
Subject: [antlr-interest] Skip subtree in tree grammar
In-Reply-To: <c376e6ec0905061056u2a51512bo6cc72fbebcd7358a@mail.gmail.com>
References: <c376e6ec0905050638t3bbf53cx2c298b33231831c@mail.gmail.com>	<4a009601.0c0bca0a.24a7.2c70SMTPIN_ADDED@mx.google.com>
	<c376e6ec0905061056u2a51512bo6cc72fbebcd7358a@mail.gmail.com>
Message-ID: <4A01D12B.5090300@temporal-wave.com>

Martijn Reuvers wrote:
> Hi Gavin,
>
> I tried as you suggested ( I use antlr 3.1.3 ):
>
> bool_function_content[Boolean value]
> 	:	{$value != null && $value.booleanValue()}?=> function_content*	
> 	|	.*
> 	;
> But weird enough it comes with a lot of compile errors (92) that it
> cannot find the 'value' symbol (I already tried without $ in front of
> it and that does not help), e.g:
>
> cannot find symbol
> [javac] symbol  : variable value
> [javac] location: class basic.test07.ResTree.DFA19
> [javac]                         if ( (LA19_74==DOWN) && ((value !=
> null && value.booleanValue()))) {s = 15;}
>
> If I look at the source generated (treeparser) these errors are inside
> a DFA19 (which extends DFA), and indeed there the value parameter is
> not defined. If I remove the | .* option, it generates properly and
> compiles fine. Any idea why this is happening?
>
> Martijn
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>   
You cannot use local parameters in predicates. You need to assign them 
into a scope and reference the scope.

Jim

From martijn.reuvers at gmail.com  Wed May  6 11:07:59 2009
From: martijn.reuvers at gmail.com (Martijn Reuvers)
Date: Wed, 6 May 2009 20:07:59 +0200
Subject: [antlr-interest] Implementing if statements in a tree parsing
	Interpreter
In-Reply-To: <4A01AC56.2040708@gwu.edu>
References: <4A01AC56.2040708@gwu.edu>
Message-ID: <c376e6ec0905061107t68a03700j5fbbb814df28500c@mail.gmail.com>

Hello Matt,

You have a different approach then what I did. Maybe it helps you if I
tell you how I do it?

What I do is I parse the the source file using tree grammar completely
but do not execute any real actions, except registering some symbols,
checking a few types etc. Then I reparse from a certain point (in my
case a main function) and from there I actually execute actions.

I do not use a new parser but use the same parser I already have, in
my case I remember the start of my main function using input.index()
and when I need to reparse I push it on the nodestream with:
nodeStream.push(index), from there a second parsing 'round' is started
but then I execute real actions. I do use the BufferedTreeNodeStream
for it to be able push/pop (thus reparse) instead of the
CommonNodeStream. Hence the solution with boolean stack in my case
works as in the second parse I can check that and decide to actually
do something (execute the contents of the if statement) or not. But
see the other thread for details, the second solution Gavin suggested
does not work for me so far. Perhaps if you remember the index of your
block you can do the same and push it in your if on success, not sure
though.

Martijn

From martijn.reuvers at gmail.com  Wed May  6 11:54:04 2009
From: martijn.reuvers at gmail.com (Martijn Reuvers)
Date: Wed, 6 May 2009 20:54:04 +0200
Subject: [antlr-interest] Skip subtree in tree grammar
In-Reply-To: <4A01D12B.5090300@temporal-wave.com>
References: <c376e6ec0905050638t3bbf53cx2c298b33231831c@mail.gmail.com>
	<4a009601.0c0bca0a.24a7.2c70SMTPIN_ADDED@mx.google.com>
	<c376e6ec0905061056u2a51512bo6cc72fbebcd7358a@mail.gmail.com>
	<4A01D12B.5090300@temporal-wave.com>
Message-ID: <c376e6ec0905061154t538fcf6bp61e6eeb2ea8b8d2@mail.gmail.com>

Hi Jim,

Thanks! I was not aware of that restriction with parameters. It seems
to work now for most of it.

It accepts everything with the | .*, except expressions if they are
inside the if-statement weird enough.

e.g:

if(false) {
  int a = 5+5;
}

Then i get a: node from after line 22:12 no viable alternative at
input 'DOWN'. But only if the if is false, if the if is true it
executes just fine without any error. Any other statement inside the
if-statement with false is accepted.

Does the | .* option not say accept everything until the end of the if
statement, irrelevant of what it is?

Martijn

From babak.teymouri at noos.fr  Wed May  6 13:45:40 2009
From: babak.teymouri at noos.fr (babak.teymouri at noos.fr)
Date: Wed,  6 May 2009 22:45:40 +0200 (CEST)
Subject: [antlr-interest] Mutual left recursion rmoval help!!
Message-ID: <ea-mime-4a01f6f4-f12-1a130ec8@webmail.numericable.fr>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090506/6fb3e9a0/attachment.html 

From parrt at cs.usfca.edu  Wed May  6 13:59:17 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 6 May 2009 13:59:17 -0700
Subject: [antlr-interest] Mutual left recursion rmoval help!!
In-Reply-To: <ea-mime-4a01f6f4-f12-1a130ec8@webmail.numericable.fr>
References: <ea-mime-4a01f6f4-f12-1a130ec8@webmail.numericable.fr>
Message-ID: <F7975F0D-6669-4664-8CBB-C0F5E88DAADB@cs.usfca.edu>

thanks...found this myself...submitted a bug report.
Ter
On May 6, 2009, at 1:45 PM, babak.teymouri at noos.fr wrote:

>
>
> Hi,
>
> working on a huge grammar ( approx 1300 rules) , I hit several  
> mutual left-recursion situation.
> Following the wiki (thanks to Johannes Luber), I removed the Mutual  
> Left-recursed rules.
> at the end, I have an error message from Antlr that indicates a  
> Mutual left-recursion on 1 rule:
>
> [22:21:26] Checking Grammar...
> [22:21:26] error(210):  The following sets of rules are mutually  
> left-recursive [value_expression_primary]
> [22:21:26] Aborting because the following rules are mutually left- 
> recursive:
>     [[T.value_expression_primary,index=2,line=16]]
> [22:21:26] java.lang.ClassCastException: org.antlr.tool.Rule cannot  
> be cast to java.lang.String
>     at  
> org 
> .antlr 
> .works 
> .grammar.antlr.ANTLRGrammarEngineImpl.markLeftRecursiveRules(Unknown  
> Source)
>     at  
> org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.analyze(Unknown  
> Source)
>     at  
> org.antlr.works.grammar.engine.GrammarEngineImpl.analyze(Unknown  
> Source)
>     at org.antlr.works.grammar.CheckGrammar.run(Unknown Source)
>     at java.lang.Thread.run(Unknown Source)
>
>
>
> here is the extract of the grammar, any help will be greatly  
> appreciated:
> Babak
>
> grammar T ;
>
> tokens {
> LEFT_PAREN ='(' ;
> RIGHT_PAREN = ')';
> CONCATENATION_OPERATOR = '||' ;
> LEFT_BRACKET_OR_TRIGRAPH = '[' ;
> RIGHT_BRACKET_OR_TRIGRAPH = ']' ;
> PERIOD = '.' ;
> }
>
> start
>     :     value_expression_primary EOF ;
>
>
> value_expression_primary :
> (LEFT_PAREN value_expression RIGHT_PAREN
> | unsigned_value_specification
> | column_reference
> | set_function_specification
> | window_function
> | scalar_subquery
> | case_expression
> | cast_specification
> | subtype_treatment
> | value_expression_primary PERIOD method_name sql_argument_list?
> | generalized_invocation
> | static_method_invocation
> | new_specification
> | reference_resolution
> | collection_value_constructor
> | multiset_element_reference
> | routine_invocation
> | next_value_expression
> )
> (PERIOD field_name
> | dereference_operator qualified_identifier sql_argument_list?
> | (CONCATENATION_OPERATOR value_expression_primary)*  
> LEFT_BRACKET_OR_TRIGRAPH numeric_value_expression  
> RIGHT_BRACKET_OR_TRIGRAPH
> )*
> ;
>
> numeric_value_expression
>     :    ;
>
> qualified_identifier
>     :    ;
> dereference_operator
>     :    ;
> field_name
>     :    ;
> value_expression
>     :    ;
> unsigned_value_specification
>     :    ;
>
> column_reference:;
>
> set_function_specification
>     :    ;
> window_function
>      :        ;
> scalar_subquery
>      :        ;
> case_expression
>      :        ;
> cast_specification
>      :        ;
> subtype_treatment
>      :        ;
> sql_argument_list
>     :            ;
> generalized_invocation
>     :            ;
> static_method_invocation
>     :            ;
> new_specification
>     :            ;
> reference_resolution
>     :            ;
> collection_value_constructor
>     :            ;
> multiset_element_reference
>     :            ;
> routine_invocation
>     :            ;
> next_value_expression     :        ;
>
> method_name
>     :    ;
>
>
>
>
>
>
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From tbender at stud.hs-heilbronn.de  Wed May  6 14:05:09 2009
From: tbender at stud.hs-heilbronn.de (Tilman Bender)
Date: Wed, 6 May 2009 23:05:09 +0200
Subject: [antlr-interest] Semantic Analysis via  TreeWalker
Message-ID: <14982C36-3E9A-4DF4-BA4F-28E2645BC25C@stud.hs-heilbronn.de>

Hi folks,

I am still struggling with the semantic analysis in my little  
compiler. First of all here is what I have so far.

* On the parser level I allow operators to be used on all kinds   
operands e.g:
   "true + false " would be accepted by my parser an converted to ^(+  
true false)

* To still catch such errors I introduced an extra compiler stage in  
the form of a TreeWalker containing rules like the following:

expression returns [String returntype]
:
^(PLUS a=expression b=expression)
{
   if($a.returntype.equals("int")&& $b.returntype.equals("int"))
   {
     $returntype="int";
   }
   else if ($a.returntype.equals("int")&& $b.returntype.equals("float"))
   {
     //TODO convert all ints in the left subtree to float
     $returntype="float";
   }
   else if ($a.returntype.equals("float")&& $b.returntype.equals("int"))
   {
     //TODO convert all ints in the right subtree to float
     $returntype="float";
   }
   else if ($a.returntype.equals("float")&&  
$b.returntype.equals("float"))
   {
     $returntype="float";
   }else
   {
      throw new InvalidTypeException();
   }

}
-> ^(PLUS $a $b)

Unfortunately I still have two problems with this:

1. How can I throw a detailed Error Message saying something like "The  
operator + is invald for the types of "+ $a.returntype + " and "+ 
$b.returntype

2. How can I modifiy the tree returned by $a so that I can replace  
every token like INT:3 with a token of FLOAT:3.0.  So that (+ 3 4.0)  
becomes (+ 3.0 4.0)
I would write a recursive method for doint the tree manipulation but  
my main problem is, that I do not know how to "reattach" the modfied  
subtree to my result.
$a.tree=castIntToFloat($a.tree) won't work because $a.tree is  
readonly :-(

kind regards & thanks in advance

Tilman Bender
Student des Software Engineering
Hochschule Heilbronn
tbender at stud.hs-heilbronn.de



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090506/8c04aefa/attachment.html 

From antlr at mirality.co.nz  Wed May  6 14:06:24 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 07 May 2009 09:06:24 +1200
Subject: [antlr-interest] Skip subtree in tree grammar
In-Reply-To: <c376e6ec0905061154t538fcf6bp61e6eeb2ea8b8d2@mail.gmail.com
 >
References: <c376e6ec0905050638t3bbf53cx2c298b33231831c@mail.gmail.com>
	<4a009601.0c0bca0a.24a7.2c70SMTPIN_ADDED@mx.google.com>
	<c376e6ec0905061056u2a51512bo6cc72fbebcd7358a@mail.gmail.com>
	<4A01D12B.5090300@temporal-wave.com>
	<c376e6ec0905061154t538fcf6bp61e6eeb2ea8b8d2@mail.gmail.com>
Message-ID: <20090506210652.EA7023418526@www.antlr.org>

At 06:54 7/05/2009, Martijn Reuvers wrote:
 >Does the | .* option not say accept everything until the end of 
the
 >if statement, irrelevant of what it is?

In theory yes, but as I said earlier there's a quirk in older 
versions that makes it refuse to match subtrees properly.  You 
need to use the "skip" variant on those versions.  And IIRC "those 
versions" includes the latest release -- only the daily builds 
have been fixed up thus far.


From antlr at mirality.co.nz  Wed May  6 14:10:47 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 07 May 2009 09:10:47 +1200
Subject: [antlr-interest] Mutual left recursion rmoval help!!
In-Reply-To: <ea-mime-4a01f6f4-f12-1a130ec8@webmail.numericable.fr>
References: <ea-mime-4a01f6f4-f12-1a130ec8@webmail.numericable.fr>
Message-ID: <20090506211110.7B66E3418519@www.antlr.org>

At 08:45 7/05/2009, babak.teymouri at noos.fr wrote:
>[22:21:26] error(210):  The following sets of rules are mutually 
>left-recursive [value_expression_primary]
>[22:21:26] Aborting because the following rules are mutually 
>left-recursive:
>     [[T.value_expression_primary,index=2,line=16]]
[...]
>value_expression_primary :
[...]
>| value_expression_primary PERIOD method_name sql_argument_list?

There's your left recursion.

With the general recursion pattern:

rule
   : a | b | c | rule d | rule e
   ;

The correct replacement is:

rule
   : (a | b | c) (d | e)*
   ;


From micha-1 at fantasymail.de  Wed May  6 15:30:48 2009
From: micha-1 at fantasymail.de (Micha)
Date: Thu, 7 May 2009 00:30:48 +0200
Subject: [antlr-interest] Semantic Analysis via  TreeWalker
In-Reply-To: <14982C36-3E9A-4DF4-BA4F-28E2645BC25C@stud.hs-heilbronn.de>
References: <14982C36-3E9A-4DF4-BA4F-28E2645BC25C@stud.hs-heilbronn.de>
Message-ID: <200905070030.49078.micha-1@fantasymail.de>

On Wednesday 06 May 2009 23:05:09 Tilman Bender wrote:
>
> 1. How can I throw a detailed Error Message saying something like "The
> operator + is invald for the types of "+ $a.returntype + " and "+
> $b.returntype

either throw an exception (in your if-statements) or print to stderr (or use 
java logging) to print the error (your if statements catch the incorrect 
combinations)

> 2. How can I modifiy the tree returned by $a so that I can replace
> every token like INT:3 with a token of FLOAT:3.0.  So that (+ 3 4.0)
> becomes (+ 3.0 4.0)

I haven't done this with antlr, but in this case just generate a new tree as 
output (OUTPUT= AST) of the pass over the first tree, even if only few parts of 
tree actually changes. After that you have a tree with casting inserted.
I don't know if a treeparser can generate a new tree, but more than one passes 
are common.

 Michael


From des at deshartman.com  Wed May  6 17:40:58 2009
From: des at deshartman.com (Des Hartman)
Date: Thu, 7 May 2009 10:40:58 +1000
Subject: [antlr-interest] CommonTree Serialization to XML
In-Reply-To: <4A019F9D.4060307@temporal-wave.com>
References: <8773d42e0905052333x6bb3fa8fm414deb13315a3d3@mail.gmail.com>
	<4A019F9D.4060307@temporal-wave.com>
Message-ID: <8773d42e0905061740l216cf600vd55d5629b37008f1@mail.gmail.com>

Jim,

ok, I'll have a look. Just wanted to check if this was still in version 3?

Thanks
Des



2009/5/7 Jim Idle <jimi at temporal-wave.com>

> Des Hartman wrote:
> > I saw there was some documentation on serializing an AST (CommonTree)
> > to XML. This appears to be only for ANTLR v2 (see below)
> >
> > Is there a similar facility in 3.1.3?
> >
> If I were you, I would just copy the code from
> org.antlr.runtime.tree.DOTTreeGenerator.java and change it to produce
> XML. Should be trivial.
>
> Jim
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090507/5f4a7d57/attachment.html 

From avidtrober at gmail.com  Wed May  6 19:19:32 2009
From: avidtrober at gmail.com (Avid Trober)
Date: Wed, 6 May 2009 21:19:32 -0500
Subject: [antlr-interest]  ECMAScript doesn't build
Message-ID: <719DA4DB8D9A412E9E96DE1CC2D9E932@homelaptop>

per the wiki email archives, this is supposed to compile cleanly: http://www.antlr.org/grammar/1206736738015/JavaScript.g

But, I get the following error to which I only found this: wiki: http://www.antlr.org/pipermail/antlr-interest/2008-September/030507.html

The grammar looks v3 to me, maybe I'm missing something?


D:\ANTLRWorks\grammars\JavaScript>java org.antlr.Tool JavaScript.g
ANTLR Parser Generator  Version 3.1 (August 12, 2008)  1989-2008
error(10):  internal error: JavaScript.g : java.util.NoSuchElementException: no
such attribute: hasPredicateBlockedByAction in template context [TOKEN_NONDETERM
INISM]
org.antlr.stringtemplate.StringTemplate.rawSetAttribute(StringTemplate.java:647)

org.antlr.stringtemplate.StringTemplate.setAttribute(StringTemplate.java:508)
org.antlr.tool.GrammarNonDeterminismMessage.toString(GrammarNonDeterminismMessag
e.java:124)
org.antlr.tool.ErrorManager$4.warning(ErrorManager.java:301)
org.antlr.tool.ErrorManager.nondeterminism(ErrorManager.java:648)
org.antlr.analysis.DecisionProbe.issueWarnings(DecisionProbe.java:453)
org.antlr.analysis.DFA.<init>(DFA.java:239)
org.antlr.tool.Grammar.createLookaheadDFA(Grammar.java:1225)
org.antlr.tool.Grammar.createLookaheadDFAs(Grammar.java:970)
org.antlr.tool.Grammar.createLookaheadDFAs(Grammar.java:920)
org.antlr.codegen.Target.performGrammarAnalysis(Target.java:114)
org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:293)
org.antlr.Tool.generateRecognizer(Tool.java:419)
org.antlr.Tool.process(Tool.java:341)
org.antlr.Tool.main(Tool.java:71)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090506/0e9f58c1/attachment.html 

From martijn.reuvers at gmail.com  Wed May  6 22:13:02 2009
From: martijn.reuvers at gmail.com (Martijn Reuvers)
Date: Thu, 7 May 2009 07:13:02 +0200
Subject: [antlr-interest] Skip subtree in tree grammar
In-Reply-To: <4a01fbe1.170bca0a.58bb.ffff9de7SMTPIN_ADDED@mx.google.com>
References: <c376e6ec0905050638t3bbf53cx2c298b33231831c@mail.gmail.com>
	<4a009601.0c0bca0a.24a7.2c70SMTPIN_ADDED@mx.google.com>
	<c376e6ec0905061056u2a51512bo6cc72fbebcd7358a@mail.gmail.com>
	<4A01D12B.5090300@temporal-wave.com>
	<c376e6ec0905061154t538fcf6bp61e6eeb2ea8b8d2@mail.gmail.com>
	<4a01fbe1.170bca0a.58bb.ffff9de7SMTPIN_ADDED@mx.google.com>
Message-ID: <c376e6ec0905062213l7175a958o2b8554e7e1f64ebf@mail.gmail.com>

Ah ok, didn't know you were talking about a snapshot. :) But thanks,
I'll give the second option a try tonight then!

From tobias.wunner at gmail.com  Thu May  7 01:43:44 2009
From: tobias.wunner at gmail.com (Tobias Wunner)
Date: Thu, 7 May 2009 10:43:44 +0200
Subject: [antlr-interest] match any token in line
Message-ID: <854AE21C-7249-41CC-9111-86FC9CDBE326@gmail.com>

Hello,

new to ANTLR I wondered if it is possible to match ".*" expressions.  
So I do not have to explicitly define the tokens to be matched and  
capture all kinds of tokens including UTF-8 characters. My input  
format I would like to process looks like:

@<CLASS-IDENTIFIER1>:
record1
record2
...
recordn
@<CLASS-IDENTIFIER2>
...

as for instance

@class1:
.*cat
@class3:
bob
jack
@class6:
df2
dfe4

Now wrote the following grammar

in		:	cname*;
cname	:	'@' CHAR* '\n' (param '\n')*;
param	:	CHAR*;
CHAR	:	'a'..'z';

The problem her is that I could only detect records with 'a'..'b'.  
Could I replace this with ".*" to match any token?

Another idea was to match any token but '@' with [^'@']* as known from  
regular expressions - somehow I did not get this work with ANTLR?

Regards,
Toby
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090507/9443a4c8/attachment.html 

From jevitha at gmail.com  Thu May  7 02:22:12 2009
From: jevitha at gmail.com (jevitha)
Date: Thu, 7 May 2009 14:52:12 +0530
Subject: [antlr-interest] Doubt regarding Tree grammar
Message-ID: <cb65abb00905070222j3140480dvff4eabecff93c5b6@mail.gmail.com>

> Hi all,
>
>    Im facing this problem of converting parser grammar to tree grammar.
> I have some rules which incrementally build ASTs  like the following
> example:
>
> postfixExpression : (primary->primary)
>                                      ( '(' args=expressionList ')' ->
> ^(CALL $postfixExpression $args)
>                                    | '[' ie=expression ']'  -> ^(INDEX
> $postfixExpression $ie)
>                                    | '.' p=primary -> ^(FIELDACCESS
> $postfixExpression $p) )*;



> When i convert this to tree grammar by removing the parser grammar leaving
> alone the rewrite rules, im unable to use the $postfixExpression in the tree
> grammar ... What is the equivaent i should use to denote the node already
> built for the rule?



Thanks in advance,


-- 
Best Regards,
Jevitha

"Faith is to believe what you do not see; the reward of this faith is to see
what you believed in."
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090507/6bf80fbb/attachment.html 

From vasanthi.ak at gmail.com  Thu May  7 03:03:34 2009
From: vasanthi.ak at gmail.com (vasanthi a)
Date: Thu, 7 May 2009 15:33:34 +0530
Subject: [antlr-interest] Comments get removed after instrumenting source
Message-ID: <307cfdc90905070303k60dbc8dfy81929cdb325589c0@mail.gmail.com>

HI All

I have the below code for java grammar comment


// Single-line comments

SL_COMMENT

: "//" (~('\r'|'\n'))* {$setType(Token.SKIP);}

;

After instrumenting the java code, it is removing the java comments . Can
you please let me know how to retain the comments

after instrumenting the code..



Please let me know, as I am stuck up with this from quite long time



Vasanthi.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090507/e6be2a43/attachment.html 

From andreas.meyer at smartshift.de  Thu May  7 03:49:57 2009
From: andreas.meyer at smartshift.de (Andreas Meyer)
Date: Thu, 07 May 2009 12:49:57 +0200
Subject: [antlr-interest] Comments get removed after instrumenting source
In-Reply-To: <307cfdc90905070303k60dbc8dfy81929cdb325589c0@mail.gmail.com>
References: <307cfdc90905070303k60dbc8dfy81929cdb325589c0@mail.gmail.com>
Message-ID: <4A02BCD5.7050300@smartshift.de>

If you just skip the comment token, it will be discarded. If you want to 
retain it, you have to use the "setHiddenAfter" / "setHiddenBefore" 
methods mentioned in the antlr wiki. Once the comments are stored there, 
you have to take care that you print them while traversing the tree for 
output.

Andreas

vasanthi a schrieb:
> HI All
>  
> I have the below code for java grammar comment
>  
>
> // Single-line comments
>
> SL_COMMENT
>
> : "//" (~('\r'|'\n'))* {$setType(Token.SKIP);}
>
> ;
>
> After instrumenting the java code, it is removing the java comments . 
> Can you please let me know how to retain the comments
>
> after instrumenting the code..
>
>  
>
> Please let me know, as I am stuck up with this from quite long time
>
>  
>
> Vasanthi.
>
>  
>
>  
>
>  
>
>  
> ------------------------------------------------------------------------
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>   


From nukiti at yahoo.de  Thu May  7 04:21:28 2009
From: nukiti at yahoo.de (Nukiti Romanova)
Date: Thu, 7 May 2009 04:21:28 -0700 (PDT)
Subject: [antlr-interest] Appending lexer rule disables rule further above.
	Bug?
Message-ID: <489372.91286.qm@web24604.mail.ird.yahoo.com>


I'd like to write a parser for some legacy data set definition files.
Here is a contrived example what the definitions look like:

        // A sample data type definition
        Type foo.bar.Strange name with 1000 weird chars: $\\d[] 
        {
            required searchable String Simple Title String field
            required searchable String Configured String field {
                maxValues   : 10
                validValues : The 1st required searchable value,
                              The 2nd value with no optional \, at end
                              The 3rd weird valid value ^%#${
                             "The 4th value, with optional quotes"
            }

            required searchable String 2nd Configured String field
            {
                maxValues     : 0   // i.e. infinite number of values
                validation {
                    maxLength : 50
                    pattern   : \d\d-[A-Z]+-.*
                }
                defaultValues : 01-ABC-An arbitrary char sequence,
                                02-DEF-Even \, is allowed,
                                03-GHI-And 1000 more variations
                displayWidth  : 30
            }
        }

I wanted to start with the lexer and as NEWLINE is significant at some parts I started
withChris Lambrou's JavaScript grammar http://antlr.org/grammar/1206736738015/JavaScript.g
which uses explicit line end tokens. I removed all the parser rules and looked what the
lexer would produce for my data type definition. Of course it produced at lot of
"no viable alternative at character ..." output. So I thought by adding the "catch all"
rule

Word
    : ((~NonWordChar)|'\\' .)+
    ;
    
fragment NonWordChar
    : LineTermChar
    | WhiteSpaceChar
    | '\\'
    | ','
    | '{'
    | '}'
    ;

at the end of the grammar file would fix some of these errors. But to my surprise it
didn't change very much. This rule for some reason causes an ambibuity between these
rules

Comment
    : '/*' (options {greedy=false;} : .)* '*/' //{ $channel=HIDDEN; }
    ;

LineComment
    : '//' (~LineTermChar)* //{ $channel=HIDDEN; }
    ;

so that line comments are not recognized any more. ANTLR writes the following warning

     warning(209): JavaScript.g:609:1: Multiple token rules can match input such as "'/'": Comment, LineComment, Word
     As a result, token(s) LineComment,Word were disabled for that input

Also characters escaped by a \ do not work as intended. It seems that the lexer insists on
recognizing a UNICODE escape \uXXXX when it encounters a \ and complains if something else
than an u follows the \.

Is this an intended behavior? My understandig was that LL(*) would mean that these kind
of ambuigities can not arise. Am I wrong? Does somebody understand this behavior and
can explain this to me and maybe even give some guidance how to overcome this problem.
Is ANTLR the right tool to create a parser for these weird data type definitions?

Thanks,
Nukiti


%%%%%%%%%%%%%%%%%%%%%%%%%%%% THE GRAMMAR %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

grammar Type;

options {
    language = Java;
}

@header {
package test.antlr.test;
}

@members {
    private static char nl = '\n';
    
    private void prtok(int type, String value) {
        System.out.println("Parsing: " + tokenNames[type] + ": " + value);
    }

    public static void main(String[] args) throws Exception {
        String inputStr =
        "// A sample data type definition"                                + nl +
        "Type foo.bar.Strange name with 1000 weird chars: $\\d[]"         + nl +
        "{"                                                               + nl +
        "    required searchable String Simple Title String field"        + nl +
        "    required searchable String Configured String field {"        + nl +
        "        maxValues   : 10"                                        + nl +
        "        validValues : The 1st required searchable value,"        + nl +
        "                      The 2nd value with no optional \\, at end" + nl +
        "                      The 3rd weird valid value ^%#${"           + nl +
        "                    \"The 4th value, with optional quotes\""     + nl +
        "    }"                                                           + nl +
        ""                                                                + nl +
        "    required searchable String 2nd Configured String field"      + nl +
        "    {"                                                           + nl +
        "        maxValues     : 0   // i.e. infinite number of values"   + nl +
        "        validation {"                                            + nl +
        "            maxLength : 50"                                      + nl +
        "            pattern   : \\d\\d-[A-Z]+-.*"                        + nl +
        "        }\n"                                                     + nl +
        "        defaultValues : 01-ABC-An arbitrary char sequence,"      + nl +
        "                        02-DEF-Even \\, is allowed,"             + nl +
        "                        03-GHI-And 1000 more variations"         + nl +
        "        displayWidth  : 30"                                      + nl +
        "    }\n"                                                         + nl +
        "}"                                                               + nl ;
            
        ANTLRStringStream input  = new ANTLRStringStream(inputStr); 
        TypeLexer         lexer  = new TypeLexer(input); 
        CommonTokenStream tokens = new CommonTokenStream(lexer); 
        TypeParser        parser = new TypeParser(tokens); 
        parser.stuff();
    } 
}

@lexer::header {
package test.antlr.test;
}

stuff
    : (c=. {prtok($c.type,$c.text);})+ EOF
    ;
    
// lexer rules.
StringLiteral
    : '"' DoubleStringCharacter* '"'
    | '\'' SingleStringCharacter* '\''
    ;
    
fragment DoubleStringCharacter
    : ~('"' | '\\' | LT)
    | '\\' EscapeSequence
    ;

fragment SingleStringCharacter
    : ~('\'' | '\\' | LT)   
    | '\\' EscapeSequence
    ;

fragment EscapeSequence
    : CharacterEscapeSequence
    | '0'
    | HexEscapeSequence
    | UnicodeEscapeSequence
    ;
    
fragment CharacterEscapeSequence
    : SingleEscapeCharacter
    | NonEscapeCharacter
    ;

fragment NonEscapeCharacter
    : ~(EscapeCharacter | LT)
    ;

fragment SingleEscapeCharacter
    : '\'' | '"' | '\\' | 'b' | 'f' | 'n' | 'r' | 't' | 'v'
    ;

fragment EscapeCharacter
    : SingleEscapeCharacter
    | DecimalDigit
    | 'x'
    | 'u'
    ;
    
fragment HexEscapeSequence
    : 'x' HexDigit HexDigit
    ;
    
fragment UnicodeEscapeSequence
    : 'u' HexDigit HexDigit HexDigit HexDigit
    ;
    
NumericLiteral
    : DecimalLiteral
    | HexIntegerLiteral
    ;
    
fragment HexIntegerLiteral
    : '0' ('x' | 'X') HexDigit+
    ;
    
fragment HexDigit
    : DecimalDigit | ('a'..'f') | ('A'..'F')
    ;
    
fragment DecimalLiteral
    : DecimalDigit+ '.' DecimalDigit* ExponentPart?
    | '.'? DecimalDigit+ ExponentPart?
    ;
    
fragment DecimalDigit
    : ('0'..'9')
    ;

fragment ExponentPart
    : ('e' | 'E') ('+' | '-') ? DecimalDigit+
    ;

Identifier
    : IdentifierStart IdentifierPart*
    ;
    
fragment IdentifierStart
    : UnicodeLetter
    | '$'
    | '_'
    | '\\' UnicodeEscapeSequence
    ;
        
fragment IdentifierPart
    : (IdentifierStart) => IdentifierStart // Avoids ambiguity, as some IdentifierStart chars also match following alternatives.
    | UnicodeDigit
    | UnicodeConnectorPunctuation
    ;
    
fragment UnicodeLetter      // Any character in the Unicode categories "Uppercase letter (Lu)", 
    : '\u0041'..'\u005A'    // "Lowercase letter (Ll)", "Titlecase letter (Lt)",
    | '\u0061'..'\u007A'    // "Modifier letter (Lm)", "Other letter (Lo)", or "Letter number (Nl)".
    | '\u00AA'
    | '\u00B5'
    | '\u00BA'
    | '\u00C0'..'\u00D6'
    | '\u00D8'..'\u00F6'
    | '\u00F8'..'\u021F'
    | '\u0222'..'\u0233'
    | '\u0250'..'\u02AD'
    | '\u02B0'..'\u02B8'
    | '\u02BB'..'\u02C1'
    | '\u02D0'..'\u02D1'
    | '\u02E0'..'\u02E4'
    | '\u02EE'
    | '\u037A'
    | '\u0386'
    | '\u0388'..'\u038A'
    | '\u038C'
    | '\u038E'..'\u03A1'
    | '\u03A3'..'\u03CE'
    | '\u03D0'..'\u03D7'
    | '\u03DA'..'\u03F3'
    | '\u0400'..'\u0481'
    | '\u048C'..'\u04C4'
    | '\u04C7'..'\u04C8'
    | '\u04CB'..'\u04CC'
    | '\u04D0'..'\u04F5'
    | '\u04F8'..'\u04F9'
    | '\u0531'..'\u0556'
    | '\u0559'
    | '\u0561'..'\u0587'
    | '\u05D0'..'\u05EA'
    | '\u05F0'..'\u05F2'
    | '\u0621'..'\u063A'
    | '\u0640'..'\u064A'
    | '\u0671'..'\u06D3'
    | '\u06D5'
    | '\u06E5'..'\u06E6'
    | '\u06FA'..'\u06FC'
    | '\u0710'
    | '\u0712'..'\u072C'
    | '\u0780'..'\u07A5'
    | '\u0905'..'\u0939'
    | '\u093D'
    | '\u0950'
    | '\u0958'..'\u0961'
    | '\u0985'..'\u098C'
    | '\u098F'..'\u0990'
    | '\u0993'..'\u09A8'
    | '\u09AA'..'\u09B0'
    | '\u09B2'
    | '\u09B6'..'\u09B9'
    | '\u09DC'..'\u09DD'
    | '\u09DF'..'\u09E1'
    | '\u09F0'..'\u09F1'
    | '\u0A05'..'\u0A0A'
    | '\u0A0F'..'\u0A10'
    | '\u0A13'..'\u0A28'
    | '\u0A2A'..'\u0A30'
    | '\u0A32'..'\u0A33'
    | '\u0A35'..'\u0A36'
    | '\u0A38'..'\u0A39'
    | '\u0A59'..'\u0A5C'
    | '\u0A5E'
    | '\u0A72'..'\u0A74'
    | '\u0A85'..'\u0A8B'
    | '\u0A8D'
    | '\u0A8F'..'\u0A91'
    | '\u0A93'..'\u0AA8'
    | '\u0AAA'..'\u0AB0'
    | '\u0AB2'..'\u0AB3'
    | '\u0AB5'..'\u0AB9'
    | '\u0ABD'
    | '\u0AD0'
    | '\u0AE0'
    | '\u0B05'..'\u0B0C'
    | '\u0B0F'..'\u0B10'
    | '\u0B13'..'\u0B28'
    | '\u0B2A'..'\u0B30'
    | '\u0B32'..'\u0B33'
    | '\u0B36'..'\u0B39'
    | '\u0B3D'
    | '\u0B5C'..'\u0B5D'
    | '\u0B5F'..'\u0B61'
    | '\u0B85'..'\u0B8A'
    | '\u0B8E'..'\u0B90'
    | '\u0B92'..'\u0B95'
    | '\u0B99'..'\u0B9A'
    | '\u0B9C'
    | '\u0B9E'..'\u0B9F'
    | '\u0BA3'..'\u0BA4'
    | '\u0BA8'..'\u0BAA'
    | '\u0BAE'..'\u0BB5'
    | '\u0BB7'..'\u0BB9'
    | '\u0C05'..'\u0C0C'
    | '\u0C0E'..'\u0C10'
    | '\u0C12'..'\u0C28'
    | '\u0C2A'..'\u0C33'
    | '\u0C35'..'\u0C39'
    | '\u0C60'..'\u0C61'
    | '\u0C85'..'\u0C8C'
    | '\u0C8E'..'\u0C90'
    | '\u0C92'..'\u0CA8'
    | '\u0CAA'..'\u0CB3'
    | '\u0CB5'..'\u0CB9'
    | '\u0CDE'
    | '\u0CE0'..'\u0CE1'
    | '\u0D05'..'\u0D0C'
    | '\u0D0E'..'\u0D10'
    | '\u0D12'..'\u0D28'
    | '\u0D2A'..'\u0D39'
    | '\u0D60'..'\u0D61'
    | '\u0D85'..'\u0D96'
    | '\u0D9A'..'\u0DB1'
    | '\u0DB3'..'\u0DBB'
    | '\u0DBD'
    | '\u0DC0'..'\u0DC6'
    | '\u0E01'..'\u0E30'
    | '\u0E32'..'\u0E33'
    | '\u0E40'..'\u0E46'
    | '\u0E81'..'\u0E82'
    | '\u0E84'
    | '\u0E87'..'\u0E88'
    | '\u0E8A'
    | '\u0E8D'
    | '\u0E94'..'\u0E97'
    | '\u0E99'..'\u0E9F'
    | '\u0EA1'..'\u0EA3'
    | '\u0EA5'
    | '\u0EA7'
    | '\u0EAA'..'\u0EAB'
    | '\u0EAD'..'\u0EB0'
    | '\u0EB2'..'\u0EB3'
    | '\u0EBD'..'\u0EC4'
    | '\u0EC6'
    | '\u0EDC'..'\u0EDD'
    | '\u0F00'
    | '\u0F40'..'\u0F6A'
    | '\u0F88'..'\u0F8B'
    | '\u1000'..'\u1021'
    | '\u1023'..'\u1027'
    | '\u1029'..'\u102A'
    | '\u1050'..'\u1055'
    | '\u10A0'..'\u10C5'
    | '\u10D0'..'\u10F6'
    | '\u1100'..'\u1159'
    | '\u115F'..'\u11A2'
    | '\u11A8'..'\u11F9'
    | '\u1200'..'\u1206'
    | '\u1208'..'\u1246'
    | '\u1248'
    | '\u124A'..'\u124D'
    | '\u1250'..'\u1256'
    | '\u1258'
    | '\u125A'..'\u125D'
    | '\u1260'..'\u1286'
    | '\u1288'
    | '\u128A'..'\u128D'
    | '\u1290'..'\u12AE'
    | '\u12B0'
    | '\u12B2'..'\u12B5'
    | '\u12B8'..'\u12BE'
    | '\u12C0'
    | '\u12C2'..'\u12C5'
    | '\u12C8'..'\u12CE'
    | '\u12D0'..'\u12D6'
    | '\u12D8'..'\u12EE'
    | '\u12F0'..'\u130E'
    | '\u1310'
    | '\u1312'..'\u1315'
    | '\u1318'..'\u131E'
    | '\u1320'..'\u1346'
    | '\u1348'..'\u135A'
    | '\u13A0'..'\u13B0'
    | '\u13B1'..'\u13F4'
    | '\u1401'..'\u1676'
    | '\u1681'..'\u169A'
    | '\u16A0'..'\u16EA'
    | '\u1780'..'\u17B3'
    | '\u1820'..'\u1877'
    | '\u1880'..'\u18A8'
    | '\u1E00'..'\u1E9B'
    | '\u1EA0'..'\u1EE0'
    | '\u1EE1'..'\u1EF9'
    | '\u1F00'..'\u1F15'
    | '\u1F18'..'\u1F1D'
    | '\u1F20'..'\u1F39'
    | '\u1F3A'..'\u1F45'
    | '\u1F48'..'\u1F4D'
    | '\u1F50'..'\u1F57'
    | '\u1F59'
    | '\u1F5B'
    | '\u1F5D'
    | '\u1F5F'..'\u1F7D'
    | '\u1F80'..'\u1FB4'
    | '\u1FB6'..'\u1FBC'
    | '\u1FBE'
    | '\u1FC2'..'\u1FC4'
    | '\u1FC6'..'\u1FCC'
    | '\u1FD0'..'\u1FD3'
    | '\u1FD6'..'\u1FDB'
    | '\u1FE0'..'\u1FEC'
    | '\u1FF2'..'\u1FF4'
    | '\u1FF6'..'\u1FFC'
    | '\u207F'
    | '\u2102'
    | '\u2107'
    | '\u210A'..'\u2113'
    | '\u2115'
    | '\u2119'..'\u211D'
    | '\u2124'
    | '\u2126'
    | '\u2128'
    | '\u212A'..'\u212D'
    | '\u212F'..'\u2131'
    | '\u2133'..'\u2139'
    | '\u2160'..'\u2183'
    | '\u3005'..'\u3007'
    | '\u3021'..'\u3029'
    | '\u3031'..'\u3035'
    | '\u3038'..'\u303A'
    | '\u3041'..'\u3094'
    | '\u309D'..'\u309E'
    | '\u30A1'..'\u30FA'
    | '\u30FC'..'\u30FE'
    | '\u3105'..'\u312C'
    | '\u3131'..'\u318E'
    | '\u31A0'..'\u31B7'
    | '\u3400'
    | '\u4DB5'
    | '\u4E00'
    | '\u9FA5'
    | '\uA000'..'\uA48C'
    | '\uAC00'
    | '\uD7A3'
    | '\uF900'..'\uFA2D'
    | '\uFB00'..'\uFB06'
    | '\uFB13'..'\uFB17'
    | '\uFB1D'
    | '\uFB1F'..'\uFB28'
    | '\uFB2A'..'\uFB36'
    | '\uFB38'..'\uFB3C'
    | '\uFB3E'
    | '\uFB40'..'\uFB41'
    | '\uFB43'..'\uFB44'
    | '\uFB46'..'\uFBB1'
    | '\uFBD3'..'\uFD3D'
    | '\uFD50'..'\uFD8F'
    | '\uFD92'..'\uFDC7'
    | '\uFDF0'..'\uFDFB'
    | '\uFE70'..'\uFE72'
    | '\uFE74'
    | '\uFE76'..'\uFEFC'
    | '\uFF21'..'\uFF3A'
    | '\uFF41'..'\uFF5A'
    | '\uFF66'..'\uFFBE'
    | '\uFFC2'..'\uFFC7'
    | '\uFFCA'..'\uFFCF'
    | '\uFFD2'..'\uFFD7'
    | '\uFFDA'..'\uFFDC'
    ;
    
fragment UnicodeCombiningMark   // Any character in the Unicode categories "Non-spacing mark (Mn)"
    : '\u0300'..'\u034E'    // or "Combining spacing mark (Mc)".
    | '\u0360'..'\u0362'
    | '\u0483'..'\u0486'
    | '\u0591'..'\u05A1'
    | '\u05A3'..'\u05B9'
    | '\u05BB'..'\u05BD'
    | '\u05BF' 
    | '\u05C1'..'\u05C2'
    | '\u05C4'
    | '\u064B'..'\u0655'
    | '\u0670'
    | '\u06D6'..'\u06DC'
    | '\u06DF'..'\u06E4'
    | '\u06E7'..'\u06E8'
    | '\u06EA'..'\u06ED'
    | '\u0711'
    | '\u0730'..'\u074A'
    | '\u07A6'..'\u07B0'
    | '\u0901'..'\u0903'
    | '\u093C'
    | '\u093E'..'\u094D'
    | '\u0951'..'\u0954'
    | '\u0962'..'\u0963'
    | '\u0981'..'\u0983'
    | '\u09BC'..'\u09C4'
    | '\u09C7'..'\u09C8'
    | '\u09CB'..'\u09CD'
    | '\u09D7'
    | '\u09E2'..'\u09E3'
    | '\u0A02'
    | '\u0A3C'
    | '\u0A3E'..'\u0A42'
    | '\u0A47'..'\u0A48'
    | '\u0A4B'..'\u0A4D'
    | '\u0A70'..'\u0A71'
    | '\u0A81'..'\u0A83'
    | '\u0ABC'
    | '\u0ABE'..'\u0AC5'
    | '\u0AC7'..'\u0AC9'
    | '\u0ACB'..'\u0ACD'
    | '\u0B01'..'\u0B03'
    | '\u0B3C'
    | '\u0B3E'..'\u0B43'
    | '\u0B47'..'\u0B48'
    | '\u0B4B'..'\u0B4D'
    | '\u0B56'..'\u0B57'
    | '\u0B82'..'\u0B83'
    | '\u0BBE'..'\u0BC2'
    | '\u0BC6'..'\u0BC8'
    | '\u0BCA'..'\u0BCD'
    | '\u0BD7'
    | '\u0C01'..'\u0C03'
    | '\u0C3E'..'\u0C44'
    | '\u0C46'..'\u0C48'
    | '\u0C4A'..'\u0C4D'
    | '\u0C55'..'\u0C56'
    | '\u0C82'..'\u0C83'
    | '\u0CBE'..'\u0CC4'
    | '\u0CC6'..'\u0CC8'
    | '\u0CCA'..'\u0CCD'
    | '\u0CD5'..'\u0CD6'
    | '\u0D02'..'\u0D03'
    | '\u0D3E'..'\u0D43'
    | '\u0D46'..'\u0D48'
    | '\u0D4A'..'\u0D4D'
    | '\u0D57'
    | '\u0D82'..'\u0D83'
    | '\u0DCA'
    | '\u0DCF'..'\u0DD4'
    | '\u0DD6'
    | '\u0DD8'..'\u0DDF'
    | '\u0DF2'..'\u0DF3'
    | '\u0E31'
    | '\u0E34'..'\u0E3A'
    | '\u0E47'..'\u0E4E'
    | '\u0EB1'
    | '\u0EB4'..'\u0EB9'
    | '\u0EBB'..'\u0EBC'
    | '\u0EC8'..'\u0ECD'
    | '\u0F18'..'\u0F19'
    | '\u0F35'
    | '\u0F37'
    | '\u0F39'
    | '\u0F3E'..'\u0F3F'
    | '\u0F71'..'\u0F84'
    | '\u0F86'..'\u0F87'
    | '\u0F90'..'\u0F97'
    | '\u0F99'..'\u0FBC'
    | '\u0FC6'
    | '\u102C'..'\u1032'
    | '\u1036'..'\u1039'
    | '\u1056'..'\u1059'
    | '\u17B4'..'\u17D3'
    | '\u18A9'
    | '\u20D0'..'\u20DC'
    | '\u20E1'
    | '\u302A'..'\u302F'
    | '\u3099'..'\u309A'
    | '\uFB1E'
    | '\uFE20'..'\uFE23'
    ;

fragment UnicodeDigit       // Any character in the Unicode category "Decimal number (Nd)".
    : '\u0030'..'\u0039'
    | '\u0660'..'\u0669'
    | '\u06F0'..'\u06F9'
    | '\u0966'..'\u096F'
    | '\u09E6'..'\u09EF'
    | '\u0A66'..'\u0A6F'
    | '\u0AE6'..'\u0AEF'
    | '\u0B66'..'\u0B6F'
    | '\u0BE7'..'\u0BEF'
    | '\u0C66'..'\u0C6F'
    | '\u0CE6'..'\u0CEF'
    | '\u0D66'..'\u0D6F'
    | '\u0E50'..'\u0E59'
    | '\u0ED0'..'\u0ED9'
    | '\u0F20'..'\u0F29'
    | '\u1040'..'\u1049'
    | '\u1369'..'\u1371'
    | '\u17E0'..'\u17E9'
    | '\u1810'..'\u1819'
    | '\uFF10'..'\uFF19'
    ;
    
fragment UnicodeConnectorPunctuation    // Any character in the Unicode category "Connector punctuation (Pc)".
    : '\u005F'
    | '\u203F'..'\u2040'
    | '\u30FB'
    | '\uFE33'..'\uFE34'
    | '\uFE4D'..'\uFE4F'
    | '\uFF3F'
    | '\uFF65'
    ;
    
Comment
    : '/*' (options {greedy=false;} : .)* '*/' //{ $channel=HIDDEN; }
    ;

LineComment
    : '//' (~LineTermChar)* //{ $channel=HIDDEN; }
    ;

LT
    : LineTermChar
    ;
    
fragment LineTermChar
    : '\n'      // Line feed.
    | '\r'      // Carriage return.
    | '\u2028'  // Line separator.
    | '\u2029'  // Paragraph separator.
    ;

WhiteSpace // Tab, vertical tab, form feed, space, non-breaking space and any other unicode "space separator".
    : WhiteSpaceChar+ //{ $channel=HIDDEN; }
    ;
    
fragment WhiteSpaceChar
    : '\t' 
    | '\u000B' 
    | '\f' 
    | ' ' 
    | '\u00A0'
    ;
    
Word
    : ((~NonWordChar)|'\\' .)+
    ;
    
fragment NonWordChar
    : LineTermChar
    | WhiteSpaceChar
    | '\\'
    | ','
    | '{'
    | '}'
    ;


      

From thomas.dill at teleport.ch  Thu May  7 05:10:22 2009
From: thomas.dill at teleport.ch (Thomas Dill)
Date: Thu, 7 May 2009 14:10:22 +0200
Subject: [antlr-interest] Comment
Message-ID: <00e701c9cf0c$db24f7c0$916ee740$@dill@teleport.ch>

Hi there.

 

I still got the following Problem:

 

In the syntax, I want to parse, a comment line starts with "-*" and ends at
the end of the line. It's possible that an asterisk can appear in a "text",
too.

 

I can't find a solution. Below there's what I tried (and many other things).
Can somebody help me?

 

Example:

 

TABLE FILE CAR

PRINT * -* prtints all fields

BY MODEL

END

 

ANTLR Code:

 

grammar FexParser;

options {k=3; backtrack=true; memoize=true;}

 

report    :    (comment | text | NEWLINE)+ ;

 

comment   :    (COMMENT_START ~(NEWLINE))* ;

text      :    (~(COMMENT_START | NEWLINE))+;

 

fragment COMMENT_START

          :    '-*';

 

WS        :    ('\t' | '\v' | '\f' | ' ' | '\u00A0')     {$channel =
HIDDEN;};

fragment NLCHARS

     :    '\n'      // Line feed.

          | '\r'          // Carriage return.

          | '\u2028' // Line separator.

          | '\u2029' // Paragraph separator.

     ;

NEWLINE : (NLCHARS) + ;

 

Best regards,

Tom

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090507/da6be47a/attachment.html 

From micha-1 at fantasymail.de  Thu May  7 05:40:58 2009
From: micha-1 at fantasymail.de (Michael)
Date: Thu, 7 May 2009 14:40:58 +0200
Subject: [antlr-interest] Comment
In-Reply-To: <00e701c9cf0c$db24f7c0$916ee740$@dill@teleport.ch>
References: <00e701c9cf0c$db24f7c0$916ee740$@dill@teleport.ch>
Message-ID: <200905071440.58797.micha-1@fantasymail.de>

Am Thursday 07 May 2009 14:10:22 schrieb Thomas Dill:
> Hi there.
>
>
>
> I still got the following Problem:
>
>
>
> In the syntax, I want to parse, a comment line starts with "-*" and ends at
> the end of the line. It's possible that an asterisk can appear in a "text",
> too.
>

i have a working one-line comment version like this ( comments start with # 
or // and go until end of the line):


NL: ('\r'? '\n')+ { skip();};
SINGLE_COMMENT: ('#' | '//') ~('\r' | '\n')* NL { skip();};

so change this to:
SINGLE_COMMENT: '-*' ~('\r' | '\n')* NL { skip();};

doesn't work?

cheers,
 Michael

From thomas.dill at teleport.ch  Thu May  7 05:47:39 2009
From: thomas.dill at teleport.ch (Thomas.dill)
Date: Thu, 7 May 2009 14:47:39 +0200
Subject: [antlr-interest] Comment
Message-ID: <5d9cf6ac85b4c51c1bfb8a525fb00009@193.247.250.13>

Thanks for your reply.
 
 It doesn&#39;t work, because, as you can see in the example code, after
"PRINT" there is an asterik and there is the problem. If you try it with
ANTLRWorks you can see what I mean.
 
 Best regards,
 Tom

--------- Original-Nachricht --------
 Von: "Michael" 
 An: "antlr-interest at antlr.org" 
 Cc: "Thomas Dill" 
 Betreff: Re: [antlr-interest] Comment
 Datum: 07/05/09 14:41
 
 Am Thursday 07 May 2009 14:10:22 schrieb Thomas Dill:
 > Hi there.
 >
 >
 >
 > I still got the following Problem:
 >
 >
 >
 > In the syntax, I want to parse, a comment line starts with "-*" and ends
at
 > the end of the line. It&#39;s possible that an asterisk can appear in a
"text",
 > too.
 >
 
 i have a working one-line comment version like this ( comments start with #

 or // and go until end of the line):
 
 
 NL: (&#39;r&#39;? &#39;n&#39;)+ { skip();};
 SINGLE_COMMENT: (&#39;#&#39; | &#39;//&#39;) ~(&#39;r&#39; | &#39;n&#39;)*
;
 
 so change this to:
 SINGLE_COMMENT: &#39;-*&#39; ~(&#39;r&#39; | &#39;n&#39;)* ;
 
 doesn&#39;t work?
 
 cheers,
  Michael
 
 

________________________________________________________________
Diese Mitteilung wurde von http://www.breitband.ch uebermittelt.
Einer der schnellsten Kabel-Internet Zugaenge!

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090507/35f41ce7/attachment.html 

From micha-1 at fantasymail.de  Thu May  7 06:03:30 2009
From: micha-1 at fantasymail.de (Michael)
Date: Thu, 7 May 2009 15:03:30 +0200
Subject: [antlr-interest] Comment
In-Reply-To: <00e701c9cf0c$db24f7c0$916ee740$@dill@teleport.ch>
References: <00e701c9cf0c$db24f7c0$916ee740$@dill@teleport.ch>
Message-ID: <200905071503.30500.micha-1@fantasymail.de>

Am Thursday 07 May 2009 14:10:22 schrieb Thomas Dill:
>
>
> grammar FexParser;
>
> options {k=3; backtrack=true; memoize=true;}
>
> report    :    (comment | text | NEWLINE)+ ;
>
>
> comment   :    (COMMENT_START ~(NEWLINE))* ;
I think this does only read one "-*" and the next character (not till end of 
line), then it wants to read COMMENT_START again 

how is (no time to try it now):
 comment   :    COMMENT_START (~(NEWLINE))* NEWLINE;

>
> text      :    (~(COMMENT_START | NEWLINE))+;


From wirving at beats.hu  Thu May  7 06:47:00 2009
From: wirving at beats.hu (wirving at beats.hu)
Date: Thu, 7 May 2009 15:47:00 +0200 (CEST)
Subject: [antlr-interest] java.lang.StackOverflowError
Message-ID: <4406.217.116.34.107.1241704020.squirrel@squirrelmail.goodman.hu>

Helo!

I want to create a Tree Grammar from my "normal" grammar (with the method
described in the ANTLR book), and after I corrected some obvious errors
(remove AST operators, etc.) I got this one:

Exception in thread "Thread-5" java.lang.StackOverflowError
	at java.util.AbstractList$Itr.<init>(Unknown Source)
	at java.util.AbstractList$ListItr.<init>(Unknown Source)
	at java.util.AbstractList.listIterator(Unknown Source)
	at java.util.AbstractList.listIterator(Unknown Source)
	at org.antlr.misc.IntervalSet.add(IntervalSet.java:104)
	at org.antlr.misc.IntervalSet.add(IntervalSet.java:93)
	at org.antlr.misc.IntervalSet.of(IntervalSet.java:74)
	at org.antlr.misc.IntervalSet.complement(IntervalSet.java:231)
	at org.antlr.misc.IntervalSet.subtract(IntervalSet.java:264)
	at org.antlr.analysis.DFAState.addReachableLabel(DFAState.java:343)
	at org.antlr.analysis.DFAState.addNFAConfiguration(DFAState.java:254)
	at org.antlr.analysis.NFAToDFAConverter.closure(NFAToDFAConverter.java:633)
	at org.antlr.analysis.NFAToDFAConverter.closure(NFAToDFAConverter.java:756)
	at org.antlr.analysis.NFAToDFAConverter.closure(NFAToDFAConverter.java:709)
....
and so on.


What could be wrong? How can I "debug" this kind of errors?

Thanks,
   Zoli



From andreas.meyer at smartshift.de  Thu May  7 06:56:14 2009
From: andreas.meyer at smartshift.de (Andreas Meyer)
Date: Thu, 07 May 2009 15:56:14 +0200
Subject: [antlr-interest] java.lang.StackOverflowError
In-Reply-To: <4406.217.116.34.107.1241704020.squirrel@squirrelmail.goodman.hu>
References: <4406.217.116.34.107.1241704020.squirrel@squirrelmail.goodman.hu>
Message-ID: <4A02E87E.5080507@smartshift.de>

I know this is not a very educating answer :-) But what about increasing 
the stacksize of the JVM?

Andreas

wirving at beats.hu schrieb:
> Helo!
>
> I want to create a Tree Grammar from my "normal" grammar (with the method
> described in the ANTLR book), and after I corrected some obvious errors
> (remove AST operators, etc.) I got this one:
>
> Exception in thread "Thread-5" java.lang.StackOverflowError
> 	at java.util.AbstractList$Itr.<init>(Unknown Source)
> 	at java.util.AbstractList$ListItr.<init>(Unknown Source)
> 	at java.util.AbstractList.listIterator(Unknown Source)
> 	at java.util.AbstractList.listIterator(Unknown Source)
> 	at org.antlr.misc.IntervalSet.add(IntervalSet.java:104)
> 	at org.antlr.misc.IntervalSet.add(IntervalSet.java:93)
> 	at org.antlr.misc.IntervalSet.of(IntervalSet.java:74)
> 	at org.antlr.misc.IntervalSet.complement(IntervalSet.java:231)
> 	at org.antlr.misc.IntervalSet.subtract(IntervalSet.java:264)
> 	at org.antlr.analysis.DFAState.addReachableLabel(DFAState.java:343)
> 	at org.antlr.analysis.DFAState.addNFAConfiguration(DFAState.java:254)
> 	at org.antlr.analysis.NFAToDFAConverter.closure(NFAToDFAConverter.java:633)
> 	at org.antlr.analysis.NFAToDFAConverter.closure(NFAToDFAConverter.java:756)
> 	at org.antlr.analysis.NFAToDFAConverter.closure(NFAToDFAConverter.java:709)
> ....
> and so on.
>
>
> What could be wrong? How can I "debug" this kind of errors?
>
> Thanks,
>    Zoli
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>   


From wirving at beats.hu  Thu May  7 07:09:13 2009
From: wirving at beats.hu (wirving at beats.hu)
Date: Thu, 7 May 2009 16:09:13 +0200 (CEST)
Subject: [antlr-interest] java.lang.StackOverflowError
Message-ID: <4570.217.116.34.107.1241705353.squirrel@squirrelmail.goodman.hu>


thanks, now I got different errors (warnings I guess):

error(10):  internal error:
org.antlr.tool.Grammar.createLookaheadDFA(Grammar.java:1242): could not
even do k=1 for decision 8; reason: timed out (>1000ms)


error(10):  internal error:
org.antlr.tool.Grammar.createLookaheadDFA(Grammar.java:1242): could not
even do k=1 for decision 69; reason: timed out (>1000ms)


error(10):  internal error:
org.antlr.tool.Grammar.createLookaheadDFA(Grammar.java:1242): could not
even do k=1 for decision 126; reason: timed out (>1000ms)

and so on....

But the .java file is generated.

Next? Increase the timeout? :)

   Zoli

> I know this is not a very educating answer :-) But what about increasing
> the stacksize of the JVM?
>
> Andreas
>
> wirving at beats.hu schrieb:
>> Helo!
>>
>> I want to create a Tree Grammar from my "normal" grammar (with the
>> method
>> described in the ANTLR book), and after I corrected some obvious errors
>> (remove AST operators, etc.) I got this one:
>>
>> Exception in thread "Thread-5" java.lang.StackOverflowError
>> 	at java.util.AbstractList$Itr.<init>(Unknown Source)
>> 	at java.util.AbstractList$ListItr.<init>(Unknown Source)
>> 	at java.util.AbstractList.listIterator(Unknown Source)
>> 	at java.util.AbstractList.listIterator(Unknown Source)
>> 	at org.antlr.misc.IntervalSet.add(IntervalSet.java:104)
>> 	at org.antlr.misc.IntervalSet.add(IntervalSet.java:93)
>> 	at org.antlr.misc.IntervalSet.of(IntervalSet.java:74)
>> 	at org.antlr.misc.IntervalSet.complement(IntervalSet.java:231)
>> 	at org.antlr.misc.IntervalSet.subtract(IntervalSet.java:264)
>> 	at org.antlr.analysis.DFAState.addReachableLabel(DFAState.java:343)
>> 	at org.antlr.analysis.DFAState.addNFAConfiguration(DFAState.java:254)
>> 	at
>> org.antlr.analysis.NFAToDFAConverter.closure(NFAToDFAConverter.java:633)
>> 	at
>> org.antlr.analysis.NFAToDFAConverter.closure(NFAToDFAConverter.java:756)
>> 	at
>> org.antlr.analysis.NFAToDFAConverter.closure(NFAToDFAConverter.java:709)
>> ....
>> and so on.
>>
>>
>> What could be wrong? How can I "debug" this kind of errors?
>>
>> Thanks,
>>    Zoli
>>
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>




From andreas.meyer at smartshift.de  Thu May  7 07:19:58 2009
From: andreas.meyer at smartshift.de (Andreas Meyer)
Date: Thu, 07 May 2009 16:19:58 +0200
Subject: [antlr-interest] java.lang.StackOverflowError
In-Reply-To: <4570.217.116.34.107.1241705353.squirrel@squirrelmail.goodman.hu>
References: <4570.217.116.34.107.1241705353.squirrel@squirrelmail.goodman.hu>
Message-ID: <4A02EE0E.9090103@smartshift.de>

You could  try to increase the time-out, I think it was called 
-Xconversiontimeout. In my grammar, I have to set it to 20 seconds until 
it works without error. It does not generate huge code, it just takes 
some time to find out to do nothing.

Andreas

wirving at beats.hu schrieb:
> thanks, now I got different errors (warnings I guess):
>
> error(10):  internal error:
> org.antlr.tool.Grammar.createLookaheadDFA(Grammar.java:1242): could not
> even do k=1 for decision 8; reason: timed out (>1000ms)
>
>
> error(10):  internal error:
> org.antlr.tool.Grammar.createLookaheadDFA(Grammar.java:1242): could not
> even do k=1 for decision 69; reason: timed out (>1000ms)
>
>
> error(10):  internal error:
> org.antlr.tool.Grammar.createLookaheadDFA(Grammar.java:1242): could not
> even do k=1 for decision 126; reason: timed out (>1000ms)
>
> and so on....
>
> But the .java file is generated.
>
> Next? Increase the timeout? :)
>
>    Zoli
>
>   
>> I know this is not a very educating answer :-) But what about increasing
>> the stacksize of the JVM?
>>
>> Andreas
>>
>> wirving at beats.hu schrieb:
>>     
>>> Helo!
>>>
>>> I want to create a Tree Grammar from my "normal" grammar (with the
>>> method
>>> described in the ANTLR book), and after I corrected some obvious errors
>>> (remove AST operators, etc.) I got this one:
>>>
>>> Exception in thread "Thread-5" java.lang.StackOverflowError
>>> 	at java.util.AbstractList$Itr.<init>(Unknown Source)
>>> 	at java.util.AbstractList$ListItr.<init>(Unknown Source)
>>> 	at java.util.AbstractList.listIterator(Unknown Source)
>>> 	at java.util.AbstractList.listIterator(Unknown Source)
>>> 	at org.antlr.misc.IntervalSet.add(IntervalSet.java:104)
>>> 	at org.antlr.misc.IntervalSet.add(IntervalSet.java:93)
>>> 	at org.antlr.misc.IntervalSet.of(IntervalSet.java:74)
>>> 	at org.antlr.misc.IntervalSet.complement(IntervalSet.java:231)
>>> 	at org.antlr.misc.IntervalSet.subtract(IntervalSet.java:264)
>>> 	at org.antlr.analysis.DFAState.addReachableLabel(DFAState.java:343)
>>> 	at org.antlr.analysis.DFAState.addNFAConfiguration(DFAState.java:254)
>>> 	at
>>> org.antlr.analysis.NFAToDFAConverter.closure(NFAToDFAConverter.java:633)
>>> 	at
>>> org.antlr.analysis.NFAToDFAConverter.closure(NFAToDFAConverter.java:756)
>>> 	at
>>> org.antlr.analysis.NFAToDFAConverter.closure(NFAToDFAConverter.java:709)
>>> ....
>>> and so on.
>>>
>>>
>>> What could be wrong? How can I "debug" this kind of errors?
>>>
>>> Thanks,
>>>    Zoli
>>>
>>>
>>>
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe:
>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>>
>>>       
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>>     
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>   


From Waverly.Edwards at genesys.com  Thu May  7 07:16:03 2009
From: Waverly.Edwards at genesys.com (Edwards, Waverly)
Date: Thu, 7 May 2009 09:16:03 -0500
Subject: [antlr-interest] language design
Message-ID: <4A454A950FB157459B59AA50C146C079204BE7FC@OMA00CEXMBX02.corp.westworlds.com>



This question is not directly aimed at ANTLR but towards language design.
If someone wouldn't mind responding or directing me towards the answer to
why would I want a primitive type to be treated as an object.  In Java and C#,
primitive types are treated as objects.  It seems to me that by doing so, you
would increase the overhead of converting values and thus it would become a
detriment to the language.  It appears that you might want this to part of your
language to make it easier for the user/developer.


The only example that comes to mind is something like this

[simple language]

Integer BirthYear
String showBirth

showBirth = "You were born in " + BirthYear.toString()

print display


I don't see the benefit of making a primitive type an object other than to
make it easier to perform operations the user can perform in other ways
with less overhead.   I can make more of an argument for making composite
types as objects.

I have a couple of books on language design but none of them address this issue.
I believe this would fall under boxing and unboxing.  If someone could direct me
towards a good reason to implement this in a language, it would be very much
appreciated.


Thank you,


Waverly.


______________________________________________________________________
This email has been scanned by the MessageLabs Email Security System.
For more information please visit http://www.messagelabs.com/email 
______________________________________________________________________
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090507/13386bca/attachment.html 

From rschulz at sonic.net  Thu May  7 07:38:15 2009
From: rschulz at sonic.net (Randall R Schulz)
Date: Thu, 7 May 2009 07:38:15 -0700
Subject: [antlr-interest] language design
In-Reply-To: <4A454A950FB157459B59AA50C146C079204BE7FC@OMA00CEXMBX02.corp.westworlds.com>
References: <4A454A950FB157459B59AA50C146C079204BE7FC@OMA00CEXMBX02.corp.westworlds.com>
Message-ID: <200905070738.15570.rschulz@sonic.net>

On Thursday May 7 2009, Edwards, Waverly wrote:
> This question is not directly aimed at ANTLR but towards language
> design. If someone wouldn't mind responding or directing me towards
> the answer to why would I want a primitive type to be treated as an
> object.  In Java and C#, primitive types are treated as objects.  It
> seems to me that by doing so, you would increase the overhead of
> converting values and thus it would become a detriment to the
> language.  It appears that you might want this to part of your
> language to make it easier for the user/developer.

I know nothing about C#, but Java's five integer types, two 
floating-point types and its boolean type are implemented by 
machine-level entities, not objects. There are counterparts for each of 
them (the so-called "boxed" primitive types).

Scala makes all of these types objects (they call them Value Types) but 
wherever possible generates JVM bytecode to use the primitive types and 
save the overhead of boxing and unboxing.


> ...
>
>
> I don't see the benefit of making a primitive type an object other
> than to make it easier to perform operations the user can perform in
> other ways with less overhead.   I can make more of an argument for
> making composite types as objects.

The benefit is substantial. Having entities in the type system that are 
exceptions to most of the rules about what user-defined types can do 
gets in the way of many things. You cannot, e.g., use an "int" as a key 
or value in a map data structure. Examples abound.

Furthermore, the cost of using boxed types is probably not as big as 
your intuition is telling you. Depending, of course, on the nature of 
the program. It would be hard to do a competitive FFT using boxed 
floating-point types, I suspect.


> I have a couple of books on language design but none of them address
> this issue. I believe this would fall under boxing and unboxing.  If
> someone could direct me towards a good reason to implement this in a
> language, it would be very much appreciated.

Are you designing a language? If so, may I recommend that you don't? The 
world does not need another language that is naively designed. I don't 
mean to be rude, but this phenomenon is responsible for a lot of poorly 
designed languages coming into widespread use, and the consequences are 
real and negative.

If you really want to work in programming language design, then learn 
where the frontiers really are and concentrate your efforts there. 
Unless you're some kind of genius, nothing you think up as an offhand 
good idea is likely to be a real contribution to the field.


Again, I don't mean to offend, just to guide you towards learning the 
field of programming languages before trying to contribute innovations 
to it.


> Thank you,
>
>
> Waverly.


Randall Schulz

From micha-1 at fantasymail.de  Thu May  7 07:45:35 2009
From: micha-1 at fantasymail.de (Michael)
Date: Thu, 7 May 2009 16:45:35 +0200
Subject: [antlr-interest] Comment
In-Reply-To: <00e701c9cf0c$db24f7c0$916ee740$@dill@teleport.ch>
References: <00e701c9cf0c$db24f7c0$916ee740$@dill@teleport.ch>
Message-ID: <200905071645.36121.micha-1@fantasymail.de>

Am Thursday 07 May 2009 14:10:22 schrieb Thomas Dill:
>
>
> In the syntax, I want to parse, a comment line starts with "-*" and ends at
> the end of the line. It's possible that an asterisk can appear in a "text",
> too.

this is a simpler grammar,but it seems it does what you want:

grammar Xx;
start: report EOF;
report: (comment { System.out.println("comment: " + $comment.text);} 
           | text { System.out.println("text: " + $text.text);} )+; 

comment: COMMENT;
text: TEXTCHR+;

fragment NEWLINE: ('\n' | '\r');
COMMENT: '-*' (~NEWLINE)* NEWLINE;
TEXTCHR: (  ~('-') 
	|  ('-') ~'*') => '-'
         );



 Michael

From sharwell at pixelminegames.com  Thu May  7 07:51:19 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Thu, 7 May 2009 09:51:19 -0500
Subject: [antlr-interest] language design
In-Reply-To: <4A454A950FB157459B59AA50C146C079204BE7FC@OMA00CEXMBX02.corp.westworlds.com>
References: <4A454A950FB157459B59AA50C146C079204BE7FC@OMA00CEXMBX02.corp.westworlds.com>
Message-ID: <86403CA0939415448BCCB83855EFE09AA68038@Bloodymary.ironwillgames.com>

While this is somewhat true of Java, it's really not true of C#. The
built-in primitive types in both languages (int, short, double, char,
bool) are passed by value in function calls and kept on the stack as
local variables. The process of boxing in both languages takes a
primitive type and wraps it as an object on the heap, as required for an
operation like the following. The process of unboxing (also shown)
converts it back to a primitive.

 

object o = 3;

int i = (int)o;

 

In Java, there are two severe limitations to the ability of primitives.
First, the language doesn't allow user-defined primitives, so there is
no concept of lightweight enums, aggregate data structures, or the
ability to create special struct based on an int that has special
meaning with no more overhead than the int itself (say for a special
application-specific type of bitfield, or distinguishing a
platform-width integer from a memory address/pointer stored in a
platform-width integer). Second, generics such as ArrayList<T> in Java
are only handled specially by the compiler. At runtime, the storage used
inside the list forces boxing/unboxing of values. Arrays of primitives
(like int[] a) are able to hold unboxed values, so they are lighter.

 

C# shows heavy advantages in several areas by hitting these issues
square on the head. First, enums are as lightweight as ints, so using
them is an encouraged, zero-overhead practice. Second, careful use of
structs, C#'s way of creating user-defined unboxed values, leads to
immense performance benefits in places like embedded computing, systems
programming, high-performance applications, and even cases like my
high-performance SlimLexer for ANTLR's C# port that operates 5x faster
than Lexer in 1/5 the memory (I sent an email to antlr-dev mailing list
about this). Third, when a generic type is instantiated at runtime with
a value type (like List<int>), the JIT actually produces code that
operates fully on unboxed values, in cases allowing performance rivaling
C++ templates. These advantages are one of the reasons I believe
Google's use of Java for the Android platform was an unacceptable
mistake, a failure to meet the fundamental requirements of their clients
as well as they could. It is the responsibility of development teams to
not make decisions like they did knowing full well it will result in a
crippled end-user experience.

 

Sam

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Edwards, Waverly
Sent: Thursday, May 07, 2009 9:16 AM
To: 'antlr-interest at antlr.org'
Subject: [antlr-interest] language design

 

 

 

This question is not directly aimed at ANTLR but towards language
design.

If someone wouldn't mind responding or directing me towards the answer
to

why would I want a primitive type to be treated as an object.  In Java
and C#,

primitive types are treated as objects.  It seems to me that by doing
so, you

would increase the overhead of converting values and thus it would
become a

detriment to the language.  It appears that you might want this to part
of your 

language to make it easier for the user/developer.

 

 

The only example that comes to mind is something like this

 

[simple language]

 

Integer BirthYear

String showBirth

 

showBirth = "You were born in " + BirthYear.toString()

 

print display

 

 

I don't see the benefit of making a primitive type an object other than
to 

make it easier to perform operations the user can perform in other ways

with less overhead.   I can make more of an argument for making
composite 

types as objects.

 

I have a couple of books on language design but none of them address
this issue.

I believe this would fall under boxing and unboxing.  If someone could
direct me

towards a good reason to implement this in a language, it would be very
much

appreciated.

 

 

Thank you,

 

 

Waverly.

 


______________________________________________________________________
This email has been scanned by the MessageLabs Email Security System.
For more information please visit http://www.messagelabs.com/email 
______________________________________________________________________

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090507/52b14a60/attachment.html 

From jimi at temporal-wave.com  Thu May  7 08:00:33 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 07 May 2009 08:00:33 -0700
Subject: [antlr-interest] Doubt regarding Tree grammar
In-Reply-To: <cb65abb00905070222j3140480dvff4eabecff93c5b6@mail.gmail.com>
References: <cb65abb00905070222j3140480dvff4eabecff93c5b6@mail.gmail.com>
Message-ID: <4A02F791.7000702@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090507/6566e5fc/attachment.html 

From jimi at temporal-wave.com  Thu May  7 08:06:07 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 07 May 2009 08:06:07 -0700
Subject: [antlr-interest] Comment
In-Reply-To: <00e701c9cf0c$db24f7c0$916ee740$@dill@teleport.ch>
References: <00e701c9cf0c$db24f7c0$916ee740$@dill@teleport.ch>
Message-ID: <4A02F8DF.30802@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090507/be3f5cff/attachment.html 

From jimi at temporal-wave.com  Thu May  7 08:07:23 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 07 May 2009 08:07:23 -0700
Subject: [antlr-interest] Comment
In-Reply-To: <200905071503.30500.micha-1@fantasymail.de>
References: <00e701c9cf0c$db24f7c0$916ee740$@dill@teleport.ch>
	<200905071503.30500.micha-1@fantasymail.de>
Message-ID: <4A02F92B.1020409@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090507/61e9074d/attachment.html 

From jimi at temporal-wave.com  Thu May  7 08:09:46 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 07 May 2009 08:09:46 -0700
Subject: [antlr-interest] java.lang.StackOverflowError
In-Reply-To: <4570.217.116.34.107.1241705353.squirrel@squirrelmail.goodman.hu>
References: <4570.217.116.34.107.1241705353.squirrel@squirrelmail.goodman.hu>
Message-ID: <4A02F9BA.3040700@temporal-wave.com>

wirving at beats.hu wrote:
> thanks, now I got different errors (warnings I guess):
>
> error(10):  internal error:
> org.antlr.tool.Grammar.createLookaheadDFA(Grammar.java:1242): could not
> even do k=1 for decision 8; reason: timed out (>1000ms)
>
>
> error(10):  internal error:
> org.antlr.tool.Grammar.createLookaheadDFA(Grammar.java:1242): could not
> even do k=1 for decision 69; reason: timed out (>1000ms)
>
>
> error(10):  internal error:
> org.antlr.tool.Grammar.createLookaheadDFA(Grammar.java:1242): could not
> even do k=1 for decision 126; reason: timed out (>1000ms)
>
> and so on....
>
> But the .java file is generated.
>
> Next? Increase the timeout? :)
>
>   
It implies that there might be something not quite right about your 
grammar, but the timeouts can happen on busy or slow machines with 
complicated grammars. See the command line page in the wiki, where you 
will find the timeout option. Combining these you will get:

java -Xmx750M antlr.jar -Xconversiontimeout 10000 t.g

Jim

From claco at chrislaco.com  Thu May  7 10:35:06 2009
From: claco at chrislaco.com (Christopher H. Laco)
Date: Thu, 07 May 2009 13:35:06 -0400
Subject: [antlr-interest] Guidance for ANTLR Newb
Message-ID: <4A031BCA.6060002@chrislaco.com>

Long story longer, I'm trying to convert a templating language from Perl
to C#. I finally settled on ANTLR because of ANTLRWorks. It's invaluable
 for someone like me just starting.

I got my ANTLR Reference from Amazon yesterday and joined the list so I
could avoid email bombing our BDFL. :-)

As I see it, I have the basic direction ahead of me:

Create a grammar:
  - 1 grammar: split code from HTML and express code syntax
  - 2 grammars: one to split code/html, one for just the code syntax

Translate to C#:
  - no tree, output C#
  - AST tree, then translate AST to C#

After a first pass through the book, it seems an AST tree means I can
create multiple targets, allowing people to reuse my
grammar/lexer/parser to output other language versions (VB.NET, MSIL),
assuming I'm good about keeping any target specific language out of the
lexer/parser grammar.

A few things I'm unclear about... First, I didn't see in the book,
what's the best way to perform multiple passes against an AST tree?

Is that just a matter of creating multiple tree grammar files, and
sending one CommonTree into another CommonTree in code?

What about the initial steps of dealing with code and html in a file?
IIRC, Terence mentioned that StringTemplate does multi pass... once to
separate the html block form the code, then more code the code itself.

Is that lexing/parsing the file, then each block, is is that multiple
grammars against the same tokenized output?

Here's a sample template:

    Hello [% GET World %].
    [% IF name %]
	Hello [% GET name %].
    [% END %]

I assume that the IF/END blocks need to stay together and that in some
pass, any text in between %]   [% get's turned into string literals.

    "Hello "
    [% GET World %]
    "."
    [% IF name %]"    Hello "[% GET name %]"."[% END %]

I've also wondered what would happen if the file is reversed right up
front by replacing tags and trying to do it in one pass turning the
blocks into strings that are just printed out later in their proper order.

    [%Hello %] GET World [%.
    %] IF name [%
	Hello %] GET name [%.
    ]% END

Yes, I have no idea what I'm doing, or should be doing. :-)

I have managed to get enough of a grammar together to get some working
GET/SET statements, run the lexer/parser and output a tree.


-=Chris

From martijn.reuvers at gmail.com  Thu May  7 11:38:55 2009
From: martijn.reuvers at gmail.com (Martijn Reuvers)
Date: Thu, 7 May 2009 20:38:55 +0200
Subject: [antlr-interest] Skip subtree in tree grammar
In-Reply-To: <4a01fbe1.170bca0a.58bb.ffff9de7SMTPIN_ADDED@mx.google.com>
References: <c376e6ec0905050638t3bbf53cx2c298b33231831c@mail.gmail.com>
	<4a009601.0c0bca0a.24a7.2c70SMTPIN_ADDED@mx.google.com>
	<c376e6ec0905061056u2a51512bo6cc72fbebcd7358a@mail.gmail.com>
	<4A01D12B.5090300@temporal-wave.com>
	<c376e6ec0905061154t538fcf6bp61e6eeb2ea8b8d2@mail.gmail.com>
	<4a01fbe1.170bca0a.58bb.ffff9de7SMTPIN_ADDED@mx.google.com>
Message-ID: <c376e6ec0905071138m1eded2c9r897afdcabbe95c63@mail.gmail.com>

Hello!

I tried it, but neither works. :/ I ran it against a snapshot of 3.1.4
runtime that I built with mave (3.1.3 has the same errors btw):

The skip option says when run:
* Wildcard invalid as root; wildcard can itself be a tree.

As for the | * option it still has a similar error as before:
* node from after line 22:12 no viable alternative at input 'DOWN'.

This is what I have for the |*
--------------
bool_function_content[Boolean value]
scope {
	Boolean t;
}
@init {
	$bool_function_content::t = $value;
}
 : {$bool_function_content::t  != null &&
$bool_function_content::t.booleanValue() }? => function_content*
 | .*
 ;	

Any thoughts?

Martijn

From nukiti at yahoo.de  Thu May  7 11:54:02 2009
From: nukiti at yahoo.de (Nukiti Romanova)
Date: Thu, 7 May 2009 11:54:02 -0700 (PDT)
Subject: [antlr-interest] match any token in line
Message-ID: <416497.22722.qm@web24616.mail.ird.yahoo.com>


maybe is this what you want?

in      :   cname*;
cname   :   '@' CHAR* ':' NL param*;
param   :   (CHAR|':')+ NL+;
CHAR    :   ~(NewLineChars|'@'|':')+ ;
NL      :   NewLineChars+;

fragment NewLineChars
    : '\n' 
    | '\r' 
    ;

Nukiti

>> Hello,
>> 
>> new to ANTLR I wondered if it is possible to match ".*" expressions.  
>> So I do not have to explicitly define the tokens to be matched and  
>> capture all kinds of tokens including UTF-8 characters. My input  
>> format I would like to process looks like:
>> 
>> @<CLASS-IDENTIFIER1>:
>> record1
>> record2
>> ...
>> recordn
>> @<CLASS-IDENTIFIER2>
>> ...
>> 
>> as for instance
>> 
>> @class1:
>> .*cat
>> @class3:
>> bob
>> jack
>> @class6:
>> df2
>> dfe4
>> 
>> Now wrote the following grammar
>> 
>> in        :    cname*;
>> cname    :    '@' CHAR* '\n' (param '\n')*;
>> param    :    CHAR*;
>> CHAR    :    'a'..'z';
>> 
>> The problem her is that I could only detect records with 'a'..'b'.  
>> Could I replace this with ".*" to match any token?
>> 
>> Another idea was to match any token but '@' with [^'@']* as known from  
>> regular expressions - somehow I did not get this work with ANTLR?
>> 
>> Regards,
>> Toby


      

From nvlassopoulos at gmail.com  Thu May  7 12:43:58 2009
From: nvlassopoulos at gmail.com (Nick Vlassopoulos)
Date: Thu, 7 May 2009 22:43:58 +0300
Subject: [antlr-interest] Guidance for ANTLR Newb
In-Reply-To: <4A031BCA.6060002@chrislaco.com>
References: <4A031BCA.6060002@chrislaco.com>
Message-ID: <1419225d0905071243n5163cb04k30ad50b5daf13e25@mail.gmail.com>

Hi Chris,

I must admit that I am fairly new to antlr, as well. Nevertheless, if I got
this correctly,
the two possible alternatives are the ones that you mentioned (which are in
some sense
equivalent)
1. "Turn off" the parser while being outside the actual language blocks and
turn it on
again when you are in a [% %] delimited block. If you check the earlier
posts in the list
(there is a fairly recent one regarding comments), there are some hints on
how to use
channels and read tokens from them, so you could probably redirect the HTML
to a
separate channel and then read it from there. (Not quite sure how this is
done, though)

2. Work on the "complement", meaning treat everything outside the language
blocks as
"comments"

Hope these helped,

Nikos

P.s.: IIRC asp used to work in a way similar to 1, meaning the interpreter
was invoked
whenever it came accross a <% %> block.

On Thu, May 7, 2009 at 8:35 PM, Christopher H. Laco <claco at chrislaco.com>wrote:

> Long story longer, I'm trying to convert a templating language from Perl
> to C#. I finally settled on ANTLR because of ANTLRWorks. It's invaluable
>  for someone like me just starting.
>
> I got my ANTLR Reference from Amazon yesterday and joined the list so I
> could avoid email bombing our BDFL. :-)
>
> As I see it, I have the basic direction ahead of me:
>
> Create a grammar:
>  - 1 grammar: split code from HTML and express code syntax
>  - 2 grammars: one to split code/html, one for just the code syntax
>
> Translate to C#:
>  - no tree, output C#
>  - AST tree, then translate AST to C#
>
> After a first pass through the book, it seems an AST tree means I can
> create multiple targets, allowing people to reuse my
> grammar/lexer/parser to output other language versions (VB.NET, MSIL),
> assuming I'm good about keeping any target specific language out of the
> lexer/parser grammar.
>
> A few things I'm unclear about... First, I didn't see in the book,
> what's the best way to perform multiple passes against an AST tree?
>
> Is that just a matter of creating multiple tree grammar files, and
> sending one CommonTree into another CommonTree in code?
>
> What about the initial steps of dealing with code and html in a file?
> IIRC, Terence mentioned that StringTemplate does multi pass... once to
> separate the html block form the code, then more code the code itself.
>
> Is that lexing/parsing the file, then each block, is is that multiple
> grammars against the same tokenized output?
>
> Here's a sample template:
>
>    Hello [% GET World %].
>    [% IF name %]
>        Hello [% GET name %].
>    [% END %]
>
> I assume that the IF/END blocks need to stay together and that in some
> pass, any text in between %]   [% get's turned into string literals.
>
>    "Hello "
>    [% GET World %]
>    "."
>    [% IF name %]"    Hello "[% GET name %]"."[% END %]
>
> I've also wondered what would happen if the file is reversed right up
> front by replacing tags and trying to do it in one pass turning the
> blocks into strings that are just printed out later in their proper order.
>
>    [%Hello %] GET World [%.
>    %] IF name [%
>        Hello %] GET name [%.
>    ]% END
>
> Yes, I have no idea what I'm doing, or should be doing. :-)
>
> I have managed to get enough of a grammar together to get some working
> GET/SET statements, run the lexer/parser and output a tree.
>
>
> -=Chris
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090507/df548355/attachment.html 

From Waverly.Edwards at genesys.com  Thu May  7 13:08:43 2009
From: Waverly.Edwards at genesys.com (Edwards, Waverly)
Date: Thu, 7 May 2009 15:08:43 -0500
Subject: [antlr-interest] language design
In-Reply-To: <200905070738.15570.rschulz@sonic.net>
Message-ID: <4A454A950FB157459B59AA50C146C0792054285D@OMA00CEXMBX02.corp.westworlds.com>

Thank you very much for your insights regarding the benefits of 
primitive types as objects.  At this time, I don't see the value 
but I am glad to have your perspective so I can think about it 
a little more.


<<<
Are you designing a language? If so, may I recommend that you don't? The 
world does not need another language that is naively designed. I don't 
mean to be rude, but this phenomenon is responsible for a lot of poorly 
designed languages coming into widespread use, and the consequences are 
real and negative.
>>> 

Yes, I would like to create a programming language.  Over the years I've 
found languages that I liked but didn't have language feature X. Currently,
I am looking to incorporate language features that I think would be of
benefit while keeping the complexity very low. I realize the consequences
are real and negative however even committees who have designed languages
have not satisfied every user or eliminated every flaw.  Advances in most
everything come with negatives, so I will just do my best to eliminate as
many of those negatives as possible.


Thank you,


Waverly

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Randall R Schulz
Sent: Thursday, May 07, 2009 10:38 AM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] language design

On Thursday May 7 2009, Edwards, Waverly wrote:
> This question is not directly aimed at ANTLR but towards language
> design. If someone wouldn't mind responding or directing me towards
> the answer to why would I want a primitive type to be treated as an
> object.  In Java and C#, primitive types are treated as objects.  It
> seems to me that by doing so, you would increase the overhead of
> converting values and thus it would become a detriment to the
> language.  It appears that you might want this to part of your
> language to make it easier for the user/developer.

I know nothing about C#, but Java's five integer types, two 
floating-point types and its boolean type are implemented by 
machine-level entities, not objects. There are counterparts for each of 
them (the so-called "boxed" primitive types).

Scala makes all of these types objects (they call them Value Types) but 
wherever possible generates JVM bytecode to use the primitive types and 
save the overhead of boxing and unboxing.


> ...
>
>
> I don't see the benefit of making a primitive type an object other
> than to make it easier to perform operations the user can perform in
> other ways with less overhead.   I can make more of an argument for
> making composite types as objects.

The benefit is substantial. Having entities in the type system that are 
exceptions to most of the rules about what user-defined types can do 
gets in the way of many things. You cannot, e.g., use an "int" as a key 
or value in a map data structure. Examples abound.

Furthermore, the cost of using boxed types is probably not as big as 
your intuition is telling you. Depending, of course, on the nature of 
the program. It would be hard to do a competitive FFT using boxed 
floating-point types, I suspect.


> I have a couple of books on language design but none of them address
> this issue. I believe this would fall under boxing and unboxing.  If
> someone could direct me towards a good reason to implement this in a
> language, it would be very much appreciated.

Are you designing a language? If so, may I recommend that you don't? The 
world does not need another language that is naively designed. I don't 
mean to be rude, but this phenomenon is responsible for a lot of poorly 
designed languages coming into widespread use, and the consequences are 
real and negative.

If you really want to work in programming language design, then learn 
where the frontiers really are and concentrate your efforts there. 
Unless you're some kind of genius, nothing you think up as an offhand 
good idea is likely to be a real contribution to the field.


Again, I don't mean to offend, just to guide you towards learning the 
field of programming languages before trying to contribute innovations 
to it.


> Thank you,
>
>
> Waverly.


Randall Schulz

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

______________________________________________________________________
This email has been scanned by the MessageLabs Email Security System.
For more information please visit http://www.messagelabs.com/email 
______________________________________________________________________

From Waverly.Edwards at genesys.com  Thu May  7 13:21:52 2009
From: Waverly.Edwards at genesys.com (Edwards, Waverly)
Date: Thu, 7 May 2009 15:21:52 -0500
Subject: [antlr-interest] language design
In-Reply-To: <86403CA0939415448BCCB83855EFE09AA68038@Bloodymary.ironwillgames.com>
Message-ID: <4A454A950FB157459B59AA50C146C0792054289B@OMA00CEXMBX02.corp.westworlds.com>

<<
In Java, there are two severe limitations to the ability of primitives. First, the language doesn't allow user-defined primitives, so there is no concept of lightweight enums, aggregate data structures, or the ability to create special struct based on an int that has special meaning with no more overhead than the int itself (say for a special application-specific type of bitfield, or distinguishing a platform-width integer from a memory address/pointer stored in a platform-width integer). Second, generics such as ArrayList<T> in Java are only handled specially by the compiler. At runtime, the storage used inside the list forces boxing/unboxing of values. Arrays of primitives (like int[] a) are able to hold unboxed values, so they are lighter.
>>

>> lightweight enums, aggregate data structures

This is exactly the things I wish to address in my language.  It will have features of Java but I found that

final int a = 10; is not a sufficient or efficient way to do enums.  Also, when I first started programming in Java
I didn't know there weren't aggregate types.  I had never experience that, so I went on a mad hunt trying
to figure out how to create a struct. Its funny now, but it wasn't funny then.  Combining features of one language
with the features of another along with the addition of your own ideas seems like a good way to go.

I'll look into Android.  I'm curious now.  Its challenging for me to understand how the folks at Google could make
a loser (big mistakes) like the one you refer to after having so many winners.


W.


________________________________
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Sam Harwell
Sent: Thursday, May 07, 2009 10:51 AM
To: Edwards, Waverly; antlr-interest at antlr.org
Subject: Re: [antlr-interest] language design

While this is somewhat true of Java, it's really not true of C#. The built-in primitive types in both languages (int, short, double, char, bool) are passed by value in function calls and kept on the stack as local variables. The process of boxing in both languages takes a primitive type and wraps it as an object on the heap, as required for an operation like the following. The process of unboxing (also shown) converts it back to a primitive.

object o = 3;
int i = (int)o;

In Java, there are two severe limitations to the ability of primitives. First, the language doesn't allow user-defined primitives, so there is no concept of lightweight enums, aggregate data structures, or the ability to create special struct based on an int that has special meaning with no more overhead than the int itself (say for a special application-specific type of bitfield, or distinguishing a platform-width integer from a memory address/pointer stored in a platform-width integer). Second, generics such as ArrayList<T> in Java are only handled specially by the compiler. At runtime, the storage used inside the list forces boxing/unboxing of values. Arrays of primitives (like int[] a) are able to hold unboxed values, so they are lighter.

C# shows heavy advantages in several areas by hitting these issues square on the head. First, enums are as lightweight as ints, so using them is an encouraged, zero-overhead practice. Second, careful use of structs, C#'s way of creating user-defined unboxed values, leads to immense performance benefits in places like embedded computing, systems programming, high-performance applications, and even cases like my high-performance SlimLexer for ANTLR's C# port that operates 5x faster than Lexer in 1/5 the memory (I sent an email to antlr-dev mailing list about this). Third, when a generic type is instantiated at runtime with a value type (like List<int>), the JIT actually produces code that operates fully on unboxed values, in cases allowing performance rivaling C++ templates. These advantages are one of the reasons I believe Google's use of Java for the Android platform was an unacceptable mistake, a failure to meet the fundamental requirements of their clients as well as they could. It is the responsibility of development teams to not make decisions like they did knowing full well it will result in a crippled end-user experience.

Sam


______________________________________________________________________
This email has been scanned by the MessageLabs Email Security System.
For more information please visit http://www.messagelabs.com/email 
______________________________________________________________________
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090507/37bf6ae0/attachment.html 

From sharwell at pixelminegames.com  Thu May  7 14:05:40 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Thu, 7 May 2009 16:05:40 -0500
Subject: [antlr-interest] language design
In-Reply-To: <4A454A950FB157459B59AA50C146C0792054289B@OMA00CEXMBX02.corp.westworlds.com>
References: <86403CA0939415448BCCB83855EFE09AA68038@Bloodymary.ironwillgames.com>
	<4A454A950FB157459B59AA50C146C0792054289B@OMA00CEXMBX02.corp.westworlds.com>
Message-ID: <86403CA0939415448BCCB83855EFE09AA6804C@Bloodymary.ironwillgames.com>

All of the issues you mentioned below are addressed in other languages.
Do you have a clear view of what feature you need that isn't currently
available? What kinds of problems do you wish to solve with your
programming language? Are you creating a language just so you can learn
about the design/implementation process, or do you plan to actually use
the result?

 

Creating and implementing a simple language as an experiment is a
wonderful learning opportunity. Designing a practical general-purpose
language that successfully addresses a wide range of programming
situations is one of the most difficult tasks in computer science.

 

Here are some things you should definitely do:

 

1.       Complete Project Euler <http://projecteuler.net/>  twice in an
existing language you are evaluating for comparison. Make one of them an
elegant solution in the language and one of them an efficient solution.
This reveals some measure of the "strength" of the language for a very
wide range of tasks. Do note that it does not evaluate other extremely
important items such as asynchronous programming, data binding, user
interfaces, and many more.

2.       Read "Demystifying Magic: High-level Low-level Programming,"
available from IBM Research:
http://domino.research.ibm.com/comm/research_people.nsf/pages/dgrove.vee
09.html

3.       Write a compiler front-end from scratch, at least the lexer and
a complete stage 1 parser for AST creation. Choose a well-defined
research language that does not have an ANTLR grammar currently
available. You may reference other grammars, but obviously the big tasks
are on you. Two possibilities are F#
<http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/>  or
Chapel <http://chapel.cs.washington.edu/> . Make sure your final
solution doesn't use semantic predicates or the "backtracking=true"
flag. Also attempt to implement a front-end for a language that doesn't
have an official spec <http://www.php.net/>  so you understand the
importance of not failing this area.

4.       Make sure you understand what it means to solve problems with
language
<http://java.sun.com/docs/books/tutorial/essential/exceptions/runtime.ht
ml>  compared to solving problems with tools
<http://www.red-gate.com/products/Exception_Hunter/index.htm> . Here is
another example of problems solved with language
<http://research.microsoft.com/en-us/projects/specsharp/>  and with
tools <http://msdn.microsoft.com/en-us/devlabs/dd491992.aspx> .

 

Sam

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Edwards, Waverly
Sent: Thursday, May 07, 2009 3:22 PM
To: 'antlr-interest at antlr.org'
Subject: Re: [antlr-interest] language design

 

<< 

In Java, there are two severe limitations to the ability of primitives.
First, the language doesn't allow user-defined primitives, so there is
no concept of lightweight enums, aggregate data structures, or the
ability to create special struct based on an int that has special
meaning with no more overhead than the int itself (say for a special
application-specific type of bitfield, or distinguishing a
platform-width integer from a memory address/pointer stored in a
platform-width integer). Second, generics such as ArrayList<T> in Java
are only handled specially by the compiler. At runtime, the storage used
inside the list forces boxing/unboxing of values. Arrays of primitives
(like int[] a) are able to hold unboxed values, so they are lighter.

>> 

 

>> lightweight enums, aggregate data structures

 

This is exactly the things I wish to address in my language.  It will
have features of Java but I found that

 

final int a = 10; is not a sufficient or efficient way to do enums.
Also, when I first started programming in Java

I didn't know there weren't aggregate types.  I had never experience
that, so I went on a mad hunt trying

to figure out how to create a struct. Its funny now, but it wasn't funny
then.  Combining features of one language

with the features of another along with the addition of your own ideas
seems like a good way to go.

 

I'll look into Android.  I'm curious now.  Its challenging for me to
understand how the folks at Google could make

a loser (big mistakes) like the one you refer to after having so many
winners.

 

 

W.

 

 

________________________________

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Sam Harwell
Sent: Thursday, May 07, 2009 10:51 AM
To: Edwards, Waverly; antlr-interest at antlr.org
Subject: Re: [antlr-interest] language design

While this is somewhat true of Java, it's really not true of C#. The
built-in primitive types in both languages (int, short, double, char,
bool) are passed by value in function calls and kept on the stack as
local variables. The process of boxing in both languages takes a
primitive type and wraps it as an object on the heap, as required for an
operation like the following. The process of unboxing (also shown)
converts it back to a primitive.

 

object o = 3;

int i = (int)o;

 

In Java, there are two severe limitations to the ability of primitives.
First, the language doesn't allow user-defined primitives, so there is
no concept of lightweight enums, aggregate data structures, or the
ability to create special struct based on an int that has special
meaning with no more overhead than the int itself (say for a special
application-specific type of bitfield, or distinguishing a
platform-width integer from a memory address/pointer stored in a
platform-width integer). Second, generics such as ArrayList<T> in Java
are only handled specially by the compiler. At runtime, the storage used
inside the list forces boxing/unboxing of values. Arrays of primitives
(like int[] a) are able to hold unboxed values, so they are lighter.

 

C# shows heavy advantages in several areas by hitting these issues
square on the head. First, enums are as lightweight as ints, so using
them is an encouraged, zero-overhead practice. Second, careful use of
structs, C#'s way of creating user-defined unboxed values, leads to
immense performance benefits in places like embedded computing, systems
programming, high-performance applications, and even cases like my
high-performance SlimLexer for ANTLR's C# port that operates 5x faster
than Lexer in 1/5 the memory (I sent an email to antlr-dev mailing list
about this). Third, when a generic type is instantiated at runtime with
a value type (like List<int>), the JIT actually produces code that
operates fully on unboxed values, in cases allowing performance rivaling
C++ templates. These advantages are one of the reasons I believe
Google's use of Java for the Android platform was an unacceptable
mistake, a failure to meet the fundamental requirements of their clients
as well as they could. It is the responsibility of development teams to
not make decisions like they did knowing full well it will result in a
crippled end-user experience.

 

Sam

 


______________________________________________________________________
This email has been scanned by the MessageLabs Email Security System.
For more information please visit http://www.messagelabs.com/email 
______________________________________________________________________

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090507/2c7695b8/attachment.html 

From steerr at bellsouth.net  Thu May  7 14:13:54 2009
From: steerr at bellsouth.net (Bill Steer)
Date: Thu, 07 May 2009 17:13:54 -0400
Subject: [antlr-interest] NoViableAltException
Message-ID: <4A034F12.8080805@bellsouth.net>

I know just enough about ANTLR to be dangerous.  Like another recent 
poster, I've read the book and am trying to get the hang of it, but 
think I have this simple grammar messed up.

One of the kinds of statements my grammar, attached, tries to handle is:

REGISTER = avg(REGISTER, REGISTER, REGISTER);

where REGISTER is just a multi-part identifier, with the parts separated 
by an '!'.  The lexer seems to work ok, judging by the Tokens it returns 
in another part of my code.  But, at runtime, the parser gets a 
NoViableAltException on a statement like that.

Can anybody offer any pointers?  Thanks very much.

Bill

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: SGI.g
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20090507/47ada903/attachment.pl 

From rschulz at sonic.net  Thu May  7 14:37:23 2009
From: rschulz at sonic.net (Randall R Schulz)
Date: Thu, 7 May 2009 14:37:23 -0700
Subject: [antlr-interest] language design
In-Reply-To: <4A454A950FB157459B59AA50C146C0792054285D@OMA00CEXMBX02.corp.westworlds.com>
References: <4A454A950FB157459B59AA50C146C0792054285D@OMA00CEXMBX02.corp.westworlds.com>
Message-ID: <200905071437.23761.rschulz@sonic.net>

On Thursday May 7 2009, Edwards, Waverly wrote:
> Thank you very much for your insights regarding the benefits of
> primitive types as objects.  At this time, I don't see the value
> but I am glad to have your perspective so I can think about it
> a little more.
>
>
> <<<
> Are you designing a language? If so, may I recommend that you don't?
> The world does not need another language that is naively designed. I
> don't mean to be rude, but this phenomenon is responsible for a lot
> of poorly designed languages coming into widespread use, and the
> consequences are real and negative.
>
>
> Yes, I would like to create a programming language. ...

Then I will mention's Schulz's Law (Directive B10.81):

"People who engage in unauthorized programming language design shall 
have their Internet access cut off so as to prevent said language from 
escaping into the wild."


> Waverly


Randall Schulz

From antlr at mirality.co.nz  Thu May  7 14:40:14 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 08 May 2009 09:40:14 +1200
Subject: [antlr-interest] NoViableAltException
In-Reply-To: <4A034F12.8080805@bellsouth.net>
References: <4A034F12.8080805@bellsouth.net>
Message-ID: <20090507214039.68CD23418449@www.antlr.org>

At 09:13 8/05/2009, Bill Steer wrote:
 >REGISTER = avg(REGISTER, REGISTER, REGISTER);
 >
 >where REGISTER is just a multi-part identifier, with the parts
 >separated by an '!'.  The lexer seems to work ok, judging by
 >the Tokens it returns in another part of my code.  But, at
 >runtime, the parser gets a NoViableAltException on a statement
 >like that.
[...]
 >stat:	REGISTER EQUALS expr
[...]
 >atom returns [int value]
 >	:	CONSTANT {$value = Convert.ToInt32($CONSTANT.text);}
 >	|	REGISTER { Register reg = findRegisterByName($REGISTER.text);
[...]
 >fragment
 >INT		: (DIGIT)+ ;
 >FLOAT	:	INT
 >		| INT '.' INT
 >		| '.' INT
 >;
 >CONSTANT:	FLOAT
 >		|	FLOAT ('e' | 'E') ('+' | '-')? INT
 >;
[...]
 >IDENT	:	LETTER (LETTER | DIGIT)* ;
 >REGISTER:	IDENT ('!'IDENT)* ;

Haven't we already discussed this?  (I definitely remember seeing 
those FLOAT and CONSTANT rules before...)

INT/FLOAT/CONSTANT and IDENT/REGISTER can all match identical 
input, since each is just a superset of the other.  This can lead 
to problems because when faced with input like "14", your rules 
say that it is acceptable to generate ANY of INT, FLOAT, or 
CONSTANT.

It's not fatal to do this (though it's bad style); but if you do 
then you need to ensure that wherever your parser is expecting a 
CONSTANT (or a REGISTER) that it will tolerate receiving a FLOAT 
(or an IDENT) instead.

The better solution is to remove the ambiguity.  Probably the 
simplest way to do that in the above case is to make FLOAT and 
IDENT fragment rules (and ensure the parser doesn't refer to them).


From jimi at temporal-wave.com  Thu May  7 15:14:57 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 07 May 2009 15:14:57 -0700
Subject: [antlr-interest] NoViableAltException
In-Reply-To: <4A034F12.8080805@bellsouth.net>
References: <4A034F12.8080805@bellsouth.net>
Message-ID: <4A035D61.7060707@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090507/50c573d8/attachment.html 

From Waverly.Edwards at genesys.com  Thu May  7 15:43:16 2009
From: Waverly.Edwards at genesys.com (Edwards, Waverly)
Date: Thu, 7 May 2009 17:43:16 -0500
Subject: [antlr-interest] language design
In-Reply-To: <86403CA0939415448BCCB83855EFE09AA6804C@Bloodymary.ironwillgames.com>
Message-ID: <4A454A950FB157459B59AA50C146C07920542A2A@OMA00CEXMBX02.corp.westworlds.com>

WOW!

That is a lot of good stuff to think about.  I *really* appreciate this.

Unfortunately, the problems that I want to solve have a language but I do not find it an acceptable solution.
Its not that I am building a new mouse trap but rather making a mouse trap that is more acceptable.  The
platform that I wish to work with is a bit controlled.  I believe that if I introduce an alternative, it will benefit
people other than myself.  That is the primary impetus.  The melding of language features will hopefully be
helpful to the end result.

Goal: easier to use language (more acceptable) and less control of the platform.


Thank you,


Waverly





________________________________
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Sam Harwell
Sent: Thursday, May 07, 2009 5:06 PM
To: Edwards, Waverly; antlr-interest at antlr.org
Subject: Re: [antlr-interest] language design

All of the issues you mentioned below are addressed in other languages. Do you have a clear view of what feature you need that isn't currently available? What kinds of problems do you wish to solve with your programming language? Are you creating a language just so you can learn about the design/implementation process, or do you plan to actually use the result?

Creating and implementing a simple language as an experiment is a wonderful learning opportunity. Designing a practical general-purpose language that successfully addresses a wide range of programming situations is one of the most difficult tasks in computer science.

Here are some things you should definitely do:


1.       Complete Project Euler<http://projecteuler.net/> twice in an existing language you are evaluating for comparison. Make one of them an elegant solution in the language and one of them an efficient solution. This reveals some measure of the "strength" of the language for a very wide range of tasks. Do note that it does not evaluate other extremely important items such as asynchronous programming, data binding, user interfaces, and many more.

2.       Read "Demystifying Magic: High-level Low-level Programming," available from IBM Research: http://domino.research.ibm.com/comm/research_people.nsf/pages/dgrove.vee09.html

3.       Write a compiler front-end from scratch, at least the lexer and a complete stage 1 parser for AST creation. Choose a well-defined research language that does not have an ANTLR grammar currently available. You may reference other grammars, but obviously the big tasks are on you. Two possibilities are F#<http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/> or Chapel<http://chapel.cs.washington.edu/>. Make sure your final solution doesn't use semantic predicates or the "backtracking=true" flag. Also attempt to implement a front-end for a language that doesn't have an official spec<http://www.php.net/> so you understand the importance of not failing this area.

4.       Make sure you understand what it means to solve problems with language<http://java.sun.com/docs/books/tutorial/essential/exceptions/runtime.html> compared to solving problems with tools<http://www.red-gate.com/products/Exception_Hunter/index.htm>. Here is another example of problems solved with language<http://research.microsoft.com/en-us/projects/specsharp/> and with tools<http://msdn.microsoft.com/en-us/devlabs/dd491992.aspx>.

Sam

From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Edwards, Waverly
Sent: Thursday, May 07, 2009 3:22 PM
To: 'antlr-interest at antlr.org'
Subject: Re: [antlr-interest] language design

<<
In Java, there are two severe limitations to the ability of primitives. First, the language doesn't allow user-defined primitives, so there is no concept of lightweight enums, aggregate data structures, or the ability to create special struct based on an int that has special meaning with no more overhead than the int itself (say for a special application-specific type of bitfield, or distinguishing a platform-width integer from a memory address/pointer stored in a platform-width integer). Second, generics such as ArrayList<T> in Java are only handled specially by the compiler. At runtime, the storage used inside the list forces boxing/unboxing of values. Arrays of primitives (like int[] a) are able to hold unboxed values, so they are lighter.
>>

>> lightweight enums, aggregate data structures

This is exactly the things I wish to address in my language.  It will have features of Java but I found that

final int a = 10; is not a sufficient or efficient way to do enums.  Also, when I first started programming in Java
I didn't know there weren't aggregate types.  I had never experience that, so I went on a mad hunt trying
to figure out how to create a struct. Its funny now, but it wasn't funny then.  Combining features of one language
with the features of another along with the addition of your own ideas seems like a good way to go.

I'll look into Android.  I'm curious now.  Its challenging for me to understand how the folks at Google could make
a loser (big mistakes) like the one you refer to after having so many winners.


W.


________________________________
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Sam Harwell
Sent: Thursday, May 07, 2009 10:51 AM
To: Edwards, Waverly; antlr-interest at antlr.org
Subject: Re: [antlr-interest] language design
While this is somewhat true of Java, it's really not true of C#. The built-in primitive types in both languages (int, short, double, char, bool) are passed by value in function calls and kept on the stack as local variables. The process of boxing in both languages takes a primitive type and wraps it as an object on the heap, as required for an operation like the following. The process of unboxing (also shown) converts it back to a primitive.

object o = 3;
int i = (int)o;

In Java, there are two severe limitations to the ability of primitives. First, the language doesn't allow user-defined primitives, so there is no concept of lightweight enums, aggregate data structures, or the ability to create special struct based on an int that has special meaning with no more overhead than the int itself (say for a special application-specific type of bitfield, or distinguishing a platform-width integer from a memory address/pointer stored in a platform-width integer). Second, generics such as ArrayList<T> in Java are only handled specially by the compiler. At runtime, the storage used inside the list forces boxing/unboxing of values. Arrays of primitives (like int[] a) are able to hold unboxed values, so they are lighter.

C# shows heavy advantages in several areas by hitting these issues square on the head. First, enums are as lightweight as ints, so using them is an encouraged, zero-overhead practice. Second, careful use of structs, C#'s way of creating user-defined unboxed values, leads to immense performance benefits in places like embedded computing, systems programming, high-performance applications, and even cases like my high-performance SlimLexer for ANTLR's C# port that operates 5x faster than Lexer in 1/5 the memory (I sent an email to antlr-dev mailing list about this). Third, when a generic type is instantiated at runtime with a value type (like List<int>), the JIT actually produces code that operates fully on unboxed values, in cases allowing performance rivaling C++ templates. These advantages are one of the reasons I believe Google's use of Java for the Android platform was an unacceptable mistake, a failure to meet the fundamental requirements of their clients as well as they could. It is the responsibility of development teams to not make decisions like they did knowing full well it will result in a crippled end-user experience.

Sam


______________________________________________________________________
This email has been scanned by the MessageLabs Email Security System.
For more information please visit http://www.messagelabs.com/email
______________________________________________________________________

______________________________________________________________________
This email has been scanned by the MessageLabs Email Security System.
For more information please visit http://www.messagelabs.com/email 
______________________________________________________________________
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090507/9dda11c3/attachment.html 

From nickclare at gmail.com  Thu May  7 16:54:45 2009
From: nickclare at gmail.com (Nicholas Clare)
Date: Fri, 8 May 2009 01:54:45 +0200
Subject: [antlr-interest] Sometimes significant new lines
Message-ID: <c651cbb90905071654o355ba486k8368bde1400f980c@mail.gmail.com>

Hi Everyone,

I'm writing a simple parser for configuration files. Most of it is
working beautifully, but there's one thing I can't figure out. The
basic idea is that there are configuration items, the syntax of which
are:

configItem: ID '=' VALUE terminator

(It's obviously a touch more complicated than that, but I don't want
to bore you with details). The terminator rule is what I'm having
trouble with. What I want is to allow either semicolons or new lines.
The semicolons are easy. Since most of the time I don't want to worry
about extra new lines, I'm currently sending them to the HIDDEN
channel. Is there a way to detect them here (preferably without java
actions, but that would be acceptable if there's no other option)?

Thanks very much,
Nick

From indhu.b at s7software.com  Thu May  7 19:37:54 2009
From: indhu.b at s7software.com (Indhu Bharathi)
Date: Fri, 8 May 2009 08:07:54 +0530 (IST)
Subject: [antlr-interest] Sometimes significant new lines
In-Reply-To: <c651cbb90905071654o355ba486k8368bde1400f980c@mail.gmail.com>
Message-ID: <3016711.2201241750274246.JavaMail.root@star>

Did you evaluate the option of making semicolon a default token itself instead of hidden token? Unless there is compelling reason to make semicolon hidden token, let's make it default token. That will make the work easy.

Now assuming there is some compelling reason to make semicolon hidden token, you can access hidden tokens while parsing using input.LA(int) or input.LT(int). Former returns token type while later returns the token itself.

Maybe you can write something like:

configItem: ID '=' VALUE { input.LA(1)==SEMICOLON }?=> /*nothing*/


Now your immediate question will be what if LA(1) is some other hidden token and LA(2) is semicolon? You can iterate through all hidden tokens and see if there is a semicolon before the next default token. You can extract it out into a new method for convenience. 

http://www.antlr.org/pipermail/antlr-interest/2009-April/033895.html

The above link contains a sample of recognizing newline from hidden token. It is a small sample grammar which will recognize "foo<NEWLINE>" but reject "foo" where <newline> is hidden token.

Hope that helps.

Cheers, Indhu


----- Original Message -----
From: Nicholas Clare <nickclare at gmail.com>
To: antlr-interest at antlr.org
Sent: Friday, May 8, 2009 5:24:45 AM GMT+0530 Asia/Calcutta
Subject: [antlr-interest] Sometimes significant new lines

Hi Everyone,

I'm writing a simple parser for configuration files. Most of it is
working beautifully, but there's one thing I can't figure out. The
basic idea is that there are configuration items, the syntax of which
are:

configItem: ID '=' VALUE terminator

(It's obviously a touch more complicated than that, but I don't want
to bore you with details). The terminator rule is what I'm having
trouble with. What I want is to allow either semicolons or new lines.
The semicolons are easy. Since most of the time I don't want to worry
about extra new lines, I'm currently sending them to the HIDDEN
channel. Is there a way to detect them here (preferably without java
actions, but that would be acceptable if there's no other option)?

Thanks very much,
Nick

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From avidtrober at gmail.com  Thu May  7 19:26:39 2009
From: avidtrober at gmail.com (Avid Trober)
Date: Thu, 7 May 2009 21:26:39 -0500
Subject: [antlr-interest]  hasPredicateBlockedByAction ???
Message-ID: <30EF004E230F4C8BB80E7C1D5B0A0B75@homelaptop>

Hi,

does anybody know how to determine the source of an error such as this?
the wiki says convert the grammar to v3; it is a v3 grammar.

Thanks.

ANTLR Parser Generator  Version 3.1 (August 12, 2008)  1989-2008
error(10):  internal error: JavaScript.g : java.util.NoSuchElementException: no
such attribute: hasPredicateBlockedByAction in template context [TOKEN_NONDETERM
INISM]
org.antlr.stringtemplate.StringTemplate.rawSetAttribute(StringTemplate.java:647)

org.antlr.stringtemplate.StringTemplate.setAttribute(StringTemplate.java:508)
org.antlr.tool.GrammarNonDeterminismMessage.toString(GrammarNonDeterminismMessag
e.java:124)
org.antlr.tool.ErrorManager$4.warning(ErrorManager.java:301)
org.antlr.tool.ErrorManager.nondeterminism(ErrorManager.java:648)
org.antlr.analysis.DecisionProbe.issueWarnings(DecisionProbe.java:453)
org.antlr.analysis.DFA.<init>(DFA.java:239)
org.antlr.tool.Grammar.createLookaheadDFA(Grammar.java:1225)
org.antlr.tool.Grammar.createLookaheadDFAs(Grammar.java:970)
org.antlr.tool.Grammar.createLookaheadDFAs(Grammar.java:920)
org.antlr.codegen.Target.performGrammarAnalysis(Target.java:114)
org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:293)
org.antlr.Tool.generateRecognizer(Tool.java:419)
org.antlr.Tool.process(Tool.java:341)
org.antlr.Tool.main(Tool.java:71)


I found one hit in the wiki that states the grammar is a v2.x and needs to be reformatted to v3.  I think the grammar is v3, its the  ECMAScript example on the ANTLR grammars page:http://www.antlr.org/grammar/1206736738015/JavaScript.g

Regards,
Ben
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090507/3c5fa10c/attachment.html 

From iank at bearcave.com  Thu May  7 20:23:20 2009
From: iank at bearcave.com (Ian Kaplan)
Date: Thu, 7 May 2009 20:23:20 -0700
Subject: [antlr-interest] Grammars for network protocols
Message-ID: <7f8924df0905072023i76d5cdafi8b95d13b32850bb3@mail.gmail.com>

  In some (many, most) cases Extended Bacus Naur Form (EBNF) grammar is used
to describe network protocols.  For example, the HTTP protocol RFC published
on the W3C web site is described in EBNF.  However, the description is ah
descriptive, rather than definitive.  There are parts of the grammar that
are described in english.  It does not appear possible to extract the
grammar from the document and create a parser (perhaps via an EBNF to ANTLR
grammar translator).

  Does anyone know of a repository of complete network protocol grammars
that are actually definitive, rather than descriptive?

  Many thanks,

  Ian Kaplan
  www.bearcave.com
  iank at bearcave.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090507/1408a968/attachment.html 

From claco at chrislaco.com  Thu May  7 22:54:47 2009
From: claco at chrislaco.com (claco at chrislaco.com)
Date: Thu, 7 May 2009 22:54:47 -0700 (PDT)
Subject: [antlr-interest] Whitespace issues
Message-ID: <ddc9c26d007eee1882ef1125d5060dcc.squirrel@webmail.chrislaco.com>

I'm having a problem turning this text into tokens. I know it has to be
something obvious, but I can't see it...



[%"Dear "%][%          name          %][%",

It has come to our attention that your account is in
arrears to the sum of "%][% debt %][%".

Please settle your account before "%][% deadline %][%" or we
will be forced to revoke your Licence to Thrill.

The Management."%]


From claco at chrislaco.com  Thu May  7 23:15:20 2009
From: claco at chrislaco.com (Christopher Laco)
Date: Fri, 08 May 2009 02:15:20 -0400
Subject: [antlr-interest] Whitespace issues
In-Reply-To: <ddc9c26d007eee1882ef1125d5060dcc.squirrel@webmail.chrislaco.com>
References: <ddc9c26d007eee1882ef1125d5060dcc.squirrel@webmail.chrislaco.com>
Message-ID: <4A03CDF8.6070802@chrislaco.com>

I'm having a problem turning this text into tokens. I know it has to be
something obvious, but I can't see it...




[%"Dear "%][%          name          %][%",


It has come to our attention that your account is in

arrears to the sum of "%][% debt %][%".


Please settle your account before "%][% deadline %][%" or we

will be forced to revoke your Licence to Thrill.


The Management."%]





In short I want any white space after [%  or before %] to be lumped into
that brackets token. With this grammar


TSTART : '[%' WS*;

TSTOP : WS* '%]';

CSTART : TSTART '"';

CSTOP : '"' TSTOP;


fragment

WS : ('\r'|'\n'|'\t'|' ');

CHAR : ('\u0000'..'\uffff');


document

: (content | block)*

;


content

: CSTART CHAR+ CSTOP

;


block

: TSTART CHAR* TSTOP

;



, white space is indeed grouped with it's bracket and the tree looks
like I expect, except any character after two newlines yields this type
of grouping in the above text:


[%"

,

It


[%"

.

Pl


l

l

.


Th

e



The console says:


> [01:41:01] problem matching token at 3:1 NoViableAltException('I'@[()*
loopback of 19:9: ( WS )*])

> [01:41:01] problem matching token at 4:1 NoViableAltException('a'@[()*
loopback of 19:9: ( WS )*])

> [01:41:01] problem matching token at 6:1 NoViableAltException('P'@[()*
loopback of 19:9: ( WS )*])

> [01:41:01] problem matching token at 7:1 NoViableAltException('w'@[()*
loopback of 19:9: ( WS )*])

> [01:41:01] problem matching token at 9:1 NoViableAltException('T'@[()*
loopback of 19:9: ( WS )*])

>


Why would the two newlines in a row not be covered under CHAR+ in
between the start/stop bracket tokens?


Thanks,

-=Chris


From james.robson at ymail.com  Thu May  7 23:16:07 2009
From: james.robson at ymail.com (James Robson)
Date: Thu, 7 May 2009 23:16:07 -0700 (PDT)
Subject: [antlr-interest] Java Codegen Targer: Not generating throws Clause
Message-ID: <982790.68271.qm@web43505.mail.sp1.yahoo.com>

Hi I've got a combined parser grammar with with embeded actions. Some othe the rules need to through exceptions due to the actions being perfromed.
The Generated Parser code does not contain any of the action exceptions in the generated source. It only contains RecognitionException.

Is there anyway I can get the code generator to generate the throws clause correctly? 

Maybe a patch for the 3.1.3 code base?

Any pointers would be greatly appreciated.

Thanks,
James



      The new Internet Explorer 8 optimised for Yahoo!7: Faster, Safer, Easier.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090507/9fd399c1/attachment.html 

From nickclare at gmail.com  Fri May  8 00:31:35 2009
From: nickclare at gmail.com (Nicholas Clare)
Date: Fri, 8 May 2009 09:31:35 +0200
Subject: [antlr-interest] Sometimes significant new lines
In-Reply-To: <3016711.2201241750274246.JavaMail.root@star>
References: <c651cbb90905071654o355ba486k8368bde1400f980c@mail.gmail.com>
	<3016711.2201241750274246.JavaMail.root@star>
Message-ID: <c651cbb90905080031y7b8fcef4g6c33500a9f58dde5@mail.gmail.com>

Hi,

Sorry, I read my email again, and it doesn't really make sense. It was
written very late last night. The semicolons aren't hidden, but new
lines are (since most of the time I don't want whitespace to be
significant). I want to allow either a semicolon, or a new line to
mark the end of the configItem. So, any of the following should be
valid.

one = 1; two = 2;

OR

one = 1
two = 2;

OR

one = 1;
two = 2;

I haven't tried using the idea you've laid out, and I will do now, but
I just wanted to clear up what I meant.

Thanks,
Nick

On Fri, May 8, 2009 at 4:37 AM, Indhu  Bharathi <indhu.b at s7software.com> wrote:
> Did you evaluate the option of making semicolon a default token itself instead of hidden token? Unless there is compelling reason to make semicolon hidden token, let's make it default token. That will make the work easy.
>
> Now assuming there is some compelling reason to make semicolon hidden token, you can access hidden tokens while parsing using input.LA(int) or input.LT(int). Former returns token type while later returns the token itself.
>
> Maybe you can write something like:
>
> configItem: ID '=' VALUE { input.LA(1)==SEMICOLON }?=> /*nothing*/
>
>
> Now your immediate question will be what if LA(1) is some other hidden token and LA(2) is semicolon? You can iterate through all hidden tokens and see if there is a semicolon before the next default token. You can extract it out into a new method for convenience.
>
> http://www.antlr.org/pipermail/antlr-interest/2009-April/033895.html
>
> The above link contains a sample of recognizing newline from hidden token. It is a small sample grammar which will recognize "foo<NEWLINE>" but reject "foo" where <newline> is hidden token.
>
> Hope that helps.
>
> Cheers, Indhu
>
>
> ----- Original Message -----
> From: Nicholas Clare <nickclare at gmail.com>
> To: antlr-interest at antlr.org
> Sent: Friday, May 8, 2009 5:24:45 AM GMT+0530 Asia/Calcutta
> Subject: [antlr-interest] Sometimes significant new lines
>
> Hi Everyone,
>
> I'm writing a simple parser for configuration files. Most of it is
> working beautifully, but there's one thing I can't figure out. The
> basic idea is that there are configuration items, the syntax of which
> are:
>
> configItem: ID '=' VALUE terminator
>
> (It's obviously a touch more complicated than that, but I don't want
> to bore you with details). The terminator rule is what I'm having
> trouble with. What I want is to allow either semicolons or new lines.
> The semicolons are easy. Since most of the time I don't want to worry
> about extra new lines, I'm currently sending them to the HIDDEN
> channel. Is there a way to detect them here (preferably without java
> actions, but that would be acceptable if there's no other option)?
>
> Thanks very much,
> Nick
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>

From indhu.b at s7software.com  Fri May  8 00:36:54 2009
From: indhu.b at s7software.com (Indhu Bharathi)
Date: Fri, 08 May 2009 13:06:54 +0530
Subject: [antlr-interest] Whitespace issues
In-Reply-To: <4A03CDF8.6070802@chrislaco.com>
References: <ddc9c26d007eee1882ef1125d5060dcc.squirrel@webmail.chrislaco.com>
	<4A03CDF8.6070802@chrislaco.com>
Message-ID: <4A03E116.3050000@s7software.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090508/c56e8ca0/attachment.html 

From iztok.kavkler at fmf.uni-lj.si  Fri May  8 02:11:08 2009
From: iztok.kavkler at fmf.uni-lj.si (Iztok Kavkler)
Date: Fri, 08 May 2009 11:11:08 +0200
Subject: [antlr-interest] Sometimes significant new lines
In-Reply-To: <c651cbb90905080148s1ded88bes6561f2303ed07c43@mail.gmail.com>
References: <c651cbb90905071654o355ba486k8368bde1400f980c@mail.gmail.com>	
	<3016711.2201241750274246.JavaMail.root@star>	
	<c651cbb90905080031y7b8fcef4g6c33500a9f58dde5@mail.gmail.com>	
	<4A03EF82.2080808@fmf.uni-lj.si>
	<c651cbb90905080148s1ded88bes6561f2303ed07c43@mail.gmail.com>
Message-ID: <4A03F72C.50105@fmf.uni-lj.si>

You can also check the example grammars for Python (newlines are 
significant, unless they appear within parenthases) and JavaScript (with 
quite complicated rules for when the newlines are significant).

When I was writing the parser for my DSL I checked the JavaScript 
solution, decided it's not worth the bother, and opted for Python 
version (it's quite easy, it only requires a bracket level counter in 
the lexer).


> I do actually want to allow new lines everywhere. I'm starting to
> think it's not worth the trouble of allowing them. Seems to make the
> grammar much more complicated for little benefit.
> 
> Thanks for your help,
> Nick
> 
> On Fri, May 8, 2009 at 10:38 AM, Iztok Kavkler
> <iztok.kavkler at fmf.uni-lj.si> wrote:
>> Since it appears that newlines can only appear between statements I would
>> recomend not sending them to the hidden channel but matching them like this:
>>
>> terminator: ';' NEWLINE* | NEWLINE+ | EOF;
>>
>> configItem: ID '=' VALUE terminator ;
>>
>> (You will have to also match NEWLINE* at the beginning of the script,
>> otherwise you will get errors for empty lines at the beginning.)
>>
>> Cheers, Iztok
>>


From wirving at beats.hu  Fri May  8 02:48:23 2009
From: wirving at beats.hu (wirving at beats.hu)
Date: Fri, 8 May 2009 11:48:23 +0200 (CEST)
Subject: [antlr-interest] Problem with a Tree Grammar:
	MismatchedTokenException
Message-ID: <3121.217.116.34.107.1241776103.squirrel@squirrelmail.goodman.hu>

Helo,

I'm trying to create a Tree Grammar to walk my ASTs, and I encountered a
problem:

I have these tree grammar rules (which are relevant, I guess):

query_specification
	: ^(selectClause (^(INTO intoClause))? (^(FROM fromClause))? (^(WHERE
whereClause))? (^(GROUP groupbyClause))? (^(HAVING havingClause))?)
	;

selectClause
	:
	^(SELECT ALL? DISTINCT? (^(TOP INT (PERCENT)? (WITH TIES)?))?
^(SELECTLIST selectList))
	;
selectList
	: selectItem+
	| selectAssignment+
	;

And for an AST like:

(SELECT (SELECTLIST (CONSTANT 1) (CONSTANT 2)) (FROM myTab)))

I got MismatchedTokenException for the FROM clause. But if I put (^(FROM
fromClause))? into the selectClause rule:

selectClause
	:
	^(SELECT ALL? DISTINCT? (^(TOP INT (PERCENT)? (WITH TIES)?))?
^(SELECTLIST selectList) (^(FROM fromClause))?)
	;

It can walk the tree. Why?


 Thanks,
   Zoli


From marwan.alephn at gmail.com  Fri May  8 02:58:00 2009
From: marwan.alephn at gmail.com (Marwan Ajraoui)
Date: Fri, 8 May 2009 11:58:00 +0200
Subject: [antlr-interest] Recursive not supposed behaivor when finding EOF
Message-ID: <6535fcb50905080258g56e49a98ic54fda600abaf670@mail.gmail.com>

Hi there;

I'm getting a strange error form a parser. I have defined a grammar,
wich contains these rules;


decl_codigo :  decl_libreria decl_program

decl_libreria : TAG_START_OPEN 'function_library' ':' FN_ID TAG_CLOSE
decl_funciones TAG_END_OPEN 'function_library' TAG_CLOSE;

decl_program : TAG_START_OPEN 'program' type_return '::' FN_ID ':'
params_list TAG_CLOSE lista_instrucciones TAG_END_OPEN 'program'
TAG_CLOSE ;



 So when i finish parsing the input tested, ANTLR notifies,

line 0:-1 mismatched input '<EOF>' expecting TAG_START_OPEN

To find out what could be the problem, i put the TAG_START_OPEN , so i got:

line 0:-1 mismatched input '<EOF>' expecting  'function_library'


I did check my .g, if i have some other reference to "decl_libreria",
but No, the only reference is written is the one i mentioned before in
the lines above. it is supposed to finish without errors and return an
AST, as i set up the option.

So why it does behave in recursive way? Any idea.


thanks in advance



-- 
Marouane

From micha-1 at fantasymail.de  Fri May  8 04:04:26 2009
From: micha-1 at fantasymail.de (Michael)
Date: Fri, 8 May 2009 13:04:26 +0200
Subject: [antlr-interest] Recursive not supposed behaivor when finding
	EOF
In-Reply-To: <6535fcb50905080258g56e49a98ic54fda600abaf670@mail.gmail.com>
References: <6535fcb50905080258g56e49a98ic54fda600abaf670@mail.gmail.com>
Message-ID: <200905081304.27118.micha-1@fantasymail.de>

Am Friday 08 May 2009 11:58:00 schrieb Marwan Ajraoui:
> Hi there;
>
> I'm getting a strange error form a parser. I have defined a grammar,
> wich contains these rules;
>
>
> decl_codigo :  decl_libreria decl_program

does it work with:
decl_codigo :  decl_libreria decl_program EOF


I think you should  include the EOF token into your grammar.

cheers,
 Michael


From indhu.b at s7software.com  Fri May  8 04:54:16 2009
From: indhu.b at s7software.com (Indhu Bharathi)
Date: Fri, 08 May 2009 17:24:16 +0530
Subject: [antlr-interest] Recursive not supposed behaivor when finding
 EOF
In-Reply-To: <6535fcb50905080258g56e49a98ic54fda600abaf670@mail.gmail.com>
References: <6535fcb50905080258g56e49a98ic54fda600abaf670@mail.gmail.com>
Message-ID: <4A041D68.1020801@s7software.com>

Looks like you are parsing with empty input. What is the input you gave 
to the parser?

Cheers, Indhu

Marwan Ajraoui wrote:
> Hi there;
>
> I'm getting a strange error form a parser. I have defined a grammar,
> wich contains these rules;
>
>
> decl_codigo :  decl_libreria decl_program
>
> decl_libreria : TAG_START_OPEN 'function_library' ':' FN_ID TAG_CLOSE
> decl_funciones TAG_END_OPEN 'function_library' TAG_CLOSE;
>
> decl_program : TAG_START_OPEN 'program' type_return '::' FN_ID ':'
> params_list TAG_CLOSE lista_instrucciones TAG_END_OPEN 'program'
> TAG_CLOSE ;
>
>
>
>  So when i finish parsing the input tested, ANTLR notifies,
>
> line 0:-1 mismatched input '<EOF>' expecting TAG_START_OPEN
>
> To find out what could be the problem, i put the TAG_START_OPEN , so i got:
>
> line 0:-1 mismatched input '<EOF>' expecting  'function_library'
>
>
> I did check my .g, if i have some other reference to "decl_libreria",
> but No, the only reference is written is the one i mentioned before in
> the lines above. it is supposed to finish without errors and return an
> AST, as i set up the option.
>
> So why it does behave in recursive way? Any idea.
>
>
> thanks in advance
>
>
>
>   


From marwan.alephn at gmail.com  Fri May  8 05:28:18 2009
From: marwan.alephn at gmail.com (Marwan Ajraoui)
Date: Fri, 8 May 2009 14:28:18 +0200
Subject: [antlr-interest] Recursive not supposed behaivor when finding
	EOF
In-Reply-To: <200905081304.27118.micha-1@fantasymail.de>
References: <6535fcb50905080258g56e49a98ic54fda600abaf670@mail.gmail.com>
	<200905081304.27118.micha-1@fantasymail.de>
Message-ID: <6535fcb50905080528j6375592s2a66f4096cc34e60@mail.gmail.com>

Thanks for your advise. I did try adding the EOF in my grammar, and
still getting the same error. This problem is really strange, I can
not stop of thinking what could be the problem.

When i pass input file with errors, the Lexer and Parser do their work
properly, but once I pass a correct file, I get the mentioned error.

cheers and thanks again,

Marouane

2009/5/8 Michael <micha-1 at fantasymail.de>:
> Am Friday 08 May 2009 11:58:00 schrieb Marwan Ajraoui:
>> Hi there;
>>
>> I'm getting a strange error form a parser. I have defined a grammar,
>> wich contains these rules;
>>
>>
>> decl_codigo : ?decl_libreria decl_program
>
> does it work with:
> decl_codigo : ?decl_libreria decl_program EOF
>
>
> I think you should ?include the EOF token into your grammar.
>
> cheers,
> ?Michael
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>



-- 
Marouane

From marwan.alephn at gmail.com  Fri May  8 05:44:36 2009
From: marwan.alephn at gmail.com (Marwan Ajraoui)
Date: Fri, 8 May 2009 14:44:36 +0200
Subject: [antlr-interest] Recursive not supposed behaivor when finding
	EOF
In-Reply-To: <4A041D68.1020801@s7software.com>
References: <6535fcb50905080258g56e49a98ic54fda600abaf670@mail.gmail.com>
	<4A041D68.1020801@s7software.com>
Message-ID: <6535fcb50905080544p55779c4u6060b58fcdd6de87@mail.gmail.com>

Thanks for  your interest on the problem I 'm getting;

The input I'm passing is a file without parsing errors; The code I'm
using to test it is the one below:


              CharStream input = new ANTLRFileStream(pathfiletest);
		BTLLexer lex = new BTLLexer(input);
		CommonTokenStream tokens = new CommonTokenStream(lex);
		BTLParser parser = new BTLParser(tokens);
		parser.decl_codigo();		
		if (parser.numErrors == 0) {

			parser.symbols_var.toString();
			
			try {
				CommonTree tree = (CommonTree) parser.decl_codigo().getTree();
				System.out.println("El arbol AST:"+ tree.toString());
			} catch (RecognitionException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}

When i do pass i file with wrong statements, it does notify all the
errors has to be notified, works properly. But in case of passing a
correct file entry, for the grammar, i ' m getting the mentioned
before error message.

cheers and thanks,

Marouane



2009/5/8 Indhu Bharathi <indhu.b at s7software.com>:
> Looks like you are parsing with empty input. What is the input you gave to
> the parser?
>
> Cheers, Indhu
>
> Marwan Ajraoui wrote:
>>
>> Hi there;
>>
>> I'm getting a strange error form a parser. I have defined a grammar,
>> wich contains these rules;
>>
>>
>> decl_codigo : ?decl_libreria decl_program
>>
>> decl_libreria : TAG_START_OPEN 'function_library' ':' FN_ID TAG_CLOSE
>> decl_funciones TAG_END_OPEN 'function_library' TAG_CLOSE;
>>
>> decl_program : TAG_START_OPEN 'program' type_return '::' FN_ID ':'
>> params_list TAG_CLOSE lista_instrucciones TAG_END_OPEN 'program'
>> TAG_CLOSE ;
>>
>>
>>
>> ?So when i finish parsing the input tested, ANTLR notifies,
>>
>> line 0:-1 mismatched input '<EOF>' expecting TAG_START_OPEN
>>
>> To find out what could be the problem, i put the TAG_START_OPEN , so i
>> got:
>>
>> line 0:-1 mismatched input '<EOF>' expecting ?'function_library'
>>
>>
>> I did check my .g, if i have some other reference to "decl_libreria",
>> but No, the only reference is written is the one i mentioned before in
>> the lines above. it is supposed to finish without errors and return an
>> AST, as i set up the option.
>>
>> So why it does behave in recursive way? Any idea.
>>
>>
>> thanks in advance
>>
>>
>>
>>
>
>



-- 
Marouane

From Raghavendra.Anjana at in.bosch.com  Fri May  8 06:31:24 2009
From: Raghavendra.Anjana at in.bosch.com (Raghavendra Anjana (RBEI/EMT2))
Date: Fri, 8 May 2009 21:31:24 +0800
Subject: [antlr-interest] Regarding lexer rules return values
Message-ID: <08CE54E7AEB8A94A81B2F6295634553633A7C266@SGPMBX05.APAC.bosch.com>

Hello,

I have a grammar with a parser rule as shown below

parserrule: (LEXERRULE);

LEXERRULE: (LEXERRULE1)(LEXERRULE2)(LEXERRULE3);

Whenever my parser rule is recognized I want to return the text identified for LEXERRULE1,2,3 separately.  But I believe that we cannot return values from a lexer rule.

Is there a way so that I can get the LEXERRULE1,2,3 from LEXERRULE.

i.e.   Something like

Parserrule return [x,y,z]: (LEXERRULE) {$x= LEXERRULE.LEXERRULE1;$y =LEXERRULE.LEXERRULE2;$z=LEXERRULE.LEXERRULE3 };

LEXERRULE: (LEXERRULE1)(LEXERRULE2)(LEXERRULE3);
LEXERRULE1:'ab';
LEXERRULE2:'xy';
LEXERRULE3:'12';


The input for this parser is   abxy12
The scenario is that whenver this text is recognized or matched then I want ab, xy and 12 to be return back from the parser rule  each separately.

Thanks a lot in advance.

The kind of support I got by antlr-interest is great and appreciable.

Thanks and Regards
Raghavendra


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090508/a1c38fc0/attachment.html 

From marwan.alephn at gmail.com  Fri May  8 06:34:34 2009
From: marwan.alephn at gmail.com (Marwan Ajraoui)
Date: Fri, 8 May 2009 15:34:34 +0200
Subject: [antlr-interest] Recursive not supposed behaivor when finding
	EOF
In-Reply-To: <6535fcb50905080544p55779c4u6060b58fcdd6de87@mail.gmail.com>
References: <6535fcb50905080258g56e49a98ic54fda600abaf670@mail.gmail.com>
	<4A041D68.1020801@s7software.com>
	<6535fcb50905080544p55779c4u6060b58fcdd6de87@mail.gmail.com>
Message-ID: <6535fcb50905080634s1f368019r69265dcdbb17d7d5@mail.gmail.com>

I did solve the problem, Indhu gave the idea to change my code testing
class with his Question.  I had mistake in my testing class, here is
the new code that works. Many thanks for you help guys.


// I was invoking twice to the instance obejct of a parser in the previous code.

BTLParser.decl_codigo_return result=null;
		try {
			BTLLexer lex = new BTLLexer(input);
			CommonTokenStream tokens = new CommonTokenStream(lex);
			BTLParser parser = new BTLParser(tokens);
			result =parser.decl_codigo();
			if (parser.numErrors == 0) {				
					CommonTree tree = (CommonTree) result.getTree();
					System.out.println("El arbol AST:"+ tree.toStringTree());
			}

			
		} catch (RecognitionException e1) {
			// TODO Auto-generated catch block
			e1.printStackTrace
}

cheers,

Marouane

2009/5/8 Marwan Ajraoui <marwan.alephn at gmail.com>:
> Thanks for ?your interest on the problem I 'm getting;
>
> The input I'm passing is a file without parsing errors; The code I'm
> using to test it is the one below:
>
>
> ? ? ? ? ? ? ?CharStream input = new ANTLRFileStream(pathfiletest);
> ? ? ? ? ? ? ? ?BTLLexer lex = new BTLLexer(input);
> ? ? ? ? ? ? ? ?CommonTokenStream tokens = new CommonTokenStream(lex);
> ? ? ? ? ? ? ? ?BTLParser parser = new BTLParser(tokens);
> ? ? ? ? ? ? ? ?parser.decl_codigo();
> ? ? ? ? ? ? ? ?if (parser.numErrors == 0) {
>
> ? ? ? ? ? ? ? ? ? ? ? ?parser.symbols_var.toString();
>
> ? ? ? ? ? ? ? ? ? ? ? ?try {
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?CommonTree tree = (CommonTree) parser.decl_codigo().getTree();
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?System.out.println("El arbol AST:"+ tree.toString());
> ? ? ? ? ? ? ? ? ? ? ? ?} catch (RecognitionException e) {
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?// TODO Auto-generated catch block
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?e.printStackTrace();
> ? ? ? ? ? ? ? ? ? ? ? ?}
>
> When i do pass i file with wrong statements, it does notify all the
> errors has to be notified, works properly. But in case of passing a
> correct file entry, for the grammar, i ' m getting the mentioned
> before error message.
>
> cheers and thanks,
>
> Marouane
>
>
>
> 2009/5/8 Indhu Bharathi <indhu.b at s7software.com>:
>> Looks like you are parsing with empty input. What is the input you gave to
>> the parser?
>>
>> Cheers, Indhu
>>
>> Marwan Ajraoui wrote:
>>>
>>> Hi there;
>>>
>>> I'm getting a strange error form a parser. I have defined a grammar,
>>> wich contains these rules;
>>>
>>>
>>> decl_codigo : ?decl_libreria decl_program
>>>
>>> decl_libreria : TAG_START_OPEN 'function_library' ':' FN_ID TAG_CLOSE
>>> decl_funciones TAG_END_OPEN 'function_library' TAG_CLOSE;
>>>
>>> decl_program : TAG_START_OPEN 'program' type_return '::' FN_ID ':'
>>> params_list TAG_CLOSE lista_instrucciones TAG_END_OPEN 'program'
>>> TAG_CLOSE ;
>>>
>>>
>>>
>>> ?So when i finish parsing the input tested, ANTLR notifies,
>>>
>>> line 0:-1 mismatched input '<EOF>' expecting TAG_START_OPEN
>>>
>>> To find out what could be the problem, i put the TAG_START_OPEN , so i
>>> got:
>>>
>>> line 0:-1 mismatched input '<EOF>' expecting ?'function_library'
>>>
>>>
>>> I did check my .g, if i have some other reference to "decl_libreria",
>>> but No, the only reference is written is the one i mentioned before in
>>> the lines above. it is supposed to finish without errors and return an
>>> AST, as i set up the option.
>>>
>>> So why it does behave in recursive way? Any idea.
>>>
>>>
>>> thanks in advance
>>>
>>>
>>>
>>>
>>
>>
>
>
>
> --
> Marouane
>



-- 
Marouane

From megavlad at gmail.com  Fri May  8 07:07:34 2009
From: megavlad at gmail.com (Vladimir Florentino)
Date: Fri, 8 May 2009 10:07:34 -0400
Subject: [antlr-interest] error in RegcognitionException;
	input refers to wrong class.
Message-ID: <000e01c9cfe6$56661c50$033254f0$@com>

Hi, All

 

My name is Vlad. This is my first post at the mailing list.

 

I'm having an issue. I'm doing something like the following:

 

[code]

function run()

                input  = ANTLRStringStream('10110')

                lexer  = SaranLexer(input)

                tokens = CommonTokenStream(lexer)  

                parser = SaranParser(tokens)

                                

                // Run the parser.

                parser.topRule()

end

[/code]

 

This causes a problem in RegcognitionException, because in the constructor
it does:

 

[code]

self.c                                                                     =
self.input.LA(1)

self.line                                                                =
self.input.getLine()

self.index                                                            =
self.input.index()

self.charPositionInLine                                  =
self.input.getCharPositionInLine()

[/code]

 

The issue is that, at this point, input refers to CommonTokenStream, not
ANTLRStringStream.

 

The exception is raised in the codegen-template function:

dfaState(k, edges, eotPredictsAlt, description, stateNumber, semPredState)
::=

 

Specifically, when throwing the exception:

NoViableAltException("<description>", <decisionNumber>, <stateNumber>,
input)

 

At first, I checked if input was of type CommonTokenStream, and then tried
getTokenSource(), but that returns the Lexer, not ANTLRStringStream, which
is what RecognitionException seems to expect (or one of the other
ANTLR*Stream). Also, Lexer doesn't have a getInput function. 

 

I must be doing something funky. I figured that input would automatically
point to the correct source, and I wouldn't have to add/hack my own code in
the codegen-template function.

 

 

Any advice?

 

Regards,

 

Vlad

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090508/9baa63d6/attachment-0001.html 

From linlin.xie at siemens.com  Fri May  8 11:07:22 2009
From: linlin.xie at siemens.com (Xie, Linlin)
Date: Fri, 8 May 2009 20:07:22 +0200
Subject: [antlr-interest] (no subject)
Message-ID: <79118B9FE8CE8E49B0D71964A79CB6470249843F@dekomplm002.net.plm.eds.com>

Dear All,

 

I'm adding a action at the end of a rule to process each node/subrule.
Here is an example of the rule:

 

P: R1 R2

   ->^(ROOT R1 R2) //ROOT is a pseudo node

  { handleP(...); }

   ;

 

In the handleP action, I want to pass the current ROOT node and also the
following children node R1 and R2. How am I gonna do that? 

 

I know there is a root_0 that could be used to represent the root node
of the rule P, but to the handleP, it just wants to be passed the nodes
that it's interested. 

 

Have anybody got any ideas? 

Thank you all very much!

Linlin Xie

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090508/4ced1547/attachment.html 

From floris.vannee at gmail.com  Fri May  8 11:17:46 2009
From: floris.vannee at gmail.com (Floris van Nee)
Date: Fri, 8 May 2009 20:17:46 +0200
Subject: [antlr-interest] AST rewrite bug C# target
Message-ID: <2302ac370905081117x38a9476asdf052bd41d852176@mail.gmail.com>

Hi all,
I think I've come across another bug in the C# target when rewriting ASTs in
tree grammars.

I have included two files needed to reproduce the bug. The behaviour is
this:

It happens when a tree grammar is created with rules which return values,
like:

qualifier returns [List<string> ids]
: ^(fqual=FQUALIFIER IDENTIFIER+ ARRAY?)
{
ids = new List<String>() { "System", "Void" };
}
;

The C# compiler complains about the variable ids which it cannot find.
Also, when you reference the return value of such a rule somewhere, as in
qual=qualifier, you will have a variable qual with type qualifier_return,
instead of List<string>.

I guess this is a bug in the C# target of ANTLR - but if it's not, what
should I do to make the code compile correctly?
I am using the latest version of ANTLR (3.1.3)

Thanks,
Floris
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090508/511307ce/attachment.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Vnvd.g
Type: application/octet-stream
Size: 9637 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090508/511307ce/attachment.obj 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: VnvdRewriteAstTest.g
Type: application/octet-stream
Size: 5814 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090508/511307ce/attachment-0001.obj 

From sharwell at pixelminegames.com  Fri May  8 12:03:42 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Fri, 8 May 2009 14:03:42 -0500
Subject: [antlr-interest] AST rewrite bug C# target
In-Reply-To: <2302ac370905081117x38a9476asdf052bd41d852176@mail.gmail.com>
References: <2302ac370905081117x38a9476asdf052bd41d852176@mail.gmail.com>
Message-ID: <86403CA0939415448BCCB83855EFE09AA6805D@Bloodymary.ironwillgames.com>

You should always reference rule arguments and return values with a $,
as in $ids. I'm thinking about making a mode that mangles the names of
items that aren't meant to be accessed directly, which is required for
some optimization work I've been planning.

 

Sam

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Floris van Nee
Sent: Friday, May 08, 2009 1:18 PM
To: ANTLR
Subject: [antlr-interest] AST rewrite bug C# target

 

Hi all, 

 

I think I've come across another bug in the C# target when rewriting
ASTs in tree grammars.

 

I have included two files needed to reproduce the bug. The behaviour is
this:

 

It happens when a tree grammar is created with rules which return
values, like:

 

qualifier returns [List<string> ids]

            :           ^(fqual=FQUALIFIER IDENTIFIER+ ARRAY?)

                        {

                                    ids = new List<String>() { "System",
"Void" };

                        }

            ;

 

The C# compiler complains about the variable ids which it cannot find.

Also, when you reference the return value of such a rule somewhere, as
in qual=qualifier, you will have a variable qual with type
qualifier_return, instead of List<string>.

 

I guess this is a bug in the C# target of ANTLR - but if it's not, what
should I do to make the code compile correctly?

I am using the latest version of ANTLR (3.1.3)

 

Thanks,

Floris

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090508/7590d31d/attachment.html 

From jimi at temporal-wave.com  Fri May  8 12:05:42 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 08 May 2009 12:05:42 -0700
Subject: [antlr-interest] AST rewrite bug C# target
In-Reply-To: <2302ac370905081117x38a9476asdf052bd41d852176@mail.gmail.com>
References: <2302ac370905081117x38a9476asdf052bd41d852176@mail.gmail.com>
Message-ID: <4A048286.3070300@temporal-wave.com>

Floris van Nee wrote:
> Hi all,
>
> I think I've come across another bug in the C# target when rewriting 
> ASTs in tree grammars.
>
> I have included two files needed to reproduce the bug. The behaviour 
> is this:
>
> It happens when a tree grammar is created with rules which return 
> values, like:
>
> qualifier returns [List<string> ids]
ANTLR cannot handle complicated definitions for return types, such as 
generics, it isn't the fault of the C# target.

Jim


From jimi at temporal-wave.com  Fri May  8 12:06:51 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 08 May 2009 12:06:51 -0700
Subject: [antlr-interest] AST rewrite bug C# target
In-Reply-To: <2302ac370905081117x38a9476asdf052bd41d852176@mail.gmail.com>
References: <2302ac370905081117x38a9476asdf052bd41d852176@mail.gmail.com>
Message-ID: <4A0482CB.50801@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090508/a90e5d3c/attachment.html 

From mmburke at gwu.edu  Fri May  8 12:15:33 2009
From: mmburke at gwu.edu (Matthew M. Burke)
Date: Fri, 08 May 2009 15:15:33 -0400
Subject: [antlr-interest] Implementing if statements in a tree parsing
	Interpreter
In-Reply-To: <4A01AC56.2040708@gwu.edu>
References: <4A01AC56.2040708@gwu.edu>
Message-ID: <4A0484D5.7040507@gwu.edu>

Thanks to all who wrote with suggestions, etc. 

I finally twigged to a solution that allowed me to get the approach I 
had started to work---probably should have spotted this quicker.  In 
case anybody's interested, the key line of code is flagged below:

Matthew M. Burke wrote:
>
> Now in the tree parser, I have
>
> statement
>     : ...
>     | ^(SAME_CMD a=val b=val .) {
>                       int aval = $a.value;
>                       int bval = $b.value;
>                       if (a == b) {
>                             // HERE'S THE KEY
>   
                                                           CommonTree 
blockRoot = (CommonTree)($statement.start.getChild(2));
                                                          ......
>                       }
>     }
>     | ...
>     ;
>
>   


From sharwell at pixelminegames.com  Fri May  8 12:25:48 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Fri, 8 May 2009 14:25:48 -0500
Subject: [antlr-interest] AST rewrite bug C# target
In-Reply-To: <4A048286.3070300@temporal-wave.com>
References: <2302ac370905081117x38a9476asdf052bd41d852176@mail.gmail.com>
	<4A048286.3070300@temporal-wave.com>
Message-ID: <86403CA0939415448BCCB83855EFE09AA6805E@Bloodymary.ironwillgames.com>

I know at least the CSharp2 target supports generics there. :)

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jim Idle
Sent: Friday, May 08, 2009 2:06 PM
Cc: ANTLR
Subject: Re: [antlr-interest] AST rewrite bug C# target

ANTLR cannot handle complicated definitions for return types, such as 
generics, it isn't the fault of the C# target.

Jim 


From parrt at cs.usfca.edu  Fri May  8 13:04:23 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 8 May 2009 13:04:23 -0700
Subject: [antlr-interest] still room at ANTLR workshop :)
Message-ID: <704DABDC-78D0-468A-A9AC-B24510887D15@cs.usfca.edu>

Hi,

Just a note to say that we still have room at the workshop this year.  
Lots of the primary contributors to the project will be there as well  
as others that use the tools in the wild.

http://www.antlr.org/wiki/display/ANTLR3/ANTLR+Conference+2009

You get a free beta copy of the language design patterns book :)

Ter


From siemsen at ucar.edu  Fri May  8 14:02:58 2009
From: siemsen at ucar.edu (Pete Siemsen)
Date: Fri, 8 May 2009 15:02:58 -0600
Subject: [antlr-interest] breaking the Java code out of a grammar
Message-ID: <3D2BB682-3676-4410-B56C-816E28119057@ucar.edu>

I have a 800-line ANTLR 3 grammar that works fine.  I use an editor  
TextMate to edit it.  This works, but TextMate doesn't know how to  
syntax-highlight the code.  TextMate can be trained to do so, but it's  
hard because ANTLR grammar files contain 2 mixed languages, ANTLR and  
Java.  Obviously I can live with unhighlighted code, but I notice that  
when editing several files at once with TextMate, I see some Java code  
highlighted and some not.

I know I can use ANTLRWorks, but I'd rather use a single editing tool  
than juggle multiple GUIs.  Besides, my grammar is fairly static -  
it's the interspersed Java that changes.

A while back, someone on this mailing list suggested that my grammar  
might benefit if I were to move all the Java into a separate .java  
file.  In other words, replace each occurrence of a block of Java with  
a simple Java function call, so that the bulk of the Java would move  
to the .java file.

This seems like an interesting idea.

Pros:
It would make the grammar more compact, so it would be much easier to  
"see" the grammar rules and StringTemplate invocations.
I'd be more tempted to train TextMate to highlight ANTLR grammars.
It would keep most of the Java in a .java file, where it can be  
highlighted correctly.

Cons:
It would be yet another source file.
It would add a bunch of argument passing.
It wouldn't deal with grammar rules that contain Java fragments, such  
as this, from my grammar:

methodDeclaration
     : dataType methodName LPAREN  
(methodParameterList{mpexists=true;})? RPAREN SEMICOLON


Anyway, does this idea have any merit?

-- Pete



From JALuber at gmx.de  Fri May  8 14:10:23 2009
From: JALuber at gmx.de (Johannes Luber)
Date: Fri, 08 May 2009 23:10:23 +0200
Subject: [antlr-interest] AST rewrite bug C# target
In-Reply-To: <2302ac370905081117x38a9476asdf052bd41d852176@mail.gmail.com>
References: <2302ac370905081117x38a9476asdf052bd41d852176@mail.gmail.com>
Message-ID: <20090508211023.137340@gmx.net>

> Hi all,
> I think I've come across another bug in the C# target when rewriting ASTs
> in
> tree grammars.
> 
> I have included two files needed to reproduce the bug. The behaviour is
> this:
> 
> It happens when a tree grammar is created with rules which return values,
> like:
> 
> qualifier returns [List<string> ids]
> : ^(fqual=FQUALIFIER IDENTIFIER+ ARRAY?)
> {
> ids = new List<String>() { "System", "Void" };
> }
> ;
> 
> The C# compiler complains about the variable ids which it cannot find.
> Also, when you reference the return value of such a rule somewhere, as in
> qual=qualifier, you will have a variable qual with type qualifier_return,
> instead of List<string>.
> 
> I guess this is a bug in the C# target of ANTLR - but if it's not, what
> should I do to make the code compile correctly?
> I am using the latest version of ANTLR (3.1.3)
> 
> Thanks,
> Floris


I thought that escaping one or two of the angle brackets would work (e.g. "List\<string\>"). If not, you can define an alias in the @header-section:

alias StringList = System.Collections.Generic.List<string>;

and use StringList in the ANTLR grammar.

Johannes
-- 
Neu: GMX FreeDSL Komplettanschluss mit DSL 6.000 Flatrate + Telefonanschluss f?r nur 17,95 Euro/mtl.!* http://dslspecial.gmx.de/freedsl-surfflat/?ac=OM.AD.PD003K11308T4569a

From chris at lambrou.net  Fri May  8 14:59:04 2009
From: chris at lambrou.net (Chris Lambrou)
Date: Fri, 8 May 2009 22:59:04 +0100
Subject: [antlr-interest] Targeting different runtimes with the same grammar
Message-ID: <70bbae280905081459s7fe45d9lb351d7c09aae00d1@mail.gmail.com>

Is there a recommended way of writing a grammar so that it can be used to
target different runtimes?  I'd like to be able to use the same grammar to
target both C# (for use in an ASP.NET server application) and in JavaScript
(for use by clients). The ANTLR book is filled with examples of how useful
it can be to embed Java code within the grammar, but this couples the
grammar to a specific runtime, which is something I'm explicitly trying to
avoid.

Regards,

Chris
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090508/5cddf22f/attachment.html 

From jimi at temporal-wave.com  Fri May  8 15:17:55 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 08 May 2009 15:17:55 -0700
Subject: [antlr-interest] breaking the Java code out of a grammar
In-Reply-To: <3D2BB682-3676-4410-B56C-816E28119057@ucar.edu>
References: <3D2BB682-3676-4410-B56C-816E28119057@ucar.edu>
Message-ID: <4A04AF93.2070302@temporal-wave.com>

Pete Siemsen wrote:
>  is fairly static -  
> it's the interspersed Java that changes.
>
> A while back, someone on this mailing list suggested that my grammar  
> might benefit if I were to move all the Java into a separate .java  
> file. 
>
> This seems like an interesting idea.
>
>
> Anyway, does this idea have any merit?
>   
IMO it is the only way you should code it, but then again, it may have 
been me that suggested this to you in the first place.

Jim

From claco at chrislaco.com  Fri May  8 15:54:38 2009
From: claco at chrislaco.com (Christopher Laco)
Date: Fri, 08 May 2009 18:54:38 -0400
Subject: [antlr-interest] Targeting different runtimes with the same
	grammar
In-Reply-To: <70bbae280905081459s7fe45d9lb351d7c09aae00d1@mail.gmail.com>
References: <70bbae280905081459s7fe45d9lb351d7c09aae00d1@mail.gmail.com>
Message-ID: <4A04B82E.7020008@chrislaco.com>

Chris Lambrou wrote:
> Is there a recommended way of writing a grammar so that it can be used to
> target different runtimes?  I'd like to be able to use the same grammar to
> target both C# (for use in an ASP.NET server application) and in JavaScript
> (for use by clients). The ANTLR book is filled with examples of how useful
> it can be to embed Java code within the grammar, but this couples the
> grammar to a specific runtime, which is something I'm explicitly trying to
> avoid.
> 
> Regards,
> 
> Chris
> 

I just started with ANTLR this week. I think the answer is along the
lines of: use one grammar (lexer/parser) to create a AST (abstract
syntax tree) for your intermediate language representation.

Then, you just need to make multiple tree grammers to translate that AST
into multiple target languages.

From christian.schladetsch at gmail.com  Fri May  8 16:33:34 2009
From: christian.schladetsch at gmail.com (Christian Schladetsch)
Date: Sat, 9 May 2009 11:33:34 +1200
Subject: [antlr-interest] Stripping Tokens, Skipping leading text
Message-ID: <6442c4ae0905081633x40696b28wc47e9f2cd670eaf1@mail.gmail.com>

Hello,

Using ANTLR 3.1.3 with DOT-NET-runtime-3.1.3 and "CSharp" target,
output=template.

I have a situation where I'd like to gather all text between two delimiters,
but excluding those delimiters:

    [[
           any text
    ]]

My attempts so far have failed:

    CODE_BLOCK: '[[' (options{greedy=false;}:.)* ']]' ;

This correctly parses the entire token, but the token value in the lexer
contains the enclosing delimiters '[[' and ']]'

Moving on, to strip the delimiters:

    CODE_BLOCK: OPEN_CODE (options{greedy=false;}.*) CLOSE_CODE ;
    OPEN_CODE : '[[' {$channel=HIDDEN;} ;
    CLOSE_CODE : '[[' {$channel=HIDDEN;} ;

but the delimiters remain visible in the parser:

    code_block : cb=CODE_BLOCK -> code(text={$cb.Text}) ; // the code string
template gets the delimiters :(

I assume this is because CODE_BLOCK is not outputting to the HIDDEN channel,
overriding the channel used for OPEN_CODE and CLOSE_CODE.

How can I ensure that the parser only sees the inner text of the block?

I also tried:

    CODE_BLOCK: '[[' inner=(options{greedy=false;}.*) ']]' { Text =
$inner.Text; } ;

But the C# runtime fails, because it declares 'inner' as an int and does
nothing with it.

I am missing something simple here I know. I would greatly appreciate your
help. I'd like to say something like we can for trees:

    CODE_BLOCK: '[['! ... ']]'! ;

To remote the two delimiters in the token text.

While I'm here, I have a similar problem. I'd like to skip all input until a
starting token is found:

    any text here that is not parsed lah di dah /** text here is parsed **/
no text parsing here

I tried:

    start: START parse_stuff END ;
    START : (options{greedy=false;}:.)* '/**' ;
    END : '**/' .* ;

But the start token '/**' is always skipped, despite the non-greedy prefix.
Any ideas greatly appreciated.

Regards and Thanks in advance,
Christian.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090509/2f5c102f/attachment.html 

From antlr at mirality.co.nz  Fri May  8 16:48:41 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 09 May 2009 11:48:41 +1200
Subject: [antlr-interest] Stripping Tokens, Skipping leading text
In-Reply-To: <6442c4ae0905081633x40696b28wc47e9f2cd670eaf1@mail.gmail.co
 m>
References: <6442c4ae0905081633x40696b28wc47e9f2cd670eaf1@mail.gmail.com>
Message-ID: <20090508234907.6FB2434184D0@www.antlr.org>

At 11:33 9/05/2009, Christian Schladetsch wrote:
>My attempts so far have failed:
>
>     CODE_BLOCK: '[[' (options{greedy=false;}:.)* ']]' ;
>
>This correctly parses the entire token, but the token value in 
>the lexer contains the enclosing delimiters '[[' and ']]'

CODE_BLOCK: '[[' .* ']]' { setText($text.substring(2, 
$length.length()-4)); };

(Minor variation needed to make it C#, but that should give you 
the general idea.)

>While I'm here, I have a similar problem. I'd like to skip all 
>input until a starting token is found:
>
>     any text here that is not parsed lah di dah /** text here is 
> parsed **/ no text parsing here

You might want to look into filter lexers, or island 
grammars.  But anyway:

START
   : ( ~'/'
     | '/' ~'*'
     | '/*' ~'*'
     )*
     '/**'
   ;

This sort of thing is dangerous, though; there's a very good 
probability that it will mess up the contents of what you're 
trying to parse as well.

A better solution is to match the whole /** (anything) **/ 
sequence as a single lexer token, and then run another 
lexer/parser over the result -- ie. an island grammar.


From christian.schladetsch at gmail.com  Fri May  8 17:31:31 2009
From: christian.schladetsch at gmail.com (Christian Schladetsch)
Date: Sat, 9 May 2009 12:31:31 +1200
Subject: [antlr-interest] Stripping Tokens, Skipping leading text
In-Reply-To: <4a04c4e7.010bca0a.77ef.1fbdSMTPIN_ADDED@mx.google.com>
References: <6442c4ae0905081633x40696b28wc47e9f2cd670eaf1@mail.gmail.com>
	<4a04c4e7.010bca0a.77ef.1fbdSMTPIN_ADDED@mx.google.com>
Message-ID: <6442c4ae0905081731m1c220768nb0ed3346a3d58482@mail.gmail.com>

Thanks Gavin,

Although the first solution is a hack (using out-of-band target-specific
code), I greatly appreciate it and will use it. However, the underlying
issue remains a curiosity for me.

I'll follow your advice and will research both lexical filters and island
grammars.

Thanks again,
Christian.

On Sat, May 9, 2009 at 11:48 AM, Gavin Lambert <antlr at mirality.co.nz> wrote:

> At 11:33 9/05/2009, Christian Schladetsch wrote:
>
>> My attempts so far have failed:
>>
>>    CODE_BLOCK: '[[' (options{greedy=false;}:.)* ']]' ;
>>
>> This correctly parses the entire token, but the token value in the lexer
>> contains the enclosing delimiters '[[' and ']]'
>>
>
> CODE_BLOCK: '[[' .* ']]' { setText($text.substring(2, $length.length()-4));
> };
>
> (Minor variation needed to make it C#, but that should give you the general
> idea.)
>
>  While I'm here, I have a similar problem. I'd like to skip all input until
>> a starting token is found:
>>
>>    any text here that is not parsed lah di dah /** text here is parsed **/
>> no text parsing here
>>
>
> You might want to look into filter lexers, or island grammars.  But anyway:
>
> START
>  : ( ~'/'
>    | '/' ~'*'
>    | '/*' ~'*'
>    )*
>    '/**'
>  ;
>
> This sort of thing is dangerous, though; there's a very good probability
> that it will mess up the contents of what you're trying to parse as well.
>
> A better solution is to match the whole /** (anything) **/ sequence as a
> single lexer token, and then run another lexer/parser over the result -- ie.
> an island grammar.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090509/85315368/attachment.html 

From avidtrober at gmail.com  Fri May  8 20:06:08 2009
From: avidtrober at gmail.com (Avid Trober)
Date: Fri, 8 May 2009 22:06:08 -0500
Subject: [antlr-interest]  v3.3.1 Upgrade Problems
Message-ID: <BE58C040869A49459219C04B9B7B1951@homelaptop>

I've been running antlr.3.1.jar without any problems for some time now.
I recently obtained antlr.3.1.3.jar, changed my CLASSPATH accordingly, and now all my grammars have weird warnings and/or errors.

Is there more to an ANTLR upgrade than just downloading the new jar and making sure it's in the CLASSPATH? (and, nothing else.  Netmon confirms the proper ANTLR version is running).

This is what I grabbed:  (http://www.antlr.org/download/antlr-3.1.3.jar, from http://www.antlr.org/download.html labeled "Complete ANTLR 3.1.3 jar; all tools, runtime, etc... (included in source distribution)"


An example of some errors on a trivial test grammar:


D:\ANTLRWorks\grammars\Trivial>java org.antlr.Tool  Trivial.g
error(10):  internal error:  : java.lang.Error: Error parsing Trivial.g: 'memoiz
e' not expected ';'
org.antlr.tool.GrammarSpelunker.match(GrammarSpelunker.java:74)
org.antlr.tool.GrammarSpelunker.options(GrammarSpelunker.java:126)
org.antlr.tool.GrammarSpelunker.parse(GrammarSpelunker.java:91)
org.antlr.Tool.sortGrammarFiles(Tool.java:525)
org.antlr.Tool.process(Tool.java:383)
org.antlr.Tool.main(Tool.java:91)

v3.1.3 doesn't like anything about the options section now.  If I remove the options section, the parse now hates AST rewrites or ^:


D:\ANTLRWorks\grammars\Trivial>java org.antlr.Tool  Trivial.g
error(100): Trivial.g:20:14: syntax error: antlr: Trivial.g:20:14: unexpected to
ken: ^(
error(100): Trivial.g:20:20: syntax error: antlr: Trivial.g:20:20: expecting SEM
I, found ')'


here's the Trivial grammar:

grammar Trivial;



tokens
{
 UNIT = 'UNIT';
 ITEM = 'ITEM';
 ITEM_DETAIL_LIST;
 ITEM_DETAIL = 'ITEM_DETAIL';
 TYPE = 'TYPE';
 CASE = 'CASE';
 VALUE = 'VALUE';
 IDBC = 'IDBC';
 END_UNIT = 'END_UNIT';
}


itemValueIDBC
 : 'IDBC' -> ^(IDBC) 
 ;
 
identifier 
 : IDENTIFIER;



IDENTIFIER : ('A' .. 'Z' | 'a'..'z') ( 'A' .. 'Z' | 'a'..'z' | '0' .. '9' | '_')* 
 ;

INTEGER
 : '0' .. '9' ( '0' .. '9' )*
 ;
 
WS : (' '|'\r'|'\t'|'\n') {$channel=HIDDEN;}
 ;

EOL  : ('\n' | '\r' | EOF)
 ;


---------------END OF GRAMMAR ---------------







-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090508/2d4a9cad/attachment.html 

From floris.vannee at gmail.com  Sat May  9 01:55:40 2009
From: floris.vannee at gmail.com (Floris van Nee)
Date: Sat, 9 May 2009 10:55:40 +0200
Subject: [antlr-interest] AST rewrite bug C# target
In-Reply-To: <20090508211023.137340@gmx.net>
References: <2302ac370905081117x38a9476asdf052bd41d852176@mail.gmail.com>
	<20090508211023.137340@gmx.net>
Message-ID: <2302ac370905090155k441b78b7pbab5f2d2e3043fd1@mail.gmail.com>

Hi all,
thanks for all the answers!

ANTLR can handle the generics - I haven't had any problems with that yet,
but C# gave compile errors about the identifier 'ids'. It is fixed now
though, thanks to Sam, $ids does work. I thought the $ wasn't neccessary,
because in normal mode (not output=AST) it just works without the dollar
sign.

There's one more error left though, in rules like:
type_qualifier returns [List<string> ids]
: v=VOID
{
$ids = new List<String>() { "System", "Void" };
}
| qual=qualifier
{
$ids = qual;
}
;

Here I want to assign the value of qual (which should be of type
List<string>) to $ids. In output=AST mode qual is of type qualifier_return,
instead of List<string>, but in normal mode it compiles correctly. What am I
doing wrong here then?

Thanks!
Floris

On Fri, May 8, 2009 at 11:10 PM, Johannes Luber <JALuber at gmx.de> wrote:

> > Hi all,
> > I think I've come across another bug in the C# target when rewriting ASTs
> > in
> > tree grammars.
> >
> > I have included two files needed to reproduce the bug. The behaviour is
> > this:
> >
> > It happens when a tree grammar is created with rules which return values,
> > like:
> >
> > qualifier returns [List<string> ids]
> > : ^(fqual=FQUALIFIER IDENTIFIER+ ARRAY?)
> > {
> > ids = new List<String>() { "System", "Void" };
> > }
> > ;
> >
> > The C# compiler complains about the variable ids which it cannot find.
> > Also, when you reference the return value of such a rule somewhere, as in
> > qual=qualifier, you will have a variable qual with type qualifier_return,
> > instead of List<string>.
> >
> > I guess this is a bug in the C# target of ANTLR - but if it's not, what
> > should I do to make the code compile correctly?
> > I am using the latest version of ANTLR (3.1.3)
> >
> > Thanks,
> > Floris
>
>
> I thought that escaping one or two of the angle brackets would work (e.g.
> "List\<string\>"). If not, you can define an alias in the @header-section:
>
> alias StringList = System.Collections.Generic.List<string>;
>
> and use StringList in the ANTLR grammar.
>
> Johannes
> --
> Neu: GMX FreeDSL Komplettanschluss mit DSL 6.000 Flatrate +
> Telefonanschluss f?r nur 17,95 Euro/mtl.!*
> http://dslspecial.gmx.de/freedsl-surfflat/?ac=OM.AD.PD003K11308T4569a
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090509/edf5581b/attachment.html 

From antlr at mirality.co.nz  Sat May  9 03:04:17 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 09 May 2009 22:04:17 +1200
Subject: [antlr-interest] AST rewrite bug C# target
In-Reply-To: <2302ac370905090155k441b78b7pbab5f2d2e3043fd1@mail.gmail.co
 m>
References: <2302ac370905081117x38a9476asdf052bd41d852176@mail.gmail.com>
	<20090508211023.137340@gmx.net>
	<2302ac370905090155k441b78b7pbab5f2d2e3043fd1@mail.gmail.com>
Message-ID: <20090509100448.EBFC13418485@www.antlr.org>

At 20:55 9/05/2009, Floris van Nee wrote:
>There's one more error left though, in rules like:
>type_qualifier returns [List<string> ids]
>:v=VOID
>{
>$ids = new List<String>() { "System", "Void" };
>}
>|qual=qualifier
>{
>$ids = qual;
>}
>;
>
>Here I want to assign the value of qual (which should be of type 
>List<string>) to $ids. In output=AST mode qual is of type 
>qualifier_return, instead of List<string>, but in normal mode it 
>compiles correctly. What am I doing wrong here then?

Assuming that the 'qualifier' rule is defined similarly, then you 
should be using this instead:

   $ids = $qual.ids;


From linlin.xie at siemens.com  Sat May  9 07:10:02 2009
From: linlin.xie at siemens.com (Xie, Linlin)
Date: Sat, 9 May 2009 16:10:02 +0200
Subject: [antlr-interest] How to pass the current node to the action?
In-Reply-To: <79118B9FE8CE8E49B0D71964A79CB6470249843F@dekomplm002.net.plm.eds.com>
References: <79118B9FE8CE8E49B0D71964A79CB6470249843F@dekomplm002.net.plm.eds.com>
Message-ID: <79118B9FE8CE8E49B0D71964A79CB64702498466@dekomplm002.net.plm.eds.com>

Sorry, I didn't give a subject to my last question. Below is the
details, can anybody help me out?

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Xie, Linlin
Sent: 08 May 2009 19:07
To: antlr-interest at antlr.org
Cc: Fitt, Andrew; Hamid, Nusrat
Subject: [antlr-interest] (no subject)

 

Dear All,

 

I'm adding a action at the end of a rule to process each node/subrule.
Here is an example of the rule:

 

P: R1 R2

   ->^(ROOT R1 R2) //ROOT is a pseudo node

  { handleP(...); }

   ;

 

In the handleP action, I want to pass the current ROOT node and also the
following children node R1 and R2. How am I gonna do that? 

 

I know there is a root_0 that could be used to represent the root node
of the rule P, but to the handleP, it just wants to be passed the nodes
that it's interested. 

 

Have anybody got any ideas? 

Thank you all very much!

Linlin Xie

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090509/2a532f5a/attachment.html 

From floris.vannee at gmail.com  Sat May  9 07:43:39 2009
From: floris.vannee at gmail.com (Floris van Nee)
Date: Sat, 9 May 2009 16:43:39 +0200
Subject: [antlr-interest] AST rewrite bug C# target
In-Reply-To: <4a055534.1b0bca0a.501f.4634SMTPIN_ADDED@mx.google.com>
References: <2302ac370905081117x38a9476asdf052bd41d852176@mail.gmail.com>
	<20090508211023.137340@gmx.net>
	<2302ac370905090155k441b78b7pbab5f2d2e3043fd1@mail.gmail.com>
	<4a055534.1b0bca0a.501f.4634SMTPIN_ADDED@mx.google.com>
Message-ID: <2302ac370905090743g3b31d9c7r27f7fedfe4dc4897@mail.gmail.com>

Thanks! It works perfectly now :)
Floris

On Sat, May 9, 2009 at 12:04 PM, Gavin Lambert <antlr at mirality.co.nz> wrote:

> At 20:55 9/05/2009, Floris van Nee wrote:
>
>> There's one more error left though, in rules like:
>> type_qualifier returns [List<string> ids]
>> :v=VOID
>> {
>> $ids = new List<String>() { "System", "Void" };
>> }
>> |qual=qualifier
>> {
>> $ids = qual;
>> }
>> ;
>>
>> Here I want to assign the value of qual (which should be of type
>> List<string>) to $ids. In output=AST mode qual is of type qualifier_return,
>> instead of List<string>, but in normal mode it compiles correctly. What am I
>> doing wrong here then?
>>
>
> Assuming that the 'qualifier' rule is defined similarly, then you should be
> using this instead:
>
>  $ids = $qual.ids;
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090509/5bf951b0/attachment.html 

From jimi at temporal-wave.com  Sat May  9 09:49:09 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 09 May 2009 09:49:09 -0700
Subject: [antlr-interest] How to pass the current node to the action?
In-Reply-To: <79118B9FE8CE8E49B0D71964A79CB64702498466@dekomplm002.net.plm.eds.com>
References: <79118B9FE8CE8E49B0D71964A79CB6470249843F@dekomplm002.net.plm.eds.com>
	<79118B9FE8CE8E49B0D71964A79CB64702498466@dekomplm002.net.plm.eds.com>
Message-ID: <4A05B405.1080104@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090509/8dbe805d/attachment.html 

From gerald at certiv.net  Sat May  9 14:52:30 2009
From: gerald at certiv.net (Gerald Rosenberg)
Date: Sat, 09 May 2009 14:52:30 -0700
Subject: [antlr-interest] AntlrDT 0.8.0 Released
In-Reply-To: <200901251947.n0PJlHtF024684@zinc.newtechlaw.com>
References: <200901251947.n0PJlHtF024684@zinc.newtechlaw.com>
Message-ID: <200905092152.n49LqT3P022315@zinc.newtechlaw.com>

New version of AntlrDT is available.

This version implements significant  improvements to the AntlrAST view.
----
Gerald B. Rosenberg
Certiv Analytics

www.certiv.net


From des at deshartman.com  Sat May  9 15:45:55 2009
From: des at deshartman.com (Des)
Date: Sun, 10 May 2009 08:45:55 +1000
Subject: [antlr-interest] Targeting different runtimes with the same
	grammar
In-Reply-To: <70bbae280905081459s7fe45d9lb351d7c09aae00d1@mail.gmail.com>
References: <70bbae280905081459s7fe45d9lb351d7c09aae00d1@mail.gmail.com>
Message-ID: <0E403A83-BBE0-4A0A-ABB4-94868D46C111@deshartman.com>

Chris

The way I did it was to write stubs in the member section that I then  
override. It is not completely target agnostic, but allows you to  
maintain simpler grammar files where you only have to change the stubs  
for the target language

Thanks
Des Hartman
+614 01 277 115
iPhone junky

On 09/05/2009, at 7:59, Chris Lambrou <chris at lambrou.net> wrote:

>
> Is there a recommended way of writing a grammar so that it can be  
> used to target different runtimes?  I'd like to be able to use the  
> same grammar to target both C# (for use in an ASP.NET server  
> application) and in JavaScript (for use by clients). The ANTLR book  
> is filled with examples of how useful it can be to embed Java code  
> within the grammar, but this couples the grammar to a specific  
> runtime, which is something I'm explicitly trying to avoid.
>
> Regards,
>
> Chris
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090510/bfb0dc34/attachment.html 

From kranthi_nuthi at yahoo.co.in  Sat May  9 21:33:22 2009
From: kranthi_nuthi at yahoo.co.in (kranthi nuthi)
Date: Sun, 10 May 2009 10:03:22 +0530 (IST)
Subject: [antlr-interest] Promela grammer for antlr 3.
Message-ID: <458393.62084.qm@web95307.mail.in2.yahoo.com>

Hi,

I am working on a project in which i need to parse a program written in promela. Is there an antlr grammer for promela.

Thanks,
Kranthi Kiran Nuthi


      Now surf faster and smarter ! Check out the new Firefox 3 - Yahoo! Edition http://downloads.yahoo.com/in/firefox/?fr=om_email_firefox
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090510/9a18d619/attachment.html 

From mgawinecki at gmail.com  Sun May 10 03:16:03 2009
From: mgawinecki at gmail.com (Maciej Gawinecki)
Date: Sun, 10 May 2009 12:16:03 +0200
Subject: [antlr-interest] MySQL grammar -- can I submit?
Message-ID: <4A06A963.30308@gmail.com>

Dear all,

I've started to work on MySQL dialect of SQL grammar as I haven't found 
anything like this on the net. Unfortunately, the grammer is currently 
incomplete as I don't have time to continue the project due some 
deadlines and other projects.

I'm not sure about the quality of my solution, as I'm a newbie to ANTLR 
and this was my first project on grammars for this framework. I've 
studied context-based and context-less grammars and I've used yacc but 
it was so many years ago... Nevertheless I still would like to share 
with my partial results, to make it maybe starting point for other people.

DOES IT SOUND REASONABLE? DOES IT MAKE ANY SENSE FOR YOU, AS A COMMUNITY?

Regards,
Maciej

Technical details:
* The grammar was created on the base of yacc grammar provided in MySQL
   5.1 source distribution (particularly 'sql_yacc.yy' file). Parts of
   lexer for type casting (recognizing different integer types) I've
   adopted into Java acion also from MySQL source distribution.

* The grammar is for ANLTR v3 and contains some minor Java actions for
   collecting information about: comments (first parser pass on
   COMMENTS_CHANNEL) and identifiers of tables/columns (second pass on
   DEFAULT_CHANNEL). They can be easiliy removed.

* More complete are parts relating to CREATE TABLE section, as it was of
   my main interest.

From mmburke at gwu.edu  Sun May 10 13:13:53 2009
From: mmburke at gwu.edu (Matthew M. Burke)
Date: Sun, 10 May 2009 16:13:53 -0400
Subject: [antlr-interest] Targeting different runtimes with the
	same	grammar
In-Reply-To: <0E403A83-BBE0-4A0A-ABB4-94868D46C111@deshartman.com>
References: <70bbae280905081459s7fe45d9lb351d7c09aae00d1@mail.gmail.com>
	<0E403A83-BBE0-4A0A-ABB4-94868D46C111@deshartman.com>
Message-ID: <4A073581.8030809@gwu.edu>


On 09/05/2009, at 7:59, Chris Lambrou <chris at lambrou.net> wrote:

>
> Is there a recommended way of writing a grammar so that it can be used 
> to target different runtimes?  I'd like to be able to use the same 
> grammar to target both C# (for use in an ASP.NET server application) 
> and in JavaScript (for use by clients). The ANTLR book is filled with 
> examples of how useful it can be to embed Java code within the 
> grammar, but this couples the grammar to a specific runtime, which is 
> something I'm explicitly trying to avoid.
I haven't tried this yet, so I'm not sure if it will turn out to be 
awkward in practice, but you could "pre-process" the grammar files with 
StringTemplate to insert the appropriate, language-specific code.

Matt


From jimi at temporal-wave.com  Sun May 10 15:16:36 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun, 10 May 2009 15:16:36 -0700
Subject: [antlr-interest] MySQL grammar -- can I submit?
In-Reply-To: <4A06A963.30308@gmail.com>
References: <4A06A963.30308@gmail.com>
Message-ID: <4A075244.5050804@temporal-wave.com>

Maciej Gawinecki wrote:
> Dear all,
>
> I've started to work on MySQL dialect of SQL grammar as I haven't found 
> anything like this on the net. Unfortunately, the grammer is currently 
> incomplete as I don't have time to continue the project due some 
> deadlines and other projects.
>
>   
Hi, it looks like I may be re-writing the MySQL front end in ANTLR (C 
target, but it should be usable in other targets) shortly as this is 
something that the MySQL team feels is a good idea. So, if you hang fire 
for a while, this will happen anyway I think. This will be based on my 
commercial SQL parser:  
http://www.temporal-wave.com/index.php?option=com_psrrun&view=psrrun&Itemid=56

Jim

From avidtrober at gmail.com  Sun May 10 19:01:03 2009
From: avidtrober at gmail.com (Avid Trober)
Date: Sun, 10 May 2009 21:01:03 -0500
Subject: [antlr-interest] MySQL grammar -- can I submit?
References: <4A06A963.30308@gmail.com> <4A075244.5050804@temporal-wave.com>
Message-ID: <87FAD8F24363408083FD838806F78543@homelaptop>

isn't MySql already written w/ ANTLR?

----- Original Message ----- 
From: "Jim Idle" <jimi at temporal-wave.com>
Cc: "ANTLR Interest Mailing List" <antlr-interest at antlr.org>
Sent: Sunday, May 10, 2009 5:16 PM
Subject: Re: [antlr-interest] MySQL grammar -- can I submit?


> Maciej Gawinecki wrote:
>> Dear all,
>>
>> I've started to work on MySQL dialect of SQL grammar as I haven't found
>> anything like this on the net. Unfortunately, the grammer is currently
>> incomplete as I don't have time to continue the project due some
>> deadlines and other projects.
>>
>>
> Hi, it looks like I may be re-writing the MySQL front end in ANTLR (C
> target, but it should be usable in other targets) shortly as this is
> something that the MySQL team feels is a good idea. So, if you hang fire
> for a while, this will happen anyway I think. This will be based on my
> commercial SQL parser:
> http://www.temporal-wave.com/index.php?option=com_psrrun&view=psrrun&Itemid=56
>
> Jim
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: 
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address 


From linlin.xie at siemens.com  Mon May 11 02:19:13 2009
From: linlin.xie at siemens.com (Xie, Linlin)
Date: Mon, 11 May 2009 11:19:13 +0200
Subject: [antlr-interest] How to pass the current node to the action?
In-Reply-To: <4A05B405.1080104@temporal-wave.com>
References: <79118B9FE8CE8E49B0D71964A79CB6470249843F@dekomplm002.net.plm.eds.com><79118B9FE8CE8E49B0D71964A79CB64702498466@dekomplm002.net.plm.eds.com>
	<4A05B405.1080104@temporal-wave.com>
Message-ID: <79118B9FE8CE8E49B0D71964A79CB64702498530@dekomplm002.net.plm.eds.com>

Hi Jim,

 

Thank you very much for your reply. I tried with the .tree solution you
suggested, but got errors like "error C2440: 'type cast' :  cannot
convert from 'p_return' to 'pANTLR3_COMMON_TOKEN'." I can see that you
are trying to use the common token structure, but the way to get the
common token of current node doesn't seem to work. 

 

Is there anything I did wrong? Do you have any idea why it's not
working? Thanks again.

Linlin

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jim Idle
Sent: 09 May 2009 17:49
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] How to pass the current node to the
action?

 

Xie, Linlin wrote: 

Sorry, I didn't give a subject to my last question. Below is the
details, can anybody help me out?

 

I presume that you mean:

p: r1 r2

In which case you need to use one of:
$tree
$p.tree
$p
$r1.tree
$r2.tree

But I can't tell you which from the code you show, but you should be
able to work that out. Also, don't forget the search on the ANTLR home
page, or the Wiki

Jim

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090511/0a948d00/attachment.html 

From linlin.xie at siemens.com  Mon May 11 02:41:03 2009
From: linlin.xie at siemens.com (Xie, Linlin)
Date: Mon, 11 May 2009 11:41:03 +0200
Subject: [antlr-interest] How to pass the current node to the action?
In-Reply-To: <79118B9FE8CE8E49B0D71964A79CB64702498530@dekomplm002.net.plm.eds.com>
References: <79118B9FE8CE8E49B0D71964A79CB6470249843F@dekomplm002.net.plm.eds.com><79118B9FE8CE8E49B0D71964A79CB64702498466@dekomplm002.net.plm.eds.com><4A05B405.1080104@temporal-wave.com>
	<79118B9FE8CE8E49B0D71964A79CB64702498530@dekomplm002.net.plm.eds.com>
Message-ID: <79118B9FE8CE8E49B0D71964A79CB64702498563@dekomplm002.net.plm.eds.com>

Hi Jim,

 

The weird thing is if I use the $rule1.tree directly, the generated code
would try to convert the rule1_return structure to common token type
first, but if I assign the rule to a variable, say P: r1=Rule1 Rule2;
then using $r1.tree would be completely fine, as the generated  code
would just keep the rule1_return structure, not trying to convert it at
all.

 

Can you see why it works this way? Thanks a lot.

Linlin

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Xie, Linlin
Sent: 11 May 2009 10:19
To: Jim Idle
Cc: antlr-interest at antlr.org; Fitt, Andrew; Hamid, Nusrat
Subject: Re: [antlr-interest] How to pass the current node to the
action?

 

Hi Jim,

 

Thank you very much for your reply. I tried with the .tree solution you
suggested, but got errors like "error C2440: 'type cast' :  cannot
convert from 'p_return' to 'pANTLR3_COMMON_TOKEN'." I can see that you
are trying to use the common token structure, but the way to get the
common token of current node doesn't seem to work. 

 

Is there anything I did wrong? Do you have any idea why it's not
working? Thanks again.

Linlin

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jim Idle
Sent: 09 May 2009 17:49
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] How to pass the current node to the
action?

 

Xie, Linlin wrote: 

Sorry, I didn't give a subject to my last question. Below is the
details, can anybody help me out?

 

I presume that you mean:

p: r1 r2

In which case you need to use one of:
$tree
$p.tree
$p
$r1.tree
$r2.tree

But I can't tell you which from the code you show, but you should be
able to work that out. Also, don't forget the search on the ANTLR home
page, or the Wiki

Jim

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090511/3c7082a1/attachment.html 

From sven.van.echelpoel at empolis.com  Mon May 11 07:30:29 2009
From: sven.van.echelpoel at empolis.com (Sven Van Echelpoel)
Date: Mon, 11 May 2009 16:30:29 +0200
Subject: [antlr-interest] [C Target][3.1.1] Trying to understand the
	behavior of rules with	kleene stars
Message-ID: <1242052229.19664.24.camel@cartman>

Hi,

I'm having trouble understanding the behavior of the parser w.r.t.
invalid token in rules with Kleene star elements. I have this grammar
that says that a translation unit is zero or more rules, declarations,
etc. e.g.

translation_unit
  : ( declaration | rule )* ';'
    -> ^( UNIT rule* )     // only care about rules
  ;

Now, if a rule is followed after the semi colon by an token that is
illegal at that position, no more rules are processed. No error is
generated. Looking at the generated code, you get something like this:

for (;;)
{
  int alt2=2;
  {
    int LA2_0 = LA(1);
    if ( LA2_0 == /*some tokens expected at this position*/  )  // (1)
    {
      alt2=1;
    }


  }
  switch (alt2) 
  {
  case 1:
    /* Continue here if this was what was expected */
    break;
  default:
    goto loop2;	/* break out of the loop */                    //(2)
    break;
  }
}
loop2: ; /* Jump out to here if this rule does not match */    //(3)

In (1) the look ahead token is checked against a set of expected tokens.
There can be multiple else if branches following this too. If the token
is unexpected, the value of alt2 remains 2 and in the subsequent switch
the default case (2) is taken. This simply breaks out of the loop. After
the loop2 label processing continues as if nothing has happened (3). In
our example above, AST rewrite rules are invoked.

Note that this pattern is consistently applied every time a Kleene star
is used somewhere in a rule. If a token is unexpected at that position,
processing just stops and no error is raised. It seems to me that the
code is a bit too liberal in interpreting the zero of zero-or-more :-) ,
i.e. even zero times something expected is fine, erroneously discounting
the stuff that is unexpected. Am I right, or am I missing something?

Apologies if this is a real issue and it has already been fixed after
3.1.1. I found nothing in the bug db and have currently no time to
investigate this is a later release.

Sven




From steerr at bellsouth.net  Mon May 11 08:14:00 2009
From: steerr at bellsouth.net (Bill Steer)
Date: Mon, 11 May 2009 11:14:00 -0400
Subject: [antlr-interest] Bad first token
Message-ID: <4A0840B8.5000406@bellsouth.net>

Hello, all.  I've simplified my grammar, eliminating all of the 
non-determinisms in the lexer (I think).  When I look at the tokens 
returned from the lexer, I get the following first token:

{[@-1,0:0='<no text>',<-1>,0:-1]}

The input string to the lexer appears to be correct.  The token type is 
obviously -1 (EOF), but do the other parts indicate what the error might 
be?  Is there an obvious error I should look for?

Thanks very much for any help.

Bill



From jimi at temporal-wave.com  Mon May 11 08:51:48 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 11 May 2009 08:51:48 -0700
Subject: [antlr-interest] MySQL grammar -- can I submit?
In-Reply-To: <87FAD8F24363408083FD838806F78543@homelaptop>
References: <4A06A963.30308@gmail.com> <4A075244.5050804@temporal-wave.com>
	<87FAD8F24363408083FD838806F78543@homelaptop>
Message-ID: <4A084994.10801@temporal-wave.com>

Avid Trober wrote:
> isn't MySql already written w/ ANTLR?
No, it uses  a bison grammar right now. We are exploring the 
possibilities of using ANTLR instead :-)

Jim



From jimi at temporal-wave.com  Mon May 11 10:04:26 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 11 May 2009 10:04:26 -0700
Subject: [antlr-interest] How to pass the current node to the action?
In-Reply-To: <79118B9FE8CE8E49B0D71964A79CB64702498563@dekomplm002.net.plm.eds.com>
References: <79118B9FE8CE8E49B0D71964A79CB6470249843F@dekomplm002.net.plm.eds.com><79118B9FE8CE8E49B0D71964A79CB64702498466@dekomplm002.net.plm.eds.com><4A05B405.1080104@temporal-wave.com>
	<79118B9FE8CE8E49B0D71964A79CB64702498530@dekomplm002.net.plm.eds.com>
	<79118B9FE8CE8E49B0D71964A79CB64702498563@dekomplm002.net.plm.eds.com>
Message-ID: <4A085A9A.2030605@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090511/b878b66a/attachment.html 

From lgcraymer at yahoo.com  Mon May 11 12:03:36 2009
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Mon, 11 May 2009 12:03:36 -0700 (PDT)
Subject: [antlr-interest] [C Target][3.1.1] Trying to understand the
	behavior of rules with kleene stars
In-Reply-To: <1242052229.19664.24.camel@cartman>
References: <1242052229.19664.24.camel@cartman>
Message-ID: <581194.55232.qm@web55904.mail.re3.yahoo.com>


This is a symptom of not having an EOF at the end of your top level rule--you need to add EOF after ';'.

--Loring



----- Original Message ----
> From: Sven Van Echelpoel <sven.van.echelpoel at empolis.com>
> To: "antlr-interest at antlr.org" <antlr-interest at antlr.org>
> Sent: Monday, May 11, 2009 7:30:29 AM
> Subject: [antlr-interest] [C Target][3.1.1] Trying to understand the behavior of rules with kleene stars
> 
> Hi,
> 
> I'm having trouble understanding the behavior of the parser w.r.t.
> invalid token in rules with Kleene star elements. I have this grammar
> that says that a translation unit is zero or more rules, declarations,
> etc. e.g.
> 
> translation_unit
> ? : ( declaration | rule )* ';'
> ? ? -> ^( UNIT rule* )? ? // only care about rules
> ? ;
> 
> Now, if a rule is followed after the semi colon by an token that is
> illegal at that position, no more rules are processed. No error is
> generated. Looking at the generated code, you get something like this:
> 
> for (;;)
> {
> ? int alt2=2;
> ? {
> ? ? int LA2_0 = LA(1);
> ? ? if ( LA2_0 == /*some tokens expected at this position*/? )? // (1)
> ? ? {
> ? ? ? alt2=1;
> ? ? }
> 
> 
> ? }
> ? switch (alt2) 
> ? {
> ? case 1:
> ? ? /* Continue here if this was what was expected */
> ? ? break;
> ? default:
> ? ? goto loop2;??? /* break out of the loop */? ? ? ? ? ? ? ? ? ? //(2)
> ? ? break;
> ? }
> }
> loop2: ; /* Jump out to here if this rule does not match */? ? //(3)
> 
> In (1) the look ahead token is checked against a set of expected tokens.
> There can be multiple else if branches following this too. If the token
> is unexpected, the value of alt2 remains 2 and in the subsequent switch
> the default case (2) is taken. This simply breaks out of the loop. After
> the loop2 label processing continues as if nothing has happened (3). In
> our example above, AST rewrite rules are invoked.
> 
> Note that this pattern is consistently applied every time a Kleene star
> is used somewhere in a rule. If a token is unexpected at that position,
> processing just stops and no error is raised. It seems to me that the
> code is a bit too liberal in interpreting the zero of zero-or-more :-) ,
> i.e. even zero times something expected is fine, erroneously discounting
> the stuff that is unexpected. Am I right, or am I missing something?
> 
> Apologies if this is a real issue and it has already been fixed after
> 3.1.1. I found nothing in the bug db and have currently no time to
> investigate this is a later release.
> 
> Sven
> 
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: 
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address



      

From marwan.alephn at gmail.com  Mon May 11 15:33:00 2009
From: marwan.alephn at gmail.com (Marwan Ajraoui)
Date: Tue, 12 May 2009 00:33:00 +0200
Subject: [antlr-interest] cannot find tokens file <unset-dir>/file.tokens
Message-ID: <6535fcb50905111533u4be5f0a9p475a2f917f73a04e@mail.gmail.com>

Hi there;

I'm getting this error: cannot find tokens file
<unset-dir>/file.tokens. I 've got the file .tokens in the same
directory of the my ".g". Where does Antlr look for the file token. Do
I need to set up enviremont variable ANTLR_home? Because I simply run
org.antlr.Tool passing the file as an argument.

Many Thanks,
-- 
Marouane

From Mark.Rosen at citadelgroup.com  Mon May 11 16:23:02 2009
From: Mark.Rosen at citadelgroup.com (Rosen, Mark)
Date: Mon, 11 May 2009 18:23:02 -0500
Subject: [antlr-interest] Defining a custom AST in the C target of ANTLR 3
Message-ID: <A63A84F123D49540A44A72183A594E373420462443@CHMSG03.citadelgroup.com>

Is there any example code on how to define your own AST subclass in C/C++ using ANTLR 3.0? I was able to find some for ANTLR 2.x, but none for ANTLR 3.0. I know that you need to specify the AST type name in ASTLabelType, but 1) do you need to register it with some kind of factory, and 2) which class/struct exactly do you derive from?

Thanks,

- Mark

________________________________

CONFIDENTIALITY AND SECURITY NOTICE

The contents of this message and any attachments may be confidential and proprietary and also may be covered by the Electronic Communications Privacy Act. This message is not intended to be used by, and should not be relied upon in any way, by any third party. If you are not an intended recipient, please inform the sender of the transmission error and delete this message immediately without reading, disseminating, distributing or copying the contents. Citadel makes no assurances that this e-mail and any attachments are free of viruses and other harmful code.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090511/f810315c/attachment.html 

From claco at chrislaco.com  Mon May 11 17:15:31 2009
From: claco at chrislaco.com (Christopher Laco)
Date: Mon, 11 May 2009 20:15:31 -0400
Subject: [antlr-interest] ToStringTree
Message-ID: <4A08BFA3.2040701@chrislaco.com>

Is there a quick and dirty way to print out the tree with tabs/line
feeds to make it a little more readable using the C# runtime?

-=Chris

From claco at chrislaco.com  Mon May 11 19:20:25 2009
From: claco at chrislaco.com (Christopher Laco)
Date: Mon, 11 May 2009 22:20:25 -0400
Subject: [antlr-interest] What does this error mean in english?
Message-ID: <4A08DCE9.5060107@chrislaco.com>

"mismatched tree node: DOCUMENT expecting DOCUMENT"


I'm not having very good luck trying to do simple things apparently.

My ToStringTree:


    (DOCUMENT (PRINT 'variable'))


My tree grammar:


  document

: ^(DOCUMENT statement*)

;

  statement

: ^(PRINT LITERAL)

;

From steve at hibernate.org  Mon May 11 19:28:15 2009
From: steve at hibernate.org (Steve Ebersole)
Date: Mon, 11 May 2009 21:28:15 -0500
Subject: [antlr-interest] ToStringTree
In-Reply-To: <4A08BFA3.2040701@chrislaco.com>
References: <4A08BFA3.2040701@chrislaco.com>
Message-ID: <1242095295.4296.83.camel@localhost.localdomain>

We wrote this one for Hibernate that I love.  Not overly complex, should
be easy to port the code I would think...

http://viewvc.jboss.org/cgi-bin/viewvc.cgi/hibernate/core/branches/antlr3/src/main/java/org/hibernate/sql/ast/util/TreePrinter.java?revision=16467&view=markup

On Mon, 2009-05-11 at 20:15 -0400, Christopher Laco wrote:
> Is there a quick and dirty way to print out the tree with tabs/line
> feeds to make it a little more readable using the C# runtime?
> 
> -=Chris
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
-- 
Steve Ebersole <steve at hibernate.org>
Hibernate.org


From recluze at gmail.com  Mon May 11 23:35:29 2009
From: recluze at gmail.com (Nauman)
Date: Tue, 12 May 2009 11:35:29 +0500
Subject: [antlr-interest] Problem with AST parsing for ST
Message-ID: <179887f50905112335g7a73bf00x6efe4f7f85d7eaf2@mail.gmail.com>

Hi all,

I'm trying to parse a high level policy and generate a low-level structured
text.

The grammar rule for policy set and policy are:

policyset
        (policy)+
        -> ^(POLICYSET  policy+);

and

policy    : policyType^ LBRAC! targetType RBRAC!
            LBRACE!
            conditionStat?
            RBRACE!
            ->  ^(POLICY targetType conditionStat)

The generated tree look like this:

(POLICYSET (POLICY (SUBJECTS Doctor) (OBJECTS PatientRecord) (RIGHTS Read)
(CONDITION (and (= (. PatientRecord Appointment) True) (< (. Doctor
NoOfTimesRead) 5)))))

The rule for policyset in the tree grammar is as follows:

policyset:  ^(POLICYSET  (p+=policy)+) -> policySet(policies={p}) ;

and policy looks like this:

policy: conditionStat
     -> policyStat(cond={$conditionStat.st})
    ;

I guess everything else is irrelevent for the time being because of the
error that I get for parsing it:

E:\workspace\transtest\src\EvalPolicy.g: node from line 0:0 mismatched tree
node: POLICYSET expecting POLICYSET

Can anyone help me out with what's wrong here. I really have no idea what
could be wrong. I've tried many tutorials/helps/docs but without any
success.

Thanks

Nauman

Research Associate
Security Engineering Research Group
Institute of Management Sciences
Peshawar, Pakistan

Blog: http://recluze.wordpress.com
Group: http://serg.imsciences.edu.pk
Wiki: http://serg.imsciences.edu.pk/wiki
Art gallery: http://recluse.gfxartist.com

Contact number: +92 (0) 323 93 66 136
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090512/b769e28d/attachment.html 

From sven.van.echelpoel at empolis.com  Tue May 12 00:41:30 2009
From: sven.van.echelpoel at empolis.com (Sven Van Echelpoel)
Date: Tue, 12 May 2009 09:41:30 +0200
Subject: [antlr-interest] [C Target][3.1.1] Trying to understand
	the	behavior of rules with kleene stars
In-Reply-To: <581194.55232.qm@web55904.mail.re3.yahoo.com>
References: <1242052229.19664.24.camel@cartman>
	<581194.55232.qm@web55904.mail.re3.yahoo.com>
Message-ID: <1242114090.6498.17.camel@cartman>

On Mon, 2009-05-11 at 12:03 -0700, Loring Craymer wrote:
> This is a symptom of not having an EOF at the end of your top level rule--you need to add EOF after ';'.
> 
I'm sorry, but I don't exactly understand what you mean here. I don't
think I have ever seen this mentioned before, but I may have overlooked
it for sure. Do you mean that I have to explicitly add an EOF token at
the end of the top-level rule? Like so (The rule is slightly different
from before, as I now see that it is not what I have in reality):

translation_unit
  : ( ( declaration | rule )* ';' ) EOF  // <-- Add it here?
    -> ^( UNIT rule* )
  ;

Sven

> --Loring
> 
> 
> 
> ----- Original Message ----
> > From: Sven Van Echelpoel <sven.van.echelpoel at empolis.com>
> > To: "antlr-interest at antlr.org" <antlr-interest at antlr.org>
> > Sent: Monday, May 11, 2009 7:30:29 AM
> > Subject: [antlr-interest] [C Target][3.1.1] Trying to understand the behavior of rules with kleene stars
> > 
> > Hi,
> > 
> > I'm having trouble understanding the behavior of the parser w.r.t.
> > invalid token in rules with Kleene star elements. I have this grammar
> > that says that a translation unit is zero or more rules, declarations,
> > etc. e.g.
> > 
> > translation_unit
> >   : ( declaration | rule )* ';'
> >     -> ^( UNIT rule* )    // only care about rules
> >   ;
> > 
> > Now, if a rule is followed after the semi colon by an token that is
> > illegal at that position, no more rules are processed. No error is
> > generated. Looking at the generated code, you get something like this:
> > 
> > for (;;)
> > {
> >   int alt2=2;
> >   {
> >     int LA2_0 = LA(1);
> >     if ( LA2_0 == /*some tokens expected at this position*/  )  // (1)
> >     {
> >       alt2=1;
> >     }
> > 
> > 
> >   }
> >   switch (alt2) 
> >   {
> >   case 1:
> >     /* Continue here if this was what was expected */
> >     break;
> >   default:
> >     goto loop2;    /* break out of the loop */                    //(2)
> >     break;
> >   }
> > }
> > loop2: ; /* Jump out to here if this rule does not match */    //(3)
> > 
> > In (1) the look ahead token is checked against a set of expected tokens.
> > There can be multiple else if branches following this too. If the token
> > is unexpected, the value of alt2 remains 2 and in the subsequent switch
> > the default case (2) is taken. This simply breaks out of the loop. After
> > the loop2 label processing continues as if nothing has happened (3). In
> > our example above, AST rewrite rules are invoked.
> > 
> > Note that this pattern is consistently applied every time a Kleene star
> > is used somewhere in a rule. If a token is unexpected at that position,
> > processing just stops and no error is raised. It seems to me that the
> > code is a bit too liberal in interpreting the zero of zero-or-more :-) ,
> > i.e. even zero times something expected is fine, erroneously discounting
> > the stuff that is unexpected. Am I right, or am I missing something?
> > 
> > Apologies if this is a real issue and it has already been fixed after
> > 3.1.1. I found nothing in the bug db and have currently no time to
> > investigate this is a later release.
> > 
> > Sven
> > 
> > 
> > 
> > 
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: 
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
> 
> 
>       


From tobias.wunner at gmail.com  Tue May 12 00:42:25 2009
From: tobias.wunner at gmail.com (Tobias Wunner)
Date: Tue, 12 May 2009 09:42:25 +0200
Subject: [antlr-interest] simple return value problem
Message-ID: <4CB7FBC9-E488-4262-9572-ABFF7700574A@gmail.com>

Hello,

still new ANTLR I ran into a simple return value problem. I would like  
to parse a token sequence and return the matched string.

For example I would like to match the characters "hello" in  "11 hello  
22" and return it as a string. I used $var.getText() and matched with  
something like var=CHAR+.

Unfortunately I was only able to retrieve the last character e.g. "o"  
in "hello"

My full code is attached below.

For any help I would be very thankful.

Toby

sample input:		MYTYPES: name1, name2
sample output:		Type = S
					  param = 1
					  param = 2

grammar parse;

@members {
String type;
ArrayList<String> list = new ArrayList<String>();
}

in		:  typeExpression
		{
		  System.out.println("Type = "+type);
		  for(String p:list) {
		    System.out.println(" param = "+p);
		  }
		};
typeExpression  :  '@' var=(CHAR|DIGIT)+ ':' DELIM* param (DELIM* ','  
DELIM* param)*
		{
		   type=$var.getText();
		};
param		:  var=(CHAR|DIGIT)+
		{
		  list.add($var.getText());
		}
		;

CHAR	:	'a'..'z';
DIGIT	:	'0'..'9';
DELIM	:	' '|'\t'|'\n';

From micha-1 at fantasymail.de  Tue May 12 01:07:53 2009
From: micha-1 at fantasymail.de (Michael)
Date: Tue, 12 May 2009 10:07:53 +0200
Subject: [antlr-interest] Problem with AST parsing for ST
In-Reply-To: <179887f50905112335g7a73bf00x6efe4f7f85d7eaf2@mail.gmail.com>
References: <179887f50905112335g7a73bf00x6efe4f7f85d7eaf2@mail.gmail.com>
Message-ID: <200905121007.53765.micha-1@fantasymail.de>

Am Tuesday 12 May 2009 08:35:29 schrieb Nauman:
> Hi all,
>
> I'm trying to parse a high level policy and generate a low-level structured
> text.
>
> The grammar rule for policy set and policy are:
>
> policyset
>         (policy)+
>         -> ^(POLICYSET  policy+);
>
> and
>
> policy    : policyType^ LBRAC! targetType RBRAC!
>             LBRACE!
>             conditionStat?
>             RBRACE!
>             ->  ^(POLICY targetType conditionStat)
>
> The generated tree look like this:
>
> (POLICYSET (POLICY (SUBJECTS Doctor) (OBJECTS PatientRecord) (RIGHTS Read)
> (CONDITION (and (= (. PatientRecord Appointment) True) (< (. Doctor
> NoOfTimesRead) 5)))))
>
> The rule for policyset in the tree grammar is as follows:
>
> policyset:  ^(POLICYSET  (p+=policy)+) -> policySet(policies={p}) ;
>
> and policy looks like this:
>
> policy: conditionStat
>      -> policyStat(cond={$conditionStat.st})
>     ;

should the policy rule in the tree grammar match the generated tree?, like:

policy: ^(POLICY targetType conditionStat) ->
	policyStat(cond={$conditionStat.st})


cheers,
 Michael

From micha-1 at fantasymail.de  Tue May 12 01:24:55 2009
From: micha-1 at fantasymail.de (Michael)
Date: Tue, 12 May 2009 10:24:55 +0200
Subject: [antlr-interest] simple return value problem
In-Reply-To: <4CB7FBC9-E488-4262-9572-ABFF7700574A@gmail.com>
References: <4CB7FBC9-E488-4262-9572-ABFF7700574A@gmail.com>
Message-ID: <200905121024.55903.micha-1@fantasymail.de>

Am Tuesday 12 May 2009 09:42:25 schrieb Tobias Wunner:
> Hello,
>
> still new ANTLR I ran into a simple return value problem. I would like
> to parse a token sequence and return the matched string.

often it's simpler to let the lexer do the token foo and the parser do the 
checking of the syntax of the tokens.
You can also skip whitespace in the lexer.

That's my idea (not tested):

fragment
CHAR	:	'a'..'z';
fragment
DIGIT	:	'0'..'9';
fragment
DELIM		(' '|'\t'|'\n')+;

TOKEN: (CHAR|DIGIT)+ ;


in: typeExpression EOF { print(...) };

typeExpression: '@' v=TOKEN ':' DELIM? param (',' DELIM? param)*  { type = 
$v.text; };

param: TOKEN DELIM? { list.add($TOKEN.text); } ;


 Michael


From recluze at gmail.com  Tue May 12 06:22:14 2009
From: recluze at gmail.com (Nauman)
Date: Tue, 12 May 2009 18:22:14 +0500
Subject: [antlr-interest] Problem with AST parsing for ST
In-Reply-To: <200905121007.53765.micha-1@fantasymail.de>
References: <179887f50905112335g7a73bf00x6efe4f7f85d7eaf2@mail.gmail.com> 
	<200905121007.53765.micha-1@fantasymail.de>
Message-ID: <179887f50905120622hc1ddabbpa30bceaa2a5a6ad9@mail.gmail.com>

Thanks a lot Michael. That was the problem. Now that I know it, I can't see
how I could've missed it!

On Tue, May 12, 2009 at 1:07 PM, Michael <micha-1 at fantasymail.de> wrote:

> Am Tuesday 12 May 2009 08:35:29 schrieb Nauman:
> > Hi all,
> >
> > I'm trying to parse a high level policy and generate a low-level
> structured
> > text.
> >
> > The grammar rule for policy set and policy are:
> >
> > policyset
> >         (policy)+
> >         -> ^(POLICYSET  policy+);
> >
> > and
> >
> > policy    : policyType^ LBRAC! targetType RBRAC!
> >             LBRACE!
> >             conditionStat?
> >             RBRACE!
> >             ->  ^(POLICY targetType conditionStat)
> >
> > The generated tree look like this:
> >
> > (POLICYSET (POLICY (SUBJECTS Doctor) (OBJECTS PatientRecord) (RIGHTS
> Read)
> > (CONDITION (and (= (. PatientRecord Appointment) True) (< (. Doctor
> > NoOfTimesRead) 5)))))
> >
> > The rule for policyset in the tree grammar is as follows:
> >
> > policyset:  ^(POLICYSET  (p+=policy)+) -> policySet(policies={p}) ;
> >
> > and policy looks like this:
> >
> > policy: conditionStat
> >      -> policyStat(cond={$conditionStat.st})
> >     ;
>
> should the policy rule in the tree grammar match the generated tree?, like:
>
> policy: ^(POLICY targetType conditionStat) ->
>        policyStat(cond={$conditionStat.st})
>
>
> cheers,
>  Michael
>



-- 
Nauman

Research Associate
Security Engineering Research Group
Institute of Management Sciences
Peshawar, Pakistan

Blog: http://recluze.wordpress.com
Group: http://serg.imsciences.edu.pk
Wiki: http://serg.imsciences.edu.pk/wiki
Art gallery: http://recluse.gfxartist.com

Contact number: +92 (0) 323 93 66 136
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090512/ceefc1e9/attachment.html 

From iztok.kavkler at fmf.uni-lj.si  Tue May 12 07:16:37 2009
From: iztok.kavkler at fmf.uni-lj.si (Iztok Kavkler)
Date: Tue, 12 May 2009 16:16:37 +0200
Subject: [antlr-interest] cannot find tokens file <unset-dir>/file.tokens
In-Reply-To: <6535fcb50905111533u4be5f0a9p475a2f917f73a04e@mail.gmail.com>
References: <6535fcb50905111533u4be5f0a9p475a2f917f73a04e@mail.gmail.com>
Message-ID: <4A0984C5.6020801@fmf.uni-lj.si>

By default, it will look in the current working directory (which is the 
directory from where you started antlr, not the directory of .g file). 
To look for .token files in other directories, use "-lib dir" option.

> Hi there;
> 
> I'm getting this error: cannot find tokens file
> <unset-dir>/file.tokens. I 've got the file .tokens in the same
> directory of the my ".g". Where does Antlr look for the file token. Do
> I need to set up enviremont variable ANTLR_home? Because I simply run
> org.antlr.Tool passing the file as an argument.
> 
> Many Thanks,


From jimi at temporal-wave.com  Tue May 12 08:00:32 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 12 May 2009 08:00:32 -0700
Subject: [antlr-interest] What does this error mean in english?
In-Reply-To: <4A08DCE9.5060107@chrislaco.com>
References: <4A08DCE9.5060107@chrislaco.com>
Message-ID: <4A098F10.5020409@temporal-wave.com>

Christopher Laco wrote:
> "mismatched tree node: DOCUMENT expecting DOCUMENT"
>
>
> I'm not having very good luck trying to do simple things apparently.
>
> My ToStringTree:
>
>
>     (DOCUMENT (PRINT 'variable'))
>
>
> My tree grammar:
>
>
>   document
>
> : ^(DOCUMENT statement*)
>
> ;
>
>   statement
>
> : ^(PRINT LITERAL)
>
> ;
>
>   
Sounds like your tokens are out of sync. Regen your lexer/parser, then 
regen your tree walker. The token definitions will then be in sync and 
you will at least know that that was or was not the issue.

Jim

From johan at sikanda.be  Tue May 12 08:22:32 2009
From: johan at sikanda.be (Johan Cockx)
Date: Tue, 12 May 2009 17:22:32 +0200
Subject: [antlr-interest] Advice on using Antlr in Eclipse
Message-ID: <dc07c6b0905120822t27d3f306xc3f5152e58f5fd40@mail.gmail.com>

Hello,

I need to use Antlr from the Eclipse IDE (under Windows XP) and I am trying
to figure out what the best approach is.

There seem to be at least three Eclipse plug-ins for Antlr:

1. AntlrEclipse ( http://antlreclipse.sourceforge.net/ )

2. AntlrDT ( http://www.certiv.net/downloads/antlrdtdownload.html )

3. Antlr IDE

I may have missed some,  but three seems more than enough for anyone.

My first goal is very basic: I want to integrate Antlr in the Eclipse build
process.  I did not look at the extra featues yet.

 AntlrEclipse is no longer supported,  and I was not able to install the
other two.  Details below.

All advice is welcome.

*1. AntlrEclipse*

This can be installed by following the procedure at
http://antlreclipse.sourceforge.net/ .

I have tried all three with the SimpleCalc example from
http://www.antlr.org/wiki/display/ANTLR3/Five+minute+introduction+to+ANTLR+3.


There are three errors,  the first one on the first line of the grammar
("grammar SimpleCalc;"): it says "Unexpected token: grammar".  The weird
thing is that this error persists even when I completely remove the first
line and do a clean build (Project>clean...  ).

The problem is that the most recent version of Antlr Eclipse (4.1.1) uses an
old version of Antlr (2.7.6) that does not have a "grammar" keyword.  The
last update of AntlrEclipse seem to date from 2006 and the project doesn't
seem to be actively maintained anymore.

*2. AntlrDT*

This seems to be actively maintained;  the most recent version is only three
days old at the time of writing.  It is developed by Certiv Analytics (
http://www.certiv.net).

*Installation*

I was not able to succesfully install AntlrDT.  This is what I did:

I started from a freshly downloaded Eclipse Classic
3.4.2<http://www.eclipse.org/downloads/download.php?file=/eclipse/downloads/drops/R-3.4.2-200902111700/eclipse-SDK-3.4.2-win32.zip>
.

Then I loaded DLTK (Dynamic Languages Toolkit) which is required by
AntlrDT.  I installed it by doing Help -> Software Updates, then selecting
Ganymede -> Enabling Features, then selecting Dynamic Languages Toolkit -
Core Frameworks. The most recent version is currently 0.95.1.  This adds a
"Dynamic Languages" entry to the Eclipse Preferences.

Another requirement mentioned by Certiv Analytics is Zest Visualization
Toolkit 1.0.  Is this needed and where can I find it?

I could not find an update site to install AntlrDT itself through Eclipse's
software update mechanism,  so I tried a manual install.  I downloaded
certiv-antlrdt-0.8.0.zip from the certiv website and unzipped it.  It
contains a plugin folder with a number of jar files.  I copied all the jar
files to the plugin folder of my Eclipse installation and restarted Eclipse.

Nothing changed.  There was no AntlrDT entry in the Eclipse Preferences
menu.  Does manual plugin installation require any additional actions?  I am
not an Eclipse expert and I have no clue what went wrong.

Btw,  I also tried AntlrDT version 0.7.0 with the same (=no) result.

I sent a mail to support at certiv.net for help and I am waiting for a reply.

*3. Antlr IDE*

This also seems to be actively developed;  version 1.3.1 was released on
2009-04-06.

I tried to install it via the Eclipse Update Manager from
http://antlrv3ide.sourceforge.net/updates but got the following error: "An
error ocurred while collecting items to be installed: No repository found
containing org.eclipse.draw2d/osgi.bundle/3.4.1.v20080910-1351".
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090512/7cb8a1bb/attachment.html 

From gerald at certiv.net  Tue May 12 08:41:56 2009
From: gerald at certiv.net (Gerald Rosenberg)
Date: Tue, 12 May 2009 08:41:56 -0700
Subject: [antlr-interest] Advice on using Antlr in Eclipse
In-Reply-To: <dc07c6b0905120822t27d3f306xc3f5152e58f5fd40@mail.gmail.com
 >
References: <dc07c6b0905120822t27d3f306xc3f5152e58f5fd40@mail.gmail.com>
Message-ID: <200905121542.n4CFg30A026321@zinc.newtechlaw.com>

At 08:22 AM 5/12/2009, Johan Cockx wrote:

>2. AntlrDT
>
>I sent a mail to <mailto:support at certiv.net>support at certiv.net for 
>help and I am waiting for a reply.

Already answered - most likely, you just need to install Zest to 
complete the installation.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090512/065449d7/attachment.html 

From steerr at bellsouth.net  Tue May 12 09:08:49 2009
From: steerr at bellsouth.net (Bill Steer)
Date: Tue, 12 May 2009 12:08:49 -0400
Subject: [antlr-interest] Position of 'scope' delcaration
Message-ID: <4A099F11.5070001@bellsouth.net>

The book says, at the bottom of page 143, "Simply define a named scope 
outside any rule."  If I put a named scope just before the first rule, I 
get an error "unexpected token: scope" when generating code.  Where 
should the 'scope' statement appear in the .g file?

Thanks.

Bill


From info at wolfram-bernhardt.de  Tue May 12 09:59:09 2009
From: info at wolfram-bernhardt.de (Wolfram Bernhardt)
Date: Tue, 12 May 2009 18:59:09 +0200
Subject: [antlr-interest] C# grammar for ANTRL3
Message-ID: <4A09AADD.7030303@wolfram-bernhardt.de>

Hi!

Has anyone recently done a working antlr3-grammar to parse C#-files?

There are some on the antlr web-site, but they seem to be for older
version of antlr and I doesn't seem too easy to make them work...


Thanks,
    Wolfram

         


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 250 bytes
Desc: OpenPGP digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090512/8c56ca00/attachment.bin 

From dhjdhj at gmail.com  Tue May 12 10:17:57 2009
From: dhjdhj at gmail.com (dhjdhj)
Date: Tue, 12 May 2009 13:17:57 -0400
Subject: [antlr-interest] Rewrite rules with context-sensitive values
Message-ID: <41D367A9-C14C-4CDC-9E1D-1757BB56FDA2@gmail.com>

Below is a partial (pretty standard, I  would assume) grammar that  
creates a tree representing a boolean comparison.   The TAttributeType  
is essentially a constant that represents the type of the found  
expressions, e.g, TAttributeType.atString, TAttributeType.atInteger,  
TAttributeType.atBoolean

If you feed it      a = b   you will get back   (EQ a b)   as expected  
and obviously if a and b are actually expressions, you get the  
appropriately nested subtrees

However, I need to capture the TYPE information so that I can generate  
a tree that looks something like
      (EQ atInteger a b)
or

     (EQ atString a b)

so that I can generate the correct code from the tree.

I suspect I need to use rewrite rules to do this but I have not been  
able to figure out how to include context-sensitive information in the  
rewrite rule

How is this problem normally handled?

Thanks,
David

------------------------------------------------------------




expression returns [TAttributeType type]
                 :
                 optionalSign
                 lhs = simpleExpression
                    {
                       $type = $lhs.type;
                    }
                    (
                     (comparisonOperator^ rhs = simpleExpression)	
                     {
                        $type =  
TErrorHandling.Compatible($comparisonOperator.tree.token,  
$comparisonOperator.token, $lhs.type, $rhs.type);
                     }
                    )* 	
	        ;





comparisonOperator returns [int token]
               : EQ { $token = EQ; }
               | NE { $token = NE; }
               | LT { $token = LT; }
               | LE { $token = LE; }
               | GT { $token = GT; }
               | GE { $token = GE; }
	      ;	

From jimi at temporal-wave.com  Tue May 12 10:38:39 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 12 May 2009 10:38:39 -0700
Subject: [antlr-interest] C# grammar for ANTRL3
In-Reply-To: <4A09AADD.7030303@wolfram-bernhardt.de>
References: <4A09AADD.7030303@wolfram-bernhardt.de>
Message-ID: <4A09B41F.8040701@temporal-wave.com>

Wolfram Bernhardt wrote:
> Hi!
>
> Has anyone recently done a working antlr3-grammar to parse C#-files?
>
> There are some on the antlr web-site, but they seem to be for older
> version of antlr and I doesn't seem too easy to make them work...
>   
I have a commercial version that you can try here:

http://www.temporal-wave.com/index.php?option=com_psrrun&view=psrrun&Itemid=58

Though this won't help you if you are doing something that does not 
justify purchasing something of course.

Jim

From wotker at rambler.ru  Tue May 12 14:42:29 2009
From: wotker at rambler.ru (Yurushkin Michael)
Date: Wed, 13 May 2009 01:42:29 +0400
Subject: [antlr-interest] literal has no associated lexer rule...
Message-ID: <op.utt6k4nj7sdz0f@comp0>

Good day!
I use Antlr 3.
There are 2 grammar files (lexer and parser). Lexer contains tokens  
definitions and parser imports tokens tabel.
Is it possible to avoid definition of all literals (such as '+', '-'  
etc)...

I want to write such rules in parser:
"expr	:	(expr '+' factor) | (expr '-' factor) | factor;"

but the "literal has no associated lexer rule: '+'" error appears.

Best regards,
Michael

From jimi at temporal-wave.com  Tue May 12 14:45:11 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 12 May 2009 14:45:11 -0700
Subject: [antlr-interest] literal has no associated lexer rule...
In-Reply-To: <op.utt6k4nj7sdz0f@comp0>
References: <op.utt6k4nj7sdz0f@comp0>
Message-ID: <4A09EDE7.7030708@temporal-wave.com>

Yurushkin Michael wrote:
> Good day!
> I use Antlr 3.
> There are 2 grammar files (lexer and parser). Lexer contains tokens  
> definitions and parser imports tokens tabel.
> Is it possible to avoid definition of all literals (such as '+', '-'  
> etc)...
>
> I want to write such rules in parser:
> "expr	:	(expr '+' factor) | (expr '-' factor) | factor;"
>
> but the "literal has no associated lexer rule: '+'" error appears.
>   
No, you need to define the literals in the lexer and use tokens rather 
than literals in the parser. When you come to print error messages and 
so on, you wil likely want this anyway.

Jim

From marwan.alephn at gmail.com  Tue May 12 16:09:38 2009
From: marwan.alephn at gmail.com (Marwan Ajraoui)
Date: Wed, 13 May 2009 01:09:38 +0200
Subject: [antlr-interest] cannot find tokens file <unset-dir>/file.tokens
In-Reply-To: <4A0984C5.6020801@fmf.uni-lj.si>
References: <6535fcb50905111533u4be5f0a9p475a2f917f73a04e@mail.gmail.com>
	<4A0984C5.6020801@fmf.uni-lj.si>
Message-ID: <6535fcb50905121609w58d85e5ey2f2b55a36799a79d@mail.gmail.com>

Thanks a lot for ur help;

I'm using eclipse I did run a configuration of org.antlr.Tool passing
as an argument ${file_prompt} and "-lib dir" <my .g directory>, didn't
work.

I ' ve also tried to put the token in the same directory then Tool, in
vain. So I've debug source code till i found where it does set the
name of the file .Token; I changed some code there and it works now.

Seems that there is a bug, when you don't specify  "-lib dir" option,
Seems that the name file that the source code compose is not correct.
Were u able to run it?

 cheers



2009/5/12 Iztok Kavkler <iztok.kavkler at fmf.uni-lj.si>:
> By default, it will look in the current working directory (which is the
> directory from where you started antlr, not the directory of .g file). To
> look for .token files in other directories, use "-lib dir" option.
>
>> Hi there;
>>
>> I'm getting this error: cannot find tokens file
>> <unset-dir>/file.tokens. I 've got the file .tokens in the same
>> directory of the my ".g". Where does Antlr look for the file token. Do
>> I need to set up enviremont variable ANTLR_home? Because I simply run
>> org.antlr.Tool passing the file as an argument.
>>
>> Many Thanks,
>
>



-- 
Marouane

From r.bharath at huawei.com  Tue May 12 22:43:06 2009
From: r.bharath at huawei.com (Bharath R)
Date: Wed, 13 May 2009 11:13:06 +0530
Subject: [antlr-interest] Ambiguities or resolving the rules
Message-ID: <007901c9d38d$b12cc300$2001120a@china.huawei.com>

Hi All ,, Good morning. 
I m very new to ANTLR , I m facing a below problme like the second rule is
getting matched with the first rule and its not able to be parsed. 
 
This is my grammar 
 
grammar tel;
 
TEL : T E L COLON ; 
COLON : ':';
fragment T : ('t'|'T');
fragment E : ('e'|'E');
fragment L : ('l'|'L');
URI : TEL (parameter)*;
parameter : pname '=' pvalue ;
pname:ALPHA;
pvalue=ALPHA;
 
 
Now when I pass the value as "tel:airtel=provider" then the parser
validation fails, 
 
The exception got in " Mismatch character "=" expected ";"  " , this is like
for the input "tel:airtel=provider" the stream "tel" is taken and validated
for the rule "TEL"
But its expected to alphabets. 
 
 
Pls give ur suggestion on this.
 
Thanx a lot for reading this. 
Bharath R 
 
HUAWEI TECHNOLOGIES CO.,LTD. huawei_logo 


Address: Huawei Industrial Base
Bantian Longgang
Shenzhen 518129, P.R.China
www.huawei.com
----------------------------------------------------------------------------
---------------------------------------------------------
This e-mail and its attachments contain confidential information from
HUAWEI, which 
is intended only for the person or entity whose address is listed above. Any
use of the 
information contained herein in any way (including, but not limited to,
total or partial 
disclosure, reproduction, or dissemination) by persons other than the
intended 
recipient(s) is prohibited. If you receive this e-mail in error, please
notify the sender by 
phone or email immediately and delete it!

 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090513/c493f6fd/attachment.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: outlook_huawei_logo_en.jpg
Type: image/jpeg
Size: 6737 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090513/c493f6fd/attachment.jpg 

From wotker at rambler.ru  Wed May 13 00:17:03 2009
From: wotker at rambler.ru (Yurushkin Michael)
Date: Wed, 13 May 2009 11:17:03 +0400
Subject: [antlr-interest] literal has no associated lexer rule...
In-Reply-To: <4A09EDE7.7030708@temporal-wave.com>
References: <op.utt6k4nj7sdz0f@comp0> <4A09EDE7.7030708@temporal-wave.com>
Message-ID: <op.utuw6p2j7sdz0f@comp0>

Thanks!

Jim Idle <jimi at temporal-wave.com> ?????(?) ? ????? ?????? Wed, 13 May 2009  
01:45:11 +0400:

> Yurushkin Michael wrote:
>> Good day!
>> I use Antlr 3.
>> There are 2 grammar files (lexer and parser). Lexer contains tokens
>> definitions and parser imports tokens tabel.
>> Is it possible to avoid definition of all literals (such as '+', '-'
>> etc)...
>>
>> I want to write such rules in parser:
>> "expr	:	(expr '+' factor) | (expr '-' factor) | factor;"
>>
>> but the "literal has no associated lexer rule: '+'" error appears.
>>
> No, you need to define the literals in the lexer and use tokens rather
> than literals in the parser. When you come to print error messages and
> so on, you wil likely want this anyway.
>
> Jim
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:  
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
> __________ ?????????? ?? ESET Smart Security, ?????? ???? ??????  
> ???????? ??????? 4069 (20090512) __________
>
> ????????? ????????? ?????????? ESET Smart Security.
>
> http://www.esetnod32.ru
>
>
>



-- 
???????? ? ???????? ??????? ???????? Opera: http://www.opera.com/mail/

From marcinosullivan at gmail.com  Wed May 13 01:03:23 2009
From: marcinosullivan at gmail.com (barry osullivan)
Date: Wed, 13 May 2009 09:03:23 +0100
Subject: [antlr-interest] SQL grammar
In-Reply-To: <2389d7320905120345v2e685679vf779b679c06e04b1@mail.gmail.com>
References: <mailman.10317.1242124941.3110.antlr-dev@antlr.org>
	<2389d7320905120345v2e685679vf779b679c06e04b1@mail.gmail.com>
Message-ID: <2389d7320905130103o41d9eaf9qbeaa2cde94cfc37f@mail.gmail.com>

Hi,

Could anybody help me with writing a grammar that does the following:

Parsing values that are present after VALUES key world in the INSERT INTO
Table(column1,...) VALUES(value1,...);

A value1 might have 3 different form:

   1.    DEFAULT  (any string, e.g. USER, CURRENT SQLID)
   2.     NULL (e.g. INSERT INTO Table(column1,column2) VALUES(NULL,NULL);
   3.     expressions

    Operators (|| , /, + , -, *) might be used with expressions (they are
optional)

a.       scalar

o    date: SYSDATE, CURRENT DATE

o    string: 'a ' b'

o    number: 6.2

o    column name: column1

b.       Labeled durations

o    HIREDATE + 2 MONTHS + 14 DAYS

c.        sequence-reference

o    sequence-name.nextval

o    NEXT VALUE FOR sequence-name

d.       CASE expression

o    CASE searched-when-clause ELSE result-expression END

o    WHEN search-condition THEN result-expression

o    expression WHEN expression THEN result-expression

e.        CAST expression

o    CAST ( expression AS datatype)

f.        function-invocation

A function input parameter might be any argument form sections a-d or
another function

o    CONCAT('1', '1', 'd')

o    CONCAT(col1, 'f',1)

o    package.name.function(5)





I have combined the complex example with all the cases included:



INSERT INTO
TABLE(c1,c2,c3,c4,c5,c6,c7,c8,c9,c10,c11,c12,c13,c14,c15,c16,c17,c18,c19)
VALUES ('Don''t Pay' , 'Used to haul fuel , water'  , '' , ,, NULL , 1 ,
'1'||chr(10)||'COUNTRY=GRB' , CURRENT TIMESTAMP , CURRENT DATE +1 , HIREDATE
+ 2 MONTHS + 14 DAYS ,  CONCAT(c1 , 'x' || CURENT DATE  , 2 + 2 , f( 7 , 'a
'' b',p.n.f.g('i' ) ) ) , (2 + 8 * 16) / 2 - 3 , sequence-name.nextval ,
NEXT VALUE FOR sequence-name , case when b = '*' then 'star' when b = '+'
then 'plus' when b = '-' then 'minus' else '?''?' end ,  ( CASE WHEN
FIELDNAME IS NULL THEN DEFAULTVALUE ELSE FIELDNAME END ) , CAST ( ?1? AS
NUMBER ), SELECT 'i''d='||id AS ID FROM (SELECT T1.id from T1 UNION ALL
Select t2.id from T2 t2));



I expect to get:



c1 -> 'Don''t Pay'

c2 -> 'Used to haul fuel , water'

c3 -> ''

c4 ->

c5 ->

c6 -> NULL

c7 ->  1

c8 -> '1'||chr(10)||'COUNTRY=GRB'

c9 -> CURRENT TIMESTAMP

c10 -> CURRENT DATE +1

c11 -> HIREDATE + 2 MONTHS + 14 DAYS

c12 -> CONCAT(c1 , 'x' || CURENT DATE  , 2 + 2 , f( 7 , 'a ' b',p.n.f.g('i'
) ) )

c13 -> (2 + 8 * 16) / 2 - 3

c14 -> sequence-name.nextval

c15 -> NEXT VALUE FOR sequence-name

c16 -> case when b = '*' then 'star' when b = '+' then 'plus' when b = '-'
then 'minus' else '?''?' end

c17 -> ( CASE WHEN FIELDNAME IS NULL THEN DEFAULTVALUE ELSE FIELDNAME END )

c18 -> CAST ( ?1? AS NUMBER )

c19 -> SELECT 'i''d='||id AS ID FROM (SELECT T1.id from T1 UNION ALL Select
t2.id from T2 t2)



Mind that c4 is white space and c5 has no value at all.


Thanks in advance

Marcin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090513/3a62271d/attachment.html 

From wirving at beats.hu  Wed May 13 01:08:18 2009
From: wirving at beats.hu (wirving at beats.hu)
Date: Wed, 13 May 2009 10:08:18 +0200 (CEST)
Subject: [antlr-interest] SQL grammar
In-Reply-To: <2389d7320905130103o41d9eaf9qbeaa2cde94cfc37f@mail.gmail.com>
References: <mailman.10317.1242124941.3110.antlr-dev@antlr.org>
	<2389d7320905120345v2e685679vf779b679c06e04b1@mail.gmail.com>
	<2389d7320905130103o41d9eaf9qbeaa2cde94cfc37f@mail.gmail.com>
Message-ID: <50813.217.116.34.107.1242202098.squirrel@squirrelmail.goodman.hu>

Hi,

>From "sequence" I guess it's PL/SQL. If it is, then a PL/SQL grammar is a
good starting point: http://antlr.org/grammar/1209225566284/PLSQL3.g

Although I haven't tried this yet.


   Zoli


> Hi,
>
> Could anybody help me with writing a grammar that does the following:
>
> Parsing values that are present after VALUES key world in the INSERT INTO
> Table(column1,...) VALUES(value1,...);
>
> A value1 might have 3 different form:
>
>    1.    DEFAULT  (any string, e.g. USER, CURRENT SQLID)
>    2.     NULL (e.g. INSERT INTO Table(column1,column2) VALUES(NULL,NULL);
>    3.     expressions
>
>     Operators (|| , /, + , -, *) might be used with expressions (they are
> optional)
>
> a.       scalar
>
> o    date: SYSDATE, CURRENT DATE
>
> o    string: 'a ' b'
>
> o    number: 6.2
>
> o    column name: column1
>
> b.       Labeled durations
>
> o    HIREDATE + 2 MONTHS + 14 DAYS
>
> c.        sequence-reference
>
> o    sequence-name.nextval
>
> o    NEXT VALUE FOR sequence-name
>
> d.       CASE expression
>
> o    CASE searched-when-clause ELSE result-expression END
>
> o    WHEN search-condition THEN result-expression
>
> o    expression WHEN expression THEN result-expression
>
> e.        CAST expression
>
> o    CAST ( expression AS datatype)
>
> f.        function-invocation
>
> A function input parameter might be any argument form sections a-d or
> another function
>
> o    CONCAT('1', '1', 'd')
>
> o    CONCAT(col1, 'f',1)
>
> o    package.name.function(5)
>
>
>
>
>
> I have combined the complex example with all the cases included:
>
>
>
> INSERT INTO
> TABLE(c1,c2,c3,c4,c5,c6,c7,c8,c9,c10,c11,c12,c13,c14,c15,c16,c17,c18,c19)
> VALUES ('Don''t Pay' , 'Used to haul fuel , water'  , '' , ,, NULL , 1 ,
> '1'||chr(10)||'COUNTRY=GRB' , CURRENT TIMESTAMP , CURRENT DATE +1 ,
> HIREDATE
> + 2 MONTHS + 14 DAYS ,  CONCAT(c1 , 'x' || CURENT DATE  , 2 + 2 , f( 7 ,
> 'a
> '' b',p.n.f.g('i' ) ) ) , (2 + 8 * 16) / 2 - 3 , sequence-name.nextval ,
> NEXT VALUE FOR sequence-name , case when b = '*' then 'star' when b = '+'
> then 'plus' when b = '-' then 'minus' else '?''?' end ,  ( CASE WHEN
> FIELDNAME IS NULL THEN DEFAULTVALUE ELSE FIELDNAME END ) , CAST (
&#65533;1&#65533; AS
> NUMBER ), SELECT 'i''d='||id AS ID FROM (SELECT T1.id from T1 UNION ALL
> Select t2.id from T2 t2));
>
>
>
> I expect to get:
>
>
>
> c1 -> 'Don''t Pay'
>
> c2 -> 'Used to haul fuel , water'
>
> c3 -> ''
>
> c4 ->
>
> c5 ->
>
> c6 -> NULL
>
> c7 ->  1
>
> c8 -> '1'||chr(10)||'COUNTRY=GRB'
>
> c9 -> CURRENT TIMESTAMP
>
> c10 -> CURRENT DATE +1
>
> c11 -> HIREDATE + 2 MONTHS + 14 DAYS
>
> c12 -> CONCAT(c1 , 'x' || CURENT DATE  , 2 + 2 , f( 7 , 'a '
> b',p.n.f.g('i'
> ) ) )
>
> c13 -> (2 + 8 * 16) / 2 - 3
>
> c14 -> sequence-name.nextval
>
> c15 -> NEXT VALUE FOR sequence-name
>
> c16 -> case when b = '*' then 'star' when b = '+' then 'plus' when b = '-'
> then 'minus' else '?''?' end
>
> c17 -> ( CASE WHEN FIELDNAME IS NULL THEN DEFAULTVALUE ELSE FIELDNAME END
> )
>
> c18 -> CAST ( &#65533;1&#65533; AS NUMBER )
>
> c19 -> SELECT 'i''d='||id AS ID FROM (SELECT T1.id from T1 UNION ALL
> Select
> t2.id from T2 t2)
>
>
>
> Mind that c4 is white space and c5 has no value at all.
>
>
> Thanks in advance
>
> Marcin
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>



From vasanthi.ak at gmail.com  Wed May 13 03:23:03 2009
From: vasanthi.ak at gmail.com (vasanthi a)
Date: Wed, 13 May 2009 15:53:03 +0530
Subject: [antlr-interest] Flash Actionscript Grammar
Message-ID: <307cfdc90905130323o6d7272b5p377a1041b9425c53@mail.gmail.com>

Hi

Can someone provide me grammar for Flash actionscript

Thanks and Regards
Vasanthi.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090513/637e25fb/attachment.html 

From wotker at rambler.ru  Wed May 13 03:24:39 2009
From: wotker at rambler.ru (Yurushkin Michael)
Date: Wed, 13 May 2009 14:24:39 +0400
Subject: [antlr-interest] some difficuilties with C runtime building
In-Reply-To: <4A09EDE7.7030708@temporal-wave.com>
References: <op.utt6k4nj7sdz0f@comp0> <4A09EDE7.7030708@temporal-wave.com>
Message-ID: <op.utu5vdn47sdz0f@comp0>

Good day.
I have some problems with C runtime.
1) At first, when I try to load C.sln, VS2008 says that "associated source  
control plug-in is not installed on this computer. Source control will be  
disabled for this project". What plug-in I need to install (I haven't seen  
something about it in runtime docs) and how?
2) Release version isn't complied:
Output Window
Compiling...
...
antlr3encodings.c
antlr3debughandlers.c
antlr3cyclicdfa.c
antlr3convertutf.c
antlr3commontreenodestream.c
antlr3commontreeadaptor.c
antlr3commontree.c
Compiling...
antlr3commontoken.c
antlr3collections.c
.\src\antlr3collections.c(1383) : error C2220: warning treated as error -  
no 'object' file generated
.\src\antlr3collections.c(1383) : warning C4100: 'sizeHint' : unreferenced  
formal parameter
antlr3bitset.c
antlr3basetreeadaptor.c
antlr3basetree.c
3) Is it possible to build using VS2005 express edition?

From vasanthi.ak at gmail.com  Wed May 13 03:24:53 2009
From: vasanthi.ak at gmail.com (vasanthi a)
Date: Wed, 13 May 2009 15:54:53 +0530
Subject: [antlr-interest] Retain comments in java
Message-ID: <307cfdc90905130324p7ca3dfcfubf1339c7e8da6cd0@mail.gmail.com>

HI All

I have a code which I instrument using java grammar.
After instrumentation  of java grammar, all the comments that
are there in the code, is removed. Can you please provide me grammar
so that no comments are removed even after instrumentation.

Thanks and Regards
Vasanthi A
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090513/c88d9a01/attachment.html 

From vasanthi.ak at gmail.com  Wed May 13 03:26:34 2009
From: vasanthi.ak at gmail.com (vasanthi a)
Date: Wed, 13 May 2009 15:56:34 +0530
Subject: [antlr-interest] Provide Latest C grammar and C++ Grammar
Message-ID: <307cfdc90905130326x30ccabf6g8202739bd7784b89@mail.gmail.com>

HI All

Can someone provide me the latest C grammar and C++ grammar.

Thanks and Regards

Vasanthi A
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090513/0ec4ed93/attachment.html 

From nvlassopoulos at gmail.com  Wed May 13 03:52:01 2009
From: nvlassopoulos at gmail.com (Nick Vlassopoulos)
Date: Wed, 13 May 2009 11:52:01 +0100
Subject: [antlr-interest] some difficuilties with C runtime building
In-Reply-To: <op.utu5vdn47sdz0f@comp0>
References: <op.utt6k4nj7sdz0f@comp0> <4A09EDE7.7030708@temporal-wave.com>
	<op.utu5vdn47sdz0f@comp0>
Message-ID: <1419225d0905130352md8d6de9vf9fd55f659b4150@mail.gmail.com>

Hi Michael,

To my understanding, the reason you get this error is that a warning
(unreferenced variable in function body - C4100) is treated as an error
because of the "Treat Errors as Warnings" switch. You can disable this from
the Project properties -> "General C/C++ options" (at least that's where the
option is in VS Express).
I have only build the C libraries using the VS Express Edition and gcc so I
don't know if there is an issue with VS2005.

Best Regards,

Nikos

On Wed, May 13, 2009 at 11:24 AM, Yurushkin Michael <wotker at rambler.ru>wrote:

> Good day.
> I have some problems with C runtime.
> 1) At first, when I try to load C.sln, VS2008 says that "associated source
> control plug-in is not installed on this computer. Source control will be
> disabled for this project". What plug-in I need to install (I haven't seen
> something about it in runtime docs) and how?
> 2) Release version isn't complied:
> Output Window
> Compiling...
> ...
> antlr3encodings.c
> antlr3debughandlers.c
> antlr3cyclicdfa.c
> antlr3convertutf.c
> antlr3commontreenodestream.c
> antlr3commontreeadaptor.c
> antlr3commontree.c
> Compiling...
> antlr3commontoken.c
> antlr3collections.c
> .\src\antlr3collections.c(1383) : error C2220: warning treated as error -
> no 'object' file generated
> .\src\antlr3collections.c(1383) : warning C4100: 'sizeHint' : unreferenced
> formal parameter
> antlr3bitset.c
> antlr3basetreeadaptor.c
> antlr3basetree.c
> 3) Is it possible to build using VS2005 express edition?
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090513/9a5ab974/attachment.html 

From Ernest.Pasour at sas.com  Wed May 13 04:56:02 2009
From: Ernest.Pasour at sas.com (Ernest Pasour)
Date: Wed, 13 May 2009 07:56:02 -0400
Subject: [antlr-interest] Flash Actionscript Grammar
In-Reply-To: <307cfdc90905130323o6d7272b5p377a1041b9425c53@mail.gmail.com>
References: <307cfdc90905130323o6d7272b5p377a1041b9425c53@mail.gmail.com>
Message-ID: <15412A37E8C9574393B24ADD991FAA760B86022DEC@MERCMBX14.na.sas.com>

Here is one that I got from someone else and have fixed up as I've discovered problems with the original (and new syntax that didn't exist when the original was created).  There are a few actions in it that I'm using to collect information, but you can remove those.   I'm not a grammar person, so it's probably a little loose, but may help you depending on what you want to use it for.

http://flexformatter.cvs.sourceforge.net/viewvc/flexformatter/ActionscriptInfoCollector/ASCollector.g3?view=log

From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of vasanthi a
Sent: Wednesday, May 13, 2009 6:23 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Flash Actionscript Grammar

Hi

Can someone provide me grammar for Flash actionscript

Thanks and Regards
Vasanthi.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090513/0e358dc5/attachment.html 

From jimi at temporal-wave.com  Wed May 13 06:34:26 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 13 May 2009 06:34:26 -0700
Subject: [antlr-interest] some difficuilties with C runtime building
In-Reply-To: <op.utu5vdn47sdz0f@comp0>
References: <op.utt6k4nj7sdz0f@comp0> <4A09EDE7.7030708@temporal-wave.com>
	<op.utu5vdn47sdz0f@comp0>
Message-ID: <4A0ACC62.9060405@temporal-wave.com>

Yurushkin Michael wrote:
> Good day.
> I have some problems with C runtime.
> 1) At first, when I try to load C.sln, VS2008 says that "associated source  
> control plug-in is not installed on this computer. Source control will be  
> disabled for this project". What plug-in I need to install (I haven't seen  
> something about it in runtime docs) and how?
>   

This is just telling you that you don't have perforce installed and so 
you can just let VS2008 remove the bindings and you are fine.
> 2) Release version isn't complied:
> Output Window
> Compiling...
> ...
> antlr3collections.c
> .\src\antlr3collections.c(1383) : error C2220: warning treated as error -  
> no 'object' file generated
> .\src\antlr3collections.c(1383) : warning C4100: 'sizeHint' : unreferenced  
> formal parameter
>   
Hmm, this is a new one. I guess I missed that after removing the 
sizeHint. You can insert a program to disable that warning (but I will 
do it in the real source of course).

> antlr3bitset.c
> antlr3basetreeadaptor.c
> antlr3basetree.c
> 3) Is it possible to build using VS2005 express edition?
>
>   
Yes, but you will probably have to build your own .sln file for this. 
You can use the vs2008 express edition though without any issues. Or the 
framework SDK, etc.

Jim

From jbb at acm.org  Wed May 13 07:42:18 2009
From: jbb at acm.org (John B. Brodie)
Date: Wed, 13 May 2009 10:42:18 -0400
Subject: [antlr-interest] Ambiguities or resolving the rules
In-Reply-To: <007901c9d38d$b12cc300$2001120a@china.huawei.com>
References: <007901c9d38d$b12cc300$2001120a@china.huawei.com>
Message-ID: <200905131042.18988.jbb@acm.org>

Greetings!
On Wednesday 13 May 2009 01:43:06 am Bharath R wrote:
> Hi All ,, Good morning.
> I m very new to ANTLR , I m facing a below problme like the second rule is
> getting matched with the first rule and its not able to be parsed.
>
> This is my grammar
>
> grammar tel;
>
> TEL : T E L COLON ;
> COLON : ':';
> fragment T : ('t'|'T');
> fragment E : ('e'|'E');
> fragment L : ('l'|'L');
> URI : TEL (parameter)*;
> parameter : pname '=' pvalue ;
> pname:ALPHA;
> pvalue=ALPHA;
>
>
> Now when I pass the value as "tel:airtel=provider" then the parser
> validation fails,
>
> The exception got in " Mismatch character "=" expected ";"  " , this is
> like for the input "tel:airtel=provider" the stream "tel" is taken and
> validated for the rule "TEL"
> But its expected to alphabets.
>
>
> Pls give ur suggestion on this.
>
need to fix these 3 errors in your above grammar:
1) ALPHA is undefined
2) pvalue : ALPHA; (not pvalue=....)
3) downcase URI to uri because it is a parser rule not a lexer rule.

with those 3 fixes, the grammar parses your sample input without any error(s).
i have  attached the grammar i actually used to test this.

I assume you have extracted the above grammar from some larger grammar, 
because, in particular, the error message you give cites the expectation of a 
";", yet the ";" does not appear anywhere in your sample grammar.

Could you please post the smallest yet COMPLETE (e.g. please test it before 
posting) grammar that shows the issue you are having?

----------
   -jbb



-------------- next part --------------
grammar tel;

options {
	output = AST;
	ASTLabelType = CommonTree;
}

@members {
    private static final String [] x = new String[]{
        "tel:airtel=provider"
    };

    public static void main(String [] args) {
        for( int i = 0; i < x.length; ++i ) {
            try {
                System.out.println("about to parse:`"+x[i]+"`");
                telLexer lexer = new telLexer(new ANTLRStringStream(x[i]));
                CommonTokenStream tokens = new CommonTokenStream(lexer);

                telParser parser = new telParser(tokens);
                telParser.start_return p_result = parser.start();

                CommonTree ast = p_result.tree;
                if( ast == null ) {
                   System.out.println("resultant tree: is NULL");
                } else {
                   System.out.println("resultant tree: " + ast.toStringTree());
                }
                System.out.println();
            } catch(Exception e) {
                e.printStackTrace();
            }
        }
    }
}
 
start : uri EOF!;

TEL : T E L COLON ; 
COLON : ':';
fragment T : ('t'|'T');
fragment E : ('e'|'E');
fragment L : ('l'|'L');
uri : TEL (parameter)*;
parameter : pname '=' pvalue ;
pname:ALPHA;
pvalue:ALPHA;
 
 
ALPHA : ('a'..'z'|'A'..'Z')+ ; 
WS : ' '+ { $channel = HIDDEN; } ;

From linlin.xie at siemens.com  Wed May 13 08:10:38 2009
From: linlin.xie at siemens.com (Xie, Linlin)
Date: Wed, 13 May 2009 17:10:38 +0200
Subject: [antlr-interest] How to pass the current node to the action?
In-Reply-To: <4A085A9A.2030605@temporal-wave.com>
References: <79118B9FE8CE8E49B0D71964A79CB6470249843F@dekomplm002.net.plm.eds.com><79118B9FE8CE8E49B0D71964A79CB64702498466@dekomplm002.net.plm.eds.com><4A05B405.1080104@temporal-wave.com><79118B9FE8CE8E49B0D71964A79CB64702498530@dekomplm002.net.plm.eds.com><79118B9FE8CE8E49B0D71964A79CB64702498563@dekomplm002.net.plm.eds.com>
	<4A085A9A.2030605@temporal-wave.com>
Message-ID: <79118B9FE8CE8E49B0D71964A79CB647024EC38B@dekomplm002.net.plm.eds.com>

Hi Jim, 

 

Thanks for your previous replies. How does the fixation of the
conversion to common token bug go? As I can use labels for all the
sub-rules, but can't do it to the current rule, as the example shown:

 

P: r1=rule1 r2=rule2;

 

I can use labels for rule1 and rule2, but can't assign rule P to any
label and use the label to refer to the current rule. If you can fix
that as soon as possible, that'd be great!

 

Also this problem probably has some connection with the
ADAPTER->rulePostProcessing( ADAPTER, root_0 ) function. Though having
read the code for the function, I still couldn't get a consistent
picture of how it works. To me, sometimes the rulePostProcessing cuts
the root_0 node, and sometimes it doesn't for the same situation of
having a single child in a rule. So I wonder if you can explain to me
how exactly this function works? Or is there any signal or parameter
that I can use to switch off the cut off of the root_0 (i.e. the
prioritization of the tree)?  I suppose if the $tree can be used (i.e.
the bug above fixed), and I attach some user data to the user pointer of
the $tree, the rulePostProcessing has to do something to pass on the
data when it has to cut off the root_0, right?

 

I look forward to your reply. Thank you very much.

Regards,

Linlin

 

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jim Idle
Sent: 11 May 2009 18:04
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] How to pass the current node to the
action?

 

Xie, Linlin wrote: 

Hi Jim,

 

The weird thing is if I use the $rule1.tree directly, the generated code
would try to convert the rule1_return structure to common token type
first, but if I assign the rule to a variable, say P: r1=Rule1 Rule2;
then using $r1.tree would be completely fine, as the generated  code
would just keep the rule1_return structure, not trying to convert it at
all.

 

Can you see why it works this way? Thanks a lot.

Maybe a bug in code generation templates, I will take a look, but for
now, use labels :-)

Jim

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090513/3e39ad58/attachment.html 

From jimi at temporal-wave.com  Wed May 13 08:47:44 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 13 May 2009 08:47:44 -0700
Subject: [antlr-interest] How to pass the current node to the action?
In-Reply-To: <79118B9FE8CE8E49B0D71964A79CB647024EC38B@dekomplm002.net.plm.eds.com>
References: <79118B9FE8CE8E49B0D71964A79CB6470249843F@dekomplm002.net.plm.eds.com><79118B9FE8CE8E49B0D71964A79CB64702498466@dekomplm002.net.plm.eds.com><4A05B405.1080104@temporal-wave.com><79118B9FE8CE8E49B0D71964A79CB64702498530@dekomplm002.net.plm.eds.com><79118B9FE8CE8E49B0D71964A79CB64702498563@dekomplm002.net.plm.eds.com>
	<4A085A9A.2030605@temporal-wave.com>
	<79118B9FE8CE8E49B0D71964A79CB647024EC38B@dekomplm002.net.plm.eds.com>
Message-ID: <4A0AEBA0.2060900@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090513/65d8f4de/attachment.html 

From michael.bedward at gmail.com  Wed May 13 18:02:16 2009
From: michael.bedward at gmail.com (Michael Bedward)
Date: Thu, 14 May 2009 11:02:16 +1000
Subject: [antlr-interest] ToStringTree
In-Reply-To: <1242095295.4296.83.camel@localhost.localdomain>
References: <4A08BFA3.2040701@chrislaco.com>
	<1242095295.4296.83.camel@localhost.localdomain>
Message-ID: <e24c4c270905131802g545ed314p764b058199b67b9e@mail.gmail.com>

Very nice - thanks for the link Steve

Michael

From claco at chrislaco.com  Wed May 13 18:39:26 2009
From: claco at chrislaco.com (Christopher Laco)
Date: Wed, 13 May 2009 21:39:26 -0400
Subject: [antlr-interest] AST->Template: Not Getting It
Message-ID: <4A0B764E.8000500@chrislaco.com>

I suck at this, clearly I don't get it. It feels like I've made zero
progress in weeks.

I finally got to the point where I can output a simple AST with one
grammar, and I'm trying to use a tree grammar to translate that into the
target language using templates.


My simple tree:

(DOCUMENT (GET 'variable'))




My tree grammar:

document : ^(DOCUMENT statement*) -> using() ;
statement: getExpr;
getExpr: ^(GET LITERAL) -> print() ;




My template:

> 
> group CSharpGenerator; 
> 
> using() ::= <<
> foo
>>>
> 
> print() ::= <<
> System.Console.WriteLine;
>>>




When I run the parsers tree through the tree grammar passing in the
template, all I get is this:


foo

orint() seems to never be called.

If I change the tree grammar to output AST and print that tree, I get
the same tree, which seems to imply my tree grammar is fine.

What am I missing?

From jevitha at gmail.com  Thu May 14 06:29:31 2009
From: jevitha at gmail.com (jevitha)
Date: Thu, 14 May 2009 18:59:31 +0530
Subject: [antlr-interest] Including optional keywords as parameters to
	String Template
Message-ID: <cb65abb00905140629y5c101b63n92f57bbd214c1c57@mail.gmail.com>

Hi,

  I have a rule in my tree grammar (same in my parser grammar) which has
optional attribute which can occur in my input :

className : (('.module')? name1 ) slashedName ;

How can i construct a string template to include the optional attribute
(here its .module) to be sent as a parameter to the template only if it
occurs ... Since it is a keyword, and there is no separate lexer rule
written to match '.module' separately, I dono how to pass the .module
keyword as optional parameter to the template.

.module keyword should be filled in the blank space of the following rewrite
rule:

className : (('.module')? name1 ) slashedName
       -> className(....... assemblyname = {$name1.st}
methodname={$slashedName.st})
      ;

Kindly suggest.

Best Regards,
Jevitha
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090514/8d263d71/attachment.html 

From frank.du at riskmetrics.com  Thu May 14 07:26:21 2009
From: frank.du at riskmetrics.com (Frank Du)
Date: Thu, 14 May 2009 10:26:21 -0400
Subject: [antlr-interest] AST->Template: Not Getting It
In-Reply-To: <4A0B764E.8000500@chrislaco.com>
References: <4A0B764E.8000500@chrislaco.com>
Message-ID: <A737869DDF35D44A89A7210DDA6F622B01A8747BC6@mail-ny02.rmg-ny.com>

Please try to use this rule for your tree walker:

statement: getExpr -> template(content ={$getExpr.st}) "<content>";

Thanks,
Frank


-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Christopher Laco
Sent: Wednesday, May 13, 2009 9:39 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] AST->Template: Not Getting It

I suck at this, clearly I don't get it. It feels like I've made zero
progress in weeks.

I finally got to the point where I can output a simple AST with one
grammar, and I'm trying to use a tree grammar to translate that into the
target language using templates.


My simple tree:

(DOCUMENT (GET 'variable'))




My tree grammar:

document : ^(DOCUMENT statement*) -> using() ;
statement: getExpr;
getExpr: ^(GET LITERAL) -> print() ;




My template:

> 
> group CSharpGenerator; 
> 
> using() ::= <<
> foo
>>>
> 
> print() ::= <<
> System.Console.WriteLine;
>>>




When I run the parsers tree through the tree grammar passing in the
template, all I get is this:


foo

orint() seems to never be called.

If I change the tree grammar to output AST and print that tree, I get
the same tree, which seems to imply my tree grammar is fine.

What am I missing?

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From hola.ratul at gmail.com  Thu May 14 10:02:56 2009
From: hola.ratul at gmail.com (Ratul Bhadury)
Date: Thu, 14 May 2009 18:02:56 +0100
Subject: [antlr-interest] Selective ignoring of whitespace
In-Reply-To: <6be2f3b0905140956r49a71d95g9082b2a11c03bb3e@mail.gmail.com>
References: <6be2f3b0905140956r49a71d95g9082b2a11c03bb3e@mail.gmail.com>
Message-ID: <6be2f3b0905141002x64841769v59d4c7ebc86a1a1e@mail.gmail.com>

Hello all,

I've been trying to achieve something using Antlr v3, but have been
struggling for a while now, and think its now time to ask the help of more
experienced users, hence this mail.

What I basically want to achieve is a simple parser which will accept lines
of the nature:

sec = <keyword>

I want any whitespace (spaces and tabs) before the '=' sign to be ignored,
but any spaces after '=' to be included in what will be regarded as the
keyword. Therefore:
sec= hello    -> is valid
sec      =hello     people  -> is valid
         sec     =     hello     -> is valid
se=    hello   -> is rejected

However, I cannot get the grammar to ignore the spaces before the '=' sign,
and when I try parsing the input line, I get an error.

I would be extremely grateful if someone could point me in the right
direction, or even better, identify the error in the grammar. Below is my
attempt.

Many thanks in advance,

Ratul



/////////////////////////////////////////////////////////////////////////////////////////

grammar MopedSearch;

options
{
    language=CSharp2;
}

@lexer::members {

private bool myGotEqualsOp = false;

}



@header {
using System.Collections.Generic;
}

@members {

private string[] myValidDateFormats = new string[1] { "yyyyMMdd" };

}

@rulecatch {
    catch (RecognitionException re) {
        throw re;
    }
}

/*------------------------------------------------------------------
 * PARSER RULES
 *------------------------------------------------------------------*/

clause        returns [ SearchExpression searchExpr ]
scope    {
    SearchField field;
    SearchOperator op;
    List<string> terms;
}
@init { $clause::terms = new List<string>(); }
    :    keywordClause EOF
         { SearchExpression expr = new SearchExpression($clause::field,
$clause::op, $clause::terms); $searchExpr = expr; }
    ;

keywordClause
    : WS keywordField WS E { $clause::op = 1; } k=keyTerm
{$clause::terms.Add($k.text); } (','k=keyTerm {$clause::terms.Add($k.text);
})*
    ;
keywordField    : SECURITY        { $clause::field = 1; }
                ;
keyTerm         : KEYWORD
                | NUMBER
                ;

/*------------------------------------------------------------------
 * LEXER/TOKEN RULES
 *------------------------------------------------------------------*/
SECURITY    : ('S'|'s')('E'|'e')('C'|'c');

E            :    '=' { myGotEqualsOp = true; };
PLUS        :    '+';


NUMBER        : DIGIT+;
KEYWORD        :
('A'..'Z'|'a'..'z'|DIGIT|'$'|'?'|'&'|'^'|'%'|'('|')'|'['|']'|':'|';'|'*'|'<'|'>'|'/'|'\\'|'@'|'#'|'?'|'!'|'.'|'
')+;
fragment DIGIT    : '0'..'9';


WS            :    (' ' | '\t')+ { if (!myGotEqualsOp) $channel = HIDDEN; }
            ;

/////////////////////////////////////////////////////////////////////////////////////////
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090514/a1265023/attachment.html 

From JWest at mroc.com  Thu May 14 11:07:43 2009
From: JWest at mroc.com (West Jay - Toronto-MROC - external)
Date: Thu, 14 May 2009 14:07:43 -0400
Subject: [antlr-interest] Parse trace?
Message-ID: <E697C11B3FD35E45B802D88ED1FED6B27C8A722528@TMRC000001.am.munichre.com>

Hi all,

I've been expanding the Oracle PL/SQL grammar (from the ANTLR downloads section) for the past while and have had lots of success.

options {
            language=CSharp2;
            k=*;
            backtrack=true;
            memoize=true;
            output=AST;
}

Right now I've got it parsing lots of programs into exactly the AST I want (liking those tree rewrite rules), but there are definitely still many programs that don't parse the way I expect/require.

How can I determine which path was taken through the grammar to parse the input?

I'm not sure how the grammar is producing some of this output, but if I knew the path it was taking I'd at least have some understanding of the problem and likely then be able to figure out a way to fix it.

So far, the only option I've seen is annotating my grammar with trace statements that'll execute during parsing.  Ick.  Is there not a better way?

I'm pretty sure there must be, and I'm just not seeing it.

Suggestions?

Thanks,
J

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090514/fea97b3f/attachment.html 

From martijn.reuvers at gmail.com  Thu May 14 11:29:30 2009
From: martijn.reuvers at gmail.com (Martijn Reuvers)
Date: Thu, 14 May 2009 20:29:30 +0200
Subject: [antlr-interest] AST->Template: Not Getting It
In-Reply-To: <4A0B764E.8000500@chrislaco.com>
References: <4A0B764E.8000500@chrislaco.com>
Message-ID: <c376e6ec0905141129y2ca547d7hae4b6cb9fd29d9a2@mail.gmail.com>

For the list... I always lose it in a conversation. :S
------


Hi Christopher,

Sorry I read too fast, you were on the right track. Here is a simple
example, which compiles and runs fine (change the Java stuff to C#
where needed), I am not sure if this is the best way to do this as I
am not very familiar with stringtemplating either.

Following 4 files, parser grammar, tree grammer, string template file
and Test file (all put them in the same directory), don't forget to
change things for C#. Once you run it, you can enter assignments: int
a = 10; int b = 100; etc. At the end it prints the templates for all
these statements. Goodluck!

Martijn

Example.g
---------------------------------
grammar Example;

options {
       output=AST;
}

tokens {
       VARDEF;
}

start
       : assignment* -> assignment*
       ;

assignment
       : INT_TYPE VAR '=' INT ';' -> ^(VARDEF INT_TYPE VAR INT)
       ;


INT_TYPE
       :       'int'
       ;

INT
       :       ('0' .. '9')+
       ;

VAR
       :       ('a' .. 'z' | '0' .. '9')+
       ;

WS
       :       (' '|'\t'|'\n'|'\r')+ { skip(); }
       ;

-------------------------------------------
ExampleTree.g
-------------------------------------------
tree grammar ExampleTree;

options {
       tokenVocab=Example;
       ASTLabelType=CommonTree;
       output=template;
}

start returns [java.util.List values]
@init {
       $values = new java.util.ArrayList();
}
       : a+=assignment* { $values.add($a); }
       ;

assignment
       :       ^(VARDEF INT_TYPE VAR INT) ->
assign(type={$INT_TYPE.text},name={$VAR.text},val={$INT.text})
       ;

--------------------------------------------
ExampleTree.stg
--------------------------------------------
group ExampleTree;
assign(type,name,val) ::= "<type> <name> = <val>;"

--------------------------------------------
Test.java
--------------------------------------------

import java.io.FileReader;
import org.antlr.runtime.ANTLRInputStream;
import org.antlr.runtime.CommonTokenStream;
import org.antlr.runtime.tree.CommonTree;
import org.antlr.runtime.tree.CommonTreeNodeStream;
import org.antlr.stringtemplate.StringTemplateGroup;

/**
 *
 * @author mreuvers
 */
public class Test {

 public static void main(String[] args) throws Exception {
   ANTLRInputStream input = new ANTLRInputStream(System.in);

   ExampleLexer lexer = new ExampleLexer(input);
   CommonTokenStream tokens = new CommonTokenStream(lexer);

   ExampleParser parser = new ExampleParser(tokens);
   CommonTree tree = (CommonTree) parser.start().getTree();
   CommonTreeNodeStream treeStream = new CommonTreeNodeStream(tree);
   treeStream.setTokenStream(tokens);

   ExampleTree eval = new ExampleTree(treeStream);

   FileReader f = new FileReader("ExampleTree.stg");
   StringTemplateGroup templates = new StringTemplateGroup(f);
   f.close();
   eval.setTemplateLib(templates);

   System.out.println("TEST="  + eval.start().values);
       }
}

--------------------------------------------

From tbender at stud.hs-heilbronn.de  Thu May 14 11:34:07 2009
From: tbender at stud.hs-heilbronn.de (Tilman Bender)
Date: Thu, 14 May 2009 20:34:07 +0200
Subject: [antlr-interest] Parse trace?
In-Reply-To: <E697C11B3FD35E45B802D88ED1FED6B27C8A722528@TMRC000001.am.munichre.com>
References: <E697C11B3FD35E45B802D88ED1FED6B27C8A722528@TMRC000001.am.munichre.com>
Message-ID: <96E85557-7624-4048-827E-5A4B818C0DFE@stud.hs-heilbronn.de>

Hi Jay,

I am sure what you mean by "annotatin my grammar with trace statements".
If you mean doing this manually for every rule/alternative: you need  
not do that.

As far as I see you can have ANTLR add such trace information for you,  
so you do not have to do
it manually. I've seen this as a config option in the antlr3-maven- 
plugin and I am sure there is a corresponding
ANTLR-Tool option for this.

Another (maybe weird) idea: Isn't this a typical use case for AOP?  
Would it be feasible to weave the logging
into the whole thing? Just an idea ;-)

Tilman Bender
Student des Software Engineering
Hochschule Heilbronn
tbender at stud.hs-heilbronn.de



Am 14.05.2009 um 20:07 schrieb West Jay - Toronto-MROC - external:

> So far, the only option I?ve seen is annotating my grammar with  
> trace statements that?ll execute during parsing.  Ick.  Is there not  
> a better way?

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090514/7ef94b71/attachment.html 

From micha-1 at fantasymail.de  Thu May 14 12:21:47 2009
From: micha-1 at fantasymail.de (Micha)
Date: Thu, 14 May 2009 21:21:47 +0200
Subject: [antlr-interest] Selective ignoring of whitespace
In-Reply-To: <6be2f3b0905141002x64841769v59d4c7ebc86a1a1e@mail.gmail.com>
References: <6be2f3b0905140956r49a71d95g9082b2a11c03bb3e@mail.gmail.com>
	<6be2f3b0905141002x64841769v59d4c7ebc86a1a1e@mail.gmail.com>
Message-ID: <200905142121.47648.micha-1@fantasymail.de>

On Thursday 14 May 2009 19:02:56 Ratul Bhadury wrote:
> Hello all,
>
> I've been trying to achieve something using Antlr v3, but have been
> struggling for a while now, and think its now time to ask the help of more
> experienced users, hence this mail.
>
> What I basically want to achieve is a simple parser which will accept lines
> of the nature:
>
> sec = <keyword>
>
> I want any whitespace (spaces and tabs) before the '=' sign to be ignored,
> but any spaces after '=' to be included in what will be regarded as the
> keyword. Therefore:
> sec= hello    -> is valid
> sec      =hello     people  -> is valid
>          sec     =     hello     -> is valid
> se=    hello   -> is rejected

something like this? (this read only one clause),
KEYWORD includes the whitespace at the beginning, but not at the end.

grammar Key;

start : clause EOF;

clause : SECURITY KEYWORD WS* ;

fragment WS : ' ' | '\t';
fragment NUMBER : ('0' .. '9')+;
fragment WORD : ('a' .. 'z')+;

SECURITY : ('S'|'s')('E'|'e')('C'|'c') WS* '=' ;

KEYWORD : WS* (WORD | NUMBER);



 cheers,
 Michael


From fadc80 at gmail.com  Thu May 14 14:04:36 2009
From: fadc80 at gmail.com (Fernando Costa)
Date: Thu, 14 May 2009 18:04:36 -0300
Subject: [antlr-interest] Control Flow Graph
Message-ID: <b6844e630905141404l384f1a10kdea4fb41d3d73d90@mail.gmail.com>

Hi, I'm a newbie on language processing and I need to create a tool to
determine control flow graphs of PL/SQL programs. I have just basic
knowledge about compilers construction based on grammars. Do you think ANTRL
could help me to do it?

Best regards,

Fernando A. D. Costa
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090514/dc579a45/attachment.html 

From warren-antlr.org at warrenfalk.com  Thu May 14 14:21:21 2009
From: warren-antlr.org at warrenfalk.com (Warren Falk)
Date: Thu, 14 May 2009 17:21:21 -0400
Subject: [antlr-interest] unreachable catch block
Message-ID: <511bc5ed0905141421r213bda4cg60f17a84d2d7a06a@mail.gmail.com>

This has been asked on here before, but the answers no longer appear
to be correct using the latest version (3.1.3).

The output of the  following combined grammar, TestParser.java, fails
to compile with "Unreachable catch block" in the token rule (despite
the empty @rulecatch which doesn't appear to have an effect).  What am
I missing?  (The reason it's unreachable is because the '.' can't fail
-- this is just an abbreviated grammar for illustration only).

// -----------------------------
grammar Test;

options {
??? language = Java;
??? output = AST;
}

document
? : token+
? ;

token
  @rulecatch { }
? : .
? ;

WS : WSCHAR+ ;

WORD : NONWSCHAR+ ;

fragment
NONWSCHAR : ~WSCHAR ;

fragment
WSCHAR??? : (' '|'\n'|'\r'|'\t') ;
// -----------------------------

Unreachable catch block for RecognitionException. This exception is
never thrown from the try statement body	TestParser.java

Thanks in advance.

P.S. this is my first time posting here and I'm a bit new to ANTLR, so
I apologize in advance if this is a stupid request.

From parrt at cs.usfca.edu  Thu May 14 14:47:44 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 14 May 2009 14:47:44 -0700
Subject: [antlr-interest] Parse trace?
In-Reply-To: <96E85557-7624-4048-827E-5A4B818C0DFE@stud.hs-heilbronn.de>
References: <E697C11B3FD35E45B802D88ED1FED6B27C8A722528@TMRC000001.am.munichre.com>
	<96E85557-7624-4048-827E-5A4B818C0DFE@stud.hs-heilbronn.de>
Message-ID: <514E1FBF-4946-4CB4-9E1F-9889904406A9@cs.usfca.edu>

-trace option will work great for you. recompile and when you run your  
parser traceIn/traceOut methods will be called. you can override them  
or use the default which spits out information.

Ter
On May 14, 2009, at 11:34 AM, Tilman Bender wrote:

> Hi Jay,
>
> I am sure what you mean by "annotatin my grammar with trace  
> statements".
> If you mean doing this manually for every rule/alternative: you need  
> not do that.
>
> As far as I see you can have ANTLR add such trace information for  
> you, so you do not have to do
> it manually. I've seen this as a config option in the antlr3-maven- 
> plugin and I am sure there is a corresponding
> ANTLR-Tool option for this.
>
> Another (maybe weird) idea: Isn't this a typical use case for AOP?  
> Would it be feasible to weave the logging
> into the whole thing? Just an idea ;-)
>
> Tilman Bender
> Student des Software Engineering
> Hochschule Heilbronn
> tbender at stud.hs-heilbronn.de
>
>
>
> Am 14.05.2009 um 20:07 schrieb West Jay - Toronto-MROC - external:
>
>> So far, the only option I?ve seen is annotating my grammar with  
>> trace statements that?ll execute during parsing.  Ick.  Is there  
>> not a better way?
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From parrt at cs.usfca.edu  Thu May 14 15:00:11 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 14 May 2009 15:00:11 -0700
Subject: [antlr-interest] unreachable catch block
In-Reply-To: <511bc5ed0905141421r213bda4cg60f17a84d2d7a06a@mail.gmail.com>
References: <511bc5ed0905141421r213bda4cg60f17a84d2d7a06a@mail.gmail.com>
Message-ID: <925B3B37-201D-4F8A-9BCF-5E47FAA536A7@cs.usfca.edu>


On May 14, 2009, at 2:21 PM, Warren Falk wrote:

> This has been asked on here before, but the answers no longer appear
> to be correct using the latest version (3.1.3).
>
> The output of the  following combined grammar, TestParser.java, fails
> to compile with "Unreachable catch block" in the token rule (despite
> the empty @rulecatch which doesn't appear to have an effect).  What am
> I missing?  (The reason it's unreachable is because the '.' can't fail
> -- this is just an abbreviated grammar for illustration only).

that's why this one fails...  oh and rulecatch works at global not  
rule level i think.
T
>
>
> // -----------------------------
> grammar Test;
>
> options {
>     language = Java;
>     output = AST;
> }
>
> document
>   : token+
>   ;
>
> token
>  @rulecatch { }
>   : .
>   ;
>
> WS : WSCHAR+ ;
>
> WORD : NONWSCHAR+ ;
>
> fragment
> NONWSCHAR : ~WSCHAR ;
>
> fragment
> WSCHAR    : (' '|'\n'|'\r'|'\t') ;
> // -----------------------------
>
> Unreachable catch block for RecognitionException. This exception is
> never thrown from the try statement body	TestParser.java
>
> Thanks in advance.
>
> P.S. this is my first time posting here and I'm a bit new to ANTLR, so
> I apologize in advance if this is a stupid request.
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From warren-antlr.org at warrenfalk.com  Thu May 14 15:11:24 2009
From: warren-antlr.org at warrenfalk.com (Warren Falk)
Date: Thu, 14 May 2009 18:11:24 -0400
Subject: [antlr-interest] unreachable catch block
In-Reply-To: <925B3B37-201D-4F8A-9BCF-5E47FAA536A7@cs.usfca.edu>
References: <511bc5ed0905141421r213bda4cg60f17a84d2d7a06a@mail.gmail.com> 
	<925B3B37-201D-4F8A-9BCF-5E47FAA536A7@cs.usfca.edu>
Message-ID: <511bc5ed0905141511h2f941281he27500e67449e78e@mail.gmail.com>

On Thu, May 14, 2009 at 6:00 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
> that's why this one fails... ?oh and rulecatch works at global not rule
> level i think.
> T

I want to create a rule which always matches the next token in the
stream.  Is there a reason that should be illegal (or is this a bug?)

Oh, and @rulecatch { } at a global level doesn't seem to eliminate the
catch either, so I'm not sure it's what I'm looking for anyway.

From sharwell at pixelminegames.com  Thu May 14 16:02:36 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Thu, 14 May 2009 18:02:36 -0500
Subject: [antlr-interest] unreachable catch block
In-Reply-To: <511bc5ed0905141511h2f941281he27500e67449e78e@mail.gmail.com>
References: <511bc5ed0905141421r213bda4cg60f17a84d2d7a06a@mail.gmail.com>
	<925B3B37-201D-4F8A-9BCF-5E47FAA536A7@cs.usfca.edu>
	<511bc5ed0905141511h2f941281he27500e67449e78e@mail.gmail.com>
Message-ID: <86403CA0939415448BCCB83855EFE09AA680E8@Bloodymary.ironwillgames.com>

rule
	: something
	;
catch[ExceptionType e] { stuff... }
finally { more stuff... }

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Warren Falk
Sent: Thursday, May 14, 2009 5:11 PM
To: Terence Parr
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] unreachable catch block

On Thu, May 14, 2009 at 6:00 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
> that's why this one fails... ?oh and rulecatch works at global not rule
> level i think.
> T

I want to create a rule which always matches the next token in the
stream.  Is there a reason that should be illegal (or is this a bug?)

Oh, and @rulecatch { } at a global level doesn't seem to eliminate the
catch either, so I'm not sure it's what I'm looking for anyway.

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From marwan.alephn at gmail.com  Thu May 14 16:54:19 2009
From: marwan.alephn at gmail.com (Marwan Ajraoui)
Date: Fri, 15 May 2009 01:54:19 +0200
Subject: [antlr-interest] Control Flow Graph
In-Reply-To: <b6844e630905141404l384f1a10kdea4fb41d3d73d90@mail.gmail.com>
References: <b6844e630905141404l384f1a10kdea4fb41d3d73d90@mail.gmail.com>
Message-ID: <6535fcb50905141654i3cb2853fyf25de0ccaede0eec@mail.gmail.com>

Hi,

Have look at this link:

http://www.temporal-wave.com/index.php?option=com_psrrun&view=psrrun&Itemid=56

ANTLR can build, a Tree graph for you, then you will have to add the
functionalities required to determine a control flow...

Salud,

Marwan

2009/5/14 Fernando Costa <fadc80 at gmail.com>:
> Hi, I'm a newbie on language processing and I need to create a tool to
> determine control flow graphs of PL/SQL programs. I have just basic
> knowledge about compilers construction based on grammars. Do you think ANTRL
> could help me to do it?
>
> Best regards,
>
> Fernando A. D. Costa
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>



-- 
Marouane

From jjconti at gmail.com  Thu May 14 17:09:12 2009
From: jjconti at gmail.com (Juanjo Conti)
Date: Thu, 14 May 2009 21:09:12 -0300
Subject: [antlr-interest] Can antlr be used for this?
Message-ID: <3f9007680905141709rb810b1en7714ccbffd49327d@mail.gmail.com>

Hi! My name si Juanjo and I am extremelly new at antlr. But I have used PLY
(Python Lex and Yacc). Actually don't now if have something in common.

I'd like to know if antlr is suitable for this taks: translate programs
written in different programming languages (Java, Python, PHP, Ruby...) into
an intermediate language that could be later process.

The aimed process consist in determine if a value from an untrusted source
(for example an HTTP request) can reach a sensitive sink (for example a DB
query).

Thanks you very much,

-- 
Juanjo Conti
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090514/bb0d8676/attachment.html 

From jkh at datatel.com  Thu May 14 17:19:32 2009
From: jkh at datatel.com (Jason Hocker)
Date: Thu, 14 May 2009 20:19:32 -0400
Subject: [antlr-interest] =?windows-1255?q?lexer_issue_-_=5C_has_double_me?=
	=?windows-1255?q?aning_in_our_rules=FE?=
Message-ID: <B5AECBDEBD3D5447BE5D082DFF057E8331E541CA98@EXCHANGECLUSTER.datatel.com>

An end of statement in our language is the end of the line.  Strings can be surrounded by double quotes, single quotes, or backslash.  The backslash can also have another meeting as a different symbol.  So I want a STRINGLITERAL when there are two backslashes on the same line, with everything in between as part of the string, or I want a separate token just for the backslash.  In my lexer, its starting down the stringliteral path, and then throwing an error that it cant match the last token.
Any suggestions?

BACKSLASH : '\\';

STRINGLITERAL : ('"' (~('"' | '\n' | '\r'))* '"')
 | ('\'' (~('\'' | '\n' | '\r'))* '\'')
 | ('\\' (~('\\' | '\n' | '\r'))* '\\')

 ;

________________________________
Disclaimer: This message is intended only for the personal and confidential use of the designated recipient(s) named above. If you are not the intended recipient of this message you are hereby notified that any review, dissemination, distribution or copying of this message is strictly prohibited. In addition, if you have received this message in error, please advise the sender by reply e-mail and delete the message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090514/07221ea6/attachment.html 

From warren-antlr.org at warrenfalk.com  Thu May 14 18:15:04 2009
From: warren-antlr.org at warrenfalk.com (Warren Falk)
Date: Thu, 14 May 2009 21:15:04 -0400
Subject: [antlr-interest] unreachable catch block
In-Reply-To: <86403CA0939415448BCCB83855EFE09AA680E8@Bloodymary.ironwillgames.com>
References: <511bc5ed0905141421r213bda4cg60f17a84d2d7a06a@mail.gmail.com> 
	<925B3B37-201D-4F8A-9BCF-5E47FAA536A7@cs.usfca.edu>
	<511bc5ed0905141511h2f941281he27500e67449e78e@mail.gmail.com> 
	<86403CA0939415448BCCB83855EFE09AA680E8@Bloodymary.ironwillgames.com>
Message-ID: <511bc5ed0905141815r19f4f480v3d19385e23b592c9@mail.gmail.com>

> rule
> ? ? ? ?: something
> ? ? ? ?;
> catch[ExceptionType e] { stuff... }
> finally { more stuff... }
>

I see... so in my case, I think I need the following:

token
  : .
  ;
catch[Throwable t] { }

...and this does prevent the compiler error.  Thanks.

Would I be out of place to still think this is a bug?  Shouldn't the
code to catch the RecognizerException only be emitted if the code that
throws it is also emitted?

From parrt at cs.usfca.edu  Thu May 14 18:19:05 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 14 May 2009 18:19:05 -0700
Subject: [antlr-interest] unreachable catch block
In-Reply-To: <511bc5ed0905141815r19f4f480v3d19385e23b592c9@mail.gmail.com>
References: <511bc5ed0905141421r213bda4cg60f17a84d2d7a06a@mail.gmail.com>
	<925B3B37-201D-4F8A-9BCF-5E47FAA536A7@cs.usfca.edu>
	<511bc5ed0905141511h2f941281he27500e67449e78e@mail.gmail.com>
	<86403CA0939415448BCCB83855EFE09AA680E8@Bloodymary.ironwillgames.com>
	<511bc5ed0905141815r19f4f480v3d19385e23b592c9@mail.gmail.com>
Message-ID: <ED350715-CDF9-422D-951E-16DBB9BD0977@cs.usfca.edu>

not always...you could put a throw in an action :)
Ter
On May 14, 2009, at 6:15 PM, Warren Falk wrote:

>> rule
>>        : something
>>        ;
>> catch[ExceptionType e] { stuff... }
>> finally { more stuff... }
>>
>
> I see... so in my case, I think I need the following:
>
> token
>  : .
>  ;
> catch[Throwable t] { }
>
> ...and this does prevent the compiler error.  Thanks.
>
> Would I be out of place to still think this is a bug?  Shouldn't the
> code to catch the RecognizerException only be emitted if the code that
> throws it is also emitted?
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From warren-antlr.org at warrenfalk.com  Thu May 14 18:36:43 2009
From: warren-antlr.org at warrenfalk.com (Warren Falk)
Date: Thu, 14 May 2009 21:36:43 -0400
Subject: [antlr-interest] unreachable catch block
In-Reply-To: <ED350715-CDF9-422D-951E-16DBB9BD0977@cs.usfca.edu>
References: <511bc5ed0905141421r213bda4cg60f17a84d2d7a06a@mail.gmail.com> 
	<925B3B37-201D-4F8A-9BCF-5E47FAA536A7@cs.usfca.edu>
	<511bc5ed0905141511h2f941281he27500e67449e78e@mail.gmail.com> 
	<86403CA0939415448BCCB83855EFE09AA680E8@Bloodymary.ironwillgames.com> 
	<511bc5ed0905141815r19f4f480v3d19385e23b592c9@mail.gmail.com> 
	<ED350715-CDF9-422D-951E-16DBB9BD0977@cs.usfca.edu>
Message-ID: <511bc5ed0905141836x522670a0h72c2cefe0ae2bdc8@mail.gmail.com>

>>
>> Would I be out of place to still think this is a bug?  Shouldn't the
>> code to catch the RecognizerException only be emitted if the code that
>> throws it is also emitted?
>>
> not always...you could put a throw in an action :)
> Ter

well, exactly, and that is precisely when I would expect to be
required to add my own catch because it's *my* throw...  Adding a
dummy catch to suppress a default, erroneous behavior, on the other
hand, seems a bit of a perversion.  (I mean, it's only erroneous
because this is a "checked" exception, so Java expects catches only
for throws... if ANTLR isn't supposed to be designed that way, then
couldn't this just be fixed by having RecognizerException extend
RuntimeException instead?)

From michael.bedward at gmail.com  Thu May 14 20:33:08 2009
From: michael.bedward at gmail.com (Michael Bedward)
Date: Fri, 15 May 2009 13:33:08 +1000
Subject: [antlr-interest] Can antlr be used for this?
In-Reply-To: <3f9007680905141709rb810b1en7714ccbffd49327d@mail.gmail.com>
References: <3f9007680905141709rb810b1en7714ccbffd49327d@mail.gmail.com>
Message-ID: <e24c4c270905142033s43c9a6efp54cd894da5351262@mail.gmail.com>

Hi Juanjo

The short answer is yes :)

But is your use case really one of complete translation or more
searching for particular elements in the input data ?  And, if so,
would it be less work to build a few language-specific search routines
(which ANTLR can help you do of course) rather than build
comprehensive translators ?

Michael

From dhjdhj at gmail.com  Thu May 14 20:38:44 2009
From: dhjdhj at gmail.com (David Jameson)
Date: Thu, 14 May 2009 23:38:44 -0400
Subject: [antlr-interest] Modifying tree based on semantic content
Message-ID: <24627566-0373-41E0-9D8B-FD3F50C21535@gmail.com>

Is there any way to control the built-in tree generation (from an  
initial parse phase) based on semantics of what is being parsed?

As a simple example,    if   I see the expression
        a + b

then I want to produce
     (PLUS a b)
or
    (CONCATENATE a b)

depending on whether a and b are numeric or string.


How can I do this with rewrite rules (for example)?   Or do I have to  
construct my own trees?


Thanks,
D

From r.bharath at huawei.com  Thu May 14 21:51:54 2009
From: r.bharath at huawei.com (Bharath R)
Date: Fri, 15 May 2009 10:21:54 +0530
Subject: [antlr-interest] How do I throw exception on ERROR "no viable
 alternative at character "
Message-ID: <010901c9d518$deefd200$2001120a@china.huawei.com>

Hi All ,
 
Currentl when I parse my String , I am getting some errors printed in the
console. 
 
Like below : - 
 
line 1:6 no viable alternative at character '?'
line 1:6 no viable alternative at character ' '
 
and for the other characters also ( '@' ,',' ) 
 
Instead of having the System.err , I need the parser to through the
exception. 
 
How Should I achieve this ?? 
 

HUAWEI TECHNOLOGIES CO.,LTD. huawei_logo 


Address: Huawei Industrial Base
Bantian Longgang
Shenzhen 518129, P.R.China
www.huawei.com
----------------------------------------------------------------------------
---------------------------------------------------------
This e-mail and its attachments contain confidential information from
HUAWEI, which 
is intended only for the person or entity whose address is listed above. Any
use of the 
information contained herein in any way (including, but not limited to,
total or partial 
disclosure, reproduction, or dissemination) by persons other than the
intended 
recipient(s) is prohibited. If you receive this e-mail in error, please
notify the sender by 
phone or email immediately and delete it!

 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090515/67466c28/attachment.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: att157f6.jpg
Type: image/jpeg
Size: 6737 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090515/67466c28/attachment.jpg 

From tbender at stud.hs-heilbronn.de  Fri May 15 01:43:02 2009
From: tbender at stud.hs-heilbronn.de (Tilman Bender)
Date: Fri, 15 May 2009 10:43:02 +0200
Subject: [antlr-interest] Modifying tree based on semantic content
In-Reply-To: <24627566-0373-41E0-9D8B-FD3F50C21535@gmail.com>
References: <24627566-0373-41E0-9D8B-FD3F50C21535@gmail.com>
Message-ID: <26CE5830-41E1-4800-9002-05486FFFEAD0@stud.hs-heilbronn.de>

Hi David,

I think this is possible with rewrite rules, but it depends on how you  
structure you grammar:

e.g. Have lexer rules for STRING, INT, FLOAT so you could do things like

expr:
	a=STRING '+' b=STRING -> ^(CONCATENATE a b)
|	a=number '+' b=number -> ^(PLUS a b)
;

number:
	INT
|	FLOAT
;

This is just a quick brain-dump but might give you hints in the right  
direction.

Tilman Bender
Student des Software Engineering
Hochschule Heilbronn
tbender at stud.hs-heilbronn.de



Am 15.05.2009 um 05:38 schrieb David Jameson:

> Is there any way to control the built-in tree generation (from an
> initial parse phase) based on semantics of what is being parsed?
>
> As a simple example,    if   I see the expression
>        a + b
>
> then I want to produce
>     (PLUS a b)
> or
>    (CONCATENATE a b)
>
> depending on whether a and b are numeric or string.
>
>
> How can I do this with rewrite rules (for example)?   Or do I have to
> construct my own trees?
>
>
> Thanks,
> D
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090515/08a36b68/attachment.html 

From tbender at stud.hs-heilbronn.de  Fri May 15 01:50:31 2009
From: tbender at stud.hs-heilbronn.de (Tilman Bender)
Date: Fri, 15 May 2009 10:50:31 +0200
Subject: [antlr-interest] How do I throw exception on ERROR "no viable
	alternative at character "
In-Reply-To: <010901c9d518$deefd200$2001120a@china.huawei.com>
References: <010901c9d518$deefd200$2001120a@china.huawei.com>
Message-ID: <6E01F532-942A-4F09-B5DA-78991E5535D0@stud.hs-heilbronn.de>

Hi,

Please have a look at the error reporting and recovery page on the wiki:

http://www.antlr.org/wiki/display/ANTLR3/Error+reporting+and+recovery

Maybe you could also override this:
http://www.antlr.org/api/Java/classorg_1_1antlr_1_1runtime_1_1_base_recognizer.html#6c32f5b03a9049357f3ddfbccee9a5e0

Allthough I am not sure this is a good idea.

HTH

Tilman Bender
Student des Software Engineering
Hochschule Heilbronn
tbender at stud.hs-heilbronn.de



Am 15.05.2009 um 06:51 schrieb Bharath R:

> Hi All ,
>
> Currentl when I parse my String , I am getting some errors printed  
> in the console.
>
> Like below : -
>
> line 1:6 no viable alternative at character '?'
> line 1:6 no viable alternative at character ' '
>
> and for the other characters also ( '@' ,',' )
>
> Instead of having the System.err , I need the parser to through the  
> exception.
>
> How Should I achieve this ??
>
>
>
> HUAWEI TECHNOLOGIES CO.,LTD. <att157f6.jpg>
>
>
> Address: Huawei Industrial Base
> Bantian Longgang
> Shenzhen 518129, P.R.China
> www.huawei.com
> -------------------------------------------------------------------------------------------------------------------------------------
> This e-mail and its attachments contain confidential information  
> from HUAWEI, which
> is intended only for the person or entity whose address is listed  
> above. Any use of the
> information contained herein in any way (including, but not limited  
> to, total or partial
> disclosure, reproduction, or dissemination) by persons other than  
> the intended
> recipient(s) is prohibited. If you receive this e-mail in error,  
> please notify the sender by
> phone or email immediately and delete it!
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090515/eb61f121/attachment.html 

From dhjdhj at gmail.com  Fri May 15 04:01:48 2009
From: dhjdhj at gmail.com (David Jameson)
Date: Fri, 15 May 2009 07:01:48 -0400
Subject: [antlr-interest] Modifying tree based on semantic content
In-Reply-To: <26CE5830-41E1-4800-9002-05486FFFEAD0@stud.hs-heilbronn.de>
References: <24627566-0373-41E0-9D8B-FD3F50C21535@gmail.com>
	<26CE5830-41E1-4800-9002-05486FFFEAD0@stud.hs-heilbronn.de>
Message-ID: <4A91ECCD-6403-4936-A996-C59352B571C5@gmail.com>

Tilman, thanks for the suggestion. Sadly, that approach will only work  
if a and b are literals. It will not work if the non-terminals a and/ 
or b represent identifiers whose type can only be determined by  
checking the symbol table.



Cheers,
D

On May 15, 2009, at 4:43 AM, Tilman Bender wrote:

> Hi David,
>
> I think this is possible with rewrite rules, but it depends on how  
> you structure you grammar:
>
> e.g. Have lexer rules for STRING, INT, FLOAT so you could do things  
> like
>
> expr:
> 	a=STRING '+' b=STRING -> ^(CONCATENATE a b)
> |	a=number '+' b=number -> ^(PLUS a b)
> ;
>
> number:
> 	INT
> |	FLOAT
> ;
>
> This is just a quick brain-dump but might give you hints in the  
> right direction.
>
> Tilman Bender
> Student des Software Engineering
> Hochschule Heilbronn
> tbender at stud.hs-heilbronn.de
>
>
>
> Am 15.05.2009 um 05:38 schrieb David Jameson:
>
>> Is there any way to control the built-in tree generation (from an
>> initial parse phase) based on semantics of what is being parsed?
>>
>> As a simple example,    if   I see the expression
>>        a + b
>>
>> then I want to produce
>>     (PLUS a b)
>> or
>>    (CONCATENATE a b)
>>
>> depending on whether a and b are numeric or string.
>>
>>
>> How can I do this with rewrite rules (for example)?   Or do I have to
>> construct my own trees?
>>
>>
>> Thanks,
>> D
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090515/825dda39/attachment.html 

From steve at hibernate.org  Fri May 15 04:26:14 2009
From: steve at hibernate.org (Steve Ebersole)
Date: Fri, 15 May 2009 06:26:14 -0500
Subject: [antlr-interest] Modifying tree based on semantic content
In-Reply-To: <24627566-0373-41E0-9D8B-FD3F50C21535@gmail.com>
References: <24627566-0373-41E0-9D8B-FD3F50C21535@gmail.com>
Message-ID: <1242386774.3385.9.camel@localhost.localdomain>

someRule
    : a PLUS b
        -> { areStrings($a.tree,$b.tree) } ^(CONCATENATE a b)
        -> ^(PLUS a b)

On Thu, 2009-05-14 at 23:38 -0400, David Jameson wrote:
> Is there any way to control the built-in tree generation (from an  
> initial parse phase) based on semantics of what is being parsed?
> 
> As a simple example,    if   I see the expression
>         a + b
> 
> then I want to produce
>      (PLUS a b)
> or
>     (CONCATENATE a b)
> 
> depending on whether a and b are numeric or string.
> 
> 
> How can I do this with rewrite rules (for example)?   Or do I have to  
> construct my own trees?
> 
> 
> Thanks,
> D
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
-- 
Steve Ebersole <steve at hibernate.org>
Hibernate.org


From dhjdhj at gmail.com  Fri May 15 04:34:43 2009
From: dhjdhj at gmail.com (David Jameson)
Date: Fri, 15 May 2009 07:34:43 -0400
Subject: [antlr-interest] Modifying tree based on semantic content
In-Reply-To: <1242386774.3385.9.camel@localhost.localdomain>
References: <24627566-0373-41E0-9D8B-FD3F50C21535@gmail.com>
	<1242386774.3385.9.camel@localhost.localdomain>
Message-ID: <BF71089B-405D-4BCD-B3E1-40B0D4F0EBB5@gmail.com>

I was not aware of this kind of construction. Thank you for bringing  
it to my attention.  Where is there an article that specifically  
discusses this mechanism? I couldn't find it in my ANTLR book nor  
through (a few) google searches?

In other words, what exactly is "areStrings(...)" --- is it just a  
function that returns boolean? I'm assuming that the syntax here  
implies that you can have a sequence of these
     -> { .... }   TREE
lines and that ANTRL looks for the first expression in braces that is  
"true"

Is that correct?

D


On May 15, 2009, at 7:26 AM, Steve Ebersole wrote:

> someRule
>    : a PLUS b
>        -> { areStrings($a.tree,$b.tree) } ^(CONCATENATE a b)
>        -> ^(PLUS a b)
>
> On Thu, 2009-05-14 at 23:38 -0400, David Jameson wrote:
>> Is there any way to control the built-in tree generation (from an
>> initial parse phase) based on semantics of what is being parsed?
>>
>> As a simple example,    if   I see the expression
>>        a + b
>>
>> then I want to produce
>>     (PLUS a b)
>> or
>>    (CONCATENATE a b)
>>
>> depending on whether a and b are numeric or string.
>>
>>
>> How can I do this with rewrite rules (for example)?   Or do I have to
>> construct my own trees?
>>
>>
>> Thanks,
>> D
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> -- 
> Steve Ebersole <steve at hibernate.org>
> Hibernate.org
>


From steve at hibernate.org  Fri May 15 04:57:40 2009
From: steve at hibernate.org (Steve Ebersole)
Date: Fri, 15 May 2009 06:57:40 -0500
Subject: [antlr-interest] Modifying tree based on semantic content
In-Reply-To: <BF71089B-405D-4BCD-B3E1-40B0D4F0EBB5@gmail.com>
References: <24627566-0373-41E0-9D8B-FD3F50C21535@gmail.com>
	<1242386774.3385.9.camel@localhost.localdomain>
	<BF71089B-405D-4BCD-B3E1-40B0D4F0EBB5@gmail.com>
Message-ID: <1242388660.3385.15.camel@localhost.localdomain>

On Fri, 2009-05-15 at 07:34 -0400, David Jameson wrote:
> I was not aware of this kind of construction. Thank you for bringing  
> it to my attention.  Where is there an article that specifically  
> discusses this mechanism? I couldn't find it in my ANTLR book nor  
> through (a few) google searches?
> 
> In other words, what exactly is "areStrings(...)" --- is it just a  
> function that returns boolean? I'm assuming that the syntax here  
> implies that you can have a sequence of these
>      -> { .... }   TREE
> lines and that ANTRL looks for the first expression in braces that is  
> "true"
Here specifically I would assume that areStrings(...) would be a grammar
member function so that the types of the 'a' and 'b' expressions could
be determined.  But in general yes, the fragment inside {} just needs to
evaluate to a boolean value.  I believe these are called rewrite
predicates(?).  And yes, just like regular predicates you can list
multiples and the first match will "win".

> Is that correct?
> 
> D
> 
> 
> On May 15, 2009, at 7:26 AM, Steve Ebersole wrote:
> 
> > someRule
> >    : a PLUS b
> >        -> { areStrings($a.tree,$b.tree) } ^(CONCATENATE a b)
> >        -> ^(PLUS a b)
> >
> > On Thu, 2009-05-14 at 23:38 -0400, David Jameson wrote:
> >> Is there any way to control the built-in tree generation (from an
> >> initial parse phase) based on semantics of what is being parsed?
> >>
> >> As a simple example,    if   I see the expression
> >>        a + b
> >>
> >> then I want to produce
> >>     (PLUS a b)
> >> or
> >>    (CONCATENATE a b)
> >>
> >> depending on whether a and b are numeric or string.
> >>
> >>
> >> How can I do this with rewrite rules (for example)?   Or do I have to
> >> construct my own trees?
> >>
> >>
> >> Thanks,
> >> D
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> > -- 
> > Steve Ebersole <steve at hibernate.org>
> > Hibernate.org
> >
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
-- 
Steve Ebersole <steve at hibernate.org>
Hibernate.org


From antlr at avadeaux.net  Fri May 15 05:03:16 2009
From: antlr at avadeaux.net (Jesper Larsson)
Date: Fri, 15 May 2009 14:03:16 +0200
Subject: [antlr-interest] Lexer matching non-matching rule
Message-ID: <1242388996.7669.18.camel@kevin>

Sorry if this is a stupid question, but if it is I hope it has a quick
stupid answer.

My ANTLR-generated lexer protests about unexpected characters in a
situation where it could have matched the input with other rules. My
understanding of ANTLR and other tools that generate lexers is that it
should use the rule that matches the most from the input, but here it
seems to pick a rule that does NOT match the input. Why does it do that?

Here is a pretty much minimal example that produces the problem:

=======================================================================
grammar Y;
options { output=AST; }

file
    : IDENT DOT EOF
    ;

IDENT:          ('a'..'z' | 'A'..'Z')+;
DOT:            '.';
WHITESPACE:     ('\f' | '\n' | '\r' | '\t' | ' ')+
                { $channel = HIDDEN; };

URL:            ('a'..'z') ('a'..'z' | '0'..'9' | '+' | '-' | '.')* ':'
                ~('\f' | '\n' | '\r' | '\t' | ' ')*;
=======================================================================

Here is a sample input:

=======================================================================
foo.
=======================================================================

I get the following complaint when using the lexer + parser:

line 1:4 mismatched character '\n' expecting ':'

But if I remove the URL lexer rule (which is not used by the parser),
the sample goes through just fine.

Can somebody explain this? Should not the lexer just bail out of the
URL rule when the input does not match it?

J'




From micha-1 at fantasymail.de  Fri May 15 06:09:24 2009
From: micha-1 at fantasymail.de (Michael)
Date: Fri, 15 May 2009 15:09:24 +0200
Subject: [antlr-interest] Lexer matching non-matching rule
In-Reply-To: <1242388996.7669.18.camel@kevin>
References: <1242388996.7669.18.camel@kevin>
Message-ID: <200905151509.24357.micha-1@fantasymail.de>

Am Friday 15 May 2009 14:03:16 schrieb Jesper Larsson:

>
> URL:            ('a'..'z') ('a'..'z' | '0'..'9' | '+' | '-' | '.')* ':'
>                 ~('\f' | '\n' | '\r' | '\t' | ' ')*;

if you leave out the dot in the URL rule it works as it should. 
If the dot is there the IDENT rule is not called but the URL rule is called 
which raises an exception since the colon is missing.
No idea why .

cheers
 Michael

From r.mark.volkmann at gmail.com  Fri May 15 06:14:12 2009
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Fri, 15 May 2009 08:14:12 -0500
Subject: [antlr-interest] ANTLR 3 grammar for C++
Message-ID: <f0fcc6820905150614k33dc2546k50762573f7728235@mail.gmail.com>

I'm looking for an ANTLR 3 grammar for C++. Does one exist?

-- 
R. Mark Volkmann
Object Computing, Inc.

From dhjdhj at gmail.com  Fri May 15 06:15:47 2009
From: dhjdhj at gmail.com (David Jameson)
Date: Fri, 15 May 2009 09:15:47 -0400
Subject: [antlr-interest] Modifying tree based on semantic content
In-Reply-To: <1242388660.3385.15.camel@localhost.localdomain>
References: <24627566-0373-41E0-9D8B-FD3F50C21535@gmail.com>
	<1242386774.3385.9.camel@localhost.localdomain>
	<BF71089B-405D-4BCD-B3E1-40B0D4F0EBB5@gmail.com>
	<1242388660.3385.15.camel@localhost.localdomain>
Message-ID: <8F34DA90-396C-4CAD-A8C4-FBBE72047FF5@gmail.com>

I hate to bother you with more on this but I ran into difficulty when  
I tried to translate the simple question/response into my real grammar.


My actual rule in my grammar is below --- I added two rewrite  
predicates, the idea being that if the type of LHS is a string, then  
my tree will have an extra token in it, making the tree parser grammar  
trivial.

However, when I try to generate the grammar from this, I get the error
     expecting RPAREN, found  '->'
and the row/col value indicates the beginning of the second predicate

I'm probably missing something stupid here but I can't see it.

D

--------------------------------------




expression returns [TAttributeType type]
                 :
                 optionalSign
                 lhs = simpleExpression
                    {
                       $type = $lhs.type;
                    }
                    (
                     (comparisonOperator^ rhs = simpleExpression)	
                     {
                        $type =  
TErrorHandling.Compatible($comparisonOperator.tree.token,  
$comparisonOperator.token, $lhs.type, $rhs.type);
                     } -> { isString($lhs.tree) } ^(comparisonOperator  
STRINGCOMPARE lhs rhs)
                       -> ^(comparisonOperator lhs rhs)
                    )* 	
	        ;


comparisonOperator returns [int token]
               : EQ { $token = EQ; }
               | NE { $token = NE; }
               | LT { $token = LT; }
               | LE { $token = LE; }
               | GT { $token = GT; }
               | GE { $token = GE; }





On May 15, 2009, at 7:57 AM, Steve Ebersole wrote:

> On Fri, 2009-05-15 at 07:34 -0400, David Jameson wrote:
>> I was not aware of this kind of construction. Thank you for bringing
>> it to my attention.  Where is there an article that specifically
>> discusses this mechanism? I couldn't find it in my ANTLR book nor
>> through (a few) google searches?
>>
>> In other words, what exactly is "areStrings(...)" --- is it just a
>> function that returns boolean? I'm assuming that the syntax here
>> implies that you can have a sequence of these
>>     -> { .... }   TREE
>> lines and that ANTRL looks for the first expression in braces that is
>> "true"
> Here specifically I would assume that areStrings(...) would be a  
> grammar
> member function so that the types of the 'a' and 'b' expressions could
> be determined.  But in general yes, the fragment inside {} just  
> needs to
> evaluate to a boolean value.  I believe these are called rewrite
> predicates(?).  And yes, just like regular predicates you can list
> multiples and the first match will "win".
>
>> Is that correct?
>>
>> D
>>
>>
>> On May 15, 2009, at 7:26 AM, Steve Ebersole wrote:
>>
>>> someRule
>>>   : a PLUS b
>>>       -> { areStrings($a.tree,$b.tree) } ^(CONCATENATE a b)
>>>       -> ^(PLUS a b)
>>>
>>> On Thu, 2009-05-14 at 23:38 -0400, David Jameson wrote:
>>>> Is there any way to control the built-in tree generation (from an
>>>> initial parse phase) based on semantics of what is being parsed?
>>>>
>>>> As a simple example,    if   I see the expression
>>>>       a + b
>>>>
>>>> then I want to produce
>>>>    (PLUS a b)
>>>> or
>>>>   (CONCATENATE a b)
>>>>
>>>> depending on whether a and b are numeric or string.
>>>>
>>>>
>>>> How can I do this with rewrite rules (for example)?   Or do I  
>>>> have to
>>>> construct my own trees?
>>>>
>>>>
>>>> Thanks,
>>>> D
>>>>
>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>> -- 
>>> Steve Ebersole <steve at hibernate.org>
>>> Hibernate.org
>>>
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> -- 
> Steve Ebersole <steve at hibernate.org>
> Hibernate.org
>


From dhjdhj at gmail.com  Fri May 15 06:19:12 2009
From: dhjdhj at gmail.com (David Jameson)
Date: Fri, 15 May 2009 09:19:12 -0400
Subject: [antlr-interest] Modifying tree based on semantic content
In-Reply-To: <1242388660.3385.15.camel@localhost.localdomain>
References: <24627566-0373-41E0-9D8B-FD3F50C21535@gmail.com>
	<1242386774.3385.9.camel@localhost.localdomain>
	<BF71089B-405D-4BCD-B3E1-40B0D4F0EBB5@gmail.com>
	<1242388660.3385.15.camel@localhost.localdomain>
Message-ID: <E3FE3DF9-7CA4-48DE-A35C-457800FD360C@gmail.com>

Hmmm,  answering my own question, it looks like you have to put a ?  
after the predicate

D

On May 15, 2009, at 7:57 AM, Steve Ebersole wrote:

> On Fri, 2009-05-15 at 07:34 -0400, David Jameson wrote:
>> I was not aware of this kind of construction. Thank you for bringing
>> it to my attention.  Where is there an article that specifically
>> discusses this mechanism? I couldn't find it in my ANTLR book nor
>> through (a few) google searches?
>>
>> In other words, what exactly is "areStrings(...)" --- is it just a
>> function that returns boolean? I'm assuming that the syntax here
>> implies that you can have a sequence of these
>>     -> { .... }   TREE
>> lines and that ANTRL looks for the first expression in braces that is
>> "true"
> Here specifically I would assume that areStrings(...) would be a  
> grammar
> member function so that the types of the 'a' and 'b' expressions could
> be determined.  But in general yes, the fragment inside {} just  
> needs to
> evaluate to a boolean value.  I believe these are called rewrite
> predicates(?).  And yes, just like regular predicates you can list
> multiples and the first match will "win".
>
>> Is that correct?
>>
>> D
>>
>>
>> On May 15, 2009, at 7:26 AM, Steve Ebersole wrote:
>>
>>> someRule
>>>   : a PLUS b
>>>       -> { areStrings($a.tree,$b.tree) } ^(CONCATENATE a b)
>>>       -> ^(PLUS a b)
>>>
>>> On Thu, 2009-05-14 at 23:38 -0400, David Jameson wrote:
>>>> Is there any way to control the built-in tree generation (from an
>>>> initial parse phase) based on semantics of what is being parsed?
>>>>
>>>> As a simple example,    if   I see the expression
>>>>       a + b
>>>>
>>>> then I want to produce
>>>>    (PLUS a b)
>>>> or
>>>>   (CONCATENATE a b)
>>>>
>>>> depending on whether a and b are numeric or string.
>>>>
>>>>
>>>> How can I do this with rewrite rules (for example)?   Or do I  
>>>> have to
>>>> construct my own trees?
>>>>
>>>>
>>>> Thanks,
>>>> D
>>>>
>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>> -- 
>>> Steve Ebersole <steve at hibernate.org>
>>> Hibernate.org
>>>
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> -- 
> Steve Ebersole <steve at hibernate.org>
> Hibernate.org
>


From r.bharath at huawei.com  Fri May 15 07:07:55 2009
From: r.bharath at huawei.com (Bharath R)
Date: Fri, 15 May 2009 19:37:55 +0530
Subject: [antlr-interest] How do I throw exception on ERROR "no
 viable	alternative at character "
In-Reply-To: <6E01F532-942A-4F09-B5DA-78991E5535D0@stud.hs-heilbronn.de>
References: <010901c9d518$deefd200$2001120a@china.huawei.com>
	<6E01F532-942A-4F09-B5DA-78991E5535D0@stud.hs-heilbronn.de>
Message-ID: <012d01c9d566$8bf7e7b0$2001120a@china.huawei.com>

Thanx a lot.  Its working fine ! 
 
I have overridden the below method in the parser and lexer code generated. 
 
public void displayRecognitionError
<http://www.antlr.org/api/Java/classorg_1_1antlr_1_1runtime_1_1_base_recogni
zer.html#85afd3931a36f93c5e1fee84349b5673> (String[]
tokenNames,RecognitionException
<http://www.antlr.org/api/Java/classorg_1_1antlr_1_1runtime_1_1_recognition_
exception.html>  e)

The exception can be handled , but i am facing 2 below issues 
 
1. getting the passed input from the Lexer code. 
    Let say I have passed the string input , but from the lexer code I cant
able to get the "input" string passed. 
    I am expecting the same behaviour as the paser . ( where the input
variable is accessible ). 
 
2. Embedding the code to lexer , when i override the method in the grammar
file. Its inserted only in the parser code not 
    in the lexer code. 
 
HUAWEI TECHNOLOGIES CO.,LTD. huawei_logo 


Address: Huawei Industrial Base
Bantian Longgang
Shenzhen 518129, P.R.China
www.huawei.com
----------------------------------------------------------------------------
---------------------------------------------------------
This e-mail and its attachments contain confidential information from
HUAWEI, which 
is intended only for the person or entity whose address is listed above. Any
use of the 
information contained herein in any way (including, but not limited to,
total or partial 
disclosure, reproduction, or dissemination) by persons other than the
intended 
recipient(s) is prohibited. If you receive this e-mail in error, please
notify the sender by 
phone or email immediately and delete it!

 

  _____  

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Tilman Bender
Sent: Friday, May 15, 2009 2:21 PM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] How do I throw exception on ERROR "no viable
alternative at character "


Hi, 

Please have a look at the error reporting and recovery page on the wiki:

http://www.antlr.org/wiki/display/ANTLR3/Error+reporting+and+recovery

Maybe you could also override this:
http://www.antlr.org/api/Java/classorg_1_1antlr_1_1runtime_1_1_base_recogniz
er.html#6c32f5b03a9049357f3ddfbccee9a5e0

Allthough I am not sure this is a good idea.

HTH

Tilman Bender
Student des Software Engineering
Hochschule Heilbronn
tbender at stud.hs-heilbronn.de



Am 15.05.2009 um 06:51 schrieb Bharath R:


Hi All ,
 
Currentl when I parse my String , I am getting some errors printed in the
console. 
 
Like below : - 
 
line 1:6 no viable alternative at character '?'

line 1:6 no viable alternative at character ' '
 
and for the other characters also ( '@' ,',' ) 
 
Instead of having the System.err , I need the parser to through the
exception. 
 
How Should I achieve this ?? 
 


HUAWEI TECHNOLOGIES CO.,LTD. <att157f6.jpg> 


Address: Huawei Industrial Base
Bantian Longgang
Shenzhen 518129, P.R.China
www.huawei.com
----------------------------------------------------------------------------
---------------------------------------------------------
This e-mail and its attachments contain confidential information from
HUAWEI, which 
is intended only for the person or entity whose address is listed above. Any
use of the 
information contained herein in any way (including, but not limited to,
total or partial 
disclosure, reproduction, or dissemination) by persons other than the
intended 
recipient(s) is prohibited. If you receive this e-mail in error, please
notify the sender by 
phone or email immediately and delete it!

 

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090515/4df87964/attachment.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: attbb472.jpg
Type: image/jpeg
Size: 6737 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090515/4df87964/attachment.jpg 

From tbender at stud.hs-heilbronn.de  Fri May 15 07:24:12 2009
From: tbender at stud.hs-heilbronn.de (Tilman Bender)
Date: Fri, 15 May 2009 16:24:12 +0200
Subject: [antlr-interest] How do I throw exception on ERROR "no
	viable	alternative at character "
In-Reply-To: <012d01c9d566$8bf7e7b0$2001120a@china.huawei.com>
References: <010901c9d518$deefd200$2001120a@china.huawei.com>
	<6E01F532-942A-4F09-B5DA-78991E5535D0@stud.hs-heilbronn.de>
	<012d01c9d566$8bf7e7b0$2001120a@china.huawei.com>
Message-ID: <F327D844-E603-4957-9106-CDECA4EFD91F@stud.hs-heilbronn.de>

Hi,

Good to hear it works for you. But you probably shouldn't do that in  
the generated code or it will be gone
once you need to regenerate the Praser/Lexer in case you change  
something. Instead you should do
the overriding in a @members{} block like it is described on the wiki- 
page.

hth

Tilman Bender
Student des Software Engineering
Hochschule Heilbronn
tbender at stud.hs-heilbronn.de



Am 15.05.2009 um 16:07 schrieb Bharath R:

> I have overridden the below method in the parser and lexer code  
> generated.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090515/8cb24d7d/attachment.html 

From jay.chetty at intel.com  Fri May 15 09:55:23 2009
From: jay.chetty at intel.com (Chetty, Jay)
Date: Fri, 15 May 2009 09:55:23 -0700
Subject: [antlr-interest] How to free ANTLR3_STRING (c runtime)?
Message-ID: <2EBBC96B326FDE479F15A609ECF7171F2CE54ACD@orsmsx503.amr.corp.intel.com>

What's the right way to free the ANTLR3_STRING returned from
pANTLR3TOKEN_STREAM's toStringSS()


I used destroy method of the string factory and it seems that's not the right way
As I get these lines when my executable exists.

*** glibc detected *** double free or corruption (fasttop): 0x081514b8 ***
*** glibc detected *** double free or corruption (!prev): 0x081641a8 ***

Thanks
+Jay

From jimi at temporal-wave.com  Fri May 15 10:53:30 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 15 May 2009 10:53:30 -0700
Subject: [antlr-interest] How to free ANTLR3_STRING (c runtime)?
In-Reply-To: <2EBBC96B326FDE479F15A609ECF7171F2CE54ACD@orsmsx503.amr.corp.intel.com>
References: <2EBBC96B326FDE479F15A609ECF7171F2CE54ACD@orsmsx503.amr.corp.intel.com>
Message-ID: <4A0DAC1A.4060607@temporal-wave.com>

Chetty, Jay wrote:
> What's the right way to free the ANTLR3_STRING returned from
> pANTLR3TOKEN_STREAM's toStringSS()
>
>
> I used destroy method of the string factory and it seems that's not the right way
> As I get these lines when my executable exists.
>
> *** glibc detected *** double free or corruption (fasttop): 0x081514b8 ***
> *** glibc detected *** double free or corruption (!prev): 0x081641a8 ***
>   
The correct way is to do nothing at all:-). The string factory tracks 
the memory and releases it once you close the factory. The factory will 
be created by the token or node stream and will be closed when you free 
the token or node stream.

Note that the string factory stuff is basically convenience methods for 
things like toStringTree(). If you need pure performance, then you 
should access the token structures yourself.

You can use valgrind to check that all your memory is being freed correctly.

Also note that while making a string from the AST is a quick way of 
looking at your tree, you might find the dot generator and the dot 
program much more useful (install graphviz from your distro or 
www.graphviz.org).

To use it from C, you just do this:

pANTLR3_STRING    dotSpec;
dotSpec = nodes->adaptor->makeDot(nodes->adaptor, psrReturn.tree);

Where nodes is the pANTLR3_COMMON_TREE_NODE_STREAM and psrReturn is the 
return type of the rule you invoke on your parser.

You can then fwrite the spec to a text file:

dotSpec = dotSpec->toUTF8(dotSpec);   // Only need this if your input 
was not 8 bit characters
fwrite((const void *) dotSpec->chars, 1, (size_t) dotSpec->len, dotFILE);

Then turn this in to a neat png graphic like this:

sprintf(command, "dot -Tpng -o%spng %sdot", dotFname, dotFname);
system(command)

Jim

From jay.chetty at intel.com  Fri May 15 11:22:32 2009
From: jay.chetty at intel.com (Chetty, Jay)
Date: Fri, 15 May 2009 11:22:32 -0700
Subject: [antlr-interest] How to free ANTLR3_STRING (c runtime)?
In-Reply-To: <4A0DAC1A.4060607@temporal-wave.com>
References: <2EBBC96B326FDE479F15A609ECF7171F2CE54ACD@orsmsx503.amr.corp.intel.com>
	<4A0DAC1A.4060607@temporal-wave.com>
Message-ID: <2EBBC96B326FDE479F15A609ECF7171F2CE54BB2@orsmsx503.amr.corp.intel.com>

Jim thanks for the reply.

My understanding was also that string factory will manage the life time of the strings it created.
But ran into out of memory issue on a 32 bit machine, so thought of freeing up some strings that 
Were created while forward looking some tokens during error reporting.

As you suggested I will access the token structure directly.

And thanks for info on dot generator , I will give it a try.

Note:
By the way the toStringSS() function doesn't check for the pointer returned by the string factory 
(so and seg faults when out of memory).


static pANTLR3_STRING	    
toStringSS   (pANTLR3_TOKEN_STREAM ts, ANTLR3_UINT32 start, ANTLR3_UINT32 stop)
{
	...
	
	string	= tsource->strFactory->newRaw(tsource->strFactory);

	for (i = start; i <= stop; i++)
	{
	    tok	= ts->get(ts, i);

	    if	(tok != NULL)
	    {
		string->appendS(string, tok->getText(tok));
	    }
	}

    ...
}

Thanks
+Jay
 
-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jim Idle
Sent: Friday, May 15, 2009 10:54 AM
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] How to free ANTLR3_STRING (c runtime)?

Chetty, Jay wrote:
> What's the right way to free the ANTLR3_STRING returned from
> pANTLR3TOKEN_STREAM's toStringSS()
>
>
> I used destroy method of the string factory and it seems that's not the right way
> As I get these lines when my executable exists.
>
> *** glibc detected *** double free or corruption (fasttop): 0x081514b8 ***
> *** glibc detected *** double free or corruption (!prev): 0x081641a8 ***
>   
The correct way is to do nothing at all:-). The string factory tracks 
the memory and releases it once you close the factory. The factory will 
be created by the token or node stream and will be closed when you free 
the token or node stream.

Note that the string factory stuff is basically convenience methods for 
things like toStringTree(). If you need pure performance, then you 
should access the token structures yourself.

You can use valgrind to check that all your memory is being freed correctly.

Also note that while making a string from the AST is a quick way of 
looking at your tree, you might find the dot generator and the dot 
program much more useful (install graphviz from your distro or 
www.graphviz.org).

To use it from C, you just do this:

pANTLR3_STRING    dotSpec;
dotSpec = nodes->adaptor->makeDot(nodes->adaptor, psrReturn.tree);

Where nodes is the pANTLR3_COMMON_TREE_NODE_STREAM and psrReturn is the 
return type of the rule you invoke on your parser.

You can then fwrite the spec to a text file:

dotSpec = dotSpec->toUTF8(dotSpec);   // Only need this if your input 
was not 8 bit characters
fwrite((const void *) dotSpec->chars, 1, (size_t) dotSpec->len, dotFILE);

Then turn this in to a neat png graphic like this:

sprintf(command, "dot -Tpng -o%spng %sdot", dotFname, dotFname);
system(command)

Jim

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From dhjdhj at gmail.com  Fri May 15 11:34:38 2009
From: dhjdhj at gmail.com (dhjdhj)
Date: Fri, 15 May 2009 14:34:38 -0400
Subject: [antlr-interest] Hopefully just a little more help with syntax for
	semantic predicates?
Message-ID: <11774911-1D1F-4111-B235-E299335DB714@gmail.com>

I have been trying all day to get the rule below accepted (oh yeah,  
that doesn't count about 2 hours wasted before I figured out that you  
can't have a space after the right curly brace and the question mark  
in a semantic predicate  (grin))

I get a "cannot generate the grammar because" error  which is

     rule expression alt 1 uses rewrite syntax and also an AST operator

Now, I'm pretty certain this is happening because of the "^" that  
follows lhs = simpleExpression^ in the first section of the rule.

However, removing that operator causes no tree node to be generated in  
the case where there is just a simple expression.  However, I tried  
removing that operator and adding a rewrite rule after the FIRST  
closing right brace, e.g.

                lhs = simpleExpression
                   {
                      $type = $lhs.type;
                   } -> ^($lhs)

and many variants but this just caused ANTLR to complain that  
comparisonOperator was an unexpected token.  I also tried inserting a  
third predicate in the bottom group that would test whether $rhs was  
null and just put out the $lhs in that case but that didn't work either.

Can somebody please put me out of my misery (in a kind manner (grin))  
and show me what I'm doing wrong? I'd love to have a quiet weekend  
with no problems to worry about!!!

Thanks,
D

------------------------------------------------------------------







expression returns [TAttributeType type]
                :
                optionalSign
                lhs = simpleExpression^
                   {
                      $type = $lhs.type;
                   }
                   (
                    (comparisonOperator rhs = simpleExpression)	
                    {
                       $type =  
TErrorHandling.Compatible($comparisonOperator.tree.token,  
$comparisonOperator.token, $lhs.type, $rhs.type);
                    }

                      -> { isString($lhs.type) }? ^(comparisonOperator  
STRINGOP $lhs $rhs)
                      ->  ^(comparisonOperator $lhs $rhs)
                   )* 	
	        ;


From jimi at temporal-wave.com  Fri May 15 16:27:18 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 15 May 2009 16:27:18 -0700
Subject: [antlr-interest] How to free ANTLR3_STRING (c runtime)?
In-Reply-To: <2EBBC96B326FDE479F15A609ECF7171F2CE54BB2@orsmsx503.amr.corp.intel.com>
References: <2EBBC96B326FDE479F15A609ECF7171F2CE54ACD@orsmsx503.amr.corp.intel.com>
	<4A0DAC1A.4060607@temporal-wave.com>
	<2EBBC96B326FDE479F15A609ECF7171F2CE54BB2@orsmsx503.amr.corp.intel.com>
Message-ID: <4A0DFA56.5020504@temporal-wave.com>

Chetty, Jay wrote:
> Jim thanks for the reply.
>
> My understanding was also that string factory will manage the life time of the strings it created.
> But ran into out of memory issue on a 32 bit machine, so thought of freeing up some strings that 
> Were created while forward looking some tokens during error reporting.
>   
> As you suggested I will access the token structure directly.
>   
It is better if you are building big outputs, but string factory is fine 
for smaller outputs where you just want something that looks after 
memory for you and so on.
> And thanks for info on dot generator , I will give it a try.
>
> Note:
> By the way the toStringSS() function doesn't check for the pointer returned by the string factory 
> (so and seg faults when out of memory).
>   
It probably should, but you must be creating some huge structure for it 
to run out of memory. What are you parsing?

Or do you have your ulimits very low or something? Make sure you are are 
running 3.1.3 runtime as this has a fair bit of memory optimization on 
tree building.


Jim

From indhu.b at s7software.com  Fri May 15 19:57:42 2009
From: indhu.b at s7software.com (Indhu Bharathi)
Date: Sat, 16 May 2009 08:27:42 +0530
Subject: [antlr-interest] Lexer matching non-matching rule
In-Reply-To: <200905151509.24357.micha-1@fantasymail.de>
References: <1242388996.7669.18.camel@kevin>
	<200905151509.24357.micha-1@fantasymail.de>
Message-ID: <4A0E2BA6.9020400@s7software.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090516/99da9eee/attachment.html 

From antlr at avadeaux.net  Sat May 16 03:52:13 2009
From: antlr at avadeaux.net (Jesper Larsson)
Date: Sat, 16 May 2009 12:52:13 +0200
Subject: [antlr-interest] Lexer matching non-matching rule
In-Reply-To: <4A0E2BA6.9020400@s7software.com>
References: <1242388996.7669.18.camel@kevin>
	<200905151509.24357.micha-1@fantasymail.de>
	<4A0E2BA6.9020400@s7software.com>
Message-ID: <1242471133.6197.56.camel@kevin>

On Sat, 2009-05-16 at 08:27 +0530, Indhu Bharathi wrote:
> This is because on seeing 'f' of foo lexer has two options - 1. IDENT
> 2. URL. And it takes the second options since that seems to be longer
> that the first alternative. Note that the lexer always tries to match
> the longest token possible. 
> 
> After having decided to go for URL, it matches the input with URL and
> it fails. Lexer doesn't backtrack and hence throws an exception.

I suppose the key here is "lexer doesn't backtrack". The following
grammar has no problem matching inputs "foo" and "foobar", even though
one is a prefix of the other:

===============================================
grammar Y;
options { output=AST; }

file: (FOO|BAR|FOOBAR)* EOF;


FOO:    'foo';
BAR:    'bar';
FOOBAR: 'foobar';
SPACE:  (' ' | '\n')+  { $channel = HIDDEN; };
===============================================

If I remove the FOOBAR token from this grammar, input "foobar" is
matched as two tokens FOO BAR. But if instead I change the FOOBAR token
by adding another letter like this:

FOOBAR: 'foobarz';

Then the lexer fails to match "foobar" as two tokens, complaining about
a missing 'z'. It can still match "foo" however.

So if I dare to extrapolate something from this, it looks like that
while one token may be the prefix of another (obviously, otherwise it
would be difficult to create lexers for most programming languages), it
must not be the case that a proper prefix of one token can be matched as
more than one token. Is that it?

I can understand the motivation of this restriction in the interest of
keeping the lexer target code at a certain complexity level, but I have
not seen it stated in the documentation. It would have been nice if the
lexer generator had issued a warning.

J'




From bestgembler at hotmail.com  Sat May 16 08:39:46 2009
From: bestgembler at hotmail.com (=?gb2312?B?s8K/rbPJ?=)
Date: Sat, 16 May 2009 23:39:46 +0800
Subject: [antlr-interest] how to match any char between two string?
Message-ID: <COL113-W255ED8CAAD4A7B553E292DB95C0@phx.gbl>


Hi!

I hava to intercept a expression between two string, and then send to another application.

like a Java regex, for example:

// -------------------------------------------------------------------------
// Java Code Begin
// -------------------------------------------------------------------------

String regex  = "select\\s+((.)+)\\s+from";
Pattern p = Pattern.complie(regex);
Matcher m = p.matcher("select stu.id as 'Student ID', stu.name as 'Student Name' from");
String select = null;
if(m.find()){
    select = m.group(1);
}
System.out.println(select);// print [stu.id as 'Student ID', stu.name as 'Student Name']
send(select);// send to another application.

// -------------------------------------------------------------------------

// Java Code End

// -------------------------------------------------------------------------

I try to write a sample grammar file, but it dosen't works.

// -------------------------------------------------------------------------

// Grammar File Begin

// -------------------------------------------------------------------------

start        :    'select' WS SELECT WS 'from';
SELECT    :    (.)+ {
    System.out.println(getText());
    send(getText());
};
WS         :    ( '\t' | ' ' | '\r' | '\n'| '\u000C' )+;

// -------------------------------------------------------------------------


// Grammar File End


// -------------------------------------------------------------------------

I get a error message as follow when I generate code:

// -------------------------------------------------------------------------


// Error Message Begin


// -------------------------------------------------------------------------

[23:31:49] error(208): Sql.g:28:1: The following token definitions can never be matched because prior tokens match the same input: WS

// -------------------------------------------------------------------------


// Message Begin


// -------------------------------------------------------------------------

Thanks a lot!

---------------------------------
THE
     POWER
             OF
                JAVA



_________________________________________________________________
?MClub?Messenger?????????
http://club.msn.cn/?from=1
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090516/79bbce88/attachment.html 

From micha-1 at fantasymail.de  Sat May 16 11:29:31 2009
From: micha-1 at fantasymail.de (Micha)
Date: Sat, 16 May 2009 20:29:31 +0200
Subject: [antlr-interest] Lexer matching non-matching rule
In-Reply-To: <1242471133.6197.56.camel@kevin>
References: <1242388996.7669.18.camel@kevin> <4A0E2BA6.9020400@s7software.com>
	<1242471133.6197.56.camel@kevin>
Message-ID: <200905162029.32142.micha-1@fantasymail.de>

On Saturday 16 May 2009 12:52:13 Jesper Larsson wrote:
> On Sat, 2009-05-16 at 08:27 +0530, Indhu Bharathi wrote:
> > This is because on seeing 'f' of foo lexer has two options - 1. IDENT
> > 2. URL. And it takes the second options since that seems to be longer
> > that the first alternative. Note that the lexer always tries to match
> > the longest token possible.

but it fails to do so here.

>
> I can understand the motivation of this restriction in the interest of
> keeping the lexer target code at a certain complexity level, but I have
> not seen it stated in the documentation. It would have been nice if the
> lexer generator had issued a warning.

right. I don't like that behavior too, maybe it's because the antlr lexer is 
similar to a recursive descent parser. I think it should just return the 
longest match.

 Michael



From indhu.b at s7software.com  Sat May 16 11:27:41 2009
From: indhu.b at s7software.com (Indhu Bharathi)
Date: Sat, 16 May 2009 23:57:41 +0530
Subject: [antlr-interest] how to match any char between two string?
In-Reply-To: <COL113-W255ED8CAAD4A7B553E292DB95C0@phx.gbl>
References: <COL113-W255ED8CAAD4A7B553E292DB95C0@phx.gbl>
Message-ID: <4A0F059D.6000608@s7software.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090516/b9ffbdd5/attachment.html 

From jimi at temporal-wave.com  Sat May 16 19:01:01 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 16 May 2009 19:01:01 -0700
Subject: [antlr-interest] Lexer matching non-matching rule
In-Reply-To: <200905162029.32142.micha-1@fantasymail.de>
References: <1242388996.7669.18.camel@kevin>
	<4A0E2BA6.9020400@s7software.com>	<1242471133.6197.56.camel@kevin>
	<200905162029.32142.micha-1@fantasymail.de>
Message-ID: <4A0F6FDD.8000108@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090516/9927b84e/attachment.html 

From antlr at avadeaux.net  Sun May 17 02:01:36 2009
From: antlr at avadeaux.net (Jesper Larsson)
Date: Sun, 17 May 2009 11:01:36 +0200
Subject: [antlr-interest] Lexer matching non-matching rule
In-Reply-To: <1242550704.5855.39.camel@kevin>
References: <1242388996.7669.18.camel@kevin>
	<4A0E2BA6.9020400@s7software.com>	<1242471133.6197.56.camel@kevin>
	<200905162029.32142.micha-1@fantasymail.de>
	<4A0F6FDD.8000108@temporal-wave.com> <1242550704.5855.39.camel@kevin>
Message-ID: <1242550896.5855.42.camel@kevin>

> If you want the longest match, then left factor everything and let it
> do that: 
> 
> A ( B (C|) |) ;
> 
> And set the token type at the appropriate points.

Not always so easy, however. My original example was, even more
simplified, something like this:

FOO:    'foo';
BAR:    'bar';
FOOZ:   'foo'* 'z';

It might be possible to refactor using emit() or something, I'm not
sure. Difficult, anyway. An alternative would be to force backtracking
using syntactic predicates in the manner Indhu suggested in a previous
reply, but that means the lexer would scan the same input more than
once, and avoiding this is sort of why I use a lexer generator tool
instead of just matching the input with regexps to start with.

By the way, I got around my own problem with the URL/IDENT conflict by
incorporating the URL in the larger context where it appears, getting a
larger token from the lexer which is split up later. This seemed to be
the most bearable inelegancy in my situation.

J'




From micha-1 at fantasymail.de  Sun May 17 03:48:06 2009
From: micha-1 at fantasymail.de (Micha)
Date: Sun, 17 May 2009 12:48:06 +0200
Subject: [antlr-interest] Lexer matching non-matching rule
In-Reply-To: <1242550896.5855.42.camel@kevin>
References: <1242388996.7669.18.camel@kevin> <1242550704.5855.39.camel@kevin>
	<1242550896.5855.42.camel@kevin>
Message-ID: <200905171248.06847.micha-1@fantasymail.de>

On Sunday 17 May 2009 11:01:36 Jesper Larsson wrote:
> > If you want the longest match, then left factor everything and let it
> > do that:
> >
> > A ( B (C|) |) ;
> >
> > And set the token type at the appropriate points.
>
> Not always so easy, however. My original example was, even more
> simplified, something like this:
>
> FOO:    'foo';
> BAR:    'bar';
> FOOZ:   'foo'* 'z';
>

that works with the method mentioned earlier:

start	:	( FOO { System.out.println("foo, ");} 
                | FOOZ { System.out.println("FOOZ, ");} )* EOF;

WS	:	(' ' | '\t' | '\n')+ { skip(); };

fragment FOO	: ;

fragment FOOZ: ;
	
FOO_OR_FOOZ
	:	(
			'foo' { $type = FOO; }
			('foo'* 'z' { $type = FOOZ;} )?	
		) 
		| 'z' { $type = FOOZ;};
		

 Michael


From antlr at avadeaux.net  Sun May 17 04:22:37 2009
From: antlr at avadeaux.net (Jesper Larsson)
Date: Sun, 17 May 2009 13:22:37 +0200
Subject: [antlr-interest] Lexer matching non-matching rule
In-Reply-To: <200905171248.06847.micha-1@fantasymail.de>
References: <1242388996.7669.18.camel@kevin>
	<1242550704.5855.39.camel@kevin> <1242550896.5855.42.camel@kevin>
	<200905171248.06847.micha-1@fantasymail.de>
Message-ID: <1242559357.5855.55.camel@kevin>

On Sun, 2009-05-17 at 12:48 +0200, Micha wrote:
> On Sunday 17 May 2009 11:01:36 Jesper Larsson wrote:
> > Not always so easy, however. My original example was, even more
> > simplified, something like this:
> >
> > FOO:    'foo';
> > BAR:    'bar';
> > FOOZ:   'foo'* 'z';
> >
> 
> that works with the method mentioned earlier:

Hm, as far as I can tell your variant has exactly the same problems as
mine. The following grammar, incorporating the trick from yours, can
match "foobar" as FOO BAR but fails on "foofoobar":

============================================
grammar Y;
options { output=AST; }

file: (FOO|BAR|FOOZ)* EOF;

fragment FOO:   ;
fragment FOOZ:  ;
BAR:            'bar';
WS:             (' ' | '\n')+ { skip(); };

FOO_OR_FOOZ:    (
    'foo' { $type = FOO; }
    ('foo'* 'z' { $type = FOOZ; })?
)
| 'z' { $type = FOOZ;};
============================================

J'




From micha-1 at fantasymail.de  Sun May 17 04:56:31 2009
From: micha-1 at fantasymail.de (Micha)
Date: Sun, 17 May 2009 13:56:31 +0200
Subject: [antlr-interest] Lexer matching non-matching rule
In-Reply-To: <1242559357.5855.55.camel@kevin>
References: <1242388996.7669.18.camel@kevin>
	<200905171248.06847.micha-1@fantasymail.de>
	<1242559357.5855.55.camel@kevin>
Message-ID: <200905171356.31698.micha-1@fantasymail.de>

On Sunday 17 May 2009 13:22:37 Jesper Larsson wrote:
> On Sun, 2009-05-17 at 12:48 +0200, Micha wrote:
> > On Sunday 17 May 2009 11:01:36 Jesper Larsson wrote:
> > > Not always so easy, however. My original example was, even more
> > > simplified, something like this:
> > >
> > > FOO:    'foo';
> > > BAR:    'bar';
> > > FOOZ:   'foo'* 'z';
> >
> > that works with the method mentioned earlier:
>
> Hm, as far as I can tell your variant has exactly the same problems as
> mine. The following grammar, incorporating the trick from yours, can
> match "foobar" as FOO BAR but fails on "foofoobar":

*Argh*  you need the synpred again:


> ============================================
> grammar Y;
> options { output=AST; }

start	:	( FOO { System.out.println("foo, ");} 
		| BAR { System.out.println("bar, ");}
                | FOOZ { System.out.println("FOOZ, ");} )* EOF;

WS	:	(' ' | '\t' | '\n')+ { skip(); };

fragment
FOO	:	;

BAR	:	'bar';

fragment FOOZ
	:	;
	
fragment FOOZ_LA
	:	'foo'* 'z';	
	
FOO_OR_FOOZ
	:	(
			'foo' { $type = FOO; }
			((FOOZ_LA) => FOOZ_LA { $type = FOOZ;})?
		) 
		| 'z' { $type = FOOZ;};
		
		


 Michael

From steve at hibernate.org  Sun May 17 08:07:34 2009
From: steve at hibernate.org (Steve Ebersole)
Date: Sun, 17 May 2009 10:07:34 -0500
Subject: [antlr-interest] Modifying tree based on semantic content
In-Reply-To: <8725BF26-869E-4DAB-8A23-0E16EA593E7D@gmail.com>
References: <24627566-0373-41E0-9D8B-FD3F50C21535@gmail.com>
	<1242386774.3385.9.camel@localhost.localdomain>
	<8725BF26-869E-4DAB-8A23-0E16EA593E7D@gmail.com>
Message-ID: <1242572854.27258.63.camel@localhost.localdomain>

I am not an Antlr3 expert, I really just started myself about a month
ago (moving from v2).  It really is probably best to get an answer from
the list.  You are correct though, you cannot mix the two approaches.

That being said...

The most straight-forward way from your existing grammar rule AFAIK is
to rewrite the initial simpleExpression result (removing optionalSign
since I did not understand its purpose here):

expression returns [TAttributeType type]
@init { boolean isStringComparison=false; }
    :   ( simpleExpression -> simpleExpression ) {
            $type = $expression.type;
            isStringComparison = isString( $expression.type );
        } ( 
            comparisonOperator rhs = simpleExpression {
                $type=...;
            }
            -> { isStringComparison }?
                    ^( STRINGOP $expression $rhs )
            ->
                    ^(comparisonOperator $lhs $rhs)
        )*
    ;

Note too that because of the '*' surrounding your "(comparisonOperator
rhs = simpleExpression)" recognition and the fact that you ref "lhs" in
the rewrite, I think you will actually end up with trees like:
^( PLUS 'lhs' ^( PLUS 'lhs' 'rhs2 ) ) 
instead of what I think you probably wanted:
^( PLUS 'lhs' ^( PLUS 'rhs1' 'rhs2 ) )

Also, if you wanted to keep this resulting tree structure, a better
option is probably to recurse the rule:

expression
    : ( lhs=simpleExpression -> simpleExpression ) 
      ( 
          ( comparisonOperator rhs=expression ) 
              -> { isString( $lhs.type ) }? 
                  ^( STRINGOP $lhs $rhs )
              ->
                  ^( comparisonOperator $lhs $rhs )
      )? 
    ;

See that 'rhs' recurses back into this rule..

(I *think* that the '$lhs' references will work here but am not 100%
sure.  try it out.  we use $expression rather than a label)


Personally I'd be very uncomfortable with your notion of "comparison
operator".  I believe in your original email you were asking about '+'
here.  Neither addition nor concatenation is a "comparison".  I think
you may be trying to handle multiple, unequal concepts here.  In my
experience that causes problems.  I would look to split the notions of
"comparison" and PLUS/MINUS/MULTIPLY/DIVIDE/CONCATENATE.  Why?  Well as
you see they are very different both structurally and semantically.  For
example, most comparison operators (aside from something like a SQL's
BETWEEN operator e.g.) are "binary operand" (two sides) operators;
PLUS/MINUS/MULTIPLY/DIVIDE/CONCATENATE are all "chained" meaning that
^( PLUS op1 ^( PLUS op2 op3 ) ) is semantically the same as ^( PLUS op1
op2 op3).  Same for concatenation: ^( CONCAT op1 ^( CONCAT op2 op3) ) is
the same as ^( CONCAT op1 op2 op ).  Antlr rewrite rules have a nice way
to treat this "rolling up":

addition
    : additionOperand ( PLUS additionOperand )+
          -> ^( PLUS additionOperand+ )
    ;

Or in your case, something like:
addition
@init { boolean isString=false; }
    : lhs=additionOperand {isString=...;} ( PLUS additionOperand )+
        -> {isString}? ^( CONCAT additionOperand )+
        -> ^( PLUS additionOperand+ )
    ;

Anyway, hope that helps...

On Sun, 2009-05-17 at 09:36 -0400, David Jameson wrote:
> Steve, I hate to bother you personally but you were the only one who  
> responded and pointed me in the right direction. Nobody but you had an  
> answer to my initial question and in the context of "no good deed goes  
> unpunished", I'm really hoping you can spot what I am doing wrong as  
> I've been pulling my hair out most of the weekend trying to get ANTLR  
> to accept the "fixes"
> 
> Many thanks,
> D
> 
> ---------------------------
> 
> 
> 
> 
> 
> 
> I have been trying all day to get the rule below accepted.
> 
> 
> expression returns [TAttributeType type]
>                :
>                optionalSign
>                lhs = simpleExpression^
>                   {
>                      $type = $lhs.type;
>                   }
>                   (
>                    (comparisonOperator rhs = simpleExpression)	
>                    {
>                       $type =  
> TErrorHandling.Compatible($comparisonOperator.tree.token,  
> $comparisonOperator.token, $lhs.type, $rhs.type);
>                    }
> 
>                      -> { isString($lhs.type) }? ^(comparisonOperator  
> STRINGOP $lhs $rhs)
>                      ->  ^(comparisonOperator $lhs $rhs)
>                   )* 	
> 	        ;
> 
> 
> 
> 
> 
> I get a "cannot generate the grammar because" error  which is
> 
>     rule expression alt 1 uses rewrite syntax and also an AST operator
> 
> Now, I'm pretty certain this is happening because of the "^" that  
> follows lhs = simpleExpression^ in the first section of the rule.
> 
> However, removing that operator causes no tree node to be generated in  
> the case where there is just a simple expression and that breaks the  
> results.  However, I tried removing that operator and adding a rewrite  
> rule after the FIRST closing right brace, e.g.
> 
>                lhs = simpleExpression
>                   {
>                      $type = $lhs.type;
>                   } -> ^($lhs)
> 
> and many variants but this just caused ANTLR to complain that  
> comparisonOperator was an unexpected token.  I also tried inserting a  
> third predicate in the bottom group that would test whether $rhs was  
> null and just put out the $lhs in that case but that didn't work either.
> 
> Can somebody please put me out of my misery (in a kind manner (grin))  
> and show me what I'm doing wrong? I'd love to have a quiet weekend  
> with no problems to worry about!!!
> 
> Thanks,
> D
> 
> ------------------------------------------------------------------
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> On May 15, 2009, at 7:26 AM, Steve Ebersole wrote:
> 
> > someRule
> >    : a PLUS b
> >        -> { areStrings($a.tree,$b.tree) } ^(CONCATENATE a b)
> >        -> ^(PLUS a b)
> >
> > On Thu, 2009-05-14 at 23:38 -0400, David Jameson wrote:
> >> Is there any way to control the built-in tree generation (from an
> >> initial parse phase) based on semantics of what is being parsed?
> >>
> >> As a simple example,    if   I see the expression
> >>        a + b
> >>
> >> then I want to produce
> >>     (PLUS a b)
> >> or
> >>    (CONCATENATE a b)
> >>
> >> depending on whether a and b are numeric or string.
> >>
> >>
> >> How can I do this with rewrite rules (for example)?   Or do I have to
> >> construct my own trees?
> >>
> >>
> >> Thanks,
> >> D
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> > -- 
> > Steve Ebersole <steve at hibernate.org>
> > Hibernate.org
> >
> 
-- 
Steve Ebersole <steve at hibernate.org>
Hibernate.org


From dhjdhj at gmail.com  Sun May 17 08:56:03 2009
From: dhjdhj at gmail.com (David Jameson)
Date: Sun, 17 May 2009 11:56:03 -0400
Subject: [antlr-interest] Modifying tree based on semantic content
In-Reply-To: <1242572854.27258.63.camel@localhost.localdomain>
References: <24627566-0373-41E0-9D8B-FD3F50C21535@gmail.com>
	<1242386774.3385.9.camel@localhost.localdomain>
	<8725BF26-869E-4DAB-8A23-0E16EA593E7D@gmail.com>
	<1242572854.27258.63.camel@localhost.localdomain>
Message-ID: <11928A82-42F1-4B37-B530-D27648FF4A3C@gmail.com>

Thank you ---- I'll have to study your response carefully to make sure  
I understand it but I REALLY appreciate the time you took to write it,  
that was very kind.

With respect to my original question about the +, I just did that to  
simplify the question, which was really about how to control the tree  
output as a function of the semantic behavior of the language, in this  
particular case, the types. I fully expected to be able to generalize  
the original answer ( semantic predicates, as you helpfully told me)  
for my real problem.

Apart from simpleExpression, there are also rules for expression,  
term, factor, thereby allowing the appropriate control of precedance  
rules, for example you can write.

if  a + b = c + d then  ....

without any parentheses and get the right answer.

Other than separation for precedance purposes, a binary comparison  
operator is no different than a binary arithmetic operator and in fact  
the expression and term rules are written much the same way as the  
"simpleExpression" rule, replacing comparisonOperator with addOperator  
and mulOperator and so forth.


The grammar does also produce the correct tree for a sequence of more  
than three items, so yes, I would in fact get

     ^( PLUS 'lhs' ^( PLUS 'rhs1' 'rhs2 ) )

The optionalSign supports the notion of unary minus so you can write  
things like
      -1 + 2




The grammar I've developed is actually intended to translate a special  
scripting language into Java source code. The scripting language  
allows integers and strings to be compared using the same operator,  
i.e, you can write
     if   a = "xyz" then ....
     if   i = 3 then ....

but while the latter can be trivially rendered as
     if (i == 3) { .... }
the former requires
     if (a.equals("xyz") .....


and so I need to modify the tree output so that the tree grammar can  
distinguish arithmetic operations from string operations, regardless  
of what they are.


I suspect I am just missing something really trival with respect to  
ANTLR syntax that is preventing me from expressing the rewrite rules  
properly.




On May 17, 2009, at 11:07 AM, Steve Ebersole wrote:

> I am not an Antlr3 expert, I really just started myself about a month
> ago (moving from v2).  It really is probably best to get an answer  
> from
> the list.  You are correct though, you cannot mix the two approaches.
>
> That being said...
>
> The most straight-forward way from your existing grammar rule AFAIK is
> to rewrite the initial simpleExpression result (removing optionalSign
> since I did not understand its purpose here):
>
> expression returns [TAttributeType type]
> @init { boolean isStringComparison=false; }
>    :   ( simpleExpression -> simpleExpression ) {
>            $type = $expression.type;
>            isStringComparison = isString( $expression.type );
>        } (
>            comparisonOperator rhs = simpleExpression {
>                $type=...;
>            }
>            -> { isStringComparison }?
>                    ^( STRINGOP $expression $rhs )
>            ->
>                    ^(comparisonOperator $lhs $rhs)
>        )*
>    ;
>
> Note too that because of the '*' surrounding your "(comparisonOperator
> rhs = simpleExpression)" recognition and the fact that you ref "lhs"  
> in
> the rewrite, I think you will actually end up with trees like:
> ^( PLUS 'lhs' ^( PLUS 'lhs' 'rhs2 ) )
> instead of what I think you probably wanted:
> ^( PLUS 'lhs' ^( PLUS 'rhs1' 'rhs2 ) )
>
> Also, if you wanted to keep this resulting tree structure, a better
> option is probably to recurse the rule:
>
> expression
>    : ( lhs=simpleExpression -> simpleExpression )
>      (
>          ( comparisonOperator rhs=expression )
>              -> { isString( $lhs.type ) }?
>                  ^( STRINGOP $lhs $rhs )
>              ->
>                  ^( comparisonOperator $lhs $rhs )
>      )?
>    ;
>
> See that 'rhs' recurses back into this rule..
>
> (I *think* that the '$lhs' references will work here but am not 100%
> sure.  try it out.  we use $expression rather than a label)
>
>
> Personally I'd be very uncomfortable with your notion of "comparison
> operator".  I believe in your original email you were asking about '+'
> here.  Neither addition nor concatenation is a "comparison".  I think
> you may be trying to handle multiple, unequal concepts here.  In my
> experience that causes problems.  I would look to split the notions of
> "comparison" and PLUS/MINUS/MULTIPLY/DIVIDE/CONCATENATE.  Why?  Well  
> as
> you see they are very different both structurally and semantically.   
> For
> example, most comparison operators (aside from something like a SQL's
> BETWEEN operator e.g.) are "binary operand" (two sides) operators;
> PLUS/MINUS/MULTIPLY/DIVIDE/CONCATENATE are all "chained" meaning that
> ^( PLUS op1 ^( PLUS op2 op3 ) ) is semantically the same as ^( PLUS  
> op1
> op2 op3).  Same for concatenation: ^( CONCAT op1 ^( CONCAT op2  
> op3) ) is
> the same as ^( CONCAT op1 op2 op ).  Antlr rewrite rules have a nice  
> way
> to treat this "rolling up":
>
> addition
>    : additionOperand ( PLUS additionOperand )+
>          -> ^( PLUS additionOperand+ )
>    ;
>
> Or in your case, something like:
> addition
> @init { boolean isString=false; }
>    : lhs=additionOperand {isString=...;} ( PLUS additionOperand )+
>        -> {isString}? ^( CONCAT additionOperand )+
>        -> ^( PLUS additionOperand+ )
>    ;
>
> Anyway, hope that helps...
>
> On Sun, 2009-05-17 at 09:36 -0400, David Jameson wrote:
>> Steve, I hate to bother you personally but you were the only one who
>> responded and pointed me in the right direction. Nobody but you had  
>> an
>> answer to my initial question and in the context of "no good deed  
>> goes
>> unpunished", I'm really hoping you can spot what I am doing wrong as
>> I've been pulling my hair out most of the weekend trying to get ANTLR
>> to accept the "fixes"
>>
>> Many thanks,
>> D
>>
>> ---------------------------
>>
>>
>>
>>
>>
>>
>> I have been trying all day to get the rule below accepted.
>>
>>
>> expression returns [TAttributeType type]
>>               :
>>               optionalSign
>>               lhs = simpleExpression^
>>                  {
>>                     $type = $lhs.type;
>>                  }
>>                  (
>>                   (comparisonOperator rhs = simpleExpression)	
>>                   {
>>                      $type =
>> TErrorHandling.Compatible($comparisonOperator.tree.token,
>> $comparisonOperator.token, $lhs.type, $rhs.type);
>>                   }
>>
>>                     -> { isString($lhs.type) }? ^(comparisonOperator
>> STRINGOP $lhs $rhs)
>>                     ->  ^(comparisonOperator $lhs $rhs)
>>                  )* 	
>> 	        ;
>>
>>
>>
>>
>>
>> I get a "cannot generate the grammar because" error  which is
>>
>>    rule expression alt 1 uses rewrite syntax and also an AST operator
>>
>> Now, I'm pretty certain this is happening because of the "^" that
>> follows lhs = simpleExpression^ in the first section of the rule.
>>
>> However, removing that operator causes no tree node to be generated  
>> in
>> the case where there is just a simple expression and that breaks the
>> results.  However, I tried removing that operator and adding a  
>> rewrite
>> rule after the FIRST closing right brace, e.g.
>>
>>               lhs = simpleExpression
>>                  {
>>                     $type = $lhs.type;
>>                  } -> ^($lhs)
>>
>> and many variants but this just caused ANTLR to complain that
>> comparisonOperator was an unexpected token.  I also tried inserting a
>> third predicate in the bottom group that would test whether $rhs was
>> null and just put out the $lhs in that case but that didn't work  
>> either.
>>
>> Can somebody please put me out of my misery (in a kind manner (grin))
>> and show me what I'm doing wrong? I'd love to have a quiet weekend
>> with no problems to worry about!!!
>>
>> Thanks,
>> D
>>
>> ------------------------------------------------------------------
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>> On May 15, 2009, at 7:26 AM, Steve Ebersole wrote:
>>
>>> someRule
>>>   : a PLUS b
>>>       -> { areStrings($a.tree,$b.tree) } ^(CONCATENATE a b)
>>>       -> ^(PLUS a b)
>>>
>>> On Thu, 2009-05-14 at 23:38 -0400, David Jameson wrote:
>>>> Is there any way to control the built-in tree generation (from an
>>>> initial parse phase) based on semantics of what is being parsed?
>>>>
>>>> As a simple example,    if   I see the expression
>>>>       a + b
>>>>
>>>> then I want to produce
>>>>    (PLUS a b)
>>>> or
>>>>   (CONCATENATE a b)
>>>>
>>>> depending on whether a and b are numeric or string.
>>>>
>>>>
>>>> How can I do this with rewrite rules (for example)?   Or do I  
>>>> have to
>>>> construct my own trees?
>>>>
>>>>
>>>> Thanks,
>>>> D
>>>>
>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>> -- 
>>> Steve Ebersole <steve at hibernate.org>
>>> Hibernate.org
>>>
>>
> -- 
> Steve Ebersole <steve at hibernate.org>
> Hibernate.org
>


From jimi at temporal-wave.com  Sun May 17 09:41:10 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun, 17 May 2009 09:41:10 -0700
Subject: [antlr-interest] Lexer matching non-matching rule
In-Reply-To: <1242550704.5855.39.camel@kevin>
References: <1242388996.7669.18.camel@kevin>	
	<4A0E2BA6.9020400@s7software.com>	<1242471133.6197.56.camel@kevin>	
	<200905162029.32142.micha-1@fantasymail.de>	
	<4A0F6FDD.8000108@temporal-wave.com>
	<1242550704.5855.39.camel@kevin>
Message-ID: <4A103E26.1080103@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090517/41cf1a9c/attachment.html 

From cowan at acm.org  Sun May 17 11:02:10 2009
From: cowan at acm.org (cowan at acm.org)
Date: Sun, 17 May 2009 14:02:10 -0400
Subject: [antlr-interest] Parse trace?
In-Reply-To: <514E1FBF-4946-4CB4-9E1F-9889904406A9@cs.usfca.edu>
Message-ID: <FAE82AAAC82944C6A7154174ED155F2A@gsce0ae1cfad8d>

This option wasn't listed at
http://www.antlr.org/wiki/display/ANTLR3/Command+line+options so I added the
following line to the table:

|-trace | generate a parser with trace output - if the default output is not
enough, you can override the traceIn and traceOut methods|

George

> -----Original Message-----
> From: Terence Parr [mailto:parrt at cs.usfca.edu] 
> Sent: Thursday, May 14, 2009 5:48 PM
> To: Tilman Bender
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Parse trace?
> 
> 
> -trace option will work great for you. recompile and when you 
> run your  
> parser traceIn/traceOut methods will be called. you can 
> override them  
> or use the default which spits out information.
> 
> Ter
> On May 14, 2009, at 11:34 AM, Tilman Bender wrote:
> 
> > Hi Jay,
> >
> > I am sure what you mean by "annotatin my grammar with trace  
> > statements".
> > If you mean doing this manually for every rule/alternative: 
> you need  
> > not do that.
> >
> > As far as I see you can have ANTLR add such trace information for  
> > you, so you do not have to do
> > it manually. I've seen this as a config option in the antlr3-maven- 
> > plugin and I am sure there is a corresponding
> > ANTLR-Tool option for this.
> >
> > Another (maybe weird) idea: Isn't this a typical use case for AOP?  
> > Would it be feasible to weave the logging
> > into the whole thing? Just an idea ;-)
> >
> > Tilman Bender
> > Student des Software Engineering
> > Hochschule Heilbronn
> > tbender at stud.hs-heilbronn.de
> >
> >
> >
> > Am 14.05.2009 um 20:07 schrieb West Jay - Toronto-MROC - external:
> >
> >> So far, the only option I've seen is annotating my grammar with  
> >> trace statements that'll execute during parsing.  Ick.  Is there  
> >> not a better way?
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: 
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
> 
> 


From bestgembler at hotmail.com  Sun May 17 19:13:51 2009
From: bestgembler at hotmail.com (Kevin Chen)
Date: Mon, 18 May 2009 10:13:51 +0800
Subject: [antlr-interest] how to match any char between two string?
In-Reply-To: <4A0F059D.6000608@s7software.com>
References: <COL113-W255ED8CAAD4A7B553E292DB95C0@phx.gbl>
	<4A0F059D.6000608@s7software.com>
Message-ID: <COL113-W125532A5229449F786063B95A0@phx.gbl>


Thanks for you reply!

In that case, it work. But it isn't enough.
I consider a grammar:

select [ any character (an expr of an another app) ] from [ any character (an expr of an another app) ]  //required
    where [ any character (an expr of an another app) ]      //optional element
    order by [ any character (an expr of an another app) ]   //optional element
    group by [ any character (an expr of an another app) ]   //optional element
    limit [ any character (an expr of an another app) ]      //optional element
    option [key1 = value1 [,key2 = value2 ...] ]    //optional element, if any, require more then one key-value-pair

for example:

1.
  SELECT *, INTERVAL(posted,NOW()-7*86400,NOW()-86400) AS timeseg, 
         AVG(price) AS avgprice, COUNT(DISTINCT storeid), @ID, @weight
    from one , TWO, three
      where MATCH( '"test doc"/3'| '@@title hello' )
      OPTION one = 1,
             two = 2

2.
  SELECT *, INTERVAL(posted,NOW()-7*86400,NOW()-86400) AS timeseg, 

         AVG(price) AS avgprice, COUNT(DISTINCT storeid), @ID, @weight

    from one , TWO, three

      where MATCH( '"test doc"/3'| '@@title hello' )

      order by timeseg DESC, @weight DESC 

      group by @count
      limit 100 + @count

      OPTION three = 3,

             four = 4

I don't want to analyze those expressions,
'cause there's an another application will analyze those expressions.

The point is I don't know how to get the "any character"s...

Thanks a lot !   :-)


THE
     POWER
             OF
                JAVA




You get the error because 'SELECT' will match everything in the input
till EOF greedily (because of .+) and obviously WS cannot match
anything. When you use .+, you have to turn off greedy. Try something
like:



TEXT            :    SELECT ( options {greedy=false;} : . )* FROM



This should work:



grammar Test;



r    :    TEXT

        {

            System.out.println( $TEXT.text );

        }

    ;



TEXT            :    SELECT ( options {greedy=false;} : . )* FROM

    {

        String str =$text;

        setText( str.substring(6, str.length()-4) );

    }

    ;



fragment

SELECT    :    'select'

    ;

    

fragment

FROM    :    'from'

    ;

    



Cheers, Indhu





??? wrote:

  Hi!

  

I hava to intercept a expression between two string, and then send to
another application.

  

like a Java regex, for example:

  

//
-------------------------------------------------------------------------

// Java Code Begin

//
-------------------------------------------------------------------------

  

String regex  = "select\\s+((.)+)\\s+from";

Pattern p = Pattern.complie(regex);

Matcher m = p.matcher("select stu.id as 'Student ID', stu.name as
'Student Name' from");

String select = null;

if(m.find()){

    select = m.group(1);

}

System.out.println(select);// print [stu.id as 'Student ID', stu.name
as 'Student Name']

send(select);// send to another application.

  

//
-------------------------------------------------------------------------

// Java Code End

//
-------------------------------------------------------------------------

  

I try to write a sample grammar file, but it dosen't works.

  

//
-------------------------------------------------------------------------

// Grammar File Begin

//
-------------------------------------------------------------------------

  

start        :    'select' WS SELECT WS 'from';

SELECT    :    (.)+ {

    System.out.println(getText());

    send(getText());

};

WS         :    ( '\t' | ' ' | '\r' | '\n'| '\u000C' )+;

  

//
-------------------------------------------------------------------------

// Grammar File End

//
-------------------------------------------------------------------------

  

I get a error message as follow when I generate code:

  

//
-------------------------------------------------------------------------

// Error Message Begin

//
-------------------------------------------------------------------------

  

[23:31:49] error(208): Sql.g:28:1: The following token definitions can
never be matched because prior tokens match the same input: WS

  

//
-------------------------------------------------------------------------

// Message Begin

//
-------------------------------------------------------------------------

  

Thanks a lot!

  

  ---------------------------------

  THE

     POWER

             OF

                JAVA


_________________________________________________________________
Windows Live?: Keep your life in sync. Check it out!
http://windowslive.com/explore?ocid=TXT_TAGLM_WL_t1_allup_explore_012009
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090518/dfcee194/attachment.html 

From bestgembler at hotmail.com  Sun May 17 23:50:53 2009
From: bestgembler at hotmail.com (Kevin Chen)
Date: Mon, 18 May 2009 14:50:53 +0800
Subject: [antlr-interest] how to match any char between two string?
In-Reply-To: <COL113-W125532A5229449F786063B95A0@phx.gbl>
References: <COL113-W255ED8CAAD4A7B553E292DB95C0@phx.gbl>
	<4A0F059D.6000608@s7software.com> 
	<COL113-W125532A5229449F786063B95A0@phx.gbl>
Message-ID: <COL113-W67F68A3A844376C7B237E1B95A0@phx.gbl>


I don't want to analyze those expressions,
'cause there's another application will analyze those expressions.
I just need to intercept those expressions, and then send to the another application.

I'm thinking a grammar:

select [ any character (an expr of an another app) ] from [ any character (an expr of an another app) ]  //required
    where [ any character (an expr of an another app) ]      //optional element
    order by [ any character (an expr of an another app) ]   //optional element
    group by [ any character (an expr of an another app) ]   //optional element
    limit [ any character (an expr of an another app) ]      //optional element
    option [key1 = value1 [,key2 = value2 ...] ]    //optional element, if any, require more then one key-value-pair

for example:

1.
  SELECT *, INTERVAL(posted,NOW()-7*86400,NOW()-86400) AS timeseg, 
         AVG(price) AS avgprice, COUNT(DISTINCT storeid), @ID, @weight
    from one , TWO, three
      where MATCH( '"test doc"/3'| '@@title hello' )
      OPTION one = 1,
             two = 2

2.
  SELECT *, INTERVAL(posted,NOW()-7*86400,NOW()-86400) AS timeseg, 
         AVG(price) AS avgprice, COUNT(DISTINCT storeid), @ID, @weight
    from one , TWO, three
      where MATCH( '"test doc"/3'| '@@title hello' )
      order by timeseg DESC, @weight DESC 
      group by @count
      limit 100 + @count
      OPTION three = 3,
             four = 4

The point is I don't know how to intercept the [ any character (an expr of an another app) ]...

by the way: how to turn on/off ignore case??

Thanks a lot !   :-)
--------------------------------------------------
THE
     POWER
             OF
                JAVA

_________________________________________________________________
Drag n? drop?Get easy photo sharing with Windows Live? Photos.

http://www.microsoft.com/windows/windowslive/products/photos.aspx
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090518/959dcbe0/attachment.html 

From hola.ratul at gmail.com  Mon May 18 07:00:03 2009
From: hola.ratul at gmail.com (Ratul Bhadury)
Date: Mon, 18 May 2009 15:00:03 +0100
Subject: [antlr-interest] Selective ignoring of whitespace
Message-ID: <6be2f3b0905180700w4c6c0177tdfb2b9e4c65a072b@mail.gmail.com>

Thanks for the tips guys.

I've made some progress but seeing one peculiarity which I would be grateful
if someone could explain.

Single line input like 'sec=      sec,    dfd    dfdf' is accepted as I
intend, i.e sec & dfd    dfdf are regarded as search_terms. However if I put
a space before the '=', the line cannot be parsed. I tried putted a WS*
element in the definition of keyword_field, and also tried putting it in
keyword_clause, but they made no difference.

Can someone explain to me why this is the case?  Grammar is below.

Many thanks!

Ratul

-------------------------------------------
------------ THE GRAMAR --------
-------------------------------------------

grammar MopedSearch;

options
{
    language=CSharp2;
}


/*------------------------------------------------------------------
 * PARSER RULES
 *------------------------------------------------------------------*/

clause        returns [ SearchExpression searchExpr ]
    :    keyword_clause EOF
    ;

keyword_clause
    : keyword_field EQ search_term_list
    ;

id_clause
    : id_field EQ id_list
    ;

search_term_list    :    search_term (',' search_term)*
                    ;

id_list                :    NUMBER (',' NUMBER)*;

keyword_field    : 'sec'
                | 'cp'
                | 'our'
                ;

id_field        : 't'
                | 'p'
                | 'c'
                ;

search_term        : keyword_field
                | KEYWORD
                ;

NUMBER        : DIGIT+;
EQ            : '=';
KEYWORD        : CHAR(CHAR|' ')*;

fragment CHAR   :
ALPHA_UC|ALPHA_LC|DIGIT|'$'|'?'|'&'|'^'|'%'|'('|')'|'['|']'|':'|';'|'*'|'<'|'>'|'/'|'\\'|'@'|'#'|'?'|'!'|'.';

fragment ALPHA_UC   : 'A'..'Z';
fragment ALPHA_LC   : 'a'..'z';
fragment DIGIT        : '0'..'9';
WS        :    (' ' | '\t') {$channel=HIDDEN;}
        ;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090518/5c842450/attachment.html 

From micha-1 at fantasymail.de  Mon May 18 07:48:46 2009
From: micha-1 at fantasymail.de (Michael)
Date: Mon, 18 May 2009 16:48:46 +0200
Subject: [antlr-interest] Selective ignoring of whitespace
In-Reply-To: <6be2f3b0905180700w4c6c0177tdfb2b9e4c65a072b@mail.gmail.com>
References: <6be2f3b0905180700w4c6c0177tdfb2b9e4c65a072b@mail.gmail.com>
Message-ID: <200905181648.46593.micha-1@fantasymail.de>

Am Monday 18 May 2009 16:00:03 schrieb Ratul Bhadury:
> Thanks for the tips guys.
>
> I've made some progress but seeing one peculiarity which I would be
> grateful if someone could explain.
>
> Single line input like 'sec=      sec,    dfd    dfdf' is accepted as I
> intend, i.e sec & dfd    dfdf are regarded as search_terms. However if I
> put a space before the '=', the line cannot be parsed. I tried putted a WS*
> element in the definition of keyword_field, and also tried putting it in
> keyword_clause, but they made no difference.
>
> Can someone explain to me why this is the case?  Grammar is below.

if you write a space after your keyword_field then the lexer sees that the 
KEYWORD rule gives a longer match than keyword_field and so matches to the 
KEYWORD rule (it includes the spaces):

> KEYWORD        : CHAR(CHAR|' ')*;

which later fails since a wrong token is returned.

 Michael


From olivercsa at gmail.com  Mon May 18 14:37:08 2009
From: olivercsa at gmail.com (Oliver Christensen)
Date: Mon, 18 May 2009 23:37:08 +0200
Subject: [antlr-interest] Antlr too eager? Writing a template engine.
Message-ID: <700060b0905181437l5d91950frfa8c1bb5fdca4db0@mail.gmail.com>

Hi,

I've run into a problem that despite my best attempts over the last couple
of days, i can't solve myself. Thus, i'm asking for your help. I'm gonna
give you a bit of context first, and then a clearly stated problem
definition in the end (you can skip there if you want).

I'm writing a template language/engine like the one in the popular Django
framework for C#. I'm doing a few things differently; number one is that i
want other developers to be able to extend the language with new tags (for
instance {print 2+2}) simply by writing classes in c#, and not touching the
antlr grammer. Their code to parse a tag could then look like this:

bool isPrint = tag.readIdentifier() == 'print';
Expression expr = tag.readExpression();

This works by taking giving the string value of the tag ("print 2+2" in the
example) to antlr, and then calling one method at a time, to "chop off" the
pieces as needed.
:
I ran into problems when i wanted to implement the {for ...} tag which i
want to have syntax like this: {for item in [expression] [options]};
example: {for user in users.all reversed=true}. Which is where i ran into my
problem. The code to chop up those parts looks almost like this:

tag.readIdentifier(); // gets "for"
tag.readIdentifier(); // gets "user"
tag.readIdentifier(); // gets "in"
tag.readExpression(); // *should* get: "users.all"
tag.readAssign(); // *should* get: "reversed=true"

However, antlr dosen't give me the expression when an assignment follows it.
It simply fails to parse the expression. I think that's wierd because given
an input such as (psudo code) "2 2".readExpression() it'll happly ignore the
second "2" and just return the first one. Given "2+2 10".readExpression(),
it'll return the tree for 2+2". It even works as wanted with "2+2
reversed=true".readExpression().

The problem appears when the first token is an ID followed by an expression,
like "users reversed=true". I have what i belive to be a very simple tree
grammer, which i'd be happy to share, but here i'll just present a
simplified version which highlights my problem:

PROBLEM: Given the following grammer, how do i make it so that when given
the input "users reversed=true" the expression rule will only match the
first "users", so that i can use the assignment rule after to pull out the
assignment tree.

------------ test.g ----------
grammar test;
options{output = AST;ASTLabelType = CommonTree;language  =  CSharp;}

expression : value | assignment;
assignment : ID '=' expression;
value    : ID | INT;

ID      : ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'_'|'0'..'9')* ;
INT     : ('0'..'9')+;
WS    : ('\r'|'\n'|' '|'\t')+ {Skip();};
--------------------------------

I've been stuck on this for days, and i'm hoping somebody in the know will
help me.

Thank you!
   Oliver
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090518/101275b7/attachment.html 

From jimi at temporal-wave.com  Mon May 18 17:04:25 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 18 May 2009 17:04:25 -0700
Subject: [antlr-interest] Antlr too eager? Writing a template engine.
In-Reply-To: <700060b0905181437l5d91950frfa8c1bb5fdca4db0@mail.gmail.com>
References: <700060b0905181437l5d91950frfa8c1bb5fdca4db0@mail.gmail.com>
Message-ID: <4A11F789.9090601@temporal-wave.com>

Oliver Christensen wrote:
> Hi,
>
>
>
> PROBLEM: Given the following grammer, how do i make it so that when 
> given the input "users reversed=true" the expression rule will only 
> match the first "users", so that i can use the assignment rule after 
> to pull out the assignment tree.
>
> ------------ test.g ----------
> grammar test;
> options{output = AST;ASTLabelType = CommonTree;language  =  CSharp;}
>
> expression : value | assignment;
> assignment : ID '=' expression;
> value    : ID | INT;
>    
> ID      : ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'_'|'0'..'9')* ;
> INT     : ('0'..'9')+;
> WS    : ('\r'|'\n'|' '|'\t')+ {Skip();};
> --------------------------------
>
> I've been stuck on this for days, and i'm hoping somebody in the know 
> will help me.
Even though you are calling the rules yourself, you still need to 
organize the expression tree in a proper LL oriented manner. The problem 
is with your ID '=' expression, which sends things haywire. If in doubt, 
copy an expression tree from something like the Java parser and adapt it.

What you need is:

expression : value ('=' value)*;

value   
    : ID
    | INT
    ;

Note that if you did not mean to allow x = y  = z = j, then that * 
should be a ?

Jim

From thomas.gill at csr.com  Tue May 19 01:23:21 2009
From: thomas.gill at csr.com (Ned Gill)
Date: Tue, 19 May 2009 09:23:21 +0100
Subject: [antlr-interest] Error reporting with the C runtime: tokenNames
Message-ID: <op.ut5387j0o521jq@tg01pc02.europe.root.pri>


Hi list.

I'm writing a custom displayRecognitionError for my parser, based heavily  
on the default in antlr3baserecognizer.c.  For reporting the names of  
tokens, I'm using the tokenNames array passed in for messages such as "...  
Missing ']'".  However, for named tokens (e.g. those created in the tokens  
{ ... } stanza), tokenNames contains er.. the name of the token.  So for  
example, I'm using the names RPAREN for the token ')', and I see messages  
like "... Missing RPAREN."  Unfortunately these names aren't going to make  
any sense for users.

I understand why tokenNames is the way it is (named tokens could be more  
compilcated than a simple string).  However, is there a way that I can  
show the matching string for simple tokens rather than the name, (possibly  
limited to just those declared with "tokens {...}")?

I considered removing some or all of the simple named tokens, but this  
would be inconvenient as my grammar generates trees which re-use the same  
tokens.

I'm already maintaining my own version of C.stg for other reasons, so I  
could make changes to that if necessary.


Thanks,
Ned.


From hola.ratul at gmail.com  Tue May 19 02:12:02 2009
From: hola.ratul at gmail.com (Ratul Bhadury)
Date: Tue, 19 May 2009 10:12:02 +0100
Subject: [antlr-interest] Selective ignoring of whitespace
In-Reply-To: <200905182152.45668.micha-1@fantasymail.de>
References: <6be2f3b0905180700w4c6c0177tdfb2b9e4c65a072b@mail.gmail.com>
	<200905181708.43491.micha-1@fantasymail.de>
	<6be2f3b0905180812v7560e28eh5614c5cee031bf51@mail.gmail.com>
	<200905182152.45668.micha-1@fantasymail.de>
Message-ID: <6be2f3b0905190212g3b635098l8c6124109b583186@mail.gmail.com>

Thanks so much Michael :)

That worked perfectly. I wouldn't yet know if its the best approach or not,
but it works as I want it to, so I'm more than satisfied! I'll read up more
on syntactic predicates.

If it helps others, this is what Michael proposed...

grammar Space;

@members {

  public static void main(String[] args) throws Exception {
       SpaceLexer lex = new SpaceLexer(new ANTLRStringStream("sec  =  fooz,
foo z foofooz"));
       CommonTokenStream tokens = new CommonTokenStream(lex);

       SpaceParser parser = new SpaceParser(tokens);

       try {
           parser.clause();
       } catch (RecognitionException e)  {
           e.printStackTrace();
       }
   }

}



clause  : keyword_clause EOF;

keyword_clause
   :
     keyword_field { System.out.println($keyword_field.text);} EQ
search_term_list
   ;

keyword_field:  KEYWORD_SEC | KEYWORD_CP ;

search_term_list    :    search_term (',' search_term)* ;

search_term: KEYWORD {System.out.println($KEYWORD.text);} ;

fragment KEYWORD_SEC: 'sec';
fragment KEYWORD_CP: 'cp';
fragment KEYWORD: CHAR (CHAR | ' ')* ;


ALL_KEYWORD:
           ( (KEYWORD_SEC WS* EQ) => KEYWORD_SEC { $type = KEYWORD_SEC; }
           | (KEYWORD_CP WS* EQ) => KEYWORD_CP { $type = KEYWORD_CP; }
           | (KEYWORD) => KEYWORD { $type = KEYWORD; }
           )
           ;

EQ            : '=';
 fragment CHAR   :
ALPHA_UC|ALPHA_LC|
DIGIT|'$'|'?'|'&'|'^'|'%'|'('|')'|'['|']'|':'|';'|'*'|'<'|'>'|'/'|'\\'|'@'|'#'|'?'|'!'|'.';

fragment ALPHA_UC   : 'A'..'Z';
fragment ALPHA_LC   : 'a'..'z';
fragment DIGIT        : '0'..'9';
WS        :    (' ' | '\t')+ {$channel=HIDDEN;}
       ;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090519/89bf08b7/attachment.html 

From tarcatu_dragosh at yahoo.com  Tue May 19 03:43:06 2009
From: tarcatu_dragosh at yahoo.com (Dragos Tarcatu)
Date: Tue, 19 May 2009 03:43:06 -0700 (PDT)
Subject: [antlr-interest] cast problem with C runtime
Message-ID: <394158.36020.qm@web56308.mail.re3.yahoo.com>

Hi,

I'm using antlr-3.1.3 with the C runtime (libantlr3c-3.1.3). I'm compiling the generated antlr code for my parser using g++.
The thing is that for a rule like:

description_list
??????????????????????????????? :?????????????????????????? (descrs += description)*
??????????????????????????????? ;

I'm getting a void* conversion error in the generated code:

SVParser.c:1895: error: invalid conversion from ?void*? to ?SVParser_description_return*?

Is there a solution to this problem?

Thanks,
????? Dragos



      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090519/43ad01fa/attachment.html 

From pcc482719 at gmail.com  Tue May 19 05:05:54 2009
From: pcc482719 at gmail.com (Peter C. Chapin)
Date: Tue, 19 May 2009 08:05:54 -0400
Subject: [antlr-interest] cast problem with C runtime
In-Reply-To: <394158.36020.qm@web56308.mail.re3.yahoo.com>
References: <394158.36020.qm@web56308.mail.re3.yahoo.com>
Message-ID: <Pine.CYG.4.58.0905190804270.2940@WHIRLWIND>


On Tue, 19 May 2009, Dragos Tarcatu wrote:

> I'm using antlr-3.1.3 with the C runtime (libantlr3c-3.1.3). I'm
> compiling the generated antlr code for my parser using g++. The thing is
> that for a rule like:
>
> I'm getting a void* conversion error in the generated code:
>
> SVParser.c:1895: error: invalid conversion from void* to
> SVParser_description_return*
>
> Is there a solution to this problem?

C++ does not like conversions from void* to other types without a cast.
However, those conversions are fine in C. Can you compile the generated
code with gcc instead of g++?

Peter

From jeff.wilcox at mac.com  Tue May 19 06:26:36 2009
From: jeff.wilcox at mac.com (Jeff Wilcox)
Date: Tue, 19 May 2009 06:26:36 -0700
Subject: [antlr-interest] Composite grammar debug
Message-ID: <F4BEBD9E-F034-4EC3-BA2C-FFB7A9A7F920@mac.com>

Greetings,

I am running into an issue (remote) debugging a large composite  
grammar with ANTLRworks & the java target.  I know the composite  
grammar support is a bit new but I haven't seen any issues posted on  
this so I figured I'd either flag it or see if there is something I am  
doing wrong.

After connecting the session I get the following in the events list  
"Rewind -2147483648" every step (using break on all).  Also the  
following exception shows up in the console with each step:

[06:03:26] java.util.EmptyStackException
	at java.util.Stack.peek(Stack.java:79)
	at org.antlr.works.debugger.tivo.DBPlayer.playRewind(Unknown Source)
	at org.antlr.works.debugger.tivo.DBPlayer.playEvent(Unknown Source)
	at org.antlr.works.debugger.tivo.DBPlayer.playEvents(Unknown Source)
	at org.antlr.works.debugger.Debugger.playEvents(Unknown Source)
	at org.antlr.works.debugger.tivo.DBRecorder.playEvents(Unknown Source)
	at org.antlr.works.debugger.tivo.DBRecorder 
$PlayEventRunnable.run(Unknown Source)
	at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
	at java.awt.EventQueue.dispatchEvent(EventQueue.java:461)
	at  
java 
.awt 
.EventDispatchThread.pumpOneEventForHierarchy(EventDispatchThread.java: 
269)
	at  
java 
.awt 
.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java: 
190)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java: 
184)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java: 
176)
	at java.awt.EventDispatchThread.run(EventDispatchThread.java:110)


Other details abut the grammar that may be useful:
options {
	backtrack=true;
    	output=AST;
	ASTLabelType=CommonTree;
}

Also this is imports 5 parser grammars (I told you it was large) and 1  
lexer grammar into a top level combined grammar.  All grammars were  
open in ANTLRworks during debug.

Any pointers appreciated.

Thanks
Jeff

From tarcatu_dragosh at yahoo.com  Tue May 19 07:52:05 2009
From: tarcatu_dragosh at yahoo.com (Dragos Tarcatu)
Date: Tue, 19 May 2009 07:52:05 -0700 (PDT)
Subject: [antlr-interest] cast problem with C runtime
Message-ID: <837719.17986.qm@web56304.mail.re3.yahoo.com>

Hi,

Unfortunately compiling with gcc is not a solution . I've tried to change 
the AST.stg from the C code generation templates and I think this should 
solve my problem, but I was not able to build using maven the entire 
antlr-3.1.3.jar (I think this is refered in the build instructions as Uber 
Jar). 


Is it possible to build the uber jar for the 3.1.3 release based only on
?antlr.org 3.1.3 source distribution?

Thanks,
?????? Dragos



      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090519/9e69ed80/attachment.html 

From register72 at gmail.com  Tue May 19 07:52:42 2009
From: register72 at gmail.com (register)
Date: Tue, 19 May 2009 16:52:42 +0200
Subject: [antlr-interest]  [C Target][3.1.1] bugs in error reporting
Message-ID: <4a80712f0905190752o21036950ia21c38b11463e3ab@mail.gmail.com>

I have found two minor issues in the C runtime:
-the lxr->pLexer->rec->getNumberOfSyntaxErrors(lxr->pLexer->rec) always
returns 0 because the reportError function in antlr3lexer.c does not
increment the state->errorCount attribute of the recognizer
-The charposition attribute of a token returns always -1 when referenced
inside an action that is positioned at the end of a rule.

Regards,
register.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090519/8862ff3e/attachment.html 

From jimi at temporal-wave.com  Tue May 19 08:28:45 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 19 May 2009 08:28:45 -0700
Subject: [antlr-interest] Error reporting with the C runtime: tokenNames
In-Reply-To: <op.ut5387j0o521jq@tg01pc02.europe.root.pri>
References: <op.ut5387j0o521jq@tg01pc02.europe.root.pri>
Message-ID: <4A12D02D.7000800@temporal-wave.com>

Ned Gill wrote:
> Hi list.
>
> I'm writing a custom displayRecognitionError for my parser, based heavily  
> on the default in antlr3baserecognizer.c.  For reporting the names of  
> tokens, I'm using the tokenNames array passed in for messages such as "...  
> Missing ']'".  However, for named tokens (e.g. those created in the tokens  
> { ... } stanza), tokenNames contains er.. the name of the token.  So for  
> example, I'm using the names RPAREN for the token ')', and I see messages  
> like "... Missing RPAREN."  Unfortunately these names aren't going to make  
> any sense for users.
>   
It is the same as the other targets, in that you need to create a local 
function that returns/displays/adds to the message, the name you want to 
use for error display. It is just a switch statement on the token type 
basically, or you could create a local map and initialize it the first 
time it is required. It is just a bit of slog really. Java provides a 
method to override to do this, but in C, you just call your own local 
function.
> I understand why tokenNames is the way it is (named tokens could be more  
> compilcated than a simple string).  However, is there a way that I can  
> show the matching string for simple tokens rather than the name, (possibly  
> limited to just those declared with "tokens {...}")?
>
> I considered removing some or all of the simple named tokens, but this  
> would be inconvenient as my grammar generates trees which re-use the same  
> tokens.
>
> I'm already maintaining my own version of C.stg for other reasons, so I  
> could make changes to that if necessary.
>   
Let me know if there is something that you changed that really needs to 
be in the main template - I know of at least two things that I need to 
resolve (@after for instance), but obviously would prefer that you can 
use the main branch. I don't know when you split, but there have been 
one or two tweaks to C.stg, so make sure you pick them up.

Jim

From jimi at temporal-wave.com  Tue May 19 08:50:34 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 19 May 2009 08:50:34 -0700
Subject: [antlr-interest] Antlr too eager? Writing a template engine.
In-Reply-To: <700060b0905190307g67d51951tab68fd1b7aa9824f@mail.gmail.com>
References: <700060b0905181437l5d91950frfa8c1bb5fdca4db0@mail.gmail.com>	
	<4A11F789.9090601@temporal-wave.com>
	<700060b0905190307g67d51951tab68fd1b7aa9824f@mail.gmail.com>
Message-ID: <4A12D54A.1000309@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090519/07df9776/attachment.html 

From jimi at temporal-wave.com  Tue May 19 08:59:44 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 19 May 2009 08:59:44 -0700
Subject: [antlr-interest] cast problem with C runtime
In-Reply-To: <394158.36020.qm@web56308.mail.re3.yahoo.com>
References: <394158.36020.qm@web56308.mail.re3.yahoo.com>
Message-ID: <4A12D770.4030806@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090519/bda68f82/attachment.html 

From murat.knecht at student.hpi.uni-potsdam.de  Tue May 19 09:00:09 2009
From: murat.knecht at student.hpi.uni-potsdam.de (Murat Knecht)
Date: Tue, 19 May 2009 18:00:09 +0200
Subject: [antlr-interest] Python3 target
Message-ID: <4A12D789.6010002@student.hpi.uni-potsdam.de>

Hi,

I just tried the native Python target with ANTLR3 and stumbled upon
problems using the generated parser in Python v3.
The documentation says that the current version supports v2.4 and 2.5.
Are there any plans to produce a Python3 compatible target or is one
already being made?

So far, it seems the problems are rather minor, e.g. using old unicode
u'blub' strings, which are not allowed in Python anymore. I could
probably just hack the python target, but then an in-house solution
clearly is nicer and better maintainable.

Sorry, if this has been asked before. Googling python3 and antlr usually
results in something about antlr3 (Google is trying just too hard.)

Best regards,
Murat

From jimi at temporal-wave.com  Tue May 19 09:03:44 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 19 May 2009 09:03:44 -0700
Subject: [antlr-interest] cast problem with C runtime
In-Reply-To: <837719.17986.qm@web56304.mail.re3.yahoo.com>
References: <837719.17986.qm@web56304.mail.re3.yahoo.com>
Message-ID: <4A12D860.4070404@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090519/8ca0bb5a/attachment.html 

From JWest at MROC.COM  Tue May 19 09:06:08 2009
From: JWest at MROC.COM (West Jay - Toronto-MROC - external)
Date: Tue, 19 May 2009 12:06:08 -0400
Subject: [antlr-interest] Parse trace?
In-Reply-To: <514E1FBF-4946-4CB4-9E1F-9889904406A9@cs.usfca.edu>
References: <E697C11B3FD35E45B802D88ED1FED6B27C8A722528@TMRC000001.am.munichre.com>
	<96E85557-7624-4048-827E-5A4B818C0DFE@stud.hs-heilbronn.de>
	<514E1FBF-4946-4CB4-9E1F-9889904406A9@cs.usfca.edu>
Message-ID: <E697C11B3FD35E45B802D88ED1FED6B27F5C771CE5@TMRC000001.am.munichre.com>

That was exactly what I was looking for!
I added "-trace" to the "ANTLR options" section of ANTLRWorks/Preferences and started getting all the output I was looking for.

I found some documentation on the -trace option in the v2 section, but none in the v3 area.  Of note is that -trace works in v3, but -traceParser and -traceLexer don't do anything at all.  Looks like they've been deprecated.  No matter, it was pretty easy to get what I was looking for without them.

The method of getting similar behavior to those two options is as follows:

To turn off Lexer trace, override TraceIn and TraceOut (the 2 arg versions) in your lexer class, like so:

    public partial class PLSQL31Lexer
    {
        public override void TraceIn( string ruleName, int ruleIndex )
        {
            // Create no trace output for lexing
        }

        public override void TraceOut( string ruleName, int ruleIndex )
        {
            // Create no trace output for lexing
        }
    }

That leaves me with just parser trace, exactly what I was looking for.
I then override the same methods to redirect the trace from the stdout to the debugout:

using trace = System.Diagnostics.Trace;   // use this instead of private TextWriter trace!

    public partial class PLSQL31Parser
    {
        //private TextWriter trace = Console.Out; // This mirrors the behaviour we're overloading

        // Override the parser trace method so we can control where the information goes
        public override void TraceIn( string ruleName, int ruleIndex )
        {
            TraceIn( ruleName, ruleIndex, input.LT( 1 ) );
        }

        // Override the parser trace method so we can control where the information goes
        public override void TraceIn( string ruleName, int ruleIndex, object inputSymbol )
        {
            trace.Write( is_sql ? "(SQL)" : "(PL/)" );
            trace.Write( "enter " + ruleName + " " + inputSymbol );
            if (state.backtracking > 0)
            {
                trace.Write( " backtracking=" + state.backtracking );
            }
            trace.WriteLine( string.Empty );
        }

        // Override the parser trace method so we can control where the information goes
        public override void TraceOut( string ruleName, int ruleIndex, object inputSymbol )
        {
            trace.Write( is_sql ? "(SQL)" : "(PL/)" );
            trace.Write( "exit " + ruleName + " " + inputSymbol );
            if (state.backtracking > 0)
            {
                trace.Write( " backtracking=" + state.backtracking );
                trace.WriteLine( state.failed ? " FAILED!" : " succeeded" );
            }
            else
            {
                trace.WriteLine( string.Empty );
            }
        }

        // Override the parser trace method so we can control where the information goes
        public override void TraceOut( string ruleName, int ruleIndex )
        {
            TraceOut( ruleName, ruleIndex, input.LT( 1 ) );
        }
    }

Note that I can comment out my using statement and uncomment the private to easily switch from debugout to any other TextWriter stream I want.  Very handy!
With this setup it's a one-line change to generate a file that traces my parsing if I want it.

And of course, to get a -traceLexer behavior I'd just reverse my implementation.

Thanks Ter, very handy!
J

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Terence Parr
Sent: Thursday, May 14, 2009 5:48 PM
To: Tilman Bender
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Parse trace?

-trace option will work great for you. recompile and when you run your  
parser traceIn/traceOut methods will be called. you can override them  
or use the default which spits out information.

Ter
On May 14, 2009, at 11:34 AM, Tilman Bender wrote:

> Hi Jay,
>
> I am sure what you mean by "annotatin my grammar with trace  
> statements".
> If you mean doing this manually for every rule/alternative: you need  
> not do that.
>
> As far as I see you can have ANTLR add such trace information for  
> you, so you do not have to do
> it manually. I've seen this as a config option in the antlr3-maven- 
> plugin and I am sure there is a corresponding
> ANTLR-Tool option for this.
>
> Another (maybe weird) idea: Isn't this a typical use case for AOP?  
> Would it be feasible to weave the logging
> into the whole thing? Just an idea ;-)
>
> Tilman Bender
> Student des Software Engineering
> Hochschule Heilbronn
> tbender at stud.hs-heilbronn.de
>
>
>
> Am 14.05.2009 um 20:07 schrieb West Jay - Toronto-MROC - external:
>
>> So far, the only option I've seen is annotating my grammar with  
>> trace statements that'll execute during parsing.  Ick.  Is there  
>> not a better way?
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From pink at odahoda.de  Tue May 19 10:51:51 2009
From: pink at odahoda.de (Benjamin Niemann)
Date: Tue, 19 May 2009 19:51:51 +0200
Subject: [antlr-interest] Python3 target
In-Reply-To: <4A12D789.6010002@student.hpi.uni-potsdam.de>
References: <4A12D789.6010002@student.hpi.uni-potsdam.de>
Message-ID: <543531490905191051h38f8dc52w58f34dee93c1c615@mail.gmail.com>

Hi Murat,

On Tue, May 19, 2009 at 6:00 PM, Murat Knecht
<murat.knecht at student.hpi.uni-potsdam.de> wrote:
> I just tried the native Python target with ANTLR3 and stumbled upon
> problems using the generated parser in Python v3.
> The documentation says that the current version supports v2.4 and 2.5.
> Are there any plans to produce a Python3 compatible target or is one
> already being made?
>
> So far, it seems the problems are rather minor, e.g. using old unicode
> u'blub' strings, which are not allowed in Python anymore. I could
> probably just hack the python target, but then an in-house solution
> clearly is nicer and better maintainable.

I thought about it, but no action taken yet. To keep the
maintainability high, this probably needs some tweaks in the codegen
code (e.g. allow 'subclassing' of targets, if implemented as a
separate target).

Have you tried using the 2to3 tool on the generated code/runtime module?

-Ben

> Sorry, if this has been asked before. Googling python3 and antlr usually
> results in something about antlr3 (Google is trying just too hard.)
>
> Best regards,
> Murat
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From bestgembler at hotmail.com  Tue May 19 18:41:03 2009
From: bestgembler at hotmail.com (Kevin Chen)
Date: Wed, 20 May 2009 09:41:03 +0800
Subject: [antlr-interest] is there anyway turn on or off (ignore case|case
	insensitive) ?
Message-ID: <COL113-W2826FE7F719BD666C7346AB9580@phx.gbl>


is there anyway turn on or off (ignore case|case insensitive) in whole grammar?
or just in tokens { ... }?
or just in rules ?

thanks!


_________________________________________________________________
Drag n? drop?Get easy photo sharing with Windows Live? Photos.

http://www.microsoft.com/windows/windowslive/products/photos.aspx
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090520/51fdc3c1/attachment.html 

From jimi at temporal-wave.com  Tue May 19 19:11:05 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 19 May 2009 19:11:05 -0700
Subject: [antlr-interest] is there anyway turn on or off (ignore
 case|case insensitive) ?
In-Reply-To: <COL113-W2826FE7F719BD666C7346AB9580@phx.gbl>
References: <COL113-W2826FE7F719BD666C7346AB9580@phx.gbl>
Message-ID: <4A1366B9.3040005@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090519/33fe119c/attachment.html 

From bestgembler at hotmail.com  Tue May 19 20:02:48 2009
From: bestgembler at hotmail.com (Kevin Chen)
Date: Wed, 20 May 2009 11:02:48 +0800
Subject: [antlr-interest] is there anyway turn on or off (ignore
 case|case insensitive) ?
In-Reply-To: <4A1366B9.3040005@temporal-wave.com>
References: <COL113-W2826FE7F719BD666C7346AB9580@phx.gbl>
	<4A1366B9.3040005@temporal-wave.com>
Message-ID: <COL113-W30DF9825B35280FD5DD06FB9580@phx.gbl>


>>Kevin Chen wrote:

  >>is there anyway turn on or off (ignore case|case insensitive)
in whole grammar?

>>or just in tokens { ... }?

>>or just in rules ?

>
See:

>
>
http://www.antlr.org/wiki/pages/viewpage.action?pageId=1782

>

>You specify your keywords in UPPER case only, then they will match case
insensitively with the enhanced file stream >listed at that page. The
case of the tokens is preserved in the input.

>

>Jim

that's fine!!!!

thanks!!!!!!!!!!! :-)

_________________________________________________________________
More than messages?check out the rest of the Windows Live?.
http://www.microsoft.com/windows/windowslive/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090520/e0778387/attachment.html 

From bestgembler at hotmail.com  Tue May 19 20:37:27 2009
From: bestgembler at hotmail.com (Kevin Chen)
Date: Wed, 20 May 2009 11:37:27 +0800
Subject: [antlr-interest] is there anyway turn on or off (ignore
 case|case insensitive) ?
In-Reply-To: <4A1366B9.3040005@temporal-wave.com>
References: <COL113-W2826FE7F719BD666C7346AB9580@phx.gbl>
	<4A1366B9.3040005@temporal-wave.com>
Message-ID: <COL113-W27BE6B6C1A7A0B7AA62E92B9580@phx.gbl>


But,if it's a token,how?

for example:

tokens {
    TOK_SELECT = 'select';
    TOK_FROM = 'from';
    ...
    ...
}









  


>>Kevin Chen wrote:

  >>is there anyway turn on or off (ignore case|case insensitive)
in whole grammar?

>>or just in tokens { ... }?

>>or just in rules ?


>See:

>

>http://www.antlr.org/wiki/pages/viewpage.action?pageId=1782

>

>You specify your keywords in UPPER case only, then they will match case
insensitively with the enhanced file stream >listed at that page. The
case of the tokens is preserved in the input.

>

>Jim

_________________________________________________________________
More than messages?check out the rest of the Windows Live?.
http://www.microsoft.com/windows/windowslive/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090520/fa6944a2/attachment.html 

From bestgembler at hotmail.com  Tue May 19 20:51:24 2009
From: bestgembler at hotmail.com (Kevin Chen)
Date: Wed, 20 May 2009 11:51:24 +0800
Subject: [antlr-interest] is there anyway turn on or off (ignore
 case|case insensitive) ?
In-Reply-To: <COL113-W27BE6B6C1A7A0B7AA62E92B9580@phx.gbl>
References: <COL113-W2826FE7F719BD666C7346AB9580@phx.gbl>
	<4A1366B9.3040005@temporal-wave.com> 
	<COL113-W27BE6B6C1A7A0B7AA62E92B9580@phx.gbl>
Message-ID: <COL113-W43752F19F1F60D91E5FBACB9580@phx.gbl>


I mean just tokens.

>>>But,if it's a token,how?
>>>
>>>for example:
>>>
>>>tokens {
>>>    TOK_SELECT = 'select';
>>>    TOK_FROM = 'from';
>>>    ...
>>>    ...
>>>}
>>>
>>>
>>>





  


>>Kevin Chen wrote:

  >>is there anyway turn on or off (ignore case|case insensitive)
in whole grammar?

>>or just in tokens { ... }?

>>or just in rules ?


>See:

>

>http://www.antlr.org/wiki/pages/viewpage.action?pageId=1782

>

>You specify your keywords in UPPER case only, then they will match case
insensitively with the enhanced file stream >listed at that page. The
case of the tokens is preserved in the input.

>

>Jim

check out the rest of the Windows Live?.
More than mail?Windows Live? goes way beyond your inbox.
 More than messages
_________________________________________________________________
Windows Live?: Keep your life in sync. Check it out!
http://windowslive.com/explore?ocid=TXT_TAGLM_WL_t1_allup_explore_012009
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090520/23545651/attachment.html 

From jimi at temporal-wave.com  Tue May 19 22:12:39 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 19 May 2009 22:12:39 -0700
Subject: [antlr-interest] is there anyway turn on or off (ignore
 case|case insensitive) ?
In-Reply-To: <COL113-W27BE6B6C1A7A0B7AA62E92B9580@phx.gbl>
References: <COL113-W2826FE7F719BD666C7346AB9580@phx.gbl>
	<4A1366B9.3040005@temporal-wave.com>
	<COL113-W27BE6B6C1A7A0B7AA62E92B9580@phx.gbl>
Message-ID: <4A139147.7070107@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090519/94857006/attachment.html 

From jimi at temporal-wave.com  Tue May 19 22:15:11 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 19 May 2009 22:15:11 -0700
Subject: [antlr-interest] is there anyway turn on or off (ignore
 case|case insensitive) ?
In-Reply-To: <COL113-W43752F19F1F60D91E5FBACB9580@phx.gbl>
References: <COL113-W2826FE7F719BD666C7346AB9580@phx.gbl>	<4A1366B9.3040005@temporal-wave.com>
	<COL113-W27BE6B6C1A7A0B7AA62E92B9580@phx.gbl>
	<COL113-W43752F19F1F60D91E5FBACB9580@phx.gbl>
Message-ID: <4A1391DF.2000801@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090519/54687a05/attachment.html 

From ygauteron at gmail.com  Wed May 20 01:50:14 2009
From: ygauteron at gmail.com (Yann Gauteron)
Date: Wed, 20 May 2009 10:50:14 +0200
Subject: [antlr-interest] ANTLR grammar processing returns strange warnings
Message-ID: <8097baf0905200150n1c27a77eube4380970bd5fb64@mail.gmail.com>

Dear ANTLR users,

I am a happy (until now) new user of ANTLR. I learned ANTLR from
scratch by reading the "The Definitive ANTLR Reference" book and
trying to code a configuration file parser with ANTLR 3.1.3.

While coding the grammar, I had no problem for converting grammar into
Java until a certain moment, where I get lots of warnings similar to
"warning(209): TestKO.g:450:1: Multiple token rules can match input
such as "'T'" : ID_TFTPTIMESTAMP, ID_TFTPMODEMADDRESS,
ID_TESTMODEENABLE, ID_TEKGRACETIME, SNMP_TIMETICKS, T_OID"

Typically, with TestOK.g grammar, conversion works. With TestKO.g
grammar, conversion returns warnings (see error.txt file).

I can't understand why these warnings are returned as - I think -
there is no errors in my grammar (lots of warning lines are returned
against lines that were unmodified between TestOK and TestKO !).

May you have some feedbacks if this is finally a mistake in my grammar
(any advice is welcome, as I mentionned it is my first experience with
ANTLR) or is it known problems with ANTLR (I read some threads on
ANTLR interest mailing list with the same warnings, but it seems this
is not the same situation).

Thanks!
Yann
-------------- next part --------------

D:\Dev\Jdocsis\ch\gauteron\docsis\parser\test>java org.antlr.Tool TestOK.g

D:\Dev\Jdocsis\ch\gauteron\docsis\parser\test>java org.antlr.Tool TestKO.g
warning(209): TestKO.g:450:1: Multiple token rules can match input such as "'T'"
: ID_TFTPTIMESTAMP, ID_TFTPMODEMADDRESS, ID_TESTMODEENABLE, ID_TEKGRACETIME, SNM
P_TIMETICKS, T_OID

As a result, token(s) ID_TFTPMODEMADDRESS,ID_TESTMODEENABLE,ID_TEKGRACETIME,SNMP
_TIMETICKS,T_OID were disabled for that input
warning(209): TestKO.g:450:1: Multiple token rules can match input such as "'V'"
: ID_VLANID, T_OID

As a result, token(s) T_OID were disabled for that input
warning(209): TestKO.g:450:1: Multiple token rules can match input such as "'B'"
: ID_BASELINEPRIVACYSUPPORT, ID_BASELINEPRIVACY, SNMP_BITSTRING, T_MACADDR, T_MA
CMASK, T_IPV6, T_OID

As a result, token(s) ID_BASELINEPRIVACY,SNMP_BITSTRING,T_MACADDR,T_MACMASK,T_IP
V6,T_OID were disabled for that input
warning(209): TestKO.g:450:1: Multiple token rules can match input such as "'L'"
: ID_LLCPACKETCLASSIFIER, T_OID

As a result, token(s) T_OID were disabled for that input
warning(209): TestKO.g:450:1: Multiple token rules can match input such as "'P'"
: ID_PRIORITYUP, ID_PRIVACYENABLE, ID_PHSSUPPORT, ID_PHS, ID_PHSCLASSIFIERREF, I
D_PHSCLASSIFIERID, ID_PHSERVICEFLOWREF, ID_PHSSERVICEFLOWID, ID_PHSFIELD, ID_PHS
INDEX, ID_PHSMASK, ID_PHSSIZE, ID_PHSVERIFY, T_OID

As a result, token(s) ID_PRIVACYENABLE,ID_PHSSUPPORT,ID_PHS,ID_PHSCLASSIFIERREF,
ID_PHSCLASSIFIERID,ID_PHSERVICEFLOWREF,ID_PHSSERVICEFLOWID,ID_PHSFIELD,ID_PHSIND
EX,ID_PHSMASK,ID_PHSSIZE,ID_PHSVERIFY,T_OID were disabled for that input
warning(209): TestKO.g:450:1: Multiple token rules can match input such as "'I'"
: ID_IPV6SWUPGRADESERVER, ID_IGMPSUPPORT, ID_IPPACKETCLASSIFIER, ID_IPTOS, ID_IP
PROTO, ID_IPSRCADDR, ID_IPSRCMASK, ID_IPDSTADDR, ID_IPDSTMASK, ID_IEEE802CLASSIF
IER, ID_IPV6PACKETCLASSIFIER, ID_IPV6TRAFFICCLASSRANGEMASK, ID_IPV6FLOWLABEL, ID
_IPV6NEXTHEADERTYPE, ID_IPV6SRCADDR, ID_IPV6SRCPREFLENGTH, ID_IPV6DSTADDR, ID_IP
V6DSTPREFLENGTH, SNMP_INTEGER, SNMP_IPADDRESS, T_OID

As a result, token(s) ID_IGMPSUPPORT,ID_IPPACKETCLASSIFIER,ID_IPTOS,ID_IPPROTO,I
D_IPSRCADDR,ID_IPSRCMASK,ID_IPDSTADDR,ID_IPDSTMASK,ID_IEEE802CLASSIFIER,ID_IPV6P
ACKETCLASSIFIER,ID_IPV6TRAFFICCLASSRANGEMASK,ID_IPV6FLOWLABEL,ID_IPV6NEXTHEADERT
YPE,ID_IPV6SRCADDR,ID_IPV6SRCPREFLENGTH,ID_IPV6DSTADDR,ID_IPV6DSTPREFLENGTH,SNMP
_INTEGER,SNMP_IPADDRESS,T_OID were disabled for that input
warning(209): TestKO.g:450:1: Multiple token rules can match input such as "'G'"
: ID_GLOBALPRIVACYENABLE, ID_GUARANTEEDUP, SNMP_GAUGE32, T_OID

As a result, token(s) ID_GUARANTEEDUP,SNMP_GAUGE32,T_OID were disabled for that
input
warning(209): TestKO.g:450:1: Multiple token rules can match input such as "'A'"
: ID_AUTHTIMEOUT, ID_AUTHGRACETIME, ID_AUTHREJECTTIMEOUT, ID_ACTIVATIONSTATE, T_
MACADDR, T_MACMASK, T_IPV6, T_OID

As a result, token(s) ID_AUTHGRACETIME,ID_AUTHREJECTTIMEOUT,ID_ACTIVATIONSTATE,T
_MACADDR,T_MACMASK,T_IPV6,T_OID were disabled for that input
warning(209): TestKO.g:450:1: Multiple token rules can match input such as "'D'"
: ID_DOWNSTREAMFREQUENCY, ID_DOCSISTWOENABLE, ID_DOWNSTREAMSAIDSUPPORT, ID_DCCSU
PPORT, ID_DSPACKETCLASS, ID_DSCACTION, ID_DSTPORTSTART, ID_DSTPORTEND, ID_DSTMAC
ADDRESS, T_MACADDR, T_MACMASK, T_IPV6, T_OID

As a result, token(s) ID_DOCSISTWOENABLE,ID_DOWNSTREAMSAIDSUPPORT,ID_DCCSUPPORT,
ID_DSPACKETCLASS,ID_DSCACTION,ID_DSTPORTSTART,ID_DSTPORTEND,ID_DSTMACADDRESS,T_M
ACADDR,T_MACMASK,T_IPV6,T_OID were disabled for that input
warning(209): TestKO.g:450:1: Multiple token rules can match input such as "'N'"
: ID_NETWORKACCESS, T_OID

As a result, token(s) T_OID were disabled for that input
warning(209): TestKO.g:450:1: Multiple token rules can match input such as "'H'"
: SNMP_HEXSTRING, T_OID

As a result, token(s) T_OID were disabled for that input
warning(209): TestKO.g:455:1: Multiple token rules can match input such as "'1'.
.'9'": T_INTLIST3, T_INT, T_MACADDR, T_MACMASK, T_IP, T_IPV6, T_OID, T_TIMETICKS


As a result, token(s) T_INT,T_MACADDR,T_MACMASK,T_IP,T_IPV6,T_OID,T_TIMETICKS we
re disabled for that input
warning(209): TestKO.g:450:1: Multiple token rules can match input such as "'a'.
.'f'": T_MACADDR, T_MACMASK, T_IPV6, T_OID

As a result, token(s) T_MACMASK,T_IPV6,T_OID were disabled for that input
warning(209): TestKO.g:450:1: Multiple token rules can match input such as "'M'"
: STATIC_MAIN, ID_MAXCPE, ID_MAXCLASSIFIERS, ID_MFGCVCDATA, ID_MANUFACTURERCVC,
ID_MTACONFIGDELIMITER, ID_MAXRATEDOWN, ID_MAXRATEUP, ID_MAXBURSTUP, ID_MODEMCAPA
BILITIES, ID_MODEMDOCSISVERSION, T_OID

As a result, token(s) ID_MAXCPE,ID_MAXCLASSIFIERS,ID_MFGCVCDATA,ID_MANUFACTURERC
VC,ID_MTACONFIGDELIMITER,ID_MAXRATEDOWN,ID_MAXRATEUP,ID_MAXBURSTUP,ID_MODEMCAPAB
ILITIES,ID_MODEMDOCSISVERSION,T_OID were disabled for that input
warning(209): TestKO.g:450:1: Multiple token rules can match input such as "'U'"
: ID_UPSTREAMCHANNELID, ID_UPSTREAMSIDSUPPORT, ID_USPACKETCLASS, ID_USERPRIORITY
, SNMP_UNSIGNED32, T_OID

As a result, token(s) ID_UPSTREAMSIDSUPPORT,ID_USPACKETCLASS,ID_USERPRIORITY,SNM
P_UNSIGNED32,T_OID were disabled for that input
warning(209): TestKO.g:450:1: Multiple token rules can match input such as "'S'"
: ID_SWUPGRADEFILENAME, ID_SNMPWRITECONTROL, ID_SNMPMIBOBJECT, ID_SWUPGRADESERVE
R, ID_SUBMGMTCONTROL, ID_SUBMGMTFILTERS, ID_SNMPCPEACCESSCONTROL, ID_SAMAPWAITTI
MEOUT, ID_SAMAPMAXRETRIES, ID_SERVICEFLOWREF, ID_SERVICEFLOWID, ID_SRCPORTSTART,
 ID_SRCPORTEND, ID_SRCMACADDRESS, SNMP_STRING, T_OID

As a result, token(s) ID_SNMPWRITECONTROL,ID_SNMPMIBOBJECT,ID_SWUPGRADESERVER,ID
_SUBMGMTCONTROL,ID_SUBMGMTFILTERS,ID_SNMPCPEACCESSCONTROL,ID_SAMAPWAITTIMEOUT,ID
_SAMAPMAXRETRIES,ID_SERVICEFLOWREF,ID_SERVICEFLOWID,ID_SRCPORTSTART,ID_SRCPORTEN
D,ID_SRCMACADDRESS,SNMP_STRING,T_OID were disabled for that input
warning(209): TestKO.g:450:1: Multiple token rules can match input such as "'E'"
: ID_ETHERTYPE, T_MACADDR, T_MACMASK, T_IPV6, T_OID

As a result, token(s) T_MACADDR,T_MACMASK,T_IPV6,T_OID were disabled for that in
put
warning(209): TestKO.g:450:1: Multiple token rules can match input such as "'R'"
: ID_REAUTHTIMEOUT, ID_REKEYTIMEOUT, ID_RULEPRIORITY, T_OID

As a result, token(s) ID_REKEYTIMEOUT,ID_RULEPRIORITY,T_OID were disabled for th
at input
warning(209): TestKO.g:450:1: Multiple token rules can match input such as "'-'"
: T_INTLIST3, T_INT, T_OID

As a result, token(s) T_INT,T_OID were disabled for that input
warning(209): TestKO.g:450:1: Multiple token rules can match input such as "'C'"
: ID_CPEMACADDRESS, ID_COSIGNERCVCDATA, ID_COSIGNERCVC, ID_CLASSOFSERVICE, ID_CL
ASSID, ID_CONCATENATIONSUPPORT, ID_CLASSIFIERREF, ID_CLASSIFIERID, SNMP_COUNTER3
2, SNMP_COUNTER64, T_MACADDR, T_MACMASK, T_IPV6, T_OID

As a result, token(s) ID_COSIGNERCVCDATA,ID_COSIGNERCVC,ID_CLASSOFSERVICE,ID_CLA
SSID,ID_CONCATENATIONSUPPORT,ID_CLASSIFIERREF,ID_CLASSIFIERID,SNMP_COUNTER32,SNM
P_COUNTER64,T_MACADDR,T_MACMASK,T_IPV6,T_OID were disabled for that input
warning(209): TestKO.g:455:1: Multiple token rules can match input such as "'0'"
: T_INTLIST3, T_INT, T_HEXSTR, T_MACADDR, T_MACMASK, T_IP, T_IPV6, T_OID, T_TIME
TICKS

As a result, token(s) T_INT,T_HEXSTR,T_MACADDR,T_MACMASK,T_IP,T_IPV6,T_OID,T_TIM
ETICKS were disabled for that input
warning(209): TestKO.g:450:1: Multiple token rules can match input such as "'F'"
: ID_FRAGMENTATIONSUPPORT, T_MACADDR, T_MACMASK, T_IPV6, T_OID

As a result, token(s) T_MACADDR,T_MACMASK,T_IPV6,T_OID were disabled for that in
put
warning(209): TestKO.g:450:1: Multiple token rules can match input such as "'O'"
: ID_OPERTIMEOUT, SNMP_OCTETSTRING, SNMP_Opaque, SNMP_OID, T_OID

As a result, token(s) SNMP_OCTETSTRING,SNMP_Opaque,SNMP_OID,T_OID were disabled
for that input
error(208): TestKO.g:455:1: The following token definitions can never be matched
 because prior tokens match the same input: ID_SNMPWRITECONTROL,ID_SNMPMIBOBJECT
,ID_MAXCPE,ID_TFTPMODEMADDRESS,ID_SWUPGRADESERVER,ID_MAXCLASSIFIERS,ID_MFGCVCDAT
A,ID_MANUFACTURERCVC,ID_COSIGNERCVCDATA,ID_COSIGNERCVC,ID_SUBMGMTCONTROL,ID_SUBM
GMTFILTERS,ID_DOCSISTWOENABLE,ID_TESTMODEENABLE,ID_SNMPCPEACCESSCONTROL,ID_MTACO
NFIGDELIMITER,ID_CLASSOFSERVICE,ID_CLASSID,ID_MAXRATEDOWN,ID_MAXRATEUP,ID_GUARAN
TEEDUP,ID_MAXBURSTUP,ID_PRIVACYENABLE,ID_MODEMCAPABILITIES,ID_CONCATENATIONSUPPO
RT,ID_MODEMDOCSISVERSION,ID_PHSSUPPORT,ID_IGMPSUPPORT,ID_DOWNSTREAMSAIDSUPPORT,I
D_UPSTREAMSIDSUPPORT,ID_DCCSUPPORT,ID_BASELINEPRIVACY,ID_AUTHGRACETIME,ID_REKEYT
IMEOUT,ID_TEKGRACETIME,ID_AUTHREJECTTIMEOUT,ID_SAMAPWAITTIMEOUT,ID_SAMAPMAXRETRI
ES,ID_USPACKETCLASS,ID_DSPACKETCLASS,ID_CLASSIFIERREF,ID_CLASSIFIERID,ID_SERVICE
FLOWREF,ID_SERVICEFLOWID,ID_RULEPRIORITY,ID_ACTIVATIONSTATE,ID_DSCACTION,ID_IPPA
CKETCLASSIFIER,ID_IPTOS,ID_IPPROTO,ID_IPSRCADDR,ID_IPSRCMASK,ID_IPDSTADDR,ID_IPD
STMASK,ID_SRCPORTSTART,ID_SRCPORTEND,ID_DSTPORTSTART,ID_DSTPORTEND,ID_DSTMACADDR
ESS,ID_SRCMACADDRESS,ID_IEEE802CLASSIFIER,ID_USERPRIORITY,ID_IPV6PACKETCLASSIFIE
R,ID_IPV6TRAFFICCLASSRANGEMASK,ID_IPV6FLOWLABEL,ID_IPV6NEXTHEADERTYPE,ID_IPV6SRC
ADDR,ID_IPV6SRCPREFLENGTH,ID_IPV6DSTADDR,ID_IPV6DSTPREFLENGTH,ID_PHS,ID_PHSCLASS
IFIERREF,ID_PHSCLASSIFIERID,ID_PHSERVICEFLOWREF,ID_PHSSERVICEFLOWID,ID_PHSFIELD,
ID_PHSINDEX,ID_PHSMASK,ID_PHSSIZE,ID_PHSVERIFY,SNMP_INTEGER,SNMP_COUNTER32,SNMP_
GAUGE32,SNMP_TIMETICKS,SNMP_UNSIGNED32,SNMP_COUNTER64,SNMP_OCTETSTRING,SNMP_IPAD
DRESS,SNMP_Opaque,SNMP_OID,SNMP_BITSTRING,SNMP_STRING,T_INT,T_HEXSTR,T_MACMASK,T
_IP,T_TIMETICKS

D:\Dev\Jdocsis\ch\gauteron\docsis\parser\test>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: TestOK.g
Type: application/octet-stream
Size: 8568 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090520/fc53e0cb/attachment.obj 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: TestKO.g
Type: application/octet-stream
Size: 13302 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090520/fc53e0cb/attachment-0001.obj 

From murat.knecht at student.hpi.uni-potsdam.de  Wed May 20 02:27:57 2009
From: murat.knecht at student.hpi.uni-potsdam.de (Murat Knecht)
Date: Wed, 20 May 2009 11:27:57 +0200
Subject: [antlr-interest] Python3 target
In-Reply-To: <543531490905191051h38f8dc52w58f34dee93c1c615@mail.gmail.com>
References: <4A12D789.6010002@student.hpi.uni-potsdam.de>
	<543531490905191051h38f8dc52w58f34dee93c1c615@mail.gmail.com>
Message-ID: <4A13CD1D.3090803@student.hpi.uni-potsdam.de>

Hi Ben,

thanks for your fast reply and this simply advice - I didn't think of
running 2to3 on ANTLR. After having some fun with 2to3, I managed to
port both the antlr3-python runtime to python3, as well as the python
target.

Unfortunately, there are still errors in the generated code (and in the
runtime), such as the following. Those are not fixed by 2to3, I guess
because type information is missing:

    if (('\t' <= LA9_0 <= '\n') or LA9_0 == '\r' or LA9_0 == ' ') :
TypeError: unorderable types: str() <= int()

I'll do some patching to get ANTLR to work locally ...

All the best,
Murat

Benjamin Niemann schrieb:
> Hi Murat,
>
> On Tue, May 19, 2009 at 6:00 PM, Murat Knecht
> <murat.knecht at student.hpi.uni-potsdam.de> wrote:
>   
>> I just tried the native Python target with ANTLR3 and stumbled upon
>> problems using the generated parser in Python v3.
>> The documentation says that the current version supports v2.4 and 2.5.
>> Are there any plans to produce a Python3 compatible target or is one
>> already being made?
>>
>> So far, it seems the problems are rather minor, e.g. using old unicode
>> u'blub' strings, which are not allowed in Python anymore. I could
>> probably just hack the python target, but then an in-house solution
>> clearly is nicer and better maintainable.
>>     
>
> I thought about it, but no action taken yet. To keep the
> maintainability high, this probably needs some tweaks in the codegen
> code (e.g. allow 'subclassing' of targets, if implemented as a
> separate target).
>
> Have you tried using the 2to3 tool on the generated code/runtime module?
>
> -Ben
>
>   
>> Sorry, if this has been asked before. Googling python3 and antlr usually
>> results in something about antlr3 (Google is trying just too hard.)
>>
>> Best regards,
>> Murat
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>>     


From micha-1 at fantasymail.de  Wed May 20 02:39:37 2009
From: micha-1 at fantasymail.de (Michael)
Date: Wed, 20 May 2009 11:39:37 +0200
Subject: [antlr-interest] *** GMX Spamverdacht *** ANTLR grammar
	processing returns strange warnings
In-Reply-To: <8097baf0905200150n1c27a77eube4380970bd5fb64@mail.gmail.com>
References: <8097baf0905200150n1c27a77eube4380970bd5fb64@mail.gmail.com>
Message-ID: <200905201139.37302.micha-1@fantasymail.de>


while this  may not be the problem, it's a good idea to add catching of EOF to 
your top grammar rule:

main:	STATIC_MAIN '{' stats '}' EOF;


can't you narrow down the error, stripping away as much as possible?
It would be easier to find then...

cheers
 Michael


From thomas.gill at csr.com  Wed May 20 02:58:47 2009
From: thomas.gill at csr.com (Ned Gill)
Date: Wed, 20 May 2009 10:58:47 +0100
Subject: [antlr-interest] Error reporting with the C runtime: tokenNames
References: <op.ut5387j0o521jq@tg01pc02.europe.root.pri>
	<4A12D02D.7000800@temporal-wave.com>
Message-ID: <op.ut73b9ino521jq@tg01pc02.europe.root.pri>

On Tue, 19 May 2009 16:28:45 +0100, Jim Idle  
<jimi at temporal-wave.com> wrote:

> It is the same as the other targets, in that you need to create a local
> function that returns/displays/adds to the message, the name you want to
> use for error display. It is just a switch statement on the token type
> basically, or you could create a local map and initialize it the first
> time it is required. It is just a bit of slog really.

Sounds like it. I think the information I need is in the <Name>.tokens  
file, though, so possibly I could generate some code from that.


>> I'm already maintaining my own version of C.stg for other reasons, so I
>> could make changes to that if necessary.
>>
> Let me know if there is something that you changed that really needs to
> be in the main template - I know of at least two things that I need to
> resolve (@after for instance), but obviously would prefer that you can
> use the main branch.

The changes are fairly trivial:

- fixed a few compiler warnings (for my grammar at least)
- added some types to cTypeInitMap (some standard, some specific to my  
project)
- #undef ADD (which is defined by a system header somwhere, annoyingly)
- a quick fix to get my grammar building under MinGW.

I've attached a diff against C.stg from 3.1.3.


> I don't know when you split, but there have been
> one or two tweaks to C.stg, so make sure you pick them up.

I'm keeping it up to date with your changes.


Thanks for your help,
Ned.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: C.stg.diff
Type: application/octet-stream
Size: 3143 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090520/11078af1/attachment.obj 

From bestgembler at hotmail.com  Wed May 20 07:23:42 2009
From: bestgembler at hotmail.com (Kevin Chen)
Date: Wed, 20 May 2009 22:23:42 +0800
Subject: [antlr-interest] is there anyway turn on or off (ignore
 case|case insensitive) ?
In-Reply-To: <4A1391DF.2000801@temporal-wave.com>
References: <COL113-W2826FE7F719BD666C7346AB9580@phx.gbl>
	<4A1366B9.3040005@temporal-wave.com>
	<COL113-W27BE6B6C1A7A0B7AA62E92B9580@phx.gbl>
	<COL113-W43752F19F1F60D91E5FBACB9580@phx.gbl>
	<4A1391DF.2000801@temporal-wave.com>
Message-ID: <COL113-W210A9ACF8F3587E0446300B9580@phx.gbl>


Thanks a lot for your help Jim!! And your website is amazing !    0.0

By the way:

Could you tell me what's the diffrrence in the following situations, please?

(1)Token:

  tokens{

     SELECT;
  }

(2)Token:

  tokens{
     SELECT = 'select';
  }

(3)Rule:

  SELECT : 'select';

(4)Rule:


  fragment SELECT : 'select';

_________________________________________________________________
More than messages?check out the rest of the Windows Live?.
http://www.microsoft.com/windows/windowslive/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090520/d7a5079d/attachment.html 

From paulomacagnani at hotmail.com  Wed May 20 07:29:53 2009
From: paulomacagnani at hotmail.com (Paulo Macagnani)
Date: Wed, 20 May 2009 11:29:53 -0300
Subject: [antlr-interest] Localizing error messages in target javascript
Message-ID: <BAY144-W5E454BB7A2D74C4CFFA28C9580@phx.gbl>


Hi folks,

 

I?m trying to override the getErrorMessage methods in target javascript in order to provide message translation.

 

My .g file looks is shown bellow. The generated .js file seems to be ok, but my InfixExpressionClientLexer is now undefined.

 

Any hints?

 

[]s

 

Paulo

 

 

 

grammar InfixExpressionClient;


options {
 language=JavaScript;
}


@lexer::members {
 @Override
 getErrorMessage : function(e, tokenNames) {
        var msg = null;
        if ( e instanceof org.antlr.runtime.MismatchedTokenException ) {
            msg = "mismatched character "+this.getCharErrorDisplay(e.c)+" expecting "+this.getCharErrorDisplay(e.expecting);
        }
        else if ( e instanceof org.antlr.runtime.NoViableAltException ) {
            msg = "no viable alternative at character "+this.getCharErrorDisplay(e.c);
        }
        else if ( e instanceof org.antlr.runtime.EarlyExitException ) {
            msg = "required (...)+ loop did not match anything at character "+this.getCharErrorDisplay(e.c);
        }
        else if ( e instanceof org.antlr.runtime.MismatchedNotSetException ) {
            msg = "mismatched character "+this.getCharErrorDisplay(e.c)+" expecting set "+e.expecting;
        }
        else if ( e instanceof org.antlr.runtime.MismatchedSetException ) {
            msg = "mismatched character "+this.getCharErrorDisplay(e.c)+" expecting set "+e.expecting;
        }
        else if ( e instanceof org.antlr.runtime.MismatchedRangeException ) {
            msg = "mismatched character "+this.getCharErrorDisplay(e.c)+" expecting set "+
                this.getCharErrorDisplay(e.a)+".."+this.getCharErrorDisplay(e.b);
        }
        else {
            msg = org.antlr.runtime.Lexer.superclass.getErrorMessage.call(this, e, tokenNames);
        }
        return msg;
    },

    getCharErrorDisplay : function(c) {
        var s = c; //String.fromCharCode(c);
        switch ( s ) {
            case org.antlr.runtime.Token.EOF :
                s = "<EOF>";
                break;
            case "\n" :
                s = "\\n";
                break;
            case "\t" :
                s = "\\t";
                break;
            case "\r" :
                s = "\\r";
                break;
        }
        return "'"+s+"'";
    }
}

 

 

expression
 :  logicalExpression;

_________________________________________________________________
Conhe?a os novos produtos Windows Live! Clique aqui.
http://www.windowslive.com.br
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090520/5696e9fa/attachment.html 

From jimi at temporal-wave.com  Wed May 20 07:57:12 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 20 May 2009 07:57:12 -0700
Subject: [antlr-interest] ANTLR grammar processing returns strange
	warnings
In-Reply-To: <8097baf0905200150n1c27a77eube4380970bd5fb64@mail.gmail.com>
References: <8097baf0905200150n1c27a77eube4380970bd5fb64@mail.gmail.com>
Message-ID: <4A141A48.9070308@temporal-wave.com>

Yann Gauteron wrote:
> Dear ANTLR users,
>
> I am a happy (until now) new user of ANTLR. I learned ANTLR from
> scratch by reading the "The Definitive ANTLR Reference" book and
> trying to code a configuration file parser with ANTLR 3.1.3.
>
> While coding the grammar, I had no problem for converting grammar into
> Java until a certain moment, where I get lots of warnings similar to
> "warning(209): TestKO.g:450:1: Multiple token rules can match input
> such as "'T'" : ID_TFTPTIMESTAMP, ID_TFTPMODEMADDRESS,
> ID_TESTMODEENABLE, ID_TEKGRACETIME, SNMP_TIMETICKS, T_OID"
>   
Without looking at your grammar to see if these are real, I suggest that 
your lexer is too complicated for the default settings. Try:

java -jar path/to/jar -Xconversiontimeout 10000 T.g

If that does not work, then you have defined tokens that are indeed 
ambiguous.

Jim

From jimi at temporal-wave.com  Wed May 20 08:03:10 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 20 May 2009 08:03:10 -0700
Subject: [antlr-interest] Error reporting with the C runtime: tokenNames
In-Reply-To: <op.ut73b9ino521jq@tg01pc02.europe.root.pri>
References: <op.ut5387j0o521jq@tg01pc02.europe.root.pri>	<4A12D02D.7000800@temporal-wave.com>
	<op.ut73b9ino521jq@tg01pc02.europe.root.pri>
Message-ID: <4A141BAE.10504@temporal-wave.com>

Ned Gill wrote:
> On Tue, 19 May 2009 16:28:45 +0100, Jim Idle <jimi at temporal-wave.com> 
> wrote:
>
>> It is the same as the other targets, in that you need to create a local
>> function that returns/displays/adds to the message, the name you want to
>> use for error display. It is just a switch statement on the token type
>> basically, or you could create a local map and initialize it the first
>> time it is required. It is just a bit of slog really.
>
> Sounds like it. I think the information I need is in the <Name>.tokens 
> file, though, so possibly I could generate some code from that.
Generally not as though it might be what you need in this case, you may 
well want to say near: punctuation character ','. Or, at the 'spline' 
operator '+*^" and so on. BUt if the tokens file gives you what you 
need, then a few minutes of awk should transform it in to a C struct for 
you :-)
>
>
>>> I'm already maintaining my own version of C.stg for other reasons, so I
>>> could make changes to that if necessary.
>>>
>> Let me know if there is something that you changed that really needs to
>> be in the main template - I know of at least two things that I need to
>> resolve (@after for instance), but obviously would prefer that you can
>> use the main branch.
>
> The changes are fairly trivial:
>
> - fixed a few compiler warnings (for my grammar at least)
OK - I want the output to go through -Wall/W4 without any warnings so I 
will check your changes.
> - added some types to cTypeInitMap (some standard, some specific to my 
> project)
Sure - not much we can do about that.
> - #undef ADD (which is defined by a system header somwhere, annoyingly)
Ah - the way to get around that is not to undef ADD but to change your 
token name to KADD, then you can ignore the system header.
> - a quick fix to get my grammar building under MinGW.
Should already do so, but I am trying to keep MingW supported, so I 
should like to try and incorporate your changes.
>
> I've attached a diff against C.stg from 3.1.3.
>
Thanks - I will look at bringing in the fixes.

jim

From craig at palantir.co.za  Wed May 20 08:16:58 2009
From: craig at palantir.co.za (Craig Main)
Date: Wed, 20 May 2009 17:16:58 +0200
Subject: [antlr-interest] Building C# Libraries,
Message-ID: <01db01c9d95e$049cade0$0dd609a0$@co.za>

Hi,

 

Antlr depends on stringtemplate which in turn seems to depend on a very old
version of antlr (antlr.runtime.dll as opposed to the new Antlr3.Runtime).

The source code for antlr.runtime.dll is not included in the current version
of antlr (3.1.3) and does not appear to be included in the stringtemplate
beta (3.1) or (3.0.1) distributions. Could someone let me know where I might
find the source for this particular version. I need to rebuild.

 

Many thanks

Regards
Craig.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090520/80e0e6c0/attachment.html 

From gerald at certiv.net  Wed May 20 08:42:02 2009
From: gerald at certiv.net (Gerald Rosenberg)
Date: Wed, 20 May 2009 08:42:02 -0700
Subject: [antlr-interest] ANTLR grammar processing returns strange
 warnings
In-Reply-To: <8097baf0905200150n1c27a77eube4380970bd5fb64@mail.gmail.com
 >
References: <8097baf0905200150n1c27a77eube4380970bd5fb64@mail.gmail.com>
Message-ID: <200905201542.n4KFgU3o012897@zinc.newtechlaw.com>

The warning is correct.

ID_ETHERTYPE :'EtherType';

can conflict with

T_MACADDR :S_HEX ...

since

fragment S_HEX :('0'..'9' | 'a'..'f' | 'A'..'F');

which could be just a single character 'E'

Warnings go away if you change S_HEX to

fragment S_HEX
:('0'..'9' | 'a'..'f' | 'A'..'F') ('0'..'9' | 'a'..'f' | 'A'..'F');

(you will need to change other rules accordingly)

Using sample input, you can generate the token stream and verify the 
actual path the lexer is taking.




At 01:50 AM 5/20/2009, you wrote:
>Dear ANTLR users,
>
>I am a happy (until now) new user of ANTLR. I learned ANTLR from
>scratch by reading the "The Definitive ANTLR Reference" book and
>trying to code a configuration file parser with ANTLR 3.1.3.
>
>While coding the grammar, I had no problem for converting grammar into
>Java until a certain moment, where I get lots of warnings similar to
>"warning(209): TestKO.g:450:1: Multiple token rules can match input
>such as "'T'" : ID_TFTPTIMESTAMP, ID_TFTPMODEMADDRESS,
>ID_TESTMODEENABLE, ID_TEKGRACETIME, SNMP_TIMETICKS, T_OID"
>
>Typically, with TestOK.g grammar, conversion works. With TestKO.g
>grammar, conversion returns warnings (see error.txt file).
>
>I can't understand why these warnings are returned as - I think -
>there is no errors in my grammar (lots of warning lines are returned
>against lines that were unmodified between TestOK and TestKO !).
>
>May you have some feedbacks if this is finally a mistake in my grammar
>(any advice is welcome, as I mentionned it is my first experience with
>ANTLR) or is it known problems with ANTLR (I read some threads on
>ANTLR interest mailing list with the same warnings, but it seems this
>is not the same situation).
>
>Thanks!
>Yann
>
>Content-Type: text/plain; charset=US-ASCII; name="error.txt"
>Content-Disposition: attachment; filename="error.txt"
>X-Attachment-Id: f_fuxs4kr41
>
>Content-Type: application/octet-stream; name="TestOK.g"
>Content-Disposition: attachment; filename="TestOK.g"
>X-Attachment-Id: f_fuxs4kqq0
>
>Content-Type: application/octet-stream; name="TestKO.g"
>Content-Disposition: attachment; filename="TestKO.g"
>X-Attachment-Id: f_fuxs4krf2
>
>
>List: http://www.antlr.org/mailman/listinfo/antlr-interest
>Unsubscribe: 
>http://www.antlr.org/mailman/options/antlr-interest/your-email-address
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090520/ab81390e/attachment.html 

From jimi at temporal-wave.com  Wed May 20 08:45:37 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 20 May 2009 08:45:37 -0700
Subject: [antlr-interest] ANTLR3C displayRecognitionError
In-Reply-To: <c96a5b9e0905200635t75ac81dx19401fe2a37948a0@mail.gmail.com>
References: <c96a5b9e0905200635t75ac81dx19401fe2a37948a0@mail.gmail.com>
Message-ID: <4A1425A1.6050504@temporal-wave.com>

Mark Rosen wrote:
> Jim,
>  
> Great job with ANTLR3C, by the way. Very useful... The documentation 
> page below describes how to install your own custom 
> displayRecognitionError handler. I've done this, but what escapes me 
> is how to remember the errors to print out for later display. Sure, I 
> could put them in a global variable, but I'd like for multiple 
> instances of my parser to be able to be called concurrently. Is there 
> any way to add a data structure (like a list<string>) to the 
> ANTLR3_BASE_RECOGNIZER class?
>  
> http://antlr.org/api/C/group__apistructures.html
>  
Hi Mark,

Yes, you can indeed do this (comes from using the code myself - I run in 
to the same things :-), but you do not add it to the . For some reason, 
the doxygen generated docs are not including the doc pages about this, I 
will have to find out why.

I generally use an ANTLR3_VECTOR (because then it is ordered), but tend 
to collect all such things (counters, parameters etc) in a mast 
structure like this:

@parser::context
{
        pMY_PARSE_SESSION              ps;                     // MY 
compiler session context for parser
}

Anything in the @lexer/@parser ::context section is adding verbatim into 
the context struct (referenced via ctx), and you can initialize it in 
@apifuncs, or externally.

The base recognizer has a void * pointer called super, which will point 
to the parser instance (you can see that the the default error display 
routines pick this up.). However, ANTLR3_PARSER also has this field, but 
it is not initialized by default because I cannot know that the instance 
of your generated parser is what you want it to point at (I suppose I 
could assume this and let you override it, but it is probably better to 
explicitly initialize it for future reference.

So, in your apifuncs section:

@parser::apifuncs {

  ctx->ps = myNewContextGrooveThang;

  PARSER->super = (void *)ctx;
}


Now, in your display routine, you will get the parser pointer from base 
recognizer, get the ctx pointer from super, and your custom, thread safe 
collection will be in your master structure. A few pointer chases, but 
this provides maximum flexibility:

displayRecognitionError        (pANTLR3_BASE_RECOGNIZER recognizer, 
pANTLR3_UINT8 * tokenNames)
{
   pANTLR3_PARSER            parser;
   pmyParser                             generated;
   pMY_PARSE_SESSION              ps;

   parser        = (pANTLR3_PARSER) (recognizer->super);
   generated  = (pmyParser)(generated->super);
   ps               = generated->ps;

   // Bob's your uncle.....


Jim

From tbender at stud.hs-heilbronn.de  Wed May 20 08:45:35 2009
From: tbender at stud.hs-heilbronn.de (Tilman Bender)
Date: Wed, 20 May 2009 17:45:35 +0200
Subject: [antlr-interest] Building C# Libraries,
In-Reply-To: <01db01c9d95e$049cade0$0dd609a0$@co.za>
References: <01db01c9d95e$049cade0$0dd609a0$@co.za>
Message-ID: <C9001EC2-5EC0-45C5-BD00-57ED3C38BEB6@stud.hs-heilbronn.de>

HI,

I guess you will find it on the ANTLR2-Project Site:
http://www.antlr2.org/download.html

HTH
Tilman Bender
Student des Software Engineering
Hochschule Heilbronn
tbender at stud.hs-heilbronn.de



Am 20.05.2009 um 17:16 schrieb Craig Main:

> Hi,
>
>
>
> Antlr depends on stringtemplate which in turn seems to depend on a  
> very old version of antlr (antlr.runtime.dll as opposed to the new  
> Antlr3.Runtime).
>
> The source code for antlr.runtime.dll is not included in the current  
> version of antlr (3.1.3) and does not appear to be included in the  
> stringtemplate beta (3.1) or (3.0.1) distributions. Could someone  
> let me know where I might find the source for this particular  
> version. I need to rebuild.
>
>
>
> Many thanks
>
> Regards
> Craig.
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090520/34f86c27/attachment.html 

From ygauteron at gmail.com  Wed May 20 09:00:19 2009
From: ygauteron at gmail.com (Yann Gauteron)
Date: Wed, 20 May 2009 18:00:19 +0200
Subject: [antlr-interest] ANTLR grammar processing returns strange
	warnings
In-Reply-To: <200905201542.n4KFgU3o012897@zinc.newtechlaw.com>
References: <8097baf0905200150n1c27a77eube4380970bd5fb64@mail.gmail.com>
	<200905201542.n4KFgU3o012897@zinc.newtechlaw.com>
Message-ID: <8097baf0905200900t5fe2948t4de1fe83802a9c22@mail.gmail.com>

Hi everyone,

I noticed something weird. If I take the same file TestKO.g than the
one I sent this morning and I processed it again this afternoon, ANTLR
did not return any warnings! Weird I said.

I'll keep the advice of Jim in case the problem appeared again. This
timeout "thing" can be one possible cause of such sporadic problem.
I'll keep you informed if the problem appears again and if it is
solved with the parameter of Jim.

Michael, I put the EOF in the main rule. Thanks for the advice. :-)

Gerald, many thanks for your analyzis. However, I can not understand
why ID_ETHERTYPE can conflict with T_MACADDR.
ID_ETHERTYPE          // DOCSIS 1.1: TLV [22|23].10.3
  : 'EtherType';

T_MACADDR       // MAC address ("00:11:22:33:44:55")
  : S_HEX S_HEX ':' S_HEX S_HEX ':' S_HEX S_HEX ':' S_HEX S_HEX ':'
S_HEX S_HEX ':' S_HEX S_HEX;

fragment S_HEX
  : ('0'..'9' | 'a'..'f' | 'A'..'F');

As far as I understand ANTLR grammar writing, ID_ETHERTYPE can only
match the exact string 'EtherType'. 'E' would not be a valid
ID_ETHERTYPE token. T_MACADDR could only match MAC addresses in the
"classic" form (two hex digits separated with a colon). Here again 'E'
could not be considered as a valid T_MACADDR (as well as 'EtherType'
which is not a valid T_MACADDR token). This was the reason why I was
not able to understand why it would have been any ambiguity in my
ANTLR grammar. If my understanding of ANTLR grammar/behaviour is
incorrect, don't hesitate to correct me! It would avoid me to go
deeper in a wrong direction and to be more effective with ANTLR.

Anyway, I was now able to process my grammar file. I'll continue
writing the grammar to integrate the missing IDs and rules.

Thanks for your help and your answers!
Y.

From tball at google.com  Wed May 20 12:06:33 2009
From: tball at google.com (Tom Ball)
Date: Wed, 20 May 2009 12:06:33 -0700
Subject: [antlr-interest] Unnecessary Java output file diffs
Message-ID: <ecf3d2390905201206q5c480c79n3b8f509a9af0e4ca@mail.gmail.com>

Our distributed build system compares output files and only copies back the
ones that have changed since the last build.  We've noticed that our
Antlr->Java step always gets copied, for two reasons.  First, because a
timestamp is in the output file's header -- is that necessary as a default?
More useful might be a timestamp variable that can be put a .g file if
desired, and expanded during generation.

We think the second reason might be a bug, as here is some example output
from a common, unchanged source file:

@@ -2531,7 +2531,7 @@
                        int index13_13 = input.index();
                        input.rewind();
                        s = -1;
-                        if (
(((input.LT(1).getText().equals("gte"))||(input.LT(1).getText().equals("lte"))||(input.LT(1).getText().equals("gt"))||(input.LT(1).getText().equals("lt"))||(input.LT(1).getText().equals("eq"))||(input.LT(1).getText().equals("ne"))))
) {s = 2;}
+                        if (
(((input.LT(1).getText().equals("gte"))||(input.LT(1).getText().equals("lte"))||(input.LT(1).getText().equals("lt"))||(input.LT(1).getText().equals("gt"))||(input.LT(1).getText().equals("eq"))||(input.LT(1).getText().equals("ne"))))
) {s = 2;}

                        else if ( (true) ) {s = 8;}

Shouldn't the order of the token comparisons be the same for every
generation?  I guess it doesn't matter in this example since the string can
only have one match, but my hunch is that with other rules comparison order
matters.  Here is the rule which generated the above:

comparator returns [Operation value]
  : ((eqToken | '=') { $value = Operation.EQ; })
  | ((neToken | '!=') { $value = Operation.NEQ; })
  | ((gtToken | '>') { $value = Operation.GT; })
  | ((gteToken | '>=') { $value = Operation.GTE; })
  | ((ltToken | '<') { $value = Operation.LT; })
  | ((lteToken | '<=') { $value = Operation.LTE; })
  ;

// Pseudo-tokens
eqToken : {input.LT(1).getText().equals("eq")}? NCNAME ;
neToken : {input.LT(1).getText().equals("ne")}? NCNAME ;
ltToken : {input.LT(1).getText().equals("lt")}? NCNAME ;
lteToken : {input.LT(1).getText().equals("lte")}? NCNAME ;
gtToken : {input.LT(1).getText().equals("gt")}? NCNAME ;
gteToken : {input.LT(1).getText().equals("gte")}? NCNAME ;

NCNAME
  : (LETTER | '_') (LETTER | NONLETTER | '.' | '-' | '_')*
  ;

Tom
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090520/efcbb457/attachment.html 

From sharwell at pixelminegames.com  Wed May 20 12:11:35 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Wed, 20 May 2009 14:11:35 -0500
Subject: [antlr-interest] Unnecessary Java output file diffs
In-Reply-To: <ecf3d2390905201206q5c480c79n3b8f509a9af0e4ca@mail.gmail.com>
References: <ecf3d2390905201206q5c480c79n3b8f509a9af0e4ca@mail.gmail.com>
Message-ID: <86403CA0939415448BCCB83855EFE09AA68136@Bloodymary.ironwillgames.com>

I wanted to make an option that doesn't include the timestamp and line
number in the generated file, but I couldn't think of a name for it.
Anyone have any suggestions?

 

Sam

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Tom Ball
Sent: Wednesday, May 20, 2009 2:07 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Unnecessary Java output file diffs

 

Our distributed build system compares output files and only copies back
the ones that have changed since the last build.  We've noticed that our
Antlr->Java step always gets copied, for two reasons.  First, because a
timestamp is in the output file's header -- is that necessary as a
default?  More useful might be a timestamp variable that can be put a .g
file if desired, and expanded during generation.

We think the second reason might be a bug, as here is some example
output from a common, unchanged source file:

@@ -2531,7 +2531,7 @@
                        int index13_13 = input.index();
                        input.rewind();
                        s = -1;
-                        if ( (((input.LT(1).getText()

.equals("gte"))||(input.LT(1).getText().equals("lte"))||(input.LT(1).get
Text().equals("gt"))||(input.LT(1).getText().equals("lt"))||(input.LT(1)
.getText().equals("eq"))||(input.LT(1).getText().equals("ne")))) ) {s =
2;}
+                        if (
(((input.LT(1).getText().equals("gte"))||(input.LT(1).getText().equals("
lte"))||(input.LT(1).getText().equals("lt"))||(input.LT(1).getText().equ
als("gt"))||(input.LT(1).getText().equals("eq"))||(input.LT(1).getText()
.equals("ne")))) ) {s = 2;}

                        else if ( (true) ) {s = 8;}

Shouldn't the order of the token comparisons be the same for every
generation?  I guess it doesn't matter in this example since the string
can only have one match, but my hunch is that with other rules
comparison order matters.  Here is the rule which generated the above:

comparator returns [Operation value]
  : ((eqToken | '=') { $value = Operation.EQ; })
  | ((neToken | '!=') { $value = Operation.NEQ; })
  | ((gtToken | '>') { $value = Operation.GT; })
  | ((gteToken | '>=') { $value = Operation.GTE; })
  | ((ltToken | '<') { $value = Operation.LT; })
  | ((lteToken | '<=') { $value = Operation.LTE; })
  ;

// Pseudo-tokens
eqToken : {input.LT(1).getText().equals("eq")}? NCNAME ;
neToken : {input.LT(1).getText().equals("ne")}? NCNAME ;
ltToken : {input.LT(1).getText().equals("lt")}? NCNAME ;
lteToken : {input.LT(1).getText().equals("lte")}? NCNAME ;
gtToken : {input.LT(1).getText().equals("gt")}? NCNAME ;
gteToken : {input.LT(1).getText().equals("gte")}? NCNAME ;

NCNAME
  : (LETTER | '_') (LETTER | NONLETTER | '.' | '-' | '_')*
  ;

Tom

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090520/60944d8e/attachment.html 

From parrt at cs.usfca.edu  Wed May 20 12:13:34 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 20 May 2009 12:13:34 -0700
Subject: [antlr-interest] Unnecessary Java output file diffs
In-Reply-To: <86403CA0939415448BCCB83855EFE09AA68136@Bloodymary.ironwillgames.com>
References: <ecf3d2390905201206q5c480c79n3b8f509a9af0e4ca@mail.gmail.com>
	<86403CA0939415448BCCB83855EFE09AA68136@Bloodymary.ironwillgames.com>
Message-ID: <F2919FBE-5E59-4A71-BC67-B2EBDE26AC97@cs.usfca.edu>

All you have to do is alter the line in Java.stg template file.  We  
could add an action variable like @members that fills in the version  
template string.
Ter
On May 20, 2009, at 12:11 PM, Sam Harwell wrote:

> I wanted to make an option that doesn?t include the timestamp and  
> line number in the generated file, but I couldn?t think of a name  
> for it. Anyone have any suggestions?
>
> Sam
>
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org 
> ] On Behalf Of Tom Ball
> Sent: Wednesday, May 20, 2009 2:07 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Unnecessary Java output file diffs
>
> Our distributed build system compares output files and only copies  
> back the ones that have changed since the last build.  We've noticed  
> that our Antlr->Java step always gets copied, for two reasons.   
> First, because a timestamp is in the output file's header -- is that  
> necessary as a default?  More useful might be a timestamp variable  
> that can be put a .g file if desired, and expanded during generation.
>
> We think the second reason might be a bug, as here is some example  
> output from a common, unchanged source file:
>
> @@ -2531,7 +2531,7 @@
>                         int index13_13 = input.index();
>                         input.rewind();
>                         s = -1;
> -                        if ( (((input.LT(1).getText()
> .equals("gte"))||(input.LT(1).getText().equals("lte"))|| 
> (input.LT(1).getText().equals("gt"))|| 
> (input.LT(1).getText().equals("lt"))|| 
> (input.LT(1).getText().equals("eq"))|| 
> (input.LT(1).getText().equals("ne")))) ) {s = 2;}
> +                        if  
> ( (((input.LT(1).getText().equals("gte"))|| 
> (input.LT(1).getText().equals("lte"))|| 
> (input.LT(1).getText().equals("lt"))|| 
> (input.LT(1).getText().equals("gt"))|| 
> (input.LT(1).getText().equals("eq"))|| 
> (input.LT(1).getText().equals("ne")))) ) {s = 2;}
>
>                         else if ( (true) ) {s = 8;}
>
> Shouldn't the order of the token comparisons be the same for every  
> generation?  I guess it doesn't matter in this example since the  
> string can only have one match, but my hunch is that with other  
> rules comparison order matters.  Here is the rule which generated  
> the above:
>
> comparator returns [Operation value]
>   : ((eqToken | '=') { $value = Operation.EQ; })
>   | ((neToken | '!=') { $value = Operation.NEQ; })
>   | ((gtToken | '>') { $value = Operation.GT; })
>   | ((gteToken | '>=') { $value = Operation.GTE; })
>   | ((ltToken | '<') { $value = Operation.LT; })
>   | ((lteToken | '<=') { $value = Operation.LTE; })
>   ;
>
> // Pseudo-tokens
> eqToken : {input.LT(1).getText().equals("eq")}? NCNAME ;
> neToken : {input.LT(1).getText().equals("ne")}? NCNAME ;
> ltToken : {input.LT(1).getText().equals("lt")}? NCNAME ;
> lteToken : {input.LT(1).getText().equals("lte")}? NCNAME ;
> gtToken : {input.LT(1).getText().equals("gt")}? NCNAME ;
> gteToken : {input.LT(1).getText().equals("gte")}? NCNAME ;
>
> NCNAME
>   : (LETTER | '_') (LETTER | NONLETTER | '.' | '-' | '_')*
>   ;
>
> Tom
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From jimi at temporal-wave.com  Wed May 20 12:44:30 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 20 May 2009 12:44:30 -0700
Subject: [antlr-interest] Unnecessary Java output file diffs
In-Reply-To: <ecf3d2390905201206q5c480c79n3b8f509a9af0e4ca@mail.gmail.com>
References: <ecf3d2390905201206q5c480c79n3b8f509a9af0e4ca@mail.gmail.com>
Message-ID: <4A145D9E.9090909@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090520/e00b5415/attachment.html 

From jimi at temporal-wave.com  Wed May 20 12:47:18 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 20 May 2009 12:47:18 -0700
Subject: [antlr-interest] Unnecessary Java output file diffs
In-Reply-To: <F2919FBE-5E59-4A71-BC67-B2EBDE26AC97@cs.usfca.edu>
References: <ecf3d2390905201206q5c480c79n3b8f509a9af0e4ca@mail.gmail.com>	<86403CA0939415448BCCB83855EFE09AA68136@Bloodymary.ironwillgames.com>
	<F2919FBE-5E59-4A71-BC67-B2EBDE26AC97@cs.usfca.edu>
Message-ID: <4A145E46.1020408@temporal-wave.com>

Terence Parr wrote:
> All you have to do is alter the line in Java.stg template file.  We  
> could add an action variable like @members that fills in the version  
> template string.
>   
Changing the template means they have to do it for every release though, 
which is probably a pain. I like that latter idea actually, probably 
better than options { timestamp = false; } as then you can make it hold 
whatever you like.


Jim



From sharwell at pixelminegames.com  Wed May 20 12:56:43 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Wed, 20 May 2009 14:56:43 -0500
Subject: [antlr-interest] Unnecessary Java output file diffs
In-Reply-To: <4A145E46.1020408@temporal-wave.com>
References: <ecf3d2390905201206q5c480c79n3b8f509a9af0e4ca@mail.gmail.com>	<86403CA0939415448BCCB83855EFE09AA68136@Bloodymary.ironwillgames.com>
	<F2919FBE-5E59-4A71-BC67-B2EBDE26AC97@cs.usfca.edu>
	<4A145E46.1020408@temporal-wave.com>
Message-ID: <86403CA0939415448BCCB83855EFE09AA68137@Bloodymary.ironwillgames.com>

"timestamp" works for the timestamp, but not for the line/column numbers
throughout. That is the type of option I'm referring to though.

Would we make it two options, or find a name that means something for
both items?

Sam

-----Original Message-----
From: Jim Idle [mailto:jimi at temporal-wave.com] 
Sent: Wednesday, May 20, 2009 2:47 PM
To: Terence Parr
Cc: Sam Harwell; antlr-interest at antlr.org
Subject: Re: [antlr-interest] Unnecessary Java output file diffs

Terence Parr wrote:
> All you have to do is alter the line in Java.stg template file.  We  
> could add an action variable like @members that fills in the version  
> template string.
>   
Changing the template means they have to do it for every release though,

which is probably a pain. I like that latter idea actually, probably 
better than options { timestamp = false; } as then you can make it hold 
whatever you like.


Jim



From parrt at cs.usfca.edu  Wed May 20 13:05:44 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 20 May 2009 13:05:44 -0700
Subject: [antlr-interest] Unnecessary Java output file diffs
In-Reply-To: <86403CA0939415448BCCB83855EFE09AA68137@Bloodymary.ironwillgames.com>
References: <ecf3d2390905201206q5c480c79n3b8f509a9af0e4ca@mail.gmail.com>	<86403CA0939415448BCCB83855EFE09AA68136@Bloodymary.ironwillgames.com>
	<F2919FBE-5E59-4A71-BC67-B2EBDE26AC97@cs.usfca.edu>
	<4A145E46.1020408@temporal-wave.com>
	<86403CA0939415448BCCB83855EFE09AA68137@Bloodymary.ironwillgames.com>
Message-ID: <2297E8FB-AED4-47B6-849E-2D7095DACF3C@cs.usfca.edu>

I'm not opposed to allowing things to alter the output template  
easily; I always envisioned this kind of thing, which is why I use  
@name-of-action rather than a keyword like members. So, you would do

@timestamp { <grammar.name>... }

  in the grammar file... I am pretty sure these automatically get  
stored in a hash table and templates could then ask for  
<actions.timestamp> or whatever. The dynamic binding and template  
mechanism of ST allows you to refer to attributes within the template  
you specify as you see above.

Give it a try. my guess is it will just work.
Ter
PS hooray for ST ;)

On May 20, 2009, at 12:56 PM, Sam Harwell wrote:

> "timestamp" works for the timestamp, but not for the line/column  
> numbers
> throughout. That is the type of option I'm referring to though.
>
> Would we make it two options, or find a name that means something for
> both items?
>
> Sam
>
> -----Original Message-----
> From: Jim Idle [mailto:jimi at temporal-wave.com]
> Sent: Wednesday, May 20, 2009 2:47 PM
> To: Terence Parr
> Cc: Sam Harwell; antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Unnecessary Java output file diffs
>
> Terence Parr wrote:
>> All you have to do is alter the line in Java.stg template file.  We
>> could add an action variable like @members that fills in the version
>> template string.
>>
> Changing the template means they have to do it for every release  
> though,
>
> which is probably a pain. I like that latter idea actually, probably
> better than options { timestamp = false; } as then you can make it  
> hold
> whatever you like.
>
>
> Jim
>
>


From ckimyt at gmail.com  Thu May 21 06:42:48 2009
From: ckimyt at gmail.com (Mike J. Bell)
Date: Thu, 21 May 2009 09:42:48 -0400
Subject: [antlr-interest] Island Grammars with identical tokens
Message-ID: <cfae84d80905210642r595574e1kd6e19d89d374c1b2@mail.gmail.com>

I have a main grammar that passes control to two different island
grammars to parse a language.  One island grammar is an island because
it's so big and can be used in a context outside the main language,
and the other island has vastly different lexer rules (whitespace
isn't ignored, etc.).

All three generate ASTs for processing by a follow-on tree parser.  As
such, I need the lexer token numbers to match for all three lexers.
It seems like this is problematic; I thought if I modified the .tokens
files they would be used as input files to the ANTLR generator; this
appears to be false...i.e. they are generated from the .g file each
time.

Does anybody have any advice?  It's like I need to specify a global
tokens {...} and block of lexer rule names, so that the generated
files all use the same set of numbers.  Maybe it's possible for me to
make a "base" lexer class that mentions all the token names and has
overridable lexer rules.  Not sure if that can even happen.

Thanks in advance for any tips...

-- 
Mike J. Bell on gmail

From tbrandonau at gmail.com  Thu May 21 07:24:53 2009
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Fri, 22 May 2009 00:24:53 +1000
Subject: [antlr-interest] Island Grammars with identical tokens
In-Reply-To: <cfae84d80905210642r595574e1kd6e19d89d374c1b2@mail.gmail.com>
References: <cfae84d80905210642r595574e1kd6e19d89d374c1b2@mail.gmail.com>
Message-ID: <ebc876d70905210724yf9ac288m37c5e655582d75af@mail.gmail.com>

On Thu, May 21, 2009 at 11:42 PM, Mike J. Bell <ckimyt at gmail.com> wrote:
> I have a main grammar that passes control to two different island
> grammars to parse a language. ?One island grammar is an island because
> it's so big and can be used in a context outside the main language,
> and the other island has vastly different lexer rules (whitespace
> isn't ignored, etc.).
>
> All three generate ASTs for processing by a follow-on tree parser. ?As
> such, I need the lexer token numbers to match for all three lexers.
> It seems like this is problematic; I thought if I modified the .tokens
> files they would be used as input files to the ANTLR generator; this
> appears to be false...i.e. they are generated from the .g file each
> time.
>
> Does anybody have any advice? ?It's like I need to specify a global
> tokens {...} and block of lexer rule names, so that the generated
> files all use the same set of numbers. ?Maybe it's possible for me to
> make a "base" lexer class that mentions all the token names and has
> overridable lexer rules. ?Not sure if that can even happen.
>
> Thanks in advance for any tips...
You should be able to use the importVocab option to specify a common
.tokens file for all lexers to import. Or you can chain the lexers by
having one island grammar import the vocab of the other and then have
the main grammar import that island grammars vocab. That will avoid
the need to keep the manually generated common token file in sync.
Though then you will need to check if ANTLR's build ordering can
handle this dependency or else make sure you enforce the build order
manually or tokens will get out of sync.

Tom.
>
> --
> Mike J. Bell on gmail
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From ckimyt at gmail.com  Thu May 21 07:56:32 2009
From: ckimyt at gmail.com (Mike J. Bell)
Date: Thu, 21 May 2009 10:56:32 -0400
Subject: [antlr-interest] Island Grammars with identical tokens
In-Reply-To: <ebc876d70905210724yf9ac288m37c5e655582d75af@mail.gmail.com>
References: <cfae84d80905210642r595574e1kd6e19d89d374c1b2@mail.gmail.com>
	<ebc876d70905210724yf9ac288m37c5e655582d75af@mail.gmail.com>
Message-ID: <cfae84d80905210756y3273aeb3q98100e93f149d1ed@mail.gmail.com>

On Thu, May 21, 2009 at 10:24 AM, Thomas Brandon <tbrandonau at gmail.com> wrote:
> You should be able to use the importVocab option to specify a common
> .tokens file for all lexers to import. Or you can chain the lexers by
> having one island grammar import the vocab of the other and then have
> the main grammar import that island grammars vocab. That will avoid
> the need to keep the manually generated common token file in sync.
> Though then you will need to check if ANTLR's build ordering can
> handle this dependency or else make sure you enforce the build order
> manually or tokens will get out of sync.

You meant tokenVocab...thanks, this did the trick!!!  (I get warnings
about "no lexer rule corresponding to token ..." but the generated
code seems to be OK).

Thanks!!!

-- 
Mike J. Bell on gmail

From egrimm at dds.nl  Thu May 21 08:16:25 2009
From: egrimm at dds.nl (Olaf Keijsers)
Date: Thu, 21 May 2009 17:16:25 +0200
Subject: [antlr-interest] Rewrite a list to a set of trees
Message-ID: <9BB68F3920194EA8A712BAD7DEF6E2FC@ultramagnus>

Hello,

To make checking and generating easier, I would like to parse lines like the 
following:
node n1, n2, n3;

And turn them into trees like this:
(VAR 'node' 'n1')
(VAR 'node' 'n2')
(VAR 'node' 'n3')

At the moment I'm using the following rules to parse, but this obviously 
does not generate the result I would like to have:
var_declaration : var_type id_list -> ^(VAR var_type id_list) ;

id_list : IDENTIFIER (COMMA! id_list)? ;

Obviously, this generates trees like this:
(VAR 'node' 'n1' 'n2' 'n3')

Could anyone point me in a direction that allows me to end up with trees 
like I described above? If this is at all possible ;)

Thanks a lot!

Olaf Keijsers 


From thomas.jackson.iii at gmail.com  Thu May 21 08:25:03 2009
From: thomas.jackson.iii at gmail.com (Thomas Jackson)
Date: Thu, 21 May 2009 11:25:03 -0400
Subject: [antlr-interest] C++ Question
Message-ID: <4A15724F.7050001@gmail.com>

I noticed on the Wiki that "C++ classes will be provided as a separate 
library later in 2008."  Does antlr3 now produce C++ using classes now 
or is still just C that is compiled using a C++ compiler?

Thanks in advance for the information.

Thomas Jackson

From wotker at rambler.ru  Thu May 21 09:07:32 2009
From: wotker at rambler.ru (Yurushkin Michael)
Date: Thu, 21 May 2009 20:07:32 +0400
Subject: [antlr-interest] some questions about C runtime
Message-ID: <op.uuae2vk67sdz0f@comp0>

Good evening!
I have IR, that was written in C++. But there is only C runtime.
1) How can I add  "namespaces block" in *.c file?
2) Is it possible to create some (e.g. 2) objects of ParserClass (or  
LexerClass)? Yacc, as I know, generates C code with global variables. So..  
what about antlr?

-- 
???????? ? ???????? ??????? ???????? Opera: http://www.opera.com/mail/

From jimi at temporal-wave.com  Thu May 21 09:17:52 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 21 May 2009 09:17:52 -0700
Subject: [antlr-interest] some questions about C runtime
In-Reply-To: <op.uuae2vk67sdz0f@comp0>
References: <op.uuae2vk67sdz0f@comp0>
Message-ID: <4A157EB0.2060001@temporal-wave.com>

Yurushkin Michael wrote:
> Good evening!
> I have IR, that was written in C++. But there is only C runtime.
>   
Just compile as C++, the code is c++ compilable.
> 1) How can I add  "namespaces block" in *.c file?
>   
add to @members {} and that shoudl work I think.
> 2) Is it possible to create some (e.g. 2) objects of ParserClass (or  
> LexerClass)? 
Yes, but you need to do it manually.
> Yacc, as I know, generates C code with global variables. So..  
> what about antlr?
>   
No global variables, it is all 100% thread safe.

Jim


From g.r.vansickle at att.net  Thu May 21 22:58:44 2009
From: g.r.vansickle at att.net (Gary R. Van Sickle)
Date: Fri, 22 May 2009 00:58:44 -0500
Subject: [antlr-interest] Rewrite a list to a set of trees
In-Reply-To: <9BB68F3920194EA8A712BAD7DEF6E2FC@ultramagnus>
References: <9BB68F3920194EA8A712BAD7DEF6E2FC@ultramagnus>
Message-ID: <846B3F0FB1AD41509B5FDFBEB0C8D2E6@DFW5RB41>

> Hello,
> 
> To make checking and generating easier, I would like to parse 
> lines like the
> following:
> node n1, n2, n3;
> 
> And turn them into trees like this:
> (VAR 'node' 'n1')
> (VAR 'node' 'n2')
> (VAR 'node' 'n3')
> 
> At the moment I'm using the following rules to parse, but 
> this obviously does not generate the result I would like to have:
> var_declaration : var_type id_list -> ^(VAR var_type id_list) ;
> 
> id_list : IDENTIFIER (COMMA! id_list)? ;
> 
> Obviously, this generates trees like this:
> (VAR 'node' 'n1' 'n2' 'n3')
> 
> Could anyone point me in a direction that allows me to end up 
> with trees like I described above? If this is at all possible ;)
> 
> Thanks a lot!
> 
> Olaf Keijsers 

As long as you're not trying to do anything more complex than exactly what
you describe, this is fairly trivial to do with a rule that looks something
like this:

var_decl_list
	: TYPENAME ids+=IDENTIFIER (',' ids+=IDENTIFIER)* -> ^(VAR_DECL
TYPENAME IDENTIFIER)+
	;

If your rule can't be reduced to a one-liner like that though (e.g. C
declarations), things quickly get complicated, and I've yet to determine a
good, general way of handling it.  You'll probably want to look into ANTLR's
rule parameters and return values in that case.

-- 
Gary R. Van Sickle
 


From antlr at mirality.co.nz  Fri May 22 01:16:15 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 22 May 2009 20:16:15 +1200
Subject: [antlr-interest] Rewrite a list to a set of trees
In-Reply-To: <846B3F0FB1AD41509B5FDFBEB0C8D2E6@DFW5RB41>
References: <9BB68F3920194EA8A712BAD7DEF6E2FC@ultramagnus>
	<846B3F0FB1AD41509B5FDFBEB0C8D2E6@DFW5RB41>
Message-ID: <20090522081649.71D7C3418464@www.antlr.org>

At 17:58 22/05/2009, Gary R. Van Sickle wrote:
 >var_decl_list
 >	: TYPENAME ids+=IDENTIFIER (',' ids+=IDENTIFIER)* -> ^(VAR_DECL
 >TYPENAME IDENTIFIER)+
 >	;
 >
 >If your rule can't be reduced to a one-liner like that though 
(e.g.
 >C declarations), things quickly get complicated, and I've yet to 

 >determine a good, general way of handling it.  You'll probably
 >want to look into ANTLR's rule parameters and return values in
 >that case.

I haven't actually tested this, but another way I think you could 
do that would be something like this:

var_decl_list
   : t=TYPENAME! var_decl[$t] (','! var_decl[$t])*
   ;

var_decl[CommonToken typename]
   : IDENTIFIER -> ^(VAR $typename IDENTIFIER)
   ;


From schlpbch at gmx.ch  Fri May 22 02:07:55 2009
From: schlpbch at gmx.ch (schlpbch at gmx.ch)
Date: Fri, 22 May 2009 11:07:55 +0200
Subject: [antlr-interest] Excluding words as tokens
Message-ID: <20090522090755.169990@gmx.net>

Dear all

I'm trying to write a grammar to check the correctness of package names in respect to our meta modell. Thereby I ran into to following problems:

ABSTRACTOBJECT: 
  SERVICEOBJECT | QUERYOBJECT

SERVICEOBJECT: UPPERCASE (LOWERCASE|UPPERCASE)+ DIGIT*  

QUERYOBJECT: UPPERCASE (LOWERCASE|UPPERCASE)+ DIGIT* "Query" 

Of course this production is ambiguous, i.e.

  DateQuery

can be SERVICEOBJECT token as well as a QUERYOBJECT token.

What I would like to express is that a QUERYOBJECT has to end with "Query" otherwise it is a SERVICEOBJECT which would resolve the ambiguity. How can this be expressed in ANTLR?

A related problem I have is that I would like to express that COMPONENTNAME can consists of LOWERCASE+ DIGIT* except 'model' or 'impl'.

I tried expressing these constraints as a regular expression, playing around with '~' but somehow didn't get it working.

Does anybody have an example how this can be expressed?

Thank you very much for your input.
Andreas

-- 
Neu: GMX FreeDSL Komplettanschluss mit DSL 6.000 Flatrate + Telefonanschluss f?r nur 17,95 Euro/mtl.!* http://dslspecial.gmx.de/freedsl-aktionspreis/?ac=OM.AD.PD003K11308T4569a

From g.r.vansickle at att.net  Fri May 22 03:39:31 2009
From: g.r.vansickle at att.net (Gary R. Van Sickle)
Date: Fri, 22 May 2009 05:39:31 -0500
Subject: [antlr-interest] Rewrite a list to a set of trees
References: <9BB68F3920194EA8A712BAD7DEF6E2FC@ultramagnus>
	<846B3F0FB1AD41509B5FDFBEB0C8D2E6@DFW5RB41> 
Message-ID: <02B9186C39A14D83B39BA250114CC3B9@DFW5RB41>

> At 17:58 22/05/2009, Gary R. Van Sickle wrote:
>  >var_decl_list
>  >	: TYPENAME ids+=IDENTIFIER (',' ids+=IDENTIFIER)* -> ^(VAR_DECL
>  >TYPENAME IDENTIFIER)+
>  >	;
>  >
>  >If your rule can't be reduced to a one-liner like that though (e.g.
>  >C declarations), things quickly get complicated, and I've yet to 
> 
>  >determine a good, general way of handling it.  You'll 
> probably  >want to look into ANTLR's rule parameters and 
> return values in  >that case.
> 
> I haven't actually tested this, but another way I think you 
> could do that would be something like this:
> 
> var_decl_list
>    : t=TYPENAME! var_decl[$t] (','! var_decl[$t])*
>    ;
> 
> var_decl[CommonToken typename]
>    : IDENTIFIER -> ^(VAR $typename IDENTIFIER)
>    ;
> 

Right, that's the other of the two main classes of solutions that I've been
able to come up with:

1.  Emit the tree at the very top level (i.e. what I wrote above).
2.  Emit the tree at the very bottom level (what you wrote).

The trouble in general is that you have to explicitly move information up or
down the tree in either case.  Maybe var_decl is used by more than one
higher-level rule - then you have to tell it which one it's being called
from, or else duplicate the rule, making your grammar larger.  Rules scopes
don't help because you don't know which rule you were called from in the
first place, and if you did you wouldn't need the scope.  You can also
simply punt it to the tree parser, but then it starts looking like a big
switch/case statement and it's not clear to me that you've gained anything.
In my current project (a C parser), I'm using a mix of all those techniques
in various places.  They all can be made to work, but none are what you'd
call "slick".  One thing I have yet to try is tree parser->tree parser, that
might help.

-- 
Gary R. Van Sickle
 


From micha-1 at fantasymail.de  Fri May 22 04:01:17 2009
From: micha-1 at fantasymail.de (Micha)
Date: Fri, 22 May 2009 13:01:17 +0200
Subject: [antlr-interest] Excluding words as tokens
In-Reply-To: <20090522090755.169990@gmx.net>
References: <20090522090755.169990@gmx.net>
Message-ID: <200905221301.17829.micha-1@fantasymail.de>

On Friday 22 May 2009 11:07:55 schlpbch at gmx.ch wrote:
> Dear all
>
> I'm trying to write a grammar to check the correctness of package names in
> respect to our meta modell. Thereby I ran into to following problems:
>

use syntactic predicates or/and action in lexer rules to change the type of 
the tokens:

COMPONENTNAME:
	LOWERCASE+ DIGIT* { if ($text.equal("model")) $type = MODEL; .... }

with syntactic predicates and actions you can resolve many conflicts.

 Michael


From frank.du at riskmetrics.com  Fri May 22 06:41:57 2009
From: frank.du at riskmetrics.com (Frank Du)
Date: Fri, 22 May 2009 09:41:57 -0400
Subject: [antlr-interest] Why CommonTreeNodeStream.index() always returns 0?
Message-ID: <A737869DDF35D44A89A7210DDA6F622B01A8ABA685@mail-ny02.rmg-ny.com>

Hi All,

I am using antlr-3.1.3. The problem is that, all the time TreeNodeStream.index() returns 0. Apparently it is not what we expected. I wish to define function and remember its entry position. Is it a bug in 3.1.3, or do I need any configuration? The related interpreter example and my comment:

http://www.antlr.org/wiki/display/ANTLR3/Simple+tree-based+interpeter?focusedCommentId=17859072&#comment-17859072

Thank you so much!

Best Regards,
Frank Du
RiskMetrics Group


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090522/86433b24/attachment.html 

From frank.du at riskmetrics.com  Fri May 22 06:42:42 2009
From: frank.du at riskmetrics.com (Frank Du)
Date: Fri, 22 May 2009 09:42:42 -0400
Subject: [antlr-interest] how to pretty print antlr grammar
Message-ID: <A737869DDF35D44A89A7210DDA6F622B01A8ABA686@mail-ny02.rmg-ny.com>

Dear All,

I notice that the JSON grammar is pretty printed with syntax coloring at:

http://www.antlr.org/wiki/display/ANTLR3/JSON+Interpreter?focusedCommentId=11075708#comment-11075708

What tool does it use to do pretty printing? Sometimes it really helps with such a tool for writing and documenting.

Thank you so much for the help. Have a nice day!

Best Regards,
Frank Du
RiskMetrics Group

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090522/dab46e08/attachment.html 

From jbb at acm.org  Fri May 22 07:23:26 2009
From: jbb at acm.org (John B. Brodie)
Date: Fri, 22 May 2009 10:23:26 -0400
Subject: [antlr-interest] Excluding words as tokens
In-Reply-To: <20090522090755.169990@gmx.net>
References: <20090522090755.169990@gmx.net>
Message-ID: <200905221023.26330.jbb@acm.org>

Greetings!
On Friday 22 May 2009 05:07:55 am schlpbch at gmx.ch wrote:
> I'm trying to write a grammar to check the correctness of package names in
> respect to our meta modell. Thereby I ran into to following problems:
>
> ABSTRACTOBJECT:
>   SERVICEOBJECT | QUERYOBJECT
>
> SERVICEOBJECT: UPPERCASE (LOWERCASE|UPPERCASE)+ DIGIT*
>
> QUERYOBJECT: UPPERCASE (LOWERCASE|UPPERCASE)+ DIGIT* "Query"
>
> Of course this production is ambiguous, i.e.
>
>   DateQuery
>
> can be SERVICEOBJECT token as well as a QUERYOBJECT token.
>
> What I would like to express is that a QUERYOBJECT has to end with "Query"
> otherwise it is a SERVICEOBJECT which would resolve the ambiguity. How can
> this be expressed in ANTLR?

fragment QUERYOBJECT:; // or define in a tokens{} section
SERVICEOBJECT: UPPERCASE (LOWERCASE|UPPERCASE)+ DIGIT* ("Query" { $type = QUERYOBJECT; } )? ;

> A related problem I have is that I would like to express that COMPONENTNAME
> can consists of LOWERCASE+ DIGIT* except 'model' or 'impl'.
>
> I tried expressing these constraints as a regular expression, playing
> around with '~' but somehow didn't get it working.
>
> Does anybody have an example how this can be expressed?

to me this is very similar to the natural way Keywords are distinguished from
Identifiers in a lexer for a programming language such as Java or C or ....

how will you handle the strings "model" and "impl" when they appear in your
input? I assume that they are some kind of Keywords in your language. So:

MODEL_KEYWORD : "model";
IMPL_KEYWORD : "impl";
COMPONENTNAME : LOWERCASE+ DIGIT* ;

and then your parser rules must now properly deal with these two Keywords.

> Thank you very much for your input.
> Andreas

Hope I helped...
-----
  -jbb





From sharwell at pixelminegames.com  Fri May 22 13:23:10 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Fri, 22 May 2009 15:23:10 -0500
Subject: [antlr-interest] Syntax highlighting and performance possibilities
Message-ID: <86403CA0939415448BCCB83855EFE09AA68165@Bloodymary.ironwillgames.com>

As I mentioned once in the past, I've been working on improving lexer
performance for applications where the full information/features in
Lexer/CommonToken is not required. A key example is syntax highlighters
which have strict performance requirements and must be updated as a
person types. I'll start with a basic description of Visual Studio's
syntax highlighting mechanism and the information a lexer must provide
it. Then I'll describe some pathological use cases that should be
avoided regardless of the lexer used, as the algorithms involved have
more of an impact than simply improving the lexer's per-line processing
speed. Finally, I'll describe the "SlimLexer" and how one could
potentially use it to gain an additional performance edge after the
other issues are addressed.

 


1         Syntax Highlighting in Visual Studio


 

The syntax highlighter for a programming language in Visual Studio is
called a colorizer, and is one item provided by a language service.
Visual Studio's syntax highlighting API uses a per-line scanning
mechanism. The IDE itself directly stores (caches) a few pieces of
information, where a few additional items can be easily derived from
them. The Visual Studio SDK provides a wrapper for the core API that is
somewhat more friendly when using a tokenizing lexer for syntax
highlighting.

 


1.1       Items internally cached by Visual Studio IDE


 

Visual Studio maintains an "attribute cache" describing the color of
each character on the lines currently on the screen. Naturally, as the
user scroll the window vertically, this cache is continually updated.
The information describing a character's attributes is stored as a
32-bit integer. The customizable elements are:

*         The color, stored as an index (range 0-255 inclusive) to a
customizable lookup table of colors available for use in the document.

*         A Boolean value of whether or not to show a line after the
current line. If you've used Visual Basic in Visual Studio, this is the
horizontal line that follows each procedure. It is a full-width
underlining, similar to the <hr /> HTML element, only with tighter
spacing.

*         A Boolean value of whether the character is part of code or
part of "human-language text" (a comment). This affects how the IDE
handles word-select mode, and improper use is the elusive source of some
miserable bugs. VSPhp actually suffers from this problem and it's quite
irritating.

 

The IDE also maintains a "colorizer state" per line of text. The state
is a 32-bit value exclusively reserved for the language service. The
intent here is the colorizer state allows a lexer to parse any line of
text in the file in isolation, without requiring any lookahead/behind to
other lines. A simple example of this is in multiline (block) comments.
If a multiline comment reaches the end of line X without closing, then
the colorizer state can include a flag that tells line X+1 to start the
line inside a multiline comment. Even though line X+1 doesn't contain
the opening token of the comment (say /*), it can properly color the
line without ever looking back to line X.

 

Definition: Line X has a valid cache state iff line X was colorized
after the last time its cached state value was changed.

Definition: The colorizer state at the start of line X is valid iff the
colorizer state at the end of all lines 0-(X-1) is valid AND line X has
a valid cache state.

Definition: The colorizer state at the end of line X is valid iff the
colorizer state at the beginning of line X is valid AND the text on line
X has not changed since the end state was last computed.

 

Here is the process for colorizing line X:

 

1.       If the colorizer state at the end of line X-1 is not valid,
colorize line X-1 to make it valid.

2.       Provide the state at the start of line X, plus the text on the
line X to the language service's colorizer. The colorizer's result
includes the state at the end of line X.

3.       If the new state at the end of line X is different from the
cached value for the state at the beginning of line X+1, mark line X+1
as having an invalid colorizer state, and store the new state in place
of the old.

 


1.2       Additional items the user can easily compute


 

The syntax highlighter can take advantage of the user state update
mechanism to effectively track the state per character on the line (or
per token), as follows:

 

StateAtPosition( line, column ) = StateAtEndOfLine( StartState(line),
TextOnLine(line).Substring(0,column) )

 


1.3       How the SDK exposes these features


 

The Visual Studio SDK offers a Colorizer class and an IScanner interface
to simplify the creation of syntax highlighters. Since lexers generally
operate on tokens as opposed to individual characters, there is a
disconnect between what people are used to and what Visual Studio's
cache stores. These interfaces allow the language service to provide
information about the tokens on a line, which it then internally breaks
into characters and passes the information to Visual Studio. Some
additional things to note about using this wrapper:

*         The wrapper does not expose (at all) the Boolean value for the
underline following a line.

*         The wrapper hides the Boolean value for whether a line is
human-language text, but the method is generally successful.

*         The wrapper exposes the ability to set the background color
following the end of a line, but only via an undocumented/sneaky
technique that you'd only see if you saw the wrapper's source code and
knew about the underlying interfaces.

*         The wrapper takes advantage of the mechanism in section 1.2 to
provide an additional 32-bit user-defined value per token. I personally
use this to keep track of ANTLR's token type, but there aren't any real
requirements since the value is never used by Visual Studio or its SDK.

 


2         High Performance Syntax Highlighting


 

A high performance syntax highlighter must avoid cascading updates where
possible. A cascading update is incurred when a change in the document's
text causes the state at multiple lines after the altered line to
change. Sometimes this is unavoidable; for example, adding a /* to a
line in C++ can cause multiple lines afterwards to become comment lines
instead of code lines, all of which must be updated. Other times, this
is avoidable. For example, storing the line number in the state forces
the state for all lines after line X to be updated when a new line is
added immediately following line X. If the line number itself does not
change the color of characters on the line, then the line number should
not be part of the colorizer state for performance reasons.

 

For a document with M lines and a maximum line width of W, this makes an
algorithmic difference of O(M) instead of O(1). You might only test your
colorizer with short test documents, but are your users programming in
documents with 10,000 or more lines? I know some generated ANTLR code
files in my language services are well in excess of 30,000 lines, and
some UnrealScript files I've seen have nearly 20,000 lines (my most
complete language service to date is for UnrealScript).

 

Even some of my own language services suffer from this problem; be aware
that it can be difficult to redesign your language service after you
start using the colorizer state for other purposes (like line numbers),
so make sure your state design is correct from the start. This is one of
many areas where I've formed new/improved ideas but haven't been able to
incorporate them in my largest language service due to the intricate
relationships between various IntelliSense features.

 


3         High Performance Lexing


 

I've observed that the Lexer/CommonToken features are overkill for
certain applications, including syntax highlighting. The simplest
example is single-line syntax highlighters have no need to store the
line number as part of the token. In order to reduce memory usage and
improve speed for this type of application, I've created a SlimLexer and
SlimToken for testing purposes. These currently have the following
features:

 

*         The SlimToken is a C# struct, which is a stack-allocated value
type that is passed to methods and returned by value. As long as you
don't force boxing by casting it to Object, it never requires heap
allocation.

*         The SlimToken is precisely 64-bits to allow efficient
pass-by-value in registers. As used in my testing, it stores:

o   Token type (16 bits)

o   Token channel (16 bits)

o   Start index (16 bits)

o   Stop index (16 bits)

*         The SlimLexer's tokens are strongly typed to SlimToken to
eliminate the need to box values.

*         The SlimLexer's most frequently called methods are
non-virtual, allowing the runtime to easily inline its small methods.

 

For applications that only need this information (or even a subset of
that), SlimLexer/SlimToken appears to operate about 6 times faster than
Lexer/CommonToken in about 1/4 the memory. I'm currently evaluating the
following items:

 

1.       Is this layout of SlimToken the best choice? I certainly
believe 64-bits is the optimal width for a high-performance
pass-by-value token. However, if SlimToken only applies to a subset X of
potential lexer applications Y, then I want to make X as large as
possible so more people can benefit from its significant performance
improvement.

2.       Do SlimLexer/SlimToken have a place in the ANTLR runtime, or
are they more suited to separate distribution?

3.       What are the possibilities, if any, for a SlimParser?

a.       Could a SlimParser take advantage of an unboxed SlimToken?

b.      Could a SlimParser have some unboxed output?

c.       In my experience, syntax highlighters don't need a parser, and
the parsers I've used need more complete token information than
SlimToken is able to provide. Is this a general view?

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090522/72ce1f09/attachment.html 

From george.scott at gmail.com  Fri May 22 14:09:27 2009
From: george.scott at gmail.com (George Scott)
Date: Fri, 22 May 2009 14:09:27 -0700
Subject: [antlr-interest] [antlr-dev] Syntax highlighting and
	performance possibilities
In-Reply-To: <86403CA0939415448BCCB83855EFE09AA68165@Bloodymary.ironwillgames.com>
References: <86403CA0939415448BCCB83855EFE09AA68165@Bloodymary.ironwillgames.com>
Message-ID: <5d9afe010905221409q2d65c05bw834a3612a0f0e755@mail.gmail.com>

Sam,
Have you looked at Incremental lexing?  I think it provides very good
performance and used by a number of IDEs.  A great reference on incremental
lexing is this paper:

http://harmonia.cs.berkeley.edu/papers/twagner-lexing.pdf

To reduce memory you can use flyweight tokens (one token instance shared by
all token streams) for token types whose length does not vary.  You can use
this for keywords, common white-space patterns such as a single-space, etc.
 The trade-off is that you have to compute the start/stop indexes for tokens
based on a nearby non-flyweight token and the known-length of the flyweight.
 Generally, not a problem since syntax highlighting finds a start token
given a line number and walks forward in token order, so you can keep a
running count.

When using incremental lexing with syntax highlighting, you generally only
have to re-lex from the point of the edit to the token containing the last
visible character on screen, so there is not a large cost even if editing at
the beginning of the file.  As the user scrolls the document, you continue
lexing from the last token.

It is pretty straight-forward to modify the ANTLR runtime to use these
techniques.

George


On Fri, May 22, 2009 at 1:23 PM, Sam Harwell <sharwell at pixelminegames.com>wrote:

>  As I mentioned once in the past, I?ve been working on improving lexer
> performance for applications where the full information/features in
> Lexer/CommonToken is not required. A key example is syntax highlighters
> which have strict performance requirements and must be updated as a person
> types. I?ll start with a basic description of Visual Studio?s syntax
> highlighting mechanism and the information a lexer must provide it. Then
> I?ll describe some pathological use cases that should be avoided regardless
> of the lexer used, as the algorithms involved have more of an impact than
> simply improving the lexer?s per-line processing speed. Finally, I?ll
> describe the ?SlimLexer? and how one could potentially use it to gain an
> additional performance edge after the other issues are addressed.
>
>
> 1         Syntax Highlighting in Visual Studio
>
>
>
> The syntax highlighter for a programming language in Visual Studio is
> called a *colorizer*, and is one item provided by a *language service*.
> Visual Studio?s syntax highlighting API uses a per-line scanning mechanism.
> The IDE itself directly stores (caches) a few pieces of information, where a
> few additional items can be easily derived from them. The Visual Studio SDK
> provides a wrapper for the core API that is somewhat more friendly when
> using a tokenizing lexer for syntax highlighting.
>
>
> 1.1       Items internally cached by Visual Studio IDE
>
>
>
> Visual Studio maintains an ?attribute cache? describing the color of each
> character on the lines currently on the screen. Naturally, as the user
> scroll the window vertically, this cache is continually updated. The
> information describing a character?s attributes is stored as a 32-bit
> integer. The customizable elements are:
>
> ?         The color, stored as an index (range 0-255 inclusive) to a
> customizable lookup table of colors available for use in the document.
>
> ?         A Boolean value of whether or not to show a line after the
> current line. If you?ve used Visual Basic in Visual Studio, this is the
> horizontal line that follows each procedure. It is a full-width underlining,
> similar to the <hr /> HTML element, only with tighter spacing.
>
> ?         A Boolean value of whether the character is part of code or part
> of ?human-language text? (a comment). This affects how the IDE handles
> word-select mode, and improper use is the elusive source of some miserable
> bugs. VSPhp actually suffers from this problem and it?s quite irritating.
>
>
>
> The IDE also maintains a ?colorizer state? per line of text. The state is a
> 32-bit value exclusively reserved for the language service. The intent here
> is the colorizer state allows a lexer to parse any line of text in the file
> in isolation, without requiring any lookahead/behind to other lines. A
> simple example of this is in multiline (block) comments. If a multiline
> comment reaches the end of line X without closing, then the colorizer state
> can include a flag that tells line X+1 to start the line inside a multiline
> comment. Even though line X+1 doesn?t contain the opening token of the
> comment (say /*), it can properly color the line without ever looking back
> to line X.
>
>
>
> Definition: Line X has a *valid cache state* iff line X was colorized *
> after* the last time its cached state value was *changed*.
>
> Definition: The colorizer *state at the start of line X is valid* iff the
> colorizer state at the end of all lines 0-(X-1) is valid AND line X has a
> valid cache state.
>
> Definition: The colorizer *state at the end of line X is valid* iff the
> colorizer state at the beginning of line X is valid AND the text on line X
> has not changed since the end state was last computed.
>
>
>
> Here is the process for colorizing line X:
>
>
>
> 1.       If the colorizer state at the end of line X-1 is not valid,
> colorize line X-1 to make it valid.
>
> 2.       Provide the state at the start of line X, plus the text on the
> line X to the language service?s colorizer. The colorizer?s result includes
> the state at the end of line X.
>
> 3.       If the new state at the end of line X is different from the
> cached value for the state at the beginning of line X+1, mark line X+1 as
> having an *invalid colorizer state*, and store the new state in place of
> the old.
>
>
> 1.2       Additional items the user can easily compute
>
>
>
> The syntax highlighter can take advantage of the user state update
> mechanism to effectively track the state per character on the line (or per
> token), as follows:
>
>
>
> StateAtPosition( line, column ) = StateAtEndOfLine( StartState(line),
> TextOnLine(line).Substring(0,column) )
>
>
> 1.3       How the SDK exposes these features
>
>
>
> The Visual Studio SDK offers a Colorizer class and an IScanner interface to
> simplify the creation of syntax highlighters. Since lexers generally operate
> on tokens as opposed to individual characters, there is a disconnect between
> what people are used to and what Visual Studio?s cache stores. These
> interfaces allow the language service to provide information about the
> tokens on a line, which it then internally breaks into characters and passes
> the information to Visual Studio. Some additional things to note about using
> this wrapper:
>
> ?         The wrapper does not expose (at all) the Boolean value for the
> underline following a line.
>
> ?         The wrapper hides the Boolean value for whether a line is
> human-language text, but the method is generally successful.
>
> ?         The wrapper exposes the ability to set the background color
> following the end of a line, but only via an undocumented/sneaky technique
> that you?d only see if you saw the wrapper?s source code and knew about the
> underlying interfaces.
>
> ?         The wrapper takes advantage of the mechanism in section 1.2 to
> provide an additional 32-bit user-defined value per token. I personally use
> this to keep track of ANTLR?s token type, but there aren?t any real
> requirements since the value is never used by Visual Studio or its SDK.
>
>
> 2         High Performance Syntax Highlighting
>
>
>
> A high performance syntax highlighter must avoid cascading updates where
> possible. A cascading update is incurred when a change in the document?s
> text causes the state at multiple lines after the altered line to change.
> Sometimes this is unavoidable; for example, adding a /* to a line in C++ can
> cause multiple lines afterwards to become comment lines instead of code
> lines, all of which must be updated. Other times, this is avoidable. For
> example, storing the line number in the state forces the state for all lines
> after line X to be updated when a new line is added immediately following
> line X. If the line number itself does not change the color of characters on
> the line, then the line number should not be part of the colorizer state for
> performance reasons.
>
>
>
> For a document with M lines and a maximum line width of W, this makes an
> algorithmic difference of O(M) instead of O(1). You might only test your
> colorizer with short test documents, but are your users programming in
> documents with 10,000 or more lines? I know some generated ANTLR code files
> in my language services are well in excess of 30,000 lines, and some
> UnrealScript files I?ve seen have nearly 20,000 lines (my most complete
> language service to date is for UnrealScript).
>
>
>
> Even some of my own language services suffer from this problem; be aware
> that it can be difficult to redesign your language service after you start
> using the colorizer state for other purposes (like line numbers), so make
> sure your state design is correct from the start. This is one of many areas
> where I?ve formed new/improved ideas but haven?t been able to incorporate
> them in my largest language service due to the intricate relationships
> between various IntelliSense features.
>
>
> 3         High Performance Lexing
>
>
>
> I?ve observed that the Lexer/CommonToken features are overkill for certain
> applications, including syntax highlighting. The simplest example is
> single-line syntax highlighters have no need to store the line number as
> part of the token. In order to reduce memory usage and improve speed for
> this type of application, I?ve created a SlimLexer and SlimToken for testing
> purposes. These currently have the following features:
>
>
>
> ?         The SlimToken is a C# struct, which is a stack-allocated value
> type that is passed to methods and returned by value. As long as you don?t
> force boxing by casting it to Object, it never requires heap allocation.
>
> ?         The SlimToken is precisely 64-bits to allow efficient
> pass-by-value in registers. As used in my testing, it stores:
>
> o   Token type (16 bits)
>
> o   Token channel (16 bits)
>
> o   Start index (16 bits)
>
> o   Stop index (16 bits)
>
> ?         The SlimLexer?s tokens are strongly typed to SlimToken to
> eliminate the need to box values.
>
> ?         The SlimLexer?s most frequently called methods are non-virtual,
> allowing the runtime to easily inline its small methods.
>
>
>
> For applications that only need this information (or even a subset of
> that), SlimLexer/SlimToken appears to operate about 6 times faster than
> Lexer/CommonToken in about 1/4 the memory. I?m currently evaluating the
> following items:
>
>
>
> 1.       Is this layout of SlimToken the best choice? I certainly believe
> 64-bits is the optimal width for a high-performance pass-by-value token.
> However, if SlimToken only applies to a subset X of potential lexer
> applications Y, then I want to make X as large as possible so more people
> can benefit from its significant performance improvement.
>
> 2.       Do SlimLexer/SlimToken have a place in the ANTLR runtime, or are
> they more suited to separate distribution?
>
> 3.       What are the possibilities, if any, for a SlimParser?
>
> a.       Could a SlimParser take advantage of an unboxed SlimToken?
>
> b.      Could a SlimParser have some unboxed output?
>
> c.       In my experience, syntax highlighters don?t need a parser, and
> the parsers I?ve used need more complete token information than SlimToken is
> able to provide. Is this a general view?
>
>
>
> _______________________________________________
> antlr-dev mailing list
> antlr-dev at antlr.org
> http://www.antlr.org/mailman/listinfo/antlr-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090522/152a87a8/attachment.html 

From gerald at certiv.net  Fri May 22 15:07:12 2009
From: gerald at certiv.net (Gerald Rosenberg)
Date: Fri, 22 May 2009 15:07:12 -0700
Subject: [antlr-interest] AntlrDT 0.9.0 Released
Message-ID: <200905222205.n4MM5wS4002458@zinc.newtechlaw.com>

Just released AntlrDT 0.9.0 for Eclipse 3.4

Details are available: http://www.certiv.net/projects/antlrdt.html

This version provides some significant usability improvements to the 
Antlr ASTView.


From sharwell at pixelminegames.com  Fri May 22 16:39:44 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Fri, 22 May 2009 18:39:44 -0500
Subject: [antlr-interest] [antlr-dev] Syntax highlighting and
	performance possibilities
In-Reply-To: <5d9afe010905221409q2d65c05bw834a3612a0f0e755@mail.gmail.com>
References: <86403CA0939415448BCCB83855EFE09AA68165@Bloodymary.ironwillgames.com>
	<5d9afe010905221409q2d65c05bw834a3612a0f0e755@mail.gmail.com>
Message-ID: <86403CA0939415448BCCB83855EFE09AA68168@Bloodymary.ironwillgames.com>

Hi George,

 

Thanks for this feedback. The method I was describing is a form of
incremental lexing, but is quite different from the one you referenced.
I'll be looking to see if I can combine each of their strengths as I
work. :)

 

Common features:

*         Both methods are incremental. Visual Studio's (VS) incremental
lexing restarts at the beginning of the line, and General Incremental
Lexing (GIL) restarts at the first affected token.

*         Both methods stop/suspend/defer the incremental updating
process when the last on-screen token is processed.

 

Strengths of GIL over VS:

*         Allows lookahead past newlines.

*         Doesn't have to restart at the beginning of a line.

*         Allows true multiline tokens.

 

Strengths of VS over GIL:

*         Able to incrementally parse recursive constructs, such as
languages that allow nested /* */ block comments.

*         Smaller lower-bound on processing requirements.

*         Much smaller memory overhead.

 

If this is correct, then from what I can tell it would be beneficial to
use the method I described as long as you don't have very long lines of
text. Also, the SlimToken is actually lighter than a flyweight token,
but again it can only be used as long as you don't need more information
than it's able to store.

 

Sam

 

From: George Scott [mailto:george.scott at gmail.com] 
Sent: Friday, May 22, 2009 4:09 PM
To: Sam Harwell
Cc: antlr-interest at antlr.org; antlr-dev at antlr.org
Subject: Re: [antlr-dev] Syntax highlighting and performance
possibilities

 

Sam,

 

Have you looked at Incremental lexing?  I think it provides very good
performance and used by a number of IDEs.  A great reference on
incremental lexing is this paper:

 

http://harmonia.cs.berkeley.edu/papers/twagner-lexing.pdf

 

To reduce memory you can use flyweight tokens (one token instance shared
by all token streams) for token types whose length does not vary.  You
can use this for keywords, common white-space patterns such as a
single-space, etc.  The trade-off is that you have to compute the
start/stop indexes for tokens based on a nearby non-flyweight token and
the known-length of the flyweight.  Generally, not a problem since
syntax highlighting finds a start token given a line number and walks
forward in token order, so you can keep a running count.

 

When using incremental lexing with syntax highlighting, you generally
only have to re-lex from the point of the edit to the token containing
the last visible character on screen, so there is not a large cost even
if editing at the beginning of the file.  As the user scrolls the
document, you continue lexing from the last token.

 

It is pretty straight-forward to modify the ANTLR runtime to use these
techniques.

 

George

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090522/c3e373d3/attachment.html 

From asalh at mindspring.com  Sun May 24 00:18:57 2009
From: asalh at mindspring.com (Bryan S Follins)
Date: Sun, 24 May 2009 00:18:57 -0700
Subject: [antlr-interest] Hello All--Problems with ANTLR Works
Message-ID: <000c01c9dc3f$e7011cf0$b50356d0$@com>

I am in a class using ANTLR Works. My operating system is Windows XP Home
edition.  I tried creating a simple grammar file and I was able to generate
the code. 

 

grammar T;

/**match things like "call foo;"*/

r              :               'call' ID ';' {System.out.println("invoke" +
$ID.text);};

ID            :               'a'..'z'+ ;

WS         :               (' ' | '\n' | '\r')+ {$channel=HIDDEN;};      

 

 

 

 

 

However, when I tried to debug I got two errors. I have pasted them below:

 

When I tried to do the first debug I got the error below: Cannot launch the
debugger. Time-out waiting to connect the remote parser.

 

Also got an "Error 2."

 

I tried using ANTLR Works on Windows XP Home Edition and Windows Vista and
got the same errors.

 

Some assistance would be appreciated. Thanks.

 

LL

 

 

 

"When you have eliminated the impossible, whatever remains, however
improbable, must be the truth."

--Sherlock Holmes from Sir Arthur Conan Doyle's The Sign of Four.

 

I AM an information warrior...

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090524/70996fb1/attachment.html 

From asalh at mindspring.com  Sun May 24 11:58:11 2009
From: asalh at mindspring.com (Bryan S Follins)
Date: Sun, 24 May 2009 11:58:11 -0700
Subject: [antlr-interest] Hello All--Problems with ANTLR Works
In-Reply-To: <200905241449.1m8iL35U73Nl3oW0@strange.mail.mindspring.net>
References: <000c01c9dc3f$e7011cf0$b50356d0$@com>
	<200905240541.1m8adc51H3Nl3oW3@strange.mail.mindspring.net>
	<000001c9dc9e$7cc46900$764d3b00$@com>
	<200905241449.1m8iL35U73Nl3oW0@strange.mail.mindspring.net>
Message-ID: <000d01c9dca1$95a3b8b0$c0eb2a10$@com>

Gavin,

Thanks for the response. I am pretty sure I have JDK installed. How do I set
my path to the Java compiler in the ANTLR settings.

-----Original Message-----
From: Gavin Lambert [mailto:antlr at mirality.co.nz] 
Sent: Sunday, May 24, 2009 11:49
To: Bryan S Follins
Cc: antlr-interest at antlr.org
Subject: RE: [antlr-interest] Hello All--Problems with ANTLR Works

At 06:36 25/05/2009, Bryan S Follins wrote:
 >Yes,
 >Tried shutting down the system and starting again today. 
Generate
 >went fine.
 >But the Debug gave me this:
 >
 >Java io Exception: Cannot run "javac"; CreateProcess error=2; 
The
 >system cannot find the file specified.

Then the path to the Java compiler in the ANTLR settings is 
probably not set up properly (or you just don't have the JDK 
installed at all).

Also: you should use Reply All when replying, to keep your replies 
on-list.  Sending replies privately is both bad style and can make 
it harder/longer to get a response.


From JALuber at gmx.de  Sun May 24 04:56:43 2009
From: JALuber at gmx.de (Johannes Luber)
Date: Sun, 24 May 2009 13:56:43 +0200
Subject: [antlr-interest] Hello All--Problems with ANTLR Works
In-Reply-To: <000c01c9dc3f$e7011cf0$b50356d0$@com>
References: <000c01c9dc3f$e7011cf0$b50356d0$@com>
Message-ID: <20090524115643.288740@gmx.net>

> I am in a class using ANTLR Works. My operating system is Windows XP Home
> edition.  I tried creating a simple grammar file and I was able to
> generate
> the code. 
> 
>  
> 
> grammar T;
> 
> /**match things like "call foo;"*/
> 
> r              :               'call' ID ';' {System.out.println("invoke"
> +
> $ID.text);};
> 
> ID            :               'a'..'z'+ ;
> 
> WS         :               (' ' | '\n' | '\r')+ {$channel=HIDDEN;};      
> 
>  
> 
> However, when I tried to debug I got two errors. I have pasted them below:
> 
>  
> 
> When I tried to do the first debug I got the error below: Cannot launch
> the
> debugger. Time-out waiting to connect the remote parser.

It may be possible that ANTLRworks uses a different default port than the runtime (there was a mixup). Try changing the port to 49153 until the next version comes out.

Johannes
> 
>  
> 
> Also got an "Error 2."
> 
>  
> 
> I tried using ANTLR Works on Windows XP Home Edition and Windows Vista and
> got the same errors.
> 
>  
> 
> Some assistance would be appreciated. Thanks.
> 
>  
> 
> LL
> 
>  
> 
>  
> 
>  
> 
> "When you have eliminated the impossible, whatever remains, however
> improbable, must be the truth."
> 
> --Sherlock Holmes from Sir Arthur Conan Doyle's The Sign of Four.
> 
>  
> 
> I AM an information warrior...
> 

-- 
Neu: GMX FreeDSL Komplettanschluss mit DSL 6.000 Flatrate + Telefonanschluss f?r nur 17,95 Euro/mtl.!* http://portal.gmx.net/de/go/dsl02

From antlr at mirality.co.nz  Sun May 24 02:41:35 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sun, 24 May 2009 21:41:35 +1200
Subject: [antlr-interest] Hello All--Problems with ANTLR Works
In-Reply-To: <000c01c9dc3f$e7011cf0$b50356d0$@com>
References: <000c01c9dc3f$e7011cf0$b50356d0$@com>
Message-ID: <20090524221706.97B0D341845F@www.antlr.org>

At 19:18 24/05/2009, Bryan S Follins wrote:
>When I tried to do the first debug I got the error below: Cannot 
>launch the debugger. Time-out waiting to connect the remote 
>parser.

Are you using Debug or Debug Remote?

Debug will run the parser in debug mode directly.  Debug Remote 
will try to connect to an existing parser (compiled for debugging) 
that you are running separately.  The error you mention above 
sounds like it's trying to Debug Remote...

>Also got an "Error 2."

Any more details than that?


From antlr at mirality.co.nz  Sun May 24 11:49:04 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Mon, 25 May 2009 06:49:04 +1200
Subject: [antlr-interest] Hello All--Problems with ANTLR Works
In-Reply-To: <000001c9dc9e$7cc46900$764d3b00$@com>
References: <000c01c9dc3f$e7011cf0$b50356d0$@com>
	<200905240541.1m8adc51H3Nl3oW3@strange.mail.mindspring.net>
	<000001c9dc9e$7cc46900$764d3b00$@com>
Message-ID: <20090524221706.D81BA3418476@www.antlr.org>

At 06:36 25/05/2009, Bryan S Follins wrote:
 >Yes,
 >Tried shutting down the system and starting again today. 
Generate
 >went fine.
 >But the Debug gave me this:
 >
 >Java io Exception: Cannot run "javac"; CreateProcess error=2; 
The
 >system cannot find the file specified.

Then the path to the Java compiler in the ANTLR settings is 
probably not set up properly (or you just don't have the JDK 
installed at all).

Also: you should use Reply All when replying, to keep your replies 
on-list.  Sending replies privately is both bad style and can make 
it harder/longer to get a response.


From jevitha at gmail.com  Sun May 24 01:23:25 2009
From: jevitha at gmail.com (jevitha)
Date: Sun, 24 May 2009 13:53:25 +0530
Subject: [antlr-interest] Hello All--Problems with ANTLR Works
In-Reply-To: <000c01c9dc3f$e7011cf0$b50356d0$@com>
References: <000c01c9dc3f$e7011cf0$b50356d0$@com>
Message-ID: <cb65abb00905240123m8d98be3m6fc6b63cbb1fa1d7@mail.gmail.com>

Hi Bryan,
    I was facing the same problem. The problem was solved when I rebooted my
system and tried again. I suspect the problem was due to improper quitting
of the ANTLRWorks software, due to which the port was not properly closed.
 Also ensure that no other softwares are using the same port number used by
ANTLR debugger.

-- 
Best Regards,
Jevitha

On Sun, May 24, 2009 at 12:48 PM, Bryan S Follins <asalh at mindspring.com>wrote:

>  I am in a class using ANTLR Works. My operating system is Windows XP Home
> edition.  I tried creating a simple grammar file and I was able to generate
> the code.
>
>
>
> grammar T;
>
> /**match things like "call foo;"*/
>
> r              :               'call' ID ';' {System.out.println("invoke" +
> $ID.text);};
>
> ID            :               'a'..'z'+ ;
>
> WS         :               (' ' | '\n' | '\r')+ {$channel=HIDDEN;};
>
>
>
>
>
>
>
>
>
>
>
> However, when I tried to debug I got two errors. I have pasted them below:
>
>
>
> When I tried to do the first debug I got the error below: Cannot launch the
> debugger. Time-out waiting to connect the remote parser.
>
>
>
> Also got an ?Error 2.?
>
>
>
> I tried using ANTLR Works on Windows XP Home Edition and Windows Vista and
> got the same errors.
>
>
>
> Some assistance would be appreciated. Thanks.
>
>
>
> LL
>
>
>
>
>
>
>
> "When you have eliminated the impossible, whatever remains, however
> improbable, must be the truth."
>
> --Sherlock Holmes from Sir Arthur Conan Doyle's *The Sign of Four.*
>
>
>
> *I AM an information warrior...*
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090524/069db3ab/attachment.html 

From asalh at mindspring.com  Sun May 24 16:21:30 2009
From: asalh at mindspring.com (Bryan S Follins)
Date: Sun, 24 May 2009 16:21:30 -0700
Subject: [antlr-interest] Hello All--Problems with ANTLR Works
In-Reply-To: <200905241449.1m8iL35U73Nl3oW0@strange.mail.mindspring.net>
References: <000c01c9dc3f$e7011cf0$b50356d0$@com>
	<200905240541.1m8adc51H3Nl3oW3@strange.mail.mindspring.net>
	<000001c9dc9e$7cc46900$764d3b00$@com>
	<200905241449.1m8iL35U73Nl3oW0@strange.mail.mindspring.net>
Message-ID: <000001c9dcc6$5f1496f0$1d3dc4d0$@com>

I figured it out. Thanks all.

-----Original Message-----
From: Gavin Lambert [mailto:antlr at mirality.co.nz] 
Sent: Sunday, May 24, 2009 11:49
To: Bryan S Follins
Cc: antlr-interest at antlr.org
Subject: RE: [antlr-interest] Hello All--Problems with ANTLR Works

At 06:36 25/05/2009, Bryan S Follins wrote:
 >Yes,
 >Tried shutting down the system and starting again today. 
Generate
 >went fine.
 >But the Debug gave me this:
 >
 >Java io Exception: Cannot run "javac"; CreateProcess error=2; 
The
 >system cannot find the file specified.

Then the path to the Java compiler in the ANTLR settings is 
probably not set up properly (or you just don't have the JDK 
installed at all).

Also: you should use Reply All when replying, to keep your replies 
on-list.  Sending replies privately is both bad style and can make 
it harder/longer to get a response.


From bestgembler at hotmail.com  Sun May 24 18:56:58 2009
From: bestgembler at hotmail.com (Kevin Chen)
Date: Mon, 25 May 2009 09:56:58 +0800
Subject: [antlr-interest] I want to throw an exception and stop parse,
	please!
Message-ID: <COL113-W6058235C53D0B987E4F20BB9550@phx.gbl>


I want to throw an exception and stop parse when get errors during parsing,
I don't want to display the errors, I need to throw an exception to client.

Is there anyone can help me, please?

Thanks a lot!        :-)

THE
     POWER
             OF
                JAVA



_________________________________________________________________
More than messages?check out the rest of the Windows Live?.
http://www.microsoft.com/windows/windowslive/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090525/5e6873e5/attachment.html 

From viridium at gmail.com  Sun May 24 20:25:15 2009
From: viridium at gmail.com (Mihai Danila)
Date: Sun, 24 May 2009 20:25:15 -0700 (PDT)
Subject: [antlr-interest] Invitation to connect on LinkedIn
Message-ID: <739535777.1321709.1243221915293.JavaMail.app@ech3-cdn11.prod>

LinkedIn
------------



   
You are receiving this invitation because your e-mail address is in one of my address books.

I'd like to add you to my professional network on LinkedIn.

- Mihai

PS: Here is the link: 
https://www.linkedin.com/e/isd/594926396/aiMjl8Cq/

It is free to join and takes less than 60 seconds to sign up.

------------------------------------------

Mihai Danila has a LinkedIn profile to connect with colleagues, find experts, and explore new opportunities.


 
------
(c) 2009, LinkedIn Corporation

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090524/ac602024/attachment.html 

From indhu.b at s7software.com  Sun May 24 22:02:21 2009
From: indhu.b at s7software.com (Indhu Bharathi)
Date: Mon, 25 May 2009 10:32:21 +0530
Subject: [antlr-interest] I want to throw an exception and stop parse,
	please!
In-Reply-To: <COL113-W6058235C53D0B987E4F20BB9550@phx.gbl>
References: <COL113-W6058235C53D0B987E4F20BB9550@phx.gbl>
Message-ID: <062DCD70EE5A444F9E000C2A7B5ABF8E@indhulaptop>

Two methods of parser (mismatch and recoverFromMismatchedSet) are responsible for auto-recovery and showing error messages.

If you want to throw an exception and exit right on the first error you need to override these methods and just throw the exception instead of handling it.

Something like this:

@members {

protected void mismatch(IntStream input, int ttype, BitSet follow)
throws RecognitionException
{
throw new MismatchedTokenException(ttype, input);
}

public void recoverFromMismatchedSet(IntStream input, RecognitionException e, BitSet follow)
throws RecognitionException
{
throw e;
}

}

Cheers, Indhu

  ----- Original Message ----- 
  From: Kevin Chen 
  To: antlr-interest at antlr.org 
  Sent: Monday, May 25, 2009 7:26 AM
  Subject: [antlr-interest] I want to throw an exception and stop parse,please!


  I want to throw an exception and stop parse when get errors during parsing,
  I don't want to display the errors, I need to throw an exception to client.

  Is there anyone can help me, please?

  Thanks a lot!        :-)

  THE
       POWER
               OF
                  JAVA




------------------------------------------------------------------------------
  check out the rest of the Windows Live?. More than mail?Windows Live? goes way beyond your inbox. More than messages 


------------------------------------------------------------------------------



  List: http://www.antlr.org/mailman/listinfo/antlr-interest
  Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090525/209f1a92/attachment.html 

From bestgembler at hotmail.com  Sun May 24 23:18:47 2009
From: bestgembler at hotmail.com (Kevin Chen)
Date: Mon, 25 May 2009 14:18:47 +0800
Subject: [antlr-interest] I want to throw an exception and stop parse,
 please!
In-Reply-To: <062DCD70EE5A444F9E000C2A7B5ABF8E@indhulaptop>
References: <COL113-W6058235C53D0B987E4F20BB9550@phx.gbl>
	<062DCD70EE5A444F9E000C2A7B5ABF8E@indhulaptop>
Message-ID: <COL113-W251E8478D75A283B84BB2EB9550@phx.gbl>


Thanks for your reply!

I cannot find "mismatch" method in "org.antlr.runtime.Parser" and "org.antlr.runtime.BaseRecognizer" both, just found "recoverFromMismatchedSet" method in "org.antlr.runtime.BaseRecognizer".      :-)

My antlr runtime version is 3.1.3.

Thanks a lot!     :-)









>Two methods of parser (mismatch and 
recoverFromMismatchedSet) are responsible for auto-recovery and showing >error 
messages.> 
>If you want to throw an exception and exit right on the 
first error you need to override these methods and >just throw the exception 
instead of handling it.> 
>Something like this:> 
>@members {
>protected void mismatch(IntStream input, int ttype, BitSet 
follow)
>throws RecognitionException
>{
>throw new 
MismatchedTokenException(ttype, input);
>}
>>public void recoverFromMismatchedSet(IntStream input, 
RecognitionException e, BitSet follow)>>throws 
RecognitionException>>{>>throw e;>>}>
>}
> 
>Cheers, Indhu











_________________________________________________________________
Windows Live?: Keep your life in sync. Check it out!
http://windowslive.com/explore?ocid=TXT_TAGLM_WL_t1_allup_explore_012009
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090525/369fb340/attachment.html 

From indhu.b at s7software.com  Mon May 25 00:20:21 2009
From: indhu.b at s7software.com (Indhu Bharathi)
Date: Mon, 25 May 2009 12:50:21 +0530
Subject: [antlr-interest] I want to throw an exception and stop parse,
	please!
In-Reply-To: <COL113-W251E8478D75A283B84BB2EB9550@phx.gbl>
References: <COL113-W6058235C53D0B987E4F20BB9550@phx.gbl>
	<062DCD70EE5A444F9E000C2A7B5ABF8E@indhulaptop>
	<COL113-W251E8478D75A283B84BB2EB9550@phx.gbl>
Message-ID: <9C3A1BA450EF4A9A876BE527217DFB56@indhulaptop>

Ah, forgot. Things changed after the book was written. I guess you have to override the following two methods from BaseRecognizer

void  recover (IntStream input, RecognitionException re)
Object  recoverFromMismatchedSet (IntStream input, RecognitionException e, BitSet follow) throws RecognitionException

Cheers, Indhu

  ----- Original Message ----- 
  From: Kevin Chen 
  To: indhu.b at s7software.com 
  Cc: antlr-interest at antlr.org 
  Sent: Monday, May 25, 2009 11:48 AM
  Subject: RE: [antlr-interest] I want to throw an exception and stop parse,please!


  Thanks for your reply!

  I cannot find "mismatch" method in "org.antlr.runtime.Parser" and "org.antlr.runtime.BaseRecognizer" both, just found "recoverFromMismatchedSet" method in "org.antlr.runtime.BaseRecognizer".      :-)

  My antlr runtime version is 3.1.3.

  Thanks a lot!     :-)

------------------------------------------------------------------------------

    >Two methods of parser (mismatch and recoverFromMismatchedSet) are responsible for auto-recovery and showing >error messages.
    > 

    >If you want to throw an exception and exit right on the first error you need to override these methods and >just throw the exception instead of handling it.
    > 

    >Something like this:
    > 

    >@members {

    >protected void mismatch(IntStream input, int ttype, BitSet follow)
    >throws RecognitionException
    >{
    >throw new MismatchedTokenException(ttype, input);
    >}
    >
    >public void recoverFromMismatchedSet(IntStream input, RecognitionException e, BitSet follow)
    >
    >throws RecognitionException
    >
    >{
    >
    >throw e;
    >
    >}
    > 
    >}
    > 

    >Cheers, Indhu


------------------------------------------------------------------------------
  Windows Live?: Keep your life in sync. Check it out! 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090525/aaf5e1bd/attachment.html 

From yt at hjfreyer.com  Mon May 25 15:41:14 2009
From: yt at hjfreyer.com (Hunter Freyer)
Date: Mon, 25 May 2009 18:41:14 -0400
Subject: [antlr-interest] Generating AST parser at runtime
In-Reply-To: <mailman.90.1243291037.3218.antlr-interest@antlr.org>
References: <mailman.90.1243291037.3218.antlr-interest@antlr.org>
Message-ID: <e00a5e00905251541r5a715674k656004b0d1e21675@mail.gmail.com>

Howdy all,

I have a perhaps unorthodox request. Normally ANTLR takes a grammar file and
outputs a (in my case) java file which, in turn, reads an input text and
produces an AST; I was wondering if there's a way to skip the writing of the
Java file and just get a Java object which translates the input text into an
AST.

Essentially, I'm looking for a function which takes a Grammar in some form
(perhaps an org.antlr.tool.Grammar) and an input text, and returns an AST
all within one java session.  I'd really prefer not to go through the hoops
of outputting a java file and loading it with reflection. It seems like it
should be a lot easier than that.

Is this supported? If not, any tips on how I might be able to go about this?

kthxbai,
Hunter
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090525/d4bc3ff7/attachment.html 

From timotheus at tstotts.net  Tue May 26 21:04:53 2009
From: timotheus at tstotts.net (T Stotts)
Date: Wed, 27 May 2009 00:04:53 -0400
Subject: [antlr-interest] composite grammar fails to generate lexer
Message-ID: <3315.1243397093@tstotts.net>


Hello. I have written a simple composite grammar. Antlr 3.1 fails to
generate a lexer when the lexer grammar is in its own file; but
generates a lexer when the grammar is combined into one file. The
eventual grammar will be very large, so I need to implement it as a
composite grammar. What do I do? Is this a bug in the software, and why
does this problem not show up for the antlr v3 examples?

Clarification: by failing to generate a lexer, I do mean that the tool
fails to create a Vhdl2008Lexer.java file.


/*   File Vhdl2008.g  */
grammar Vhdl2008;

options {
    language='Java';
}

import Vhdl2008LexerRules;

entity_declaration :
    ENTITY Identifier IS
    END (ENTITY)? (Identifier)? SEMICOLON
    ;


/*   File Vhdl2008LexerRules.g  */
lexer grammar Vhdl2008LexerRules;

END : ('E'|'e')('N'|'n')('D'|'d') ;
ENTITY : ('E'|'e')('N'|'n')('T'|'t')('I'|'i')('T'|'t')('Y'|'y') ;
IS : ('I'|'i')('S'|'s') ;

SEMICOLON : ';';

Identifier : ('A'..'Z'|'a'..'z') ( ('_')? 'A'..'Z'|'a'..'z'|'0'..'9' )*;

WS : (' '|'\t'|'\r'|'\n')+ {$channel=HIDDEN;};


-- 
aka:   timotheus
web:   http://tstotts.net/

From christian.schladetsch at gmail.com  Tue May 26 22:33:53 2009
From: christian.schladetsch at gmail.com (Christian Schladetsch)
Date: Wed, 27 May 2009 17:33:53 +1200
Subject: [antlr-interest] Retrieving Line and Column information in AST
Message-ID: <6442c4ae0905262233v7e356856j573636ac22342d3b@mail.gmail.com>

Hello,

I would like to add file+line+column information to code generatedfrom an
AST tree.

IE:

// in lexer
statement:
    :    'for' '(' start=expression? ';' cond=expression? ';'
next=expression? ')' body=statement
        -> ^('for' $cond $next $body $start )
    ...
    ;

// in tree
statement
    :    ^('for' cond=continuation step=continuation body=continuation
expression)    { AppendOp(Operation::ForLoop); }
    ...
    ;

My question is, how can I access file, line and column information for
tokens used by the tree parser? in the example above, how can I access the
location of the 'for' token used in the tree grammar to pass to the
AppendOp() function?

Similarly, I'd like to add debug (file+line+column) info for all generated
objects.

Thanks in advance,
Christian.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090527/2c9add5e/attachment.html 

From christian.schladetsch at gmail.com  Tue May 26 22:35:08 2009
From: christian.schladetsch at gmail.com (Christian Schladetsch)
Date: Wed, 27 May 2009 17:35:08 +1200
Subject: [antlr-interest] Retrieving Line and Column information in AST
In-Reply-To: <6442c4ae0905262233v7e356856j573636ac22342d3b@mail.gmail.com>
References: <6442c4ae0905262233v7e356856j573636ac22342d3b@mail.gmail.com>
Message-ID: <6442c4ae0905262235p66fd6ad2tb81db36a3fdee744@mail.gmail.com>

Apologies, I am using ANTLR 3.1 with C runtime.

On Wed, May 27, 2009 at 5:33 PM, Christian Schladetsch <
christian.schladetsch at gmail.com> wrote:

> Hello,
>
> I would like to add file+line+column information to code generatedfrom an
> AST tree.
>
> IE:
>
> // in lexer
> statement:
>     :    'for' '(' start=expression? ';' cond=expression? ';'
> next=expression? ')' body=statement
>         -> ^('for' $cond $next $body $start )
>     ...
>     ;
>
> // in tree
> statement
>     :    ^('for' cond=continuation step=continuation body=continuation
> expression)    { AppendOp(Operation::ForLoop); }
>     ...
>     ;
>
> My question is, how can I access file, line and column information for
> tokens used by the tree parser? in the example above, how can I access the
> location of the 'for' token used in the tree grammar to pass to the
> AppendOp() function?
>
> Similarly, I'd like to add debug (file+line+column) info for all generated
> objects.
>
> Thanks in advance,
> Christian.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090527/6885c755/attachment.html 

From richard.thrippleton at progress.com  Wed May 27 02:36:30 2009
From: richard.thrippleton at progress.com (Richard Thrippleton)
Date: Wed, 27 May 2009 10:36:30 +0100
Subject: [antlr-interest] Retrieving Line and Column information in AST
In-Reply-To: <6442c4ae0905262233v7e356856j573636ac22342d3b@mail.gmail.com>
References: <6442c4ae0905262233v7e356856j573636ac22342d3b@mail.gmail.com>
Message-ID: <4A1D099E.4020302@progress.com>

Christian Schladetsch wrote:
<snip>
> // in tree
> statement
>     :    ^('for' cond=continuation step=continuation body=continuation 
> expression)    { AppendOp(Operation::ForLoop); }
>     ...
>     ;
> 
> My question is, how can I access file, line and column information for 
> tokens used by the tree parser? in the example above, how can I access 
> the location of the 'for' token used in the tree grammar to pass to the 
> AppendOp() function?
> 
> Similarly, I'd like to add debug (file+line+column) info for all 
> generated objects.
I don't believe there's any way of getting the filename out of a token 
(but surely this will be global for an entire parsing/treewalking 
session, so could be stored as such?). Line and column can be taken as 
attributes 'line' and 'pos' from tokens though:

^(forTok = 'for' cond=continuation step=continuation body=continuation
         { line = $forTok.line;
           column = $forTok.pos;}




Richard

From mail at martin-probst.com  Wed May 27 04:34:02 2009
From: mail at martin-probst.com (Martin Probst)
Date: Wed, 27 May 2009 13:34:02 +0200
Subject: [antlr-interest] Unnecessary Java output file diffs
In-Reply-To: <4A145D9E.9090909@temporal-wave.com>
References: <ecf3d2390905201206q5c480c79n3b8f509a9af0e4ca@mail.gmail.com>
	<4A145D9E.9090909@temporal-wave.com>
Message-ID: <6dca08520905270434o5c2bec81y6a0fd525f64da101@mail.gmail.com>

> There are quite a few ways to deal with this of course. Personally, I think
> we should go with 'quantum' tokens and am trying to get some time to
> implement it in a test branch before the ANTLR conference in a few weeks.

That sounds interesting. What do you mean by quantum tokens?

Martin

From sidharth.kuruvila at gmail.com  Wed May 27 04:34:58 2009
From: sidharth.kuruvila at gmail.com (Sidharth Kuruvila)
Date: Wed, 27 May 2009 17:04:58 +0530
Subject: [antlr-interest] A php grammar
Message-ID: <2ab2ed550905270434o55b56c81o800b2fc9dd3a896e@mail.gmail.com>

Hi,

 I've written a grammar file for parsing parsing php source. You can
download it at http://phpparser.googlecode.com/files/Php.g

Have a look at http://code.google.com/p/phpparser/ if you are interested in
knowing more and about what's still missing.

-- 
I am but a man.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090527/f86b1213/attachment.html 

From gwlist at grahamwideman.com  Wed May 27 05:41:23 2009
From: gwlist at grahamwideman.com (Graham Wideman)
Date: Wed, 27 May 2009 05:41:23 -0700
Subject: [antlr-interest] A php grammar
In-Reply-To: <2ab2ed550905270434o55b56c81o800b2fc9dd3a896e@mail.gmail.co
 m>
Message-ID: <4.1.20090527054004.04cf0ae8@grahamwideman.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090527/3241d14a/attachment.html 

From g.r.vansickle at att.net  Wed May 27 06:50:45 2009
From: g.r.vansickle at att.net (Gary R. Van Sickle)
Date: Wed, 27 May 2009 08:50:45 -0500
Subject: [antlr-interest] Unnecessary Java output file diffs
In-Reply-To: <6dca08520905270434o5c2bec81y6a0fd525f64da101@mail.gmail.com>
References: <ecf3d2390905201206q5c480c79n3b8f509a9af0e4ca@mail.gmail.com><4A145D9E.9090909@temporal-wave.com>
	<6dca08520905270434o5c2bec81y6a0fd525f64da101@mail.gmail.com>
Message-ID: <742613A4326949E0A41299B70E1530DD@DFW5RB41>

> > There are quite a few ways to deal with this of course. 
> Personally, I 
> > think we should go with 'quantum' tokens and am trying to get some 
> > time to implement it in a test branch before the ANTLR 
> conference in a few weeks.
> 
> That sounds interesting. What do you mean by quantum tokens?
> 
> Martin

He means tokens that simultaneously exhibit both terminal-like and
non-terminal-like behavior, only "deciding" which one when actually
observed, in a process known as "tokenfunction collapse".

Me += 10 Physics Nerd Points.  += 1,000,000 points if that's actually what
he meant.

;-)

-- 
Gary R. Van Sickle
 


From jimi at temporal-wave.com  Wed May 27 09:32:44 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 27 May 2009 09:32:44 -0700
Subject: [antlr-interest] Retrieving Line and Column information in AST
In-Reply-To: <6442c4ae0905262235p66fd6ad2tb81db36a3fdee744@mail.gmail.com>
References: <6442c4ae0905262233v7e356856j573636ac22342d3b@mail.gmail.com>
	<6442c4ae0905262235p66fd6ad2tb81db36a3fdee744@mail.gmail.com>
Message-ID: <4A1D6B2C.1010304@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090527/99771bdd/attachment.html 

From jimi at temporal-wave.com  Wed May 27 09:35:12 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 27 May 2009 09:35:12 -0700
Subject: [antlr-interest] Retrieving Line and Column information in AST
In-Reply-To: <4A1D099E.4020302@progress.com>
References: <6442c4ae0905262233v7e356856j573636ac22342d3b@mail.gmail.com>
	<4A1D099E.4020302@progress.com>
Message-ID: <4A1D6BC0.6090700@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090527/089104fb/attachment.html 

From jimi at temporal-wave.com  Wed May 27 09:55:43 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 27 May 2009 09:55:43 -0700
Subject: [antlr-interest] Unnecessary Java output file diffs
In-Reply-To: <6dca08520905270434o5c2bec81y6a0fd525f64da101@mail.gmail.com>
References: <ecf3d2390905201206q5c480c79n3b8f509a9af0e4ca@mail.gmail.com>	
	<4A145D9E.9090909@temporal-wave.com>
	<6dca08520905270434o5c2bec81y6a0fd525f64da101@mail.gmail.com>
Message-ID: <4A1D708F.5090904@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090527/b545b174/attachment.html 

From antlr at mirality.co.nz  Wed May 27 12:55:25 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 28 May 2009 07:55:25 +1200
Subject: [antlr-interest] Unnecessary Java output file diffs
In-Reply-To: <4A1D708F.5090904@temporal-wave.com>
References: <ecf3d2390905201206q5c480c79n3b8f509a9af0e4ca@mail.gmail.com>
	<4A145D9E.9090909@temporal-wave.com>
	<6dca08520905270434o5c2bec81y6a0fd525f64da101@mail.gmail.com>
	<4A1D708F.5090904@temporal-wave.com>
Message-ID: <20090527195553.4EBE83418493@www.antlr.org>

At 04:55 28/05/2009, Jim Idle wrote:
>The idea is that a token is defined as specific type, but can 
>also exist as another type at the same time. So, if the parser 
>needs to know if there is an ID, the code generated asks if the 
>token is a real ID OR has a superimposed ID and so reduces all 
>the complexity of using keywords as identifiers (and probably 
>other case, but this is the specific problem domain), to an extra 
>|| operation and an additional LA type operation, something like 
>this:
>
>int LA1_0 = input.LA(1);
>int LA1_0_s = input.LAS(1);
>
>if ( (LA1_0==ID)||(LA1_0_s==ID ) {
>                 alt1=1;
>             }

Shouldn't any number of other token types be able to be 
superimposed on a token?  It seems like a waste to arbitrarily 
restrict this to one other type.

(In terms of implementation, you could make LAS return a BitSet of 
the possible types, or you could leave the decision-making to the 
token itself; eg. use TokenType instead of int and have it define 
comparison and containment operations.  Or something else along 
those lines.)


From jimi at temporal-wave.com  Wed May 27 17:28:33 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 27 May 2009 17:28:33 -0700
Subject: [antlr-interest] Unnecessary Java output file diffs
In-Reply-To: <20090527194454.8390F12403B0@msf1.dnsmadeeasy.com>
References: <ecf3d2390905201206q5c480c79n3b8f509a9af0e4ca@mail.gmail.com>
	<4A145D9E.9090909@temporal-wave.com>
	<6dca08520905270434o5c2bec81y6a0fd525f64da101@mail.gmail.com>
	<4A1D708F.5090904@temporal-wave.com>
	<20090527194454.8390F12403B0@msf1.dnsmadeeasy.com>
Message-ID: <3FAA6DF9-826D-46D2-850D-1E057C82E15B@temporal-wave.com>



Sent from my iPhone

On May 27, 2009, at 12:55 PM, Gavin Lambert <antlr at mirality.co.nz>  
wrote:

> At 04:55 28/05/2009, Jim Idle wrote:
>> The idea is that a token is defined as specific type, but can also  
>> exist as another type at the same time. So, if the parser needs to  
>> know if there is an ID, the code generated asks if the token is a  
>> real ID OR has a superimposed ID and so reduces all the complexity  
>> of using keywords as identifiers (and probably other case, but this  
>> is the specific problem domain), to an extra || operation and an  
>> additional LA type operation, something like this:
>>
>> int LA1_0 = input.LA(1);
>> int LA1_0_s = input.LAS(1);
>>
>> if ( (LA1_0==ID)||(LA1_0_s==ID ) {
>>                alt1=1;
>>            }
>
> Shouldn't any number of other token types be able to be superimposed  
> on a token?  It seems like a waste to arbitrarily restrict this to  
> one other type.
>
Perhaps but I have not through all the implications of that. I think  
performance might suck and I can see people getting into all sorts of  
trouble.

> (In terms of implementation, you could make LAS return a BitSet of  
> the possible types, or you could leave the decision-making to the  
> token itself; eg. use TokenType instead of int and have it define  
> comparison and containment operations.  Or something else along  
> those lines.)
>
I thought about bollean LAS(1, Toktype) but again it means more  
complicated code and then there is the DFA to consider etc

Anyway I will have a play with it soon and see if it is even practical.

Jim

From jimi at temporal-wave.com  Wed May 27 17:34:22 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 27 May 2009 17:34:22 -0700
Subject: [antlr-interest] composite grammar fails to generate lexer
In-Reply-To: <3315.1243397093@tstotts.net>
References: <3315.1243397093@tstotts.net>
Message-ID: <45B46AD0-1657-43C5-B17D-07F4A5CEADEB@temporal-wave.com>

What I do is generate the lexer standalone and use vocab import. Then  
your parser is a parser grammar T;

Jim

Sent from my iPhone

On May 26, 2009, at 9:04 PM, T Stotts <timotheus at tstotts.net> wrote:

>
> Hello. I have written a simple composite grammar. Antlr 3.1 fails to
> generate a lexer when the lexer grammar is in its own file; but
> generates a lexer when the grammar is combined into one file. The
> eventual grammar will be very large, so I need to implement it as a
> composite grammar. What do I do? Is this a bug in the software, and  
> why
> does this problem not show up for the antlr v3 examples?
>
> Clarification: by failing to generate a lexer, I do mean that the tool
> fails to create a Vhdl2008Lexer.java file.
>
>
> /*   File Vhdl2008.g  */
> grammar Vhdl2008;
>
> options {
>    language='Java';
> }
>
> import Vhdl2008LexerRules;
>
> entity_declaration :
>    ENTITY Identifier IS
>    END (ENTITY)? (Identifier)? SEMICOLON
>    ;
>
>
> /*   File Vhdl2008LexerRules.g  */
> lexer grammar Vhdl2008LexerRules;
>
> END : ('E'|'e')('N'|'n')('D'|'d') ;
> ENTITY : ('E'|'e')('N'|'n')('T'|'t')('I'|'i')('T'|'t')('Y'|'y') ;
> IS : ('I'|'i')('S'|'s') ;
>
> SEMICOLON : ';';
>
> Identifier : ('A'..'Z'|'a'..'z') ( ('_')?  
> 'A'..'Z'|'a'..'z'|'0'..'9' )*;
>
> WS : (' '|'\t'|'\r'|'\n')+ {$channel=HIDDEN;};
>
>
> -- 
> aka:   timotheus
> web:   http://tstotts.net/
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From register72 at gmail.com  Thu May 28 03:24:53 2009
From: register72 at gmail.com (register)
Date: Thu, 28 May 2009 12:24:53 +0200
Subject: [antlr-interest] [C Target][3.1.1] erroneous code generation when
	using scoped attributes
Message-ID: <4a80712f0905280324u9111ec7i40fd77d6a37866a9@mail.gmail.com>

When a rule (  called "field" in this specific example ) has a scoped
attribute the following code is generated:


if (SCOPE_TOP(field)>free != NULL)

{

SCOPE_TOP(field)>->free(SCOPE_TOP(field));

}

Obviously there is a missing "-" in the first line and a spurious ">" in the
second line of code.

Greets,

Luca.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090528/6ccfcc6e/attachment.html 

From mail at martin-probst.com  Thu May 28 05:52:52 2009
From: mail at martin-probst.com (Martin Probst)
Date: Thu, 28 May 2009 14:52:52 +0200
Subject: [antlr-interest] Non-LL(*) decision,
	different behaviour in ANTLRWorks vs. ANTLR 	(command line)
Message-ID: <6dca08520905280552l25b12816yfcc96fb708c42702@mail.gmail.com>

Hi all,

I have trouble with a grammar I'm developing. Everything worked fine,
now I'm integrating some additional language constructs, and ANTLR
doesn't like them. You can find the grammar here (sorry, it's pretty
huge):

http://code.google.com/p/xqpretty/source/browse/trunk/src/main/antlr3/com/martinprobst/xqpretty/XQuery.g

The problem is that with the grammar as it is, ANTLR 3.1.3 reports
"[fatal] rule stepExpr has non-LL(*) decision", and then some more of
the same. I've spent some time tracking this, and I found that
ANTLRWorks does not give these errors (even when generating code!) and
also interprets the grammar correctly. So, is there any difference in
how ANTLRWorks and ANTLR run the generator? Can I emulate that on the
command line?

I can get rid of the non-LL(*) warnings by modifying two lines, line
546 (ftWordsValue):

ftWordsValue
    : literal; // | (LCURLY expr RCURLY);

and line 540 (ftPrimaryWithOptions):

ftPrimaryWithOptions
    : ftPrimary; // ftMatchOptions?;

However looking through the grammar, I really cannot find any problem
with these rules. The embedded recursion to "expr" (top rule) should
be properly guarded through the curly braces in the first case, and
the match options (latter case) simply consist of some tokens. ANTLR
reports for the second issue:

XQuery.g:541:17: Decision can match input such as "CASE INSENSITIVE
RETURN IntegerLiteral..DoubleLiteral" using multiple alternatives: 1,
2
(and many more like that)

Where alternative 1 would be to continue with the repetition, and
alternative 2 would be to exit the loop (I guess). However nothing
within the rules referenced from the loop allows the "RETURN" token,
and no rule on the outside allows a CASE token followed by an
INSENSITIVE token.

I'm pretty puzzled, in particular by the different behaviour of
ANTLRWorks and ANTLR. My ANTLRWorks version uses ANTLR 3.1.2 according
to "About", but I've also tried that one on the command line with no
success.

Any pointers/opinions?

Thanks,
Martin

From ckimyt at gmail.com  Thu May 28 08:21:06 2009
From: ckimyt at gmail.com (Mike J. Bell)
Date: Thu, 28 May 2009 11:21:06 -0400
Subject: [antlr-interest] zero-or-more or one-or-more in tree grammars
Message-ID: <cfae84d80905280821l30458dc0q6b47d39b3fc7338d@mail.gmail.com>

I'm having trouble finding examples to show how to handle accumulation of
rule components in a tree parser.

For instance, given a grammar snippet:

big_definition: ^(DEFINITION_TOKEN str=collection) {
System.out.println("definition " + $str.value); };

collection returns [String value]:
    t=thing* { /* insert magic to accumulate all the t's into $value */ };

thing: ...

See what I mean?  When I look at the code generated here, t is assigned
inside the (*) loop, while the /*...*/ comment is placed after the
accumulation.  I need to insert code at the (*).  I don't seem to be able to
get the (ANTLR) grammar right to make this happen.

Any ideas?  Does this happen a lot to you tree parser gurus?  Any wealth of
knowledge besides the ANTLR wiki on tree parsing lore?

Thanks in advance,
Mike

-- 
Mike J. Bell on gmail
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090528/b9adc7bd/attachment.html 

From jimi at temporal-wave.com  Thu May 28 09:45:54 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 28 May 2009 09:45:54 -0700
Subject: [antlr-interest] zero-or-more or one-or-more in tree grammars
In-Reply-To: <cfae84d80905280821l30458dc0q6b47d39b3fc7338d@mail.gmail.com>
References: <cfae84d80905280821l30458dc0q6b47d39b3fc7338d@mail.gmail.com>
Message-ID: <4A1EBFC2.6060107@temporal-wave.com>

Mike J. Bell wrote:
> I'm having trouble finding examples to show how to handle accumulation 
> of rule components in a tree parser.
>
> For instance, given a grammar snippet:
>
> big_definition: ^(DEFINITION_TOKEN str=collection) { 
> System.out.println("definition " + $str.value); };
>
> collection returns [String value]:
>     t=thing* { /* insert magic to accumulate all the t's into $value */ };
>
> thing: ...
I think that perhaps people just assume that this is obvious, but it 
seems to get a lot of people so perhaps you can add this to the Wiki? ;-) :

collection returns [String value]
:
    ( t=thing
        {  $value += $t.text; }
    )*
;

Note that because of the *, you may return a null string, so perhaps you 
need an @init block to set it to "" or something?

However, if your collection is empty, then you will get a single node, 
not a tree, so you should probably have:

big_definition
: ^(DEFINITION_TOKEN

            str=collection) { System.out.println("definition " + 
$str.value); };

| DEFINITION_TOKEN { Sout("empty collection"); }
;


collection returns [String value]
:
    ( t=thing
        {  $value += $t.text; }
    )+
;

Jim



From jimi at temporal-wave.com  Thu May 28 11:03:30 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 28 May 2009 11:03:30 -0700
Subject: [antlr-interest] Non-LL(*) decision,
 different behaviour in ANTLRWorks vs. ANTLR 	(command line)
In-Reply-To: <6dca08520905280552l25b12816yfcc96fb708c42702@mail.gmail.com>
References: <6dca08520905280552l25b12816yfcc96fb708c42702@mail.gmail.com>
Message-ID: <4A1ED1F2.8070400@temporal-wave.com>

Martin Probst wrote:
> Hi all,
>
> I have trouble with a grammar I'm developing. Everything worked fine,
> now I'm integrating some additional language constructs, and ANTLR
> doesn't like them. You can find the grammar here (sorry, it's pretty
> huge):
>
> http://code.google.com/p/xqpretty/source/browse/trunk/src/main/antlr3/com/martinprobst/xqpretty/XQuery.g
>
> The problem is that with the grammar as it is, ANTLR 3.1.3 reports
> "[fatal] rule stepExpr has non-LL(*) decision", and then some more of
> the same. I've spent some time tracking this, and I found that
> ANTLRWorks does not give these errors (even when generating code!) and
> also interprets the grammar correctly. So, is there any difference in
> how ANTLRWorks and ANTLR run the generator? Can I emulate that on the
> command line?
>
> I can get rid of the non-LL(*) warnings by modifying two lines, line
> 546 (ftWordsValue):
>
> ftWordsValue
>     : literal; // | (LCURLY expr RCURLY);
>
> and line 540 (ftPrimaryWithOptions):
>
> ftPrimaryWithOptions
>     : ftPrimary; // ftMatchOptions?;
It looks like you have tried to type up the grammar from the normative 
spec, without reorganizing it into an LL form. You will end up with 
myriad errors/problems that way.

If you just ask ANTLR Works to "Check Grammar", then it won't try to 
generate the code and often says nothing. If you Do Run->debug, you will 
find lots of errors are given out, not least of which is the missing 
lexer tokens:


[10:43:39] warning(105): /home/jimi/tmp/antlr/xquery/XQuery.g:302:62: no 
lexer rule corresponding to token: ElementContentChar
[10:43:39] warning(105): /home/jimi/tmp/antlr/xquery/XQuery.g:291:54: no 
lexer rule corresponding to token: CLOSE_TAG
[10:43:39] warning(105): /home/jimi/tmp/antlr/xquery/XQuery.g:300:7: no 
lexer rule corresponding to token: AposAttrContentChar
[10:43:39] warning(105): /home/jimi/tmp/antlr/xquery/XQuery.g:298:7: no 
lexer rule corresponding to token: QuotAttrContentChar
[10:43:39] warning(105): /home/jimi/tmp/antlr/xquery/XQuery.g:304:59: no 
lexer rule corresponding to token: ESCAPE_CURLY_CLOSE
[10:43:39] warning(105): /home/jimi/tmp/antlr/xquery/XQuery.g:304:39: no 
lexer rule corresponding to token: ESCAPE_CURLY_OPEN
[10:43:39] warning(105): /home/jimi/tmp/antlr/xquery/XQuery.g:291:8: no 
lexer rule corresponding to token: EMPTY_CLOSE_TAG

You are using some of these as parsing tokens, but have just declared 
them as imaginaries. Make them empty fragments in the lexer if you are 
changing lexer tokens to these types, then the warnings will go away.

The following errors are legitimate

[10:43:40] error(211): /home/jimi/tmp/antlr/xquery/XQuery.g:230:5: 
[fatal] rule stepExpr has non-LL(*) decision due to recursive rule 
invocations reachable from alts 1,2.  Resolve by left-factoring or using 
syntactic predicates or using backtrack=true option.

filterExpr just starts with primaryExpr, which means it ends up back at 
stepExpr.

When the spec says something like stepExpr, you need to reinterpret this 
as expression, then write a proper LL expression tree, using it for all 
casee. It is your tree walking AST phase (that would come next) that 
should verify if the expression is valid for a stepExpr.


[10:43:40] error(211): /home/jimi/tmp/antlr/xquery/XQuery.g:541:17: 
[fatal] rule ftPrimaryWithOptions has non-LL(*) decision due to 
recursive rule invocations reachable from alts 1,2.  Resolve by 
left-factoring or using syntactic predicates or using backtrack=true option.

Basically, same as above, it all needs to be left factored.

[10:43:40] warning(200): /home/jimi/tmp/antlr/xquery/XQuery.g:541:17: 
Decision can match input such as "CASE INSENSITIVE RETURN SLASH" using 
multiple alternatives: 1, 2

You have: ftMatchOptions?

That means the parser could take that path immediately, or not take it 
and take it next time in some way. This is basically all symptomatic of 
the same problem.

... and so on.

Basically, I hate to tell you this, but you really need to view this as 
a learning exercise and start again with the expression tree. Add one 
step at a time, starting at the bottom (primary) and working your way up 
the tree. Then you can start to fill in the main syntax when you 
expression tree is correct.

Of course, if you are just needing something quick and dirty, and don't 
care about good syntax error messages, you could try turning on global 
backtracking, which will likely work it out at runtime. However, it may 
not of course as there are quite a few structural issues here.

Jim

From ckimyt at gmail.com  Thu May 28 11:15:49 2009
From: ckimyt at gmail.com (Mike J. Bell)
Date: Thu, 28 May 2009 14:15:49 -0400
Subject: [antlr-interest] Fwd: zero-or-more or one-or-more in tree grammars
In-Reply-To: <cfae84d80905281115vdac74a6g534d94e2ffe6ffaf@mail.gmail.com>
References: <cfae84d80905280821l30458dc0q6b47d39b3fc7338d@mail.gmail.com>
	<4A1EBFC2.6060107@temporal-wave.com>
	<cfae84d80905281115vdac74a6g534d94e2ffe6ffaf@mail.gmail.com>
Message-ID: <cfae84d80905281115l70581ccemecf795fe656e529e@mail.gmail.com>

On Thu, May 28, 2009 at 12:45 PM, Jim Idle <jimi at temporal-wave.com> wrote:

>
> I think that perhaps people just assume that this is obvious, but it
> seems to get a lot of people so perhaps you can add this to the Wiki? ;-) :
>

I'll try to do this later (haven't authored anything up there personally)...


> collection returns [String value]
> :
>    ( t=thing
>         {  $value += $t.text; }
>    )*
> ;
>

This was the trick...thanks!

-- 
Mike J. Bell on gmail
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090528/ab3e4cde/attachment.html 

From ckimyt at gmail.com  Thu May 28 11:33:22 2009
From: ckimyt at gmail.com (Mike J. Bell)
Date: Thu, 28 May 2009 14:33:22 -0400
Subject: [antlr-interest] island grammars and tree parsers
Message-ID: <cfae84d80905281133s2f26bfc6q22e8bd53113b6c7f@mail.gmail.com>

So I've got this weird DSL that ends up having three grammars, a main
"control" grammar and then two island grammars it starts up when it needs
to.  All of them produce ASTs.  I need these island grammars because the
lexing rules are drastically different between them (irreconcilable
differences).

I figured I was going along a great path by removing all tokens from my AST
productions; i.e. operator tokens like '+' and '*' get changed into shared
synthetic tokens such as:

expression_add:  expression_mult  (expression_add_op^ expression_mult)*;
expression_add_op: '+' -> OPERATOR_ADD;

expression_mult: expression_whatever (expression_mult_op^
expression_whatever)*;
expression_add_op: '*' -> OPERATOR_MULT;

and so on and so forth.  This way I should be able to just use the same
tokenVocab in the tree parsers, and write one for the entire language even
though the lexing/parsing stage uses three different grammars.

Obviously I'm doing something wrong, because as soon as I get to the
synthetic token that starts the major subtree of one of the island grammars
(like OPERATOR_EXPRESSION...) I get this error:

TreeParser.g: node from line 246:28 mismatched input '...' expecting
SOME_KEYWORD

The input is the *entire* glob of characters that the island grammar parsed
(not reproduced here for brevity), and SOME_KEYWORD shouldn't be expected in
this location at all...it's part of a different production.

When I don't run the tree parser in the scheme of things, it appears that
all three island grammars are working properly and parse my input files just
fine.

Does this have something to do with the
CommonTreeNodeStream.setTokenStream()?  I set it initially to the top
controller lexer token stream when I created it, but am I wrong about this?
Does it need to be set to a different token stream when the lexers hand off
control to each other?

If so, how the heck can I manage that at the appropriate times?

Maybe there's something else I'm missing?

Thanks everybody!  =)

P.S.  Is there a simple way to turn on debugging for token or tree node
streams?  I can't seem to get my weird case to run in ANTLRWorks, so I'm
running standalone, and I don't have the nice parse trees or ASTs or
event/stack viewers...so it would be really neat to be able to generate
messages when things are consumed from the streams.

-- 
Mike J. Bell on gmail
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090528/f23d2e2e/attachment.html 

From timotheus at tstotts.net  Thu May 28 21:07:09 2009
From: timotheus at tstotts.net (T Stotts)
Date: Fri, 29 May 2009 00:07:09 -0400
Subject: [antlr-interest] composite grammar fails to generate lexer
In-Reply-To: <45B46AD0-1657-43C5-B17D-07F4A5CEADEB@temporal-wave.com>
References: <3315.1243397093@tstotts.net>
	<45B46AD0-1657-43C5-B17D-07F4A5CEADEB@temporal-wave.com>
Message-ID: <21296.1243570029@tstotts.net>

I created two files.

/* File one */
lexer grammar VhdlLex;

/* File two */
parser grammar VhdlPar;
options {
    tokenVocab=VhdlLex;
}

It works just fine now. Thanks.
-- 
aka:   timotheus
web:   http://tstotts.net/

From timotheus at tstotts.net  Thu May 28 21:23:50 2009
From: timotheus at tstotts.net (T Stotts)
Date: Fri, 29 May 2009 00:23:50 -0400
Subject: [antlr-interest] approach for rewriting source code
Message-ID: <21908.1243571030@tstotts.net>


I want to use ANTLR v3 to rewrite source code by removing and partially
compiling specific items. How would I go about doing the following with
this very simple example.


-- Program Input
constant x : integer := 5;
constant y : integer := x + 6;
constant z : integer := y * 8;

-- Program Output
constant y : integer := 5 + 6;
constant z : integer := y * 8;


In this example, I already have created a lexer and parser that can
understand the above language. Do you have a recommendation on how I
achieve this language transformation where the main program arbitrarily
decides that constant 'x' should be substituted and removed? Should I
use the parser's parse tree, or should I use grammar rewrite rules to
first create a structured AST? How do I rewrite the contents of the
input stream buffer and output preserving white-space?

How much of the language functionality does ANTLR already provide with
its API? Obviously the rewriting decision making has to be a custom
routine.

Thanks for any ideas!

-- 
aka:   timotheus
web:   http://tstotts.net/

From potrto at centrum.cz  Fri May 29 02:09:28 2009
From: potrto at centrum.cz (Tomas Potrusil)
Date: Fri, 29 May 2009 11:09:28 +0200
Subject: [antlr-interest] double NOT removal during tree parsing?
Message-ID: <af7c90190905290209u2ba49cd0oc563e512001aac93@mail.gmail.com>

Halo,

I'm writing a SQL grammar. I've decided to create a basic AST and then
to optimize it a little bit during the tree parsing. One of the
optimizations is to remove two consequent NOT nodes in a condition
subtree. My naive implementation is this:

condition
	:	^(OR condition condition)
	|	^(AND condition condition)
	|	(^(NOT ^(NOT .))) => ^(NOT ^(NOT condition)) -> condition
	|	^(NOT condition)
	|	predicate ;

predicate
	:	^(comparisonOperator expression expression)

This works perfectly fine for simple conditions (NOT NOT pred). But
when the double NOT subtree is a part of a more complex condition (NOT
NOT pred1 AND pred2) the processing goes wrong. When debugging I see
the decisioning for the pred2 predicate is somehow sick. And even more
the incoming tokens are not those what I expect should come in (when
looking at the LT events).

To be more explaning, the condition is this: NOT NOT col1 < col2 AND
col3 > col4.
So the pred2 predicate states for col3 > col4. By the first parsing it
is transformed into: ^('>' col3 col4). When this is parsed by the tree
parser (after the double not optimization of NOT NOT col1 < col2) the
token '>' is consumed directly in the condition rule! And consecutive
token (LT event) is not "col3" but some completely different, let's
say X. With this X token the parser goes to predicate rule where it
fails, of course (NoViableAltException).

Do you see anything wrong in the stated tree grammar?

Regards,
Tomas

From potrto at centrum.cz  Fri May 29 06:15:51 2009
From: potrto at centrum.cz (Tomas Potrusil)
Date: Fri, 29 May 2009 15:15:51 +0200
Subject: [antlr-interest] rewriteWildcardLabelRef.st missing for C target
Message-ID: <af7c90190905290615r4ff0f6dpdc0f89149b1ed16f@mail.gmail.com>

Hello,

something related to a wildcard is missing for the C target. My grammar is:

databaseObjectName
	:	^(DatabaseObject do=.) -> ^(DatabaseObjectName $do) ;

When I try to generate the C code I get the following exception:

error(10):  internal error: SqlOptimizer.g :
java.lang.IllegalArgumentException: Can't find template
rewriteWildcardLabelRef.st; group hierarchy is [C]
org.antlr.stringtemplate.StringTemplateGroup.lookupTemplate(StringTemplateGroup.java:507)
org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:392)
org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:404)
org.antlr.stringtemplate.StringTemplateGroup.lookupTemplate(StringTemplateGroup.java:484)
org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:392)
org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:404)
org.antlr.stringtemplate.StringTemplateGroup.lookupTemplate(StringTemplateGroup.java:484)
org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:392)
org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:404)
org.antlr.grammar.v2.CodeGenTreeWalker.rewrite_atom(CodeGenTreeWalker.java:3067)
org.antlr.grammar.v2.CodeGenTreeWalker.rewrite_element(CodeGenTreeWalker.java:2651)
org.antlr.grammar.v2.CodeGenTreeWalker.rewrite_tree(CodeGenTreeWalker.java:3206)
org.antlr.grammar.v2.CodeGenTreeWalker.rewrite_element(CodeGenTreeWalker.java:2665)
org.antlr.grammar.v2.CodeGenTreeWalker.rewrite_alternative(CodeGenTreeWalker.java:2520)
org.antlr.grammar.v2.CodeGenTreeWalker.rewrite(CodeGenTreeWalker.java:1422)
org.antlr.grammar.v2.CodeGenTreeWalker.block(CodeGenTreeWalker.java:1084)
org.antlr.grammar.v2.CodeGenTreeWalker.rule(CodeGenTreeWalker.java:797)
org.antlr.grammar.v2.CodeGenTreeWalker.rules(CodeGenTreeWalker.java:588)
org.antlr.grammar.v2.CodeGenTreeWalker.grammarSpec(CodeGenTreeWalker.java:530)
org.antlr.grammar.v2.CodeGenTreeWalker.grammar(CodeGenTreeWalker.java:336)
org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:429)
org.antlr.Tool.generateRecognizer(Tool.java:607)
org.antlr.Tool.process(Tool.java:429)
org.antlr.Tool.main(Tool.java:91)

Java code is generated successfully.

Tomas

From ckimyt at gmail.com  Fri May 29 07:07:26 2009
From: ckimyt at gmail.com (Mike J. Bell)
Date: Fri, 29 May 2009 10:07:26 -0400
Subject: [antlr-interest] Problem splicing island grammar subtree into main
	AST
Message-ID: <cfae84d80905290707m10fc607dqfc151054c3d345b6@mail.gmail.com>

OK, I finally figured out what my problem was...I'm not splicing an island
grammar AST into the main AST properly.  Extrapolating from the island
grammar example, I made something like:


// note that a queue is required as there is delayed communication from
lexer to parser

SUBORDINATE
    :    '{'
    {
        SubordinateLexer l = new SubordinateLexer(input);
        CommonTokenStream cts = new CommonTokenStream(l);
        SubordinateParser p = new SubordinateParser(cts);
        SubordinateParser.root_return subordinate = p.root();
        subordinateQueue.queue((CommonTree) subordinate.tree);
    };

subordinatebody returns [CommonTree node]
    :    SUBORDINATE { $node = subordinateQueue.dequeue(); };

subordinate
    :    s=subordinatebody -> ^($s);


So the problem here is that I don't want to splice in $s...I want to splice
in $s.node, which is the valid returned subtree that I made in the lexer.
But that's not valid syntax.

Any ideas on how I can get what I want?  I thought about putting in a Java
code snippet that is mangled to get the $s.node manually, but I thought
that's a nasty solution that could break if ANTLR internals change in the
future.  Surely there must be some way I can express this tree splicing in
ANTLR directly?

Thanks again in advance for any ideas...

-- 
Mike J. Bell on gmail
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090529/abe2324e/attachment.html 

From ckimyt at gmail.com  Fri May 29 07:51:10 2009
From: ckimyt at gmail.com (Mike J. Bell)
Date: Fri, 29 May 2009 10:51:10 -0400
Subject: [antlr-interest] Problem splicing island grammar subtree into
	main AST
In-Reply-To: <cfae84d80905290707m10fc607dqfc151054c3d345b6@mail.gmail.com>
References: <cfae84d80905290707m10fc607dqfc151054c3d345b6@mail.gmail.com>
Message-ID: <cfae84d80905290751r2799ffe6s699b6afcda89737d@mail.gmail.com>

And here's my solution:

subordinate[CommonTree subAST] : -> ^({$subAST});

somerule: body = subordinatebody subordinate[$body.node] ;

There we go!  Just had to read the string template pages really carefully to
figure it out.

Mike


On Fri, May 29, 2009 at 10:07 AM, Mike J. Bell <ckimyt at gmail.com> wrote:

> OK, I finally figured out what my problem was...I'm not splicing an island
> grammar AST into the main AST properly.  Extrapolating from the island
> grammar example, I made something like:
>
>
> // note that a queue is required as there is delayed communication from
> lexer to parser
>
> SUBORDINATE
>     :    '{'
>     {
>         SubordinateLexer l = new SubordinateLexer(input);
>         CommonTokenStream cts = new CommonTokenStream(l);
>         SubordinateParser p = new SubordinateParser(cts);
>         SubordinateParser.root_return subordinate = p.root();
>         subordinateQueue.queue((CommonTree) subordinate.tree);
>     };
>
> subordinatebody returns [CommonTree node]
>     :    SUBORDINATE { $node = subordinateQueue.dequeue(); };
>
> subordinate
>     :    s=subordinatebody -> ^($s);
>
>
> So the problem here is that I don't want to splice in $s...I want to splice
> in $s.node, which is the valid returned subtree that I made in the lexer.
> But that's not valid syntax.
>
> Any ideas on how I can get what I want?  I thought about putting in a Java
> code snippet that is mangled to get the $s.node manually, but I thought
> that's a nasty solution that could break if ANTLR internals change in the
> future.  Surely there must be some way I can express this tree splicing in
> ANTLR directly?
>
> Thanks again in advance for any ideas...
>
> --
> Mike J. Bell on gmail
>



-- 
Mike J. Bell on gmail
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090529/f4fcb9bb/attachment.html 

From steve at stevecooper.org  Fri May 29 13:18:12 2009
From: steve at stevecooper.org (Steve Cooper)
Date: Fri, 29 May 2009 21:18:12 +0100
Subject: [antlr-interest] How do you structure a two-part lexer?
Message-ID: <74b7ba600905291318k10c4d706k831eb0b155902e8f@mail.gmail.com>

Can anyone offer advice about how to recognise a language with two or
more very distinct lexing modes? The sort of thing you see in a php
script, where you alternate between HTML and PHP code. Something like;

    script: html ('<?' php '?>' html)*;

The problem is that one language will have very different token sets;
while html might have tokens like LT, GT, and TAGNAME, php will have
ID, SEMICOLON, etc.

So should I go for a single lexer? Two lexers feeding into a single
parser? Two parsers? I have no idea to go about interlacing languages
like this. Any advice would be greatly appreciated.

Steve Cooper.

From antlr at mirality.co.nz  Fri May 29 14:17:06 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 30 May 2009 09:17:06 +1200
Subject: [antlr-interest] How do you structure a two-part lexer?
In-Reply-To: <74b7ba600905291318k10c4d706k831eb0b155902e8f@mail.gmail.co
 m>
References: <74b7ba600905291318k10c4d706k831eb0b155902e8f@mail.gmail.com>
Message-ID: <20090529211729.ECD1B3418454@www.antlr.org>

At 08:18 30/05/2009, Steve Cooper wrote:
 >    script: html ('<?' php '?>' html)*;
 >
 >The problem is that one language will have very different token
 >sets; while html might have tokens like LT, GT, and TAGNAME,
 >php will have ID, SEMICOLON, etc.
 >
 >So should I go for a single lexer? Two lexers feeding into a
 >single parser? Two parsers? I have no idea to go about
 >interlacing languages like this. Any advice would be greatly
 >appreciated.

If the points where you switch between the two are lexically 
distinct (as they are in PHP, for example), then the best way to 
do this would be to have either two lexers feeding into a single 
parser or two lexer/parser combos outputting separate ASTs that 
get merged later on (the former being simpler than the latter, in 
general).

There are two common patterns for this sort of thing: in one case, 
you have a "master" lexer and a "child" lexer (for PHP, the HTML 
lexer would probably be the master and the PHP-code lexer the 
child).  The master lexer produces a single token containing 
everything that should be examined by the child lexer instead; 
when the parser processes this token, it creates a child lexer to 
process the content of that token alone and switches input streams 
until it's done.  This is the approach taken by the included 
examples, I think.

The other pattern is to have each lexer itself explicitly transfer 
control to the other when it encounters its end sequence (aka the 
start sequence for the other lexer).  I think this is a little 
trickier to code, but it results in the parser receiving a 
seamless stream of tokens from both lexers.

Have a look at the "island grammar" examples provided with ANTLR 
(and in the book) -- note that this would be an island grammar 
under lexer control, which is much simpler than the parser-control 
example that's in the Wiki.

Either way you go, though, don't forget to write lots of unit 
tests! ;)


From skkibler at earthlink.net  Fri May 29 20:16:53 2009
From: skkibler at earthlink.net (Steven Kibler)
Date: Fri, 29 May 2009 21:16:53 -0600
Subject: [antlr-interest] Unknown types
Message-ID: <006401c9e0d5$150c3ff0$3f24bfd0$@net>

I am compiling the tutorial for C++ in VS2008.  There are two undefined
types that is causing a large number of errors.  I have grep'ed the
libraries for ANTLR3_BITSET_LIST and ANTLR3_CALLOC and can't find either a
typedef or a #define for either one.  How might I resolve the issues?

 

Thanks

Steven Kibler

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090529/e5c75639/attachment.html 

From steve at stevecooper.org  Sat May 30 00:41:56 2009
From: steve at stevecooper.org (Steve Cooper)
Date: Sat, 30 May 2009 08:41:56 +0100
Subject: [antlr-interest] How do you structure a two-part lexer?
In-Reply-To: <0MKrqa-1MA9S21oyt-0009c4@mx.kundenserver.de>
References: <74b7ba600905291318k10c4d706k831eb0b155902e8f@mail.gmail.com>
	<0MKrqa-1MA9S21oyt-0009c4@mx.kundenserver.de>
Message-ID: <74b7ba600905300041yfc33b43h821c89dbededbdf5@mail.gmail.com>

Thanks, Gavin!

Your comments have got me on the right track, I think. Also, the
Island grammar in the examples is the sort of thing I was hoping for.
I'd scanned the example input for it but hadn't noticed the dual
nature. I'd just seen a C-like language with some comments. I should
have looked a little closer.

So it seems that it's safe to have lexers share character streams; The
'master' island grammar does this;

JAVADOC : '/**' {
            ...
            JavadocLexer j = new JavadocLexer(input);

where that last line is hijacking the input stream.

I think I'll be going for one master lexer, one sub-lexer, a master
parser, and a sub-parser, like the island example. The two parsers can
share common state, like a common symbol table, to communicate.

Thanks again.

    Steve

From s.barnett-cormack at lancaster.ac.uk  Sat May 30 05:00:59 2009
From: s.barnett-cormack at lancaster.ac.uk (Sam Barnett-Cormack)
Date: Sat, 30 May 2009 13:00:59 +0100
Subject: [antlr-interest] More hoisting pain
Message-ID: <4A211FFB.5040902@lancaster.ac.uk>

Hi all,

Been away from work ill for a while, and now returning to my ASN.1 project.

I'm having another hoisting issue. I have the following rule:

fixedTypeValueFieldSpec
   : IOLCID t=typeOrClass
     ({!($t.obj)}? UNIQUE
     |)
     ( {!($t.obj)}? valueOptionalSpec
     | {$t.obj}? objectOptionalSpec
     ) ;

The obj element of the typeOrClass return is just a boolean. The problem 
is that the decision is being hoisted to a DFA class, which can't see t. 
I have really no idea how to approach this. If it worked, it would be a 
relatively clean, not too inefficient (I think) way to handle the 
problem of two *very* similar grammar specifications that cause a lot of 
ambiguity otherwise. However, although t has already been set when the 
DFA is called, it obviously can't see it.

For background, this was originally two rules (well, three, one main one 
that called two others), but problems with lookahead due to recursion 
meant that it was ambiguous. On the face of it, this should be a 
comfortable partial merging (relying on three other rules, of course).

Can anyone suggest a resolution? I'm running 3.1.3 inside Eclipse using 
ANTLR-IDE.

From jimi at temporal-wave.com  Sat May 30 13:10:18 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 30 May 2009 13:10:18 -0700
Subject: [antlr-interest] C-Target Token definitions
In-Reply-To: <4A21826E.6010704@arcor.de>
References: <4A21826E.6010704@arcor.de>
Message-ID: <4A2192AA.40002@temporal-wave.com>

Jochen Wilhelmy wrote:
> Hi Jim,
>
> at first thank you very much for doing great work
> on the C-Target. I recently ported a parser from
> bison to ANTLR3 and it was easy and fun.
> One little thing is problematic in the C-Target:
> all tokens are #defined, therefore pollute the
> global namespace.
>
> Is it possible to prefix all tokens with the grammar
> name and put them into an enum?
> For example the tokens for a Lua grammar would
> look like this:
> enum Toneks
> {
>    LUA_FOR = 5,
>    ...
> };
>
> Another possibility would be to put the tokens into
> the context struct, e.g.
> struct LuaParser_Ctx_struct
> {
> enum Toneks
> {
>   FOR = 5,
>    ...
> };
>  
> };
The problem with enum is that it does not really offer much over #define 
in C and it isn't available on old compilers for embedded systems and so 
on and I want people to be able to the code on just about anything.

The #defines are only used within the context of the include file, and 
in practice all you need do is stick a K in front of any TOKEN name that 
clashes with the system, such as FILE etc. So, make that KFILE and all 
is good.

Basically, all the targets do not attempt to protect you from the target 
itself, so for instance you can't use a parser rule called package in 
the Java target and so on. The problem with doing so is that it is never 
100% correct anyway. Also, when I experimented with this, there was one 
part of the code gen that did not ask the target templates for the token 
name and so it all fell over. That could be fixed I am sure, but in the 
end, I decided that it is better to see the token names without 
obfuscation when debugging the generated C code.

So, basically, what I am saying is that it will be staying as is for the 
foreseeable future ;-)

Jim


PS: Please send questions/bugs to the ANTLR group rather than me personally.


From oliver.zeigermann at gmail.com  Sat May 30 23:12:56 2009
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Sat, 30 May 2009 23:12:56 -0700
Subject: [antlr-interest] ANTLR Conference next week: Still some open slots!
Message-ID: <9da4f4520905302312j10d0f932p2a4c713132a429a3@mail.gmail.com>

Folks!

Next weekend we will have an ANTLR and Stringtemplate conference at
the University of San Francisco:

http://www.antlr.org/wiki/display/ANTLR3/ANTLR+Conference+2009

There still are a couple of open slots. Join us!

See you there!

- Oliver

From bestgembler at hotmail.com  Sat May 30 23:21:19 2009
From: bestgembler at hotmail.com (Kevin Chen)
Date: Sun, 31 May 2009 14:21:19 +0800
Subject: [antlr-interest] I want to throw an exception and stop parse,
 please!
In-Reply-To: <9C3A1BA450EF4A9A876BE527217DFB56@indhulaptop>
References: <COL113-W6058235C53D0B987E4F20BB9550@phx.gbl>
	<062DCD70EE5A444F9E000C2A7B5ABF8E@indhulaptop>
	<COL113-W251E8478D75A283B84BB2EB9550@phx.gbl>
	<9C3A1BA450EF4A9A876BE527217DFB56@indhulaptop>
Message-ID: <COL113-W550BA65C1C37D80B87418EB94F0@phx.gbl>


thanks for your reply!

But, there's no throws in original recover method:

    public void recover(IntStream input, RecognitionException re)

Thus, I can't throw an exception in overriding recover method. :-)

Thanks a lot!

THE
     POWER
             OF
                JAVA













>Ah, forgot. Things changed after the book was written. I 
guess you have to override the following two methods from 
>BaseRecognizer
> 

>void  recover (IntStream input, RecognitionException 
re)
>Object  recoverFromMismatchedSet (IntStream input, 
RecognitionException e, BitSet follow) throws 
RecognitionException

>Cheers, Indhu
 

  /*******************************************************/
/*******************************************************/

>>Thanks for your reply!
>>
>>I cannot find "mismatch" method in "org.antlr.runtime.Parser" and 
  "org.antlr.runtime.BaseRecognizer" both, just found >>"recoverFromMismatchedSet" 
  method in "org.antlr.runtime.BaseRecognizer".      
  :-)
>>
>>My antlr runtime version is 3.1.3.
>>
>>Thanks a 
  lot!     :-)

  

  >>>Two methods of parser (mismatch and 
    recoverFromMismatchedSet) are responsible for auto-recovery and showing 
    >error messages.
    >>> 

    >>>If you want to throw an 
    exception and exit right on the first error you need to override these 
    methods and >just throw 
    the exception instead of handling it.
    >>> 

    >>>Something like 
    this:
    >>> 

    >>>@members 
{

    >>>protected void 
    mismatch(IntStream input, int ttype, BitSet follow)
>>>throws 
    RecognitionException
>>>{
>>>throw 
    new MismatchedTokenException(ttype, input);
>>>}>>>
    >>>public void 
    recoverFromMismatchedSet(IntStream input, RecognitionException e, BitSet 
    follow)>>>
    >>>throws 
    RecognitionException>>>
    >>>{>>>
    >>>throw e;>>>
    >>>}>>> 
    >>>}
>>> 
    

    >>>Cheers, 
  Indhu 
_________________________________________________________________
Show them the way! Add maps and directions to your party invites. 
http://www.microsoft.com/windows/windowslive/products/events.aspx
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090531/88d32203/attachment.html 

From tbender at stud.hs-heilbronn.de  Sun May 31 03:21:53 2009
From: tbender at stud.hs-heilbronn.de (Tilman Bender)
Date: Sun, 31 May 2009 12:21:53 +0200
Subject: [antlr-interest] I want to throw an exception and stop parse,
	please!
In-Reply-To: <COL113-W550BA65C1C37D80B87418EB94F0@phx.gbl>
References: <COL113-W6058235C53D0B987E4F20BB9550@phx.gbl>
	<062DCD70EE5A444F9E000C2A7B5ABF8E@indhulaptop>
	<COL113-W251E8478D75A283B84BB2EB9550@phx.gbl>
	<9C3A1BA450EF4A9A876BE527217DFB56@indhulaptop>
	<COL113-W550BA65C1C37D80B87418EB94F0@phx.gbl>
Message-ID: <F5CB4909-1BC3-4D2B-A981-4178990BEDEF@stud.hs-heilbronn.de>

Hi Kevin,

Yes you can, but it is a bit of a dirty hack:
Make your custom Exception subclass RuntimeException.
This has two effects:

- The compiler will allow you to throw it in the recover method  
allthough recover has no throws declaration (RuntimeExceptions are  
unchecked)
- You cannot directly catch MyException in the code that invoked your  
parser, since the compiler will complain, that none such Exception is  
declared to
be thrown.

So that means:  Subclass RuntimeException and in the code calling your  
parser catch RuntimeException and gracefully exit your compiler/ 
interpreter/whatever.

HTH

Tilman Bender
Student des Software Engineering
Hochschule Heilbronn
tbender at stud.hs-heilbronn.de



Am 31.05.2009 um 08:21 schrieb Kevin Chen:

> But, there's no throws in original recover method:
>
>     public void recover(IntStream input, RecognitionException re)
>
> Thus, I can't throw an exception in overriding recover method. :-)

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090531/c3618b54/attachment.html 

From bestgembler at hotmail.com  Sun May 31 07:52:56 2009
From: bestgembler at hotmail.com (Kevin Chen)
Date: Sun, 31 May 2009 22:52:56 +0800
Subject: [antlr-interest] I want to throw an exception and stop parse,
	please!
In-Reply-To: <F5CB4909-1BC3-4D2B-A981-4178990BEDEF@stud.hs-heilbronn.de>
References: <COL113-W6058235C53D0B987E4F20BB9550@phx.gbl>
	<062DCD70EE5A444F9E000C2A7B5ABF8E@indhulaptop>
	<COL113-W251E8478D75A283B84BB2EB9550@phx.gbl>
	<9C3A1BA450EF4A9A876BE527217DFB56@indhulaptop>
	<COL113-W550BA65C1C37D80B87418EB94F0@phx.gbl> 
	<F5CB4909-1BC3-4D2B-A981-4178990BEDEF@stud.hs-heilbronn.de>
Message-ID: <COL113-W40111AAEC286E3B60EDB25B94F0@phx.gbl>


Hello Tilman Bender, thanks for your tips!      :-)
I clean forgot unchecked exception.... I'm so stupid....     !!!- -
I get it!!!!!!!!!!!   :-)

>Hi Kevin,>
>Yes you can, but it is a bit of a dirty hack:>Make your custom Exception subclass RuntimeException. >This has two effects:>
>- The compiler will allow you to throw it in the recover method allthough recover has no throws declaration (RuntimeExceptions are unchecked)>- You cannot directly catch MyException in the code that invoked your parser, since the compiler will complain, that none such Exception is declared to >be thrown.>
>So that means:  Subclass RuntimeException and in the code calling your parser catch RuntimeException and gracefully exit your compiler/interpreter/whatever.
_________________________________________________________________
Invite your mail contacts to join your friends list with Windows Live Spaces. It's easy!
http://spaces.live.com/spacesapi.aspx?wx_action=create&wx_url=/friends.aspx&mkt=en-us
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090531/a236390a/attachment.html 

From jimi at temporal-wave.com  Sun May 31 09:48:00 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun, 31 May 2009 09:48:00 -0700
Subject: [antlr-interest] I want to throw an exception and stop parse,
 please!
In-Reply-To: <COL113-W550BA65C1C37D80B87418EB94F0@phx.gbl>
References: <COL113-W6058235C53D0B987E4F20BB9550@phx.gbl>	<062DCD70EE5A444F9E000C2A7B5ABF8E@indhulaptop>	<COL113-W251E8478D75A283B84BB2EB9550@phx.gbl>	<9C3A1BA450EF4A9A876BE527217DFB56@indhulaptop>
	<COL113-W550BA65C1C37D80B87418EB94F0@phx.gbl>
Message-ID: <4A22B4C0.7020405@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090531/833c39c6/attachment.html 

From warren-antlr.org at warrenfalk.com  Sun May 31 17:39:59 2009
From: warren-antlr.org at warrenfalk.com (Warren Falk)
Date: Sun, 31 May 2009 20:39:59 -0400
Subject: [antlr-interest] BOF or BOL (Beginning of file/line)
Message-ID: <511bc5ed0905311739l251026eby8c1913dfbbfff2a1@mail.gmail.com>

For a grammar I'm working on, I need the lexer to output a token for
the beginning of (almost) every line.? Adding an emit() to a custom
NEWLINE rule is simple enough, but what is the correct way to emit the
token at the beginning of the file?

Thanks in advance

From cummings at kjchome.homeip.net  Sun May 31 18:02:45 2009
From: cummings at kjchome.homeip.net (Kevin J. Cummings)
Date: Sun, 31 May 2009 21:02:45 -0400
Subject: [antlr-interest] BOF or BOL (Beginning of file/line)
In-Reply-To: <511bc5ed0905311739l251026eby8c1913dfbbfff2a1@mail.gmail.com>
References: <511bc5ed0905311739l251026eby8c1913dfbbfff2a1@mail.gmail.com>
Message-ID: <4A2328B5.3030305@kjchome.homeip.net>

Warren Falk wrote:
> For a grammar I'm working on, I need the lexer to output a token for
> the beginning of (almost) every line.  Adding an emit() to a custom
> NEWLINE rule is simple enough, but what is the correct way to emit the
> token at the beginning of the file?

Make sure that your start rule is only called once, and emit it in an 
action before your first alternative....

> Thanks in advance

-- 
Kevin J. Cummings
kjchome at rcn.com
cummings at kjchome.homeip.net
cummings at kjc386.framingham.ma.us
Registered Linux User #1232 (http://counter.li.org)

From indhu.b at s7software.com  Sun May 31 18:33:11 2009
From: indhu.b at s7software.com (Indhu Bharathi)
Date: Mon, 1 Jun 2009 07:03:11 +0530
Subject: [antlr-interest] BOF or BOL (Beginning of file/line)
In-Reply-To: <511bc5ed0905311739l251026eby8c1913dfbbfff2a1@mail.gmail.com>
References: <511bc5ed0905311739l251026eby8c1913dfbbfff2a1@mail.gmail.com>
Message-ID: <B97D25199A4C4E29A1F160E42C49B1CE@indhulaptop>

Overwride the emit method and check 'getCharPositionInLine' for the tokens 
emited. If the value is zero emit an additional BOL token. This will take 
care of beginning of file too.

Something like this:


java.util.LinkedList<Token> tokenQueue = new java.util.LinkedList<Token>();

public void emit(Token token) {

    // If this token is starting from column zero, emit a BOL token
    if( token.getCharPositionInLine()==0 ) {
        tokenQueue.offer(new ClassicToken(BOL, ""));
    }

    // Emit the actual token
    tokenQueue.offer(token);
    state.token = token;
}

public Token nextToken() {
    super.nextToken();
    if ( tokenQueue.size()==0 ) {
        return Token.EOF_TOKEN;
    }
    return (Token)tokenQueue.poll();
}


- Indhu

----- Original Message ----- 
From: "Warren Falk" <warren-antlr.org at warrenfalk.com>
To: <antlr-interest at antlr.org>
Sent: Monday, June 01, 2009 6:09 AM
Subject: [antlr-interest] BOF or BOL (Beginning of file/line)


For a grammar I'm working on, I need the lexer to output a token for
the beginning of (almost) every line. Adding an emit() to a custom
NEWLINE rule is simple enough, but what is the correct way to emit the
token at the beginning of the file?

Thanks in advance

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: 
http://www.antlr.org/mailman/options/antlr-interest/your-email-address 


