<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] More problems with ANTRL C#3 target and tools
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20More%20problems%20with%20ANTRL%20C%233%20target%20and%20tools&In-Reply-To=%3C92E9AB4D42199B4793CE24E094BAEE070D33CA%40USSCMB03.plt.plantronics.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042984.html">
   <LINK REL="Next"  HREF="042993.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] More problems with ANTRL C#3 target and tools</H1>
    <B>Voelkel, Andy</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20More%20problems%20with%20ANTRL%20C%233%20target%20and%20tools&In-Reply-To=%3C92E9AB4D42199B4793CE24E094BAEE070D33CA%40USSCMB03.plt.plantronics.com%3E"
       TITLE="[antlr-interest] More problems with ANTRL C#3 target and tools">andy.voelkel at plantronics.com
       </A><BR>
    <I>Fri Oct 21 13:09:49 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="042984.html">[antlr-interest] More problems with ANTRL C#3 target and tools
</A></li>
        <LI>Next message: <A HREF="042993.html">[antlr-interest] Should I contribute working example code for	CSharp3 target?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42985">[ date ]</a>
              <a href="thread.html#42985">[ thread ]</a>
              <a href="subject.html#42985">[ subject ]</a>
              <a href="author.html#42985">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Indeed, it seems that the generated code contains no namespace definitions, and the template code generated by your tool contains a namespace declaration which it the name of the project. So two questions:
Does this mean that every C# grammar should have a @namespace declaration?
Why does this not always cause a problem? I've got another project that builds just fine, and it looks just the same. I can understand why you might not have an answer for this.
While we're at it, it seems that with your Visual Studio extensions, the code generation is run, and then the generated files are automagically included in the build for the project, even though they aren't visibly part of the project. Is the mechanism explained anywhere? I can solve problems better when I know how things work under the hood.
Finally, once I get the example code working, is there a place I can submit it so that others can use it?

-          Andy

From: Sam Harwell [mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">sharwell at pixelminegames.com</A>]
Sent: Friday, October 21, 2011 12:55 PM
To: Voelkel, Andy; <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>
Subject: RE: More problems with ANTRL C#3 target and tools

For the first problem, you probably have your grammar and helper files in different namespaces. It looks like you're using a combined grammar, which means you'll want this in the grammar:
@lexer::namespace{Namespace.Goes.Here}
@parser::namespace{Namespace.Goes.Here}
Then you'll use a matching namespace in your partial file.

For the second problem, just declare the rule public as mentioned in section 5.2 of the documentation:
<A HREF="http://www.antlr.org/wiki/display/ANTLR3/Antlr3CSharpReleases">http://www.antlr.org/wiki/display/ANTLR3/Antlr3CSharpReleases</A>

Thanks,
Sam


From: Voelkel, Andy [mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">andy.voelkel at plantronics.com</A>]&lt;mailto:[mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">andy.voelkel at plantronics.com</A>]&gt;
Sent: Friday, October 21, 2011 2:10 PM
To: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>&lt;mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>&gt;
Cc: Sam Harwell (<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">sharwell at pixelminegames.com</A>&lt;mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">sharwell at pixelminegames.com</A>&gt;)
Subject: More problems with ANTRL C#3 target and tools

Hi,
I got over a first round of problems and got a few trivial example working. I then moved on to trying to convert on of the examples from &quot;The Definitive Guide to ANTLR&quot; from Java-compatible to C# compatible:
<A HREF="http://media.pragprog.com/titles/tpantlr/code/tour/eval/Expr.g">http://media.pragprog.com/titles/tpantlr/code/tour/eval/Expr.g</A>
It is a simple calculator example, before he introduces ASTs.
I have run into two problems. The first seems to be related to Sam's visual studio integration tools, and particularly to the use of partial classes. This seems in some cases to cause this error:
K:\Plantronics\Development Sandbox\ANTLR\AntlrTest\AntlrTest3\Program.cs(13,30): error CS1729: 'AntlrTest3.Combined1Lexer' does not contain a constructor that takes 1 arguments
One of the partial class definitions for Combined1Lexer does not indicate that Combined1Lexer inherits from Lexer and that presumably causes the constructor not to be found. If I remove the file containing the partial class definition from the project, that problem goes away. The funny thing is that this problem seems to happen on some projects and not others, which is weird. Another weird thing is that explicitly changing the partial class definition to inherit from Lexer causes a different problem:
K:\Plantronics\Development Sandbox\ANTLR\AntlrTest\AntlrTest3\Combined1.g3.lexer.cs(5,17): error CS0534: 'AntlrTest3.Combined1Lexer' does not implement inherited abstract member 'Antlr.Runtime.Lexer.mTokens()'

The second problem is that the example code in the book contains a call to one of the rules, in my code this looks like this:
Combined1Parser parser = new Combined1Parser(tokens);
// Begin parsing at rule prog
parser.prog();

But the generated code for CombinedParser defines prog() as being a private method, meaning that I can't call it. Can someone explain this?

Just when it looks like I'm gaining traction, I run into more weird stuff.


-    Andy

P.S. I've run this example in Antlrworks with the Java-compatible version, and everything works fine, so these problems all seem to be related to the C# target.



________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">privacy at plantronics.com</A>&lt;mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">privacy at plantronics.com</A>&gt;, and destroy the original transmission and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com&lt;<A HREF="http://www.plantronics.com">http://www.plantronics.com</A>&gt;.

________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">privacy at plantronics.com</A>, and destroy the original transmission and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042984.html">[antlr-interest] More problems with ANTRL C#3 target and tools
</A></li>
	<LI>Next message: <A HREF="042993.html">[antlr-interest] Should I contribute working example code for	CSharp3 target?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42985">[ date ]</a>
              <a href="thread.html#42985">[ thread ]</a>
              <a href="subject.html#42985">[ subject ]</a>
              <a href="author.html#42985">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
