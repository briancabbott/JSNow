<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Best practice to handle Lexer backtracking demand
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Best%20practice%20to%20handle%20Lexer%20backtracking%20demand&In-Reply-To=%3Ci44n3r%24s4s%241%40dough.gmane.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="039440.html">
   <LINK REL="Next"  HREF="039443.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Best practice to handle Lexer backtracking demand</H1>
    <B>Joachim Schrod</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Best%20practice%20to%20handle%20Lexer%20backtracking%20demand&In-Reply-To=%3Ci44n3r%24s4s%241%40dough.gmane.org%3E"
       TITLE="[antlr-interest] Best practice to handle Lexer backtracking demand">jschrod at acm.org
       </A><BR>
    <I>Fri Aug 13 17:13:47 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="039440.html">[antlr-interest] Code Hooks
</A></li>
        <LI>Next message: <A HREF="039443.html">[antlr-interest] Best practice to handle Lexer backtracking	demand
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39442">[ date ]</a>
              <a href="thread.html#39442">[ thread ]</a>
              <a href="subject.html#39442">[ subject ]</a>
              <a href="author.html#39442">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

So today was my 1st ANTLR day, having used PCCTS more than a 15
years ago. So please bear with me; I'm proficient with other
scanner/parser tools and formal language theory, but not with ANTLR.

I learned, from searching the mailing list, that the lexer does not
support backtracking. I.e., the token specification must be
prefix-free. (I didn't find that information in the reference book,
btw. It cost me quite a few hours to discover that it's the root
cause of my problem and dig out the relevant information.) What I
did not found, even after several hours of Google and mailing list
searches, is some pointers for ANTLR best practice how to specify a
lexical grammar for a language where tokens are not prefix-free.

E.g., let's suppose I have the grammar

  name : PRENAME ? text ;
  text : CHAR+ ;

  PRENAME : 'prename' ;
  CHAR : . ;

which should accept the input string &quot;pr&quot;, but doesn't, owing to
the missing lexer backtracking. How is one supposed to formulate
such a grammar in ANTLR? (V3 if it matters.)

Having lex token defs for all chars of all keywords and
constructing the keywords in the parser? After all, the parser
knows how to backtrack. But that's going to be ugly and not really
maintainable in the long run.

Creating prefix tokens for all keywords? I.e., having additional
tokens for 'prenam', 'prena', 'pren', 'pren', and 'pr'? Ugly as
well, IMNSHO.

Using syntactic predicates? I tried that but did not succeed.
AFAIU, they are a parser feature, but I'd need them in the lexer.

If you can point me to a text that explains the best practice for
this (IMHO common) use case, I'd be very happy.

Thanks very much in advance for helping out a newbie to ANTLR,

	Joachim

PS: Part of my confusion was the text of &quot;What is the intended
behavior of the lexer?&quot; at
<A HREF="http://www.antlr.org/wiki/pages/viewpage.action?pageId=4882470.">http://www.antlr.org/wiki/pages/viewpage.action?pageId=4882470.</A> It
implies that the lexer is backtracking and that is really confusing.

-- 
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
Joachim Schrod				Email: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">jschrod at acm.org</A>
Roedermark, Germany

</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="039440.html">[antlr-interest] Code Hooks
</A></li>
	<LI>Next message: <A HREF="039443.html">[antlr-interest] Best practice to handle Lexer backtracking	demand
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39442">[ date ]</a>
              <a href="thread.html#39442">[ thread ]</a>
              <a href="subject.html#39442">[ subject ]</a>
              <a href="author.html#39442">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
