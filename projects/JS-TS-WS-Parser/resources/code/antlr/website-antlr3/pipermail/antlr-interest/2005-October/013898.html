<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Serious Bug when using BitSet generation
	-Forgot: USING ANTLR 2.7.5 !!!!
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Serious%20Bug%20when%20using%20BitSet%20generation%0A%09-Forgot%3A%20USING%20ANTLR%202.7.5%20%21%21%21%21&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013907.html">
   <LINK REL="Next"  HREF="013899.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Serious Bug when using BitSet generation
	-Forgot: USING ANTLR 2.7.5 !!!!</H1>
    <B>Geir Ove Skjaervik</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Serious%20Bug%20when%20using%20BitSet%20generation%0A%09-Forgot%3A%20USING%20ANTLR%202.7.5%20%21%21%21%21&In-Reply-To="
       TITLE="[antlr-interest] Serious Bug when using BitSet generation
	-Forgot: USING ANTLR 2.7.5 !!!!">geiroves at online.no
       </A><BR>
    <I>Sun Oct  9 14:37:25 PDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="013907.html">[antlr-interest] Brainstom: Making ANTLR Studio &amp; Antlr Eclipse
	play together
</A></li>
        <LI>Next message: <A HREF="013899.html">Fwd: [antlr-interest] Re: ANTLR Studio AVAILABLE for DOWNLOAD !!!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13898">[ date ]</a>
              <a href="thread.html#13898">[ thread ]</a>
              <a href="subject.html#13898">[ subject ]</a>
              <a href="author.html#13898">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,
 
Really nobody have a comment on this? It looks like a bug to me, and a
serious one ! At least ANTLR behaves differently when using if() code
then Bitsets, and it is not supposed to do that, at least now without
issuing any warnings that the bitsets may behave wronly, or what?
 
Terrence ?
 
Geir Ove
-----Original Message-----
From: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A>
[mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A>] On Behalf Of Geir Ove
Skjaervik
Sent: 7. oktober 2005 02:57
To: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>
Subject: RE: [antlr-interest] Serious Bug when using BitSet generation
-Forgot: USING ANTLR 2.7.5 !!!!


Forgot: USING ANTLR 2.7.5 !!!!
 
Geir Ove

-----Original Message-----
From: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A>
[mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A>] On Behalf Of Geir Ove
Skjaervik
Sent: 7. oktober 2005 02:44
To: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>
Subject: [antlr-interest] Serious Bug when using BitSet generation


Hello,
 
I seem to have encountered a serious bug when using bitset generation
(the default). I have had to turn it of setting
codeGenBitsetTestThreshold=999;
 
The problem occurs in empty productions preceded by syntactic
predicates. I have this in several bocks as shown below. When using
bitset generation, I get NoViableAltException because of the wrong code
generation whenever a particular block should match an empty production.
Here is an excerpt of the code:
 
(Terrence, If you need samples of the generated code with / without
BitSet generation, I will provide it. Right now I am very tired, just
wanted to post this!)
 
------------------------------------ Start Parser Code Excerpt
-------------------------------------------
 
.....
 
parseProgram returns [String r=null]
 : c0:commonProgramHeader 
   c1:commonTitleDescriptionUsesStoresBlock1
   c2:commonConstantsBlock2
   c3:commonLibraryBlock3
   c4:commonFormulaBlock4
   c5:commonFunctionCallBlock5
   end:RCURLY (SEMI!)? EOF!
 ;
 


commonProgramHeader
 :  (autoGeneratedDateTag)?
  (p:PROGRAM^&lt;AST=no.oss.gos.FunctionNode&gt; pId:ID {isProgram = true;} |
CATEGORY^ cId:ID {isCategory = true;} | CONSTANTS^ gId:ID {isConstants =
true;}) LCURLY
 ; 
 
 
commonTitleDescriptionUsesStoresBlock1
 {
  String programTitle = null, programDescription = null;
  int pos = 0; // rewind position set below
 }
 // We need to terminate the (title)? (description)?
(storesDeclarations)? (usesDeclarations)? construction
 // or we get an ambiguity: Thus, we state that we expect (CONSTANTS! |
LIBRARY! | FORMULAS!) following this optional construct
 // But then we need to rewind before continuing: Thus we use a mark()
and rewind() to do this !
 : {isProgram | isCategory}? (programTitle=title)?
(programDescription=description)? (storesDeclarations)?
(usesDeclarations)? {pos=mark();} (CONSTANTS! | LIBRARY! | FORMULAS!)
   { 
    rewind(pos);
    options.setProgramDescription(programDescription); 
    options.setProgramTitle(programTitle);
   }
 | {isProgram}? ( )         ****************   NOTE : These kind of
empty productions FAIL to match an empty Production when using BITSET
generation !
 | {isCategory}? ( )
 | {isConstants}?   ( )
 ;
 
commonConstantsBlock2
 : {isCategory}? constantDeclarations
 | {isCategory}? ( )  
 | {isConstants}? constantDeclarationsList
 | {isProgram}? ( )
 ;
 
commonLibraryBlock3
 : {isCategory}? libraryDeclarations
 | {isCategory}? ( )  
 | {isProgram}?  ( ) 
 | {isConstants}? ( ) 
 ;
 
commonFormulaBlock4
 : {isProgram}? formulaDeclarations
 | {isCategory}? formulaDeclarations
 | {isConstants}? ( ) 
 ;
 
commonFunctionCallBlock5
 : {isProgram}? mainCall SEMI!   
 | {isCategory}? ( ) 
 | {isConstants}? ( )
 ; 
 
.........
 
 

------------------------------------ End Parser Code Excerpt
-------------------------------------------
 
 
regards

Geir Ove Skjaervik
Objective Software Solutions
Norway
Phone: Int+907-48-869
Fax: Int+47-6988-5947
E-mail: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">objective.software at online.no</A>
WEB: <A HREF="http://objective.bitfikler.com/">http://objective.bitfikler.com/</A>

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://www.antlr.org/pipermail/antlr-interest/attachments/20051009/268021c8/attachment.html">http://www.antlr.org/pipermail/antlr-interest/attachments/20051009/268021c8/attachment.html</A>
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013907.html">[antlr-interest] Brainstom: Making ANTLR Studio &amp; Antlr Eclipse
	play together
</A></li>
	<LI>Next message: <A HREF="013899.html">Fwd: [antlr-interest] Re: ANTLR Studio AVAILABLE for DOWNLOAD !!!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13898">[ date ]</a>
              <a href="thread.html#13898">[ thread ]</a>
              <a href="subject.html#13898">[ subject ]</a>
              <a href="author.html#13898">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
