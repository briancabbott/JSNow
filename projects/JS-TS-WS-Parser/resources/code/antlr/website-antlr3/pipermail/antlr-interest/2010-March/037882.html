<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Using previously matched parser rule in decision making
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Using%20previously%20matched%20parser%20rule%20in%0A%20decision%20making&In-Reply-To=%3C4B94AF8B.7030305%40googlemail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037881.html">
   <LINK REL="Next"  HREF="037886.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Using previously matched parser rule in decision making</H1>
    <B>Kieran Simpson</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Using%20previously%20matched%20parser%20rule%20in%0A%20decision%20making&In-Reply-To=%3C4B94AF8B.7030305%40googlemail.com%3E"
       TITLE="[antlr-interest] Using previously matched parser rule in decision making">kierans777 at gmail.com
       </A><BR>
    <I>Mon Mar  8 00:04:27 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="037881.html">[antlr-interest] Using previously matched parser rule in	decision making
</A></li>
        <LI>Next message: <A HREF="037886.html">[antlr-interest] Using previously matched parser rule in	decision making
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37882">[ date ]</a>
              <a href="thread.html#37882">[ thread ]</a>
              <a href="subject.html#37882">[ subject ]</a>
              <a href="author.html#37882">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> What Jim is suggesting is something like this
</I>&gt;<i>
</I>&gt;<i> ruleA: ruleB[true];
</I>&gt;<i>
</I>&gt;<i> ruleD: ruleB[false];
</I>&gt;<i>
</I>&gt;<i> ruleB[boolean isRuleA]:
</I>&gt;<i>          {isRuleA}?  .....
</I>&gt;<i>          |      .....
</I>&gt;<i> ;
</I>&gt;<i>
</I>&gt;<i> Usage of semantic predicates. But i think there is an issue with that.
</I>&gt;<i> From ruleA / ruleD, if you decide to do a look ahead like LA(n), and
</I>&gt;<i> if that lookahead goes to B, then this won't carry the boolean
</I>&gt;<i> parameter and you might face some issues and the error thrown will not
</I>&gt;<i> be intuitive.
</I>&gt;<i>
</I>You are correct Gokulakannan.  I tried the semantic predicate approach
as well (just to see if it was a better approach) and in some of the
&quot;synpred fragment&quot; functions generated by the C target, I got compiler
errors as the functions was trying to use the rule parameter (in this
example, isRuleA) when the rule argument wasn't passed to the fragment
function.  The fragment function didn't even declare a parameter in the
signature to match the rule parameters.  I eventually used a combination
of parameter passing and target language if conditions.  It didn't add
to much to the grammar.
&gt;<i> Ideal way according to me is
</I>&gt;<i>
</I>&gt;<i> ruleA: ruleB_A;
</I>&gt;<i>
</I>&gt;<i> ruleD: ruleB_D;
</I>&gt;<i>
</I>&gt;<i> ruleB_A :....;
</I>&gt;<i>
</I>&gt;<i> ruleB_D : ....;
</I>&gt;<i>
</I>&gt;<i> If there are lot of things that are common, factorise them as a
</I>&gt;<i> seperate rule / seperate actions. Hope my suggestion was helpful.
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i> Gokul.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Mon, Mar 8, 2010 at 8:55 AM, Kieran Simpson &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">kierans777 at gmail.com</A>
</I>&gt;<i> &lt;mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">kierans777 at gmail.com</A>&gt;&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>     Thanks for the suggestions.
</I>&gt;<i>
</I>&gt;<i>     I had considered the parameter approach, I was curious to know if
</I>&gt;<i>     there
</I>&gt;<i>     was a smarter way.
</I>&gt;<i>
</I>&gt;<i>     John B. Brodie wrote:
</I>&gt;<i>     &gt; Greetings!
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt; On Mon, 2010-03-08 at 13:50 +1100, Kieran Simpson wrote:
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;&gt; I have
</I>&gt;<i>     &gt;&gt;
</I>&gt;<i>     &gt;&gt; ruleA: ruleB;
</I>&gt;<i>     &gt;&gt;
</I>&gt;<i>     &gt;&gt; ruleC: ruleB;
</I>&gt;<i>     &gt;&gt;
</I>&gt;<i>     &gt;&gt; ruleB: ruleD;
</I>&gt;<i>     &gt;&gt;
</I>&gt;<i>     &gt;&gt; In ruleB I want to different target language actions to execute
</I>&gt;<i>     based on
</I>&gt;<i>     &gt;&gt; whether it was ruleA or ruleC that was previously matched.  If my
</I>&gt;<i>     &gt;&gt; understanding of syntatic/semantic predicates is correct, they
</I>&gt;<i>     only look
</I>&gt;<i>     &gt;&gt; forwards, not backwards.
</I>&gt;<i>     &gt;&gt;
</I>&gt;<i>     &gt;&gt; Is there a way (without refactoring the grammar) to in rule B
</I>&gt;<i>     know which
</I>&gt;<i>     &gt;&gt; rule it was invoked from (A or C) and make decisions accordingly?
</I>&gt;<i>     &gt;&gt;
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt; Off the top of my head, pass a parameter.....
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt; ruleA : ruleB[true];
</I>&gt;<i>     &gt; ruleC : ruleB[false];
</I>&gt;<i>     &gt; ruleB [boolean fromA] : ruleD
</I>&gt;<i>     &gt;   { if( fromA )then
</I>&gt;<i>     &gt;        ....do this stuff....
</I>&gt;<i>     &gt;     else
</I>&gt;<i>     &gt;        ....do that stuff....
</I>&gt;<i>     &gt;    };
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt; (the above probably is not precisely the correct meta-syntax, but
</I>&gt;<i>     &gt; hopefully you get the idea...)
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;    -jbb
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;
</I>&gt;<i>
</I>&gt;<i>     List: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">http://www.antlr.org/mailman/listinfo/antlr-interest</A>
</I>&gt;<i>     Unsubscribe:
</I>&gt;<i>     <A HREF="http://www.antlr.org/mailman/options/antlr-interest/your-email-address">http://www.antlr.org/mailman/options/antlr-interest/your-email-address</A>
</I>&gt;<i>
</I>&gt;<i>
</I></PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037881.html">[antlr-interest] Using previously matched parser rule in	decision making
</A></li>
	<LI>Next message: <A HREF="037886.html">[antlr-interest] Using previously matched parser rule in	decision making
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37882">[ date ]</a>
              <a href="thread.html#37882">[ thread ]</a>
              <a href="subject.html#37882">[ subject ]</a>
              <a href="author.html#37882">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
