<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Fwd: De-emphasizing tree grammars?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Fwd%3A%20De-emphasizing%20tree%20grammars%3F&In-Reply-To=%3CCAE0rgyxxKar%3D2Q4nfC9YQqa72W6H6J%2BebuvScqZgUTQKQa-Pww%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="043531.html">
   <LINK REL="Next"  HREF="043532.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Fwd: De-emphasizing tree grammars?</H1>
    <B>Raju Bitter</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Fwd%3A%20De-emphasizing%20tree%20grammars%3F&In-Reply-To=%3CCAE0rgyxxKar%3D2Q4nfC9YQqa72W6H6J%2BebuvScqZgUTQKQa-Pww%40mail.gmail.com%3E"
       TITLE="[antlr-interest] Fwd: De-emphasizing tree grammars?">r.bitter.mailinglists at googlemail.com
       </A><BR>
    <I>Fri Dec 23 03:12:27 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="043531.html">[antlr-interest] Fwd:  De-emphasizing tree grammars?
</A></li>
        <LI>Next message: <A HREF="043532.html">[antlr-interest] how to use my own lexer?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43535">[ date ]</a>
              <a href="thread.html#43535">[ thread ]</a>
              <a href="subject.html#43535">[ subject ]</a>
              <a href="author.html#43535">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Interesting, Galvin. Is there any document available describing the
approach, and the problems you ran into with the ANTLR syntax tree
approach?

And are you talking about these classes?
<A HREF="https://github.com/ceylon/ceylon-spec/tree/master/src/com/redhat/ceylon/compiler/typechecker/tree">https://github.com/ceylon/ceylon-spec/tree/master/src/com/redhat/ceylon/compiler/typechecker/tree</A>

Oh, and regarding Lisp and Java: Did you check Clojure?
<A HREF="http://clojure.org/">http://clojure.org/</A> That's a Lisp written in Java. :-)

- Raju

On Fri, Dec 23, 2011 at 6:01 AM, Gavin King &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">gavin.king at gmail.com</A>&gt; wrote:
&gt;<i> Ooops, I meant to send this to the list rather than to Terence
</I>&gt;<i> privately. Been happening to me a lot recently since gmail changed
</I>&gt;<i> their UI. Grrr.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ---------- Forwarded message ----------
</I>&gt;<i> From: Gavin King &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">gavin.king at gmail.com</A>&gt;
</I>&gt;<i> Date: Tue, Dec 20, 2011 at 3:51 PM
</I>&gt;<i> Subject: Re: [antlr-interest] De-emphasizing tree grammars?
</I>&gt;<i> To: Terence Parr &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">parrt at cs.usfca.edu</A>&gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Tue, Dec 20, 2011 at 3:25 PM, Terence Parr &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">parrt at cs.usfca.edu</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> The AST/ tree grammar mechanism also is something I've been pushing for 20 years
</I>&gt;&gt;<i> without success. &#160;I started out in the compilers world where you really do need an AST,
</I>&gt;&gt;<i> to avoid all of the noise of rule names inside your tree.
</I>&gt;<i>
</I>&gt;<i> So here's a little bit of feedback on that. I've used ANTLR very
</I>&gt;<i> seriously on two projects now, first for the JPA-QL to SQL translation
</I>&gt;<i> of the Hibernate ORM library, and now on the compiler and IDE for the
</I>&gt;<i> Ceylon programming language.
</I>&gt;<i>
</I>&gt;<i> For the query translator in Hibernate, we used a 3-stage translator
</I>&gt;<i> (parser/tree builder, followed by tree transformer, followed by
</I>&gt;<i> renderer) where the second two grammars were tree grammars. This
</I>&gt;<i> worked out somewhat well, though debugging was quite difficult and
</I>&gt;<i> managing less 1-to-1 type transformations was very hard. We were
</I>&gt;<i> successful, but I was left doubting that tree grammars had really made
</I>&gt;<i> our life easier.
</I>&gt;<i>
</I>&gt;<i> For the Ceylon compiler, I did not even try to use a tree grammar,
</I>&gt;<i> because for building a real compiler you want a proper typesafe syntax
</I>&gt;<i> tree, not a bunch of untyped tuples. Java isn't lisp, and if you're
</I>&gt;<i> trying to write lisp in Java you're unlikely to have much success ;-)
</I>&gt;<i> I did initially try letting ANTLR build its untyped tree for
</I>&gt;<i> subsequent translation to a typed syntax tree, but this approach was a
</I>&gt;<i> failure for two reasons:
</I>&gt;<i>
</I>&gt;<i> 1. it's an additional unnecessary step in the pipeline, and, much more
</I>&gt;<i> importantly,
</I>&gt;<i> 2. ANTLR has an awful habit of just throwing away whole branches of
</I>&gt;<i> its syntax tree when some rule fails to match far down the tree.
</I>&gt;<i>
</I>&gt;<i> In a real compiler, you *never* want to throw away things the
</I>&gt;<i> programmer typed in. That's especially true if, as in our case, the
</I>&gt;<i> compiler is also going to be the typechecker of your IDE. IDEs can
</I>&gt;<i> simply never, ever throw away input, no matter how many syntax errors
</I>&gt;<i> it has. Indeed, the hardest &quot;bit&quot; of building an IDE is doing stuff
</I>&gt;<i> like auto-completion correctly while the user is typing, when you're
</I>&gt;<i> almost guaranteed that the text is not well-formed.
</I>&gt;<i>
</I>&gt;<i> So basically my conclusion after all this is that ANTLRs tree stuff is
</I>&gt;<i> pretty much a misfeature. It's cute for simpler problems, but once you
</I>&gt;<i> get beyond hello world, you're better off just writing your own syntax
</I>&gt;<i> tree using Java. Which is what I've done in Ceylon.
</I>&gt;<i>
</I>&gt;<i> Now, if ANTLR was able to produce a *typesafe* syntax tree, and not
</I>&gt;<i> keep throwing bits of it away all the time, then that would be
</I>&gt;<i> something really useful...
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Gavin King
</I>&gt;<i> <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">gavin.king at gmail.com</A>
</I>&gt;<i> <A HREF="http://in.relation.to/Bloggers/Gavin">http://in.relation.to/Bloggers/Gavin</A>
</I>&gt;<i> <A HREF="http://ceylon-lang.org">http://ceylon-lang.org</A>
</I>&gt;<i> <A HREF="http://hibernate.org">http://hibernate.org</A>
</I>&gt;<i> <A HREF="http://seamframework.org">http://seamframework.org</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Gavin King
</I>&gt;<i> <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">gavin.king at gmail.com</A>
</I>&gt;<i> <A HREF="http://in.relation.to/Bloggers/Gavin">http://in.relation.to/Bloggers/Gavin</A>
</I>&gt;<i> <A HREF="http://ceylon-lang.org">http://ceylon-lang.org</A>
</I>&gt;<i> <A HREF="http://hibernate.org">http://hibernate.org</A>
</I>&gt;<i> <A HREF="http://seamframework.org">http://seamframework.org</A>
</I>&gt;<i>
</I>&gt;<i> List: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">http://www.antlr.org/mailman/listinfo/antlr-interest</A>
</I>&gt;<i> Unsubscribe: <A HREF="http://www.antlr.org/mailman/options/antlr-interest/your-email-address">http://www.antlr.org/mailman/options/antlr-interest/your-email-address</A>
</I></PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="043531.html">[antlr-interest] Fwd:  De-emphasizing tree grammars?
</A></li>
	<LI>Next message: <A HREF="043532.html">[antlr-interest] how to use my own lexer?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43535">[ date ]</a>
              <a href="thread.html#43535">[ thread ]</a>
              <a href="subject.html#43535">[ subject ]</a>
              <a href="author.html#43535">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
