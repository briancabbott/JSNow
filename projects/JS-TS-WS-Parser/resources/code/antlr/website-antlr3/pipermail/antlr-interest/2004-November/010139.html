<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] summary of trip to Montreal/SableCC land
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20summary%20of%20trip%20to%20Montreal/SableCC%20land&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010138.html">
   <LINK REL="Next"  HREF="010140.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] summary of trip to Montreal/SableCC land</H1>
    <B>Alexey Demakov</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20summary%20of%20trip%20to%20Montreal/SableCC%20land&In-Reply-To="
       TITLE="[antlr-interest] summary of trip to Montreal/SableCC land">demakov at ispras.ru
       </A><BR>
    <I>Mon Nov 15 09:07:55 PST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="010138.html">[antlr-interest] summary of trip to Montreal/SableCC land
</A></li>
        <LI>Next message: <A HREF="010140.html">[antlr-interest] summary of trip to Montreal/SableCC land
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10139">[ date ]</a>
              <a href="thread.html#10139">[ thread ]</a>
              <a href="subject.html#10139">[ subject ]</a>
              <a href="author.html#10139">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
From: &quot;Terence Parr&quot; &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">parrt at cs.usfca.edu</A>&gt;
&gt;<i> On Nov 15, 2004, at 7:09 AM, Alexey Demakov wrote:
</I>&gt;<i> &gt; From: &quot;Terence Parr&quot; &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">parrt at cs.usfca.edu</A>&gt;
</I>&gt;<i> &gt;&gt; ... As for
</I>&gt;<i> &gt;&gt; tree construction, he builds trees that are &quot;type safe&quot;; that is, they
</I>&gt;<i> &gt;&gt; conform to a particular structure specified in a &quot;tree grammar&quot;
</I>&gt;<i> &gt;&gt; section.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 561 generated files in 'node' package for Java 1.1 and
</I>&gt;<i> &gt; 409 for Simple C - imho, trees generated by SableCC are not very handy.
</I>&gt;<i> 
</I>&gt;<i> Yep, I don't like the visitor mechanism as I discussed with Etienne 
</I>&gt;<i> and, like jjtree for javacc, I don't like generating a class per node.  
</I>&gt;<i> That is pretty gross.  
</I>
Manually developed Java tree has about 150 nodes. I think it is about equivalent
to tree grammar size for ANTLR. So, I don't like implementation, not the idea itself.
Bad implementation can kill any idea :)

&gt;<i> First, people are so in love with objects that 
</I>&gt;<i> EVERYTHING must be a class.  It's amazing we got any work done before 
</I>&gt;<i> oo, right? ;)
</I>
Personally, I think that in Java vs C battle automatic memory management  
is more important than objects :)

&gt;<i> Also, when doing translations, it is the tree structure 
</I>&gt;<i> that is important.  
</I>
Agree. So, let's specify it! :)

&gt;<i> Occasionally, you need special info at particular 
</I>&gt;<i> nodes, but this is really just a set of attributes (mitchell is saying 
</I>&gt;<i> this should be a dynamic list like HashMap or something).  You do NOT 
</I>
Yes, there should be possible to specify additional attributes for particalar node,
and should be possible to have dynamic attributes because we don't know beforehand
what users of tree structure want. 

&gt;<i> need to make this a separate object type just to access an overridden 
</I>&gt;<i> method like &quot;action()&quot; because it is the action location in the grammar 
</I>
The main reason to have separate class for each node is reliability.
With type checking you can be sure that every tree that can be constructed
corresponds to syntactically correct input program.
After all, tree can be constructed not only by parser, but from XML serialization or
from another tree after some transformation. In this case we will notice
corrupted tree only at run-time.

&gt;<i> that gives you the proper &quot;event trigger&quot;.  It has context (where it 
</I>&gt;<i> lives in a rule) and you can have actions communicate easily whereas 
</I>&gt;<i> visitor actions are like &quot;incommunicato islands&quot;.  This is why Etienne 
</I>
You have access to children and parent of node that is parameter of visitor action.
What else do you need? Do you mean that it is not easy to locate node
within parent's children? But I don't remember such situation in real life.
In any case, context information can be passed through fields of visitor.
It solves the problem.

&gt;<i> particularly liked my dynamically-scoped attributes thingy (although I 
</I>&gt;<i> think I need to give Gary Funck credit; he asked for these back in my 
</I>&gt;<i> SORCERER days a decade ago--i think he has trouble remembering if he 
</I>&gt;<i> invented them).  Visitors find it VERY difficult to pass in context; 
</I>&gt;<i> can't use parameters, right?  You'd have to make each action method 
</I>&gt;<i> have the combined set of parameters you need to pass.
</I>
In fact, I don't think that visitor is the best solution.
Recall the meaning of visitor pattern - to have virtual methods for tree nodes
without modification of node classes. There is another solution for this problem
- AOP-like powerful generation technics that allow to generate what you need
from clear description.

Clear description is important - how to reveal tree structure to team developers?

&gt;<i> Anyway, I should really flesh all this out in an article--and describe 
</I>&gt;<i> why you need tree grammars more to get people using them.  First, I 
</I>&gt;<i> suppose I need to get a less buggy tree parser going ;)
</I>
Worth to read :)

Btw, I begin to understand that separate tree description is closer to ANTLR
tree parsers than I thought before...
But what if I need more that one pass over tree - should I repeat tree grammar
in each tree walker? I don't like to have same info more than in one place.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: <A HREF="http://treedl.sourceforge.net">http://treedl.sourceforge.net</A>
RedVerst Group: <A HREF="http://www.unitesk.com">http://www.unitesk.com</A>




 
Yahoo! Groups Links

&lt;*&gt; To visit your group on the web, go to:
    <A HREF="http://groups.yahoo.com/group/antlr-interest/">http://groups.yahoo.com/group/antlr-interest/</A>

&lt;*&gt; To unsubscribe from this group, send an email to:
    <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-unsubscribe at yahoogroups.com</A>

&lt;*&gt; Your use of Yahoo! Groups is subject to:
    <A HREF="http://docs.yahoo.com/info/terms/">http://docs.yahoo.com/info/terms/</A>
 



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010138.html">[antlr-interest] summary of trip to Montreal/SableCC land
</A></li>
	<LI>Next message: <A HREF="010140.html">[antlr-interest] summary of trip to Montreal/SableCC land
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10139">[ date ]</a>
              <a href="thread.html#10139">[ thread ]</a>
              <a href="subject.html#10139">[ subject ]</a>
              <a href="author.html#10139">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
