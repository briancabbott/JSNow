<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Comment rule matches links
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Comment%20rule%20matches%20links&In-Reply-To=%3C20080825190153.15AD33522B5%40www.antlr.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030331.html">
   <LINK REL="Next"  HREF="030333.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Comment rule matches links</H1>
    <B>Gavin Lambert</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Comment%20rule%20matches%20links&In-Reply-To=%3C20080825190153.15AD33522B5%40www.antlr.org%3E"
       TITLE="[antlr-interest] Comment rule matches links">antlr at mirality.co.nz
       </A><BR>
    <I>Mon Aug 25 12:01:43 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="030331.html">[antlr-interest] Comment rule matches links
</A></li>
        <LI>Next message: <A HREF="030333.html">[antlr-interest] AST Translation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30335">[ date ]</a>
              <a href="thread.html#30335">[ thread ]</a>
              <a href="subject.html#30335">[ subject ]</a>
              <a href="author.html#30335">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>At 04:15 26/08/2008, Jenny Balfer wrote:
 &gt;I am using the &quot;standard&quot; rule for single line comments:
 &gt;
 &gt;COMMENT : '//' (options {greedy=false;}: .)* ('\n'|'r')
 &gt;          { skip(); }
 &gt;        ;
 &gt;
 &gt;This works pretty well, until I have things like that in my 
code:
 &gt;
 &gt;aString = &quot;<A HREF="http://someUrl.com&quot;;">http://someUrl.com&quot;;</A>
 &gt;
 &gt;Because the url contains two slashes, the lexer treats 
everything
 &gt;from then on as a comment and skips the rest of the line; only
 &gt;aString = &quot;http: remains.
 &gt;
 &gt;I tried to fight this problem by adding a rule that matches 
every
 &gt;string before the comment rule:
 &gt;
 &gt;STRING : '&quot;' (options {greedy=false;} .)* '&quot;'
 &gt;       ;
 &gt;
 &gt;This temporarily solved the problem, but brought up further 
issues,
 &gt;so I would really appreciate to get along without it. Does 
anyone
 &gt;have a better solution to prevent my lexer from skipping urls 
just
 &gt;because they contain slashes?

Using a STRING rule is probably the best way to do this.  (And not 
just for this sort of problem -- generally you want strings to be 
recognised as single entities anyway, instead of random sequences 
of other tokens, and you need to preserve whitespace.)

While it might be possible to ignore //s within quotes via other 
means (eg. semantic predicates), it'd be quite painful and would 
still give you malformed strings in other cases.

What kind of &quot;further issues&quot; is it causing?

</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030331.html">[antlr-interest] Comment rule matches links
</A></li>
	<LI>Next message: <A HREF="030333.html">[antlr-interest] AST Translation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30335">[ date ]</a>
              <a href="thread.html#30335">[ thread ]</a>
              <a href="subject.html#30335">[ subject ]</a>
              <a href="author.html#30335">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
