<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] TestRig: use with package-ized  lexer/parser?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20TestRig%3A%20use%20with%20package-ized%20%20lexer/parser%3F&In-Reply-To=%3C20121113051207.BYJG9100.fed1rmfepo103.cox.net%40fed1rmimpo109%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="045680.html">
   <LINK REL="Next"  HREF="045687.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] TestRig: use with package-ized  lexer/parser?</H1>
    <B>Graham Wideman</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20TestRig%3A%20use%20with%20package-ized%20%20lexer/parser%3F&In-Reply-To=%3C20121113051207.BYJG9100.fed1rmfepo103.cox.net%40fed1rmimpo109%3E"
       TITLE="[antlr-interest] TestRig: use with package-ized  lexer/parser?">gwlist at grahamwideman.com
       </A><BR>
    <I>Mon Nov 12 21:11:59 PST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="045680.html">[antlr-interest] TestRig: use with package-ized lexer/parser?
</A></li>
        <LI>Next message: <A HREF="045687.html">[antlr-interest] ANTLRWorks 2, can't create new project
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45681">[ date ]</a>
              <a href="thread.html#45681">[ thread ]</a>
              <a href="subject.html#45681">[ subject ]</a>
              <a href="author.html#45681">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>... and a solution to the outstanding NetBeans (possibly other IDEs) problem: How to supply an application launched from NetBeans IDE with a particular current working directory, _and_ classpath that includes that cwd.  

This is needed to run/debug TestRig (or custom version thereof), which relies on cwd to find the lexer/grammar classes and dynamically load them. 

Basically, this requires

a) the IDE setting for the runtime working directory is set to the directory containing the grammar classes (or the root of their class directory tree, if using packages), and...

b) include &quot;current working directory&quot; in the IDE-constructed runtime classpath.

But how to accomplish (b)?

The trick is to include the Ant/NB variable work.dir in the list of runtime libraries.  There doesn't seem to be a way to set this up from the NetBeans UI, but it can be accomplished by hand editing project.properties run.classpath item, similar to the following:

run.classpath=\
    ${javac.classpath}:\
    ${build.classes.dir}:\
    ${work.dir}

Presumably also applies to run.test.classpath.

The result of this is that when NB/Ant invokes java to run the program, NB/Ant assembles a classpath that includes the current working directory setting. 

And FWIW, this can be examined by setting NetBeans Tools &gt; Options &gt; Java &gt; Ant tab &gt; Verbosity Level to Verbose (which displays the runtime java command line in the Output window).

-- Graham

</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="045680.html">[antlr-interest] TestRig: use with package-ized lexer/parser?
</A></li>
	<LI>Next message: <A HREF="045687.html">[antlr-interest] ANTLRWorks 2, can't create new project
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45681">[ date ]</a>
              <a href="thread.html#45681">[ thread ]</a>
              <a href="subject.html#45681">[ subject ]</a>
              <a href="author.html#45681">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
