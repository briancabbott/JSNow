From hubdog at gmail.com  Sat Sep  1 08:16:17 2007
From: hubdog at gmail.com (Hub Dog)
Date: Sun, 2 Sep 2007 00:16:17 +0900
Subject: [antlr-interest] One question about MismatchedSetException
Message-ID: <4de0b9580709010816v66d058fcwa6a18e84d2516416@mail.gmail.com>

Dear friends.

          I just found a problem in source generated by antlr 3 . Antlr 3
generates MismatchedSetException construtor source as following
style:
         mse =   new MismatchedSetException(null,input);
 The expecting bitset parameter passed to MismatchedSetException constructor
was always null. That means I can not get error message from expecting
bitset. In antlr2  I can get error message such as "expecting one of ('a',
'b', ....), found 'd'", but now I can only get error message such as
"mismatched input abc expecting set null".

       Is the MismatchedSetException constructor part still under
development or I missed something?

       Thanks in advance

best regards
ma lifang
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070902/70716f0f/attachment.html 

From parrt at cs.usfca.edu  Sat Sep  1 08:48:30 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 1 Sep 2007 08:48:30 -0700
Subject: [antlr-interest] One question about MismatchedSetException
In-Reply-To: <4de0b9580709010816v66d058fcwa6a18e84d2516416@mail.gmail.com>
References: <4de0b9580709010816v66d058fcwa6a18e84d2516416@mail.gmail.com>
Message-ID: <49EE75B5-AF6D-425A-8F97-002F5EF0E65F@cs.usfca.edu>


On Sep 1, 2007, at 8:16 AM, Hub Dog wrote:

> Dear friends.
>
>           I just found a problem in source generated by antlr 3 .  
> Antlr 3 generates MismatchedSetException construtor source as  
> following
> style:
>          mse =   new MismatchedSetException(null,input);
>  The expecting bitset parameter passed to MismatchedSetException  
> constructor was always null. That means I can not get error message  
> from expecting bitset. In antlr2  I can get error message such as  
> "expecting one of ('a', 'b', ....), found 'd'", but now I can only  
> get error message such as "mismatched input abc expecting set null".
>
>        Is the MismatchedSetException constructor part still under  
> development or I missed something?
>

Hi. known issue. I think i have a bug logged already. sorry.
Ter


From hubdog at gmail.com  Sat Sep  1 09:05:48 2007
From: hubdog at gmail.com (Hub Dog)
Date: Sun, 2 Sep 2007 01:05:48 +0900
Subject: [antlr-interest] One question about MismatchedSetException
In-Reply-To: <49EE75B5-AF6D-425A-8F97-002F5EF0E65F@cs.usfca.edu>
References: <4de0b9580709010816v66d058fcwa6a18e84d2516416@mail.gmail.com>
	<49EE75B5-AF6D-425A-8F97-002F5EF0E65F@cs.usfca.edu>
Message-ID: <4de0b9580709010905s1e1fbff8w83e01475db088802@mail.gmail.com>

Thanks for your reply, by the way one another request, it is possible to add
some comment to
generated Bitset constructor source like antlr2 , you know it is very
difficult to extract token information from a long number array.

for example
const unsigned long SqliteParser::_tokenSet_44_data_[] = { 1073741824UL,
1342963913UL, 2355430344UL, 1728054066UL, 29360129UL, 3257926657UL,
200540416UL, 872419712UL, 12288UL, 16UL, 0UL, 0UL, 0UL, 0UL, 0UL, 0UL, 0UL,
0UL, 0UL, 0UL };
// "abort" "after" "analyze" "asc" "attach" "before" "begin" "cascade"
// "cast" "conflict" "cross" "current_date" "current_time"
"current_timestamp"
// "database" "deferred" "desc" "detach" "end" "each" "exclusive" "explain"
// "fail" "for" "full" "glob" "if" "ignore" "immediate" "initially" "inner"
// "instead" "key" "left" "like" "match" "natural" "of" "offset" "outer"
// "plan" "pragma" "query" "raise" "regexp" "reindex" "rename" "replace"
// "restrict" "right" "row" "temp" "temporary" "trigger" "vacuum" "view"
// "virtual" ID STRING LP
const BitSet SqliteParser::_tokenSet_44(_tokenSet_44_data_,20);

best regards
ma lifang

On 9/2/07, Terence Parr <parrt at cs.usfca.edu> wrote:
>
>
> On Sep 1, 2007, at 8:16 AM, Hub Dog wrote:
>
> > Dear friends.
> >
> >           I just found a problem in source generated by antlr 3 .
> > Antlr 3 generates MismatchedSetException construtor source as
> > following
> > style:
> >          mse =   new MismatchedSetException(null,input);
> >  The expecting bitset parameter passed to MismatchedSetException
> > constructor was always null. That means I can not get error message
> > from expecting bitset. In antlr2  I can get error message such as
> > "expecting one of ('a', 'b', ....), found 'd'", but now I can only
> > get error message such as "mismatched input abc expecting set null".
> >
> >        Is the MismatchedSetException constructor part still under
> > development or I missed something?
> >
>
> Hi. known issue. I think i have a bug logged already. sorry.
> Ter
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070902/c726e008/attachment.html 

From felix at belugalounge.net  Sat Sep  1 14:01:30 2007
From: felix at belugalounge.net (Felix Schmid)
Date: Sat, 01 Sep 2007 23:01:30 +0200
Subject: [antlr-interest] Parsing byte streams
Message-ID: <46D9D32A.2000507@belugalounge.net>

Hi,

is it possible to parse byte streams, e.g. class files, using ANTLR? I 
think I have seen the topic mentioned somewhere, maybe in the wiki, but 
can't find it now....


Related to this, if it is possible, how could I skip over padding bytes 
while parsing? Say, the binary stream looks something like this:

1 byte length of value in 4-byte words (incl. padding) || 1 byte real 
value length in bytes || value        (|| means concatenation)

so if 'value' was 'aa00aa00aa', the byte stream would look something 
like '0205aa00aa00aa000000...' and the parser had to be clever enough to 
understand that from the 8 bytes following the first byte, only the 
first 5 are the real value and the 3 bytes at the end have to be skipped 
(to hit the first byte of the next segment)....Could it be done with ANTLR?

thanks for your attention,

felix

From jaluber at gmx.de  Sat Sep  1 14:49:41 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Sat, 01 Sep 2007 23:49:41 +0200
Subject: [antlr-interest] Parsing byte streams
In-Reply-To: <46D9D32A.2000507@belugalounge.net>
References: <46D9D32A.2000507@belugalounge.net>
Message-ID: <46D9DE75.5060504@gmx.de>

Felix Schmid wrote:
> Hi,
> 
> is it possible to parse byte streams, e.g. class files, using ANTLR? I
> think I have seen the topic mentioned somewhere, maybe in the wiki, but
> can't find it now....
> 
> 
> Related to this, if it is possible, how could I skip over padding bytes
> while parsing? Say, the binary stream looks something like this:
> 
> 1 byte length of value in 4-byte words (incl. padding) || 1 byte real
> value length in bytes || value        (|| means concatenation)
> 
> so if 'value' was 'aa00aa00aa', the byte stream would look something
> like '0205aa00aa00aa000000...' and the parser had to be clever enough to
> understand that from the 8 bytes following the first byte, only the
> first 5 are the real value and the 3 bytes at the end have to be skipped
> (to hit the first byte of the next segment)....Could it be done with ANTLR?
> 
> thanks for your attention,
> 
> felix
> 

Well, the last time someone asked for this, he was told to write a
binary parser in his language of his choice. ANTLR has been written to
parse human-readable files and even if you could create a grammar for
that stuff without changing the lexer (the lexer reads probably Unicode
chars with two bytes instead one), I doubt it would be readable.

Best regards,
Johannes Luber

From parrt at cs.usfca.edu  Sat Sep  1 16:06:03 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 1 Sep 2007 16:06:03 -0700
Subject: [antlr-interest] Parsing byte streams
In-Reply-To: <46D9DE75.5060504@gmx.de>
References: <46D9D32A.2000507@belugalounge.net> <46D9DE75.5060504@gmx.de>
Message-ID: <D7D5BB8B-B7A4-4FB5-8C02-7AFF0094448F@cs.usfca.edu>

This is no problem.  Just have a byte stream go to the lexer not  
16bit char.  Then lex/parse as normal.
Ter
On Sep 1, 2007, at 2:49 PM, Johannes Luber wrote:

> Felix Schmid wrote:
>> Hi,
>>
>> is it possible to parse byte streams, e.g. class files, using  
>> ANTLR? I
>> think I have seen the topic mentioned somewhere, maybe in the  
>> wiki, but
>> can't find it now....
>>
>>
>> Related to this, if it is possible, how could I skip over padding  
>> bytes
>> while parsing? Say, the binary stream looks something like this:
>>
>> 1 byte length of value in 4-byte words (incl. padding) || 1 byte real
>> value length in bytes || value        (|| means concatenation)
>>
>> so if 'value' was 'aa00aa00aa', the byte stream would look something
>> like '0205aa00aa00aa000000...' and the parser had to be clever  
>> enough to
>> understand that from the 8 bytes following the first byte, only the
>> first 5 are the real value and the 3 bytes at the end have to be  
>> skipped
>> (to hit the first byte of the next segment)....Could it be done  
>> with ANTLR?
>>
>> thanks for your attention,
>>
>> felix
>>
>
> Well, the last time someone asked for this, he was told to write a
> binary parser in his language of his choice. ANTLR has been written to
> parse human-readable files and even if you could create a grammar for
> that stuff without changing the lexer (the lexer reads probably  
> Unicode
> chars with two bytes instead one), I doubt it would be readable.
>
> Best regards,
> Johannes Luber


From antlr-list at arizona-software.ch  Sat Sep  1 18:51:48 2007
From: antlr-list at arizona-software.ch (Jean Bovet)
Date: Sat, 1 Sep 2007 18:51:48 -0700
Subject: [antlr-interest] ANTLRWorks 1.1.3 released
Message-ID: <A0A65B44-CB27-4AE7-98E6-F00220D78546@arizona-software.ch>

Hi,

ANTLRWorks 1.1.3 is now available and fixes the following:

Bug fix:
     [AW-104] - Saving a file without extension will add (null) as  
extension
     [AW-105] - Choosing a non-existing directory on Windows/Linux  
causes a null-pointer exception when exporting rules
     [AW-107] - Issue when saving last used directory when a file has  
been selected

Improvement
     [AW-109] - Generate code in the same directory as the current  
grammar document
     [AW-108] - Updated with ANTLR 3.0.1


Regards,

Jean

From lgcraymer at yahoo.com  Sat Sep  1 23:54:36 2007
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Sat, 1 Sep 2007 23:54:36 -0700 (PDT)
Subject: [antlr-interest] Repeating output constructs with
	stringtemplates
In-Reply-To: <46D86627.9000901@jazillian.com>
Message-ID: <311392.64678.qm@web55912.mail.re3.yahoo.com>

Hmm.  Obvious advertising sound bite:
"BNF.  The one DSL that Andy Tripp uses."

--Loring

--- Andy Tripp <antlr at jazillian.com> wrote:

> Terence Parr wrote:
> >
> > On Aug 30, 2007, at 3:26 PM, Andy Tripp wrote:
> >
> >> Hoping back onto my "vanilla library code is
> better than clever 
> >> syntax" soapbox,
> >
> > Hi Andy.  so DSLs are bad?  
> I generally don't like DSLs. You've got to remember
> that I (and most 
> people, I think) often have to
> *read* DSLs, while you almost always are the
> *writer* (designer) of the 
> DSL. I wonder how long
> it would take someone to figure out your one-liner
> of ST code (given a 
> realistic context - he encounters
> it in the middle of some code somewhere), compared
> to my Java code.
> > We should all go back to Pascal or assembly?  OO
> is good, but 
> > functional is bad?  I can't imagine how
> >
> > decl(type, names) ::= "<names:{ n | <type> <n>;}>"
> >
> > is not superior to your code. I have to imagine
> the emergent behavior 
> > in code.  In my template, it says...well, "here's
> the output".  A 
> > document with holes in it.  Gotta learn the syntax
> like you had to 
> > learn Java.
> I frown on people using Latin simply because so few
> people speak it, not 
> because it's not easier to
> express myself once I learn it. You could say "well,
> you just need to 
> learn Latin as  you did English".
> I guess that's true, but I don't really enjoy
> learning other languages - 
> too busy/dumb for that :)
> >
> > You should also argue against parser generators if
> you're against 
> > unparser generators ;)
> Parser-generators are nice because they reflect the
> input language so well.
> A grammar says "here is what my input language looks
> like; make a tree 
> out of that input".
> On the other hand, converting a tree back to code is
> quite a different 
> problem.
> This:
>    decl(type, names) ::= "<names:{ n | <type>
> <n>;}>"
> gives me no hint at all about what its input looks
> like (the tree 
> structure) or what its output (c0de) looks like.
> Neither does the Java code below, I admit.
> 
> Ideally, I'd like to be able to write something like
> this:
> 
> parent
>    DECL
>      type
>      child1
>      ...
>      childN
> 
> ->
> parent
>    DECL
>       type
>          child1
>       ...
>       type
>          childN
> 
> I guess that's what I was expecting from a "tree
> transformation tool" 
> tools like XSLT and TXL :(
> Andy    
> 
> >
> > Ter
> >
> >> void splitUpDeclarations(MyAST decl) {
> >>     MyAST parent = decl.getParent();
> >>     int insertLocation =
> parent.indexOfChild(decl);
> >>     MyAST type = decl.getChild(0);               
>  // first child
> >>     List<MyAST> vars = decl.getChildren(1);  //
> rest of children
> >>     for (MyAST var: vars) {
> >>         MyAst singleDecl = new MyAST(DECL);
> >>         singleDecl.addChildren(type.clone(),
> var);
> >>         parent.insert(insertLocation,
> singleDecl);
> >>     }
> >> }
> >
> 
> 



       
____________________________________________________________________________________
Got a little couch potato? 
Check out fun summer activities for kids.
http://search.yahoo.com/search?fr=oni_on_mail&p=summer+activities+for+kids&cs=bz 

From felix at belugalounge.net  Sun Sep  2 01:00:59 2007
From: felix at belugalounge.net (Felix Schmid)
Date: Sun, 02 Sep 2007 10:00:59 +0200
Subject: [antlr-interest] Parsing byte streams
In-Reply-To: <46D9DE75.5060504@gmx.de>
References: <46D9D32A.2000507@belugalounge.net> <46D9DE75.5060504@gmx.de>
Message-ID: <46DA6DBB.5020802@belugalounge.net>

Tank you, after sleeping over it for a night, I came to the same 
conclusion...

felix

Johannes Luber wrote:
> Felix Schmid wrote:
>   
>> Hi,
>>
>> is it possible to parse byte streams, e.g. class files, using ANTLR? I
>> think I have seen the topic mentioned somewhere, maybe in the wiki, but
>> can't find it now....
>>
>>
>> Related to this, if it is possible, how could I skip over padding bytes
>> while parsing? Say, the binary stream looks something like this:
>>
>> 1 byte length of value in 4-byte words (incl. padding) || 1 byte real
>> value length in bytes || value        (|| means concatenation)
>>
>> so if 'value' was 'aa00aa00aa', the byte stream would look something
>> like '0205aa00aa00aa000000...' and the parser had to be clever enough to
>> understand that from the 8 bytes following the first byte, only the
>> first 5 are the real value and the 3 bytes at the end have to be skipped
>> (to hit the first byte of the next segment)....Could it be done with ANTLR?
>>
>> thanks for your attention,
>>
>> felix
>>
>>     
>
> Well, the last time someone asked for this, he was told to write a
> binary parser in his language of his choice. ANTLR has been written to
> parse human-readable files and even if you could create a grammar for
> that stuff without changing the lexer (the lexer reads probably Unicode
> chars with two bytes instead one), I doubt it would be readable.
>
> Best regards,
> Johannes Luber
>   


From dave at badgers-in-foil.co.uk  Sun Sep  2 05:58:04 2007
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Sun, 2 Sep 2007 12:58:04 +0000
Subject: [antlr-interest] start/stop tokens for subrules?
In-Reply-To: <20070830205815.GA26000@badgers-in-foil.co.uk>
References: <20070830205815.GA26000@badgers-in-foil.co.uk>
Message-ID: <20070902125803.GA4811@badgers-in-foil.co.uk>

On Thu, Aug 30, 2007 at 08:58:15PM +0000, David Holroyd wrote:
> Knowing the start/stop tokens for an AST node is very important to my
> application.
> 
> ANTLRv3 generated parsers don't currently seem to set start/stop tokens
> for the root AST nodes created by subrules.  Only the final result of the
> rule as a whole gets these values defined.  e.g. in,
> 
>   identifier
>    :  (  qualifiedIdent -> qualifiedIdent
>       )
>       (  options{greedy=true;}
>       :   d=DOT qualifiedIdent
>           -> ^(PROPERTY_OR_IDENTIFIER[$d] $identifier qualifiedIdent)
>       )*
>       -> ^(IDENTIFIER $identifier)
> 
> the generated PROPERTY_OR_IDENTIFIER node which is created as the root
> of the subtree does not get the adaptor.setTokenBoundaries() love.
> 
> 
> Admittedly, even if the subrule's root *did* get these values defined,
> they would be 'wrong' for the tree I want to construct (I want the
> startToken to reflect the start of the first child, not LT(1) at the
> start of the subrule).
> 
> I therefore end up creating auxiliary rules like this:
> 
>   identifier 
>    :  (  qualifiedIdent -> qualifiedIdent
>       )
>       (  options{greedy=true;}
>       :  poi=propOrIdent[root_0, retval.start] -> $poi
>       )*
>       -> ^(IDENTIFIER $identifier)
>     ;
> 
>   propOrIdent[Tree identPrimary, Token startToken]
>    :  { retval.start = startToken; }
>       d=DOT propId=qualifiedIdent
>       -> ^(PROPERTY_OR_IDENTIFIER[$d] {$identPrimary} $propId)
>     ;

I've come up with a simpler scheme elsewhere in the grammar, where I'm
using tree operators rather than rewrites:

  // multiplication/division/modulo (level 2)
  multiplicativeExpression
    :  unaryExpression
       (  o=multiplicativeOperator^
          unaryExpression
          { demarcate($o.tree); }
       )*
    ;

The demarcate() function just sets the start/stop tokens for the given
node to be the start and stop tokens from the first and last child
nodes, respectively.  With my custom tree node class, it is written as,

  private void demarcate(LinkedListTree parent) {
      parent.setStartToken(parent.getFirstChild().getStartToken());
      parent.setStopToken(parent.getLastChild().getStopToken());
  }




-- 
http://david.holroyd.me.uk/

From jerrro at gmail.com  Sun Sep  2 15:29:11 2007
From: jerrro at gmail.com (Jerry Ro)
Date: Sun, 2 Sep 2007 18:29:11 -0400
Subject: [antlr-interest] running antlr
Message-ID: <5a8f4c290709021529v2859b0fdof27feae090b0119@mail.gmail.com>

Hello,

when trying to run antlr, after installing the runtime+tool jar and
stringtemplate I get the following error:
java -cp antlr-3.0.1.jar:stringtemplate-3.0.jar org.antlr.Tool
Exception in thread "main" java.lang.NoClassDefFoundError: antlr/TokenStream
        at org.antlr.tool.ErrorManager.setLocale(ErrorManager.java:393)
        at org.antlr.tool.ErrorManager.<clinit>(ErrorManager.java:355)
        at org.antlr.Tool.main(Tool.java:67)

It seems like it looks for TokenStream in antlr/ instead of
org/antlr/runtime (I checked and there is TokenStream.class in
org/antlr/runtime)?

Any ideas?

Thanks


Jerr
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070902/4f48e819/attachment.html 

From jaluber at gmx.de  Sun Sep  2 15:50:34 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Mon, 03 Sep 2007 00:50:34 +0200
Subject: [antlr-interest] running antlr
In-Reply-To: <5a8f4c290709021529v2859b0fdof27feae090b0119@mail.gmail.com>
References: <5a8f4c290709021529v2859b0fdof27feae090b0119@mail.gmail.com>
Message-ID: <46DB3E3A.9040606@gmx.de>

Jerry Ro wrote:
> Hello,
>  
> when trying to run antlr, after installing the runtime+tool jar and
> stringtemplate I get the following error:
> java -cp antlr-3.0.1.jar:stringtemplate-3.0.jar org.antlr.Tool
> Exception in thread "main" java.lang.NoClassDefFoundError: antlr/TokenStream
>         at org.antlr.tool.ErrorManager.setLocale(ErrorManager.java :393)
>         at org.antlr.tool.ErrorManager.<clinit>(ErrorManager.java:355)
>         at org.antlr.Tool.main(Tool.java:67)
>  
> It seems like it looks for TokenStream in antlr/ instead of
> org/antlr/runtime (I checked and there is TokenStream.class in
> org/antlr/runtime)?
>  
> Any ideas?

You are missing a references to antlr-2.7.7.jar.

Best regards,
Johannes Luber

From jerrro at gmail.com  Sun Sep  2 16:19:48 2007
From: jerrro at gmail.com (Jerry Ro)
Date: Sun, 2 Sep 2007 19:19:48 -0400
Subject: [antlr-interest] running antlr
In-Reply-To: <46DB3E3A.9040606@gmx.de>
References: <5a8f4c290709021529v2859b0fdof27feae090b0119@mail.gmail.com>
	<46DB3E3A.9040606@gmx.de>
Message-ID: <5a8f4c290709021619p28470a2k9281f8afbf5d63c6@mail.gmail.com>

But what if I want to use ANTLR 3.0.1? I mean, there is a TokenStream class
in the JAR file... It just tries to refer it differently. Should I use both
the jar files for 2.7.7 *and* for 3.0?

Thanks

Jerr


On 9/2/07, Johannes Luber <jaluber at gmx.de> wrote:
>
> Jerry Ro wrote:
> > Hello,
> >
> > when trying to run antlr, after installing the runtime+tool jar and
> > stringtemplate I get the following error:
> > java -cp antlr-3.0.1.jar:stringtemplate-3.0.jar org.antlr.Tool
> > Exception in thread "main" java.lang.NoClassDefFoundError:
> antlr/TokenStream
> >         at org.antlr.tool.ErrorManager.setLocale(ErrorManager.java :393)
> >         at org.antlr.tool.ErrorManager.<clinit>(ErrorManager.java:355)
> >         at org.antlr.Tool.main(Tool.java:67)
> >
> > It seems like it looks for TokenStream in antlr/ instead of
> > org/antlr/runtime (I checked and there is TokenStream.class in
> > org/antlr/runtime)?
> >
> > Any ideas?
>
> You are missing a references to antlr-2.7.7.jar.
>
> Best regards,
> Johannes Luber
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070902/9a4644b9/attachment.html 

From parrt at cs.usfca.edu  Sun Sep  2 16:58:31 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 2 Sep 2007 16:58:31 -0700
Subject: [antlr-interest] running antlr
In-Reply-To: <5a8f4c290709021619p28470a2k9281f8afbf5d63c6@mail.gmail.com>
References: <5a8f4c290709021529v2859b0fdof27feae090b0119@mail.gmail.com>
	<46DB3E3A.9040606@gmx.de>
	<5a8f4c290709021619p28470a2k9281f8afbf5d63c6@mail.gmail.com>
Message-ID: <B1FF952E-57EC-44ED-A5F5-5C1804A6E391@cs.usfca.edu>


On Sep 2, 2007, at 4:19 PM, Jerry Ro wrote:

> But what if I want to use ANTLR 3.0.1? I mean, there is a  
> TokenStream class in the JAR file... It just tries to refer it  
> differently. Should I use both the jar files for 2.7.7 *and* for 3.0?
>

yep.

Ter


From ohumbel at gmail.com  Mon Sep  3 03:03:12 2007
From: ohumbel at gmail.com (Oti)
Date: Mon, 3 Sep 2007 12:03:12 +0200
Subject: [antlr-interest] superClass option for lexer in a combined
	grammar ?
In-Reply-To: <5A03163702DD0945A5DC1324E9FDDEF17E3A02@CMBFISLTC05.FNFIS.COM>
References: <5A03163702DD0945A5DC1324E9FDDEF17E3A02@CMBFISLTC05.FNFIS.COM>
Message-ID: <ba90a0a90709030303l24ef0339sd54c43f66b3c3d5f@mail.gmail.com>

Kevin,

this also works for me.
Thanks again!

Oti.

On 8/24/07, Braun, Kevin T <Kevin.Braun at fnis.com> wrote:
> Here is what I am doing to solve this; it seems it will work.  When
> ANTLR generates the lexer and parser, it (fortunately) just says
> "extends Parser" or "extends Lexer", with package qualification (it
> imports org.antlr.runtime.*).  In the header I specify my own package
> for the generated lexer and parser.  I then extend ANTLR's Lexer and
> Parser with classes also called Lexer and Parser, in that same package.
> As a result, the generated classes extend my Lexer and Parser classes
> instead of ANTLR's.
>
> --------
> Oti ohumbel at gmail.com
> Fri Aug 3 02:03:10 PDT 2007
>
> Hi,
>
> trying out the superClass option (pages 104, 111/112) from the book.
> In a combined grammar the parser gets the specified super class.
>
> Is there a way to specify the lexer superClass, too ?
>
> Thanks,
> and best wishes,
> Oti.
>
>

From ian.beveridge at gmail.com  Mon Sep  3 07:13:06 2007
From: ian.beveridge at gmail.com (Ian Beveridge)
Date: Mon, 3 Sep 2007 15:13:06 +0100
Subject: [antlr-interest] Weird parser bug with character ranges
In-Reply-To: <48385ed20709030711i7015ba20wfd36ee86c75e6cf2@mail.gmail.com>
References: <48385ed20709030711i7015ba20wfd36ee86c75e6cf2@mail.gmail.com>
Message-ID: <48385ed20709030713y5b9d0001o292c2c93bb9f8fb5@mail.gmail.com>

I've got a parser working in antlr 3.0.1 and everything is great
except for one bizarre problem. I have this to define an identifier...

IDENT
   : ('a'..'z'|'A'..'Z'|'_')('a'..'z'|'A'..'Z'|'_'|'0'..'9')*
   ;

which seems straight-forward enough. The weird thing is that all of
these things work fine...

 myvar = 1
 myvar2 = 1
 aa = 1
 b = 1

but this fails...

 a = 1

with

line 15:8 required (...)+ loop did not match anything at input 'a'

I'm puzzled as to why 'a' should fail but not 'b'. My grammar is
obviously much longer than that one line so I guess it's possible that
it could be a problem elsewhere in my file but it seems like such a
strange problem.

Any clues?

- Ian Beveridge

From mazzucco at iiasa.ac.at  Mon Sep  3 07:35:37 2007
From: mazzucco at iiasa.ac.at (Rupert Mazzucco)
Date: Mon, 3 Sep 2007 16:35:37 +0200
Subject: [antlr-interest] Weird parser bug with character ranges
In-Reply-To: <48385ed20709030713y5b9d0001o292c2c93bb9f8fb5@mail.gmail.com>
References: <48385ed20709030711i7015ba20wfd36ee86c75e6cf2@mail.gmail.com>
	<48385ed20709030713y5b9d0001o292c2c93bb9f8fb5@mail.gmail.com>
Message-ID: <20070903163537.40dfa494.mazzucco@iiasa.ac.at>


> IDENT
>    : ('a'..'z'|'A'..'Z'|'_')('a'..'z'|'A'..'Z'|'_'|'0'..'9')*
>    ;
> ...
> but this fails...
> 
>  a = 1
> 
> with
> 
> line 15:8 required (...)+ loop did not match anything at input 'a'
> 
> I'm puzzled as to why 'a' should fail but not 'b'. My grammar is
> obviously much longer than that one line so I guess it's possible that
> it could be a problem elsewhere in my file but it seems like such a
> strange problem.
> 
> Any clues?

Find a minimal grammar that exhibits the problem, because the snippet you posted sure doesn't if combined with a reasonable set of tokens and a rule to identify an assignment.  And/or use antlrworks to see what the grammar really does with your input.

Regards
-- 
Rupert Mazzucco         <mazzucco at iiasa.ac.at>
Research Scholar, Evolution and Ecology Program
IIASA - Institute for Applied Systems Analysis
Schlossplatz 1, 2361 Laxenburg, Austria
Phone: +43 2236 807 522   Fax: +43 2236 713 13

From antlr at b0nz0.de  Mon Sep  3 07:50:04 2007
From: antlr at b0nz0.de (Joachim Rosskopf)
Date: Mon, 03 Sep 2007 16:50:04 +0200
Subject: [antlr-interest] A rule indirecting a token
Message-ID: <46DC1F1C.8030602@b0nz0.de>

Hello,

I?m very new to development with antlr and dsl development in general.

Currently I?m trying to implement a kind of expression language for a
data
converstion tool. But I?m facing a problem I really don?t understand.

Take the following snippet of my grammar:

decimalDigit
        :       DIGIT;

DIGIT   :       ('0'..'9');

I?m using ANTLRWorks to interpret the grammar. So "DIGIT" works quite
well. But if i try "decimalDigit" I get an MismatchedTokenException
(13 != 14). What?s wrong, and what the heck does 13 != 14 mean?

Regards
---
Joachim

From aliaazimi at yahoo.com  Mon Sep  3 09:27:49 2007
From: aliaazimi at yahoo.com (ali azimi)
Date: Mon, 3 Sep 2007 09:27:49 -0700 (PDT)
Subject: [antlr-interest] (newbie) how do action codes work?
Message-ID: <75589.56200.qm@web58105.mail.re3.yahoo.com>

Hello,
   
  I have a problem which I have not been able to solve yet. Could you please have a look at it and give me your suggestions if any. Thank you very much in advance.
   
  I have built a parser grammar, AST and tree walker which work fine. The parser parses a language called SDL-CIF which basically contains a series of symbols and their coordinates in SDL diagrams. For example:
   
  /* CIF NextState (300,400) */
  nextstate Generate ;
   
  The above says: draw the symbol nextstate and label it ?Generate? with the coordinates of 300 and 400.
  Now I have embedded the codes to draw the symbols within tree walker as following:
   
  {System.out.println(?some codes?);}
   
  The output of the test rig when run will be some codes which will be executed and draw the graph. I have written the drawing codes as templates like the following:
  (the language in blue is written in a drawing software environment)
   
  nextstate:^(SLIST nextstatebody)
  {System.out.println("nod4[shape=X, label='Y', pos='Z!', width=V, height=W, peripheries=0];");}
              ;
   
  The X, Y, Z, V, W in the above need to get the information from AST to look something like the following:
   
  nod4[shape=sdl_state,label='Generate',pos='2.5,5!',width=0.8,height=0.6,peripheries=0];
  How can I tell the tree walker to do that? (I need to produce this kind of codes for many different shapes and their connections which are straight lines)
   
  
  An exmple: I know I can use something like ?pos=??$i ?,?$j  to get the position for "pos" considering the rule  b26a in my grammar:
  b26      :b26a    ;
  b26a    :i=INT ',' j=INT;
              
  But is it correct? The INTs in b26a contain different integers at different times as the input contains different integer values. How can $i get the right information for a shape considering that many rules use the rule 26a and the INTs in b26a match different integers including page numbers, different shapes positions other than nextstate?
   
  Best regards,
   
  Al
   
   

       
---------------------------------
Got a little couch potato? 
Check out fun summer activities for kids.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070903/70b2332e/attachment-0001.html 

From warnero at gmail.com  Mon Sep  3 10:37:38 2007
From: warnero at gmail.com (Warner Onstine)
Date: Mon, 3 Sep 2007 10:37:38 -0700
Subject: [antlr-interest] scoped variable not being passed
In-Reply-To: <d76a9c0d0708291334g52e8e03brba40550af0fc1cd3@mail.gmail.com>
References: <d76a9c0d0708291334g52e8e03brba40550af0fc1cd3@mail.gmail.com>
Message-ID: <d76a9c0d0709031037n5ae3a46s8e6a8347e6bf140b@mail.gmail.com>

Never did hear from anyone on this issue, is this doable? I've tried a
couple of different things I thought might work but yielded the same
result.

-warner

On 8/29/07, Warner Onstine <warnero at gmail.com> wrote:
> Ok, next to last question (I have one nagging grammar generation
> question left, but want to get this one fixed before I pose it). I
> have a prog scope variable (prog is one of the first matches which
> I'll show below), I want to reference this variable in a later match
> but it isn't being passed along and I'm not sure what I need to do to
> get it to pass correctly.
>
> Here's where it is declared:
> prog
> scope {
>   List methods;
>   List imports;
>   String className;
> }
> @init {
>   $prog::methods = new ArrayList();
>   $prog::imports = new ArrayList();
>   $prog::className = new String();
> }
>         :       packageDecl importsDecl? model ->
> prog(packageName={$packageDecl.st}, imports={$prog::imports},
> className={$prog::className}, methods={$prog::methods})
>         ;
>
> The variable I want to reference is $prog::className and I want to
> reference it in my later statements (which I think are under the
> method scope), here is where the method scope is declared later.
>
> method
> scope  {
>   List localVars;
> }
> @init {
>   $method::localVars = new ArrayList();
> }
>         :       returnType=type? name=ID '(' p=parameter? ')' '{' methodBody=body? '}'
>                 -> method(returnType={returnType != null ? $returnType.st : new
> String("void")},
>                           name={$name.text},
>                           param={p != null ? $p.st : new String("")},
>                           body={methodBody != null ? $method::localVars : null})
>
>         ;
>
> And I want to use the className variable here:
>
> criteriaBlock
>         :       '{' ID_EQUALS '(' ID ')' '}' -> id_eq(id={$ID.text},
> model={$prog::className})
>         ;
>
> Again, I've attached the grammar for reference.
>
> -warner
> --
> Warner Onstine - Programmer/Author
> New book on Tapestry 4!
> Tapestry 101 available at
> http://sourcebeat.com/books/tapestrylive.html
> warner at warneronstine.com
> http://warneronstine.com/blog
>
>


-- 
Warner Onstine - Programmer/Author
New book on Tapestry 4!
Tapestry 101 available at
http://sourcebeat.com/books/tapestrylive.html
warner at warneronstine.com
http://warneronstine.com/blog

From tbrandonau at gmail.com  Mon Sep  3 11:18:37 2007
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Tue, 4 Sep 2007 04:18:37 +1000
Subject: [antlr-interest] scoped variable not being passed
In-Reply-To: <d76a9c0d0709031037n5ae3a46s8e6a8347e6bf140b@mail.gmail.com>
References: <d76a9c0d0708291334g52e8e03brba40550af0fc1cd3@mail.gmail.com>
	<d76a9c0d0709031037n5ae3a46s8e6a8347e6bf140b@mail.gmail.com>
Message-ID: <ebc876d70709031118n294d84cs554f35f25dc3963a@mail.gmail.com>

You should only declare a scope when you want a rule to create a new
scope object on the stack. So, for dynamic scopes you generally
shouldn't have any scope clauses apart from the initial definitions.
Code like:
selectStatement
scope prog;
	:	'Select' '(' ')' criteria=criteriaBlock? ->
select_statement(crit={criteria != null ? $criteria.st : null},
model={$prog::className})
	;
will cause a new prog scope object to be created on the stack and
removed when the rule exits, so your changes below that method will
all be lost.
If you remove all such scope use declarations I think your code should work.

Tom.

On 9/4/07, Warner Onstine <warnero at gmail.com> wrote:
> Never did hear from anyone on this issue, is this doable? I've tried a
> couple of different things I thought might work but yielded the same
> result.
>
> -warner
>
> On 8/29/07, Warner Onstine <warnero at gmail.com> wrote:
> > Ok, next to last question (I have one nagging grammar generation
> > question left, but want to get this one fixed before I pose it). I
> > have a prog scope variable (prog is one of the first matches which
> > I'll show below), I want to reference this variable in a later match
> > but it isn't being passed along and I'm not sure what I need to do to
> > get it to pass correctly.
> >
> > Here's where it is declared:
> > prog
> > scope {
> >   List methods;
> >   List imports;
> >   String className;
> > }
> > @init {
> >   $prog::methods = new ArrayList();
> >   $prog::imports = new ArrayList();
> >   $prog::className = new String();
> > }
> >         :       packageDecl importsDecl? model ->
> > prog(packageName={$packageDecl.st}, imports={$prog::imports},
> > className={$prog::className}, methods={$prog::methods})
> >         ;
> >
> > The variable I want to reference is $prog::className and I want to
> > reference it in my later statements (which I think are under the
> > method scope), here is where the method scope is declared later.
> >
> > method
> > scope  {
> >   List localVars;
> > }
> > @init {
> >   $method::localVars = new ArrayList();
> > }
> >         :       returnType=type? name=ID '(' p=parameter? ')' '{' methodBody=body? '}'
> >                 -> method(returnType={returnType != null ? $returnType.st : new
> > String("void")},
> >                           name={$name.text},
> >                           param={p != null ? $p.st : new String("")},
> >                           body={methodBody != null ? $method::localVars : null})
> >
> >         ;
> >
> > And I want to use the className variable here:
> >
> > criteriaBlock
> >         :       '{' ID_EQUALS '(' ID ')' '}' -> id_eq(id={$ID.text},
> > model={$prog::className})
> >         ;
> >
> > Again, I've attached the grammar for reference.
> >
> > -warner
> > --
> > Warner Onstine - Programmer/Author
> > New book on Tapestry 4!
> > Tapestry 101 available at
> > http://sourcebeat.com/books/tapestrylive.html
> > warner at warneronstine.com
> > http://warneronstine.com/blog
> >
> >
>
>
> --
> Warner Onstine - Programmer/Author
> New book on Tapestry 4!
> Tapestry 101 available at
> http://sourcebeat.com/books/tapestrylive.html
> warner at warneronstine.com
> http://warneronstine.com/blog
>

From warnero at gmail.com  Mon Sep  3 11:27:42 2007
From: warnero at gmail.com (Warner Onstine)
Date: Mon, 3 Sep 2007 11:27:42 -0700
Subject: [antlr-interest] scoped variable not being passed
In-Reply-To: <ebc876d70709031118n294d84cs554f35f25dc3963a@mail.gmail.com>
References: <d76a9c0d0708291334g52e8e03brba40550af0fc1cd3@mail.gmail.com>
	<d76a9c0d0709031037n5ae3a46s8e6a8347e6bf140b@mail.gmail.com>
	<ebc876d70709031118n294d84cs554f35f25dc3963a@mail.gmail.com>
Message-ID: <d76a9c0d0709031127q578acf85i57cb424e14d85ac8@mail.gmail.com>

I'll have to review that again to be sure, but I believe I added that
in afterwards (it wasn't working before I had that scope prog; there,
I added it to see if that would get it working).  But I'll try that
just in case.

-warner

On 9/3/07, Thomas Brandon <tbrandonau at gmail.com> wrote:
> You should only declare a scope when you want a rule to create a new
> scope object on the stack. So, for dynamic scopes you generally
> shouldn't have any scope clauses apart from the initial definitions.
> Code like:
> selectStatement
> scope prog;
>         :       'Select' '(' ')' criteria=criteriaBlock? ->
> select_statement(crit={criteria != null ? $criteria.st : null},
> model={$prog::className})
>         ;
> will cause a new prog scope object to be created on the stack and
> removed when the rule exits, so your changes below that method will
> all be lost.
> If you remove all such scope use declarations I think your code should work.
>
> Tom.
>
> On 9/4/07, Warner Onstine <warnero at gmail.com> wrote:
> > Never did hear from anyone on this issue, is this doable? I've tried a
> > couple of different things I thought might work but yielded the same
> > result.
> >
> > -warner
> >
> > On 8/29/07, Warner Onstine <warnero at gmail.com> wrote:
> > > Ok, next to last question (I have one nagging grammar generation
> > > question left, but want to get this one fixed before I pose it). I
> > > have a prog scope variable (prog is one of the first matches which
> > > I'll show below), I want to reference this variable in a later match
> > > but it isn't being passed along and I'm not sure what I need to do to
> > > get it to pass correctly.
> > >
> > > Here's where it is declared:
> > > prog
> > > scope {
> > >   List methods;
> > >   List imports;
> > >   String className;
> > > }
> > > @init {
> > >   $prog::methods = new ArrayList();
> > >   $prog::imports = new ArrayList();
> > >   $prog::className = new String();
> > > }
> > >         :       packageDecl importsDecl? model ->
> > > prog(packageName={$packageDecl.st}, imports={$prog::imports},
> > > className={$prog::className}, methods={$prog::methods})
> > >         ;
> > >
> > > The variable I want to reference is $prog::className and I want to
> > > reference it in my later statements (which I think are under the
> > > method scope), here is where the method scope is declared later.
> > >
> > > method
> > > scope  {
> > >   List localVars;
> > > }
> > > @init {
> > >   $method::localVars = new ArrayList();
> > > }
> > >         :       returnType=type? name=ID '(' p=parameter? ')' '{' methodBody=body? '}'
> > >                 -> method(returnType={returnType != null ? $returnType.st : new
> > > String("void")},
> > >                           name={$name.text},
> > >                           param={p != null ? $p.st : new String("")},
> > >                           body={methodBody != null ? $method::localVars : null})
> > >
> > >         ;
> > >
> > > And I want to use the className variable here:
> > >
> > > criteriaBlock
> > >         :       '{' ID_EQUALS '(' ID ')' '}' -> id_eq(id={$ID.text},
> > > model={$prog::className})
> > >         ;
> > >
> > > Again, I've attached the grammar for reference.
> > >
> > > -warner
> > > --
> > > Warner Onstine - Programmer/Author
> > > New book on Tapestry 4!
> > > Tapestry 101 available at
> > > http://sourcebeat.com/books/tapestrylive.html
> > > warner at warneronstine.com
> > > http://warneronstine.com/blog
> > >
> > >
> >
> >
> > --
> > Warner Onstine - Programmer/Author
> > New book on Tapestry 4!
> > Tapestry 101 available at
> > http://sourcebeat.com/books/tapestrylive.html
> > warner at warneronstine.com
> > http://warneronstine.com/blog
> >
>


-- 
Warner Onstine - Programmer/Author
New book on Tapestry 4!
Tapestry 101 available at
http://sourcebeat.com/books/tapestrylive.html
warner at warneronstine.com
http://warneronstine.com/blog

From pink at odahoda.de  Mon Sep  3 11:44:56 2007
From: pink at odahoda.de (Benjamin Niemann)
Date: Mon, 03 Sep 2007 20:44:56 +0200
Subject: [antlr-interest] A rule indirecting a token
References: <46DC1F1C.8030602@b0nz0.de>
Message-ID: <fbhkn8$sed$1@sea.gmane.org>

Hello,

Joachim Rosskopf wrote:

> I?m very new to development with antlr and dsl development in general.
> 
> Currently I?m trying to implement a kind of expression language for a
> data
> converstion tool. But I?m facing a problem I really don?t understand.
> 
> Take the following snippet of my grammar:
> 
> decimalDigit
>         :       DIGIT;
> 
> DIGIT   :       ('0'..'9');
> 
> I?m using ANTLRWorks to interpret the grammar. So "DIGIT" works quite
> well. But if i try "decimalDigit" I get an MismatchedTokenException
> (13 != 14). What?s wrong, and what the heck does 13 != 14 mean?

There must be another lexer rule that also matches a digit. 13 is the token
type of the recognized token and 14 the type of DIGIT. Look at the
generated <T>.tokens file to find out which rule has type 13.

If you still have trouble finding the cause, post the complete grammar (or
better a minimal but complete version demonstrating the behaviour).


HTH

-- 
Benjamin Niemann
Email: pink at odahoda dot de
WWW: http://pink.odahoda.de/


From jerrro at gmail.com  Mon Sep  3 18:50:27 2007
From: jerrro at gmail.com (Jerry Ro)
Date: Mon, 3 Sep 2007 21:50:27 -0400
Subject: [antlr-interest] two (simple?) questions
Message-ID: <5a8f4c290709031850o13e5fc2elb78107bf5a3e3bed@mail.gmail.com>

Hi,

I was wondering if anyone can help with two simple (newbie) questions:

The first is:
I define in the Lexer rules the following rule for defining alphanumeric
strings:

ALPHANUMERIC : (DIGIT | LOWER | UPPER | '_')+ ;

where digit is a fragement of 0..9 and lower and upper are fragments of a to
z and A to Z. However, strings which are just numbers are not accepted as
"alphanumeric". I have to add a lower case letter for the parser to accept
the string according to the alphanumeric rule, but I would expect a just
numbers string to match the alphanumeric lex rule.

Second thing is:
How do I make the parser parse even if there are no spaces between the
tokens? Right now I have to separate all tokens with spaces in order for the
parser to parse anything... I do have a rule of the following form:
WHITESPACE : ( '\t' | ' ' | '\r' | '\n'| '\u000C' )+    { $channel = HIDDEN;
} ;
in the lexer rules.


Thanks



Jerr
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070903/aa64477e/attachment.html 

From aliaazimi at yahoo.com  Mon Sep  3 19:22:28 2007
From: aliaazimi at yahoo.com (ali azimi)
Date: Mon, 3 Sep 2007 19:22:28 -0700 (PDT)
Subject: [antlr-interest] two (simple?) questions
In-Reply-To: <5a8f4c290709031850o13e5fc2elb78107bf5a3e3bed@mail.gmail.com>
Message-ID: <829925.42314.qm@web58115.mail.re3.yahoo.com>

Hi,
   
  Try this one. Please tell me if it works for you.
  grammar G;
options {
backtrack=true;
language=Java;
}
@members {
String s;
}
  digit :(ALPHANUMERIC |WS ) * ; 
ALPHANUMERIC : (DIGIT | LOWER | UPPER | '_') +  ;
LOWER       :'a'..'z' ;
UPPER       :'A'..'Z' ;
DIGIT: '0'..'9' ;
WS : (' ' |'\t' |'\n' |'\r' )+ {skip();} ;


Jerry Ro <jerrro at gmail.com> wrote:
    Hi,
   
  I was wondering if anyone can help with two simple (newbie) questions:
   
  The first is:
  I define in the Lexer rules the following rule for defining alphanumeric strings:
   
  ALPHANUMERIC : (DIGIT | LOWER | UPPER | '_')+ ;
   
  where digit is a fragement of 0..9 and lower and upper are fragments of a to z and A to Z. However, strings which are just numbers are not accepted as "alphanumeric". I have to add a lower case letter for the parser to accept the string according to the alphanumeric rule, but I would expect a just numbers string to match the alphanumeric lex rule. 
   
  Second thing is:
  How do I make the parser parse even if there are no spaces between the tokens? Right now I have to separate all tokens with spaces in order for the parser to parse anything... I do have a rule of the following form: 
  WHITESPACE : ( '\t' | ' ' | '\r' | '\n'| '\u000C' )+    { $channel = HIDDEN; } ;
  in the lexer rules.
   
   
  Thanks
   
   
   
  Jerr
   


       
---------------------------------
Luggage? GPS? Comic books? 
Check out fitting  gifts for grads at Yahoo! Search.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070903/1a914122/attachment.html 

From laguest at archangeli.co.uk  Mon Sep  3 19:44:29 2007
From: laguest at archangeli.co.uk (Luke A. Guest)
Date: Tue, 04 Sep 2007 03:44:29 +0100
Subject: [antlr-interest] two (simple?) questions
In-Reply-To: <829925.42314.qm@web58115.mail.re3.yahoo.com>
References: <829925.42314.qm@web58115.mail.re3.yahoo.com>
Message-ID: <1188873869.6121.54.camel@rogue>

On Mon, 2007-09-03 at 19:22 -0700, ali azimi wrote:
> Hi,
>  
> Try this one. Please tell me if it works for you.
> grammar G;
> options {
> backtrack=true;

Do you need this?

> language=Java;
> }
> @members {
> String s;
> }

There's definitely no need for this.

Luke.



From manas_482002 at yahoo.co.in  Tue Sep  4 00:25:24 2007
From: manas_482002 at yahoo.co.in (manas)
Date: Tue, 4 Sep 2007 08:25:24 +0100 (BST)
Subject: [antlr-interest] More than 1 grammar
Message-ID: <521864.3983.qm@web8323.mail.in.yahoo.com>

hello sir,
   
  I am a final year computer engineering student. I want to know if we could declare more than one grammar for the same tool. Like i declare one grammar for Arithmetic operations, another for Logical operations, and say one for unary operations. 
  Is this possible to declare more than one grammar files and then use them as one.
   
  reply soon ,
  waiting in anticipation
  Manas

       
---------------------------------
 Did you know? You can CHAT without downloading messenger.  Click here
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070904/7d0203b5/attachment.html 

From Waverly.Edwards at genesys.com  Tue Sep  4 04:24:17 2007
From: Waverly.Edwards at genesys.com (Edwards, Waverly)
Date: Tue, 4 Sep 2007 07:24:17 -0400
Subject: [antlr-interest] using ANTLR with netbeans
Message-ID: <FF993752CB890B4EB591BE5450C37BF1B053FF@navamane001.ad.internal.corp>


I am using netbeans 5.5.1 and I've been unable to figure out how to use
the runtime jar as a library.
I've placed the file in the classpath, added a new classpath, added the
source directory and have not had success being able to use ANTLR with
netbeans.

Is there a way to do this?


W.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070904/fa803c6a/attachment.html 

From Erik.Putrycz at nrc-cnrc.gc.ca  Tue Sep  4 11:33:43 2007
From: Erik.Putrycz at nrc-cnrc.gc.ca (Putrycz, Erik)
Date: Tue, 4 Sep 2007 14:33:43 -0400
Subject: [antlr-interest] TreeAdaptor design question
Message-ID: <E4D07AB09F5F044299333C8D0FEB45E904C72809@nrccenexb1.nrc.ca>

Why does the method create(Token) return an Object? I'm curious why an
Object and not a Tree. When you manipulate trees, it seems to cause
quite a bit of (useless?) casts everywhere...

 

Erik Putrycz, Ph.D - Research Associate

Institute for Information Technology - Software Engineering Group

National Research Council, Canada - Building M-50, 1200 Montreal Road

Ottawa, Ontario, CANADA K1A 0R6

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070904/e2961649/attachment.html 

From parrt at cs.usfca.edu  Tue Sep  4 12:10:52 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 4 Sep 2007 12:10:52 -0700
Subject: [antlr-interest] LDTA 2008 Call For Papers
Message-ID: <677390BF-A8DC-4A0E-9CB3-719E0B421027@cs.usfca.edu>

[You will probaby receive multiple copies of this message. Sorry for  
that.]

LDTA Call for papers

This is the Call For Papers for the Eighth Workshop on Language  
Descriptions,
Tools and Applications (LDTA 2008)

LDTA is a satellite event of ETAPS which takes place between March 29  
and April
6, 2008 in Budapest, Hungary.

See http://ldta2008.inf.elte.hu/

== Scope ==

LDTA is an application and tool oriented forum on meta programming in  
a broad
sense. A meta program is a program that takes other programs as input or
output. The focus of LDTA is on generated or otherwise efficiently  
implemented
meta programs, possibly using high level descriptions of programming  
languages.
Tools and techniques presented at LDTA are usually applicable in the  
context of
"Language Workbenches" or "Meta Programming Systems" or simply as  
parts of
advanced programming environments or IDEs. The applications areas  
include, but
are not limited to:

     * Program analysis, transformation, generation and verification
     * Implementation of Domain Specific Languages (both visual and  
textual)
     * Reverse engineering and reengineering
     * Refactoring and other source-to-source transformations
     * Application modelling (MDE, MDA, Software Factories, Product  
lines)
     * Grammar engineering / Grammarware
     * Language definition and language prototyping
     * Debugging, profiling and testing
     * IDE construction
     * Compiler construction

LDTA is traditionally a forum where computer science theories are put  
to the
test of real-world software engineering issues, for example by applying:
     * context-free grammars to parser generation for real  
programming languages,
     * attribute grammars to static analyzer and compiler generation,
     * term rewriting to source-to-source transformation,
     * action semantics to programming language implementation,
     * model checking to software verification.

Note that LDTA solicits submissions from any technological or  
theoretical
domain, as long as the paper is within the application scope.

== Submission Procedure and Publication ==

Submissions in the following categories are admissible:
     * research papers,
     * experience reports,
     * tool demonstrations.

The final versions of accepted papers will be published in Electronic  
Notes in
Theoretical Computer Science (ENTCS), Elsevier Science, and will be made
available during the workshop.

Each submission must:
     * be original, i.e. not published or submitted elsewhere,
     * contain a clear motivation,
     * contain a thorough analysis of the claimed results
       (not for tool demonstrations),
     * be written in less than 15 pages (research papers and  
experience reports),      or less than 5 pages (tool demonstrations),
     * specify which category (research, experience, tool demonstration)
       the paper is to be considered under,
     * use the ENTCS style.

The authors of the research papers and experience reports are  
required to give
a 25 minute presentation at LDTA 2008. The authors of the tool  
demonstrations
are required to give a 15 minute introduction to the tool, and to  
demonstrate
their tool in a more interactive (parallel) session during 90 minutes.

The authors of the best full-length papers will be invited to write a  
journal
version of their paper which will be separately reviewed and, assuming
acceptance, be published in journal form. As in past years, this will  
be done
in a special issue devoted to LDTA 2008 of the journal Science of  
Computer
Programming (Elsevier Science).

The authors of the best tool demonstrations will be invited to write  
a short
paper and submit the source of code of their tool, which will both be
separately reviewed and, assuming acceptance, be published in the  
special issue
on Experimental Software and Toolkits (EST) of the journal Science of  
Computer
Programming (Elsevier Science).

Please email your submission to both a.johnstone at rhul.ac.uk and
jurgen.vinju at cwi.nl

== Important Dates ==
     * Abstract submission deadline:
	Friday November 30th, 2007
     * Paper and tool demo submission deadline:
	Friday December 7th, 2007
     * Notification of acceptance:
	Friday February 1st, 2008
     * Workshop date:
	Saturday April 5th, 2008


From Waverly.Edwards at genesys.com  Tue Sep  4 12:30:38 2007
From: Waverly.Edwards at genesys.com (Edwards, Waverly)
Date: Tue, 4 Sep 2007 15:30:38 -0400
Subject: [antlr-interest] using ANTLR with netbeans
In-Reply-To: <968127.69561.qm@web58115.mail.re3.yahoo.com>
References: <FF993752CB890B4EB591BE5450C37BF1B053FF@navamane001.ad.internal.corp>
	<968127.69561.qm@web58115.mail.re3.yahoo.com>
Message-ID: <FF993752CB890B4EB591BE5450C37BF1B05527@navamane001.ad.internal.corp>

I thank you very much for this.  Unfortunately I am still unable to put
the pieces together.
 
 
W.

________________________________

From: ali azimi [mailto:aliaazimi at yahoo.com] 
Sent: Tuesday, September 04, 2007 9:08 AM
To: Edwards, Waverly
Subject: Re: [antlr-interest] using ANTLR with netbeans


Hi,
 
I have had all those problems before. I use NeatBean 5.5. I have
enclosed the zip file of all the Runtime packages needed. I did this:
 
There are two files in the enclosed zip. org and antlr. I placed the two
files in the source file of the package containing my antlr works. It
has been working for me perfectly.
 
 
Best wishes,
 
Al


"Edwards, Waverly" <Waverly.Edwards at genesys.com> wrote:


	I am using netbeans 5.5.1 and I've been unable to figure out how
to use the runtime jar as a library. 
	I've placed the file in the classpath, added a new classpath,
added the source directory and have not had success being able to use
ANTLR with netbeans.
	Is there a way to do this? 

	W. 


________________________________

Take the Internet to Go: Yahoo!Go puts the Internet in your pocket:
<http://us.rd.yahoo.com/evt=48253/*http://mobile.yahoo.com/go?refer=1GNX
IC>  mail, news, photos & more. 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070904/b9cb2c21/attachment.html 

From Alan_Rooks at amis.com  Tue Sep  4 13:42:32 2007
From: Alan_Rooks at amis.com (Alan Rooks)
Date: Tue, 04 Sep 2007 16:42:32 -0400
Subject: [antlr-interest] V3 token vocabulary questions
Message-ID: <46DDC338.1224ED3E@amis.com>

I'm moving a parser (only - hand-implemented lexer) grammar from v2 to v3,
and I'm having some problems with token vocabularies.

In the v2 grammar, I used the importVocab=X option to import a token types
file named XTokenTypes.txt.  That file contained token definitions that were
automatically generated during build, and were used by both the lexer and
the parser.  Some of the token definitions used a "paraphrase" string.  Here
are some of the token definitions:
    CONSTANT ("a constant") = 10
    BREAKPOINT              = 11
    PLUS ("+")              = 12

I'm having some trouble getting equivalent functionality in v3.  The book's
description of the tokenVocab option says "The value associated with this
option is the name of a grammar, not the name of a file".  What does that
actually mean?  Since it's a hand-generated lexer, I don't have a grammar
that defines the tokens.  When I say tokenVocab=X, it appears to be just
looking for X.tokens and not X.g or XLexer.java or anything.  That's good,
but can I count on it continuing to work?

The "name" of a grammar is a bit variable anyway: a combined grammar has one
name for two grammars (or there are two names, XLexer and XParser, so X
names neither of them), and is a "lexer grammar" named X, or XLexer (similar
for parser)?

I haven't been able to figure out how to get the paraphrases (e.g. "a
constant, or "+") into the X.tokens file.  Is it possible?  The book doesn't
say anything about what must be there and in what format, when you do
importVocab=X.  The v2 syntax doesn't work.  Has anyone else figured this
out?

Thanks in advance,

Alan

-------------------------
Alan Rooks
AMI Semiconductor Canada
http://www.amis.com/
-------------------------
AMI Semiconductor - "Silicon Solutions for the Real World"
NOTICE: 
This electronic message contains information that may be confidential or privileged. The information is intended for the use of the individual or entity named above. If you are not the intended recipient, please be aware that any disclosure, copying, distribution or use of the contents of this information is prohibited. If you received this electronic message in error, please notify the sender and delete the copy you received.


From antlr at mirality.co.nz  Tue Sep  4 14:13:01 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 05 Sep 2007 09:13:01 +1200
Subject: [antlr-interest] V3 token vocabulary questions
In-Reply-To: <46DDC338.1224ED3E@amis.com>
References: <46DDC338.1224ED3E@amis.com>
Message-ID: <20070904211316.8D8AA11EAF0@www.antlr.org>

At 08:42 5/09/2007, Alan Rooks wrote:
 >I'm having some trouble getting equivalent functionality in 
v3.
 >The book's description of the tokenVocab option says "The value
 >associated with this option is the name of a grammar, not the
 >name of a file".  What does that actually mean?

I suspect it just means that you're supposed to use the base name 
(X) instead of the token filename (X.tokens) or the lexer filename 
(XLexer.yourtargetlanguage).

 >I haven't been able to figure out how to get the paraphrases 
(e.g.
 >"a constant, or "+") into the X.tokens file.  Is it 
possible?  The
 >book doesn't say anything about what must be there and in what
 >format, when you do importVocab=X.  The v2 syntax doesn't 
work.
 >Has anyone else figured this out?

As far as I am aware, paraphrases are not (yet) supported in 
v3.  So you won't be able to import them (just like you can't 
generate them when you *are* using an ANTLR-created lexer).

Most likely once they are supported they'll use a similar syntax 
to v2, but I can't say that for sure :)


From andreas.bartho at inf.tu-dresden.de  Tue Sep  4 14:22:03 2007
From: andreas.bartho at inf.tu-dresden.de (Andreas Bartho)
Date: Tue, 04 Sep 2007 23:22:03 +0200
Subject: [antlr-interest] TreeAdaptor design question
In-Reply-To: <mailman.1.1188932401.15942.antlr-interest@antlr.org>
References: <mailman.1.1188932401.15942.antlr-interest@antlr.org>
Message-ID: <46DDCC7B.1050404@inf.tu-dresden.de>

Hi,

> Why does the method create(Token) return an Object? I'm curious why an
> Object and not a Tree. When you manipulate trees, it seems to cause
> quite a bit of (useless?) casts everywhere...

this is because you might want tree nodes that do not implement ANTLR's 
tree interface. When I made a TreeAdaptor to output XML (DOM) I was 
quite happy that I could work with Objects :)

Andreas

From snouto at gmail.com  Wed Sep  5 01:20:14 2007
From: snouto at gmail.com (Mohammed Ibrahim Mohammed)
Date: Wed, 5 Sep 2007 11:20:14 +0300
Subject: [antlr-interest] Embedded Code
Message-ID: <001f01c7ef95$9743b170$0201a8c0@robtronix>

How are you All ?  i am looking forward to extend antlr to generate for me parsers according to a grammar but targeted The MCU of the specific microcontroller using its Specific C Library .....

Any one has a solution , Professor Terence Parr told me something about the string Templates , but all i need is steps to follow , anybody can tell me steps to follow to modify my antlr tool to generate parsers targeted to the Specific MCU Microcontroller i am working on .

Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070905/3826c173/attachment.html 

From antlr at mirality.co.nz  Wed Sep  5 01:33:20 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 05 Sep 2007 20:33:20 +1200
Subject: [antlr-interest] Embedded Code
In-Reply-To: <001f01c7ef95$9743b170$0201a8c0@robtronix>
References: <001f01c7ef95$9743b170$0201a8c0@robtronix>
Message-ID: <20070905084230.28DF011EB50@www.antlr.org>

At 20:20 5/09/2007, Mohammed Ibrahim Mohammed wrote:
>How are you All ?  i am looking forward to extend antlr to 
>generate for me parsers according to a grammar but targeted The 
>MCU of the specific microcontroller using its Specific C Library 
>.....
>
>Any one has a solution , Professor Terence Parr told me something 
>about the string Templates , but all i need is steps to follow , 
>anybody can tell me steps to follow to modify my antlr tool to 
>generate parsers targeted to the Specific MCU Microcontroller i 
>am working on .

That depends on exactly what you're trying to do.  If you're 
trying to create a parser that runs on your host computer and 
generates source code to be compiled into a program that runs on 
your target microcontroller, then StringTemplate could be a good 
way to go, or you could just hand-roll some useful output from 
embedded actions or a generated AST.

If you're trying to create a parser that itself runs on your 
target microcontroller, then your best bet would be to use ANTLR's 
C target, since almost everything can compile standard C.  (If 
you've got a higher-end microcontroller you might be able to use 
Java instead.)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070905/fe737764/attachment-0001.html 

From mazzucco at iiasa.ac.at  Wed Sep  5 03:26:50 2007
From: mazzucco at iiasa.ac.at (Rupert Mazzucco)
Date: Wed, 5 Sep 2007 12:26:50 +0200
Subject: [antlr-interest] C target; need to close stream?
Message-ID: <20070905122650.d2c096b4.mazzucco@iiasa.ac.at>

Hello,

when I do the wiki sequence

  pANTLR3_INPUT_STREAM
      pIStream = antlr3AsciiFileStreamNew((pANTLR3_UINT8)filename);
  ...
  pParser->file(pParser);

do I need to close the file stream somehow and make a new input stream
object before I can lex and parse the same file again (with a different
grammar), or can I reuse the pIStream handler as is?  Do the old lexer
and parser have methods to "delete" them, and is this necessary?

Thank you
Rupert
-- 
Rupert Mazzucco         <mazzucco at iiasa.ac.at>
Research Scholar, Evolution and Ecology Program
IIASA - Institute for Applied Systems Analysis
Schlossplatz 1, 2361 Laxenburg, Austria
Phone: +43 2236 807 522   Fax: +43 2236 713 13

From antlr at mirality.co.nz  Wed Sep  5 04:23:16 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 05 Sep 2007 23:23:16 +1200
Subject: [antlr-interest] C target; need to close stream?
In-Reply-To: <20070905122650.d2c096b4.mazzucco@iiasa.ac.at>
References: <20070905122650.d2c096b4.mazzucco@iiasa.ac.at>
Message-ID: <20070905112327.D91A711EB89@www.antlr.org>

At 22:26 5/09/2007, Rupert Mazzucco wrote:
 >when I do the wiki sequence
 >
 >  pANTLR3_INPUT_STREAM
 >      pIStream =
 >antlr3AsciiFileStreamNew((pANTLR3_UINT8)filename);
 >  ...
 >  pParser->file(pParser);
 >
 >do I need to close the file stream somehow and make a new input
 >stream object before I can lex and parse the same file again
 >(with a different grammar), or can I reuse the pIStream handler
 >as is?

Have a look in antlr3input.h -- there's a "reset" method on that 
object that should reset it back to the beginning so you can pass 
it to another lexer.

 >Do the old lexer and parser have methods to "delete" them, and 
is
 >this necessary?

Yes, they do (have a look in the header files, and the 
examples).  It's not strictly necessary, since any memory/handles 
etc allocated by your program will get cleaned up by the OS when 
the program exits, but it's polite to close things when you're 
done with them.  Especially if the program is going to continue 
running for a while after finishing the parse, or if you're 
parsing in a loop.


From atif.azad at hotmail.com  Wed Sep  5 04:27:46 2007
From: atif.azad at hotmail.com (atif azad)
Date: Wed, 05 Sep 2007 16:27:46 +0500
Subject: [antlr-interest] help regarding string templates
Message-ID: <BLU105-F4064C53963D8FCFCA7B2A8E5CB0@phx.gbl>

Hi everyone
I am  student new to antlr. Can any one please tell me how I can I use the 
sting template , so that i dont have to use the print commands in my 
grammer. I just have to print the operation code and operand for an assembly 
language. I would be greatful.
The garmmer is as follows




grammar assemb;


program
    :   (stat)+

    ;

stat : t1=OPCODE operands   { System.out.println("Found numeric: 
"+t1.getText()); };

OPCODE :
     'add'
     |'store'
     |'load'
     |'call'
     |'ret'
     ;


operands:
	r9=REGISTER SEMI	   { System.out.println("Found numeric: "+r9.getText()); }
      | r1=REGISTER COMMA r2=REGISTER SEMI  { System.out.println("Found 
numeric: "+r1.getText()); }
   ;



REGISTER :
        'r1'
        |'r2'
        |'r3'
        |'r4'  ;

NUM  :    '[0-9]+' ;
ID   :    '[a-zA-Z]+' ;


WS
    : (
    | (' ' | '\t'| '\n')
     ) { $channel=HIDDEN; }
    ;

SEMI:
    ';'
   ;
COMMA:
     ','
     ;



Regards
Azad , Atif

_________________________________________________________________
Express yourself instantly with MSN Messenger! Download today it's FREE! 
http://messenger.msn.click-url.com/go/onm00200471ave/direct/01/


From andreas.bartho at inf.tu-dresden.de  Wed Sep  5 08:19:09 2007
From: andreas.bartho at inf.tu-dresden.de (Andreas Bartho)
Date: Wed, 05 Sep 2007 17:19:09 +0200
Subject: [antlr-interest] Lexer Code and 65535 bytes limit
Message-ID: <46DEC8ED.4070907@inf.tu-dresden.de>

Hi,

when creating a Lexer I noticed that the generated method mTokens() can 
be quite large, depending on how many tokens are specified, resulting in 
an error (because Java methods cannot be > 65535 bytes). Given the 
following grammar:

lexer grammar StupidHack;

@lexer::header {
package csharp.parser;
}


FALSE : 'false' ;
TRUE : 'true' ;
DEFINE : 'define' ;
UNDEF : 'undef' ;
IF : 'if' ;
ELIF : 'elif' ;
ELSE : 'else' ;
ENDIF : 'endif' ;
ERROR : 'error' ;
WARNING : 'warning' ;
REGION : 'region' ;
ENDREGION : 'endregion' ;
PRAGMA : 'pragma' ;
LINE : 'line' ;
LOGICALOR : '||' ;
LOGICALAND : '&&' ;
EXCLAM : '!' ;
EQUALS : '==' ;
NOTEQUALS : '!=' ;
LPAREN  : '(' ;
RPAREN  : ')' ;
NUMBER : '#' ;

Identifier
     :   Lettercharacter+
     ;

fragment
Lettercharacter
     :   '\u0041'..'\u005a'
     |   '\u0061'..'\u007a'
     |   '\u00aa'
     |   '\u00b5'

	/* snip */

     |   '\uffc2'..'\uffc7'
     |   '\uffca'..'\uffcf'
     |   '\uffd2'..'\uffd7'
     |   '\uffda'..'\uffdc'
     ;


something like the following is created:

     public void mTokens() throws RecognitionException {
         int alt2=23;
         switch ( input.LA(1) ) {
         case 'f':
             {
             int LA2_1 = input.LA(2);

             if ( (LA2_1=='a') ) {
                 int LA2_19 = input.LA(3);

                 if ( (LA2_19=='l') ) {
                     int LA2_33 = input.LA(4);

                     if ( (LA2_33=='s') ) {
                         int LA2_46 = input.LA(5);

                         if ( (LA2_46=='e') ) {
                             int LA2_59 = input.LA(6);

                             if ( ((LA2_59>='A' && 
LA2_59<='Z')||(LA2_59>='a' && 
LA2_59<='z')||LA2_59=='\u00AA'||LA2_59=='\u00B5'||(LA2_59>='\uFFC2' && 
LA2_59<='\uFFC7')||(LA2_59>='\uFFCA' && 
LA2_59<='\uFFCF')||(LA2_59>='\uFFD2' && 
LA2_59<='\uFFD7')||(LA2_59>='\uFFDA' && LA2_59<='\uFFDC')) ) {
                                 alt2=23;
                             }
                             else {
                                 alt2=1;}
                         }
                         else {
                             alt2=23;}
                     }
                     else {
                         alt2=23;}
                 }
                 else {
                     alt2=23;}
             }
             else {
                 alt2=23;}
             }
             break;
         case 't':
             {
             int LA2_2 = input.LA(2);

             if ( (LA2_2=='r') ) {
                 int LA2_20 = input.LA(3);
              ....

This becomes very huge very fast.
If I add some kind of dummy rule at the end of the grammar, the 
generated code is completely different and the size problem does not occur.

New rule:

STUPID_HACK
     :   'a'+ '.'
     ;

Generated code:

    public void mTokens() throws RecognitionException {
         int alt3=24;
         alt3 = dfa3.predict(input);
         switch (alt3) {
             case 1 :
                 // StupidHack.g:1:10: FALSE
                 {
                 mFALSE();

                 }
                 break;
             case 2 :
                 // StupidHack.g:1:16: TRUE
                 {
                 mTRUE();

                 }
                 break;
             case 3 :
                 // StupidHack.g:1:21: DEFINE
                 {
                 mDEFINE();

                 }
                 break;
             case 4 :
                 // StupidHack.g:1:28: UNDEF
                 {
                 mUNDEF();

                 }
                 break;
                ...

What is the reason for the different behaviour, and would it be possible 
to discard the first type of generated code completely?

Andreas

From antlr at jazillian.com  Wed Sep  5 14:03:02 2007
From: antlr at jazillian.com (Andy Tripp)
Date: Wed, 05 Sep 2007 17:03:02 -0400
Subject: [antlr-interest] problem with keywords-as-identifiers
Message-ID: <46DF1986.4050002@jazillian.com>

I'm having a problem...in the language I'm parsing, keywords are allowed 
as identifiers,
so for each keyword, I have a of rule like this:

keyPROPERTY:
    {validateIdentifierKey("PROPERTY")}? value=Identifier
    -> PROPERTY[$value]
    ;

And then, of course, other rules that refer to these rules like this:

propertySetDeclaration:
    modifiers? keyPROPERTY 'SET' Identifier (LPAREN formalParamList 
RPAREN)? eos
        statements keyEND keyPROPERTY
    -> ^(PROPERTY_SET_DECLARATION modifiers? Identifier formalParamList?
        statements)
    ;

The problem is that there is no "PROPERTY" keyword in the input, yet the 
generated
keyPROPERTY() method is not setting the "failed" variable to true. The 
generated parser
code looks like this:

    public final keyPROPERTY_return keyPROPERTY() throws 
RecognitionException {
       try {
            ...
            if ( !(validateIdentifierKey("PROPERTY")) ) {
                if (backtracking>0) {failed=true; return retval;}
                throw new FailedPredicateException(input, "keyPROPERTY", 
"valida
teIdentifierKey(\"PROPERTY\")");
            }
            ...
        }
        catch (RecognitionException re) {
            reportError(re);
            recover(input,re);
        }
        ...
        return retval;
}

By adding some tracing, I see that my validateIdentifierKey() method is, 
in fact, returning
false. And backtracking is 0, so a FailedPredicateException is thrown 
and then caught
down at the bottom of the method. The "failed" variable is never set to 
false, but it's checked
in the calling method just after the call to keyPROPERTY().

So I'm wondering if the logic in the generated code is right. Isn't 
there a case here where
the keyPROPERTY method is never setting the "failed" variable?

Thanks in advance,
Andy




From dave at badgers-in-foil.co.uk  Thu Sep  6 00:52:45 2007
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Thu, 6 Sep 2007 07:52:45 +0000
Subject: [antlr-interest] Path for tokenVocab
In-Reply-To: <20070815192645.GA2054@badgers-in-foil.co.uk>
References: <20070813210130.GA32729@badgers-in-foil.co.uk>
	<F187AAC1-83CF-4EC5-BBD7-06A3B152B945@cs.usfca.edu>
	<20070815192645.GA2054@badgers-in-foil.co.uk>
Message-ID: <20070906075244.GB5076@badgers-in-foil.co.uk>

On Wed, Aug 15, 2007 at 07:26:58PM +0000, David Holroyd wrote:
> On Mon, Aug 13, 2007 at 03:18:18PM -0700, Terence Parr wrote:
> > 
> > On Aug 13, 2007, at 2:01 PM, David Holroyd wrote:
> > >So, it would be *really* nice if the tokenVocab option value could  
> > >take a 'package prefix',
> > >
> > >e.g.
> > >  tokenVocab=org/example/SomeGrammar;
> > >or
> > >  tokenVocab=org.example.SomeGrammar;
> 
> > Hmm...the problem is that I envisioned the tokenVocab as a grammar  
> > name not a file name.  We'd really need org/example/ 
> > SomeGrammar.tokens...hmm...Can you list multiple patterns in the -lib  
> > option? (can't remember if I have implemented that).
> 
> Tool.java only allows for a single libDirectory.  Even if multiple dirs
> could be specified, it would be nice to accommodate the pathological case
> of trying to support multiple grammars with the same name (maybe other
> people wrote the grammars, and I'm just trying to use the .tokens
> files).
> 
> Regarding grammar-name vs. file-name, is it reasonable to use the same
> sort of translation as for Java class files.  e.g.
> 
>   tokenVocab = org.example.SomeGrammar
>   token file = ${lib}/org/example/SomeGrammar.tokens
> 
> That should be backwards compatible with the current tokenVocab usage, I
> think?

Since I'm having this problem in the context of the Maven plugin for
ANTLR3, I've created an issue over here to track it:

  http://jira.codehaus.org/browse/MOJO-905


Ter,

Do you think this is something that ANTLR should handle better, or
should I be trying to work around this in the plugin?


ta,
dave

-- 
http://david.holroyd.me.uk/

From snouto at gmail.com  Thu Sep  6 05:56:01 2007
From: snouto at gmail.com (Mohammed Ibrahim)
Date: Thu, 6 Sep 2007 15:56:01 +0300
Subject: [antlr-interest] Version Problem
Message-ID: <002201c7f085$4eb2b640$0201a8c0@robtronix>

hello folks ,

i have a problem in here , i would like to parse this string
=======================================
antlr / 2.0    <----- this string
=======================================
i wrote for it this EBNF


VERSION : LETTER DECIMAL;

DECIMAL : INT ('.' INT)+;

LETTERS: 'a'..'z'+;

INT:  '0'..'9'+;

WS : ( '  ' |'\r'|'\n'|'/') +  { skip(); };
==========================================

It doesn't want to recognize it i don't want why ?????
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070906/9c8dc48e/attachment.html 

From martin.kohl at gmail.com  Thu Sep  6 07:17:06 2007
From: martin.kohl at gmail.com (Martin Kohl)
Date: Thu, 6 Sep 2007 16:17:06 +0200
Subject: [antlr-interest]  getCharPositionInLine
Message-ID: <6d93992c0709060717y18d25807y64c9bbe52f69154b@mail.gmail.com>

Hiya,

I'm trying to keep track of where all my identifiers are at. The following
is from my TreeWalker grammar:

String id; int idLine, idCol;

identifier
    :    IDENT
        {    id= $IDENT.text;
            idLine=    $IDENT.getLine();
            idCol=    $IDENT.getCharPositionInLine();
        }

the id.text works, as does getLine(). getCharPositionInLine() always gives
me 0 though, target language being java.

Any ideas?

Thanks and kind Regards,
Martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070906/94df40dc/attachment.html 

From michael at mosmann.de  Thu Sep  6 09:14:43 2007
From: michael at mosmann.de (Michael Mosmann)
Date: Thu, 06 Sep 2007 18:14:43 +0200
Subject: [antlr-interest] Catch the rest
Message-ID: <1189095283.29866.8.camel@apple.internal.net>

Hello,

maybe there is an easy way. Currently i read the ANTLR Reference Book.
But i think i am on a wrong way.

I have following text:
----------------------
Some text an then ${varname.Property} and text.
----------------------

what i want is
--Text
 |
 -${ reference }
 |   |
 |   -varname.Property
 |
 -Text

Is it possible to get this result without a treeparser? Is there
something like
------------------------------
block:
  (text | reference)+;

reference:
  ('a'..  .. .  ..'Z'|'.')+;

text: <get this, if nobody wants it>;
------------------------------
?

Thanks..
Michael Mosmann




From martin.kohl at gmail.com  Thu Sep  6 10:06:00 2007
From: martin.kohl at gmail.com (Martin Kohl)
Date: Thu, 6 Sep 2007 19:06:00 +0200
Subject: [antlr-interest]  treewalker $expression.text?
Message-ID: <6d93992c0709061006v1aa04d69pb1d6e04ab262604d@mail.gmail.com>

Hello,

Why can't I use the form $ruleName.text in my actions in the tree walker
grammar? For example:

rule :
   eitherRule {System.out.println($rule.text);}
|  orRule
;

works just fine if it's in the normal Parser Grammar, but not if I try to do
it in the TreeWalker grammar. Is there any way around this? Also, I notice I
can do this with Tokens in the TreeGrammar without problems. So I can get it
to print an IDENT, but if there's an expression specifying that IDENT to
follow, I can't print that in the TreeWalker.

Please help, I like the Tree Walker concept and would hate to have to revert
to moving all the actions to the normal Parser Grammar.

Thanks!
Martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070906/bba419ff/attachment.html 

From parrt at cs.usfca.edu  Thu Sep  6 10:39:50 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 6 Sep 2007 10:39:50 -0700
Subject: [antlr-interest] treewalker $expression.text?
In-Reply-To: <6d93992c0709061006v1aa04d69pb1d6e04ab262604d@mail.gmail.com>
References: <6d93992c0709061006v1aa04d69pb1d6e04ab262604d@mail.gmail.com>
Message-ID: <C14D97EB-FF6F-4F43-88BC-62A828568D03@cs.usfca.edu>

$text works in tree grammars only if it's got a single root.  A  
limitation (for now).

If eitherRule is a single subtree, should work.
get text for multiple elements individually.

Ter
On Sep 6, 2007, at 10:06 AM, Martin Kohl wrote:

> Hello,
>
> Why can't I use the form $ruleName.text in my actions in the tree  
> walker grammar? For example:
>
> rule :
>    eitherRule {System.out.println($rule.text);}
> |  orRule
> ;
>
> works just fine if it's in the normal Parser Grammar, but not if I  
> try to do it in the TreeWalker grammar. Is there any way around  
> this? Also, I notice I can do this with Tokens in the TreeGrammar  
> without problems. So I can get it to print an IDENT, but if there's  
> an expression specifying that IDENT to follow, I can't print that  
> in the TreeWalker.
>
> Please help, I like the Tree Walker concept and would hate to have  
> to revert to moving all the actions to the normal Parser Grammar.
>
> Thanks!
> Martin


From rschulz at sonic.net  Thu Sep  6 11:22:24 2007
From: rschulz at sonic.net (Randall R Schulz)
Date: Thu, 6 Sep 2007 11:22:24 -0700
Subject: [antlr-interest] Dealing With "missing attribute access on rule
	scope"
Message-ID: <200709061122.24318.rschulz@sonic.net>

Hi,

I have this grammar rule

interpretableName
    :   BareName
    |   EnclosedName
    ;


There are a few places in my grammar where I want to take the Token
yielded by this rule and pass it to some Java action code:

binding
returns [ Variable var ]
    :   interpretableName
        {
            $var = makeIndividualVariable($interpretableName);
        }


But I get the ever-popular diagnostic:

error(117): CLIFBuilder.g:0:0: missing attribute access on rule scope: interpretableName


This is a tree parser:

tree grammar        CLIFBuilder;


How do I get the whole Token in the "binding" rule above?


Thanks.


Randall Schulz

From rschulz at sonic.net  Thu Sep  6 12:14:51 2007
From: rschulz at sonic.net (Randall R Schulz)
Date: Thu, 6 Sep 2007 12:14:51 -0700
Subject: [antlr-interest] Dealing With "missing attribute access on rule
	scope"
In-Reply-To: <200709061122.24318.rschulz@sonic.net>
References: <200709061122.24318.rschulz@sonic.net>
Message-ID: <200709061214.51268.rschulz@sonic.net>

Hello again,

I see one problem with my parser is that tree parsers don't deal in 
Tokens, they deal in Trees. (I had to put dummies in the place of the 
erroneous, unqualified access so I could generate code to examine.)

However, I'd still like to get at that Tree returned by this rule:

interpretableName
? ? : ? BareName
? ? | ? EnclosedName
? ? ;


Is that possible? If so, how?

Randall Schulz


On Thursday 06 September 2007 11:22, Randall R Schulz wrote:
> Hi,
>
> I have this grammar rule
>
> interpretableName
>     :   BareName
>     |   EnclosedName
>     ;
>
>
> There are a few places in my grammar where I want to take the Token
> yielded by this rule and pass it to some Java action code:
>
> binding
> returns [ Variable var ]
>
>     :   interpretableName
>
>         {
>             $var = makeIndividualVariable($interpretableName);
>         }
>
>
> But I get the ever-popular diagnostic:
>
> error(117): CLIFBuilder.g:0:0: missing attribute access on rule
> scope: interpretableName
>
>
> This is a tree parser:
>
> tree grammar        CLIFBuilder;
>
> ...

From martin.kohl at gmail.com  Thu Sep  6 12:22:17 2007
From: martin.kohl at gmail.com (Martin Kohl)
Date: Thu, 6 Sep 2007 21:22:17 +0200
Subject: [antlr-interest] treewalker $expression.text?
In-Reply-To: <C14D97EB-FF6F-4F43-88BC-62A828568D03@cs.usfca.edu>
References: <6d93992c0709061006v1aa04d69pb1d6e04ab262604d@mail.gmail.com>
	<C14D97EB-FF6F-4F43-88BC-62A828568D03@cs.usfca.edu>
Message-ID: <6d93992c0709061222r6d47626dgc4b78c84edd1cc41@mail.gmail.com>

I don't understand what you mean with a single subtree and multiple
subtrees. As it stands now, my Tree Walker Grammar matches the Parser
Grammar for most of the rules.
A few Parser Rules have been rewritten though. Here is an example containing
a rewritten rule and one that is left alone:

Parser Rule:

tokens {
PLUS;
}
expr
: aRule PlusTok bRule -> ^(PLUS aRule bRule)
| aRule MinusTok bRule
;

Tree Walker:
expr
: ^(PLUS aRule bRule)
| aRule MinusTok bRule
;

Assuming aRule and bRule are equally complex (multiple?) rules, how would
you suggest getting the text individually / how should the grammar be
reformed so as to have a single subtree? Do you mean with single subtree a
rule that only contains one possiblity?
How would you attempt to get the text from the expr in the following rule if
it was added to this grammar?:
stmt
: expr SemiColonToken
;

Thanks for the support,
kind Regards,
Martin


On 9/6/07, Terence Parr <parrt at cs.usfca.edu> wrote:
>
> $text works in tree grammars only if it's got a single root.  A
> limitation (for now).
>
> If eitherRule is a single subtree, should work.
> get text for multiple elements individually.
>
> Ter
> On Sep 6, 2007, at 10:06 AM, Martin Kohl wrote:
>
> > Hello,
> >
> > Why can't I use the form $ruleName.text in my actions in the tree
> > walker grammar? For example:
> >
> > rule :
> >    eitherRule {System.out.println($rule.text);}
> > |  orRule
> > ;
> >
> > works just fine if it's in the normal Parser Grammar, but not if I
> > try to do it in the TreeWalker grammar. Is there any way around
> > this? Also, I notice I can do this with Tokens in the TreeGrammar
> > without problems. So I can get it to print an IDENT, but if there's
> > an expression specifying that IDENT to follow, I can't print that
> > in the TreeWalker.
> >
> > Please help, I like the Tree Walker concept and would hate to have
> > to revert to moving all the actions to the normal Parser Grammar.
> >
> > Thanks!
> > Martin
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070906/07d0c65c/attachment.html 

From kenny at kmdconsulting.ca  Thu Sep  6 12:31:11 2007
From: kenny at kmdconsulting.ca (Kenny MacDermid)
Date: Thu, 6 Sep 2007 15:31:11 -0400
Subject: [antlr-interest] Does an actual repository exist for antlr?
Message-ID: <8367efd50709061231k6f955696r68039afc3b3374e7@mail.gmail.com>

Hello,

I'm just looking to compile Antlr from sources and I don't see any links to
an actual repository.

I can pull down the latest sources, but for later creating possible patches
and staying up to date this is not really optimal.

Is there a git/svn/cvs/____ repo hosted anywhere I can pull from?

Thanks,

Kenny
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070906/3fc2cc53/attachment.html 

From kenny at kmdconsulting.ca  Thu Sep  6 13:04:58 2007
From: kenny at kmdconsulting.ca (Kenny MacDermid)
Date: Thu, 6 Sep 2007 16:04:58 -0400
Subject: [antlr-interest] Inaccurate - FAQ - How do I rebuild ANTLR v3?
Message-ID: <8367efd50709061304u19e58be7l7c6c9438f6e50de7@mail.gmail.com>

Hello,

I tried following the instructions on this wiki page using the 3.0.1 source
with no luck.

First error is that antlr-2 is not put in the classpath by ant. It's at a
known location in the lib directory, so it would be nice if this was done
for you.

Second junit is a build dependency but not included (or listed anywhere).
(This is where a build structure like maven really shines)

After adding them both to my path I am now getting:

compile:
    [mkdir] Created dir: /antlrSource/antlr-3.0.1/build/classes
  [myjavac] Compiling 126 source files to /antlrSource/antlr-3.0.1
/build/classes
  [myjavac] /antlrSource/antlr-3.0.1/codegen/ANTLRLexer.java:61: duplicate
class: org.antlr.tool.ANTLRLexer
....

It effects the following files:
/antlrSource/antlr-3.0.1/codegen/ANTLRLexer.java:61: duplicate class:
org.antlr.tool.ANTLRLexer
/antlrSource/antlr-3.0.1/codegen/ANTLRParser.java:72: duplicate class:
org.antlr.tool.ANTLRParser
/antlrSource/antlr-3.0.1/codegen/ANTLRTokenTypes.java:37: duplicate class:
org.antlr.tool.ANTLRTokenTypes
/antlrSource/antlr-3.0.1/codegen/ANTLRTreePrinter.java:52: duplicate class:
org.antlr.tool.ANTLRTreePrinter
/antlrSource/antlr-3.0.1/codegen/ANTLRTreePrinterTokenTypes.java:33:
duplicate class: org.antlr.tool.ANTLRTreePrinterTokenTypes
/antlrSource/antlr-3.0.1/codegen/AssignTokenTypesWalker.java:98: duplicate
class: org.antlr.tool.AssignTokenTypesWalker
/antlrSource/antlr-3.0.1/codegen/AssignTokenTypesWalkerTokenTypes.java:36:
duplicate class: org.antlr.tool.AssignTokenTypesWalkerTokenTypes
/antlrSource/antlr-3.0.1/codegen/CodeGenTreeWalker.java:59: duplicate class:
org.antlr.codegen.CodeGenTreeWalker
/antlrSource/antlr-3.0.1/codegen/CodeGenTreeWalkerTokenTypes.java:39:
duplicate class: org.antlr.codegen.CodeGenTreeWalkerTokenTypes
/antlrSource/antlr-3.0.1/codegen/DefineGrammarItemsWalker.java:47: duplicate
class: org.antlr.tool.DefineGrammarItemsWalker
/antlrSource/antlr-3.0.1/codegen/DefineGrammarItemsWalkerTokenTypes.java:34:
duplicate class: org.antlr.tool.DefineGrammarItemsWalkerTokenTypes
/antlrSource/antlr-3.0.1/codegen/TreeToNFAConverter.java:49: duplicate
class: org.antlr.tool.TreeToNFAConverter
/antlrSource/antlr-3.0.1/codegen/TreeToNFAConverterTokenTypes.java:35:
duplicate class: org.antlr.tool.TreeToNFAConverterTokenTypes

I haven't had a chance to figure out why yet.

Kenny
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070906/27edd692/attachment.html 

From pink at odahoda.de  Thu Sep  6 13:23:59 2007
From: pink at odahoda.de (Benjamin Niemann)
Date: Thu, 06 Sep 2007 22:23:59 +0200
Subject: [antlr-interest] Does an actual repository exist for antlr?
References: <8367efd50709061231k6f955696r68039afc3b3374e7@mail.gmail.com>
Message-ID: <fbpnld$j7g$1@sea.gmane.org>

Hi,

Kenny MacDermid wrote:

> I'm just looking to compile Antlr from sources and I don't see any links
> to an actual repository.
> 
> I can pull down the latest sources, but for later creating possible
> patches and staying up to date this is not really optimal.
> 
> Is there a git/svn/cvs/____ repo hosted anywhere I can pull from?

There is a perforce repository, but without anonymous access (AFAIK Ter does
not have a license permitting anonymous access). The closest thing right
now is the fisheye frontend for the repository at
<http://fisheye2.cenqua.com/browse/antlr>.
Someone suggested a SVN mirror of the perforce repos for anonymous access
recently, but I don't know, if this is more than just an idea...

HTH

-- 
Benjamin Niemann
Email: pink at odahoda dot de
WWW: http://pink.odahoda.de/


From kenny at kmdconsulting.ca  Thu Sep  6 14:26:02 2007
From: kenny at kmdconsulting.ca (Kenny MacDermid)
Date: Thu, 6 Sep 2007 17:26:02 -0400
Subject: [antlr-interest] Does an actual repository exist for antlr?
In-Reply-To: <fbpnld$j7g$1@sea.gmane.org>
References: <8367efd50709061231k6f955696r68039afc3b3374e7@mail.gmail.com>
	<fbpnld$j7g$1@sea.gmane.org>
Message-ID: <8367efd50709061426i6f3b4e23te872239315e6f6c1@mail.gmail.com>

On 9/6/07, Benjamin Niemann <pink at odahoda.de> wrote:
>
> Kenny MacDermid wrote:
>
> > I'm just looking to compile Antlr from sources and I don't see any links
> > to an actual repository.
> >
> > I can pull down the latest sources, but for later creating possible
> > patches and staying up to date this is not really optimal.
> >
> > Is there a git/svn/cvs/____ repo hosted anywhere I can pull from?
>
> There is a perforce repository, but without anonymous access (AFAIK Ter
> does
> not have a license permitting anonymous access). The closest thing right
> now is the fisheye frontend for the repository at
> <http://fisheye2.cenqua.com/browse/antlr>.
> Someone suggested a SVN mirror of the perforce repos for anonymous access
> recently, but I don't know, if this is more than just an idea...


That's kind of disappointing.

git 1.5.3 includes a nice git-p4import.py script for creating git
repositories from perforce.

Kenny
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070906/7ff82eff/attachment.html 

From Waverly.Edwards at genesys.com  Thu Sep  6 14:52:31 2007
From: Waverly.Edwards at genesys.com (Edwards, Waverly)
Date: Thu, 6 Sep 2007 17:52:31 -0400
Subject: [antlr-interest] using ANTLR with netbeans
In-Reply-To: <698938.72295.qm@web58111.mail.re3.yahoo.com>
References: <FF993752CB890B4EB591BE5450C37BF1B05527@navamane001.ad.internal.corp>
	<698938.72295.qm@web58111.mail.re3.yahoo.com>
Message-ID: <FF993752CB890B4EB591BE5450C37BF1B058DB@navamane001.ad.internal.corp>

I haven't had the opportunity yet to try this out.  I've been pulled
away for other work but will let you know how this all turns out as soon
as possible.
 
 
Thank you,
 
 
W.

________________________________

From: ali azimi [mailto:aliaazimi at yahoo.com] 
Sent: Tuesday, September 04, 2007 6:14 PM
To: Edwards, Waverly
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] using ANTLR with netbeans


Hi,
 
I hope by writing "antlr works" in my previous email, I did not cause
any confusion. By "antlr works", I meant all your java classes which are
produced by antlr and you want to execute in netBeans environment. I try
to explain it more clearly. I hope it works. I know how frustrating it
can be.
 
As I explained previously, you need to place the two runtime files
(antlr and org which I gave you not anything else) in the source package
you keep your java files produced by antlr like lexer, parser and tree
walker. In my machine, the runtime files (org and antlr) are placed at
the address: C:\MyProjects\FinalFinal\src . So as all the other packages
which include my parser, etc produced by antlr. I will send you a
snapshot of the netBeans interface. In the snapshots you can see some
packages which their names start with antlr and org. You need them. But
not the ones for other languages like c and etc. but do not worry they
do not cause any harms. You do not have to go and create packages for
each of them. If you drag and drop the files I gave you to the source
package of the project (like FinalFinal in the snapshot), the files will
look like the ones in the snapshot. Along with them in the same "source
packages", create your classes. (again just drag and drop the text files
of lexer and parser and tree walker created by antlr and stored in an
address similar to C:\tmp\antlrworks into the created package for your
antlr java classes like finalPro at
C:\MyProjects\FinalFinal\src\finalPro. See the snapshot). Make sure the
java classes in your package like finalpro have the name of the right
package "finalPro" and have the import line "import
antlr.RecognitionException;". As java classes produced by antlr do not
have this import line and you have to add it yourself.
 
 
Best of luck,
 
Al


"Edwards, Waverly" <Waverly.Edwards at genesys.com> wrote: 

	I thank you very much for this.  Unfortunately I am still unable
to put the pieces together.
	 
	 
	W.

________________________________

	From: ali azimi [mailto:aliaazimi at yahoo.com] 
	Sent: Tuesday, September 04, 2007 9:08 AM
	To: Edwards, Waverly
	Subject: Re: [antlr-interest] using ANTLR with netbeans
	
	
	Hi,
	 
	I have had all those problems before. I use NeatBean 5.5. I have
enclosed the zip file of all the Runtime packages needed. I did this:
	 
	There are two files in the enclosed zip. org and antlr. I placed
the two files in the source file of the package containing my antlr
works. It has been working for me perfectly.
	 
	 
	Best wishes,
	 
	Al
	
	
	"Edwards, Waverly" <Waverly.Edwards at genesys.com> wrote:


		I am using netbeans 5.5.1 and I've been unable to figure
out how to use the runtime jar as a library. 
		I've placed the file in the classpath, added a new
classpath, added the source directory and have not had success being
able to use ANTLR with netbeans.
		Is there a way to do this? 

		W. 


________________________________

	Take the Internet to Go: Yahoo!Go puts the Internet in your
pocket:
<http://us.rd.yahoo.com/evt=48253/*http://mobile.yahoo.com/go?refer=1GNX
IC>  mail, news, photos & more. 


________________________________

Got a little couch potato? 
Check out fun summer activities for kids.
<http://us.rd.yahoo.com/evt=48248/*http://search.yahoo.com/search?fr=oni
_on_mail&p=summer+activities+for+kids&cs=bz> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070906/274beb10/attachment-0001.html 

From snouto at gmail.com  Thu Sep  6 15:17:06 2007
From: snouto at gmail.com (Mohammed Ibrahim)
Date: Fri, 7 Sep 2007 01:17:06 +0300
Subject: [antlr-interest] Magic problem
Message-ID: <001701c7f0d3$aa8c36f0$0201a8c0@robtronix>

Iam trying to parse GUID that is generated randomly by my application , but you know the problem is that this Hash is generated beginning sometimes by numbers and sometimes by letters that is why i wrote this EBNF for it 


stat : r+;
r  : ( LBL_CLIENT DOT NEW_GUID NEWLINE);
NEW_GUID : MIXED ('-' MIXED)*;
MIXED : ((LETTERS|INT))+;
LETTERS : 'a'..'z'+;
INT : '0'..'9'+;
NEWLINE : '\r'?'\n';
DOT : ':';
LBL_CLIENT
 : ('client_model'|'CLIENT_MODEL');
WS : (' '|'\r'|'\n')+ { $channel = HIDDEN;};


I DON'T KNOW WHAT IS THE PROBLEM IT DOESN'T PARSE CORRECTLY , IN OTHER WINDOW IT PARSED CORRECTLY BUT IN MY MAIN APPLICATION GRAMMAR FILE ,IT DOESN'T WANT TO PARSE THE INPUT CORRECTLY.


ANY HELP .
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070907/93cc5281/attachment.html 

From parrt at cs.usfca.edu  Thu Sep  6 15:23:10 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 6 Sep 2007 15:23:10 -0700
Subject: [antlr-interest] treewalker $expression.text?
In-Reply-To: <6d93992c0709061222r6d47626dgc4b78c84edd1cc41@mail.gmail.com>
References: <6d93992c0709061006v1aa04d69pb1d6e04ab262604d@mail.gmail.com>
	<C14D97EB-FF6F-4F43-88BC-62A828568D03@cs.usfca.edu>
	<6d93992c0709061222r6d47626dgc4b78c84edd1cc41@mail.gmail.com>
Message-ID: <BBF1E9BE-582B-4AF0-B82A-F3F316DC3E8B@cs.usfca.edu>


On Sep 6, 2007, at 12:22 PM, Martin Kohl wrote:

> I don't understand what you mean with a single subtree and multiple  
> subtrees. As it stands now, my Tree Walker Grammar matches the  
> Parser Grammar for most of the rules.
> A few Parser Rules have been rewritten though. Here is an example  
> containing a rewritten rule and one that is left alone:
>
> Parser Rule:
>
> tokens {
> PLUS;
> }
> expr
> : aRule PlusTok bRule -> ^(PLUS aRule bRule)
> | aRule MinusTok bRule
> ;
>
> Tree Walker:
> expr
> : ^(PLUS aRule bRule)
> | aRule MinusTok bRule
> ;

this is explained in the book somewhere, but basically start/stop  
nodes for tree matching rules don't make a whole lot of sense.  if  
those rules match single roots, then do $aRule.text etc...

Ter


From parrt at cs.usfca.edu  Thu Sep  6 15:23:58 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 6 Sep 2007 15:23:58 -0700
Subject: [antlr-interest] Does an actual repository exist for antlr?
In-Reply-To: <8367efd50709061426i6f3b4e23te872239315e6f6c1@mail.gmail.com>
References: <8367efd50709061231k6f955696r68039afc3b3374e7@mail.gmail.com>
	<fbpnld$j7g$1@sea.gmane.org>
	<8367efd50709061426i6f3b4e23te872239315e6f6c1@mail.gmail.com>
Message-ID: <7F68B7B5-4D22-4786-A723-0D46D6BB86CE@cs.usfca.edu>

I can give anybody that wants one a direct p4 account to read directly.

Ter
On Sep 6, 2007, at 2:26 PM, Kenny MacDermid wrote:

>
> On 9/6/07, Benjamin Niemann <pink at odahoda.de> wrote: Kenny  
> MacDermid wrote:
>
> > I'm just looking to compile Antlr from sources and I don't see  
> any links
> > to an actual repository.
> >
> > I can pull down the latest sources, but for later creating possible
> > patches and staying up to date this is not really optimal.
> >
> > Is there a git/svn/cvs/____ repo hosted anywhere I can pull from?
>
> There is a perforce repository, but without anonymous access (AFAIK  
> Ter does
> not have a license permitting anonymous access). The closest thing  
> right
> now is the fisheye frontend for the repository at
> <http://fisheye2.cenqua.com/browse/antlr >.
> Someone suggested a SVN mirror of the perforce repos for anonymous  
> access
> recently, but I don't know, if this is more than just an idea...
>
> That's kind of disappointing.
>
> git 1.5.3 includes a nice git-p4import.py script for creating git  
> repositories from perforce.
>
> Kenny


From parrt at cs.usfca.edu  Thu Sep  6 15:45:57 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 6 Sep 2007 15:45:57 -0700
Subject: [antlr-interest] Can anybody take C# target leadership?
Message-ID: <D2729ACB-AC99-4FA1-AA48-5DA2FC610C89@cs.usfca.edu>

Hi.

I can't figure out what happened to Kunle and Michael.  No response  
to my emails.  I also have no source code other than bytecode to C#  
conversion posted a while back.  If you are a C# person with good  
parsing background, please let me know.

Thanks,
Ter

From win at wincent.com  Thu Sep  6 17:02:10 2007
From: win at wincent.com (Wincent Colaiuta)
Date: Fri, 7 Sep 2007 02:02:10 +0200
Subject: [antlr-interest] Does an actual repository exist for antlr?
In-Reply-To: <8367efd50709061426i6f3b4e23te872239315e6f6c1@mail.gmail.com>
References: <8367efd50709061231k6f955696r68039afc3b3374e7@mail.gmail.com>
	<fbpnld$j7g$1@sea.gmane.org>
	<8367efd50709061426i6f3b4e23te872239315e6f6c1@mail.gmail.com>
Message-ID: <F4C7DDCC-B185-4D19-8B5E-EE468AB2B8CE@wincent.com>

El 6/9/2007, a las 23:26, Kenny MacDermid escribi?:

> On 9/6/07, Benjamin Niemann <pink at odahoda.de> wrote:
>>
>> Kenny MacDermid wrote:
>>
>>> I'm just looking to compile Antlr from sources and I don't see  
>>> any links
>>> to an actual repository.
>>>
>>> I can pull down the latest sources, but for later creating possible
>>> patches and staying up to date this is not really optimal.
>>>
>>> Is there a git/svn/cvs/____ repo hosted anywhere I can pull from?
>>
>> There is a perforce repository, but without anonymous access  
>> (AFAIK Ter
>> does
>> not have a license permitting anonymous access). The closest thing  
>> right
>> now is the fisheye frontend for the repository at
>> <http://fisheye2.cenqua.com/browse/antlr>.
>> Someone suggested a SVN mirror of the perforce repos for anonymous  
>> access
>> recently, but I don't know, if this is more than just an idea...
>
>
> That's kind of disappointing.
>
> git 1.5.3 includes a nice git-p4import.py script for creating git
> repositories from perforce.

Hmmm... a periodically updated Git mirror of the perforce repo would  
be very, very nice. Instant anonymous access for everybody. As far as  
merely *looking* at the source tree Fisheye is ok, but when it comes  
to preparing and submitting patches it's no help at all.

Cheers,
Wincent


From parrt at cs.usfca.edu  Thu Sep  6 17:37:02 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 6 Sep 2007 17:37:02 -0700
Subject: [antlr-interest] Does an actual repository exist for antlr?
In-Reply-To: <F4C7DDCC-B185-4D19-8B5E-EE468AB2B8CE@wincent.com>
References: <8367efd50709061231k6f955696r68039afc3b3374e7@mail.gmail.com>
	<fbpnld$j7g$1@sea.gmane.org>
	<8367efd50709061426i6f3b4e23te872239315e6f6c1@mail.gmail.com>
	<F4C7DDCC-B185-4D19-8B5E-EE468AB2B8CE@wincent.com>
Message-ID: <CCEF9990-4856-4E2A-A399-6365067D39C6@cs.usfca.edu>


On Sep 6, 2007, at 5:02 PM, Wincent Colaiuta wrote:
> Hmmm... a periodically updated Git mirror of the perforce repo  
> would be very, very nice. Instant anonymous access for everybody.  
> As far as merely *looking* at the source tree Fisheye is ok, but  
> when it comes to preparing and submitting patches it's no help at all.

Perhaps I should just set up an rsync to copy files to www.antlr.org/ 
code/... or somethign?

Ter

From snouto at gmail.com  Thu Sep  6 18:46:44 2007
From: snouto at gmail.com (Mohammed Ibrahim)
Date: Fri, 7 Sep 2007 04:46:44 +0300
Subject: [antlr-interest] PARSING ALL
Message-ID: <000801c7f0f0$f33d0bf0$0201a8c0@robtronix>

HELLO GUYS , I NEED TO PARSE ALL CHARACTERS , ASCII CODES LIKE (;. " ' / \ ] [ { } * & ^ % # @ ! ~ `)

HOW CAN I WRITE FOR IT A PRODUCTION.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070907/ea921301/attachment.html 

From gbr at newtechlaw.com  Thu Sep  6 19:03:35 2007
From: gbr at newtechlaw.com (Gerald B. Rosenberg)
Date: Thu, 06 Sep 2007 19:03:35 -0700
Subject: [antlr-interest] PARSING ALL
In-Reply-To: <000801c7f0f0$f33d0bf0$0201a8c0@robtronix>
References: <000801c7f0f0$f33d0bf0$0201a8c0@robtronix>
Message-ID: <200709070211.l872BYPE005886@tach.newtechlaw.com>

... if you ask quietly, you can obtain answers to most basic 
questions using http://groups.google.com/group/il-antlr-interest/topics?hl=en

At 06:46 PM 9/6/2007, you wrote:
>HELLO GUYS , I NEED TO PARSE ALL CHARACTERS , ASCII CODES LIKE (;. " 
>' / \ ] [ { } * & ^ % # @ ! ~ `)
>
>HOW CAN I WRITE FOR IT A PRODUCTION.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070906/8ea68120/attachment.html 

From win at wincent.com  Thu Sep  6 20:09:34 2007
From: win at wincent.com (Wincent Colaiuta)
Date: Fri, 7 Sep 2007 05:09:34 +0200
Subject: [antlr-interest] Does an actual repository exist for antlr?
In-Reply-To: <CCEF9990-4856-4E2A-A399-6365067D39C6@cs.usfca.edu>
References: <8367efd50709061231k6f955696r68039afc3b3374e7@mail.gmail.com>
	<fbpnld$j7g$1@sea.gmane.org>
	<8367efd50709061426i6f3b4e23te872239315e6f6c1@mail.gmail.com>
	<F4C7DDCC-B185-4D19-8B5E-EE468AB2B8CE@wincent.com>
	<CCEF9990-4856-4E2A-A399-6365067D39C6@cs.usfca.edu>
Message-ID: <6F74C546-E12A-42A1-940A-A6C3CED20913@wincent.com>

El 7/9/2007, a las 2:37, Terence Parr escribi?:

> On Sep 6, 2007, at 5:02 PM, Wincent Colaiuta wrote:
>> Hmmm... a periodically updated Git mirror of the perforce repo  
>> would be very, very nice. Instant anonymous access for everybody.  
>> As far as merely *looking* at the source tree Fisheye is ok, but  
>> when it comes to preparing and submitting patches it's no help at  
>> all.
>
> Perhaps I should just set up an rsync to copy files to  
> www.antlr.org/code/... or somethign?
>
> Ter

While you could do that not sure if it gets us anything not already  
offered by Fisheye and its tarballs; an actual SCM mirror would be  
better because then anonymous users could do stuff like "git  
log"/"svn log", "git diff"/"svn diff" and the like. Getting updates  
would be easier ("git pull"/"svn up"), and submitting patches would  
be more straightfoward too.

Cheers,
Wincent


From benjamin.b.lenz at daimlerchrysler.com  Fri Sep  7 02:21:38 2007
From: benjamin.b.lenz at daimlerchrysler.com (benjamin.b.lenz at daimlerchrysler.com)
Date: Fri, 07 Sep 2007 11:21:38 +0200
Subject: [antlr-interest] Rewrite Rules & ASTFrame
Message-ID: <OF6A68B962.EFDD42BE-ONC125734F.0032A0CC-C125734F.00336B49@dcx.dcx>


Hi guys,

I am using ASTFrame to visualize the generated flat tree from my parser
grammar. Now I tried to add rewrite rules to restructure the tree but there
is no difference to the AST w/o the rewrite rules. Does ASTFrame work with
rewrite rules or is there another problem? Any help would be great!

Here a snippet of the Java1.5 grammar:

grammar Java;
options {k=2; backtrack=true; memoize=true; output=AST;
ASTLabelType=CommonTree;
}
...
compilationUnit
      :     annotations?
            packageDeclaration?
        importDeclaration*
        typeDeclaration*
        -> ^(packageDeclaration importDeclaration typeDeclaration)
      ;

// Here I expected packageDeclaration to be the root of importDeclaration
and typeDeclaration //
...
packageDeclaration
      :     'package' qualifiedName ';'   -> ^('package' qualifiedName)
      ;
...

Thanks,

Ben



If you are not the intended addressee, please inform us immediately that you have received this e-mail by mistake and delete it. We thank you for your support.

From jaluber at gmx.de  Fri Sep  7 03:11:47 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Fri, 07 Sep 2007 12:11:47 +0200
Subject: [antlr-interest] Version Problem
In-Reply-To: <002201c7f085$4eb2b640$0201a8c0@robtronix>
References: <002201c7f085$4eb2b640$0201a8c0@robtronix>
Message-ID: <46E123E3.1040803@gmx.de>

Mohammed Ibrahim wrote:
> hello folks ,
>  
> i have a problem in here , i would like to parse this string
> =======================================
> antlr / 2.0    <----- this string
> =======================================
> i wrote for it this EBNF
>  
>  
> VERSION : LETTER DECIMAL;
>  
> DECIMAL : INT ('.' INT)+;
>  
> LETTERS: 'a'..'z'+;
>  
> INT:  '0'..'9'+;
>  
> WS : ( '  ' |'\r'|'\n'|'/') +  { skip(); };
> ==========================================
>  
> It doesn't want to recognize it i don't want why ?????

Does this grammar compile at all? After all, you wrote LETTER instead
LETTERS in VERSION, which should be version. Another error is that WS
includes two consecutive spaces instead only one, which is probably the
source of your failure. With those changes the test string has been
recognized.

version : LETTERS DECIMAL;

DECIMAL : INT ('.' INT)+;

LETTERS: 'a'..'z'+;

INT:  '0'..'9'+;

WS : ( ' ' |'\r'|'\n'|'/') +  { skip(); };

Best regards,
Johannes Luber

From jaluber at gmx.de  Fri Sep  7 03:20:04 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Fri, 07 Sep 2007 12:20:04 +0200
Subject: [antlr-interest] Magic problem
In-Reply-To: <001701c7f0d3$aa8c36f0$0201a8c0@robtronix>
References: <001701c7f0d3$aa8c36f0$0201a8c0@robtronix>
Message-ID: <46E125D4.5060504@gmx.de>

Mohammed Ibrahim wrote:
> Iam trying to parse GUID that is generated randomly by my application ,
> but you know the problem is that this Hash is generated beginning
> sometimes by numbers and sometimes by letters that is why i wrote this
> EBNF for it
>  
>  
> stat : r+;
> r  : ( LBL_CLIENT DOT NEW_GUID NEWLINE);
> NEW_GUID : MIXED ('-' MIXED)*;
> MIXED : ((LETTERS|INT))+;
> LETTERS : 'a'..'z'+;
> INT : '0'..'9'+;
> NEWLINE : '\r'?'\n';
> DOT : ':';
> LBL_CLIENT
>  : ('client_model'|'CLIENT_MODEL');
> WS : (' '|'\r'|'\n')+ { $channel = HIDDEN;};

Without sample GUIDs I can't test the grammar.

> I DON'T KNOW WHAT IS THE PROBLEM IT DOESN'T PARSE CORRECTLY , IN OTHER
> WINDOW IT PARSED CORRECTLY BUT IN MY MAIN APPLICATION GRAMMAR FILE ,IT
> DOESN'T WANT TO PARSE THE INPUT CORRECTLY.

This looks like as if you pulled those rules above from another grammar.
 The most likely source of error is that there is in that other grammar
a rule which also recognizes parts of the GUIDs and generates unexpected
tokens. Without having your entire grammar it isn't possible to confirm
this.

Best regards,
Johannes Luber


P.S.: Please don't use only capital letters in entire sentences.

From snouto at gmail.com  Fri Sep  7 04:28:17 2007
From: snouto at gmail.com (Mohammed Ibrahim)
Date: Fri, 7 Sep 2007 14:28:17 +0300
Subject: [antlr-interest] easypal protocol .
Message-ID: <000d01c7f142$3360b5a0$0201a8c0@robtronix>

i need to parse the following protocol packet

BYE <USER> VERSION
TRANS_ID : "   "
ROOM_ID: " "
REASON_TEXT:"   "
CLIENT_MODEL : "   "



thus i wrote the following file which i attached but i have a problem with normal_text because i need that label to recognizes all characters from a ....z with integers and any other ascii characters like $#@%^&*()_+{}[] in the same format as the production of "production_reason_text"


any help.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070907/cc6de641/attachment.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: EAP.g
Type: application/octet-stream
Size: 5841 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20070907/cc6de641/attachment.obj 

From rjack at elegancetech.com  Fri Sep  7 05:11:35 2007
From: rjack at elegancetech.com (Roger Jack)
Date: Fri, 7 Sep 2007 08:11:35 -0400
Subject: [antlr-interest] Does an actual repository exist for antlr?
In-Reply-To: <mailman.2562.1189159926.2665.antlr-interest@antlr.org>
References: <mailman.2562.1189159926.2665.antlr-interest@antlr.org>
Message-ID: <02e301c7f148$3cdb8ff0$b692afd0$@com>

>> I can give anybody that wants one a direct p4 account to read directly.

I think that there might be significant benefit to the community in moving
the antlr sources, language targets, and sample grammars into a SourceForge
project. Of course, the project website site would still be antlr.org. This
would make have the following benefits:

1) Download various sources via subversion/cvs which is used in most open
source projects. This would also eliminate the slow downloads that sometimes
occur on the antlr.org website.

2) Provide a well defined mechanism for make code contribution and patches
to all sources.

3) Provide many different mail groups for developer, users, announcements,
etc.

Does anybody else agree?

Roger Jack



From win at wincent.com  Fri Sep  7 05:30:23 2007
From: win at wincent.com (Wincent Colaiuta)
Date: Fri, 7 Sep 2007 14:30:23 +0200
Subject: [antlr-interest] Does an actual repository exist for antlr?
In-Reply-To: <02e301c7f148$3cdb8ff0$b692afd0$@com>
References: <mailman.2562.1189159926.2665.antlr-interest@antlr.org>
	<02e301c7f148$3cdb8ff0$b692afd0$@com>
Message-ID: <4F3E577A-9116-4DCA-A7B2-AC41CA9024CF@wincent.com>

El 7/9/2007, a las 14:11, Roger Jack escribi?:

>>> I can give anybody that wants one a direct p4 account to read  
>>> directly.
>
> I think that there might be significant benefit to the community in  
> moving
> the antlr sources, language targets, and sample grammars into a  
> SourceForge
> project. Of course, the project website site would still be  
> antlr.org. This
> would make have the following benefits:
>
> 1) Download various sources via subversion/cvs which is used in  
> most open
> source projects. This would also eliminate the slow downloads that  
> sometimes
> occur on the antlr.org website.
>
> 2) Provide a well defined mechanism for make code contribution and  
> patches
> to all sources.
>
> 3) Provide many different mail groups for developer, users,  
> announcements,
> etc.
>
> Does anybody else agree?

The problem with Subversion/CVS is that they suck at branching and  
merging, and that's precisely that reason why Ter uses Perforce (very  
good at branching/merging). Although I would love universal anonymous  
access to the source code repo, switching to either Subversion or CVS  
would be a backwards step.

However, a Subversion-based *mirror* of the Perforce repo would be  
fine. Git would be even better (faster, better tools).

Wincent


From kenny at kmdconsulting.ca  Fri Sep  7 06:18:10 2007
From: kenny at kmdconsulting.ca (Kenny MacDermid)
Date: Fri, 7 Sep 2007 09:18:10 -0400
Subject: [antlr-interest] Does an actual repository exist for antlr?
In-Reply-To: <4F3E577A-9116-4DCA-A7B2-AC41CA9024CF@wincent.com>
References: <mailman.2562.1189159926.2665.antlr-interest@antlr.org>
	<02e301c7f148$3cdb8ff0$b692afd0$@com>
	<4F3E577A-9116-4DCA-A7B2-AC41CA9024CF@wincent.com>
Message-ID: <8367efd50709070618r2d3bf15vc2aa43feecf1e380@mail.gmail.com>

On 9/7/07, Wincent Colaiuta <win at wincent.com> wrote:
>
> The problem with Subversion/CVS is that they suck at branching and
> merging, and that's precisely that reason why Ter uses Perforce (very
> good at branching/merging). Although I would love universal anonymous
> access to the source code repo, switching to either Subversion or CVS
> would be a backwards step.
>
> However, a Subversion-based *mirror* of the Perforce repo would be
> fine. Git would be even better (faster, better tools).
>

I'm with Wincent here. Although SVN would at least allow me to see history,
I would find a small git repository the most useful.

Although I haven't tried it, 'git p4' will apparently allow you to sync with
perforce as well, so you can pull down incremental changes to git. If
Terence will create me a read-only perforce account I will test it out and
see if it's usable. I may even be able to host the git repository for a
while, depending on the size/traffic.

Kenny
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070907/2a99a936/attachment.html 

From win at wincent.com  Fri Sep  7 07:37:06 2007
From: win at wincent.com (Wincent Colaiuta)
Date: Fri, 7 Sep 2007 16:37:06 +0200
Subject: [antlr-interest] Does an actual repository exist for antlr?
In-Reply-To: <02e401c7f14b$4534fc10$cf9ef430$@com>
References: <mailman.2562.1189159926.2665.antlr-interest@antlr.org>
	<02e301c7f148$3cdb8ff0$b692afd0$@com>
	<4F3E577A-9116-4DCA-A7B2-AC41CA9024CF@wincent.com>
	<02e401c7f14b$4534fc10$cf9ef430$@com>
Message-ID: <8BAB2759-A651-465F-8C77-CF6D3756ED0F@wincent.com>

El 7/9/2007, a las 14:33, Roger Jack escribi?:

> Wincent,
>
> I have used subversion branching and merging successfully. Can you  
> please
> explain what sucks about it?

Branching is simple and works (inexpensive copy) but merging is a  
total disaster. How do you cherry pick? How do you do repeated  
merges? Answer: you manually maintain a list of merged revisions in  
your commit log, and you very carefully avoid repeating the same  
merge twice. It is easy to forget, easy to make mistakes, cumbersome  
to use. Merging is painful enough that you think twice before doing  
forking off a branch in the first place, but it shouldn't be that way.

Subversion is a solid system but unless they hurry up and get their  
merge-tracking and more sophisticated merging functionality released  
and up to scratch quickly they will inevitably find themselves to be  
part of a dying breed. It is one of the last popular SCMs that still  
lacks decent merge support: all of the new distributed SCMs have  
literally manifold improvements in their merge subsystems... Git,  
SVK, Darcs, Mercurial, Bazaar, Codeville, you name it; there are  
literally dozens of them.

How often do you perform merges with Subversion? Once a day? A week?  
Month? However often you answer, I can guarantee you that you would  
do it more often if you used Git; merging is literally so quick and  
painless that you wind up creating short-lived topic branches for  
every new feature you add, every bug fix.

If you haven't seen it already, check out Linus' talk on Git that he  
gave at Google:

<http://www.youtube.com/watch?v=4XpnKHJAok8>

It should hopefully pique your interest enough to go and find out  
just why distributed version control is so darn good. Another good  
way to learn about distributed version control and how merging can/ 
should be is to learn about SVK, which like Git can easily be layered  
on top of an existing Subversion repository in order to give you a  
taste of what's possible.

These two articles are particularly good intros:

<http://utsl.gen.nz/talks/git-svn/intro.html>
<http://utsl.gen.nz/talks/svk/>

Cheers,
Wincent


From win at wincent.com  Fri Sep  7 07:40:08 2007
From: win at wincent.com (Wincent Colaiuta)
Date: Fri, 7 Sep 2007 16:40:08 +0200
Subject: [antlr-interest] Does an actual repository exist for antlr?
In-Reply-To: <8367efd50709070618r2d3bf15vc2aa43feecf1e380@mail.gmail.com>
References: <mailman.2562.1189159926.2665.antlr-interest@antlr.org>
	<02e301c7f148$3cdb8ff0$b692afd0$@com>
	<4F3E577A-9116-4DCA-A7B2-AC41CA9024CF@wincent.com>
	<8367efd50709070618r2d3bf15vc2aa43feecf1e380@mail.gmail.com>
Message-ID: <F68C979F-7B9C-4A7C-A7D8-62C3272FC140@wincent.com>

El 7/9/2007, a las 15:18, Kenny MacDermid escribi?:

> I'm with Wincent here. Although SVN would at least allow me to see  
> history,
> I would find a small git repository the most useful.
>
> Although I haven't tried it, 'git p4' will apparently allow you to  
> sync with
> perforce as well, so you can pull down incremental changes to git. If
> Terence will create me a read-only perforce account I will test it  
> out and
> see if it's usable. I may even be able to host the git repository  
> for a
> while, depending on the size/traffic.

Would be interesting to know the traffic. If hosted via the Git  
protocol I would expect it to be pretty efficient.

Wincent


From michael at mosmann.de  Fri Sep  7 07:56:04 2007
From: michael at mosmann.de (Michael Mosmann)
Date: Fri, 07 Sep 2007 16:56:04 +0200
Subject: [antlr-interest] Does an actual repository exist for antlr?
In-Reply-To: <8367efd50709070618r2d3bf15vc2aa43feecf1e380@mail.gmail.com>
References: <mailman.2562.1189159926.2665.antlr-interest@antlr.org>
	<02e301c7f148$3cdb8ff0$b692afd0$@com>
	<4F3E577A-9116-4DCA-A7B2-AC41CA9024CF@wincent.com>
	<8367efd50709070618r2d3bf15vc2aa43feecf1e380@mail.gmail.com>
Message-ID: <1189176964.22350.28.camel@apple.internal.net>

Am Freitag, den 07.09.2007, 09:18 -0400 schrieb Kenny MacDermid:
> On 9/7/07, Wincent Colaiuta <win at wincent.com> wrote:
>         The problem with Subversion/CVS is that they suck at branching
>         and
>         merging, and that's precisely that reason why Ter uses
>         Perforce (very
>         good at branching/merging).

what kind of trouble do you have with svn branching and merging? (i hope
you know subversion is much better than cvs, especially at this point).

mm




From win at wincent.com  Fri Sep  7 08:16:10 2007
From: win at wincent.com (Wincent Colaiuta)
Date: Fri, 7 Sep 2007 17:16:10 +0200
Subject: [antlr-interest] Does an actual repository exist for antlr?
In-Reply-To: <1189176964.22350.28.camel@apple.internal.net>
References: <mailman.2562.1189159926.2665.antlr-interest@antlr.org>
	<02e301c7f148$3cdb8ff0$b692afd0$@com>
	<4F3E577A-9116-4DCA-A7B2-AC41CA9024CF@wincent.com>
	<8367efd50709070618r2d3bf15vc2aa43feecf1e380@mail.gmail.com>
	<1189176964.22350.28.camel@apple.internal.net>
Message-ID: <64056315-30EF-4533-8586-3FAA49688CC8@wincent.com>

El 7/9/2007, a las 16:56, Michael Mosmann escribi?:

> Am Freitag, den 07.09.2007, 09:18 -0400 schrieb Kenny MacDermid:
>> On 9/7/07, Wincent Colaiuta <win at wincent.com> wrote:
>>         The problem with Subversion/CVS is that they suck at  
>> branching
>>         and
>>         merging, and that's precisely that reason why Ter uses
>>         Perforce (very
>>         good at branching/merging).
>
> what kind of trouble do you have with svn branching and merging? (i  
> hope
> you know subversion is much better than cvs, especially at this  
> point).

Yes, I know. I switched from CVS to Subversion once the latter hit  
1.0 and used it exclusively for approximately three years, so I am  
quite familiar with it. It was a pretty dependable, useful system  
with only a few annoyances (the most significant of which were  
the .svn directories being spewed throughout my working copies). But  
merging sucked for reasons I've outlined in another post to this  
thread. I probably would have put up with it if it weren't for the  
fact that there are so many alternatives out there in which merging  
*doesn't* suck.

I switched to SVK when I couldn't bear the pain of merging any  
longer, and then to Git when I couldn't bear the slowness of SVK  
(Perl seems to be the culprit there). And I am more impressed with  
Git than I have ever been impressed with an SCM before; the developer  
community is highly active and innovative, the codebase is very  
robust and well-tested, it's fast as hell and easy to use once you've  
learnt the basics, so it's hard to believe there will ever be  
anything compelling enough to make me switch away from Git in the  
foreseeable future.

Cheers,
Wincent


From snouto at gmail.com  Fri Sep  7 08:43:41 2007
From: snouto at gmail.com (Mohammed Ibrahim)
Date: Fri, 7 Sep 2007 18:43:41 +0300
Subject: [antlr-interest] easypal....
Message-ID: <000601c7f165$dedffa80$0201a8c0@robtronix>

hello professors .

i built a grammar , i built a demo of it in a java program and i ran it from console window ,

i wrote something like that

c:\>Mainclass trans_id:"875hjhy64786jbhryr"


Mainclass is my final java program that must parse the first input from the user which is the above parameter to the console java program and here is my grammar 


grammar easypal_proto;



stat returns [String datas] : r+;
r returns [String outputs]: e=FULL_TRANS_PRODUCTION{outputs = $e.text;};
// $<Test Production
FULL_TRANS_PRODUCTION returns [String value]
 : PRODUCTION_TRANS_ID (DELIMA? e=NORMAL_TEXT{value=$e.text;} DELIMA?) NEWLINE*;

// $>

// $<Protocol Headers

PRODUCTION_TRANS_ID
 :  (LBL_TRANS COLON);



// $>



//===================================================================
// $<Compounds


LEFT_TRIBRACKETS
 : '>';
RIGHT_TRIBRACKETS
 : '<';
NORMAL_TEXT
 : (CRYPTO_CHUNK|LETTER|INT)+
 ;
CRYPTO_CHUNK
 : ('~'|'!'|'@'|'$'|'%'|'^'|'&'|'*'|'('|')'|'_'|'-'
 |';'|','|'.')+;
LETTER : ('A'..'Z'|'a'..'z')+;
INT : '0'..'9'+;
DELIMA : '"';
COLON : ':';
NEWLINE : '\r'? '\n';
WS : (SPACE)+ {skip();};
SPACE : '\u0020';
// $>


//==============================================================================
                              //Commands
// $<Commands

COM_HELLO
 : 'HELLO'|'hello';

COM_AUTHENTICATE
 : 'AUTHENTICATE'|'authenticate';
COM_SUCCESS
 : 'SUCCESS'|'success';
COM_FAILURE
 : 'FAILURE'|'failure';
COM_FRIENDLIST
 : 'FRIENDLIST'|'friendlist';
COM_MESSAGE
 : 'MESSAGE'|'message';
COM_QUERY
 : 'QUERY'|'query';
COM_BYE : 'BYE'|'bye';
COM_JOIN: 'JOIN'|'join';
COM_CHANGE
 : 'CHANGE'|'change';
COM_SIGNOFF
 : 'SIGNOFF'|'signoff';
// $>
//==============================================================================
                               // Protocol Labels
// $<Label Constants

LBL_TRANS 
 : 'trans_id'|'TRANS_ID';
LBL_CLIENT_MODEL
 : 'CLIENT_MODEL'|'client_model';
LBL_PUBLIC_KY
 : 'public_ky'|'PUBLIC_KY';
LBL_ENCRYPTION_ID
 : 'ENCRYPTION_ID'|'encryption_id';
LBL_SERVER_MODEL
 : 'SERVER_MODEL'|'server_model';
LBL_USERS
 : 'USERS'|'users';
LBL_USER: 'USER'|'user';
LBL_ONBOARD
 : 'ONBOARD'|'onboard';
LBL_REASON_TEXT
 : 'REASON_TEXT'|'reason_text';
LBL_TO : 'TO'|'to';
LBL_FROM: 'FROM'|'from';
LBL_CONTENT_TYPE
 : 'content_type'|'CONTENT_TYPE';
LBL_FNAME
 : 'FNAME'|'fname';
LBL_FSIZE
 : 'FSIZE'|'fsize';
LBL_FCOLOR
 : 'FCOLOR'|'fcolor';
LBL_BODY: 'BODY'|'body';
LBL_TYPE: 'TYPE'|'type';
LBL_DATA: 'DATA'|'data';
LBL_FILE: 'FILE'|'file';
LBL_SIZE: 'SIZE'|'size';
LBL_SPECS
 : 'SPECS'|'specs';
LBL_STATUSCODE
 : 'STATUS_CODE'|'status_code';
LBL_ROOM_ID
 : 'ROOM_ID'|'room_id';
LBL_OLD_ROOM
 : 'OLD_ROOM'|'old_room';
// $>
//======================================================
i made normal_text only to retrieve its value not the full production , whereas it returns to me in the console the full parameters passed in , i don't know why ???

any ideas .
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070907/6d08efed/attachment.html 

From rjack at elegancetech.com  Fri Sep  7 12:38:23 2007
From: rjack at elegancetech.com (Roger Jack)
Date: Fri, 7 Sep 2007 15:38:23 -0400
Subject: [antlr-interest] Does an actual repository exist for antlr
In-Reply-To: <mailman.1.1189191601.29321.antlr-interest@antlr.org>
References: <mailman.1.1189191601.29321.antlr-interest@antlr.org>
Message-ID: <033001c7f186$a7926790$f6b736b0$@com>

>> But merging sucked for reasons I've outlined in another post to this
thread.

I will take as fact that Subversion merging sucks. 

However, I would really prefer that all antlr source, language targets, and
grammars be under PUBLIC source code management so that they can easily
versioned and accessed. Is all this stuff already in SCM and I just don't
know it? I'm new to Antlr and the Antlr website, so I will apologize, in
advance, if I am ignorant.

Roger Jack





From win at wincent.com  Fri Sep  7 13:17:55 2007
From: win at wincent.com (Wincent Colaiuta)
Date: Fri, 7 Sep 2007 22:17:55 +0200
Subject: [antlr-interest] Does an actual repository exist for antlr
In-Reply-To: <033001c7f186$a7926790$f6b736b0$@com>
References: <mailman.1.1189191601.29321.antlr-interest@antlr.org>
	<033001c7f186$a7926790$f6b736b0$@com>
Message-ID: <B64FCD5E-2B45-42BE-B22D-60CA9801E91A@wincent.com>

El 7/9/2007, a las 21:38, Roger Jack escribi?:

> However, I would really prefer that all antlr source, language  
> targets, and
> grammars be under PUBLIC source code management so that they can  
> easily
> versioned and accessed. Is all this stuff already in SCM and I just  
> don't
> know it? I'm new to Antlr and the Antlr website, so I will  
> apologize, in
> advance, if I am ignorant.

You can browse the source code and its history here:

<http://fisheye2.cenqua.com/browse/antlr>

As well as downloading a tarball snapshot of the tip of the current  
trunk. As far as web interfaces go, it's pretty nice.

But there are some limitations:

- no commandline interface (for diffs, logs, submitting patches etc)

- this is only the view of the trunk; what's happening on the  
branches is out of sight

- no convenient way of updating an existing checkout (because you  
can't checkout, you can only download a tarball snapshot)

- FishEye is often slow and sometimes completely broken an inaccessible

Cheers,
Wincent


From fatih at tullab.com  Fri Sep  7 14:06:01 2007
From: fatih at tullab.com (Fatih Tolga)
Date: Sat, 08 Sep 2007 00:06:01 +0300
Subject: [antlr-interest] An object reference is required for the nonstatic
 field, method, or property 'Antlr.Runtime.Debug.DebugParser.dbg'
Message-ID: <46E1BD39.1000004@tullab.com>

Hi everybody,
I've just started to learn ANTLR. I am going on the tutorials in the 
site. Firstly, I tried to debug an c# project. ANTLRWorks generated the 
code with "-debug" option. This is the grammer that is in the tutorial:

grammar Test;

options
{language = 'CSharp';
output=AST;
}
expr : mexpr (PLUS^ mexpr)* SEMI!
;
mexpr
: atom (STAR^ atom)*
;
atom: INT
;
//class csharpTestLexer extends Lexer;
WS : (' '
| '\t'
| '\n'
| '\r')
{ channel = HIDDEN; }
;
LPAREN: '('
;
RPAREN: ')'
;
STAR: '*'
;
PLUS: '+'
;
SEMI: ';'
;
protected
DIGIT
: '0'..'9'
;
INT : (DIGIT)+
;


When I tried to build the generated c# code, an error occured in the 
parser codes. This is the line where the error occured:
    protected ITreeAdaptor adaptor = new DebugTreeAdaptor(dbg, new 
CommonTreeAdaptor());

This is the error message:
An object reference is required for the nonstatic field, method, or 
property 'Antlr.Runtime.Debug.DebugParser.dbg'

I moved "new DebugTree..." part to the constructor of the Parser like that:
    public TestParser(ITokenStream input, IDebugEventListener dbg)
        : base(input, dbg)
    {
        this.adaptor = new DebugTreeAdaptor(dbg, new CommonTreeAdaptor());
    }

This time it compiled but another error occured:
'Test.exe' does not contain a static 'Main' method suitable for an entry 
point

What should/would I do?

Regards.


From jaluber at gmx.de  Sat Sep  8 07:46:08 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Sat, 08 Sep 2007 16:46:08 +0200
Subject: [antlr-interest] An object reference is required for the
 nonstatic field, method, or property 'Antlr.Runtime.Debug.DebugParser.dbg'
In-Reply-To: <46E1BD39.1000004@tullab.com>
References: <46E1BD39.1000004@tullab.com>
Message-ID: <46E2B5B0.8040907@gmx.de>

Fatih Tolga wrote:
> Hi everybody,
> I've just started to learn ANTLR. I am going on the tutorials in the
> site. Firstly, I tried to debug an c# project. ANTLRWorks generated the
> code with "-debug" option. This is the grammer that is in the tutorial:
> 
> grammar Test;
> 
> options
> {language = 'CSharp';
> output=AST;
> }
> expr : mexpr (PLUS^ mexpr)* SEMI!
> ;
> mexpr
> : atom (STAR^ atom)*
> ;
> atom: INT
> ;
> //class csharpTestLexer extends Lexer;
> WS : (' '
> | '\t'
> | '\n'
> | '\r')
> { channel = HIDDEN; }
> ;
> LPAREN: '('
> ;
> RPAREN: ')'
> ;
> STAR: '*'
> ;
> PLUS: '+'
> ;
> SEMI: ';'
> ;
> protected
> DIGIT
> : '0'..'9'
> ;
> INT : (DIGIT)+
> ;
> 
> 
> When I tried to build the generated c# code, an error occured in the
> parser codes. This is the line where the error occured:
>    protected ITreeAdaptor adaptor = new DebugTreeAdaptor(dbg, new
> CommonTreeAdaptor());
> 
> This is the error message:
> An object reference is required for the nonstatic field, method, or
> property 'Antlr.Runtime.Debug.DebugParser.dbg'
> 
> I moved "new DebugTree..." part to the constructor of the Parser like that:
>    public TestParser(ITokenStream input, IDebugEventListener dbg)
>        : base(input, dbg)
>    {
>        this.adaptor = new DebugTreeAdaptor(dbg, new CommonTreeAdaptor());
>    }

That error is caused through an inappropriate code generation template,
which violates the order of the C# object initialization. Moving it into
the constructor is a good solution. As there is some debugging support
missing from the C# target, I suggest to debug via the IDE alone. It is
for now functionally equivalent and has less hassle.
> 
> This time it compiled but another error occured:
> 'Test.exe' does not contain a static 'Main' method suitable for an entry
> point
> 
> What should/would I do?
> 
Do you have a rig which calls into the parser code? ANTLR generates only
something like the code equivalent of a library. By itself a library
doesn't work. Look at the example code for a template you can your own
rig base upon.

Best regards,
Johannes Luber

From snouto at gmail.com  Sat Sep  8 07:13:46 2007
From: snouto at gmail.com (Mohammed Ibrahim)
Date: Sat, 8 Sep 2007 17:13:46 +0300
Subject: [antlr-interest] Antlr Easypal Last problem
Message-ID: <001c01c7f222$79995410$0201a8c0@robtronix>

i have a problem here friends ,

there is a command called

trans_id : "String+integers+ascii codes"

here the double qoutes exist in two places the first one in the command syntax itself  and the other time may be written inside the double qoutes from the user so i need antlr to recognize the first and last delima as of the command syntax itself and also recognize the double qoutes that may exist in the string entered itself , How can i do that ?


Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070908/7807071f/attachment.html 

From snouto at gmail.com  Sat Sep  8 08:06:55 2007
From: snouto at gmail.com (Mohammed Ibrahim)
Date: Sat, 8 Sep 2007 18:06:55 +0300
Subject: [antlr-interest] ANTLR BIG PROBLEM
Message-ID: <000b01c7f229$e6c5c490$0201a8c0@robtronix>

hello  Professors ,

i have a command syntax like the following

body : "characters............" ;

How antlr can recognize characters portion in the above code if it is not in english letters , I mean it is not from 'a'..'z' or 'A'..'Z' ????????????

suppose that the characters portion will be chinese letters how can i let antlr distinguishes all unicode characters of any language and parse it correctly ?????????/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070908/83e481b6/attachment.html 

From snouto at gmail.com  Sat Sep  8 08:27:37 2007
From: snouto at gmail.com (Mohammed Ibrahim)
Date: Sat, 8 Sep 2007 18:27:37 +0300
Subject: [antlr-interest] ANTLR BIG PROBLEM
Message-ID: <001301c7f22c$cacf8930$0201a8c0@robtronix>

I solved that problem , by specifying

MULTILINGUAL : ('\U0000'..'\UFFFF')+;

to support all 16 bit unicode characters set .



Thanks everybody.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070908/dc3cd97f/attachment.html 

From snouto at gmail.com  Sat Sep  8 08:51:32 2007
From: snouto at gmail.com (Mohammed Ibrahim)
Date: Sat, 8 Sep 2007 18:51:32 +0300
Subject: [antlr-interest] general Poblem , please help
Message-ID: <000b01c7f230$22769fe0$0201a8c0@robtronix>

hello professors ,

actually , i am building a network application layer protocol where two clients will talk together , actually the administrator needs to write any any any characters in a message and this message is delivered through the network , the real problem is , ANTLR finds some errors in treating some characters whether they are part of the message itself that the administrator sent or from the command syntax itself , here is the syntax

BODY: " Message " ;

Message : (('a..'z'|'A'..'Z')|CHUNKS|INT)+;

CHUNKS: ('$'|'^'|'~'|'@'|'#'|';'|DOT|','|'*'|'&'|RIGHTPAR|LEFTPAR|'?'|']'
 | '['|'{'|'}'|'`'|'!'|'%'|'('|')'|'='|'+'|'\\'|SLASH|'"');

INT:'0'..'9'+;


ANLTR can't recognize between the first double qoutes of the command itself or the double qoutes in the command Message itself .


any ideas to make it distinguishes that Please.

it is very important professors .
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070908/5da22c77/attachment.html 

From martin.kohl at gmail.com  Sat Sep  8 15:36:12 2007
From: martin.kohl at gmail.com (Martin Kohl)
Date: Sun, 9 Sep 2007 00:36:12 +0200
Subject: [antlr-interest] general Poblem , please help
In-Reply-To: <000b01c7f230$22769fe0$0201a8c0@robtronix>
References: <000b01c7f230$22769fe0$0201a8c0@robtronix>
Message-ID: <6d93992c0709081536l1db76bcah2bb163369f9b0817@mail.gmail.com>

I think you need to use a different delimiter around the message. AntLR
can't determine where you want the message to stop. If the " Character is a
legal character for the message, you can't use that same character to
surround the message and expect AntLR to know where the message ends.

Regards,
Martin

On 9/8/07, Mohammed Ibrahim <snouto at gmail.com> wrote:
>
>  hello professors ,
>
> actually , i am building a network application layer protocol where two
> clients will talk together , actually the administrator needs to write any
> any any characters in a message and this message is delivered through the
> network , the real problem is , ANTLR finds some errors in treating some
> characters whether they are part of the message itself that the
> administrator sent or from the command syntax itself , here is the syntax
>
> BODY: " Message " ;
>
> Message : (('a..'z'|'A'..'Z')|CHUNKS|INT)+;
>
> CHUNKS: ('$'|'^'|'~'|'@'|'#'|';'|DOT|','|'*'|'&'|RIGHTPAR|LEFTPAR|'?'|']'
>  | '['|'{'|'}'|'`'|'!'|'%'|'('|')'|'='|'+'|'\\'|SLASH|'"');
>
> INT:'0'..'9'+;
>
>
> ANLTR can't recognize between the first double qoutes of the command
> itself or the double qoutes in the command Message itself .
>
>
> any ideas to make it distinguishes that Please.
>
> it is very important professors .
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070909/b1a8c06a/attachment.html 

From martin.kohl at gmail.com  Sat Sep  8 15:51:39 2007
From: martin.kohl at gmail.com (Martin Kohl)
Date: Sun, 9 Sep 2007 00:51:39 +0200
Subject: [antlr-interest] Antlr Easypal Last problem
In-Reply-To: <001c01c7f222$79995410$0201a8c0@robtronix>
References: <001c01c7f222$79995410$0201a8c0@robtronix>
Message-ID: <6d93992c0709081551g2553427bk6a5208e754979956@mail.gmail.com>

Usuallz you require the user to escape the double quotes in a string (as in
"Foo said,\"Bar!\""), if the string is delimited by double quotes. If this
isnt possible change the delimiters.

On 9/8/07, Mohammed Ibrahim <snouto at gmail.com> wrote:
>
>  i have a problem here friends ,
>
> there is a command called
>
> trans_id : "String+integers+ascii codes"
>
> here the double qoutes exist in two places the first one in the command
> syntax itself  and the other time may be written inside the double qoutes
> from the user so i need antlr to recognize the first and last delima as of
> the command syntax itself and also recognize the double qoutes that may
> exist in the string entered itself , How can i do that ?
>
>
> Thanks.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070909/df090c10/attachment.html 

From snouto at gmail.com  Sat Sep  8 15:41:28 2007
From: snouto at gmail.com (Mohammed Ibrahim)
Date: Sun, 9 Sep 2007 01:41:28 +0300
Subject: [antlr-interest] Antlr Easypal Last problem
References: <001c01c7f222$79995410$0201a8c0@robtronix>
	<6d93992c0709081551g2553427bk6a5208e754979956@mail.gmail.com>
Message-ID: <001501c7f269$66519920$0201a8c0@robtronix>

i solved this problem by using "nondeterminism"

i made each command must end with a semicolon and then used this syntax to grasp the whole input string message as the following

greedy_option: ( options{greedy=false;}:('\u0000'..'\uffff'))* '"' ';';

in the above string , the element will concatenate every character from the stream and don't expose it until the last double qoutes followed by semicolon is encountered then the antlr lexer exposes the full distinguished string , thanks everybody .
  ----- Original Message ----- 
  From: Martin Kohl 
  To: Mohammed Ibrahim 
  Cc: antlr-interest at antlr.org 
  Sent: Sunday, September 09, 2007 1:51 AM
  Subject: Re: [antlr-interest] Antlr Easypal Last problem


  Usuallz you require the user to escape the double quotes in a string (as in "Foo said,\"Bar!\""), if the string is delimited by double quotes. If this isnt possible change the delimiters.


  On 9/8/07, Mohammed Ibrahim <snouto at gmail.com> wrote:
    i have a problem here friends ,

    there is a command called

    trans_id : "String+integers+ascii codes"

    here the double qoutes exist in two places the first one in the command syntax itself  and the other time may be written inside the double qoutes from the user so i need antlr to recognize the first and last delima as of the command syntax itself and also recognize the double qoutes that may exist in the string entered itself , How can i do that ?


    Thanks.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070909/4ce3a392/attachment.html 

From dev at mobileink.com  Sun Sep  9 10:01:02 2007
From: dev at mobileink.com (Gregg Reynolds)
Date: Sun, 9 Sep 2007 12:01:02 -0500
Subject: [antlr-interest] hand-coded v. generated
Message-ID: <75cc17ac0709091001k2813597eue434fd9f9e36a912@mail.gmail.com>

Hi,

I recall once seeing somewhere in the Antlr literature a discussion of
hand-coded v. generated lexers and parsers.  I think it might have
been written by Terrence, somewhere in the documentation.  I'm having
trouble finding it now; anybody know it's whereabouts?  Or any other
clear discussion of the pros/cons of hand-coded v. generated.

Also, is there a search interface to the mailing list archives
somewhere?  The only ones I've been able to find are old.

Thanks,

gregg

From parrt at cs.usfca.edu  Sun Sep  9 11:43:19 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 9 Sep 2007 11:43:19 -0700
Subject: [antlr-interest] How can I emit more than a single token per lexer
	rule?
Message-ID: <503996D6-7078-4F77-8E30-DF450D0696C9@cs.usfca.edu>

http://www.antlr.org/wiki/pages/viewpage.action?pageId=3604497

From iank at bearcave.com  Sun Sep  9 15:32:00 2007
From: iank at bearcave.com (Ian Kaplan)
Date: Sun, 9 Sep 2007 15:32:00 -0700
Subject: [antlr-interest] hand-coded v. generated
In-Reply-To: <75cc17ac0709091001k2813597eue434fd9f9e36a912@mail.gmail.com>
References: <75cc17ac0709091001k2813597eue434fd9f9e36a912@mail.gmail.com>
Message-ID: <7f8924df0709091532l64857c72lad990fc466d3f994@mail.gmail.com>

  With ANTLR 2.X hand coded lexers were supposed to be faster.  In the past
I've written hand coded lexers, but in retrospect I feel rather silly.  The
lexer is so easy to define in ANTLR and I put in all this work doing a hand
built one.  For many applications the ANTLR built lexer is fine.  This was
definitely true for my application (a graph query language).  When I did the
next version of the query language, I used an ANTLR created lexer and have
not regretted the decision.

  I think that we've all heard that you should not optimize in advance of
need.  We all know this, but at least some of us still do it.  My advice is
use the ANTLR lexer and see if it performs as you need it to.  You can
always plug in a hand created lexer if necessary.

  Ian
  http://www.bearcave.com


On 9/9/07, Gregg Reynolds <dev at mobileink.com> wrote:
>
> Hi,
>
> I recall once seeing somewhere in the Antlr literature a discussion of
> hand-coded v. generated lexers and parsers.  I think it might have
> been written by Terrence, somewhere in the documentation.  I'm having
> trouble finding it now; anybody know it's whereabouts?  Or any other
> clear discussion of the pros/cons of hand-coded v. generated.
>
> Also, is there a search interface to the mailing list archives
> somewhere?  The only ones I've been able to find are old.
>
> Thanks,
>
> gregg
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070909/e4c0688b/attachment.html 

From ronald.haring at gmail.com  Mon Sep 10 00:59:56 2007
From: ronald.haring at gmail.com (Ronald Haring)
Date: Mon, 10 Sep 2007 09:59:56 +0200
Subject: [antlr-interest] Search free text form for special tags grammar
Message-ID: <9ef7d8600709100059v3705ca28v4f8b0fa3c81b4dc9@mail.gmail.com>

Hello all,

I've been trying to create a grammar to search in some random text for a
href html tags. I can't use existing parsers (like tagsoup) since the free
text can contain asp, or jsp, or velocity or freemarker code, but I still
have to search in the text for a href tags. My grammar so far is working in
that it finds one a href tag, but I cant tell it to search a complete
document and return all the a hrefs.

Here is my grammar so far

grammar AHrefFinder;
@header {
import java.util.HashMap;
import java.util.Map;
}
href  returns [Map map]
@init {
    map = new HashMap();
}
    :
     lt (WS)* 'a' (attr[map])* '>' (.)* '</a>';

attr[Map map]
@init {
    String key = null;
    String value = null;
}
@after {
    map.put(key, value);
}
    : attrKey {
        key = $attrKey.attributeKey;
    }
    ('=' attrValue {
        value = $attrValue.attributeValue;
    })?;

attrKey returns [String attributeKey]
        : WORD {
        attributeKey = $WORD.text;
};

attrValue returns [String attributeValue]
        : (
            WORD {
                attributeValue = $WORD.text;
            }
            |
            STRING {
                attributeValue = $STRING.text;
                attributeValue = attributeValue.substring(1,
attributeValue.length() -1);
            }
          );

allwords    : (anyword)*;
anyword        : (.)+;
lt        : '<';
/** Match until next whitespace; can be file, int, etc... */
WORD:    (
        'a'..'z' | '0'..'9' | '/' | '.' | '#' | '_'
        )+
    ;

protected
STRING
    :    '"' (~'"')* '"'
    |    '\'' (~'\'')* '\''
    ;


protected
WS    :    (    ' '
        |    '\t'
        |    '\f'
        |    (    '\r\n'  // DOS
            |    '\r'    // Macintosh
            |    '\n'    // Unix (the right way)
            )
        )
        {skip(); }
    ;


Java file for testing

public class TestHRefFinder {


    /**
     * User: RHaring
     * Date: 4-sep-2007
     * Time: 17:07:05
     */
        public static void main(String[] args) throws Exception {
            String definition = "some free form text <a href=\"
http://www.test.nl\">test</a>And even more text <a href=\"
http://www.test2.nl\">even more text</a>";
            ANTLRInputStream input = new ANTLRInputStream(new
ByteArrayInputStream(definition.getBytes()));
            AHrefFinderLexer lexer = new AHrefFinderLexer(input);
            CommonTokenStream tokens = new CommonTokenStream(lexer);
            AHrefFinderParser parser = new AHrefFinderParser(tokens);
            Map map = parser.href();
            // yet this is correct, I have found the first href, but how do
I find all the others???

        }
}





Any tips, hints or remarks are greatly appreciated.

Regards
Ronald
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070910/8ab7b013/attachment.html 

From ronald.haring at gmail.com  Mon Sep 10 01:50:50 2007
From: ronald.haring at gmail.com (Ronald Haring)
Date: Mon, 10 Sep 2007 10:50:50 +0200
Subject: [antlr-interest] Search free text form for special tags grammar
In-Reply-To: <1189413543.28918.5.camel@apple.internal.net>
References: <9ef7d8600709100059v3705ca28v4f8b0fa3c81b4dc9@mail.gmail.com>
	<1189413543.28918.5.camel@apple.internal.net>
Message-ID: <9ef7d8600709100150l59f25f38x57db0b2796d8a57c@mail.gmail.com>

thx for your time Michael, unfortunately that didnt work completely as
needed. If I only have a hrefs in the text then it works, however if there
are more words in front of it or between (as I might expect from the input)
then it doesnt work anymore.

I think my main problem is how do I tell the parser to search for anyword
but href or href where the anyword but href can be savely discarded.

Regards
Ronald

On 9/10/07, Michael Mosmann <michael at mosmann.de> wrote:
>
> Am Montag, den 10.09.2007, 09:59 +0200 schrieb Ronald Haring:
> > Hello all,
> >
> > Here is my grammar so far
> >
> > grammar AHrefFinder;
> > @header {
> > import java.util.HashMap;
> > import java.util.Map;
> > }
> > href  returns [Map map]
> > @init {
> >     map = new HashMap();
> > }
> >     :
> >      lt (WS)* 'a' (attr[map])* '>' (.)* '</a>';
> >
> > how do I find all the others???
>
> i think
>
> href_all
>    : href*;
>
> should do it..
>
> mm:)
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070910/3d52a06e/attachment.html 

From antlr at mirality.co.nz  Mon Sep 10 02:28:55 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Mon, 10 Sep 2007 21:28:55 +1200
Subject: [antlr-interest] Search free text form for special tags grammar
In-Reply-To: <9ef7d8600709100150l59f25f38x57db0b2796d8a57c@mail.gmail.co
 m>
References: <9ef7d8600709100059v3705ca28v4f8b0fa3c81b4dc9@mail.gmail.com>
	<1189413543.28918.5.camel@apple.internal.net>
	<9ef7d8600709100150l59f25f38x57db0b2796d8a57c@mail.gmail.com>
Message-ID: <20070910092903.0D19111E9DB@www.antlr.org>

At 20:50 10/09/2007, Ronald Haring wrote:
>thx for your time Michael, unfortunately that didnt work 
>completely as needed. If I only have a hrefs in the text then it 
>works, however if there are more words in front of it or between 
>(as I might expect from the input) then it doesnt work anymore.
>
>I think my main problem is how do I tell the parser to search for 
>anyword but href or href where the anyword but href can be savely 
>discarded.

Probably the easiest thing to do would be to convert the whole 
thing into lexer-only rules and then turn it into a "filter"ed 
lexer.

Failing that, you'll have to come up with some rule that can match 
all your "don't care" tokens and then do something like this:

file: (href | dontcare)* EOF;


From ronald.haring at gmail.com  Mon Sep 10 02:45:07 2007
From: ronald.haring at gmail.com (Ronald Haring)
Date: Mon, 10 Sep 2007 11:45:07 +0200
Subject: [antlr-interest] Search free text form for special tags grammar
In-Reply-To: <46e50e5f.2183420a.5867.45adSMTPIN_ADDED@mx.google.com>
References: <9ef7d8600709100059v3705ca28v4f8b0fa3c81b4dc9@mail.gmail.com>
	<1189413543.28918.5.camel@apple.internal.net>
	<9ef7d8600709100150l59f25f38x57db0b2796d8a57c@mail.gmail.com>
	<46e50e5f.2183420a.5867.45adSMTPIN_ADDED@mx.google.com>
Message-ID: <9ef7d8600709100245k13fe61dfo51bcf678e73111f2@mail.gmail.com>

Ok, now if only I knew how to do that :)

Could you enlighten me a bit. What is a lexer only rules grammar? And how
can I filter this?

Regards
Ronald

On 9/10/07, Gavin Lambert <antlr at mirality.co.nz> wrote:
>
> At 20:50 10/09/2007, Ronald Haring wrote:
> >thx for your time Michael, unfortunately that didnt work
> >completely as needed. If I only have a hrefs in the text then it
> >works, however if there are more words in front of it or between
> >(as I might expect from the input) then it doesnt work anymore.
> >
> >I think my main problem is how do I tell the parser to search for
> >anyword but href or href where the anyword but href can be savely
> >discarded.
>
> Probably the easiest thing to do would be to convert the whole
> thing into lexer-only rules and then turn it into a "filter"ed
> lexer.
>
> Failing that, you'll have to come up with some rule that can match
> all your "don't care" tokens and then do something like this:
>
> file: (href | dontcare)* EOF;
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070910/d1b656a5/attachment.html 

From antlr at mirality.co.nz  Mon Sep 10 03:15:19 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Mon, 10 Sep 2007 22:15:19 +1200
Subject: [antlr-interest] Search free text form for special tags grammar
In-Reply-To: <9ef7d8600709100245k13fe61dfo51bcf678e73111f2@mail.gmail.co
 m>
References: <9ef7d8600709100059v3705ca28v4f8b0fa3c81b4dc9@mail.gmail.com>
	<1189413543.28918.5.camel@apple.internal.net>
	<9ef7d8600709100150l59f25f38x57db0b2796d8a57c@mail.gmail.com>
	<46e50e5f.2183420a.5867.45adSMTPIN_ADDED@mx.google.com>
	<9ef7d8600709100245k13fe61dfo51bcf678e73111f2@mail.gmail.com>
Message-ID: <20070910101537.EB36D11E9DA@www.antlr.org>

At 21:45 10/09/2007, Ronald Haring wrote:
>Could you enlighten me a bit. What is a lexer only rules grammar? 
>And how can I filter this?

A lexer-only grammar is one that starts with "lexer grammar" 
instead of just "grammar" and contains only lexer rules (ie. start 
with a capital letter, use characters as input, and tokens as 
output).

A filtering lexer is one with "filter=true" in the options.  When 
you specify that it changes the matching rules so that it doesn't 
need to consume every input character -- if it finds something it 
can't deal with then it skips that character and tries again.

There should be some examples around in the wiki, in the examples 
zipfile, and in the book.


From mazzucco at iiasa.ac.at  Mon Sep 10 06:04:15 2007
From: mazzucco at iiasa.ac.at (Rupert Mazzucco)
Date: Mon, 10 Sep 2007 15:04:15 +0200
Subject: [antlr-interest] C target; C++ compatibility?
Message-ID: <20070910150415.6e1b42d4.mazzucco@iiasa.ac.at>

antlr3bitset.h declares a function pointer named "or":

  struct ANTLR3_BITSET_struct  *  (*or)	    (struct ANTLR3_BITSET_struct  * bitset1, struct ANTLR3_BITSET_struct * bitset2);

This seems to collide with the C++ keyword of the same name when I include
the *Parser,Lexer.h headers in a C++ program.  Gcc 4.1.2 apparently replaces
it with "||" and reports a corresponding syntax error.  MSVC 2005 doesn't seem
to have a problem with it.  I am not sure which behavior is correct, put wanted
to put it up for consideration.  Where else would one need to rename this
pointer to get it to work with gcc?

Regards
-- 
Rupert Mazzucco         <mazzucco at iiasa.ac.at>
Research Scholar, Evolution and Ecology Program
IIASA - Institute for Applied Systems Analysis
Schlossplatz 1, 2361 Laxenburg, Austria
Phone: +43 2236 807 522   Fax: +43 2236 713 13

From vidarsvans at gmail.com  Mon Sep 10 09:28:45 2007
From: vidarsvans at gmail.com (=?ISO-8859-1?Q?Vi=F0ar_Svansson?=)
Date: Mon, 10 Sep 2007 16:28:45 +0000
Subject: [antlr-interest] Python target v3 unicode problems
Message-ID: <af8252920709100928s53ddeb3bp489df8fbbfab4844@mail.gmail.com>

Hi,

I am trying to scan a UTF-8 file using the python target but with no luck.
I usually get this error:

UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position
0: ordinal not in range(128)

I have tried to cast the strings to unicode everywhere but I nothing
seems to work. I have also tried many different declarations of the
unicode tokens but nothing seems to work there either.

I found reference to something like this:

class L extends Lexer;
options {
	charVocabulary = '\3'..'\377' | '\u1000'..'\u1fff';
}

But I think this is v2 syntax, correct?
Does anyone have a working unicode lexer in python?

Vi?ar

From fatih at tullab.com  Mon Sep 10 10:02:34 2007
From: fatih at tullab.com (Fatih Tolga)
Date: Mon, 10 Sep 2007 20:02:34 +0300
Subject: [antlr-interest] Is there any Delphi(Object Pascal) target?
Message-ID: <46E578AA.70607@tullab.com>

.. or any plans to implement a delphi target?

Regards.

From parrt at cs.usfca.edu  Mon Sep 10 10:11:16 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 10 Sep 2007 10:11:16 -0700
Subject: [antlr-interest] Is there any Delphi(Object Pascal) target?
In-Reply-To: <46E578AA.70607@tullab.com>
References: <46E578AA.70607@tullab.com>
Message-ID: <CA4B35DA-8B42-417D-A26B-554EF750710E@cs.usfca.edu>

Hi. Someone mentioned this on the list recently...
Ter
On Sep 10, 2007, at 10:02 AM, Fatih Tolga wrote:

> .. or any plans to implement a delphi target?
>
> Regards.


From blackdrag at gmx.org  Mon Sep 10 12:43:27 2007
From: blackdrag at gmx.org (Jochen Theodorou)
Date: Mon, 10 Sep 2007 21:43:27 +0200
Subject: [antlr-interest] replacing NoViableAltException with exception with
	less stack
Message-ID: <46E59E5F.5040601@gmx.org>

Hi,

we (Groovy team) have currently several performance problems with our 
grammar. The resulting Parser is a bit too slow for our needs and we are 
now looking for a way to make it faster. The grammar is a big and 
complicated beast and I am sure there are many places we can make it better.

But one thing that would speed up the whole thing a little is to remove 
that stack trace used by the NoViableAltException. I can do that and if 
we don't want to debug the grammar itself, then we don't need that trace 
at all. but of course such a change would be removed by the next grammar 
creation.

Is there a way to influence the generator to do that they way I want?

Note: atm antlr 3.0 is no option

thanks, blackdrag

-- 
Jochen "blackdrag" Theodorou
Groovy Tech Lead (http://groovy.codehaus.org)
http://blackdragsview.blogspot.com/

From parrt at cs.usfca.edu  Mon Sep 10 12:51:03 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 10 Sep 2007 12:51:03 -0700
Subject: [antlr-interest] replacing NoViableAltException with exception
	with less stack
In-Reply-To: <46E59E5F.5040601@gmx.org>
References: <46E59E5F.5040601@gmx.org>
Message-ID: <B140059E-EDCE-404D-A0F0-DEF52C6B1F0D@cs.usfca.edu>

Hi. you could probably create a single exception object and return  
that each time.  Should be fairly easy to search for that string in  
the generator.
Ter
On Sep 10, 2007, at 12:43 PM, Jochen Theodorou wrote:

> Hi,
>
> we (Groovy team) have currently several performance problems with  
> our grammar. The resulting Parser is a bit too slow for our needs  
> and we are now looking for a way to make it faster. The grammar is  
> a big and complicated beast and I am sure there are many places we  
> can make it better.
>
> But one thing that would speed up the whole thing a little is to  
> remove that stack trace used by the NoViableAltException. I can do  
> that and if we don't want to debug the grammar itself, then we  
> don't need that trace at all. but of course such a change would be  
> removed by the next grammar creation.
>
> Is there a way to influence the generator to do that they way I want?
>
> Note: atm antlr 3.0 is no option
>
> thanks, blackdrag
>
> -- 
> Jochen "blackdrag" Theodorou
> Groovy Tech Lead (http://groovy.codehaus.org)
> http://blackdragsview.blogspot.com/


From lgcraymer at yahoo.com  Mon Sep 10 13:40:21 2007
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Mon, 10 Sep 2007 13:40:21 -0700 (PDT)
Subject: [antlr-interest] replacing NoViableAltException with exception
	with less stack
In-Reply-To: <B140059E-EDCE-404D-A0F0-DEF52C6B1F0D@cs.usfca.edu>
Message-ID: <258744.3878.qm@web55911.mail.re3.yahoo.com>

That may be the only practical solution since the
stack trace stuff is from java.lang.Throwable. 
Alternatively, you might try adding a dummy
fillInStackTrace() method to RecognitionException or
NoViableAltException--that might work.

--Loring

--- Terence Parr <parrt at cs.usfca.edu> wrote:

> Hi. you could probably create a single exception
> object and return  
> that each time.  Should be fairly easy to search for
> that string in  
> the generator.
> Ter
> On Sep 10, 2007, at 12:43 PM, Jochen Theodorou
> wrote:
> 
> > Hi,
> >
> > we (Groovy team) have currently several
> performance problems with  
> > our grammar. The resulting Parser is a bit too
> slow for our needs  
> > and we are now looking for a way to make it
> faster. The grammar is  
> > a big and complicated beast and I am sure there
> are many places we  
> > can make it better.
> >
> > But one thing that would speed up the whole thing
> a little is to  
> > remove that stack trace used by the
> NoViableAltException. I can do  
> > that and if we don't want to debug the grammar
> itself, then we  
> > don't need that trace at all. but of course such a
> change would be  
> > removed by the next grammar creation.
> >
> > Is there a way to influence the generator to do
> that they way I want?
> >
> > Note: atm antlr 3.0 is no option
> >
> > thanks, blackdrag
> >
> > -- 
> > Jochen "blackdrag" Theodorou
> > Groovy Tech Lead (http://groovy.codehaus.org)
> > http://blackdragsview.blogspot.com/
> 
> 



      ____________________________________________________________________________________
Luggage? GPS? Comic books? 
Check out fitting gifts for grads at Yahoo! Search
http://search.yahoo.com/search?fr=oni_on_mail&p=graduation+gifts&cs=bz

From rschulz at sonic.net  Mon Sep 10 13:49:50 2007
From: rschulz at sonic.net (Randall R Schulz)
Date: Mon, 10 Sep 2007 13:49:50 -0700
Subject: [antlr-interest] replacing NoViableAltException with exception
	with less stack
In-Reply-To: <258744.3878.qm@web55911.mail.re3.yahoo.com>
References: <258744.3878.qm@web55911.mail.re3.yahoo.com>
Message-ID: <200709101349.50256.rschulz@sonic.net>

On Monday 10 September 2007 13:40, Loring Craymer wrote:
> That may be the only practical solution since the
> stack trace stuff is from java.lang.Throwable.
> Alternatively, you might try adding a dummy
> fillInStackTrace() method to RecognitionException or
> NoViableAltException--that might work.

Overriding fillInStackTrace() is the canonical way to allow instances of 
Throwable subclasses to be initialized cheaply (the real 
fillInStackTrace() is quite expensive).

Naturally, that technique serves other purposes for which a real stack 
trace is not desired or required, as well.


Randall Schulz

From blackdrag at gmx.org  Mon Sep 10 19:05:18 2007
From: blackdrag at gmx.org (Jochen Theodorou)
Date: Tue, 11 Sep 2007 04:05:18 +0200
Subject: [antlr-interest] replacing NoViableAltException with exception
 with less stack
In-Reply-To: <200709101349.50256.rschulz@sonic.net>
References: <258744.3878.qm@web55911.mail.re3.yahoo.com>
	<200709101349.50256.rschulz@sonic.net>
Message-ID: <46E5F7DE.6040004@gmx.org>

Randall R Schulz schrieb:
 > On Monday 10 September 2007 13:40, Loring Craymer wrote:
[...]
 > Overriding fillInStackTrace() is the canonical way to allow instances 
of Throwable subclasses to be initialized cheaply (the real 
fillInStackTrace() is quite expensive).
 >
 > Naturally, that technique serves other purposes for which a real 
stack trace is not desired or required, as well.

yes.. we don't need the stack trace except when we debug the grammar 
itself.. But well..looks like there is other way than adapting the 
generator itself. I hopes there was a solution for this using the 
grammar. But of course the grammar can't do it all

bye blackdrag

-- 
Jochen "blackdrag" Theodorou
Groovy Tech Lead (http://groovy.codehaus.org)
http://blackdragsview.blogspot.com/


From rschulz at sonic.net  Mon Sep 10 19:28:30 2007
From: rschulz at sonic.net (Randall R Schulz)
Date: Mon, 10 Sep 2007 19:28:30 -0700
Subject: [antlr-interest] replacing NoViableAltException with exception
	with less stack
In-Reply-To: <46E59E5F.5040601@gmx.org>
References: <46E59E5F.5040601@gmx.org>
Message-ID: <200709101928.30445.rschulz@sonic.net>

On Monday 10 September 2007 12:43, Jochen Theodorou wrote:
> Hi,
>
> we (Groovy team) have currently several performance problems with our
> grammar. The resulting Parser is a bit too slow for our needs and we
> are now looking for a way to make it faster. The grammar is a big and
> complicated beast and I am sure there are many places we can make it
> better.
>
> But one thing that would speed up the whole thing a little is to
> remove that stack trace used by the NoViableAltException.

Do I understand you to be saying that the grammar used by Groovy 
routinely produces these exceptions even for grammatically acceptable 
input? If so, why? If not, then it cannot be a source of excessive 
overhead.


> ...
>
> Note: atm antlr 3.0 is no option

Eh? Why not?


> thanks, blackdrag


Randall Schulz

From lgcraymer at yahoo.com  Mon Sep 10 20:29:53 2007
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Mon, 10 Sep 2007 20:29:53 -0700 (PDT)
Subject: [antlr-interest] replacing NoViableAltException with exception
	with less stack
In-Reply-To: <200709101928.30445.rschulz@sonic.net>
Message-ID: <29037.86762.qm@web55912.mail.re3.yahoo.com>

Exceptions are a fact of life for grammars with
synpreds.

--Loring

--- Randall R Schulz <rschulz at sonic.net> wrote:

> On Monday 10 September 2007 12:43, Jochen Theodorou
> wrote:
> > Hi,
> >
> > we (Groovy team) have currently several
> performance problems with our
> > grammar. The resulting Parser is a bit too slow
> for our needs and we
> > are now looking for a way to make it faster. The
> grammar is a big and
> > complicated beast and I am sure there are many
> places we can make it
> > better.
> >
> > But one thing that would speed up the whole thing
> a little is to
> > remove that stack trace used by the
> NoViableAltException.
> 
> Do I understand you to be saying that the grammar
> used by Groovy 
> routinely produces these exceptions even for
> grammatically acceptable 
> input? If so, why? If not, then it cannot be a
> source of excessive 
> overhead.
> 
> 
> > ...
> >
> > Note: atm antlr 3.0 is no option
> 
> Eh? Why not?
> 
> 
> > thanks, blackdrag
> 
> 
> Randall Schulz
> 



       
____________________________________________________________________________________
Yahoo! oneSearch: Finally, mobile search 
that gives answers, not web links. 
http://mobile.yahoo.com/mobileweb/onesearch?refer=1ONXIC

From pink at odahoda.de  Mon Sep 10 11:37:46 2007
From: pink at odahoda.de (Benjamin Niemann)
Date: Mon, 10 Sep 2007 20:37:46 +0200
Subject: [antlr-interest] Python target v3 unicode problems
References: <af8252920709100928s53ddeb3bp489df8fbbfab4844@mail.gmail.com>
Message-ID: <fc42tq$vk1$1@sea.gmane.org>

Hi Vi?ar,

Vi?ar Svansson wrote:
> I am trying to scan a UTF-8 file using the python target but with no luck.
> I usually get this error:
> 
> UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position
> 0: ordinal not in range(128)
> 
> I have tried to cast the strings to unicode everywhere but I nothing
> seems to work. I have also tried many different declarations of the
> unicode tokens but nothing seems to work there either.
> 
> I found reference to something like this:
> 
> class L extends Lexer;
> options {
> charVocabulary = '\3'..'\377' | '\u1000'..'\u1fff';
> }
> 
> But I think this is v2 syntax, correct?
> Does anyone have a working unicode lexer in python?

You must feed unicode data into the lexer. So if you are using
ANTLRFileStream, use something like
  ANTLRFileStream(path, encoding='utf-8')


HTH



-- 
Benjamin Niemann
Email: pink at odahoda dot de
WWW: http://pink.odahoda.de/


From matthew.bowman at sogotech.com  Mon Sep 10 23:36:27 2007
From: matthew.bowman at sogotech.com (Matthew Bowman)
Date: Tue, 11 Sep 2007 09:36:27 +0300
Subject: [antlr-interest] Lexer/Parser Reuse?
Message-ID: <46E6376B.7050107@sogotech.com>

Greetings everybody,

I found this thread 
(http://www.antlr.org/pipermail/antlr-interest/2005-August/013503.html) 
on the list put it didn't help me :(

I'm trying to figure out how I can setup a "pipeline" of a Lexer --> 
Parser combination for a mini-scripting language I'm using ANTLR for. 
Basically there's an "on-demand" interpreter component that I would like 
to push String expressions into the Lexer and pull my nice AST out of 
the parser (over and over again with out recreating a new Lexer/Parser 
each time).

Could anyone help me out on how I would go about doing such a thing?

Thanks in advance,
--Matthew Bowman

From blackdrag at gmx.org  Tue Sep 11 04:54:01 2007
From: blackdrag at gmx.org (Jochen Theodorou)
Date: Tue, 11 Sep 2007 13:54:01 +0200
Subject: [antlr-interest] replacing NoViableAltException with exception
 with less stack
In-Reply-To: <29037.86762.qm@web55912.mail.re3.yahoo.com>
References: <29037.86762.qm@web55912.mail.re3.yahoo.com>
Message-ID: <46E681D9.2030800@gmx.org>

Loring Craymer schrieb:
 > Exceptions are a fact of life for grammars with
 > synpreds.

that's right... for example:

declarationStart!
     :   (      "def" nls
             | modifier nls
             | annotation nls
              | (   upperCaseIdent
                    |   builtInType
                    |   qualifiedTypeName
               ) (typeArguments)? (LBRACK balancedTokens RBRACK)*
         )+
         IDENT
     ;

that is used as syntactic Predicate at several places... I know, very bad.

bye blackdrag

-- 
Jochen "blackdrag" Theodorou
Groovy Tech Lead (http://groovy.codehaus.org)
http://blackdragsview.blogspot.com/


From mazzucco at iiasa.ac.at  Tue Sep 11 05:47:31 2007
From: mazzucco at iiasa.ac.at (Rupert Mazzucco)
Date: Tue, 11 Sep 2007 14:47:31 +0200
Subject: [antlr-interest] C target; C++ compatibility?
In-Reply-To: <20070910150415.6e1b42d4.mazzucco@iiasa.ac.at>
References: <20070910150415.6e1b42d4.mazzucco@iiasa.ac.at>
Message-ID: <20070911144731.29f0227e.mazzucco@iiasa.ac.at>

> antlr3bitset.h line 51 declares a function pointer named "or":
> 
>   struct ANTLR3_BITSET_struct  *  (*or)	    (struct ANTLR3_BITSET_struct  * bitset1, struct ANTLR3_BITSET_struct * bitset2);

The SunPro 5.9 compiler doesn't like it either.  Does anybody have a comment on the
use of C++ keywords as symbols in the C target?  I realize it's the C, not C++, target,
but as the latter seems not really functional yet, using the C target via the is the
obvious workaround. This would be much facilitated if the headers could be included
in a C++ program as 'extern "C"'.  I would appreciate a hint on how much work renaming
this symbol requires.  I found it in antlr3bitset.{h,c}, but it must be used somewhere
else and grepping for "or" is not so illuminating.

Thank you
Rupert
-- 
Rupert Mazzucco         <mazzucco at iiasa.ac.at>
Research Scholar, Evolution and Ecology Program
IIASA - Institute for Applied Systems Analysis
Schlossplatz 1, 2361 Laxenburg, Austria
Phone: +43 2236 807 522   Fax: +43 2236 713 13

From parrt at cs.usfca.edu  Tue Sep 11 07:55:11 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 11 Sep 2007 07:55:11 -0700
Subject: [antlr-interest] Lexer/Parser Reuse?
In-Reply-To: <46E6376B.7050107@sogotech.com>
References: <46E6376B.7050107@sogotech.com>
Message-ID: <BB5814B1-8512-47C5-846F-38AE70B44F36@cs.usfca.edu>

Check for a reset method in lexer/parser (v3).  Actually, you want to  
set the char stream / token stream.  I *think* that made it into  
3.0.1.  If not, I can get you 3.1b1.
Ter
On Sep 10, 2007, at 11:36 PM, Matthew Bowman wrote:

> Greetings everybody,
>
> I found this thread (http://www.antlr.org/pipermail/antlr- 
> interest/2005-August/013503.html) on the list put it didn't help me :(
>
> I'm trying to figure out how I can setup a "pipeline" of a Lexer -- 
> > Parser combination for a mini-scripting language I'm using ANTLR  
> for. Basically there's an "on-demand" interpreter component that I  
> would like to push String expressions into the Lexer and pull my  
> nice AST out of the parser (over and over again with out recreating  
> a new Lexer/Parser each time).
>
> Could anyone help me out on how I would go about doing such a thing?
>
> Thanks in advance,
> --Matthew Bowman


From matthew.bowman at sogotech.com  Tue Sep 11 08:08:47 2007
From: matthew.bowman at sogotech.com (Matthew Bowman)
Date: Tue, 11 Sep 2007 18:08:47 +0300
Subject: [antlr-interest] Lexer/Parser Reuse?
In-Reply-To: <BB5814B1-8512-47C5-846F-38AE70B44F36@cs.usfca.edu>
References: <46E6376B.7050107@sogotech.com>
	<BB5814B1-8512-47C5-846F-38AE70B44F36@cs.usfca.edu>
Message-ID: <46E6AF7F.9020409@sogotech.com>

I tried calling reset on both the lexer/parser however it seems the 
CommonTokenStream instance in between them still maintains the old input.

Example:

 String input1 = "2 + 3";
 String input2 = "4 * 5";

 MyLexer lex = new MyLexer();
 CommonTokenStream tokens = new CommonTokenStream(lex);
 MyParser parser = new MyParser(tokens);
 parser.setTreeAdaptor(new MyAstTreeAdaptor);

 lex.setCharStream(new ANTLRStringStream(input1));
 MyAst tree1  = (MyAst) parser.parseExpression().getTree();
 System.out.println(tree1.toStringTree());

 lex.setCharStream(new ANTLRStringStream(input2));
 MyAst tree2  = (MyAst) parser.parseExpression().getTree();
 System.out.println(tree2.toStringTree());

Result:

 (+ 2 3)
 (+ 2 3)

However if I do it this way it works...

Example

   /** same as above **/

 lex.setCharStream(new ANTLRStringStream(input1));
 MyAst tree1  = (MyAst) parser.parseExpression().getTree();
 System.out.println(tree1.toStringTree());

 lex.setCharStream(new ANTLRStringStream(input2));
 tokens = new CommonTokenStream(lex);
 parser.setTokenStream(tokens);
 MyAst tree2  = (MyAst) parser.parseExpression().getTree();
 System.out.println(tree2.toStringTree());

Result

 (+ 2 3)
 (* 4 5)

:(

Thanks for the reply!
--Matthew

Terence Parr wrote:
> Check for a reset method in lexer/parser (v3).  Actually, you want to 
> set the char stream / token stream.  I *think* that made it into 
> 3.0.1.  If not, I can get you 3.1b1.
> Ter
> On Sep 10, 2007, at 11:36 PM, Matthew Bowman wrote:
>
>> Greetings everybody,
>>
>> I found this thread 
>> (http://www.antlr.org/pipermail/antlr-interest/2005-August/013503.html) 
>> on the list put it didn't help me :(
>>
>> I'm trying to figure out how I can setup a "pipeline" of a Lexer --> 
>> Parser combination for a mini-scripting language I'm using ANTLR for. 
>> Basically there's an "on-demand" interpreter component that I would 
>> like to push String expressions into the Lexer and pull my nice AST 
>> out of the parser (over and over again with out recreating a new 
>> Lexer/Parser each time).
>>
>> Could anyone help me out on how I would go about doing such a thing?
>>
>> Thanks in advance,
>> --Matthew Bowman
>


-- 
Matthew Bowman
Chief Technical Officer

SoGo Technology SRL
 Traian Vuia 89
 Cluj-Napoca 400387
 Romania

Phone (ext. 642)
 +40 (318) 122364  : Romania
 +47 ( 21) 543272  : Oslo, Norway
 + 1 (404) 7956245 : Atlanta, Georgia USA
 + 1 (866) 3575982 : Toll-Free USA

Fax
 +40 (364) 402227  : Romania

Mobile
 +40 (751) 596963  : Romania



From Erik.Putrycz at nrc-cnrc.gc.ca  Tue Sep 11 08:24:19 2007
From: Erik.Putrycz at nrc-cnrc.gc.ca (Putrycz, Erik)
Date: Tue, 11 Sep 2007 11:24:19 -0400
Subject: [antlr-interest] antlrworks bug: invalid code generated with
	semantic predicates
Message-ID: <E4D07AB09F5F044299333C8D0FEB45E904C72FDC@nrccenexb1.nrc.ca>

I'll try to narrow this down but with some semantic predicates,
antlrworks causes this error:

[11:20:50] \tmp\antlrworks\Cobolv3Parser.java:25462: illegal start of
expression

[11:20:50]         int alt=;

[11:20:50]                 ^

[11:20:50] 1 error

 

Erik Putrycz, Ph.D - Research Associate / erik.putrycz at nrc-cnrc.gc.ca
<mailto:erik.putrycz at nrc-cnrc.gc.ca>  / (613) 990 0681

Institute for Information Technology - Software Engineering Group

National Research Council, Canada - Building M-50, 1200 Montreal Road

Ottawa, Ontario, CANADA K1A 0R6

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070911/4c527b2f/attachment.html 

From parrt at cs.usfca.edu  Tue Sep 11 08:41:01 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 11 Sep 2007 08:41:01 -0700
Subject: [antlr-interest] antlrworks bug: invalid code generated with
	semantic predicates
In-Reply-To: <E4D07AB09F5F044299333C8D0FEB45E904C72FDC@nrccenexb1.nrc.ca>
References: <E4D07AB09F5F044299333C8D0FEB45E904C72FDC@nrccenexb1.nrc.ca>
Message-ID: <0375C5CB-FCD0-4057-A3C2-59FDD9CDBBFF@cs.usfca.edu>

Hi. that's an ANTLR issue if anything.  Please narrow it down to a  
simple rule that generates invalid code.  Were there any errors/ 
warnings from ANTLR?
Ter
On Sep 11, 2007, at 8:24 AM, Putrycz, Erik wrote:

> I?ll try to narrow this down but with some semantic predicates,  
> antlrworks causes this error:
>
> [11:20:50] \tmp\antlrworks\Cobolv3Parser.java:25462: illegal start  
> of expression
>
> [11:20:50]         int alt=;
>
> [11:20:50]                 ^
>
> [11:20:50] 1 error
>
>
> Erik Putrycz, Ph.D - Research Associate / erik.putrycz at nrc- 
> cnrc.gc.ca / (613) 990 0681
>
> Institute for Information Technology - Software Engineering Group
>
> National Research Council, Canada - Building M-50, 1200 Montreal Road
>
> Ottawa, Ontario, CANADA K1A 0R6
>
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070911/fa13847a/attachment.html 

From laguest at archangeli.co.uk  Tue Sep 11 08:48:03 2007
From: laguest at archangeli.co.uk (Luke A. Guest)
Date: Tue, 11 Sep 2007 16:48:03 +0100
Subject: [antlr-interest] Is there any Delphi(Object Pascal) target?
In-Reply-To: <46E578AA.70607@tullab.com>
References: <46E578AA.70607@tullab.com>
Message-ID: <1189525683.6264.0.camel@rogue>

On Mon, 2007-09-10 at 20:02 +0300, Fatih Tolga wrote:
> .. or any plans to implement a delphi target?

Somebody definitely started on it as he posted code. His email was
service at something_or_other it was a strange address and I don't think he
gave a name either.

Luke.



From Erik.Putrycz at nrc-cnrc.gc.ca  Tue Sep 11 09:14:49 2007
From: Erik.Putrycz at nrc-cnrc.gc.ca (Putrycz, Erik)
Date: Tue, 11 Sep 2007 12:14:49 -0400
Subject: [antlr-interest] antlrworks bug: invalid code generated
	withsemantic predicates
In-Reply-To: <0375C5CB-FCD0-4057-A3C2-59FDD9CDBBFF@cs.usfca.edu>
References: <E4D07AB09F5F044299333C8D0FEB45E904C72FDC@nrccenexb1.nrc.ca>
	<0375C5CB-FCD0-4057-A3C2-59FDD9CDBBFF@cs.usfca.edu>
Message-ID: <E4D07AB09F5F044299333C8D0FEB45E904C72FF8@nrccenexb1.nrc.ca>

My (ugly) rule is the following

comparison

            : (simpleComparison multiComparisonOp composed_test) =>
simpleComparison

            -> ^(BASIC_COMPARISON simpleComparison)

            

            //basic multiple comparison M1D906RECORD-TYPE = 10 OR 30 OR
70

            | (simpleComparison (multiComparisonOp comp_op? arith_expr)+
(multiComparisonOp simpleComparison)?) => 

              simpleComparison (boolOp=multiComparisonOp
(compOp=comp_op)? arith_expr)+

            -> {compOp != null}? ^(MULTI_COMPARISON simpleComparison
^($boolOp ^($compOp arith_expr))*)

            -> ^(MULTI_COMPARISON simpleComparison ^($boolOp
arith_expr)*)

            

            // case with brackets M1D906RECORD-TYPE = (10 OR 30 OR 70)


            | (arith_expr comp_op LPAREN arith_expr (multiComparisonOp
comp_op? arith_expr)+ RPAREN) => 

              arith_expr comp_op LPAREN arith_expr
(boolOp=multiComparisonOp (compOp=comp_op)? arith_expr)+ RPAREN

            -> {compOp != null}? ^(MULTI_COMPARISON arith_expr comp_op
arith_expr ^($boolOp ^($compOp arith_expr))*)

            -> ^(MULTI_COMPARISON arith_expr comp_op arith_expr
^($boolOp arith_expr)*)

            

            | simpleComparison

            -> ^(BASIC_COMPARISON simpleComparison)

            ;

 

The bug happens when I changed (simpleComparison (multiComparisonOp
comp_op? arith_expr)+) => to (simpleComparison (multiComparisonOp
comp_op? arith_expr)+ (multiComparisonOp simpleComparison)?) =>

 

The invalid code is generated for comp_op? which is a simple rule:

comp_op: 

            'IS'? 'NOT'?

            ( (LESS^ | ('LESS'^ 'THAN'!))

            | (GREATER^ |('GREATER'^ 'THAN'!))

            | (EQUAL^ | ('EQUAL'^ 'TO'?)) 

            | GREATEREQUAL^

            | LESSEQUAL^)

            ;

 

There is no particular warning generated. I only have "no lexer rule
corresponding to token:..." warnings.

 

Erik Putrycz, Ph.D - Research Associate / (613) 990 0681

Institute for Information Technology - Software Engineering Group

National Research Council, Canada - Building M-50, 1200 Montreal Road

Ottawa, Ontario, CANADA K1A 0R6

 

________________________________

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Terence Parr
Sent: Tuesday, September 11, 2007 11:41 AM
To: antlr Interest
Subject: Re: [antlr-interest] antlrworks bug: invalid code generated
withsemantic predicates

 

Hi. that's an ANTLR issue if anything.  Please narrow it down to a
simple rule that generates invalid code.  Were there any errors/warnings
from ANTLR?

Ter

On Sep 11, 2007, at 8:24 AM, Putrycz, Erik wrote:





I'll try to narrow this down but with some semantic predicates,
antlrworks causes this error:

[11:20:50] \tmp\antlrworks\Cobolv3Parser.java:25462: illegal start of
expression

[11:20:50]         int alt=;

[11:20:50]                 ^

[11:20:50] 1 error

 

Erik Putrycz, Ph.D - Research Associate / erik.putrycz at nrc-cnrc.gc.ca
<mailto:erik.putrycz at nrc-cnrc.gc.ca>  / (613) 990 0681

Institute for Information Technology - Software Engineering Group

National Research Council, Canada - Building M-50, 1200 Montreal Road

Ottawa, Ontario, CANADA K1A 0R6 

 





 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070911/0e562e9e/attachment-0001.html 

From lgcraymer at yahoo.com  Tue Sep 11 09:18:57 2007
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Tue, 11 Sep 2007 09:18:57 -0700 (PDT)
Subject: [antlr-interest] Lexer/Parser Reuse?
In-Reply-To: <46E6AF7F.9020409@sogotech.com>
Message-ID: <968487.16445.qm@web55902.mail.re3.yahoo.com>

One thing that will work is to subclass
ANTLRStringStream and add

	public void setInputTo(String input) {
		reset();
		this.data = input.toCharArray();
		this.n = input.length();		
	}
and then call this method instead of creating a new
string stream.

Ter--maybe you should add this to ANTLRStringStream? 
I freely grant permission, etc, etc.

--Loring

--- Matthew Bowman <matthew.bowman at sogotech.com>
wrote:

> I tried calling reset on both the lexer/parser
> however it seems the 
> CommonTokenStream instance in between them still
> maintains the old input.
> 
> Example:
> 
>  String input1 = "2 + 3";
>  String input2 = "4 * 5";
> 
>  MyLexer lex = new MyLexer();
>  CommonTokenStream tokens = new
> CommonTokenStream(lex);
>  MyParser parser = new MyParser(tokens);
>  parser.setTreeAdaptor(new MyAstTreeAdaptor);
> 
>  lex.setCharStream(new ANTLRStringStream(input1));
>  MyAst tree1  = (MyAst)
> parser.parseExpression().getTree();
>  System.out.println(tree1.toStringTree());
> 
>  lex.setCharStream(new ANTLRStringStream(input2));
>  MyAst tree2  = (MyAst)
> parser.parseExpression().getTree();
>  System.out.println(tree2.toStringTree());
> 
> Result:
> 
>  (+ 2 3)
>  (+ 2 3)
> 
> However if I do it this way it works...
> 
> Example
> 
>    /** same as above **/
> 
>  lex.setCharStream(new ANTLRStringStream(input1));
>  MyAst tree1  = (MyAst)
> parser.parseExpression().getTree();
>  System.out.println(tree1.toStringTree());
> 
>  lex.setCharStream(new ANTLRStringStream(input2));
>  tokens = new CommonTokenStream(lex);
>  parser.setTokenStream(tokens);
>  MyAst tree2  = (MyAst)
> parser.parseExpression().getTree();
>  System.out.println(tree2.toStringTree());
> 
> Result
> 
>  (+ 2 3)
>  (* 4 5)
> 
> :(
> 
> Thanks for the reply!
> --Matthew
> 
> Terence Parr wrote:
> > Check for a reset method in lexer/parser (v3). 
> Actually, you want to 
> > set the char stream / token stream.  I *think*
> that made it into 
> > 3.0.1.  If not, I can get you 3.1b1.
> > Ter
> > On Sep 10, 2007, at 11:36 PM, Matthew Bowman
> wrote:
> >
> >> Greetings everybody,
> >>
> >> I found this thread 
> >>
>
(http://www.antlr.org/pipermail/antlr-interest/2005-August/013503.html)
> 
> >> on the list put it didn't help me :(
> >>
> >> I'm trying to figure out how I can setup a
> "pipeline" of a Lexer --> 
> >> Parser combination for a mini-scripting language
> I'm using ANTLR for. 
> >> Basically there's an "on-demand" interpreter
> component that I would 
> >> like to push String expressions into the Lexer
> and pull my nice AST 
> >> out of the parser (over and over again with out
> recreating a new 
> >> Lexer/Parser each time).
> >>
> >> Could anyone help me out on how I would go about
> doing such a thing?
> >>
> >> Thanks in advance,
> >> --Matthew Bowman
> >
> 
> 
> -- 
> Matthew Bowman
> Chief Technical Officer
> 
> SoGo Technology SRL
>  Traian Vuia 89
>  Cluj-Napoca 400387
>  Romania
> 
> Phone (ext. 642)
>  +40 (318) 122364  : Romania
>  +47 ( 21) 543272  : Oslo, Norway
>  + 1 (404) 7956245 : Atlanta, Georgia USA
>  + 1 (866) 3575982 : Toll-Free USA
> 
> Fax
>  +40 (364) 402227  : Romania
> 
> Mobile
>  +40 (751) 596963  : Romania
> 
> 
> 



       
____________________________________________________________________________________
Building a website is a piece of cake. Yahoo! Small Business gives you all the tools to get online.
http://smallbusiness.yahoo.com/webhosting 

From Erik.Putrycz at nrc-cnrc.gc.ca  Tue Sep 11 10:37:15 2007
From: Erik.Putrycz at nrc-cnrc.gc.ca (Putrycz, Erik)
Date: Tue, 11 Sep 2007 13:37:15 -0400
Subject: [antlr-interest] antlrworks bug: invalid code
	generatedwithsemantic predicates
In-Reply-To: <E4D07AB09F5F044299333C8D0FEB45E904C72FF8@nrccenexb1.nrc.ca>
References: <E4D07AB09F5F044299333C8D0FEB45E904C72FDC@nrccenexb1.nrc.ca><0375C5CB-FCD0-4057-A3C2-59FDD9CDBBFF@cs.usfca.edu>
	<E4D07AB09F5F044299333C8D0FEB45E904C72FF8@nrccenexb1.nrc.ca>
Message-ID: <E4D07AB09F5F044299333C8D0FEB45E904C7302D@nrccenexb1.nrc.ca>

Ok, I figured out how to write this in a nicer way. My problem is
solved. 

However this case looks like a bug around?!

 

Erik.

 

________________________________

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Putrycz, Erik
Sent: Tuesday, September 11, 2007 12:15 PM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] antlrworks bug: invalid code
generatedwithsemantic predicates

 

My (ugly) rule is the following

comparison

            : (simpleComparison multiComparisonOp composed_test) =>
simpleComparison

            -> ^(BASIC_COMPARISON simpleComparison)

            

            //basic multiple comparison M1D906RECORD-TYPE = 10 OR 30 OR
70

            | (simpleComparison (multiComparisonOp comp_op? arith_expr)+
(multiComparisonOp simpleComparison)?) => 

              simpleComparison (boolOp=multiComparisonOp
(compOp=comp_op)? arith_expr)+

            -> {compOp != null}? ^(MULTI_COMPARISON simpleComparison
^($boolOp ^($compOp arith_expr))*)

            -> ^(MULTI_COMPARISON simpleComparison ^($boolOp
arith_expr)*)

            

            // case with brackets M1D906RECORD-TYPE = (10 OR 30 OR 70)


            | (arith_expr comp_op LPAREN arith_expr (multiComparisonOp
comp_op? arith_expr)+ RPAREN) => 

              arith_expr comp_op LPAREN arith_expr
(boolOp=multiComparisonOp (compOp=comp_op)? arith_expr)+ RPAREN

            -> {compOp != null}? ^(MULTI_COMPARISON arith_expr comp_op
arith_expr ^($boolOp ^($compOp arith_expr))*)

            -> ^(MULTI_COMPARISON arith_expr comp_op arith_expr
^($boolOp arith_expr)*)

            

            | simpleComparison

            -> ^(BASIC_COMPARISON simpleComparison)

            ;

 

The bug happens when I changed (simpleComparison (multiComparisonOp
comp_op? arith_expr)+) => to (simpleComparison (multiComparisonOp
comp_op? arith_expr)+ (multiComparisonOp simpleComparison)?) =>

 

The invalid code is generated for comp_op? which is a simple rule:

comp_op: 

            'IS'? 'NOT'?

            ( (LESS^ | ('LESS'^ 'THAN'!))

            | (GREATER^ |('GREATER'^ 'THAN'!))

            | (EQUAL^ | ('EQUAL'^ 'TO'?)) 

            | GREATEREQUAL^

            | LESSEQUAL^)

            ;

 

There is no particular warning generated. I only have "no lexer rule
corresponding to token:..." warnings.

 

Erik Putrycz, Ph.D - Research Associate / (613) 990 0681

Institute for Information Technology - Software Engineering Group

National Research Council, Canada - Building M-50, 1200 Montreal Road

Ottawa, Ontario, CANADA K1A 0R6

 

________________________________

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Terence Parr
Sent: Tuesday, September 11, 2007 11:41 AM
To: antlr Interest
Subject: Re: [antlr-interest] antlrworks bug: invalid code generated
withsemantic predicates

 

Hi. that's an ANTLR issue if anything.  Please narrow it down to a
simple rule that generates invalid code.  Were there any errors/warnings
from ANTLR?

Ter

On Sep 11, 2007, at 8:24 AM, Putrycz, Erik wrote:

 

I'll try to narrow this down but with some semantic predicates,
antlrworks causes this error:

[11:20:50] \tmp\antlrworks\Cobolv3Parser.java:25462: illegal start of
expression

[11:20:50]         int alt=;

[11:20:50]                 ^

[11:20:50] 1 error

 

Erik Putrycz, Ph.D - Research Associate / erik.putrycz at nrc-cnrc.gc.ca
<mailto:erik.putrycz at nrc-cnrc.gc.ca>  / (613) 990 0681

Institute for Information Technology - Software Engineering Group

National Research Council, Canada - Building M-50, 1200 Montreal Road

Ottawa, Ontario, CANADA K1A 0R6 

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070911/63fe5ac9/attachment.html 

From Erik.Putrycz at nrc-cnrc.gc.ca  Tue Sep 11 12:34:33 2007
From: Erik.Putrycz at nrc-cnrc.gc.ca (Putrycz, Erik)
Date: Tue, 11 Sep 2007 15:34:33 -0400
Subject: [antlr-interest] how to find if parser ate all input?
Message-ID: <E4D07AB09F5F044299333C8D0FEB45E904C7307C@nrccenexb1.nrc.ca>

In my grammar unit tests, I test if the parser ate the whole input
string. 

With antlr 2.7 this was easy but I cannot figure out how to do this with
antlr 3.

The antlrworks debugger somehow shows them in grey. How is this done?

 

Erik Putrycz, Ph.D - Research Associate / (613) 990 0681

Institute for Information Technology - Software Engineering Group

National Research Council, Canada - Building M-50, 1200 Montreal Road

Ottawa, Ontario, CANADA K1A 0R6

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070911/bfe43d7d/attachment.html 

From parrt at cs.usfca.edu  Tue Sep 11 12:36:03 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 11 Sep 2007 12:36:03 -0700
Subject: [antlr-interest] how to find if parser ate all input?
In-Reply-To: <E4D07AB09F5F044299333C8D0FEB45E904C7307C@nrccenexb1.nrc.ca>
References: <E4D07AB09F5F044299333C8D0FEB45E904C7307C@nrccenexb1.nrc.ca>
Message-ID: <E652FA02-8BC3-432B-A12A-AFD2B165C3C0@cs.usfca.edu>


On Sep 11, 2007, at 12:34 PM, Putrycz, Erik wrote:

> In my grammar unit tests, I test if the parser ate the whole input  
> string.
>
> With antlr 2.7 this was easy but I cannot figure out how to do this  
> with antlr 3.
>
> The antlrworks debugger somehow shows them in grey. How is this done?

see if input.index() >= input.size() I guess.

Ter

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070911/92bbd1c0/attachment.html 

From rschulz at sonic.net  Tue Sep 11 12:46:19 2007
From: rschulz at sonic.net (Randall R Schulz)
Date: Tue, 11 Sep 2007 12:46:19 -0700
Subject: [antlr-interest] how to find if parser ate all input?
In-Reply-To: <E4D07AB09F5F044299333C8D0FEB45E904C7307C@nrccenexb1.nrc.ca>
References: <E4D07AB09F5F044299333C8D0FEB45E904C7307C@nrccenexb1.nrc.ca>
Message-ID: <200709111246.19891.rschulz@sonic.net>

On Tuesday 11 September 2007 12:34, Putrycz, Erik wrote:
> In my grammar unit tests, I test if the parser ate the whole input
> string.
>
> With antlr 2.7 this was easy but I cannot figure out how to do this
> with antlr 3.

Put an explicit EOF token in the grammar in the production for your 
start symbol(s).


> ...
>
> Erik Putrycz


Randall Schulz

From Waverly.Edwards at genesys.com  Tue Sep 11 13:24:25 2007
From: Waverly.Edwards at genesys.com (Edwards, Waverly)
Date: Tue, 11 Sep 2007 16:24:25 -0400
Subject: [antlr-interest] how to find if parser ate all input?
In-Reply-To: <E4D07AB09F5F044299333C8D0FEB45E904C7307C@nrccenexb1.nrc.ca>
References: <E4D07AB09F5F044299333C8D0FEB45E904C7307C@nrccenexb1.nrc.ca>
Message-ID: <FF993752CB890B4EB591BE5450C37BF1B6F41C@navamane001.ad.internal.corp>

 
That's what the grey means!!!  I've been puzzled by that.
 
 
W.

________________________________

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Putrycz, Erik
Sent: Tuesday, September 11, 2007 3:35 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] how to find if parser ate all input?



In my grammar unit tests, I test if the parser ate the whole input
string. 

With antlr 2.7 this was easy but I cannot figure out how to do this with
antlr 3.

The antlrworks debugger somehow shows them in grey. How is this done?

 

Erik Putrycz, Ph.D - Research Associate / (613) 990 0681

Institute for Information Technology - Software Engineering Group

National Research Council, Canada - Building M-50, 1200 Montreal Road

Ottawa, Ontario, CANADA K1A 0R6

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070911/a769ebb8/attachment.html 

From Waverly.Edwards at genesys.com  Tue Sep 11 13:26:30 2007
From: Waverly.Edwards at genesys.com (Edwards, Waverly)
Date: Tue, 11 Sep 2007 16:26:30 -0400
Subject: [antlr-interest] how to find if parser ate all input?
In-Reply-To: <200709111246.19891.rschulz@sonic.net>
References: <E4D07AB09F5F044299333C8D0FEB45E904C7307C@nrccenexb1.nrc.ca>
	<200709111246.19891.rschulz@sonic.net>
Message-ID: <FF993752CB890B4EB591BE5450C37BF1B6F41F@navamane001.ad.internal.corp>

 
I must not have done that correctly.  
I thought I explicitly put an EOF in the grammar and came up with an
error.


W.

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Randall R Schulz
Sent: Tuesday, September 11, 2007 3:46 PM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] how to find if parser ate all input?

On Tuesday 11 September 2007 12:34, Putrycz, Erik wrote:
> In my grammar unit tests, I test if the parser ate the whole input 
> string.
>
> With antlr 2.7 this was easy but I cannot figure out how to do this 
> with antlr 3.

Put an explicit EOF token in the grammar in the production for your
start symbol(s).


> ...
>
> Erik Putrycz


Randall Schulz

From Carleton at Coffrin.com  Tue Sep 11 14:17:03 2007
From: Carleton at Coffrin.com (Carleton Coffrin)
Date: Tue, 11 Sep 2007 17:17:03 -0400
Subject: [antlr-interest]  invalid char literal: 65535?
Message-ID: <190cfd940709111417j619e643bg1c568234595d2dbc@mail.gmail.com>

In ANTLR 3, when I add the character '\uFFFF' to my lexer I receive the
following error message,

error(10):  internal error:
org.antlr.tool.Grammar.getCharValueFromGrammarCharLiteral(Grammar.java:1514):
invalid char literal: 65535

Any ideas on how I might fix this?

-Carleton

Note: '\uFFFF' worked in ANTLR 2.7
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070911/9d9ef51c/attachment.html 

From rschulz at sonic.net  Tue Sep 11 14:31:44 2007
From: rschulz at sonic.net (Randall R Schulz)
Date: Tue, 11 Sep 2007 14:31:44 -0700
Subject: [antlr-interest] invalid char literal: 65535?
In-Reply-To: <190cfd940709111417j619e643bg1c568234595d2dbc@mail.gmail.com>
References: <190cfd940709111417j619e643bg1c568234595d2dbc@mail.gmail.com>
Message-ID: <200709111431.45064.rschulz@sonic.net>

On Tuesday 11 September 2007 14:17, Carleton Coffrin wrote:
> In ANTLR 3, when I add the character '\uFFFF' to my lexer I receive
> the following error message,
>
> error(10):  internal error:
> org.antlr.tool.Grammar.getCharValueFromGrammarCharLiteral(Grammar.jav
>a:1514): invalid char literal: 65535
>
> Any ideas on how I might fix this?

What do you want to fix? That is not a valid Unicode code point. 
According to the tome I have ("The Unicode Standard, version 3.0" by 
the Unicode Consortium):

(page 23)

"* Two codes are not used to encode characters :U+FFFF is for reserved 
internal user (as a sentinel) and should not be transmitted or stored 
as part of plain text. U+FFFE is also reserved; its presence indicates 
byte-swapped Unicode data."


> -Carleton
>
> Note: '\uFFFF' worked in ANTLR 2.7

Standards conformance improves?


Randall Schulz

From Carleton at Coffrin.com  Tue Sep 11 14:54:23 2007
From: Carleton at Coffrin.com (Carleton Coffrin)
Date: Tue, 11 Sep 2007 17:54:23 -0400
Subject: [antlr-interest]  ANTLR 3 Automatic Label Generation
Message-ID: <190cfd940709111454s44cdccc9m4a6e9567d1c9a87e@mail.gmail.com>

In ANTLR 3 it seems local variables are generated automatically for tokens
and production return values.  For example, the follow production,

typeRef returns [ASTType ty]
    : n=identifier
    | tyg=parametrizedType
    | st='Enumeration' LBRACKET lid=listID end=RBRACKET
;

yields the following local variables,

Token st = null;
Token end = null;

ASTId n = null;
ASTTypeGeneric tyg = null;
ASTListId lid = null;


Consider a production where the return Values are of different types but
they all share a super class.  For example,

statements [ASTStatementList sList] @init {sList = new ASTStatementList();}
    : (s=assign {sList .add(s);}
    | s=print {sList .add(s);}
    | s=cond {sList .add(s);}
    | s=while {sList .add(s);}
    )+
;

In this case the assign, print, cond, and while productions return different
types but all of the types are subclasses of ASTStatement.  Because the
return values set to "s" do not have the same type a local variable for s is
not automatically generated and the user must add an explicit variable to
the @init block.  For example,

@init {sList = new ASTStatementList();}  --> @init {sList = new
ASTStatementList(); ASTStatement s;}


Is my understanding of how this works correct?

-Carleton
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070911/20799964/attachment.html 

From fyaoxy at gmail.com  Tue Sep 11 20:33:20 2007
From: fyaoxy at gmail.com (=?GB2312?B?z/LH2M/N?=)
Date: Wed, 12 Sep 2007 11:33:20 +0800
Subject: [antlr-interest] Call to interest Object Notation
Message-ID: <91dd9a4f0709112033j358795b6rafaab25aa13b7c21@mail.gmail.com>

Dear friends,
At first I must sorry for my not good English speaking.
I posted a grammar ON, which stands for Object Notation.
IMHO, current programming languages, there must be a shift from
complicate to simple.
Inspired by JSON, I extract a ON. now It's very simple, and just a notation.
I focus on follow points:
No quote, or quote free
No more symbols, current in ON grammar there are only {} , ; :
Context sensitive. through I know little about compiler and grammar,
but from practice view, we need this kind of language.
And I notice there are some same like stuffs:
GNU libconfuse which I forgot it, a friend hint me that we ever check out it.
Real Simple Data from Dan Yoder
YAML which I forgot it too, Dan Yolder hint me, and yes I checked it out ever.
JSON, of cause, I got a source inspiration from it.
I hope in the community someone maybe do it better.
So I make a Call to all:)

for easy, I paste ON grammar and simple document on here, If someone
intrest, ON project site is https://on.dev.java.net and my jroller log
jroller.com/qinxianscript.
And I'm struggle with antlr tree grammar with a imaginary node.

grammar On;

options{
	output=AST;
	ASTLabelType=CommonTree;
	backtrack = true;
	memoize = true;
}

tokens{
	ARRAY;
	STRING;
	PAIR;
	NAME;
	VALUE;
	OBJECT;
	STR;//imaginary node
}

@header{
package org.peony.object.notation;
}

@lexer::header{
package org.peony.object.notation;
}

/**this is document root object, contains 3 kinds of array object.
*	string, pair, object
*	TODO: add process object-string combination array;
*/
document	
	:	pairArray
	|	stringArray
	|	objectArray
	|
	;

objectArray	:	object (COMMA? object)* COMMA?	->^(ARRAY object+);

object	:	LCURLY! pairArray RCURLY!;

pairArray	:	pair+	->^(OBJECT pair+);

pair	
	:	name=stringArray COLON svalue=stringArray
	(SEMI | LINE | {input.LA(1)==RCURLY ||	input.LA(1)==EOF}?)
		->^(PAIR ^(NAME $name) ^(VALUE $svalue))
	|	name = stringArray COLON? ovalue=objectArray (SEMI | LINE | )
		->^(PAIR ^(NAME $name) ^(VALUE $ovalue))
	;

/**
* TODO: handle for "a,,,,b" pattern
*/
stringArray	:	strings (COMMA LINE strings)* ->^(ARRAY strings+);
		
strings	: string (COMMA string)*	->^(STRING string)+;

/**string consist of words need an imaginary node to contains
whitespaces between WORDs*/
string	
	:	words	->^(STR[$text] )
	|	QSTRING
	;
words	:	WORD+;

COMMENT	:	'/*' .* '*/' {$channel=HIDDEN;};
LINE_COMMENT	:	'//' ~('\n'|'\r')* '\r'? '\n' {$channel=HIDDEN;};

SEMI	:	';' ;
COMMA	:	',' ;
COLON	:	':' ;
LCURLY	:	'{' ;
RCURLY	:	'}' ;
//TODO: add escape chars process.
/**word contains any char excepted special chars in special usage*/
WORD	:	(~(' ' | '\t' | ',' | ':' | ';' | '{' | '}' | '\r' | '\n' | '"'
| '\''))+;

/**signle or double quoted string contains char excepted quote chars self*/
QSTRING
@after{
	setText(getText().substring(1, getText().length()-1));
}
	:	('"' (~('"'))* '"')
	|	('\'' (~('\''))* '\'');

/**new line token, same as follow whitespace for order priority*/	
LINE	
@init{
	int la=input.LA(-1);
	//System.out.println("before LINE:"+(char)la);
	switch(la){
		case ',':
		case ':':
		case ';':
		case '{':
		case '}':
			skip();
			break;
		default:
	}
}
@after{
	la=input.LA(1);
	//System.out.println("LINE:"+(char)la);
	//TODO: must optimize this ",\n" if in case "a:b,c,\ne,f,\n1:2" there
is a confusion.
	//need predicate nextline.contains(":")
	switch(la){
		case ',':
		case ':':
		case ';':
		case '{':
		case '}':
			skip();
			break;
		default:
	}
}
	: 	('\n' | '\r')+
	;
	
/**whitespace to ignore, place after WORD lexer token, just for order priority*/
WS	:	(' ' | '\t' | '\u000C')+ {$channel=HIDDEN;};



Object Notation (ON) Grammar Guide
Object notation is simple object string represent format. Object
notation just use special symbols as separator (, ; : { }), others are
string literal, and all internal values are string.
Quote symbols are optional. We not have to type this, and save more
and more power of type keyboards in the world?.
1: string
Object notation all is string. Other format is tool's responsibility.
Object notation use three sorts of literals represent string.

a)words and/or with whitespace, but cannot contains newline. for example:
a
123
abc
a b c
firstname lastname

b)single quoted string, and can contains newline. for example:
'abc'
'  abc '
'	abc says "hello, I am object notation".'
'this single quoted string contains a
newline'

c)double quoted string, and can contains newline. for example:
"123"
" abc   "
"	abc says 'hello, I'm object notation'."
"this double quoted string contains 2

newline"

2: string array
String array separated by a comma. and newline allowed,and  last comma
not allowed. for example:
abc,123
abc,123,
efg,456  ==>this equals abc,123,efg,456
abc, "first line
second line"

3: name value pair, or key value pair
Pair separated by a colon, end with a semi or newline.
Name component can be string array, and value component can be string
array or object array.
If value is object array,  the colon separator can be ignore, and
ended semi or newline can be ignore too. for example:
name:value;
"name":value
zhang san: woman shot chapnion from ChongQin
body, table: css contents
name{a:b},
name{a:b}

4: object
Object begin with a left curly, followed by multiple name value pairs,
end with a right curly.
The last pair without a semi or newline allowed. and pairs can be
empty. for example:
{name:value;
"name":value
lastname:lastvalue}
{}

5: object array
Object array, same like string array, but separator can be ignored. for example:

{a:b}{c:d}
{a:b},{c:d}
{a:b}{c:d},

6: document object, so called root object
Document object can be:
empty, string array, object array,
multiple pairs(just like a object without left and right curly)

7: whitespace and newline
In most case, whitespaces and newlines ignored,but in name value pair
case which be taken as a separator.



-- 
??
???

From Carleton at Coffrin.com  Wed Sep 12 11:34:54 2007
From: Carleton at Coffrin.com (Carleton Coffrin)
Date: Wed, 12 Sep 2007 14:34:54 -0400
Subject: [antlr-interest] invalid char literal: 65535?
In-Reply-To: <200709111431.45064.rschulz@sonic.net>
References: <190cfd940709111417j619e643bg1c568234595d2dbc@mail.gmail.com>
	<200709111431.45064.rschulz@sonic.net>
Message-ID: <190cfd940709121134t5741ae2du49dce16284969a4c@mail.gmail.com>

Thanks for your input Randall.  In ANTLR 2.7 I was using '\uFFFF' to
represent the EOF character.  After doing some more research I found that I
could use the EOF token instead.

Side Note: It would be helpful if this was noted in the "Migrating from
ANTLR 2 to ANTLR 3" wiki.

I did find another interesting point relating to this.  My ANTLR 2.7 rule
was as follows,

CMT: '%' (~( '\n' | '\r' | '\uFFFF' ))* ('\r\n' | '\r' | '\n' | '\uFFFF')

As a terminator the EOF token can be used in place of '\uFFFF' as follows,

('\r\n' |'\r'| '\n'|'\uFFFF') --> ('\r\n' | '\r' | '\n' | EOF)

But in a complement set EOF cannot be used to replace '\uFFFF'.  For example

CMT: '%' (~( '\n' | '\r' | EOF ))*

Yields the following error in ANTLR 3,

Cannot complement rule EOF; not a simple set or element

-Carleton

On 9/11/07, Randall R Schulz <rschulz at sonic.net> wrote:
>
> On Tuesday 11 September 2007 14:17, Carleton Coffrin wrote:
> > In ANTLR 3, when I add the character '\uFFFF' to my lexer I receive
> > the following error message,
> >
> > error(10):  internal error:
> > org.antlr.tool.Grammar.getCharValueFromGrammarCharLiteral(Grammar.jav
> >a:1514): invalid char literal: 65535
> >
> > Any ideas on how I might fix this?
>
> What do you want to fix? That is not a valid Unicode code point.
> According to the tome I have ("The Unicode Standard, version 3.0" by
> the Unicode Consortium):
>
> (page 23)
>
> "* Two codes are not used to encode characters :U+FFFF is for reserved
> internal user (as a sentinel) and should not be transmitted or stored
> as part of plain text. U+FFFE is also reserved; its presence indicates
> byte-swapped Unicode data."
>
>
> > -Carleton
> >
> > Note: '\uFFFF' worked in ANTLR 2.7
>
> Standards conformance improves?
>
>
> Randall Schulz
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070912/1add9104/attachment.html 

From nightwolf at email.it  Wed Sep 12 14:00:05 2007
From: nightwolf at email.it (Mauro Pellicioli)
Date: Wed, 12 Sep 2007 23:00:05 +0200
Subject: [antlr-interest] Grammar's correctness
Message-ID: <0160a01df10083b7291d4d0a6970e6bc@87.15.88.210>

I'm dealing with an http request that nondeterministically responds with
three kind of pages:for which of them I have a lexer grammar (making one big
grammar would lead to a poorly readable code) but I don't know which to call
(because of the nondeterminism), so I created a fourth simple grammar (say,
TypeCheckGrammar.g) that recognizes the type using the presence of some
words in the html document and then run the correct grammar on the basis of
TypeCheckGrammar.g result; is this the right way to solve the problem?

Thanks for help. 
 --
 Email.it, the professional e-mail, gratis per te: http://www.email.it/f
 
 Sponsor:
 250 biglietti da visita Gratis + 42 modelli e Etichette per Indirizzo
Gratis + Porta biglietti Gratis -Offerta limitata!
 Clicca qui: http://adv.email.it/cgi-bin/foclick.cgi?mid=6782&d=20070912



From shakilac at optumsoft.com  Wed Sep 12 14:42:53 2007
From: shakilac at optumsoft.com (Shakil Chunawala)
Date: Wed, 12 Sep 2007 14:42:53 -0700
Subject: [antlr-interest] Compiler Technologists
Message-ID: <f32ffa4c0709121442p701da664m3e1998f9bb34e55d@mail.gmail.com>

Hi,

Apologies for the intrusion.  I was referred to the antlr-interest
mailing list as a reasonable interest forum.

I was wondering if any of you knew of good compiler people that may be
interested in joining a startup.  We have an exciting opportunity for
someone interested in compiler technologies.  This is not conventional
compiler work, but rather taking compilation techniques to a much
higher level.

We are based in Menlo Park, CA close to Stanford.  Our technology is
based on work done by David Cheriton from Stanford.  David is also
involved with our startup.

If you or someone you know might be interested in such an opportunity,
please have them contact me for further info.

thanks,
-Shakil

-- 
Shakil Chunawala
President, OptumSoft Inc
275 Middlefield Rd, Suite 250
Menlo Park, CA 94025
Direct: 408-569-6651
Email: shakilac at optumsoft.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070912/8f464427/attachment.html 

From klonikowski at drheydenreich.de  Wed Sep 12 15:17:18 2007
From: klonikowski at drheydenreich.de (Tom Klonikowski)
Date: Thu, 13 Sep 2007 00:17:18 +0200
Subject: [antlr-interest] Different result using Java and Python runtime
Message-ID: <46E8656E.9010800@drheydenreich.de>

Hello list,

my name is Tom and i'm just creating my first parser using ANTLR for a
Python-based project. Its fun so far :)

I encountered a different behaviour of the Java and Python runtime for a
certain grammar (appended below).

Using the test input ": '$$$/context/property=value'" with the Java
runtime i get the expected result:
'$$$/context/property=value'.

With Python i get:
line 1:0 mismatched input ": '$$$/context/property=value'" expecting
STRINGDECL

I'm using V3.0.1

Am i missing something?

Thanks a lot for any hints and recommendations.

Tom

My grammar looks like: <text.g>

grammar test;

// Python
//options {
//    language=Python;
//}
//zstring returns [value] : STRINGDECL { $value=$STRINGDECL.text };

// Java
zstring returns [String value] : STRINGDECL { $value=$STRINGDECL.text; };

STRINGDECL : COLON WSCHAR+ QUOTE STRING QUOTE ;
   
QUOTE    : '\'';
COLON    : ':';

WSCHAR    : ( ' ' );
   
ASCII7BASE : ( 'A'..'Z' | 'a'..'z' | '_' );
   
ASCII7EXT : ( '$' | '/' | '=' );

STRING : ( ASCII7BASE | ASCII7EXT | WSCHAR )+;

// end grammar

Java main: <antlrtest.java>

import org.antlr.runtime.*;
public class antlrtest {
    public static void main(String[] args) throws java.lang.Exception {
        ANTLRStringStream stream =
            new ANTLRStringStream(": '$$$/context/property=value'");
        testLexer lexer = new testLexer(stream);
        testParser parser = new testParser(new CommonTokenStream(lexer));
        System.out.println(parser.zstring());
    }
}

Python main: <antrltest.py>

from testLexer import testLexer as Lexer
from testParser import testParser as Parser
from antlr3 import CommonTokenStream, ANTLRStringStream
stream = ANTLRStringStream(": '$$$/context/property=value'")
lexer = Lexer(stream)
parser = Parser(CommonTokenStream(lexer))
print parser.zstring()

From Erik.Putrycz at nrc-cnrc.gc.ca  Wed Sep 12 15:47:27 2007
From: Erik.Putrycz at nrc-cnrc.gc.ca (Putrycz, Erik)
Date: Wed, 12 Sep 2007 18:47:27 -0400
Subject: [antlr-interest] multi line identifiers
Message-ID: <E4D07AB09F5F044299333C8D0FEB45E904C732A9@nrccenexb1.nrc.ca>

I'm having great trouble trying to implement multi line identifiers in
antlr 3.
In Cobol, one of the wild cases is that an identifier can have the
following form
     CALL 'DSNHADDR' USING SQL-VPARMPTR OF SQL-PLIST7 SQL-PVAR-LIS
-    T7.
This is equivalent to CALL 'DSNHADDR' USING SQL-VPARMPTR OF SQL-PLIST7
SQL-PVAR-LIST7

My identifier rule is
fragment
NameElem
	: Letter | Digit | '-';
	 
fragment	
ContinuedName	:
	NewLine ContinuedLine Space* 
	;

fragment         
ContinuedLine
	:{getCharPositionInLine() == 0 }? '-'
	;

Name	: (Letter ~(NameElem)) => Letter
	| (NameElem+ ContinuedName NameElem) => NameElem+ ContinuedName
NameElem+ 
	| (Digit (Digit|'-')*)? Letter NameElem*
	;

This works fine for recognizing multi line identifiers but it is causing
a very strange side effect.
The last token of the last line of the input gets recognized as Name
instead of a literal. If I remove the second alternative (the multi line
case) to the Name then the last token is recognized correctly as a
literal. This defies my logic how the second alternative can affect the
third one and fail the literal recognition.

Erik 


From atif.azad at hotmail.com  Wed Sep 12 22:19:48 2007
From: atif.azad at hotmail.com (atif azad)
Date: Thu, 13 Sep 2007 10:19:48 +0500
Subject: [antlr-interest] help: scanning multiple lines of input
Message-ID: <BLU105-F240F6769B68F1868C87B9EE5C30@phx.gbl>

hello Dears

I am writing an AST grammer . My input file is

add r2;
store r2 r2;

and output i get is like this

tree: (DECL add r2) (DECL store r2 r2)
text r2
type add

But I want output like this

tree: (DECL add r2) (DECL store r2 r2)
text r2
type add
text r2 r2
type store


But in my output as i wrote I only get the parsing of the ist line in 
brackets. I think there is some probl?em with my Main fucntion.Can any body 
please tell me what wrong I am doing in my Main class. I would be greatful.
here is my Main class

import org.antlr.runtime.*;
import org.antlr.runtime.tree.*;

public class Main {
	public static void main(String[] args) throws Exception {
		CharStream input = new ANTLRFileStream(args[0]);
		langLexer lex = new langLexer(input);
		CommonTokenStream tokens = new CommonTokenStream(lex);
		langParser parser = new langParser(tokens);
		//LangParser.decl_return r = parser.decl();
		langParser.start_return r = parser.start();
		System.out.println("tree: "+((Tree)r.tree).toStringTree());
		CommonTree r0 = ((CommonTree)r.tree);

		CommonTreeNodeStream nodes = new CommonTreeNodeStream(r0);
		nodes.setTokenStream(tokens);
		langDumpDecl walker = new langDumpDecl(nodes);
		walker.decl();
	}
}


Regards
Azad , Atif

_________________________________________________________________
Don't just search. Find. Check out the new MSN Search! 
http://search.msn.click-url.com/go/onm00200636ave/direct/01/


From fyaoxy at gmail.com  Wed Sep 12 22:43:37 2007
From: fyaoxy at gmail.com (=?GB2312?B?z/LH2M/N?=)
Date: Thu, 13 Sep 2007 13:43:37 +0800
Subject: [antlr-interest] multi line identifiers
In-Reply-To: <E4D07AB09F5F044299333C8D0FEB45E904C732A9@nrccenexb1.nrc.ca>
References: <E4D07AB09F5F044299333C8D0FEB45E904C732A9@nrccenexb1.nrc.ca>
Message-ID: <91dd9a4f0709122243obbb1bc0qd0b036bc2d3a682b@mail.gmail.com>

OK, again, the myself pool english man ON:)
1, I not sure why only focus on lexer.
2, NewLine process. from your follow form NewLine should ignore, I
cannot see why of NewLine in lexer rule.
3, gunit can help you do better.


2007/9/13, Putrycz, Erik <Erik.Putrycz at nrc-cnrc.gc.ca>:
> I'm having great trouble trying to implement multi line identifiers in
> antlr 3.
> In Cobol, one of the wild cases is that an identifier can have the
> following form
>      CALL 'DSNHADDR' USING SQL-VPARMPTR OF SQL-PLIST7 SQL-PVAR-LIS
> -    T7.
> This is equivalent to CALL 'DSNHADDR' USING SQL-VPARMPTR OF SQL-PLIST7
> SQL-PVAR-LIST7
>
> My identifier rule is
> fragment
> NameElem
>         : Letter | Digit | '-';
>
> fragment
> ContinuedName   :
>         NewLine ContinuedLine Space*
>         ;
>
> fragment
> ContinuedLine
>         :{getCharPositionInLine() == 0 }? '-'
>         ;
>
> Name    : (Letter ~(NameElem)) => Letter
>         | (NameElem+ ContinuedName NameElem) => NameElem+ ContinuedName
> NameElem+
>         | (Digit (Digit|'-')*)? Letter NameElem*
>         ;
>
> This works fine for recognizing multi line identifiers but it is causing
> a very strange side effect.
> The last token of the last line of the input gets recognized as Name
> instead of a literal. If I remove the second alternative (the multi line
> case) to the Name then the last token is recognized correctly as a
> literal. This defies my logic how the second alternative can affect the
> third one and fail the literal recognition.
>
> Erik
>
>


-- 
??
???

From antlr at mirality.co.nz  Thu Sep 13 00:36:56 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 13 Sep 2007 19:36:56 +1200
Subject: [antlr-interest] help: scanning multiple lines of input
In-Reply-To: <BLU105-F240F6769B68F1868C87B9EE5C30@phx.gbl>
References: <BLU105-F240F6769B68F1868C87B9EE5C30@phx.gbl>
Message-ID: <20070913073654.2A1F811E989@www.antlr.org>

At 17:19 13/09/2007, atif azad wrote:
 >and output i get is like this
 >
 >tree: (DECL add r2) (DECL store r2 r2)
 >text r2
 >type add
 >
 >But I want output like this
 >
 >tree: (DECL add r2) (DECL store r2 r2)
 >text r2
 >type add
 >text r2 r2
 >type store
[...]
 >		langDumpDecl walker = new langDumpDecl(nodes);
 >		walker.decl();

Assuming that the "decl" rule matches one DECL-rooted tree, the 
problem would be that you're only calling it once, and hence only 
recognising one DECL tree.

Either call it in a loop or just create a new rule containing 
decl* or decl+ and call that in your Main instead (depending on 
what you want to do with it).


From pink at odahoda.de  Thu Sep 13 00:55:52 2007
From: pink at odahoda.de (Benjamin Niemann)
Date: Thu, 13 Sep 2007 09:55:52 +0200
Subject: [antlr-interest] Different result using Java and Python runtime
References: <46E8656E.9010800@drheydenreich.de>
Message-ID: <fcaqe8$c1m$1@sea.gmane.org>

Hello Tom,

Tom Klonikowski wrote:

> my name is Tom and i'm just creating my first parser using ANTLR for a
> Python-based project. Its fun so far :)
> 
> I encountered a different behaviour of the Java and Python runtime for a
> certain grammar (appended below).
> 
> Using the test input ": '$$$/context/property=value'" with the Java
> runtime i get the expected result:
> '$$$/context/property=value'.
> 
> With Python i get:
> line 1:0 mismatched input ": '$$$/context/property=value'" expecting
> STRINGDECL

I'm not yet sure what causes that bug, but it works with the latest version
(so fresh, it is not even in the repository...).

I'll take a deeper look, so you'll have a patch to fix that show stopper
(and for a potential 3.0.2 release...).

-- 
Benjamin Niemann
Email: pink at odahoda dot de
WWW: http://pink.odahoda.de/


From atif.azad at hotmail.com  Thu Sep 13 01:25:05 2007
From: atif.azad at hotmail.com (atif azad)
Date: Thu, 13 Sep 2007 13:25:05 +0500
Subject: [antlr-interest] help: scanning multiple lines of input
In-Reply-To: <BAY0-MC2-F12XSqKWqY0024125d@bay0-mc2-f12.bay0.hotmail.com>
Message-ID: <BLU105-F23A75A0FDAFB60EC9B00FFE5C30@phx.gbl>


Thankyou very much for the replies.
I am using decl+ as shown below. But in my tree grammer this is what i have 
in my grammer.May be I am not printing the nodes in the right way in the 
tree grammer.
I copy it

start : decl+ ;
decl : ^(DECL type declarator+ )
        {System.out.println("text "+$declarator.text);}
       {System.out.println("type "+$type.text);}
      |^(DECL type d1=declarator d2=declarator )
             {System.out.println("text "+$d1.text);}
   {System.out.println("text "+$d2.text);}
       {System.out.println("type "+$type.text);}
     ;

which corresponds to these rule in grammer

start : decl+ ;
decl : (type ID) ';' -> ^(DECL type ID)
       | (type ID ID)';' -> ^(DECL type ID ID)


I may be doing some thing wrong while printing the nodes in my tree garmmer.


Regards
Azad , Atif




>From: Gavin Lambert <antlr at mirality.co.nz>
>To: "atif azad" <atif.azad at hotmail.com>,antlr-interest at antlr.org
>Subject: Re: [antlr-interest] help: scanning multiple lines of input
>Date: Thu, 13 Sep 2007 19:36:56 +1200
>
>At 17:19 13/09/2007, atif azad wrote:
> >and output i get is like this
> >
> >tree: (DECL add r2) (DECL store r2 r2)
> >text r2
> >type add
> >
> >But I want output like this
> >
> >tree: (DECL add r2) (DECL store r2 r2)
> >text r2
> >type add
> >text r2 r2
> >type store
>[...]
> >		langDumpDecl walker = new langDumpDecl(nodes);
> >		walker.decl();
>
>Assuming that the "decl" rule matches one DECL-rooted tree, the problem 
>would be that you're only calling it once, and hence only recognising one 
>DECL tree.
>
>Either call it in a loop or just create a new rule containing decl* or 
>decl+ and call that in your Main instead (depending on what you want to do 
>with it).
>

_________________________________________________________________
Express yourself instantly with MSN Messenger! Download today it's FREE! 
http://messenger.msn.click-url.com/go/onm00200471ave/direct/01/


From atif.azad at hotmail.com  Thu Sep 13 01:33:01 2007
From: atif.azad at hotmail.com (atif azad)
Date: Thu, 13 Sep 2007 13:33:01 +0500
Subject: [antlr-interest] help: scanning multiple lines of input
In-Reply-To: <BLU105-F23A75A0FDAFB60EC9B00FFE5C30@phx.gbl>
Message-ID: <BLU105-F35B53DF48F85E42AE859EDE5C30@phx.gbl>


Thanks a lot . I solved it. The problem was with one other rule in my 
grammer. The type rule.

So Main claass was ok and also this rule.
Thankyou again


>From: "atif azad" <atif.azad at hotmail.com>
>To: antlr at mirality.co.nz
>CC: antlr-interest at antlr.org
>Subject: Re: [antlr-interest] help: scanning multiple lines of input
>Date: Thu, 13 Sep 2007 13:25:05 +0500
>
>
>Thankyou very much for the replies.
>I am using decl+ as shown below. But in my tree grammer this is what i have 
>in my grammer.May be I am not printing the nodes in the right way in the 
>tree grammer.
>I copy it
>
>start : decl+ ;
>decl : ^(DECL type declarator+ )
>        {System.out.println("text "+$declarator.text);}
>       {System.out.println("type "+$type.text);}
>      |^(DECL type d1=declarator d2=declarator )
>             {System.out.println("text "+$d1.text);}
>   {System.out.println("text "+$d2.text);}
>       {System.out.println("type "+$type.text);}
>     ;
>
>which corresponds to these rule in grammer
>
>start : decl+ ;
>decl : (type ID) ';' -> ^(DECL type ID)
>       | (type ID ID)';' -> ^(DECL type ID ID)
>
>
>I may be doing some thing wrong while printing the nodes in my tree 
>garmmer.
>
>
>Regards
>Azad , Atif
>
>
>
>
>>From: Gavin Lambert <antlr at mirality.co.nz>
>>To: "atif azad" <atif.azad at hotmail.com>,antlr-interest at antlr.org
>>Subject: Re: [antlr-interest] help: scanning multiple lines of input
>>Date: Thu, 13 Sep 2007 19:36:56 +1200
>>
>>At 17:19 13/09/2007, atif azad wrote:
>> >and output i get is like this
>> >
>> >tree: (DECL add r2) (DECL store r2 r2)
>> >text r2
>> >type add
>> >
>> >But I want output like this
>> >
>> >tree: (DECL add r2) (DECL store r2 r2)
>> >text r2
>> >type add
>> >text r2 r2
>> >type store
>>[...]
>> >		langDumpDecl walker = new langDumpDecl(nodes);
>> >		walker.decl();
>>
>>Assuming that the "decl" rule matches one DECL-rooted tree, the problem 
>>would be that you're only calling it once, and hence only recognising one 
>>DECL tree.
>>
>>Either call it in a loop or just create a new rule containing decl* or 
>>decl+ and call that in your Main instead (depending on what you want to do 
>>with it).
>>
>
>_________________________________________________________________
>Express yourself instantly with MSN Messenger! Download today it's FREE! 
>http://messenger.msn.click-url.com/go/onm00200471ave/direct/01/
>

_________________________________________________________________
Don't just search. Find. Check out the new MSN Search! 
http://search.msn.com/


From pink at odahoda.de  Thu Sep 13 02:19:07 2007
From: pink at odahoda.de (Benjamin Niemann)
Date: Thu, 13 Sep 2007 11:19:07 +0200
Subject: [antlr-interest] Different result using Java and Python runtime
References: <46E8656E.9010800@drheydenreich.de>
Message-ID: <fcavab$s3p$1@sea.gmane.org>

Hi again,

ok, I found the issue.
The patch is pretty simple, but you'll have to fetch the 3.0.1 source
tarball and rebuild ANTLR, because the changed file is hidden in antlr.jar.

The patch must be applied to the file
<src/org/antlr/codegen/templates/Python/Python.stg>. Afterwards the
template 'lexerRule' at line 450 should look like

[..snip..]
<else>
        _type = <ruleName>

        <ruleMemoization(name=ruleName)>
        <lexerRuleLabelDefs()>
        <ruleDescriptor.actions.init>
        <block>
        <ruleCleanUp()>
        self.type = _type
        <(ruleDescriptor.actions.after):execAction()>
<endif>
[..snip..]

But: it's probably easier for you to fix your grammar ;) What I did not
noticed is that you should declare the lexer rules QUOTE..STRING as
fragments, because they are only called by another lexer rule (STRINGDECL)
and not directly.
Like
fragment QUOTE    : '\'';
and so on.


HTH

-- 
Benjamin Niemann
Email: pink at odahoda dot de
WWW: http://pink.odahoda.de/
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Python.stg.diff
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20070913/7ad2814f/attachment.pl 

From mazzucco at iiasa.ac.at  Thu Sep 13 02:31:30 2007
From: mazzucco at iiasa.ac.at (Rupert Mazzucco)
Date: Thu, 13 Sep 2007 11:31:30 +0200
Subject: [antlr-interest] C target; C++ compatibility?
Message-ID: <20070913113130.693ebe4d.mazzucco@iiasa.ac.at>

There doesn't seem to be much interest in this problem, anyway I fixed it
for me by simply renaming the offending "or" to "orCopy" in three files.
I don't know if lexers or parsers can ever reference this symbol; mine don't.

diff -ur a/include/antlr3bitset.h b/include/antlr3bitset.h
--- a/include/antlr3bitset.h    Wed Jun 20 03:55:55 2007
+++ b/include/antlr3bitset.h    Thu Sep 13 10:56:12 2007
@@ -48,7 +48,7 @@
     ANTLR3_UINT32    length;

     struct ANTLR3_BITSET_struct  *  (*clone)       (struct ANTLR3_BITSET_struct  * inSet);
-    struct ANTLR3_BITSET_struct  *  (*or)          (struct ANTLR3_BITSET_struct  * bitset1, struct ANTLR3_BITSET_struct * bitset2);
+    struct ANTLR3_BITSET_struct  *  (*orCopy)      (struct ANTLR3_BITSET_struct  * bitset1, struct ANTLR3_BITSET_struct * bitset2);
     void                           (*orInPlace)    (struct ANTLR3_BITSET_struct  * bitset,  struct ANTLR3_BITSET_struct * bitset2);
     ANTLR3_UINT32                  (*size)         (struct ANTLR3_BITSET_struct  * bitset);
     void                           (*add)          (struct ANTLR3_BITSET_struct  * bitset, ANTLR3_INT32 bit);
diff -ur a/src/antlr3baserecognizer.c b/src/antlr3baserecognizer.c
--- a/src/antlr3baserecognizer.c        Fri Aug 10 21:23:05 2007
+++ b/src/antlr3baserecognizer.c        Thu Sep 13 10:57:55 2007
@@ -1217,7 +1217,7 @@

        /* Knowing that, we can or in the follow set
         */
-       newFollow   = follow->or(follow, viableToksFollowingRule);
+       newFollow   = follow->orCopy(follow, viableToksFollowingRule);

        /* Remove the EOR token, which we do not wish to compute with
         */
diff -ur a/src/antlr3bitset.c b/src/antlr3bitset.c
--- a/src/antlr3bitset.c        Wed Jun 20 03:55:55 2007
+++ b/src/antlr3bitset.c        Thu Sep 13 10:57:09 2007
@@ -92,7 +92,7 @@
 antlr3BitsetSetAPI(pANTLR3_BITSET bitset)
 {
     bitset->clone      =    antlr3BitsetClone;
-    bitset->or         =    antlr3BitsetOR;
+    bitset->orCopy             =    antlr3BitsetOR;
     bitset->orInPlace  =    antlr3BitsetORInPlace;
     bitset->size       =    antlr3BitsetSize;
     bitset->add                =    antlr3BitsetAdd;
-- 
Rupert Mazzucco         <mazzucco at iiasa.ac.at>
Research Scholar, Evolution and Ecology Program
IIASA - Institute for Applied Systems Analysis
Schlossplatz 1, 2361 Laxenburg, Austria
Phone: +43 2236 807 522   Fax: +43 2236 713 13

From matthew.bowman at sogotech.com  Thu Sep 13 03:41:25 2007
From: matthew.bowman at sogotech.com (Matthew Bowman)
Date: Thu, 13 Sep 2007 13:41:25 +0300
Subject: [antlr-interest] Best Approach/Suggestions?
Message-ID: <46E913D5.9020408@sogotech.com>

So here's my problem...

We're trying to construct a mini "scripting" which must support the 
following:

1. Functions (there is an exhaustive list that will be supported)

    - A()
    - B(x)
    - C(x,y)
    - D(x,y,z)

These functions will in the end result in a database query returning a 
number of (int,int) key-value pairs. The argument types can either be 
string or numerical.

2. Binary Operators

    - Numerical: + - * / ^
    - Logical: < > <= >= = != AND OR

3. Constants

    - Numerical: 0-9
    - Logical: TRUE FALSE (1 0 respectively)

Some examples would be something like

B(5) < B(10)
A > 9
D("foo",1,2) * 8
etc..

The final result of evaluating the tree will be the same type of 
(int,int) key-value pairs that are returned from a simple function.

So far we've managed to subclass CommonTree (using a simple grammar and 
the ! ^ tree operators) and construct an "evalutable" AST (using the 
TreeAdaptor) form which suffices. However, we've found scattered 
documentation regarding tree grammars and tree walkers and want to be 
sure we're heading in the right direction. Some questions we have are:

(a) What exactly is the difference between a "grammar" and a "tree grammar"?
(b) Where and how would you want to use a "tree walker"?
(c) Is it possible to use something other than CommonTree but still use 
the ANTLR tree construction operators?

Thanks in advance,
--Matthew
 

From andreas.bartho at inf.tu-dresden.de  Thu Sep 13 07:06:43 2007
From: andreas.bartho at inf.tu-dresden.de (Andreas Bartho)
Date: Thu, 13 Sep 2007 16:06:43 +0200
Subject: [antlr-interest] Best Approach/Suggestions?
In-Reply-To: <46E913D5.9020408@sogotech.com>
References: <46E913D5.9020408@sogotech.com>
Message-ID: <46E943F3.9050604@inf.tu-dresden.de>

Hi,

> (a) What exactly is the difference between a "grammar" and a "tree 
> grammar"?

With a grammar you create a parser that constructs a tree (AST) from
sequential input (tokens). A tree grammar creates a tree parser which
uses the AST as input and allows further processing. See section 4 in
http://www.antlr.org/wiki/display/ANTLR3/Parsing+XML

> (c) Is it possible to use something other than CommonTree but still use 
> the ANTLR tree construction operators?

You can use your own tree format. You have to write your own TreeAdaptor
(and give it to the parser before parsing). Use BaseTreeAdaptor and
CommonTreeAdaptor as guideline to get an idea what is going on.

Andreas


From pink at odahoda.de  Thu Sep 13 13:50:20 2007
From: pink at odahoda.de (Benjamin Niemann)
Date: Thu, 13 Sep 2007 22:50:20 +0200
Subject: [antlr-interest] Python target v3 unicode problems
References: <af8252920709100928s53ddeb3bp489df8fbbfab4844@mail.gmail.com>
Message-ID: <fcc7qc$dl1$1@sea.gmane.org>

Hi Vi?ar,

sorry for the late reply, gmane ate my post and I didn't notice until now.

Vi?ar Svansson wrote:

> I am trying to scan a UTF-8 file using the python target but with no luck.
> I usually get this error:
> 
> UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position
> 0: ordinal not in range(128)
> 
> I have tried to cast the strings to unicode everywhere but I nothing
> seems to work. I have also tried many different declarations of the
> unicode tokens but nothing seems to work there either.
> 
> I found reference to something like this:
> 
> class L extends Lexer;
> options {
> charVocabulary = '\3'..'\377' | '\u1000'..'\u1fff';
> }
> 
> But I think this is v2 syntax, correct?
> Does anyone have a working unicode lexer in python?

You must feed unicode data into the lexer. So if you are using
ANTLRFileStream, use something like
  ANTLRFileStream(path, encoding='utf-8')
No vocabulary has to be declared, it's always full unicode (erm.. almost, I
think ANTLR is limited to 16 bit, never tried what happens if you feed it a
codepoint beyond U+FFFF...).

HTH

-- 
Benjamin Niemann
Email: pink at odahoda dot de
WWW: http://pink.odahoda.de/


From vidarsvans at gmail.com  Thu Sep 13 14:55:43 2007
From: vidarsvans at gmail.com (=?ISO-8859-1?Q?Vi=F0ar_Svansson?=)
Date: Thu, 13 Sep 2007 21:55:43 +0000
Subject: [antlr-interest] Python target v3 unicode problems
In-Reply-To: <fcc7qc$dl1$1@sea.gmane.org>
References: <af8252920709100928s53ddeb3bp489df8fbbfab4844@mail.gmail.com>
	<fcc7qc$dl1$1@sea.gmane.org>
Message-ID: <af8252920709131455w63a24a4ak2bc781615120d372@mail.gmail.com>

Hi,



On 9/13/07, Benjamin Niemann <pink at odahoda.de> wrote:
> You must feed unicode data into the lexer. So if you are using
> ANTLRFileStream, use something like
>   ANTLRFileStream(path, encoding='utf-8')

I tried this, now I can successfully load the strings thanks. However,
they seem to be somehow wrong after the parse. Here is my doctest:

    >>> unicode_str = u'author : "Vi?ar Svansson" ; '
    >>> tree = transform(unicode_str,SymbolTable(), Decorator, Linker)
    >>> tree
    {u'author' : u'Vi?ar Svansson'}

Here, the transform function scans, and parses the string. Before I
used ANTLRFileStream(path, encoding='utf-8'), it would fail on the
scanning. Now the lexer works but the test fails in the end with this
output:

Failed example:
    tree
Expected:
    {u'author' : u'Vi?ar Svansson'}
Got:
    {u'author': u'Vi\xc3\xb0ar Svansson'}

I am not sure what is wrong here, never seen seen hex values inside a
unicode encoding string. Any ideas?

Vi?ar

From smerzlia at optusnet.com.au  Thu Sep 13 17:00:25 2007
From: smerzlia at optusnet.com.au (smerzlia at optusnet.com.au)
Date: Fri, 14 Sep 2007 10:00:25 +1000
Subject: [antlr-interest] Newbie question: How to tell a parse failed or
	succeeded
Message-ID: <200709140000.l8E00PAD014655@mail35.syd.optusnet.com.au>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20070914/66166c44/attachment.pl 

From Erik.Putrycz at nrc-cnrc.gc.ca  Thu Sep 13 18:18:57 2007
From: Erik.Putrycz at nrc-cnrc.gc.ca (Putrycz, Erik)
Date: Thu, 13 Sep 2007 21:18:57 -0400
Subject: [antlr-interest] Newbie question: How to tell a parse failed
	orsucceeded
In-Reply-To: <200709140000.l8E00PAD014655@mail35.syd.optusnet.com.au>
References: <200709140000.l8E00PAD014655@mail35.syd.optusnet.com.au>
Message-ID: <E4D07AB09F5F044299333C8D0FEB45E904D8D12C@nrccenexb1.nrc.ca>

Well lots of different things. I found a link on the antlr website for
gunit which is a grammar unit test. It will allow you to verify that
fragments you parse result in what you expect.
I have been writing lots of java unit tests and I have a small framework
for verifying my grammar.
In my unit tests, I test a rule with a correct input, verify that there
are no tokens left (see Terence answer to my post recently on how to do
this) and then I have some simple tests on the AST generated (e.g. count
of nodes and types of some specific nodes). 

Erik
 
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of smerzlia at optusnet.com.au
> Sent: Thursday, September 13, 2007 8:00 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Newbie question: How to tell a parse failed
> orsucceeded
> 
> Hi,
> I have built a grammar and I can get it to work using the various
> samples on the web (thanks to all!). The only problem i have is
> that the following code does not throw ANY exceptions on failed
> lexing or parsing (my grammar file is basic and identical to a lot
> of other samples) :
> 
> public static void main(String[] args)
> {
>   try
>   {
>      ANTLRStringStream fs = new ANTLRStringStream("weight[3,2] =
> Xsqrt(cos(12) + cos(12 - 34));"); //THIS IS WRONG FUNC NAME
>      dumb2Lexer lex = new dumb2Lexer(fs);
>      TokenRewriteStream tokens = new TokenRewriteStream(lex);
>      dumb2Parser g = new dumb2Parser(tokens);
> 
>      atom_return ar = g.atom();
>      statement_return sr = g.statement();   //correct start
> expression - no exceptions are ever thrown
>   }
>   catch (RecognitionException e)
>   {
>      e.printStackTrace(); // <----------- NEVER REACHED
>   }
> }
> 
> Also : I have added the following to grammar file (with no effect):
> 
> @lexer::members
> {
> @Override
> public void reportError(RecognitionException e)
> {
>    // do nothing - i could set my own success member flag here, but
would
> like see if there is any standard approach first
> }   }
> 
> There is no API on parser which registers failure or success that I
> can see ( dumb2Parser .failed member is always false). I have
> searched news groups and web to no avail.
> 
> So how can I SIMPLY (using ANTLR API, not my own code) tell whether a
> lexical scan + parse succeeded  or failed ?
> 
> 
> Serge

From pink at odahoda.de  Fri Sep 14 00:35:52 2007
From: pink at odahoda.de (Benjamin Niemann)
Date: Fri, 14 Sep 2007 09:35:52 +0200
Subject: [antlr-interest] Newbie question: How to tell a parse failed or
	succeeded
References: <200709140000.l8E00PAD014655@mail35.syd.optusnet.com.au>
Message-ID: <fcddko$9bb$1@sea.gmane.org>

Hi,

smerzlia at optusnet.com.au wrote:

> I have built a grammar and I can get it to work using the various
> samples on the web (thanks to all!). The only problem i have is
> that the following code does not throw ANY exceptions on failed
> lexing or parsing (my grammar file is basic and identical to a lot
> of other samples) :
> 
> [snip]
>
> So how can I SIMPLY (using ANTLR API, not my own code) tell whether a
> lexical scan + parse succeeded  or failed ?

You have to override some methods in your lexer/parser. See section "Error
handling" in the V2->V3 migration guide at
<http://www.antlr.org/wiki/display/ANTLR3/
Migrating+from+ANTLR+2+to+ANTLR+3> (long URL splitted!)


HTH

-- 
Benjamin Niemann
Email: pink at odahoda dot de
WWW: http://pink.odahoda.de/


From kir at lapshin.net  Fri Sep 14 00:31:24 2007
From: kir at lapshin.net (Kirill Lapshin)
Date: Fri, 14 Sep 2007 11:31:24 +0400
Subject: [antlr-interest] Python target v3 unicode problems
In-Reply-To: <af8252920709131455w63a24a4ak2bc781615120d372@mail.gmail.com>
References: <af8252920709100928s53ddeb3bp489df8fbbfab4844@mail.gmail.com>	<fcc7qc$dl1$1@sea.gmane.org>
	<af8252920709131455w63a24a4ak2bc781615120d372@mail.gmail.com>
Message-ID: <fcddcd$92g$1@sea.gmane.org>

Vi?ar Svansson wrote:
> I tried this, now I can successfully load the strings thanks. However,
> they seem to be somehow wrong after the parse. Here is my doctest:
> 
>     >>> unicode_str = u'author : "Vi?ar Svansson" ; '
>     >>> tree = transform(unicode_str,SymbolTable(), Decorator, Linker)
>     >>> tree
>     {u'author' : u'Vi?ar Svansson'}
> 
> Here, the transform function scans, and parses the string. Before I
> used ANTLRFileStream(path, encoding='utf-8'), it would fail on the
> scanning. Now the lexer works but the test fails in the end with this
> output:
> 
> Failed example:
>     tree
> Expected:
>     {u'author' : u'Vi?ar Svansson'}
> Got:
>     {u'author': u'Vi\xc3\xb0ar Svansson'}
> 
> I am not sure what is wrong here, never seen seen hex values inside a
> unicode encoding string. Any ideas?

Just a wild guess. There are many ways to encode the same string using 
Unicode, so two unicode strings representing the same sequence of 
characters could potentially have different sequence of bytes.

You can try to normalize strings before comparing, for example using 
Python's unicodedata.normalize function.


From antlr at mirality.co.nz  Fri Sep 14 03:29:19 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 14 Sep 2007 22:29:19 +1200
Subject: [antlr-interest] Python target v3 unicode problems
In-Reply-To: <af8252920709131455w63a24a4ak2bc781615120d372@mail.gmail.co
 m>
References: <af8252920709100928s53ddeb3bp489df8fbbfab4844@mail.gmail.com>
	<fcc7qc$dl1$1@sea.gmane.org>
	<af8252920709131455w63a24a4ak2bc781615120d372@mail.gmail.com>
Message-ID: <20070914102916.094DD11EA84@www.antlr.org>

At 09:55 14/09/2007, Vi?ar Svansson wrote:
 >Here, the transform function scans, and parses 
the string. Before
 >I used ANTLRFileStream(path, encoding='utf-8'), 
it would fail on
 >the scanning. Now the lexer works but the test fails in the end
 >with this output:
 >
 >Failed example:
 >    tree
 >Expected:
 >    {u'author' : u'Vi?ar Svansson'}
 >Got:
 >    {u'author': u'Vi\xc3\xb0ar Svansson'}
 >
 >I am not sure what is wrong here, never seen 
seen hex values inside
 >a unicode encoding string. Any ideas?

Well, I haven't actually looked it up to see if 
it matches, but C3 B0 seems like a double-byte 
UTF-8 sequence to me, and thus exactly what it 
should be doing, since you told it to deal with UTF-8.


From pink at odahoda.de  Fri Sep 14 06:32:56 2007
From: pink at odahoda.de (Benjamin Niemann)
Date: Fri, 14 Sep 2007 15:32:56 +0200
Subject: [antlr-interest] Python target v3 unicode problems
References: <af8252920709100928s53ddeb3bp489df8fbbfab4844@mail.gmail.com>
	<fcc7qc$dl1$1@sea.gmane.org>
	<af8252920709131455w63a24a4ak2bc781615120d372@mail.gmail.com>
	<20070914102916.094DD11EA84@www.antlr.org>
Message-ID: <fce2i8$djg$1@sea.gmane.org>

Gavin Lambert wrote:

> At 09:55 14/09/2007, Vi?ar Svansson wrote:
>  >Here, the transform function scans, and parses
> the string. Before
>  >I used ANTLRFileStream(path, encoding='utf-8'),
> it would fail on
>  >the scanning. Now the lexer works but the test fails in the end
>  >with this output:
>  >
>  >Failed example:
>  >    tree
>  >Expected:
>  >    {u'author' : u'Vi?ar Svansson'}
>  >Got:
>  >    {u'author': u'Vi\xc3\xb0ar Svansson'}
>  >
>  >I am not sure what is wrong here, never seen
> seen hex values inside
>  >a unicode encoding string. Any ideas?
> 
> Well, I haven't actually looked it up to see if
> it matches, but C3 B0 seems like a double-byte
> UTF-8 sequence to me,

That's correct.

> and thus exactly what it 
> should be doing, since you told it to deal with UTF-8.

That's not correct. The input stream decodes utf-8 from the input file to
unicode. Past that point the generated lexer/parser code and the runtime
module do not do any encoding/decoding. Strings comming from ANTLR
(Token.text et al) should always be unicode instances.

-- 
Benjamin Niemann
Email: pink at odahoda dot de
WWW: http://pink.odahoda.de/


From ganelin at mail.com  Fri Sep 14 07:11:42 2007
From: ganelin at mail.com (Pavel Ganelin)
Date: Fri, 14 Sep 2007 09:11:42 -0500
Subject: [antlr-interest] Can ANTLR parse this language?
Message-ID: <20070914141142.D0CE11F50B3@ws1-2.us4.outblaze.com>


Greetings,

Is the language presented below can be parsed with ANTLR? It is certainly not ambiguous and LL(1) is enough.


I have tokens of four different types:

S
A
B
D 

The informal rules are:

	Program consists of separate sentences.  
	Token D always terminates the current sentence (like a '.') but it is optional. 
	If the sentence already has A or B tokens the another A or B token starts another sentence. 

That's all.

As a result the sentence can have no more than one A or B token, so it may have none. 

The problem is to split token stream into sentences.

Below I illustrate it with some examples. I put a vertical bar where the stream should be split into the sentences.


S S    =>  S S |

S D S D D    =>  S D | S D | D

A S S D S =>  A S S D | S

A S S D S B S => A S S D | S B S

S A S S B S A S => S A S S | B S | A S



For now I solved the problem by adding a token filter between lexer and parser and inserting 
additional tokens (the same as shown with the vertical bar in the example). 
After the additional token V, which stands for vertical bar, the grammar is below. 

program
:
  sentence*
;

sentence
:
   S* ( A S* | B S* |) D? V
;


But I am curious whether the language can be described (see note below) with a context free grammar without 
introducing extra token and token filters.  

It requires some memory: A/B start a new sentence only if there are no A/B before in the 
same sentence.  Whether it is actually a context I do now know.

PS. May be describe is not a proper term here. Any combination of tokens is acceptable 
in the language, so there are no illegal programs. Consequently pumping lemma can not be used to 
prove that it is not context free. It is just the way I want to interpret the language.


Sincerely,
Pavel.


-- 
We've Got Your Name @ www.mail.com!!!
Get a FREE E-mail Account Today - Choose From 100+ Domains


From arto.viitanen at pp4.inet.fi  Fri Sep 14 07:24:57 2007
From: arto.viitanen at pp4.inet.fi (Arto Viitanen)
Date: Fri, 14 Sep 2007 17:24:57 +0300
Subject: [antlr-interest] Adding antlr to Visual Studio C#
Message-ID: <46EA99B9.8010105@pp4.inet.fi>

How can I add Antlr (I use the binary tool from
http://www.antlr.org/download/Antlr.Tool.zip) to Visual Studio C#?
I have defined it as external tool:

Title: [Antlr]
Command: C:\antlr\Antlr\Antlr3.Tool.exe
Arguments: ${ItemPath}
Initial directory: ${ItemDir}

+ Use output Window

This works fine, but I have to select [Antlr] from tool menu each time I
like to run antlr to a .g file. Since I have
one file for parser/lexer and another for tree walker (most likely I
will get yet another to generate code), I'd like
to make the Visual Studio realize that when an .g file is changed, it
should run the [Antlr] tool for the file.

I have found some examples on adding antlr to Visual Studio, but they
add antlr tool to the "run before build" .
Catch is, I'd like to run antlr only when the file is changed.

--
Arto Viitanen

From randall_barnhart at hotmail.com  Fri Sep 14 12:36:32 2007
From: randall_barnhart at hotmail.com (Randall Barnhart)
Date: Fri, 14 Sep 2007 13:36:32 -0600
Subject: [antlr-interest] MismatchedTokenException encountered when moving
	from literal to lexical token
Message-ID: <BAY117-F22632F44B08316F43335F1F8BC0@phx.gbl>

Hey ANTLR Folks,

I am trying to generate a grammar for a Prolog like language, and I am 
running into a problem when I try to provide more than 1 token alternative 
for a comma separated list.  I've provided the full grammar below for 
reference, but here is the rule that has the problem:

When I changed -
body
	: subStatement (','^ subStatement)*
	;

to the following -
body
	: subStatement (CONJ^ subStatement)*
	;

where -
CONJ : 'AND' | 'and' | ',' ;

I now get a MismatchedTokenException when I use a ',' whereas before it was 
recognizing it just fine.  Specifically:

recoverFromMismatchedToken
BR.recoverFromMismatchedToken
line 2:24 mismatched input ',' expecting ENDSTMT

Using the following input to match on the "clause" rule:
pred1(cp1, np1, dp1) :-
	cp1 := "predicateCode1",
	np1 := 2 * 3 / 10,
	dp1 := 12/31/2007 12:00 AM
	;

Also, I don't get the error if I use 'AND' or 'and'.  Ultimately I think it 
is a conflict with some of the other rules that use ',' to signifiy a list 
of expressions, because when I change those to different symbols then I 
don't get this error.

I think I should maybe use a syntactic or semantic predicate, but I'm not 
real sure on how to go about doing this.  Does anyone have any specific 
solutions, ideas, or advice that might lead me in the right direction?

Thanks,
Randall Barnhart



grammar Test;

options {
	output=AST;
}

tokens {
	RULE;
	HEAD;
	BODY;
	STMTCONJ;
	STMTDISJ;
	FACT;
	VARLIST;
	LITLIST;
	NEGATE;
	EXPR;
	VARDECL;
	VARASSIGN;
	PREDCALL;
	EXPRLIST;
}

clause
	: rule
	| fact
	;

rule
	: head ':-' body ENDSTMT
	  -> ^(RULE head ^(BODY body))
	;

head
	: predicateName '(' varList ')'
	  -> ^(HEAD predicateName varList)
	;

body
	: subStatement (CONJ^ subStatement)*
	;

fact
	: predicateName '(' literalList ')' ENDSTMT
	  -> ^(FACT predicateName literalList)
	;

predicateName
	: ID
	;

varDecl
	: type ID
	  -> ^(VARDECL type ID)
	;

varAssign
	: ID ':=' expr
	  -> ^(VARASSIGN ID expr)
	;

varList
	: ID (',' ID)* -> ^(VARLIST ID+)
	;

type
	: 'Code'
	| 'Numeric'
	| 'Date'
	;

predicateInvocation
	: predicateName '(' exprList ')'
	  -> ^(PREDCALL predicateName exprList)
	;

subStatement
	: expr -> ^(EXPR expr)
	| varDecl
	| varAssign
	| predicateInvocation
	;

exprList
	: expr (',' expr)*
	  -> ^(EXPRLIST expr+)
	;

expr
	: boolAndExpr (OR^ boolAndExpr)*
	;

boolAndExpr
	: equalityExpr (AND^ equalityExpr)*
	;

equalityExpr
	: relationalExpr ((EQUALS|NOTEQUALS)^ relationalExpr)*
	;

relationalExpr
	: addExpr ((LT|LTEQ|GT|GTEQ)^ addExpr)*
	;

addExpr
	: multExpr ((PLUS|MINUS)^ multExpr)*
	;

multExpr
	: powExpr ((MULT|DIV|MOD)^ powExpr)*
	;

powExpr
	: unaryExpr (POW^ unaryExpr)*
	;

unaryExpr
	: primaryExpr
	| NOT^ primaryExpr
	| MINUS primaryExpr -> ^(NEGATE primaryExpr)
	;

primaryExpr
	: '('! expr ')'!
	| literal
	;

literalList
	: literal (',' literal)*
	  -> ^(LITLIST literal+)
	;

literal
	: BOOLEAN
	| CODE
	| NUMERIC
	| DATE
	| ID
	;

OR	: '||';
AND	: '&&';
EQUALS	: '==' ;
NOTEQUALS
	: '!=' ;
LT	: '<' ;
LTEQ	: '<=' ;
GT	: '>' ;
GTEQ	: '>=' ;
PLUS	: '+' ;
MINUS	: '-' ;
MULT	: '*' ;
DIV	: '/' ;
MOD	: '%' ;
POW	: '^' ;
NOT	: '!' | 'NOT' | 'not';

BOOLEAN : 'true' | 'false' ;
CODE	: '\"' ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')* '\"' ;
NUMERIC	: ('0'..'9')+ ('.' ('0'..'9')+)? ;
DATE	: MO1 MO2 '/' D1 D2 '/' YEAR ' ' H1 H2 ':' MI1 MI2 ' ' ('AM'|'PM') ;

fragment
MO1	: ('0'..'1') ;
fragment
MO2	: ('0'..'9') ;
fragment
D1	: ('0'..'3') ;
fragment
D2	: ('0'..'9') ;
fragment
YEAR	: ('0'..'9') ('0'..'9') ('0'..'9') ('0'..'9') ;
fragment
H1	: ('0'..'1') ;
fragment
H2	: ('0'..'9') ;
fragment
MI1	: ('0'..'5') ;
fragment
MI2	: ('0'..'9') ;

ENDSTMT	: ';' ;
CONJ	: 'AND' | 'and' | ',';
DISJ	: 'OR' | 'or';


ID	: ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')* ;

WS	: (' '|'\r'|'\t'|'\u000C'|'\n') {$channel=HIDDEN;} ;

_________________________________________________________________
Kick back and relax with hot games and cool activities at the Messenger 
Caf?. http://www.cafemessenger.com?ocid=TXT_TAGHM_SeptHMtagline1


From lgcraymer at yahoo.com  Fri Sep 14 12:43:19 2007
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Fri, 14 Sep 2007 12:43:19 -0700 (PDT)
Subject: [antlr-interest] MismatchedTokenException encountered when
	moving from literal to lexical token
In-Reply-To: <BAY117-F22632F44B08316F43335F1F8BC0@phx.gbl>
Message-ID: <152038.99488.qm@web55909.mail.re3.yahoo.com>

You are right about the source of conflicts.  Change
CONJ to
CONJ : 'AND' | 'and' ;
and body to

body
    :
    substatement
    ( ( CONJ^ | ','^) substatement )*
    ;

and you should be okay.

--Loring

--- Randall Barnhart <randall_barnhart at hotmail.com>
wrote:

> Hey ANTLR Folks,
> 
> I am trying to generate a grammar for a Prolog like
> language, and I am 
> running into a problem when I try to provide more
> than 1 token alternative 
> for a comma separated list.  I've provided the full
> grammar below for 
> reference, but here is the rule that has the
> problem:
> 
> When I changed -
> body
> 	: subStatement (','^ subStatement)*
> 	;
> 
> to the following -
> body
> 	: subStatement (CONJ^ subStatement)*
> 	;
> 
> where -
> CONJ : 'AND' | 'and' | ',' ;
> 
> I now get a MismatchedTokenException when I use a
> ',' whereas before it was 
> recognizing it just fine.  Specifically:
> 
> recoverFromMismatchedToken
> BR.recoverFromMismatchedToken
> line 2:24 mismatched input ',' expecting ENDSTMT
> 
> Using the following input to match on the "clause"
> rule:
> pred1(cp1, np1, dp1) :-
> 	cp1 := "predicateCode1",
> 	np1 := 2 * 3 / 10,
> 	dp1 := 12/31/2007 12:00 AM
> 	;
> 
> Also, I don't get the error if I use 'AND' or 'and'.
>  Ultimately I think it 
> is a conflict with some of the other rules that use
> ',' to signifiy a list 
> of expressions, because when I change those to
> different symbols then I 
> don't get this error.
> 
> I think I should maybe use a syntactic or semantic
> predicate, but I'm not 
> real sure on how to go about doing this.  Does
> anyone have any specific 
> solutions, ideas, or advice that might lead me in
> the right direction?
> 
> Thanks,
> Randall Barnhart
> 
> 
> 
> grammar Test;
> 
> options {
> 	output=AST;
> }
> 
> tokens {
> 	RULE;
> 	HEAD;
> 	BODY;
> 	STMTCONJ;
> 	STMTDISJ;
> 	FACT;
> 	VARLIST;
> 	LITLIST;
> 	NEGATE;
> 	EXPR;
> 	VARDECL;
> 	VARASSIGN;
> 	PREDCALL;
> 	EXPRLIST;
> }
> 
> clause
> 	: rule
> 	| fact
> 	;
> 
> rule
> 	: head ':-' body ENDSTMT
> 	  -> ^(RULE head ^(BODY body))
> 	;
> 
> head
> 	: predicateName '(' varList ')'
> 	  -> ^(HEAD predicateName varList)
> 	;
> 
> body
> 	: subStatement (CONJ^ subStatement)*
> 	;
> 
> fact
> 	: predicateName '(' literalList ')' ENDSTMT
> 	  -> ^(FACT predicateName literalList)
> 	;
> 
> predicateName
> 	: ID
> 	;
> 
> varDecl
> 	: type ID
> 	  -> ^(VARDECL type ID)
> 	;
> 
> varAssign
> 	: ID ':=' expr
> 	  -> ^(VARASSIGN ID expr)
> 	;
> 
> varList
> 	: ID (',' ID)* -> ^(VARLIST ID+)
> 	;
> 
> type
> 	: 'Code'
> 	| 'Numeric'
> 	| 'Date'
> 	;
> 
> predicateInvocation
> 	: predicateName '(' exprList ')'
> 	  -> ^(PREDCALL predicateName exprList)
> 	;
> 
> subStatement
> 	: expr -> ^(EXPR expr)
> 	| varDecl
> 	| varAssign
> 	| predicateInvocation
> 	;
> 
> exprList
> 	: expr (',' expr)*
> 	  -> ^(EXPRLIST expr+)
> 	;
> 
> expr
> 	: boolAndExpr (OR^ boolAndExpr)*
> 	;
> 
> boolAndExpr
> 	: equalityExpr (AND^ equalityExpr)*
> 	;
> 
> equalityExpr
> 	: relationalExpr ((EQUALS|NOTEQUALS)^
> relationalExpr)*
> 	;
> 
> relationalExpr
> 	: addExpr ((LT|LTEQ|GT|GTEQ)^ addExpr)*
> 	;
> 
> addExpr
> 	: multExpr ((PLUS|MINUS)^ multExpr)*
> 	;
> 
> multExpr
> 	: powExpr ((MULT|DIV|MOD)^ powExpr)*
> 	;
> 
> powExpr
> 	: unaryExpr (POW^ unaryExpr)*
> 	;
> 
> unaryExpr
> 	: primaryExpr
> 	| NOT^ primaryExpr
> 	| MINUS primaryExpr -> ^(NEGATE primaryExpr)
> 	;
> 
> primaryExpr
> 	: '('! expr ')'!
> 	| literal
> 	;
> 
> literalList
> 	: literal (',' literal)*
> 	  -> ^(LITLIST literal+)
> 	;
> 
> literal
> 	: BOOLEAN
> 	| CODE
> 	| NUMERIC
> 	| DATE
> 	| ID
> 	;
> 
> 
=== message truncated ===



       
____________________________________________________________________________________
Building a website is a piece of cake. Yahoo! Small Business gives you all the tools to get online.
http://smallbusiness.yahoo.com/webhosting 

From sohail at taggedtype.net  Fri Sep 14 13:07:07 2007
From: sohail at taggedtype.net (Sohail Somani)
Date: Fri, 14 Sep 2007 15:07:07 -0500 (CDT)
Subject: [antlr-interest] Non-local optimizations with treewalker?
Message-ID: <1189800427.v2.fusewebmail-240634@f>

Hi,

Is it feasible/intelligent to do non-local optimizations with an antlr
(2.7.6) treewalker? I specify 2.7.6 because the readme for antlr3 says
that it might crash on syntax errors!

For example, assuming immutable variables and no side-effects:

v = f(x)
...
w = f(x)

I'd like to transform into:

temp = f(x)
v = temp
...
w = temp

I think it isn't the smartest thing to use treewalkers for this but I'd
like to be wrong, preferably with a verbose beat down as to why.

Thanks,

Sohail

From Carleton at Coffrin.com  Fri Sep 14 13:47:41 2007
From: Carleton at Coffrin.com (Carleton Coffrin)
Date: Fri, 14 Sep 2007 16:47:41 -0400
Subject: [antlr-interest]  ANTLR 3 Tab Size
Message-ID: <190cfd940709141347u799661cag69e31401de76c273@mail.gmail.com>

It seems the ''setTabSize'' method has been removed from the lexer API in
ANTLR 3.  Does any one know how tabs are handled in ATNLR 3?

-Carleton
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070914/0eeb6cb1/attachment.html 

From parrt at cs.usfca.edu  Fri Sep 14 13:53:51 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 14 Sep 2007 13:53:51 -0700
Subject: [antlr-interest] ANTLR 3 Tab Size
In-Reply-To: <190cfd940709141347u799661cag69e31401de76c273@mail.gmail.com>
References: <190cfd940709141347u799661cag69e31401de76c273@mail.gmail.com>
Message-ID: <04DE577A-1BA3-4D73-A097-957D5DFD73FC@cs.usfca.edu>


On Sep 14, 2007, at 1:47 PM, Carleton Coffrin wrote:

> It seems the ''setTabSize'' method has been removed from the lexer  
> API in ANTLR 3.  Does any one know how tabs are handled in ATNLR 3?

Howdy.  Instead of column, v3 using notion of raw  
charPositionInLine.  ANTLR should not be interpreting/expanding tabs  
I decided.

Ter


From antlr at mirality.co.nz  Fri Sep 14 14:09:26 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 15 Sep 2007 09:09:26 +1200
Subject: [antlr-interest] Adding antlr to Visual Studio C#
In-Reply-To: <46EA99B9.8010105@pp4.inet.fi>
References: <46EA99B9.8010105@pp4.inet.fi>
Message-ID: <20070914210923.4D48211EB0E@www.antlr.org>

At 02:24 15/09/2007, Arto Viitanen wrote:
 >How can I add Antlr (I use the binary tool from
 >http://www.antlr.org/download/Antlr.Tool.zip) to Visual Studio 
C#?
 >I have defined it as external tool:
 >
 >Title: [Antlr]
 >Command: C:\antlr\Antlr\Antlr3.Tool.exe
 >Arguments: ${ItemPath}
 >Initial directory: ${ItemDir}
 >
 >+ Use output Window
 >
 >This works fine, but I have to select [Antlr] from tool menu 
each
 >time I like to run antlr to a .g file. Since I have
 >one file for parser/lexer and another for tree walker (most 
likely
 >I will get yet another to generate code), I'd like
 >to make the Visual Studio realize that when an .g file is 
changed,
 >it should run the [Antlr] tool for the file.

There should be a .rules file in lib\C\vs2005\rulefiles.  If you 
import that into your VS2005 project then it should be able to 
compile ANTLR files automatically -- though it expects certain 
file extensions (since it needs to know which output files will be 
generated) -- .g3 for a combined grammar and .g3t for a tree 
grammar, for example.

It is geared for C rather than C#, though, so it won't work 
directly.  You'd have to edit it first to remove the references to 
.h files and change the .c to .cs.


From Carleton at Coffrin.com  Fri Sep 14 14:12:08 2007
From: Carleton at Coffrin.com (Carleton Coffrin)
Date: Fri, 14 Sep 2007 17:12:08 -0400
Subject: [antlr-interest] ANTLR 3 Tab Size
In-Reply-To: <04DE577A-1BA3-4D73-A097-957D5DFD73FC@cs.usfca.edu>
References: <190cfd940709141347u799661cag69e31401de76c273@mail.gmail.com>
	<04DE577A-1BA3-4D73-A097-957D5DFD73FC@cs.usfca.edu>
Message-ID: <190cfd940709141412s3cd3bfbaka0c15fd57e4e76ff@mail.gmail.com>

Thank you for the quick response Terence.  This is convenient for me because
I always had to "setTabSize(1)" to get the same effect in v2.

-Carleton

On 9/14/07, Terence Parr <parrt at cs.usfca.edu> wrote:
>
>
> On Sep 14, 2007, at 1:47 PM, Carleton Coffrin wrote:
>
> > It seems the ''setTabSize'' method has been removed from the lexer
> > API in ANTLR 3.  Does any one know how tabs are handled in ATNLR 3?
>
> Howdy.  Instead of column, v3 using notion of raw
> charPositionInLine.  ANTLR should not be interpreting/expanding tabs
> I decided.
>
> Ter
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070914/b80a7912/attachment.html 

From antlr at mirality.co.nz  Fri Sep 14 14:15:23 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 15 Sep 2007 09:15:23 +1200
Subject: [antlr-interest] ANTLR 3 Tab Size
In-Reply-To: <04DE577A-1BA3-4D73-A097-957D5DFD73FC@cs.usfca.edu>
References: <190cfd940709141347u799661cag69e31401de76c273@mail.gmail.com>
	<04DE577A-1BA3-4D73-A097-957D5DFD73FC@cs.usfca.edu>
Message-ID: <20070914211519.96CCD11EB23@www.antlr.org>

At 08:53 15/09/2007, Terence Parr wrote:
 >Howdy.  Instead of column, v3 using notion of raw
 >charPositionInLine.  ANTLR should not be interpreting/expanding
 >tabs I decided.

But then won't everyone need to write their own tab-tracking code 
in order to display the column at which an error occurred?

If people don't want tabs "expanded" in the internal column count, 
then it's simple to set the tab size to 1 character.  Having ANTLR 
keep track of the column (including expanding tabs) is probably 
the most useful thing to do.  (You could even track both of them 
if you want, at the cost of one extra integer field per token.)

Of course, having said that, since tab size is frequently an 
editor setting, IDEs are about the only things that can reliably 
specify a tab size.  (If your command-line compiler specifies a 
tab size of 4 characters and the user's editor specifies one of 
three characters, then you're going to give them the wrong column 
anyway.)


From barbolani at ya.com  Sat Sep 15 02:11:19 2007
From: barbolani at ya.com (Alfonso)
Date: Sat, 15 Sep 2007 11:11:19 +0200
Subject: [antlr-interest] Simple grammar with error
Message-ID: <46EBA1B7.1090003@ya.com>

I'm using ANTLRWorks to learn the basics of ANTLR. Can someone explain 
me why this grammar


grammar Failed;

expression
    : term ( (PLUS|MINUS) expression)?
    EOF
    ;
 
term    :
      atom ( (DIVIDE | ASTERISK) term)?
    ;

atom    :
      NUMBER
    | OPEN_PAREN expression CLOSE_PAREN
    ;

NUMBER    : '0'..'9' ('0'..'9')*;
   
PLUS     : '+';
MINUS    : '-';
DIVIDE  : '/';
ASTERISK : '*';

OPEN_PAREN : '(' ;
CLOSE_PAREN: ')' ;

Generates a "NoViableAltException" after the "5" when facing the 
expression 2*(3+5)+1 in the interpreter?

Surely this is a basic question, but for god's sake I'm not able to 
understand it.

Thanks in advance

From arto.viitanen at pp4.inet.fi  Sat Sep 15 10:49:06 2007
From: arto.viitanen at pp4.inet.fi (Arto Viitanen)
Date: Sat, 15 Sep 2007 20:49:06 +0300
Subject: [antlr-interest] Adding antlr to Visual Studio C#
In-Reply-To: <46BFDC21006F341D@pne-smtpin4-sn2.hy.skanova.net> (added by
	postmaster@pne.skanova.net)
References: <46EA99B9.8010105@pp4.inet.fi>
	<46BFDC21006F341D@pne-smtpin4-sn2.hy.skanova.net> (added by
	postmaster@pne.skanova.net)
Message-ID: <46EC1B12.7090202@pp4.inet.fi>

Gavin Lambert wrote:
>
> It is geared for C rather than C#, though, so it won't work directly. 
> You'd have to edit it first to remove the references to .h files and
> change the .c to .cs.
>
>

I guess I managed to edit the file. But, where should I put it?  I have
not used Visual Studio much, so the files it use are not familiar to me.
There is file force.csproj (the language I am building compiler for is
called Force; my own invention) and some webpages tell that I should add
<Import Project="..\antlr3.rules"/> to it. I tried, but Visual Studio C#
(2008 Express Beta 2) told that it did not understand
visualstudiotoolrules (sp?) . Some others told that I shoud add the
rules file by rightclicking the project and selecting some option. Where
should I rightclick the project?

--
Arto Viitanen


From lgcraymer at yahoo.com  Sat Sep 15 11:22:03 2007
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Sat, 15 Sep 2007 11:22:03 -0700 (PDT)
Subject: [antlr-interest] Non-local optimizations with treewalker?
In-Reply-To: <1189800427.v2.fusewebmail-240634@f>
Message-ID: <700573.14939.qm@web55905.mail.re3.yahoo.com>

The answer, of course, is "yes and no".  Yes, because
capturing the semantics on which you base your
optimizations on in a tree makes it easier to carry
out a series of transformations.  No, because you need
to impose a control flow graph on top of the tree
(easy to do) and add other data structures to capture
relationships between distant nodes in the tree during
analysis.  Transformation passes over trees are
interspersed with analysis passes; analysis passes
invariably require additional data structures,
including symbol tables, to capture the results of the
analysis for the next transformation or code
generation pass.

So:  trees are central to syntactic/semantic
transformation, but they are not the only tool needed
for analysis.

--Loring

--- Sohail Somani <sohail at taggedtype.net> wrote:

> Hi,
> 
> Is it feasible/intelligent to do non-local
> optimizations with an antlr
> (2.7.6) treewalker? I specify 2.7.6 because the
> readme for antlr3 says
> that it might crash on syntax errors!
> 
> For example, assuming immutable variables and no
> side-effects:
> 
> v = f(x)
> ...
> w = f(x)
> 
> I'd like to transform into:
> 
> temp = f(x)
> v = temp
> ...
> w = temp
> 
> I think it isn't the smartest thing to use
> treewalkers for this but I'd
> like to be wrong, preferably with a verbose beat
> down as to why.
> 
> Thanks,
> 
> Sohail
> 



       
____________________________________________________________________________________
Looking for a deal? Find great prices on flights and hotels with Yahoo! FareChase.
http://farechase.yahoo.com/

From nightwolf at email.it  Sat Sep 15 12:28:00 2007
From: nightwolf at email.it (Mauro Pellicioli)
Date: Sat, 15 Sep 2007 21:28:00 +0200
Subject: [antlr-interest] Lexer grammar question
Message-ID: <721849570d2d324cc5fe6428d1bc18e9@87.15.76.172>

I have this lexer grammar with option filter=true set:


LINK:	'<a href="' STRING_LINK '">' STRING_LOCATION
{System.out.print($STRING_LOCATION.text);} '</a><br>';

fragment
STRING_LINK:	(~'"')+;

fragment
STRING_LOCATION:	(STRING  | '<b>'STRING_LOCATION'</b>'  | 
'<i>'STRING_LOCATION'</i>')+;	

fragment
STRING:		(~('<'|'>'))+;



I don't understand why it matches not only tokens like:

'<a href="/test.html">Test</a><br>'

but also:

'<a href="/test.html">Test</a>.<br>'

(Note the "." added between  </a> and <br>)

Is there any method to force ANTLR matching EXACTLY tokens described by
LINK?It seems that the print (and action in general) is executed before
reaching token '</a><br>' or '</a>.<br>'

Thanks for help. 
 --
 Email.it, the professional e-mail, gratis per te: http://www.email.it/f
 
 Sponsor:
 Dai la ricarica al tuo conto!
Fino a ? 5.000 con nuove rate pi? basse per tutto il periodo del
finanziamento

 Clicca qui: http://adv.email.it/cgi-bin/foclick.cgi?mid=7023&d=20070915



From antlr at jazillian.com  Sat Sep 15 12:56:34 2007
From: antlr at jazillian.com (Andy Tripp)
Date: Sat, 15 Sep 2007 15:56:34 -0400
Subject: [antlr-interest] Non-local optimizations with treewalker?
In-Reply-To: <1189800427.v2.fusewebmail-240634@f>
References: <1189800427.v2.fusewebmail-240634@f>
Message-ID: <46EC38F2.2020102@jazillian.com>

I think that unless your language is pretty trivial, the treewalker 
approach will
be a mess for most non-trivial translation tasks. And I'd consider even 
something
as simple as this to be non-trivial. Here, you show a simple example, 
but presumably
combine multiple calls to f(x), and have to do some sort of validation that
the calls are equivalent. For example, these should match:

int x = 1;
v = f(x); 
...
w = v(1);

...but these shouldn't:
v = f(x) + 1;
...
w = f(x);

...and, control flow analysis needs to be done to check the "...".
Suppose the "..." contains  a call to some function that passes "x" as 
an argument.
Can "x" be changed by the called function? It all depends on the 
language and the type of x
(e.g. in Java, Objects are passed by reference, but primitives by value).

So a treewalker is good if you're just saying "at this type of node in 
the AST, do the following...",
but here, you'd want to say "within the following block, search for 
matching function calls that
are assigned to different variables, make sure that the first variable 
is never changed before the
2nd call, and make the following change..."

See http://www.antlr.org/article/1170602723163/treewalkers.html
for a more complete rant.

Andy

Sohail Somani wrote:
> Hi,
>
> Is it feasible/intelligent to do non-local optimizations with an antlr
> (2.7.6) treewalker? I specify 2.7.6 because the readme for antlr3 says
> that it might crash on syntax errors!
>
> For example, assuming immutable variables and no side-effects:
>
> v = f(x)
> ...
> w = f(x)
>
> I'd like to transform into:
>
> temp = f(x)
> v = temp
> ...
> w = temp
>
> I think it isn't the smartest thing to use treewalkers for this but I'd
> like to be wrong, preferably with a verbose beat down as to why
>   
> Thanks,
>
> Sohail
>
>   


From antlr at jazillian.com  Sat Sep 15 13:11:26 2007
From: antlr at jazillian.com (Andy Tripp)
Date: Sat, 15 Sep 2007 16:11:26 -0400
Subject: [antlr-interest] Non-local optimizations with treewalker?
In-Reply-To: <700573.14939.qm@web55905.mail.re3.yahoo.com>
References: <700573.14939.qm@web55905.mail.re3.yahoo.com>
Message-ID: <46EC3C6E.60904@jazillian.com>

Loring Craymer wrote:
> The answer, of course, is "yes and no".  Yes, because
> capturing the semantics on which you base your
> optimizations on in a tree makes it easier to carry
> out a series of transformations.  
That sounds to me like you mean "Yes, you'll need a tree to capture 
semantics, but
that's just a starting point". i.e. a tree to gather semantics is 
necessary but not
sufficient to do any sort of transformation.
> No, because you need
> to impose a control flow graph on top of the tree
> (easy to do) 
building a control flow graph is "easy to do"? Wow! And he didn't
even mention what language he's dealing with. Good luck on easily
building a (correct and complete) control flow graph on any language with
gotos. And for extra credit, build one for COBOL in which the
control flow itself can be determined at runtime.

> and add other data structures to capture
> relationships between distant nodes in the tree during
> analysis.  Transformation passes over trees are
> interspersed with analysis passes; analysis passes
> invariably require additional data structures,
> including symbol tables, to capture the results of the
> analysis for the next transformation or code
> generation pass.
>
> So:  trees are central to syntactic/semantic
> transformation, but they are not the only tool needed
> for analysis.
>   
There are different types of "transformation" - one is "compilation", 
but another
is "translation". I'd agree that trees (and a treewalking approach)
are "central" for compilation, because the problem is not too much more than
"at this type of node in the tree, emit this code". But what Sohail 
describes
sounds to me more like translation. Here, the problem isn't at all framed as
"at this type of node...do something". Instead, it's more like "examine the
tree, looking for the following, and change the tree in the following way."

If he uses a treewalker to do what he wants, it will look like this:

block: { doOptimization1(); doOptimization2(), doOptimization3(); }

where it just so happens that these three optimizations get "kicked off"
at each block in the AST, but they would each examine and manipulate the
entire AST.

Andy
> --Loring
>
> --- Sohail Somani <sohail at taggedtype.net> wrote:
>
>   


From sohail at taggedtype.net  Sat Sep 15 13:19:23 2007
From: sohail at taggedtype.net (Sohail Somani)
Date: Sat, 15 Sep 2007 13:19:23 -0700
Subject: [antlr-interest] Non-local optimizations with treewalker?
In-Reply-To: <700573.14939.qm@web55905.mail.re3.yahoo.com>
References: <700573.14939.qm@web55905.mail.re3.yahoo.com>
Message-ID: <46EC3E4B.1030400@taggedtype.net>

Loring Craymer wrote:
> The answer, of course, is "yes and no".  Yes, because
> capturing the semantics on which you base your
> optimizations on in a tree makes it easier to carry
> out a series of transformations.  No, because you need
> to impose a control flow graph on top of the tree
> (easy to do) and add other data structures to capture
> relationships between distant nodes in the tree during
> analysis.  Transformation passes over trees are
> interspersed with analysis passes; analysis passes
> invariably require additional data structures,
> including symbol tables, to capture the results of the
> analysis for the next transformation or code
> generation pass.
>
> So:  trees are central to syntactic/semantic
> transformation, but they are not the only tool needed
> for analysis.
>   

Thanks for your response. What exactly do you mean by "imposing a CFG on
top of the tree?" What I understand by this is you have a tree walker
pass in which you generate a CFG which points to the appropriate nodes
in the AST. Given this mapping, you can then transform as a result of
traversing the components of the graph and determining some
optimizations. This sounds to me like I would have to write some C++
code to generate a ANTLR tree which sounds like I'm using the tool wrong.

As an aside: having never written an optimizing compiler before myself,
I wonder if you can suggest any practical literature about the data
structures involved in (efficient) program optimization.

Thanks again,

Sohail

From sohail at taggedtype.net  Sat Sep 15 14:01:12 2007
From: sohail at taggedtype.net (Sohail Somani)
Date: Sat, 15 Sep 2007 14:01:12 -0700
Subject: [antlr-interest] Non-local optimizations with treewalker?
In-Reply-To: <46EC38F2.2020102@jazillian.com>
References: <1189800427.v2.fusewebmail-240634@f>
	<46EC38F2.2020102@jazillian.com>
Message-ID: <46EC4818.8030502@taggedtype.net>

Andy Tripp wrote:
> I think that unless your language is pretty trivial, the treewalker
> approach will
> be a mess for most non-trivial translation tasks. And I'd consider
> even something
> as simple as this to be non-trivial. Here, you show a simple example,
> but presumably
> combine multiple calls to f(x), and have to do some sort of validation
> that
> the calls are equivalent. For example, these should match:
>
> int x = 1;
> v = f(x); ...
> w = v(1);
>
> ...but these shouldn't:
> v = f(x) + 1;
> ...
> w = f(x);
>

I'm not sure you entirely understood what I was trying to do. The idea
is that computing f(x) is expensive. If the language has no
side-effects, then calling f(x) always gives the same result. Therefore,
if you can "match" (I'm not entirely sure that I want to use that term)
f(x) in more than one subexpression within some lexical scope, then you
can replace all computations of f(x) with t where t = f(x).
> ...and, control flow analysis needs to be done to check the "...".
> Suppose the "..." contains  a call to some function that passes "x" as
> an argument.
> Can "x" be changed by the called function? It all depends on the
> language and the type of x
> (e.g. in Java, Objects are passed by reference, but primitives by value).
>

Yep, thats why I specified no side-effects in my original post. I know
its a cop-out!
> So a treewalker is good if you're just saying "at this type of node in
> the AST, do the following...",
> but here, you'd want to say "within the following block, search for
> matching function calls that
> are assigned to different variables, make sure that the first variable
> is never changed before the
> 2nd call, and make the following change..."
>
> See http://www.antlr.org/article/1170602723163/treewalkers.html
> for a more complete rant.
>

Oh I've definitely seen that one :-)

Sohail


From rschulz at sonic.net  Sat Sep 15 14:39:08 2007
From: rschulz at sonic.net (Randall R Schulz)
Date: Sat, 15 Sep 2007 14:39:08 -0700
Subject: [antlr-interest] Non-local optimizations with treewalker?
In-Reply-To: <46EC4818.8030502@taggedtype.net>
References: <1189800427.v2.fusewebmail-240634@f>
	<46EC38F2.2020102@jazillian.com> <46EC4818.8030502@taggedtype.net>
Message-ID: <200709151439.08536.rschulz@sonic.net>

Sohail,

On Saturday 15 September 2007 14:01, Sohail Somani wrote:
> ...
>
> I'm not sure you entirely understood what I was trying to do. The
> idea is that computing f(x) is expensive. If the language has no
> side-effects, then calling f(x) always gives the same result.
> Therefore, if you can "match" (I'm not entirely sure that I want to
> use that term) f(x) in more than one subexpression within some
> lexical scope, then you can replace all computations of f(x) with t
> where t = f(x).

One term for saving values rather than recomputing them 
is "memoization."

I think you're looking (asking) in the wrong place. I think most of the 
people using ANTLR and other parser generators are _not_ producing 
classical compilers that turn a source language into machine code of 
some sort, efficient or otherwise. Clearly the answers you've received 
indicate that some here do have such a background, but I suspect 
they're the minority and probably those that are versed don't have the 
time to bring you along as a teacher would.

There's a huge literature on the techniques about which you're 
(implicitly) asking. The field goes back several decades, now. I 
strongly suggest you do some conventional literature search and begin 
your self-education that way.

Much of this stuff is subtle and complex, but it's not magic. Dig in and 
I'm sure you can come up to speed fairly quickly. It's far better to 
start with the accumulated knowledge (much of it, anyway) of the 
practitioners who've gone before you than it is to start from scratch 
developing the concepts!

Good luck.


> ...
>
> Sohail


Randall Schulz

From cedric at berger.to  Sat Sep 15 15:12:46 2007
From: cedric at berger.to (=?ISO-8859-1?Q?C=E9dric_Berger?=)
Date: Sun, 16 Sep 2007 00:12:46 +0200
Subject: [antlr-interest] Simple grammar with error
In-Reply-To: <46EBA1B7.1090003@ya.com>
References: <46EBA1B7.1090003@ya.com>
Message-ID: <46EC58DE.9040005@berger.to>

Alfonso wrote:

> PLUS     : '+';
> MINUS    : '-';
> DIVIDE  : '/';
> ASTERISK : '*';
> 
> OPEN_PAREN : '(' ;
> CLOSE_PAREN: ')' ;

I keep wondering why people do that...
Is that just to obfuscate the grammar and make it less readable
or is there a real rationale here?

Cedric

From jaluber at gmx.de  Sat Sep 15 15:18:30 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Sun, 16 Sep 2007 00:18:30 +0200
Subject: [antlr-interest] Simple grammar with error
In-Reply-To: <46EC58DE.9040005@berger.to>
References: <46EBA1B7.1090003@ya.com> <46EC58DE.9040005@berger.to>
Message-ID: <46EC5A36.2080306@gmx.de>

C?dric Berger wrote:
> Alfonso wrote:
> 
>> PLUS     : '+';
>> MINUS    : '-';
>> DIVIDE  : '/';
>> ASTERISK : '*';
>>
>> OPEN_PAREN : '(' ;
>> CLOSE_PAREN: ')' ;
> 
> I keep wondering why people do that...
> Is that just to obfuscate the grammar and make it less readable
> or is there a real rationale here?
> 
> Cedric
> 
Only if you separate lexer and parser grammars. Otherwise it's better to
use the implicit token variety.

Best regards,
Johannes Luber

From rschulz at sonic.net  Sat Sep 15 15:27:40 2007
From: rschulz at sonic.net (Randall R Schulz)
Date: Sat, 15 Sep 2007 15:27:40 -0700
Subject: [antlr-interest] Simple grammar with error
In-Reply-To: <46EC5A36.2080306@gmx.de>
References: <46EBA1B7.1090003@ya.com> <46EC58DE.9040005@berger.to>
	<46EC5A36.2080306@gmx.de>
Message-ID: <200709151527.40888.rschulz@sonic.net>

On Saturday 15 September 2007 15:18, Johannes Luber wrote:
> C?dric Berger wrote:
> > ...
> >>
> >> OPEN_PAREN : '(' ;
> >> CLOSE_PAREN: ')' ;
> >
> > I keep wondering why people do that...
> > Is that just to obfuscate the grammar and make it less readable
> > or is there a real rationale here?
> >
> > Cedric
>
> Only if you separate lexer and parser grammars. Otherwise it's better
> to use the implicit token variety.

Why is it better not to define names for fixed terminals?


> ...
> Johannes Luber


Randall Schulz

From cummings at kjchome.homeip.net  Sat Sep 15 17:05:59 2007
From: cummings at kjchome.homeip.net (Kevin J. Cummings)
Date: Sat, 15 Sep 2007 20:05:59 -0400
Subject: [antlr-interest] Simple grammar with error
In-Reply-To: <46EBA1B7.1090003@ya.com>
References: <46EBA1B7.1090003@ya.com>
Message-ID: <46EC7367.2060505@kjchome.homeip.net>

Alfonso wrote:
> I'm using ANTLRWorks to learn the basics of ANTLR. Can someone explain
> me why this grammar
> 
> 
> grammar Failed;
> 
> expression
>    : term ( (PLUS|MINUS) expression)?
     : term ( (PLUS|MINUS) term )*
>    EOF
>    ;
> 
> term    :
>      atom ( (DIVIDE | ASTERISK) term)?
       atom ( (DIVIDE | ASTERISK) atom)*
>    ;
> 
> atom    :
>      NUMBER
>    | OPEN_PAREN expression CLOSE_PAREN
>    ;
> 
> NUMBER    : '0'..'9' ('0'..'9')*;
>   PLUS     : '+';
> MINUS    : '-';
> DIVIDE  : '/';
> ASTERISK : '*';
> 
> OPEN_PAREN : '(' ;
> CLOSE_PAREN: ')' ;
> 
> Generates a "NoViableAltException" after the "5" when facing the
> expression 2*(3+5)+1 in the interpreter?

Unless I misunderstand what you are trying to do, it looks like you
translated a LALR(1) grammar (or BNF) verbatim, and that doesn't do what
you expect with LL(k).

> Surely this is a basic question, but for god's sake I'm not able to
> understand it.

I've done this with every grammar I've implemented with ANTLR.  It works
just fine.

> Thanks in advance


-- 
Kevin J. Cummings
kjchome at rcn.com
cummings at kjchome.homeip.net
cummings at kjc386.framingham.ma.us
Registered Linux User #1232 (http://counter.li.org)

From antlr at mirality.co.nz  Sun Sep 16 00:34:15 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sun, 16 Sep 2007 19:34:15 +1200
Subject: [antlr-interest] Simple grammar with error
In-Reply-To: <46EC58DE.9040005@berger.to>
References: <46EBA1B7.1090003@ya.com>
 <46EC58DE.9040005@berger.to>
Message-ID: <20070916073419.692CB11EB73@www.antlr.org>

At 10:12 16/09/2007, C?dric Berger wrote:
 >Alfonso wrote:
 >
 >> PLUS     : '+';
 >> MINUS    : '-';
 >> DIVIDE  : '/';
 >> ASTERISK : '*';
 >>
 >> OPEN_PAREN : '(' ;
 >> CLOSE_PAREN: ')' ;
 >
 >I keep wondering why people do that...
 >Is that just to obfuscate the grammar and make it less readable
 >or is there a real rationale here?

I prefer this style:

tokens {
   PLUS = '+';
   MINUS = '-';
}

... but it's basically the same thing.  It does 
make the grammar itself a little longer, but it 
gives nice names to the generated tokens instead 
of things like "T46", which is helpful.


From barbolani at ya.com  Sun Sep 16 01:02:55 2007
From: barbolani at ya.com (Alfonso)
Date: Sun, 16 Sep 2007 10:02:55 +0200
Subject: [antlr-interest] Simple grammar with error
In-Reply-To: <46EC7367.2060505@kjchome.homeip.net>
References: <46EBA1B7.1090003@ya.com> <46EC7367.2060505@kjchome.homeip.net>
Message-ID: <46ECE32F.1070807@ya.com>


>      : term ( (PLUS|MINUS) term )*
>   
>        atom ( (DIVIDE | ASTERISK) atom)*
>   
The changes seem to make the interpreter to do the right thing. However, 
as someone else has pointed out,the debugger still did the right thing 
with the original version. Is that a bug in the interpreter?
> Unless I misunderstand what you are trying to do, it looks like you
> translated a LALR(1) grammar (or BNF) verbatim, and that doesn't do what
> you expect with LL(k).
>   
Well, yes and no. I just used my dusty knowledge of BNF, but certainly 
have not studied the grammar and checked whether it is LARL(1) or LL(k) 
or anything else. I find very hard to find a tutorial on ANTLR beyond 
the basic expression calculator. I just cannot purchase Terrence's book 
at the moment (I wish I could)
> I've done this with every grammar I've implemented with ANTLR.  It works
> just fine.
>   

Do you mean apply the changes above to the grammar? Do you know of a 
good source for v3 documentation? The docs provided with v2 where for me 
at least more informative.


Thanks for the reply

Alfonso

From antlr at mirality.co.nz  Sun Sep 16 00:55:47 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sun, 16 Sep 2007 19:55:47 +1200
Subject: [antlr-interest] Simple grammar with error
In-Reply-To: <46EBA1B7.1090003@ya.com>
References: <46EBA1B7.1090003@ya.com>
Message-ID: <20070916075543.8745E11EBB8@www.antlr.org>

At 21:11 15/09/2007, Alfonso wrote:
 >expression
 >    : term ( (PLUS|MINUS) expression)?
 >    EOF
 >    ;
 >
 >term    :
 >      atom ( (DIVIDE | ASTERISK) term)?
 >    ;
 >
 >atom    :
 >      NUMBER
 >    | OPEN_PAREN expression CLOSE_PAREN
 >    ;
 >
 >NUMBER    : '0'..'9' ('0'..'9')*;
[...]
 >Generates a "NoViableAltException" after the "5" when facing the 

 >expression 2*(3+5)+1 in the interpreter?

Well, you've specified that 'expression' must end with an EOF and 
yet a CLOSE_PAREN must follow it.  I'd be surprised if it did 
anything else :)

Remove the EOF from 'expression' and put it into another rule that 
uses it (and then use that as your starting rule instead), like 
so:

file : expression EOF;

Incidentally, you can define NUMBER like this instead:

NUMBER : ('0'..'9')+;


From barbolani at ya.com  Sun Sep 16 01:59:13 2007
From: barbolani at ya.com (Alfonso)
Date: Sun, 16 Sep 2007 10:59:13 +0200
Subject: [antlr-interest] Simple grammar with error
In-Reply-To: <46EBA1B7.1090003@ya.com> 
References: <46EBA1B7.1090003@ya.com> 
Message-ID: <46ECF061.20906@ya.com>

Gavin Lambert escribi?:
> At 21:11 15/09/2007, Alfonso wrote:
> >expression
> > : term ( (PLUS|MINUS) expression)?
> > EOF
> > ;
> >
> >term :
> > atom ( (DIVIDE | ASTERISK) term)?
> > ;
> >
> >atom :
> > NUMBER
> > | OPEN_PAREN expression CLOSE_PAREN
> > ;
> >
> >NUMBER : '0'..'9' ('0'..'9')*;
> [...]
> >Generates a "NoViableAltException" after the "5" when facing the
> >expression 2*(3+5)+1 in the interpreter?
>
> Well, you've specified that 'expression' must end with an EOF and yet 
> a CLOSE_PAREN must follow it. I'd be surprised if it did anything else :)
>
> Remove the EOF from 'expression' and put it into another rule that 
> uses it (and then use that as your starting rule instead), like so:
>
> file : expression EOF;
>
> Incidentally, you can define NUMBER like this instead:
>
> NUMBER : ('0'..'9')+;
>
>

Thanks Gavin, your explanation is clear. However, given that the 
debugger seems to accept and parse this correctly and the interpreter 
does not, I'm not sure of which one of the two has a bug.

From antlr at mirality.co.nz  Sun Sep 16 01:58:34 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sun, 16 Sep 2007 20:58:34 +1200
Subject: [antlr-interest] Simple grammar with error
In-Reply-To: <46ECF061.20906@ya.com>
References: <46EBA1B7.1090003@ya.com>
 <46ECF061.20906@ya.com>
Message-ID: <20070916085846.D6D5411EBA6@www.antlr.org>

At 20:59 16/09/2007, Alfonso wrote:
 >Thanks Gavin, your explanation is clear. However, given that the 

 >debugger seems to accept and parse this correctly and the
 >interpreter does not, I'm not sure of which one of the two has a 
bug.

That would be strange.  However this problem case will only occur 
if you have parentheses in your expression -- were you passing 
each one the same input?


From barbolani at ya.com  Sun Sep 16 02:15:22 2007
From: barbolani at ya.com (Alfonso)
Date: Sun, 16 Sep 2007 11:15:22 +0200
Subject: [antlr-interest] Simple grammar with error
In-Reply-To: <46ECF061.20906@ya.com> 
References: <46EBA1B7.1090003@ya.com> <46ECF061.20906@ya.com> 
Message-ID: <46ECF42A.4010707@ya.com>


>
> That would be strange. However this problem case will only occur if 
> you have parentheses in your expression -- were you passing each one 
> the same input?
Yes, I did that as recommended by someone else in the list.


From jaluber at gmx.de  Sun Sep 16 03:09:56 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Sun, 16 Sep 2007 12:09:56 +0200
Subject: [antlr-interest] Simple grammar with error
In-Reply-To: <200709151527.40888.rschulz@sonic.net>
References: <46EBA1B7.1090003@ya.com>
	<46EC58DE.9040005@berger.to>	<46EC5A36.2080306@gmx.de>
	<200709151527.40888.rschulz@sonic.net>
Message-ID: <46ED00F4.1070506@gmx.de>

Randall R Schulz wrote:
> On Saturday 15 September 2007 15:18, Johannes Luber wrote:
>> C?dric Berger wrote:
>>> ...
>>>> OPEN_PAREN : '(' ;
>>>> CLOSE_PAREN: ')' ;
>>> I keep wondering why people do that...
>>> Is that just to obfuscate the grammar and make it less readable
>>> or is there a real rationale here?
>>>
>>> Cedric
>> Only if you separate lexer and parser grammars. Otherwise it's better
>> to use the implicit token variety.
>>
>> Johannes Luber
> 
> Why is it better not to define names for fixed terminals?
> 
> Randall Schulz
> 

It may be only my preferred aesthetically style but if I see '(' instead
OPEN_PAREN I know instantly what input is required. Otherwise I have to
parse the name in my head. Additionally, in many languages a particular
operator has overloaded meanings. An example:

addressof_expression
	:	BITWISE_AND unary_expression
	;

where

BITWISE_AND : '&';

Whenever I read BITWISE_AND I have to replace it with '&' and reparse it
as OP_ADDRESS. I can't use it in the grammar itself because there won't
be OP_ADDRESS tokens. Of course, I could do a rewrite, but it may not be
worth the effort. In such cases, I'd wish ANTLR would allow to map
BITWISE_AND and OP_ADDRESS to the same token (although the debugger may
be confused).

Best regards,
Johannes Luber

From antlr at mirality.co.nz  Sun Sep 16 04:07:08 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sun, 16 Sep 2007 23:07:08 +1200
Subject: [antlr-interest] Simple grammar with error
In-Reply-To: <46ED00F4.1070506@gmx.de>
References: <46EBA1B7.1090003@ya.com> <46EC58DE.9040005@berger.to>
	<46EC5A36.2080306@gmx.de> <200709151527.40888.rschulz@sonic.net>
	<46ED00F4.1070506@gmx.de>
Message-ID: <20070916110702.2A0AE11EBB7@www.antlr.org>

At 22:09 16/09/2007, Johannes Luber wrote:
 >Additionally, in many languages a particular
 >operator has overloaded meanings. An example:
 >
 >addressof_expression
 >	:	BITWISE_AND unary_expression
 >	;
 >
 >where
 >
 >BITWISE_AND : '&';
 >
 >Whenever I read BITWISE_AND I have to replace it with '&' and
 >reparse it as OP_ADDRESS. I can't use it in the grammar itself
 >because there won't be OP_ADDRESS tokens. Of course, I could
 >do a rewrite, but it may not be worth the effort. In such cases, 

 >I'd wish ANTLR would allow to map BITWISE_AND and OP_ADDRESS to
 >the same token (although the debugger may be confused).

This is just an example of choosing the wrong name for the 
token.  Given that lexically an '&' might be a "bitwise and" or it 
might be an "address-of operator" (and the lexer will have no idea 
which one), the best name for the token would just be something 
like AMP.  Leave it to parser rules to assign more semantic 
meaning to it.  Like so:

tokens {
   AMP = '&';
   BITWISE_AND;
   OP_ADDRESS;
}
...
addressof_expression
   : AMP unary_expression -> ^(OP_ADDRESS unary_expression)
   ;

And it's still cleaner (especially when looking at the generated 
code or at error message outputs) to see the token being referred 
to as AMP instead of as T31.

(And also, if you're modelling a C++-like language that supports 
operator overloading, even BITWISE_AND isn't necessarily a good 
name, since that's an overridable operator and so might end up 
doing something completely different.)


From jaluber at gmx.de  Sun Sep 16 05:30:10 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Sun, 16 Sep 2007 14:30:10 +0200
Subject: [antlr-interest] Simple grammar with error
In-Reply-To: <20070916110703.14341gmx1@mx078.gmx.net>
References: <46EBA1B7.1090003@ya.com> <46EC58DE.9040005@berger.to>
	<46EC5A36.2080306@gmx.de> <200709151527.40888.rschulz@sonic.net>
	<46ED00F4.1070506@gmx.de> <20070916110703.14341gmx1@mx078.gmx.net>
Message-ID: <46ED21D2.5000406@gmx.de>

Gavin Lambert wrote:
> This is just an example of choosing the wrong name for the token.  Given
> that lexically an '&' might be a "bitwise and" or it might be an
> "address-of operator" (and the lexer will have no idea which one), the
> best name for the token would just be something like AMP.

That I get from stealing the token names from the mono C# compiler. :(
Does this advice go for only ambiguous token names? Or should
overloadable operators implicitly be named after the symbol, even if
they are used in the grammar only in one place?

> Leave it to
> parser rules to assign more semantic meaning to it.  Like so:
> 
> tokens {
>   AMP = '&';
>   BITWISE_AND;
>   OP_ADDRESS;
> }
> ...
> addressof_expression
>   : AMP unary_expression -> ^(OP_ADDRESS unary_expression)
>   ;

Isn't OP_ADDRESS[AMP] allowed? Nonetheless this tipp it now on my todo list.
> 
> And it's still cleaner (especially when looking at the generated code or
> at error message outputs) to see the token being referred to as AMP
> instead of as T31.
> 
> (And also, if you're modelling a C++-like language that supports
> operator overloading, even BITWISE_AND isn't necessarily a good name,
> since that's an overridable operator and so might end up doing something
> completely different.)
> 
It is C#.

Best regards,
Johannes Luber

From antlr at mirality.co.nz  Sun Sep 16 13:54:20 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Mon, 17 Sep 2007 08:54:20 +1200
Subject: [antlr-interest] Simple grammar with error
In-Reply-To: <46ED21D2.5000406@gmx.de>
References: <46EBA1B7.1090003@ya.com> <46EC58DE.9040005@berger.to>
	<46EC5A36.2080306@gmx.de> <200709151527.40888.rschulz@sonic.net>
	<46ED00F4.1070506@gmx.de> <20070916110703.14341gmx1@mx078.gmx.net>
	<46ED21D2.5000406@gmx.de>
Message-ID: <20070916205416.8BE7111EAFB@www.antlr.org>

At 00:30 17/09/2007, Johannes Luber wrote:
 >Does this advice go for only ambiguous token names? Or should
 >overloadable operators implicitly be named after the symbol, 
even
 >if they are used in the grammar only in one place?

That's up to you :)  I'm by no means authoritative; I'm just 
offering my opinion on what makes the most sense to me.

 >Isn't OP_ADDRESS[AMP] allowed? Nonetheless this tipp it now on 
my
 >todo list.

Yes, I believe so.  I haven't really played with that particular 
construction much, but it would lead to better error messages etc, 
so it's probably a good idea.

 >> (And also, if you're modelling a C++-like language that 
supports
 >> operator overloading, even BITWISE_AND isn't necessarily a 
good
 >> name, since that's an overridable operator and so might end up 

 >> doing something completely different.)
 >>
 >It is C#.

Same difference ;)

It's probably not a big deal, though.  After all, technically it's 
still the "bitwise and operator", even if it can be overridden to 
do something completely different.  So calling it BITWISE_AND is 
still reasonable.


From Abhijit_Ghonge at infosys.com  Sun Sep 16 23:21:20 2007
From: Abhijit_Ghonge at infosys.com (Abhijit Nandkumar Ghonge)
Date: Mon, 17 Sep 2007 11:51:20 +0530
Subject: [antlr-interest] line number in grammar
Message-ID: <13CAB19CBE2BDD49BC741F05E9FA4B5A08500652AA@BLRKECMBX05.ad.infosys.com>


Hi all,

Is there any way to get the current line number (that the parser is parsing) of the input file like we have yylineno in Lex & yacc which keeps track of current line number?


Regards,
Abhijit.


**************** CAUTION - Disclaimer *****************
This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended solely for the use of the addressee(s). If you are not the intended recipient, please notify the sender by e-mail and delete the original message. Further, you are not to copy, disclose, or distribute this e-mail or its contents to any other person and any such actions are unlawful. This e-mail may contain viruses. Infosys has taken every reasonable precaution to minimize this risk, but is not liable for any damage you may sustain as a result of any virus in this e-mail. You should carry out your own virus checks before opening the e-mail or attachment. Infosys reserves the right to monitor and review the content of all messages sent to or from this e-mail address. Messages sent to or from this e-mail address may be stored on the Infosys e-mail system.
***INFOSYS******** End of Disclaimer ********INFOSYS***
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070917/9cd8e052/attachment.html 

From matthew.bowman at sogotech.com  Mon Sep 17 01:31:32 2007
From: matthew.bowman at sogotech.com (Matthew Bowman)
Date: Mon, 17 Sep 2007 11:31:32 +0300
Subject: [antlr-interest] SimpleCalc Tree Rewrite Rules
Message-ID: <46EE3B64.10305@sogotech.com>

So I have the following grammar:

grammar SimpleCalcTree;
options { output=AST; }
tokens{ OP; NUM; }

expr : l=term (o=plus_minus r=term)* -> ^(OP $o $l $r);
term : l=factor (o=mult_divide r=factor)* -> ^(OP $o $l $r);
factor : NUMBER -> ^(NUM NUMBER);
plus_minus : PLUS | MINUS;
mult_divide : MULT | DIVIDE;

PLUS : '+';
MINUS : '-';
MULT : '*';
DIVIDE : '/';
NUMBER : '0'..'9'+;

And my problem is with the rewrite rules. I want it to only rewrite the 
rule with (OP $o $l $r) if it actually matches 'term plus_minus term' or 
'factor mult_divide factor' but if it only matches a term or factor I 
want the subtree from factor.

Examples of what I'm trying to accomplish (and support order of 
operations)...

Input: 2
Output: (NUM 2)

Input: 2 + 2
Output: (OP + (NUM 2) (NUM 2))

Input: 2 * 2 - 4
Output: (OP - (OP * (NUM 2) (NUM 2)) (NUM 4))

My real world example is much more complex but this if I can solve this 
trivial case then I can adapt it to what I need.

Thanks in advance!

-- 
Matthew Bowman


From Eric.Deplagne at loria.fr  Mon Sep 17 03:55:13 2007
From: Eric.Deplagne at loria.fr (Eric Deplagne)
Date: Mon, 17 Sep 2007 12:55:13 +0200
Subject: [antlr-interest] SimpleCalc Tree Rewrite Rules
In-Reply-To: <46EE3B64.10305@sogotech.com>
References: <46EE3B64.10305@sogotech.com>
Message-ID: <20070917105513.GA32526@goldorak3.eric.deplagne.name>

On lun, 17 sep 2007 11:31:32 +0300, Matthew Bowman wrote:
> So I have the following grammar:
> [...]
> expr : l=term (o=plus_minus r=term)* -> ^(OP $o $l $r);
> term : l=factor (o=mult_divide r=factor)* -> ^(OP $o $l $r);
> 
> And my problem is with the rewrite rules. I want it to only rewrite the 
> rule with (OP $o $l $r) if it actually matches 'term plus_minus term' or 
> 'factor mult_divide factor' but if it only matches a term or factor I 
> want the subtree from factor.
>
> [...]

  The idea that immediately comes to me is to replace the * by +
  and add an alternative for a single term.

  expr: 
    l=term |
    l=term (o=plus_minus r=term)+ -> ^(OP $o $l $r)
  ;

-- 
  Eric Deplagne
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20070917/a1426e28/attachment.bin 

From matthew.bowman at sogotech.com  Mon Sep 17 04:00:41 2007
From: matthew.bowman at sogotech.com (Matthew Bowman)
Date: Mon, 17 Sep 2007 14:00:41 +0300
Subject: [antlr-interest] SimpleCalc Tree Rewrite Rules
In-Reply-To: <20070917105513.GA32526@goldorak3.eric.deplagne.name>
References: <46EE3B64.10305@sogotech.com>
	<20070917105513.GA32526@goldorak3.eric.deplagne.name>
Message-ID: <46EE5E59.80004@sogotech.com>

Eric Deplagne wrote:
> On lun, 17 sep 2007 11:31:32 +0300, Matthew Bowman wrote:
>   
>> So I have the following grammar:
>> [...]
>> expr : l=term (o=plus_minus r=term)* -> ^(OP $o $l $r);
>> term : l=factor (o=mult_divide r=factor)* -> ^(OP $o $l $r);
>>
>> And my problem is with the rewrite rules. I want it to only rewrite the 
>> rule with (OP $o $l $r) if it actually matches 'term plus_minus term' or 
>> 'factor mult_divide factor' but if it only matches a term or factor I 
>> want the subtree from factor.
>>
>> [...]
>>     
>
>   The idea that immediately comes to me is to replace the * by +
>   and add an alternative for a single term.
>
>   expr: 
>     l=term |
>     l=term (o=plus_minus r=term)+ -> ^(OP $o $l $r)
>   ;
>   
I tried that and it also had problems. However, I manage to get around 
it altogether by just making the root node the operator itself

expr:
  term ((PLUS | MINUS)^ term)*

I needed the intermediate AST in the right form for my tree grammar but 
I've managed to get the tree grammar to work with this approach!

Thanks for you reply,

-- 
Matthew Bowman


From antlr at jazillian.com  Mon Sep 17 07:39:43 2007
From: antlr at jazillian.com (Andy Tripp)
Date: Mon, 17 Sep 2007 10:39:43 -0400
Subject: [antlr-interest] Non-local optimizations with treewalker?
In-Reply-To: <46EC4818.8030502@taggedtype.net>
References: <1189800427.v2.fusewebmail-240634@f>
	<46EC38F2.2020102@jazillian.com> <46EC4818.8030502@taggedtype.net>
Message-ID: <46EE91AF.8030206@jazillian.com>

Sohail Somani wrote:
> I'm not sure you entirely understood what I was trying to do. The idea
> is that computing f(x) is expensive. If the language has no
> side-effects, then calling f(x) always gives the same result. Therefore,
> if you can "match" (I'm not entirely sure that I want to use that term)
> f(x) in more than one subexpression within some lexical scope, then you
> can replace all computations of f(x) with t where t = f(x).
>   
I was talking about how you "match". Surely you don't mean you're only 
going to look for
calls to a function named "f", you "match" any function call. And you 
don't mean passing
an argument "x", you mean...some non-trivial "match" algorithm that 
decides whether two
arguments are "the same". So, maybe all these calls "match" (or maybe not):

f(1);

int i=1; f(i);

#define ONE 1
f(ONE);

f(0+1);

i = someRandomNumber();
if (i == 1) {
    f(i);
}


...all I was saying was that the treewalker approach doesn't help you do 
any of this "matching",
and the other code you'll need to write. And this code is probably 
non-trivial.
> Oh I've definitely seen that one :-)
>
> Sohail
>
>   


From barbolani at ya.com  Mon Sep 17 16:31:41 2007
From: barbolani at ya.com (Alfonso)
Date: Tue, 18 Sep 2007 01:31:41 +0200
Subject: [antlr-interest] Simplest working boolean grammar
Message-ID: <46EF0E5D.2070200@ya.com>

   
I think I've finally built a "correct" grammar for parsing boolean 
expressions


grammar Success;


tokens {
AND = 'and';
OR = 'or';
}

file    :    boolean_expression EOF;

boolean_expression:   
        boolean_term ( OR boolean_term)*
    ;
   
boolean_term
    :    boolean_atom (AND boolean_atom)*
    ;
 
boolean_atom
    :   
          (OPEN_PAREN boolean_expression CLOSE_PAREN) => OPEN_PAREN 
boolean_expression CLOSE_PAREN
        | expression EQ expression
    ;

expression: term ( (PLUS|MINUS) term)*
    ;
 
term    :
      atom ( (DIVIDE | ASTERISK) atom)*
    ;

atom    :
      NUMBER
    | (OPEN_PAREN expression CLOSE_PAREN) => OPEN_PAREN expression 
CLOSE_PAREN
    ;

NUMBER    : ('0'..'9')+;
   
PLUS     : '+';
MINUS    : '-';
DIVIDE  : '/';
ASTERISK : '*';
EQ    : '=';

OPEN_PAREN : '(' ;
CLOSE_PAREN: ')' ;
   
This grammar seems to do the right thing under the ANTLRWorks debugger 
(the interpreter is still failing to interpret it correctly, though) I 
had to use the  => operation to resolve the ambiguity that exists when 
the boolean expression starts with a parenthesis, since the parser does 
not know if this is part of a boolean_expression or is really the start 
of an expression until it sees either the matching closing parenthesis 
and the next token or an EQ.

I don't understand fully the code that ANTLR generates, but I know how 
would I code this if I were generating the recursive descent parser by 
hand. When finding an opening parenthesis, I'd start trying to parse the 
input stream as if it were a boolean expression. If during the parsing 
found something syntactically incorrect inside the parenthesis, I'll  
"rewind" the stream just before the starting parenthesis and start 
trying to parse the expression EQ expression part.

However, it seems a naive approach, since by the time you decide that 
you've not found a OPEN_PAREN boolean_expression CLOSE_PAREN, you've 
already gone a long way of parsing the actual expression EQ expression 
(at least the first atom) I'm not sure of how I would try to optimize 
this so that the work done on parsing the first atom so far could be 
saved, but my question is, is ANTLR doing the same as my first stab at 
doing it by hand?

I know that those are basic questions, but I'm so intrigued by ANTLR (if 
only the works interpreter worked....) that is tempting to explore.

From antlr at mirality.co.nz  Mon Sep 17 21:40:28 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 18 Sep 2007 16:40:28 +1200
Subject: [antlr-interest] Simplest working boolean grammar
In-Reply-To: <46EF0E5D.2070200@ya.com>
References: <46EF0E5D.2070200@ya.com>
Message-ID: <20070918044509.80CAF11EB83@www.antlr.org>

At 11:31 18/09/2007, Alfonso wrote:
 >atom    :
 >      NUMBER
 >    | (OPEN_PAREN expression CLOSE_PAREN) => OPEN_PAREN 
expression
 >CLOSE_PAREN
 >    ;
 >
 >NUMBER    : ('0'..'9')+;

If you want to support signed numbers, you'll need to have a 
(PLUS|MINUS)? in either atom (if you want to permit whitespace 
separation from the number) or in NUMBER (if not).  This may 
introduce additional ambiguity, though.


From jimi at temporal-wave.com  Tue Sep 18 04:04:54 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 18 Sep 2007 12:04:54 +0100
Subject: [antlr-interest] C target; C++ compatibility?
In-Reply-To: <20070911144731.29f0227e.mazzucco@iiasa.ac.at>
References: <20070910150415.6e1b42d4.mazzucco@iiasa.ac.at>
	<20070911144731.29f0227e.mazzucco@iiasa.ac.at>
Message-ID: <BAY108-DAV13065D53A2D5C904948CBB86B80@phx.gbl>

Well, I didn't ever really intend to support the compiling of the C runtime
as C++ code, because it's err, C code ;-)

The way to deal with this properly is for me to ensure that generated .h
files can be included within C++ code and define the functions as extern "C"
etc. I will be working on the C++ some more starting in 2 weeks time. The or
'method' is used by error recovery code.

Jim

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Rupert Mazzucco
Sent: 11 September 2007 13:48
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] C target; C++ compatibility?

> antlr3bitset.h line 51 declares a function pointer named "or":
> 
>   struct ANTLR3_BITSET_struct  *  (*or)	    (struct
ANTLR3_BITSET_struct  * bitset1, struct ANTLR3_BITSET_struct * bitset2);

The SunPro 5.9 compiler doesn't like it either.  Does anybody have a comment
on the
use of C++ keywords as symbols in the C target?  I realize it's the C, not
C++, target,
but as the latter seems not really functional yet, using the C target via
the is the
obvious workaround. This would be much facilitated if the headers could be
included
in a C++ program as 'extern "C"'.  I would appreciate a hint on how much
work renaming
this symbol requires.  I found it in antlr3bitset.{h,c}, but it must be used
somewhere
else and grepping for "or" is not so illuminating.

Thank you
Rupert
-- 
Rupert Mazzucco         <mazzucco at iiasa.ac.at>
Research Scholar, Evolution and Ecology Program
IIASA - Institute for Applied Systems Analysis
Schlossplatz 1, 2361 Laxenburg, Austria
Phone: +43 2236 807 522   Fax: +43 2236 713 13


From Erik.Putrycz at nrc-cnrc.gc.ca  Tue Sep 18 12:39:35 2007
From: Erik.Putrycz at nrc-cnrc.gc.ca (Putrycz, Erik)
Date: Tue, 18 Sep 2007 15:39:35 -0400
Subject: [antlr-interest] literal token names in AntLR3
Message-ID: <E4D07AB09F5F044299333C8D0FEB45E904D8D6A1@nrccenexb1.nrc.ca>

In Antlr 2.x, the literal tokens got friendly field names for their type
number. 

E.g. 'ADD' would become LITERAL_ADD but in ANTLR 3, all the literals
become Txxx in the lexer. 

When working with trees, it was much easier in the past to write
something like

Switch (node.getType()) {

            Case MyTokenTypes.LITERAL_ADD:...

}

Whereas now you need to get back to MyParser.tokenNames to find the
corresponding one.

Is there any way to control the naming of the literals and get something
more friendly than the Txxx?

 

Erik Putrycz, Ph.D - Research Associate

Institute for Information Technology - Software Engineering Group

National Research Council, Canada - Building M-50, 1200 Montreal Road

Ottawa, Ontario, CANADA K1A 0R6

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070918/2abbe4b1/attachment.html 

From atif.azad at hotmail.com  Tue Sep 18 12:59:33 2007
From: atif.azad at hotmail.com (atif azad)
Date: Wed, 19 Sep 2007 00:59:33 +0500
Subject: [antlr-interest] Tree gramer porblem
Message-ID: <BLU105-F34CCCF2270EA7353E4ED18E5B80@phx.gbl>

Hello Dears
I am have a problem while writing a tree grammer.I want to parse input of 
three types , It takes all the three types recognizes all three types as 
seen in the output but parses in the end only the ist two.
Here is my tree grammer and output for more clarification of the 
problem.would be greatful for some suggestion.

tree grammar langDumpDecl;
options {
    tokenVocab=lang;
    ASTLabelType = Tree;
}

decl :  ^(DECL type comma r1=result comma)
        {System.out.println("text "+$r1.text);}

       |   ^(DECL type declarator )
             {System.out.println("text "+$declarator.text);}
      {System.out.println("type "+$type.text);}

   |^(DECL type d1=declarator d2=declarator )
        {System.out.println("text "+$d1.text);}
{System.out.println("text "+$d2.text);}
       {System.out.println("type "+$type.text);}
     ;


type : INTTYPE  | FLOATTYPE| LABELTYPE;

declarator
     : ID
     ;
comma: COMMA ;
result : RESULT ;

I am getting the following output.

tree: (DECL store r1 r2) (DECL add r2) (DECL .file " 11111.java ")
text r1
text r2
type store
text r2
type add

So its not parsing the last line in the tree.
but if I change the order of the way i am printing the output in the decl 
rule , so that I ahve the last line as the first line in the tree, then it 
parses this one too, But again only the first two lines of the tree. Not the 
third one.

Why is it not able to parse the third line in tree??????

Regards
Azad , Atif

_________________________________________________________________
FREE pop-up blocking with the new MSN Toolbar - get it now! 
http://toolbar.msn.click-url.com/go/onm00200415ave/direct/01/


From lgcraymer at yahoo.com  Tue Sep 18 13:38:49 2007
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Tue, 18 Sep 2007 13:38:49 -0700 (PDT)
Subject: [antlr-interest] literal token names in AntLR3
In-Reply-To: <E4D07AB09F5F044299333C8D0FEB45E904D8D6A1@nrccenexb1.nrc.ca>
Message-ID: <620163.55716.qm@web55905.mail.re3.yahoo.com>

Yes, you can explicitly name tokens in the tokens
section of the grammar:
tokens {
    LITERAL_ADD = 'ADD';
}
and then 'ADD' becomes LITERAL_ADD in generated code.

--Loring

--- "Putrycz, Erik" <Erik.Putrycz at nrc-cnrc.gc.ca>
wrote:

> In Antlr 2.x, the literal tokens got friendly field
> names for their type
> number. 
> 
> E.g. 'ADD' would become LITERAL_ADD but in ANTLR 3,
> all the literals
> become Txxx in the lexer. 
> 
> When working with trees, it was much easier in the
> past to write
> something like
> 
> Switch (node.getType()) {
> 
>             Case MyTokenTypes.LITERAL_ADD:...
> 
> }
> 
> Whereas now you need to get back to
> MyParser.tokenNames to find the
> corresponding one.
> 
> Is there any way to control the naming of the
> literals and get something
> more friendly than the Txxx?
> 
>  
> 
> Erik Putrycz, Ph.D - Research Associate
> 
> Institute for Information Technology - Software
> Engineering Group
> 
> National Research Council, Canada - Building M-50,
> 1200 Montreal Road
> 
> Ottawa, Ontario, CANADA K1A 0R6
> 
>  
> 
> 



      ____________________________________________________________________________________
Fussy? Opinionated? Impossible to please? Perfect.  Join Yahoo!'s user panel and lay it on us. http://surveylink.yahoo.com/gmrs/yahoo_panel_invite.asp?a=7 


From jaluber at gmx.de  Tue Sep 18 14:56:58 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Tue, 18 Sep 2007 23:56:58 +0200
Subject: [antlr-interest] Global scope syntax and the C# target
Message-ID: <46F049AA.4040805@gmx.de>

Hello!

I'm trying to access the stack size of a global scope, but it seems that
my syntax is wrong. "$RuleScope.size()" isn't translated, neither
"$RuleScope.Size()" nor "$RuleScope.Size". What should I use?

Best regards,
Johannes Luber

From antlr at mirality.co.nz  Tue Sep 18 18:17:05 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 19 Sep 2007 13:17:05 +1200
Subject: [antlr-interest] Global scope syntax and the C# target
In-Reply-To: <46F049AA.4040805@gmx.de>
References: <46F049AA.4040805@gmx.de>
Message-ID: <20070919011703.5483711EB4D@www.antlr.org>

At 09:56 19/09/2007, Johannes Luber wrote:
 >I'm trying to access the stack size of a global scope, but it 
seems
 >that my syntax is wrong. "$RuleScope.size()" isn't translated, 
neither
 >"$RuleScope.Size()" nor "$RuleScope.Size". What should I use?

http://www.antlr.org/wiki/display/ANTLR3/Special+symbols+in+actions

To access things in the scope you need double-colons.  I'm not 
sure if you can get the stack size, though.  That may depend on 
your target language.


From lizorkin at ispras.ru  Wed Sep 19 01:56:56 2007
From: lizorkin at ispras.ru (Dmitry Lizorkin)
Date: Wed, 19 Sep 2007 12:56:56 +0400
Subject: [antlr-interest] getting started with antlr
Message-ID: <036701c7fa9b$0841bfb0$4cc69553@fiona>

Hello!

For getting started with Antlr, I copy-pasted  the sample grammar from your 
"Getting started" section and got the following messages:

$ java org.antlr.Tool t.g
Exception in thread "main" java.lang.NoClassDefFoundError: org/antlr/Tool

$ java -jar antlr-3.0.1.jar org.antlr.Tool t.g
Failed to load Main-Class manifest attribute from
antlr-3.0.1.jar

The above message with manifest attribute is a complete mystery for me. I've 
got my CLASSPATH assigned correspondingly.
What could my problem be?

Thank you in advance
Dmitry


From andreas.bartho at inf.tu-dresden.de  Wed Sep 19 02:09:27 2007
From: andreas.bartho at inf.tu-dresden.de (Andreas Bartho)
Date: Wed, 19 Sep 2007 11:09:27 +0200
Subject: [antlr-interest] getting started with antlr
In-Reply-To: <036701c7fa9b$0841bfb0$4cc69553@fiona>
References: <036701c7fa9b$0841bfb0$4cc69553@fiona>
Message-ID: <46F0E747.9010607@inf.tu-dresden.de>

Hi,

> $ java org.antlr.Tool t.g
> Exception in thread "main" java.lang.NoClassDefFoundError: org/antlr/Tool
> 
> $ java -jar antlr-3.0.1.jar org.antlr.Tool t.g
> Failed to load Main-Class manifest attribute from
> antlr-3.0.1.jar
> 
> The above message with manifest attribute is a complete mystery for me. 

The -jar parameter is used for executable jars only. The manifest of an 
executable jar file tells Java the Main class. As antlr-3.0.1.jar is not 
an executable jar file, there is no Main class entry in its manifest.

> I've got my CLASSPATH assigned correspondingly.

Are you sure?

This is what I use for conversion (Windows style, I think you have to 
use colons instead of semicolons in unix):
java -cp 
libs/antlr-2.7.7.jar;libs/antlr-3.0.1.jar;libs/stringtemplate-3.1b1.jar; 
org.antlr.Tool T.g

Andreas

From matthew.bowman at sogotech.com  Wed Sep 19 03:25:12 2007
From: matthew.bowman at sogotech.com (Matthew Bowman)
Date: Wed, 19 Sep 2007 13:25:12 +0300
Subject: [antlr-interest] Rule Exception Handling
Message-ID: <46F0F908.6010307@sogotech.com>

Here's a simple boolean grammar that supports TRUE, FALSE, AND and user 
defined function names as variably length alphanumeric strings (STR):

--- BEGIN UserFunctions.g ---

grammar UserFunctions;

options { output=AST; }
tokens { UFUNC; }
@lexer::members{
boolean userFunction = false;
}

expr    : term (AND^ term)*;
term    : FUNC | uFunc;
uFunc    : ( LBRACK f=STR RBRACK -> ^(UFUNC STR) )
    {String foo = "Foo"; if (!foo.equals($f.text)) { /*throw exception 
here */ }; };

FUNC    : {!userFunction}?=> 'TRUE' | 'FALSE';
STR    : {userFunction}?=> ('a'..'z'|'A'..'Z')+;

LBRACK    : '[' {userFunction=true;};
RBRACK    : ']' {userFunction=false;};
AND    : 'AND';

WS  : (' '|'\r'|'\t'|'\u000C'|'\n')+ {$channel=HIDDEN;};

--- END UserFunctions.g ---

My issue is I would like to be able to somehow throw an Exception 
(either ANTLR or my own) from the uFunc production if the STR text 
hasn't been previously defined (outside the scope of the input) There 
are many ways to do this but this is a simple example that only allows 
the user function 'Foo'. I've tried various ways to throw an Exception, 
however the Parser just moves right along as if everything is okay. What 
is the best way to do this?

Side note: ANTLR also continues as normal on invalid input (ie. TRuE) 
printing to Standard.err (and I know if I override 
emitErrorMessage(String) I can redirect this message), but shouldn't it 
throw a RecognitionException to the calling application? Basically I 
would like to be able to give very descriptive error messages when 
something goes wrong (like the JVM does for Java).

Thanks in advance!

-- 
Matthew Bowman



From lizorkin at ispras.ru  Wed Sep 19 03:37:47 2007
From: lizorkin at ispras.ru (Dmitry Lizorkin)
Date: Wed, 19 Sep 2007 14:37:47 +0400
Subject: [antlr-interest] getting started with antlr
References: <036701c7fa9b$0841bfb0$4cc69553@fiona>
	<693a69ba0709190210o6873587do21e96fddef6a92cd@mail.gmail.com>
Message-ID: <03be01c7faa9$1f532c30$4cc69553@fiona>

> The -jar parameter is used for executable jars only. The manifest of an
> executable jar file tells Java the Main class. As antlr-3.0.1.jar is not
> an executable jar file, there is no Main class entry in its manifest.
> ...
> show us your classpath.

Indeed, that was my fault: I did not add "stringtemplate-3.1b1.jar" to the 
classpath. Now everything runs fine, and I recently compiled my first C 
application linked with Antlr-generated parser.
Andreas, Alex, thank you very much for your quick and accurate help!
Best regards,
Dmitry


From jaluber at gmx.de  Wed Sep 19 04:01:06 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Wed, 19 Sep 2007 13:01:06 +0200
Subject: [antlr-interest] Global scope syntax and the C# target
In-Reply-To: <20070919011705.25555gmx1@mx051.gmx.net>
References: <46F049AA.4040805@gmx.de> <20070919011705.25555gmx1@mx051.gmx.net>
Message-ID: <46F10172.6020706@gmx.de>

Gavin Lambert wrote:
> At 09:56 19/09/2007, Johannes Luber wrote:
>>I'm trying to access the stack size of a global scope, but it seems
>>that my syntax is wrong. "$RuleScope.size()" isn't translated, neither
>>"$RuleScope.Size()" nor "$RuleScope.Size". What should I use?
> 
> http://www.antlr.org/wiki/display/ANTLR3/Special+symbols+in+actions
> 
> To access things in the scope you need double-colons.  I'm not sure if
> you can get the stack size, though.  That may depend on your target
> language.
> 
The first example is by the book. That the C# target doesn't have one,
can't be true. Your link gave me the right idea, though. As I wanted to
simulate "$RuleScope[-1]" I used this syntax instead and discovered,
that in C# instead "size()" "Count" is used. No mentioning of this on
the C# target page, so I added it.

Best regards,
Johannes Luber

From kinneera at hotmail.com  Wed Sep 19 08:57:02 2007
From: kinneera at hotmail.com (Alex Kinneer)
Date: Wed, 19 Sep 2007 08:57:02 -0700
Subject: [antlr-interest] Ambiguity error in lexer generation
Message-ID: <BAY124-W42E61B4C24B7C580F32005DEB90@phx.gbl>


I'm hoping somebody can offer some insight as to why antlr would *nondeterministically* report lexer ambiguity warnings. That is to say, when I run the following commands:

rm TestLang__.g
rm *.class;
java org.antlr.Tool TestLang.g

It sometimes, but not always, generates warnings of this sort:

warning(205): TestLang.g:1:8: ANTLR could not analyze this decision in rule Tokens; often this is because of recursive rule references visible from the left edge of alternatives. ANTLR will re-analyze the decision with a fixed lookahead of k=1. Consider using "options {k=1;}" for that decision and possibly adding a syntactic predicate.
warning(209): TestLang.g:20:1: Multiple token rules can match input such as "'v'": T22, T24, T25, UNQUOTED_STRING, JAVA_ID
As a result, tokens(s) JAVA_ID,UNQUOTED_STRING,T24,T25 were disabled for that input
warning(209): TestLang.g:13:1: Multiple token rules can match input such as "'g'": T16, T18, UNQUOTED_STRING, JAVA_ID
...


It is primarily the inconsistent reporting of these warnings that is very perplexing to me. There's also nothing obvious to me in the grammar that should be causing the warnings. There is a generic Java identifier lexer rule that could cause an ambiguity with a set of keywords, but it is my understanding that antlr should be able to resolve this ambiguity (by giving preference to the keywords). The unquoted string rule has a semantic predicate that should prevent ambiguity.

Thanks,
Alex

_________________________________________________________________
Gear up for Halo? 3 with free downloads and an exclusive offer. It?s our way of saying thanks for using Windows Live?.
http://gethalo3gear.com?ocid=SeptemberWLHalo3_WLHMTxt_2

From Stephen.Hardy at digi.com  Wed Sep 19 09:23:39 2007
From: Stephen.Hardy at digi.com (Hardy, Stephen)
Date: Wed, 19 Sep 2007 09:23:39 -0700
Subject: [antlr-interest] Ambiguity error in lexer generation
In-Reply-To: <BAY124-W42E61B4C24B7C580F32005DEB90@phx.gbl>
Message-ID: <62BABE024B7C074E9194E9727A418979C4F098@dvs-sms-mail01.digi.com>

Ah, so it is not just me getting these things!

Are you using NetBeans IDE?  I find that after quite a few rounds of
editing/compiling/testing, ANTLR starts to give some whacko errors (I
have an ANT target to automatically rebuild the parser when I build the
project).  Sometimes, doing nothing except rebuilding (F5 or F6) clears
the error.  At other times, I need to get right out of NetBeans and
restart it.

Since there is no such thing as nondeterminism in a working computer, my
guess is that there is a bug in the Java memory manager which corrupts
the heap, or maybe even Windows or the PC hardware is at fault (*).  I
doubt it would be a bug in ANTLR itself. 

Regards,
SJH

(*) Most people assume PC hardware is fairly reliable; unfortunately,
it's nowhere near as reliable as one would hope.  In particular, the
no-name-brand stuff put in cheapo PCs always works pretty near the
limits of what it is designed to do.  Even name-brand components have
fairly slim operating margins.  It is the price we pay for our penchant
for running the latest bloatware from Microsoft...

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org 
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Alex Kinneer
> Sent: Wednesday, September 19, 2007 8:57 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Ambiguity error in lexer generation
> 
> 
> I'm hoping somebody can offer some insight as to why antlr 
> would *nondeterministically* report lexer ambiguity warnings. 
> That is to say, when I run the following commands:
...

From lgcraymer at yahoo.com  Wed Sep 19 10:12:44 2007
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Wed, 19 Sep 2007 10:12:44 -0700 (PDT)
Subject: [antlr-interest] Ambiguity error in lexer generation
In-Reply-To: <BAY124-W42E61B4C24B7C580F32005DEB90@phx.gbl>
Message-ID: <944998.86694.qm@web55910.mail.re3.yahoo.com>

You have a probable error and two warnings here:
1.)  The analysis failure is probably an error issued
as a warning.  You might have to disambiguate with a
synpred.
2.) The two "disabled alternative" warnings tell you
that 'v' will be recognized as T22 and 'g' will be
recognized as T16.  This is the type of resolution
that you were looking for.

--Loring

--- Alex Kinneer <kinneera at hotmail.com> wrote:

> 
> I'm hoping somebody can offer some insight as to why
> antlr would *nondeterministically* report lexer
> ambiguity warnings. That is to say, when I run the
> following commands:
> 
> rm TestLang__.g
> rm *.class;
> java org.antlr.Tool TestLang.g
> 
> It sometimes, but not always, generates warnings of
> this sort:
> 
> warning(205): TestLang.g:1:8: ANTLR could not
> analyze this decision in rule Tokens; often this is
> because of recursive rule references visible from
> the left edge of alternatives. ANTLR will re-analyze
> the decision with a fixed lookahead of k=1. Consider
> using "options {k=1;}" for that decision and
> possibly adding a syntactic predicate.
> warning(209): TestLang.g:20:1: Multiple token rules
> can match input such as "'v'": T22, T24, T25,
> UNQUOTED_STRING, JAVA_ID
> As a result, tokens(s)
> JAVA_ID,UNQUOTED_STRING,T24,T25 were disabled for
> that input
> warning(209): TestLang.g:13:1: Multiple token rules
> can match input such as "'g'": T16, T18,
> UNQUOTED_STRING, JAVA_ID
> ...
> 
> 
> It is primarily the inconsistent reporting of these
> warnings that is very perplexing to me. There's also
> nothing obvious to me in the grammar that should be
> causing the warnings. There is a generic Java
> identifier lexer rule that could cause an ambiguity
> with a set of keywords, but it is my understanding
> that antlr should be able to resolve this ambiguity
> (by giving preference to the keywords). The unquoted
> string rule has a semantic predicate that should
> prevent ambiguity.
> 
> Thanks,
> Alex
> 
>
_________________________________________________________________
> Gear up for Halo? 3 with free downloads and an
> exclusive offer. It?s our way of saying thanks for
> using Windows Live?.
>
http://gethalo3gear.com?ocid=SeptemberWLHalo3_WLHMTxt_2



      ____________________________________________________________________________________
Fussy? Opinionated? Impossible to please? Perfect.  Join Yahoo!'s user panel and lay it on us. http://surveylink.yahoo.com/gmrs/yahoo_panel_invite.asp?a=7 


From kinneera at hotmail.com  Wed Sep 19 10:55:10 2007
From: kinneera at hotmail.com (Alex Kinneer)
Date: Wed, 19 Sep 2007 10:55:10 -0700
Subject: [antlr-interest] Ambiguity error in lexer generation
In-Reply-To: <944998.86694.qm@web55910.mail.re3.yahoo.com>
References: <BAY124-W42E61B4C24B7C580F32005DEB90@phx.gbl>
	<944998.86694.qm@web55910.mail.re3.yahoo.com>
Message-ID: <BAY124-W51DE702CDA010097AD5D76DEB90@phx.gbl>

I understand the warnings (at least I'm pretty sure I do), but I'm still not clear on why they are being reported, and more importantly why they are not being reported consistently. What I am trying to emphasize is that if I run antlr on the same grammar file multiple times, I sometimes get these warnings, and sometimes don't. And that seems like a bug to me. Either the lexer rules are ambiguous, or they aren't, right? So why would it sometimes say they are and sometimes not, when I'm just running antlr on the exact same grammar?
 
More importantly, I don't think the lexer rules even are ambiguous, except to the extent that antlr advertises it can resolve automatically without warning. For example, as best I can tell, the grammar doesn't specify anything more ambiguous than what the Java 1.5 grammar for antlr 3.0 does (e.g. how does antlr distinguish the keyword 'class' from an Identifier in that grammar), yet the Java 1.5 grammar doesn't seem to produce any warnings (at least in that regard).
 
-Alex



> Date: Wed, 19 Sep 2007 10:12:44 -0700> From: lgcraymer at yahoo.com> Subject: Re: [antlr-interest] Ambiguity error in lexer generation> To: kinneera at hotmail.com; antlr-interest at antlr.org> > You have a probable error and two warnings here:> 1.) The analysis failure is probably an error issued> as a warning. You might have to disambiguate with a> synpred.> 2.) The two "disabled alternative" warnings tell you> that 'v' will be recognized as T22 and 'g' will be> recognized as T16. This is the type of resolution> that you were looking for.> > --Loring> > --- Alex Kinneer <kinneera at hotmail.com> wrote:> > > > > I'm hoping somebody can offer some insight as to why> > antlr would *nondeterministically* report lexer> > ambiguity warnings. That is to say, when I run the> > following commands:> > > > rm TestLang__.g> > rm *.class;> > java org.antlr.Tool TestLang.g> > > > It sometimes, but not always, generates warnings of> > this sort:> > > > warning(205): TestLang.g:1:8: ANTLR could not> > analyze this decision in rule Tokens; often this is> > because of recursive rule references visible from> > the left edge of alternatives. ANTLR will re-analyze> > the decision with a fixed lookahead of k=1. Consider> > using "options {k=1;}" for that decision and> > possibly adding a syntactic predicate.> > warning(209): TestLang.g:20:1: Multiple token rules> > can match input such as "'v'": T22, T24, T25,> > UNQUOTED_STRING, JAVA_ID> > As a result, tokens(s)> > JAVA_ID,UNQUOTED_STRING,T24,T25 were disabled for> > that input> > warning(209): TestLang.g:13:1: Multiple token rules> > can match input such as "'g'": T16, T18,> > UNQUOTED_STRING, JAVA_ID> > ...> > > > > > It is primarily the inconsistent reporting of these> > warnings that is very perplexing to me. There's also> > nothing obvious to me in the grammar that should be> > causing the warnings. There is a generic Java> > identifier lexer rule that could cause an ambiguity> > with a set of keywords, but it is my understanding> > that antlr should be able to resolve this ambiguity> > (by giving preference to the keywords). The unquoted> > string rule has a semantic predicate that should> > prevent ambiguity.> > > > Thanks,> > Alex> > > >> _________________________________________________________________> > Gear up for Halo? 3 with free downloads and an> > exclusive offer. It?s our way of saying thanks for> > using Windows Live?.> >> http://gethalo3gear.com?ocid=SeptemberWLHalo3_WLHMTxt_2> > > > ____________________________________________________________________________________> Fussy? Opinionated? Impossible to please? Perfect. Join Yahoo!'s user panel and lay it on us. http://surveylink.yahoo.com/gmrs/yahoo_panel_invite.asp?a=7 > 
_________________________________________________________________
Capture your memories in an online journal!
http://www.reallivemoms.com?ocid=TXT_TAGHM&loc=us
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070919/ee4b46cb/attachment.html 

From manas_482002 at yahoo.co.in  Wed Sep 19 12:23:58 2007
From: manas_482002 at yahoo.co.in (pune_manas@yahoo.com)
Date: Wed, 19 Sep 2007 20:23:58 +0100 (BST)
Subject: [antlr-interest] Multiple Grammars
Message-ID: <364646.15602.qm@web8315.mail.in.yahoo.com>

Hi
  Could anybody tell me if I can combine more than one grammars in one Java Parser code. If this is possible then how can we do it?
  Like I write one grammar for operation A and another for operation B and I want to combine them in single java project. And in the execution of test.java if I give any expression for either of the grammar it should work.
  Is this possible?
   
  Manas

       
---------------------------------
 Meet people who discuss and share your passions.  Join them now.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070919/1cc5cdb3/attachment.html 

From lgcraymer at yahoo.com  Wed Sep 19 13:21:05 2007
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Wed, 19 Sep 2007 13:21:05 -0700 (PDT)
Subject: [antlr-interest] Ambiguity error in lexer generation
In-Reply-To: <BAY124-W51DE702CDA010097AD5D76DEB90@phx.gbl>
Message-ID: <655643.99685.qm@web55912.mail.re3.yahoo.com>

Hmm.  ANTLR _is_ deterministic, so I suspect that not
getting error messages is due to losing them en route
to the display or not getting flushed on exit, not due
to different ANTLR behaviors.

--Loring

--- Alex Kinneer <kinneera at hotmail.com> wrote:

> I understand the warnings (at least I'm pretty sure
> I do), but I'm still not clear on why they are being
> reported, and more importantly why they are not
> being reported consistently. What I am trying to
> emphasize is that if I run antlr on the same grammar
> file multiple times, I sometimes get these warnings,
> and sometimes don't. And that seems like a bug to
> me. Either the lexer rules are ambiguous, or they
> aren't, right? So why would it sometimes say they
> are and sometimes not, when I'm just running antlr
> on the exact same grammar?
>  
> More importantly, I don't think the lexer rules even
> are ambiguous, except to the extent that antlr
> advertises it can resolve automatically without
> warning. For example, as best I can tell, the
> grammar doesn't specify anything more ambiguous than
> what the Java 1.5 grammar for antlr 3.0 does (e.g.
> how does antlr distinguish the keyword 'class' from
> an Identifier in that grammar), yet the Java 1.5
> grammar doesn't seem to produce any warnings (at
> least in that regard).
>  
> -Alex
> 
> 
> 
> > Date: Wed, 19 Sep 2007 10:12:44 -0700> From:
> lgcraymer at yahoo.com> Subject: Re: [antlr-interest]
> Ambiguity error in lexer generation> To:
> kinneera at hotmail.com; antlr-interest at antlr.org> >
> You have a probable error and two warnings here:>
> 1.) The analysis failure is probably an error
> issued> as a warning. You might have to disambiguate
> with a> synpred.> 2.) The two "disabled alternative"
> warnings tell you> that 'v' will be recognized as
> T22 and 'g' will be> recognized as T16. This is the
> type of resolution> that you were looking for.> >
> --Loring> > --- Alex Kinneer <kinneera at hotmail.com>
> wrote:> > > > > I'm hoping somebody can offer some
> insight as to why> > antlr would
> *nondeterministically* report lexer> > ambiguity
> warnings. That is to say, when I run the> >
> following commands:> > > > rm TestLang__.g> > rm
> *.class;> > java org.antlr.Tool TestLang.g> > > > It
> sometimes, but not always, generates warnings of> >
> this sort:> > > > warning(205): TestLang.g:1:8:
> ANTLR could not> > analyze this decision in rule
> Tokens; often this is> > because of recursive rule
> references visible from> > the left edge of
> alternatives. ANTLR will re-analyze> > the decision
> with a fixed lookahead of k=1. Consider> > using
> "options {k=1;}" for that decision and> > possibly
> adding a syntactic predicate.> > warning(209):
> TestLang.g:20:1: Multiple token rules> > can match
> input such as "'v'": T22, T24, T25,> >
> UNQUOTED_STRING, JAVA_ID> > As a result, tokens(s)>
> > JAVA_ID,UNQUOTED_STRING,T24,T25 were disabled for>
> > that input> > warning(209): TestLang.g:13:1:
> Multiple token rules> > can match input such as
> "'g'": T16, T18,> > UNQUOTED_STRING, JAVA_ID> > ...>
> > > > > > It is primarily the inconsistent reporting
> of these> > warnings that is very perplexing to me.
> There's also> > nothing obvious to me in the grammar
> that should be> > causing the warnings. There is a
> generic Java> > identifier lexer rule that could
> cause an ambiguity> > with a set of keywords, but it
> is my understanding> > that antlr should be able to
> resolve this ambiguity> > (by giving preference to
> the keywords). The unquoted> > string rule has a
> semantic predicate that should> > prevent
> ambiguity.> > > > Thanks,> > Alex> > > >>
>
_________________________________________________________________>
> > Gear up for Halo? 3 with free downloads and an> >
> exclusive offer. It?s our way of saying thanks for>
> > using Windows Live?.> >>
>
http://gethalo3gear.com?ocid=SeptemberWLHalo3_WLHMTxt_2>
> > > >
>
____________________________________________________________________________________>
> Fussy? Opinionated? Impossible to please? Perfect.
> Join Yahoo!'s user panel and lay it on us.
>
http://surveylink.yahoo.com/gmrs/yahoo_panel_invite.asp?a=7
> > 
>
_________________________________________________________________
> Capture your memories in an online journal!
> http://www.reallivemoms.com?ocid=TXT_TAGHM&loc=us



      ____________________________________________________________________________________
Check out the hottest 2008 models today at Yahoo! Autos.
http://autos.yahoo.com/new_cars.html

From antlr at mirality.co.nz  Wed Sep 19 21:03:12 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 20 Sep 2007 16:03:12 +1200
Subject: [antlr-interest] Ambiguity error in lexer generation
In-Reply-To: <BAY124-W42E61B4C24B7C580F32005DEB90@phx.gbl>
References: <BAY124-W42E61B4C24B7C580F32005DEB90@phx.gbl>
Message-ID: <20070920040310.674F211E9C6@www.antlr.org>

At 03:57 20/09/2007, Alex Kinneer wrote:
 >warning(205): TestLang.g:1:8: ANTLR could not analyze this 
decision
 >in rule Tokens; often this is because of recursive rule 
references
 >visible from the left edge of alternatives. ANTLR will 
re-analyze
 >the decision with a fixed lookahead of k=1. Consider using 
"options
 >{k=1;}" for that decision and possibly adding a syntactic
 >predicate.

Are you sure you don't have any left-recursion in the grammar?

 >warning(209): TestLang.g:20:1: Multiple token rules can match 
input
 >such as "'v'": T22, T24, T25, UNQUOTED_STRING, JAVA_ID
 >As a result, tokens(s) JAVA_ID,UNQUOTED_STRING,T24,T25 were
 >disabled for that input
 >warning(209): TestLang.g:13:1: Multiple token rules can match 
input
 >such as "'g'": T16, T18, UNQUOTED_STRING, JAVA_ID
 >...

Maybe this is just inconsistent naming, but why would 
UNQUOTED_STRING or JAVA_ID be a candidate match for something in 
single quotes?  Something seems wrong here.

(Yes, I know that this isn't answering your original 
question.  But I think these are worth looking into as well.)


From matthew.bowman at sogotech.com  Thu Sep 20 00:31:40 2007
From: matthew.bowman at sogotech.com (Matthew Bowman)
Date: Thu, 20 Sep 2007 10:31:40 +0300
Subject: [antlr-interest] Lexer Token Rewrite/Alias
Message-ID: <46F221DC.7050509@sogotech.com>

Here's a simple grammar

--- BEGIN Alias.g ---

grammar Alias;

options { output=AST; }
tokens { FUNC;}

expr
    : func (PLUS^ func)*
    ;

func
    : ( f=FOO | f=BAR ) LPAREN NUMBER RPAREN -> ^(FUNC $f NUMBER)
    | ALIAS -> ^(FUNC FOO ZERO)
    ;

PLUS : '+';
FOO : 'foo';
BAR : 'bar';
LPAREN : '(';
RPAREN : ')';

NUMBER : DIGIT+;
fragment
DIGIT    : '0'..'9';

ZERO    : '0';
ALIAS    : 'f';

WS  : (' '|'\r'|'\t'|'\u000C'|'\n')+ {$channel=HIDDEN;};

--- END Alias.g ---

This supports simple foo/bar "function" calls that take numerical 
arguments. What I'm trying to accomplish is the ability to alias 
function calls like 'f' = 'foo(0)'; With this grammar I get the AST 
output as follows:

foo(0) + bar(1) -> (+ (FUNC foo 1) (FUNC bar 2))
f + bar(2) -> (+ (FUNC FOO ZERO) (FUNC bar 2)) *

* I would like to see (+ (FUNC foo 0) (FUNC bar 2))

1st question is if something like this is even possible? If yes, 2nd 
question would be how?

I've been fiddling with this for some time now and have yet to manage to 
find a solution :( I'm not sure but would TokenRewriteStream be 
applicable? Basically whenever I encounter the ALIAS token, replace it 
in the stream with the tokens FOO='foo' LPAREN='(' NUMBER='0' RPAREN=')' 
in that order. This would allow me to just lex the ALIAS token, but the 
parser rules would never have to worry about seeing the ALIAS token as 
it would simply see the other set of tokens?

Thanks in advance!

-- 
Matthew Bowman


From jimi at temporal-wave.com  Thu Sep 20 02:46:08 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 20 Sep 2007 10:46:08 +0100
Subject: [antlr-interest] Ambiguity error in lexer generation
In-Reply-To: <BAY124-W51DE702CDA010097AD5D76DEB90@phx.gbl>
References: <BAY124-W42E61B4C24B7C580F32005DEB90@phx.gbl>	<944998.86694.qm@web55910.mail.re3.yahoo.com>
	<BAY124-W51DE702CDA010097AD5D76DEB90@phx.gbl>
Message-ID: <BAY130-DS1C8C0D5C6CB8FD5A523B486BA0@phx.gbl>

It is likely that they ARE consistently reported, but they are not
consistently making it to the screen, in the Netbeans IDE output - why don't
you try running it from the command line? Also, are you sure you are not
making any changes at all to the lexer?

 

Many times, you may feel that you have disambiguated with a synpred, but you
haven't - this is especially the case if your lexer rule has only one
alternative - antlr will say that as there is only the one alternative,
there is no point in using the synpred and ignore it. You need to combine
the things you are trying to disambiguate into the one rule with a common
leadin and then you probably won't need the synpred anyway.

 

It sounds to me like your rule for unquoted string is the same as the one
for identifier, but unless you publish it for us, we can't really help
beyond that.

 

Jim

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Alex Kinneer
Sent: 19 September 2007 18:55
To: Loring Craymer; antlr-interest at antlr.org
Subject: Re: [antlr-interest] Ambiguity error in lexer generation

 


I understand the warnings (at least I'm pretty sure I do), but I'm still not
clear on why they are being reported, and more importantly why they are not
being reported consistently. What I am trying to emphasize is that if I run
antlr on the same grammar file multiple times, I sometimes get these
warnings, and sometimes don't. And that seems like a bug to me. Either the
lexer rules are ambiguous, or they aren't, right? So why would it sometimes
say they are and sometimes not, when I'm just running antlr on the exact
same grammar?
 
More importantly, I don't think the lexer rules even are ambiguous, except
to the extent that antlr advertises it can resolve automatically without
warning. For example, as best I can tell, the grammar doesn't specify
anything more ambiguous than what the Java 1.5 grammar for antlr 3.0 does
(e.g. how does antlr distinguish the keyword 'class' from an Identifier in
that grammar), yet the Java 1.5 grammar doesn't seem to produce any warnings
(at least in that regard).
 
-Alex



  _____  


> Date: Wed, 19 Sep 2007 10:12:44 -0700
> From: lgcraymer at yahoo.com
> Subject: Re: [antlr-interest] Ambiguity error in lexer generation
> To: kinneera at hotmail.com; antlr-interest at antlr.org
> 
> You have a probable error and two warnings here:
> 1.) The analysis failure is probably an error issued
> as a warning. You might have to disambiguate with a
> synpred.
> 2.) The two "disabled alternative" warnings tell you
> that 'v' will be recognized as T22 and 'g' will be
> recognized as T16. This is the type of resolution
> that you were looking for.
> 
> --Loring
> 
> --- Alex Kinneer <kinneera at hotmail.com> wrote:
> 
> > 
> > I'm hoping somebody can offer some insight as to why
> > antlr would *nondeterministically* report lexer
> > ambiguity warnings. That is to say, when I run the
> > following commands:
> > 
> > rm TestLang__.g
> > rm *.class;
> > java org.antlr.Tool TestLang.g
> > 
> > It sometimes, but not always, generates warnings of
> > this sort:
> > 
> > warning(205): TestLang.g:1:8: ANTLR could not
> > analyze this decision in rule Tokens; often this is
> > because of recursive rule references visible from
> > the left edge of alternatives. ANTLR will re-analyze
> > the decision with a fixed lookahead of k=1. Consider
> > using "options {k=1;}" for that decision and
> > possibly adding a syntactic predicate.
> > warning(209): TestLang.g:20:1: Multiple token rules
> > can match input such as "'v'": T22, T24, T25,
> > UNQUOTED_STRING, JAVA_ID
> > As a result, tokens(s)
> > JAVA_ID,UNQUOTED_STRING,T24,T25 were disabled for
> > that input
> > warning(209): TestLang.g:13:1: Multiple token rules
> > can match input such as "'g'": T16, T18,
> > UNQUOTED_STRING, JAVA_ID
> > ...
> > 
> > 
> > It is primarily the inconsistent reporting of these
> > warnings that is very perplexing to me. There's also
> > nothing obvious to me in the grammar that should be
> > causing the warnings. There is a generic Java
> > identifier lexer rule that could cause an ambiguity
> > with a set of keywords, but it is my understanding
> > that antlr should be able to resolve this ambiguity
> > (by giving preference to the keywords). The unquoted
> > string rule has a semantic predicate that should
> > prevent ambiguity.
> > 
> > Thanks,
> > Alex
> > 
> >
> _________________________________________________________________
> > Gear up for HaloR 3 with free downloads and an
> > exclusive offer. It's our way of saying thanks for
> > using Windows LiveT.
> >
> http://gethalo3gear.com?ocid=SeptemberWLHalo3_WLHMTxt_2
> 
> 
> 
>
____________________________________________________________________________
________
> Fussy? Opinionated? Impossible to please? Perfect. Join Yahoo!'s user
panel and lay it on us.
http://surveylink.yahoo.com/gmrs/yahoo_panel_invite.asp?a=7 
> 



  _____  

Make your little one a shining star! Shine
<http://www.reallivemoms.com?ocid=TXT_TAGHM&loc=us>  on!

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070920/6a4307dc/attachment-0001.html 

From atif.azad at hotmail.com  Thu Sep 20 07:32:12 2007
From: atif.azad at hotmail.com (atif azad)
Date: Thu, 20 Sep 2007 19:32:12 +0500
Subject: [antlr-interest] query about tree grammers
Message-ID: <BLU105-F2371CD2E56B1A732DD8A0AE5BA0@phx.gbl>

Hello Dears

I have a question a bout tree grammers.
For a rule in tree grammer , is there any limitation on the number of 
alternatives which can be used while rewriting or we can put as many 
alternatioves as we want in any single rue.


Regards
Azad , Atif

_________________________________________________________________
Express yourself instantly with MSN Messenger! Download today it's FREE! 
http://messenger.msn.click-url.com/go/onm00200471ave/direct/01/


From Stephen.Hardy at digi.com  Thu Sep 20 09:13:59 2007
From: Stephen.Hardy at digi.com (Hardy, Stephen)
Date: Thu, 20 Sep 2007 09:13:59 -0700
Subject: [antlr-interest] Ambiguity error in lexer generation
In-Reply-To: <BAY130-DS1C8C0D5C6CB8FD5A523B486BA0@phx.gbl>
Message-ID: <62BABE024B7C074E9194E9727A418979C4F09A@dvs-sms-mail01.digi.com>

I really think this is a problem with NetBeans.  I have a known good
grammar i.e. it compiles with a limited number of warnings using ANTLR
from the command line, and usually the same warnings when run from
NetBeans, however NetBeans sometimes gets its knickers in a twist for no
apparent reason.  The symptom of this is that ANTLR suddenly generate a
gazillion warnings and/or errors.

I strongly suspect memory corruption.  Often, the problem will resolve
itself if I do nothing but rebuild (i.e. press F6 *again* without making
any source changes -- as mentioned in a previous post, I have a special
ANT rule for running ANTLR, but it is a dumb rule which always runs it
whether needed or not).  At other times, given this error, I have to
bounce NetBeans to restore sanity.

Regards,
SJH


> -----Original Message-----
> From: antlr-interest-bounces at antlr.org 
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jim Idle
> Sent: Thursday, September 20, 2007 2:46 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Ambiguity error in lexer generation
> 
> It is likely that they ARE consistently reported, but they 
> are not consistently making it to the screen, in the Netbeans 
> IDE output - why don't you try running it from the command 
> line? Also, are you sure you are not making any changes at 
> all to the lexer?
> 
>  
> 
> Many times, you may feel that you have disambiguated with a 
> synpred, but you haven't - this is especially the case if 
> your lexer rule has only one alternative - antlr will say 
> that as there is only the one alternative, there is no point 
> in using the synpred and ignore it. You need to combine the 
> things you are trying to disambiguate into the one rule with 
> a common leadin and then you probably won't need the synpred anyway.
> 
>  
> 
> It sounds to me like your rule for unquoted string is the 
> same as the one for identifier, but unless you publish it for 
> us, we can't really help beyond that.
> 
>  
> 
> Jim
> 
>  
> 
> From: antlr-interest-bounces at antlr.org 
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Alex Kinneer
> Sent: 19 September 2007 18:55
> To: Loring Craymer; antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Ambiguity error in lexer generation
> 
>  
> 
> 
> I understand the warnings (at least I'm pretty sure I do), 
> but I'm still not clear on why they are being reported, and 
> more importantly why they are not being reported 
> consistently. What I am trying to emphasize is that if I run 
> antlr on the same grammar file multiple times, I sometimes 
> get these warnings, and sometimes don't. And that seems like 
> a bug to me. Either the lexer rules are ambiguous, or they 
> aren't, right? So why would it sometimes say they are and 
> sometimes not, when I'm just running antlr on the exact same grammar?
>  
> More importantly, I don't think the lexer rules even are 
> ambiguous, except to the extent that antlr advertises it can 
> resolve automatically without warning. For example, as best I 
> can tell, the grammar doesn't specify anything more ambiguous 
> than what the Java 1.5 grammar for antlr 3.0 does (e.g. how 
> does antlr distinguish the keyword 'class' from an Identifier 
> in that grammar), yet the Java 1.5 grammar doesn't seem to 
> produce any warnings (at least in that regard).
>  
> -Alex

From kinneera at hotmail.com  Thu Sep 20 09:34:01 2007
From: kinneera at hotmail.com (Alex Kinneer)
Date: Thu, 20 Sep 2007 09:34:01 -0700
Subject: [antlr-interest] Ambiguity error in lexer generation
In-Reply-To: <BAY0-MC12-F438Hs0Du00233e82@bay0-mc12-f4.bay0.hotmail.com>
References: <BAY124-W42E61B4C24B7C580F32005DEB90@phx.gbl>
	<BAY0-MC12-F438Hs0Du00233e82@bay0-mc12-f4.bay0.hotmail.com>
Message-ID: <BAY124-W89BC9FA9C79A808FB1987DEBA0@phx.gbl>

I will post the grammar in response to the next message on the thread, so you will see there is definitely no left recursion (there isn't any recursion at all, actually).
 
The single quotes are just misleading antlr output -- none of the rules have anything to do with single quotes (well, technically the UNQUOTED_STRING rule will accept them, but it's definitely unambiguous there).  There are a set of implicit literal tokens (defined in the grammar rules), so it is just warning that the first character of some (all) of those tokens/keywords can also be matched by the JAVA_ID rule (and the UNQUOTED_STRING rule if the predicate is satisfied).  For some reason, it feels the need to put the character in single quotes, probably because there's no symbolic name for the token in the grammar.> (Yes, I know that this isn't answering your original > question. But I think these are worth looking into as well.)
No problem.
 
 



> Date: Thu, 20 Sep 2007 16:03:12 +1200> To: kinneera at hotmail.com; antlr-interest at antlr.org> From: antlr at mirality.co.nz> Subject: Re: [antlr-interest] Ambiguity error in lexer generation> > At 03:57 20/09/2007, Alex Kinneer wrote:> >warning(205): TestLang.g:1:8: ANTLR could not analyze this > decision> >in rule Tokens; often this is because of recursive rule > references> >visible from the left edge of alternatives. ANTLR will > re-analyze> >the decision with a fixed lookahead of k=1. Consider using > "options> >{k=1;}" for that decision and possibly adding a syntactic> >predicate.> > Are you sure you don't have any left-recursion in the grammar?> > >warning(209): TestLang.g:20:1: Multiple token rules can match > input> >such as "'v'": T22, T24, T25, UNQUOTED_STRING, JAVA_ID> >As a result, tokens(s) JAVA_ID,UNQUOTED_STRING,T24,T25 were> >disabled for that input> >warning(209): TestLang.g:13:1: Multiple token rules can match > input> >such as "'g'": T16, T18, UNQUOTED_STRING, JAVA_ID> >...> > Maybe this is just inconsistent naming, but why would > UNQUOTED_STRING or JAVA_ID be a candidate match for something in > single quotes? Something seems wrong here.> > (Yes, I know that this isn't answering your original > question. But I think these are worth looking into as well.)> 
_________________________________________________________________
Kick back and relax with hot games and cool activities at the Messenger Caf?.
http://www.cafemessenger.com?ocid=TXT_TAGLM_SeptWLtagline
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070920/15e6603e/attachment.html 

From kinneera at hotmail.com  Thu Sep 20 09:51:31 2007
From: kinneera at hotmail.com (Alex Kinneer)
Date: Thu, 20 Sep 2007 09:51:31 -0700
Subject: [antlr-interest] Ambiguity error in lexer generation
In-Reply-To: <BAY130-DS1C8C0D5C6CB8FD5A523B486BA0@phx.gbl>
References: <BAY124-W42E61B4C24B7C580F32005DEB90@phx.gbl>
	<944998.86694.qm@web55910.mail.re3.yahoo.com>
	<BAY124-W51DE702CDA010097AD5D76DEB90@phx.gbl> 
	<BAY130-DS1C8C0D5C6CB8FD5A523B486BA0@phx.gbl>  
Message-ID: <BAY124-W2102282A2A7C9F4FE06D28DEBA0@phx.gbl>








It is likely that they ARE consistently reported, but they are not consistently making it to the screen, in the Netbeans IDE output ? why don?t you try running it from the command line? Also, are you sure you are not making any changes at all to the lexer?
I'm editing the grammar in a text editor, and running antlr from a command line (linux/bash). I was never using NetBeans. So if it is the case that the output just isn't getting flushed somewhere, it is definitely a problem in somewhere in the output handling of antlr itself.

Many times, you may feel that you have disambiguated with a synpred, but you haven?t ? this is especially the case if your lexer rule has only one alternative ? antlr will say that as there is only the one alternative, there is no point in using the synpred and ignore it. You need to combine the things you are trying to disambiguate into the one rule with a common leadin and then you probably won?t need the synpred anyway.
The rule for UNQUOTED_STRING has a semantic predicate, not a syntactic predicate. I'll explain a bit more below.

It sounds to me like your rule for unquoted string is the same as the one for identifier, but unless you publish it for us, we can?t really help beyond that.
 
Jim
Below is the grammar (I have done a bit of name mangling in the grammar rules, but I have confirmed that it produces the same warnings/errors). Of course, it is really only a fragment of the intended final grammar, but it's enough to illustrate where I got stuck. The UNQUOTED_STRING rule is really only there to handle legacy input. Basically, the idea is that on certain tokens, it bumps up the counter to permit a certain number of subsequent tokens matching UNQUOTED_STRING to be read in (usually only one). Really, wherever this is done, it should have just required quoted strings, but it needs to support existing files (at least for now), which may not have used that convention.  Everything else is pretty routine (at least to my understanding) -- some keywords that (I thought antlr should deal with ensuring) take precedence over JAVA_IDs (borrowed from the Java 1.5 grammar).
 
> grammar TestLang;> > @lexer::members {> private int anyStringMatchCnt = 0;> }> > ///////////////////////////////////////////////////////////////////////////////> // Parser> > parse> : kanseicnwltHnsdt+ ;> > kanseicnwltHnsdt> : ('+' | '!') jwtntDecl> ;> > jwtntDecl> : nyg_saaevd__decl> | cnsiwnvhw_saaevd__decl> | cnsiwnvhw_ansucj__decl> | gwo_sxnslw__decl> | pbh_sxnslw__decl> | gwo_nsucn__decl> | pbh_nsucn__decl> | cnsiwnvhwbn_vuyw__decl> | sxnslw_vuyw__decl> | veiqncb_vuyw__decl> | iiwnvcxbw_vuyw__decl> | veiqncb_pwjncs_izsns__decl> | veiqncb_pwjncs_anse__decl> | sxnslw_pwjncs_izsns__decl> | sxnslw_pwjncs_anse__decl> | musnvbs_runslkw__decl> | musnvbs_lakwent__decl> | musnvbs_flr_paisndg__decl> | musnvbs_paisndg__decl> | tlshn__decl> | ccjed__decl> | sxnslw_yshf_izsns__decl> ;> > nyg_saaevd__decl> : 'nyg_saaevd'> ;> > cnsiwnvhw_saaevd__decl> : 'cnsiwnvhw_xlsjke'> ;> > cnsiwnvhw_ansucj__decl> : 'cnsiwnvhw_ansucj'> ;> > gwo_sxnslw__decl> : 'gwo_sxnslw'> ;> > pbh_sxnslw__decl> : 'pbh_sxnslw'> ;> > gwo_nsucn__decl> : 'gwo_nsucn'> ;> > pbh_nsucn__decl> : 'pbh_nsucn'> ;> > cnsiwnvhwbn_vuyw__decl> : 'cnsiwnvhwbn_vuyw'> ;> > sxnslw_vuyw__decl> : 'sxnslw_vuyw'> ;> > veiqncb_vuyw__decl> : 'veiqncb_vuyw'> ;> > iiwnvcxbw_vuyw__decl> : 'iiwnvcxbw_vuyw'> ;> > veiqncb_pwjncs_izsns__decl> : 'veiqncb_pwjncs_izsns'> ;> > veiqncb_pwjncs_anse__decl> : 'veiqncb_pwjncs_anse'> ;> > sxnslw_pwjncs_izsns__decl> : 'sxnslw_pwjncs_izsns'> ;> > sxnslw_pwjncs_anse__decl> : 'sxnslw_pwjncs_anse'> ;> > musnvbs_runslkw__decl> : 'musnvbs_runslkw'> ;> > musnvbs_lakwent__decl> : 'musnvbs_lakwent'> ;> > musnvbs_flr_paisndg__decl> : 'musnvbs_flr_paisndg'> ;> > musnvbs_paisndg__decl> : 'musnvbs_paisndg'> ;> > tlshn__decl> : 'tlshn'> ;> > ccjed__decl> : 'ccjed'> ;> > sxnslw_yshf_izsns__decl> : 'sxnslw_yshf_izsns'> ;> > > ///////////////////////////////////////////////////////////////////////////////> // Lexer> > WS : WS_CHARS {$channel=HIDDEN;} ;> > fragment> WS_CHARS : (' ' | '\t' | '\u000C' | '\n') ;> > LINE_COMMENT> : '//' ~('\n' | '\r')* '\r'? '\n' {$channel=HIDDEN;} ;> > fragment> LETTER> : '\u0024' |> '\u0041'..'\u005a' |> '\u005f' |> '\u0061'..'\u007a' |> '\u00c0'..'\u00d6' |> '\u00d8'..'\u00f6' |> '\u00f8'..'\u00ff' |> '\u0100'..'\u1fff' |> '\u3040'..'\u318f' |> '\u3300'..'\u337f' |> '\u3400'..'\u3d2d' |> '\u4e00'..'\u9fff' |> '\uf900'..'\ufaff'> ;> > fragment> JAVA_ID_DIGIT> : '\u0030'..'\u0039' |> '\u0660'..'\u0669' |> '\u06f0'..'\u06f9' |> '\u0966'..'\u096f' |> '\u09e6'..'\u09ef' |> '\u0a66'..'\u0a6f' |> '\u0ae6'..'\u0aef' |> '\u0b66'..'\u0b6f' |> '\u0be7'..'\u0bef' |> '\u0c66'..'\u0c6f' |> '\u0ce6'..'\u0cef' |> '\u0d66'..'\u0d6f' |> '\u0e50'..'\u0e59' |> '\u0ed0'..'\u0ed9' |> '\u1040'..'\u1049'> ;> > UNQUOTED_STRING> : {TestLangLexer.this.anyStringMatchCnt> 0}?> (~('"' | WS_CHARS))+> {TestLangLexer.this.anyStringMatchCnt--;}> ;> > JAVA_ID> : LETTER (LETTER | JAVA_ID_DIGIT)*> ;
 
 
The full error output I get (sometimes) is the following:
 
> ANTLR Parser Generator Version 3.0.1 (August 13, 2007) 1989-2007> warning(205): TestLang.g:1:8: ANTLR could not analyze this decision in rule Tokens; often this is because of recursive rule references visible from the left edge of alternatives. ANTLR will re-analyze the decision with a fixed lookahead of k=1. Consider using "options {k=1;}" for that decision and possibly adding a syntactic predicate.> warning(209): TestLang.g:20:1: Multiple token rules can match input such as "'v'": T22, T24, T25, UNQUOTED_STRING, JAVA_ID> As a result, tokens(s) JAVA_ID,UNQUOTED_STRING,T24,T25 were disabled for that input> warning(209): TestLang.g:13:1: Multiple token rules can match input such as "'g'": T16, T18, UNQUOTED_STRING, JAVA_ID> As a result, tokens(s) JAVA_ID,UNQUOTED_STRING,T18 were disabled for that input> warning(209): TestLang.g:28:1: Multiple token rules can match input such as "'c'": T14, T15, T20, T33, UNQUOTED_STRING, JAVA_ID> As a result, tokens(s) JAVA_ID,T20,UNQUOTED_STRING,T15,T33 were disabled for that input> warning(209): TestLang.g:22:1: Multiple token rules can match input such as "'s'": T21, T26, T27, T34, UNQUOTED_STRING, JAVA_ID> As a result, tokens(s) JAVA_ID,UNQUOTED_STRING,T26,T34,T27 were disabled for that input> warning(209): TestLang.g:178:1: Multiple token rules can match input such as "'t'": T32, UNQUOTED_STRING, JAVA_ID> As a result, tokens(s) JAVA_ID,UNQUOTED_STRING were disabled for that input> warning(209): TestLang.g:178:1: Multiple token rules can match input such as "'n'": T13, UNQUOTED_STRING, JAVA_ID> As a result, tokens(s) JAVA_ID,UNQUOTED_STRING were disabled for that input> warning(209): TestLang.g:178:1: Multiple token rules can match input such as "'i'": T23, UNQUOTED_STRING, JAVA_ID> As a result, tokens(s) JAVA_ID,UNQUOTED_STRING were disabled for that input> warning(209): TestLang.g:14:1: Multiple token rules can match input such as "'p'": T17, T19, UNQUOTED_STRING, JAVA_ID> As a result, tokens(s) JAVA_ID,UNQUOTED_STRING,T19 were disabled for that input> warning(209): TestLang.g:26:1: Multiple token rules can match input such as "'m'": T28, T29, T30, T31, UNQUOTED_STRING, JAVA_ID> As a result, tokens(s) JAVA_ID,UNQUOTED_STRING,T30,T29,T31 were disabled for that input> warning(208): TestLang.g:29:1: The following token definitions are unreachable: T15,T18,T19,T20,T24,T25,T26,T27,T29,T30,T31,T33,T34
 
Even more suspicious is that if I start removing the grammar productions that contain just keywords, below some number of remaining productions, it doesn't seem to generate the warnings anymore. There's no apparent correlation with the rules themselves -- it just seems to matter how many of them there are (and only some of the time). 
 

 


From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Alex KinneerSent: 19 September 2007 18:55To: Loring Craymer; antlr-interest at antlr.orgSubject: Re: [antlr-interest] Ambiguity error in lexer generation
 
I understand the warnings (at least I'm pretty sure I do), but I'm still not clear on why they are being reported, and more importantly why they are not being reported consistently. What I am trying to emphasize is that if I run antlr on the same grammar file multiple times, I sometimes get these warnings, and sometimes don't. And that seems like a bug to me. Either the lexer rules are ambiguous, or they aren't, right? So why would it sometimes say they are and sometimes not, when I'm just running antlr on the exact same grammar? More importantly, I don't think the lexer rules even are ambiguous, except to the extent that antlr advertises it can resolve automatically without warning. For example, as best I can tell, the grammar doesn't specify anything more ambiguous than what the Java 1.5 grammar for antlr 3.0 does (e.g. how does antlr distinguish the keyword 'class' from an Identifier in that grammar), yet the Java 1.5 grammar doesn't seem to produce any warnings (at least in that regard). -Alex
 
_________________________________________________________________
Capture your memories in an online journal!
http://www.reallivemoms.com?ocid=TXT_TAGHM&loc=us
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070920/8fa7ed5e/attachment-0001.html 

From tbrandonau at gmail.com  Thu Sep 20 10:21:48 2007
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Fri, 21 Sep 2007 03:21:48 +1000
Subject: [antlr-interest] Ambiguity error in lexer generation
In-Reply-To: <BAY124-W42E61B4C24B7C580F32005DEB90@phx.gbl>
References: <BAY124-W42E61B4C24B7C580F32005DEB90@phx.gbl>
Message-ID: <ebc876d70709201021h700e0714ub331eaebd7c0f810@mail.gmail.com>

On 9/20/07, Alex Kinneer <kinneera at hotmail.com> wrote:
>
> I'm hoping somebody can offer some insight as to why antlr would *nondeterministically* report lexer ambiguity warnings. That is to say, when I run the following commands:
>
> rm TestLang__.g
> rm *.class;
> java org.antlr.Tool TestLang.g
>
> It sometimes, but not always, generates warnings of this sort:
>
> warning(205): TestLang.g:1:8: ANTLR could not analyze this decision in rule Tokens; often this is because of recursive rule references visible from the left edge of alternatives. ANTLR will re-analyze the decision with a fixed lookahead of k=1. Consider using "options {k=1;}" for that decision and possibly adding a syntactic predicate.
> warning(209): TestLang.g:20:1: Multiple token rules can match input such as "'v'": T22, T24, T25, UNQUOTED_STRING, JAVA_ID
> As a result, tokens(s) JAVA_ID,UNQUOTED_STRING,T24,T25 were disabled for that input
> warning(209): TestLang.g:13:1: Multiple token rules can match input such as "'g'": T16, T18, UNQUOTED_STRING, JAVA_ID
> ...
>
>
> It is primarily the inconsistent reporting of these warnings that is very perplexing to me. There's also nothing obvious to me in the grammar that should be causing the warnings. There is a generic Java identifier lexer rule that could cause an ambiguity with a set of keywords, but it is my understanding that antlr should be able to resolve this ambiguity (by giving preference to the keywords). The unquoted string rule has a semantic predicate that should prevent ambiguity.
>
ANTLR has a timeout on DFA->NFA conversions, based on code comments it
looks like this may no longer be needed as such problems are now
detected elsewhere. But it looks like this timeout is still active and
could cause variable error messages based on general system load. Not
quite sure but it looks like a timeout may generate output similar to
that reported. Try adding the -report option when calling ANTLR, if
this is what's going on then there should be details under the NFA
conversion early termination report. The -Xconversiontimeout option
controls the timeout.
If this is the case you may still want to look at modifying your
grammar as this would mean ANTLR is having problems with your grammar
and may produce some rather nasty code.
Looking at your grammar it may be an issue of the complexity of the
predictor needed to distinguish your keywords from your JAVA_ID rule
given the large number of keywords and the complicated character
ranges in the LETTER and JAVA_ID_DIGIT rules. Either reducing the
complexity of your ranges (e.g. by replacing the checking done there
with semantic predicates) or replacing your keywords with an action in
JAVA_ID checking a keywords table may help.

Tom.

> Thanks,
> Alex
>
> _________________________________________________________________
> Gear up for Halo(r) 3 with free downloads and an exclusive offer. It's our way of saying thanks for using Windows Live?.
> http://gethalo3gear.com?ocid=SeptemberWLHalo3_WLHMTxt_2

From ted.villalba at gmail.com  Thu Sep 20 12:00:05 2007
From: ted.villalba at gmail.com (Ted Villalba)
Date: Thu, 20 Sep 2007 12:00:05 -0700
Subject: [antlr-interest] Parser ambiguity, predicate help?
Message-ID: <69fb4b090709201200s6504b419reac2cd1d4d87c116@mail.gmail.com>

Hi,

Thanks in advance for your time investment here.
I have an ambiguity in my parser that I'm not sure how to resolve.
I have a query language that in one instance treats some text as an
operator, and in another treats it as text.
1. SO= eats shoots and leaves //this and is treated as text
2. SO= (eats shoots and leaves) // treated as an operator

Seems whenever I can get it working for one, I break the other. Not sure if
a predicate will fix this , but looking for some input here.
Here is the complete grammar:

grammar WQL;

options{
    output=AST;
    ASTLabelType=CommonTree;
}

tokens{ TAG; VALUE; TERMS; QUERY;} //imaginary token types

@header{
import java.util.HashMap;
}

@members {

HashMap fieldMap = new HashMap();

}





start   : ( query  {System.out.println("AST:\n"+$query.tree.toStringTree());}
)+
        ;

query   : field (BOOL_OP^ query|field)*
    | LPAREN! query RPAREN! (BOOL_OP^ query|field)*
    ;

field     : tag '=' LPAREN value RPAREN -> ^('=' tag value)
    | tag '='  terms -> ^('=' tag ^(TERMS terms) )
        | qid
        ;

value   :  value_ -> ^(VALUE value_) ;

value_  : terms  (operator^ value)*
    | LPAREN! value RPAREN! ( operator^ value)*
    ;

//keyBOOL : {input.LT(1).getText().equals("NEAR")}? terms;

tag    : WCHAR -> ^(WCHAR)
    ;

terms    : (WCHAR|boolTerm)+
    | QUOTE! (WCHAR|boolTerm)+ QUOTE! // strip QUOTEs
    ;

boolTerm: b=BOOL_OP|WOK_OP { $b.setType(WCHAR); } ;

qid     : '#'!DIGIT
        ;

operator: BOOL_OP|WOK_OP;

QUOTE    : '"';
BOOL_OP    : 'AND'|'and'|'OR'|'or'|'NOT'|'not';
WOK_OP    : 'SAME'|'same'|'NEAR'('/'DIGIT+)*|'near'('/'DIGIT+)*;
DIGIT   : ('0'..'9');
WS      : (' '|'\t'|'\r'|'\n'|'??'|'$'|'?'|'*')+ {$channel=HIDDEN;};
LPAREN    : '(' ;
RPAREN    : ')' ;
WCHAR   : ~('='|'('| ')'|'"'|' '|'\t'|'\n'|'\r'|'#'|'??')+;
//QCHAR    : ~('"')+;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070920/adff6bc9/attachment.html 

From Jeremy.Sheldon at 90degreesoftware.com  Thu Sep 20 13:17:05 2007
From: Jeremy.Sheldon at 90degreesoftware.com (Jeremy Sheldon)
Date: Thu, 20 Sep 2007 13:17:05 -0700
Subject: [antlr-interest] Antlrworks 1.1.3 hangs when generating code
Message-ID: <E50201DB165A4B4B98685715FAEE0DF0028C4C@90dsvansv07.90DegreeSoftware.com>

Hi all,

 

I'll start by saying that I've just started learning to use Antlr (and
AntlrWorks), so forgive the possible foolish questions.

 

I've got a grammar file which I'm trying to generate the code for.  When
I do this inside AntlrWorks, it seems to go on processing forever.
Looking at the output directory, the lexer appears in the directory,
however the parser does not.  'Check Grammar' runs successfully, though.

 

Given that I was not sure whether this was an issue with my grammar or
AntlrWorks, I decided to try and generate the code on the command line
(WinXP, btw).  This returned some strange (and basic-looking)
complaints:

 

Grammar\DMLSQL2>java antlr.Tool DmlSQL2.g

ANTLR Parser Generator   Version 2.7.7 (20060906)   1989-2005

DmlSQL2.g:81:1: unexpected token: grammar

error: Token stream error reading grammar(s):

DmlSQL2.g:91:1: unexpected char: '@'

DmlSQL2.g:81:1: rule grammar trapped:

DmlSQL2.g:81:1: unexpected token: grammar

TokenStreamException: unexpected char: '@'

 

I've got two questions for your collective wisdom:

1)      Has anyone else run into (or heard of) the same issue with
AntlrWorks, where it will seem to process (or loop) forever when
generating code?  Can anyone shed any light on this behavior?

2)      When running the tool from the command line, it's returning an
error with the 'grammar' token.  Is this not a basic like which is at
the top of any grammar?  I'm confused that it's complaining about such
an apparently basic part of the grammar file.

 

P.S. I was not sure if this mailing list would accept attachments, so I
did not try to attach the offending grammar.

 

Thanks for your time in advance!

Jeremy

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070920/1628d898/attachment.html 

From jaluber at gmx.de  Thu Sep 20 14:50:58 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Thu, 20 Sep 2007 23:50:58 +0200
Subject: [antlr-interest] Antlrworks 1.1.3 hangs when generating code
In-Reply-To: <E50201DB165A4B4B98685715FAEE0DF0028C4C@90dsvansv07.90DegreeSoftware.com>
References: <E50201DB165A4B4B98685715FAEE0DF0028C4C@90dsvansv07.90DegreeSoftware.com>
Message-ID: <46F2EB42.8030804@gmx.de>

Jeremy Sheldon wrote:
> Hi all,
> 
...
>
> I?ve got two questions for your collective wisdom:
> 
> 1)      Has anyone else run into (or heard of) the same issue with
> AntlrWorks, where it will seem to process (or loop) forever when
> generating code?  Can anyone shed any light on this behavior?
> 
> 2)      When running the tool from the command line, it?s returning an
> error with the ?grammar? token.  Is this not a basic like which is at
> the top of any grammar?  I?m confused that it?s complaining about such
> an apparently basic part of the grammar file.
> 
>  
> 
> P.S. I was not sure if this mailing list would accept attachments, so I
> did not try to attach the offending grammar.

I haven't seen anything like that before. Please attach your grammar
(limit is 50k) or post it in the email.

Best regards,
Johannes Luber

From jaluber at gmx.de  Thu Sep 20 14:56:39 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Thu, 20 Sep 2007 23:56:39 +0200
Subject: [antlr-interest] C# target poll
Message-ID: <46F2EC97.8000502@gmx.de>

Hello!

As being one of the new lead developers for the C# target I've run into
the following questions:

Does anyone still use C# target on the .NET 1.1 runtime? If yes, is it
impossible to switch to .NET 2.0?

If there are no objections, we possibly drop the support for .NET 1.1.

Best regards,
Johannes Luber

From chris at lambrou.net  Thu Sep 20 15:24:27 2007
From: chris at lambrou.net (Chris Lambrou)
Date: Thu, 20 Sep 2007 23:24:27 +0100
Subject: [antlr-interest] C# target poll
In-Reply-To: <46F2EC97.8000502@gmx.de>
References: <46F2EC97.8000502@gmx.de>
Message-ID: <70bbae280709201524j65801ae7vb4cb120f61c8ad9d@mail.gmail.com>

I may be wrong about this, but I seem to recall that Silverlight only
supports .NET 1.1, rather than 2.0. So there's one platform where support
only for 2.0 might be an issue. That said, I'd personally rather work with a
2.0 target than a 1.1 target.

Chris


On 20/09/2007, Johannes Luber <jaluber at gmx.de> wrote:
>
> Hello!
>
> As being one of the new lead developers for the C# target I've run into
> the following questions:
>
> Does anyone still use C# target on the .NET 1.1 runtime? If yes, is it
> impossible to switch to .NET 2.0?
>
> If there are no objections, we possibly drop the support for .NET 1.1.
>
> Best regards,
> Johannes Luber
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070920/92024fbd/attachment.html 

From ted.villalba at gmail.com  Thu Sep 20 16:05:31 2007
From: ted.villalba at gmail.com (Ted Villalba)
Date: Thu, 20 Sep 2007 16:05:31 -0700
Subject: [antlr-interest] Parser ambiguity, predicate help?
In-Reply-To: <69fb4b090709201200s6504b419reac2cd1d4d87c116@mail.gmail.com>
References: <69fb4b090709201200s6504b419reac2cd1d4d87c116@mail.gmail.com>
Message-ID: <69fb4b090709201605t560420edv682e1737573c512f@mail.gmail.com>

Hi,
For posterity, I think I fixed this by adding another rule specifically to
separate terms that occurred between parenthesis from those that occurred
outside parenthesis.
This new addition seemed to fix the parsing.

So:

start   : (query)+
        ;

query   : field (BOOL_OP^ query|field)*
        | LPAREN! query RPAREN! (BOOL_OP^ query|field)*
        ;

field     : tag '=' LPAREN value RPAREN -> ^('=' tag value)
        | tag '=' terms+ -> ^('=' tag ^(TERMS terms+))
        | qid
        ;

value   :  value_ -> ^(VALUE value_) ;

value_  : vterms+ (operator^ value)*
        | LPAREN! value RPAREN! ( operator^ value)*
        ;

tag        : WCHAR -> ^(WCHAR)
        ;

terms    : (WCHAR|boolTerm)+
        | QUOTE! (WCHAR|boolTerm)+ QUOTE!  // strip QUOTEs
        ;

vterms    : WCHAR+ -> ^(TERMS WCHAR+)
        | QUOTE (WCHAR)+ QUOTE -> ^(TERMS WCHAR+)// strip QUOTEs
        | QUOTE (boolTerm)+ QUOTE -> ^(TERMS boolTerm+)// strip QUOTEs
        ;



Thank you,
Ted

On 9/20/07, Ted Villalba <ted.villalba at gmail.com> wrote:
>
> Hi,
>
> Thanks in advance for your time investment here.
> I have an ambiguity in my parser that I'm not sure how to resolve.
> I have a query language that in one instance treats some text as an
> operator, and in another treats it as text.
> 1. SO= eats shoots and leaves //this and is treated as text
> 2. SO= (eats shoots and leaves) // treated as an operator
>
> Seems whenever I can get it working for one, I break the other. Not sure
> if a predicate will fix this , but looking for some input here.
> Here is the complete grammar:
>
> grammar WQL;
>
> options{
>     output=AST;
>     ASTLabelType=CommonTree;
> }
>
> tokens{ TAG; VALUE; TERMS; QUERY;} //imaginary token types
>
> @header{
> import java.util.HashMap ;
> }
>
> @members {
>
> HashMap fieldMap = new HashMap();
>
> }
>
>
>
>
>
> start   : ( query  {System.out.println("AST:\n"+$query.tree.toStringTree());}
> )+
>         ;
>
> query   : field (BOOL_OP^ query|field)*
>     | LPAREN! query RPAREN! (BOOL_OP^ query|field)*
>     ;
>
> field     : tag '=' LPAREN value RPAREN -> ^('=' tag value)
>     | tag '='  terms -> ^('=' tag ^(TERMS terms) )
>         | qid
>         ;
>
> value   :  value_ -> ^(VALUE value_) ;
>
> value_  : terms  (operator^ value)*
>     | LPAREN! value RPAREN! ( operator^ value)*
>     ;
>
> //keyBOOL : {input.LT(1).getText().equals("NEAR")}? terms;
>
> tag    : WCHAR -> ^(WCHAR)
>     ;
>
> terms    : (WCHAR|boolTerm)+
>     | QUOTE! (WCHAR|boolTerm)+ QUOTE! // strip QUOTEs
>     ;
>
> boolTerm: b=BOOL_OP|WOK_OP { $b.setType(WCHAR); } ;
>
> qid     : '#'!DIGIT
>         ;
>
> operator: BOOL_OP|WOK_OP;
>
> QUOTE    : '"';
> BOOL_OP    : 'AND'|'and'|'OR'|'or'|'NOT'|'not';
> WOK_OP    : 'SAME'|'same'|'NEAR'('/'DIGIT+)*|'near'('/'DIGIT+)*;
> DIGIT   : ('0'..'9');
> WS      : (' '|'\t'|'\r'|'\n'|'??'|'$'|'?'|'*')+ {$channel=HIDDEN;};
> LPAREN    : '(' ;
> RPAREN    : ')' ;
> WCHAR   : ~('='|'('| ')'|'"'|' '|'\t'|'\n'|'\r'|'#'|'??')+;
> //QCHAR    : ~('"')+;
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070920/0707b415/attachment-0001.html 

From vbar at comp.cz  Thu Sep 20 23:18:48 2007
From: vbar at comp.cz (Vaclav Barta)
Date: Fri, 21 Sep 2007 08:18:48 +0200
Subject: [antlr-interest] C# target poll
In-Reply-To: <70bbae280709201524j65801ae7vb4cb120f61c8ad9d@mail.gmail.com>
References: <46F2EC97.8000502@gmx.de>
	<70bbae280709201524j65801ae7vb4cb120f61c8ad9d@mail.gmail.com>
Message-ID: <200709210818.48786.vbar@comp.cz>

On Friday 21 September 2007 00:24:27 Chris Lambrou wrote:
> I may be wrong about this, but I seem to recall that Silverlight only
> supports .NET 1.1, rather than 2.0. So there's one platform where support
> only for 2.0 might be an issue. That said, I'd personally rather work with
http://silverlight.net/GetStarted/overview.aspx says Silverlight doesn't 
support generics until "1.1 Alpha September Refresh", but I really don't 
think any projects so conservative they're still using .NET 1.1 would 
consider building on Silverlight 1.0... If nobody has a counter-example, I'd 
say drop .NET 1.1 support.

	Bye
		Vasek

From kurt.haegeman at mediargus.be  Thu Sep 20 23:38:30 2007
From: kurt.haegeman at mediargus.be (Kurt Haegeman)
Date: Fri, 21 Sep 2007 08:38:30 +0200
Subject: [antlr-interest] C# target poll
In-Reply-To: <46F2EC97.8000502@gmx.de>
References: <46F2EC97.8000502@gmx.de>
Message-ID: <46F366E6.4020308@mediargus.be>

Johannes Luber wrote:
> Hello!
> 
> As being one of the new lead developers for the C# target I've run into
> the following questions:
> 
> Does anyone still use C# target on the .NET 1.1 runtime? If yes, is it
> impossible to switch to .NET 2.0?
> 
> If there are no objections, we possibly drop the support for .NET 1.1.
> 
> Best regards,
> Johannes Luber
> 

No objections.

Regards,
Kurt.

From Kruithof at jive.nl  Fri Sep 21 01:01:34 2007
From: Kruithof at jive.nl (Nico Kruithof)
Date: Fri, 21 Sep 2007 10:01:34 +0200
Subject: [antlr-interest] Problem with the C treeparser.
Message-ID: <1190361694.14056.19.camel@jop54.nfra.nl>

Hello,

I get this weird error with the C-tree parser (antlr-3.0.1) and I have
no clue what is going wrong. I wrote a simple grammar that reads in
words and stores them in the default AST. Then a tree-parser goes over
the tree and prints out the words. Now, everything is fine for 'small'
files (<130k), but for larger files, the program segfaults in a memmove
that is called from libantlr3c.so. Attached is the sample code, which is
as small as possible. A "make main && ./main test.in" should work. If
you remove the last line from test.in, the program runs fine.

I would be happy if someone could verify the error and tell me what is
wrong.

Thanks in advance,
Nico Kruithof

-------------- next part --------------
A non-text attachment was scrubbed...
Name: test_treeparser.tgz
Type: application/x-compressed-tar
Size: 5012 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20070921/e4111bc0/attachment.bin 

From gevik at xs4all.nl  Fri Sep 21 01:28:36 2007
From: gevik at xs4all.nl (Gevik Babakhani)
Date: Fri, 21 Sep 2007 10:28:36 +0200 (CEST)
Subject: [antlr-interest] C# target poll
In-Reply-To: <46F2EC97.8000502@gmx.de>
References: <46F2EC97.8000502@gmx.de>
Message-ID: <20445.213.84.4.128.1190363316.squirrel@webmail.xs4all.nl>

> Hello!
>
> As being one of the new lead developers for the C# target I've run into
> the following questions:
>
> Does anyone still use C# target on the .NET 1.1 runtime? If yes, is it
> impossible to switch to .NET 2.0?
>
> If there are no objections, we possibly drop the support for .NET 1.1.
>
> Best regards,
> Johannes Luber
>

no objections here.


From andreas.bartho at inf.tu-dresden.de  Fri Sep 21 01:59:14 2007
From: andreas.bartho at inf.tu-dresden.de (Andreas Bartho)
Date: Fri, 21 Sep 2007 10:59:14 +0200
Subject: [antlr-interest] Antlrworks 1.1.3 hangs when generating code
In-Reply-To: <E50201DB165A4B4B98685715FAEE0DF0028C4C@90dsvansv07.90DegreeSoftware.com>
References: <E50201DB165A4B4B98685715FAEE0DF0028C4C@90dsvansv07.90DegreeSoftware.com>
Message-ID: <46F387E2.4090307@inf.tu-dresden.de>

Hi,

> Grammar\DMLSQL2>java antlr.Tool DmlSQL2.g
> 
> ANTLR Parser Generator   Version 2.7.7 (20060906)   1989-2005
> 
> DmlSQL2.g:81:1: unexpected token: grammar
> 
> error: Token stream error reading grammar(s):
> 
> DmlSQL2.g:91:1: unexpected char: '@'
> 
> DmlSQL2.g:81:1: rule grammar trapped:
> 
> DmlSQL2.g:81:1: unexpected token: grammar
> 
> TokenStreamException: unexpected char: '@'

ANTLRWorks is for ANTLR v3. You are running ANTLR 2.7.7. The grammar 
syntax has changed from v2 to v3.

Andreas

From jaluber at gmx.de  Fri Sep 21 02:54:23 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Fri, 21 Sep 2007 11:54:23 +0200
Subject: [antlr-interest] C# target poll
In-Reply-To: <70bbae280709201524j65801ae7vb4cb120f61c8ad9d@mail.gmail.com>
References: <46F2EC97.8000502@gmx.de>
	<70bbae280709201524j65801ae7vb4cb120f61c8ad9d@mail.gmail.com>
Message-ID: <46F394CF.1030202@gmx.de>

Chris Lambrou wrote:
> I may be wrong about this, but I seem to recall that Silverlight only
> supports .NET 1.1, rather than 2.0. So there's one platform where
> support only for 2.0 might be an issue. That said, I'd personally rather
> work with a 2.0 target than a 1.1 target.
> 
> Chris
> 
Don't confuse the versioning of Silverlight with the versioning of .NET.
Silverlight 1.1 supports the .NET 2.1, which is an extended subset of
.NET 2.0. In other words, only features which are dropped in Silverlight
would become a problem for us, but I doubt that a parser runtime would
make use of those. And even then nothing would stop us to reimplement it
- or take it from Mono, if no licensing clashes occur.

Best regards,
Johannes Luber

From jimi at temporal-wave.com  Fri Sep 21 03:59:45 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 21 Sep 2007 11:59:45 +0100
Subject: [antlr-interest] Problem with the C treeparser.
In-Reply-To: <1190361694.14056.19.camel@jop54.nfra.nl>
References: <1190361694.14056.19.camel@jop54.nfra.nl>
Message-ID: <BAY118-DS280C3526ACBA261377B9886BB0@phx.gbl>

I'll take a look over the next few days and see if it is a runtime bug.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Nico Kruithof
> Sent: 21 September 2007 09:02
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Problem with the C treeparser.
> 
> Hello,
> 
> I get this weird error with the C-tree parser (antlr-3.0.1) and I have
> no clue what is going wrong. I wrote a simple grammar that reads in
> words and stores them in the default AST. Then a tree-parser goes over
> the tree and prints out the words. Now, everything is fine for 'small'
> files (<130k), but for larger files, the program segfaults in a memmove
> that is called from libantlr3c.so. Attached is the sample code, which
> is as small as possible. A "make main && ./main test.in" should work.
> If you remove the last line from test.in, the program runs fine.
> 
> I would be happy if someone could verify the error and tell me what is
> wrong.
> 
> Thanks in advance,
> Nico Kruithof



From malte.stien at web.de  Fri Sep 21 07:12:50 2007
From: malte.stien at web.de (Malte Stien)
Date: Sat, 22 Sep 2007 00:12:50 +1000
Subject: [antlr-interest] Confirming my approach
Message-ID: <46F3D162.8080209@web.de>

Hello everyone,

I have been using ANTLR for a few days now, and I think I am getting
used to it. I also bought the book and rest the best part of it,
however, I would just like to run something past you all to see whether
I have taken the right approach or whether I am on the utterly wrong
path. I have to match an input language that looks a bit like this:

domain foo
  has class a
    has attribute ax
    has attribute ay
  end class

  has class b
    has attribute bx
    has attribute by
  end class
end domain

The example is a bit 'dumbed' down to get my point across a little
easier. So I have my grammar-file and I can match the language and
everything is well. Now, as the next step, I would like to create an
instance of some Java-class for every domain, every class and every
attribute and I would like to link the class to my domain and the
attributes to my classes. I am using a tree grammar with the following
two rules (amongst others):

class_declaration[ArrayList<ModelClass> modelClasses] returns
  [ModelClass modelClass]
	:
^(CLASS name=IDENTIFIER)
	{
	modelClass = new modelClass($name.text);
	modelClasses.add(modelClass);
	}
	;	


domain_declaration[]
	:
	{
	ArrayList<ModelClass> modelClasses = new
          ArrayList<ModelClass>();
	}
^(DOMAIN IDENTIFIER class_declaration[
  modelClasses]*)
	{
	ModelDomain modelDomain = new ModelDomain($IDENTIFIER.text);
	for (ModelClass modelClass : modelClasses) {
          modelClass.setModelDomain(modelDomain);
        }
	}
	;

Basically, I am creating an ArrayList just before my domain_declaration
is matched, then pass that ArrayList to my class_declaration-rule so
that all my classes can add themselves to the list and then after the
domain_declaration-rule has matched, it creates a ModelDomain and adds
all the ModelClasses to it (by modelClass.setModelDomain(modelDomain)).
Is that the way to go? It appears a little long-winded to me.

I looked at two other options, neither of which seem to work:

- Having the created modelDomain available to all rules beneath using
the @scope attributes described in Chapter 4.5 of the book. However,
that does not seem to work as the modelDomain instance does not actually
come into existence until after the domain_declaration has completely
matched and that includes unfortunately the class_declarations.

- Having ANTLR create the ArrayList for me by using the += operator as
described in Chapter 6.1 of the book. Then ANTLR would throw those
ModelClasses into that ArrayList automatically and the
domain_declaration could proceed similarly to what it does now. As far
as I can see, however, that does not work either as one has to have an
output-option specified to use the += operator and one cannot specify
output options for tree grammars.

I thought, I may be able to use a variation on the first option, where I
don't make the ModelDomain-instance available via the @scope attribute,
but rather just the name of the domain. That would mean, though, that in
the model_declaration-rule, the instance would need to be retrieved just
from the name from some lookup-table, hashmap or similar. That however,
would not work either as again that ModelDomain-instance would not have
been created, yet, when in the class_declaration-rule.

So, what I have done above is really the only thing I could come up
with, and, as I said earlier, it does look a little long-winded to me.
If any of you more experienced guys have any opinion on this, I would
greatly appreciated that.

Thank you.
Malte.

From dmitry.goldenberg at weblayers.com  Fri Sep 21 07:13:17 2007
From: dmitry.goldenberg at weblayers.com (Dmitry Goldenberg)
Date: Fri, 21 Sep 2007 07:13:17 -0700
Subject: [antlr-interest] Is there a COBOL grammar in Antlr?
Message-ID: <5CCB14CB6DCFB147A4D09CC90808B0F30117F053@ehost011-3.exch011.intermedia.net>

Folks,
 
I was just wondering if anyone is aware of a COBOL grammar in Antlr.  I found a post from a while ago (see below), have there been any changes?  GOLD's grammar is cool but it's about 950 rules to convert.  Is there an automatic way to convert from BNF to Antlr?
 
Thanks for any info.
- Dmitry
 
 
Bryan Ewbank ewbank at gmail.com <mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Is%20there%20a%20Cobol%20Grammar%20in%20Antlr%3F&In-Reply-To=20050406144947.98637.qmail%40web52802.mail.yahoo.com> 
Wed Apr 6 13:07:11 PDT 2005 

*	Previous message: [antlr-interest] Is there a Cobol Grammar in Antlr? <http://www.antlr.org/pipermail/antlr-interest/2005-April/011761.html> 
*	Next message: [antlr-interest] antlr help <http://www.antlr.org/pipermail/antlr-interest/2005-April/011762.html> 
*	Messages sorted by: [ date ] <http://www.antlr.org/pipermail/antlr-interest/2005-April/date.html#11769>  [ thread ] <http://www.antlr.org/pipermail/antlr-interest/2005-April/thread.html#11769>  [ subject ] <http://www.antlr.org/pipermail/antlr-interest/2005-April/subject.html#11769>  [ author ] <http://www.antlr.org/pipermail/antlr-interest/2005-April/author.html#11769>  

________________________________

COBOL has a grammar??  If you have an LALR, you can find information
on LALR->LL conversion on the web, here:
[1] http://www.google.com/search?q=LALR+LL+conversion

which leads to a few (strangely, ANTLR-centric :-) web pages:
[2] http://www.javadude.com/articles/lalrtoll.html
[3] http://www.zenspider.com/Languages/PCCTS/LR2LL.html

On Apr 6, 2005 10:49 AM, Fan Yang <fanyang_32 at yahoo.ca <http://www.antlr.org/mailman/listinfo/antlr-interest> > wrote:
> Hi,
> 
> I'm working on a project which need Cobol grammar.
> After research on antlr website and antlr archives, I
> didn't find it although long time ago several persons
> talked about it.
> 
> I know that the Gold Parser has a Cobol grammar(LALR),
> is it possible to convert it to antlr? Is there a
> Cobol grammar in Antlr? May I get a version in any
> changes? Or Can somebody point me to somewhere I can
> get useful information about it?

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070921/509519d6/attachment-0001.html 

From jaluber at gmx.de  Fri Sep 21 07:29:08 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Fri, 21 Sep 2007 16:29:08 +0200
Subject: [antlr-interest] C# target poll
In-Reply-To: <46F3D34F.4050906@gmail.com>
References: <46F2EC97.8000502@gmx.de> <46F3D34F.4050906@gmail.com>
Message-ID: <46F3D534.2090904@gmx.de>

Stefan Klinger wrote:
> Johannes Luber wrote:
>> Hello!
>>
>> As being one of the new lead developers for the C# target I've run into
>> the following questions:
>>
>> Does anyone still use C# target on the .NET 1.1 runtime? If yes, is it
>> impossible to switch to .NET 2.0?
>>
>> If there are no objections, we possibly drop the support for .NET 1.1.
>>
>> Best regards,
>> Johannes Luber
>>
> 
> It would be great if the generated C# code runs with the 2.0 Compact
> Framework.
> 
I'm not familiar with the Compact Framework except that it is a subset
of .NET 2.0. Is there a resource which shows the differences? In the
case we can't make this possible you could always use the linker from
the Mono project, which extracts only the needed parts of the framework.
This alone may be enough in most cases.

Best regards,
Johannes Luber

From dev.null.nix at gmail.com  Fri Sep 21 07:50:48 2007
From: dev.null.nix at gmail.com (Stefan Klinger)
Date: Fri, 21 Sep 2007 16:50:48 +0200
Subject: [antlr-interest] C# target poll
In-Reply-To: <46F3D534.2090904@gmx.de>
References: <46F2EC97.8000502@gmx.de> <46F3D34F.4050906@gmail.com>
	<46F3D534.2090904@gmx.de>
Message-ID: <46F3DA48.1000502@gmail.com>

Johannes Luber wrote:

>> Johannes Luber wrote:
> I'm not familiar with the Compact Framework except that it is a subset
> of .NET 2.0. Is there a resource which shows the differences? In the
> case we can't make this possible you could always use the linker from
> the Mono project, which extracts only the needed parts of the framework.
> This alone may be enough in most cases.
> 
> Best regards,
> Johannes Luber
> 

In the MSDN documentation each function has a section which frameworks 
it supports, there is allways noted if it is supported by the Compact 
framework.

E.g.
http://msdn2.microsoft.com/en-us/library/fht0f5be.aspx

At the bottom there is a point "Version Information", there is also noted:

.NET Compact Framework
Supported in: 2.0, 1.0


Don't know if there is a list of supported or not supported functions.

Stefan

From vbar at comp.cz  Fri Sep 21 08:18:35 2007
From: vbar at comp.cz (Vaclav Barta)
Date: Fri, 21 Sep 2007 17:18:35 +0200
Subject: [antlr-interest] C# target poll
In-Reply-To: <46F3DA48.1000502@gmail.com>
References: <46F2EC97.8000502@gmx.de>
	<46F3D34F.4050906@gmail.com>	<46F3D534.2090904@gmx.de>
	<46F3DA48.1000502@gmail.com>
Message-ID: <46F3E0CB.3050904@comp.cz>

Stefan Klinger wrote:
> Johannes Luber wrote:
>>> Johannes Luber wrote:
>> I'm not familiar with the Compact Framework except that it is a subset
I am - it's really not that different, and I found it quite a marketable 
experience... :-) I'd very much like the C# target to support Compact 
Framework.

>> of .NET 2.0. Is there a resource which shows the differences? In the
>> case we can't make this possible you could always use the linker from
>> the Mono project, which extracts only the needed parts of the framework.
>> This alone may be enough in most cases.
I'm quite willing to test the build with VC.

> In the MSDN documentation each function has a section which frameworks 
> it supports, there is allways noted if it is supported by the Compact 
> framework.
Exactly.

	Bye
		Vasek


From kverma at yahoo.com  Fri Sep 21 08:49:56 2007
From: kverma at yahoo.com (Kamal Verma)
Date: Fri, 21 Sep 2007 08:49:56 -0700 (PDT)
Subject: [antlr-interest] C# target poll
Message-ID: <967895.51176.qm@web54601.mail.re2.yahoo.com>

ANTLR C# - CF target could be a good idea. Lets try to do regular one first and then I would love to make it CF.

-Kamal

----- Original Message ----
From: Johannes Luber <jaluber at gmx.de>
To: Antlr Interest <antlr-interest at antlr.org>
Sent: Friday, September 21, 2007 10:29:08 AM
Subject: Re: [antlr-interest] C# target poll

Stefan Klinger wrote:
> Johannes Luber wrote:
>> Hello!
>>
>> As being one of the new lead developers for the C# target I've run into
>> the following questions:
>>
>> Does anyone still use C# target on the .NET 1.1 runtime? If yes, is it
>> impossible to switch to .NET 2.0?
>>
>> If there are no objections, we possibly drop the support for .NET 1.1.
>>
>> Best regards,
>> Johannes Luber
>>
> 
> It would be great if the generated C# code runs with the 2.0 Compact
> Framework.
> 
I'm not familiar with the Compact Framework except that it is a subset
of .NET 2.0. Is there a resource which shows the differences? In the
case we can't make this possible you could always use the linker from
the Mono project, which extracts only the needed parts of the framework.
This alone may be enough in most cases.

Best regards,
Johannes Luber







       
____________________________________________________________________________________
Be a better Heartthrob. Get better relationship answers from someone who knows. Yahoo! Answers - Check it out. 
http://answers.yahoo.com/dir/?link=list&sid=396545433
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070921/24b82c57/attachment.html 

From glenmiller at skyviewsoftware.com  Fri Sep 21 10:26:27 2007
From: glenmiller at skyviewsoftware.com (Glen Miller)
Date: Fri, 21 Sep 2007 11:26:27 -0600
Subject: [antlr-interest] Help With Left Recursion Kinda
Message-ID: <200709211126.27866.glenmiller@skyviewsoftware.com>

Does anyone have ideas on how to parse a file like this? ?Can I code antlr to 
parse a file like that?

Level???Some Text
1???????????????ObjectType1
2???????????????ObjectType2
3???????????????ObjectType1
3???????????????ObjectType1
2???????????????ObjectType2
3???????????????ObjectType1
3???????????????ObjectType1

So what I want to end up with is with object1 that contains a list of object2, 
and a object2 can contain a list of object1. ?The level column tells me the 
nesting level of the object, and which object is the parent object.

Class ObjectType1
{
????????List<ObjectType2> dataList;
}

Class ObjectType2
{
????????List<Object1> dataList;
}

Thanks,
Glen Miller
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070921/b66136e0/attachment.html 

From qwertie256 at gmail.com  Fri Sep 21 10:33:06 2007
From: qwertie256 at gmail.com (David Piepgrass)
Date: Fri, 21 Sep 2007 11:33:06 -0600
Subject: [antlr-interest] C# target poll
In-Reply-To: <46F3D534.2090904@gmx.de>
References: <46F2EC97.8000502@gmx.de> <46F3D34F.4050906@gmail.com>
	<46F3D534.2090904@gmx.de>
Message-ID: <ce40b1470709211033n29b68cc9hc875d5cbef3f2174@mail.gmail.com>

> > It would be great if the generated C# code runs with the 2.0 Compact
> > Framework.

Indeed.

> I'm not familiar with the Compact Framework except that it is a subset
> of .NET 2.0. Is there a resource which shows the differences?
In the documentation you'll see, in the class members list of each
class, there is an icon that looks like a PDA beside each method you
can use on .NET Compact Framework. In the case of overloaded methods
btw, often only a subset of the overloads will work. I think you'll
find that for this application it'll be easy to write the runtime in
such a way that it works on .NET CF, although for some reason I do not
understand, a separate DLL must be built for the Compact Framework.

-- 
- David
http://qism.blogspot.com

From rjack at elegancetech.com  Fri Sep 21 13:23:24 2007
From: rjack at elegancetech.com (Roger Jack)
Date: Fri, 21 Sep 2007 16:23:24 -0400
Subject: [antlr-interest] C# target poll
In-Reply-To: <mailman.1.1190401202.11145.antlr-interest@antlr.org>
References: <mailman.1.1190401202.11145.antlr-interest@antlr.org>
Message-ID: <01cd01c7fc8d$439ab870$cad02950$@com>

I would prefer that the C# target support both version 1.1 and 2.0 of the
.Net framework. Would it be possible to use some sort of conditional
compilation to support both? It would be fine if the 2.0 C# target supported
more features than the 1.0 C# target if that is absolutely necessary.

Roger Jack



From mis.negocios.cba at gmail.com  Fri Sep 21 13:50:38 2007
From: mis.negocios.cba at gmail.com (Cesar Arrieta)
Date: Fri, 21 Sep 2007 17:50:38 -0300
Subject: [antlr-interest] HI, i have a simple problem
Message-ID: <de0d45c50709211350wb9faf23y36e11240f37a0698@mail.gmail.com>

Hi..here a post my MyCalc.g3 file..it is working fine..my problem is that i
dont know how to make my program tell if an error ocurrs..for example i want
that parser.expr() throw an exception or return a boolean telling if the
parse went fine or not?? no just sending messages to the console.
I hope you could help me, Thanks.
well this is the file MyCalc.g3:
and valids inputs are 8*b1*9+5*B2
and wrong inputs are 8*v*b1+da*b1b

grammar MiCalc;

tokens {

PLUS = '+' ;

MINUS = '-' ;

MULT = '*' ;

DIV = '/' ;

PUNTO = '.';

}

@header {

package lib;

import Jama.Matrix;

}

@lexer::header {

package lib;

}



@members {

public static void main(String[] args) throws Exception {

//This is a file for the input

//valid input 8 * b1

//wrong input 8dsa*b1b

String texto="texto";

MiCalcLexer lex = new MiCalcLexer(new ANTLRFileStream(texto));

CommonTokenStream tokens = new CommonTokenStream(lex);

MiCalcParser parser = new MiCalcParser(tokens);

parser.expr();



}

}

/*------------------------------------------------------------------

* PARSER RULES

*------------------------------------------------------------------*/



expr : term ( ( PLUS | MINUS ) term )* ;



term : factorN (((MULT | DIV) factorN) | ((MULT | DIV) factorBi) )*

| factorBi (((MULT) factorBi) | ((MULT | DIV) factorN))*;

factorN : (NUMBER | FLOAT);

factorBi: BINDEX NUMBER;



/*------------------------------------------------------------------

* LEXER RULES

*------------------------------------------------------------------*/

NUMBER : (DIGIT)+ ;

FLOAT : (NUMBER (PUNTO) NUMBER)+;

/*

WHITESPACE : ( '\t' | ' ' | '\r' | '\n'| '\u000C' )+ { $channel = HIDDEN; }
;

*/

fragment DIGIT : '0'..'9' ;

BINDEX : ('b' | 'B');
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070921/f19842b2/attachment.html 

From jaluber at gmx.de  Fri Sep 21 14:39:16 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Fri, 21 Sep 2007 23:39:16 +0200
Subject: [antlr-interest] C# target poll
In-Reply-To: <01cd01c7fc8d$439ab870$cad02950$@com>
References: <mailman.1.1190401202.11145.antlr-interest@antlr.org>
	<01cd01c7fc8d$439ab870$cad02950$@com>
Message-ID: <46F43A04.506@gmx.de>

Roger Jack wrote:
> I would prefer that the C# target support both version 1.1 and 2.0 of the
> .Net framework. Would it be possible to use some sort of conditional
> compilation to support both? It would be fine if the 2.0 C# target supported
> more features than the 1.0 C# target if that is absolutely necessary.
> 
> Roger Jack

The short term answer is: We will try to make it work with .NET 1.1,
although we may temporarily support only .NET and higher. Due the lack
of insight regarding the current code base I can't promise, if doing so
is feasible.

The long term answer is: This isn't about the number of features (which
should be the same for any target except some language specifics). The
problems are the lack of generics in .NET 1.1 and the abandonment of
other newer language features. Compatibility to .NET 1.1 effectively
means using only .NET 1.1 features or using #ifdefs, which will result
in a less maintainable and possibly less speedy software. Furthermore,
we can even use most C# 3 features - which are very intriguing to me -
and still create a .NET 2.0 runtime from the same source without
#ifdefs, so the advantages overweigh the lack of one .NET runtime.

Taking into account that there aren't that many who use still .NET 1.1
(I bet that you aren't one of them, and that those using ANTLR 3 for a
project probably use only .NET 2.0) and that most projects, including
those, whose software we use, ended their .NET 1.1 support, we can't
easily maintain support for .NET 1.1 forever, even if we wanted to do.
And as continuing the support of .NET 1.1 while going forward would
effectively require a fork, which is costing us resources, your chances
for not dropping support at some point in the future go down to nil. The
only thing what's left is to support .NET 1.1 yourself.

BTW, I assume above that ANTLR's evolving won't stop and that the
evolving of C# and thus the use of more sophisticated features
continues. From your point of view it is a pessimistic outcome which may
not hold true.

Best regards,
Johannes Luber

From dev.null.nix at gmail.com  Sat Sep 22 03:44:45 2007
From: dev.null.nix at gmail.com (Stefan Klinger)
Date: Sat, 22 Sep 2007 12:44:45 +0200
Subject: [antlr-interest] C# target poll
In-Reply-To: <46F2EC97.8000502@gmx.de>
References: <46F2EC97.8000502@gmx.de>
Message-ID: <46F4F21D.60807@gmail.com>

Johannes Luber wrote:
> Hello!
> 
> As being one of the new lead developers for the C# target I've run into
> the following questions:
> 
> Does anyone still use C# target on the .NET 1.1 runtime? If yes, is it
> impossible to switch to .NET 2.0?
> 
> If there are no objections, we possibly drop the support for .NET 1.1.
> 
> Best regards,
> Johannes Luber
> 

Another question, will the (development) source be available through 
subversion or another version control system?

Because then it would be easier to help with such things as 
compatibility to the different framework versions.

From jaluber at gmx.de  Sat Sep 22 03:51:06 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Sat, 22 Sep 2007 12:51:06 +0200
Subject: [antlr-interest] C# target poll
In-Reply-To: <46F4F21D.60807@gmail.com>
References: <46F2EC97.8000502@gmx.de> <46F4F21D.60807@gmail.com>
Message-ID: <46F4F39A.8010108@gmx.de>

Stefan Klinger wrote:
> Johannes Luber wrote:
>> Hello!
>>
>> As being one of the new lead developers for the C# target I've run into
>> the following questions:
>>
>> Does anyone still use C# target on the .NET 1.1 runtime? If yes, is it
>> impossible to switch to .NET 2.0?
>>
>> If there are no objections, we possibly drop the support for .NET 1.1.
>>
>> Best regards,
>> Johannes Luber
>>
> 
> Another question, will the (development) source be available through
> subversion or another version control system?
> 
> Because then it would be easier to help with such things as
> compatibility to the different framework versions.
> 

We plan to make the sources available via Perforce. Simply ask Terence
for a read-only account - or sign the contributor license for write access.

Best regards,
Johannes Luber

From parrt at cs.usfca.edu  Sat Sep 22 16:48:17 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 22 Sep 2007 16:48:17 -0700
Subject: [antlr-interest] Mantra language overhaul / reimplementation
Message-ID: <7D819AE3-739E-4FD2-8DF8-B646F90B140A@cs.usfca.edu>

Howdy.  I am almost done with a sprint to build a decent Mantra  
language:

http://www.linguamantra.org/

I have just added type annotations that make the code more readable  
and to support heavy optimizations.  It is still a dynamically typed  
language like Ruby and Python, however.  You will find type  
annotations and interesting compromise between statically and  
dynamically typed languages.  You might also find the pipeline  
oriented programming (POP?) quite interesting.  You can create new  
functionality by piping actors together rather than adding methods to  
classes. For example, imagine providing a facility for converting a  
file to a stream of lines. The traditional way is to create a lines()  
method in File and then call f.lines(). You could also add f.words()  
and so on. But, the exact same functionality is useful for strings  
and any other stream of characters.  Pipelines offer a better  
solution. Create a single input/output processor (an actor) and then  
pipe an input source to the actor.

I was not going to release the software until after my students had  
had a chance to implement it next semester, but it has evolved way  
beyond a student project.   This mantra implementation should prove  
useful to those trying to implement their own languages and might  
also be a good research platform for those wanting to experiment. The  
one issue I have is that I fixed a number of bugs in ANTLR 3 that  
this language relies upon. I think I might be able to an interim  
release for ANTLR simultaneously.

Ter

From sohail at taggedtype.net  Sat Sep 22 16:53:06 2007
From: sohail at taggedtype.net (Sohail Somani)
Date: Sat, 22 Sep 2007 16:53:06 -0700
Subject: [antlr-interest] Mantra language overhaul / reimplementation
In-Reply-To: <7D819AE3-739E-4FD2-8DF8-B646F90B140A@cs.usfca.edu>
References: <7D819AE3-739E-4FD2-8DF8-B646F90B140A@cs.usfca.edu>
Message-ID: <46F5AAE2.9030904@taggedtype.net>

On 22/09/07 04:48 PM, Terence Parr wrote:
> Howdy.  I am almost done with a sprint to build a decent Mantra language:
>
> http://www.linguamantra.org/
Hi,

I think a decent reference language for use with antlr will be very
helpful! What kind of optimizations do you do?

Sohail

From parrt at cs.usfca.edu  Sat Sep 22 16:58:56 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 22 Sep 2007 16:58:56 -0700
Subject: [antlr-interest] Mantra language overhaul / reimplementation
In-Reply-To: <46F5AAE2.9030904@taggedtype.net>
References: <7D819AE3-739E-4FD2-8DF8-B646F90B140A@cs.usfca.edu>
	<46F5AAE2.9030904@taggedtype.net>
Message-ID: <A20C1F36-1AA6-4454-8D31-E68537168976@cs.usfca.edu>


On Sep 22, 2007, at 4:53 PM, Sohail Somani wrote:

> On 22/09/07 04:48 PM, Terence Parr wrote:
>> Howdy.  I am almost done with a sprint to build a decent Mantra  
>> language:
>>
>> http://www.linguamantra.org/
> Hi,
>
> I think a decent reference language for use with antlr will be very
> helpful! What kind of optimizations do you do?

At this point, I'm simply trying to avoid general message sentence  
that call an invoke() method with the name of the message.  These are  
expensive because they must look up the method in a hash table.  If I  
know the type of the variable o, then o.foo() can be generated as

((thetype)o).foo()

even though o is declared as a simple mantra object.  The type  
information is enough to let the Java compiler do a direct call  
without any kind of weird hash table lookup.

A similar thing happens for fields.  o.f can be converted to  
((thetype)o).f rather than a general setter or getter method.

:)

Naturally a lint like program could give you some information like  
what they static compiler would give you.

I'm adding a few more optimizations and hoping to get a graduate  
student involved in building up  the runtime library. Usually the  
library methods are simply things veneers over the Java libraries,  
they'll help to clean them up quite a bit.  Soon I should be ready to  
release something.   The translator is remarkably small.

What you think of the syntax?

Ter


From parrt at cs.usfca.edu  Sat Sep 22 17:01:33 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 22 Sep 2007 17:01:33 -0700
Subject: [antlr-interest] Mantra language overhaul / reimplementation
In-Reply-To: <A20C1F36-1AA6-4454-8D31-E68537168976@cs.usfca.edu>
References: <7D819AE3-739E-4FD2-8DF8-B646F90B140A@cs.usfca.edu>
	<46F5AAE2.9030904@taggedtype.net>
	<A20C1F36-1AA6-4454-8D31-E68537168976@cs.usfca.edu>
Message-ID: <14E27032-A1FE-438C-8AA9-D4809E88A8AD@cs.usfca.edu>


On Sep 22, 2007, at 4:58 PM, Terence Parr wrote:

>
> On Sep 22, 2007, at 4:53 PM, Sohail Somani wrote:
>
>> On 22/09/07 04:48 PM, Terence Parr wrote:
>>> Howdy.  I am almost done with a sprint to build a decent Mantra  
>>> language:
>>>
>>> http://www.linguamantra.org/
>> Hi,
>>
>> I think a decent reference language for use with antlr will be very
>> helpful! What kind of optimizations do you do?
>
> At this point, I'm simply trying to avoid general message sentence

make that "general message sends" (stupid voice-recognition... my  
tendinitis in my hands is killing me because I've worked nonstop on  
this language for two weeks!)

Ter

From sohail at taggedtype.net  Sat Sep 22 17:12:33 2007
From: sohail at taggedtype.net (Sohail Somani)
Date: Sat, 22 Sep 2007 17:12:33 -0700
Subject: [antlr-interest] Mantra language overhaul / reimplementation
In-Reply-To: <A20C1F36-1AA6-4454-8D31-E68537168976@cs.usfca.edu>
References: <7D819AE3-739E-4FD2-8DF8-B646F90B140A@cs.usfca.edu>	<46F5AAE2.9030904@taggedtype.net>
	<A20C1F36-1AA6-4454-8D31-E68537168976@cs.usfca.edu>
Message-ID: <46F5AF71.2050209@taggedtype.net>

On 22/09/07 04:58 PM, Terence Parr wrote:

[snip]
> Naturally a lint like program could give you some information like
> what they static compiler would give you.
>

I think such a tool would be very instructive. Find those graduate
students! :-)
> I'm adding a few more optimizations and hoping to get a graduate
> student involved in building up  the runtime library. Usually the
> library methods are simply things veneers over the Java libraries,
> they'll help to clean them up quite a bit.  Soon I should be ready to
> release something.   The translator is remarkably small.
>
> What you think of the syntax?
>

I'm hardly qualified to give my opinion but since you asked (!) the list
filters are pretty awesome and the pipes are a clever chaining mechanism.

However, seeing as I am currently in Lisp mode, I must ask: Where are
the macros? Think of the children!

Sohail

PS: Hope your hands feel better!


From hubdog at gmail.com  Sun Sep 23 06:30:55 2007
From: hubdog at gmail.com (Hub Dog)
Date: Sun, 23 Sep 2007 22:30:55 +0900
Subject: [antlr-interest] Different logic generated by antlr 3 and antlr 2
Message-ID: <4de0b9580709230630k3c0f1baqa630e96ee16a94ce@mail.gmail.com>

Dear friends,

        I just porting an antlr 2 project to antlr3 . But I just encounter
problem.
for the following rule

sql_script :
    (sql_stmt)? ( SEMI! (sql_stmt)? )*
;


Antlr2 will generate following source(C++ Target), it will throw exception
when encounter incorrect input after the correct sub rule:
....
    {
    if ((_tokenSet_0.member(LA(1)))) {
        sql_stmt();
        if (inputState->guessing==0) {
            astFactory->addASTChild( currentAST, returnAST );
        }
    }
    else if ((LA(1) == Token::EOF_TYPE || LA(1) == SEMI)) {
    }
    else {
        throw NoViableAltException(LT(1), getFilename());<-----------Throw
exception when encounter incorrect input after correct sql.
    }

    }
    { // ( ... )*
    for (;;) {
        if ((LA(1) == SEMI)) {
            semi = LT(1);
            if ( inputState->guessing == 0 ) {
                semi_AST = astFactory->create(semi);
            }
            match(SEMI);
            {
            if ((_tokenSet_0.member(LA(1)))) {
                sql_stmt();
                if (inputState->guessing==0) {
                    astFactory->addASTChild( currentAST, returnAST );
                }
            }
            else if ((LA(1) == Token::EOF_TYPE || LA(1) == SEMI)) {
            }
            else {
                throw NoViableAltException(LT(1),
getFilename());<-----------Throw exception when encounter incorrect input
after correct sql.
            }

            }
        }
        else {
            goto _loop90;
        }

    }
    _loop90:;
    } // ( ... )*

So my parser will report error for the statement  : drop table a select.(the
drop table a is correct sql but select is wrong)

But Antlr3 will generate quit different source(Java target), it will not
throw exception for the pattern that a wrong input just following a correct
sub rule

            int LA1_0 = input.LA(1);

            if ( ((LA1_0>=T_DELETE &&
LA1_0<=T_INSERT)||LA1_0==T_SELECT||LA1_0==T_EXPLAIN||LA1_0==T_REPLACE||(LA1_0>=T_REINDEX
&&
LA1_0<=T_ATTACH)||LA1_0==T_DETACH||LA1_0==T_CREATE||LA1_0==T_END||LA1_0==T_BEGIN||LA1_0==T_ROLLBACK||(LA1_0>=T_PRAGMA
&& LA1_0<=T_ALTER)||LA1_0==T_COMMIT) ) {
                alt1=1;
            }
            switch (alt1) {
                case 1 :
                    // Sqlite.g:389:3: sql_stmt
                    {
                    pushFollow(FOLLOW_sql_stmt_in_sql_script1621);
                    sql_stmt1=sql_stmt();
                    _fsp--;
                    if (failed) return retval;
                    if ( backtracking==0 ) adaptor.addChild(root_0,
sql_stmt1.getTree());

                    }
                    break;

            }

            // Sqlite.g:389:14: ( SEMI ( sql_stmt )? )*
            loop3:
            do {
                int alt3=2;
                int LA3_0 = input.LA(1);

                if ( (LA3_0==SEMI) ) {
                    alt3=1;
                }


                switch (alt3) {
                case 1 :
                    // Sqlite.g:389:16: SEMI ( sql_stmt )?
                    {
                    SEMI2=(Token)input.LT(1);
                    match(input,SEMI,FOLLOW_SEMI_in_sql_script1627); if
(failed) return retval;
                    // Sqlite.g:389:22: ( sql_stmt )?
                    int alt2=2;
                    int LA2_0 = input.LA(1);

                    if ( ((LA2_0>=T_DELETE &&
LA2_0<=T_INSERT)||LA2_0==T_SELECT||LA2_0==T_EXPLAIN||LA2_0==T_REPLACE||(LA2_0>=T_REINDEX
&&
LA2_0<=T_ATTACH)||LA2_0==T_DETACH||LA2_0==T_CREATE||LA2_0==T_END||LA2_0==T_BEGIN||LA2_0==T_ROLLBACK||(LA2_0>=T_PRAGMA
&& LA2_0<=T_ALTER)||LA2_0==T_COMMIT) ) {
                        alt2=1;
                    }
                    switch (alt2) {
                        case 1 :
                            // Sqlite.g:389:23: sql_stmt
                            {
                            pushFollow(FOLLOW_sql_stmt_in_sql_script1631);
                            sql_stmt3=sql_stmt();
                            _fsp--;
                            if (failed) return retval;
                            if ( backtracking==0 ) adaptor.addChild(root_0,
sql_stmt3.getTree());

                            }
                            break;

                    }


                    }
                    break;

                default :
                    break loop3;<----------------------------does not throw
exception for input other than SEMI
                }
            } while (true);


            }

My question is how to let antlr3 to generate the same logic like antlr 2.

best regards
ma lifang
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070923/1c88bd93/attachment-0001.html 

From jkh at datatel.com  Sun Sep 23 08:35:06 2007
From: jkh at datatel.com (Jason Hocker)
Date: Sun, 23 Sep 2007 11:35:06 -0400
Subject: [antlr-interest] using C# runtime
Message-ID: <OF089EAB1D.9713FBBD-ON8525735F.0054DE5D-8525735F.00559D65@datatel.com>

This is for antlr 2.7.4.

Please bare with me that I'm a java developer and just learning C#.  I 
need to use C# for a project.  I have a string that I want to send through 
the lexer.  It looks like the lexer is expecting me to provide it a stream 
that reads from a file.  Can anyone help me with the basic C# example to 
send a string to the lexer?
Disclaimer: This message is intended only for the personal and confidential use of the designated recipient(s) named above. If you are not the intended recipient of this message you are hereby notified that any review, dissemination, distribution or copying of this message is strictly prohibited. In addition, if you have received this message in error, please advise the sender by reply e-mail and delete the message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070923/b0f22d57/attachment.html 

From parrt at cs.usfca.edu  Sun Sep 23 12:22:05 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 23 Sep 2007 12:22:05 -0700
Subject: [antlr-interest] Mantra language overhaul / reimplementation
In-Reply-To: <46F5AF71.2050209@taggedtype.net>
References: <7D819AE3-739E-4FD2-8DF8-B646F90B140A@cs.usfca.edu>	<46F5AAE2.9030904@taggedtype.net>
	<A20C1F36-1AA6-4454-8D31-E68537168976@cs.usfca.edu>
	<46F5AF71.2050209@taggedtype.net>
Message-ID: <0553D666-9DEC-494F-B276-41A0D5EC4394@cs.usfca.edu>


On Sep 22, 2007, at 5:12 PM, Sohail Somani wrote:

> On 22/09/07 04:58 PM, Terence Parr wrote:
>
> [snip]
>> Naturally a lint like program could give you some information like
>> what they static compiler would give you.
>>
>
> I think such a tool would be very instructive. Find those graduate
> students! :-)

Peter Burns, new grad student at U of San Francisco, has shown  
interest in playing around with runtime. :)

>> I'm adding a few more optimizations and hoping to get a graduate
>> student involved in building up  the runtime library. Usually the
>> library methods are simply things veneers over the Java libraries,
>> they'll help to clean them up quite a bit.  Soon I should be ready to
>> release something.   The translator is remarkably small.
>>
>> What you think of the syntax?
>>
>
> I'm hardly qualified to give my opinion but since you asked (!) the  
> list
> filters are pretty awesome and the pipes are a clever chaining  
> mechanism.

Yeah, i like it.  Mantra is sort of an "essay in code" explaining my  
take on languages du jour ruby/python.

> However, seeing as I am currently in Lisp mode, I must ask: Where are
> the macros? Think of the children!

the horror, the horror! ;)

Ter

From jerrro at gmail.com  Sun Sep 23 15:58:53 2007
From: jerrro at gmail.com (Jerry Ro)
Date: Sun, 23 Sep 2007 18:58:53 -0400
Subject: [antlr-interest] Looking for a person experienced with ANTLR
Message-ID: <5a8f4c290709231558k729aa6cawdc8a69bb9aea2df7@mail.gmail.com>

Hello,

I am looking for a person who is experienced with ANTLR for writing a parser
for a rather unique prolog-like language.

I have all code for actually producing the executable ready, but currently,
my parser is based on regular expressions and string matching (which means
the error handling is not too good either). I wish I had more time to dive
into ANTLR and write proper grammar/parser, but unfortunately, I do not.
Still, I would like to distribute this language as open source (with a
"real" parser), as I believe it is unique and interesting both industrially
and for educational purposes as well.

If anyone is interested, I can send him/her more details, with possibly a
prototype of a BNF grammar. If someone is interested in being paid for
writing a grammar/parser (in Java), I may be willing to accept a reasonable
offer. I believe the language itself is not that complex, a person with good
experience with ANTLR and Java should be able to develop a working prototype
in two to three working days.

Any other ideas where I could find such a person are appreciated.


Thanks,


Jerr.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070923/db5e4621/attachment.html 

From mail at martin-probst.com  Mon Sep 24 00:33:13 2007
From: mail at martin-probst.com (Martin Probst)
Date: Mon, 24 Sep 2007 09:33:13 +0200
Subject: [antlr-interest] Mantra language overhaul / reimplementation
In-Reply-To: <7D819AE3-739E-4FD2-8DF8-B646F90B140A@cs.usfca.edu>
References: <7D819AE3-739E-4FD2-8DF8-B646F90B140A@cs.usfca.edu>
Message-ID: <4E5C10B8-EED8-4C3A-B4B8-089E1F0966EC@martin-probst.com>

Hi,

> You might also find the pipeline oriented programming (POP?) quite  
> interesting.  You can create new functionality by piping actors  
> together rather than adding methods to classes. For example,  
> imagine providing a facility for converting a file to a stream of  
> lines. The traditional way is to create a lines() method in File  
> and then call f.lines(). You could also add f.words() and so on.  
> But, the exact same functionality is useful for strings and any  
> other stream of characters.  Pipelines offer a better solution.  
> Create a single input/output processor (an actor) and then pipe an  
> input source to the actor.

That's somewhat like the Java io library and it's wrapper pattern,  
isn't it? You have an InputStream (e.g. FileInputStream) and wrap it  
in an InputStreamReader to get characters instead of bytes, then in a  
BufferedReader to get .readLine(), etc.

How do you achieve compatibility of the single pipe steps? I.e. if  
one step returns 'Fish', and the next step expects 'Salmon', or maybe  
even something incompatible?

Regards,
Martin

From Dominique.Duflos at alcatel-lucent.fr  Mon Sep 24 01:34:53 2007
From: Dominique.Duflos at alcatel-lucent.fr (Dominique.Duflos at alcatel-lucent.fr)
Date: Mon, 24 Sep 2007 10:34:53 +0200
Subject: [antlr-interest] RecognitionException in antlr3
Message-ID: <46F776AD.7080509@alcatel-lucent.fr>

Hi all,
How do I get the antlr3 parser to throw an exception when something is
wrong in the input ?
Setting defaultErrorHandler to false seems only to be valid in antlr2.

Thanks for any help.



From Dominique.Duflos at alcatel-lucent.fr  Mon Sep 24 02:43:28 2007
From: Dominique.Duflos at alcatel-lucent.fr (Dominique.Duflos at alcatel-lucent.fr)
Date: Mon, 24 Sep 2007 11:43:28 +0200
Subject: [antlr-interest] RecognitionException in antlr3 (FIXED)
Message-ID: <46F786C0.2080101@alcatel-lucent.fr>

How do I get the antlr3 parser to throw an exception when something is
wrong in the input ?

Add this to the grammar:

@rulecatch {
}
@members {
protected void mismatch(IntStream input, int ttype, BitSet follow)
   throws RecognitionException
{
   throw new MismatchedTokenException(ttype, input);
}
}



From dmitry.lizorkin at gmail.com  Mon Sep 24 04:04:54 2007
From: dmitry.lizorkin at gmail.com (Dmitry Lizorkin)
Date: Mon, 24 Sep 2007 15:04:54 +0400
Subject: [antlr-interest] mail to antlr-interest bounced
Message-ID: <f86f9f940709240404w44101364ma8969f33abcfe99f@mail.gmail.com>

Hello,
I'm attempting to send a question to antlr-interest mailing list since
Friday, and I get the following automatically generated bounce message:

"Your mail to 'antlr-interest' [...] is being held until the list moderator
can review it for approval.
The reason it is being held:
   Message may contain administrivia
Either the message will get posted to the list, or you will receive
notification of the moderator's decision."

What does this reason mean? What could I do for my question to pass the spam
filter?

Dmitry
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070924/aced0346/attachment.html 

From scott at javadude.com  Mon Sep 24 08:10:21 2007
From: scott at javadude.com (scott at javadude.com)
Date: Mon, 24 Sep 2007 11:10:21 -0400 (EDT)
Subject: [antlr-interest] ANTLR3-Eclipse Update
Message-ID: <30001.12.173.51.158.1190646621.squirrel@www.javadude.com>

I've updated ANTLR3-Eclipse to ANTLR 3.0.1

See http://javadude.com/tools/antlr3-eclipse
-- Scott

From parrt at cs.usfca.edu  Mon Sep 24 10:05:02 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 24 Sep 2007 10:05:02 -0700
Subject: [antlr-interest] ANTLR3-Eclipse Update
In-Reply-To: <30001.12.173.51.158.1190646621.squirrel@www.javadude.com>
References: <30001.12.173.51.158.1190646621.squirrel@www.javadude.com>
Message-ID: <D979F71F-AAE6-4C54-8433-DF5CEF29B24F@cs.usfca.edu>

Heh, looks great Scott.  Adding to download page.  Why not add to  
your news feed on antlr wiki? :)

Ter
On Sep 24, 2007, at 8:10 AM, scott at javadude.com wrote:

> I've updated ANTLR3-Eclipse to ANTLR 3.0.1
>
> See http://javadude.com/tools/antlr3-eclipse
> -- Scott


From trunkel at gmail.com  Mon Sep 24 14:01:21 2007
From: trunkel at gmail.com (troy runkel)
Date: Mon, 24 Sep 2007 17:01:21 -0400
Subject: [antlr-interest] Using a single parser instance to process multiple
	blocks of data.
Message-ID: <620da58c0709241401o56d2569es8ed3565988d72717@mail.gmail.com>

Greetings,

I'm working on a parser based on the C target that will eventually get
its input from a network API.  I'd like to be able to create an
instance of the parser, call the network API to fetch the next block
of data, parse that data and then continue fetching/parsing blocks of
data.

Once I've setup the inputstream -> lexer -> tokenstream -> parser
relationship, and parsed all the data currently in the inputstream, is
there a way to tell the inputstream that more data is available?  Do I
need to create a new inputstream for each block of data?

Is there a better way to do what I have in mind?  Thanks.

Troy Runkel

From dmitry.lizorkin at gmail.com  Mon Sep 24 22:54:20 2007
From: dmitry.lizorkin at gmail.com (Dmitry Lizorkin)
Date: Tue, 25 Sep 2007 09:54:20 +0400
Subject: [antlr-interest] language CPP ?
Message-ID: <f86f9f940709242254u47d6130fj77a982184836632e@mail.gmail.com>

Hello!
When attempting to specify language=CPP, I get the following ANTLR errors:

error(10):  internal error: no such group file CPP.stg
error(20):  cannot find code generation templates CPP.stg

However, there exists the "CPP.stg" file in the
"src/org/antlr/codegen/templates/CPP" subfolder of ANTLR distribution.
How should C++ be specified as a target language than? What search path is
used for .stg files; can it be specified explicitly?
Both Java and C work fine as target languages.
Dmitry
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070925/6150c539/attachment.html 

From matthew.bowman at sogotech.com  Mon Sep 24 23:11:52 2007
From: matthew.bowman at sogotech.com (Matthew Bowman)
Date: Tue, 25 Sep 2007 09:11:52 +0300
Subject: [antlr-interest] RecognitionException in antlr3 (FIXED)
In-Reply-To: <46F786C0.2080101@alcatel-lucent.fr>
References: <46F786C0.2080101@alcatel-lucent.fr>
Message-ID: <46F8A6A8.6030305@sogotech.com>

Dominique.Duflos at alcatel-lucent.fr wrote:
> Add this to the grammar:
>
> @rulecatch {
> }
> @members {
> protected void mismatch(IntStream input, int ttype, BitSet follow)
>   throws RecognitionException
> {
>   throw new MismatchedTokenException(ttype, input);
> }
> }
>
What exactly does the @rulecatch { } block do?

--Matthew

-- 
Matthew Bowman
Chief Technical Officer

SoGo Technology SRL
 Traian Vuia 89
 Cluj-Napoca 400387
 Romania

Phone (ext. 642)
 +40 (318) 122364  : Romania
 +47 ( 21) 543272  : Oslo, Norway
 + 1 (404) 7956245 : Atlanta, Georgia USA
 + 1 (866) 3575982 : Toll-Free USA

Fax
 +40 (364) 402227  : Romania

Mobile
 +40 (751) 596963  : Romania



From benjamin.b.lenz at daimlerchrysler.com  Tue Sep 25 01:32:09 2007
From: benjamin.b.lenz at daimlerchrysler.com (benjamin.b.lenz at daimlerchrysler.com)
Date: Tue, 25 Sep 2007 10:32:09 +0200
Subject: [antlr-interest] Display comment node in grammar
Message-ID: <OF54E3F1A7.22328716-ONC1257361.002D935E-C1257361.002EE5C8@dcx.dcx>


Hi folks,

I almost finished to rewrite the available Java.g3 grammar to create an
AST. As final step I am trying to create just a single node called
"comment". So always when in the code "/* stuff */" exists it should
replace all the nodes from the AST with just a node "comment".

As I know is that the parser reads the comments as a single token. So is
there a similiar function in the grammar like the rewrite rules (just for
tokens)?

Thanks a lot.

Ben

???????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????? If you are not the addressee, please inform us immediately that you have received this e-mail by mistake, and delete it. We thank you for your support. 

From niklas.soderberg at gmail.com  Tue Sep 25 02:22:36 2007
From: niklas.soderberg at gmail.com (=?ISO-8859-1?Q?Niklas_S=F6derberg?=)
Date: Tue, 25 Sep 2007 11:22:36 +0200
Subject: [antlr-interest] A newbie having problems creating his first
	grammar...
Message-ID: <a791b4be0709250222j30f52b07t8c0342a690f38852@mail.gmail.com>

Hi all! A newbie here, just discovered Antlr and it seems like an awesome
tool! I'm trying to create a grammar for a querylanguage I need to parse in
c# and I'm totally stuck, perhaps some kind soul out there could point me in
the right direction... feel free to comment my grammar as well, perhaps I'm
going at this all wrong?

My problem is that when I run my grammar in the AntlrWorks interpreter, the
last parenthesis in my input is "lost", the interpreter runs without error
and displays the grammar treegraph, but the tree is "unbalanced" with the
last parenthesis missing, and I can't understand what in my rules are
causing this behaviour?

It's probably a silly mistake on my part, but obviously I can't see it.

I figured it should be easier to start small, so I picked a piece of the
input and started working on that, but I can't even get this to work as
expected:-/ The small sample input I'm trying to parse is this:

<OR>(<WILDCARD>(`abc*`),<WILDCARD>(`qwe*`))

using this grammar:

grammar Query;

options
{
language = 'CSharp';
output=AST;
}

fragment KEYWORD_BEGIN : '<';
fragment KEYWORD_END : '>';
fragment KEYWORD_LIST
 : ('WILDCARD' | 'OR' | 'AND' | 'WORD' | 'CASE' )
 ;

KEYWORD
 : (KEYWORD_BEGIN KEYWORD_LIST KEYWORD_END)
 ;

opExpr  : operation (',' operation)*
 | KEYWORD '(' opExpr ')'
 ;

operation
 : (KEYWORD '(' STRING_LITERAL ')')
 ;

INTLIT  : ('0'..'9')+;
STRING_LITERAL : ('`'! (~('`'|'\n'|'\r'))+ '`'!);
WS : (' ' | '\t' | '\f' | '\r\n' | '\r' | '\n') { channel = HIDDEN; };

Thanks in advance for any help,
Niklas

If anyone is interested, here is a sample of a complete query that I want to
parse:

<AND>(((<OR>(<WILDCARD>(`string1*`),<NEAR/5>(<OR>(<WILDCARD>(`string2*`)),<OR>(<WILDCARD>(`string3*`))),<NEAR/5>(<OR>(<CASE><WORD>(`string4`),<CASE><WORD>(`string5`)),<OR>(<WILDCARD>(`string6*`),<WILDCARD>(`string7*`),<WILDCARD>(`string8*`),<WILDCARD>(`string9*`),<WILDCARD>(`string10*`),<WILDCARD>(`string11*`)))))<IN>(MAINTITLE,SUBTITLE,INGRESS,ARTICLETEXT)),(<OR>(<WORD>4617,<WORD>4619,<WORD>4620)<IN>(SOURCE_ID)))
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070925/003e837f/attachment.html 

From relationalalgebra at gmail.com  Tue Sep 25 06:25:48 2007
From: relationalalgebra at gmail.com (G R)
Date: Tue, 25 Sep 2007 15:25:48 +0200
Subject: [antlr-interest] Tree Grammar from parser grammar
Message-ID: <2ea6ad20709250625n784fa463j28ac79bf99ef3256@mail.gmail.com>

Hi all

I'm actually trying to move from my parser grammar to a tree grammar using
AST rewriting rules as much as I can.
The problem is that I've got 2 rule that I don't know how to deal with using
rewriting rules.
Here is a part of my grammar :


select    :    Select LeftBrack condition RightBrack (LeftParent raQuery
RightParent | Name)
        -> ^(Select condition raQuery? Name?);
condition
    :    conditionTerm
        ->^(Condition conditionTerm);
conditionTerm
    :    logicalTerm (Or^ logicalTerm)*;
logicalTerm
    :    logicalFactor (And^ logicalFactor)*;
logicalFactor
    :    Not? o1=operand CompareOperator o2=operand
        -> ^(CompareOperator Not? $o1 $o2)
        |LeftParent conditionTerm RightParent
        -> ^(conditionTerm);
operand    :    Name
        |Numeric;


The rules for conditionTerm and logicalTerm are the ones that I've try to
change using rewriting rule, but i can't any solution...
Could anyone giving me a hand ?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070925/2436f8da/attachment.html 

From ssiegel at finjan.com  Tue Sep 25 06:52:59 2007
From: ssiegel at finjan.com (Shmuel Siegel)
Date: Tue, 25 Sep 2007 15:52:59 +0200
Subject: [antlr-interest] Tree Grammar from parser grammar
In-Reply-To: <2ea6ad20709250625n784fa463j28ac79bf99ef3256@mail.gmail.com>
References: <2ea6ad20709250625n784fa463j28ac79bf99ef3256@mail.gmail.com>
Message-ID: <E344C433F006AB45A306D422F9C3EB4C026E904C@exmail1.finjan.com>

I don't know how you want your tree to look but one possibility is:

 

conditionTerm
    :    l+=logicalTerm (Or^ l+=logicalTerm)*

      ->($Or $l*)

; 

 

________________________________

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of G R
Sent: Tuesday, September 25, 2007 3:26 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Tree Grammar from parser grammar

 

Hi all

I'm actually trying to move from my parser grammar to a tree grammar
using AST rewriting rules as much as I can.
The problem is that I've got 2 rule that I don't know how to deal with
using rewriting rules. 
Here is a part of my grammar :


select    :    Select LeftBrack condition RightBrack (LeftParent raQuery
RightParent | Name)
        -> ^(Select condition raQuery? Name?);
condition
    :    conditionTerm 
        ->^(Condition conditionTerm); 
conditionTerm
    :    logicalTerm (Or^ logicalTerm)*; 
logicalTerm
    :    logicalFactor (And^ logicalFactor)*;
logicalFactor
    :    Not? o1=operand CompareOperator o2=operand
        -> ^(CompareOperator Not? $o1 $o2)
        |LeftParent conditionTerm RightParent
        -> ^(conditionTerm); 
operand    :    Name
        |Numeric;


The rules for conditionTerm and logicalTerm are the ones that I've try
to change using rewriting rule, but i can't any solution...
Could anyone giving me a hand ?

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070925/207d77bb/attachment-0001.html 

From Dominique.Duflos at alcatel-lucent.fr  Tue Sep 25 07:23:46 2007
From: Dominique.Duflos at alcatel-lucent.fr (Dominique.Duflos at alcatel-lucent.fr)
Date: Tue, 25 Sep 2007 16:23:46 +0200
Subject: [antlr-interest] RecognitionException in antlr3 (FIXED)
Message-ID: <46F919F2.1010703@alcatel-lucent.fr>

Matthew Bowman wrote:
Dominique.Duflos at alcatel-lucent.fr wrote:

> > Add this to the grammar:
> >
> > @rulecatch {
> > }
> > @members {
> > protected void mismatch(IntStream input, int ttype, BitSet follow)
> >   throws RecognitionException
> > {
> >   throw new MismatchedTokenException(ttype, input);
> > }
> > }
> >
>   
What exactly does the @rulecatch { } block do? --Matthew

Well I don't know, I'm a complete beginner. I just found that the 
@rulecatch { } block made the parser throw an exception for some of my 
input error test cases, but not all of them. Then the overloading of 
mismatch() did it for the rest.
--Dominique

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070925/be9acd1d/attachment.html 

From relationalalgebra at gmail.com  Tue Sep 25 07:42:03 2007
From: relationalalgebra at gmail.com (G R)
Date: Tue, 25 Sep 2007 16:42:03 +0200
Subject: [antlr-interest] Tree Grammar from parser grammar
In-Reply-To: <E344C433F006AB45A306D422F9C3EB4C026E904C@exmail1.finjan.com>
References: <2ea6ad20709250625n784fa463j28ac79bf99ef3256@mail.gmail.com>
	<E344C433F006AB45A306D422F9C3EB4C026E904C@exmail1.finjan.com>
Message-ID: <2ea6ad20709250742l724f964ci52f93c67894fcf74@mail.gmail.com>

Sounds perfect !
I wanted the operators OR and AND as root and the logicalTerms as child.
This looks good.
Thanks a lot.

2007/9/25, Shmuel Siegel <ssiegel at finjan.com>:
>
>  I don't know how you want your tree to look but one possibility is:
>
>
>
> conditionTerm
>     :    l+=logicalTerm (Or^ l+=logicalTerm)*
>
>       ->($Or $l*)
>
> ;
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070925/b4fdda0f/attachment.html 

From Dominique.Duflos at alcatel-lucent.fr  Tue Sep 25 07:47:11 2007
From: Dominique.Duflos at alcatel-lucent.fr (Dominique.Duflos at alcatel-lucent.fr)
Date: Tue, 25 Sep 2007 16:47:11 +0200
Subject: [antlr-interest] Memory explosion
Message-ID: <46F91F6F.4020509@alcatel-lucent.fr>

Hi all,
The parser eats all available memory when parsing the three-character 
string "N A" using this three-line grammar:

grammar mml;
mml     : 'R' ;
SPACE   : (' ')* ;

What is wrong ?

From mail at martin-probst.com  Tue Sep 25 08:12:40 2007
From: mail at martin-probst.com (Martin Probst)
Date: Tue, 25 Sep 2007 17:12:40 +0200
Subject: [antlr-interest] Memory explosion
In-Reply-To: <46F91F6F.4020509@alcatel-lucent.fr>
References: <46F91F6F.4020509@alcatel-lucent.fr>
Message-ID: <08317523834bfb8808badf711de1fb20@www.martin-probst.com>

The SPACE token can be zero length, i.e. it probably produces _a lot_ of
tokens for that rule.

On Tue, 25 Sep 2007 16:47:11 +0200, Dominique.Duflos at alcatel-lucent.fr
wrote:
> Hi all,
> The parser eats all available memory when parsing the three-character
> string "N A" using this three-line grammar:
> 
> grammar mml;
> mml     : 'R' ;
> SPACE   : (' ')* ;
> 
> What is wrong ?


From dave at badgers-in-foil.co.uk  Tue Sep 25 08:13:30 2007
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Tue, 25 Sep 2007 15:13:30 +0000
Subject: [antlr-interest] Memory explosion
In-Reply-To: <46F91F6F.4020509@alcatel-lucent.fr>
References: <46F91F6F.4020509@alcatel-lucent.fr>
Message-ID: <20070925151324.GB4313@badgers-in-foil.co.uk>

On Tue, Sep 25, 2007 at 04:47:11PM +0200, Dominique.Duflos at alcatel-lucent.fr wrote:
> Hi all,
> The parser eats all available memory when parsing the three-character 
> string "N A" using this three-line grammar:
> 
> grammar mml;
> mml     : 'R' ;
> SPACE   : (' ')* ;

What if you have,
  SPACE   : ' '+ ;

?

-- 
http://david.holroyd.me.uk/

From bpierson at theglobal.net  Tue Sep 25 08:35:24 2007
From: bpierson at theglobal.net (Bruce Pierson)
Date: Tue, 25 Sep 2007 09:35:24 -0600
Subject: [antlr-interest] A newbie having problems creating his
	firstgrammar...
In-Reply-To: <a791b4be0709250222j30f52b07t8c0342a690f38852@mail.gmail.com>
References: <a791b4be0709250222j30f52b07t8c0342a690f38852@mail.gmail.com>
Message-ID: <017701c7ff89$b169eca0$0201a8c0@BRUCE>

Niklas:

 

I would recommend adding this:

 

query

          :        opExpr EOF!

          ;

 

However, when I run your grammar and do a recursive tree printout (even w/o
the query rule), the parens balance just fine
 3 lefts and 3 rights on the
sample you sent


 

0: nil

0: <OR>

1: (

2: <WILDCARD>

3: (

4: `abc*`

5: )

6: ,

7: <WILDCARD>

8: (

9: `qwe*`

10: )

11: )

 

This was output with:

 

            public static void Main(string[] args)

            {

                  //--Query

                  Lexer lexer = new QueryLexer(new ANTLRStringStream(

                        "<OR>(<WILDCARD>(`abc*`),<WILDCARD>(`qwe*`))"));

                  Parser parser = new QueryParser(new
CommonTokenStream(lexer));

 

                  ITree tree = (ITree)((QueryParser)parser).opExpr().Tree as
ITree;

                  WriteTree(tree, 0);

 

            }

 

            private static void WriteTree(ITree tree, int index)

            {

                  Console.WriteLine(String.Format("{0}: {1}", index, tree));

                  for (int i = 0; i < tree.ChildCount; i++)

                        WriteTree(tree.GetChild(i), i);

            }

 

Your grammar looks rather ?lisp-like? (i.e., prefix notation) so you may
want to consider what would be a much easier parser, something that would
look for;

 

(and expr expr (or expr expr (not expr)))

 

Where the (and, (or, and (not are functions that always begin with ?(?. I
have the beginnings of a lisp parser that does some AST rewrites if you want
to look at it and modify it for your own use.

 

--Bruce

 

 

  _____  

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Niklas S?derberg
Sent: Tuesday, September 25, 2007 3:23 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] A newbie having problems creating his
firstgrammar...

 

 

Hi all! A newbie here, just discovered Antlr and it seems like an awesome
tool! I'm trying to create a grammar for a querylanguage I need to parse in
c# and I'm totally stuck, perhaps some kind soul out there could point me in
the right direction... feel free to comment my grammar as well, perhaps I'm
going at this all wrong? 

 

My problem is that when I run my grammar in the AntlrWorks interpreter, the
last parenthesis in my input is "lost", the interpreter runs without error
and displays the grammar treegraph, but the tree is "unbalanced" with the
last parenthesis missing, and I can't understand what in my rules are
causing this behaviour? 

 

It's probably a silly mistake on my part, but obviously I can't see it.

 

I figured it should be easier to start small, so I picked a piece of the
input and started working on that, but I can't even get this to work as
expected:-/ The small sample input I'm trying to parse is this: 

 

<OR>(<WILDCARD>(`abc*`),<WILDCARD>(`qwe*`))

 

using this grammar:

grammar Query; 

options 
{
language = 'CSharp'; 
output=AST;
} 

fragment KEYWORD_BEGIN : '<';
fragment KEYWORD_END : '>';
fragment KEYWORD_LIST 
 : ('WILDCARD' | 'OR' | 'AND' | 'WORD' | 'CASE' )
 ;

KEYWORD
 : (KEYWORD_BEGIN KEYWORD_LIST KEYWORD_END)
 ;

opExpr  : operation (',' operation)*
 | KEYWORD '(' opExpr ')'
 ;

operation
 : (KEYWORD '(' STRING_LITERAL ')')
 ;

INTLIT  : ('0'..'9')+; 
STRING_LITERAL : ('`'! (~('`'|'\n'|'\r'))+ '`'!);
WS : (' ' | '\t' | '\f' | '\r\n' | '\r' | '\n') { channel = HIDDEN; }; 

Thanks in advance for any help,
Niklas 

If anyone is interested, here is a sample of a complete query that I want to
parse:

<AND>(((<OR>(<WILDCARD>(`string1*`),<NEAR/5>(<OR>(<WILDCARD>(`string2*`)),<O
R>(<WILDCARD>(`string3*`))),<NEAR/5>(<OR>(<CASE><WORD>(`string4`),<CASE><WOR
D>(`string5`)),<OR>(<WILDCARD>(`string6*`),<WILDCARD>(`string7*`),<WILDCARD>
(`string8*`),<WILDCARD>(`string9*`),<WILDCARD>(`string10*`),<WILDCARD>(`stri
ng11*`)))))<IN>(MAINTITLE,SUBTITLE,INGRESS,ARTICLETEXT)),(<OR>(<WORD>4617,<W
ORD>4619,<WORD>4620)<IN>(SOURCE_ID))) 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070925/81665408/attachment-0001.html 

From bpierson at theglobal.net  Tue Sep 25 09:01:37 2007
From: bpierson at theglobal.net (Bruce Pierson)
Date: Tue, 25 Sep 2007 10:01:37 -0600
Subject: [antlr-interest] A newbie having problems creating his
	firstgrammar...
In-Reply-To: <a791b4be0709250222j30f52b07t8c0342a690f38852@mail.gmail.com>
References: <a791b4be0709250222j30f52b07t8c0342a690f38852@mail.gmail.com>
Message-ID: <017f01c7ff8d$5a911e40$0201a8c0@BRUCE>

Niklas:

 

I also noticed that you didn?t include any ?AST rewrite? rules in your
grammar. They are a bit difficult to grok, but worth the time to figure out.
Adding them to your grammar reduces the tree to:

 

0: <OR>

0: <WILDCARD>

0: `abc*`

1: <WILDCARD>

0: `qwe*`

 

Which would look like:

 

                             <OR>

                   /                           \

          <WILDCARD>          <WILDCARD>

                    /                            \

          ?abc*?                               ?qwe*?

 

It will then be much easier for you to traverse this and take appropriate
action.

 

Here?s the rewritten grammar:

 

grammar Query; 

options 

{

language = 'CSharp'; 

output=AST;

} 

fragment KEYWORD_BEGIN : '<';

fragment KEYWORD_END : '>';

fragment KEYWORD_LIST 

 : ('WILDCARD' | 'OR' | 'AND' | 'WORD' | 'CASE' )

 ;

KEYWORD

 : (KEYWORD_BEGIN KEYWORD_LIST KEYWORD_END)

 ;

 

query

          : opExpr EOF!

          ;

          

opExpr  : operation (',' operation)* -> ^(operation operation*) //rewrite
AST

 | KEYWORD '(' opExpr ')' -> ^(KEYWORD opExpr) // rewrite AST

 ;

operation

 : (KEYWORD '(' STRING_LITERAL ')') -> ^(KEYWORD STRING_LITERAL) // rewrite
AST

 ;

INTLIT  : ('0'..'9')+; 

STRING_LITERAL : ('`'! (~('`'|'\n'|'\r'))+ '`'!);

WS : (' ' | '\t' | '\f' | '\r\n' | '\r' | '\n') { channel = HIDDEN; };

 

--Bruce

 

  _____  

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Niklas S?derberg
Sent: Tuesday, September 25, 2007 3:23 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] A newbie having problems creating his
firstgrammar...

 

 

Hi all! A newbie here, just discovered Antlr and it seems like an awesome
tool! I'm trying to create a grammar for a querylanguage I need to parse in
c# and I'm totally stuck, perhaps some kind soul out there could point me in
the right direction... feel free to comment my grammar as well, perhaps I'm
going at this all wrong? 

 

My problem is that when I run my grammar in the AntlrWorks interpreter, the
last parenthesis in my input is "lost", the interpreter runs without error
and displays the grammar treegraph, but the tree is "unbalanced" with the
last parenthesis missing, and I can't understand what in my rules are
causing this behaviour? 

 

It's probably a silly mistake on my part, but obviously I can't see it.

 

I figured it should be easier to start small, so I picked a piece of the
input and started working on that, but I can't even get this to work as
expected:-/ The small sample input I'm trying to parse is this: 

 

<OR>(<WILDCARD>(`abc*`),<WILDCARD>(`qwe*`))

 

using this grammar:

grammar Query; 

options 
{
language = 'CSharp'; 
output=AST;
} 

fragment KEYWORD_BEGIN : '<';
fragment KEYWORD_END : '>';
fragment KEYWORD_LIST 
 : ('WILDCARD' | 'OR' | 'AND' | 'WORD' | 'CASE' )
 ;

KEYWORD
 : (KEYWORD_BEGIN KEYWORD_LIST KEYWORD_END)
 ;

opExpr  : operation (',' operation)*
 | KEYWORD '(' opExpr ')'
 ;

operation
 : (KEYWORD '(' STRING_LITERAL ')')
 ;

INTLIT  : ('0'..'9')+; 
STRING_LITERAL : ('`'! (~('`'|'\n'|'\r'))+ '`'!);
WS : (' ' | '\t' | '\f' | '\r\n' | '\r' | '\n') { channel = HIDDEN; }; 

Thanks in advance for any help,
Niklas 

If anyone is interested, here is a sample of a complete query that I want to
parse:

<AND>(((<OR>(<WILDCARD>(`string1*`),<NEAR/5>(<OR>(<WILDCARD>(`string2*`)),<O
R>(<WILDCARD>(`string3*`))),<NEAR/5>(<OR>(<CASE><WORD>(`string4`),<CASE><WOR
D>(`string5`)),<OR>(<WILDCARD>(`string6*`),<WILDCARD>(`string7*`),<WILDCARD>
(`string8*`),<WILDCARD>(`string9*`),<WILDCARD>(`string10*`),<WILDCARD>(`stri
ng11*`)))))<IN>(MAINTITLE,SUBTITLE,INGRESS,ARTICLETEXT)),(<OR>(<WORD>4617,<W
ORD>4619,<WORD>4620)<IN>(SOURCE_ID))) 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070925/24e6a1c5/attachment.html 

From aljeramm at hds.utc.fr  Tue Sep 25 09:30:14 2007
From: aljeramm at hds.utc.fr (aljer ammar)
Date: Tue, 25 Sep 2007 18:30:14 +0200
Subject: [antlr-interest] emit() does not work
Message-ID: <46F93796.3080005@hds.utc.fr>

hi,
 in my old grammar i used $setType(TT) in the lexer. I replaced it in 
the new version by emit(TT).  When i try to generate the lexer class, 
emit() methode is not recognized and i have on error. in the same 
grammar i have skip() methode thot does not make problems.
how may i forced the lexer to generate a specified token??
thank you,


Ammar


From bpierson at theglobal.net  Tue Sep 25 09:51:38 2007
From: bpierson at theglobal.net (Bruce Pierson)
Date: Tue, 25 Sep 2007 10:51:38 -0600
Subject: [antlr-interest] C# target poll
Message-ID: <019901c7ff94$57900f10$0201a8c0@BRUCE>

My 2c, I have not used 1.1 for ages, and if the code could get better by
dropping it, go for it. Great work, by the way, and thanks very much.

 

--Bruce

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070925/e94f67df/attachment-0001.html 

From ric.klaren at gmail.com  Tue Sep 25 10:06:25 2007
From: ric.klaren at gmail.com (Ric Klaren)
Date: Tue, 25 Sep 2007 19:06:25 +0200
Subject: [antlr-interest] language CPP ?
In-Reply-To: <f86f9f940709242254u47d6130fj77a982184836632e@mail.gmail.com>
References: <f86f9f940709242254u47d6130fj77a982184836632e@mail.gmail.com>
Message-ID: <bc607a4e0709251006g3b9cec3dj25c04532ea13f9e0@mail.gmail.com>

Hi,

On 9/25/07, Dmitry Lizorkin <dmitry.lizorkin at gmail.com> wrote:
> How should C++ be specified as a target language than? What search path is
> used for .stg files; can it be specified explicitly?

You specified right, yet the templates for C++ are out of date and the
work in progres runtime was never released. Due to circumstances I had
to stop developing it.

AFAIK Jim Idle intends to finish the C++ target.

For now you'll have to use the C target. Or use antlr 2.

Cheers,

Ric

From kenny at kmdconsulting.ca  Tue Sep 25 10:44:22 2007
From: kenny at kmdconsulting.ca (Kenny MacDermid)
Date: Tue, 25 Sep 2007 13:44:22 -0400
Subject: [antlr-interest] C# target poll
In-Reply-To: <46F4F39A.8010108@gmx.de>
References: <46F2EC97.8000502@gmx.de> <46F4F21D.60807@gmail.com>
	<46F4F39A.8010108@gmx.de>
Message-ID: <8367efd50709251044g298f5803y996c529e515406ef@mail.gmail.com>

On 9/22/07, Johannes Luber <jaluber at gmx.de> wrote:
> Stefan Klinger wrote:
> >
> > Another question, will the (development) source be available through
> > subversion or another version control system?
>
> We plan to make the sources available via Perforce. Simply ask Terence
> for a read-only account - or sign the contributor license for write access.

Slightly OT, but you can also 'git clone' from my unofficial repo:

http://code.kmdconsulting.ca/antlr.git/

Kenny

From nkaragas at hotmail.com  Tue Sep 25 21:09:01 2007
From: nkaragas at hotmail.com (Nicholas Karagas)
Date: Tue, 25 Sep 2007 21:09:01 -0700
Subject: [antlr-interest] (no subject)
Message-ID: <BAY103-W13F7C2FE5711DB71EFE1E2CDB00@phx.gbl>

Hi all,
 
I want to embed the C grammar in a C# program as an interpreted scripting language (what we use now is a rough approximation of C, and having the real C grammar would give us more functionality), and some searching brought me to Antlr.  I've played around with it a good deal now, and it's a great tool, but I'm getting to the point time-wise where I'd rather not re-invent the wheel if I don't have to, as fun as that may be.
 
I saw two example C grammars on the Antlr web site: a simple ISO C implementation in Antlr v3, and and GnuC extended one in Antlr v2.  I've gotten both built in their respective versions of Antlr, but neither one is quite right for my purposes.  The ISO C grammar doesn't build the ASTs (which would help me out a lot, compared to doing my own) and the GnuC grammar is written for v2 and I'm having trouble getting it to work with a C# target (I haven't seen any good examples of this in v2).  My question is, has anyone created an updated C grammar that outputs ASTs, preferably by updating the GnuC one to v3 (I wouldn't mind having the Gnu extensions)?
 
Thanks for any help!
 
Nick
 
_________________________________________________________________
Gear up for Halo? 3 with free downloads and an exclusive offer. It?s our way of saying thanks for using Windows Live?.
http://gethalo3gear.com?ocid=SeptemberWLHalo3_WLHMTxt_2
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070925/71b116de/attachment.html 

From Dominique.Duflos at alcatel-lucent.fr  Wed Sep 26 02:08:24 2007
From: Dominique.Duflos at alcatel-lucent.fr (Dominique.Duflos at alcatel-lucent.fr)
Date: Wed, 26 Sep 2007 11:08:24 +0200
Subject: [antlr-interest] Memory explosion
In-Reply-To: <08317523834bfb8808badf711de1fb20@www.martin-probst.com>
References: <46F91F6F.4020509@alcatel-lucent.fr>
	<08317523834bfb8808badf711de1fb20@www.martin-probst.com>
Message-ID: <46FA2188.9080402@alcatel-lucent.fr>

Martin Probst wrote:
> The SPACE token can be zero length, i.e. it probably produces _a lot_ of
> tokens for that rule.
>
> On Tue, 25 Sep 2007 16:47:11 +0200, Dominique.Duflos at alcatel-lucent.fr
> wrote:
>   
>> Hi all,
>> The parser eats all available memory when parsing the three-character
>> string "N A" using this three-line grammar:
>>
>> grammar mml;
>> mml     : 'R' ;
>> SPACE   : (' ')* ;
>>
>> What is wrong ?
>>     
>
>   
Thank you! I will avoid zero-length tokens in the future.
No more memory catastrophies after correcting the original grammar to
    SPACE : (' ')+ ;
and
    SPACE? instead of SPACE in the parser rules.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070926/402dca3a/attachment.html 

From masanasa at gmail.com  Wed Sep 26 04:48:22 2007
From: masanasa at gmail.com (Karel Bernolet)
Date: Wed, 26 Sep 2007 13:48:22 +0200
Subject: [antlr-interest] Inheritance with antlr 2.7.5
Message-ID: <a8c21f540709260448t5cc984e6te107932a65f022a5@mail.gmail.com>

Hello all,

I am writing a grammar where I would like to use inheritance. Consider the
following situation:

I have a base grammar that defines some datatypes:

class BaseGrammar extends Parser;
{
  public boolean checkCodeList(String s) {
      return true;
  }
}

datatype : t1:TOKEN t2:TOKEN  {checkCodeList(t1.getText(()+t2.getText())}?;


next to that I have this subgrammar that uses the common datatypes:

class SubGrammar extends BaseGrammar;

subgrammar: datatype;


now, when I compile the basegrammar, I get the following class:

class BaseGrammar extends antlr.LLkParser {
  public boolean checkCodeList(String s) {
    return true;
  }
  public void datatype() {
    //do the token stuff
    if (!checkCodeList(tokenString))
      throw new SemanticException("string");
  }
}

everything as expected. however, when I compile the subgrammar (with -glib
BaseGrammar.g option), I get the following class

class SubGrammar extends antlr.LLkParser {
  public void subgrammar() {
    datatype();
  }
  public void datatype() {
    //do the token stuff
    if (!checkCodeList(tokenString))
      throw new SemanticException("string");
  }
}

as you can see, in the subgrammar the 'checkCodeList' function was not
included causing compile errors.
My question is: is there any other way to give a generated parser a
superclass where I can write my common functions (to use in semantic
predicates), or is it possible to simple include the basegrammar instead of
using an option on the commandline?

did anyone else stumbled into this problem already and how did they solve
it?
My basegrammar file is 230 lines already, my first subgrammar is 450 lines.
I'll have to write at least 5 more of those subgrammars so putting
everything in 1 file is not really an option to me.

thanks in advance,
Karel

-- 
dont blame my OS for your laziness
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070926/ed74ecf3/attachment.html 

From peames at nexagent.com  Wed Sep 26 09:01:59 2007
From: peames at nexagent.com (Paul Eames)
Date: Wed, 26 Sep 2007 17:01:59 +0100
Subject: [antlr-interest] dynamic addition to a lexer rule.
Message-ID: <B2B4D3618441D941B811329A672FD64E04C7AD76@THHS2EXBE2X.hostedservice2.net>

Hi,
 
I'm evaluating whether I can use ANTLR to parse sentences in structured
English.
 
I have a number of rules around the valid combination of noun concepts,
verb parts, and rule keywords in my example grammar which I think I know
how to implement. My problem is that I cannot define the full grammar
until runtime as users of our system are able to define concepts of
interest to them. Is there a way to add to the alternatives of a lexer
rule at runtime?
 
As an example, imagine I had defined the following lexer rule in my
grammar:
 
NOUN : ( 'cat' | 'dog') ;
 
A user of our application may wish to define 'rodrigues fruit bat' as a
noun and when they do so I'd like to add that to the list of
alternatives for the lexer to match.
 
Many thanks,
Paul.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070926/120fb0a8/attachment.html 

From nkodidi at hotmail.com  Wed Sep 26 11:16:51 2007
From: nkodidi at hotmail.com (Nkonyereza Diane)
Date: Wed, 26 Sep 2007 18:16:51 +0000
Subject: [antlr-interest] Another newbie
Message-ID: <BAY142-W2552FC290C8571E26A20DA5B00@phx.gbl>


Hi all,
 
I am a computer science undergraduate student and I have to do a final year project.
 
Someone has suggested to me that I could base my project on writing a translator that will translate JACK into XML using ANTLR. JACK extends Java and has the concepts of agents - oriented programming.
 
I do not have any previous experience with JACK or ANTLR and basic knowlege in XML.
 
- Can anyone give me any advice on how to go about this.
- What knowledge do I require in other to undertake this project.
- Has anyone attempted to do this in the pass or anything similar.
 
Thanks in advance!
 
 
_________________________________________________________________
Feel like a local wherever you go.
http://www.backofmyhand.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070926/58ac7d59/attachment.html 

From masanasa at gmail.com  Wed Sep 26 13:19:06 2007
From: masanasa at gmail.com (Karel Bernolet)
Date: Wed, 26 Sep 2007 22:19:06 +0200
Subject: [antlr-interest] dynamic addition to a lexer rule.
In-Reply-To: <B2B4D3618441D941B811329A672FD64E04C7AD76@THHS2EXBE2X.hostedservice2.net>
References: <B2B4D3618441D941B811329A672FD64E04C7AD76@THHS2EXBE2X.hostedservice2.net>
Message-ID: <a8c21f540709261319k365ef6dfp94b09078948bbceb@mail.gmail.com>

Hi Paul,

as far as I know anything about antlr (only started using it a week ago),
you might use semantic predicates to achieve what you want to do.

you should have to change your rule in something like this:

LETTER: 'A'..'Z'
NOUN {String noun = new String();}: (x:LETTER {noun += x.getText();})+
{isValidNoun(noun);}?;

in the 'public boolean isValidNoun(String noun)' method you can query a db,
check in a file or anything else you  want.

it's the only way I can think of besides changing your grammar file on the
fly, regenerating  your parser and updating your classloader with the new
class file on the fly  ...

(note: if you don't use java as target language, change the code blocks in
the example to your target language).

I hope this helps.

On 9/26/07, Paul Eames <peames at nexagent.com> wrote:
>
>  Hi,
>
> I'm evaluating whether I can use ANTLR to parse sentences in structured
> English.
>
> I have a number of rules around the valid combination of noun concepts,
> verb parts, and rule keywords in my example grammar which I think I know how
> to implement. My problem is that I cannot define the full grammar until
> runtime as users of our system are able to define concepts of interest to
> them. Is there a way to add to the alternatives of a lexer rule at runtime?
>
> As an example, imagine I had defined the following lexer rule in my
> grammar:
>
> NOUN : ( 'cat' | 'dog') ;
>
> A user of our application may wish to define 'rodrigues fruit bat' as a
> noun and when they do so I'd like to add that to the list of alternatives
> for the lexer to match.
>
> Many thanks,
> Paul.
>



-- 
dont blame my OS for your laziness
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070926/1507fbf6/attachment.html 

From tom at atlassian.com  Wed Sep 26 15:52:57 2007
From: tom at atlassian.com (Tom Davies)
Date: Thu, 27 Sep 2007 08:52:57 +1000
Subject: [antlr-interest] Saving Lexer State?
Message-ID: <56862EA0-5836-4715-82D8-C0952197CC24@atlassian.com>

I'm trying to use an ANTLR 2.x lexer fir syntax highlighting in  
Intellij IDEA.

The lexer interface it assumes can save the state of the lexer (which  
is just a single int) and later restore it. This allows incremental  
re-lexing as you type.

Is there any way to do that with an ANTLR lexer? Obviously I can  
record the input string leading up to the state and simply re-lex it,  
but I'm wondering if there's a cheaper approach?

Thanks,
   Tom

From Jeremy.Sheldon at 90degreesoftware.com  Wed Sep 26 16:02:08 2007
From: Jeremy.Sheldon at 90degreesoftware.com (Jeremy Sheldon)
Date: Wed, 26 Sep 2007 16:02:08 -0700
Subject: [antlr-interest] Trying to resolve mutual left-recursion
Message-ID: <E50201DB165A4B4B98685715FAEE0DF0028C53@90dsvansv07.90DegreeSoftware.com>

Hi everyone,

 

I'm new to Antlr and have come up against mutual left-recursion for the
first time.  Despite doing some googling, I'm still struggling to try
and remove it.  Would anyone be kind enough to give me some pointers?

 

Here are the culprits:

 

query_expression

                : joined_table    

                |  non_join_query_expression;

                

non_join_query_expression

                :  non_join_query_term

                |  query_expression (UNION ALL | EXCEPT ALL)?
corresponding_spec? query_term;

 

Thanks in advance for your help,

Jeremy

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070926/dbb66b56/attachment.html 

From fyaoxy at gmail.com  Wed Sep 26 23:22:33 2007
From: fyaoxy at gmail.com (=?GB2312?B?z/LH2M/N?=)
Date: Thu, 27 Sep 2007 14:22:33 +0800
Subject: [antlr-interest] Another newbie
In-Reply-To: <BAY142-W2552FC290C8571E26A20DA5B00@phx.gbl>
References: <BAY142-W2552FC290C8571E26A20DA5B00@phx.gbl>
Message-ID: <91dd9a4f0709262322l7cd31604h5d74dc8412090c61@mail.gmail.com>

I know it few too:) but I will give some my ideas.
Since Jack is a java extension, so there should be some tool works.
java to xml easy, and from jack tool to java should be easy as well.
So if I do I will select this way.
Understand antlr from a simple grammar not so hard, but handle java
grammar and its extension not so easy.:)

2007/9/27, Nkonyereza Diane <nkodidi at hotmail.com>:
>
>  Hi all,
>
>  I am a computer science undergraduate student and I have to do a final year
> project.
>
>  Someone has suggested to me that I could base my project on writing a
> translator that will translate JACK into XML using ANTLR. JACK extends Java
> and has the concepts of agents - oriented programming.
>
>  I do not have any previous experience with JACK or ANTLR and basic knowlege
> in XML.
>
>  - Can anyone give me any advice on how to go about this.
>  - What knowledge do I require in other to undertake this project.
>  - Has anyone attempted to do this in the pass or anything similar.
>
>  Thanks in advance!
>
>
>
> ________________________________
> Do you know a place like the back of your hand? Share local knowledge with
> BackOfMyHand.com


-- 
??
???

From fyaoxy at gmail.com  Wed Sep 26 23:36:55 2007
From: fyaoxy at gmail.com (=?GB2312?B?z/LH2M/N?=)
Date: Thu, 27 Sep 2007 14:36:55 +0800
Subject: [antlr-interest] Trying to resolve mutual left-recursion
In-Reply-To: <E50201DB165A4B4B98685715FAEE0DF0028C53@90dsvansv07.90DegreeSoftware.com>
References: <E50201DB165A4B4B98685715FAEE0DF0028C53@90dsvansv07.90DegreeSoftware.com>
Message-ID: <91dd9a4f0709262336s45302a74ne0334e627cb94b11@mail.gmail.com>

I try it:)
At first let me rewrite by math-like style
query=join | noj    1)
noj = nojterm | query others 2)
let we replace noj of 1) by use 2), so get
query = join | (nojterm | query others)    3)
so (soooorry for my english), get
query = join | nojterm | query others 4)
query = join | nojterm | (join | nojterm | query others) others 4)
and so concludise join and nojterm times, maybe like
query = (join | nojterm)+ others
:)
Could you give some grammar target details?

2007/9/27, Jeremy Sheldon <Jeremy.Sheldon at 90degreesoftware.com>:
>
>
>
>
> Hi everyone,
>
>
>
> I'm new to Antlr and have come up against mutual left-recursion for the
> first time.  Despite doing some googling, I'm still struggling to try and
> remove it.  Would anyone be kind enough to give me some pointers?
>
>
>
> Here are the culprits:
>
>
>
> query_expression
>
>                 : joined_table
>
>                 |  non_join_query_expression;
>
>
>
> non_join_query_expression
>
>                 :  non_join_query_term
>
>                 |  query_expression (UNION ALL | EXCEPT ALL)?
> corresponding_spec? query_term;
>
>
>
> Thanks in advance for your help,
>
> Jeremy


-- 
??
???

From lloy0076 at adam.com.au  Wed Sep 26 23:39:01 2007
From: lloy0076 at adam.com.au (David Lloyd)
Date: Thu, 27 Sep 2007 16:09:01 +0930
Subject: [antlr-interest] Another newbie
In-Reply-To: <91dd9a4f0709262322l7cd31604h5d74dc8412090c61@mail.gmail.com>
References: <BAY142-W2552FC290C8571E26A20DA5B00@phx.gbl>
	<91dd9a4f0709262322l7cd31604h5d74dc8412090c61@mail.gmail.com>
Message-ID: <46FB5005.9060201@adam.com.au>


Well,

> 2007/9/27, Nkonyereza Diane <nkodidi at hotmail.com>:
>  Someone has suggested to me that I could base my project on writing a
> translator that will translate JACK into XML using ANTLR. JACK extends Java
> and has the concepts of agents - oriented programming.

There is a grammar that states it is mostly, if not completely, 
compliant with Java 1.5 on ANTLv3's web-site. Its written by Terrence 
Parr (who is the lead developer for ANTLR itself).

It's not clear what type of "license" it has, so it would be best to ask 
Terrence if it's all right to use in your work. Also, if your project 
says you can't "borrow" large parts of your work, then obviously you 
shouldn't use it.

Just a thought.

There's also a tool called ANTXR.

DSL

From Kruithof at jive.nl  Wed Sep 26 23:59:17 2007
From: Kruithof at jive.nl (Nico Kruithof)
Date: Thu, 27 Sep 2007 08:59:17 +0200
Subject: [antlr-interest] Problem with the C treeparser.
In-Reply-To: <BAY118-DS280C3526ACBA261377B9886BB0@phx.gbl>
References: <1190361694.14056.19.camel@jop54.nfra.nl>
	<BAY118-DS280C3526ACBA261377B9886BB0@phx.gbl>
Message-ID: <1190876358.14056.68.camel@jop54.nfra.nl>

Hi Jim,

Did you already have time to take a look? I can try to debug it myself
as well. Some hints would then be usefull. It seems the program
segfaults when I try to access the getText(id). Where does it get the
string from? Is it stored in a large array and referenced by a begin and
end pointer in that array?

Bests,
Nico


On Fri, 2007-09-21 at 11:59 +0100, Jim Idle wrote:
> I'll take a look over the next few days and see if it is a runtime bug.
> 
> Jim
> 
> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > bounces at antlr.org] On Behalf Of Nico Kruithof
> > Sent: 21 September 2007 09:02
> > To: antlr-interest at antlr.org
> > Subject: [antlr-interest] Problem with the C treeparser.
> > 
> > Hello,
> > 
> > I get this weird error with the C-tree parser (antlr-3.0.1) and I have
> > no clue what is going wrong. I wrote a simple grammar that reads in
> > words and stores them in the default AST. Then a tree-parser goes over
> > the tree and prints out the words. Now, everything is fine for 'small'
> > files (<130k), but for larger files, the program segfaults in a memmove
> > that is called from libantlr3c.so. Attached is the sample code, which
> > is as small as possible. A "make main && ./main test.in" should work.
> > If you remove the last line from test.in, the program runs fine.
> > 
> > I would be happy if someone could verify the error and tell me what is
> > wrong.
> > 
> > Thanks in advance,
> > Nico Kruithof
> 
> 


From matthew.bowman at sogotech.com  Thu Sep 27 00:03:53 2007
From: matthew.bowman at sogotech.com (Matthew Bowman)
Date: Thu, 27 Sep 2007 10:03:53 +0300
Subject: [antlr-interest] Token Memory / Insertion
Message-ID: <46FB55D9.8010403@sogotech.com>

I have a simple problem that I thought would be easy enough ... but as 
usual I was wrong :(

I have rules in my grammar like so ... (this is simplified of course)

foo : FOO '(' a=NUM ',' b=NUM ')' -> ^(FUNC FOO $a $b)
{ memory.put("a", $a); memory.put("b", $b); };
FOO : 'foo' {barEnabled=true;};

bar : BAR -> ^(FUNC BAR)
BAR : {barEnabled}?=> 'bar';

Now in this example bar is a valid function iff foo appears before it 
(and I have this working with gates). However, the 2 NUM arguments to 
the foo function need to be passed to the bar function (with having to 
retype them). I've tried keeping the Tokens that are parsed at foo and 
can't figure a way to create a rewrite rule in bar that manages to do 
something like this ...

bar : BAR -> ^(FUNC BAR {memory.get("a");} {memory.get("b");} );

Is this even close and/or possible?

Thanks in advance!

-- 
Matthew Bowman


From niklas.soderberg at gmail.com  Thu Sep 27 00:41:23 2007
From: niklas.soderberg at gmail.com (=?ISO-8859-1?Q?Niklas_S=F6derberg?=)
Date: Thu, 27 Sep 2007 09:41:23 +0200
Subject: [antlr-interest] A newbie having problems creating his
	firstgrammar...
In-Reply-To: <017f01c7ff8d$5a911e40$0201a8c0@BRUCE>
References: <a791b4be0709250222j30f52b07t8c0342a690f38852@mail.gmail.com>
	<017f01c7ff8d$5a911e40$0201a8c0@BRUCE>
Message-ID: <a791b4be0709270041u4a9a4d4fgb22ed9b8b6d7345f@mail.gmail.com>

Bruce,
Thanks a lot for your tips! As you say, when I output the tree in c# code, I
also got the expected results regarding parens. I guess I was too focussed
on the AntlrWorks diagram to test the actual generated code. Adding the
"EOF!" that you mentioned also made it look correct in the AntlrWorks
interpreter diagram. Thanks!

I would be very interested in looking at your start of the lisp-parser, it
would probably give me some fresh ideas on how to attack my problem.

The AST rewrite rules sure made the tree more simplified. I searched for
some documentation on the syntax, but couldn't find any. Do you happen to
know where I should look?

Thanks again!
Niklas



On 9/25/07, Bruce Pierson <bpierson at theglobal.net> wrote:
>
>  Niklas:
>
>
>
> I also noticed that you didn't include any "AST rewrite" rules in your
> grammar. They are a bit difficult to grok, but worth the time to figure out.
> Adding them to your grammar reduces the tree to:
>
>
>
> 0: <OR>
>
> 0: <WILDCARD>
>
> 0: `abc*`
>
> 1: <WILDCARD>
>
> 0: `qwe*`
>
>
>
> Which would look like:
>
>
>
>                              <OR>
>
>                    /                           \
>
>           <WILDCARD>          <WILDCARD>
>
>                     /                            \
>
>           'abc*'                               'qwe*'
>
>
>
> It will then be much easier for you to traverse this and take appropriate
> action.
>
>
>
> Here's the rewritten grammar:
>
>
>
> grammar Query;
>
> options
>
> {
>
> language = 'CSharp';
>
> output=AST;
>
> }
>
> fragment KEYWORD_BEGIN : '<';
>
> fragment KEYWORD_END : '>';
>
> fragment KEYWORD_LIST
>
>  : ('WILDCARD' | 'OR' | 'AND' | 'WORD' | 'CASE' )
>
>  ;
>
> KEYWORD
>
>  : (KEYWORD_BEGIN KEYWORD_LIST KEYWORD_END)
>
>  ;
>
>
>
> query
>
>           : opExpr EOF!
>
>           ;
>
>
>
> opExpr  : operation (',' operation)* -> ^(operation operation*) //rewrite
> AST
>
>  | KEYWORD '(' opExpr ')' -> ^(KEYWORD opExpr) // rewrite AST
>
>  ;
>
> operation
>
>  : (KEYWORD '(' STRING_LITERAL ')') -> ^(KEYWORD STRING_LITERAL) //
> rewrite AST
>
>  ;
>
> INTLIT  : ('0'..'9')+;
>
> STRING_LITERAL : ('`'! (~('`'|'\n'|'\r'))+ '`'!);
>
> WS : (' ' | '\t' | '\f' | '\r\n' | '\r' | '\n') { channel = HIDDEN; };
>
>
>
> --Bruce
>
>
>  ------------------------------
>
> *From:* antlr-interest-bounces at antlr.org [mailto:
> antlr-interest-bounces at antlr.org] *On Behalf Of *Niklas S?derberg
> *Sent:* Tuesday, September 25, 2007 3:23 AM
> *To:* antlr-interest at antlr.org
> *Subject:* [antlr-interest] A newbie having problems creating his
> firstgrammar...
>
>
>
>
>
> Hi all! A newbie here, just discovered Antlr and it seems like an awesome
> tool! I'm trying to create a grammar for a querylanguage I need to parse in
> c# and I'm totally stuck, perhaps some kind soul out there could point me in
> the right direction... feel free to comment my grammar as well, perhaps I'm
> going at this all wrong?
>
>
>
> My problem is that when I run my grammar in the AntlrWorks interpreter,
> the last parenthesis in my input is "lost", the interpreter runs without
> error and displays the grammar treegraph, but the tree is "unbalanced" with
> the last parenthesis missing, and I can't understand what in my rules are
> causing this behaviour?
>
>
>
> It's probably a silly mistake on my part, but obviously I can't see it.
>
>
>
> I figured it should be easier to start small, so I picked a piece of the
> input and started working on that, but I can't even get this to work as
> expected:-/ The small sample input I'm trying to parse is this:
>
>
>
> <OR>(<WILDCARD>(`abc*`),<WILDCARD>(`qwe*`))
>
>
>
> using this grammar:
>
> grammar Query;
>
> options
> {
> language = 'CSharp';
> output=AST;
> }
>
> fragment KEYWORD_BEGIN : '<';
> fragment KEYWORD_END : '>';
> fragment KEYWORD_LIST
>  : ('WILDCARD' | 'OR' | 'AND' | 'WORD' | 'CASE' )
>  ;
>
> KEYWORD
>  : (KEYWORD_BEGIN KEYWORD_LIST KEYWORD_END)
>  ;
>
> opExpr  : operation (',' operation)*
>  | KEYWORD '(' opExpr ')'
>  ;
>
> operation
>  : (KEYWORD '(' STRING_LITERAL ')')
>  ;
>
> INTLIT  : ('0'..'9')+;
> STRING_LITERAL : ('`'! (~('`'|'\n'|'\r'))+ '`'!);
> WS : (' ' | '\t' | '\f' | '\r\n' | '\r' | '\n') { channel = HIDDEN; };
>
> Thanks in advance for any help,
> Niklas
>
> If anyone is interested, here is a sample of a complete query that I want
> to parse:
>
> <AND>(((<OR>(<WILDCARD>(`string1*`),<NEAR/5>(<OR>(<WILDCARD>(`string2*`)),<OR>(<WILDCARD>(`string3*`))),<NEAR/5>(<OR>(<CASE><WORD>(`string4`),<CASE><WORD>(`string5`)),<OR>(<WILDCARD>(`string6*`),<WILDCARD>(`string7*`),<WILDCARD>(`string8*`),<WILDCARD>(`string9*`),<WILDCARD>(`string10*`),<WILDCARD>(`string11*`)))))<IN>(MAINTITLE,SUBTITLE,INGRESS,ARTICLETEXT)),(<OR>(<WORD>4617,<WORD>4619,<WORD>4620)<IN>(SOURCE_ID)))
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070927/9dfdcabe/attachment.html 

From antlr at mirality.co.nz  Thu Sep 27 00:48:48 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 27 Sep 2007 19:48:48 +1200
Subject: [antlr-interest] Saving Lexer State?
In-Reply-To: <56862EA0-5836-4715-82D8-C0952197CC24@atlassian.com>
References: <56862EA0-5836-4715-82D8-C0952197CC24@atlassian.com>
Message-ID: <20070927074847.BA79411EB51@www.antlr.org>

At 10:52 27/09/2007, Tom Davies wrote:
 >The lexer interface it assumes can save the state of the lexer
 >(which is just a single int) and later restore it. This allows
 >incremental re-lexing as you type.
 >
 >Is there any way to do that with an ANTLR lexer? Obviously I 
can
 >record the input string leading up to the state and simply 
re-lex
 >it, but I'm wondering if there's a cheaper approach?

I forget the exact syntax, but ANTLR lexers provide mark and 
rewind functions that may do what you want.


From tbrandonau at gmail.com  Thu Sep 27 11:57:00 2007
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Fri, 28 Sep 2007 04:57:00 +1000
Subject: [antlr-interest] Saving Lexer State?
In-Reply-To: <56862EA0-5836-4715-82D8-C0952197CC24@atlassian.com>
References: <56862EA0-5836-4715-82D8-C0952197CC24@atlassian.com>
Message-ID: <ebc876d70709271157h32b8960ha3c107c8b036aad3@mail.gmail.com>

On 9/27/07, Tom Davies <tom at atlassian.com> wrote:
> I'm trying to use an ANTLR 2.x lexer fir syntax highlighting in
> Intellij IDEA.
>
> The lexer interface it assumes can save the state of the lexer (which
> is just a single int) and later restore it. This allows incremental
> re-lexing as you type.
>
> Is there any way to do that with an ANTLR lexer? Obviously I can
> record the input string leading up to the state and simply re-lex it,
> but I'm wondering if there's a cheaper approach?
I have implemented incremental lexing on top of ANTLR3 and the method
would apply to ANTLR 2.x. The algorithm I used is from Tim Wagner of
the Harmonia project
(http://www.cs.berkeley.edu/~harmonia/harmonia/index.html). It is
detailed in General Incremental Lexical Analysis, available from the
Harmonia site. It is not especially complicated to implement once you
get your head around it.
It involves tracking the lookahead used by each token so that when the
document is altered the set of tokens that relied on characters that
were changed can be found and re-lexed. Any lexer state (variables
used in predicates) must also be tracked for each token.
I'm not familiar with IDEA APIs so not sure how easy it would be to
plug into it. It was easy enough to hook into eclipse. Sounds like the
IDEA APIs you mention are at a higher level, not sure how they do the
invalidating and re-syncing of the token stream so they may or may not
be appropriate. This will also depend on how complex your lexer is. If
there are lower level APIs then you may be able to use those, you just
need to be able to get the extents of the document change and provide
a token region that was invalidated.

Tom.
>
> Thanks,
>    Tom
>

From arto.viitanen at pp4.inet.fi  Thu Sep 27 12:12:35 2007
From: arto.viitanen at pp4.inet.fi (Arto Viitanen)
Date: Thu, 27 Sep 2007 22:12:35 +0300
Subject: [antlr-interest] What does empty subrule mean?
Message-ID: <46FC00A3.5080708@pp4.inet.fi>

I had following in my antlr 3 .g file:

statement
   :
    | (ID '(' argumentList ')' ';' )=> procedureCall
    |  ('break'  ) => 'break' ';' -> ^(STAT 'break')
    | ('continue' ) => 'continue' ';' -> ^(STAT 'continue')
    ....

I had had procedure calls that needed at least one argument. Then I
noticed that it should be possible to have
procedure calls without any arguments. So I tried both

(ID ';') => procedureCall

and making argumentList something like argument* (ok, with commas). So I
removed the first line, but left
the | mark. This made the antlr tool generate lots of warnings, but no
error. Of course, it took sometime, before
I noticed the extra | ...

So, why is

rule : | subrule | subrule ...

allowed and what does it mean?

--
Arto Viitanen

From antlr at mirality.co.nz  Thu Sep 27 12:53:04 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 28 Sep 2007 07:53:04 +1200
Subject: [antlr-interest] What does empty subrule mean?
In-Reply-To: <46FC00A3.5080708@pp4.inet.fi>
References: <46FC00A3.5080708@pp4.inet.fi>
Message-ID: <20070927195314.68D2311EBAA@www.antlr.org>

At 07:12 28/09/2007, Arto Viitanen wrote:
 >So, why is
 >
 >rule : | subrule | subrule ...
 >
 >allowed and what does it mean?

It means "nothing or subrule 1 or subrule2", as you'd expect.  ie. 
it's functionally equivalent to this:

rule : (subrule | subrule ...)?


From Daniel.Pitts at cnet.com  Thu Sep 27 14:18:34 2007
From: Daniel.Pitts at cnet.com (Daniel Pitts)
Date: Thu, 27 Sep 2007 14:18:34 -0700
Subject: [antlr-interest] Newbie question: ignoring tokens,
	or is there a better way?
Message-ID: <43140249D1041D48A8D86EEF052E525E0FC1AE@C12-E2K3-MBOX03.cnet.cnwk>

Basically,  my input is something like:
 
something{
value: >>>
This is the text
<<<
}
 
I want a rule that can give me as a value "This is the text".
I've tried: 
 
LQS: LQSS *options {greedy=false;} : .)* LQSE;
LQSS : '>>>\n';
LQSE: '\n<<<';
 
and I've tried using channel=HIDDEN on LQSS and LQSE, but then I get
errors while parsing other parts of my source.
 
I have a work around, but its ugly.  I have a rule 
 
lstring returns [String value]: LQS
{value=$LQS.getText().replaceFirst(">>>\n","").replaceFirst("\n<<<$",
"");};
 
but that seems like an awful big hack.  Any suggestions?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070927/5e7ecde2/attachment.html 

From kenny at kmdconsulting.ca  Thu Sep 27 16:51:45 2007
From: kenny at kmdconsulting.ca (Kenny MacDermid)
Date: Thu, 27 Sep 2007 19:51:45 -0400
Subject: [antlr-interest] getTree() returns Object,
	whereas .tree allows access to correct object type
Message-ID: <8367efd50709271651t46e9c676y861e3dad1d88cae1@mail.gmail.com>

Hello,

I was wondering if there is a known reason why I can't use:

parser.rule().getTree().toStringTree();

and instead have to use:

parser.rule().tree.toStringTree();

I have specified a ASTLabelType in the options. Should this not also
be used for the generated return value?

The generated code is:

    public static class rule_return extends ParserRuleReturnScope {
        CommonTree tree;
        public Object getTree() { return tree; }
    };

Thanks,

Kenny

From sanoymathew at hp.com  Thu Sep 27 21:19:17 2007
From: sanoymathew at hp.com (Mathew, Sanoy P (IUM))
Date: Fri, 28 Sep 2007 09:49:17 +0530
Subject: [antlr-interest] UTF8String is not recognized by smi-asn grammar
Message-ID: <7496B97B2FDFD443B185F157079888B102C8E8FD@bgeexc05.asiapacific.cpqcorp.net>

Hi,

It looks like SMI/SPPI/ASN.1 parser file has the wrong token name for
UTF8String. In the smi-asn.g file it is
UTF8STRING_KW = "UTF8String" ;. Shouldn't it be UTF8_STR_KW =
"UTF8String" as the 'character_set returns' target is referring it as
'UTF8_STR_KW'

Thanks
sanoy

From kenny at kmdconsulting.ca  Thu Sep 27 21:26:48 2007
From: kenny at kmdconsulting.ca (Kenny MacDermid)
Date: Fri, 28 Sep 2007 00:26:48 -0400
Subject: [antlr-interest] Release 3.0.1 doesn't work in eclipse
Message-ID: <8367efd50709272126o5ae8f645peecd8cb27c3f310d@mail.gmail.com>

Hello,

I've noticed that if I try to upgrade to 3.0.1 in eclipse my project
will no longer compile.

I receive the error:

The type antlr.RecognitionException cannot be resolved. It is
indirectly referenced from required .class files

I see RecognitionException was moved to org.antlr.runtime. Which I
have updated in my source files, unfortunately the
org.antlr.tool.BuildDependencyGenerator still references
antlr.RecognitionException  (as do other files in this release). This
can be seen in revision 3530 for this file.

Kenny

From matthew.bowman at sogotech.com  Fri Sep 28 00:28:59 2007
From: matthew.bowman at sogotech.com (Matthew Bowman)
Date: Fri, 28 Sep 2007 10:28:59 +0300
Subject: [antlr-interest] AST + template output ???
Message-ID: <46FCAD3B.3060806@sogotech.com>

Just got my hands on _the_ book ... great book Ter!

However, I'm a bit confused about "Rewriting the Token Buffer..." The 
current problem that I have is with a mini-scripting language that will 
make heavy use of "aliases". For example, a built-in function can have 
the syntax "foo(x)" where x is a number. But I want someone to be able 
use an alias like "bar" such that "foo(0)" is actually what gets 
interpreted by the tree walker. Currently I have a lexer/parser grammar 
for AST construction and a tree grammar for walking/interpreting. I can 
see the power of output=template from the examples in the book, but I 
can't see how they fit in the "pipeline" of  Lexer -> TokenStream -> 
Parser -> NodeStream -> Walker. All of the examples show calling 
tokens.toString() to get the rewritten token buffer. That makes me think 
I need two sets of parsers. One to actuall "preprocess" any aliases and 
then one to parse the preprocessed input into an AST. Then finally my 
tree walker could interpret the AST. Wouldn't this require me to pretty 
much duplicate the parsing logic in the AST parser I currently have? Or 
am I completely missing the "big" picture of output=template?

Further, the book has a "Rewriting the Token Buffer with Tree Grammars" 
(Section 9.8) example that still ends up doing the same thing in the end 
- calling tokens.toString() to get the rewritten buffer. My initial 
thought would be to actually replace the token for "bar" [BAR] with the 
tokens for "foo(x)" [FOO LPAREN NUM RPAREN] but I just don't see how 
that is possible if at all.

Am I an r-tard or is what I want to accomplish not even feasible with ANTLR?

PS - If you don't have the book ... go buy it! It's totally worth it.

-- 
Matthew Bowman



From aljeramm at hds.utc.fr  Fri Sep 28 04:52:22 2007
From: aljeramm at hds.utc.fr (aljer ammar)
Date: Fri, 28 Sep 2007 13:52:22 +0200
Subject: [antlr-interest] No case sesitive option in ANTLR 3 ??
Message-ID: <46FCEAF6.2000904@hds.utc.fr>

Hi everybody,
I wrote my grammar in ANTLR. I was supprised to find that there is no 
SensitiveCase Options as in version 2.7 . I tried to creat 2 alternative 
for each token in the lexer like this :

ATOKEN : ATOKEN
                  |  atoken
                  ;

this gave me an error of memory size.

hve u any soluation?




From scott at javadude.com  Fri Sep 28 05:29:06 2007
From: scott at javadude.com (scott at javadude.com)
Date: Fri, 28 Sep 2007 08:29:06 -0400 (EDT)
Subject: [antlr-interest] Release 3.0.1 doesn't work in eclipse
In-Reply-To: <8367efd50709272126o5ae8f645peecd8cb27c3f310d@mail.gmail.com>
References: <8367efd50709272126o5ae8f645peecd8cb27c3f310d@mail.gmail.com>
Message-ID: <50461.138.88.37.184.1190982546.squirrel@javadude.com>

Grab the latest version of the plugin from update-site
http://javadude.com/eclipse/update.

-- Scott

> Hello,
>
> I've noticed that if I try to upgrade to 3.0.1 in eclipse my project
> will no longer compile.
>
> I receive the error:
>
> The type antlr.RecognitionException cannot be resolved. It is
> indirectly referenced from required .class files
>
> I see RecognitionException was moved to org.antlr.runtime. Which I
> have updated in my source files, unfortunately the
> org.antlr.tool.BuildDependencyGenerator still references
> antlr.RecognitionException  (as do other files in this release). This
> can be seen in revision 3530 for this file.
>
> Kenny
>


From kenny at kmdconsulting.ca  Fri Sep 28 06:17:23 2007
From: kenny at kmdconsulting.ca (Kenny MacDermid)
Date: Fri, 28 Sep 2007 09:17:23 -0400
Subject: [antlr-interest] Release 3.0.1 doesn't work in eclipse
In-Reply-To: <50461.138.88.37.184.1190982546.squirrel@javadude.com>
References: <8367efd50709272126o5ae8f645peecd8cb27c3f310d@mail.gmail.com>
	<50461.138.88.37.184.1190982546.squirrel@javadude.com>
Message-ID: <8367efd50709280617l8a94273x8bf321cce6e0c10@mail.gmail.com>

Hi Scott,

Thanks for the suggestion. I'm not actually using the plugin but
trying to link against the real libraries. Does your plugin contain a
custom compiled version of 3.0.1?

Either way this really should be fixed in the library.

Kenny

On 9/28/07, scott at javadude.com <scott at javadude.com> wrote:
> Grab the latest version of the plugin from update-site
> http://javadude.com/eclipse/update.
>
> -- Scott
>
> > Hello,
> >
> > I've noticed that if I try to upgrade to 3.0.1 in eclipse my project
> > will no longer compile.
> >
> > I receive the error:
> >
> > The type antlr.RecognitionException cannot be resolved. It is
> > indirectly referenced from required .class files
> >
> > I see RecognitionException was moved to org.antlr.runtime. Which I
> > have updated in my source files, unfortunately the
> > org.antlr.tool.BuildDependencyGenerator still references
> > antlr.RecognitionException  (as do other files in this release). This
> > can be seen in revision 3530 for this file.
> >
> > Kenny
> >
>
>

From cummings at kjchome.homeip.net  Fri Sep 28 09:10:48 2007
From: cummings at kjchome.homeip.net (Kevin J. Cummings)
Date: Fri, 28 Sep 2007 12:10:48 -0400
Subject: [antlr-interest] No case sesitive option in ANTLR 3 ??
In-Reply-To: <46FCEAF6.2000904@hds.utc.fr>
References: <46FCEAF6.2000904@hds.utc.fr>
Message-ID: <46FD2788.3050002@kjchome.homeip.net>

aljer ammar wrote:
> Hi everybody,
> I wrote my grammar in ANTLR. I was supprised to find that there is no
> SensitiveCase Options as in version 2.7 . I tried to creat 2 alternative
> for each token in the lexer like this :
> 
> ATOKEN : ATOKEN
>                  |  atoken
>                  ;
> 
> this gave me an error of memory size.
> 
> hve u any soluation?

Sorry, no solution, but true case insensitivity is going to take many
more than just 2 cases per token (directly depends on the length of each
token), and is truly immense when you have identifiers that need to be
case insensitive....

-- 
Kevin J. Cummings
kjchome at rcn.com
cummings at kjchome.homeip.net
cummings at kjc386.framingham.ma.us
Registered Linux User #1232 (http://counter.li.org)

From vbar at comp.cz  Fri Sep 28 09:22:28 2007
From: vbar at comp.cz (Vaclav Barta)
Date: Fri, 28 Sep 2007 18:22:28 +0200
Subject: [antlr-interest] No case sesitive option in ANTLR 3 ??
In-Reply-To: <46FD2788.3050002@kjchome.homeip.net>
References: <46FCEAF6.2000904@hds.utc.fr> <46FD2788.3050002@kjchome.homeip.net>
Message-ID: <46FD2A44.8020808@comp.cz>

Kevin J. Cummings wrote:
> aljer ammar wrote:
>> Hi everybody,
>> I wrote my grammar in ANTLR. I was supprised to find that there is no
>> SensitiveCase Options as in version 2.7 . I tried to creat 2 alternative
>> for each token in the lexer like this :
>>
>> ATOKEN : ATOKEN
>>                  |  atoken
>>                  ;
>>
>> this gave me an error of memory size.
>>
>> hve u any soluation?
> 
> Sorry, no solution, but true case insensitivity is going to take many
> more than just 2 cases per token (directly depends on the length of each
> token), and is truly immense when you have identifiers that need to be
> case insensitive....
There are solutions in the list archives - basically canonicalizing
case before the lexer sees it, in the token stream...

	Bye
		Vasek

From jimi at temporal-wave.com  Fri Sep 28 09:55:14 2007
From: jimi at temporal-wave.com (Jimi - Temporal Wave)
Date: Fri, 28 Sep 2007 09:55:14 -0700
Subject: [antlr-interest] No case sesitive option in ANTLR 3 ??
In-Reply-To: <46FD2788.3050002@kjchome.homeip.net>
References: <46FCEAF6.2000904@hds.utc.fr> <46FD2788.3050002@kjchome.homeip.net>
Message-ID: <BAY108-DAV151B9FEC9D41520108C22786B20@phx.gbl>

Please use the wiki - you will find code posted there that does just what
you want.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Kevin J. Cummings
> Sent: Friday, September 28, 2007 9:11 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] No case sesitive option in ANTLR 3 ??
> 
> aljer ammar wrote:
> > Hi everybody,
> > I wrote my grammar in ANTLR. I was supprised to find that there is no
> > SensitiveCase Options as in version 2.7 . I tried to creat 2
> alternative
> > for each token in the lexer like this :
> >
> > ATOKEN : ATOKEN
> >                  |  atoken
> >                  ;
> >
> > this gave me an error of memory size.
> >
> > hve u any soluation?
> 
> Sorry, no solution, but true case insensitivity is going to take many
> more than just 2 cases per token (directly depends on the length of
> each
> token), and is truly immense when you have identifiers that need to be
> case insensitive....
> 
> --
> Kevin J. Cummings
> kjchome at rcn.com
> cummings at kjchome.homeip.net
> cummings at kjc386.framingham.ma.us
> Registered Linux User #1232 (http://counter.li.org)
> 
> No virus found in this incoming message.
> Checked by AVG Free Edition.
> Version: 7.5.488 / Virus Database: 269.13.33/1034 - Release Date:
> 9/27/2007 5:00 PM
> 

No virus found in this outgoing message.
Checked by AVG Free Edition. 
Version: 7.5.488 / Virus Database: 269.13.33/1034 - Release Date: 9/27/2007
5:00 PM
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070928/96361fed/attachment.html 

From Jeremy.Sheldon at 90degreesoftware.com  Fri Sep 28 13:54:33 2007
From: Jeremy.Sheldon at 90degreesoftware.com (Jeremy Sheldon)
Date: Fri, 28 Sep 2007 13:54:33 -0700
Subject: [antlr-interest] A rule can be mutually left-recursive with itself?
Message-ID: <E50201DB165A4B4B98685715FAEE0DF0028C55@90dsvansv07.90DegreeSoftware.com>

Hi all,

 

I'm getting the following error:

 

Aborting because the following rules are mutually left-recursive:

    [foo]

 

I'm not sure what this means.  A rule can be mutually left-recursive
with itself?  So far, I've only seen two or more rules being
left-recursive with each other.  This appears to be different than the
regular 'this rule is left-recursive' message and seems confirmed by
Antlrworks complaining if I try to get Antlrworks to 'remove left
recursion' on the rule.

 

Can someone please explain this one to me?

 

Thanks in advance for your time,

Jeremy

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070928/cdf33b3c/attachment.html 

From antlr at mirality.co.nz  Fri Sep 28 14:03:03 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 29 Sep 2007 09:03:03 +1200
Subject: [antlr-interest] A rule can be mutually left-recursive with
 itself?
In-Reply-To: <E50201DB165A4B4B98685715FAEE0DF0028C55@90dsvansv07.90Degre
	eSoftware.com>
References: <E50201DB165A4B4B98685715FAEE0DF0028C55@90dsvansv07.90DegreeSoftware.com>
Message-ID: <20070928210304.0643A11EB9A@www.antlr.org>

At 08:54 29/09/2007, Jeremy Sheldon wrote:
>I'm getting the following error:
>
>Aborting because the following rules are mutually left-recursive:
>     [foo]
[...]
>Can someone please explain this one to me?

It would probably be easier to explain if you posted the rule it 
was complaining about.


From Jeremy.Sheldon at 90degreesoftware.com  Fri Sep 28 14:06:39 2007
From: Jeremy.Sheldon at 90degreesoftware.com (Jeremy Sheldon)
Date: Fri, 28 Sep 2007 14:06:39 -0700
Subject: [antlr-interest] A rule can be mutually left-recursive with
	itself?
In-Reply-To: <90DSVANSV07V1qdiixj00000147@90degreesoftware.com>
References: <E50201DB165A4B4B98685715FAEE0DF0028C55@90dsvansv07.90DegreeSoftware.com>
	<90DSVANSV07V1qdiixj00000147@90degreesoftware.com>
Message-ID: <E50201DB165A4B4B98685715FAEE0DF0028C56@90dsvansv07.90DegreeSoftware.com>

>It would probably be easier to explain if you posted the rule it 
>was complaining about.

Here's the error message:

[14:00:29] Aborting because the following rules are mutually
left-recursive:
    [table_reference]
    [non_join_query_term]

Now, there are two rules listed there, but always in the past, the form
of the error message would be something like the following:

[14:00:29] Aborting because the following rules are mutually
left-recursive:
    [table_reference, foo, bar]

This leads me to believe that table_reference and non_join_query_term
are not mutually left-recursive with each other.  Would this assumption
be correct?

Here are the rules themselves:

table_reference
	: table_name  correlation_specification?
	| derived_table correlation_specification
	| (table_reference CROSS JOIN table_reference
	| table_reference NATURAL? join_type? JOIN table_reference
join_specification?
	| LEFT_PAREN joined_table RIGHT_PAREN);


non_join_query_term
        : (non_join_query_term | joined_table) INTERSECT ALL?
corresponding_spec? query_primary
        |  non_join_query_primary;

Thanks again,
Jeremy


From antlr at mirality.co.nz  Fri Sep 28 16:00:06 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 29 Sep 2007 11:00:06 +1200
Subject: [antlr-interest] A rule can be mutually left-recursive with
 itself?
In-Reply-To: <E50201DB165A4B4B98685715FAEE0DF0028C56@90dsvansv07.90Degre
	eSoftware.com>
References: <E50201DB165A4B4B98685715FAEE0DF0028C55@90dsvansv07.90DegreeSoftware.com>
	<90DSVANSV07V1qdiixj00000147@90degreesoftware.com>
	<E50201DB165A4B4B98685715FAEE0DF0028C56@90dsvansv07.90DegreeSoftware.com>
Message-ID: <20070928230005.4802511EAEB@www.antlr.org>

At 09:06 29/09/2007, Jeremy Sheldon wrote:
 >[14:00:29] Aborting because the following rules are mutually
 >left-recursive:
 >    [table_reference]
 >    [non_join_query_term]
[...]
 >This leads me to believe that table_reference and
 >non_join_query_term are not mutually left-recursive
 >with each other.  Would this assumption be correct?

Kind of.  They're not recursive with each other, but they are 
recursive with themselves.

 >Here are the rules themselves:
 >
 >table_reference
 >	: table_name  correlation_specification?
 >	| derived_table correlation_specification
 >	| (table_reference CROSS JOIN table_reference
 >	| table_reference NATURAL? join_type? JOIN table_reference
 >join_specification?
 >	| LEFT_PAREN joined_table RIGHT_PAREN);

See, in table_reference you've got two alternatives that start 
with table_reference itself.  You can't do that in LL(*), since it 
leads to an infinite loop.  (It's ok to refer to the same rule 
away from the left edge, because it will consume some tokens each 
time and will eventually exit.  But on the left edge it can keep 
recursing in infinitely since it doesn't consume anything 
beforehand.)

(I'm also not sure why you've grouped the last three alts together 
as a single bigger alt of the main rule body.  That won't have any 
effect as far as I can tell.  And I don't know what 
join_specification contains, but by putting it after the 
table_reference like that it can end up pretty far away from the 
JOIN keyword that it's actually applying to.  Are you sure that's 
where it's supposed to go?)

You'll need to resolve this by creating another rule that contains 
only a subset of the alternatives, avoiding the recursion, or 
rearrange the rule structure so that you can put a * loop in a 
strategic place.  Or both :)  For example, this ought to work in 
this case (although it will alter the meaning subtly, so test it):

table_reference
   : table_ref_atom (NATURAL? join_type? JOIN table_ref_atom 
join_specification?)*
   ;

table_ref_atom
   : table_name correlation_specification?
   | derived_table correlation_specification
   | LEFT_PAREN joined_table RIGHT_PAREN
   ;

(Assuming you add CROSS to join_type.  And shouldn't NATURAL be 
part of join_type too?)

Alternatively, if you don't want to change the behaviour of the 
CROSS JOIN matching, then this ought to work too:

table_reference
   : table_ref_atom
     ( CROSS JOIN table_reference
     | NATURAL? join_type? JOIN table_reference 
join_specification?
     )?
   ;

table_ref_atom
   : table_name correlation_specification?
   | derived_table correlation_specification
   | LEFT_PAREN joined_table RIGHT_PAREN
   ;

Note that this uses right-recursion, which is ok.


From lor.dv at tiscali.it  Sat Sep 29 03:54:10 2007
From: lor.dv at tiscali.it (Lorenzo Dalla Vecchia)
Date: Sat, 29 Sep 2007 12:54:10 +0200
Subject: [antlr-interest] Unable to throw custom exceptions - possible bug?
Message-ID: <B79F757BA16248F3B4D2286977CD6F6A@Atlantis>

Hi.

I'm building a tree parser with ANTLR 3.0 for a project I am currently working on.
Now, one method I'm calling from one of the actions in the grammar throws a custom exception (let's call it MyException), so I added "throws MyException" to the rule declaration in order to declare the exception throwing in the parser code.

The modified grammar compiles correctly with antlr Tool, but nothing is added to the method signature in the generated parser! Is this a bug?
Maybe the reason is that I am using a return value for the rule?

Thank you in advance.

--
Lorenzo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070929/d99e94dc/attachment.html 

From pink at odahoda.de  Sat Sep 29 04:42:34 2007
From: pink at odahoda.de (Benjamin Niemann)
Date: Sat, 29 Sep 2007 13:42:34 +0200
Subject: [antlr-interest] Unable to throw custom exceptions - possible
	bug?
References: <B79F757BA16248F3B4D2286977CD6F6A@Atlantis>
Message-ID: <fdldn8$q8s$1@sea.gmane.org>

Hi Lorenzo,

Lorenzo Dalla Vecchia wrote:
> I'm building a tree parser with ANTLR 3.0 for a project I am currently
> working on. Now, one method I'm calling from one of the actions in the
> grammar throws a custom exception (let's call it MyException), so I added
> "throws MyException" to the rule declaration in order to declare the
> exception throwing in the parser code.
> 
> The modified grammar compiles correctly with antlr Tool, but nothing is
> added to the method signature in the generated parser! Is this a bug?
> Maybe the reason is that I am using a return value for the rule?

Looks to me like you stumbled upon an open TODO issue. The ANTLR grammar
does infact recognizer 'throws' declarations, but I can't see anything in
the codegen templates that actually makes use of this. But I'm the Python
guy here, so I don't care about such formalities anyway ;)

clickediclick... Ah, seems to be a known issue:
<http://www.antlr.org:8888/browse/ANTLR-100>


HTH


From nkodidi at hotmail.com  Sat Sep 29 08:34:36 2007
From: nkodidi at hotmail.com (Nkonyereza Diane)
Date: Sat, 29 Sep 2007 15:34:36 +0000
Subject: [antlr-interest] ANTLR +NetBeans
Message-ID: <BAY142-W99C994306D905962AE018A5B30@phx.gbl>


Hi,
 
I'm using NetBeans and have been trying to compile my java files from there with no success.
 
Does anyone know what could be the problem and how to fix it?
 
Thanks,
 
Diane
_________________________________________________________________
Feel like a local wherever you go.
http://www.backofmyhand.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070929/e60c3770/attachment.html 

From antlr at mirality.co.nz  Sat Sep 29 14:29:18 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sun, 30 Sep 2007 10:29:18 +1300
Subject: [antlr-interest] A rule can be mutually left-recursive with
 itself?
In-Reply-To: <E50201DB165A4B4B98685715FAEE0DF0028C58@90dsvansv07.90Degre
	eSoftware.com>
References: <E50201DB165A4B4B98685715FAEE0DF0028C55@90dsvansv07.90DegreeSoftware.com>
	<90DSVANSV07V1qdiixj00000147@90degreesoftware.com>
	<E50201DB165A4B4B98685715FAEE0DF0028C56@90dsvansv07.90DegreeSoftware.com>
	<20070928230005.4802511EAEB@www.antlr.org>
	<E50201DB165A4B4B98685715FAEE0DF0028C58@90dsvansv07.90DegreeSoftware.com>
Message-ID: <20070929212914.4CA5911EAEA@www.antlr.org>

At 12:14 29/09/2007, Jeremy Sheldon wrote:
 >I'm still parsing the rest of your email.  In the meantime,
 >however, a question comes to mind.  You say that they're
 >recursive with themselves, yet Antlrworks does not detect
 >them as being left-recursive.  As well, the refactoring tool
 >for removing left-recursions will not refactor this rule.
 >Does this mean that being 'recursive with themselves' is
 >different than being 'left-recursive'?  Or does this mean
 >that they are left-recursive but in a way which is
 >unrecognized by Antlrworks?

A bit of both :)

"Recursive with itself" (or "self-recursive") simply means that 
the rule calls itself directly (as opposed to "recursive with 
another rule" (or "indirectly recursive") which means that it 
(directly or indirectly) calls another rule which calls the 
original rule.  This is not actually a problem in itself, and is 
sometimes required for certain kinds of grammar -- often whenever 
you have equal-precedence operators, in fact.

"Left recursive" means that the rule (whether directly or 
indirectly) ends up calling itself again without consuming any 
tokens.  If this path exists, it means that it will be able to 
continue doing so infinitely, since it never consumes any input 
and thus is completely unbounded (at least until you run out of 
stack space).  This is strictly forbidden -- but even ANTLR can't 
always detect when you're doing it.

ANTLRworks' recursion detection and refactoring only really work 
on simple cases; it's not too hard to create a construct that it 
can't figure out.  That doesn't mean it's not left-recursive, it 
just means that it can't help you solve it automatically.  The 
auto-refactoring version always translates the recursion to 
something involving a * case (similar to the first example I 
posted) -- but with your grammar it's not possible to do that 
without changing the behaviour of the parser, which a refactoring 
shouldn't do.  So it's not surprising that it didn't offer to fix 
it for you :)  (The second example should keep the same behaviour 
as your original design, but again it's a little complicated for a 
little automated refactorer to figure out!)


From lor.dv at tiscali.it  Sun Sep 30 03:03:26 2007
From: lor.dv at tiscali.it (Lorenzo Dalla Vecchia)
Date: Sun, 30 Sep 2007 12:03:26 +0200
Subject: [antlr-interest] Unable to throw custom exceptions -
	possiblebug?
In-Reply-To: <fdldn8$q8s$1@sea.gmane.org>
References: <B79F757BA16248F3B4D2286977CD6F6A@Atlantis>
	<fdldn8$q8s$1@sea.gmane.org>
Message-ID: <04E8F83D0845412AA15FD28995988924@Atlantis>

>> [...] I added
>> "throws MyException" to the rule declaration in order to declare the
>> exception throwing in the parser code.
>>
>> The modified grammar compiles correctly with antlr Tool, but nothing is
>> added to the method signature in the generated parser! Is this a bug?
>> Maybe the reason is that I am using a return value for the rule?
>
> Looks to me like you stumbled upon an open TODO issue. The ANTLR grammar
> does infact recognizer 'throws' declarations, but I can't see anything in
> the codegen templates that actually makes use of this. But I'm the Python
> guy here, so I don't care about such formalities anyway ;)

I'm using Java as output language.
Anyway, I see the problem.

I wonder what would be my best option to signal the error to the code that 
called the parser without using custom exceptions. Any ideas?

Thanks.

--
Lorenzo 


From antlr at mirality.co.nz  Sun Sep 30 05:05:49 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Mon, 01 Oct 2007 01:05:49 +1300
Subject: [antlr-interest] Unable to throw custom exceptions -
 possiblebug?
In-Reply-To: <04E8F83D0845412AA15FD28995988924@Atlantis>
References: <B79F757BA16248F3B4D2286977CD6F6A@Atlantis>
	<fdldn8$q8s$1@sea.gmane.org>
	<04E8F83D0845412AA15FD28995988924@Atlantis>
Message-ID: <20070930120547.E0CA111E9EA@www.antlr.org>

At 23:03 30/09/2007, Lorenzo Dalla Vecchia wrote:
 >I wonder what would be my best option to signal the error to the 

 >code that called the parser without using custom exceptions. Any 

 >ideas?

I think it still lets you throw something derived from 
RecognitionException....


From vbar at comp.cz  Sun Sep 30 09:02:36 2007
From: vbar at comp.cz (Vaclav Barta)
Date: Sun, 30 Sep 2007 18:02:36 +0200
Subject: [antlr-interest] Unable to throw custom exceptions -
	possiblebug?
In-Reply-To: <20070930120547.E0CA111E9EA@www.antlr.org>
References: <B79F757BA16248F3B4D2286977CD6F6A@Atlantis>
	<04E8F83D0845412AA15FD28995988924@Atlantis>
	<20070930120547.E0CA111E9EA@www.antlr.org>
Message-ID: <200709301802.36306.vbar@comp.cz>

On Sunday 30 September 2007 14:05:49 Gavin Lambert wrote:
> At 23:03 30/09/2007, Lorenzo Dalla Vecchia wrote:
>  >I wonder what would be my best option to signal the error to the
>  >code that called the parser without using custom exceptions. Any
>  >ideas?
> I think it still lets you throw something derived from
> RecognitionException....
Or RuntimeException, I believe...

	Bye
		Vasek




From parrt at cs.usfca.edu  Sun Sep 30 19:58:06 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 30 Sep 2007 19:58:06 -0700
Subject: [antlr-interest] Mantra has mixins / delegates now
Message-ID: <ED6E1BDC-C193-4520-9DC1-28BCFF3B2936@cs.usfca.edu>

hi.  mantra has delegates now (see Delegates section):

http://www.linguamantra.org/

Instead of mixin ala Ruby you say:

Class T extends S delegates D, E, F {
}

and you get all methods from D, E, F not defined in T or in S and above.

very clean. :)  Works great.

I'm *almost* done with features of language then I can release and
get back to my regularly schedule life: antlr etc...

Ter

