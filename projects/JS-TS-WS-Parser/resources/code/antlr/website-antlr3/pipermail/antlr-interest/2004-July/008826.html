<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] ANTLR 3.0 question about common actions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20ANTLR%203.0%20question%20about%20common%20actions&In-Reply-To=5E3FD2E1-E0D3-11D8-A2DD-000A95891192%40cs.usfca.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008825.html">
   <LINK REL="Next"  HREF="008836.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] ANTLR 3.0 question about common actions</H1>
    <B>Monty Zukowski</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20ANTLR%203.0%20question%20about%20common%20actions&In-Reply-To=5E3FD2E1-E0D3-11D8-A2DD-000A95891192%40cs.usfca.edu"
       TITLE="[antlr-interest] ANTLR 3.0 question about common actions">monty at codetransform.com
       </A><BR>
    <I>Wed Jul 28 13:48:04 PDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="008825.html">[antlr-interest] ANTLR 3.0 question about common actions
</A></li>
        <LI>Next message: <A HREF="008836.html">[antlr-interest] ANTLR 3.0 question about common actions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8826">[ date ]</a>
              <a href="thread.html#8826">[ thread ]</a>
              <a href="subject.html#8826">[ subject ]</a>
              <a href="author.html#8826">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Jul 28, 2004, at 1:19 PM, Terence Parr wrote:

&gt;<i> So, the main question is: how can we make standard actions in order to
</I>&gt;<i> avoid retargeting issues and yet allow for free-form actions,
</I>&gt;<i> especially those that predicate standard actions?
</I>

Currently you have an escape mechanism that says &quot;this is all target 
language, but pick out the tree stuff and $ stuff,&quot; and offers Ric the 
opportunity to complain how ugly this is :)

Inverting it might be appropriate.  How about &quot;this is all standard 
action language, but pick out special things and treat them as target 
language?&quot;  Think macros, real syntactic macros, not just text 
substitution.

The disconnect comes from not understanding the relationship between 
the generated code and the standard actions.  I'm thinking of tree 
building here.  Trees have a model implemented in the target language 
and controllers, if you will, implemented through the code generator.  
Staring at the generated code yields quite a confusing view!  Ah, the 
joys of a mangled metaphor.

Nonetheless the current tree building approach is pretty brute force, 
which leads to some head scratching code.  I think it could be simpler 
if the generator code really know what was going on.  I'm saying that 
it's not writing the code I would write if I were building trees by 
hand--whereas the parsing code does meet that goal.

I would argue for building the standard actions not from a code 
generator but from a syntactic macro system.  It may be that 
StringTemplate is already powerful enough to handle this.  I would have 
to think through some examples to see where the added power of the 
macro system would help.  Syntactic macros are basically templates 
which have access to the AST of the target language.  Somewhere in 
between may be the right mix for ANTLR.  We don't want people to have 
to write (and maintain) a C++ parser just to be able to make a C++ code 
generator.  But having a syntactic awareness of variables might help.

Experimentation is clearly necessary.

Monty

ANTLR &amp; Java Consultant -- <A HREF="http://www.codetransform.com">http://www.codetransform.com</A>
ANSI C/GCC transformation toolkit -- 
<A HREF="http://www.codetransform.com/gcc.html">http://www.codetransform.com/gcc.html</A>
Embrace the Decay -- <A HREF="http://www.codetransform.com/EmbraceDecay.html">http://www.codetransform.com/EmbraceDecay.html</A>



 
Yahoo! Groups Links

&lt;*&gt; To visit your group on the web, go to:
    <A HREF="http://groups.yahoo.com/group/antlr-interest/">http://groups.yahoo.com/group/antlr-interest/</A>

&lt;*&gt; To unsubscribe from this group, send an email to:
    <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-unsubscribe at yahoogroups.com</A>

&lt;*&gt; Your use of Yahoo! Groups is subject to:
    <A HREF="http://docs.yahoo.com/info/terms/">http://docs.yahoo.com/info/terms/</A>
 

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008825.html">[antlr-interest] ANTLR 3.0 question about common actions
</A></li>
	<LI>Next message: <A HREF="008836.html">[antlr-interest] ANTLR 3.0 question about common actions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8826">[ date ]</a>
              <a href="thread.html#8826">[ thread ]</a>
              <a href="subject.html#8826">[ subject ]</a>
              <a href="author.html#8826">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
