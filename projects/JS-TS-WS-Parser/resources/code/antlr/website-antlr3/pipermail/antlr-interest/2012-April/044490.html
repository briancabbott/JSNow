<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] gUnit for v4?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20gUnit%20for%20v4%3F&In-Reply-To=%3C4F90A887.6030405%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="044481.html">
   <LINK REL="Next"  HREF="044501.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] gUnit for v4?</H1>
    <B>Kieran Simpson</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20gUnit%20for%20v4%3F&In-Reply-To=%3C4F90A887.6030405%40gmail.com%3E"
       TITLE="[antlr-interest] gUnit for v4?">kierans777 at gmail.com
       </A><BR>
    <I>Thu Apr 19 17:06:31 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="044481.html">[antlr-interest] gUnit for v4?
</A></li>
        <LI>Next message: <A HREF="044501.html">[antlr-interest] gUnit for v4?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44490">[ date ]</a>
              <a href="thread.html#44490">[ thread ]</a>
              <a href="subject.html#44490">[ subject ]</a>
              <a href="author.html#44490">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 20/04/12 3:11 AM, Terence Parr wrote:
&gt;<i> Hi Kieran,
</I>&gt;<i>
</I>&gt;<i> thanks very much for the feedback. What exactly were you testing when you say parts of your grammar and in different combinations? Were you testing the ASTs you created? It was very useful for that. Since v4 automatically builds trees, those trees will be correct unless there's a bug so there's nothing really to test as far as I can tell.
</I>&gt;<i> Ter
</I>
Ter and list,
   I must admit I haven't been watching the development of v4 that 
closely so perhaps there's something I'm not understanding about AST 
construction/rewrite rules.

An example from my current project is that you can define an entity 
inside a namespace.  However there is the ability to define the 
namespace as part of the entity def (it can make the input more readable).

eg: namespace(namespaceId)  { entity(entityId) ... }

eg: entity(namespaceId:entityId) ....

Conceptually the result is the same, a namespace tree with the entity as 
a subtree.  Using gUnit I've been able to write tests quickly! that test 
whether input combinations not only match, but build the correct AST 
structure.

Coupled with Token testing, and more complicated parser rules I've found 
gUnit valuable to my TDD process as I can come up with a bunch of input 
and refactor my grammar as I go.  Given my target AST walker language is 
C, in my C++ tests (the rest of my app is in C++) I can focus on 
semantic issues.  The separation of concerns testing wise is also nicer 
as I can isolate syntactic issues from semantic problems.

Cheers,

&gt;<i> On Apr 18, 2012, at 9:56 PM, Kieran Simpson wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> On 23/07/64 5:59 AM, Terence Parr wrote:
</I>&gt;&gt;&gt;<i> Hi,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I started down the path of building the new version of gUnit for v4, but I'm beginning to question its value for the new version. Because I am pooh-poohing putting actions directly within a grammar, grammar can only yield parse trees. and looks nice to be able to say:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> expr:
</I>&gt;&gt;&gt;<i> 	&quot;1&quot;		-&gt;   (expr 1)
</I>&gt;&gt;&gt;<i> 	&quot;1+2&quot;	-&gt;   (expr (expr 1) + (expr 2))
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> but so what? all that did was confirm that the parser generated by ANTLR works correctly. it's not telling you anything you didn't know by looking at the grammar.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> In the old days we used to build ASTs and so we needed to check the structure. That need is no longer here. Also, these rules don't generate output and so we can't check input to output translation.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> What it comes down to is this: we really need functional testing not unit testing for language applications, unless of course each rule returns a string that the translation of the input some phrase or something. But, it's just as easy to write calls to assertEquals() saying that input x should yield input y. If we are doing something other than generating output, such as building up a data structure, then we really do need to manually check that the data structure is solid given some input.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I'm trying to find a flaw in my logic. Is there something I'm missing about testing grammars? In v4, they will give you exactly what you want, unless there is a bug in ANTLR. But that's my problem not yours.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> If we can't find a major benefit, then we should avoid introducing another moving part to the ANTLR ecosystem.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I find gUnit very helpful in testing parts of my grammar both in
</I>&gt;&gt;<i> isolation and different combinations.  I like being able to test token
</I>&gt;&gt;<i> definitions against different input.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Where I find functional testing more beneficial is for tree walkers.
</I>&gt;&gt;<i> For my grammars that produce ASTs I've found the grammar tests useful in
</I>&gt;&gt;<i> preventing regression bugs.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> There's also testing in non Java languages to consider.  Having the
</I>&gt;&gt;<i> ability to have tests generated/run via JUnit may be easier than having
</I>&gt;&gt;<i> to piece together your tests in another language (eg: C) which I
</I>&gt;&gt;<i> personally find is more time consuming.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Just a few thoughts.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Cheers,
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="044481.html">[antlr-interest] gUnit for v4?
</A></li>
	<LI>Next message: <A HREF="044501.html">[antlr-interest] gUnit for v4?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44490">[ date ]</a>
              <a href="thread.html#44490">[ thread ]</a>
              <a href="subject.html#44490">[ subject ]</a>
              <a href="author.html#44490">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
