<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] How to get and use AST after parse error?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20How%20to%20get%20and%20use%20AST%20after%20parse%20error%3F&In-Reply-To=%3C4.1.20090624133951.0876dc18%40grahamwideman.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034993.html">
   <LINK REL="Next"  HREF="034995.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] How to get and use AST after parse error?</H1>
    <B>Graham Wideman</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20How%20to%20get%20and%20use%20AST%20after%20parse%20error%3F&In-Reply-To=%3C4.1.20090624133951.0876dc18%40grahamwideman.com%3E"
       TITLE="[antlr-interest] How to get and use AST after parse error?">gwlist at grahamwideman.com
       </A><BR>
    <I>Wed Jun 24 14:24:16 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="034993.html">[antlr-interest] another bug in trying to matching EOF, perhaps?
</A></li>
        <LI>Next message: <A HREF="034995.html">[antlr-interest] How to get and use AST after parse error?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34994">[ date ]</a>
              <a href="thread.html#34994">[ thread ]</a>
              <a href="subject.html#34994">[ subject ]</a>
              <a href="author.html#34994">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Folks -- 

I'd appreciate if someone could straighten me out on what is The Intended Way on the following issue:

I'm working on a PHP grammar that produces an AST, testing it against various source code.  

When a parse succeeds, I get a nice AST returned from PhpParser.prog() via prog_return.getTree(). However, if the parse fails, then what's returned via prog_return.getTree() is a tree with just an error node (and this is readily understood from the generated source in PhpParser.prog()).

So:

a) In case of error, is there an intended way of getting access to the actual AST?  I hacked an extra public field into PhpParser to get access to the AST root_0 node, and it seems to be useful, but I would not have expected to need to do that.

b) Is there some reason why I should not want to do that?

c) Why isn't prog() designed to just return the actual AST as usual and provide error info by separate means?

d) I note that prior to normal exits, the PhpParser.prog() refines the completed AST using rulePostProcessing, and setTokenBoundaries. For an AST that's partially complete due to error exit, these still make sense to apply, right?

Thanks,

-- Graham

-------------------
Grammar info:
The PHP grammar is similar to that listed at antlr.org (kuruvila) -- pretty vanilla:
---------------
options {
    backtrack = true; 
    memoize = true;
    k=2;
    output = AST;
    ASTLabelType = CommonTree;
}
---------------

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034993.html">[antlr-interest] another bug in trying to matching EOF, perhaps?
</A></li>
	<LI>Next message: <A HREF="034995.html">[antlr-interest] How to get and use AST after parse error?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34994">[ date ]</a>
              <a href="thread.html#34994">[ thread ]</a>
              <a href="subject.html#34994">[ subject ]</a>
              <a href="author.html#34994">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
