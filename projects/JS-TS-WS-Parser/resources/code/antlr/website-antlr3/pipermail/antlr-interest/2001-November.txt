From bkuehl at web.de  Fri Nov  2 04:42:41 2001
From: bkuehl at web.de (bkuehl@web.de)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] DataInputStream in "Getting Started"
Message-ID: <9ru4c1+q0un@eGroups.com>

Hello,

In the "Getting Started" tutorial a DataInputStream is used (in 
Main.java). Why? 

Bernd


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bkuehl at web.de  Fri Nov  2 04:50:44 2001
From: bkuehl at web.de (bkuehl@web.de)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] Bug in t.g from "Parsing Simple Data"
Message-ID: <9ru4r4+l32m@eGroups.com>

The whitespace token isn't correct for MacOS or MacOSX. A 
single \r needs to be added.

Bernd


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From inachu7777 at yahoo.com  Fri Nov  2 06:38:17 2001
From: inachu7777 at yahoo.com (inachu7777@yahoo.com)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] Parsing data
Message-ID: <9rub4p+8j6a@eGroups.com>

Hey there this is my first time getting back into programming since 
13 years ago.


I am looking for a simple parsing program such as your but looking 
for one that is in javascript that IE and Netscape can read.


my data example would look like this though.


2324324343434datastreetdrive500500

What would the code look like? under 10-15 lines of code I think.

but the real sample of date would look like above data set but would 
fill up and entire 8X11 sheet of paper.


Thanks for the support

Inachu7777@yahoo.com







 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From drm at xilinx.com  Fri Nov  2 07:27:28 2001
From: drm at xilinx.com (Dennis Marsa)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] token stream resynching in custom exception handlers?
Message-ID: <3BE2BB60.AA3247A7@xilinx.com>

How can one write a custom exception handler for a rule in ANTLR
that synchs the token stream to the follow set of the rule just
as the default exception handler does?

For example:

foo
    :    a
    |    b  { throw MyExceptionType(...); }
    |    c
    ;
    exception
    catch [MyExceptionType& exc] {
        // Do some custom work with exc

        // Attempt to resynch the token stream
        consume();
        consumeUntil(????);  // oops!
    }
    
This doesn't seem possible since in the grammar file, there seems
to be no way of referring to the rule's follow set for the call to
consumeUntil().  Or is there?

Is there another strategy that I'm not seeing?


Dennis Marsa

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at bco.com  Fri Nov  2 07:38:10 2001
From: mzukowski at bco.com (mzukowski@bco.com)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] token stream resynching in custom exception 
	handlers?
Message-ID: <170826586F3BD511910D0200C110AAA801C5801E@memail03.bco-home.com>

There is no way I know of to refer to the follow set from actions or
exception handlers.

The typical default error handler looks like this:

		catch (RecognitionException ex) {
			if (inputState.guessing==0) {
				reportError(ex);
				consume();
				consumeUntil(_tokenSet_5);
			} else {
			  throw ex;
			}

Maybe you can do what you need to in reportError()?  Can you pass all the
info you need wrapped in MyExceptionType?

More specifics on what you are trying to accomplish may help us figure out
alternatives for you.  

Monty

> -----Original Message-----
> From: Dennis Marsa [mailto:drm@xilinx.com]
> Sent: Friday, November 02, 2001 7:27 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] token stream resynching in custom exception
> handlers?
> 
> 
> How can one write a custom exception handler for a rule in ANTLR
> that synchs the token stream to the follow set of the rule just
> as the default exception handler does?
> 
> For example:
> 
> foo
>     :    a
>     |    b  { throw MyExceptionType(...); }
>     |    c
>     ;
>     exception
>     catch [MyExceptionType& exc] {
>         // Do some custom work with exc
> 
>         // Attempt to resynch the token stream
>         consume();
>         consumeUntil(????);  // oops!
>     }
>     
> This doesn't seem possible since in the grammar file, there seems
> to be no way of referring to the rule's follow set for the call to
> consumeUntil().  Or is there?
> 
> Is there another strategy that I'm not seeing?
> 
> 
> Dennis Marsa
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/ 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20011102/d2d17522/attachment.html
From sasecp at wnt.sas.com  Fri Nov  2 07:42:20 2001
From: sasecp at wnt.sas.com (Ernest Pasour)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] token stream resynching in custom exception 
	 handlers?
Message-ID: <764CA2FF49EC054BA086FC8253A52DD740B110@merc09.na.sas.com>

Skipped content of type multipart/alternative
From drm at xilinx.com  Fri Nov  2 08:10:15 2001
From: drm at xilinx.com (Dennis Marsa)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] token stream resynching in custom exception 
 handlers?
References: <764CA2FF49EC054BA086FC8253A52DD740B110@merc09.na.sas.com>
Message-ID: <3BE2C567.F21A170@xilinx.com>

> Ernest Pasour wrote:
> 
> There is a way to do this in the current development build.  At least in C++, but I think Ric ported it to Java as well (Ric?).
> 
> Try "consumeUntil($lookaheadSet);", where "$lookaheadSet" is a special string that antlr looks for.

Precisely the kind of thing I was hoping for.  I am using C++.

Looking back in old antlr-interest mails, I see you submitted a patch
for this.  Do you still have that patch?  I didn't see a mail with it.

I am not in a position to upgrade to the latest development version.

Thanks,

Dennis

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sasecp at wnt.sas.com  Fri Nov  2 08:19:21 2001
From: sasecp at wnt.sas.com (Ernest Pasour)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] token stream resynching in custom exception 
	 handlers?
Message-ID: <764CA2FF49EC054BA086FC8253A52DD740B111@merc09.na.sas.com>

I'll look and see if I have the jar files I built.  Maybe I can give you the changed class file(s).

-----Original Message-----
From: Dennis Marsa [mailto:drm@xilinx.com]
Sent: Friday, November 02, 2001 11:10 AM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] token stream resynching in custom
exception handlers?


> Ernest Pasour wrote:
> 
> There is a way to do this in the current development build.  At least in C++, but I think Ric ported it to Java as well (Ric?).
> 
> Try "consumeUntil($lookaheadSet);", where "$lookaheadSet" is a special string that antlr looks for.

Precisely the kind of thing I was hoping for.  I am using C++.

Looking back in old antlr-interest mails, I see you submitted a patch
for this.  Do you still have that patch?  I didn't see a mail with it.

I am not in a position to upgrade to the latest development version.

Thanks,

Dennis

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Fri Nov  2 08:42:31 2001
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] token stream resynching in custom exception handlers?
In-Reply-To: <764CA2FF49EC054BA086FC8253A52DD740B110@merc09.na.sas.com>; from sasecp@wnt.sas.com on Fri, Nov 02, 2001 at 10:42:20AM -0500
References: <764CA2FF49EC054BA086FC8253A52DD740B110@merc09.na.sas.com>
Message-ID: <20011102174231.D2031@cs.utwente.nl>

On Fri, Nov 02, 2001 at 10:42:20AM -0500, Ernest Pasour wrote:
> There is a way to do this in the current development build.  At least in
> C++, but I think Ric ported it to Java as well (Ric?).

I ported it yah.

> Try "consumeUntil($lookaheadSet);", where "$lookaheadSet" is a special
> string that antlr looks for.

FYI The devel snapshots are at http://wwwhome.cs.utwente.nl/~klaren/antlr/

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Time what is time - I wish I knew how to tell You why - It hurts to know -
          Aren't we machines - Time what is time - Unlock the door
               - And see the truth - Then time is time again
                From: 'Time what is Time' by Blind Guardian


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cela_vei at yahoo.com  Fri Nov  2 09:45:59 2001
From: cela_vei at yahoo.com (cela_vei@yahoo.com)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] Newbie Question
In-Reply-To: <20011102174231.D2031@cs.utwente.nl>
Message-ID: <9rum4n+im1e@eGroups.com>

I am trying to migrate from Antlr 1.33 to Antlr 2.7

I have a token definition in my 1.33 Grammer like this.

#token BASIC "[Bb][Aa][Ss][Ii][Cc]" 

to match the keyword Basic in a case insensitive manner. 

How to I define this in the Antlr 2.7 lexer?

Thanks.
Cela.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Fri Nov  2 10:03:57 2001
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] token stream resynching in custom exception handlers?
In-Reply-To: <20011102174231.D2031@cs.utwente.nl>
Message-ID: <FC585C0E-CFBB-11D5-93FA-0030653DE0D6@jguru.com>


On Friday, November 2, 2001, at 08:42  AM, Ric Klaren wrote:

> On Fri, Nov 02, 2001 at 10:42:20AM -0500, Ernest Pasour wrote:
>> There is a way to do this in the current development build.  At least 
>> in
>> C++, but I think Ric ported it to Java as well (Ric?).
>
> I ported it yah.

Ric, does $lookaheadSet compute lookahead from where the action sites? 
(in this case the FOLLOW)?

Perhaps we should have $FOLLOW and $FOLLOW(rule) and $FIRST(rule) as 
values.  $lookaheadSet is ambiguous, right?

Ter
--
Chief Scientist & Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Fri Nov  2 10:04:28 2001
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] Newbie Question
In-Reply-To: <9rum4n+im1e@eGroups.com>
Message-ID: <0E8DD512-CFBC-11D5-93FA-0030653DE0D6@jguru.com>


On Friday, November 2, 2001, at 09:45  AM, cela_vei@yahoo.com wrote:

> I am trying to migrate from Antlr 1.33 to Antlr 2.7
>
> I have a token definition in my 1.33 Grammer like this.
>
> #token BASIC "[Bb][Aa][Ss][Ii][Cc]"
>
> to match the keyword Basic in a case insensitive manner.
>
> How to I define this in the Antlr 2.7 lexer?

For keywords, you can just use the case insensitive literals option in 
the lexer.

Ter
--
Chief Scientist & Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Fri Nov  2 10:04:46 2001
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] DataInputStream in "Getting Started"
In-Reply-To: <9ru4c1+q0un@eGroups.com>
Message-ID: <195C5D7C-CFBC-11D5-93FA-0030653DE0D6@jguru.com>


On Friday, November 2, 2001, at 04:42  AM, bkuehl@web.de wrote:

> Hello,
>
> In the "Getting Started" tutorial a DataInputStream is used (in
> Main.java). Why?

I think because it was written for Java 1.0.2 :)

Ter

--
Chief Scientist & Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Fri Nov  2 10:12:27 2001
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] Bug in t.g from "Parsing Simple Data"
In-Reply-To: <9ru4r4+l32m@eGroups.com>
Message-ID: <2C174D96-CFBD-11D5-93FA-0030653DE0D6@jguru.com>


On Friday, November 2, 2001, at 04:50  AM, bkuehl@web.de wrote:

> The whitespace token isn't correct for MacOS or MacOSX. A
> single \r needs to be added.

Sorry about that...I was waiting for NeXT to take over Apple and replace 
the silly \r with \n as gawd intended ;)  Whew ....just in time. ;)

Sorry for the hassle.  \n should work on NeXTStep...er....OS X.  I'm 
using it right this very second!  Wohooo!

OS X is great btw folks (mach kernel+BSD with a great gui).  Linux done 
right minus the free part though much of it is open source :)  For 
example, I've been trying to remap the capslock to be ctrl as gawd 
intended using the source from Apple.  I've not succeeded by the way. :(

Time to stock up on memory btw folks: I just bought 1G for $139 :)  
"top" reports 673M free at the moment on my box and i have everything 
under the sun loaded in plus a 128M file in vi :)  "And nary a swap was 
heard by all..."

Ter
--
Chief Scientist & Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Fri Nov  2 10:13:59 2001
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] Parsing data
In-Reply-To: <9rub4p+8j6a@eGroups.com>
Message-ID: <62E0074A-CFBD-11D5-93FA-0030653DE0D6@jguru.com>


On Friday, November 2, 2001, at 06:38  AM, inachu7777@yahoo.com wrote:

> Hey there this is my first time getting back into programming since
> 13 years ago.
>
>
> I am looking for a simple parsing program such as your but looking
> for one that is in javascript that IE and Netscape can read.
>
>
> my data example would look like this though.
>
>
> 2324324343434datastreetdrive500500
>
> What would the code look like? under 10-15 lines of code I think.
>
> but the real sample of date would look like above data set but would
> fill up and entire 8X11 sheet of paper.
>

I don't know of a parser generator that generates parsers in 
JavaScript.  I'd suggest doing one by hand for something so simple.  See

http://www.antlr.org/book/byhand.pdf (or .ps) for a good description of 
building parsers by hand.

Ter


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bkuehl at web.de  Sat Nov  3 02:58:15 2001
From: bkuehl at web.de (bkuehl@web.de)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] Bug in t.g from "Parsing Simple Data"
In-Reply-To: <2C174D96-CFBD-11D5-93FA-0030653DE0D6@jguru.com>
Message-ID: <AEAF9F9A-D049-11D5-A722-000502057631@uos.de>

>
>> The whitespace token isn't correct for MacOS or MacOSX. A
>> single \r needs to be added.
>
> Sorry about that...I was waiting for NeXT to take over Apple and replace
> the silly \r with \n as gawd intended ;)  Whew ....just in time. ;)
>
> Sorry for the hassle.  \n should work on NeXTStep...er....OS X.  I'm
> using it right this very second!  Wohooo!
>
>

This is not completly correct. Using OSX (10.1) just mark the input lines 
from the head of the "Parsing Simple Data" webpage, copy and paste them 
into a TextEdit document, save the document and "od -c" shows that all 
lines end with \r.

But when you paste the same lines as standard input to "od -c" or to the 
parser, the lines are terminated with \n.

Can someone explain this? Do different applications handle newlines in the 
pasteboard buffer in different ways? Why?

Bernd


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Mon Nov  5 01:30:51 2001
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] token stream resynching in custom exception handlers?
In-Reply-To: <FC585C0E-CFBB-11D5-93FA-0030653DE0D6@jguru.com>; from parrt@jguru.com on Fri, Nov 02, 2001 at 10:03:57AM -0800
References: <20011102174231.D2031@cs.utwente.nl> <FC585C0E-CFBB-11D5-93FA-0030653DE0D6@jguru.com>
Message-ID: <20011105103049.A28846@cs.utwente.nl>

Hi,

On Fri, Nov 02, 2001 at 10:03:57AM -0800, Terence Parr wrote:
> > I ported it yah.
> 
> Ric, does $lookaheadSet compute lookahead from where the action sites? 
> (in this case the FOLLOW)?
> 
> Perhaps we should have $FOLLOW and $FOLLOW(rule) and $FIRST(rule) as 
> values.  $lookaheadSet is ambiguous, right?

You're right (to be specific it does a grammar.theLLkAnalyzer.FOLLOW(1,
currentRule.endNode) ). For 2.7.2a1 release we might stick to renaming
$lookahead to $FIRST ? Implement the other versions somewhere later (or if
you got some spare time somewhere :) ). I'm still looking for a timeslot
somewhere that I can spend on antlr to get my part finished :(

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Time what is time - I wish I knew how to tell You why - It hurts to know -
          Aren't we machines - Time what is time - Unlock the door
               - And see the truth - Then time is time again
                From: 'Time what is Time' by Blind Guardian

From klaren at cs.utwente.nl  Mon Nov  5 01:30:51 2001
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] token stream resynching in custom exception handlers?
In-Reply-To: <FC585C0E-CFBB-11D5-93FA-0030653DE0D6@jguru.com>; from parrt@jguru.com on Fri, Nov 02, 2001 at 10:03:57AM -0800
References: <20011102174231.D2031@cs.utwente.nl> <FC585C0E-CFBB-11D5-93FA-0030653DE0D6@jguru.com>
Message-ID: <20011105103049.A28846@cs.utwente.nl>

Hi,

On Fri, Nov 02, 2001 at 10:03:57AM -0800, Terence Parr wrote:
> > I ported it yah.
> 
> Ric, does $lookaheadSet compute lookahead from where the action sites? 
> (in this case the FOLLOW)?
> 
> Perhaps we should have $FOLLOW and $FOLLOW(rule) and $FIRST(rule) as 
> values.  $lookaheadSet is ambiguous, right?

You're right (to be specific it does a grammar.theLLkAnalyzer.FOLLOW(1,
currentRule.endNode) ). For 2.7.2a1 release we might stick to renaming
$lookahead to $FIRST ? Implement the other versions somewhere later (or if
you got some spare time somewhere :) ). I'm still looking for a timeslot
somewhere that I can spend on antlr to get my part finished :(

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Time what is time - I wish I knew how to tell You why - It hurts to know -
          Aren't we machines - Time what is time - Unlock the door
               - And see the truth - Then time is time again
                From: 'Time what is Time' by Blind Guardian


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dewing at apple.com  Thu Nov  8 09:27:12 2001
From: dewing at apple.com (David Ewing)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] Bug in t.g from "Parsing Simple Data"
In-Reply-To: <AEAF9F9A-D049-11D5-A722-000502057631@uos.de>
Message-ID: <D8A1749A-D46D-11D5-94A7-0050E4508138@apple.com>


On Saturday, November 3, 2001, at 02:58 AM, bkuehl@web.de wrote:

>>
>>> The whitespace token isn't correct for MacOS or MacOSX. A
>>> single \r needs to be added.
>>
>> Sorry about that...I was waiting for NeXT to take over Apple and 
>> replace
>> the silly \r with \n as gawd intended ;)  Whew ....just in time. ;)
>>
>> Sorry for the hassle.  \n should work on NeXTStep...er....OS X.  I'm
>> using it right this very second!  Wohooo!
> This is not completly correct. Using OSX (10.1) just mark the input 
> lines
> from the head of the "Parsing Simple Data" webpage, copy and paste them
> into a TextEdit document, save the document and "od -c" shows that all
> lines end with \r.
>
> But when you paste the same lines as standard input to "od -c" or to the
> parser, the lines are terminated with \n.
>
> Can someone explain this? Do different applications handle newlines in 
> the
> pasteboard buffer in different ways? Why?

Um..., well..., yeah, Mac OS X goes both ways. Different parts of the OS 
prefer different line endings. Actually, most things handle the DOS way 
as well. And then, there's always the Unicode line and paragraph 
separator characters....

So, if you want to parse "text" files on a Mac, be prepared to deal with 
all the possibilities. :)

Dave


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From wiggjd at sbu.ac.uk  Fri Nov  9 05:31:01 2001
From: wiggjd at sbu.ac.uk (David Wigg)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] ANTLR Examples StdCParser.g
Message-ID: <3BEBDA95.2EB232DD@sbu.ac.uk>

I am trying to convert the Java version of the StdCParser in the
examples folder to run under C++ (only) (if successful, I will make this
available to the ANTLR community).

Where necessary, I am converting Java modules to C++.

I have done CToken and LineObject.

I am now wondering if I actually need PreprocessorInfoChannel. There is
a hint in main.java that it might only be needed for GnuParser.g. 

If this is so, can I delete all references to it in the C++ version?
(since I am only converting for running under C++)

If I do need it in the C++ version please could someone let me know what
it does in general terms?

On second thoughts I am now wondering whether the current Java version
of the StdCParser parses raw C++ source code (and therefore includes a
pre-processing phase?) or whether it parses pre-processed .i files?
(which is what we normally do with ANTLR 1.33).

If it does include a preprocessing phase, where is the code for this?

On the other hand I would really prefer to parse pre-processed code
(which I mentioned above, is what we do now with 1.33) and then I
wouldn't need a pre-processing phase.

Thanks for your help.

David
Research Fellow
South Bank University
London, UK.

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at bco.com  Fri Nov  9 06:24:38 2001
From: mzukowski at bco.com (mzukowski@bco.com)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] ANTLR Examples StdCParser.g
Message-ID: <170826586F3BD511910D0200C110AAA801C58039@memail03.bco-home.com>

Both StdCParser and GnuCParser expect preprocessed input.

PreprocessorInfoChannel is for holding #line and #pragma directives so that
when the tree is emitted as code you can reconstruct the proper preprocessor
information.  The GCC preprocessor and compiler will generate nested
includes so that it can print a message that "a.h" included "b.h" included
"c.h" which has this error...

PreprocessorInfoChannel works in concert with the lexer which assigns every
non-SKIP token a unique monotonically increasing number.  Every preprocessor
directive that the lexer finds is associated with the token number that is
followed.  When emitting source code the PreprocessorInfoChannel keeps track
of what has already been given out, and you can ask for all of the
preprocessor directives which preceeded a particular line.  Note that this
strategy breaks down if your tree manipulation shuffles nodes in the tree.
If all you do is add new nodes or remove nodes than this strategy will work.

So, do you intend to emit C code that will be compiled?  If so you probably
want to preserve the #line directives so your compiler can report errors
properly.  If you have no use for #line or #pragma or any other
preprocessing directives then you don't need the PreprocessorInfoChannel.

Monty

> -----Original Message-----
> From: David Wigg [mailto:wiggjd@sbu.ac.uk]
> Sent: Friday, November 09, 2001 5:31 AM
> To: antlr-interest@yahoogroups.com; zjg1964@yahoo.com
> Subject: [antlr-interest] ANTLR Examples StdCParser.g
> 
> 
> I am trying to convert the Java version of the StdCParser in the
> examples folder to run under C++ (only) (if successful, I 
> will make this
> available to the ANTLR community).
> 
> Where necessary, I am converting Java modules to C++.
> 
> I have done CToken and LineObject.
> 
> I am now wondering if I actually need 
> PreprocessorInfoChannel. There is
> a hint in main.java that it might only be needed for GnuParser.g. 
> 
> If this is so, can I delete all references to it in the C++ version?
> (since I am only converting for running under C++)
> 
> If I do need it in the C++ version please could someone let 
> me know what
> it does in general terms?
> 
> On second thoughts I am now wondering whether the current Java version
> of the StdCParser parses raw C++ source code (and therefore includes a
> pre-processing phase?) or whether it parses pre-processed .i files?
> (which is what we normally do with ANTLR 1.33).
> 
> If it does include a preprocessing phase, where is the code for this?
> 
> On the other hand I would really prefer to parse pre-processed code
> (which I mentioned above, is what we do now with 1.33) and then I
> wouldn't need a pre-processing phase.
> 
> Thanks for your help.
> 
> David
> Research Fellow
> South Bank University
> London, UK.
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/ 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20011109/1ddd788b/attachment.html
From johnm-antlr at non.net  Sun Nov 11 15:54:09 2001
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] token stream resynching in custom exception handlers?
In-Reply-To: <FC585C0E-CFBB-11D5-93FA-0030653DE0D6@jguru.com>
References: <20011102174231.D2031@cs.utwente.nl>
	<FC585C0E-CFBB-11D5-93FA-0030653DE0D6@jguru.com>
Message-ID: <15343.4001.185929.292521@non.non.net>

>>>>> "Terence" == Terence Parr <parrt@jguru.com> writes:
[...]
> Perhaps we should have $FOLLOW and $FOLLOW(rule) and $FIRST(rule) as
> values.

Yes, please!

John

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From john-yahoo at pybus.org  Mon Nov 12 03:48:19 2001
From: john-yahoo at pybus.org (john-yahoo@pybus.org)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] Bug in Java 1.3 grammer
Message-ID: <9socu3+8902@eGroups.com>

Hi,

I'm updating an application which used the java 1.2 grammer in antlr 
2.7.1 to use the 1.3 grammer from 
<http://www.antlr.org/grammars/java>.

It's good that the new grammer distiguishes NUM_FLOAT from 
NUM_DOUBLE.  It would be even better if it got it right ;-).

Your grammer parses 3.14F as a float, 3.14 also as a float, and 
3.14D as a double.  According to the java langspec:
http://java.sun.com/docs/books/jls/second_edition/html/lexical.doc.html#230798
in the case with no suffix it should be a double.

The fix is dead easy:

--- java.g      Mon Nov 12 11:37:07 2001
+++ java.g.fixed        Mon Nov 12 11:38:41 2001
@@ -1170,9 +1170,9 @@
             (  ('0'..'9')+ (EXPONENT)? (f1:FLOAT_SUFFIX {t=f1;})?
                 {
-                               if (t != null && 
t.getText().toUpperCase().indexOf('D')>=0) {
-                       _ttype = NUM_DOUBLE;
+                               if (t != null && 
t.getText().toUpperCase().indexOf('F')>=0) {
+                       _ttype = NUM_FLOAT;
                                }
                                else {
-                       _ttype = NUM_FLOAT;
+                       _ttype = NUM_DOUBLE;
                                }
                                }
@@ -1205,9 +1205,9 @@
             )
             {
-                       if (t != null && t.getText().toUpperCase() 
.indexOf('D') >= 0) {
-                _ttype = NUM_DOUBLE;
+                       if (t != null && 
t.getText().toUpperCase().indexOf('F') >= 0) {
+                _ttype = NUM_FLOAT;
                        }
             else {
-                _ttype = NUM_FLOAT;
+                _ttype = NUM_DOUBLE;
                        }
                        }

======

(The Yahoo Web interface may well have mangled that but you get the 
idea.)

Thanks for the all the efforts in producing the grammer it's much 
appreciated, antlr is a fantastic thing.

John Pybus



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From agno at ai.sri.com  Mon Nov 12 11:18:51 2001
From: agno at ai.sri.com (agno@ai.sri.com)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] Little speed increases
Message-ID: <9sp7ar+u049@eGroups.com>

I've been using the 2.7.1 version of ANTLR for Java, and I thought I
should mention that while I was looking for tiny speed increases, I
found that loops were being used to copy arrays instead of
System.arraycopy.

This was in:
CharQueue.expand():
System.arraycopy(buffer, offset, newBuffer, 0, buffer.length - offset);
System.arraycopy(buffer, 0, newBuffer, buffer.length - offset, offset);

TokenQueue.expand():
System.arraycopy(buffer, offset, newBuffer, 0, buffer.length - offset);
System.arraycopy(buffer, 0, newBuffer, buffer.length - offset, offset);

ANTLRStringBuffer.append(char)
System.arraycopy(buffer, 0, newBuffer, 0, length);

When I changed these to use arraycopy, it gave me a fraction of a
millisecond increase in time (on average) to parse a single line,
which was helpful in my application.  I also made some changes so that
one could reuse a lexer and a parser, but they're only useful when you
only have one thread accessing them.  I'm not sure if there was a
difference there or not--possibly my machine was too fast to detect one.

Andrew.



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Tue Nov 13 01:42:28 2001
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:33 2004
Subject: Interesting 'competition' (for C++)
Message-ID: <20011113104227.A10868@cs.utwente.nl>

Hi,

What these guys are doing looks interesting...

http://spirit.sourceforge.net/

I did not have time to completely read their docs. Is it maybe also usable
for these new java 'templates' (sorry forgot the term used for them)...

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
Wit is cultured insolence. - Aristotle

From klaren at cs.utwente.nl  Tue Nov 13 01:42:28 2001
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] Interesting 'competition' (for C++)
Message-ID: <20011113104227.A10868@cs.utwente.nl>

Hi,

What these guys are doing looks interesting...

http://spirit.sourceforge.net/

I did not have time to completely read their docs. Is it maybe also usable
for these new java 'templates' (sorry forgot the term used for them)...

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
Wit is cultured insolence. - Aristotle

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From christian.ernst at poet.de  Tue Nov 13 04:18:17 2001
From: christian.ernst at poet.de (christian.ernst@poet.de)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] ANTLR Runtime/SDK jar mixtures and suggestions
Message-ID: <9sr329+108ag@eGroups.com>

Hy Folks !
It seems that the runtime antlr.jar build through the mkjar.bat
has some unresolved dependicies.
The Main problem is that there seems not to be any concept of 
seperating the Generater Tool Classes from the Classes used by 
generated Parser/Treeparser.

So i suggest following changes:

Class: antlr.Tool 
ToDo: Move static Methods to own Class for example StringTool
Methods:
stripFront(..)
stripBack(..)
stripFrontBack(..)

Class: ASTFactory
ToDo: change Methods for error Output from Tool.warning to 
System.err.println()
Methods:
create()
setAstNodeTyp(..)

Now there are no more dependicies 
and it is possible to build a small nifty runtime jar of 53k
You have only to include following classes:
antlr/SemanticException.class
antlr/CharFormatter.class
antlr/Parser.class
antlr/TokenQueue.class
antlr/CharStreamException.class
antlr/FileLineFormatter.class
antlr/ANTLRHashString.class
antlr/ANTLRStringBuffer.class
antlr/LexerSharedInputState.class
antlr/LLkParser.class
antlr/MismatchedCharException.class
antlr/TreeParserSharedInputState.class
antlr/MismatchedTokenException.class
antlr/CharScanner.class
antlr/ASTNULLType.class
antlr/CharStreamIOException.class
antlr/TokenStreamException.class
antlr/TokenBuffer.class
antlr/NoViableAltException.class
antlr/TokenStreamHiddenTokenFilter.class
antlr/TokenStreamSelector.class
antlr/TreeParser.class
antlr/CommonToken.class
antlr/TokenStream.class
antlr/BaseAST.class
antlr/NoViableAltForCharException.class
antlr/StringTool.class
antlr/TokenStreamBasicFilter.class
antlr/CharQueue.class
antlr/ByteBuffer.class
antlr/RecognitionException.class
antlr/InputBuffer.class
antlr/ASTFactory.class
antlr/ParserSharedInputState.class
antlr/TokenStreamRecognitionException.class
antlr/DefaultFileLineFormatter.class
antlr/ASTPair.class
antlr/CharBuffer.class
antlr/LLkASTSupportParser.class
antlr/ANTLRException.class
antlr/TokenStreamIOException.class
antlr/CommonAST.class
antlr/Token.class
antlr/CommonHiddenStreamToken.class
antlr/TokenStreamRetryException.class
antlr/collections/Stack.class
antlr/collections/AST.class
antlr/collections/List.class
antlr/collections/ASTEnumeration.class
antlr/collections/impl/VectorEnumerator.class
antlr/collections/impl/LLCell.class
antlr/collections/impl/Vector.class
antlr/collections/impl/LLEnumeration.class
antlr/collections/impl/BitSet.class
antlr/collections/impl/ASTArray.class
antlr/collections/impl/ASTEnumerator.class
antlr/collections/impl/IntRange.class
antlr/collections/impl/LList.class
antlr/debug/GuessingEvent.class
antlr/debug/ListenerBase.class
antlr/debug/ParserMatchListener.class
antlr/debug/SemanticPredicateEvent.class
antlr/debug/ParserTokenListener.class
antlr/debug/ParserTokenEvent.class
antlr/debug/ParserListener.class
antlr/debug/SemanticPredicateListener.class
antlr/debug/MessageEvent.class
antlr/debug/MessageListener.class
antlr/debug/TraceListener.class
antlr/debug/SyntacticPredicateEvent.class
antlr/debug/TraceEvent.class
antlr/debug/Event.class
antlr/debug/ParserMatchEvent.class
antlr/debug/SyntacticPredicateListener.class

mfg 
christian
 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From christian.ernst at poet.de  Tue Nov 13 04:25:36 2001
From: christian.ernst at poet.de (christian.ernst@poet.de)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] ANTLR Java Code Generation
Message-ID: <9sr3g0+el9s@eGroups.com>

Hy Folks !

While working with ANTLR i recognized a few thinks which could be
changed in the Java Code Generation:

I
The generated Code for your BitSet's looks like:

private static final long _tokenSet_0_data_[] = { -549755813896L,
-268435457L}
public static final BitSet _tokenSet_0 = new 
BitSet(_tokenSet_0_data_);

On some grammars for example the java.g for the Java Lexer with 
UNICODE
these Array's are getting realy big but containing mostly Sequences of
the same Value

First Case :
private static final long _tokenSet_0_data_[] = { -549755813896L,
-268435457L, -1L, -1L, -1L, -1L, -1L, -1L, -1L, -1L,......};
or
Second Case:
private static final long _tokenSet_0_data_[] = { -549755813896L,
-268435457L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L,......};

The Problem with these large Array's is what ByteCode for such
Statements is generated. It looks like:
1. create Array long _tokenSet_0_data_[] with size n
2. put -549755813896L at 0
3. put -268435457L at 1
4. put -1L at 2
.....
n. put -1L at n

Some Java Compilers ( Sun 1.2.2, Sun 1.8 ) recognize that for example 
in
the second Case, where the rest of the Array is 0L, no initialzing is
needed,
because 0L is the default of an long Array, but these was changed in 
the
current new Compilers( Sun JDK 1.3.1) back to the Long Version with
initilalizing every member. ( i don't now why exactly, but should have
something to do with a bug with inheritence)

But in our case we know that is only used temporay until we use it in
the same Class for initializing our static BitSet.
So we should change this to the way how the Java Compiler rewrites our
Code.
One useful thing we could use is a static block( static{...} ) for 
this
job

Example one:
private static final long _tokenSet_0_data_[] =  {
1,2,3,4,5,-1L,-1L,-1L,-1L,-1L,0L,0L,13,0L,0L,-1L,-1L,-1L,-1L,-1L };
public static final BitSet _tokenSet_0 = new 
BitSet(_tokenSet_0_data_);

will be generated as following:
public static final BitSet _tokenSet_0;
static {
     // initializing BitSet _tokenSet_0
     long _tokenSet_0_data_[] = new long[20];
     _tokenSet_0_data_[0] = 1L;
     _tokenSet_0_data_[1] = 2L;
     _tokenSet_0_data_[2] = 3L;
     _tokenSet_0_data_[3] = 4L;
     _tokenSet_0_data_[4] = 5L;
     for(int i = 5 ; i <= 9 ; i++) { _tokenSet_0_data_[i] = -1L; }
     _tokenSet_0_data_[12] = 13L;
     for(int i = 15 ; i <= 19 ; i++) { _tokenSet_0_data_[i] = -1L; }
     _tokenSet_0 = new BitSet(_tokenSet_0_data_);
}

So if BitSets are large but containing lots of long identical 
Sequences
this is  more efficient !
For example see JAVA 1.3 ANTLR Grammar for the Lexer
With this Solution you can cut down the size of the
JAVA Lexer Source File from 100k to 53k and the Class File from 93k to
18k

---------------------------------------
Patch:
---------------------------------------
---------------------------------------
Package:
antlr.collections.impl
Class:
BitSet
Todo:
add new Method for accessing the internal long Array named:
toLongArray()
--------------------------------------
Code:
--------------------------------------
/**
 * helper Method for getting the internal Array of Word's (bits 
long[])
 * is needed for generating nicer Java Code
 * @return long[]
 */
public long[] toLongArray() {
 return bits;
}
---------------------------------------
---------------------------------------
Package:
antlr
Class:
JavaCodeGenerator
Todo:
modify the Java Code Generation method  named: genBitsets(Vector
bitsetList, int maxVocabulary)
---------------------------------------
Code:
---------------------------------------
/** Generate all the bitsets to be used in the parser or lexer
 * Generate the raw bitset data like "long _tokenSet1_data[] = {...};"
 * and the BitSet object declarations like "BitSet _tokenSet1 = new
BitSet(_tokenSet1_data);"
 * Note that most languages do not support object initialization 
inside
a
 * class definition, so other code-generators may have to separate the
 * bitset declarations from the initializations (e.g., put the
initializations
 * in the generated constructor instead).
 * @param bitsetList The list of bitsets to generate.
 * @param maxVocabulary Ensure that each generated bitset can contain 
at
least this value.
 */
protected void genBitsets(Vector bitsetList, int maxVocabulary)
{

    for (int i = 0; i < bitsetList.size(); i++)
    {
        BitSet p = (BitSet) bitsetList.elementAt(i);
        // Ensure that generated BitSet is large enough for vocabulary
        p.growToInclude(maxVocabulary);
    }

    // generate the Java Code

    // in some Conditions these Bitsets are containing
    // long sequence of identical bits
    // if we initialize these long sequences with
    // long bits[] = { 
434324,3234,623,-1L,-1L,-1L,-1L,0L,0L,0L,0L,...};

    // Bitset set = new Bitset(bits);
    // the Class Files gets realy huge
    // the reason is that for every element in the declaration
    // inside {} the java compiler generates bytecode
    // which is equal to bits[i] = element
    // even when the element is 0 and for sequences
    // generating these initializer on our own we can
    // optimize that
    // by not initializing 0
    // by using loops for long sequences
    // in addition these make in average the Java Source also smaller

    // for example see JAVA 1.3 ANTLR Grammar for the Lexer
    // with this solution you can cut down the size of the
    // JAVA Lexer Source from 100k to k 53K
    // and the Class File from 93k to k 18K

    println("");
    // declare our static variable for our Bitset's
    for (int i = 0; i < bitsetList.size(); i++)
    {
        println("public static final BitSet " + getBitsetName(i) 
+";");
    }

    // generate the static block for initializing
    println("");
    println("// BitSet initializing ");
    println("static {");
    for (int i = 0; i < bitsetList.size(); i++)
    {
        long bits[] = ((BitSet) 
bitsetList.elementAt(i)).toLongArray();

        int bitLength = bits.length;

        println("    // initializing BitSet " + getBitsetName(i));
        println("    long " + getBitsetName(i) + "_data_" + "[] = new
long[" + bitLength + "];");

        int seqStartIndex = 0;
        boolean seq = false;
        for (int index = 0; index < bitLength; index++)
        {
            // next ? next is identical  ? => sequence
            if((index + 1 < bitLength) && (bits[index] == bits[index +
1]))
            {
                seq = true;
            }
            else
            {
                // next not identical
                // sequence ending generate code for sequence ?
                if (seq)
                {
                    // generate code only if sequence isn't 0L
                    if (bits[index] != 0L)
                    {
                        print("    for(int i = " + seqStartIndex + "
; 
i
<= " + index + " ; i++) {");
                        print(getBitsetName(i) + "_data_" + "[i] = " +
bits[index] + "L;");
                        println("}");
                    }
                    // sequence over
                    seq = false;
                }
                else
                {
                    // generate normal code
                    println("    "+getBitsetName(i) + "_data_" + "[" +
index + "] = " + bits[index] + "L;");
                }
                seqStartIndex = index + 1;
            }
        }
        println("    "+getBitsetName(i)+ " = new
BitSet("+getBitsetName(i) + "_data_); ");
        println("");
    }
    // end of the static block
    println("}");
}
------------------------------------------

mfg
christian



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sasecp at wnt.sas.com  Tue Nov 13 04:38:06 2001
From: sasecp at wnt.sas.com (Ernest Pasour)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] DBCS support (in C++)
Message-ID: <764CA2FF49EC054BA086FC8253A52DD7501BE8@merc09.na.sas.com>

I'm using VC++ 6.0.  

Has anyone done any work to support parsing of text containing DBCS characters?  I'm running into problems when the trailing byte happens to be a '\'.

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From stdiobe at enneya.com  Tue Nov 13 04:49:42 2001
From: stdiobe at enneya.com (Stdiobe)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] ANTLR Java Code Generation
References: <9sr3g0+el9s@eGroups.com>
Message-ID: <00f301c16c41$aab7c990$0101a8c0@daemon>

Christian,

> For example see JAVA 1.3 ANTLR Grammar for the Lexer
> With this Solution you can cut down the size of the
> JAVA Lexer Source File from 100k to 53k and the Class File 
> from 93k to 18k

Seems to me like a good suggestion. Any drawbacks performance-wise?

Can't wait to see how it will decrease the size of my parser 
(currently, generated source: 1.7Mb generated class: 750Kb).

Silvain




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From christian.ernst at poet.de  Tue Nov 13 05:13:46 2001
From: christian.ernst at poet.de (Christian Ernst)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] ANTLR Java Code Generation
References: <9sr3g0+el9s@eGroups.com> <00f301c16c41$aab7c990$0101a8c0@daemon>
Message-ID: <3BF11C8A.D74F9B2E@poet.de>

Hy !

Stdiobe wrote:

> Seems to me like a good suggestion. Any drawbacks performance-wise?

We didn't do any performance measures.
But there should be a performance gain.

For example for the Java Lexer 1.3.
It cuts down the needed initializing of 6 Bitsets
with about 11.000 Long Values
to only about 4.000 Long Values

mfg
Christian



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From george_artin at yahoo.com  Tue Nov 13 12:03:55 2001
From: george_artin at yahoo.com (george_artin@yahoo.com)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] new guy
Message-ID: <9srubb+cta0@eGroups.com>

folks,
I'm a new member in this mailing list and it is my first time to use 
the ANTLR, I want to ask u how to start? I want to translate from 
Java to my dedicated assembly code, where can I found a document on 
how to use the ANTLR.

Regards,
  G. Artin



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From remus at nolimits.ro  Tue Nov 13 12:08:06 2001
From: remus at nolimits.ro (Remus Pereni)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] new guy
In-Reply-To: <9srubb+cta0@eGroups.com>
References: <9srubb+cta0@eGroups.com>
Message-ID: <20011113200806.GA1969@nolimits.ro>

On Tue, Nov 13, 2001 at 08:03:55PM -0000, george_artin@yahoo.com wrote:
>folks,
>I'm a new member in this mailing list and it is my first time to use 
>the ANTLR, I want to ask u how to start? I want to translate from 
>Java to my dedicated assembly code, where can I found a document on 
>how to use the ANTLR.

All you would ever need can be found at:

http://www.antlr.org/doc/index.html
http://www.antlr.org/articles.html
http://www.jguru.com (do a search on antlr)
this mailing list

>Regards,
>  G. Artin

Regards,
	Remus

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From tom at psy.unsw.edu.au  Tue Nov 13 15:47:44 2001
From: tom at psy.unsw.edu.au (tom@psy.unsw.edu.au)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] Re: ANTLR Java Code Generation
In-Reply-To: <3BF11C8A.D74F9B2E@poet.de>
Message-ID: <9ssbf0+vfn8@eGroups.com>

Will there be a performance gain? There will be a bytecode size 
decrease, which will decrease memory usage on platforms like Unix 
which memory-map classes. But won't there be a performance decrease 
because instead of a nice super clean:
1. create Array long _tokenSet_0_data_[] with size n
2. put -549755813896L at 0
3. put -268435457L at 1
4. put -1L at 2
.....
n. put -1L at n
with O[n] time you'll have:
1. create Array long _tokenSet_0_data_[] with size n
2. put -549755813896L at 0
.
.
.
6. put -268435457L at 1
.
.
.
10. put -1L at 2
.....
n*4. put -1L at n
With all the extra loop overhead. Thus your time is now O[x*n] (where 
x is number of instructions to do for each entry). Is this actually 
going to be a gain? You still have to add the same number of entries. 
Just trades off class size vs. speed doesn't it. And I would have 
thought for many cases speed was more important than class size. You 
only store\load the class once, you have to do the BitSet creation 
every parse (if you did 2 passes with one init, then you'd double the 
amount of computation (and thus overhead) but same memory overhead).

And surely the JDK's gonna be better at optimizing the initializer 
cause it knows everything that's going on, where as the second one 
must deal with any side effects.

Still might be worth offering it as an option, but I would have 
thought it would be best to check performance before using only this 
method.

It doesn't cut down the intialization does it? Still got to 
initialize every value, in fact makes it worse because it's x times 
more ops. Just cuts down class size.

Tom.
--- In antlr-interest@y..., Christian Ernst <christian.ernst@p...> 
wrote:
> Hy !
> 
> Stdiobe wrote:
> 
> > Seems to me like a good suggestion. Any drawbacks performance-
wise?
> 
> We didn't do any performance measures.
> But there should be a performance gain.
> 
> For example for the Java Lexer 1.3.
> It cuts down the needed initializing of 6 Bitsets
> with about 11.000 Long Values
> to only about 4.000 Long Values
> 
> mfg
> Christian


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From tom at psy.unsw.edu.au  Tue Nov 13 15:57:56 2001
From: tom at psy.unsw.edu.au (tom@psy.unsw.edu.au)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] Re: ANTLR Runtime/SDK jar mixtures and suggestions
In-Reply-To: <9sr329+108ag@eGroups.com>
Message-ID: <9ssc24+l06s@eGroups.com>

Ideally not, this method allows programmatic collection of errors 
(plus it's a good idea in general because it saves you having to 
replace every call to System.err when you realize you might want to 
support half decent error logging (such as JDK1.4 logging based)). 
The addin for JBuilder (I think it is) uses it and the upcoming 
module for Netbeans will also use it. Redirecting error stream isn't 
really appropriate either, cause then you can't seperate proper Antlr 
errors from user prints to System.err. It can't really be moved into 
the generated files either, has to remain in a seperate class so it 
can be overridden. Could have a seperate ErrorHandler class or 
something, no problems there. Or, you could have methods in the 
generated grammar that called the ErrorHandler by default but could 
be overridden in the grammar.

Tom.
--- In antlr-interest@y..., christian.ernst@p... wrote:
> Hy Folks !
<SNIP>
> 
> So i suggest following changes:
<SNIP>
> 
> Class: ASTFactory
> ToDo: change Methods for error Output from Tool.warning to 
> System.err.println()
> Methods:
> create()
> setAstNodeTyp(..)
> 
<SNIP> 
> mfg 
> christian


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From rjc at trump.net.au  Wed Nov 14 00:06:46 2001
From: rjc at trump.net.au (Robert Colquhoun)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] Re: ANTLR Java Code Generation
In-Reply-To: <9ssbf0+vfn8@eGroups.com>
References: <3BF11C8A.D74F9B2E@poet.de>
Message-ID: <4.2.0.58.20011114182712.00b40d90@postoffice.trump.net.au>

Hi,

Attached is a BitSet class that uses offset's to work better with sparse 
sets that i did a few months ago.

Have kind of been busy in the meantime and not had the chance to try and 
integrate it into antlr.

To use you would do something like this:

private static final BitSet _tokenSet_0 = getTokenSet0();
private static final BitSet getTokenSet0() {
	long [] data = {
		-549755813896L,
		-268435457L
	};
	int offset = 0;
	return getTokenSet(data, offset);
}
//the routine below should be put into the parent class
private static final BitSet getTokenSet(long[] data, int offset) {
	BitSet bt = new Bitset();
	for (int i = 0; i < data.length; i++) {
		long val = data[i];
		for (int j = 0; j < 64; j++) bt.add((val & (1 << j)) + offset);
	}
}

Looks kind of icky at first but does get rid of all the trailing 0's by 
increasing the offset appropriately.  With the above the standard 
java.util.BitSet can be freely substituted.

(The -1 case is a bit more difficult, can brute force this by force setting 
to 1 all values between 0 and offset in a loop, but a better solution is to 
have some sortof negate flag if the value is within range...need to think 
about this some more).

- Robert

Things to note about attached file
	- included is obligatory eratosthenes sieve test,type 'make test' first is 
antlr current bitset, 2nd is bitset i just did in java, 3rd is standard 
java.util.BitSet class finally C++ version of my bitset class
	- the 3 java cases run about the same speed for the above test, the c++ 
case is about 3x faster(on slow hpux jvm).
	- C++ source is functional but looks like a java ported program, needs 
some cleaning up
	- the distinguishing feature for the bitset i did was to try and work well 
for sparse sets ie when you are only looking for a couple of characters in 
the whole unicode set - the sieve test does not show behavior in this 
situation, need another test.
	- the Makefile only sortof works. sorry.

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: bitset.tar.gz
Type: application/octet-stream
Size: 5348 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20011114/3a5299fe/bitset.tar.obj
From stdiobe at enneya.com  Wed Nov 14 00:22:32 2001
From: stdiobe at enneya.com (Stdiobe)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] Re: ANTLR Java Code Generation
References: <3BF11C8A.D74F9B2E@poet.de> <4.2.0.58.20011114182712.00b40d90@postoffice.trump.net.au>
Message-ID: <001901c16ce5$830e5630$0101a8c0@daemon>

Christian,

as they say "the proof of the pudding is in the eating" so I decided
to give it a go. I applied your changes to ANTLR and tried it
on a very large grammar. 

The result: instead of a size decrease the generated source file
increased from 1.7 Mb to 1.8 Mb. The class file showed a small
size decrease from 704 Kb to 701 Kb which is not significant.

I tested the generated parser on a very large testset, but couldn't
detect any performance decrease (or increase for that matter).

Sorry, but this one didn't work for me (but if you have any other
suggestions to reduce size or improve performance, I'm open to it).

Silvain



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From rjc at trump.net.au  Wed Nov 14 00:49:47 2001
From: rjc at trump.net.au (Robert Colquhoun)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] Re: ANTLR Java Code Generation
In-Reply-To: <9ssbf0+vfn8@eGroups.com>
References: <3BF11C8A.D74F9B2E@poet.de>
Message-ID: <4.2.0.58.20011114193356.00b41520@postoffice.trump.net.au>

At 11:47 PM 11/13/01 +0000, tom@psy.unsw.edu.au wrote:
>With all the extra loop overhead. Thus your time is now O[x*n] (where
>x is number of instructions to do for each entry). Is this actually
>going to be a gain? You still have to add the same number of entries.
>Just trades off class size vs. speed doesn't it. And I would have
>thought for many cases speed was more important than class size. You
>only store\load the class once, you have to do the BitSet creation
>every parse (if you did 2 passes with one init, then you'd double the
>amount of computation (and thus overhead) but same memory overhead).

For most typical grammers most of the BitSet's are static ie very long lived

For my Arev/Pick BASIC to java bytecode compiler, HPJMeter profiler gives 
method counts:

41102 antlr.collections.impl.BitSet.member
41029 antlr.collections.impl.BitSet.bitMask
41029 antlr.collections.impl.BitSet.wordNumber
54 antlr.collections.impl.BitSet.<init>

For <init> breaking down by caller:

47 org.maverickdbms.tools.BASICParser.<clinit>
6 org.maverickdbms.tools.BASICLexer.<clinit>
1 org.maverickdbms.tools.ByteCodeTreeWalker.<clinit>

ie they are all static.

Look at how important it is to optimize the member() function(bitMask and 
wordNumber are called from member) it is called 1000x more often than the 
constructor.

- Robert




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From christian.ernst at poet.de  Wed Nov 14 02:54:01 2001
From: christian.ernst at poet.de (Christian Ernst)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] Re: ANTLR Java Code Generation
References: <9ssbf0+vfn8@eGroups.com>
Message-ID: <3BF24D49.B1196AF7@poet.de>

Hy !

tom@psy.unsw.edu.au wrote:

> n*4. put -1L at n
> With all the extra loop overhead. Thus your time is now O[x*n] (where
> x is number of instructions to do for each entry). Is this actually
> going to be a gain? You still have to add the same number of entries.

1.Number of Entries:
Ther are less adds, because it is only done for all Members which are != 0L
see:
static long _tokenSet_0_data_[] = {0L,0L,0L,0L,1}
will be:
static long _tokenSet_0_data_[] = new long[5];

static{
    _tokenSet_0_data_[4] = 1;
}

2. The extra Time for the Loop:
You could generate code without any Loop
like:
static{
    _tokenSet_0_data_[0] = -1L;
    _tokenSet_0_data_[1] = -1L;
    _tokenSet_0_data_[2] = -1L;
    _tokenSet_0_data_[3] = -1L;
}

But we asume that the Loop is the Element which is best optimized by JIT's
Another Solution might be the
Array.fill(long[],int,int,long)
But this means Method-Overhead and internaly yust the same Loop as we
did on our own.


> Just trades off class size vs. speed doesn't it. And I would have
> thought for many cases speed was more important than class size. You
> only store\load the class once, you have to do the BitSet creation
> every parse (if you did 2 passes with one init, then you'd double the
> amount of computation (and thus overhead) but same memory overhead).

3. BitSet initializing:
The initializing is done in a static block which is only executed once when
the Class is loaded
JAVAC is doing the same think with an array
static long _tokenSet_0_data_[] = {0L,0L,0L,0L,0L,-1L}

will be compiled as
static long _tokenSet_0_data_[] ;

static{
    _tokenSet_0_data_[0] = 0L;
    _tokenSet_0_data_[1] = 0L;
    _tokenSet_0_data_[2] = 0L;
    _tokenSet_0_data_[3] = 0L;
    _tokenSet_0_data_[4] = -1L;
}

ther you can see also the 0L Problem...


> Tom.

mfg
Christian



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mbo.tech at spree.de  Wed Nov 14 03:00:00 2001
From: mbo.tech at spree.de (Michael Bouschen)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] Re: ANTLR Java Code Generation
References: <9ssbf0+vfn8@eGroups.com>
Message-ID: <3BF24EB0.6996DF4A@spree.de>

Hi,

I really appreciate the proposal hanging the Java Code Generation such
that the generated byte code becomes much smaller! This would allow my
compiler to be build in an jdk1.3 environment which is currently not
possible. So I'm less worried about a possible performance drawback. 

I use a large charVocabulary, because I need some UNICODE support in my
compiler. The bitsets in the generated lexer become really big. Using
Sun's jdk1.3, the generated byte code is too big to be loaded into the
VM: 
  Exception in thread "main" java.lang.ClassFormatError:
com/sun/jdori/common/query/jdoqlc/JDOQLLexer (Code of a method longer
than 65535 bytes)
The only workaround I know so far is using the jdk1.2 javac. So the
build environment has to ensure that the lexer is never compiled using
the jdk1.3 javac (even not indirectly).

Regards Michael 

> 
> Will there be a performance gain? There will be a bytecode size
> decrease, which will decrease memory usage on platforms like Unix
> which memory-map classes. But won't there be a performance decrease
> because instead of a nice super clean:
> 1. create Array long _tokenSet_0_data_[] with size n
> 2. put -549755813896L at 0
> 3. put -268435457L at 1
> 4. put -1L at 2
> .....
> n. put -1L at n
> with O[n] time you'll have:
> 1. create Array long _tokenSet_0_data_[] with size n
> 2. put -549755813896L at 0
> .
> .
> .
> 6. put -268435457L at 1
> .
> .
> .
> 10. put -1L at 2
> .....
> n*4. put -1L at n
> With all the extra loop overhead. Thus your time is now O[x*n] (where
> x is number of instructions to do for each entry). Is this actually
> going to be a gain? You still have to add the same number of entries.
> Just trades off class size vs. speed doesn't it. And I would have
> thought for many cases speed was more important than class size. You
> only store\load the class once, you have to do the BitSet creation
> every parse (if you did 2 passes with one init, then you'd double the
> amount of computation (and thus overhead) but same memory overhead).
> 
> And surely the JDK's gonna be better at optimizing the initializer
> cause it knows everything that's going on, where as the second one
> must deal with any side effects.
> 
> Still might be worth offering it as an option, but I would have
> thought it would be best to check performance before using only this
> method.
> 
> It doesn't cut down the intialization does it? Still got to
> initialize every value, in fact makes it worse because it's x times
> more ops. Just cuts down class size.
> 
> Tom.
> --- In antlr-interest@y..., Christian Ernst <christian.ernst@p...>
> wrote:
> > Hy !
> >
> > Stdiobe wrote:
> >
> > > Seems to me like a good suggestion. Any drawbacks performance-
> wise?
> >
> > We didn't do any performance measures.
> > But there should be a performance gain.
> >
> > For example for the Java Lexer 1.3.
> > It cuts down the needed initializing of 6 Bitsets
> > with about 11.000 Long Values
> > to only about 4.000 Long Values
> >
> > mfg
> > Christian
> 
> 
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/

-- 
Michael Bouschen		Tech@Spree Software Technology GmbH
mailto:mbo.tech@spree.de	http://www.tech.spree.de/
Tel.:++49/30/235 520-33		Buelowstr. 66			
Fax.:++49/30/2175 2012		D-10783 Berlin

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From christian.ernst at poet.de  Wed Nov 14 04:19:36 2001
From: christian.ernst at poet.de (Christian Ernst)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] Re: ANTLR Runtime/SDK jar mixtures and suggestions
References: <9ssc24+l06s@eGroups.com>
Message-ID: <3BF26158.2665D2E0@poet.de>

Hy !

tom@psy.unsw.edu.au wrote:

> Ideally not, this method allows programmatic collection of errors
> (plus it's a good idea in general because it saves you having to
> replace every call to System.err when you realize you might want to
> support half decent error logging (such as JDK1.4 logging based)).
> The addin for JBuilder (I think it is) uses it and the upcoming
> module for Netbeans will also use it. Redirecting error stream isn't
> really appropriate either, cause then you can't seperate proper Antlr
> errors from user prints to System.err. It can't really be moved into
> the generated files either, has to remain in a seperate class so it
> can be overridden. Could have a seperate ErrorHandler class or
> something, no problems there. Or, you could have methods in the
> generated grammar that called the ErrorHandler by default but could
> be overridden in the grammar.

Yes i agree a central Logging facility would be better for the ANTLR Tool and

for IDE Intergration like JBuilder etc.
But for a small Runtime and under the Aspect that there is only one runtime
class (ASTFactory)
which use this Logging only for a warning it would be nice to get rid of this
dependicy
Perhaps it might be even better to change this to throwing a
new RuntimeException like ASTGenerationException !?

mfg
Christian






 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From george_artin at yahoo.com  Wed Nov 14 09:40:52 2001
From: george_artin at yahoo.com (george artin)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] new guy
In-Reply-To: <20011113200806.GA1969@nolimits.ro>
Message-ID: <20011114174052.61820.qmail@web21006.mail.yahoo.com>

Thanks a lot Remus it helps.
I found a page named "getting started with ANTLR" it
asks you to run the instruction "java antlr.Tool t.g",
where "t.g" is the grammar file and when I run the
instruction it gives me this error message:
"Exception in thread "main"
java.lang.NoClassDefFoundError: antlr/Tool"
I don't know why this message appear? the class path
for java is tuned correctly and I can run any java
file.

Regards,
  G. Artin
--- Remus Pereni <remus@nolimits.ro> wrote:
> On Tue, Nov 13, 2001 at 08:03:55PM -0000,
> george_artin@yahoo.com wrote:
> >folks,
> >I'm a new member in this mailing list and it is my
> first time to use 
> >the ANTLR, I want to ask u how to start? I want to
> translate from 
> >Java to my dedicated assembly code, where can I
> found a document on 
> >how to use the ANTLR.
> 
> All you would ever need can be found at:
> 
> http://www.antlr.org/doc/index.html
> http://www.antlr.org/articles.html
> http://www.jguru.com (do a search on antlr)
> this mailing list
> 
> >Regards,
> >  G. Artin
> 
> Regards,
> 	Remus


__________________________________________________
Do You Yahoo!?
Find the one for you at Yahoo! Personals
http://personals.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Wed Nov 14 10:14:14 2001
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] new guy
In-Reply-To: <20011114174052.61820.qmail@web21006.mail.yahoo.com>; from george_artin@yahoo.com on Wed, Nov 14, 2001 at 09:40:52AM -0800
References: <20011113200806.GA1969@nolimits.ro> <20011114174052.61820.qmail@web21006.mail.yahoo.com>
Message-ID: <20011114191414.A26887@cs.utwente.nl>

Hi,

On Wed, Nov 14, 2001 at 09:40:52AM -0800, george artin wrote:
> "Exception in thread "main"
> java.lang.NoClassDefFoundError: antlr/Tool"
> I don't know why this message appear? the class path
> for java is tuned correctly and I can run any java
> file.

Is antlr's installdir included in the class path? e.g. the antlr-2.7.1
directory.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
Wit is cultured insolence. - Aristotle


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sinan.karasu at boeing.com  Wed Nov 14 10:40:23 2001
From: sinan.karasu at boeing.com (Sinan)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] new guy
References: <20011114174052.61820.qmail@web21006.mail.yahoo.com>
Message-ID: <3BF2BA97.FAFB1D86@boeing.com>

george artin wrote:
> 
> Thanks a lot Remus it helps.
> I found a page named "getting started with ANTLR" it
> asks you to run the instruction "java antlr.Tool t.g",
> where "t.g" is the grammar file and when I run the
> instruction it gives me this error message:
> "Exception in thread "main"
> java.lang.NoClassDefFoundError: antlr/Tool"
> I don't know why this message appear? the class path
> for java is tuned correctly and I can run any java
> file.
> 

What version java are you using? What OS?

Assuming Unix/Linux

# java -classpath $WHERE_BE_ANTLR/antlr.jar antlr.Tool t.g

should work.

Also if you have compatilility problems, do

# cd $WHERE_BE_ANTLR
# find antlr -name "*.class" -exec rm {} \;
# javac -g `find antlr -name "*.java" -print`
# jar cvf myAntlr.jar antlr

and then 

# java -classpath $WHERE_BE_ANTLR/myAntlr.jar antlr.Tool t.g

One caveat:

If you use Ric Klaren's version and get an error , then delete the file

Cpp2CodeGenerator.java

Sinan

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Thu Nov 15 05:43:14 2001
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] ANNOUNCE: new devel snapshot
Message-ID: <20011115144313.A3115@cs.utwente.nl>

Hi,

I just finished packaging a new development snapshot. Get it at:

http://wwwhome/~klaren/antlr/

C++ support library docs are at:

http://wwwhome.cs.utwente.nl/~klaren/antlr/support-docs/index.html

Changes:
- New configure script at toplevel. (probably needs some tweaking)
- New makefile setup. make install now works.
- Wrapper shellscripts 'antlr' and 'antlr-config' (probably need some
  tweaking)
- Some stuff rearranged for better inlining.
- Fixes for Metrowerks codewarrior (courtesy of Ruslan)
- Added warnings for labeled subrules. (and probably some more)
- $lookaheadSet renamed to $FOLLOW (and ported to sather codegen, hope that
  it works there)
- Ditched LA_k optimizations from C++ codegen. The minor issue I expected
  on release turned out to be somewhat less minor. Didn't want to bother with
  it since it was kindoff a hack anyway. We'll probably do this completely 
  different in a new release.
- Checked over all C++ examples. Added makefiles for the lot of the them.

For as far as I'm concerned this can be integrated in the mainline and we
can start preparing for 2.7.2a1 release.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Why don't we just invite them to dinner and massacre them all when they're
  drunk? You heard the man. There's seven hundred thousand of them. Ah? ..
           So it'd have to be something simple with pasta, then.
                 From: Interesting Times by Terry Pratchet


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sinan.karasu at boeing.com  Thu Nov 15 08:38:19 2001
From: sinan.karasu at boeing.com (Sinan)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] ANTLR Java Code Generation
References: <9sr3g0+el9s@eGroups.com> <00f301c16c41$aab7c990$0101a8c0@daemon> <3BF11C8A.D74F9B2E@poet.de>
Message-ID: <3BF3EF7B.BE70D87D@boeing.com>

Christian Ernst wrote:
> 
> Hy !
> 
> Stdiobe wrote:
> 
> > Seems to me like a good suggestion. Any drawbacks performance-wise?
> 
> We didn't do any performance measures.
> But there should be a performance gain.
> 
> For example for the Java Lexer 1.3.
> It cuts down the needed initializing of 6 Bitsets
> with about 11.000 Long Values
> to only about 4.000 Long Values

Of course that is 11,000 and 4,000 in USA lingo...

Sinan

> 
> mfg
> Christian

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From patrick_leboutillier at hotmail.com  Thu Nov 15 08:42:54 2001
From: patrick_leboutillier at hotmail.com (Patrick LeBoutillier)
Date: Mon Dec 20 16:14:33 2004
Subject: [antlr-interest] Newbie question
Message-ID: <OE266tdqVvPdLFYxc9N00009179@hotmail.com>

Hi all,

I'm new to ANTLR and to the world of lexers/parsers in general.
I read up on the documentation and I have a pretty good feel of what
the lexer does and what the parser does. I have a question though:

Suppose I'm parsing Java source code. What I want to do is distinguish 
between white space that is used as indentation and whitespace that is in 
between other types of tokens. Indentation should be returned as a special 
token type, say INDENT, while other whitespace can be ignored.

Is it possible to do this (even though it might not be very useful)?

Thanks a lot,

Patrick
-------------------------
Patrick LeBoutillier
Laval, Quebec, Canada

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sinan.karasu at boeing.com  Thu Nov 15 09:50:25 2001
From: sinan.karasu at boeing.com (Sinan)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] Newbie question
References: <OE266tdqVvPdLFYxc9N00009179@hotmail.com>
Message-ID: <3BF40061.B92829B2@boeing.com>

Patrick LeBoutillier wrote:
> 
> Hi all,
> 
> I'm new to ANTLR and to the world of lexers/parsers in general.
> I read up on the documentation and I have a pretty good feel of what
> the lexer does and what the parser does. I have a question though:
> 
> Suppose I'm parsing Java source code. What I want to do is distinguish
> between white space that is used as indentation and whitespace that is in
> between other types of tokens. Indentation should be returned as a special
> token type, say INDENT, while other whitespace can be ignored.
> 
> Is it possible to do this (even though it might not be very useful)?

In other words you want new line followed wirh white space to be treated
as 
special. You just code it as such..... In lexer set a flag when you see
EOL
and in white space test it. Or have EOL return the white space string.
Or you can create a token stream selector class and have a nextToken
method 
that keeps track of all the tokens and automatically changes the first
white space after EOL to an INDENT token.

 One caveat is how to start the whole thing.

If you do

INDENT line EOL
INDENT line EOL


then first line is trouble. Since what you want is

EOL
INDENT line EOL
INDENT line EOL

This is where token stream selector comes in handy.

something like:

import antlr.*;
public class INDENTTokenStreamSelector extends TokenStreamSelector {

	protected boolean firstline;

	public F77TokenStreamSelector() {
		super();
		firstline = true;
	}

	public Token nextToken() throws TokenStreamException {
		for (;;) {
			try {


				if(firstline){
					wasEOL=true;
					return EOL;
				} 
				Token tok = super.nextToken();
				tok=super.nextToken();
				if(wasEOL){
					wasEOL=(tok.getType()==MyParser.EOL);
					if(tok.getType()==MyParser.WS){
							tok= MyParser.INDENT;// you should actually get/set the length
here
					}
				}
				return tok;	
			}
			catch (TokenStreamRetryException r) {
				// just retry "forever"
			}
		}
	}
}

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From kaberdude at yahoo.com  Thu Nov 15 17:26:40 2001
From: kaberdude at yahoo.com (kaberdude@yahoo.com)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] exit status from "java antlr.Tool ,,,"
Message-ID: <9t1q0g+rij2@eGroups.com>

I'm an off-on Antlr user. I'm trying to write a grammar for Dot 
(ATT's Graphvis), appropriately massaged to be LL(k) (not easy!).  
Anyways, after playing around, I noticed that it is not reliably 
exiting with non-zero status when there is a severe problem in the 
grammar. So, I tried this:

"java antlr.Tool y" where y contains exactly the character "y".
$ java antlr.Tool y

ANTLR Parser Generator   Version 2.7.1   1989-2000 jGuru.com
y:1: unexpected token: y
y: error: rule grammar trapped: y:1: unexpected token: y

$ echo $?
0

This isn't a correct grammar, so it would be nice if the 
tool would exit() with 1 (error) instead of 0 (ok).

Looking at the source, antlr.CharScanner defines reportError() 
without a System.exit(1), but doesn't record if there was an error 
for later regurgitation. However, a generated lexer for my 
(corrected) grammar defines reportError() as:

    public void reportError(String s) {
	super.reportError(s);
	System.exit(1);
    }
which is slightly better.

Am I doing something wrong?



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From smarks at sunriselabs.com  Fri Nov 16 08:05:53 2001
From: smarks at sunriselabs.com (Spencer Marks)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] another newbie asks basic question
Message-ID: <MPEOJOJMGOPBGONOIGCLAEBCCAAA.smarks@sunriselabs.com>

Hi,

I am completely new to antlr and only vaguely familiar with parsing concepts
in general. However, I hope that the task I have is common enough that I
won't have to become an expert to solve it. Any help would be greatly
appreciated. I did search around before posting.

Basically,

I have .C .CCP and .H files I need to parse in my Java program. Actually, my
plan is to parse them into an XML DOM. I was hoping to locate Java classes
that would do the parsing for me. (I need to check for snythax errors and
display them to user as read in the files and convert them to the XML DOM.)
I assume from reading a little bit about antlr that I could use it to design
such a parser which would then emit some Java code for me. However, I am
hoping that something like has already been done.

If anyone has a moment to point me in the right direction, I'd appreciate
it.

Thanks.

Sam



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From rradh at yahoo.com  Mon Nov 19 05:50:59 2001
From: rradh at yahoo.com (rradh@yahoo.com)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] SL_COMMENT rule from java.g example
Message-ID: <9tb2o3+7ieq@eGroups.com>

Hi,

I have the same definition of the SL_COMMENT rule (from java.g in the
examples/cpp/java/ directory), in my language.

SL_COMMENT
	:	"//"
		(~('\n'|'\r'))* ('\n'|'\r'('\n')?)
		{$setType(ANTLR_USE_NAMESPACE(antlr)Token::SKIP); newline();}
	;

The language is "Cpp".

The problem I am having is that if there is no terminating '\n' in a
single line comment. I get an "Abort" message and the program
terminates, despite the presence of '\n' being optional. 

Regards
Rajesh


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Mon Nov 19 11:01:56 2001
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] SL_COMMENT rule from java.g example
In-Reply-To: <9tb2o3+7ieq@eGroups.com>
Message-ID: <E72A5FF6-DD1F-11D5-96D4-0030653DE0D6@jguru.com>


On Monday, November 19, 2001, at 05:50  AM, rradh@yahoo.com wrote:

> Hi,
>
> I have the same definition of the SL_COMMENT rule (from java.g in the
> examples/cpp/java/ directory), in my language.
>
> SL_COMMENT
> 	:	"//"
> 		(~('\n'|'\r'))* ('\n'|'\r'('\n')?)
> 		{$setType(ANTLR_USE_NAMESPACE(antlr)Token::SKIP); newline();}
> 	;
>
> The language is "Cpp".
>
> The problem I am having is that if there is no terminating '\n' in a
> single line comment. I get an "Abort" message and the program
> terminates, despite the presence of '\n' being optional.

Try grabbing the latest one from the website...i think I fixed that 
one.  Hmm...maybe not.

you could just make that subrule optional.

Ter
--
Chief Scientist & Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From howardk at fatdog.com  Tue Nov 20 19:52:41 2001
From: howardk at fatdog.com (howardk@fatdog.com)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] lexical nondeterminism
Message-ID: <9tf8e9+cvl5@eGroups.com>

Sigh, I hate to bother people with this one. I thought I'd gotten 
reasonably ok at working out nondeterminism problems, but I can't see 
why the following (slightly simplified) lexical grammar isn't
working. antlr is complaining about the production QName. Lookahead
is k=2.

QName:		(NCName COLON)? NCName;

protected
NCName:		( Letter | '_' ) (NCNameChar)*;

protected
NCNameChar:	Letter | Digit | DOT | '-' | '_';

protected
Letter:		'A' .. 'Z';

Here's the message I get:

warning: lexical nondeterminism upon
k==1: 'A' .. 'Z', '_'
k==2: '-','.','0'..'9','A'..'Z','_'
between alts 1 and 2 of block

I know this isn't hard, but I'm going blind (and I'm not even doing 
THAT!) Any help much appreciated,

Howard



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Matthew.Ford at forward.com.au  Tue Nov 20 20:23:59 2001
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] lexical nondeterminism
References: <9tf8e9+cvl5@eGroups.com>
Message-ID: <002901c17244$578cc370$7664020a@matthewfnb>

I think it is
> QName: (NCName COLON)? NCName;
Antlr does not know which NCName to choose

try
 QName: NCName (COLON NCName)?;

now COLON tell antlr to continue looking

matthew
----- Original Message -----
From: <howardk@fatdog.com>
To: <antlr-interest@yahoogroups.com>
Sent: Wednesday, November 21, 2001 2:52 PM
Subject: [antlr-interest] lexical nondeterminism


> Sigh, I hate to bother people with this one. I thought I'd gotten
> reasonably ok at working out nondeterminism problems, but I can't see
> why the following (slightly simplified) lexical grammar isn't
> working. antlr is complaining about the production QName. Lookahead
> is k=2.
>
> QName: (NCName COLON)? NCName;
>
> protected
> NCName: ( Letter | '_' ) (NCNameChar)*;
>
> protected
> NCNameChar: Letter | Digit | DOT | '-' | '_';
>
> protected
> Letter: 'A' .. 'Z';
>
> Here's the message I get:
>
> warning: lexical nondeterminism upon
> k==1: 'A' .. 'Z', '_'
> k==2: '-','.','0'..'9','A'..'Z','_'
> between alts 1 and 2 of block
>
> I know this isn't hard, but I'm going blind (and I'm not even doing
> THAT!) Any help much appreciated,
>
> Howard
>
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From zjg1964 at yahoo.com  Wed Nov 21 07:59:24 2001
From: zjg1964 at yahoo.com (jg z)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] cplusplus.g
In-Reply-To: <9tf8e9+cvl5@eGroups.com>
Message-ID: <20011121155924.36602.qmail@web14911.mail.yahoo.com>

Hi, folks,
    I am updating a cplusplus.g file from PCCTS1.33 to
 ANTLR-2.7.1. The language is C++. When I use the
 updated cplusplus.g to generate the .cpp files, there
 are two errors appearing.
     The first error is:"rule classDef trapped:
 cplusplus.g:441: unexpected token: scope_override".
    The line 441 is,"( scope_override returns [s]
 conversion_function_decl_or_def )
           =>scope_override returns [s]
 conversion_function_decl_or_def ". It was converted
 from "( scope_override > [s]
 conversion_function_decl_or_def )?" in PCCTS1.33.
    And when I delete "returns [s]" from the sentence,
 the error would disappear. But I don't know if
 "returns [s]" is unnecessary for the file.
    The next error is, "TokenStreamException:
expecting
 '(', found 'p'". No line number is shown.
     I hope someone could please help me to tackle the
 two problems.
 
      Thank you in advance.
 
      Zuo   21/Nov

__________________________________________________
Do You Yahoo!?
Yahoo! GeoCities - quick and easy web site hosting, just $8.95/month.
http://geocities.yahoo.com/ps/info1

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From howardk at fatdog.com  Wed Nov 21 10:17:21 2001
From: howardk at fatdog.com (howardk@fatdog.com)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] Re: lexical nondeterminism
In-Reply-To: <002901c17244$578cc370$7664020a@matthewfnb>
Message-ID: <9tgr3h+rd8i@eGroups.com>

Matthew, that's brilliant. Thanks. It's obvious when you see it!

Howard

--- "Matthew Ford" <Matthew.Ford@f...> wrote:
> I think it is
> > QName: (NCName COLON)? NCName;
> Antlr does not know which NCName to choose
> 
> try
>  QName: NCName (COLON NCName)?;
> 
> now COLON tell antlr to continue looking
> 
> matthew

> ----- Original Message -----
> From: <howardk@f...>
> 
> > Sigh, I hate to bother people with this one. I thought I'd gotten
> > reasonably ok at working out nondeterminism problems, but I can't 
see
> > why the following (slightly simplified) lexical grammar isn't
> > working. antlr is complaining about the production QName. 
Lookahead
> > is k=2.
> >
> > QName: (NCName COLON)? NCName;
> >
> > protected
> > NCName: ( Letter | '_' ) (NCNameChar)*;
> >
> > protected
> > NCNameChar: Letter | Digit | DOT | '-' | '_';
> >
> > protected
> > Letter: 'A' .. 'Z';
> >
> > Here's the message I get:
> >
> > warning: lexical nondeterminism upon
> > k==1: 'A' .. 'Z', '_'
> > k==2: '-','.','0'..'9','A'..'Z','_'
> > between alts 1 and 2 of block
> >
> > I know this isn't hard, but I'm going blind (and I'm not even 
doing
> > THAT!) Any help much appreciated,
> >
> > Howard
> >
> >
> >
> >
> >
> > Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/
> >
> >


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From merrells at yahoo.com  Wed Nov 21 10:39:31 2001
From: merrells at yahoo.com (John Merrells)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] lexical nondeterminism
References: <9tf8e9+cvl5@eGroups.com>
Message-ID: <09f101c172bb$dbece1f0$6601a8c0@mexicanradio>

> QName: (NCName COLON)? NCName;

Howard,

I have the same grammar... we must be working on the same
problem ;-) I solved this problem by having the QName rule
in the parser instead of the Lexer. This removes the ambiguity
with k==2.

John



_________________________________________________________
Do You Yahoo!?
Get your free @yahoo.com address at http://mail.yahoo.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From howardk at fatdog.com  Wed Nov 21 12:37:53 2001
From: howardk at fatdog.com (howardk@fatdog.com)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] Re: lexical nondeterminism
In-Reply-To: <09f101c172bb$dbece1f0$6601a8c0@mexicanradio>
Message-ID: <9th3b1+l5hb@eGroups.com>

Another nice solution! 

I'm working on an XQuery grammar, but the snippet causing problems is 
from the Namespaces specification and could easily show up as part of 
almost any XML-related grammar I'd think. What's yours (if you don't 
mind saying)?

Howard

--- In antlr-interest@y..., "John Merrells" <merrells@y...> wrote:
> > QName: (NCName COLON)? NCName;
> 
> Howard,
> 
> I have the same grammar... we must be working on the same
> problem ;-) I solved this problem by having the QName rule
> in the parser instead of the Lexer. This removes the ambiguity
> with k==2.
> 
> John



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bob at werken.com  Wed Nov 21 13:02:37 2001
From: bob at werken.com (bob mcwhirter)
Date: Mon Dec 20 16:14:34 2004
Subject: (somewhat off topic) (was Re: [antlr-interest] Re: lexical nondeterminism)
In-Reply-To: <9th3b1+l5hb@eGroups.com>
Message-ID: <Pine.LNX.3.96.1011121155925.10918E-100000@exeter.exeter.org>

> Another nice solution! 
> 
> I'm working on an XQuery grammar, but the snippet causing problems is 
> from the Namespaces specification and could easily show up as part of 
> almost any XML-related grammar I'd think. What's yours (if you don't 
> mind saying)?

Somewhat off-topic, but...

If y'all are working with XPath (which is included in XQuery, right?) with
Java, you might be interested in SAXPath (http://saxpath.org/), or its
sister project, Jaxen (http://jaxen.org/).  SAXPath includes a parser
for XPath expressions, with event call-backs similar to SAX.

SAXPath is *not* based on Antlr (sorry Ter, I needed something smaller,
plus antlr.jar had conflicts with WebLogic, due to their misimplementation
of the classloader aspects of the Servlet specification.).

Also, if you're building XQuery in Java, Jaxen itself might also give you
a head start, and allow an object-model-independent implementation, making
the work available to users of JDOM, DOM, dom4j, and EXML all at once.

	-bob


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From merrells at yahoo.com  Wed Nov 21 13:15:21 2001
From: merrells at yahoo.com (John Merrells)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] Re: lexical nondeterminism
References: <9th3b1+l5hb@eGroups.com>
Message-ID: <0a2301c172d1$a105ae80$6601a8c0@mexicanradio>


> I'm working on an XQuery grammar, but the snippet causing problems is 
> from the Namespaces specification and could easily show up as part of 
> almost any XML-related grammar I'd think. What's yours (if you don't 
> mind saying)?

I'm working on XPath queries against a repository of indexed XML.
I've been looking at XQuery, but it looks pretty scary, so I'm sticking
with XPath for now.

Just to keep this on-topic for the list. I'm having trouble in with the
Number production. This works ok:

Number : Digits ('.' (Digits)?)? ;
Digits: ('0'..'9')+;
DotDot: "..";
Dot: '.';

But, this does not. Note the support for '.123':

Number : Digits ('.' (Digits)?)? | '.' Digits;
Digits: ('0'..'9')+;
DotDot: "..";
Dot: '.';

I get a bunch of non-determinism errors with k==2. Try as I
might to provide hints it just doesn't want to munch that down.
Someone care to point me in the right direction?

John


_________________________________________________________
Do You Yahoo!?
Get your free @yahoo.com address at http://mail.yahoo.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From amoll-mailer at libp.com  Thu Nov 22 02:32:41 2001
From: amoll-mailer at libp.com (Andre Moll)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] Building Problems under Tru64
In-Reply-To: <9srubb+cta0@eGroups.com>
Message-ID: <NEBBIGIAILKIKLCOMLMMEEFKEAAA.amoll-mailer@libp.com>

Hi,

I am trying to build the cpp libs under Tru64 unix. I fail to build using
cxx as well using gcc. Has anybody successfuly build the antlr libraries
with Compaq Tru64 UNIX V5.1 (Rev. 732) and could give me a hind what is
going wrong?

For cxx I tried already the compilerflags -std gnu; -std ansi; -std
strict_ansi without any success.

Thx in advance, Andre

Using cxx:
========

----
./configure
----# ./configure
creating cache ./config.cache
checking for a BSD compatible install... scripts/install-sh -c
checking whether build environment is sane... yes
checking whether make sets ${MAKE}... yes
checking for working aclocal... missing
checking for working autoconf... missing
checking for working automake... missing
checking for working autoheader... missing
checking for working makeinfo... missing
checking host system type... alphaev6-dec-osf5.1
checking build system type... alphaev6-dec-osf5.1
checking for ranlib... ranlib
checking for gcc... no
checking for cc... cc
checking whether the C compiler (cc  ) works... yes
checking whether the C compiler (cc  ) is a cross-compiler... no
checking whether we are using GNU C... no
checking whether cc accepts -g... yes
checking for non-GNU ld... /usr/bin/ld
checking if the linker (/usr/bin/ld) is GNU ld... no
checking for BSD-compatible nm... /usr/bin/nm
checking whether ln -s works... yes
updating cache ./config.cache
loading cache ./config.cache within ltconfig
checking whether we are using GNU C... no
checking for object suffix... o
checking for executable suffix... no
checking for cc option to produce PIC... none
checking if cc supports -c -o file.o... yes
checking if cc supports -c -o file.lo... yes
checking if cc static flag -non_shared works... -non_shared
checking if the linker (/usr/bin/ld) is GNU ld... no
checking whether the linker (/usr/bin/ld) supports shared libraries... yes
checking command to parse /usr/bin/nm output... failed
checking how to hardcode library paths into programs... immediate
checking for /usr/bin/ld option to reload object files... -r
checking dynamic linker characteristics... osf5.1 ld.so
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... no
checking whether to build static libraries... yes
checking for objdir... .libs
creating libtool
updating cache ./config.cache
loading cache ./config.cache
checking for c++... no
checking for g++... no
checking for gcc... no
checking for CC... no
checking for cxx... cxx
checking whether the C++ compiler (cxx  ) works... yes
checking whether the C++ compiler (cxx  ) is a cross-compiler... no
checking whether we are using GNU C++... no
checking whether cxx accepts -g... yes
checking how to run the C++ preprocessor... cxx -E
checking for ranlib... (cached) ranlib
updating cache ./config.cache
creating ./config.status
creating Makefile
creating src/Makefile
creating antlr/Makefile

---
gnu make (cxx)
---# gmake
Making all in src
gmake[1]: Entering directory `/usr/local/src/antlr-2.7.1/lib/cpp/src'
/bin/sh ../libtool --mode=compile
cxx -DPACKAGE=\"libantlr\" -DVERSION=\"2.7.1\"  -I. -I.  -I..    -g  -c
CharBuffer.cpp
cxx -DPACKAGE=\"libantlr\" -DVERSION=\"2.7.1\" -I. -I. -I.. -g -Wp,-MD,.deps
/CharBuffer.pp -c CharBuffer.cpp -o CharBuffer.o
cxx: Error: ../antlr/CharBuffer.hpp, line 58: namespace "std" has no member
          "istream"
        ANTLR_USE_NAMESPACE(std)istream& input;
--------------------------------^
cxx: Error: ../antlr/CharBuffer.hpp, line 62: qualified name is not allowed
        CharBuffer(ANTLR_USE_NAMESPACE(std)istream& input_);
-------------------^
cxx: Error: ../antlr/CharBuffer.hpp, line 62: expected a ")"
        CharBuffer(ANTLR_USE_NAMESPACE(std)istream& input_);
--------------------------------------------------^
cxx: Warning: ../antlr/CharBuffer.hpp, line 55: class "antlr::CharBuffer"
          defines no constructor to initialize the following:
            reference member "antlr::CharBuffer::input"
class CharBuffer : public InputBuffer {
------^
cxx: Error: CharBuffer.cpp, line 51: namespace "std" has no member "istream"
CharBuffer::CharBuffer(ANTLR_USE_NAMESPACE(std)istream& input_)
-----------------------------------------------^
cxx: Error: CharBuffer.cpp, line 51: no instance of overloaded function
          "antlr::CharBuffer::CharBuffer" matches the specified type
CharBuffer::CharBuffer(ANTLR_USE_NAMESPACE(std)istream& input_)
------------^
cxx: Error: CharBuffer.cpp, line 52: expected a "{"
: input(input_)
^
cxx: Warning: CharBuffer.cpp, line 53: missing return statement at end of
          non-void function "antlr::CharBuffer::CharBuffer"
{}
-^
cxx: Info: 6 errors detected in the compilation of "CharBuffer.cpp".
gmake[1]: *** [CharBuffer.lo] Error 1
gmake[1]: Leaving directory `/usr/local/src/antlr-2.7.1/lib/cpp/src'
gmake: *** [all-recursive] Error 1

using g++
=======

--------
./configure
-------#
./configure
creating cache ./config.cache
checking for a BSD compatible install... scripts/install-sh -c
checking whether build environment is sane... yes
checking whether make sets ${MAKE}... yes
checking for working aclocal... missing
checking for working autoconf... missing
checking for working automake... missing
checking for working autoheader... missing
checking for working makeinfo... missing
checking host system type... alphaev6-dec-osf5.1
checking build system type... alphaev6-dec-osf5.1
checking for ranlib... ranlib
checking for gcc... gcc
checking whether the C compiler (gcc  ) works... yes
checking whether the C compiler (gcc  ) is a cross-compiler... no
checking whether we are using GNU C... yes
checking whether gcc accepts -g... yes
checking for ld used by GCC... /usr/bin/ld
checking if the linker (/usr/bin/ld) is GNU ld... no
checking for BSD-compatible nm... /usr/bin/nm
checking whether ln -s works... yes
updating cache ./config.cache
loading cache ./config.cache within ltconfig
checking for object suffix... o
checking for executable suffix... no
checking for gcc option to produce PIC... none
checking if gcc supports -c -o file.o... yes
checking if gcc supports -c -o file.lo... yes
checking if gcc supports -fno-rtti -fno-exceptions ... yes
checking if gcc static flag -static works... -static
checking if the linker (/usr/bin/ld) is GNU ld... no
checking whether the linker (/usr/bin/ld) supports shared libraries... yes
checking command to parse /usr/bin/nm output... failed
checking how to hardcode library paths into programs... immediate
checking for /usr/bin/ld option to reload object files... -r
checking dynamic linker characteristics... osf5.1 ld.so
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... no
checking whether to build static libraries... yes
checking for objdir... .libs
creating libtool
updating cache ./config.cache
loading cache ./config.cache
checking for c++... no
checking for g++... g++
checking whether the C++ compiler (g++  ) works... yes
checking whether the C++ compiler (g++  ) is a cross-compiler... no
checking whether we are using GNU C++... yes
checking whether g++ accepts -g... yes
checking how to run the C++ preprocessor... g++ -E
checking for ranlib... (cached) ranlib
updating cache ./config.cache
creating ./config.status
creating Makefile
creating src/Makefile
creating antlr/Makefile

-----
gnu make (c++)
-----

gmake[1]: Entering directory `/usr/local/src/antlr-2.7.1/lib/cpp/src'
/bin/sh ../libtool --mode=compile
g++ -DPACKAGE=\"libantlr\" -DVERSION=\"2.7.1\"  -I. -I.  -I..    -g -O2 -W -
Wall -pipe  -c CharBuffer.cpp
g++ -DPACKAGE=\"libantlr\" -DVERSION=\"2.7.1\" -I. -I. -I.. -g -O2 -W -Wall 
-pipe -Wp,-MD,.deps/CharBuffer.pp -c CharBuffer.cpp -o CharBuffer.o
as: Error: No source or object files specified on the command line
gmake[1]: *** [CharBuffer.lo] Error 1
gmake[1]: Leaving directory `/usr/local/src/antlr-2.7.1/lib/cpp/src'
gmake: *** [all-recursive] Error 1





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Thu Nov 22 03:19:53 2001
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] Building Problems under Tru64
In-Reply-To: <NEBBIGIAILKIKLCOMLMMEEFKEAAA.amoll-mailer@libp.com>; from amoll-mailer@libp.com on Thu, Nov 22, 2001 at 06:32:41PM +0800
References: <9srubb+cta0@eGroups.com> <NEBBIGIAILKIKLCOMLMMEEFKEAAA.amoll-mailer@libp.com>
Message-ID: <20011122121953.F28950@cs.utwente.nl>

On Thu, Nov 22, 2001 at 06:32:41PM +0800, Andre Moll wrote:
> I am trying to build the cpp libs under Tru64 unix. I fail to build using
> cxx as well using gcc. Has anybody successfuly build the antlr libraries
> with Compaq Tru64 UNIX V5.1 (Rev. 732) and could give me a hind what is
> going wrong?
> 
> For cxx I tried already the compilerflags -std gnu; -std ansi; -std
> strict_ansi without any success.

It looks like you have to tweak config.hpp a bit for your compiler. Seems
like problems with namespace support.

Try different settings for the defines of ANTLR_USE_NAMESPACE etc. Could
you send me what you had to change for support on Tru64, then I can include
it in the next release..

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Time what is time - I wish I knew how to tell You why - It hurts to know -
          Aren't we machines - Time what is time - Unlock the door
               - And see the truth - Then time is time again
                From: 'Time what is Time' by Blind Guardian


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From amoll-mailer at libp.com  Thu Nov 22 21:26:36 2001
From: amoll-mailer at libp.com (Andre Moll)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] Building Problems under Tru64
In-Reply-To: <20011122121953.F28950@cs.utwente.nl>
Message-ID: <NEBBIGIAILKIKLCOMLMMGEGEEAAA.amoll-mailer@libp.com>

Could solve this very easy after have a deeper look into the cxx manuals
depending porting applications.

I know .. I know ... rtfm first ;-) ... I am sorry for that.

I add these lines to config.hpp and it's now working fine.

//
// Digital CXX
//
#ifdef __DECCXX
#define __USE_STD_IOSTREAM
#endif

Greetz Andre

> -----Original Message-----
> From: Ric Klaren [mailto:klaren@cs.utwente.nl]
> Sent: Thursday, November 22, 2001 7:20 PM
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] Building Problems under Tru64
>
>
> On Thu, Nov 22, 2001 at 06:32:41PM +0800, Andre Moll wrote:
> > I am trying to build the cpp libs under Tru64 unix. I fail to
> build using
> > cxx as well using gcc. Has anybody successfuly build the antlr libraries
> > with Compaq Tru64 UNIX V5.1 (Rev. 732) and could give me a hind what is
> > going wrong?
> >
> > For cxx I tried already the compilerflags -std gnu; -std ansi; -std
> > strict_ansi without any success.
>
> It looks like you have to tweak config.hpp a bit for your compiler. Seems
> like problems with namespace support.
>
> Try different settings for the defines of ANTLR_USE_NAMESPACE etc. Could
> you send me what you had to change for support on Tru64, then I
> can include
> it in the next release..
>
> Ric
> --
> -----+++++*****************************************************+++
> ++++++-------
>     ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
> -----+++++*****************************************************+++
> ++++++-------
>  Time what is time - I wish I knew how to tell You why - It hurts
> to know -
>           Aren't we machines - Time what is time - Unlock the door
>                - And see the truth - Then time is time again
>                 From: 'Time what is Time' by Blind Guardian
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From haberker at alpha.fh-furtwangen.de  Fri Nov 23 10:13:08 2001
From: haberker at alpha.fh-furtwangen.de (haberker@alpha.fh-furtwangen.de)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] Super-Newbie-Question (Java Parser with c++)
Message-ID: <9tm3jk+r2fe@eGroups.com>

Hi,

i want creat a java parser with antlr. I created the c++ file with the
java.g from the examples, that was no problem. The "problem" ist the
output of the classes. I can walk through the output of the AST Tree,
no problem, but i don't know how to create therefrom the output i
want. I wish to create the following output type with my class parser:


line x, method y, public
.....


Is there an example of how i can do this??

regards 

Timo


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From wiggjd at sbu.ac.uk  Fri Nov 23 07:36:04 2001
From: wiggjd at sbu.ac.uk (David Wigg)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] ANTLR Examples StdCParser.g for C++
Message-ID: <3BFE6CE4.FBCF3D82@sbu.ac.uk>

Hello,

I am trying to convert the StdCParser.g example to produce C++ code.

I'm sorry to have to admit defeat but after a month without any
significant progress I have to ask for help again.

I have, of course, had a look round for any documentation that might
help me but all I can find is documentation about how to use the system,
but not about how it works.

This problem concerns the makeToken(int t) function in the lexer part of
StdCParser.g.

I cannot find out how to create a RefToken which points to my CToken
(which is a subclass of CommonToken which is a subclass of Token).

I attach copies of my attempt at CToken.cpp and CToken.hpp.

The compiler error on my latest version of the start of the lexer (shown
below) is;

d:\java\antlr-2.7.0\examples\cpp\c\stdclexer.hpp(77) : error C2440:
'type cast' : cannot convert from 'class antlr::RefCount<class
antlr::Token>' to 'class antlr::CToken'

I cannot work out the significance of "typedef RefToken
(*factory_type)();" in CharScanner.hpp and various references to
factory_type, tokenFactory, factory etc. etc.

Having no comments at all in code makes it difficult for us, mere
mortals, to work out what could be going on!

I've no doubt there is any easy answer.

For instance, is there a way to to use CharScanner::makeToken() create a
RefToken pointing to a CToken?

Ric Klaren suggested I would need a factory in CToken but I regret I
don't really know how to use it.

This is latest version of the start of my StdCParser lexer;

class StdCLexer extends Lexer;

options
        {
        k = 3;
        exportVocab = STDC;
        testLiterals = false;
		
		// DW 24/8/01 Included to try to clear warnings
        charVocabulary = '\3'..'\377';
        }

{
  ANTLR_USE_NAMESPACE(antlr)LineObject lineObject; 
  ANTLR_USE_NAMESPACE(std)string originalSource; 
  // DW 12/11/01 Not required initially - see correspondence
  //PreprocessorInfoChannel preprocessorInfoChannel = new
PreprocessorInfoChannel();
  int tokenNumber;
  bool countingTokens; 
  int deferredLineCount; 

  public:
  
  void setCountingTokens(bool ct) 
  {
    countingTokens = ct;
    if ( countingTokens ) {
      tokenNumber = 0;
    }
    else {
      tokenNumber = 1;
    }
  }

  void setOriginalSource(ANTLR_USE_NAMESPACE(std)string src) 
  {
    originalSource = src;
    lineObject.setSource(src);
  }
  void setSource(ANTLR_USE_NAMESPACE(std)string src) 
  {
    lineObject.setSource(src);
  }
  /* Not required initially
  public PreprocessorInfoChannel getPreprocessorInfoChannel() 
  {
    return preprocessorInfoChannel;
  }

  public void setPreprocessingDirective(ANTLR_USE_NAMESPACE(std)string
pre)
  {
    preprocessorInfoChannel.addLineForTokenNumber( pre, new
Integer(tokenNumber) );
  }
  */
protected: 
  ANTLR_USE_NAMESPACE(antlr)RefToken makeToken(int t)
  {
    if ( t != ANTLR_USE_NAMESPACE(antlr)Token.SKIP && countingTokens) {
        tokenNumber++;
    }

    //ANTLR_USE_NAMESPACE(antlr)RefToken tok =
CharScanner::makeToken(t);
    ANTLR_USE_NAMESPACE(antlr)CToken tok =
(ANTLR_USE_NAMESPACE(antlr)CToken)ANTLR_USE_NAMESPACE(antlr)CToken::factory();
	tok->setLine(lineObject.line);
    tok->setSource(lineObject.source);
    tok->setTokenNumber(tokenNumber);

    lineObject.line += deferredLineCount;
    deferredLineCount = 0;
    return tok;
  }

public:
	void deferredNewline() { 
        deferredLineCount++;
    }

    void newline() { 
        lineObject.newline();
    }
}
 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: CToken.hpp
Type: application/x-unknown-content-type-hppfile
Size: 979 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20011123/a84583e5/CToken.bin
-------------- next part --------------
A non-text attachment was scrubbed...
Name: CToken.cpp
Type: application/x-unknown-content-type-cppfile
Size: 1051 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20011123/a84583e5/CToken-0001.bin
From caromoy at hotmail.com  Fri Nov 23 05:28:47 2001
From: caromoy at hotmail.com (caromoy@hotmail.com)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] antlr beginning
Message-ID: <9tliuf+u9ag@eGroups.com>

These are my first steps with ANTLR although i have already used LEX 
and YACC i have some problems with the antlr, and i would be very 
grateful if someone could help me.

I have read (more or less) the ANTLR documentation but i don't 
understand how to generate an AST and how (if it's possible) 
transform it into a XML file.

Regards,
    Carol


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Fri Nov 23 11:18:34 2001
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] antlr beginning
In-Reply-To: <9tliuf+u9ag@eGroups.com>
Message-ID: <E367C86A-E046-11D5-96D4-0030653DE0D6@jguru.com>


On Friday, November 23, 2001, at 05:28  AM, caromoy@hotmail.com wrote:

> These are my first steps with ANTLR although i have already used LEX
> and YACC i have some problems with the antlr, and i would be very
> grateful if someone could help me.
>
> I have read (more or less) the ANTLR documentation but i don't
> understand how to generate an AST and how (if it's possible)
> transform it into a XML file.

Have you seen http://www.jguru.com/faq/ANTLR or http://www.antlr.org 
papers/articles area?

Ter
--
Chief Scientist & Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Mon Nov 26 02:53:49 2001
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] ANTLR Examples StdCParser.g for C++
In-Reply-To: <3BFE6CE4.FBCF3D82@sbu.ac.uk>; from wiggjd@sbu.ac.uk on Fri, Nov 23, 2001 at 03:36:04PM +0000
References: <3BFE6CE4.FBCF3D82@sbu.ac.uk>
Message-ID: <20011126115346.A29059@cs.utwente.nl>

Hi,

On Fri, Nov 23, 2001 at 03:36:04PM +0000, David Wigg wrote:
> I have, of course, had a look round for any documentation that might
> help me but all I can find is documentation about how to use the system,
> but not about how it works.

This is a known problem yes. The documentation of the support library is
lacking. I'm slowly improving on this in the C++ part. I don't know if you
already found some of the new documentation at:

http://wwwhome/~klaren/antlr/support-docs/

This is for the new release so it's not 100% compatible with the 2.7.1
release.

> This problem concerns the makeToken(int t) function in the lexer part of
> StdCParser.g.
> 
> I cannot find out how to create a RefToken which points to my CToken
> (which is a subclass of CommonToken which is a subclass of Token).
..
> I cannot work out the significance of "typedef RefToken
> (*factory_type)();" in CharScanner.hpp and various references to
> factory_type, tokenFactory, factory etc. etc.

This defines a function pointer to something that's supposed to make
RefTokens a socalled factory (look for instance at the book Design Patterns
from Gamma, Helm, Johnson and Vlissides for a description of this). Inside
makeToken the tokeFactory (of type factory_type) is called to generate the
tokens returned by the lexer. ANTLR uses internally only RefTokens (in java
mode Tokens this is a result of the Reference counting used in the C++
classes) Before starting a parse/lex run you can set the factory the lexer
uses for tokens with setTokenObjectFactory.

> For instance, is there a way to to use CharScanner::makeToken() create a
> RefToken pointing to a CToken?
> 
> Ric Klaren suggested I would need a factory in CToken but I regret I
> don't really know how to use it.

First step is to tell your lexer that it should generate CTokens this is
done by calling the setTokenObjectFactory method with the factory you made
for the CTokens: setTokenObjectFactory(Ctoken::factory) do this before you
actually start parsing.

Also define in CToken.hpp for convenience:

typedef RefCount<CToken> RefCToken;

Then to the definition of makeToken (which overrides the one in
CharScanner)

ANTLR_USE_NAMESPACE(antlr)RefToken makeToken(int t)
{
	if ( t != ANTLR_USE_NAMESPACE(antlr)Token.SKIP && countingTokens) {
		tokenNumber++;
	}
 
	// use superclasses makeToken to create a filled in CToken (returned as
	// RefToken)	
	ANTLR_USE_NAMESPACE(antlr)RefToken tok = CharScanner::makeToken(t);
	// this is dirty but works.
	ANTLR_USE_NAMESPACE(antlr)RefCToken ctok = 
		static_cast<ANTLR_USE_NAMESPACE(antlr)RefCToken>(tok);

	tok->setLine(lineObject.line);
	tok->setSource(lineObject.source);
	tok->setTokenNumber(tokenNumber);

	lineObject.line += deferredLineCount;
	deferredLineCount = 0;
	return tok;
}

Hope this helps,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Why don't we just invite them to dinner and massacre them all when they're
  drunk? You heard the man. There's seven hundred thousand of them. Ah? ..
           So it'd have to be something simple with pasta, then.
                 From: Interesting Times by Terry Pratchet


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From elangovan_angannan at yahoo.com  Mon Nov 26 21:06:59 2001
From: elangovan_angannan at yahoo.com (elangovan_angannan@yahoo.com)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] New to ANTLR... PLEASE HELP ME!!!
Message-ID: <9tv71j+vsi4@eGroups.com>

Dear ANTLR experts,

I am new to ANTLR, just started studying it. Could you please provide 
me some ANTLR tutorial links? I got few. But those are not providing 
a detailed explanation. I am in need of a good tutorial for parse 
tree generation in ANTLR.

I am going through Michael Schmitt's SDL Parser 2000, which was 
written in ANTLR. With my very little knowledge in ANTLR, I 
understood your SDLLexer.g. But I have some doubts in SDLParser.g. 
Could you please provide your valuable clarifications on the same?
 
1. What does ##, #([SDLspecification], ##) indicates
  in the statement
    { ## = #([SDLspecification], ##); }
      ??    ??????????????       ??
  
2. Why two rule names are given for the same rule?
  
     ScopeUnitKind!:
      start01: PACKAGE! { ## = #[Package]; 
            SETLINECOLUMN(##, start01); }
  
    Why ScopeUnitKind is followed by !?
  
  3. What is the use of nameDef[Type] rule? It has
  been commented out internally.
  
  
  Awaiting your valuable response...
  
  Kind Regards
  Elango


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From karunakar at objectsymphony.com  Mon Nov 26 21:24:58 2001
From: karunakar at objectsymphony.com (N.V.S. Karunakar)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] New to ANTLR... PLEASE HELP ME!!!
In-Reply-To: <9tv71j+vsi4@eGroups.com>
Message-ID: <NFBBKACKCMCJEIDAMFEKEEEECHAA.karunakar@objectsymphony.com>

Hi Elango,

   The PDF document http://www.antlr.org/doc/antlr_2.7.1_ref_man.pdf is a
comprehensive tutorial and reference available from ANTLR website. It
answers all your questions.

regards,
karunakar

> -----Original Message-----
> From: elangovan_angannan@yahoo.com [mailto:elangovan_angannan@yahoo.com]
> Sent: Tuesday, November 27, 2001 10:37 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] New to ANTLR... PLEASE HELP ME!!!
>
>
> Dear ANTLR experts,
>
> I am new to ANTLR, just started studying it. Could you please provide
> me some ANTLR tutorial links? I got few. But those are not providing
> a detailed explanation. I am in need of a good tutorial for parse
> tree generation in ANTLR.
>
> I am going through Michael Schmitt's SDL Parser 2000, which was
> written in ANTLR. With my very little knowledge in ANTLR, I
> understood your SDLLexer.g. But I have some doubts in SDLParser.g.
> Could you please provide your valuable clarifications on the same?
>
> 1. What does ##, #([SDLspecification], ##) indicates
>   in the statement
>     { ## = #([SDLspecification], ##); }
>       ??    ??????????????       ??
>
> 2. Why two rule names are given for the same rule?
>
>      ScopeUnitKind!:
>       start01: PACKAGE! { ## = #[Package];
>             SETLINECOLUMN(##, start01); }
>
>     Why ScopeUnitKind is followed by !?
>
>   3. What is the use of nameDef[Type] rule? It has
>   been commented out internally.
>
>
>   Awaiting your valuable response...
>
>   Kind Regards
>   Elango
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From xiang_yu_cn at yahoo.com.cn  Tue Nov 27 00:53:25 2001
From: xiang_yu_cn at yahoo.com.cn (xiang_yu_cn@yahoo.com.cn)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] Please help me! I am an newer...
Message-ID: <9tvka5+er8g@eGroups.com>

Hi, all,
I met a link error when making the example of ANTLR (calc.g)
My environment is cygwin.

Anyone can help me, thanks in advance!


java -classpath ../../.. antlr.Tool calc.g
ANTLR Parser Generator   Version 2.7.1   1989-2000 jGuru.com
g++ -c CalcLexer.cpp -g -pipe -W -Wall -I/cygdrive/c/temp/temp/antlr-
2.7.1/examples/cpp/calc/../../../lib/cpp -felide-
nstructors -o CalcLexer.o
g++ -c CalcParser.cpp -g -pipe -W -Wall -I/cygdrive/c/temp/temp/antlr-
2.7.1/examples/cpp/calc/../../../lib/cpp -felide
onstructors -o CalcParser.o
g++ -c CalcTreeWalker.cpp -g -pipe -W -Wall -
I/cygdrive/c/temp/temp/antlr-
2.7.1/examples/cpp/calc/../../../lib/cpp -fe
de-constructors -o CalcTreeWalker.o
g++ -c Main.cpp -g -pipe -W -Wall -I/cygdrive/c/temp/temp/antlr-
2.7.1/examples/cpp/calc/../../../lib/cpp -felide-const
ctors -o Main.o
g++ -o calc CalcLexer.o CalcParser.o CalcTreeWalker.o Main.o -Wl,--gc-
sections -L/cygdrive/c/temp/temp/antlr-2.7.1/exa
les/cpp/calc/../../../lib/cpp/src/.libs -lantlr -Wl,-rpath -
Wl,/Tios/Language/gcc-2.95.2/lib
/usr/lib/gcc-lib/i686-pc-cygwin/2.95.3-5/../../../../i686-pc-
cygwin/bin/ld: cannot find -lantlr
collect2: ld returned 1 exit status
make: *** [calc] Error 1


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Tue Nov 27 01:29:40 2001
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] Please help me! I am an newer...
In-Reply-To: <9tvka5+er8g@eGroups.com>; from xiang_yu_cn@yahoo.com.cn on Tue, Nov 27, 2001 at 08:53:25AM -0000
References: <9tvka5+er8g@eGroups.com>
Message-ID: <20011127102940.E29059@cs.utwente.nl>

On Tue, Nov 27, 2001 at 08:53:25AM -0000, xiang_yu_cn@yahoo.com.cn wrote:
> I met a link error when making the example of ANTLR (calc.g)
> My environment is cygwin.

> g++ -o calc CalcLexer.o CalcParser.o CalcTreeWalker.o Main.o -Wl,--gc-
> sections -L/cygdrive/c/temp/temp/antlr-2.7.1/exa
> les/cpp/calc/../../../lib/cpp/src/.libs -lantlr -Wl,-rpath -
> Wl,/Tios/Language/gcc-2.95.2/lib
> /usr/lib/gcc-lib/i686-pc-cygwin/2.95.3-5/../../../../i686-pc-
> cygwin/bin/ld: cannot find -lantlr
> collect2: ld returned 1 exit status
> make: *** [calc] Error 1

It seems you did not compile the runtime library. Also you seem to be using
some compile time options that only make sense in my setup.

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Why don't we just invite them to dinner and massacre them all when they're
  drunk? You heard the man. There's seven hundred thousand of them. Ah? ..
           So it'd have to be something simple with pasta, then.
                 From: Interesting Times by Terry Pratchet


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From timo.haberkern at fantastic-bits.de  Tue Nov 27 02:34:03 2001
From: timo.haberkern at fantastic-bits.de (timo.haberkern@fantastic-bits.de)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] (unknown)
Message-ID: <9tvq6r+u1vt@eGroups.com>

Hello together,

is there no posibilty of getting the line number of a RefAST when
walking through a tree? I tried everything, but no chance.

I walk through a AST Tree and when i found the wanted element i need
the line number in the original text i parsed.

Any suggestions? I use the output of antlr 2.7.1 with the java.g and
java.tree.g of the examples.

Regards

Timo


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Tue Nov 27 02:58:15 2001
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] (unknown)
In-Reply-To: <9tvq6r+u1vt@eGroups.com>; from timo.haberkern@fantastic-bits.de on Tue, Nov 27, 2001 at 10:34:03AM -0000
References: <9tvq6r+u1vt@eGroups.com>
Message-ID: <20011127115815.G29059@cs.utwente.nl>

On Tue, Nov 27, 2001 at 10:34:03AM -0000, timo.haberkern@fantastic-bits.de wrote:
> is there no posibilty of getting the line number of a RefAST when
> walking through a tree? I tried everything, but no chance.
> 
> I walk through a AST Tree and when i found the wanted element i need
> the line number in the original text i parsed.
> 
> Any suggestions? I use the output of antlr 2.7.1 with the java.g and
> java.tree.g of the examples.

Use the FAQ luke ;)

http://www.jguru.com/faq/view.jsp?EID=9757

This entry is about C++ mode though. But the idea for javamode is the same.

Caveats for some handmade AST's you'll have to manually set the line/file
info. But having a custom ast type with an initialize func that grabs the
info from a token you'll have most of the generated ast's covered. There
are more discussions on this topic in the mail archives. (maybe on the
forums as well)

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Human beings, who are almost unique in having the ability to learn
   from the experience of others, are also remarkable for their apparent
         disinclination to do so. --- Douglas Adams, Last Chance to See


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From shi322 at yahoo.com  Tue Nov 27 08:24:12 2001
From: shi322 at yahoo.com (shi322@yahoo.com)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] help! data structure porblem
Message-ID: <9u0enc+n7oe@eGroups.com>

hi, I am new to antlr. how do i use antlr to generate data structure 
as arrary, int,etc. and use them in Visaul C++ project?
thanks a lot
Ji


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From timo.haberkern at fantastic-bits.de  Tue Nov 27 10:27:13 2001
From: timo.haberkern at fantastic-bits.de (timo.haberkern@fantastic-bits.de)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] Another question (array of char instead of filename for lexer)
Message-ID: <9u0lu1+8gth@eGroups.com>

Hello,

i have another question. My parser with antlr works fine. Now i want
to start the lexing not with a filename. I want to use a char array.
In all examples i found there is the only way over the filename. 
Is there an easy solution, so that i can set a large char array as the
"file" to parse.

regards

Timo


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Tue Nov 27 13:47:17 2001
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] Another question (array of char instead of filename for lexer)
In-Reply-To: <9u0lu1+8gth@eGroups.com>; from timo.haberkern@fantastic-bits.de on Tue, Nov 27, 2001 at 06:27:13PM -0000
References: <9u0lu1+8gth@eGroups.com>
Message-ID: <20011127224716.B6709@cs.utwente.nl>

On Tue, Nov 27, 2001 at 06:27:13PM -0000, timo.haberkern@fantastic-bits.de wrote:
> i have another question. My parser with antlr works fine. Now i want
> to start the lexing not with a filename. I want to use a char array.
> In all examples i found there is the only way over the filename. 
> Is there an easy solution, so that i can set a large char array as the
> "file" to parse.

Use a istrstream as input stream or use a modified inputbuffer. There's
one of Ruslan Zashukin floating in the archive and also one of Geoff Leland
(if I got the name right). I'm not quite sure if I added it to my devel
version yet have to check... My devel version also contains an example of
the strstream approach, it should also be on the forum (and maybe even the
faq..) Mail me directly if you need one of these.

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Human beings, who are almost unique in having the ability to learn
   from the experience of others, are also remarkable for their apparent
         disinclination to do so. --- Douglas Adams, Last Chance to See


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From ghelle at capgemini.fr  Thu Nov 29 02:43:26 2001
From: ghelle at capgemini.fr (Guillaume Helle (Free))
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] Grammar for TCL & TCL/TK
Message-ID: <1007030606.3c06114e7e55d@imp.free.fr>

Hello,

i am looking for a grammar for TCL & TCL/TK...
Where a can find it?

Thanks for your help,

Guillaume Helle

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bob at werken.com  Thu Nov 29 05:56:47 2001
From: bob at werken.com (bob mcwhirter)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] Grammar for TCL & TCL/TK
In-Reply-To: <1007030606.3c06114e7e55d@imp.free.fr>
Message-ID: <Pine.LNX.3.96.1011129085455.4287E-100000@exeter.exeter.org>


Tcl is notoriously easy-to-parse.

I think it'd be roughly 3 lines:

statement : IDENTIFIER expr*;

expr : command_expr | block_expr | terminal_expr;

command_expr : '[' statement ']'

block_expr : '{' expr '}';

terminal_expr : IDENTIFIER | QUOTED_STRING;

That's just off the top of my head.

Things like if{} are handled by the language interpreter itself,
and the grammer really shouldn't have any control structures or
anything.

	-bob


On Thu, 29 Nov 2001, Guillaume Helle (Free) wrote:

> Hello,
> 
> i am looking for a grammar for TCL & TCL/TK...
> Where a can find it?
> 
> Thanks for your help,
> 
> Guillaume Helle
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mtiller at ford.com  Thu Nov 29 06:00:46 2001
From: mtiller at ford.com (Tiller, Michael (M.M.))
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] Grammar for TCL & TCL/TK
Message-ID: <200111291401.fATE17C22618@dymwsm10.mailwatch.com>

There isn't really a grammar for Tcl since it is so simple (there is only one kind of statement and it has the form "command arg1 arg2 ... argn").  What is tricky for Tcl is all the expansion that gets done in getting to this form (variable expansion, command substitution, etc.).

I have seen this question asked many times and the answers I have always seen are to avoid developing your own grammar and instead use the Tcl C API which includes functions for parsing Tcl already.  Since Tcl runs virtually everywhere there really aren't any portability issues.

Here are the results from a Deja search on this subject.  These might be useful to you...

http://groups.google.com/groups?q=Tcl+grammar&hl=en&rnum=1&selm=7636su%24oeq%241%40wagner.wagner.home

http://groups.google.com/groups?q=Tcl+grammar&hl=en&rnum=9&selm=653buj%241vc%241%40zware.space.ru

http://groups.google.com/groups?hl=en&threadm=3379B86D.2DCD%40hazel.pwd.hp.com&rnum=14&prev=/groups%3Fq%3DTcl%2Bgrammar%26start%3D10%26hl%3Den%26rnum%3D14%26selm%3D3379B86D.2DCD%2540hazel.pwd.hp.com

http://groups.google.com/groups?q=Tcl+grammar&start=10&hl=en&rnum=16&selm=990749231.175490%40cache.news.support.nl

--
Mike

> -----Original Message-----
> From: Guillaume Helle (Free) [mailto:ghelle@capgemini.fr]
> Sent: Thursday, November 29, 2001 5:43 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Grammar for TCL & TCL/TK
> 
> 
> Hello,
> 
> i am looking for a grammar for TCL & TCL/TK...
> Where a can find it?
> 
> Thanks for your help,
> 
> Guillaume Helle
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From shi322 at yahoo.com  Thu Nov 29 13:36:40 2001
From: shi322 at yahoo.com (shi322@yahoo.com)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] data structure question
Message-ID: <9u69p8+lmou@eGroups.com>

hi, I want to generate some data structure from antlr like int, 
array, etc. do I do it from AST while walking through it or directly 
from parser? 
thank you for helping me
Ji


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bob at werken.com  Thu Nov 29 13:44:53 2001
From: bob at werken.com (bob mcwhirter)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] data structure question
In-Reply-To: <9u69p8+lmou@eGroups.com>
Message-ID: <Pine.LNX.3.96.1011129164411.16144B-100000@exeter.exeter.org>


Either one is fine, depending on your circumstances.

Do you need an AST?  Or can you do it directly from the parser?

It's really a question that you need to answer within the context
of your application.

I've done it both ways.

	-bob


On Thu, 29 Nov 2001 shi322@yahoo.com wrote:

> hi, I want to generate some data structure from antlr like int, 
> array, etc. do I do it from AST while walking through it or directly 
> from parser? 
> thank you for helping me
> Ji
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mnr at cs.man.ac.uk  Fri Nov 30 04:30:40 2001
From: mnr at cs.man.ac.uk (Mark Ryall)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] Runtime error
Message-ID: <3C077BF0.B5215AA4@cs.man.ac.uk>

Hi

This is my dos prompt...


C:\3rd Year Project Info\Routing Protocol Language>java antlr.Tool
Test.g
ANTLR Parser Generator   Version 2.7.1   1989-2000 jGuru.com
java.lang.NoClassDefFoundError: antlr/DefaultToolErrorHandler
        at antlr.Tool.<init>(Tool.java:33)
        at antlr.Tool.main(Tool.java:320)

I dont understand what this means?

And how to fix it

Regards

Mark


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Andy.Carpenter at cs.man.ac.uk  Fri Nov 30 04:55:32 2001
From: Andy.Carpenter at cs.man.ac.uk (Andy Carpenter)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] Runtime error
References: <3C077BF0.B5215AA4@cs.man.ac.uk>
Message-ID: <01dc01c1799e$4c497240$56c15882@MUNTJAC>

> C:\3rd Year Project Info\Routing Protocol Language>java antlr.Tool
> Test.g
> ANTLR Parser Generator   Version 2.7.1   1989-2000 jGuru.com
> java.lang.NoClassDefFoundError: antlr/DefaultToolErrorHandler
>         at antlr.Tool.<init>(Tool.java:33)
>         at antlr.Tool.main(Tool.java:320)
> 
> I dont understand what this means?
> 
> And how to fix it

It means that you don't have either the antlr jar or the directory
containing the antlr class files on your classpath.

    Andy.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mnr at cs.man.ac.uk  Fri Nov 30 05:16:42 2001
From: mnr at cs.man.ac.uk (Mark Ryall)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] Runtime error
References: <3C077BF0.B5215AA4@cs.man.ac.uk> <01dc01c1799e$4c497240$56c15882@MUNTJAC>
Message-ID: <3C0786BA.B02E32F7@cs.man.ac.uk>

Hi

My class path = .;C:\jdk1.1.8\lib\classes.zip;C:\antlr-2.7.1\antlr.jar

and my path =
%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;C:\JDK1.1.8\BIN

is this ok??

Mark

Andy Carpenter wrote:

> > C:\3rd Year Project Info\Routing Protocol Language>java antlr.Tool
> > Test.g
> > ANTLR Parser Generator   Version 2.7.1   1989-2000 jGuru.com
> > java.lang.NoClassDefFoundError: antlr/DefaultToolErrorHandler
> >         at antlr.Tool.<init>(Tool.java:33)
> >         at antlr.Tool.main(Tool.java:320)
> >
> > I dont understand what this means?
> >
> > And how to fix it
>
> It means that you don't have either the antlr jar or the directory
> containing the antlr class files on your classpath.
>
>     Andy.
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at bco.com  Fri Nov 30 06:17:20 2001
From: mzukowski at bco.com (mzukowski@bco.com)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] Runtime error
Message-ID: <170826586F3BD511910D0200C110AAA801C580A8@memail03.bco-home.com>

The antlr.jar is for distribution with your generated parsers.  You need the
antlr directory in your classpath too:antlr-2.7.1/antlr

Monty

> -----Original Message-----
> From: Mark Ryall [mailto:mnr@cs.man.ac.uk]
> Sent: Friday, November 30, 2001 5:17 AM
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] Runtime error
> 
> 
> Hi
> 
> My class path = .;C:\jdk1.1.8\lib\classes.zip;C:\antlr-2.7.1\antlr.jar
> 
> and my path =
> %SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;
> C:\JDK1.1.8\BIN
> 
> is this ok??
> 
> Mark
> 
> Andy Carpenter wrote:
> 
> > > C:\3rd Year Project Info\Routing Protocol Language>java antlr.Tool
> > > Test.g
> > > ANTLR Parser Generator   Version 2.7.1   1989-2000 jGuru.com
> > > java.lang.NoClassDefFoundError: antlr/DefaultToolErrorHandler
> > >         at antlr.Tool.<init>(Tool.java:33)
> > >         at antlr.Tool.main(Tool.java:320)
> > >
> > > I dont understand what this means?
> > >
> > > And how to fix it
> >
> > It means that you don't have either the antlr jar or the directory
> > containing the antlr class files on your classpath.
> >
> >     Andy.
> >
> >
> >
> > Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 
> 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mnr at cs.man.ac.uk  Fri Nov 30 08:55:05 2001
From: mnr at cs.man.ac.uk (Mark Ryall)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] Still get Runtime Error
Message-ID: <3C07B9E9.AE5771D6@cs.man.ac.uk>

Hi

I still have the same runtime errors.

C:\3rd Year Project Info\Routing Protocol Language>java antlr.Tool
Test.g
ANTLR Parser Generator   Version 2.7.1   1989-2000 jGuru.com
java.lang.NoClassDefFoundError: antlr/DefaultToolErrorHandler
        at antlr.Tool.<init>(Tool.java:33)
        at antlr.Tool.main(Tool.java:320)

I asume you can run it in any directory, my Test.g file is in the above
directory.

My Env. Vars are ....

Path =
%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;C:\JDK1.1.8\BIN

Classpath =
.;C:\jdk1.1.8\lib\classes.zip;C:\antlr-2.7.1\antlr.jar;C:\antlr-2.7.1\antlr

Regards

Mark


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bob at werken.com  Fri Nov 30 09:01:54 2001
From: bob at werken.com (bob mcwhirter)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] Still get Runtime Error
In-Reply-To: <3C07B9E9.AE5771D6@cs.man.ac.uk>
Message-ID: <Pine.LNX.3.96.1011130120040.28038A-100000@exeter.exeter.org>


Use 'jar tf <filename>' and see if the requested class really exists in
the jarfile.  If not, then look at the other jars, and find the one that
has that class.

There have been problems, previously, of not getting all the right
classes into the runtime jar.

The antlr-all.jar (or whatever it is named these days) should work,
if not be overkill.

	-bob


On Fri, 30 Nov 2001, Mark Ryall wrote:

> Hi
> 
> I still have the same runtime errors.
> 
> C:\3rd Year Project Info\Routing Protocol Language>java antlr.Tool
> Test.g
> ANTLR Parser Generator   Version 2.7.1   1989-2000 jGuru.com
> java.lang.NoClassDefFoundError: antlr/DefaultToolErrorHandler
>         at antlr.Tool.<init>(Tool.java:33)
>         at antlr.Tool.main(Tool.java:320)
> 
> I asume you can run it in any directory, my Test.g file is in the above
> directory.
> 
> My Env. Vars are ....
> 
> Path =
> %SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;C:\JDK1.1.8\BIN
> 
> Classpath =
> .;C:\jdk1.1.8\lib\classes.zip;C:\antlr-2.7.1\antlr.jar;C:\antlr-2.7.1\antlr
> 
> Regards
> 
> Mark
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From remus at nolimits.ro  Fri Nov 30 23:49:51 2001
From: remus at nolimits.ro (Remus Pereni)
Date: Mon Dec 20 16:14:34 2004
Subject: [antlr-interest] Still get Runtime Error
In-Reply-To: <3C07C2EC.4A98E270@cs.man.ac.uk>
References: <Pine.LNX.3.96.1011130120040.28038A-100000@exeter.exeter.org> <3C07C2EC.4A98E270@cs.man.ac.uk>
Message-ID: <20011201074951.GA9061@nolimits.ro>

On Fri, Nov 30, 2001 at 05:33:32PM +0000, Mark Ryall wrote:
>Hi
>
>There aren't any other jar files! only antlr.jar
>
>Any suggestions? ? ? ? ? ? ? ?

antlr.jar does not contain all the classes from the anlr source tree. If
you look at the root of the antlr distribution you will see a couple of
shell scripts mkalljar, mkdebugjar. Try one of those scripts (might need
some adjurations) like mkalljar. If you still have problems try to find
out what packages are missing and add the respective directories to the
script.

>
>Mark

Regards,
	Remus

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

