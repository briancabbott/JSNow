<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] How can I match 1 or more tokens (or token	streams) and then perform a different action or rewrite on	the final one than on the others?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20How%20can%20I%20match%201%20or%20more%20tokens%20%28or%20token%0A%09streams%29%20and%20then%20perform%20a%20different%20action%20or%20rewrite%20on%0A%09the%20final%20one%20than%20on%20the%20others%3F&In-Reply-To=%3C443ad6690908132334y661ceb8bo14bdb781b29d2a0a%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="035580.html">
   <LINK REL="Next"  HREF="035584.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] How can I match 1 or more tokens (or token	streams) and then perform a different action or rewrite on	the final one than on the others?</H1>
    <B>Joe Schmoe</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20How%20can%20I%20match%201%20or%20more%20tokens%20%28or%20token%0A%09streams%29%20and%20then%20perform%20a%20different%20action%20or%20rewrite%20on%0A%09the%20final%20one%20than%20on%20the%20others%3F&In-Reply-To=%3C443ad6690908132334y661ceb8bo14bdb781b29d2a0a%40mail.gmail.com%3E"
       TITLE="[antlr-interest] How can I match 1 or more tokens (or token	streams) and then perform a different action or rewrite on	the final one than on the others?">shambolic at gmail.com
       </A><BR>
    <I>Thu Aug 13 23:34:53 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="035580.html">[antlr-interest] Why I'm getting syntax errors while I'm cheking	for semantic errors?
</A></li>
        <LI>Next message: <A HREF="035584.html">[antlr-interest] Antlr Behavior! Why notifying sintactic errors in	My tree gramar where I'm cheking for Semantic errors ONLY.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35583">[ date ]</a>
              <a href="thread.html#35583">[ thread ]</a>
              <a href="subject.html#35583">[ subject ]</a>
              <a href="author.html#35583">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I want to perform a different embedded action (or generate a different
AST node) on the final rule in a list of rules.

Here's the most basic example I can think of:

identifierList:
        : (Identifier -&gt; ^(ID $Identifier))* (Identifier -&gt; ^(OTHER
$Identifier))
        ;

This doesn't work because there are two alternatives when matching
just against one Identifier.  So I tried making the first nongreedy
with no success:

identifierList:
        : ( options { greedy = false; } : Identifier -&gt; ^(ID
$Identifier))*  (Identifier -&gt; ^(OTHER $Identifier))
        ;

Again, ANTLR says this is ambiguous - if it's passed just &quot;Identifier&quot;
then it can supposedly either match the one that goes to ^(ID
$Identifier), or the one that goes to ^(OTHER $Identifier).  I don't
understand how this is the case given the first one is nongreedy

My actual example is a good amount lengthier and requires referencing
the rule itself in the rewrite, so solutions that require this to be
broken into multiple rules won't help me except maybe to help me
understand ANTLR better.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://www.antlr.org/pipermail/antlr-interest/attachments/20090813/128e1858/attachment.html">http://www.antlr.org/pipermail/antlr-interest/attachments/20090813/128e1858/attachment.html</A> 
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="035580.html">[antlr-interest] Why I'm getting syntax errors while I'm cheking	for semantic errors?
</A></li>
	<LI>Next message: <A HREF="035584.html">[antlr-interest] Antlr Behavior! Why notifying sintactic errors in	My tree gramar where I'm cheking for Semantic errors ONLY.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35583">[ date ]</a>
              <a href="thread.html#35583">[ thread ]</a>
              <a href="subject.html#35583">[ subject ]</a>
              <a href="author.html#35583">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
