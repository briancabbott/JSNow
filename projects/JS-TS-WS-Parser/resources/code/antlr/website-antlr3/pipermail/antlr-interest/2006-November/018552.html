<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Comments / White-Space and All The Rest
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Comments%20/%20White-Space%20and%20All%20The%20Rest&In-Reply-To=200611240822.00404.rschulz%40sonic.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018551.html">
   <LINK REL="Next"  HREF="018553.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Comments / White-Space and All The Rest</H1>
    <B>Terence Parr</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Comments%20/%20White-Space%20and%20All%20The%20Rest&In-Reply-To=200611240822.00404.rschulz%40sonic.net"
       TITLE="[antlr-interest] Comments / White-Space and All The Rest">parrt at cs.usfca.edu
       </A><BR>
    <I>Fri Nov 24 10:45:12 PST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="018551.html">[antlr-interest] Comments / White-Space and All The Rest
</A></li>
        <LI>Next message: <A HREF="018553.html">[antlr-interest] Comments / White-Space and All The Rest
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18552">[ date ]</a>
              <a href="thread.html#18552">[ thread ]</a>
              <a href="subject.html#18552">[ subject ]</a>
              <a href="author.html#18552">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi. You are probably trying to execute code with in the lexer, but  
you should really simply matched lexical items in the lexer and leave  
processing to the parser.  Place comments on a hidden token channel  
so that the parser does not see them in terms of parsing, but actions  
can still access the comments.  All non-skipped tokens are sent to  
the parser in the token stream and just by looking backwards and  
forwards in the token stream you can see all of the hidden channel  
tokens. For example, at the start of the method, look one token to  
the left of the first token of the method definition and you will  
find out if there is a comment there. :)

CommonTokenStream is your friend. :)

Ter
On Nov 24, 2006, at 8:21 AM, Randall R Schulz wrote:

&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> I would like to integrate comments into the stream of top-level
</I>&gt;<i> constructs recognized by my ANTLR (v3) grammar.
</I>&gt;<i>
</I>&gt;<i> Specifically, I'd like to treat comments in the input something like
</I>&gt;<i> JavaDoc comments in that I accumulate them (merge their contents in a
</I>&gt;<i> single StringBuilder instance) as they appear and then when the parser
</I>&gt;<i> encounters a top-level construct (the analogy would be a method or
</I>&gt;<i> field definition in Java source code) associate the accumulated
</I>&gt;<i> comment, if any, with that construct.
</I>&gt;<i>
</I>&gt;<i> I've had partial success, but there's one problem: It appears all the
</I>&gt;<i> comments are processed before any of the parsing happens. Thus the
</I>&gt;<i> comments don't properly interleave with the non-comment content and
</I>&gt;<i> don't get associated with the proper constructs. Instead, they all
</I>&gt;<i> appear at the beginning, merged into a single comment block.
</I>&gt;<i>
</I>&gt;<i> How can I get the kind of behavior I want? Namely that comment action
</I>&gt;<i> code is processed in sequence with the parsing process?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks.
</I>&gt;<i>
</I>&gt;<i> Randall Schulz
</I>
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018551.html">[antlr-interest] Comments / White-Space and All The Rest
</A></li>
	<LI>Next message: <A HREF="018553.html">[antlr-interest] Comments / White-Space and All The Rest
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18552">[ date ]</a>
              <a href="thread.html#18552">[ thread ]</a>
              <a href="subject.html#18552">[ subject ]</a>
              <a href="author.html#18552">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
