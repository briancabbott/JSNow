<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] philosophy about translation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20philosophy%20about%20translation&In-Reply-To=598864c70610101338y1c696f91scfb6cd4ddf8f50eb%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017879.html">
   <LINK REL="Next"  HREF="017896.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] philosophy about translation</H1>
    <B>Loring Craymer</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20philosophy%20about%20translation&In-Reply-To=598864c70610101338y1c696f91scfb6cd4ddf8f50eb%40mail.gmail.com"
       TITLE="[antlr-interest] philosophy about translation">lgcraymer at yahoo.com
       </A><BR>
    <I>Tue Oct 10 21:50:54 PDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="017879.html">[antlr-interest] philosophy about translation
</A></li>
        <LI>Next message: <A HREF="017896.html">[antlr-interest] philosophy about translation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17887">[ date ]</a>
              <a href="thread.html#17887">[ thread ]</a>
              <a href="subject.html#17887">[ subject ]</a>
              <a href="author.html#17887">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have off and on put a fair amount of thought into rule-based pattern match-and-replace systems and how they might relate to ANTLR.  ANTLR trees with transformations are like a surgeon's scalpel:  you can locate precisely which parts of a tree need to be changed and change them in situ.  On the other hand, trees can be a pain when you really do want to replace all instances of a given pattern. Pattern-match-and-replace systems are more of a &quot;shotgun&quot; approach.  Every instance of a pattern is changed, and the order in which transformations are made affects the end result.  For example

A B C -&gt; C B A
B C D -&gt; C B D

operating on A B C D will produce either
C B A D or A C B D depending on which rule is used.  Probstang's BURG algorithm provides an approach for finding the &quot;best&quot; transformation from a set of possible transformations, but figuring out how to integrate BURG with ANTLR is a challenge.

As larger and larger rule sets are built, it becomes harder and harder to be sure that you are getting the results that you want--unless you can make sure that the rules do not overlap.  I think that that is one of the reasons that interactive refactoring tools are gaining wide acceptance, but batch transformation systems have had limited acceptance.

For ANTLR use, there is an additional problem:  what if you want to follow rule-based transformation with grammar-based tree manipulation/analysis?

There is one possible solution:  instead of transforming the tree generated by ANTLR, do a pattern-match-and-replace on the grammar instead.  Of course, what would really be done is is to generate an annotated grammar that would produce the same transformation on an input tree that would be achieved by the match-and-replace algorithm as well as the output grammar.  (It would actually be a bit more complicated because some of the matches would cross rule boundaries.)  Then it is at least possible to examine the grammars to see if the transformations are free of &quot;accidents&quot;.  A useful side effect:  runtime transformation does not involve &quot;iterate until no further transformations can be applied&quot;.

I have yet to work on a problem where multi-pass rule-based replacement was a clear win, so I have not gone further than thinking about this.

--Loring

Monty Zukowski &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">monty at codetransform.com</A>&gt; wrote: &gt; * Ease of specification.  Rules are clearly easier than a tree walker
&gt;<i> when they are clean and there are few of them.  How can one beat the
</I>&gt;<i> following?
</I>&gt;<i>
</I>&gt;<i> ADD v1 TO v2. --&gt; v2 += v1;
</I>&gt;<i>
</I>&gt;<i> Though with trees, one could perhaps auto translate that text to
</I>&gt;<i> trees.   Or, just use raw:
</I>&gt;<i>
</I>&gt;<i> ^(ADD v1 v2) -&gt; ^(PLUS_EQUAL v2 v1)
</I>&gt;<i>
</I>
Note that the E language guys came up with a nice shorthand described
tersely here:  <A HREF="http://www.erights.org/elang/grammar/quasi-terms.html">http://www.erights.org/elang/grammar/quasi-terms.html</A>
and <A HREF="http://www.erights.org/elang/grammar/quasi-xml.html.">http://www.erights.org/elang/grammar/quasi-xml.html.</A>  Basically it
lets you parse something like ADD @v1:expr TO @v2:expr into a tree
that can be matched against your source tree.  Then you can write the
--&gt; @v2 += @v1 on the other side, which is parsed into a tree and it
will substitute the AST nodes appropriately,   So basically you are
specifying in text yet working in trees.

Ter, I think we discussed this at the Cabal.  The trick is that the
parser and lexer needs to know how to just return a generic EXPR token
for @v1:expr -- and build a tree with that as a placeholder.

&gt;<i> Personally,  I think that a hybrid system that does most of the work
</I>&gt;<i> in a tree walker but with rules, for all of the special cases that
</I>&gt;<i> Andy has pointed out, would be great!
</I>&gt;<i>
</I>
Yes, I agree.  This is quite an interesting discussion.

Monty


 		
---------------------------------
Do you Yahoo!?
 Get on board. You're invited to try the new Yahoo! Mail.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://www.antlr.org/pipermail/antlr-interest/attachments/20061010/8697b10c/attachment-0001.html">http://www.antlr.org/pipermail/antlr-interest/attachments/20061010/8697b10c/attachment-0001.html</A> 
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017879.html">[antlr-interest] philosophy about translation
</A></li>
	<LI>Next message: <A HREF="017896.html">[antlr-interest] philosophy about translation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17887">[ date ]</a>
              <a href="thread.html#17887">[ thread ]</a>
              <a href="subject.html#17887">[ subject ]</a>
              <a href="author.html#17887">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
