<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Performance Exploration (C++ Library)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Performance%20Exploration%20%28C%2B%2B%20Library%29&In-Reply-To=dd3a065f041214070113162073%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010685.html">
   <LINK REL="Next"  HREF="010712.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Performance Exploration (C++ Library)</H1>
    <B>Ric Klaren</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Performance%20Exploration%20%28C%2B%2B%20Library%29&In-Reply-To=dd3a065f041214070113162073%40mail.gmail.com"
       TITLE="[antlr-interest] Performance Exploration (C++ Library)">ric.klaren at gmail.com
       </A><BR>
    <I>Tue Dec 14 07:33:34 PST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="010685.html">[antlr-interest] Performance Exploration (C++ Library)
</A></li>
        <LI>Next message: <A HREF="010712.html">[antlr-interest] Performance Exploration (C++ Library)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10686">[ date ]</a>
              <a href="thread.html#10686">[ thread ]</a>
              <a href="subject.html#10686">[ subject ]</a>
              <a href="author.html#10686">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi,

On Tue, 14 Dec 2004 10:01:42 -0500, Bryan Ewbank &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">ewbank at gmail.com</A>&gt; wrote:
&gt;<i> There was a discussion here a while back -- wrapped up on 2004.10.26
</I>&gt;<i> by Don Caton -- about where performance is being lost, and a general
</I>&gt;<i> theory that replacing the scanner with lex would help quite a bit:
</I>&gt;<i> 
</I>&gt;<i>          <A HREF="http://article.gmane.org/gmane.comp.parsers.antlr-interest/1283">http://article.gmane.org/gmane.comp.parsers.antlr-interest/1283</A>
</I>&gt;<i> 
</I>&gt;<i> Well, I was curious (and there's a very good C++ example - thanks
</I>&gt;<i> Ric!), so I replaced my ANTLR scanner with lex.   Using gprof, I
</I>&gt;<i> learned that I saved around 10%.  That's okay, I guess.  Not what I'd
</I>&gt;<i> hoped for, but good enough to switch.
</I>
Only 10%? Hmm would have expected more going on some other figures I
heart about.

&gt;<i> What surprised me is that the stuff associated with antlr::ASTRefCount
</I>&gt;<i> accounted for nearly 40% of the time reported in gprof.  On the one
</I>&gt;<i> hand, this makes some sense (the &quot;forwarding&quot; methods account for
</I>&gt;<i> around 15% of overall time) - but I was surprised to see assignment
</I>&gt;<i> taking nearly 10% of the time.
</I>
Ah looks like you use a lot of treewalker stuff. But... Ugh. I'm
currently tinkering with the refcounters for 2.7.5 release (trying to
make things play nice with the ones contributed by Mark Lentzcer (sp?)
) Anycase I'm more and more of the opinion that I *really* want to get
rid of these damn things, and that was without looking at the
performance picture which you now provide (thanks!)

The one thing I'm currently worried about is backwards compatability
for the 2.7.5 release I had planned to release with the new reference
counter, but I'm at a point that I'm inclined to back out all those
changes and release 2.7.5 with the old ones. (It just feels like
shuffling the problem around to other parts of the code)

Also if I include the new ones we'll be dropping MSVC6 support.

Cheers,

Ric


 
Yahoo! Groups Links

&lt;*&gt; To visit your group on the web, go to:
    <A HREF="http://groups.yahoo.com/group/antlr-interest/">http://groups.yahoo.com/group/antlr-interest/</A>

&lt;*&gt; To unsubscribe from this group, send an email to:
    <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-unsubscribe at yahoogroups.com</A>

&lt;*&gt; Your use of Yahoo! Groups is subject to:
    <A HREF="http://docs.yahoo.com/info/terms/">http://docs.yahoo.com/info/terms/</A>
 



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010685.html">[antlr-interest] Performance Exploration (C++ Library)
</A></li>
	<LI>Next message: <A HREF="010712.html">[antlr-interest] Performance Exploration (C++ Library)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10686">[ date ]</a>
              <a href="thread.html#10686">[ thread ]</a>
              <a href="subject.html#10686">[ subject ]</a>
              <a href="author.html#10686">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
