<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] CSharp2: serialize/deserialize as AST
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20CSharp2%3A%20serialize/deserialize%20as%20AST&In-Reply-To=%3C49781D77.5050200%40gmx.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032508.html">
   <LINK REL="Next"  HREF="032510.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] CSharp2: serialize/deserialize as AST</H1>
    <B>Johannes Luber</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20CSharp2%3A%20serialize/deserialize%20as%20AST&In-Reply-To=%3C49781D77.5050200%40gmx.de%3E"
       TITLE="[antlr-interest] CSharp2: serialize/deserialize as AST">jaluber at gmx.de
       </A><BR>
    <I>Wed Jan 21 23:17:11 PST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="032508.html">[antlr-interest] CSharp2: serialize/deserialize as AST
</A></li>
        <LI>Next message: <A HREF="032510.html">[antlr-interest] CSharp2: serialize/deserialize as AST
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32509">[ date ]</a>
              <a href="thread.html#32509">[ thread ]</a>
              <a href="subject.html#32509">[ subject ]</a>
              <a href="author.html#32509">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ben Gillis schrieb:
&gt;&gt;<i> Doesn't the usual approach via Binary/XML formatters work? If
</I>&gt;<i> Yes, with a CommonTree wrapper or SurrogateSelector.
</I>&gt;<i> 
</I>&gt;<i> But, how do you handle the CommonTree.Parent member upon
</I>&gt;<i> deserialization? Again, looking at the ANTLR code, it's a pointer,
</I>&gt;<i> right?  Merely restoring a serialized value won't work for that.
</I>
Actually, I don't know how pointers are treated, but I'd be surprised if
the standard formatters don't handle this case themselves as it is a
general case with using references instead value types in member fields.
Did you you already try it or do you just assume that it doesn't work?

If it really doesn't work, then you could create your own (De)Serializer
and replace pointers by an object id field. IIRC, on CodeProject is an
article on doing so.

Johannes
&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ----- Original Message ----- From: &quot;Johannes Luber&quot; &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">jaluber at gmx.de</A>&gt;
</I>&gt;<i> To: &quot;Ben Gillis&quot; &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">wbgillis at gmail.com</A>&gt;
</I>&gt;<i> Cc: &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>&gt;
</I>&gt;<i> Sent: Thursday, January 22, 2009 12:41 AM
</I>&gt;<i> Subject: Re: [antlr-interest] CSharp2: serialize/deserialize as AST
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i> Ben Gillis schrieb:
</I>&gt;&gt;&gt;<i> I want to serialize/deserialize an AST, binary format, using C#.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> But, I'm not clear how the AST is reconstructed on deserialization
</I>&gt;&gt;&gt;<i> concerning the IToken.Parent.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I see some serialization in ANTLR, e.g.
</I>&gt;&gt;&gt;<i> Antlr.Runtime.Debug.DebugEventSocketProxy.SerializeToken.  This would be
</I>&gt;&gt;&gt;<i> a pointer; therefore, some recursive approach to using built-in AddChild
</I>&gt;&gt;&gt;<i> methods or something must be done???
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Before I brew up something, perhaps this is (a) already done/available?
</I>&gt;&gt;&gt;<i> (b) easier than I'm making it???
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Doesn't the usual approach via Binary/XML formatters work? If the
</I>&gt;&gt;<i> classes in 3.1.1 don't have the required attributes, then get a
</I>&gt;&gt;<i> snapshot, as those should be in the repo files.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Johannes
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Thanks,
</I>&gt;&gt;&gt;<i> Ben
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> ------------------------------------------------------------------------
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> List: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">http://www.antlr.org/mailman/listinfo/antlr-interest</A>
</I>&gt;&gt;&gt;<i> Unsubscribe:
</I>&gt;&gt;&gt;<i> <A HREF="http://www.antlr.org/mailman/options/antlr-interest/your-email-address">http://www.antlr.org/mailman/options/antlr-interest/your-email-address</A>
</I>&gt;&gt;<i>
</I>&gt;<i> 
</I>
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032508.html">[antlr-interest] CSharp2: serialize/deserialize as AST
</A></li>
	<LI>Next message: <A HREF="032510.html">[antlr-interest] CSharp2: serialize/deserialize as AST
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32509">[ date ]</a>
              <a href="thread.html#32509">[ thread ]</a>
              <a href="subject.html#32509">[ subject ]</a>
              <a href="author.html#32509">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
