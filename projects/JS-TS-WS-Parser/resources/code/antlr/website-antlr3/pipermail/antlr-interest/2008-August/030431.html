<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] C# target:	.NET	Frameworkbug	causing	NullReferenceException, must use this workaround
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20C%23%0A%20target%3A%09.NET%09Frameworkbug%09causing%09NullReferenceException%2C%0A%20must%20use%20this%20workaround&In-Reply-To=%3C48B8230A.9090301%40gmx.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030424.html">
   <LINK REL="Next"  HREF="029766.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] C# target:	.NET	Frameworkbug	causing	NullReferenceException, must use this workaround</H1>
    <B>Johannes Luber</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20C%23%0A%20target%3A%09.NET%09Frameworkbug%09causing%09NullReferenceException%2C%0A%20must%20use%20this%20workaround&In-Reply-To=%3C48B8230A.9090301%40gmx.de%3E"
       TITLE="[antlr-interest] C# target:	.NET	Frameworkbug	causing	NullReferenceException, must use this workaround">jaluber at gmx.de
       </A><BR>
    <I>Fri Aug 29 09:25:46 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="030424.html">[antlr-interest] C#	target:	.NET	Frameworkbug	causing	NullReferenceException,	must use this workaround
</A></li>
        <LI>Next message: <A HREF="029766.html">[antlr-interest] Compile Error When Rewriting Token Buffer in C#
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30431">[ date ]</a>
              <a href="thread.html#30431">[ thread ]</a>
              <a href="subject.html#30431">[ subject ]</a>
              <a href="author.html#30431">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Sam Harwell schrieb:
&gt;<i> If you change the condition of the existing ternary expression from (mtne.Node!=null) to (mtne.Node!=null &amp;&amp; mtne.Node.ToString()!=null), it fixes the problem.
</I>&gt;<i> 
</I>&gt;<i> Sam
</I>
Added this, so I have not created a new binary yet.

Johannes

&gt;<i> 
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> From: Johannes Luber [mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">jaluber at gmx.de</A>] 
</I>&gt;<i> Sent: Thursday, August 28, 2008 3:45 PM
</I>&gt;<i> To: Sam Harwell
</I>&gt;<i> Cc: antlr-interest
</I>&gt;<i> Subject: Re: [antlr-interest] C# target: .NET Frameworkbug causing NullReferenceException, must use this workaround
</I>&gt;<i> 
</I>&gt;<i> Sam Harwell schrieb:
</I>&gt;&gt;<i> Strangely enough, your fix highlights why the bug in the Framework probably hasn't been fixed to date. The problem only occurs if mtne.Node is not null, so your current code change has no effect on the situation.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Sam
</I>&gt;<i> 
</I>&gt;<i> You mean I have to add a ToString() to mtne.Node?
</I>&gt;<i> 
</I>&gt;<i> Johannes
</I>&gt;&gt;<i> -----Original Message-----
</I>&gt;&gt;<i> From: Johannes Luber [mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">jaluber at gmx.de</A>] 
</I>&gt;&gt;<i> Sent: Saturday, August 09, 2008 3:10 PM
</I>&gt;&gt;<i> To: Sam Harwell
</I>&gt;&gt;<i> Cc: antlr-interest
</I>&gt;&gt;<i> Subject: Re: [antlr-interest] C# target: .NET Frameworkbug causing NullReferenceException, must use this workaround
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Sam Harwell schrieb:
</I>&gt;&gt;&gt;<i> I&#8217;m with Jim on this &#8211; if I had only sent you a link to the bug report 
</I>&gt;&gt;&gt;<i> at MS you would have figured out something similar to what I wrote 
</I>&gt;&gt;&gt;<i> anyway. When you make the change, make sure to comment that you&#8217;re 
</I>&gt;&gt;&gt;<i> working around anti-documented behavior so no one wants to change it later.
</I>&gt;&gt;<i> I decided to use a ternary operator here, because I find it strange that 
</I>&gt;&gt;<i> a string null is handled differently than an object null (as shown in 
</I>&gt;&gt;<i> the bugfix which Sam posted). That way I'm safe regarding this bug and 
</I>&gt;&gt;<i> any possible problem regarding the lack of the license.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Johannes
</I>&gt;&gt;&gt;<i>  
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The standard says this at the end of page 201 (section 14.7.4 Addition 
</I>&gt;&gt;&gt;<i> operator):
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &#8220;If an operand of string concatenation is null, an empty string is 
</I>&gt;&gt;&gt;<i> substituted.&#8221;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>  
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Sam
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>  
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> *From:* <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A> 
</I>&gt;&gt;&gt;<i> [mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A>] *On Behalf Of *Jim Idle
</I>&gt;&gt;&gt;<i> *Sent:* Saturday, August 09, 2008 11:22 AM
</I>&gt;&gt;&gt;<i> *To:* antlr-interest
</I>&gt;&gt;&gt;<i> *Subject:* Re: [antlr-interest] C# target: .NET Frameworkbug causing 
</I>&gt;&gt;&gt;<i> NullReferenceException, must use this workaround
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>  
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On Sat, 2008-08-09 at 15:05 +0200, Johannes Luber wrote:And did you sign 
</I>&gt;&gt;&gt;<i> the ANTLR Contribution
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>  
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> License? Otherwise I can't use your bugfix.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I don't think that is true - it is a few lines that you are going to 
</I>&gt;&gt;&gt;<i> type in yourself, probably fairly differently. Hence this is covered by 
</I>&gt;&gt;&gt;<i> your own signature I should think. I rarely (ok, never) type in a bug 
</I>&gt;&gt;&gt;<i> fix that someone sends in, I just use it as an example of HOW something 
</I>&gt;&gt;&gt;<i> MIGHT be fixed IF the behavior it purports to fix IS in fact the 
</I>&gt;&gt;&gt;<i> behavior that is wrong ;-)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Jim
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> List: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">http://www.antlr.org/mailman/listinfo/antlr-interest</A>
</I>&gt;&gt;<i> Unsubscribe: <A HREF="http://www.antlr.org/mailman/options/antlr-interest/your-email-address">http://www.antlr.org/mailman/options/antlr-interest/your-email-address</A>
</I>&gt;&gt;<i>
</I>&gt;<i> 
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030424.html">[antlr-interest] C#	target:	.NET	Frameworkbug	causing	NullReferenceException,	must use this workaround
</A></li>
	<LI>Next message: <A HREF="029766.html">[antlr-interest] Compile Error When Rewriting Token Buffer in C#
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30431">[ date ]</a>
              <a href="thread.html#30431">[ thread ]</a>
              <a href="subject.html#30431">[ subject ]</a>
              <a href="author.html#30431">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
