<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest]  Fwd: Re:  Trying to keep whitespace in an AST
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20%20Fwd%3A%20Re%3A%20%20Trying%20to%20keep%20whitespace%20in%20an%20AST&In-Reply-To=%3C47AC741E.7000906%40gmx.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026295.html">
   <LINK REL="Next"  HREF="026287.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest]  Fwd: Re:  Trying to keep whitespace in an AST</H1>
    <B>Johannes Luber</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20%20Fwd%3A%20Re%3A%20%20Trying%20to%20keep%20whitespace%20in%20an%20AST&In-Reply-To=%3C47AC741E.7000906%40gmx.de%3E"
       TITLE="[antlr-interest]  Fwd: Re:  Trying to keep whitespace in an AST">jaluber at gmx.de
       </A><BR>
    <I>Fri Feb  8 07:24:14 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="026295.html">[antlr-interest] Problem with Duplicating nodes/trees
</A></li>
        <LI>Next message: <A HREF="026287.html">[antlr-interest] Fwd: Re:  Trying to keep whitespace in an AST
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26283">[ date ]</a>
              <a href="thread.html#26283">[ thread ]</a>
              <a href="subject.html#26283">[ subject ]</a>
              <a href="author.html#26283">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> So I guess I need an AST that keeps newlines and
</I>&gt;<i> comments associated 
</I>&gt;<i> with particular nodes. The pretty printing is done
</I>&gt;<i> by our code so the 
</I>&gt;<i> grammar doesn't need to do that.
</I>
Well, there are problems with the naive way of simply attaching newlines 
and comments. The AST grammar doesn't recognize &quot;The comments and 
whitespace everywhere&quot; requirement. So you can insert at every possible 
point &quot;(WS | COMMENT)*&quot;, but that would be ugly.

One could try to tell the parser to check for WS and COMMENT in addition 
to the expected node, but that would interfere with syntactic 
predicates, which don't check for theses variants. One could try to 
change the template but I'm not sure how feasible this is. There could 
be other problems lurking.

The way I'd go is to use channels. Put newlines and COMMENT into a 
channel separate from the unneeded whitespace. This would reduce the 
problem into accessing the off-channel tokens at the right places and to 
keep them after grammar transformations. But so far I haven't checked 
out, how one can do the latter properly.

Johannes
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026295.html">[antlr-interest] Problem with Duplicating nodes/trees
</A></li>
	<LI>Next message: <A HREF="026287.html">[antlr-interest] Fwd: Re:  Trying to keep whitespace in an AST
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26283">[ date ]</a>
              <a href="thread.html#26283">[ thread ]</a>
              <a href="subject.html#26283">[ subject ]</a>
              <a href="author.html#26283">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
