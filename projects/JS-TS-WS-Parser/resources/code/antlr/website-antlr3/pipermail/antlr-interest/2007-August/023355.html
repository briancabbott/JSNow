<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] AST generating grammar not building for C	target
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20AST%20generating%20grammar%20not%20building%20for%20C%0A%09target&In-Reply-To=%3C051466DAA0D608439E196797955018D702363B%40wavemachine.temporal-wave.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023352.html">
   <LINK REL="Next"  HREF="023356.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] AST generating grammar not building for C	target</H1>
    <B>Jim Idle</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20AST%20generating%20grammar%20not%20building%20for%20C%0A%09target&In-Reply-To=%3C051466DAA0D608439E196797955018D702363B%40wavemachine.temporal-wave.com%3E"
       TITLE="[antlr-interest] AST generating grammar not building for C	target">jimi at temporal-wave.com
       </A><BR>
    <I>Tue Aug 21 08:38:21 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023352.html">[antlr-interest] AST generating grammar not building for C	target
</A></li>
        <LI>Next message: <A HREF="023356.html">[antlr-interest] AST generating grammar not building for C	target
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23355">[ date ]</a>
              <a href="thread.html#23355">[ thread ]</a>
              <a href="subject.html#23355">[ subject ]</a>
              <a href="author.html#23355">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>What version of ANTLR are you using to generate the code. This is fixed
in the latest template I believe and this should be a part of the latest
ANTLR tool. Maybe it is not a part of the ANTLRWorks version you are
using. I will check the template though. Try downloading the examples
and using the .sln files there to see how it integrates with VS2005.

Jim



&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A> [mailto:antlr-interest-
</I>&gt;<i> <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">bounces at antlr.org</A>] On Behalf Of Josh Scholar
</I>&gt;<i> Sent: Tuesday, August 21, 2007 12:32 AM
</I>&gt;<i> To: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>
</I>&gt;<i> Subject: [antlr-interest] AST generating grammar not building for C
</I>&gt;<i> target
</I>&gt;<i> 
</I>&gt;<i> I solved my earlier problem by downloading the full source
</I>&gt;<i> distribution rather than getting the C code from FishEye (though it
</I>&gt;<i> would still be nice to keep up with development).
</I>&gt;<i> 
</I>&gt;<i> But my first test, an AST making grammar the compiles under Java isn't
</I>&gt;<i> compiling in Visual C++ 2005.
</I>&gt;<i> 
</I>&gt;<i> Whether I use the 3.0 or the 3.0.1 C include code (and using the
</I>&gt;<i> latest AntlrWorks) I get:
</I>&gt;<i> 
</I>&gt;<i> c:\assembler\antlr3\scratch\scratch\stuffparser.c(3008) : warning
</I>&gt;<i> C4003: not enough actual parameters for macro 'TOKTEXT'
</I>&gt;<i> c:\assembler\antlr3\scratch\scratch\stuffparser.c(3008) : error C2059:
</I>&gt;<i> syntax error : ')'
</I>&gt;<i> 
</I>&gt;<i> for line 3008 in the generated &quot;[grammar name]parser.c&quot;
</I>&gt;<i> 
</I>&gt;<i>             	        root_1 = ADAPTOR-&gt;becomeRoot(ADAPTOR,
</I>&gt;<i> ADAPTOR-&gt;createTypeTokenText(ADAPTOR, LIST, TOKTEXT(h)), root_1);
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> or for a bit more context:
</I>&gt;<i> 
</I>&gt;<i>             /* AST REWRITE
</I>&gt;<i>              * elements          : head, dot, rest
</I>&gt;<i>              * token labels      :
</I>&gt;<i>              * rule labels       : retval, rest, head, dot
</I>&gt;<i>              * token list labels :
</I>&gt;<i>              * rule list labels  :
</I>&gt;<i>              */
</I>&gt;<i>             if ( BACKTRACKING==0 )
</I>&gt;<i>             {
</I>&gt;<i>             	pANTLR3_REWRITE_RULE_SUBTREE_STREAM stream_retval;
</I>&gt;<i>             	pANTLR3_REWRITE_RULE_SUBTREE_STREAM stream_rest;
</I>&gt;<i>             	pANTLR3_REWRITE_RULE_SUBTREE_STREAM stream_head;
</I>&gt;<i>             	pANTLR3_REWRITE_RULE_SUBTREE_STREAM stream_dot;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 	stream_retval=antlr3RewriteRuleSubtreeStreamNewAEE(ADAPTOR,
</I>&gt;<i> (pANTLR3_UINT8)&quot;token retval&quot;, retval.tree != NULL ? retval.tree :
</I>&gt;<i> NULL);
</I>&gt;<i> 
</I>&gt;<i> 	stream_rest=antlr3RewriteRuleSubtreeStreamNewAEE(ADAPTOR,
</I>&gt;<i> (pANTLR3_UINT8)&quot;token rest&quot;, rest.tree != NULL ? rest.tree : NULL);
</I>&gt;<i> 
</I>&gt;<i> 	stream_head=antlr3RewriteRuleSubtreeStreamNewAEE(ADAPTOR,
</I>&gt;<i> (pANTLR3_UINT8)&quot;token head&quot;, head.tree != NULL ? head.tree : NULL);
</I>&gt;<i> 
</I>&gt;<i> 	stream_dot=antlr3RewriteRuleSubtreeStreamNewAEE(ADAPTOR,
</I>&gt;<i> (pANTLR3_UINT8)&quot;token dot&quot;, dot.tree != NULL ? dot.tree : NULL);
</I>&gt;<i> 
</I>&gt;<i>             	root_0			    = ADAPTOR-&gt;nil(ADAPTOR);
</I>&gt;<i>             	retval.tree    = root_0;
</I>&gt;<i>             	// 29:78: -&gt; ^( LIST[$h] ( $head)? ( $rest)* ( ^(
</I>&gt;<i> DOT[$d]
</I>&gt;<i> $dot) )? )
</I>&gt;<i>             	{
</I>&gt;<i>             	    //
</I>&gt;<i> C:\\assembler\\antlr3\\scratch\\scratch\\stuff.g:29:80: ^( LIST[$h] (
</I>&gt;<i> $head)? ( $rest)* ( ^( DOT[$d] $dot) )? )
</I>&gt;<i>             	    {
</I>&gt;<i>             	        pANTLR3_BASE_TREE root_1 = ADAPTOR-
</I>&gt;<i> &gt;nil(ADAPTOR);
</I>&gt;<i>             	        root_1 = ADAPTOR-&gt;becomeRoot(ADAPTOR,
</I>&gt;<i> ADAPTOR-&gt;createTypeTokenText(ADAPTOR, LIST, TOKTEXT(h)), root_1);
</I>&gt;<i> 
</I>&gt;<i>             	        //
</I>&gt;<i> C:\\assembler\\antlr3\\scratch\\scratch\\stuff.g:29:91: ( $head)?
</I>&gt;<i>             	        {
</I>&gt;<i>             	        	if ( stream_head-&gt;hasNext(stream_head) )
</I>&gt;<i>             	        	{
</I>&gt;<i>             	        		ADAPTOR-&gt;addChild(ADAPTOR,
</I>root_1,
&gt;<i> stream_head-&gt;next(stream_head));
</I>&gt;<i> 
</I>&gt;<i>             	        	}
</I>&gt;<i>             	        	stream_head-&gt;reset(stream_head);
</I>&gt;<i> 
</I>&gt;<i>             	        }
</I></PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023352.html">[antlr-interest] AST generating grammar not building for C	target
</A></li>
	<LI>Next message: <A HREF="023356.html">[antlr-interest] AST generating grammar not building for C	target
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23355">[ date ]</a>
              <a href="thread.html#23355">[ thread ]</a>
              <a href="subject.html#23355">[ subject ]</a>
              <a href="author.html#23355">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
