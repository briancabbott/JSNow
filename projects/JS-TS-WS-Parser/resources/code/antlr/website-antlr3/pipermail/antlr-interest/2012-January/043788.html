<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Antlr v4 - C++ target
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Antlr%20v4%20-%20C%2B%2B%20target&In-Reply-To=%3CCB34F5C4.F872D%25ruslan_zasukhin%40valentina-db.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="043786.html">
   <LINK REL="Next"  HREF="043790.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Antlr v4 - C++ target</H1>
    <B>Ruslan Zasukhin</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Antlr%20v4%20-%20C%2B%2B%20target&In-Reply-To=%3CCB34F5C4.F872D%25ruslan_zasukhin%40valentina-db.com%3E"
       TITLE="[antlr-interest] Antlr v4 - C++ target">ruslan_zasukhin at valentina-db.com
       </A><BR>
    <I>Thu Jan 12 10:40:36 PST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="043786.html">[antlr-interest] Antlr v4 - C++ target
</A></li>
        <LI>Next message: <A HREF="043790.html">[antlr-interest] Antlr v4 - C++ target
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43788">[ date ]</a>
              <a href="thread.html#43788">[ thread ]</a>
              <a href="subject.html#43788">[ subject ]</a>
              <a href="author.html#43788">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 1/12/12 8:07 PM, &quot;Jim Idle&quot; &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">jimi at temporal-wave.com</A>&gt; wrote:

Hi Jim,

&gt;<i> I do plan on doing that in fact. However I would like to respond to the
</I>&gt;<i> criticisms here as follows:
</I>&gt;<i> 
</I>&gt;<i> 1) I wrote the C runtime in under two weeks because I needed it for a
</I>&gt;<i> project and at that time ANTLR v3 was not released (beta).
</I>
Really great timing :)

But this also expose Jim, why  we did have so many pain porting
    v2 C++  to V3  C

Because there was no efforts to provide SMOTH switch.
Really who need this ?? :-)

&gt;<i> 5) All my tests and most everyone else finds the C v3 runtime to be faster
</I>&gt;<i> than the C++ runtime, so I can only conclude that there is something
</I>&gt;<i> different about one or two grammar files.
</I>
You mean you self did grammars for ANTLR v2 C++
And then compared grammar for v3 C?

Don't know, don't now ...

Speed is exactly the same ...
May be 5% only but this  not matters ...

We do not get x2 speed up


&gt;<i> 6) I did implement reuse other than for trees and that helps most of the
</I>&gt;<i> use cases where the initial memory allocation takes time and so you don't
</I>&gt;<i> want to tear it down and re-allocate it.
</I>
As I have told reuse() is NOT finished Jim.

It produce a lots of leaks.
I was able copied that idea of reuse to 2-3 other your classes.
And only after that  RAM is not eaten in our simple tests of SQL parser.

Unfortunately I have lost this changes &quot;thanks to stupid XCODE mistake&quot;.
It have erase ANTLR folder ... And was no backup

So I need once again find day to recover that fix.
Only after that I will be able send you all this.


&gt;<i> 7) It is a lot easier to start with someone else's code than it is to
</I>&gt;<i> start with vi and a blank screen. Where's the love?
</I>
I very love your code from point of view ... COOL CODE.
My personal opinion is that sources of PostgreSQL and your ANTLR3/C is may
be one of the best accurate code I have see in my life.


PROBLEM is that after huge our efforts from yet 2007 year,
When we have start step by step port v2 grammar,
Adopt code from C++ only  to  C++ called by C,
And so on ...

And this year from March 2011 to November 2011 was done also a lots of job
...

We have found leaks finally in working grammar,
And zero speed up and ....

Our product v5.0 next month still will use v2 ANTLR ..

Jim, it is not enough to create GREAT PIECE of software,
It really needs correct and complete docs to it ...

I don't know how other teams, but we have epic fail with
    ANTLR  v3  [C]    :-((((

At least one full developer-year spent, and ZERO bonus ... wow..

And yesterday Terrence expose point that ANTLR not try to be fast ... wow.


&gt;<i> 8) ANTLR is naturally more heavyweight than some other tools, but it is
</I>&gt;<i> usually easier to use it.
</I>
ANTLR v2 C++ was easy, because it have VERY CLEAN defined API.

C was hard, because it is absolutely not clear what and when to call.
API was not well defined.


May be if we'd have docs, with 250 HOW TO questions, explained each by 10-20
lines of code life could be simpler  :*)


&gt;<i> 9) Why not wait for v4 where some of these things are addressed as a
</I>&gt;<i> natural consequence of the design.
</I>
Well,  personally me, still will try fix back that leaks in v3.

Then I am going again spend time in profiler to see what can be improved yet
... But it seems to me in ANTLR code no way improve something ... Only may
be change our own code ... But then no matter v2 or v3


ALSO, wonder now is:
    what sense for EXISTED ANTLRv2 grammars to be ported to v3 or v4 ?

WHAT SENSE ??  What benefit?

I was in hope that v3/C will be x2 times faster:
    no STD strings,  memory pools, no exceptions ...

But speed same ...


Wait for v4? :-)
  We using v2 about 10 years ...
    We did wait 3 years for v3.4, while in July 2011 I have read about
implemented reuse() ...


Guys,  don't you think that it is strange that V3.0, 3.1, 3.2, 3.3,
did miss MAJOR feature of 2.x  ??   And 3.4 have leaks in this feature.

How this can be?

v4 again will drop 10-20% of major features of v3  ??

This not make porting as SMOOT as it must be ...

My 2 cents 


-- 
Best regards,

Ruslan Zasukhin
VP Engineering and New Technology
Paradigma Software, Inc

Valentina - Joining Worlds of Information
<A HREF="http://www.paradigmasoft.com">http://www.paradigmasoft.com</A>

[I feel the need: the need for speed]


</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="043786.html">[antlr-interest] Antlr v4 - C++ target
</A></li>
	<LI>Next message: <A HREF="043790.html">[antlr-interest] Antlr v4 - C++ target
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43788">[ date ]</a>
              <a href="thread.html#43788">[ thread ]</a>
              <a href="subject.html#43788">[ subject ]</a>
              <a href="author.html#43788">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
