<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] greedy vs nongreedy lexer rules
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20greedy%20vs%20nongreedy%20lexer%20rules&In-Reply-To=%3Cg2x1c0448551004181705y2307fd8vedb203e1fc11b274%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="038350.html">
   <LINK REL="Next"  HREF="038353.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] greedy vs nongreedy lexer rules</H1>
    <B>Cliff Hudson</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20greedy%20vs%20nongreedy%20lexer%20rules&In-Reply-To=%3Cg2x1c0448551004181705y2307fd8vedb203e1fc11b274%40mail.gmail.com%3E"
       TITLE="[antlr-interest] greedy vs nongreedy lexer rules">cliff.s.hudson at gmail.com
       </A><BR>
    <I>Sun Apr 18 17:05:29 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="038350.html">[antlr-interest] greedy vs nongreedy lexer rules
</A></li>
        <LI>Next message: <A HREF="038353.html">[antlr-interest] greedy vs nongreedy lexer rules
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38352">[ date ]</a>
              <a href="thread.html#38352">[ thread ]</a>
              <a href="subject.html#38352">[ subject ]</a>
              <a href="author.html#38352">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ahh, that's what I was getting at.  In my system, the actions would not be
embedded directly in the matching code as they are now.  Instead, all of the
actions which were part of an alternative would be executed together against
the global state.  Consider the following (assuming the C# language target)
based on the example you gave above.  The implementation of the Lexer
subclass would look as follows:

public class MyLexer : Lexer
{
  int i = 0; // from @members

  ... DFA stuff, token decls, etc...
  public void ID()
  {
     // Implemented as normal, except that where {i++} would be, there would
be
     // code which instead saves the action-visible state of the parser into
a State block.
     // This visible state means only the values of those variables which
are generated by the
     // running the the DFA, not those which might be updated by the
actions.  This
     // snapshot is then enqueued.

  }

public void ID_alt1(Queue&lt;State&gt; states)
{
    State currentState = states.Dequeue();
    i++; // While state information was enqueued, it turns out we didn't use
it here.
           // A language target would have translated any references to
action-visible
           // token information such as $text into

}


On Sun, Apr 18, 2010 at 4:53 PM, Terence Parr &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">parrt at cs.usfca.edu</A>&gt; wrote:

&gt;<i>
</I>&gt;<i> On Apr 18, 2010, at 4:50 PM, Cliff Hudson wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; You wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Well, imagine that you are modifying &quot;global&quot; state as you match
</I>&gt;<i> characters in identifier; this is something done in actions that ANTLR can
</I>&gt;<i> analyze. There is no way to &quot;roll this back&quot;.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The 'global' state you are talking about is state the DFA is modifying
</I>&gt;<i> but which an action in a rule could examine?  Is the amount of state visible
</I>&gt;<i> to actions too much to store while alternatives are being evaulated?
</I>&gt;<i>
</I>&gt;<i> It's state you set up and modify then ref:
</I>&gt;<i>
</I>&gt;<i> @members {
</I>&gt;<i> int i = 0;
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> ...
</I>&gt;<i>
</I>&gt;<i> ID : ('a'..'z' {i++;})+ {System.out.println(i);} ;
</I>&gt;<i>
</I>&gt;<i> ANTLR can't save i for you each char iteration.
</I>&gt;<i>
</I>&gt;<i> Ter
</I>&gt;<i>
</I>&gt;<i> List: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">http://www.antlr.org/mailman/listinfo/antlr-interest</A>
</I>&gt;<i> Unsubscribe:
</I>&gt;<i> <A HREF="http://www.antlr.org/mailman/options/antlr-interest/your-email-address">http://www.antlr.org/mailman/options/antlr-interest/your-email-address</A>
</I>&gt;<i>
</I></PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="038350.html">[antlr-interest] greedy vs nongreedy lexer rules
</A></li>
	<LI>Next message: <A HREF="038353.html">[antlr-interest] greedy vs nongreedy lexer rules
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38352">[ date ]</a>
              <a href="thread.html#38352">[ thread ]</a>
              <a href="subject.html#38352">[ subject ]</a>
              <a href="author.html#38352">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
