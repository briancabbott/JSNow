<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Questions regarding ANTLRv3.g
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Questions%20regarding%20ANTLRv3.g&In-Reply-To=%3C0E01AF62-7E5B-4131-8B5A-FD300B6B3DFB%40cs.usfca.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026985.html">
   <LINK REL="Next"  HREF="026988.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Questions regarding ANTLRv3.g</H1>
    <B>Terence Parr</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Questions%20regarding%20ANTLRv3.g&In-Reply-To=%3C0E01AF62-7E5B-4131-8B5A-FD300B6B3DFB%40cs.usfca.edu%3E"
       TITLE="[antlr-interest] Questions regarding ANTLRv3.g">parrt at cs.usfca.edu
       </A><BR>
    <I>Tue Mar 11 10:40:29 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="026985.html">[antlr-interest] Questions regarding ANTLRv3.g
</A></li>
        <LI>Next message: <A HREF="026988.html">[antlr-interest] lexer woes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27074">[ date ]</a>
              <a href="thread.html#27074">[ thread ]</a>
              <a href="subject.html#27074">[ subject ]</a>
              <a href="author.html#27074">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>ANTLRv3.g is a work in progress; not used yet.
Ter
On Mar 4, 2008, at 9:19 PM, Kenneth Domino wrote:

&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> I'm writing a pretty printer for ANTLR v3 grammars using the  
</I>&gt;<i> ANTLRv3.g grammar from the examples section of the website (<A HREF="http://www.antlr.org/grammar/ANTLR">http://www.antlr.org/grammar/ANTLR</A> 
</I>&gt;<i> ).  In doing so, I have several questions that I'm hoping someone  
</I>&gt;<i> could answer.
</I>&gt;<i>
</I>&gt;<i> 1) I couldn't help but notice that there are two files in the  
</I>&gt;<i> Fisheye revision control system (<A HREF="http://fisheye2.cenqua.com/">http://fisheye2.cenqua.com/</A>) for  
</I>&gt;<i> ANTLRv3.g (<A HREF="http://fisheye2.cenqua.com/browse/antlr/src/org/antlr/tool/ANTLRv3.g?r=4556">http://fisheye2.cenqua.com/browse/antlr/src/org/antlr/tool/ANTLRv3.g?r=4556</A> 
</I>&gt;<i>  and <A HREF="http://fisheye2.cenqua.com/browse/antlr-examples/java/ANTLR/ANTLRv3.g?r=4288">http://fisheye2.cenqua.com/browse/antlr-examples/java/ANTLR/ANTLRv3.g?r=4288</A>) 
</I>&gt;<i> .  They seem to be out of sync.
</I>&gt;<i>
</I>&gt;<i> In the second file (&quot;...4288&quot;)  token types include TREE_BEGIN,  
</I>&gt;<i> ROOT, BANG, RANGE, REWRITE; in the first file (&quot;...4556&quot;), these  
</I>&gt;<i> token types are not declared in the tokens section. What is the  
</I>&gt;<i> reason for the difference?
</I>&gt;<i>
</I>&gt;<i> In the first file, ruleScopeSpec has one production, and it  
</I>&gt;<i> specifies that id's do not have comma separation; in the second  
</I>&gt;<i> file, ruleScopeSpec has three productions, and id's have comma  
</I>&gt;<i> separation.  Which is the correct syntax?
</I>&gt;<i>
</I>&gt;<i> In the first file, the symbol SRC has modifier &quot;protected&quot;; in the  
</I>&gt;<i> second file, SRC has modifier &quot;fragment&quot;.  I thought &quot;protected&quot; was  
</I>&gt;<i> changed to &quot;fragment&quot; with version 3 of ANTLR, and it would only  
</I>&gt;<i> accept that?
</I>&gt;<i>
</I>&gt;<i> In the first file, ACTION_CHAR_LITERAL was defined as:
</I>&gt;<i>
</I>&gt;<i> fragment
</I>&gt;<i> ACTION_CHAR_LITERAL
</I>&gt;<i>  : '\'' (ACTION_ESC|.) '\''
</I>&gt;<i>  ;
</I>&gt;<i> In the second file, its defined as:
</I>&gt;<i>
</I>&gt;<i> fragment
</I>&gt;<i> ACTION_CHAR_LITERAL
</I>&gt;<i>  : '\'' (ACTION_ESC|~('\\'|'\'')) '\''
</I>&gt;<i>  ;
</I>&gt;<i>
</I>&gt;<i> What is the purpose of the difference?  Which is the correct syntax?
</I>&gt;<i>
</I>&gt;<i> In addition, it looks like the build for ANTLR (<A HREF="http://fisheye2.cenqua.com/browse/">http://fisheye2.cenqua.com/browse/</A> 
</I>&gt;<i> ~raw,r=4540/antlr/build.xml) does not use ANTLRv3.g, but the file  
</I>&gt;<i> antlr.g.  That file is an ANTLR version 2 input grammar, along with  
</I>&gt;<i> several other &quot;.g&quot; files the comprise the build.
</I>&gt;<i>
</I>&gt;<i> What is the situation with the ANTLRv3.g grammar?  Will they be kept  
</I>&gt;<i> in sync and will the new grammar be used in the build for ANTLR?
</I>&gt;<i>
</I>&gt;<i> 2) It looks like the example grammar <A HREF="http://fisheye2.cenqua.com/browse/antlr-examples/java/ANTLR/ANTLRv3.g?r=4288">http://fisheye2.cenqua.com/browse/antlr-examples/java/ANTLR/ANTLRv3.g?r=4288</A> 
</I>&gt;<i>  seems to have a bug in the tree construction for the third  
</I>&gt;<i> production of elementNoOptionSpec, in which the ebnfSuffix is  
</I>&gt;<i> completely lost from the tree:
</I>&gt;<i>
</I>&gt;<i> elementNoOptionSpec :
</I>&gt;<i>  atom
</I>&gt;<i>   ( ebnfSuffix -&gt; ^(BLOCK[&quot;BLOCK&quot;] ^(ALT[&quot;ALT&quot;] atom EOA[&quot;EOA&quot;])  
</I>&gt;<i> EOB[&quot;EOB&quot;])
</I>&gt;<i>   |    -&gt; atom
</I>&gt;<i>   )
</I>&gt;<i> For example, if one runs ANTLRWorks using ANTLRv3.g (<A HREF="http://www.antlr.org/grammar/ANTLR/ANTLRv3.g">http://www.antlr.org/grammar/ANTLR/ANTLRv3.g</A> 
</I>&gt;<i> ) with the input:
</I>&gt;<i>
</I>&gt;<i> grammar test;
</I>&gt;<i>
</I>&gt;<i> a : 'A'
</I>&gt;<i>   | 'B' a?
</I>&gt;<i>   | 'C' a*
</I>&gt;<i>   | 'D' (a)?
</I>&gt;<i>   | 'F' (a)*
</I>&gt;<i>   ;
</I>&gt;<i>
</I>&gt;<i> then the AST constructed does not seem to have any nodes for '*' nor  
</I>&gt;<i> '?' in the 2nd and 3rd productions.  I can only guess that the rule  
</I>&gt;<i> should have been:
</I>&gt;<i>
</I>&gt;<i> elementNoOptionSpec :
</I>&gt;<i>  atom
</I>&gt;<i>   ( ebnfSuffix -&gt; ^( ebnfSuffix ^(BLOCK[&quot;BLOCK&quot;] ^(ALT[&quot;ALT&quot;] atom  
</I>&gt;<i> EOA[&quot;EOA&quot;]) EOB[&quot;EOB&quot;]))
</I>&gt;<i>   |    -&gt; atom
</I>&gt;<i>   )
</I>&gt;<i> Is this right?
</I>&gt;<i>
</I>&gt;<i> 3) Incidentally, when I debug the ANTLRv3.g grammar on ANTLRWorks  
</I>&gt;<i> v1.1.7, it seems to produce nice looking trees, but it also has one  
</I>&gt;<i> or more &quot;javax.swing.text.BadLocationException&quot; being raised.  Is  
</I>&gt;<i> there a more recent version of ANTLRWorks that I can build?  It  
</I>&gt;<i> doesn't look like the source is in Fisheye.  Where can I find it?
</I>&gt;<i>
</I>&gt;<i> Thanks.
</I>&gt;<i>
</I>&gt;<i> Ken Domino
</I>&gt;<i>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://www.antlr.org/pipermail/antlr-interest/attachments/20080311/6ef21397/attachment-0001.html">http://www.antlr.org/pipermail/antlr-interest/attachments/20080311/6ef21397/attachment-0001.html</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026985.html">[antlr-interest] Questions regarding ANTLRv3.g
</A></li>
	<LI>Next message: <A HREF="026988.html">[antlr-interest] lexer woes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27074">[ date ]</a>
              <a href="thread.html#27074">[ thread ]</a>
              <a href="subject.html#27074">[ subject ]</a>
              <a href="author.html#27074">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
