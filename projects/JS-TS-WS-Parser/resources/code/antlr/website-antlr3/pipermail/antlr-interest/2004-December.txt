From parrt at cs.usfca.edu  Mon Dec 20 16:08:54 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:08:54 2004
Subject: [Antlr-interest] blort
Message-ID: <20041221000854.1164974D00@nexus.cs.usfca.edu>

a test!!!
Ter
From H.A.M.Maassen at student.tue.nl  Wed Dec  1 01:48:12 2004
From: H.A.M.Maassen at student.tue.nl (Maassen, H.A.M.)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] Bug in ANTLR C# implementation
Message-ID: <1C5C690C06EFE244B83E3F133CA70BDE28586F@studentex6.campus.tue.nl>


Well I've found out why I couldn't get any tree-rewriting actions to work - it seems to be a bug in the C# version of the (generated) treeparser.
 
The treeparser's method initializeASTFactory is never called. After manually adding a call to initializeASTFactory(getASTFactory()) in the treeparser the problems have been fixed.
 
Regards, Harald Maassen


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ric.klaren at gmail.com  Wed Dec  1 02:07:57 2004
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] Bug in ANTLR C# implementation
In-Reply-To: <1C5C690C06EFE244B83E3F133CA70BDE28586F@studentex6.campus.tue.nl>
References: <1C5C690C06EFE244B83E3F133CA70BDE28586F@studentex6.campus.tue.nl>
Message-ID: <bc607a4e0412010207ea79316@mail.gmail.com>


Hi,

On Wed, 1 Dec 2004 10:48:12 +0100, Maassen, H.A.M.
<h.a.m.maassen@student.tue.nl> wrote:
> 
> Well I've found out why I couldn't get any tree-rewriting actions to work - it seems to be a bug in the C# version of the (generated) treeparser.
> 
> The treeparser's method initializeASTFactory is never called. After manually adding a call to initializeASTFactory(getASTFactory()) in the treeparser the problems have been fixed.

This is actually also default practice in C++ mode. So not sure if
it's a bug, or a case of bad documentation. Furthermore it's not
always a simple matter which factory should be used, at least in C++
you have to make sure you share the factory over the various
treeparsers you have to prevent 'funny' behaviour..

Cheers,

Ric


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From open.zone at virgin.net  Wed Dec  1 02:11:06 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] Re: Bug in ANTLR C# implementation
In-Reply-To: <1C5C690C06EFE244B83E3F133CA70BDE28586F@studentex6.campus.tue.nl>
Message-ID: <cok5bq+tj0p@eGroups.com>



--- In antlr-interest@yahoogroups.com, "Maassen, H.A.M."
<H.A.M.Maassen@s...> wrote:
> Well I've found out why I couldn't get any tree-rewriting actions to
work - it seems to be a bug in the C# version of the (generated)
treeparser.
>  
> The treeparser's method initializeASTFactory is never called. After
manually adding a call to initializeASTFactory(getASTFactory()) in the
treeparser the problems have been fixed.

Hi Harald,

I was just about to copy your previously posted grammar to see if I
could reproduce your issues with buildAST. Never mind, seems you've
fixed it in any case.

The behaviour you describe (i.e. tree parsers being created with a
default ASTFactory) is by design. Users are supposed to use the static
method named initializeASTFactory() - or similar, it's on the
generated Parsers - to ensure their tree parser's ASTFactory is in
sync with the Parser's.

I may be wrong but, I thought this was uniform behaviour across all
the codegens(?).

Cheers,

Micheal
ANTLR/C#






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From H.A.M.Maassen at student.tue.nl  Wed Dec  1 02:37:56 2004
From: H.A.M.Maassen at student.tue.nl (Maassen, H.A.M.)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] Re: Bug in ANTLR C# implementation
Message-ID: <1C5C690C06EFE244B83E3F133CA70BDE285870@studentex6.campus.tue.nl>

The Java generated treeparser doesn't seem to have an initializeASTFactory method.
 
Since I'm running initializeASTFactory on the treeparser's own getASTFactory, there isn't much synching being done (by me, anyway). And all it does is set the factory's maximum anyway!
 

	-----Original Message----- 
	From: micheal_jor [mailto:open.zone@virgin.net] 
	Sent: Wed 12/1/2004 11:11 AM 
	To: antlr-interest@yahoogroups.com 
	Cc: 
	Subject: [antlr-interest] Re: Bug in ANTLR C# implementation
	
	



	--- In antlr-interest@yahoogroups.com, "Maassen, H.A.M."
	<H.A.M.Maassen@s...> wrote:
	> Well I've found out why I couldn't get any tree-rewriting actions to
	work - it seems to be a bug in the C# version of the (generated)
	treeparser.
	> 
	> The treeparser's method initializeASTFactory is never called. After
	manually adding a call to initializeASTFactory(getASTFactory()) in the
	treeparser the problems have been fixed.
	
	Hi Harald,
	
	I was just about to copy your previously posted grammar to see if I
	could reproduce your issues with buildAST. Never mind, seems you've
	fixed it in any case.
	
	The behaviour you describe (i.e. tree parsers being created with a
	default ASTFactory) is by design. Users are supposed to use the static
	method named initializeASTFactory() - or similar, it's on the
	generated Parsers - to ensure their tree parser's ASTFactory is in
	sync with the Parser's.
	
	I may be wrong but, I thought this was uniform behaviour across all
	the codegens(?).
	
	Cheers,
	
	Micheal
	ANTLR/C#
	
	
	
	
	
	
	
	Yahoo! Groups Links
	
	
	
	
	
	
	
	



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 5566 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20041201/4dd148dc/attachment.bin
From open.zone at virgin.net  Wed Dec  1 03:06:45 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] Re: Bug in ANTLR C# implementation
In-Reply-To: <1C5C690C06EFE244B83E3F133CA70BDE285870@studentex6.campus.tue.nl>
Message-ID: <cok8k5+mh45@eGroups.com>



--- In antlr-interest@yahoogroups.com, "Maassen, H.A.M."
<H.A.M.Maassen@s...> wrote:
> The Java generated treeparser doesn't seem to have an
initializeASTFactory method.

Interesting. But the tree parsers must be initialized in the same way
off a parser right?.

On second thought, perhaps you are suggesting that the method should
be removed from C# tree parsers too?.

> Since I'm running initializeASTFactory on the treeparser's own
getASTFactory, there isn't much synching being done (by me, anyway).
And all it does is set the factory's maximum anyway!

If you use hetero-ASTs, the initialization would do rather more ;-)

Micheal
ANTLR/C-#






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ric.klaren at gmail.com  Wed Dec  1 03:43:11 2004
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] C++ Grammar for .Net VC++ 7.1
In-Reply-To: <cog2hh+fcki@eGroups.com>
References: <cog2hh+fcki@eGroups.com>
Message-ID: <bc607a4e0412010343434cae0b@mail.gmail.com>


On Mon, 29 Nov 2004 20:58:25 -0000, jimmyatwork1 <jimmyatwork1@yahoo.com> wrote:
> Does any know of a ported version of David Wigg's C++ grammar (3.0
> grammer first published in July 2004) that works under Visual C++ 7.1
> (or 7.0) for .Net?

Doesn't it work out of the box? Thought it was developed in VC6, so I
guess it should plain work in vc7.1 maybe with some small tweaks.

Cheers,

Ric


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ric.klaren at gmail.com  Wed Dec  1 03:39:22 2004
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] Re: Bug in ANTLR C# implementation
In-Reply-To: <cok8k5+mh45@eGroups.com>
References: <1C5C690C06EFE244B83E3F133CA70BDE285870@studentex6.campus.tue.nl>
	 <cok8k5+mh45@eGroups.com>
Message-ID: <bc607a4e0412010339453f67a5@mail.gmail.com>


On Wed, 01 Dec 2004 11:06:45 -0000, micheal_jor <open.zone@virgin.net> wrote:
> --- In antlr-interest@yahoogroups.com, "Maassen, H.A.M."
> <H.A.M.Maassen@s...> wrote:
> > The Java generated treeparser doesn't seem to have an
> initializeASTFactory method.
> 
> Interesting. But the tree parsers must be initialized in the same way
> off a parser right?.

I think Ter did something different for java, at least the naming is
different. Anycase one really needs this (or something similar) if you
have a complex set of tree rewriters that use heterogeneous AST's. The
moment you use factories that are out of sync in some way then you get
trouble.

Cheers,

Ric


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From H.A.M.Maassen at student.tue.nl  Wed Dec  1 04:05:51 2004
From: H.A.M.Maassen at student.tue.nl (Maassen, H.A.M.)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] Re: Bug in ANTLR C# implementation
Message-ID: <1C5C690C06EFE244B83E3F133CA70BDE285871@studentex6.campus.tue.nl>

> Interesting. But the tree parsers must be initialized in the same way
> off a parser right?.
> On second thought, perhaps you are suggesting that the method should
> be removed from C# tree parsers too?.

>>From the online manual:

            CalcLexer lexer =
                new CalcLexer(new DataInputStream(System.in));
            CalcParser parser = new CalcParser(lexer);
            parser.expr();
            CommonAST t = (CommonAST)parser.getAST();
            CalcTreeWalker walker = new CalcTreeWalker();
            walker.expr(t);

To get this to work in C# (assuming that the CalcTreeWalker does tree-reformatting) I'd have to change it to:

            CalcLexer lexer =
                new CalcLexer(new DataInputStream(System.in));
            CalcParser parser = new CalcParser(lexer);
            parser.expr();
            CommonAST t = (CommonAST)parser.getAST();
            CalcTreeWalker walker = new CalcTreeWalker();

            CalcTreeWalker.initializeASTFactory(walker.getASTFactory());

            walker.expr(t);

That extra line feels kind of random to me :) Seems like it should just be done automatically in the constructor. Without a manual call, the procedure is never run.


static public void initializeASTFactory( ASTFactory factory )
{
factory.setMaxNodeType(163);   // 163 is generated by ANTLR
}

Regards, Harald Maassen



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 5574 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20041201/42e47129/attachment.bin
From open.zone at virgin.net  Wed Dec  1 05:26:31 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] Re: Bug in ANTLR C# implementation
In-Reply-To: <1C5C690C06EFE244B83E3F133CA70BDE285871@studentex6.campus.tue.nl>
Message-ID: <cokgq7+ldgu@eGroups.com>



--- In antlr-interest@yahoogroups.com, "Maassen, H.A.M."
<H.A.M.Maassen@s...> wrote:
> > Interesting. But the tree parsers must be initialized in the same way
> > off a parser right?.
> > On second thought, perhaps you are suggesting that the method should
> > be removed from C# tree parsers too?.
> 
> From the online manual:

<SNIP>

> To get this to work in C# (assuming that the CalcTreeWalker does
tree-reformatting) I'd have to change it to:
>   CalcTreeWalker.initializeASTFactory(walker.getASTFactory());

> That extra line feels kind of random to me :) Seems like it should
just be done automatically in the constructor. Without a manual call,
the procedure is never run.

Sounds like the documentation needs fixing. I can already see messages
like "Bug in ANTLR/C#: TreeParser ignores heterogeneous AST
directives" if the default behaviour is changed to silently create
CommonAST instances.

Cheers,

Micheal
ANTLR/C-#






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From H.A.M.Maassen at student.tue.nl  Wed Dec  1 05:44:58 2004
From: H.A.M.Maassen at student.tue.nl (Maassen, H.A.M.)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] Re: Bug in ANTLR C# implementation
Message-ID: <1C5C690C06EFE244B83E3F133CA70BDE285873@studentex6.campus.tue.nl>

I haven't tried working with hetero-trees yet, how is this function related to those? Where are the commonAST instances created?
 
-----Original Message----- 
From: micheal_jor [mailto:open.zone@virgin.net] 
Sent: Wed 12/1/2004 2:26 PM 
To: antlr-interest@yahoogroups.com 
Cc: 
Subject: [antlr-interest] Re: Bug in ANTLR C# implementation





	--- In antlr-interest@yahoogroups.com, "Maassen, H.A.M."
	<H.A.M.Maassen@s...> wrote:
	> > Interesting. But the tree parsers must be initialized in the same way
	> > off a parser right?.
	> > On second thought, perhaps you are suggesting that the method should
	> > be removed from C# tree parsers too?.
	>
	> From the online manual:
	
	<SNIP>
	
	> To get this to work in C# (assuming that the CalcTreeWalker does
	tree-reformatting) I'd have to change it to:
	>   CalcTreeWalker.initializeASTFactory(walker.getASTFactory());
	
	> That extra line feels kind of random to me :) Seems like it should
	just be done automatically in the constructor. Without a manual call,
	the procedure is never run.
	
	Sounds like the documentation needs fixing. I can already see messages
	like "Bug in ANTLR/C#: TreeParser ignores heterogeneous AST
	directives" if the default behaviour is changed to silently create
	CommonAST instances.
	
	Cheers,
	
	Micheal
	ANTLR/C-#
	
	
	
	
	
	
	
	Yahoo! Groups Links
	
	
	
	
	
	
	
	



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 5314 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20041201/d8cf62c6/attachment.bin
From ewbank at synopsys.com  Wed Dec  1 06:39:05 2004
From: ewbank at synopsys.com (Bryan Ewbank)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] Bug in ANTLR C# implementation
In-Reply-To: <bc607a4e0412010207ea79316@mail.gmail.com>
Message-ID: <200412011437.JAA11169@us54.synopsys.com>


> Furthermore it's not always a simple matter which factory 
> should be used, at least in C++ you have to make sure you 
> share the factory over the various treeparsers you have to 
> prevent 'funny' behaviour..

My "solution" to this (I use a homogeneous AST) is to create a constructor
(target is C++) that accepts a Parser as an argument:
     /**
      * make this tree parser use the same ASTFactory as the given parser
      */
     SymScan(antlr::LLkParser& parentParser) : antlr::TreeParser()
     {
        antlr::ASTFactory *p_factory = parentParser.getASTFactory();
	  initializeASTFactory(*p_factory);
	  setASTFactory(p_factory);
     }

This way I avoid the excess code in the client, and all TreeParsers use the
same factory.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pauljlucas at mac.com  Wed Dec  1 18:06:46 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] Building trees with the correct associativity
Message-ID: <Pine.LNX.4.44.0412011800490.13608-100000@g4.pauljlucas.org>


	I'm surprised it took me this long to notice I had a problem
	with this, but...

	If I have:

		addExpr
		    : e1:mulExpr
		      (ao:addOp! e2:mulExpr!
		      	{
			    ## = #([ADD_EXPR,"ADD_EXPR"], ao, e1, e2);
			}
		      )*
		    ;

	then my trees get built the wrong way, e.g.:

		5 - 2 + 3

	is as if it were:

		5 - (2 + 3)

	which is wrong.  Maybe I'm being a but slow, but it's not
	immediately clear how to build the tree the other way, i.e.:

		(5 - 2) + 3

	Help.

	- Paul



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-rGULN798W23glDnYoZiyJWw at yahoogroups.com  Wed Dec  1 18:07:43 2004
From: antlr-interest-accept-rGULN798W23glDnYoZiyJWw at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:41 2004
Subject: MODERATE -- kevinwittme7@hotmail.com posted to antlr-interest
Message-ID: <1101953263.320.2598.m4@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  kevinwittme7@hotmail.com 

The message summary:
--------------------
FROM: kevinwittme7@hotmail.com 
DATE: Thu, 02 Dec 2004 02:07:18 -0000 
SUBJECT: HTML grammar 

Hello all, 

I was wondering if anyone knows of a HTML grammar for ANTLR 
that is freely available. I found one HTML grammar on ANTLR 
resource page and played around with it ( 
http://www.antlr.org/grammar/HTML ). Unfortunately, it has 
trouble on the HTML pages that I am parsing against. These 
pages are written rather poorly and I don't have any control
over how valid or well-formed the mark-up is. 

--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=392 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-rGULN798W23glDnYoZiyJWw@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "kevinwittme7" <kevinwittme7@hotmail.com>
Subject: HTML grammar
Date: Thu, 02 Dec 2004 02:07:18 -0000
Size: 1736
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041202/c0a4d8c6/attachment.mht
From parrt at cs.usfca.edu  Wed Dec  1 18:21:40 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] Building trees with the correct associativity
In-Reply-To: <Pine.LNX.4.44.0412011800490.13608-100000@g4.pauljlucas.org>
References: <Pine.LNX.4.44.0412011800490.13608-100000@g4.pauljlucas.org>
Message-ID: <E6CB5B03-4408-11D9-BB14-000A95891192@cs.usfca.edu>



On Dec 1, 2004, at 6:06 PM, Paul J. Lucas wrote:
> 	I'm surprised it took me this long to notice I had a problem
> 	with this, but...
>
> 	If I have:
>
> 		addExpr
> 		    : e1:mulExpr
> 		      (ao:addOp! e2:mulExpr!
> 		      	{
> 			    ## = #([ADD_EXPR,"ADD_EXPR"], ao, e1, e2);
> 			}
> 		      )*
> 		    ;

Hi Paul.

Does that loop actually work?  Setting ## to a new value should wack 
its old value, right?
Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pauljlucas at mac.com  Wed Dec  1 18:29:28 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] Building trees with the correct associativity
In-Reply-To: <E6CB5B03-4408-11D9-BB14-000A95891192@cs.usfca.edu>
Message-ID: <Pine.LNX.4.44.0412011827470.13608-100000@g4.pauljlucas.org>


On Wed, 1 Dec 2004, Terence Parr wrote:


> Does that loop actually work?

	Nope.  (D'oh!)

> Setting ## to a new value should wack its old value, right?

	Right.  In copying from my grammar to an e-mail message, I
	goofed.  That should read:

 		addExpr
 		    : e1:mulExpr
 		      (ao:addOp! e2:addExpr!
 		      	{
 			    ## = #([ADD_EXPR,"ADD_EXPR"], ao, e1, e2);
 			}
 		      )*
 		    ;

	However, the same problem still exists.  Help!

	- Paul



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Wed Dec  1 18:34:50 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] Re: Building trees with the correct associativity
In-Reply-To: <Pine.LNX.4.44.0412011800490.13608-100000@g4.pauljlucas.org>
Message-ID: <colv0a+l5uh@eGroups.com>



Paul--

What you want is something on the order of

addExpr:
    :
    mulExpr (addOp mulExpr)*
    ;

or

addExpr
    :
    mulExpr (addOp addExpr)*
    ;

What happens with your grammar is that 2+3 is recognized in e2 as an
addExpr within a mulExpr.

--Loring


--- In antlr-interest@yahoogroups.com, "Paul J. Lucas"
<pauljlucas@m...> wrote:
> 	I'm surprised it took me this long to notice I had a problem
> 	with this, but...
> 
> 	If I have:
> 
> 		addExpr
> 		    : e1:mulExpr
> 		      (ao:addOp! e2:mulExpr!
> 		      	{
> 			    ## = #([ADD_EXPR,"ADD_EXPR"], ao, e1, e2);
> 			}
> 		      )*
> 		    ;
> 
> 	then my trees get built the wrong way, e.g.:
> 
> 		5 - 2 + 3
> 
> 	is as if it were:
> 
> 		5 - (2 + 3)
> 
> 	which is wrong.  Maybe I'm being a but slow, but it's not
> 	immediately clear how to build the tree the other way, i.e.:
> 
> 		(5 - 2) + 3
> 
> 	Help.
> 
> 	- Paul





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pauljlucas at mac.com  Wed Dec  1 18:45:29 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] Re: Building trees with the correct associativity
In-Reply-To: <colv0a+l5uh@eGroups.com>
Message-ID: <Pine.LNX.4.44.0412011841480.13608-100000@g4.pauljlucas.org>


On Thu, 2 Dec 2004, lgcraymer wrote:

> addExpr:
>     :
>     mulExpr (addOp mulExpr)*
>     ;

	This elides the tree-building code, a la:

		## = #([ADD_EXPR,"ADD_EXPR", ao, e1 e2);

	If I add that in inside the ()*, the ## gets its value
	overwritten (as Terence noted and I subsequently corrected).

> addExpr
>     :
>     mulExpr (addOp addExpr)*
>     ;

	This is what I actually have now (as I corrected myself in a
	previous e-mail).  This doesn't work.

	I want an ADD_EXPR to be present in the tree only if an
	expression actually contains an addOp thus prodicing "compact"
	trees without lots of useless intervening nodes.

	- Paul



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Wed Dec  1 18:53:26 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] Re: Building trees with the correct associativity
In-Reply-To: <Pine.LNX.4.44.0412011841480.13608-100000@g4.pauljlucas.org>
Message-ID: <com036+470c@eGroups.com>



Sorry--

I miswrote the second case which should have been

addExpr
    :
    mulExpr  (addOp addExpr)?
    ;

and you can do the rewrite within the ()?.

Out of curiosity, why are you avoiding the more compact

addExpr
    :
    mulExpr (addOp^ mulExpr)*
    ;

The binary trees avoid inserting the extra node.

--Loring


--- In antlr-interest@yahoogroups.com, "Paul J. Lucas"
<pauljlucas@m...> wrote:
> On Thu, 2 Dec 2004, lgcraymer wrote:
> 
> > addExpr:
> >     :
> >     mulExpr (addOp mulExpr)*
> >     ;
> 
> 	This elides the tree-building code, a la:
> 
> 		## = #([ADD_EXPR,"ADD_EXPR", ao, e1 e2);
> 
> 	If I add that in inside the ()*, the ## gets its value
> 	overwritten (as Terence noted and I subsequently corrected).
> 
> > addExpr
> >     :
> >     mulExpr (addOp addExpr)*
> >     ;
> 
> 	This is what I actually have now (as I corrected myself in a
> 	previous e-mail).  This doesn't work.
> 
> 	I want an ADD_EXPR to be present in the tree only if an
> 	expression actually contains an addOp thus prodicing "compact"
> 	trees without lots of useless intervening nodes.
> 
> 	- Paul





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pauljlucas at mac.com  Wed Dec  1 19:00:40 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] Re: Building trees with the correct associativity
In-Reply-To: <com036+470c@eGroups.com>
Message-ID: <Pine.LNX.4.44.0412011855590.13608-100000@g4.pauljlucas.org>


On Thu, 2 Dec 2004, lgcraymer wrote:

> I miswrote the second case which should have been
> 
> addExpr
>     :
>     mulExpr  (addOp addExpr)?
>     ;
> 
> and you can do the rewrite within the ()?.

	That still doesn't work: the tree is still right-associative,
	i.e., 5 - 2 + 3 equals 0 instead of 6.

> Out of curiosity, why are you avoiding the more compact
> 
> addExpr
>     :
>     mulExpr (addOp^ mulExpr)*
>     ;
> 
> The binary trees avoid inserting the extra node.

	Because that's illegal syntax in ANTLR 2.7.x.  addOp is not a
	token.  But this is orthoganal to the problem at hand.

	- Paul



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Wed Dec  1 19:53:46 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] Re: Building trees with the correct associativity
In-Reply-To: <Pine.LNX.4.44.0412011855590.13608-100000@g4.pauljlucas.org>
Message-ID: <com3ka+b2qn@eGroups.com>



--- In antlr-interest@yahoogroups.com, "Paul J. Lucas"
<pauljlucas@m...> wrote:
> On Thu, 2 Dec 2004, lgcraymer wrote:
> 
> > I miswrote the second case which should have been
> > 
> > addExpr
> >     :
> >     mulExpr  (addOp addExpr)?
> >     ;
> > 
> > and you can do the rewrite within the ()?.
> 
> 	That still doesn't work: the tree is still right-associative,
> 	i.e., 5 - 2 + 3 equals 0 instead of 6.
> 
> > Out of curiosity, why are you avoiding the more compact
> > 
> > addExpr
> >     :
> >     mulExpr (addOp^ mulExpr)*
> >     ;
> > 
> > The binary trees avoid inserting the extra node.
> 
> 	Because that's illegal syntax in ANTLR 2.7.x.  addOp is not a

Well, yeah, which is why (PLUS | MINUS) and (MUL | DIV) get sprinkled
through expression grammars.

> 	token.  But this is orthoganal to the problem at hand.

I'm not at all sure of that.  I think that the observation that the
normal tree construction here (via ^ annotation) is left associative.
 That's not an obvious point.

--Loring

> 	- Paul





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pauljlucas at mac.com  Wed Dec  1 20:08:51 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] Re: Building trees with the correct associativity
In-Reply-To: <com3ka+b2qn@eGroups.com>
Message-ID: <Pine.LNX.4.44.0412011957440.13608-100000@g4.pauljlucas.org>


On Thu, 2 Dec 2004, lgcraymer wrote:

> I'm not at all sure of that.  I think that the observation that the
> normal tree construction here (via ^ annotation) is left associative.
> That's not an obvious point.

	Ignoring for the moment whether that's true, the reason I'm
	doing what I'm doing is because if I do ^, then, in my
	treeparser, I need two seperate yet almost identicle rules to
	handle PLUS and MINUS, i.e.:

		plusExpr: #( PLUS e1=expr e2=expr ) ;

		minusExpr: #( MINUS e1=expr e2=expr ) ;

	If I do a setType() in the parser, then which operator was used
	is lost.  Hence, I have one ADD_EXPR that contains a child node
	that is the actual operator.

	Now, back to the problem at hand....

	OK, I just tried it and -- you're right!  :-O  You're also right
	about it not being an obvious point.  OK, I suppose I could
	have yet another level in the tree by allowing PLUS or MINUS to
	be a local root.

	Is there any way to get left-associativity when not using ^ and
	constructing the tree yourself?

	- Paul



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Wed Dec  1 20:52:34 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] Re: Building trees with the correct associativity
In-Reply-To: <Pine.LNX.4.44.0412011957440.13608-100000@g4.pauljlucas.org>
Message-ID: <com72i+2gej@eGroups.com>



--- In antlr-interest@yahoogroups.com, "Paul J. Lucas"
<pauljlucas@m...> wrote:
> On Thu, 2 Dec 2004, lgcraymer wrote:
> 
> > I'm not at all sure of that.  I think that the observation that the
> > normal tree construction here (via ^ annotation) is left associative.
> > That's not an obvious point.
> 
> 	Ignoring for the moment whether that's true, the reason I'm
> 	doing what I'm doing is because if I do ^, then, in my
> 	treeparser, I need two seperate yet almost identicle rules to
> 	handle PLUS and MINUS, i.e.:
> 
> 		plusExpr: #( PLUS e1=expr e2=expr ) ;
> 
> 		minusExpr: #( MINUS e1=expr e2=expr ) ;

Actually, I'd do these as subrules:

addExpr
    :
    #( PLUS expr expr )
    |   #(MINUS expr expr )
    ;

But it is hard to avoid having the alternatives since they need to
generate different action code.  Well, I suppose that you could negate
the second expr and use only PLUS, but that isn't really useful.

> 	If I do a setType() in the parser, then which operator was used
> 	is lost.  Hence, I have one ADD_EXPR that contains a child node
> 	that is the actual operator.
> 
> 	Now, back to the problem at hand....
> 
> 	OK, I just tried it and -- you're right!  :-O  You're also right
> 	about it not being an obvious point.  OK, I suppose I could
> 	have yet another level in the tree by allowing PLUS or MINUS to
> 	be a local root.
> 
> 	Is there any way to get left-associativity when not using ^ and
> 	constructing the tree yourself?

How about

addExpr
{ AST el = null; }
    :
    m1:mulExpr { el = m1 }
    (    a:addOp b:mulExpr
         { ## = #([ADD_EXPR,"ADD_EXPR", e1, a b); e1 = ##; }
    )

That is truly ugly--I really need to push on getting 2.8 out the door.

--Loring

> 	- Paul





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From kevinwittme7 at hotmail.com  Wed Dec  1 18:07:18 2004
From: kevinwittme7 at hotmail.com (kevinwittme7)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] HTML grammar
Message-ID: <coltcm+kot8@eGroups.com>




Hello all,

I was wondering if anyone knows of a HTML grammar for ANTLR that is 
freely available.  I found one HTML grammar on ANTLR resource page 
and played around with it ( http://www.antlr.org/grammar/HTML ). 
Unfortunately, it has trouble on the HTML pages that I am parsing 
against. These pages are written rather poorly and I don't have any 
control over how valid or well-formed the mark-up is.

If anyone knows of HTML grammars for ANTLR (again, other than what 
is listed as part of ANTLR resources), please let me/us know.

Thanks!

Kevin in Chicago









 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From monty at codetransform.com  Thu Dec  2 00:43:19 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] Re: Building trees with the correct associativity
In-Reply-To: <Pine.LNX.4.44.0412011855590.13608-100000@g4.pauljlucas.org>
References: <Pine.LNX.4.44.0412011855590.13608-100000@g4.pauljlucas.org>
Message-ID: <37752380-443E-11D9-B790-000393B5606C@codetransform.com>


On Dec 1, 2004, at 7:00 PM, Paul J. Lucas wrote:

>> Out of curiosity, why are you avoiding the more compact
>>
>> addExpr
>>     :
>>     mulExpr (addOp^ mulExpr)*
>>     ;
>>
>> The binary trees avoid inserting the extra node.
>
> 	Because that's illegal syntax in ANTLR 2.7.x.  addOp is not a
> 	token.  But this is orthoganal to the problem at hand.
>

Well, at least that one is easy:

addExpr
	:
	mulExpr ( (PLUS^ | MINUS^) mulExpr)*
	;

Monty



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pauljlucas at mac.com  Thu Dec  2 01:00:51 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] Re: Building trees with the correct associativity
In-Reply-To: <37752380-443E-11D9-B790-000393B5606C@codetransform.com>
Message-ID: <Pine.LNX.4.44.0412020059000.13608-100000@g4.pauljlucas.org>


On Thu, 2 Dec 2004, Monty Zukowski wrote:

> Well, at least that one is easy:
> 
> addExpr
> 	:
> 	mulExpr ( (PLUS^ | MINUS^) mulExpr)*
> 	;

	Yes, but I originally wanted to avoid trees like:

		ADD_EXPR
		   |
		   +
		   |
		   3--4

	i.e., two levels of depth and instead have:

		ADD_EXPR
		   |
		   +--3--4

	But I've given up so I can get left-associativity easily.

	- Paul



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From H.A.M.Maassen at student.tue.nl  Thu Dec  2 01:44:16 2004
From: H.A.M.Maassen at student.tue.nl (Maassen, H.A.M.)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] Re: Building trees with the correct associativity
Message-ID: <1C5C690C06EFE244B83E3F133CA70BDE285877@studentex6.campus.tue.nl>

> addExpr
> { AST el = null; }
>     :
>     m1:mulExpr { el = m1 }
>     (    a:addOp b:mulExpr
>          { ## = #([ADD_EXPR,"ADD_EXPR", e1, a b); e1 = ##; }
>     )
>
> That is truly ugly--I really need to push on getting 2.8 out the door.
> 
> --Loring

What happens in 2.8?
 
- Harald, sharing the associativity problem


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 3958 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20041202/74f12ed9/attachment.bin
From jimmyatwork1 at yahoo.com  Thu Dec  2 06:19:09 2004
From: jimmyatwork1 at yahoo.com (jimmyatwork1)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] Re: C++ Grammar for .Net VC++ 7.1
In-Reply-To: <bc607a4e0412010343434cae0b@mail.gmail.com>
Message-ID: <con88t+abm0@eGroups.com>



VC6 is over 6 years old.  It predates the C++ standard.  7.0, and 7.1
even more, conform well to the ANSI/ISO standard.  The example code
distributed with David Wigg's 3.0 C++ grammar works with VC6, as
expected, but fails in 7.1.  I don't have results for a 7.0 build.

--- In antlr-interest@yahoogroups.com, Ric Klaren <ric.klaren@g...> wrote:
> On Mon, 29 Nov 2004 20:58:25 -0000, jimmyatwork1 <jimmyatwork1@y...>
wrote:
> > Does any know of a ported version of David Wigg's C++ grammar (3.0
> > grammer first published in July 2004) that works under Visual C++ 7.1
> > (or 7.0) for .Net?
> 
> Doesn't it work out of the box? Thought it was developed in VC6, so I
> guess it should plain work in vc7.1 maybe with some small tweaks.
> 
> Cheers,
> 
> Ric





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From anakreonmejdi at yahoo.gr  Thu Dec  2 13:28:08 2004
From: anakreonmejdi at yahoo.gr (Anakreon)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] HTML grammar
In-Reply-To: <coltcm+kot8@eGroups.com>
References: <coltcm+kot8@eGroups.com>
Message-ID: <41AF88E8.4040303@yahoo.gr>


kevinwittme7 wrote:
> 
> 
> Hello all,
> 
> I was wondering if anyone knows of a HTML grammar for ANTLR that is 
> freely available.  I found one HTML grammar on ANTLR resource page 
> and played around with it ( http://www.antlr.org/grammar/HTML ). 
> Unfortunately, it has trouble on the HTML pages that I am parsing 
> against. These pages are written rather poorly and I don't have any 
> control over how valid or well-formed the mark-up is.
> 
> If anyone knows of HTML grammars for ANTLR (again, other than what 
> is listed as part of ANTLR resources), please let me/us know.
> 
> Thanks!
> 
> Kevin in Chicago
You could use jtidy (http://jtidy.sourceforge.net/) which provides a DOM
interface.


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ric.klaren at gmail.com  Thu Dec  2 07:08:35 2004
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon Dec 20 16:17:41 2004
Subject: [antlr-interest] Re: C++ Grammar for .Net VC++ 7.1
In-Reply-To: <con88t+abm0@eGroups.com>
References: <bc607a4e0412010343434cae0b@mail.gmail.com>
	 <con88t+abm0@eGroups.com>
Message-ID: <bc607a4e04120207083f05a25d@mail.gmail.com>


On Thu, 02 Dec 2004 14:19:09 -0000, jimmyatwork1 <jimmyatwork1@yahoo.com> wrote:
> VC6 is over 6 years old.  It predates the C++ standard.  7.0, and 7.1
> even more, conform well to the ANSI/ISO standard.  The example code
> distributed with David Wigg's 3.0 C++ grammar works with VC6, as
> expected, but fails in 7.1.  I don't have results for a 7.0 build.

Fails as in doesn't compile? Or fails in the sense of strange
behaviour? A little while back I only had to do minor tweaking to get
it to run on gcc 3.4, which means it shouldn't be all that bad with
vc7.1. (although that was with the old version but even that should
not make that big a difference)

Cheers,

Ric


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From jimmyatwork1 at yahoo.com  Thu Dec  2 07:23:24 2004
From: jimmyatwork1 at yahoo.com (jimmyatwork1)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] Re: C++ Grammar for .Net VC++ 7.1
In-Reply-To: <bc607a4e04120207083f05a25d@mail.gmail.com>
Message-ID: <conc1c+1aal@eGroups.com>



I get a run-time error:
"Run-Time Check Failure #3 - The variable 's' is being used without
being defined." in the last line of CPPParser::scope_override() when
the function returns 's'.  

's' is defined as a char * at the beginning of the file.

hmm...

jim

--- In antlr-interest@yahoogroups.com, Ric Klaren <ric.klaren@g...> wrote:
> On Thu, 02 Dec 2004 14:19:09 -0000, jimmyatwork1 <jimmyatwork1@y...>
wrote:
> > VC6 is over 6 years old.  It predates the C++ standard.  7.0, and 7.1
> > even more, conform well to the ANSI/ISO standard.  The example code
> > distributed with David Wigg's 3.0 C++ grammar works with VC6, as
> > expected, but fails in 7.1.  I don't have results for a 7.0 build.
> 
> Fails as in doesn't compile? Or fails in the sense of strange
> behaviour? A little while back I only had to do minor tweaking to get
> it to run on gcc 3.4, which means it shouldn't be all that bad with
> vc7.1. (although that was with the old version but even that should
> not make that big a difference)
> 
> Cheers,
> 
> Ric





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From i.maier at gmx.de  Thu Dec  2 14:35:46 2004
From: i.maier at gmx.de (Ingo Maier)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] NoViableAltException in ()? rule
In-Reply-To: <41AF88E8.4040303@yahoo.gr>
References: <coltcm+kot8@eGroups.com>  <41AF88E8.4040303@yahoo.gr>
Message-ID: <1102026946.3456.21.camel@beeblebox>


Hi,

for a (x)? the generated code seems not only to check if an x comes
next, but also what can come after (or instead of) that x. If such a
token doesn't follow it throws a NoViableAltException.

For example in the java grammar:

tryBlock: "try"^ compoundStatement (handler)* (finallyClause)?;

If no finally clause comes next, it also checks for possibly following
tokens in the generated typeBlock() method:

switch ( LA(1)) {
  case LITERAL_finally:
  {
    ...
  }
  case FINAL:
  case ABSTRACT:
   ...
     break;


Why? Those following tokens have nothing to do with the rule tryBlock
itself, but only with the enclosing grammar, right?

As a consequence java snippets followed by some non-java text cannot be
parsed without an exception: 

try { /*...*/ } catch(Exception e) { /*...*/ } /* no finally clause */
here comes some text...

When I call tryBlock(), "here" is not expected because of the generated
switch block as pasted above. However, "here" should have nothing to do
with the tryBlock() rule.

Thanks in advance,
Ingo



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-PFcem9pNwaURHRHp0fBxz0A at yahoogroups.com  Thu Dec  2 09:38:20 2004
From: antlr-interest-accept-PFcem9pNwaURHRHp0fBxz0A at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:42 2004
Subject: MODERATE -- derek_kusiak@yahoo.com posted to antlr-interest
Message-ID: <1102009100.457.29097.m15@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  derek_kusiak@yahoo.com 

The message summary:
--------------------
FROM: derek_kusiak@yahoo.com 
DATE: Thu, 02 Dec 2004 17:37:41 -0000 
SUBJECT: Newbie question (not seeing expected error) 

Pardon the rather verbose post, but I'm sure the problem I'm
having is very basic as I'm new to both parsers and Antlr. 
Anyway, to learn Antlr I'm writing a simple parser to read a
graphics text-based file format containing simple shape 
descriptions. The most simple file might look like this: 

sphere 10 sphere 20 sphere 30 

where 10, 20, and 30 are the radii of each sphere to be 
drawn. My C++ parser, which I have simplified here, looks 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=393 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-PFcem9pNwaURHRHp0fBxz0A@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "derek_kusiak" <derek_kusiak@yahoo.com>
Subject: Newbie question (not seeing expected error)
Date: Thu, 02 Dec 2004 17:37:41 -0000
Size: 2953
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041202/630f0c97/attachment.mht
From parrt at cs.usfca.edu  Thu Dec  2 09:52:50 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] NoViableAltException in ()? rule
In-Reply-To: <1102026946.3456.21.camel@beeblebox>
References: <coltcm+kot8@eGroups.com>  <41AF88E8.4040303@yahoo.gr> <1102026946.3456.21.camel@beeblebox>
Message-ID: <FC0069B3-448A-11D9-BB14-000A95891192@cs.usfca.edu>



On Dec 2, 2004, at 2:35 PM, Ingo Maier wrote:

>
> Hi,
>
> for a (x)? the generated code seems not only to check if an x comes
> next, but also what can come after (or instead of) that x. If such a
>

Yes, because it tries to find errors as soon as possible.

> token doesn't follow it throws a NoViableAltException.
>
> For example in the java grammar:
>
> tryBlock: "try"^ compoundStatement (handler)* (finallyClause)?;
>
> If no finally clause comes next, it also checks for possibly following
> tokens in the generated typeBlock() method:
>
> switch ( LA(1)) {
>   case LITERAL_finally:
>   {
>     ...
>   }
>   case FINAL:
>   case ABSTRACT:
>    ...
>      break;
>
>
> Why? Those following tokens have nothing to do with the rule tryBlock
> itself, but only with the enclosing grammar, right?

Yes, but it is fine to check that lookahead, right?

> As a consequence java snippets followed by some non-java text cannot be
> parsed without an exception:
>
> try { /*...*/ } catch(Exception e) { /*...*/ } /* no finally clause */
> here comes some text...
>
> When I call tryBlock(), "here" is not expected because of the generated
> switch block as pasted above. However, "here" should have nothing to do
> with the tryBlock() rule.

Well, you get an error because that text is not part of the grammar and 
ANTLR wants you to know. ;)

You are actually asking a different question, which is "how do I handle 
island grammars in ANTLR?"  Meaning that you want ANTLR to only match a 
part of the text.  Given input:

> try { /*...*/ } catch(Exception e) { /*...*/ } /* no finally clause */
> here comes some text...

I think you'll be hard pressed even by hand to figure out when Java is 
not coming next.  For example, here's a valid definition:

here comes;

depending on the type definitions.  You need a sentinel like JSP has or 
other island grammars to indicate what is what.

:)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From derek_kusiak at yahoo.com  Thu Dec  2 09:37:41 2004
From: derek_kusiak at yahoo.com (derek_kusiak)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] Newbie question (not seeing expected error)
Message-ID: <conjt5+b39o@eGroups.com>




Pardon the rather verbose post, but I'm sure the problem I'm having is
very basic as I'm new to both parsers and Antlr.  Anyway, to learn
Antlr I'm writing a simple parser to read a graphics text-based file
format containing simple shape descriptions.  The most simple file
might look like this:

  sphere 10
  sphere 20
  sphere 30

where 10, 20, and 30 are the radii of each sphere to be drawn.  My C++
parser, which I have simplified here, looks like this:

  class P extends Parser;
  start  : (shape)+ ;
  shape  : sphere ;
  sphere : SPHERE NUMBER { cout << ... } ;

and my lexer looks like this:

  class L extends Lexer;
  NUMBER : ('0'..'9')+ ;
  SPHERE : "sphere" ;

This all works as expected and generates understandable error message
when there is an error in the input, but not in all cases.  Let me
illustrate with a few examples.  If my input is this:

  sphere 10

I get the following (correct) output from my output statement in the
parser:

  Sphere(radius=10)

If I swap the parameters and make my input

  10 sphere

I get a sensible error (via caught exception):

  line 1:1: unexpected token: 10

Now if I add a second sphere (or any number of valid spheres for that
matter):

  sphere 10
  sphere 20

I again get the output I expect:

  Sphere(radius=10)
  Sphere(radius=20) 

So far so good.  However, I don't get the expected error if my mistake
is in the SECOND sphere:

  sphere 10
  20 sphere

Now the first statement is parsed correctly, but there is no error on
the second one.  It's just silently ignored and my ouput is this:

  Sphere(radius=10)

Why is there no error about the second sphere?  Clearly the "20
sphere" line is wrong, so why does my parser bail silently after the
error?

Thanks for any help.

Derek 








 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From arnarb at oddi.is  Thu Dec  2 10:00:55 2004
From: arnarb at oddi.is (Arnar Birgisson)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] Newbie question (not seeing expected
	error)
Message-ID: <s1af5868.038@emil.oddi.is>


Hello Derek,

> So far so good.  However, I don't get the expected error if my
mistake
> is in the SECOND sphere:
> 
>   sphere 10
>   20 sphere
> 
> Now the first statement is parsed correctly, but there is no error
on
> the second one.  It's just silently ignored and my ouput is this:
> 
>   Sphere(radius=10)
> 
> Why is there no error about the second sphere?  Clearly the "20
> sphere" line is wrong, so why does my parser bail silently after the
> error?

After parsing the first line, the parser is at the end of your start
rule. From there, it doesn't expect to see NUMBER (20) so it assumes
that it's done parsing and the rest of the input is just some garbage
(which is sometimes allowed in language definitions). This is normal
behaviour when you are at the end of the start-rule, I think.

If you want to parse the whole file, you need to add the token EOF
(end-of-file) to the end of your start rule:

  class P extends Parser;
  start  : (shape)+ EOF;

Given the above example you should get an error in the lines of
"Unexpected token NUMBER, expecting SPHERE or EOF."

Hope this helps. :o)

Arnar


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-cdL8ptu5O_ldQHEWYv4ulqQ at yahoogroups.com  Thu Dec  2 11:14:05 2004
From: antlr-interest-accept-cdL8ptu5O_ldQHEWYv4ulqQ at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:42 2004
Subject: MODERATE -- derek_kusiak@yahoo.com posted to antlr-interest
Message-ID: <1102014845.335.79297.m22@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  derek_kusiak@yahoo.com 

The message summary:
--------------------
FROM: derek_kusiak@yahoo.com 
DATE: Thu, 02 Dec 2004 19:13:30 -0000 
SUBJECT: Re: Newbie question (not seeing expected error) 

Thank you very much, Arnar. So simple I'm embarrassed. :) 

--- "Arnar Birgisson" <arnarb@o...> wrote: > Hello Derek, > 

> > So far so good. However, I don't get the expected error 

> > if my mistake is in the SECOND sphere: > > > > sphere 10

> > 20 sphere > > > > Now the first statement is parsed 
correctly, but there is > > no error on the second one. It's
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=394 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-cdL8ptu5O_ldQHEWYv4ulqQ@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "derek_kusiak" <derek_kusiak@yahoo.com>
Subject: Re: Newbie question (not seeing expected error)
Date: Thu, 02 Dec 2004 19:13:30 -0000
Size: 2539
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041202/8ee39760/attachment.mht
From ewbank at synopsys.com  Thu Dec  2 11:25:19 2004
From: ewbank at synopsys.com (Bryan Ewbank)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] These tokens ... and nothing else
Message-ID: <200412021923.OAA18470@us54.synopsys.com>


Is there some way in ANTLR to prevent a parser/treeparser from defining more
tokens?

I ask because I got bit by a typo in a base grammar ("-glib foo.g" is
great!) that silently generated another token rather than being rejected -
it was only much later I realized that there was a disconnect.

Thanks,
- Bryan



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From i.maier at gmx.de  Thu Dec  2 17:52:24 2004
From: i.maier at gmx.de (Ingo Maier)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] NoViableAltException in ()? rule
In-Reply-To: <FC0069B3-448A-11D9-BB14-000A95891192@cs.usfca.edu>
References: <coltcm+kot8@eGroups.com>  <41AF88E8.4040303@yahoo.gr>
	 <1102026946.3456.21.camel@beeblebox>
	 <FC0069B3-448A-11D9-BB14-000A95891192@cs.usfca.edu>
Message-ID: <1102038744.1934.20.camel@beeblebox>


On Thu, 2004-12-02 at 12:52, Terence Parr wrote:
> On Dec 2, 2004, at 2:35 PM, Ingo Maier wrote:
> 
> >
> > Hi,
> >
> > for a (x)? the generated code seems not only to check if an x comes
> > next, but also what can come after (or instead of) that x. If such a
> >
> 
> Yes, because it tries to find errors as soon as possible.

Well, I don't get the point. Is it finding it earlier? E.g. when
tryBlock() below gets called in some other rules context, then the
following method will complain. Does it matter if the end of tryBlock()
or the beginning of the following method complain? 

> 
> > token doesn't follow it throws a NoViableAltException.
> >
> > For example in the java grammar:
> >
> > tryBlock: "try"^ compoundStatement (handler)* (finallyClause)?;
> >
> > If no finally clause comes next, it also checks for possibly following
> > tokens in the generated typeBlock() method:
> >
> > switch ( LA(1)) {
> >   case LITERAL_finally:
> >   {
> >     ...
> >   }
> >   case FINAL:
> >   case ABSTRACT:
> >    ...
> >      break;
> >
> >
> > Why? Those following tokens have nothing to do with the rule tryBlock
> > itself, but only with the enclosing grammar, right?
> 
> Yes, but it is fine to check that lookahead, right?
> 
> > As a consequence java snippets followed by some non-java text cannot be
> > parsed without an exception:
> >
> > try { /*...*/ } catch(Exception e) { /*...*/ } /* no finally clause */
> > here comes some text...
> >
> > When I call tryBlock(), "here" is not expected because of the generated
> > switch block as pasted above. However, "here" should have nothing to do
> > with the tryBlock() rule.
> 
> Well, you get an error because that text is not part of the grammar and 
> ANTLR wants you to know. ;)
> 
> You are actually asking a different question, which is "how do I handle 
> island grammars in ANTLR?"  Meaning that you want ANTLR to only match a 
> part of the text.  

Yes, that is my intention. But my question above remains... :)

> Given input:
> 
> > try { /*...*/ } catch(Exception e) { /*...*/ } /* no finally clause */
> > here comes some text...
> 
> I think you'll be hard pressed even by hand to figure out when Java is 
> not coming next.  For example, here's a valid definition:
> 
> here comes;
> 
> depending on the type definitions.  You need a sentinel like JSP has or 
> other island grammars to indicate what is what.

Yes, I am totally aware of that. We are quite restrictive what part of a
grammar may be embedded and where. E.g. wrapping Java statements into [
and ] should be (relatively) save. However, a try/catch without a
finally block wrapped into [ ] will throw an Exception at ]. Maybe we
can fiddle it out in some way whether it was an exception because of a
malformed Java statement or because of a "()?" construct. But that would
be no fun :) and currently I don't really see how.

Regards,
Ingo



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pauljlucas at mac.com  Thu Dec  2 12:01:09 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] Error recovery contortion
Message-ID: <Pine.LNX.4.44.0412021057260.13608-100000@g4.pauljlucas.org>


	So my problem is that I want to do error recovery.  (I've
	posted some things about this before.)

	Some background: the language I'm parsing is XQuery
	<http://www.w3.org/TR/xquery/> that, among other annoyances, is
	keyword-free.  This makes recovery much harder because the lexer
	is stateful.

	As a first pass, I want to recover from syntax errors inside
	function declarations only.  I can't simply use ANTLR's default
	error-recovery mechanism because I have to sync to a known
	token and reset the lexer's state.  (ANTLR's default mechanism
	sync to one of the tokens in the follow set.)  Function
	declarations in XQuery end with a ';' so, upon error, I throw
	away all tokens until I get to that.  (I will hopefully be able
	to imporove this in the furture, but for now, it's good
	enough.)

	Setting defaultErrorHandler=false makes this work fine for
	syntax errors inside function declarations.  I have something
	like this:

		functionDeclBody
		    : enclosedExpr
		    ;
		    exception
		    catch [ RecognitionException re ] {
		        ## = #([ERROR,"ERROR"]);
			recover( re );
		    }

	where recover() is my own, working recovery function.  Hence,
	if an exception is thrown during enclosedExpr, it will be
	caught and recovered from and the generated AST is just fine.
	So far, so good.

	But, if there's a syntax error *outside* a function
	declaration, the generated AST is trashed.  Another requirement
	is that I keep the generated AST up to the point of the error
	outside a function declaration.  As I've mentioned previously,
	the reason the AST gets trashed is because when an exception is
	thrown and there's no recovery in place, the AST isn't stitched
	together because it's done only upon successful function
	*return*: stack unwinding upon an exception bypassed normal
	function returns.

	OK, so I tried setting defaultErrorHandler=true.  This makes
	the generated AST be fine for errors outside of function
	declarations, but now the problem is that ANTLR recovers all by
	itself while doing enclosedExpr and functionDeclBody above is
	never given the opportunity to catch the exception and do the
	correct recovery.  Hence, this breaks my recovery mechanism.

	Sigh...

	So I looked at the ANTLR-generated Java code: it calls
	reportError() during its own error recovery.  So what I need to
	do is continue to allow it to recover as normal (so my AST is
	preserved) *except* when the current call stack contains
	functionDeclBody, i.e., if reportError() is called "through"
	functionDeclBody, do my own recovery instead.  OK, so set a flag
	in my parser:

		functionDeclBody
		{
		    m_recoverable = true;
		}
		    : enclosedExpr
		        {
		            m_recoverable = false;
		        }
		    ;
		    exception
		    catch [ RecognitionException re ] {
		        ## = #([ERROR,"ERROR"]);
			recover( re );
		    }

	and override reportError() like:

		public void reportError( RecognitionException re ) {
		    final boolean recoverable = m_recoverable;
		    m_recoverable = false;
		    if ( recoverable )
		       throw new ANTLR_WorkaroundException( re );

		    // ... other recovery not relevant to this post ...
		}

	i.e., if I'm doing my own recovery, I want any exception caught
	by ANTLR's recovery mechanism to be rethrown so the stack
	unwinds back up to functionDeclBody.  One slight problem:
	reportError() isn't declared to throw any exception.  Hence, I
	created the ANTLR_WorkaroundException class that extends
	RuntimeException to work around this annoyance.

	OK, I'm pretty sure this all works, but it requires a lot of
	programming contortion, more than should be necessary.

	A suggestion is to change the default exception-handling code
	emitted to something like:

		catch ( RecognitionException ex ) {
		    reportError( ex );
		    recover( ex, _someTokenSet );
		}

	where recover() is a new method in Parser.java that, by
	default, is:

		void recover( RecognotionException ex, BitSet set )
		    throws TokenStreamException
		{
		    consume();
		    consume( set );
		}

	This will allow a user to override what recovery does without
	having to use the hack of stuffing such code into reportError()
	(where it doesn't conceptually belong).

	- Paul



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From monty at codetransform.com  Thu Dec  2 09:18:33 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] These tokens ... and nothing else
In-Reply-To: <200412021923.OAA18470@us54.synopsys.com>
References: <200412021923.OAA18470@us54.synopsys.com>
Message-ID: <41AF4E69.4070800@codetransform.com>


Bryan Ewbank wrote:
> Is there some way in ANTLR to prevent a parser/treeparser from defining more
> tokens?

Not that I know of.

> I ask because I got bit by a typo in a base grammar ("-glib foo.g" is
> great!) that silently generated another token rather than being rejected -
> it was only much later I realized that there was a disconnect.

Good idea, though.

You could write a little script to diff the generated TokenTypes.txt 
files and warn you if they are different.

Monty


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ewbank at synopsys.com  Thu Dec  2 12:28:53 2004
From: ewbank at synopsys.com (Bryan Ewbank)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] These tokens ... and nothing else
In-Reply-To: <41AF4E69.4070800@codetransform.com>
Message-ID: <200412022027.PAA22583@us54.synopsys.com>


> Bryan Ewbank wrote:
> > Is there some way in ANTLR to prevent a parser/treeparser from 
> > defining more tokens?
> 
> You could write a little script to diff the generated 
> TokenTypes.txt files and warn you if they are different.

Thanks; that's what helped me find the error.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Thu Dec  2 13:50:03 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] Re: Building trees with the correct associativity
In-Reply-To: <1C5C690C06EFE244B83E3F133CA70BDE285877@studentex6.campus.tue.nl>
Message-ID: <coo2mb+jgc5@eGroups.com>



--- In antlr-interest@yahoogroups.com, "Maassen, H.A.M."
<H.A.M.Maassen@s...> wrote:
> > addExpr
> > { AST el = null; }
> >     :
> >     m1:mulExpr { el = m1 }
> >     (    a:addOp b:mulExpr
> >          { ## = #([ADD_EXPR,"ADD_EXPR", e1, a b); e1 = ##; }
> >     )
> >
> > That is truly ugly--I really need to push on getting 2.8 out the door.
> > 
> > --Loring
> 
> What happens in 2.8?

Automatic tree grammar construction, a fairly capable "WYSIWYG" tree
construction syntax, a start at support for target-language
independence of grammars, and a number of bug fixes.

--Loring

>  
> - Harald, sharing the associativity problem





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-Oz5AcX0lORLbzm41HbqCp3w at yahoogroups.com  Thu Dec  2 14:42:57 2004
From: antlr-interest-accept-Oz5AcX0lORLbzm41HbqCp3w at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:42 2004
Subject: MODERATE -- rbohn777@yahoo.com posted to antlr-interest
Message-ID: <1102027377.377.82449.m20@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  rbohn777@yahoo.com 

The message summary:
--------------------
FROM: rbohn777@yahoo.com 
DATE: Thu, 02 Dec 2004 22:42:56 -0000 
SUBJECT: controlled input stream parsing 

I'm new to antlr, so I'm writing a simple CSV parser. In my 
grammar, each line is referred to as a record. What I want 
to do is have the parser and lexer only consume as much 
needed from the input stream until it finds a record and 
then stop until a client requests the next record at which 
it will pull from the input stream again until it finds the 
next record. Is this possible? 

--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=395 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-Oz5AcX0lORLbzm41HbqCp3w@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "rbohn777" <rbohn777@yahoo.com>
Subject: controlled input stream parsing
Date: Thu, 02 Dec 2004 22:42:56 -0000
Size: 1550
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041202/4fc06c76/attachment.mht
From rbohn777 at yahoo.com  Thu Dec  2 14:42:56 2004
From: rbohn777 at yahoo.com (rbohn777)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] controlled input stream parsing
Message-ID: <coo5pg+djqe@eGroups.com>




I'm new to antlr, so I'm writing a simple CSV parser.  In my grammar,
each line is referred to as a record.  What I want to do is have the
parser and lexer only consume as much needed from the input stream
until it finds a record and then stop until a client requests the next
record at which it will pull from the input stream again until it
finds the next record.  Is this possible?








 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From derek_kusiak at yahoo.com  Thu Dec  2 11:13:30 2004
From: derek_kusiak at yahoo.com (derek_kusiak)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] Re: Newbie question (not seeing expected error)
In-Reply-To: <s1af5868.038@emil.oddi.is>
Message-ID: <conpgq+10gkj@eGroups.com>




Thank you very much, Arnar.  So simple I'm embarrassed. :)

--- "Arnar Birgisson" <arnarb@o...> wrote:
> Hello Derek,
> 
> > So far so good.  However, I don't get the expected error
> > if my mistake is in the SECOND sphere:
> > 
> >   sphere 10
> >   20 sphere
> > 
> > Now the first statement is parsed correctly, but there is
> > no error on the second one.  It's just silently ignored
> > and my ouput is this:
> > 
> >   Sphere(radius=10)
> > 
> > Why is there no error about the second sphere?  Clearly the
> > "20 sphere" line is wrong, so why does my parser bail
> > silently after the error?
> 
> After parsing the first line, the parser is at the end of your
> start rule. From there, it doesn't expect to see NUMBER (20) so
> it assumes that it's done parsing and the rest of the input is
> just some garbage (which is sometimes allowed in language
> definitions). This is normal behaviour when you are at the end
> of the start-rule, I think.
> 
> If you want to parse the whole file, you need to add the token
> EOF (end-of-file) to the end of your start rule:
> 
>   class P extends Parser;
>   start  : (shape)+ EOF;
> 
> Given the above example you should get an error in the lines of
> "Unexpected token NUMBER, expecting SPHERE or EOF."
> 
> Hope this helps. :o)
> 
> Arnar








 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pierre42d at 9online.fr  Thu Dec  2 15:13:59 2004
From: pierre42d at 9online.fr (Pierre)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] Problem compiling antlr 2.7.4
Message-ID: <41AFA1B7.4060809@9online.fr>


[...]
=============================
Making examples ...
=============================
make[1]: Entering directory `/tmp/antlr-2.7.4/examples'
 >>>>>>>>>>>>>>>>>>> cpp
make[2]: Entering directory `/tmp/antlr-2.7.4/examples/cpp'
 >>>>>>>>>>>>>>>>>>> ASTsupport
make[3]: Entering directory `/tmp/antlr-2.7.4/examples/cpp/ASTsupport'
make all_targets
make[4]: Entering directory `/tmp/antlr-2.7.4/examples/cpp/ASTsupport'
make[4]: *** No rule to make target `SupportTest.hpp', needed by 
`SupportTest.o'.  Stop.
make[4]: Leaving directory `/tmp/antlr-2.7.4/examples/cpp/ASTsupport'
make[3]: *** [first_rule] Error 2
make[3]: Leaving directory `/tmp/antlr-2.7.4/examples/cpp/ASTsupport'
make[2]: *** [sub_dirs] Error 2
make[2]: Leaving directory `/tmp/antlr-2.7.4/examples/cpp'
make[1]: *** [sub_dirs] Error 2
make[1]: Leaving directory `/tmp/antlr-2.7.4/examples'
make: *** [subdirs] Error 2


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ric.klaren at gmail.com  Thu Dec  2 16:18:40 2004
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] Problem compiling antlr 2.7.4
In-Reply-To: <41AFA1B7.4060809@9online.fr>
References: <41AFA1B7.4060809@9online.fr>
Message-ID: <bc607a4e041202161838b34496@mail.gmail.com>


On Fri, 03 Dec 2004 00:13:59 +0100, Pierre <pierre42d@9online.fr> wrote:
> [...]
> =============================
> Making examples ...
> =============================
> make[1]: Entering directory `/tmp/antlr-2.7.4/examples'
>  >>>>>>>>>>>>>>>>>>> cpp
> make[2]: Entering directory `/tmp/antlr-2.7.4/examples/cpp'
>  >>>>>>>>>>>>>>>>>>> ASTsupport
> make[3]: Entering directory `/tmp/antlr-2.7.4/examples/cpp/ASTsupport'
> make all_targets
> make[4]: Entering directory `/tmp/antlr-2.7.4/examples/cpp/ASTsupport'
> make[4]: *** No rule to make target `SupportTest.hpp', needed by
> `SupportTest.o'.  Stop.
> make[4]: Leaving directory `/tmp/antlr-2.7.4/examples/cpp/ASTsupport'
> make[3]: *** [first_rule] Error 2
> make[3]: Leaving directory `/tmp/antlr-2.7.4/examples/cpp/ASTsupport'
> make[2]: *** [sub_dirs] Error 2
> make[2]: Leaving directory `/tmp/antlr-2.7.4/examples/cpp'
> make[1]: *** [sub_dirs] Error 2
> make[1]: Leaving directory `/tmp/antlr-2.7.4/examples'
> make: *** [subdirs] Error 2

Hmm that's an odd error. It should not do that. What version of make
are you using? Any case it seems like antlr isn't being run on the .g
file that generates that headerfile. You might do that manually to fix
things. Normally this should be done automatically (at least I'm
pretty sure that all worked on 2.7.4 release)

You might try the latest development snapshot available at:

http://wwwhome.cs.utwente.nl/~klaren/antlr/

And see if it fixes the problem for you.

For 2.7.5 I hope to make another pass at configure and the makefiles.
The people doing the python codegenerator had some suggestions for it.

Cheers,

Ric


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From demakov at ispras.ru  Fri Dec  3 00:39:59 2004
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] controlled input stream parsing
References: <coo5pg+djqe@eGroups.com>
Message-ID: <00ac01c4d913$acaa1450$8cc79553@marlboro>


From: "rbohn777" <rbohn777@yahoo.com>
> I'm new to antlr, so I'm writing a simple CSV parser.  In my grammar,
> each line is referred to as a record.  What I want to do is have the
> parser and lexer only consume as much needed from the input stream
> until it finds a record and then stop until a client requests the next
> record at which it will pull from the input stream again until it
> finds the next record.  Is this possible?

Yes, it is possible, but it is not antlr responsibility.
You can read a string from input stream on each request and pass it 
(using StringReader) to antlr to parse.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From gcpa-antlr-interest at m.gmane.org  Fri Dec  3 00:34:34 2004
From: gcpa-antlr-interest at m.gmane.org (Sebastian Bergmann)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] PHP Grammar
Message-ID: <cop8f5$hdb$1@sea.gmane.org>


 Does a grammar for PHP (PHP 5 preferably) exist? I could not find one
 on the website or through Google.

 Thanks,
Sebastian

-- 
Sebastian Bergmann                      http://www.sebastian-bergmann.de/
GnuPG Key: 0xB85B5D69 / 27A7 2B14 09E4 98CD 6277 0E5B 6867 C514 B85B 5D69



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From rbohn777 at yahoo.com  Fri Dec  3 07:29:23 2004
From: rbohn777 at yahoo.com (rbohn777)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] Re: controlled input stream parsing
In-Reply-To: <00ac01c4d913$acaa1450$8cc79553@marlboro>
Message-ID: <coq0oj+v3et@eGroups.com>



> You can read a string from input stream on each request and pass it 
> (using StringReader) to antlr to parse.

yes, but then I would be acting as the lexer.  It's trivial here
because in my example I'm delimiting a record by a newline.  However,
what about more complicated grammars where newlines may not delimit a
record.

~Ryan


--- In antlr-interest@yahoogroups.com, "Alexey Demakov" <demakov@i...>
wrote:
> From: "rbohn777" <rbohn777@y...>
> > I'm new to antlr, so I'm writing a simple CSV parser.  In my grammar,
> > each line is referred to as a record.  What I want to do is have the
> > parser and lexer only consume as much needed from the input stream
> > until it finds a record and then stop until a client requests the next
> > record at which it will pull from the input stream again until it
> > finds the next record.  Is this possible?
> 
> Yes, it is possible, but it is not antlr responsibility.
> You can read a string from input stream on each request and pass it 
> (using StringReader) to antlr to parse.
> 
> Regards,
> Alexey
> 
> -----
> Alexey Demakov
> TreeDL: Tree Description Language: http://treedl.sourceforge.net
> RedVerst Group: http://www.unitesk.com





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ewbank at synopsys.com  Fri Dec  3 08:18:57 2004
From: ewbank at synopsys.com (Bryan Ewbank)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] make rules for *.g -> outputs
Message-ID: <200412031617.LAA18675@us54.synopsys.com>


Hi Folks,

I'm trying to figure out makefile rules for files generation using ANTLR,
and have run into the question of how to handle the *TokenType.txt (and
.hpp) files in a general way.  The rules for .g.cpp and .g.hpp are
relatively easy - as are those for grammar inheritance - but the
TokenType.txt files are problematic because of how they flow from grammar to
grammar.

Any ideas, suggestions, etc?

- Bryan Ewbank
"The best tool for requirements analysis and design is a crayon"



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ewbank at synopsys.com  Fri Dec  3 08:21:21 2004
From: ewbank at synopsys.com (Bryan Ewbank)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] controlled input stream parsing
In-Reply-To: <00ac01c4d913$acaa1450$8cc79553@marlboro>
Message-ID: <200412031619.LAA18861@us54.synopsys.com>


> > I'm new to antlr, so I'm writing a simple CSV parser.  In 
> my grammar, 
> > each line is referred to as a record.  What I want to do is 
> have the 
> > parser and lexer only consume as much needed from the input stream 
> > until it finds a record and then stop until a client 
> requests the next 
> > record at which it will pull from the input stream again until it 
> > finds the next record.  Is this possible?
> 
> Yes, it is possible, but it is not antlr responsibility.
> You can read a string from input stream on each request and 
> pass it (using StringReader) to antlr to parse.

You can also just have the ANTLR grammar recognize one of your records; it
will then stop after reading exactly one of them.  The next time you call
the parser, it will eat the next one.  Just don't put the EOF token at the
end of your production.

As a side question, why is it bad to just pull in the whole file?  Too much
data?

- Bryan



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Fri Dec  3 10:03:02 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] PHP Grammar
In-Reply-To: <cop8f5$hdb$1@sea.gmane.org>
References: <cop8f5$hdb$1@sea.gmane.org>
Message-ID: <931D9EA4-4555-11D9-BB14-000A95891192@cs.usfca.edu>



On Dec 3, 2004, at 12:34 AM, Sebastian Bergmann wrote:

>
>  Does a grammar for PHP (PHP 5 preferably) exist? I could not find one
>  on the website or through Google.

Hi. :)  I'm not aware of one, but when you finish, please post to 
antlr.org :)

Thanks!
Terence

>
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From mail at martin-probst.com  Fri Dec  3 10:35:21 2004
From: mail at martin-probst.com (Martin Probst)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] make rules for *.g -> outputs
In-Reply-To: <200412031617.LAA18675@us54.synopsys.com>
References: <200412031617.LAA18675@us54.synopsys.com>
Message-ID: <1102098921.27405.6.camel@narr.homeip.net>


Hi,
I had to write Makefiles too. I wrote a rule that the generated files
depend on the grammar:
MyParser.cpp MyParser.hpp MyLexer.cpp [...]: mygrammar.g
	(antlr action ...)
MyParser.o: MyParser.cpp MyParser.hpp MyParserTokenTypes.hpp
(...)
This lead to the annoying result that if the grammar was changed make
expected every file to change - but the didn't (e.g. only a small change
in Parser - MyLexer.cpp won't be touched). So make kept calling the
antlr target again and again for every file, even if they wouldn't be
altered.
So I came up with two solutions: either touch all the grammars products
after the antlr run or use a ".mygrammar_was_parsed" file (touching it
after antlr run), make it depend on the grammar and the object files
depend on that magic file.
Both ways lead to unnecessary compiles of source files :-(
Either I misunderstood something with Makefiles (I'm not really a Guru
with them) or there is no other solution ... at least a change always
resulted in a rebuild and dependencies were kind of correct.

mfg
Martin



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From rbohn777 at yahoo.com  Fri Dec  3 11:25:32 2004
From: rbohn777 at yahoo.com (rbohn777)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] Re: controlled input stream parsing
In-Reply-To: <200412031619.LAA18861@us54.synopsys.com>
Message-ID: <coqejc+bsvo@eGroups.com>



> As a side question, why is it bad to just pull in the whole file? 
Too much
> data?

pretty much, i'd rather stream in one record at a time.


--- In antlr-interest@yahoogroups.com, "Bryan Ewbank" <ewbank@s...> wrote:
> > > I'm new to antlr, so I'm writing a simple CSV parser.  In 
> > my grammar, 
> > > each line is referred to as a record.  What I want to do is 
> > have the 
> > > parser and lexer only consume as much needed from the input stream 
> > > until it finds a record and then stop until a client 
> > requests the next 
> > > record at which it will pull from the input stream again until it 
> > > finds the next record.  Is this possible?
> > 
> > Yes, it is possible, but it is not antlr responsibility.
> > You can read a string from input stream on each request and 
> > pass it (using StringReader) to antlr to parse.
> 
> You can also just have the ANTLR grammar recognize one of your
records; it
> will then stop after reading exactly one of them.  The next time you
call
> the parser, it will eat the next one.  Just don't put the EOF token
at the
> end of your production.
> 
> As a side question, why is it bad to just pull in the whole file? 
Too much
> data?
> 
> - Bryan





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-oVxFovaDBi=b2ZlsxhKif5k at yahoogroups.com  Fri Dec  3 11:43:41 2004
From: antlr-interest-accept-oVxFovaDBi=b2ZlsxhKif5k at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:42 2004
Subject: MODERATE -- harald.m.mueller@bigfoot.com posted to antlr-interest
Message-ID: <1102103021.247.18200.m13@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  harald.m.mueller@bigfoot.com 

The message summary:
--------------------
FROM: harald.m.mueller@bigfoot.com 
DATE: Fri, 03 Dec 2004 19:43:36 -0000 
SUBJECT: The eternal question: Why is this ANTLR grammar ambiguous?? 

[I have posted this to the pccts newsgroup; and on the antlr
forum on jguru - I'm sorry if this is "against the rules", 
but thos two forums seem to have quite low answer rates, and
I have found this mailing list only now] 

I have already written a few ANTLR lexers and parsers (for 
productive systems, with sometimes weird grammars) - but the

following puzzles me: Why does the following simple grammar 
create an ambiguous warning?: 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=396 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-oVxFovaDBi=b2ZlsxhKif5k@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: =?iso-8859-1?q?Harald_M._M=FCller?= <harald.m.mueller@bigfoot.com>
Subject: The eternal question: Why is this ANTLR grammar ambiguous??
Date: Fri, 03 Dec 2004 19:43:36 -0000
Size: 2267
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041203/8eddb2e0/attachment.mht
From antlr-interest-accept-6OOTxLSODgsceYRbLzMRhrw at yahoogroups.com  Fri Dec  3 11:55:52 2004
From: antlr-interest-accept-6OOTxLSODgsceYRbLzMRhrw at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:42 2004
Subject: MODERATE -- harald.m.mueller@bigfoot.com posted to antlr-interest
Message-ID: <1102103752.369.14144.m15@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  harald.m.mueller@bigfoot.com 

The message summary:
--------------------
FROM: harald.m.mueller@bigfoot.com 
DATE: Fri, 03 Dec 2004 19:55:45 -0000 
SUBJECT: A wish: No unneeded imports (or rather: code without "standard warnings") 

2 seconds on the list, and I already want a feature ;-) : 

We have a rule in our Java projects that we do not even 
allow warnings in code. "Which warnings?" you'll ask - we 
settle for the "Eclipse 2.1 default warnings". Among those, 
there's the unneeded imports warning - and antlr's output 
gets tagged all over the place ... 

Having written a fair lot of codegens myself, I know the 
work ... but couldn't it be possible to make the created 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=397 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-6OOTxLSODgsceYRbLzMRhrw@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: =?iso-8859-1?q?Harald_M._M=FCller?= <harald.m.mueller@bigfoot.com>
Subject: A wish: No unneeded imports (or rather: code without "standard warnings")
Date: Fri, 03 Dec 2004 19:55:45 -0000
Size: 1966
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041203/ed6636c1/attachment.mht
From harald.m.mueller at bigfoot.com  Fri Dec  3 11:55:45 2004
From: harald.m.mueller at bigfoot.com (=?iso-8859-1?q?Harald_M._M=FCller?=)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] A wish: No unneeded imports (or rather: code without "standard warnings")
Message-ID: <coqgc1+elrd@eGroups.com>




2 seconds on the list, and I already want a feature ;-) :

We have a rule in our Java projects that we do not even allow 
warnings in code. "Which warnings?" you'll ask - we settle for 
the "Eclipse 2.1 default warnings". Among those, there's the 
unneeded imports warning - and antlr's output gets tagged all over 
the place ...

Having written a fair lot of codegens myself, I know the work ... 
but couldn't it be possible to make the created code "warning-free"?

[Oh yes, we could put the generated code into a separate "generated" 
source tree, where it would be ok to have warnings, also in other 
generated code - but, well, no warnings would be nicer :-) ]

Regards
Harald M. Mueller









 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From harald.m.mueller at bigfoot.com  Fri Dec  3 11:43:36 2004
From: harald.m.mueller at bigfoot.com (=?iso-8859-1?q?Harald_M._M=FCller?=)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] The eternal question: Why is this ANTLR grammar ambiguous??
Message-ID: <coqfl8+2nm1@eGroups.com>




[I have posted this to the pccts newsgroup; and on the antlr forum 
on jguru - I'm sorry if this is "against the rules", but thos two 
forums seem to have quite low answer rates, and I have found this 
mailing list only now]

I have already written a few ANTLR lexers and parsers (for 
productive systems, with sometimes weird grammars) - but the 
following puzzles me: 
Why does the following simple grammar create an ambiguous warning?: 


class MyLexer extends Lexer;

options {
	charVocabulary = '\3'..'\377';
	k=3;
	caseSensitive=false;
}

COMMENT_COMMAND
  : '-' '-' '$'
  ;
  
SQL_STATEMENT
  : ( SYMBOL )+ ';'
  ;

protected SYMBOL
  : ('-' (~ '-')) => '-'   //1
  | 'a'
  | '"' (~ '"')* '"'       //2
  ;

When I remove either of //1 or //2, the ambiguity goes away. 
When I replace //2 with 

  | '"' (~ ('"'|'$'))* '"'

- i.e., I also exclude $ inside the "string" -, the ambiguity also 
goes away. 
But why would a $ after(!!) a " lead to an ambiguity????? 

Thanks for any help! 

Harald M.











 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Fri Dec  3 12:40:51 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] Re: make rules for *.g -> outputs
In-Reply-To: <200412031617.LAA18675@us54.synopsys.com>
Message-ID: <coqj0j+atms@eGroups.com>



Bryan--

The basic dependency is that treewalkers (and parsers, if in a
separate file from the lexer) depend on both the .g and a .txt file. 
You could resort to naming conventions for import/export vocabularies
and pattern substitutions in the make rules; I don't see any simpler
solution other than explicitly listing the dependencies for each
generated file.

--Loring


--- In antlr-interest@yahoogroups.com, "Bryan Ewbank" <ewbank@s...> wrote:
> Hi Folks,
> 
> I'm trying to figure out makefile rules for files generation using
ANTLR,
> and have run into the question of how to handle the *TokenType.txt (and
> .hpp) files in a general way.  The rules for .g.cpp and .g.hpp are
> relatively easy - as are those for grammar inheritance - but the
> TokenType.txt files are problematic because of how they flow from
grammar to
> grammar.
> 
> Any ideas, suggestions, etc?
> 
> - Bryan Ewbank
> "The best tool for requirements analysis and design is a crayon"





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Fri Dec  3 12:44:00 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] Re: A wish: No unneeded imports (or rather: code without "standard warnings")
In-Reply-To: <coqgc1+elrd@eGroups.com>
Message-ID: <coqj6g+uegi@eGroups.com>



Harald--

That should be fixed in ANTLR 3, I would think.  For what you are
doing, can you automate the eclipse "organize imports" function to
remove unneeded imports?

--Loring


--- In antlr-interest@yahoogroups.com, Harald M. M?ller
<harald.m.mueller@b...> wrote:
> 
> 
> 2 seconds on the list, and I already want a feature ;-) :
> 
> We have a rule in our Java projects that we do not even allow 
> warnings in code. "Which warnings?" you'll ask - we settle for 
> the "Eclipse 2.1 default warnings". Among those, there's the 
> unneeded imports warning - and antlr's output gets tagged all over 
> the place ...
> 
> Having written a fair lot of codegens myself, I know the work ... 
> but couldn't it be possible to make the created code "warning-free"?
> 
> [Oh yes, we could put the generated code into a separate "generated" 
> source tree, where it would be ok to have warnings, also in other 
> generated code - but, well, no warnings would be nicer :-) ]
> 
> Regards
> Harald M. Mueller





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Fri Dec  3 12:54:27 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] Re: The eternal question: Why is this ANTLR grammar ambiguous??
In-Reply-To: <coqfl8+2nm1@eGroups.com>
Message-ID: <coqjq4+l1ik@eGroups.com>



--- In antlr-interest@yahoogroups.com, Harald M. M?ller
<harald.m.mueller@b...> wrote:
> 
> 
> [I have posted this to the pccts newsgroup; and on the antlr forum 
> on jguru - I'm sorry if this is "against the rules", but thos two 
> forums seem to have quite low answer rates, and I have found this 
> mailing list only now]
> 
> I have already written a few ANTLR lexers and parsers (for 
> productive systems, with sometimes weird grammars) - but the 
> following puzzles me: 
> Why does the following simple grammar create an ambiguous warning?: 
> 
> 
> class MyLexer extends Lexer;
> 
> options {
> 	charVocabulary = '\3'..'\377';
> 	k=3;
> 	caseSensitive=false;
> }
> 
> COMMENT_COMMAND
>   : '-' '-' '$'
>   ;
>   
> SQL_STATEMENT
>   : ( SYMBOL )+ ';'
>   ;
> 
> protected SYMBOL
>   : ('-' (~ '-')) => '-'   //1
>   | 'a'
>   | '"' (~ '"')* '"'       //2
>   ;
> 
> When I remove either of //1 or //2, the ambiguity goes away. 
> When I replace //2 with 
> 
>   | '"' (~ ('"'|'$'))* '"'
> 
> - i.e., I also exclude $ inside the "string" -, the ambiguity also 
> goes away. 
> But why would a $ after(!!) a " lead to an ambiguity????? 

This is an approximate LLk issue--there isn't really an ambiguity, but
ANTLR sees  --$ as matchable by SYMBOL; SYMBOL is matched as ( 'a' | (
('-' | '"') (~'-' | ~'"') ...

If you take a look at the generated code, it should do the right
thing.  Fortunately, Ter is doing full LLk for ANTLR 3 so we don't
have to be confused by this sort of thing.

--Loring

> 
> Thanks for any help! 
> 
> Harald M.





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From harald.m.mueller at bigfoot.com  Fri Dec  3 12:58:55 2004
From: harald.m.mueller at bigfoot.com (=?iso-8859-1?q?Harald_M._M=FCller?=)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] Re: The eternal question: Why is this ANTLR grammar ambiguous??
In-Reply-To: <coqjq4+l1ik@eGroups.com>
Message-ID: <coqk2f+m801@eGroups.com>



Now that was a quick answer! - thx.

Again in my "warning phobia": Is it possible to suppress this 
concrete warning? - I actually try to avoid ambiguities in grammars, 
because sometimes I get bitten by cases where actually the "wrong" 
alternative is selected.

(I admit that I'm not really good with in-rule options ... so if the 
answer is in the doc or faq, forgive me).

Thx
Harald M.

--- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> 
> --- In antlr-interest@yahoogroups.com, Harald M. M?ller
> <harald.m.mueller@b...> wrote:
> > 
> > 
> > [I have posted this to the pccts newsgroup; and on the antlr 
forum 
> > on jguru - I'm sorry if this is "against the rules", but thos 
two 
> > forums seem to have quite low answer rates, and I have found 
this 
> > mailing list only now]
> > 
> > I have already written a few ANTLR lexers and parsers (for 
> > productive systems, with sometimes weird grammars) - but the 
> > following puzzles me: 
> > Why does the following simple grammar create an ambiguous 
warning?: 
> > 
> > 
> > class MyLexer extends Lexer;
> > 
> > options {
> > 	charVocabulary = '\3'..'\377';
> > 	k=3;
> > 	caseSensitive=false;
> > }
> > 
> > COMMENT_COMMAND
> >   : '-' '-' '$'
> >   ;
> >   
> > SQL_STATEMENT
> >   : ( SYMBOL )+ ';'
> >   ;
> > 
> > protected SYMBOL
> >   : ('-' (~ '-')) => '-'   //1
> >   | 'a'
> >   | '"' (~ '"')* '"'       //2
> >   ;
> > 
> > When I remove either of //1 or //2, the ambiguity goes away. 
> > When I replace //2 with 
> > 
> >   | '"' (~ ('"'|'$'))* '"'
> > 
> > - i.e., I also exclude $ inside the "string" -, the ambiguity 
also 
> > goes away. 
> > But why would a $ after(!!) a " lead to an ambiguity????? 
> 
> This is an approximate LLk issue--there isn't really an ambiguity, 
but
> ANTLR sees  --$ as matchable by SYMBOL; SYMBOL is matched as ( 'a' 
| (
> ('-' | '"') (~'-' | ~'"') ...
> 
> If you take a look at the generated code, it should do the right
> thing.  Fortunately, Ter is doing full LLk for ANTLR 3 so we don't
> have to be confused by this sort of thing.
> 
> --Loring
> 
> > 
> > Thanks for any help! 
> > 
> > Harald M.





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Fri Dec  3 13:04:15 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] Re: The eternal question: Why is this ANTLR grammar ambiguous??
In-Reply-To: <coqk2f+m801@eGroups.com>
Message-ID: <coqkcf+u8gr@eGroups.com>



There is a rule or subrule option--check the manual or grep through
the examples for "Ambig" (that should catch the full name).

--Loring

--- In antlr-interest@yahoogroups.com, Harald M. M?ller
<harald.m.mueller@b...> wrote:
> 
> Now that was a quick answer! - thx.
> 
> Again in my "warning phobia": Is it possible to suppress this 
> concrete warning? - I actually try to avoid ambiguities in grammars, 
> because sometimes I get bitten by cases where actually the "wrong" 
> alternative is selected.
> 
> (I admit that I'm not really good with in-rule options ... so if the 
> answer is in the doc or faq, forgive me).
> 
> Thx
> Harald M.
> 
> --- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> > 
> > --- In antlr-interest@yahoogroups.com, Harald M. M?ller
> > <harald.m.mueller@b...> wrote:
> > > 
> > > 
> > > [I have posted this to the pccts newsgroup; and on the antlr 
> forum 
> > > on jguru - I'm sorry if this is "against the rules", but thos 
> two 
> > > forums seem to have quite low answer rates, and I have found 
> this 
> > > mailing list only now]
> > > 
> > > I have already written a few ANTLR lexers and parsers (for 
> > > productive systems, with sometimes weird grammars) - but the 
> > > following puzzles me: 
> > > Why does the following simple grammar create an ambiguous 
> warning?: 
> > > 
> > > 
> > > class MyLexer extends Lexer;
> > > 
> > > options {
> > > 	charVocabulary = '\3'..'\377';
> > > 	k=3;
> > > 	caseSensitive=false;
> > > }
> > > 
> > > COMMENT_COMMAND
> > >   : '-' '-' '$'
> > >   ;
> > >   
> > > SQL_STATEMENT
> > >   : ( SYMBOL )+ ';'
> > >   ;
> > > 
> > > protected SYMBOL
> > >   : ('-' (~ '-')) => '-'   //1
> > >   | 'a'
> > >   | '"' (~ '"')* '"'       //2
> > >   ;
> > > 
> > > When I remove either of //1 or //2, the ambiguity goes away. 
> > > When I replace //2 with 
> > > 
> > >   | '"' (~ ('"'|'$'))* '"'
> > > 
> > > - i.e., I also exclude $ inside the "string" -, the ambiguity 
> also 
> > > goes away. 
> > > But why would a $ after(!!) a " lead to an ambiguity????? 
> > 
> > This is an approximate LLk issue--there isn't really an ambiguity, 
> but
> > ANTLR sees  --$ as matchable by SYMBOL; SYMBOL is matched as ( 'a' 
> | (
> > ('-' | '"') (~'-' | ~'"') ...
> > 
> > If you take a look at the generated code, it should do the right
> > thing.  Fortunately, Ter is doing full LLk for ANTLR 3 so we don't
> > have to be confused by this sort of thing.
> > 
> > --Loring
> > 
> > > 
> > > Thanks for any help! 
> > > 
> > > Harald M.





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Fri Dec  3 14:17:46 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] hooray! got ANTLR 3 to lex java
Message-ID: <28E945E1-4579-11D9-BB14-000A95891192@cs.usfca.edu>


Howdy,

A nice little milestone on the way to getting lexing/parsing working 
properly for 3.0.  I just got the Java lexer from java.g to walk 
through a 120k 5000 line java program.  That is to say, ANTLR 3 is able 
to read the java.g lexical spec and generate a program to break up a 
5000 java program into tokens.  ANTLR generates both 2150 lines of Java 
(for the main lexing functionality) and generates 33k of bytecodes 
directly to implement some cyclic DFAs.

Note that even though I'm being hideously inefficient by backtracking 
on every token and by using linear searches for DFA edges rather than 
switch-statements, it lexes the 5000 line Java program in .9s on my 
1Ghz mac laptop versus 1.7s for the 2.7.4 version of ANTLR on the same 
input.  So, once I spend some time to optimize things, it should go 
pretty dog gone fast! :)

Anyway, if it can do the java lexer, it can do the parser as that is 
much simpler in terms of lookahead DFAs (should be acyclic and LL(2)) 
for the most part.  Oh, and the grammar doesn't need any of the 
manually specified syntactic predicates. :)  The DFA thingie just 
builds a little state machine to look ahead.

Whew! ...was driving me nuts tracking down lookahead errors in 
thousands of lines of generate bytecode ;)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From oliver.zeigermann at gmail.com  Fri Dec  3 14:39:29 2004
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] hooray! got ANTLR 3 to lex java
In-Reply-To: <28E945E1-4579-11D9-BB14-000A95891192@cs.usfca.edu>
References: <28E945E1-4579-11D9-BB14-000A95891192@cs.usfca.edu>
Message-ID: <9da4f452041203143927ad9304@mail.gmail.com>


Great! Congratulations :)

Oliver


On Fri, 3 Dec 2004 14:17:46 -0800, Terence Parr <parrt@cs.usfca.edu> wrote:
> 
> Howdy,
> 
> A nice little milestone on the way to getting lexing/parsing working
> properly for 3.0.  I just got the Java lexer from java.g to walk
> through a 120k 5000 line java program.  That is to say, ANTLR 3 is able
> to read the java.g lexical spec and generate a program to break up a
> 5000 java program into tokens.  ANTLR generates both 2150 lines of Java
> (for the main lexing functionality) and generates 33k of bytecodes
> directly to implement some cyclic DFAs.
> 
> Note that even though I'm being hideously inefficient by backtracking
> on every token and by using linear searches for DFA edges rather than
> switch-statements, it lexes the 5000 line Java program in .9s on my
> 1Ghz mac laptop versus 1.7s for the 2.7.4 version of ANTLR on the same
> input.  So, once I spend some time to optimize things, it should go
> pretty dog gone fast! :)
> 
> Anyway, if it can do the java lexer, it can do the parser as that is
> much simpler in terms of lookahead DFAs (should be acyclic and LL(2))
> for the most part.  Oh, and the grammar doesn't need any of the
> manually specified syntactic predicates. :)  The DFA thingie just
> builds a little state machine to look ahead.
> 
> Whew! ...was driving me nuts tracking down lookahead errors in
> thousands of lines of generate bytecode ;)
> 
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!
> 
> 
> Yahoo! Groups Links
> 
> 
> 
> 
>


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From derek_kusiak at yahoo.com  Fri Dec  3 15:07:36 2004
From: derek_kusiak at yahoo.com (derek_kusiak)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] Another newbie question
Message-ID: <coqrjo+r7sj@eGroups.com>



I'm writing a toy application to learn Antlr.  It reads a
set of math instructions from a text file that might look
like this:

  realfunc 3.1415
  realfunc 42
  realfunc -1e-34
  intfunc  99
  intfunc  -1

My C++ program reads the input, computes the result of
each operation, and prints it to the screen.  realfunc()
can accept any number, real or integer, but intfunc() can
ONLY take integers.  I started by writing a lexer that
returns an INTEGER or FLOAT (real) token, though I'm not
sure I went about it the simplest way:

  class L extends Lexer;

  protected DIGIT    : '0'..'9' ;
  protected INT      : ('+' | '-')? (DIGIT)+ ;
  protected EXPONENT : ('e' | 'E') INT ;
  protected DOT      : '.' ;

  NUMBER
  : DOT INT                        { _ttype = FLOAT; }
  | (INT EXPONENT) => INT EXPONENT { _ttype = FLOAT; }
  | (INT DOT INT) => INT DOT INT   { _ttype = FLOAT; }
  | (INT DOT) => IT DOT            { _ttype = FLOAT; }
  | INT                            { _ttype = INTEGER; }
  ;

Implementing intfunc() in my parser is simple, but I'm not
sure what to do about realfunc():

  class P extends Parser;

  start : (command)+ EOF ;

  command
  : INTFUNC i:INTEGER // So far so good
    {
      cout << "result = "
           << intfunc(atoi(i->getText().c_str()))
           << endl;
    }
  |
    REALFUNC f:(FLOAT | INTEGER) // Not allowed
    {
      cout << "result = "
           << realfunc(atof(f->getText().c_str()))
           << endl;
    }
  ;

How do I write a rule for realfunc() that accepts a FLOAT
or INTEGER and extracts the value?  In my real program
realfunc() takes several parameters, so I can't just
write explicit rules for every permutation.  Thanks.





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Fri Dec  3 15:17:20 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] Re: hooray! got ANTLR 3 to lex java
In-Reply-To: <28E945E1-4579-11D9-BB14-000A95891192@cs.usfca.edu>
Message-ID: <coqs60+ksc1@eGroups.com>



--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
> Howdy,
> 
> A nice little milestone on the way to getting lexing/parsing working 
> properly for 3.0.  I just got the Java lexer from java.g to walk 
> through a 120k 5000 line java program.  That is to say, ANTLR 3 is able

Yay!!!
 
> to read the java.g lexical spec and generate a program to break up a 
> 5000 java program into tokens.  ANTLR generates both 2150 lines of Java 
> (for the main lexing functionality) and generates 33k of bytecodes 
> directly to implement some cyclic DFAs.
> 
> Note that even though I'm being hideously inefficient by backtracking 
> on every token and by using linear searches for DFA edges rather than 
> switch-statements, it lexes the 5000 line Java program in .9s on my 
> 1Ghz mac laptop versus 1.7s for the 2.7.4 version of ANTLR on the same 
> input.  So, once I spend some time to optimize things, it should go 
> pretty dog gone fast! :)

Well, it should achieve respectable speeds for java.  Chris Leung,
IIRC, reported a 5x speedup over ANTLR for llk, so you still have some
big wins ahead.

The 33K of bytecode may be a concern for unusual languages with lots
of keywords--the classfile format only allows 64K of bytecode to be
covered by exception handlers, although it uses a 32-bit int for code
size--go figure.  Or maybe not:  a useful experiment would be to, say,
add a 100 randomly chosen "keywords" in batches of 10 and see how the
bytecode size scales.  The fact that the DFA for Java lexing fits
within 33K, though, is very good news--C++ will be bigger, but not
tremendously so, and other conventional languages should fit.

All in all, this is very good news!

--Loring

> 
> Anyway, if it can do the java lexer, it can do the parser as that is 
> much simpler in terms of lookahead DFAs (should be acyclic and LL(2)) 
> for the most part.  Oh, and the grammar doesn't need any of the 
> manually specified syntactic predicates. :)  The DFA thingie just 
> builds a little state machine to look ahead.
> 
> Whew! ...was driving me nuts tracking down lookahead errors in 
> thousands of lines of generate bytecode ;)
> 
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Fri Dec  3 15:29:28 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] Re: Another newbie question
In-Reply-To: <coqrjo+r7sj@eGroups.com>
Message-ID: <coqsso+drql@eGroups.com>



--- In antlr-interest@yahoogroups.com, "derek_kusiak"
<derek_kusiak@y...> wrote:
[SNIP]
>   command
>   : INTFUNC i:INTEGER // So far so good
>     {
>       cout << "result = "
>            << intfunc(atoi(i->getText().c_str()))
>            << endl;
>     }
>   |
>     REALFUNC f:(FLOAT | INTEGER) // Not allowed
>     {
>       cout << "result = "
>            << realfunc(atof(f->getText().c_str()))
>            << endl;
>     }
>   ;

ANTLR doesn't do labeled subrules; what you need instead is something like
command
{ Token f = null; }
   : INTFUNC i:INTEGER // So far so good
     {
       cout << "result = "
            << intfunc(atoi(i->getText().c_str()))
            << endl;
     }
   |
     REALFUNC (e:FLOAT { f = e; } | i:INTEGER { f = i} )
     {
       cout << "result = "
            << realfunc(atof(f->getText().c_str()))
            << endl;
     }
   ;

or have an action for each of the subrule alternatives (instead of the
single action for both).

> How do I write a rule for realfunc() that accepts a FLOAT
> or INTEGER and extracts the value?  In my real program
> realfunc() takes several parameters, so I can't just
> write explicit rules for every permutation.  Thanks.

If the parameters are really varied, you may want to add a tree
construction phase to more easily sort out the argument alternatives
for computation.

--Loring





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-8i1ot5YMPHHcOABuPF1zd9c at yahoogroups.com  Sat Dec  4 01:52:10 2004
From: antlr-interest-accept-8i1ot5YMPHHcOABuPF1zd9c at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:42 2004
Subject: MODERATE -- krishanu.debnath@gmail.com posted to antlr-interest
Message-ID: <1102153930.357.64515.m16@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  krishanu.debnath@gmail.com 

The message summary:
--------------------
FROM: krishanu.debnath@gmail.com 
DATE: Sat, 4 Dec 2004 15:21:52 +0530 
SUBJECT: lib/cpp/src/Parser.cpp 

Hello, 

Does antlr provide any option to set the following global 
'true' ? I need the debug trace (token mismatch) output 
which is under this global flag. Or is it a internal flag? 

Thanks Krishanu 

bool DEBUG_PARSER=true; (line 218) 

--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=398 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-8i1ot5YMPHHcOABuPF1zd9c@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: Krishanu Debnath <krishanu.debnath@gmail.com>
Subject: lib/cpp/src/Parser.cpp
Date: Sat, 4 Dec 2004 15:21:52 +0530
Size: 1957
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041204/6e35c079/attachment.mht
From i.maier at gmx.de  Sat Dec  4 07:54:37 2004
From: i.maier at gmx.de (Ingo Maier)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] ANTLR 3 sources
Message-ID: <1102175677.1912.6.camel@beeblebox>


Hi,

are the ANTLR 3 (alpha, beta....) sources available anywhere? Cannot
find them on antlr.org. Is there a public CVS or (I think I read that
you are using) perforce repository?

Ingo



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From krishanu.debnath at gmail.com  Sat Dec  4 01:51:52 2004
From: krishanu.debnath at gmail.com (Krishanu Debnath)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] lib/cpp/src/Parser.cpp
Message-ID: <9fa1fefc041204015124bc7db9@mail.gmail.com>



Hello,

Does antlr provide any option to set the following global 'true' ? I
need the debug trace
(token mismatch) output which is under this global flag. Or is it a
internal flag?

Thanks
Krishanu

bool DEBUG_PARSER=true; (line 218)



-- 
"C has its problems, but a language designed from scratch would have some too,
 and we know C's problems."
--Bjarne Stroustrup





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Sat Dec  4 03:05:58 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] Re: lib/cpp/src/Parser.cpp
In-Reply-To: <9fa1fefc041204015124bc7db9@mail.gmail.com>
Message-ID: <cos5mm+si5t@eGroups.com>



No--you want to use the -trace family of command line options to
generate code with tracing on.

--Loring


--- In antlr-interest@yahoogroups.com, Krishanu Debnath
<krishanu.debnath@g...> wrote:
> 
> Hello,
> 
> Does antlr provide any option to set the following global 'true' ? I
> need the debug trace
> (token mismatch) output which is under this global flag. Or is it a
> internal flag?
> 
> Thanks
> Krishanu
> 
> bool DEBUG_PARSER=true; (line 218)
> 
> 
> 
> -- 
> "C has its problems, but a language designed from scratch would have
some too,
>  and we know C's problems."
> --Bjarne Stroustrup





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From krishanu.debnath at gmail.com  Sat Dec  4 03:32:41 2004
From: krishanu.debnath at gmail.com (Krishanu Debnath)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] Re: lib/cpp/src/Parser.cpp
In-Reply-To: <cos5mm+si5t@eGroups.com>
References: <9fa1fefc041204015124bc7db9@mail.gmail.com>
	 <cos5mm+si5t@eGroups.com>
Message-ID: <9fa1fefc04120403325c35e8d6@mail.gmail.com>


Okay, thanks.

Krishanu


On Sat, 04 Dec 2004 11:05:58 -0000, lgcraymer <lgc@mail1.jpl.nasa.gov> wrote:
> 
> 
> No--you want to use the -trace family of command line options to
> generate code with tracing on.
> 
> --Loring
> 
> --- In antlr-interest@yahoogroups.com, Krishanu Debnath
> 
> 
> <krishanu.debnath@g...> wrote:
> >
> > Hello,
> >
> > Does antlr provide any option to set the following global 'true' ? I
> > need the debug trace
> > (token mismatch) output which is under this global flag. Or is it a
> > internal flag?
> >
> > Thanks
> > Krishanu
> >
> > bool DEBUG_PARSER=true; (line 218)
> >
> >
> >
> > --
> > "C has its problems, but a language designed from scratch would have
> some too,
> >  and we know C's problems."
> > --Bjarne Stroustrup
> 
>  
> Yahoo! Groups Links
> 
> 
> 
> 
> 


-- 
"C has its problems, but a language designed from scratch would have some too,
 and we know C's problems."
--Bjarne Stroustrup


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From sk at z.pl  Sat Dec  4 08:19:18 2004
From: sk at z.pl (Sebastian Kaliszewski)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] make rules for *.g -> outputs
In-Reply-To: <1102098921.27405.6.camel@narr.homeip.net>
References: <200412031617.LAA18675@us54.synopsys.com> <1102098921.27405.6.camel@narr.homeip.net>
Message-ID: <200412041719.18900.Sebastian.Kaliszewski@softax.pl>


Dnia pi? 3. grudzie? 2004 19:35, Martin Probst napisa?:
> Hi,
> I had to write Makefiles too. I wrote a rule that the generated files
> depend on the grammar:
> MyParser.cpp MyParser.hpp MyLexer.cpp [...]: mygrammar.g
> 	(antlr action ...)
> MyParser.o: MyParser.cpp MyParser.hpp MyParserTokenTypes.hpp
> (...)
> This lead to the annoying result that if the grammar was changed make
> expected every file to change - but the didn't (e.g. only a small change
> in Parser - MyLexer.cpp won't be touched). So make kept calling the
> antlr target again and again for every file, even if they wouldn't be
> altered.
> So I came up with two solutions: either touch all the grammars products
> after the antlr run or use a ".mygrammar_was_parsed" file (touching it
> after antlr run), make it depend on the grammar and the object files
> depend on that magic file.
> Both ways lead to unnecessary compiles of source files :-(
> Either I misunderstood something with Makefiles (I'm not really a Guru
> with them) or there is no other solution ... at least a change always
> resulted in a rebuild and dependencies were kind of correct.


Below is (an edited) snippet from my makefile to do what you described
above. Set properly 'SRC' to all the source files begin compiled, change
'GENSRC' files to those actually produced by your grammar (only .cpp
files, not .hpp!). Set all the marcos like 'ANTLR', 'CXX', 'LINK', etc. to
be properly defined for your development environment and also properly
set compilation as well as linking options ('CXXFLAGS' and 'LINKOPT') as
needed. Then just substitute 'exe' with your target, substitute 'grammar'
with your grammar, add your rules for other languages (if you have any
other language files in your project).
You should not specify any C++ header (.hpp) files anywhere, nor specify
generic .hpp rules. This makefile autmatically generates properly all the
dependencies -- %.d : %.cpp rule & include directives at the end do the
whole magic.
This thing requires gnu make GCC (or option sompatible product) as well
as *nixish toolset (sed, diff, touch and sleep are used). It also should
be run from sh compatible (bash is good) shell (maybe it works form csh
but I did't check).

8<--------------------------------
#! /usr/bin/make
#
# Generic makefile for ANTLR based C++ project
# Released to public domain by S. Kaliszewski in Dec 2004
#

SRC := 		all the cpp source files
GENSRC :=	MyParser.cpp MyLexer.cpp MyTreeParser.cpp

ANTLR :=		cantlr
CXX := 		g++
LINK := 		g++
DIFF :=		diff -NEbBq
DEL := 		rm -f --
CP := 		cp --
ECHO := 		echo
TOUCH :=	touch
SLEEP :=		sleep
SED :=		sed

CXXFLAGS :=	-pipe -O3 -DNDEBUG -ansi -pedantic
LINKOPT :=	-lantlr -lm



exe : $(GENSRC:.cpp=.o) $(SRC:.cpp=.o)
	$(LINK)  -o $@ $+ $(LINKOPT)

%.o : %.d
	$(CXX) $(CXXFLAGS) -c -o $@ ${<:.d=.cpp}

%.d : %.cpp
	@set -e; $(CXX) -MM $(CXXFLAGS) $< \
	| $(SED) 's!\($*\)\.o[ :]*!\1.o $@ : !g' > $@; [ -s $@ ] 2>/dev/null || $(DEL) $@

grammar.g.dd : grammar.g
	-@$(foreach FILE, $(GENSRC), $(DEL) $(FILE).old >/dev/null 2>&1 ; true; )
	-@$(foreach FILE, $(GENSRC), [ -f $(FILE:.cpp=o) ] && [ $(FILE) -ot $(FILE:.cpp=o) ] \
          && $(CP) $(FILE) $(FILE).old && $(ECHO) Copying $(FILE) to $(FILE).old; true; )
	$(ANTLR) $<
	-@$(SLEEP) 1
	-@$(foreach FILE, $(GENSRC), { $(DIFF) $(FILE) $(FILE).old >/dev/null 2>&1 \
          && $(TOUCH) $(FILE:.cpp=.d) && $(TOUCH) $(FILE:.cpp=.o); } \
          || { $(DEL) $(FILE:.cpp=.o) \
          ; $(ECHO) Found changes in $(FILE) since last $(FILE:.cpp=.o) compilation; }; true; )
	-@$(foreach FILE, $(GENSRC), $(DEL) $(FILE).old >/dev/null 2>&1 ; true; )
	-@$(SLEEP) 1
	@$(TOUCH) $@

$(GENSRC) : grammar.g.dd

include $(GENSRC:.cpp=.d)
include $(SRC:.cpp=.d)

8<----------------------------


Hope it's useful

rgds
-- 
Sebastian Kaliszewski


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From derek_kusiak at yahoo.com  Sat Dec  4 07:28:42 2004
From: derek_kusiak at yahoo.com (derek_kusiak)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] Re: Another newbie question
In-Reply-To: <coqsso+drql@eGroups.com>
Message-ID: <cosl3a+drms@eGroups.com>



--- "lgcraymer" <lgc@m...> wrote:
(...)
> ANTLR doesn't do labeled subrules; what you need instead
> is something like command
> { Token f = null; }
>    : INTFUNC i:INTEGER // So far so good
(...)
>      REALFUNC (e:FLOAT { f = e; } | i:INTEGER { f = i} )
>      {
>        cout << "result = "
>             << realfunc(atof(f->getText().c_str()))
>             << endl;
>      }
>    ;
> 
> or have an action for each of the subrule alternatives
> (instead of the single action for both).

Thanks for the tip, Loring.  I modified your idea a bit and
ran with it:

protected
integer returns [int value]
    : i:INTEGER
    {
        value = atoi(i->getText().c_str());
    }
    ;

protected
real returns [float value]
    : i:INTEGER
    {
        value = atof(i->getText().c_str());
    }
    | f:FLOAT
    {
        value = atof(f->getText().c_str());
    }
    ;

realfunc
    { float f; }
    : REALFUNC f=real { realfunc(f); }
    ;

intfunc
    { int i; }
    : INTFUNC i=integer { intfunc(i); }
    ;





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Sat Dec  4 09:59:50 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] ANTLR 3 sources
In-Reply-To: <1102175677.1912.6.camel@beeblebox>
References: <1102175677.1912.6.camel@beeblebox>
Message-ID: <4B45542C-461E-11D9-BB14-000A95891192@cs.usfca.edu>



On Dec 4, 2004, at 7:54 AM, Ingo Maier wrote:
> are the ANTLR 3 (alpha, beta....) sources available anywhere? Cannot
> find them on antlr.org. Is there a public CVS or (I think I read that
> you are using) perforce repository?

Howdy.  I won't be releasing the sources for a while.  I'd like to get 
something a little more useful before releasing it.

I have to take a detour shortly to write some lectures (I've been 
invited to Berkeley across the Bay next week), get antlr 2.7.5 out 
(which will have a python code generator!), get out StringTemplate 2.1, 
and do some heinous job-related stuff.  Once I get all of java.g 
working I'll put 3.0 aside for a couple of weeks probably.

Note that the new java grammar is much much more natural.  For example, 
you'll see natural (but highly non-LL) lexer rules like this

FLOATING_POINT_LITERAL
     :     DIGITS '.' (DIGITS)? (EXPONENT_PART)? (FLOAT_TYPE_SUFFIX)?
     | '.' DIGITS (EXPONENT_PART)? (FLOAT_TYPE_SUFFIX)?
     |     DIGITS EXPONENT_PART FLOAT_TYPE_SUFFIX
     |     DIGITS EXPONENT_PART
     |     DIGITS FLOAT_TYPE_SUFFIX
     ;

and finally simple comment rules like:

ML_COMMENT
         :       "/*"
                 ( greedy=false : . )*
                 "*/"
                 {channel=99;}  // parser listens on channel 0 by default
         ;

The new analysis engine builds a little mini-DFA to predict which alt 
will win for non-LL decisions.  Only one other DFA is built for Java's 
lexer, which predicts which of your token rules will succeed so you'll 
see other rules such as

NUM_INT
     : DECIMAL_LITERAL
     | HEX_LITERAL
     | OCTAL_LITERAL
     ;

that don't conflict at all with FLOATING_POINT_LITERAL. :)

You get all the benefits of easy grammar writing ala lex/flex, but it 
still calls methods and can do recursion etc... ala LL(k) :)  Woohoo!  
This kicks ass. :)  Oh, and it will naturally allow semantic predicates 
everywhere for those really nasty nasty lexical problems.  Boy do I 
love parsing. :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From a_rueckert at gmx.net  Sat Dec  4 13:23:03 2004
From: a_rueckert at gmx.net (Andreas Rueckert)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] PHP Grammar
In-Reply-To: <cop8f5$hdb$1@sea.gmane.org>
References: <cop8f5$hdb$1@sea.gmane.org>
Message-ID: <200412042223.03943.a_rueckert@gmx.net>


Hi!

On Dec 3th, 2004 09:34, Sebastian Bergmann wrote:
>  Does a grammar for PHP (PHP 5 preferably) exist? I could not find one
>  on the website or through Google.

I think you were informed about our attempts to create a PHP 4 grammar? 
Unfortunately, it never reached a stage where it parsed all the PHP 
constructs, but it passed at least some tests. Maybe we could release it 
under some OSS license, so it could be used as a start?

Ciao,
Andreas



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From jbb at acm.org  Sat Dec  4 19:27:35 2004
From: jbb at acm.org (John B. Brodie)
Date: Mon Dec 20 16:17:42 2004
Subject: [antlr-interest] Parse quotes with negation?
In-Reply-To: <cotukh+50pb@eGroups.com> (message from derek_kusiak on Sun, 05
	Dec 2004 03:17:37 +0000)
References: <cotukh+50pb@eGroups.com>
Message-ID: <E1Can3f-00063L-00@gecko>


Derek :- 

>I'm parsing a file format that contains quote-delimited string
>literals.  In my lexer I deal with them like this:
>
>  STRING_LITERAL : '"' (~'"')* '"' ;
>
>...deleted...

Have you defined your charVocabulary lexer option correctly?

Hope this helps...


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From derek_kusiak at yahoo.com  Sat Dec  4 19:17:37 2004
From: derek_kusiak at yahoo.com (derek_kusiak)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] Parse quotes with negation?
Message-ID: <cotukh+50pb@eGroups.com>



I'm parsing a file format that contains quote-delimited string
literals.  In my lexer I deal with them like this:

  STRING_LITERAL : '"' (~'"')* '"' ;

If my input is a simple string like "hello world", all is well.
Other string work well too (eg, "hello-world", "hello#world").
However, some characters trigger errors.  For example,
"hello_world" causes this:

  expecting ''"'', found ''_''

I don't have any rules that mention '_' and I don't know why
it would be treated differently than any other ~'"' character.
I get similar errors with other chars, like '*' and '&', in
that position.  Any idea what I'm missing?





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From derek_kusiak at yahoo.com  Sat Dec  4 20:33:05 2004
From: derek_kusiak at yahoo.com (derek_kusiak)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] Re: Parse quotes with negation?
In-Reply-To: <E1Can3f-00063L-00@gecko>
Message-ID: <cou321+3mf2@eGroups.com>



--- "John B. Brodie" <jbb@a...> wrote:
> Derek :- 
> 
> >I'm parsing a file format that contains quote-delimited string
> >literals.  In my lexer I deal with them like this:
> >
> >  STRING_LITERAL : '"' (~'"')* '"' ;
> >
> >...deleted...
> 
> Have you defined your charVocabulary lexer option correctly?
> 
> Hope this helps...

Yes, it helps: I did not have charVocabulary set at all.  I'm
sure that's a classic newbie mistake.  I suppose that's why I
was having errors with exactly those characters NOT already
mentioned in my grammar.

Many thanks, John.





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From wiggjd at lsbu.ac.uk  Mon Dec  6 05:11:01 2004
From: wiggjd at lsbu.ac.uk (David Wigg)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] Re: ANTLR 2.7.4: C++ grammar
Message-ID: <41B45A65.6010900@lsbu.ac.uk>


Hello Francis,

Thanks for your message about run time errors with the generated 
C++ compiler from our C++ parser CPP_parser.g.

This is a new problem for me which may have surfaced because 
MSVC 7.1 is more strict than previous versions. We need to 
clarify the new situation as it could have implications for all 
grammars.

A similar problem was quoted by jimmyatwork1@yahoo.com in 
antlr-interest digest no. 1893 on 2 December. This was for char 
*s in scope_override.

I wonder if this problem is picked up during a run in those 
cases where a potential definition of an uninitialised pointer 
to character has been bypassed by selection in non guessing mode?

What effect does this problem have? Is it just a warning or does 
it stop the run?

My understanding is that pointer to character would be 
automatically initialised to a null pointer.

If I am correct then a return value of null should not 
necessarily be a problem. (It could be correct?)

If so, then MSVC 7.1 must mark these variables specially when 
initialised (even with null).

Does this mean that to be on the safe side that when we specify 
a return value in a production we should initialise it?

For example,

qualified_ctor_id returns [char *q = '';]

So far the problem seems to have arisen only with pointers to 
characters. What about other sorts of pointers and integers etc.?

David.






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-362dq3v5YVgRPdNPsZYnvFw at yahoogroups.com  Mon Dec  6 05:28:51 2004
From: antlr-interest-accept-362dq3v5YVgRPdNPsZYnvFw at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:43 2004
Subject: MODERATE -- sun2@public.kherson.ua posted to antlr-interest
Message-ID: <1102339731.350.86553.m24@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  sun2@public.kherson.ua 

The message summary:
--------------------
FROM: sun2@public.kherson.ua 
DATE: Mon, 06 Dec 2004 03:26:33 +0200 
SUBJECT: Converting ANTLR-Lexer to FLEX 

I have such ANTLR-lexer rule: 

STRING_LITERAL : QUOTE! ( ~('\'') | ( QUOTE QUOTE! ) )* 
QUOTE! ; 

How can I write this rule on the Flex? I can't understand 
how to do this operation (QUOTE!) in the Flex. 

-- Best regards, Serg 

--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=399 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-362dq3v5YVgRPdNPsZYnvFw@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: Serg <sun2@public.kherson.ua>
Subject: Converting ANTLR-Lexer to FLEX
Date: Mon, 06 Dec 2004 03:26:33 +0200
Size: 1784
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041206/fa7e62be/attachment.mht
From sun2 at public.kherson.ua  Sun Dec  5 17:26:33 2004
From: sun2 at public.kherson.ua (Serg)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] Converting ANTLR-Lexer to FLEX
In-Reply-To: <1102232640.310.77184.m12@yahoogroups.com>
Message-ID: <BDD981E9.285B%sun2@public.kherson.ua>



I have such ANTLR-lexer rule:

STRING_LITERAL
    :   QUOTE! 
            ( ~('\'')
            | ( QUOTE QUOTE! )
            )*
        QUOTE!
    ;

How can I write this rule on the Flex?
I can't understand how to do this operation (QUOTE!) in the Flex.

-- 
Best regards,
Serg







 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ric.klaren at gmail.com  Mon Dec  6 07:03:45 2004
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] Converting ANTLR-Lexer to FLEX
In-Reply-To: <BDD981E9.285B%sun2@public.kherson.ua>
References: <1102232640.310.77184.m12@yahoogroups.com>
	 <BDD981E9.285B%sun2@public.kherson.ua>
Message-ID: <bc607a4e04120607036648732c@mail.gmail.com>


Hi,

On Mon, 06 Dec 2004 03:26:33 +0200, Serg <sun2@public.kherson.ua> wrote:
> I have such ANTLR-lexer rule:
> 
> STRING_LITERAL
>     :   QUOTE!
>             ( ~('\'')
>             | ( QUOTE QUOTE! )
>             )*
>         QUOTE!
>     ;
> 
> How can I write this rule on the Flex?
> I can't understand how to do this operation (QUOTE!) in the Flex.

You normally use a lexer state for inside the string. The
examples/cpp/flexLexer example from the distribution has a lexer that
has a way to do this in flex/lex. It might be that this example was
not yet updated in the 2.7.4 release in that case pickup a snapshot
from http://wwwhome.cs.utwente.nl/~klaren/antlr/ that one should have
it I think. Or drop me a line personally and I'll send the .l file to
you.

Cheers,

Ric


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From sunshine at public.kherson.ua  Mon Dec  6 07:47:02 2004
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] TIME between Lex and Parser
Message-ID: <BDDA4B96.24D99%sunshine@public.kherson.ua>


Hi All,

People say that if to use FLEX we will be faster. Okay.
I have see on this list benches that FLEX is 4 times faster of ANTLR lexer.

But I wonder, how total time of parsing in splinted between Lexer and
Parser?

Anybody have such info ?



-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From francis.andre at easynet.fr  Mon Dec  6 13:49:17 2004
From: francis.andre at easynet.fr (Francis ANDRE)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] Re: ANTLR 2.7.4: C++ grammar
References: <41B45A65.6010900@lsbu.ac.uk>
Message-ID: <008101c4dbdd$6f846720$0a02a8c0@asterix>


> What effect does this problem have? Is it just a warning or does
> it stop the run?

It stops the run by a abort popup window
it is a security control done by the MSVC runtime that checks that each
automatic used variable gets a value before beeing referenced


> My understanding is that pointer to character would be
> automatically initialised to a null pointer.
As any true guess, it could be wrong or right...guess what, your is wrong
(you are not in the sandbox of Java)


Cheers

A good friend will come bail you out of jail..........
but, a true friend....will be sitting next to you saying:
 "...that was fun."

----- Original Message ----- 
From: "David Wigg" <wiggjd@lsbu.ac.uk>
To: <francis.andre@easynet.fr>; <antlr-interest@yahoogroups.com>
Sent: Monday, December 06, 2004 2:11 PM
Subject: [antlr-interest] Re: ANTLR 2.7.4: C++ grammar


>
> Hello Francis,
>
> Thanks for your message about run time errors with the generated
> C++ compiler from our C++ parser CPP_parser.g.
>
> This is a new problem for me which may have surfaced because
> MSVC 7.1 is more strict than previous versions. We need to
> clarify the new situation as it could have implications for all
> grammars.
>
> A similar problem was quoted by jimmyatwork1@yahoo.com in
> antlr-interest digest no. 1893 on 2 December. This was for char
> *s in scope_override.
>
> I wonder if this problem is picked up during a run in those
> cases where a potential definition of an uninitialised pointer
> to character has been bypassed by selection in non guessing mode?
>
> What effect does this problem have? Is it just a warning or does
> it stop the run?
>
> My understanding is that pointer to character would be
> automatically initialised to a null pointer.
>
> If I am correct then a return value of null should not
> necessarily be a problem. (It could be correct?)
>
> If so, then MSVC 7.1 must mark these variables specially when
> initialised (even with null).
>
> Does this mean that to be on the safe side that when we specify
> a return value in a production we should initialise it?
>
> For example,
>
> qualified_ctor_id returns [char *q = '';]
>
> So far the problem seems to have arisen only with pointers to
> characters. What about other sorts of pointers and integers etc.?
>
> David.
>
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pauljlucas at mac.com  Mon Dec  6 14:12:08 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] exceptions in the lexer
Message-ID: <Pine.LNX.4.44.0412061411140.5327-100000@g4.pauljlucas.org>


	Will the next 2.x ANTLR release have support for adding one's
	own exception specifications in the lexer (just like the
	parser)?

	- Paul



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Mon Dec  6 15:40:08 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] exceptions in the lexer
In-Reply-To: <Pine.LNX.4.44.0412061411140.5327-100000@g4.pauljlucas.org>
References: <Pine.LNX.4.44.0412061411140.5327-100000@g4.pauljlucas.org>
Message-ID: <2A219F3B-47E0-11D9-BB14-000A95891192@cs.usfca.edu>



On Dec 6, 2004, at 2:12 PM, Paul J. Lucas wrote:

>
> 	Will the next 2.x ANTLR release have support for adding one's
> 	own exception specifications in the lexer (just like the
> 	parser)?

You mean you can't specify exceptions on lexer rules or on the 
auto-generated nextToken rule?

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pauljlucas at mac.com  Mon Dec  6 15:38:42 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] exceptions in the lexer
In-Reply-To: <2A219F3B-47E0-11D9-BB14-000A95891192@cs.usfca.edu>
Message-ID: <Pine.LNX.4.44.0412061538230.5327-100000@g4.pauljlucas.org>


On Mon, 6 Dec 2004, Terence Parr wrote:

> On Dec 6, 2004, at 2:12 PM, Paul J. Lucas wrote:
> 
> >
> > 	Will the next 2.x ANTLR release have support for adding one's
> > 	own exception specifications in the lexer (just like the
> > 	parser)?
> 
> You mean you can't specify exceptions on lexer rules or on the 
> auto-generated nextToken rule?

	The former.

	- Paul



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Mon Dec  6 16:08:40 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] exceptions in the lexer
In-Reply-To: <Pine.LNX.4.44.0412061538230.5327-100000@g4.pauljlucas.org>
References: <Pine.LNX.4.44.0412061538230.5327-100000@g4.pauljlucas.org>
Message-ID: <261A9D3A-47E4-11D9-BB14-000A95891192@cs.usfca.edu>



On Dec 6, 2004, at 3:38 PM, Paul J. Lucas wrote:

>
> On Mon, 6 Dec 2004, Terence Parr wrote:
>
>> On Dec 6, 2004, at 2:12 PM, Paul J. Lucas wrote:
>>
>>>
>>> 	Will the next 2.x ANTLR release have support for adding one's
>>> 	own exception specifications in the lexer (just like the
>>> 	parser)?
>>
>> You mean you can't specify exceptions on lexer rules or on the
>> auto-generated nextToken rule?
>
> 	The former.

Interesting.  I'll think about what the heck I was thinking.  Are you 
familiar with the filter option on the lexer grammar?

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pauljlucas at mac.com  Mon Dec  6 16:10:01 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] exceptions in the lexer
In-Reply-To: <261A9D3A-47E4-11D9-BB14-000A95891192@cs.usfca.edu>
Message-ID: <Pine.LNX.4.44.0412061606350.5327-100000@g4.pauljlucas.org>


On Mon, 6 Dec 2004, Terence Parr wrote:

> Are you familiar with the filter option on the lexer grammar?

	Yes in the sense that I've read that bit of the documentation,
	but I've never used it.

	I don't want my entire lexer to be a filter since I need it to
	be a real lexer for a parser.

	My particular case at hand is dealing with pragmas that can
	appear anywhere comments can.  Since comments are most easily
	handled in the lexer, I handle pragmas there to for the same
	reason.  The problem is what to do if there's an error in a
	pragma.  The lexer can't throw user-defined exceptions.  (I
	might be able to work around it by hiding the real exception
	inside a Runtime exception, but that's ugly.

	- Paul



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Mon Dec  6 17:03:00 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] exceptions in the lexer
In-Reply-To: <Pine.LNX.4.44.0412061606350.5327-100000@g4.pauljlucas.org>
References: <Pine.LNX.4.44.0412061606350.5327-100000@g4.pauljlucas.org>
Message-ID: <BD7F46EC-47EB-11D9-86C1-000A95891192@cs.usfca.edu>



On Dec 6, 2004, at 4:10 PM, Paul J. Lucas wrote:

>
> On Mon, 6 Dec 2004, Terence Parr wrote:
>
>> Are you familiar with the filter option on the lexer grammar?
>
> 	Yes in the sense that I've read that bit of the documentation,
> 	but I've never used it.
>
> 	I don't want my entire lexer to be a filter since I need it to
> 	be a real lexer for a parser.
>
> 	My particular case at hand is dealing with pragmas that can
> 	appear anywhere comments can.  Since comments are most easily
> 	handled in the lexer, I handle pragmas there to for the same
> 	reason.  The problem is what to do if there's an error in a
> 	pragma.  The lexer can't throw user-defined exceptions.  (I
> 	might be able to work around it by hiding the real exception
> 	inside a Runtime exception, but that's ugly.

Ah.  An example makes everything clear.  What precisely do you want to 
happen when there is an error?  I guess at minimum an error, but the 
question is: how to trap it?  Recovery is also an issue.  Let me look 
at the output for a second...

Ok, generated nextToken looks like it catches and rethrows:

             catch (RecognitionException e) {
                 throw new TokenStreamRecognitionException(e);
             }

Shoot.  Well, the token stream exception can be caught easily in a 
TokenStream wrapped around the Lexer.  You can even ask it to retry for 
another token.

Ok, for a REAL hack, you could wrap a reference to a lexer rule with 
actions containing a "try {" and then "} catch...", though ANTLR might 
get pissed about the unbalanced curlies.  Might have to escape them 
with \.

Hmm...I'd probably go for the TokenStream filter that catches the 
exception.  Easiest thing.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-jD4LTlPeSdDpWLIirxNPZTg at yahoogroups.com  Mon Dec  6 17:15:59 2004
From: antlr-interest-accept-jD4LTlPeSdDpWLIirxNPZTg at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:43 2004
Subject: MODERATE -- namitakaur83@yahoo.com posted to antlr-interest
Message-ID: <1102382159.291.89679.m3@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  namitakaur83@yahoo.com 

The message summary:
--------------------
FROM: namitakaur83@yahoo.com 
DATE: Mon, 6 Dec 2004 17:15:56 -0800 (PST) 
SUBJECT: Varmas is open minded and looking for unmarried female. Look at his profile. 

--------------------------------- Do you Yahoo!? Yahoo! Mail
- Easier than ever with enhanced search. Learn more.
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=400 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-jD4LTlPeSdDpWLIirxNPZTg@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: namita kaur <namitakaur83@yahoo.com>
Subject: Varmas is open minded and looking for unmarried female. Look at his profile.
Date: Mon, 6 Dec 2004 17:15:56 -0800 (PST)
Size: 2727
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041207/8d8d7de4/attachment.mht
From dcaton at shorelinesoftware.com  Mon Dec  6 17:58:44 2004
From: dcaton at shorelinesoftware.com (Don Caton)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] exceptions in the lexer
In-Reply-To: <BD7F46EC-47EB-11D9-86C1-000A95891192@cs.usfca.edu>
Message-ID: <1102384622.26264@mx9.mysite4now.com>


> -----Original Message-----
> From: Terence Parr [mailto:parrt@cs.usfca.edu] 
> Sent: Monday, December 06, 2004 8:03 PM
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] exceptions in the lexer
> 
> Ok, generated nextToken looks like it catches and rethrows:
> 
>              catch (RecognitionException e) {
>                  throw new TokenStreamRecognitionException(e);
>              }
> 

Ter:

What's the point of this?  TokenStreamRecognitionException simply wraps a
RecognitionException and does not appear to add any useful functionality.
In fact, it removes functionality by preventing access to the original
RecognitionException because it is stored in a private member of
TokenStreamRecognitionException.

This makes it impossible to retrieve the line and column information from
the RecognitionException.  Which in turn makes it impossible to display
anything other than the hard coded error message using the toString() method
provided by TokenStreamRecognitionException.

TokenStreamRecognitionException itself is a do-nothing subclass of
TokenStreamException, which in turn is a do-nothing subclass of
AntlrException.  Why the complexity?  Are there some backwards-compatibility
reasons for this?

At the risk of breaking existing code, I'd like to see a simplified error
reporting mechanism in 2.7.5 where a single exception type is thrown,
perhaps with a "reason" code or enumeration.  Then we only need to handle a
single exception type.  Or at least, have every exception inherit from a
base class, don't wrap one exception up in another.

Just my 2 cents.

Don




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Mon Dec  6 18:52:02 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] heh, antlr.org's search works now (sort of)
Message-ID: <F8F5BE4C-47FA-11D9-86C1-000A95891192@cs.usfca.edu>


Howdy,

Check out:

http://www.antlr.org/search/results?query=token

The search boxes should work at antlr.org now.  Got some work to do on 
it, but wanted to show something and let people look at it.  The 
parameters to play with are which sites to search, how deep, etc...  
Oh, and obviously i need links to "more" results.

currently i spider antlr.org, gmane's antlr stuff, jguru's antlr faq.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Matthew.Ford at forward.com.au  Tue Dec  7 00:30:08 2004
From: Matthew.Ford at forward.com.au (matthew ford)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] exceptions in the lexer
References: <Pine.LNX.4.44.0412061606350.5327-100000@g4.pauljlucas.org>
Message-ID: <001001c4dc36$f657cb30$0400a8c0@NOTEBOOK>


Hey, Just extend you user-defined exceptions from RuntimeException and throw
them.
You catch all your RuntimeExceptions don't you?
Remember OutOfMemoryException is not necessarly fatal.
matthew
----- Original Message ----- 
From: "Paul J. Lucas" <pauljlucas@mac.com>
To: <antlr-interest@yahoogroups.com>
Sent: Tuesday, December 07, 2004 11:10 AM
Subject: Re: [antlr-interest] exceptions in the lexer


>
> On Mon, 6 Dec 2004, Terence Parr wrote:
>
> > Are you familiar with the filter option on the lexer grammar?
>
> Yes in the sense that I've read that bit of the documentation,
> but I've never used it.
>
> I don't want my entire lexer to be a filter since I need it to
> be a real lexer for a parser.
>
> My particular case at hand is dealing with pragmas that can
> appear anywhere comments can.  Since comments are most easily
> handled in the lexer, I handle pragmas there to for the same
> reason.  The problem is what to do if there's an error in a
> pragma.  The lexer can't throw user-defined exceptions.  (I
> might be able to work around it by hiding the real exception
> inside a Runtime exception, but that's ugly.
>
> - Paul
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From harald.m.mueller at bigfoot.com  Tue Dec  7 01:48:05 2004
From: harald.m.mueller at bigfoot.com (Harald Mueller)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] exceptions in the lexer
References: <001001c4dc36$f657cb30$0400a8c0@NOTEBOOK>
Message-ID: <28567.1102412885@www6.gmx.net>


> 
> Hey, Just extend you user-defined exceptions from RuntimeException and
> throw
> them.

He explicitly didn't want to do this - but I also do it (using a
WrappingRuntimeException which I need at other places anyway (e.g. for the
Runnable.run() method)).

> You catch all your RuntimeExceptions don't you?
> Remember OutOfMemoryException is not necessarly fatal.

This is not an Exception, but an Error - you would never catch this.

Regards
Harald M. M?ller

> matthew
> ----- Original Message ----- 
> From: "Paul J. Lucas" <pauljlucas@mac.com>
> To: <antlr-interest@yahoogroups.com>
> Sent: Tuesday, December 07, 2004 11:10 AM
> Subject: Re: [antlr-interest] exceptions in the lexer
> 
> 
> >
> > On Mon, 6 Dec 2004, Terence Parr wrote:
> >
> > > Are you familiar with the filter option on the lexer grammar?
> >
> > Yes in the sense that I've read that bit of the documentation,
> > but I've never used it.
> >
> > I don't want my entire lexer to be a filter since I need it to
> > be a real lexer for a parser.
> >
> > My particular case at hand is dealing with pragmas that can
> > appear anywhere comments can.  Since comments are most easily
> > handled in the lexer, I handle pragmas there to for the same
> > reason.  The problem is what to do if there's an error in a
> > pragma.  The lexer can't throw user-defined exceptions.  (I
> > might be able to work around it by hiding the real exception
> > inside a Runtime exception, but that's ugly.
> >
> > - Paul
> >
> >
> >
> >
> > Yahoo! Groups Links
> >
> >
> >
> >
> >
> >
> >
> 
> 
> 
>  
> Yahoo! Groups Links
> 
> 
> 
>  
> 
> 
> 

-- 
NEU +++ DSL Komplett von GMX +++ http://www.gmx.net/de/go/dsl
GMX DSL-Netzanschluss + Tarif zum superg?nstigen Komplett-Preis!


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Matthew.Ford at forward.com.au  Tue Dec  7 02:24:02 2004
From: Matthew.Ford at forward.com.au (matthew ford)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] exceptions in the lexer
References: <001001c4dc36$f657cb30$0400a8c0@NOTEBOOK> <28567.1102412885@www6.gmx.net>
Message-ID: <001701c4dc46$df463c00$0400a8c0@NOTEBOOK>


Well JEdit catches this and recovers.
Why can't I?
matthew

----- Original Message ----- 
From: "Harald Mueller" <harald.m.mueller@bigfoot.com>
To: <antlr-interest@yahoogroups.com>
Sent: Tuesday, December 07, 2004 8:48 PM
Subject: Re: [antlr-interest] exceptions in the lexer


>
> >
> > Hey, Just extend you user-defined exceptions from RuntimeException and
> > throw
> > them.
>
> He explicitly didn't want to do this - but I also do it (using a
> WrappingRuntimeException which I need at other places anyway (e.g. for the
> Runnable.run() method)).
>
> > You catch all your RuntimeExceptions don't you?
> > Remember OutOfMemoryException is not necessarly fatal.
>
> This is not an Exception, but an Error - you would never catch this.
>
> Regards
> Harald M. M?ller
>
> > matthew
> > ----- Original Message ----- 
> > From: "Paul J. Lucas" <pauljlucas@mac.com>
> > To: <antlr-interest@yahoogroups.com>
> > Sent: Tuesday, December 07, 2004 11:10 AM
> > Subject: Re: [antlr-interest] exceptions in the lexer
> >
> >
> > >
> > > On Mon, 6 Dec 2004, Terence Parr wrote:
> > >
> > > > Are you familiar with the filter option on the lexer grammar?
> > >
> > > Yes in the sense that I've read that bit of the documentation,
> > > but I've never used it.
> > >
> > > I don't want my entire lexer to be a filter since I need it to
> > > be a real lexer for a parser.
> > >
> > > My particular case at hand is dealing with pragmas that can
> > > appear anywhere comments can.  Since comments are most easily
> > > handled in the lexer, I handle pragmas there to for the same
> > > reason.  The problem is what to do if there's an error in a
> > > pragma.  The lexer can't throw user-defined exceptions.  (I
> > > might be able to work around it by hiding the real exception
> > > inside a Runtime exception, but that's ugly.
> > >
> > > - Paul
> > >
> > >
> > >
> > >
> > > Yahoo! Groups Links
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> >
> >
> >
> >
> > Yahoo! Groups Links
> >
> >
> >
> >
> >
> >
> >
>
> -- 
> NEU +++ DSL Komplett von GMX +++ http://www.gmx.net/de/go/dsl
> GMX DSL-Netzanschluss + Tarif zum superg?nstigen Komplett-Preis!
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From harald.m.mueller at bigfoot.com  Tue Dec  7 02:56:48 2004
From: harald.m.mueller at bigfoot.com (Harald Mueller)
Date: Mon Dec 20 16:17:43 2004
Subject: [getting OT ...] Re: [antlr-interest] exceptions in the lexer
References: <001701c4dc46$df463c00$0400a8c0@NOTEBOOK>
Message-ID: <30586.1102417008@www6.gmx.net>


> 
> Well JEdit catches this and recovers.
> Why can't I?

You can :-) But there's no guarantee it works. Here is the text from the JLS
(section 8.4.4) - which I interpret as a more constructive comment than
mine:

> Exceptions that are represented by the subclasses of class Error, for
example OutOfMemoryError, are thrown due to a failure in or of the virtual
machine. Many of these are the result of linkage failures and can occur at
unpredictable points in the execution of a program. Sophisticated programs
may yet wish to catch and attempt to recover from some of these conditions. 

Regards
Harald M. Mueller

> matthew
> 
> ----- Original Message ----- 
> From: "Harald Mueller" <harald.m.mueller@bigfoot.com>
> To: <antlr-interest@yahoogroups.com>
> Sent: Tuesday, December 07, 2004 8:48 PM
> Subject: Re: [antlr-interest] exceptions in the lexer
> 
> 
> >
> > >
> > > Hey, Just extend you user-defined exceptions from RuntimeException and
> > > throw
> > > them.
> >
> > He explicitly didn't want to do this - but I also do it (using a
> > WrappingRuntimeException which I need at other places anyway (e.g. for
> the
> > Runnable.run() method)).
> >
> > > You catch all your RuntimeExceptions don't you?
> > > Remember OutOfMemoryException is not necessarly fatal.
> >
> > This is not an Exception, but an Error - you would never catch this.
> >
> > Regards
> > Harald M. M?ller
> >
> > > matthew
> > > ----- Original Message ----- 
> > > From: "Paul J. Lucas" <pauljlucas@mac.com>
> > > To: <antlr-interest@yahoogroups.com>
> > > Sent: Tuesday, December 07, 2004 11:10 AM
> > > Subject: Re: [antlr-interest] exceptions in the lexer
> > >
> > >
> > > >
> > > > On Mon, 6 Dec 2004, Terence Parr wrote:
> > > >
> > > > > Are you familiar with the filter option on the lexer grammar?
> > > >
> > > > Yes in the sense that I've read that bit of the documentation,
> > > > but I've never used it.
> > > >
> > > > I don't want my entire lexer to be a filter since I need it to
> > > > be a real lexer for a parser.
> > > >
> > > > My particular case at hand is dealing with pragmas that can
> > > > appear anywhere comments can.  Since comments are most easily
> > > > handled in the lexer, I handle pragmas there to for the same
> > > > reason.  The problem is what to do if there's an error in a
> > > > pragma.  The lexer can't throw user-defined exceptions.  (I
> > > > might be able to work around it by hiding the real exception
> > > > inside a Runtime exception, but that's ugly.
> > > >
> > > > - Paul
> > > >
> > > >
> > > >
> > > >
> > > > Yahoo! Groups Links
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > >
> > >
> > >
> > >
> > > Yahoo! Groups Links
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> >
> > -- 
> > NEU +++ DSL Komplett von GMX +++ http://www.gmx.net/de/go/dsl
> > GMX DSL-Netzanschluss + Tarif zum superg?nstigen Komplett-Preis!
> >
> >
> >
> > Yahoo! Groups Links
> >
> >
> >
> >
> >
> >
> >
> 
> 
> 
>  
> Yahoo! Groups Links
> 
> 
> 
>  
> 
> 
> 

-- 
GMX ProMail mit bestem Virenschutz http://www.gmx.net/de/go/mail
+++ Empfehlung der Redaktion +++ Internet Professionell 10/04 +++


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pauljlucas at mac.com  Tue Dec  7 07:22:23 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] exceptions in the lexer
In-Reply-To: <001001c4dc36$f657cb30$0400a8c0@NOTEBOOK>
Message-ID: <Pine.LNX.4.44.0412070722040.5327-100000@g4.pauljlucas.org>


On Tue, 7 Dec 2004, matthew ford wrote:

> Just extend you user-defined exceptions from RuntimeException and throw
> them.

	I'm aware of that, but prefer not to do it.

	- Paul



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From mail at martin-probst.com  Tue Dec  7 08:44:49 2004
From: mail at martin-probst.com (Martin Probst)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] make rules for *.g -> outputs
In-Reply-To: <200412041719.18900.Sebastian.Kaliszewski@softax.pl>
References: <200412031617.LAA18675@us54.synopsys.com>
	 <1102098921.27405.6.camel@narr.homeip.net>
	 <200412041719.18900.Sebastian.Kaliszewski@softax.pl>
Message-ID: <1102437889.2455.26.camel@narr.homeip.net>


Well, I knew there was a solution to that ;-)

Thanks for the Makefile, I'll try it out tomorrow!

mfg
Martin




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Tue Dec  7 11:06:29 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] Error recovery contortion
In-Reply-To: <Pine.LNX.4.44.0412021057260.13608-100000@g4.pauljlucas.org>
References: <Pine.LNX.4.44.0412021057260.13608-100000@g4.pauljlucas.org>
Message-ID: <19E1FA60-4883-11D9-86C1-000A95891192@cs.usfca.edu>



On Dec 2, 2004, at 12:01 PM, Paul J. Lucas wrote:
> 	Some background: the language I'm parsing is XQuery
> 	<http://www.w3.org/TR/xquery/> that, among other annoyances, is
> 	keyword-free.  This makes recovery much harder because the lexer
> 	is stateful.
>
> 	As a first pass, I want to recover from syntax errors inside
> 	function declarations only.  I can't simply use ANTLR's default
> 	error-recovery mechanism because I have to sync to a known
> 	token and reset the lexer's state.  (ANTLR's default mechanism
> 	sync to one of the tokens in the follow set.)  Function
> 	declarations in XQuery end with a ';' so, upon error, I throw
> 	away all tokens until I get to that.  (I will hopefully be able
> 	to imporove this in the furture, but for now, it's good
> 	enough.)

Hi Paul,

Well, that "sync to semicolon" is a normal thing to do 
(consumeUntil(SEMI)); alas, resetting lexical state might be a hassle, 
though a method call to the lexer can easily be initiated.

> 	Setting defaultErrorHandler=false makes this work fine for
> 	syntax errors inside function declarations.  I have something
> 	like this:
>
> 		functionDeclBody
> 		    : enclosedExpr
> 		    ;
> 		    exception
> 		    catch [ RecognitionException re ] {
> 		        ## = #([ERROR,"ERROR"]);
> 			recover( re );
> 		    }
>
> 	where recover() is my own, working recovery function.  Hence,
> 	if an exception is thrown during enclosedExpr, it will be
> 	caught and recovered from and the generated AST is just fine.
> 	So far, so good.

Yep. :)

> 	But, if there's a syntax error *outside* a function
> 	declaration, the generated AST is trashed.

Oh, right because the error makes the invoking rule exit without 
collecting the tree associated with the functions.

>  Another requirement
> 	is that I keep the generated AST up to the point of the error
> 	outside a function declaration.  As I've mentioned previously,
> 	the reason the AST gets trashed is because when an exception is
> 	thrown and there's no recovery in place, the AST isn't stitched
> 	together because it's done only upon successful function
> 	*return*: stack unwinding upon an exception bypassed normal
> 	function returns.

Yeah, I never worried about this problem before.  Nasty.

> 	OK, so I tried setting defaultErrorHandler=true.  This makes
> 	the generated AST be fine for errors outside of function
> 	declarations, but now the problem is that ANTLR recovers all by
> 	itself while doing enclosedExpr and functionDeclBody above is
> 	never given the opportunity to catch the exception and do the
> 	correct recovery.  Hence, this breaks my recovery mechanism.

Are you sure?  The following code generates precisely the same output 
for func() with and without the "defaultErrorHandler=false;".

class T extends Parser;

options {
         buildAST=true;
         defaultErrorHandler=true;
}

prog : START func (COMMA func)* STOP ;

func : ID STUFF SEMI ;
exception
catch [ RecognitionException re ] {
                     ## = #([ERROR,"ERROR"]);
                     recover( re );
     }

Could you add an exception handle to each rule?  Labor-intensive, but 
precise, right?

> 	Sigh...

You sound like John Mitchell ;)

> 	So I looked at the ANTLR-generated Java code: it calls
> 	reportError() during its own error recovery.  So what I need to
> 	do is continue to allow it to recover as normal (so my AST is
> 	preserved) *except* when the current call stack contains
> 	functionDeclBody, i.e., if reportError() is called "through"
> 	functionDeclBody, do my own recovery instead.  OK, so set a flag
> 	in my parser:
>
> 		functionDeclBody
> 		{
> 		    m_recoverable = true;
> 		}
> 		    : enclosedExpr
> 		        {
> 		            m_recoverable = false;
> 		        }
> 		    ;
> 		    exception
> 		    catch [ RecognitionException re ] {
> 		        ## = #([ERROR,"ERROR"]);
> 			recover( re );
> 		    }
>
> 	and override reportError() like:
>
> 		public void reportError( RecognitionException re ) {
> 		    final boolean recoverable = m_recoverable;
> 		    m_recoverable = false;
> 		    if ( recoverable )
> 		       throw new ANTLR_WorkaroundException( re );
>
> 		    // ... other recovery not relevant to this post ...
> 		}

An interesting approach, though I'm not sure you need it yet.

> 	i.e., if I'm doing my own recovery, I want any exception caught
> 	by ANTLR's recovery mechanism to be rethrown so the stack
> 	unwinds back up to functionDeclBody.  One slight problem:
> 	reportError() isn't declared to throw any exception.  Hence, I
> 	created the ANTLR_WorkaroundException class that extends
> 	RuntimeException to work around this annoyance.

Only an annoyance, mein herr, because you want reportError to do more 
than it was meant to ;)

> 	OK, I'm pretty sure this all works, but it requires a lot of
> 	programming contortion, more than should be necessary.

Agreed.

> 	A suggestion is to change the default exception-handling code
> 	emitted to something like:
>
> 		catch ( RecognitionException ex ) {
> 		    reportError( ex );
> 		    recover( ex, _someTokenSet );
> 		}
>
> 	where recover() is a new method in Parser.java that, by
> 	default, is:
>
> 		void recover( RecognotionException ex, BitSet set )
> 		    throws TokenStreamException
> 		{
> 		    consume();
> 		    consume( set );
> 		}
>
> 	This will allow a user to override what recovery does without
> 	having to use the hack of stuffing such code into reportError()
> 	(where it doesn't conceptually belong).

Yes, this is reasonable.  We should change:

		catch (RecognitionException ex) {
			reportError(ex);
			consume();
			consumeUntil(_tokenSet_0);
		}

to
		catch (RecognitionException ex) {
			reportError(ex);
			recover(ex, _tokenSet_0);
		}

For 2.7.5.  Anybody got a problem with this?  I would be just factoring 
out the code into a method.

Note that for 3.0, somebody suggested that we have a template with all 
the appropriate goodies that people can use like a macro, though a 
method is similar.  The template approach is nicer in some sense 
because it could access local variables/parameters from the rule 
method.

Anyway, my $0.02.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Tue Dec  7 11:12:39 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] exceptions in the lexer
In-Reply-To: <1102384622.26264@mx9.mysite4now.com>
References: <1102384622.26264@mx9.mysite4now.com>
Message-ID: <F69AE41A-4883-11D9-86C1-000A95891192@cs.usfca.edu>



On Dec 6, 2004, at 5:58 PM, Don Caton wrote:
>> Ok, generated nextToken looks like it catches and rethrows:
>>
>>              catch (RecognitionException e) {
>>                  throw new TokenStreamRecognitionException(e);
>>              }
>>
>
> Ter:
>
> What's the point of this?  TokenStreamRecognitionException simply 
> wraps a
> RecognitionException and does not appear to add any useful 
> functionality.

I believe I wanted TokenStream.nextToken() to be independent of the 
normal recognition errors etc... found in antlr's lexers; might be 
using another tool.

public interface TokenStream {
     public Token nextToken() throws TokenStreamException;
}

> In fact, it removes functionality by preventing access to the original
> RecognitionException because it is stored in a private member of
> TokenStreamRecognitionException.

Ack!  Heh, wait, looks public:

public class TokenStreamRecognitionException extends 
TokenStreamException {
     public RecognitionException recog;
....
}

> This makes it impossible to retrieve the line and column information 
> from
> the RecognitionException.  Which in turn makes it impossible to display
> anything other than the hard coded error message using the toString() 
> method
> provided by TokenStreamRecognitionException.
>
> TokenStreamRecognitionException itself is a do-nothing subclass of
> TokenStreamException, which in turn is a do-nothing subclass of
> AntlrException.  Why the complexity?  Are there some 
> backwards-compatibility
> reasons for this?

Do nothing, but mean something ;)

> At the risk of breaking existing code, I'd like to see a simplified 
> error
> reporting mechanism in 2.7.5 where a single exception type is thrown,
> perhaps with a "reason" code or enumeration.  Then we only need to 
> handle a
> single exception type.  Or at least, have every exception inherit from 
> a
> base class, don't wrap one exception up in another.

Good thoughts, Don.  I'm afraid of breaking stuff for 2.7.5 though.  
This will be my next topic (error recovery) for 3.0 as I've got 3.0 
good enough to handle Java parsing/lexing now.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pauljlucas at mac.com  Tue Dec  7 11:09:24 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] Error recovery contortion
In-Reply-To: <19E1FA60-4883-11D9-86C1-000A95891192@cs.usfca.edu>
Message-ID: <Pine.LNX.4.44.0412071104230.5327-100000@g4.pauljlucas.org>


On Tue, 7 Dec 2004, Terence Parr wrote:

> On Dec 2, 2004, at 12:01 PM, Paul J. Lucas wrote:

> > 	OK, so I tried setting defaultErrorHandler=true.  This makes
> > 	the generated AST be fine for errors outside of function
> > 	declarations, but now the problem is that ANTLR recovers all by
> > 	itself while doing enclosedExpr and functionDeclBody above is
> > 	never given the opportunity to catch the exception and do the
> > 	correct recovery.  Hence, this breaks my recovery mechanism.
> 
> Are you sure?

	Yes.

> The following code generates precisely the same output 
> for func() with and without the "defaultErrorHandler=false;".

	For *your* example code, it would work fine because your rule
	contains only tokens, not rules.  If it contains a rule as mine
	does, *that* rule is auto-recovered from by ANTLR so, by the
	time it gets back to the current rule, it's too late.

> > 	One slight problem: reportError() isn't declared to throw any
> > 	exception.  Hence, I created the ANTLR_WorkaroundException class that
> > 	extends RuntimeException to work around this annoyance.
> 
> Only an annoyance, mein herr, because you want reportError to do more 
> than it was meant to ;)

	Which is why I suggested modifying the auto-exception-recovery
	code that ANTLR emits to include a recover() method that is
	declared to throw an exception.

	- Paul



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Matthew.Ford at forward.com.au  Tue Dec  7 11:13:17 2004
From: Matthew.Ford at forward.com.au (matthew ford)
Date: Mon Dec 20 16:17:43 2004
Subject: [getting OT ...] Re: [antlr-interest] exceptions in the lexer
References: <001701c4dc46$df463c00$0400a8c0@NOTEBOOK> <30586.1102417008@www6.gmx.net>
Message-ID: <001c01c4dc90$cf1aadd0$0400a8c0@NOTEBOOK>


Yes it may not work in some cases but in those cases that it does
you have allowed the user to save the work they have done and continue to
work using other areas of the application .
In the JEdit example, all this error means is that you cannot open that
particular file
as it is too large. Your existing edits are not dumped by a programmer who
is too lazy (timid?) to try and recover from errors.

In those cases where you cannot recover, what have you lost by trying?
What was the alternative to trying to recover?
Just shutting down the application and loosing all the user's existing work!
No merit points for doing that.  Your application will get a reputation as
being
unreliable.

I want to program robust applications.  I want to keep trying to recover
from
ALL Throwables untill the the JVM or the OS dies.
The user deserves as much.  If the JVM or OS dies as a result of an error
trying to recover does not make it worse.

Programming errors during the developement of my Parallel program
(www.forward.com.au)
regularly caused it to try and recovere from NullPointers, ArraysOutOfBounds
and
OutOfMemory.  These errors never shut the whole application down.

Java's advanced garbage collection means it is much more robust in the face
of errors then
previous languages.  But it seems programmers (and even the language
designers) do not
realize how robust it is.

In many cases you can sucessfully recover from Errors and RuntimeExceptions.

It is dissapointing that the text books have trained a generation of Java
programmers who
will not even try.

matthew
----- Original Message ----- 
From: "Harald Mueller" <harald.m.mueller@bigfoot.com>
To: <antlr-interest@yahoogroups.com>
Sent: Tuesday, December 07, 2004 9:56 PM
Subject: [getting OT ...] Re: [antlr-interest] exceptions in the lexer


>
> >
> > Well JEdit catches this and recovers.
> > Why can't I?
>
> You can :-) But there's no guarantee it works. Here is the text from the
JLS
> (section 8.4.4) - which I interpret as a more constructive comment than
> mine:
>
> > Exceptions that are represented by the subclasses of class Error, for
> example OutOfMemoryError, are thrown due to a failure in or of the virtual
> machine. Many of these are the result of linkage failures and can occur at
> unpredictable points in the execution of a program. Sophisticated programs
> may yet wish to catch and attempt to recover from some of these
conditions.
>
> Regards
> Harald M. Mueller
>
> > matthew
> >
> > ----- Original Message ----- 
> > From: "Harald Mueller" <harald.m.mueller@bigfoot.com>
> > To: <antlr-interest@yahoogroups.com>
> > Sent: Tuesday, December 07, 2004 8:48 PM
> > Subject: Re: [antlr-interest] exceptions in the lexer
> >
> >
> > >
> > > >
> > > > Hey, Just extend you user-defined exceptions from RuntimeException
and
> > > > throw
> > > > them.
> > >
> > > He explicitly didn't want to do this - but I also do it (using a
> > > WrappingRuntimeException which I need at other places anyway (e.g. for
> > the
> > > Runnable.run() method)).
> > >
> > > > You catch all your RuntimeExceptions don't you?
> > > > Remember OutOfMemoryException is not necessarly fatal.
> > >
> > > This is not an Exception, but an Error - you would never catch this.
> > >
> > > Regards
> > > Harald M. M?ller
> > >
> > > > matthew
> > > > ----- Original Message ----- 
> > > > From: "Paul J. Lucas" <pauljlucas@mac.com>
> > > > To: <antlr-interest@yahoogroups.com>
> > > > Sent: Tuesday, December 07, 2004 11:10 AM
> > > > Subject: Re: [antlr-interest] exceptions in the lexer
> > > >
> > > >
> > > > >
> > > > > On Mon, 6 Dec 2004, Terence Parr wrote:
> > > > >
> > > > > > Are you familiar with the filter option on the lexer grammar?
> > > > >
> > > > > Yes in the sense that I've read that bit of the documentation,
> > > > > but I've never used it.
> > > > >
> > > > > I don't want my entire lexer to be a filter since I need it to
> > > > > be a real lexer for a parser.
> > > > >
> > > > > My particular case at hand is dealing with pragmas that can
> > > > > appear anywhere comments can.  Since comments are most easily
> > > > > handled in the lexer, I handle pragmas there to for the same
> > > > > reason.  The problem is what to do if there's an error in a
> > > > > pragma.  The lexer can't throw user-defined exceptions.  (I
> > > > > might be able to work around it by hiding the real exception
> > > > > inside a Runtime exception, but that's ugly.
> > > > >
> > > > > - Paul
> > > > >
> > > > >
> > > > >
> > > > >
> > > > > Yahoo! Groups Links
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > >
> > > >
> > > >
> > > >
> > > > Yahoo! Groups Links
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > >
> > > -- 
> > > NEU +++ DSL Komplett von GMX +++ http://www.gmx.net/de/go/dsl
> > > GMX DSL-Netzanschluss + Tarif zum superg?nstigen Komplett-Preis!
> > >
> > >
> > >
> > > Yahoo! Groups Links
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> >
> >
> >
> >
> > Yahoo! Groups Links
> >
> >
> >
> >
> >
> >
> >
>
> -- 
> GMX ProMail mit bestem Virenschutz http://www.gmx.net/de/go/mail
> +++ Empfehlung der Redaktion +++ Internet Professionell 10/04 +++
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From dcaton at shorelinesoftware.com  Tue Dec  7 11:16:15 2004
From: dcaton at shorelinesoftware.com (Don Caton)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] exceptions in the lexer
In-Reply-To: <F69AE41A-4883-11D9-86C1-000A95891192@cs.usfca.edu>
Message-ID: <1102446874.6747@mx9.mysite4now.com>


> -----Original Message-----
> From: Terence Parr [mailto:parrt@cs.usfca.edu] 
> Sent: Tuesday, December 07, 2004 2:13 PM
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] exceptions in the lexer
> 
> 
> Ack!  Heh, wait, looks public:
> 
> public class TokenStreamRecognitionException extends 
> TokenStreamException {
>      public RecognitionException recog;
> ....
> }

I don't do Java ;).  In the C++ version, it's private.  Perhaps that is just
a porting error then.

Don




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Tue Dec  7 11:26:53 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] Error recovery contortion
In-Reply-To: <Pine.LNX.4.44.0412071104230.5327-100000@g4.pauljlucas.org>
References: <Pine.LNX.4.44.0412071104230.5327-100000@g4.pauljlucas.org>
Message-ID: <F37A4770-4885-11D9-86C1-000A95891192@cs.usfca.edu>



On Dec 7, 2004, at 11:09 AM, Paul J. Lucas wrote:
>> The following code generates precisely the same output
>> for func() with and without the "defaultErrorHandler=false;".
>
> 	For *your* example code, it would work fine because your rule
> 	contains only tokens, not rules.

Ah.

>   If it contains a rule as mine
> 	does, *that* rule is auto-recovered from by ANTLR so, by the
> 	time it gets back to the current rule, it's too late.

Right.  I get it.  After the rule recovers, ANTLR tries to keep going 
in the invoking rule, but no tree is returned from the other rule.  
Hold on.  Sorry for being dense about this (I really should just try to 
build something myself).  Anyhoo, if I make it

func : ID another SEMI ;
exception
catch [ RecognitionException re ] {
                     ## = #([ERROR,"ERROR"]);
                         recover( re );
     }

another : STUFF ;

instead I see in func():

                         another();
                         astFactory.addASTChild(currentAST, returnAST);

but if I have a catch on another(), it does the recover.  Control will 
return normally from func() and add returnAST to the current tree, 
right?

Why can't you add a catch to the equiv of another()?  Perhaps using 
this example, we can tease out precisely the weakness so I can 
understand the problem.

>>> 	One slight problem: reportError() isn't declared to throw any
>>> 	exception.  Hence, I created the ANTLR_WorkaroundException class 
>>> that
>>> 	extends RuntimeException to work around this annoyance.
>>
>> Only an annoyance, mein herr, because you want reportError to do more
>> than it was meant to ;)
>
> 	Which is why I suggested modifying the auto-exception-recovery
> 	code that ANTLR emits to include a recover() method that is
> 	declared to throw an exception.

Yep, I believe the recover() method will do nicely and is a backward 
compatible change.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Tue Dec  7 11:27:40 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] exceptions in the lexer
In-Reply-To: <1102446874.6747@mx9.mysite4now.com>
References: <1102446874.6747@mx9.mysite4now.com>
Message-ID: <0F410DBB-4886-11D9-86C1-000A95891192@cs.usfca.edu>



On Dec 7, 2004, at 11:16 AM, Don Caton wrote:

>
>> -----Original Message-----
>> From: Terence Parr [mailto:parrt@cs.usfca.edu]
>> Sent: Tuesday, December 07, 2004 2:13 PM
>> To: antlr-interest@yahoogroups.com
>> Subject: Re: [antlr-interest] exceptions in the lexer
>>
>>
>> Ack!  Heh, wait, looks public:
>>
>> public class TokenStreamRecognitionException extends
>> TokenStreamException {
>>      public RecognitionException recog;
>> ....
>> }
>
> I don't do Java ;).  In the C++ version, it's private.  Perhaps that 
> is just
> a porting error then.

Probably.  Yeah, I've yet to find a case where private is actually what 
I want.  I'm a protected man myself ;)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pauljlucas at mac.com  Tue Dec  7 11:34:10 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] Error recovery contortion
In-Reply-To: <F37A4770-4885-11D9-86C1-000A95891192@cs.usfca.edu>
Message-ID: <Pine.LNX.4.44.0412071125280.5327-100000@g4.pauljlucas.org>


On Tue, 7 Dec 2004, Terence Parr wrote:

> func : ID another SEMI ;
> exception
> catch [ RecognitionException re ] {
>                      ## = #([ERROR,"ERROR"]);
>                          recover( re );
>      }
> 
> another : STUFF ;
> 
> instead I see in func():
> 
>                          another();
>                          astFactory.addASTChild(currentAST, returnAST);
> 
> but if I have a catch on another(), it does the recover.  Control will 
> return normally from func() and add returnAST to the current tree, 
> right?

	Right.

> Why can't you add a catch to the equiv of another()?

	Because "another" in my case is "expression" that has a zillion
	subrules (addExpr, mulExpr, etc), and I'd have to add my own
	"catch" to *every* *single* *one* of those and end up having to
	do it to the whole grammar.  This kind of defeats the point of
	having defaultErrorHandler=true.

	The goal here is to try to mold ANTLR's default error recovery
	mechanism to do what I want so in 99% of my grammar I don't
	have to do anything special.  Only in those places where I want
	to do specific recovery do I want to intervene.

	Get it?

	- Paul



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ric.klaren at gmail.com  Tue Dec  7 11:37:47 2004
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] Error recovery contortion
In-Reply-To: <19E1FA60-4883-11D9-86C1-000A95891192@cs.usfca.edu>
References: <Pine.LNX.4.44.0412021057260.13608-100000@g4.pauljlucas.org>
	 <19E1FA60-4883-11D9-86C1-000A95891192@cs.usfca.edu>
Message-ID: <bc607a4e0412071137223599d8@mail.gmail.com>


On Tue, 7 Dec 2004 11:06:29 -0800, Terence Parr <parrt@cs.usfca.edu> wrote:
> Yes, this is reasonable.  We should change:
> 
>                 catch (RecognitionException ex) {
>                         reportError(ex);
>                         consume();
>                         consumeUntil(_tokenSet_0);
>                 }
> 
> to
>                 catch (RecognitionException ex) {
>                         reportError(ex);
>                         recover(ex, _tokenSet_0);
>                 }
> 
> For 2.7.5.  Anybody got a problem with this?  I would be just factoring
> out the code into a method.

No problem I guess, would be simple to implement. Might be an idea to
also move the reportError into recover then, saves some code.

Cheers,

Ric


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pauljlucas at mac.com  Tue Dec  7 11:40:09 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] Error recovery contortion
In-Reply-To: <bc607a4e0412071137223599d8@mail.gmail.com>
Message-ID: <Pine.LNX.4.44.0412071138500.5327-100000@g4.pauljlucas.org>


On Tue, 7 Dec 2004, Ric Klaren wrote:

> Might be an idea to also move the reportError into recover then, saves some
> code.
	
	No, because if I override recover() I don't want to have to
	remember to call reportError().

	Reporting errors and recovering from them are two seperate
	things and should be handled as such.

	- Paul



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ric.klaren at gmail.com  Tue Dec  7 11:51:52 2004
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] exceptions in the lexer
In-Reply-To: <1102446874.6747@mx9.mysite4now.com>
References: <F69AE41A-4883-11D9-86C1-000A95891192@cs.usfca.edu>
	 <1102446874.6747@mx9.mysite4now.com>
Message-ID: <bc607a4e04120711514dee0792@mail.gmail.com>


On Tue, 7 Dec 2004 14:16:15 -0500, Don Caton
<dcaton@shorelinesoftware.com> wrote:
> > Ack!  Heh, wait, looks public:
> >
> > public class TokenStreamRecognitionException extends
> > TokenStreamException {
> >      public RecognitionException recog;
> > ....
> > }
> 
> I don't do Java ;).  In the C++ version, it's private.  Perhaps that is just
> a porting error then.

The C++ version has some proxy methods to the recognition exception. A
bit nicer than a public accessible attribute. (Not sure if that's
already in 2.7.4)

Cheers,

Ric


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ric.klaren at gmail.com  Tue Dec  7 12:24:40 2004
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] Error recovery contortion
In-Reply-To: <Pine.LNX.4.44.0412071138500.5327-100000@g4.pauljlucas.org>
References: <bc607a4e0412071137223599d8@mail.gmail.com>
	 <Pine.LNX.4.44.0412071138500.5327-100000@g4.pauljlucas.org>
Message-ID: <bc607a4e041207122473dd92d7@mail.gmail.com>


On Tue, 7 Dec 2004 11:40:09 -0800 (PST), Paul J. Lucas
<pauljlucas@mac.com> wrote:
> On Tue, 7 Dec 2004, Ric Klaren wrote:
> > Might be an idea to also move the reportError into recover then, saves some
> > code.
>         
>         No, because if I override recover() I don't want to have to
>         remember to call reportError().
> 
>         Reporting errors and recovering from them are two seperate
>         things and should be handled as such.

Good point, although it's a bit of a matter of taste, could also make
an handleError that calls reportError and recover. Only safe is in
codesize, speed wise it wouldn't matter much I guess. Either way is
fine with me ;)

Cheers,

Ric


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Tue Dec  7 13:48:17 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] Error recovery contortion
In-Reply-To: <19E1FA60-4883-11D9-86C1-000A95891192@cs.usfca.edu>
References: <Pine.LNX.4.44.0412021057260.13608-100000@g4.pauljlucas.org>
	<19E1FA60-4883-11D9-86C1-000A95891192@cs.usfca.edu>
Message-ID: <16822.9505.602281.338545@despot.non.net>


>>>>> "Terence" == Terence Parr <parrt@cs.usfca.edu> writes:
[...]

>> Sigh...

> You sound like John Mitchell ;)

I heard that!

[...]

> Yes, this is reasonable.  We should change:

> 		catch (RecognitionException ex) { reportError(ex);
> consume(); consumeUntil(_tokenSet_0); }

> to catch (RecognitionException ex) { reportError(ex); recover(ex,
> _tokenSet_0); }

> For 2.7.5.  Anybody got a problem with this?  I would be just factoring
> out the code into a method.

Fine by me.

Happy Holidays,
		John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Tue Dec  7 16:03:37 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] Error recovery contortion
In-Reply-To: <Pine.LNX.4.44.0412071125280.5327-100000@g4.pauljlucas.org>
References: <Pine.LNX.4.44.0412071125280.5327-100000@g4.pauljlucas.org>
Message-ID: <9BD6A344-48AC-11D9-86C1-000A95891192@cs.usfca.edu>



On Dec 7, 2004, at 11:34 AM, Paul J. Lucas wrote:
>> Why can't you add a catch to the equiv of another()?
>
> 	Because "another" in my case is "expression" that has a zillion
> 	subrules (addExpr, mulExpr, etc), and I'd have to add my own
> 	"catch" to *every* *single* *one* of those and end up having to
> 	do it to the whole grammar.  This kind of defeats the point of
> 	having defaultErrorHandler=true.

Agreed.  As I said though, adding exception handlers to every routine 
would work and while laborious, is precise. ;)  However, your solution 
is better.  Let's make the code spit out for default handlers 
configurable :)

> 	The goal here is to try to mold ANTLR's default error recovery
> 	mechanism to do what I want so in 99% of my grammar I don't
> 	have to do anything special.  Only in those places where I want
> 	to do specific recovery do I want to intervene.
>
> 	Get it?

Now I do...sorry for being slow on this one.
Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Tue Dec  7 17:26:15 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] gmane is so weird
Message-ID: <27397839-48B8-11D9-86C1-000A95891192@cs.usfca.edu>


So, how come I get no text on any page:

http://comments.gmane.org/gmane.comp.parsers.antlr.general/1982

I'm trying pretty hard to spider, but gmane ain't making it easy. :(

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From johnm-antlr at non.net  Tue Dec  7 13:52:17 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] Relentless recovery (was: [getting OT ...])
In-Reply-To: <001c01c4dc90$cf1aadd0$0400a8c0@NOTEBOOK>
References: <001701c4dc46$df463c00$0400a8c0@NOTEBOOK>
	<30586.1102417008@www6.gmx.net>
	<001c01c4dc90$cf1aadd0$0400a8c0@NOTEBOOK>
Message-ID: <16822.9745.913022.851359@despot.non.net>


>>>>> "matthew" == matthew ford <Matthew.Ford@forward.com.au> writes:
[...]

> In those cases where you cannot recover, what have you lost by trying?
> What was the alternative to trying to recover?  Just shutting down the
> application and loosing all the user's existing work!  No merit points
> for doing that.  Your application will get a reputation as being
> unreliable.

Indeed.

Have you looked at the arguments from the "micro-rebooting" folks?


[...]

> It is dissapointing that the text books have trained a generation of Java
> programmers who will not even try.

Isn't "indignant apathy" the lowest level of hell in Dante's Inferno?

:-),
	John


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From harald.m.mueller at bigfoot.com  Wed Dec  8 01:25:34 2004
From: harald.m.mueller at bigfoot.com (Harald Mueller)
Date: Mon Dec 20 16:17:43 2004
Subject: [getting OT ...] Re: [antlr-interest] exceptions in the lexer
References: <001c01c4dc90$cf1aadd0$0400a8c0@NOTEBOOK>
Message-ID: <18541.1102497934@www44.gmx.net>


Maybe I should cite here the slides from my Java course about Exception
handling ... a short summary of my advice:

RuntimeExceptions have three main uses:

a. Working around "checked exception" boundaries (usually by wrapping a
checked exception). However: Before doing this, change the interface so that
it allows the additional Exception. Only when you cannot do this (or don't
want to - see also c.), use the wrapping.

b. Signalling programmer errors (e.g. IllegalArgument, IllegalState,
NullPointer). Before catching them, spend as much time as possible on
*correcting* the programmer error. If this is not possible (external
sources) or if programmer errors are legitimate according to the spec
(high-availability software - programming Space Shuttle software in Java?),
then catching them is necessary - but that should raise a red flag in
project and quality management!

c. Sometimes, signalling "unexpected environment exceptions" (e.g.
EJBException, exceptions in JDO) that can happen "everywhere" in that
environment. There is still some debate whether one should use this design
at all, but the "no checked exceptions" party is growing; and if/when/where
they are right, catching those RTExceptions is right. However, this requires
a spec as to how to proceed: In many cases, the internal state of the
program is still ok, and then proceeding is no problem; however, in some
cases, a "subsystem" may have gone into an unusable state due to the
exception - and then you must either
(*) re-initialize the subsystem; or
(*) "shut it off", i.e., disable its use by other subsystems/services -
which may entail other disablings relying on those subsystems/services. If
you don't think about this, your system might "limp along" for some more
time and then still fail - but now, finding the problem is much harder than
with "early failure".

So, in general, I'm wary of catching RuntimeExceptions.
At least, log all of them reliably(!) somewhere where they can be and are(!)
read!


Errors have two main uses:

d. Signalling "very unexpected program state exceptions" (AssertError).
This is like b. above: Dont catch it, correct the problem.

e. Signalling "unexpected JVM exceptions" (OutOfMemory, ThreadDeath).
This is like c. above: Catch it if it pays; but be aware and specify what
should happen if subsystems go out of order.

Thus, I'm not so wary of catching Errors. But still, logging is required.


Regards
Harald M. Mueller

> 
> Yes it may not work in some cases but in those cases that it does
> you have allowed the user to save the work they have done and continue to
> work using other areas of the application .
> In the JEdit example, all this error means is that you cannot open that
> particular file
> as it is too large. Your existing edits are not dumped by a programmer who
> is too lazy (timid?) to try and recover from errors.
> 
> In those cases where you cannot recover, what have you lost by trying?
> What was the alternative to trying to recover?
> Just shutting down the application and loosing all the user's existing
> work!
> No merit points for doing that.  Your application will get a reputation as
> being
> unreliable.
> 
> I want to program robust applications.  I want to keep trying to recover
> from
> ALL Throwables untill the the JVM or the OS dies.
> The user deserves as much.  If the JVM or OS dies as a result of an error
> trying to recover does not make it worse.
> 
> Programming errors during the developement of my Parallel program
> (www.forward.com.au)
> regularly caused it to try and recovere from NullPointers,
> ArraysOutOfBounds
> and
> OutOfMemory.  These errors never shut the whole application down.
> 
> Java's advanced garbage collection means it is much more robust in the
> face
> of errors then
> previous languages.  But it seems programmers (and even the language
> designers) do not
> realize how robust it is.
> 
> In many cases you can sucessfully recover from Errors and
> RuntimeExceptions.
> 
> It is dissapointing that the text books have trained a generation of Java
> programmers who
> will not even try.
> 
> matthew
> ----- Original Message ----- 
> From: "Harald Mueller" <harald.m.mueller@bigfoot.com>
> To: <antlr-interest@yahoogroups.com>
> Sent: Tuesday, December 07, 2004 9:56 PM
> Subject: [getting OT ...] Re: [antlr-interest] exceptions in the lexer
> 
> 
> >
> > >
> > > Well JEdit catches this and recovers.
> > > Why can't I?
> >
> > You can :-) But there's no guarantee it works. Here is the text from the
> JLS
> > (section 8.4.4) - which I interpret as a more constructive comment than
> > mine:
> >
> > > Exceptions that are represented by the subclasses of class Error, for
> > example OutOfMemoryError, are thrown due to a failure in or of the
> virtual
> > machine. Many of these are the result of linkage failures and can occur
> at
> > unpredictable points in the execution of a program. Sophisticated
> programs
> > may yet wish to catch and attempt to recover from some of these
> conditions.
> >
> > Regards
> > Harald M. Mueller
> >
> > > matthew
> > >
> > > ----- Original Message ----- 
> > > From: "Harald Mueller" <harald.m.mueller@bigfoot.com>
> > > To: <antlr-interest@yahoogroups.com>
> > > Sent: Tuesday, December 07, 2004 8:48 PM
> > > Subject: Re: [antlr-interest] exceptions in the lexer
> > >
> > >
> > > >
> > > > >
> > > > > Hey, Just extend you user-defined exceptions from RuntimeException
> and
> > > > > throw
> > > > > them.
> > > >
> > > > He explicitly didn't want to do this - but I also do it (using a
> > > > WrappingRuntimeException which I need at other places anyway (e.g.
> for
> > > the
> > > > Runnable.run() method)).
> > > >
> > > > > You catch all your RuntimeExceptions don't you?
> > > > > Remember OutOfMemoryException is not necessarly fatal.
> > > >
> > > > This is not an Exception, but an Error - you would never catch this.
> > > >
> > > > Regards
> > > > Harald M. M?ller
> > > >
> > > > > matthew
> > > > > ----- Original Message ----- 
> > > > > From: "Paul J. Lucas" <pauljlucas@mac.com>
> > > > > To: <antlr-interest@yahoogroups.com>
> > > > > Sent: Tuesday, December 07, 2004 11:10 AM
> > > > > Subject: Re: [antlr-interest] exceptions in the lexer
> > > > >
> > > > >
> > > > > >
> > > > > > On Mon, 6 Dec 2004, Terence Parr wrote:
> > > > > >
> > > > > > > Are you familiar with the filter option on the lexer grammar?
> > > > > >
> > > > > > Yes in the sense that I've read that bit of the documentation,
> > > > > > but I've never used it.
> > > > > >
> > > > > > I don't want my entire lexer to be a filter since I need it to
> > > > > > be a real lexer for a parser.
> > > > > >
> > > > > > My particular case at hand is dealing with pragmas that can
> > > > > > appear anywhere comments can.  Since comments are most easily
> > > > > > handled in the lexer, I handle pragmas there to for the same
> > > > > > reason.  The problem is what to do if there's an error in a
> > > > > > pragma.  The lexer can't throw user-defined exceptions.  (I
> > > > > > might be able to work around it by hiding the real exception
> > > > > > inside a Runtime exception, but that's ugly.
> > > > > >
> > > > > > - Paul
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > > Yahoo! Groups Links
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > > Yahoo! Groups Links
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > >
> > > > -- 
> > > > NEU +++ DSL Komplett von GMX +++ http://www.gmx.net/de/go/dsl
> > > > GMX DSL-Netzanschluss + Tarif zum superg?nstigen Komplett-Preis!
> > > >
> > > >
> > > >
> > > > Yahoo! Groups Links
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > >
> > >
> > >
> > >
> > > Yahoo! Groups Links
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> >
> > -- 
> > GMX ProMail mit bestem Virenschutz http://www.gmx.net/de/go/mail
> > +++ Empfehlung der Redaktion +++ Internet Professionell 10/04 +++
> >
> >
> >
> > Yahoo! Groups Links
> >
> >
> >
> >
> >
> >
> >
> 
> 
> 
>  
> Yahoo! Groups Links
> 
> 
> 
>  
> 
> 
> 

-- 
GMX ProMail mit bestem Virenschutz http://www.gmx.net/de/go/mail
+++ Empfehlung der Redaktion +++ Internet Professionell 10/04 +++


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Matthew.Ford at forward.com.au  Wed Dec  8 01:48:21 2004
From: Matthew.Ford at forward.com.au (matthew ford)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] Relentless recovery (was: [getting OT ...])
References: <001701c4dc46$df463c00$0400a8c0@NOTEBOOK><30586.1102417008@www6.gmx.net><001c01c4dc90$cf1aadd0$0400a8c0@NOTEBOOK> <16822.9745.913022.851359@despot.non.net>
Message-ID: <002201c4dd0b$0d89a600$0400a8c0@NOTEBOOK>



----- Original Message ----- 
From: "John D. Mitchell" <johnm-antlr@non.net>
To: <antlr-interest@yahoogroups.com>
Sent: Wednesday, December 08, 2004 8:52 AM
Subject: [antlr-interest] Relentless recovery (was: [getting OT ...])


>
> > It is dissapointing that the text books have trained a generation of
Java
> > programmers who will not even try.
>
> Isn't "indignant apathy" the lowest level of hell in Dante's Inferno?

Well indignant yes but not apathy.  I feel like I am waging a one man war
against
the "Give up and dump the application on the first error" mentality.  See my
website on GUI programming for
my detailed contribution to the war.
http://www.forward.com.au/javaProgramming/javaGuiTips/index.html

 Any one want to join the one man army?

P.S. thanks for the micro-rebooting pointer.
It is just automating the user starting up the application again
(for server use) after the programmer dumps the application instead of
trying to
recover from an error.
However the user still looses their work in the process.
So I do not see rebooting as a method of
error recovery since none of the user's work was recovered.

matthew

>
> :-),
> John
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Matthew.Ford at forward.com.au  Wed Dec  8 02:15:48 2004
From: Matthew.Ford at forward.com.au (matthew ford)
Date: Mon Dec 20 16:17:43 2004
Subject: [getting OT ...] Re: [antlr-interest] exceptions in the lexer
References: <001c01c4dc90$cf1aadd0$0400a8c0@NOTEBOOK> <18541.1102497934@www44.gmx.net>
Message-ID: <002701c4dd0e$e342c120$0400a8c0@NOTEBOOK>


Thanks for that Harald,

>>From a programmer's point of view I don't disagree, much, with what you have
to say.

However I tend to take an un-usual view point for a programmer
That is the view from the user's perspective.

Looking at this from my user's view, I never ever want my application to
just shut down while I am trying to use it.
At the very least I want a polite informative  (not patronizing) message
letting me know why the application did not do what I just requested it to
do.
But more resonably I want to be able to continue to do what ever else I can
do
with those parts of the application that still work.  I want to stay in
control of when I
stop working with this application.

As a user, I don't care if the error is a RuntimeException, an Error or
an SQLWidgetIOGoneFunnyException, I only care that the application did not
do what I asked and "What has happened to all that work I just did!!??"

In the JEdit OutOfMemory example, I can continue to do almost
every thing I want even after the error occures.  I just cannot open that
particular
very large file.
This is what I strive to provide to all the users of my programs.
I cannot guarantee that my programs will be error free but I can
say to them

"I am not going to kick you off in the middle of your work just
becuase I made a programming error in one module or just
because you did something the application/hardware could not
cope with"

To meet this promise I have to catch ALL Throwables and try
and recover.  As you noted this can and does involve more work
then just shutting down on any error.

But the users deserve better behaved programs then they are
getting at the moment and more work for us programmers
 will keep the bills paid so why not do it.

matthew

P.S. another hobby horse of mine, not un-related to error recovey,
is the provision of a comprehensive undo facility (not just for text
editing).

----- Original Message ----- 
From: "Harald Mueller" <harald.m.mueller@bigfoot.com>
To: <antlr-interest@yahoogroups.com>
Sent: Wednesday, December 08, 2004 8:25 PM
Subject: Re: [getting OT ...] Re: [antlr-interest] exceptions in the lexer


>
> Maybe I should cite here the slides from my Java course about Exception
> handling ... a short summary of my advice:
>
> RuntimeExceptions have three main uses:
>
> a. Working around "checked exception" boundaries (usually by wrapping a
> checked exception). However: Before doing this, change the interface so
that
> it allows the additional Exception. Only when you cannot do this (or don't
> want to - see also c.), use the wrapping.
>
> b. Signalling programmer errors (e.g. IllegalArgument, IllegalState,
> NullPointer). Before catching them, spend as much time as possible on
> *correcting* the programmer error. If this is not possible (external
> sources) or if programmer errors are legitimate according to the spec
> (high-availability software - programming Space Shuttle software in
Java?),
> then catching them is necessary - but that should raise a red flag in
> project and quality management!
>
> c. Sometimes, signalling "unexpected environment exceptions" (e.g.
> EJBException, exceptions in JDO) that can happen "everywhere" in that
> environment. There is still some debate whether one should use this design
> at all, but the "no checked exceptions" party is growing; and
if/when/where
> they are right, catching those RTExceptions is right. However, this
requires
> a spec as to how to proceed: In many cases, the internal state of the
> program is still ok, and then proceeding is no problem; however, in some
> cases, a "subsystem" may have gone into an unusable state due to the
> exception - and then you must either
> (*) re-initialize the subsystem; or
> (*) "shut it off", i.e., disable its use by other subsystems/services -
> which may entail other disablings relying on those subsystems/services. If
> you don't think about this, your system might "limp along" for some more
> time and then still fail - but now, finding the problem is much harder
than
> with "early failure".
>
> So, in general, I'm wary of catching RuntimeExceptions.
> At least, log all of them reliably(!) somewhere where they can be and
are(!)
> read!
>
>
> Errors have two main uses:
>
> d. Signalling "very unexpected program state exceptions" (AssertError).
> This is like b. above: Dont catch it, correct the problem.
>
> e. Signalling "unexpected JVM exceptions" (OutOfMemory, ThreadDeath).
> This is like c. above: Catch it if it pays; but be aware and specify what
> should happen if subsystems go out of order.
>
> Thus, I'm not so wary of catching Errors. But still, logging is required.
>
>
> Regards
> Harald M. Mueller
>
> >
> > Yes it may not work in some cases but in those cases that it does
> > you have allowed the user to save the work they have done and continue
to
> > work using other areas of the application .
> > In the JEdit example, all this error means is that you cannot open that
> > particular file
> > as it is too large. Your existing edits are not dumped by a programmer
who
> > is too lazy (timid?) to try and recover from errors.
> >
> > In those cases where you cannot recover, what have you lost by trying?
> > What was the alternative to trying to recover?
> > Just shutting down the application and loosing all the user's existing
> > work!
> > No merit points for doing that.  Your application will get a reputation
as
> > being
> > unreliable.
> >
> > I want to program robust applications.  I want to keep trying to recover
> > from
> > ALL Throwables untill the the JVM or the OS dies.
> > The user deserves as much.  If the JVM or OS dies as a result of an
error
> > trying to recover does not make it worse.
> >
> > Programming errors during the developement of my Parallel program
> > (www.forward.com.au)
> > regularly caused it to try and recovere from NullPointers,
> > ArraysOutOfBounds
> > and
> > OutOfMemory.  These errors never shut the whole application down.
> >
> > Java's advanced garbage collection means it is much more robust in the
> > face
> > of errors then
> > previous languages.  But it seems programmers (and even the language
> > designers) do not
> > realize how robust it is.
> >
> > In many cases you can sucessfully recover from Errors and
> > RuntimeExceptions.
> >
> > It is dissapointing that the text books have trained a generation of
Java
> > programmers who
> > will not even try.
> >
> > matthew
> > ----- Original Message ----- 
> > From: "Harald Mueller" <harald.m.mueller@bigfoot.com>
> > To: <antlr-interest@yahoogroups.com>
> > Sent: Tuesday, December 07, 2004 9:56 PM
> > Subject: [getting OT ...] Re: [antlr-interest] exceptions in the lexer
> >
> >
> > >
> > > >
> > > > Well JEdit catches this and recovers.
> > > > Why can't I?
> > >
> > > You can :-) But there's no guarantee it works. Here is the text from
the
> > JLS
> > > (section 8.4.4) - which I interpret as a more constructive comment
than
> > > mine:
> > >
> > > > Exceptions that are represented by the subclasses of class Error,
for
> > > example OutOfMemoryError, are thrown due to a failure in or of the
> > virtual
> > > machine. Many of these are the result of linkage failures and can
occur
> > at
> > > unpredictable points in the execution of a program. Sophisticated
> > programs
> > > may yet wish to catch and attempt to recover from some of these
> > conditions.
> > >
> > > Regards
> > > Harald M. Mueller
> > >
> > > > matthew
> > > >
> > > > ----- Original Message ----- 
> > > > From: "Harald Mueller" <harald.m.mueller@bigfoot.com>
> > > > To: <antlr-interest@yahoogroups.com>
> > > > Sent: Tuesday, December 07, 2004 8:48 PM
> > > > Subject: Re: [antlr-interest] exceptions in the lexer
> > > >
> > > >
> > > > >
> > > > > >
> > > > > > Hey, Just extend you user-defined exceptions from
RuntimeException
> > and
> > > > > > throw
> > > > > > them.
> > > > >
> > > > > He explicitly didn't want to do this - but I also do it (using a
> > > > > WrappingRuntimeException which I need at other places anyway (e.g.
> > for
> > > > the
> > > > > Runnable.run() method)).
> > > > >
> > > > > > You catch all your RuntimeExceptions don't you?
> > > > > > Remember OutOfMemoryException is not necessarly fatal.
> > > > >
> > > > > This is not an Exception, but an Error - you would never catch
this.
> > > > >
> > > > > Regards
> > > > > Harald M. M?ller
> > > > >
> > > > > > matthew
> > > > > > ----- Original Message ----- 
> > > > > > From: "Paul J. Lucas" <pauljlucas@mac.com>
> > > > > > To: <antlr-interest@yahoogroups.com>
> > > > > > Sent: Tuesday, December 07, 2004 11:10 AM
> > > > > > Subject: Re: [antlr-interest] exceptions in the lexer
> > > > > >
> > > > > >
> > > > > > >
> > > > > > > On Mon, 6 Dec 2004, Terence Parr wrote:
> > > > > > >
> > > > > > > > Are you familiar with the filter option on the lexer
grammar?
> > > > > > >
> > > > > > > Yes in the sense that I've read that bit of the documentation,
> > > > > > > but I've never used it.
> > > > > > >
> > > > > > > I don't want my entire lexer to be a filter since I need it to
> > > > > > > be a real lexer for a parser.
> > > > > > >
> > > > > > > My particular case at hand is dealing with pragmas that can
> > > > > > > appear anywhere comments can.  Since comments are most easily
> > > > > > > handled in the lexer, I handle pragmas there to for the same
> > > > > > > reason.  The problem is what to do if there's an error in a
> > > > > > > pragma.  The lexer can't throw user-defined exceptions.  (I
> > > > > > > might be able to work around it by hiding the real exception
> > > > > > > inside a Runtime exception, but that's ugly.
> > > > > > >
> > > > > > > - Paul
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > > Yahoo! Groups Links
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > > Yahoo! Groups Links
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > >
> > > > > -- 
> > > > > NEU +++ DSL Komplett von GMX +++ http://www.gmx.net/de/go/dsl
> > > > > GMX DSL-Netzanschluss + Tarif zum superg?nstigen Komplett-Preis!
> > > > >
> > > > >
> > > > >
> > > > > Yahoo! Groups Links
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > >
> > > >
> > > >
> > > >
> > > > Yahoo! Groups Links
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > >
> > > -- 
> > > GMX ProMail mit bestem Virenschutz http://www.gmx.net/de/go/mail
> > > +++ Empfehlung der Redaktion +++ Internet Professionell 10/04 +++
> > >
> > >
> > >
> > > Yahoo! Groups Links
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> >
> >
> >
> >
> > Yahoo! Groups Links
> >
> >
> >
> >
> >
> >
> >
>
> -- 
> GMX ProMail mit bestem Virenschutz http://www.gmx.net/de/go/mail
> +++ Empfehlung der Redaktion +++ Internet Professionell 10/04 +++
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From monty at codetransform.com  Wed Dec  8 09:44:12 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:43 2004
Subject: [getting OT ...] Re: [antlr-interest] exceptions in the lexer
In-Reply-To: <002701c4dd0e$e342c120$0400a8c0@NOTEBOOK>
References: <001c01c4dc90$cf1aadd0$0400a8c0@NOTEBOOK> <18541.1102497934@www44.gmx.net> <002701c4dd0e$e342c120$0400a8c0@NOTEBOOK>
Message-ID: <C5CFF401-4940-11D9-9D01-000393B5606C@codetransform.com>


On Dec 8, 2004, at 2:15 AM, matthew ford wrote:

>
> P.S. another hobby horse of mine, not un-related to error recovey,
> is the provision of a comprehensive undo facility (not just for text
> editing).

Have you ever looked at the "Selective Undo" stuff?  I like their 
argument for creating algebraic operations on your documents and then 
being able to reason about whether something can be undone or not.  
Also, they can compute whether you can undo not just the last action, 
but any action and tell if it would conflict with a subsequent action, 
etc.  Commutivity is your friend!	

My paper gives a good overview of this algorithm and has references.

Implementing a Selective Undo Framework in Python
http://www.python.org/workshops/1997-10/proceedings/zukowski.html

I have not really kept up with literature on this.  One email 
discussion I was in said that the idea had been discounted but they 
never provided a reference and I never found an argument against at the 
time.

Please let me know if you have any good links on the subject, it's a 
pet project of mine as well.

Monty



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-XMyYpXdqVbrNDPGNHRfuLjM at yahoogroups.com  Wed Dec  8 09:45:16 2004
From: antlr-interest-accept-XMyYpXdqVbrNDPGNHRfuLjM at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:43 2004
Subject: MODERATE -- jose.sanleandro@ventura24.es posted to antlr-interest
Message-ID: <1102527916.190.4746.m22@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  jose.sanleandro@ventura24.es 

The message summary:
--------------------
FROM: jose.sanleandro@ventura24.es 
DATE: Wed, 8 Dec 2004 18:45:28 +0100 
SUBJECT: Lookahead question 

Hi all, 

I've been trying to train myself enough so that ANTLR joins 
my particular toolbox. I have to say that it's been a 
challenging task, and, although I've been successful in some
cases, I know I'm missing some important issues. 

Recently I needed to write a "parser" able to "understand" 
the output format of "rlog" (used by "cvs log"). The format 
is simple, whose parts are mostly fixed. I thought it'd be 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=401 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-XMyYpXdqVbrNDPGNHRfuLjM@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: jose.sanleandro@ventura24.es
Subject: Lookahead question
Date: Wed, 8 Dec 2004 18:45:28 +0100
Size: 3697
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041208/3e73342d/attachment.mht
From jose.sanleandro at ventura24.es  Wed Dec  8 09:45:28 2004
From: jose.sanleandro at ventura24.es (jose.sanleandro@ventura24.es)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] Lookahead question
Message-ID: <200412081845.28211.jose.sanleandro@ventura24.es>



Hi all,

I've been trying to train myself enough so that ANTLR joins my particular 
toolbox. I have to say that it's been a challenging task, and, although I've 
been successful in some cases, I know I'm missing some important issues.

Recently I needed to write a "parser" able to "understand" the output format 
of "rlog" (used by "cvs log"). The format is simple, whose parts are mostly 
fixed. I thought it'd be good to train myself with such an easy grammar.
At the end, I've had to do some "strange" approaches to make it work as I want 
it to, by understanding and debugging the generated code, and by explicitly 
fixing the lookahead to 1.
The reason is that some of the grammar rules allow arbitrary texts, which 
ocassionally triggered conflicts with literals. I thought I had just the 
lookahead option to defeat such conflicts.
Finally, I decided to use a lookahead of one character, and explictly solve 
the conflicts. That ended up in a grammar which doesn't seem so :(. Take a 
look at a fragment:

STARTS_WITH_B:
    'b'
     (({ if  (   (LA(1) == 'r')
              && (LA(2) == 'a')
              && (LA(3) == 'n')
              && (LA(4) == 'c')
              && (LA(5) == 'h')
              && (LA(6) == ':'))
         {
           mRESERVED_BRANCH(false);
           $setType(LITERAL_BRANCH);
         }
         else
         {
           mSTRING(false);
           $setType(STRING);
         }
       })
    )
    ;

Basically, there's a non-protected rule for all starting letters of reserved 
words of the grammar, to guide the lexer in ambiguous situations.
I tried to use syntactic predicates, but after spending some time I wasn't 
able to make it generate the code I wanted, and in the same order.

I've used the lexer to just split words and distinguish them by assigning 
different token identifiers. For me, it's role is similar to a specialized 
SAX parser which creates ANTLR objects (tokens) and optionally custom logic, 
defined in the grammar itself. If it fails, the input is not "valid".
On the other hand, the parser expects the correct tokens in the correct order, 
following certain rules. It optionally creates DOM-like structures. If it 
fails, the input is not "well-formed".
Finally, the tree parser just processes such object hierarchy (defined by the 
parser), and provide features such as what xpath or xsl stylesheets could 
perform. Is the analogy valid?

Moreover, which is the main drawback of explicitly resolving the ambiguous 
situations for the lexer using inline LA(x) checks?

Thank you.
Jose.





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Matthew.Ford at forward.com.au  Wed Dec  8 13:03:27 2004
From: Matthew.Ford at forward.com.au (matthew ford)
Date: Mon Dec 20 16:17:43 2004
Subject: Fw: [getting OT ...] Re: [antlr-interest] exceptions in the lexer
Message-ID: <000101c4ddc5$3d8c30b0$0400a8c0@NOTEBOOK>


----- Original Message ----- 
From: "Harald Mueller" <harald.m.mueller@bigfoot.com>
To: <antlr-interest@yahoogroups.com>
Sent: Wednesday, December 08, 2004 10:19 PM
Subject: Re: [getting OT ...] Re: [antlr-interest] exceptions in the lexer

>  (I once had to work with a database which, after some internal error,
> continued - but the data in a whole table were garbled. In that case, I'd
> very much have preferred a simple and shocking crash!).

Stopping access to the database is good in this case, a shocking crash
is simple for the programmer but is impolite to the user
and unfairly moves the blame from the database
to your application.
Let's encourage the programmer not to take the simple way out
 } catch ( ) {
   t.printStackTrace();
   System.exit(1);
}
but try for something better.

As long as the OS/JVM is running at least the shell of your application
should run.
 
matthew
P.S thanks for the stimulating discussion.


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Matthew.Ford at forward.com.au  Wed Dec  8 12:47:25 2004
From: Matthew.Ford at forward.com.au (matthew ford)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] How to have strings enclosed in  " and/or &quot;
Message-ID: <000001c4ddc5$3d3e5ed0$0400a8c0@NOTEBOOK>


Hi all,
I am having trouble in the lexer handling strings that start and end with "
or &quot;
(might start with " and end with &quot;)
Some html editors kindly replace " with &quot; when you load the file.

I would like to be able to handle something like
 "str is &quot;"here&quot;"&quot;"
to return
 str is "here&quot;
 due to the (STRING_PART)*  below and dropping the final quote of each
STRING_PART
"" inside a string just escapes a single "

Any ideas on how to make this work?
I don't want to pre-filter &quot; to " as I assume the user is happy with
what the editor has done.

The following pseudo code does not work
matthew

QUOTE
 :  '&' 'q' 'u' 'o' 't' ';'
;

STRING
  : STRING_PART  (STRING_PART)*
 {  // remove leading quote here and just return string
 }
 ;

STRING_PART
 : ('"' |  QUOTE)
   (
   options {    generateAmbigWarnings=false;   }
  : '\r' '\n'  {newline();}
  | '\r'   {newline();}
  | '\n'   {newline();}
  | ~('"' | QUOTE |'\n'|'\r')
  )*
 ('"'! | QUOTE!)
 ;




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From harald.m.mueller at bigfoot.com  Thu Dec  9 01:27:49 2004
From: harald.m.mueller at bigfoot.com (Harald Mueller)
Date: Mon Dec 20 16:17:43 2004
Subject: Fw: [getting OT ...] Re: [antlr-interest] exceptions in the lexer
References: <000101c4ddc5$3d8c30b0$0400a8c0@NOTEBOOK>
Message-ID: <3103.1102584469@www57.gmx.net>


> 
> ----- Original Message ----- 
> From: "Harald Mueller" <harald.m.mueller@bigfoot.com>
> To: <antlr-interest@yahoogroups.com>
> Sent: Wednesday, December 08, 2004 10:19 PM
> Subject: Re: [getting OT ...] Re: [antlr-interest] exceptions in the lexer
> 
> >  (I once had to work with a database which, after some internal error,
> > continued - but the data in a whole table were garbled. In that case,
> I'd
> > very much have preferred a simple and shocking crash!).
> 
> Stopping access to the database is good in this case, a shocking crash
> is simple for the programmer but is impolite to the user
> and unfairly moves the blame from the database
> to your application.

IMHO, no: I dont care for who is blamed: But I wont program around database
errors. Rather, the whole thing should come down, hopefully even including
the next layer, namely the business process which uses the application. 

My experience is that some errors will only be remedied organizationally if
"half of the company" (i.e., some important business process) comes to a
grinding halt. This is a maybe unfair means of escalating some problems -
but it is simply necessary.

The users should actually get a shock in that case.

> Let's encourage the programmer not to take the simple way out
>  } catch ( ) {
>    t.printStackTrace();
>    System.exit(1);
> }
> but try for something better.

t.printStackTrace() is not ok.

But showing the user

   Internal error: please enter a short description of what you did and
       press "Send error email". Application will then exit - sorry.

and then, after the user has done so:

   EMail sent to "hotline.<this application>@mycompany.com", including
   your description and some internal technical information [i.e.,
stacktraces].
   You may also contact the hotline for this application at 1234 with the
following error id: 9999!
   Now I have to stop the application.

and THEN EXIT MERCILESSLY (but not System.exit() - do a throw up to the
outermost thread layer so that various finally blocks can do their work).

It seems the hard thing is really to distinguish between the optimistic
case/stance ("it will most probably be ok if we continue even after a
generic Exception/Throwable") and the pessimistic/paranoid approach ("in
undefined states, we expect systems to destroy our business-critical data,
so by default, we exit/stop/escalate the problem").

Regards
H.M.M?ller

> 
> As long as the OS/JVM is running at least the shell of your application
> should run.
>  
> matthew
> P.S thanks for the stimulating discussion.
> 
> 
>  
> Yahoo! Groups Links
> 
> 
> 
>  
> 
> 
> 

-- 
NEU +++ DSL Komplett von GMX +++ http://www.gmx.net/de/go/dsl
GMX DSL-Netzanschluss + Tarif zum superg?nstigen Komplett-Preis!


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From jmcclain at tcshealthcare.com  Thu Dec  9 08:44:43 2004
From: jmcclain at tcshealthcare.com (John MccLain)
Date: Mon Dec 20 16:17:43 2004
Subject: [antlr-interest] Bug in Antlr - confusion on ANTLR grammar syntax???
Message-ID: <JMEOIPJEDGMHCIOMBHLIEEDMDIAA.jmcclain@tcshealthcare.com>


I am not understanding this at all. I am building a grammar
to parse powerbuilder. Here is all of the parser grammar - I reduced it down
to localize
the confusion

expression: simpleexp ((LE|GE|NE|EQ|LT|GT) simpleexp )?
;

simpleexp:term
;

term: factor
;

factor: NUM
;
and the lexer grammar (k = 4) for NUM is:

NUM: ('0'..'9')+
{System.out.println("2" + getText());}
;

What I dont understand is the ANTLR grammar syntax (I think).
Given an input of "1" (without the quotes), The rule 'simpleexp
((LE|GE|NE|EQ|LT|GT) simpleexp )?'
causes the parser to process then hang inside the parser, and not exit.
However, when I change the rule to
just 'simpleexp', the parser does not hang, and I exit gracefully out of
main. The parser start rule is 'expression'.
My question is - why does 'simpleexp ((LE|GE|NE|EQ|LT|GT) simpleexp )?' not
work? the parenthetic stmt is OPTIONAL - I wouldn't think it should cause a
different behavior than just 'simpleexp'. If I use 'simpleexp | simpleexp
((LE|GE|NE|EQ|LT|GT) simpleexp )?', all is well, but I don't understand why
I should have to do this???

John McClain
Senior Software Engineer
TCS Healthcare
jmcclain@tcshealthcare.com
(530)886-1700x235
"Before you criticize someone, walk a mile in their shoes.
That way, you'll be a mile from them, and you'll have their shoes."



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From sk at z.pl  Thu Dec  9 09:24:21 2004
From: sk at z.pl (Sebastian Kaliszewski)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] Bug in Antlr - confusion on ANTLR grammar syntax???
In-Reply-To: <JMEOIPJEDGMHCIOMBHLIEEDMDIAA.jmcclain@tcshealthcare.com>
References: <JMEOIPJEDGMHCIOMBHLIEEDMDIAA.jmcclain@tcshealthcare.com>
Message-ID: <41B88A45.6060208@softax.pl>


John MccLain wrote:
> I am not understanding this at all. I am building a grammar
> to parse powerbuilder. Here is all of the parser grammar - I reduced it down
> to localize
> the confusion
> 
> expression: simpleexp ((LE|GE|NE|EQ|LT|GT) simpleexp )?
> ;
> 
> simpleexp:term
> ;
> 
> term: factor
> ;
> 
> factor: NUM
> ;
> and the lexer grammar (k = 4) for NUM is:
> 
> NUM: ('0'..'9')+
> {System.out.println("2" + getText());}
> ;
> 
> What I dont understand is the ANTLR grammar syntax (I think).
> Given an input of "1" (without the quotes), The rule 'simpleexp
> ((LE|GE|NE|EQ|LT|GT) simpleexp )?'
> causes the parser to process then hang inside the parser, and not exit.
> However, when I change the rule to
> just 'simpleexp', the parser does not hang, and I exit gracefully out of
> main. The parser start rule is 'expression'.

I suspect id dos not hang it simply just waits for more input probably. 
Does entering one more symbol (or sending the eof) still yeild no 
result? (I think it will return then).

> My question is - why does 'simpleexp ((LE|GE|NE|EQ|LT|GT) simpleexp )?' not
> work? the parenthetic stmt is OPTIONAL - I wouldn't think it should cause a
> different behavior than just 'simpleexp'.

Of course it should. Parser must check if input does not fit the 
(LE|GE|NE|EQ|LT|GT) part before deciding whether to return or to 
continue processing.


> If I use 'simpleexp | simpleexp
> ((LE|GE|NE|EQ|LT|GT) simpleexp )?', all is well,

Probalby you have just 1 token lookahead (if you didn't set the 
lookahead in your parser the default is 1). Then the rule is ambigous 
and Antlr just chooses the first one which terminates immediately.

> but I don't understand why
> I should have to do this???

Your start rule should have have EOF checking in it.
something like:

expression: simpleexp ((LE|GE|NE|EQ|LT|GT) simpleexp )? EOF


EOF checking is not implicit since many languages allow arbitrary 
garbage afterthe program.

rgds
-- 
Sebastian Kaliszewski


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Thu Dec  9 09:32:30 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] How to have strings enclosed in  " and/or &quot;
In-Reply-To: <000001c4ddc5$3d3e5ed0$0400a8c0@NOTEBOOK>
References: <000001c4ddc5$3d3e5ed0$0400a8c0@NOTEBOOK>
Message-ID: <4D7C24E0-4A08-11D9-86C1-000A95891192@cs.usfca.edu>



On Dec 8, 2004, at 12:47 PM, matthew ford wrote:
> Hi all,
> I am having trouble in the lexer handling strings that start and end 
> with "
> or &quot;
> (might start with " and end with &quot;)
> Some html editors kindly replace " with &quot; when you load the file.
>
> I would like to be able to handle something like
>  "str is &quot;"here&quot;"&quot;"
> to return
>  str is "here&quot;
>  due to the (STRING_PART)*  below and dropping the final quote of each
> STRING_PART
> "" inside a string just escapes a single "
>
> Any ideas on how to make this work?

Hi Matthew,

I'm thinking that this is a language ambiguity.  I can easily give you 
two input sentences that could be interpreted either way.  
Consequently, you're going to have trouble with with generalized LR 
(only diff is that GLR would give you back both interpretations).  You 
might have some luck with a semantic predicate that tracked what you 
start with or something, but I guess what you start with is 
meaningless.  Yep, seems like a language ambiguity leading to a problem 
for any grammar.

To get around it, you might try a special char input stream that did 
the replacement, but even then it won't help you I think; don't know 
when to flip and when not to. :(

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Thu Dec  9 09:35:08 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] Lookahead question
In-Reply-To: <200412081845.28211.jose.sanleandro@ventura24.es>
References: <200412081845.28211.jose.sanleandro@ventura24.es>
Message-ID: <ABD9A04A-4A08-11D9-86C1-000A95891192@cs.usfca.edu>



On Dec 8, 2004, at 9:45 AM, jose.sanleandro@ventura24.es wrote:
> The reason is that some of the grammar rules allow arbitrary texts, 
> which
> ocassionally triggered conflicts with literals. I thought I had just 
> the
> lookahead option to defeat such conflicts.
> Finally, I decided to use a lookahead of one character, and explictly 
> solve
> the conflicts. That ended up in a grammar which doesn't seem so :(. 
> Take a
> look at a fragment:
>
> STARTS_WITH_B:
>     'b'
>      (({ if  (   (LA(1) == 'r')
>               && (LA(2) == 'a')
>               && (LA(3) == 'n')
>               && (LA(4) == 'c')
>               && (LA(5) == 'h')
>               && (LA(6) == ':'))
>          {
>            mRESERVED_BRANCH(false);
>            $setType(LITERAL_BRANCH);
>          }
>          else
>          {
>            mSTRING(false);
>            $setType(STRING);
>          }
>        })
>     )
>     ;

Isn't that the same as looking up the literal in the literals table?  
I.e., just have rule:

ID : ('a'..'z')+ ;

and no rules like

BR : "branch" ;

and ANTLR will do the right thing albeit not super fast ;)

> Moreover, which is the main drawback of explicitly resolving the 
> ambiguous
> situations for the lexer using inline LA(x) checks?

Well, only that ANTLR should really be saving you the trouble. :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From jmcclain at tcshealthcare.com  Thu Dec  9 09:56:49 2004
From: jmcclain at tcshealthcare.com (John MccLain)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] Bug in Antlr - confusion on ANTLR grammar syntax???
In-Reply-To: <41B88A45.6060208@softax.pl>
Message-ID: <JMEOIPJEDGMHCIOMBHLIEEDPDIAA.jmcclain@tcshealthcare.com>



Ok - how do you tell the parser to exit gracefully when it encounters EOF or
any other character???

-----Original Message-----
From: Sebastian Kaliszewski [mailto:sk@z.pl]
Sent: Thursday, December 09, 2004 9:24 AM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] Bug in Antlr - confusion on ANTLR grammar
syntax???



John MccLain wrote:
> I am not understanding this at all. I am building a grammar
> to parse powerbuilder. Here is all of the parser grammar - I reduced it
down
> to localize
> the confusion
>
> expression: simpleexp ((LE|GE|NE|EQ|LT|GT) simpleexp )?
> ;
>
> simpleexp:term
> ;
>
> term: factor
> ;
>
> factor: NUM
> ;
> and the lexer grammar (k = 4) for NUM is:
>
> NUM: ('0'..'9')+
> {System.out.println("2" + getText());}
> ;
>
> What I dont understand is the ANTLR grammar syntax (I think).
> Given an input of "1" (without the quotes), The rule 'simpleexp
> ((LE|GE|NE|EQ|LT|GT) simpleexp )?'
> causes the parser to process then hang inside the parser, and not exit.
> However, when I change the rule to
> just 'simpleexp', the parser does not hang, and I exit gracefully out of
> main. The parser start rule is 'expression'.

I suspect id dos not hang it simply just waits for more input probably.
Does entering one more symbol (or sending the eof) still yeild no
result? (I think it will return then).

> My question is - why does 'simpleexp ((LE|GE|NE|EQ|LT|GT) simpleexp )?'
not
> work? the parenthetic stmt is OPTIONAL - I wouldn't think it should cause
a
> different behavior than just 'simpleexp'.

Of course it should. Parser must check if input does not fit the
(LE|GE|NE|EQ|LT|GT) part before deciding whether to return or to
continue processing.


> If I use 'simpleexp | simpleexp
> ((LE|GE|NE|EQ|LT|GT) simpleexp )?', all is well,

Probalby you have just 1 token lookahead (if you didn't set the
lookahead in your parser the default is 1). Then the rule is ambigous
and Antlr just chooses the first one which terminates immediately.

> but I don't understand why
> I should have to do this???

Your start rule should have have EOF checking in it.
something like:

expression: simpleexp ((LE|GE|NE|EQ|LT|GT) simpleexp )? EOF


EOF checking is not implicit since many languages allow arbitrary
garbage afterthe program.

rgds
--
Sebastian Kaliszewski



Yahoo! Groups Links









 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From virtualaspirin at yahoo.com  Thu Dec  9 10:04:51 2004
From: virtualaspirin at yahoo.com (Akhilesh Mritunjai)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] How to have strings enclosed in  " and/or &quot;
In-Reply-To: <000001c4ddc5$3d3e5ed0$0400a8c0@NOTEBOOK>
Message-ID: <20041209180451.16624.qmail@web54705.mail.yahoo.com>


Matthew

Though it has been quite some time for me, I think
your problem is lot simpler.

A HTML string in any tag can't start/end with
"&quot;".  However, in HTML text, "&quot;" is supposed
to be used instead of literal double quotes. So the
two don't clash.

I suggest you write a preprocessor that "cleans" up
the code using a lexer grammar to clean up all the
special marks outside tags into their respective
symbolic representation, and then use the standard
grammar to parse/lex various language entities in the
cleaned-up HTML.

So something like

<font size="+1">Hello "tom & susie&quot;</font>

should be cleaned into

<font size="+1">Hello &quot;tom &amp;
susie&quot;</font>

which is more convenient to write grammar for.

- akhilesh


--- matthew ford <Matthew.Ford@forward.com.au> wrote:
> 
> Hi all,
> I am having trouble in the lexer handling strings
> that start and end with "
> or &quot;
> (might start with " and end with &quot;)
> Some html editors kindly replace " with &quot; when
> you load the file.



		
__________________________________ 
Do you Yahoo!? 
The all-new My Yahoo! - Get yours free! 
http://my.yahoo.com 
 



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pauljlucas at mac.com  Thu Dec  9 10:43:19 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] Compiling with 2.7.4; running with 2.7.2
Message-ID: <Pine.LNX.4.44.0412091040320.5327-100000@g4.pauljlucas.org>


	I'm wondering if it's possible to compile ANTLR grammars using
	2.7.4 yet use the 2.7.2 run-time.  Apparently, 2.7.2 doesn't
	support specifying a base class for lexers, i.e.:

		class MyLexer extends Lexer( "MyBaseLexer" );

	The release notes are fairly jumbled, so it's not clear from
	reading them.

	(I may need to do this because various parts of our software are
	still using 2.7.2 and they're afraid to upgrade.... Sigh...)

	- Paul



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Matthew.Ford at forward.com.au  Thu Dec  9 11:42:20 2004
From: Matthew.Ford at forward.com.au (matthew ford)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] How to have strings enclosed in  " and/or &quot;
References: <20041209180451.16624.qmail@web54705.mail.yahoo.com>
Message-ID: <000b01c4de27$42f48b30$0400a8c0@NOTEBOOK>


Thanks for the suggestion but the language I am parsing is a pre-processor
to HTML
WebStringTemplates and might be edited by an HTML Editor and then notepad
leading to &quot; and " combined
also you can have strings like
!![" this is a &quot; in a string"]

the output is pure html
 this is a &quot; in a string
but the valid input has mixed " and &quote just because the user type it in
notepad
after the HTML editor had done its conversion

I cannot pre-convert all &quot; to " as this breaks what the user wants to
output.
matthew
----- Original Message ----- 
From: "Akhilesh Mritunjai" <virtualaspirin@yahoo.com>
To: <antlr-interest@yahoogroups.com>
Sent: Friday, December 10, 2004 5:04 AM
Subject: Re: [antlr-interest] How to have strings enclosed in " and/or
&quot;


>
> Matthew
>
> Though it has been quite some time for me, I think
> your problem is lot simpler.
>
> A HTML string in any tag can't start/end with
> "&quot;".  However, in HTML text, "&quot;" is supposed
> to be used instead of literal double quotes. So the
> two don't clash.
>
> I suggest you write a preprocessor that "cleans" up
> the code using a lexer grammar to clean up all the
> special marks outside tags into their respective
> symbolic representation, and then use the standard
> grammar to parse/lex various language entities in the
> cleaned-up HTML.
>
> So something like
>
> <font size="+1">Hello "tom & susie&quot;</font>
>
> should be cleaned into
>
> <font size="+1">Hello &quot;tom &amp;
> susie&quot;</font>
>
> which is more convenient to write grammar for.
>
> - akhilesh
>
>
> --- matthew ford <Matthew.Ford@forward.com.au> wrote:
> >
> > Hi all,
> > I am having trouble in the lexer handling strings
> > that start and end with "
> > or &quot;
> > (might start with " and end with &quot;)
> > Some html editors kindly replace " with &quot; when
> > you load the file.
>
>
>
>
> __________________________________
> Do you Yahoo!?
> The all-new My Yahoo! - Get yours free!
> http://my.yahoo.com
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From atripp at comcast.net  Thu Dec  9 12:44:36 2004
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] Java enhancements to support bytecode generation?
Message-ID: <cpadfk+9794@eGroups.com>



I came across this item and thought Terence and others
might find it interesting, considering that ANTLR 3 is
generating Java bytecode:

http://www.tbray.org/ongoing/When/200x/2004/12/08/DynamicJava

Apparently, the gurus for a bunch of dynamic languages
(Perl, Parrot, Python, Groovy) had a little meeting at
Sun, and one thing they came away with had to do with
bytecode generation. To quote the article:

Lesson: Bytecode Generation A lot of people these days are generating
bytecode: not just Jython and Groovy, but AOP tools and XPath/XSLT
tools and others too. They're all doing it by hand without any
abstractions to help, and it's difficult and messy and they're
probably not doing that great a job. ?

So it would be super-handy for a lot of people if there were a
higher-level approach to this, perhaps at the AST level, so you could
automate the bytecode generation for some common idioms like switches
and loops and so on. It's trickier than you might think, since the
semantics of something as apparently simple as assignment to a
variable can get very complex in a dynamic language.

Janino looks interesting in this respect, and some of the work in Kawa
might be re-usable, and over in .NET-land there is this thing called
the CodeDom which is apparently addressing a similar problem. So maybe
the right thing would be a java.net project to build some shared
infrastructure in this space.

Andy







 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From open.zone at virgin.net  Thu Dec  9 11:07:06 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] Re: Compiling with 2.7.4; running with 2.7.2
In-Reply-To: <Pine.LNX.4.44.0412091040320.5327-100000@g4.pauljlucas.org>
Message-ID: <cpa7oq+2jme@eGroups.com>



--- In antlr-interest@yahoogroups.com, "Paul J. Lucas"
<pauljlucas@m...> wrote:

> 	I'm wondering if it's possible to compile ANTLR grammars using
> 	2.7.4 yet use the 2.7.2 run-time.

This isn't possible if you are using ANTLR/C#. There have been
breaking changes since 2.7.2 was released.

> 	(I may need to do this because various parts of our software are
> 	still using 2.7.2 and they're afraid to upgrade.... Sigh...)

Our ANTLR version upgrades have been generally fairly uneventful...a
few minutes work usually depending on the size of the project.

Micheal






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From nbsherid at secsme.org.au  Thu Dec  9 13:15:40 2004
From: nbsherid at secsme.org.au (Nigel Sheridan-Smith)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] Bug in Antlr - confusion on ANTLR grammar syntax???
In-Reply-To: <41B88A45.6060208@softax.pl>
Message-ID: <000d01c4de34$3cb7ca40$0500a8c0@nigel>




> -----Original Message-----
> From: Sebastian Kaliszewski [mailto:sk@z.pl]
> Sent: Friday, 10 December 2004 4:24 AM
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] Bug in Antlr - confusion on ANTLR grammar
> syntax???
> 
> 
> John MccLain wrote:
> > I am not understanding this at all. I am building a grammar
> > to parse powerbuilder. Here is all of the parser grammar - I reduced it
> down
> > to localize
> > the confusion
> >
> > expression: simpleexp ((LE|GE|NE|EQ|LT|GT) simpleexp )?
> > ;
> >

Be careful of using 'LT' as it has significance for the parser/lexer. Try
changing this, or examine the generated code for that rule, and see if that
is what is causing it to hang.

Nigel

--
Nigel Sheridan-Smith
PhD research student

Faculty of Engineering
University of Technology, Sydney
Phone: 02 9514 7946
Fax: 02 9514 2435




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pauljlucas at mac.com  Thu Dec  9 11:36:03 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] Re: Compiling with 2.7.4; running with 2.7.2
In-Reply-To: <cpa7oq+2jme@eGroups.com>
Message-ID: <Pine.LNX.4.44.0412091135200.5327-100000@g4.pauljlucas.org>


On Thu, 9 Dec 2004, micheal_jor wrote:

> --- In antlr-interest@yahoogroups.com, "Paul J. Lucas"
> <pauljlucas@m...> wrote:
> 
> > 	I'm wondering if it's possible to compile ANTLR grammars using
> > 	2.7.4 yet use the 2.7.2 run-time.
> 
> This isn't possible if you are using ANTLR/C#. There have been
> breaking changes since 2.7.2 was released.

	OK, I should have mentioned that I'm doing Java (but only
	because they pay me! *ducks*).

	- Paul



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Matthew.Ford at forward.com.au  Thu Dec  9 11:36:27 2004
From: Matthew.Ford at forward.com.au (matthew ford)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] How to have strings enclosed in  " and/or &quot;
References: <000001c4ddc5$3d3e5ed0$0400a8c0@NOTEBOOK> <4D7C24E0-4A08-11D9-86C1-000A95891192@cs.usfca.edu>
Message-ID: <000a01c4de26$71126150$0400a8c0@NOTEBOOK>


Hi Ter,
What ambiguity do you see that I don't? Both  tokens mean the same  " = =
&quot;
Perhaps I am too close the problem
matthew
----- Original Message ----- 
From: "Terence Parr" <parrt@cs.usfca.edu>
To: <antlr-interest@yahoogroups.com>
Sent: Friday, December 10, 2004 4:32 AM
Subject: Re: [antlr-interest] How to have strings enclosed in " and/or
&quot;


>
>
> On Dec 8, 2004, at 12:47 PM, matthew ford wrote:
> > Hi all,
> > I am having trouble in the lexer handling strings that start and end
> > with "
> > or &quot;
> > (might start with " and end with &quot;)
> > Some html editors kindly replace " with &quot; when you load the file.
> >
> > I would like to be able to handle something like
> >  "str is &quot;"here&quot;"&quot;"
> > to return
> >  str is "here&quot;
> >  due to the (STRING_PART)*  below and dropping the final quote of each
> > STRING_PART
> > "" inside a string just escapes a single "
> >
> > Any ideas on how to make this work?
>
> Hi Matthew,
>
> I'm thinking that this is a language ambiguity.  I can easily give you
> two input sentences that could be interpreted either way.
> Consequently, you're going to have trouble with with generalized LR
> (only diff is that GLR would give you back both interpretations).  You
> might have some luck with a semantic predicate that tracked what you
> start with or something, but I guess what you start with is
> meaningless.  Yep, seems like a language ambiguity leading to a problem
> for any grammar.
>
> To get around it, you might try a special char input stream that did
> the replacement, but even then it won't help you I think; don't know
> when to flip and when not to. :(
>
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Thu Dec  9 13:32:56 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] How to have strings enclosed in  " and/or &quot;
In-Reply-To: <000a01c4de26$71126150$0400a8c0@NOTEBOOK>
References: <000001c4ddc5$3d3e5ed0$0400a8c0@NOTEBOOK> <4D7C24E0-4A08-11D9-86C1-000A95891192@cs.usfca.edu> <000a01c4de26$71126150$0400a8c0@NOTEBOOK>
Message-ID: <E45049A4-4A29-11D9-86C1-000A95891192@cs.usfca.edu>



On Dec 9, 2004, at 11:36 AM, matthew ford wrote:

>
> Hi Ter,
> What ambiguity do you see that I don't? Both  tokens mean the same  " 
> = =
> &quot;
> Perhaps I am too close the problem

I just meant that you really don't know when to stop a string, do you?

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From jmcclain at tcshealthcare.com  Thu Dec  9 13:35:07 2004
From: jmcclain at tcshealthcare.com (John MccLain)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] Bug in Antlr - confusion on ANTLR grammar syntax???
In-Reply-To: <000d01c4de34$3cb7ca40$0500a8c0@nigel>
Message-ID: <JMEOIPJEDGMHCIOMBHLIEEEGDIAA.jmcclain@tcshealthcare.com>


Howdy,
Sebastian Kaliszewski replied to my post stating that the parser was waiting
for more input. He was correct - If I entered another NUM, the parser
processed it and continued to wait again. He also mentioned that my
startrule should have a check for EOF. I.E.:
Your start rule should have have EOF checking in it.
something like:

expression: simpleexp ((LE|GE|NE|EQ|LT|GT) simpleexp )? EOF

EOF checking is not implicit since many languages allow arbitrary
garbage afterthe program.

BUT, how do you check for EOF, and will this cause the parser to stop busy
waiting for input? That is what I want to do. Right now I am using standard
input (through the console in eclipse), but ultimately, I will be passing a
string into the parser for it to build a parse tree. How would I gracefully
exit the parser at the end of the input string ( or for now, standard in)

Here is my original post :



-----Original Message-----
From: Nigel Sheridan-Smith [mailto:nbsherid@secsme.org.au]
Sent: Thursday, December 09, 2004 1:16 PM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Bug in Antlr - confusion on ANTLR grammar
syntax???





> -----Original Message-----
> From: Sebastian Kaliszewski [mailto:sk@z.pl]
> Sent: Friday, 10 December 2004 4:24 AM
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] Bug in Antlr - confusion on ANTLR grammar
> syntax???
>
>
> John MccLain wrote:
> > I am not understanding this at all. I am building a grammar
> > to parse powerbuilder. Here is all of the parser grammar - I reduced it
> down
> > to localize
> > the confusion
> >
> > expression: simpleexp ((LE|GE|NE|EQ|LT|GT) simpleexp )?
> > ;
> >

Be careful of using 'LT' as it has significance for the parser/lexer. Try
changing this, or examine the generated code for that rule, and see if that
is what is causing it to hang.

Nigel

--
Nigel Sheridan-Smith
PhD research student

Faculty of Engineering
University of Technology, Sydney
Phone: 02 9514 7946
Fax: 02 9514 2435





Yahoo! Groups Links









 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Thu Dec  9 13:37:33 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] Java enhancements to support bytecode generation?
In-Reply-To: <cpadfk+9794@eGroups.com>
References: <cpadfk+9794@eGroups.com>
Message-ID: <893394A4-4A2A-11D9-86C1-000A95891192@cs.usfca.edu>



On Dec 9, 2004, at 12:44 PM, atripp54321 wrote:
> I came across this item and thought Terence and others
> might find it interesting, considering that ANTLR 3 is
> generating Java bytecode:
>
> http://www.tbray.org/ongoing/When/200x/2004/12/08/DynamicJava

Verrrry interesting.  Wish I had been invited ;)

> Apparently, the gurus for a bunch of dynamic languages
> (Perl, Parrot, Python, Groovy) had a little meeting at
> Sun, and one thing they came away with had to do with
> bytecode generation. To quote the article:
>
> Lesson: Bytecode Generation A lot of people these days are generating
> bytecode: not just Jython and Groovy, but AOP tools and XPath/XSLT
> tools and others too. They're all doing it by hand without any
> abstractions to help, and it's difficult and messy and they're
> probably not doing that great a job. ?
>
> So it would be super-handy for a lot of people if there were a
> higher-level approach to this, perhaps at the AST level, so you could
> automate the bytecode generation for some common idioms like switches
> and loops and so on. It's trickier than you might think, since the
> semantics of something as apparently simple as assignment to a
> variable can get very complex in a dynamic language.

I have thought about AST or other high level language neutral byte code 
gen myself as I hack out bytecodes.  My templates are pretty small for 
my DFA so it's no biggie, but I thought I should spend some time and 
package up my class file writer and assembler plus some high level 
stuff on top as a separate doohickie, but I already have too much to 
work on ;)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From lgc at mail1.jpl.nasa.gov  Thu Dec  9 22:38:32 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] Re: Compiling with 2.7.4; running with 2.7.2
In-Reply-To: <Pine.LNX.4.44.0412091135200.5327-100000@g4.pauljlucas.org>
Message-ID: <cpbg98+m7jf@eGroups.com>



--- In antlr-interest@yahoogroups.com, "Paul J. Lucas"
<pauljlucas@m...> wrote:
> On Thu, 9 Dec 2004, micheal_jor wrote:
> 
> > --- In antlr-interest@yahoogroups.com, "Paul J. Lucas"
> > <pauljlucas@m...> wrote:
> > 
> > > 	I'm wondering if it's possible to compile ANTLR grammars using
> > > 	2.7.4 yet use the 2.7.2 run-time.
> > 
> > This isn't possible if you are using ANTLR/C#. There have been
> > breaking changes since 2.7.2 was released.
> 
> 	OK, I should have mentioned that I'm doing Java (but only
> 	because they pay me! *ducks*).

BEA pays in ducks?  I had always thought that electronic
(automatically deposited) greenbacks were the norm in the industry. 
Very strange.

--Loring

> 
> 	- Paul





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From silverio.di at qem.it  Thu Dec  9 23:42:55 2004
From: silverio.di at qem.it (silverio.di@qem.it)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] Delphi implementation state
Message-ID: <OF4177E419.57208D63-ONC1256F66.002A3C3C-C1256F66.002AE9D6@qem.it>






Someone know if already exist or think to port ANTLR output generation
to Delphi OO Pascal language ?

Thanks,
Silverio Diquigiovanni



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Matthew.Ford at forward.com.au  Fri Dec 10 02:43:09 2004
From: Matthew.Ford at forward.com.au (matthew ford)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] How to have strings enclosed in  " and/or &quot;
References: <000001c4ddc5$3d3e5ed0$0400a8c0@NOTEBOOK> <4D7C24E0-4A08-11D9-86C1-000A95891192@cs.usfca.edu> <000a01c4de26$71126150$0400a8c0@NOTEBOOK> <E45049A4-4A29-11D9-86C1-000A95891192@cs.usfca.edu>
Message-ID: <000c01c4dea5$0a6e2fe0$0400a8c0@NOTEBOOK>


Yes I do
I stop the string when I meet
either "  or &quot;  by themselves
if I meet
"&quot; or "" or &quot;" or &quot;&quot;
Then this is not the end of the string just an escaped quote
matthew

----- Original Message ----- 
From: "Terence Parr" <parrt@cs.usfca.edu>
To: <antlr-interest@yahoogroups.com>
Sent: Friday, December 10, 2004 8:32 AM
Subject: Re: [antlr-interest] How to have strings enclosed in " and/or
&quot;


>
>
> On Dec 9, 2004, at 11:36 AM, matthew ford wrote:
>
> >
> > Hi Ter,
> > What ambiguity do you see that I don't? Both  tokens mean the same  "
> > = =
> > &quot;
> > Perhaps I am too close the problem
>
> I just meant that you really don't know when to stop a string, do you?
>
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-gpitfdBS1paKN0uJR6MDXqQ at yahoogroups.com  Fri Dec 10 04:19:24 2004
From: antlr-interest-accept-gpitfdBS1paKN0uJR6MDXqQ at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:44 2004
Subject: MODERATE -- eugene_babeshko@yahoo.com posted to antlr-interest
Message-ID: <1102681164.360.17453.m10@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  eugene_babeshko@yahoo.com 

The message summary:
--------------------
FROM: eugene_babeshko@yahoo.com 
DATE: Fri, 10 Dec 2004 12:19:09 -0000 
SUBJECT: A simple Visual C++ example 

Can somebody give me a simple antlr example in Visual C++ 
6.0? For example, a program that parses string and gives 
output to console: 

Input: 2+3 Program output: 5 

Help me, please! 

--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=402 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-gpitfdBS1paKN0uJR6MDXqQ@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "eugene_babeshko" <eugene_babeshko@yahoo.com>
Subject: A simple Visual C++ example
Date: Fri, 10 Dec 2004 12:19:09 -0000
Size: 1381
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041210/48682407/attachment.mht
From eugene_babeshko at yahoo.com  Fri Dec 10 04:19:09 2004
From: eugene_babeshko at yahoo.com (eugene_babeshko)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] A simple Visual C++ example
Message-ID: <cpc47t+h424@eGroups.com>




Can somebody give me a simple antlr example in Visual C++ 6.0? For 
example, a program that parses string and gives output to console:

Input: 2+3
Program output: 5

Help me, please!








 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ric.klaren at gmail.com  Fri Dec 10 04:57:58 2004
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] A simple Visual C++ example
In-Reply-To: <cpc47t+h424@eGroups.com>
References: <cpc47t+h424@eGroups.com>
Message-ID: <bc607a4e04121004573b327752@mail.gmail.com>


On Fri, 10 Dec 2004 12:19:09 -0000, eugene_babeshko
<eugene_babeshko@yahoo.com> wrote:
> Can somebody give me a simple antlr example in Visual C++ 6.0? For
> example, a program that parses string and gives output to console:
> 
> Input: 2+3
> Program output: 5

Check out examples/cpp/calc of the distribution. Main2.cpp and
Main3.cpp demonstrate ways of how you feed a string to an antlr
parser. The .g file contains a simple expression parser evaluator.

Cheers,

Ric


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From eugene_babeshko at yahoo.com  Fri Dec 10 05:18:42 2004
From: eugene_babeshko at yahoo.com (eugene_babeshko)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] Re: A simple Visual C++ example
In-Reply-To: <bc607a4e04121004573b327752@mail.gmail.com>
Message-ID: <cpc7ni+16gb@eGroups.com>



> Check out examples/cpp/calc of the distribution. Main2.cpp and
> Main3.cpp demonstrate ways of how you feed a string to an antlr
> parser. The .g file contains a simple expression parser evaluator.

Thanks:) How can I make conditions parsing?

Input:

if (0)
   print (0)
endif





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ric.klaren at gmail.com  Fri Dec 10 06:07:08 2004
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] Re: A simple Visual C++ example
In-Reply-To: <cpc7ni+16gb@eGroups.com>
References: <bc607a4e04121004573b327752@mail.gmail.com>
	 <cpc7ni+16gb@eGroups.com>
Message-ID: <bc607a4e04121006073d85497@mail.gmail.com>


On Fri, 10 Dec 2004 13:18:42 -0000, eugene_babeshko
<eugene_babeshko@yahoo.com> wrote:
> > Check out examples/cpp/calc of the distribution. Main2.cpp and
> > Main3.cpp demonstrate ways of how you feed a string to an antlr
> > parser. The .g file contains a simple expression parser evaluator.
> 
> Thanks:) How can I make conditions parsing?
> 
> Input:
> 
> if (0)
>    print (0)
> endif

You mean how can you check the complete result of an expression ? Or
do checks inside the parser ? Anycase the first you can see in the
example the second is explained in the docs, antlr is not a tool you
can mess with without a proper understanding of it's features (or
parsing in general). It's also very helpfull to read the generated
code to get a feel for what is happening. For examples like calc this
is very manageable.

Cheers,

Ric


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From jmcclain at tcshealthcare.com  Fri Dec 10 08:44:04 2004
From: jmcclain at tcshealthcare.com (John MccLain)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] newbiew question on parsar grammar
Message-ID: <JMEOIPJEDGMHCIOMBHLIAEFDDIAA.jmcclain@tcshealthcare.com>



Howdy,
Sebastian Kaliszewski replied to an earlier  post of mine (See original post
below) stating that the parser was waiting
for more input. He was correct - If I entered another NUM, the parser
processed it and continued to wait again. He also mentioned that my
startrule should have a check for EOF. I.E.:
Your start rule should have have EOF checking in it.
something like:

expression: simpleexp ((LE|GE|NE|EQ|LT|GT) simpleexp )? EOF

EOF checking is not implicit since many languages allow arbitrary
garbage afterthe program.

BUT, what is the rule for EOF, and will this cause the parser to stop busy
waiting for input? That is what I want to do. Right now I am using standard
input (through the console in eclipse), but ultimately, I will be passing an
expression or function
string into the parser for it to build a parse tree. How would I gracefully
exit the parser at the end of the input string ( or for now, standard in)


Here is my original post :


I am not understanding this at all. I am building a grammar
to parse powerbuilder functions. Here is all of the parser grammar - I
reduced it down
to localize
the confusion

expression: simpleexp ((LE|GE|NE|EQ|LT|GT) simpleexp )?
;

simpleexp:term
;

term: factor
;

factor: NUM
;
and the lexer grammar (k = 4) for NUM is:

NUM: ('0'..'9')+
{System.out.println("2" + getText());}
;

What I dont understand is the ANTLR grammar syntax (I think).
Given an input of "1" (without the quotes), The rule 'simpleexp
((LE|GE|NE|EQ|LT|GT) simpleexp )?'
causes the parser to process then hang inside the parser, and not exit.
However, when I change the rule to
just 'simpleexp', the parser does not hang, and I exit gracefully out of
main. The parser start rule is 'expression'.
My question is - why does 'simpleexp ((LE|GE|NE|EQ|LT|GT) simpleexp )?' not
work? the parenthetic stmt is OPTIONAL - I wouldn't think it should cause a
different behavior than just 'simpleexp'. If I use 'simpleexp | simpleexp
((LE|GE|NE|EQ|LT|GT) simpleexp )?', all is well, but I don't understand why
I should have to do this???

John McClain
Senior Software Engineer
TCS Healthcare
jmcclain@tcshealthcare.com
(530)886-1700x235
"Before you criticize someone, walk a mile in their shoes.
That way, you'll be a mile from them, and you'll have their shoes."



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Fri Dec 10 09:51:07 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] How to have strings enclosed in  " and/or &quot;
In-Reply-To: <000c01c4dea5$0a6e2fe0$0400a8c0@NOTEBOOK>
References: <000001c4ddc5$3d3e5ed0$0400a8c0@NOTEBOOK> <4D7C24E0-4A08-11D9-86C1-000A95891192@cs.usfca.edu> <000a01c4de26$71126150$0400a8c0@NOTEBOOK> <E45049A4-4A29-11D9-86C1-000A95891192@cs.usfca.edu> <000c01c4dea5$0a6e2fe0$0400a8c0@NOTEBOOK>
Message-ID: <119AF963-4AD4-11D9-86C1-000A95891192@cs.usfca.edu>



On Dec 10, 2004, at 2:43 AM, matthew ford wrote:
> Yes I do
> I stop the string when I meet
> either "  or &quot;  by themselves

Hmm...doesn't seem right to me.  For example, here is some text that 
should be one string...OR not depending on your interpretation; has 
somebody in HTML land just dictated which way it goes like 
if-then-else?

" foo &quot; and more "

Ter

> if I meet
> "&quot; or "" or &quot;" or &quot;&quot;
> Then this is not the end of the string just an escaped quote
> matthew
>
> ----- Original Message -----
> From: "Terence Parr" <parrt@cs.usfca.edu>
> To: <antlr-interest@yahoogroups.com>
> Sent: Friday, December 10, 2004 8:32 AM
> Subject: Re: [antlr-interest] How to have strings enclosed in " and/or
> &quot;
>
>
>>
>>
>> On Dec 9, 2004, at 11:36 AM, matthew ford wrote:
>>
>>>
>>> Hi Ter,
>>> What ambiguity do you see that I don't? Both  tokens mean the same  "
>>> = =
>>> &quot;
>>> Perhaps I am too close the problem
>>
>> I just meant that you really don't know when to stop a string, do you?
>>
>> Ter
>> --
>> CS Professor & Grad Director, University of San Francisco
>> Creator, ANTLR Parser Generator, http://www.antlr.org
>> Cofounder, http://www.jguru.com
>> Cofounder, http://www.knowspam.net enjoy email again!
>>
>>
>>
>>
>>
>>
>> Yahoo! Groups Links
>>
>>
>>
>>
>>
>>
>>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>
>
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Matthew.Ford at forward.com.au  Fri Dec 10 12:33:46 2004
From: Matthew.Ford at forward.com.au (matthew ford)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] How to have strings enclosed in  " and/or &quot;
References: <000001c4ddc5$3d3e5ed0$0400a8c0@NOTEBOOK> <4D7C24E0-4A08-11D9-86C1-000A95891192@cs.usfca.edu> <000a01c4de26$71126150$0400a8c0@NOTEBOOK> <E45049A4-4A29-11D9-86C1-000A95891192@cs.usfca.edu> <000c01c4dea5$0a6e2fe0$0400a8c0@NOTEBOOK> <119AF963-4AD4-11D9-86C1-000A95891192@cs.usfca.edu>
Message-ID: <000c01c4def7$8c8ac6d0$0400a8c0@NOTEBOOK>


Hi Ter,

" foo &quot; and more "
is String ' foo '
Text  ' and more '
and start of another string unclosed

It is not quite that bad. Actually
it would more like
!![ " foo &quot;] and more "
or some such
I am only looking at quotes inside my webstringtemplate escapes !![  ]
I need to know when closing ] is outside a quoted string (allow for escaped
quotes)
e.g  !![" !![ ]" ]  in the template will output
!![ ]
and  !![&quot;"" !![ ]&quot;"" ]  in the template will output
"!![ ]"

a &quot; and a " are interchangable because they look the same to
the user editing HTML in a visual editor.
matthew
----- Original Message ----- 
From: "Terence Parr" <parrt@cs.usfca.edu>
To: <antlr-interest@yahoogroups.com>
Sent: Saturday, December 11, 2004 4:51 AM
Subject: Re: [antlr-interest] How to have strings enclosed in " and/or
&quot;


>
>
> On Dec 10, 2004, at 2:43 AM, matthew ford wrote:
> > Yes I do
> > I stop the string when I meet
> > either "  or &quot;  by themselves
>
> Hmm...doesn't seem right to me.  For example, here is some text that
> should be one string...OR not depending on your interpretation; has
> somebody in HTML land just dictated which way it goes like
> if-then-else?
>
> " foo &quot; and more "
>
> Ter
>
> > if I meet
> > "&quot; or "" or &quot;" or &quot;&quot;
> > Then this is not the end of the string just an escaped quote
> > matthew
> >
> > ----- Original Message -----
> > From: "Terence Parr" <parrt@cs.usfca.edu>
> > To: <antlr-interest@yahoogroups.com>
> > Sent: Friday, December 10, 2004 8:32 AM
> > Subject: Re: [antlr-interest] How to have strings enclosed in " and/or
> > &quot;
> >
> >
> >>
> >>
> >> On Dec 9, 2004, at 11:36 AM, matthew ford wrote:
> >>
> >>>
> >>> Hi Ter,
> >>> What ambiguity do you see that I don't? Both  tokens mean the same  "
> >>> = =
> >>> &quot;
> >>> Perhaps I am too close the problem
> >>
> >> I just meant that you really don't know when to stop a string, do you?
> >>
> >> Ter
> >> --
> >> CS Professor & Grad Director, University of San Francisco
> >> Creator, ANTLR Parser Generator, http://www.antlr.org
> >> Cofounder, http://www.jguru.com
> >> Cofounder, http://www.knowspam.net enjoy email again!
> >>
> >>
> >>
> >>
> >>
> >>
> >> Yahoo! Groups Links
> >>
> >>
> >>
> >>
> >>
> >>
> >>
> >
> >
> >
> >
> > Yahoo! Groups Links
> >
> >
> >
> >
> >
> >
> >
> >
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pauljlucas at mac.com  Fri Dec 10 13:18:53 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] Re: exceptions in the lexer
In-Reply-To: <F69AE41A-4883-11D9-86C1-000A95891192@cs.usfca.edu>
Message-ID: <cpd3rt+3ne4@eGroups.com>



--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
> 
> On Dec 6, 2004, at 5:58 PM, Don Caton wrote:
> > What's the point of this?  TokenStreamRecognitionException simply 
> > wraps a
> > RecognitionException and does not appear to add any useful 
> > functionality.
> 
> I believe I wanted TokenStream.nextToken() to be independent of the 
> normal recognition errors etc... found in antlr's lexers; might be 
> using another tool.

I'll add to the complaint about TokenStreamRecognitionException.  The default parser 
recovery code only catches RecognitionException, so if a 
TokenStreamRecognitionException is thrown, it bypasses my nice recovery mechanism.  
This apparently means that, every place I catch a RecognitionException to recover, I must 
also now catch a TokenStreamRecognitionException.

Sigh...

Either TokenStreamRecognitionException needs to go away or the auto-generated parser 
recovery code needs to catch TokenStreamRecognitionException in addition to 
RecognitionException (and do the same recovery stuff).

- Paul





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Fri Dec 10 14:17:44 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] How to have strings enclosed in  " and/or &quot;
In-Reply-To: <000c01c4def7$8c8ac6d0$0400a8c0@NOTEBOOK>
References: <000001c4ddc5$3d3e5ed0$0400a8c0@NOTEBOOK> <4D7C24E0-4A08-11D9-86C1-000A95891192@cs.usfca.edu> <000a01c4de26$71126150$0400a8c0@NOTEBOOK> <E45049A4-4A29-11D9-86C1-000A95891192@cs.usfca.edu> <000c01c4dea5$0a6e2fe0$0400a8c0@NOTEBOOK> <119AF963-4AD4-11D9-86C1-000A95891192@cs.usfca.edu> <000c01c4def7$8c8ac6d0$0400a8c0@NOTEBOOK>
Message-ID: <50B6FD66-4AF9-11D9-86C1-000A95891192@cs.usfca.edu>



On Dec 10, 2004, at 12:33 PM, matthew ford wrote:

>
> Hi Ter,
>
> " foo &quot; and more "
> is String ' foo '
> Text  ' and more '
> and start of another string unclosed

Oh.  I thought you could nest these.  If it's just (quote or 
escaped-quote) stuff (quote or escaped-quote) then it's easy, right?

> It is not quite that bad. Actually
> it would more like
> !![ " foo &quot;] and more "
> or some such
> I am only looking at quotes inside my webstringtemplate escapes !![  ]
> I need to know when closing ] is outside a quoted string (allow for 
> escaped
> quotes)
> e.g  !![" !![ ]" ]  in the template will output
> !![ ]
> and  !![&quot;"" !![ ]&quot;"" ]  in the template will output
> "!![ ]"

Do you really want to allow &quot;"" to mean double quote?

Anyway, I understand your issue, but I think i'd do something to make 
it more obvious to the scanner.

Ter
>
> a &quot; and a " are interchangable because they look the same to
> the user editing HTML in a visual editor.
> matthew
> ----- Original Message -----
> From: "Terence Parr" <parrt@cs.usfca.edu>
> To: <antlr-interest@yahoogroups.com>
> Sent: Saturday, December 11, 2004 4:51 AM
> Subject: Re: [antlr-interest] How to have strings enclosed in " and/or
> &quot;
>
>
>>
>>
>> On Dec 10, 2004, at 2:43 AM, matthew ford wrote:
>>> Yes I do
>>> I stop the string when I meet
>>> either "  or &quot;  by themselves
>>
>> Hmm...doesn't seem right to me.  For example, here is some text that
>> should be one string...OR not depending on your interpretation; has
>> somebody in HTML land just dictated which way it goes like
>> if-then-else?
>>
>> " foo &quot; and more "
>>
>> Ter
>>
>>> if I meet
>>> "&quot; or "" or &quot;" or &quot;&quot;
>>> Then this is not the end of the string just an escaped quote
>>> matthew
>>>
>>> ----- Original Message -----
>>> From: "Terence Parr" <parrt@cs.usfca.edu>
>>> To: <antlr-interest@yahoogroups.com>
>>> Sent: Friday, December 10, 2004 8:32 AM
>>> Subject: Re: [antlr-interest] How to have strings enclosed in " 
>>> and/or
>>> &quot;
>>>
>>>
>>>>
>>>>
>>>> On Dec 9, 2004, at 11:36 AM, matthew ford wrote:
>>>>
>>>>>
>>>>> Hi Ter,
>>>>> What ambiguity do you see that I don't? Both  tokens mean the same 
>>>>>  "
>>>>> = =
>>>>> &quot;
>>>>> Perhaps I am too close the problem
>>>>
>>>> I just meant that you really don't know when to stop a string, do 
>>>> you?
>>>>
>>>> Ter
>>>> --
>>>> CS Professor & Grad Director, University of San Francisco
>>>> Creator, ANTLR Parser Generator, http://www.antlr.org
>>>> Cofounder, http://www.jguru.com
>>>> Cofounder, http://www.knowspam.net enjoy email again!
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> Yahoo! Groups Links
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>
>>>
>>>
>>>
>>> Yahoo! Groups Links
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>> --
>> CS Professor & Grad Director, University of San Francisco
>> Creator, ANTLR Parser Generator, http://www.antlr.org
>> Cofounder, http://www.jguru.com
>> Cofounder, http://www.knowspam.net enjoy email again!
>>
>>
>>
>>
>>
>>
>> Yahoo! Groups Links
>>
>>
>>
>>
>>
>>
>>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>
>
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Fri Dec 10 14:19:51 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] Re: exceptions in the lexer
In-Reply-To: <cpd3rt+3ne4@eGroups.com>
References: <cpd3rt+3ne4@eGroups.com>
Message-ID: <9C1AF72C-4AF9-11D9-86C1-000A95891192@cs.usfca.edu>



On Dec 10, 2004, at 1:18 PM, Paul J. Lucas wrote:

>
>
> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
>>
>> On Dec 6, 2004, at 5:58 PM, Don Caton wrote:
>>> What's the point of this?  TokenStreamRecognitionException simply
>>> wraps a
>>> RecognitionException and does not appear to add any useful
>>> functionality.
>>
>> I believe I wanted TokenStream.nextToken() to be independent of the
>> normal recognition errors etc... found in antlr's lexers; might be
>> using another tool.
>
> I'll add to the complaint about TokenStreamRecognitionException.  The 
> default parser
> recovery code only catches RecognitionException, so if a
> TokenStreamRecognitionException is thrown, it bypasses my nice 
> recovery mechanism.
> This apparently means that, every place I catch a RecognitionException 
> to recover, I must
> also now catch a TokenStreamRecognitionException.
>
> Sigh...

Hi John..er..Paul. ;)

Weird.  It does look like TokenStreamRecognitionException is outside of 
the RecognitionException.  Hmm...I know I did that for a reason, but it 
escapes me.  Regardless, your argument holds that it's a pain!

> Either TokenStreamRecognitionException needs to go away or the 
> auto-generated parser
> recovery code needs to catch TokenStreamRecognitionException in 
> addition to
> RecognitionException (and do the same recovery stuff).

Hm...perhaps I should just make it catch ANTLRException, the root, 
instead?

Ter

>
> - Paul
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>
>
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From pauljlucas at mac.com  Fri Dec 10 14:25:21 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] Re: exceptions in the lexer
In-Reply-To: <9C1AF72C-4AF9-11D9-86C1-000A95891192@cs.usfca.edu>
Message-ID: <Pine.LNX.4.44.0412101424540.5327-100000@g4.pauljlucas.org>


On Fri, 10 Dec 2004, Terence Parr wrote:

> Hm...perhaps I should just make it catch ANTLRException, the root, 
> instead?

	That would work also (and should fix the problem once and for
	all).

	- Paul



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Matthew.Ford at forward.com.au  Fri Dec 10 14:25:31 2004
From: Matthew.Ford at forward.com.au (matthew ford)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] How to have strings enclosed in  " and/or &quot;
References: <000001c4ddc5$3d3e5ed0$0400a8c0@NOTEBOOK> <4D7C24E0-4A08-11D9-86C1-000A95891192@cs.usfca.edu> <000a01c4de26$71126150$0400a8c0@NOTEBOOK> <E45049A4-4A29-11D9-86C1-000A95891192@cs.usfca.edu> <000c01c4dea5$0a6e2fe0$0400a8c0@NOTEBOOK> <119AF963-4AD4-11D9-86C1-000A95891192@cs.usfca.edu> <000c01c4def7$8c8ac6d0$0400a8c0@NOTEBOOK> <50B6FD66-4AF9-11D9-86C1-000A95891192@cs.usfca.edu>
Message-ID: <003701c4df07$28ca05b0$0400a8c0@NOTEBOOK>


From: "Terence Parr" <parrt@cs.usfca.edu>
Sent: Saturday, December 11, 2004 9:17 AM
Subject: Re: [antlr-interest] How to have strings enclosed in " and/or
&quot;
> > and  !![&quot;"" !![ ]&quot;"" ]  in the template will output
> > "!![ ]"
>
> Do you really want to allow &quot;"" to mean double quote?
&quot;"  is an escaped quote and   the next " is the end of the string.
If the user cannot see a difference there should not be one.

>
> Anyway, I understand your issue, but I think i'd do something to make
> it more obvious to the scanner.
>
What are you suggesting given I don't want to mess with the user's input
inside the string which eventually
become the outpu?
matthew



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Fri Dec 10 14:34:35 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] Re: exceptions in the lexer
In-Reply-To: <Pine.LNX.4.44.0412101424540.5327-100000@g4.pauljlucas.org>
References: <Pine.LNX.4.44.0412101424540.5327-100000@g4.pauljlucas.org>
Message-ID: <AB00A73E-4AFB-11D9-86C1-000A95891192@cs.usfca.edu>



On Dec 10, 2004, at 2:25 PM, Paul J. Lucas wrote:

>
> On Fri, 10 Dec 2004, Terence Parr wrote:
>
>> Hm...perhaps I should just make it catch ANTLRException, the root,
>> instead?
>
> 	That would work also (and should fix the problem once and for
> 	all).

Agreed, though I'm afraid it would break something.  I'll add to list 
to examine for 2.7.5, which I hope to jump on next week around 
thursday.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Fri Dec 10 14:50:07 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] Re: exceptions in the lexer
In-Reply-To: <Pine.LNX.4.44.0412101424540.5327-100000@g4.pauljlucas.org>
References: <Pine.LNX.4.44.0412101424540.5327-100000@g4.pauljlucas.org>
Message-ID: <D685A43C-4AFD-11D9-86C1-000A95891192@cs.usfca.edu>



On Dec 10, 2004, at 2:25 PM, Paul J. Lucas wrote:
> On Fri, 10 Dec 2004, Terence Parr wrote:
>
>> Hm...perhaps I should just make it catch ANTLRException, the root,
>> instead?
>
> 	That would work also (and should fix the problem once and for
> 	all).

Oh, I think I remember now.  Definitely had to do with 
TokenRetryException.  I wanted to be able to blast out of the lexer 
entirely on an exception to force the a token stream switch to flip to 
another lexer and retry.  If I made that part of the same hierarchy 
under RecognitionException then you couldn't do the retry.  I 
specifically made it separate.  Hmm...seems like we need it.

 From the comment on the interface, "Anything that goes wrong while 
generating a stream of tokens", I think I meant to be different than 
recognition issues.  For the life of me though, I can't remember 
expecting lexer *recognition* exceptions to make it to the parser.  
Yet, that is what the code says.  Bizarre.  The lexer should just look 
for another token.

Ok, i'll look into it.
Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From colmmagoo at yahoo.com  Fri Dec 10 17:11:18 2004
From: colmmagoo at yahoo.com (Colm McHugh)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] Re: exceptions in the lexer
In-Reply-To: <AB00A73E-4AFB-11D9-86C1-000A95891192@cs.usfca.edu>
Message-ID: <20041211011119.51441.qmail@web52303.mail.yahoo.com>



--- Terence Parr <parrt@cs.usfca.edu> wrote:
> 
> 
> On Dec 10, 2004, at 2:25 PM, Paul J. Lucas wrote:
> 
> >
> > On Fri, 10 Dec 2004, Terence Parr wrote:
> >
> >> Hm...perhaps I should just make it catch
> ANTLRException, the root,
> >> instead?
> >
> > 	That would work also (and should fix the problem
> once and for
> > 	all).
> 
> Agreed, though I'm afraid it would break something. 
> I'll add to list 
> to examine for 2.7.5, which I hope to jump on next
> week around 
> thursday.
> 
Might that 'something' be related to syntactic
predicate?

I've been grappling with this exact same problem for
the past week, namely trapping bad character (or
lexical) errors. 

I switched all catches of TokenRecognitionException in
my parser to catch ANTLRException (I want to do my own
exception handling), and that traps all bad characters
except for one case, and that is when a bad character
is found while in syntactic predicate guess mode; the
exception does not get trapped and causes the process
to abort [this is bad]. The same bad character error
is trapped when it's not part of a syntactic
predicate, hence my finger-pointing at syn preds.

I've looked at the generated code for the parser, and
a catch block is only executed if guessing is not on,
otherwise it does a 'throw'. Why is this ? Is there a
good reason to not do the user's exception-handling if
we are in guess mode ?

My brain is refusing to delve further into the problem
(it _is_ 4:30pm on Friday) but let me know if there is
anything that vaguely makes sense in this line of
thought.

Cheers!
Colm.




		
__________________________________ 
Do you Yahoo!? 
Take Yahoo! Mail with you! Get it on your mobile phone. 
http://mobile.yahoo.com/maildemo 





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From colmmagoo at yahoo.com  Fri Dec 10 17:28:12 2004
From: colmmagoo at yahoo.com (Colm McHugh)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] Non-Default Exception-Handling - Synching to the end of the rule
Message-ID: <20041211012812.11020.qmail@web52304.mail.yahoo.com>



This may have come up before, but I am wondering if
there is a convenient way to synch to the end of the
rule when doing non-default exception handling ? I
like the way the default exception handler does this,
and it would be great if there was a simple way to
apply this with non-default exception-handling. 

The reason I am asking is because with non-default
exception handling, the lookahead is not advanced, and
multiple exceptions can be raised for the same syntax
error.  

I could make my exception-handling code ignore the
exception if it sees that it has already processed the
message, but hey I like to do as little work as
possible.

I could also take a really good look at the placement
of my exception-handling blocks in my grammar; I
suspect that some may be superfluous, and merely just
rethrowing the same exception message. I am paranoid
that all exceptions are trapped in the parser, and I
also want to be able to report as many errors as
possible to the user.

Anyhoo, thanks for any opinions/advice!

Colm.


		
__________________________________ 
Do you Yahoo!? 
Read only the mail you want - Yahoo! Mail SpamGuard. 
http://promotions.yahoo.com/new_mail 





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From alexjrodriguez at yahoo.com  Fri Dec 10 16:12:54 2004
From: alexjrodriguez at yahoo.com (Alex J. Rodriguez)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] BNF to ANTLR grammar conversion
Message-ID: <cpde26+u65t@eGroups.com>




How do I go from BNF to ANTLR grammar programmatically? I am looking
for a way to generate an XPath parser/evaluator from the following BNF
(the syntax is pretty small, and is really a stripped down XPath 1.0
syntax defined by the SDO spec):

path ::= '/'? (step '/')* step
step ::= '@'? property
      | property '[' index_from_1 ']'
      | property '.' index_from_0
      | reference '[' attribute '=' value ']'
      | ".."
property ::= NCName      ;; may be simple or complex type
attribute ::= NCName     ;; must be simple type
reference :: NCName      ;; must be DataObject type
index_from_0 ::= Digits
index_from_1 ::= NotZero (Digits)?
value ::= Literal 			
      | Number
      | Boolean
Literal ::= '"' [^"]* '"'
      | "'" [^']* "'"
Number ::= Digits ('.' Digits?)? 
      | '.' Digits
Boolean ::= true
      | false
NotZero ::= [1-9]
Digits ::= [0-9]+

;; leading '/' begins at the root
;; ".." is the containing DataObject
;; Only the last step have an attribute as the property


- Alex Rodriguez










 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ric.klaren at gmail.com  Sat Dec 11 03:06:22 2004
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] Non-Default Exception-Handling - Synching to the end of the rule
In-Reply-To: <20041211012812.11020.qmail@web52304.mail.yahoo.com>
References: <20041211012812.11020.qmail@web52304.mail.yahoo.com>
Message-ID: <bc607a4e041211030667f4520d@mail.gmail.com>


On Fri, 10 Dec 2004 17:28:12 -0800 (PST), Colm McHugh
<colmmagoo@yahoo.com> wrote:
> This may have come up before, but I am wondering if
> there is a convenient way to synch to the end of the
> rule when doing non-default exception handling ? I
> like the way the default exception handler does this,
> and it would be great if there was a simple way to
> apply this with non-default exception-handling.

Just mimick the default errorhandlers. Inside the errorhandling
section of a rule you can use the macros $FIRST $FOLLOW
$FIRST(rulename) $FOLLOW(rulename) to get access to the sets used for
error recovery. Just feed the right one to consumeUntil and you should
have gone to the 'next-rule'.

> The reason I am asking is because with non-default
> exception handling, the lookahead is not advanced, and
> multiple exceptions can be raised for the same syntax
> error.

You could also do things the other way around and leave on the default
handling and turn it off on a per rule basis depends a bit on what's
most practical. I'm afraid there's still no way to provide your own
template for a exception handler.

Cheers,

Ric


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Sat Dec 11 10:16:39 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] Re: exceptions in the lexer
In-Reply-To: <20041211011119.51441.qmail@web52303.mail.yahoo.com>
References: <20041211011119.51441.qmail@web52303.mail.yahoo.com>
Message-ID: <CD07415C-4BA0-11D9-86C1-000A95891192@cs.usfca.edu>



On Dec 10, 2004, at 5:11 PM, Colm McHugh wrote:
>> Agreed, though I'm afraid it would break something.
>> I'll add to list
>> to examine for 2.7.5, which I hope to jump on next
>> week around
>> thursday.
>>
> Might that 'something' be related to syntactic
> predicate?
Hi Colm. :)  Nice to hear from you.

Nope...not syn pred stuff.  Recognition problems should be caught by 
the syn pred and ignored; then the next viable alternative should be 
attempted.

>
> I've been grappling with this exact same problem for
> the past week, namely trapping bad character (or
> lexical) errors.
>
> I switched all catches of TokenRecognitionException in
> my parser to catch ANTLRException (I want to do my own
> exception handling), and that traps all bad characters
> except for one case, and that is when a bad character
> is found while in syntactic predicate guess mode; the
> exception does not get trapped and causes the process
> to abort [this is bad]. The same bad character error
> is trapped when it's not part of a syntactic
> predicate, hence my finger-pointing at syn preds.
>
Ah.  Well, no the syn preds are using recognition errors to say "oh, 
that alt won't match; try again with next alt."

> I've looked at the generated code for the parser, and
> a catch block is only executed if guessing is not on,
> otherwise it does a 'throw'. Why is this ? Is there a
> good reason to not do the user's exception-handling if
> we are in guess mode ?
>
Yes, all catches are turned off except for one generated for the syn 
pred.
>
Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From dvleonid at land.ru  Fri Dec 10 13:33:50 2004
From: dvleonid at land.ru (DVLeonid)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] small question
Message-ID: <5439628109.20041211003350@land.ru>


Dear antlr-interest,

  I'm confused while reading ANTLR meta-lang spec.

At "Fixed depth lookahead and syntactic predicates" part there is
sample:
  
class parse extends Parser;
a       :       (A (P)*) => A (P)*
        |       A
        ;

I cannot understand how ANTLR recognize

AB

as:      A(P)*, where amount of Ps is zero, is followed by B
or as:   A is followed by B

In common sense it should be recognized as ... I can't understand : (
ambiguity penerated in my mind...

-- 
Best regards,
 DVLeonid                          mailto:dvleonid@land.ru



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Sat Dec 11 13:33:09 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] small question
In-Reply-To: <5439628109.20041211003350@land.ru>
References: <5439628109.20041211003350@land.ru>
Message-ID: <406DB0A0-4BBC-11D9-86C1-000A95891192@cs.usfca.edu>



On Dec 10, 2004, at 1:33 PM, DVLeonid wrote:

>
> Dear antlr-interest,
>
>   I'm confused while reading ANTLR meta-lang spec.
>
> At "Fixed depth lookahead and syntactic predicates" part there is
> sample:
>
> class parse extends Parser;
> a       :       (A (P)*) => A (P)*
>         |       A
>         ;
>
> I cannot understand how ANTLR recognize
>
> AB

Hi.

You mean AP?  Well, antlr first tries to match A following by 0 or more 
Ps.  If it succeeds, it does it again (because there might have been 
actions it didn't execute during the first pass).  If it does not find 
a P as in your AB example, it rewinds the input and tries to match A.

Ter

>
> as:      A(P)*, where amount of Ps is zero, is followed by B
> or as:   A is followed by B
>
> In common sense it should be recognized as ... I can't understand : (
> ambiguity penerated in my mind...
>
> -- 
> Best regards,
>  DVLeonid                          mailto:dvleonid@land.ru
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>
>
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Matthew.Ford at forward.com.au  Sat Dec 11 22:08:17 2004
From: Matthew.Ford at forward.com.au (matthew ford)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] Solution to " How to have strings enclosed in  " and/or &quot;"
References: <000001c4ddc5$3d3e5ed0$0400a8c0@NOTEBOOK> <4D7C24E0-4A08-11D9-86C1-000A95891192@cs.usfca.edu> <000a01c4de26$71126150$0400a8c0@NOTEBOOK> <E45049A4-4A29-11D9-86C1-000A95891192@cs.usfca.edu> <000c01c4dea5$0a6e2fe0$0400a8c0@NOTEBOOK> <119AF963-4AD4-11D9-86C1-000A95891192@cs.usfca.edu> <000c01c4def7$8c8ac6d0$0400a8c0@NOTEBOOK> <50B6FD66-4AF9-11D9-86C1-000A95891192@cs.usfca.edu> <003701c4df07$28ca05b0$0400a8c0@NOTEBOOK>
Message-ID: <000701c4e010$f8fc2830$0400a8c0@NOTEBOOK>


This is what I came up with which seems to work

The interesting bit is
  | ~('\n'|'\r')
        { if ( (LA(1) == '"') || ( (LA(1) == '&')
              && (LA(2) == 'q')
              && (LA(3) == 'u')
              && (LA(4) == 'o')
              && (LA(5) == 't')
              && (LA(6) == ';'))
        ) {break;} }
where the break; is used to break out of antlr' ( )* block

Note: in my case no other token start with '&'
matthew

/* *********************  antlr lexer code *******************/
STRING
options {
    paraphrase="STRING";
}
  :  {  ( (LA(1) == '"') || ( (LA(1) == '&')
              && (LA(2) == 'q')
              && (LA(3) == 'u')
              && (LA(4) == 'o')
              && (LA(5) == 't')
              && (LA(6) == ';'))
        ) }?
   STRING_PART
 (STRING_PART)*
 { String t = $getText;

    if (t.startsWith("&quot;")) {
       t = t.substring("&quot;".length());
    } else {
        t=t.substring(1);
    }
   $setText(t);
 }
 ;

protected
STRING_PART
 : {  ( (LA(1) == '"') || ( (LA(1) == '&')
              && (LA(2) == 'q')
              && (LA(3) == 'u')
              && (LA(4) == 'o')
              && (LA(5) == 't')
              && (LA(6) == ';'))
        ) }?
        ('"' | ('&' 'q' 'u' 'o' 't' ';')) (
   options {
    generateAmbigWarnings=false;
   }
  : '\r' '\n'  {newline();}
  | '\r'   {newline();}
  | '\n'   {newline();}
  | ~('\n'|'\r')
        { if ( (LA(1) == '"') || ( (LA(1) == '&')
              && (LA(2) == 'q')
              && (LA(3) == 'u')
              && (LA(4) == 'o')
              && (LA(5) == 't')
              && (LA(6) == ';'))
        ) {break;} }
  )*
 ('"' ! | ('&' ! 'q' ! 'u' ! 'o' ! 't' ! ';' !))
 ;





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Sat Dec 11 22:14:16 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] Solution to " How to have strings enclosed in  " and/or &quot;"
In-Reply-To: <000701c4e010$f8fc2830$0400a8c0@NOTEBOOK>
References: <000001c4ddc5$3d3e5ed0$0400a8c0@NOTEBOOK> <4D7C24E0-4A08-11D9-86C1-000A95891192@cs.usfca.edu> <000a01c4de26$71126150$0400a8c0@NOTEBOOK> <E45049A4-4A29-11D9-86C1-000A95891192@cs.usfca.edu> <000c01c4dea5$0a6e2fe0$0400a8c0@NOTEBOOK> <119AF963-4AD4-11D9-86C1-000A95891192@cs.usfca.edu> <000c01c4def7$8c8ac6d0$0400a8c0@NOTEBOOK> <50B6FD66-4AF9-11D9-86C1-000A95891192@cs.usfca.edu> <003701c4df07$28ca05b0$0400a8c0@NOTEBOOK> <000701c4e010$f8fc2830$0400a8c0@NOTEBOOK>
Message-ID: <0D49674E-4C05-11D9-B52C-000393BB647E@cs.usfca.edu>



On Dec 11, 2004, at 10:08 PM, matthew ford wrote:
> This is what I came up with which seems to work
>
> The interesting bit is
>   | ~('\n'|'\r')
>         { if ( (LA(1) == '"') || ( (LA(1) == '&')
>               && (LA(2) == 'q')
>               && (LA(3) == 'u')
>               && (LA(4) == 'o')
>               && (LA(5) == 't')
>               && (LA(6) == ';'))
>         ) {break;} }
> where the break; is used to break out of antlr' ( )* block

Won't a greedy=false loop do the same thing?

Ter





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Matthew.Ford at forward.com.au  Sun Dec 12 00:28:31 2004
From: Matthew.Ford at forward.com.au (matthew ford)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] Solution to " How to have strings enclosed in  " and/or &quot;"
References: <000001c4ddc5$3d3e5ed0$0400a8c0@NOTEBOOK> <4D7C24E0-4A08-11D9-86C1-000A95891192@cs.usfca.edu> <000a01c4de26$71126150$0400a8c0@NOTEBOOK> <E45049A4-4A29-11D9-86C1-000A95891192@cs.usfca.edu> <000c01c4dea5$0a6e2fe0$0400a8c0@NOTEBOOK> <119AF963-4AD4-11D9-86C1-000A95891192@cs.usfca.edu> <000c01c4def7$8c8ac6d0$0400a8c0@NOTEBOOK> <50B6FD66-4AF9-11D9-86C1-000A95891192@cs.usfca.edu> <003701c4df07$28ca05b0$0400a8c0@NOTEBOOK> <000701c4e010$f8fc2830$0400a8c0@NOTEBOOK> <0D49674E-4C05-11D9-B52C-000393BB647E@cs.usfca.edu>
Message-ID: <000401c4e024$9061a7a0$0400a8c0@NOTEBOOK>


Not sure I will try it.
But I have an other problem

The docs say
" Disambiguating predicates are always the first element in a production
because they cannot be hoisted over actions, token, or rule references. For
example, the first production of the following rule has a disambiguating
predicate that would be hoisted into the prediction expression for the first
alternative: "

But the in the following lexer the Disambiguating predicate
 ( (LA(1) == '"')
           || ( (LA(1) == '&')
              && (LA(2) == 'q')
              && (LA(3) == 'u')
              && (LA(4) == 'o')
              && (LA(5) == 't')
              && (LA(6) == ';'))
        ) }?
is not being hoisted to protect access to the rule STRING_PART  or am I
missing some thing


header {
package au.com.forward.webstringtemplate.language;
import java.util.*;
}
class LanguageLexer extends Lexer;


options {
 exportVocab=WEBSTRINGTEMPLATE_LEXER;

 caseSensitiveLiterals=false;
 caseSensitive=false;
   k=2;
 charVocabulary = '\003'..'\377';
  testLiterals=false;
}



UNDEFINED_TOKEN
options {
  paraphrase="MISCELANEOUS_CHARACTERS"; }
 :
  ~('a'..'z'|'_'|'/'|'\\'|':'|'-'|'0'..'9'|'#'|'.'|'"'|']'|'('|')'|'
'|'\t'|'\n'|'\r')
 ;


STRING
options {
    paraphrase="STRING";
}
  :STRING_PART
 (STRING_PART)*
 ;

protected
STRING_PART
 : {  ( (LA(1) == '"')
           || ( (LA(1) == '&')
              && (LA(2) == 'q')
              && (LA(3) == 'u')
              && (LA(4) == 'o')
              && (LA(5) == 't')
              && (LA(6) == ';'))
        ) }?
        ('"'
         | ('&' 'q' 'u' 'o' 't' ';')
        ) (
   options {
    generateAmbigWarnings=false;
   }
  : '\r' '\n'  {newline();}
  | '\r'   {newline();}
  | '\n'   {newline();}
  | ~('\n'|'\r')
        { if ( (LA(1) == '"')
           || ( (LA(1) == '&')
              && (LA(2) == 'q')
              && (LA(3) == 'u')
              && (LA(4) == 'o')
              && (LA(5) == 't')
              && (LA(6) == ';'))
        ) {break;} }
  )*
 ('"' !
    | ('&' ! 'q' ! 'u' ! 'o' ! 't' ! ';' !)
   )
 ;


----- Original Message ----- 
From: "Terence Parr" <parrt@cs.usfca.edu>
To: <antlr-interest@yahoogroups.com>
Sent: Sunday, December 12, 2004 5:14 PM
Subject: Re: [antlr-interest] Solution to " How to have strings enclosed in
" and/or &quot;"


>
>
> On Dec 11, 2004, at 10:08 PM, matthew ford wrote:
> > This is what I came up with which seems to work
> >
> > The interesting bit is
> >   | ~('\n'|'\r')
> >         { if ( (LA(1) == '"') || ( (LA(1) == '&')
> >               && (LA(2) == 'q')
> >               && (LA(3) == 'u')
> >               && (LA(4) == 'o')
> >               && (LA(5) == 't')
> >               && (LA(6) == ';'))
> >         ) {break;} }
> > where the break; is used to break out of antlr' ( )* block
>
> Won't a greedy=false loop do the same thing?
>
> Ter
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Matthew.Ford at forward.com.au  Sun Dec 12 00:34:55 2004
From: Matthew.Ford at forward.com.au (matthew ford)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] Solution to " How to have strings enclosed in  " and/or &quot;"
References: <000001c4ddc5$3d3e5ed0$0400a8c0@NOTEBOOK> <4D7C24E0-4A08-11D9-86C1-000A95891192@cs.usfca.edu> <000a01c4de26$71126150$0400a8c0@NOTEBOOK> <E45049A4-4A29-11D9-86C1-000A95891192@cs.usfca.edu> <000c01c4dea5$0a6e2fe0$0400a8c0@NOTEBOOK> <119AF963-4AD4-11D9-86C1-000A95891192@cs.usfca.edu> <000c01c4def7$8c8ac6d0$0400a8c0@NOTEBOOK> <50B6FD66-4AF9-11D9-86C1-000A95891192@cs.usfca.edu> <003701c4df07$28ca05b0$0400a8c0@NOTEBOOK> <000701c4e010$f8fc2830$0400a8c0@NOTEBOOK> <0D49674E-4C05-11D9-B52C-000393BB647E@cs.usfca.edu>
Message-ID: <000b01c4e025$75626150$0400a8c0@NOTEBOOK>


No greedy=false did no do it

It generated the test

   // nongreedy exit test
   if ((LA(1)=='"'||LA(1)=='&') && (true)) break _loop11;
but I need to match  '&' 'q' 'u' 'o' 't' ';' in order to exit not just &

lexer is

STRING
options {
    paraphrase="STRING";
}
  :STRING_PART
 (STRING_PART)*
 ;

protected
STRING_PART
 : {  ( (LA(1) == '"')
           || ( (LA(1) == '&')
              && (LA(2) == 'q')
              && (LA(3) == 'u')
              && (LA(4) == 'o')
              && (LA(5) == 't')
              && (LA(6) == ';'))
        ) }?
        ('"'
         | ('&' 'q' 'u' 'o' 't' ';')
        ) (
   options {
    generateAmbigWarnings=false;
    greedy=false;
   }
  : '\r' '\n'  {newline();}
  | '\r'   {newline();}
  | '\n'   {newline();}
  | ~('\n'|'\r')
  )*
 ('"' !
    | ('&' ! 'q' ! 'u' ! 'o' ! 't' ! ';' !)
   )
 ;

matthew

----- Original Message ----- 
From: "Terence Parr" <parrt@cs.usfca.edu>
To: <antlr-interest@yahoogroups.com>
Sent: Sunday, December 12, 2004 5:14 PM
Subject: Re: [antlr-interest] Solution to " How to have strings enclosed in
" and/or &quot;"


>
>
> On Dec 11, 2004, at 10:08 PM, matthew ford wrote:
> > This is what I came up with which seems to work
> >
> > The interesting bit is
> >   | ~('\n'|'\r')
> >         { if ( (LA(1) == '"') || ( (LA(1) == '&')
> >               && (LA(2) == 'q')
> >               && (LA(3) == 'u')
> >               && (LA(4) == 'o')
> >               && (LA(5) == 't')
> >               && (LA(6) == ';'))
> >         ) {break;} }
> > where the break; is used to break out of antlr' ( )* block
>
> Won't a greedy=false loop do the same thing?
>
> Ter
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From sk at z.pl  Sun Dec 12 04:12:14 2004
From: sk at z.pl (Sebastian Kaliszewski)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] newbiew question on parsar grammar
In-Reply-To: <JMEOIPJEDGMHCIOMBHLIAEFDDIAA.jmcclain@tcshealthcare.com>
References: <JMEOIPJEDGMHCIOMBHLIAEFDDIAA.jmcclain@tcshealthcare.com>
Message-ID: <200412121312.14331.sk@z.pl>


Dnia pi? 10. grudzie? 2004 17:44, John MccLain napisa?:
> Howdy,
> Sebastian Kaliszewski replied to an earlier  post of mine (See original
> post below) stating that the parser was waiting
> for more input. He was correct - If I entered another NUM, the parser
> processed it and continued to wait again. He also mentioned that my
> startrule should have a check for EOF. I.E.:
> Your start rule should have have EOF checking in it.
> something like:
>
> expression: simpleexp ((LE|GE|NE|EQ|LT|GT) simpleexp )? EOF
>
> EOF checking is not implicit since many languages allow arbitrary
> garbage afterthe program.
>
> BUT, what is the rule for EOF,

The rule (token) for EOF is EOF. Exactly as i wrote.

> and will this cause the parser to stop busy
> waiting for input?

It should

> That is what I want to do. Right now I am using standard
> input (through the console in eclipse), but ultimately, I will be passing
> an expression or function
> string into the parser for it to build a parse tree. How would I gracefully
> exit the parser at the end of the input string ( or for now, standard in)

Just use that soecial EOF token. It's automatically generated byt the lexer 
when input terminates.


rgds
-- 
Sebastian Kaliszewski


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Sun Dec 12 12:27:13 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] Solution to " How to have strings enclosed in  " and/or &quot;"
In-Reply-To: <000b01c4e025$75626150$0400a8c0@NOTEBOOK>
References: <000001c4ddc5$3d3e5ed0$0400a8c0@NOTEBOOK> <4D7C24E0-4A08-11D9-86C1-000A95891192@cs.usfca.edu> <000a01c4de26$71126150$0400a8c0@NOTEBOOK> <E45049A4-4A29-11D9-86C1-000A95891192@cs.usfca.edu> <000c01c4dea5$0a6e2fe0$0400a8c0@NOTEBOOK> <119AF963-4AD4-11D9-86C1-000A95891192@cs.usfca.edu> <000c01c4def7$8c8ac6d0$0400a8c0@NOTEBOOK> <50B6FD66-4AF9-11D9-86C1-000A95891192@cs.usfca.edu> <003701c4df07$28ca05b0$0400a8c0@NOTEBOOK> <000701c4e010$f8fc2830$0400a8c0@NOTEBOOK> <0D49674E-4C05-11D9-B52C-000393BB647E@cs.usfca.edu> <000b01c4e025$75626150$0400a8c0@NOTEBOOK>
Message-ID: <351FAB08-4C7C-11D9-86C1-000A95891192@cs.usfca.edu>


On Dec 12, 2004, at 12:34 AM, matthew ford wrote:

> No greedy=false did no do it
>
> It generated the test
>
>    // nongreedy exit test
>    if ((LA(1)=='"'||LA(1)=='&') && (true)) break _loop11;
> but I need to match  '&' 'q' 'u' 'o' 't' ';' in order to exit not just 
> &

Is k=2 or k>=5?

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Sun Dec 12 12:28:14 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] Solution to " How to have strings enclosed in  " and/or &quot;"
In-Reply-To: <000401c4e024$9061a7a0$0400a8c0@NOTEBOOK>
References: <000001c4ddc5$3d3e5ed0$0400a8c0@NOTEBOOK> <4D7C24E0-4A08-11D9-86C1-000A95891192@cs.usfca.edu> <000a01c4de26$71126150$0400a8c0@NOTEBOOK> <E45049A4-4A29-11D9-86C1-000A95891192@cs.usfca.edu> <000c01c4dea5$0a6e2fe0$0400a8c0@NOTEBOOK> <119AF963-4AD4-11D9-86C1-000A95891192@cs.usfca.edu> <000c01c4def7$8c8ac6d0$0400a8c0@NOTEBOOK> <50B6FD66-4AF9-11D9-86C1-000A95891192@cs.usfca.edu> <003701c4df07$28ca05b0$0400a8c0@NOTEBOOK> <000701c4e010$f8fc2830$0400a8c0@NOTEBOOK> <0D49674E-4C05-11D9-B52C-000393BB647E@cs.usfca.edu> <000401c4e024$9061a7a0$0400a8c0@NOTEBOOK>
Message-ID: <59660B40-4C7C-11D9-86C1-000A95891192@cs.usfca.edu>



On Dec 12, 2004, at 12:28 AM, matthew ford wrote:
> The docs say
> " Disambiguating predicates are always the first element in a 
> production
> because they cannot be hoisted over actions, token, or rule 
> references. For
> example, the first production of the following rule has a 
> disambiguating
> predicate that would be hoisted into the prediction expression for the 
> first
> alternative: "
>
> But the in the following lexer the Disambiguating predicate
>  ( (LA(1) == '"')
>            || ( (LA(1) == '&')
>               && (LA(2) == 'q')
>               && (LA(3) == 'u')
>               && (LA(4) == 'o')
>               && (LA(5) == 't')
>               && (LA(6) == ';'))
>         ) }?
> is not being hoisted to protect access to the rule STRING_PART  or am I
> missing some thing

Official "hoisting" is not implemented in 2.x (a step backwards from 
1.x).  3.x will have it back.  Hoisting only goes into the immediately 
surrounding decision for now.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From colmmagoo at yahoo.com  Sun Dec 12 16:39:54 2004
From: colmmagoo at yahoo.com (Colm McHugh)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] Non-Default Exception-Handling - Synching to the end of the rule
In-Reply-To: <bc607a4e041211030667f4520d@mail.gmail.com>
Message-ID: <20041213003955.62798.qmail@web52305.mail.yahoo.com>


> 
> Just mimick the default errorhandlers. Inside the
> errorhandling
> section of a rule you can use the macros $FIRST
> $FOLLOW
> $FIRST(rulename) $FOLLOW(rulename) to get access to
> the sets used for
> error recovery. Just feed the right one to
> consumeUntil and you should
> have gone to the 'next-rule'.
> 
Thanks Ric, I wasn't aware of those macros, they seem
really useful.

However, consumeUntil doesn't work in the case of
lexer exceptions; I have an expr rule and if that gets
something like 'x @ y' where @ is not a recognizable
character, I still see the same '@ - bad character'
error reported, even though my error handling code
does consumeUntil on each rule.

[I think] this is because 'consumeUntil' calls LA(1),
but if the current input is on a bad character, that's
just going to result in the same bad character
exception being thrown... I'd like something more
low-level than LA(1) to advance past the character in
this case, though I'm wary of dragging too much lexer
detail into hand-written error managing code. Time to
poke around the ANTLR header files a bit...

Thanx for the suggestion,
Colm.


		
__________________________________ 
Do you Yahoo!? 
Read only the mail you want - Yahoo! Mail SpamGuard. 
http://promotions.yahoo.com/new_mail 


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-HH6XkcNXv1Grspyowv51Yxw at yahoogroups.com  Sun Dec 12 18:12:46 2004
From: antlr-interest-accept-HH6XkcNXv1Grspyowv51Yxw at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:44 2004
Subject: MODERATE -- achilles7686@yahoo.com posted to antlr-interest
Message-ID: <1102903966.414.91812.m15@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  achilles7686@yahoo.com 

The message summary:
--------------------
FROM: achilles7686@yahoo.com 
DATE: Mon, 13 Dec 2004 02:12:30 -0000 
SUBJECT: A question about treeprser? 

Dear antlr-interest, 

I want to have the pr_ModuleParList rule return an 
StringBuffer result ,but I don't know how to assign the 
return value when it is enclosed . 

pr_TTCN3Module returns [StringBuffer output] { output=new 
StringBuffer(); StringBuffer retStr; } : #( TTCN3Module 
retStr=pr_TTCN3ModuleId ( pr_ModuleParList )* ) { 
output.append(retStr); }; 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=406 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-HH6XkcNXv1Grspyowv51Yxw@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "achilles7686" <achilles7686@yahoo.com>
Subject: A question about treeprser?
Date: Mon, 13 Dec 2004 02:12:30 -0000
Size: 1560
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041213/37ba3ce0/attachment.mht
From achilles7686 at yahoo.com  Sun Dec 12 18:12:30 2004
From: achilles7686 at yahoo.com (achilles7686)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] A question about treeprser?
Message-ID: <cpitqe+ldb1@eGroups.com>




 Dear antlr-interest,

 I want to have the pr_ModuleParList rule return an StringBuffer 
result ,but I don't know how to assign the return value when it is 
enclosed .


pr_TTCN3Module returns [StringBuffer output]
{
output=new StringBuffer();
StringBuffer retStr;
}
:
	#(
	TTCN3Module 
	retStr=pr_TTCN3ModuleId 
	 ( pr_ModuleParList )*
	)
{
        output.append(retStr);
};








 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-tXTGPb4pUx9HLxeo7ZUrqbU at yahoogroups.com  Mon Dec 13 06:16:04 2004
From: antlr-interest-accept-tXTGPb4pUx9HLxeo7ZUrqbU at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:44 2004
Subject: MODERATE -- andre.naess@gmail.com posted to antlr-interest
Message-ID: <1102947364.480.99133.m23@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  andre.naess@gmail.com 

The message summary:
--------------------
FROM: andre.naess@gmail.com 
DATE: Mon, 13 Dec 2004 15:16:02 +0100 
SUBJECT: charVocabulary having no effect 

I'm struggling a bit with charVocabulary. After getting 
lot's of strange "unexpected character" errors I figured 
that this was a rather important option. I therefore added 

charVocabulary = '\3'..'\377'; 

To my Lexer options. 

But I'm still getting unexpected char errors. I have a 
fairly simple grammar with a non-greedy rule to match the 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=407 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-tXTGPb4pUx9HLxeo7ZUrqbU@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: =?ISO-8859-1?Q?Andr=E9_N=E6ss?= <andre.naess@gmail.com>
Subject: charVocabulary having no effect
Date: Mon, 13 Dec 2004 15:16:02 +0100
Size: 3089
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041213/f520fa55/attachment.mht
From parrt at cs.usfca.edu  Mon Dec 13 10:05:45 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] A question about treeprser?
In-Reply-To: <cpitqe+ldb1@eGroups.com>
References: <cpitqe+ldb1@eGroups.com>
Message-ID: <9C154776-4D31-11D9-86C1-000A95891192@cs.usfca.edu>



On Dec 12, 2004, at 6:12 PM, achilles7686 wrote:
>  I want to have the pr_ModuleParList rule return an StringBuffer
> result ,but I don't know how to assign the return value when it is
> enclosed .
>
>
> pr_TTCN3Module returns [StringBuffer output]
> {
> output=new StringBuffer();
> StringBuffer retStr;
> }
> :
> 	#(
> 	TTCN3Module
> 	retStr=pr_TTCN3ModuleId
> 	 ( pr_ModuleParList )*
> 	)
> {
>         output.append(retStr);
> };

Howdy.  Not sure I understand the question, but try having 
pr_ModuleParList return a StringBuffer like the others.  Then, in the 
loop do this:

( retStr=pr_ModuleParList {output.append(x);} )*

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From colmmagoo at yahoo.com  Mon Dec 13 11:13:45 2004
From: colmmagoo at yahoo.com (Colm McHugh)
Date: Mon Dec 20 16:17:44 2004
Subject: [antlr-interest] Re: exceptions in the lexer
In-Reply-To: <CD07415C-4BA0-11D9-86C1-000A95891192@cs.usfca.edu>
Message-ID: <20041213191345.13212.qmail@web52303.mail.yahoo.com>


> Hi Colm. :)  Nice to hear from you.
> 
> Nope...not syn pred stuff.  Recognition problems
> should be caught by 
> the syn pred and ignored; then the next viable
> alternative should be 
> attempted.
> 

Hey Ter, thanks for the response; I haven't completely
taken in your comments, but the consequence of an
exception happenning in syn pred guess mode is that I
need to put a 'catch (...)' around the code that
creates and calls my parser object. This is really
just to catch the 'throw;' that the parser does when
it's in guess mode. [I'm using C++ BTW]

I guess I'm just sharing a mistaken assumption I had
been making, which is that it's possible to catch all
exceptions within the parser (.g). 

Good work on the 3.0 lexer by the way! Hopefully folks
won't be so concerned about using a non-ANTLR lexer
with 3.0. Just out of interest, I've been working on a
project where I've replaced an ancient hand-written
parser with ANTLR 2.7.4 parser and lexer and the
performance is comparable (my ANTLR written
replacement stuff is about 40 secs slower in a 15
minute test, and I haven't done any profiling or
optimization yet).

Cheers,
Colm.


		
__________________________________ 
Do you Yahoo!? 
Dress up your holiday email, Hollywood style. Learn more. 
http://celebrity.mail.yahoo.com


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From andre.naess at gmail.com  Mon Dec 13 06:16:02 2004
From: andre.naess at gmail.com (=?ISO-8859-1?Q?Andr=E9_N=E6ss?=)
Date: Mon Dec 20 16:17:45 2004
Subject: [antlr-interest] charVocabulary having no effect
Message-ID: <e4015abf04121306164346bc15@mail.gmail.com>



I'm struggling a bit with charVocabulary. After getting lot's of
strange "unexpected character" errors I figured that this was a rather
important option. I therefore added

    charVocabulary = '\3'..'\377';

To my Lexer options.

But I'm still getting unexpected char errors. I have a fairly simple
grammar with a non-greedy rule to match the contents of a specific
portion. When the lexer encounters the char '=' in this portion it
stops saying "unexpected character". If I then add this:

POINTLESS : '=' ;

The error goes away, but then it stops on some other char. This
continues until I've added all the chars not listed in some rule in
the lexer. So to be sure it seems I will have to explicitly list *all*
the ASCII characters.

Grepping through the generated code I could not find a single
reference to "charVocabulary" or "vocabulary". Is this option broken?

I'm using Antlr 2.7.4 on Linux (Mandrake 10.0) with Java 1.4.2.

The lexer definition from the grammar file:

class QuerySchemaLexer extends Lexer;
options {
    charVocabulary = '\3'..'\377';
 	caseSensitiveLiterals = false;
}

RPAREN : ')';
LPAREN : '(';
COLON  : ':';
SEMI   : ';';
COMMA  : ',';

ID
options {
  testLiterals = true;
  paraphrase = "an identifer";
}
	:	('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'_'|'0'..'9')*
	;


WS  :   (   ' '
        |   '\t'
        |   '\r' '\n' { newline(); }
        |   '\n'      { newline(); }
        )
        {$setType(Token.SKIP);} //ignore this token
    ;





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Mon Dec 13 11:37:03 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:45 2004
Subject: [antlr-interest] charVocabulary having no effect
In-Reply-To: <e4015abf04121306164346bc15@mail.gmail.com>
References: <e4015abf04121306164346bc15@mail.gmail.com>
Message-ID: <5D350E72-4D3E-11D9-86C1-000A95891192@cs.usfca.edu>


On Dec 13, 2004, at 6:16 AM, Andr? N?ss wrote:
> I'm struggling a bit with charVocabulary. After getting lot's of
> strange "unexpected character" errors I figured that this was a rather
> important option. I therefore added
>
>     charVocabulary = '\3'..'\377';

Yeah, that should be the default.  I think for 2.7.5 I'll do that.

> To my Lexer options.
>
> But I'm still getting unexpected char errors. I have a fairly simple

Is it because you have not included a rule to match those chars?  
Saying all ascii in the vocab means you must have a rule to handle any 
ascii char that comes in.  For example,  you have no rule for left 
bracket.  If that comes along, you'll get an unexpected char error.

> grammar with a non-greedy rule to match the contents of a specific
> portion. When the lexer encounters the char '=' in this portion it
> stops saying "unexpected character". If I then add this:
>
> POINTLESS : '=' ;
>
> The error goes away, but then it stops on some other char. This
> continues until I've added all the chars not listed in some rule in
> the lexer. So to be sure it seems I will have to explicitly list *all*
> the ASCII characters.

Well, yeah.  If you want it to ignore stuff you don't have rules for, 
just set filter=true. :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From colmmagoo at yahoo.com  Mon Dec 13 11:43:40 2004
From: colmmagoo at yahoo.com (Colm McHugh)
Date: Mon Dec 20 16:17:45 2004
Subject: [antlr-interest] charVocabulary having no effect
In-Reply-To: <e4015abf04121306164346bc15@mail.gmail.com>
Message-ID: <20041213194340.42857.qmail@web52302.mail.yahoo.com>



Hi Andre,

My understanding (and experience) is that you are
going to get a lexer exception ("bad character" or
whatever) for any character that is not explicitly
used to define a token in your lexer (try defining the
lower-case letter range of ID as 'a'..'y', and you
should get an exception if you enter a 'z').

The charVocabulary is used if you define a token as
_not_ being a certain character or characters; then
the charVocabulary is used to determine the set of
characters the token can be. 

The classic case is a STRING token, the text of which
is often defined as "anything except the quote
character". What this really means is 'any
charVocabulary character except a quote'. If you
didn't specify a charVocabulary set, then your
charVocabulary would be the set of characters
explicitly used to define the tokens in your lexer.

Hope this helps,
Colm.

> 
> 
> I'm struggling a bit with charVocabulary. After
> getting lot's of
> strange "unexpected character" errors I figured that
> this was a rather
> important option. I therefore added
> 
>     charVocabulary = '\3'..'\377';
> 
> To my Lexer options.
> 
> But I'm still getting unexpected char errors. I have
> a fairly simple
> grammar with a non-greedy rule to match the contents
> of a specific
> portion. When the lexer encounters the char '=' in
> this portion it
> stops saying "unexpected character". If I then add
> this:
> 
> POINTLESS : '=' ;
> 
> The error goes away, but then it stops on some other
> char. This
> continues until I've added all the chars not listed
> in some rule in
> the lexer. So to be sure it seems I will have to
> explicitly list *all*
> the ASCII characters.
> 
> Grepping through the generated code I could not find
> a single
> reference to "charVocabulary" or "vocabulary". Is
> this option broken?
> 
> I'm using Antlr 2.7.4 on Linux (Mandrake 10.0) with
> Java 1.4.2.
> 
> The lexer definition from the grammar file:
> 
> class QuerySchemaLexer extends Lexer;
> options {
>     charVocabulary = '\3'..'\377';
>  	caseSensitiveLiterals = false;
> }
> 
> RPAREN : ')';
> LPAREN : '(';
> COLON  : ':';
> SEMI   : ';';
> COMMA  : ',';
> 
> ID
> options {
>   testLiterals = true;
>   paraphrase = "an identifer";
> }
> 	:	('a'..'z'|'A'..'Z'|'_')
> ('a'..'z'|'A'..'Z'|'_'|'0'..'9')*
> 	;
> 
> 
> WS  :   (   ' '
>         |   '\t'
>         |   '\r' '\n' { newline(); }
>         |   '\n'      { newline(); }
>         )
>         {$setType(Token.SKIP);} //ignore this token
>     ;
> 
> 
> 
> 
> 
>  
> Yahoo! Groups Links
> 
> 
>     antlr-interest-unsubscribe@yahoogroups.com
> 
>  
> 
> 
> 
> 



		
__________________________________ 
Do you Yahoo!? 
Yahoo! Mail - Helps protect you from nasty viruses. 
http://promotions.yahoo.com/new_mail


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ric.klaren at gmail.com  Mon Dec 13 16:42:51 2004
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon Dec 20 16:17:45 2004
Subject: [antlr-interest] Non-Default Exception-Handling - Synching to the end of the rule
In-Reply-To: <20041213003955.62798.qmail@web52305.mail.yahoo.com>
References: <bc607a4e041211030667f4520d@mail.gmail.com>
	 <20041213003955.62798.qmail@web52305.mail.yahoo.com>
Message-ID: <bc607a4e04121316426ab49057@mail.gmail.com>


On Sun, 12 Dec 2004 16:39:54 -0800 (PST), Colm McHugh
<colmmagoo@yahoo.com> wrote:
> > Just mimick the default errorhandlers. Inside the
> > errorhandling
> > section of a rule you can use the macros $FIRST
> > $FOLLOW
> > $FIRST(rulename) $FOLLOW(rulename) to get access to
> > the sets used for
> > error recovery. Just feed the right one to
> > consumeUntil and you should
> > have gone to the 'next-rule'.
> > 
> Thanks Ric, I wasn't aware of those macros, they seem
> really useful.

They're pretty recent additions. I noticed the docs are not that clear
on their existence :(

> However, consumeUntil doesn't work in the case of
> lexer exceptions;

consumeUntil does no exception handling (if this is required you need
to wrap it or provide a version that is exception resistant...)

By the way you mean MismatchedCharExceptions ? Or stream exceptions?

> I have an expr rule and if that gets
> something like 'x @ y' where @ is not a recognizable
> character, I still see the same '@ - bad character'
> error reported, even though my error handling code
> does consumeUntil on each rule.
> 
> [I think] this is because 'consumeUntil' calls LA(1),
> but if the current input is on a bad character, that's
> just going to result in the same bad character
> exception being thrown... I'd like something more
> low-level than LA(1) to advance past the character in
> this case, though I'm wary of dragging too much lexer
> detail into hand-written error managing code. Time to
> poke around the ANTLR header files a bit...

I think your analysis is pretty much dead on. Which makes me wonder
what kind of error handing is set up in the lexer? Doesn't it some
kind of consume() call to advance past such a character. My memory is
letting me down a bit on how this is handled. Anycase the actual act
of getting rid of such a character is done via the
LexerSharedInputState. Get from it the InputBuffer do a fill(1) on it
and consume() that should get rid of the char (I think)

Cheers,

Ric


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-e1p=gQz_1iMq2hQL5wUqwrM at yahoogroups.com  Mon Dec 13 21:27:13 2004
From: antlr-interest-accept-e1p=gQz_1iMq2hQL5wUqwrM at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:45 2004
Subject: MODERATE -- mwisner69@comcast.net posted to antlr-interest
Message-ID: <1103002033.1221.55629.m11@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  mwisner69@comcast.net 

The message summary:
--------------------
FROM: mwisner69@comcast.net 
DATE: Tue, 14 Dec 2004 05:27:06 -0000 
SUBJECT: ClassCastExceptions extending CommonAST 

Hi, I'm brand new to ANTLR and this mailing list. I'm using 
ANTLR to write an emulator for a C-like language but getting
'ClassCastExceptions' when using extension of CommonAST. At 

first I thought it was me but when I ran in to the -exact- 
same problem with the 'Pascal' example I thought I'd ask 
here. 

I'm using ANTLR 2.7.4 and Java version is 1.5 

--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=408 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-e1p=gQz_1iMq2hQL5wUqwrM@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "inyoursadmachine" <mwisner69@comcast.net>
Subject: ClassCastExceptions extending CommonAST
Date: Tue, 14 Dec 2004 05:27:06 -0000
Size: 2454
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041214/d5bffe36/attachment.mht
From mwisner69 at comcast.net  Mon Dec 13 21:27:06 2004
From: mwisner69 at comcast.net (inyoursadmachine)
Date: Mon Dec 20 16:17:45 2004
Subject: [antlr-interest] ClassCastExceptions extending CommonAST
Message-ID: <cpltja+4c1b@eGroups.com>





Hi,
I'm brand new to ANTLR and this mailing list.  I'm using ANTLR to 
write an emulator for a C-like language but 
getting 'ClassCastExceptions' when using extension of CommonAST. At 
first I thought it was me but when I ran in to the -exact- same 
problem with the 'Pascal' example I thought I'd ask here.


I'm using ANTLR 2.7.4 and Java version is 1.5

C:\>java -version
java version "1.5.0"
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0-b64)
Java HotSpot(TM) Client VM (build 1.5.0-b64, mixed mode, sharing)


C:\Program Files\ANTLR\antlr-2.7.4\examples\java\pascal>java 
PascalParser big.pas
Parsing...
   C:\Program Files\ANTLR\antlr-2.7.4\examples\java\pascal\big.pas
Can't find/access AST Node typePascalAST
parser exception: java.lang.ClassCastException: antlr.CommonAST
java.lang.ClassCastException: antlr.CommonAST
        at PascalParser.programHeading(PascalParser.java:261)
        at PascalParser.program(PascalParser.java:201)
        at PascalParser.parseFile(PascalParser.java:79)
        at PascalParser.doFile(PascalParser.java:57)
        at PascalParser.main(PascalParser.java:151)


Is this a known problem?  Is 2.7.4 considered "stable" ?  Should I 
use/try an earlier version?

Thanks in advance,
Matt













 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Mon Dec 13 22:07:23 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:45 2004
Subject: [antlr-interest] ClassCastExceptions extending CommonAST
In-Reply-To: <cpltja+4c1b@eGroups.com>
References: <cpltja+4c1b@eGroups.com>
Message-ID: <6BE90CC2-4D96-11D9-B52C-000393BB647E@cs.usfca.edu>


On Dec 13, 2004, at 9:27 PM, inyoursadmachine wrote:
> Hi,
> I'm brand new to ANTLR and this mailing list.  I'm using ANTLR to
> write an emulator for a C-like language but
> getting 'ClassCastExceptions' when using extension of CommonAST. At
> first I thought it was me but when I ran in to the -exact- same
> problem with the 'Pascal' example I thought I'd ask here.
>
>
> I'm using ANTLR 2.7.4 and Java version is 1.5
>
> C:\>java -version
> java version "1.5.0"
> Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0-b64)
> Java HotSpot(TM) Client VM (build 1.5.0-b64, mixed mode, sharing)
>
>
> C:\Program Files\ANTLR\antlr-2.7.4\examples\java\pascal>java
> PascalParser big.pas
> Parsing...
>    C:\Program Files\ANTLR\antlr-2.7.4\examples\java\pascal\big.pas
> Can't find/access AST Node typePascalAST

Hi. :)  The error should help out I think.  Seems it's trying to create 
those node types, but can't.  Look for the invocation of the parser and 
see if it is setting the node type.  You might also look at the 
ASTLabel option in the grammar to see if that's set.  Is 
typePascalAST.java around in the CLASSPATH?

Ter





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From andre.naess at gmail.com  Mon Dec 13 23:28:15 2004
From: andre.naess at gmail.com (=?ISO-8859-1?Q?Andr=E9_N=E6ss?=)
Date: Mon Dec 20 16:17:45 2004
Subject: [antlr-interest] charVocabulary having no effect
In-Reply-To: <5D350E72-4D3E-11D9-86C1-000A95891192@cs.usfca.edu>
References: <e4015abf04121306164346bc15@mail.gmail.com>
	 <5D350E72-4D3E-11D9-86C1-000A95891192@cs.usfca.edu>
Message-ID: <e4015abf041213232842a39116@mail.gmail.com>


On Mon, 13 Dec 2004 11:37:03 -0800, Terence Parr <parrt@cs.usfca.edu> wrote:

> > To my Lexer options.
> >
> > But I'm still getting unexpected char errors. I have a fairly simple
> 
> Is it because you have not included a rule to match those chars?
> Saying all ascii in the vocab means you must have a rule to handle any
> ascii char that comes in.  For example,  you have no rule for left
> bracket.  If that comes along, you'll get an unexpected char error.

Well yes, there was no rule to match the character, not until I added
a dummy one anyway. But it was still my understanding that when I use
.*, or in my case:

        (
            options {
                greedy=false;
            }
        :   .
        )*
 
charVocabulary would be used. Useful when you're matching strings for
example. In my case I want to discard that which is matched by the .*,
but what if I wanted to keep it?

> > The error goes away, but then it stops on some other char. This
> > continues until I've added all the chars not listed in some rule in
> > the lexer. So to be sure it seems I will have to explicitly list *all*
> > the ASCII characters.
> 
> Well, yeah.  If you want it to ignore stuff you don't have rules for,
> just set filter=true. :)

What I'm trying to achieve is to match a function prototype but ignore
it's body. Functions are declared using FUNCTION .. END_FUNCTION
pairs, so I use the above non-greedy (.)* construct to match the body.
But filter seems to work and is probably a much better idea, thanks
for the tip!

Regards
Andr? N?ss


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-FeyrDGnxJDOmD3kwvkL7vSk at yahoogroups.com  Mon Dec 13 23:53:40 2004
From: antlr-interest-accept-FeyrDGnxJDOmD3kwvkL7vSk at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:45 2004
Subject: MODERATE -- alecsandru.chirosca@comtec.ro posted to antlr-interest
Message-ID: <1103010820.295.82145.m3@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  alecsandru.chirosca@comtec.ro 

The message summary:
--------------------
FROM: alecsandru.chirosca@comtec.ro 
DATE: Tue, 14 Dec 2004 07:52:43 -0000 
SUBJECT: Multiple optional fields question 

Hi list 

I'm doing an parser to test de ANTLR capabilities and I have
one problem,,,, 

we have something like : 

test+1200+234EM123+1+TEST; 

where fields : test, 1200 , 234EM123 are mandatory and 1 and
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=409 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-FeyrDGnxJDOmD3kwvkL7vSk@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "mynetadm" <alecsandru.chirosca@comtec.ro>
Subject: Multiple optional fields question
Date: Tue, 14 Dec 2004 07:52:43 -0000
Size: 2267
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041214/67b941db/attachment.mht
From alecsandru.chirosca at comtec.ro  Mon Dec 13 23:52:43 2004
From: alecsandru.chirosca at comtec.ro (mynetadm)
Date: Mon Dec 20 16:17:45 2004
Subject: [antlr-interest] Multiple optional fields question
Message-ID: <cpm64b+adjm@eGroups.com>




Hi list

I'm doing an parser to test de ANTLR capabilities and I have one
problem,,,, 

we have something like :

test+1200+234EM123+1+TEST;

where fields : test, 1200 , 234EM123 are mandatory and 1 and TEST are
optional. I have to support options like :

test+1200+234EM123++TEST; or test+1200+234EM123+1 or test+1200+234EM123;

so I made :

class myParser extends Parser;
options  { k=4; }
test:    ( field1:TEXT DELIM field2:NUMBER DELIM copositeField 
          (DELIM (field3:DIGIT)?)?
           (DELIM (field4:TEXT)?)?
           ENDLINE
          );
compositeField: (
                   na:NUMBER t:TEXT nb:NUMBER
                )
class myLexer extends Lexer;
DIGIT:  	('0'..'9');
NUMBER:		(DIGIT)(DIGIT)+;
CHAR:		('a'..'z' | 'A'..'Z');
TEXT:		(CHAR)(CHAR)+;
ENDLINE:         ";";


the problem is that :

test+1200+234EM123+1+TEST; interprets corectly
test+1200+234EM123+1;      interprets corectly
test+1200+234EM123++TEST;  interprets corectly
test+1200+234EM123;        gives me an unexpected end of line

Can anyone help me please?


BR,
alecs











 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From demakov at ispras.ru  Tue Dec 14 01:04:03 2004
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon Dec 20 16:17:45 2004
Subject: [antlr-interest] Multiple optional fields question
References: <cpm64b+adjm@eGroups.com>
Message-ID: <019301c4e1bb$db8e0c30$8cc79553@marlboro>


Hi alecs,

The problem is in lookahead k=4.
Your grammar is simple enough for k=1.
Of course, ( DELIM( field3:DIGIT )? )? will conflict with the next
( DELIM ( field4:TEXT )? )? but it can be managed
with 
( options { warnWhenFollowAmbig = false; } :
  DELIM (field3:DIGIT)?
)?
because default ANTLR behaviour is to consume DELIM (field3:DIGIT)?
if DELIM is found.

I use k=1 almost always, local conflicts can be resolved
using predicates.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com

----- Original Message ----- 
From: "mynetadm" <alecsandru.chirosca@comtec.ro>
To: <antlr-interest@yahoogroups.com>
Sent: Tuesday, December 14, 2004 10:52 AM
Subject: [antlr-interest] Multiple optional fields question

> Hi list
> 
> I'm doing an parser to test de ANTLR capabilities and I have one
> problem,,,, 
> 
> we have something like :
> 
> test+1200+234EM123+1+TEST;
> 
> where fields : test, 1200 , 234EM123 are mandatory and 1 and TEST are
> optional. I have to support options like :
> 
> test+1200+234EM123++TEST; or test+1200+234EM123+1 or test+1200+234EM123;
> 
> so I made :
> 
> class myParser extends Parser;
> options  { k=4; }
> test:    ( field1:TEXT DELIM field2:NUMBER DELIM compositeField 
>           (DELIM (field3:DIGIT)?)?
>            (DELIM (field4:TEXT)?)?
>            ENDLINE
>           );
> compositeField: (
>                    na:NUMBER t:TEXT nb:NUMBER
>                 );
> class myLexer extends Lexer;
> DIGIT:  ('0'..'9');
> NUMBER: (DIGIT)(DIGIT)+;
> CHAR: ('a'..'z' | 'A'..'Z');
> TEXT: (CHAR)(CHAR)+;
> ENDLINE:         ";";
> 
> 
> the problem is that :
> 
> test+1200+234EM123+1+TEST; interprets corectly
> test+1200+234EM123+1;      interprets corectly
> test+1200+234EM123++TEST;  interprets corectly
> test+1200+234EM123;        gives me an unexpected end of line
> 
> Can anyone help me please?
> 
> 
> BR,
> alecs




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From demakov at ispras.ru  Tue Dec 14 01:52:50 2004
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon Dec 20 16:17:45 2004
Subject: [antlr-interest] BNF to ANTLR grammar conversion
References: <cpde26+u65t@eGroups.com>
Message-ID: <01d801c4e1c2$ac490c70$8cc79553@marlboro>


Hi Alex,

I don't know solution. Parser generated from BNF can't use 
custom actions as ANTLR lets. But you can convert BNF to ANTLR 
manually and use it for parser generation.
And you can generate html doc with BNF used by ANTLR using -html 
command line switch. I convert syntax of your grammar to ANTLR notation, 
but some conflicts should be resolved.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com


class myParser extends Parser;

path : (SLASH)? (step SLASH)* step;
step : (AT)? property
      | property LB index_from_1 RB
      | property DOT index_from_0
      | reference LB attribute EQUAL value RB
      | DOTDOT;
property : NCName;      // may be simple or complex type
attribute : NCName;     // must be simple type
reference : NCName;      // must be DataObject type
index_from_0 : Digits;
index_from_1 : NotZero (Digits)?;
value : Literal 
      | Number
      | Boolean;

class myLexer extends Lexer;

SLASH : '/';

AT : '@';

LB : '[';

RB : ']';

DOT : '.';

DOTDOT : "..";

EQUAL : '=';

Literal : '"' (~'"')* '"'
      | "'" (~'\'')* "'";
Number : Digits ('.' (Digits)?)? 
      | '.' Digits;
Boolean : "true"
      | "false";
NotZero : '1'..'9';
Digits : ('0'..'9')+;

// leading '/' begins at the root
// ".." is the containing DataObject
// Only the last step have an attribute as the property

----- Original Message ----- 
From: "Alex J. Rodriguez" <alexjrodriguez@yahoo.com>
To: <antlr-interest@yahoogroups.com>
Sent: Saturday, December 11, 2004 3:12 AM
Subject: [antlr-interest] BNF to ANTLR grammar conversion


> 
> 
> 
> How do I go from BNF to ANTLR grammar programmatically? I am looking
> for a way to generate an XPath parser/evaluator from the following BNF
> (the syntax is pretty small, and is really a stripped down XPath 1.0
> syntax defined by the SDO spec):
> 
> path ::= '/'? (step '/')* step
> step ::= '@'? property
>       | property '[' index_from_1 ']'
>       | property '.' index_from_0
>       | reference '[' attribute '=' value ']'
>       | ".."
> property ::= NCName      ;; may be simple or complex type
> attribute ::= NCName     ;; must be simple type
> reference :: NCName      ;; must be DataObject type
> index_from_0 ::= Digits
> index_from_1 ::= NotZero (Digits)?
> value ::= Literal 
>       | Number
>       | Boolean
> Literal ::= '"' [^"]* '"'
>       | "'" [^']* "'"
> Number ::= Digits ('.' Digits?)? 
>       | '.' Digits
> Boolean ::= true
>       | false
> NotZero ::= [1-9]
> Digits ::= [0-9]+
> 
> ;; leading '/' begins at the root
> ;; ".." is the containing DataObject
> ;; Only the last step have an attribute as the property
> 
> 
> - Alex Rodriguez
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
>  
> Yahoo! Groups Links
> 
> 
> 
>  
> 
> 
> 



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ewbank at gmail.com  Tue Dec 14 07:01:42 2004
From: ewbank at gmail.com (Bryan Ewbank)
Date: Mon Dec 20 16:17:45 2004
Subject: [antlr-interest] Performance Exploration (C++ Library)
Message-ID: <dd3a065f041214070113162073@mail.gmail.com>


There was a discussion here a while back -- wrapped up on 2004.10.26
by Don Caton -- about where performance is being lost, and a general
theory that replacing the scanner with lex would help quite a bit:

         http://article.gmane.org/gmane.comp.parsers.antlr-interest/1283

Well, I was curious (and there's a very good C++ example - thanks
Ric!), so I replaced my ANTLR scanner with lex.   Using gprof, I
learned that I saved around 10%.  That's okay, I guess.  Not what I'd
hoped for, but good enough to switch.

What surprised me is that the stuff associated with antlr::ASTRefCount
accounted for nearly 40% of the time reported in gprof.  On the one
hand, this makes some sense (the "forwarding" methods account for
around 15% of overall time) - but I was surprised to see assignment
taking nearly 10% of the time.


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ric.klaren at gmail.com  Tue Dec 14 07:33:34 2004
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon Dec 20 16:17:45 2004
Subject: [antlr-interest] Performance Exploration (C++ Library)
In-Reply-To: <dd3a065f041214070113162073@mail.gmail.com>
References: <dd3a065f041214070113162073@mail.gmail.com>
Message-ID: <bc607a4e041214073358de7fdf@mail.gmail.com>


Hi,

On Tue, 14 Dec 2004 10:01:42 -0500, Bryan Ewbank <ewbank@gmail.com> wrote:
> There was a discussion here a while back -- wrapped up on 2004.10.26
> by Don Caton -- about where performance is being lost, and a general
> theory that replacing the scanner with lex would help quite a bit:
> 
>          http://article.gmane.org/gmane.comp.parsers.antlr-interest/1283
> 
> Well, I was curious (and there's a very good C++ example - thanks
> Ric!), so I replaced my ANTLR scanner with lex.   Using gprof, I
> learned that I saved around 10%.  That's okay, I guess.  Not what I'd
> hoped for, but good enough to switch.

Only 10%? Hmm would have expected more going on some other figures I
heart about.

> What surprised me is that the stuff associated with antlr::ASTRefCount
> accounted for nearly 40% of the time reported in gprof.  On the one
> hand, this makes some sense (the "forwarding" methods account for
> around 15% of overall time) - but I was surprised to see assignment
> taking nearly 10% of the time.

Ah looks like you use a lot of treewalker stuff. But... Ugh. I'm
currently tinkering with the refcounters for 2.7.5 release (trying to
make things play nice with the ones contributed by Mark Lentzcer (sp?)
) Anycase I'm more and more of the opinion that I *really* want to get
rid of these damn things, and that was without looking at the
performance picture which you now provide (thanks!)

The one thing I'm currently worried about is backwards compatability
for the 2.7.5 release I had planned to release with the new reference
counter, but I'm at a point that I'm inclined to back out all those
changes and release 2.7.5 with the old ones. (It just feels like
shuffling the problem around to other parts of the code)

Also if I include the new ones we'll be dropping MSVC6 support.

Cheers,

Ric


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Matthew.Ford at forward.com.au  Mon Dec 13 23:42:23 2004
From: Matthew.Ford at forward.com.au (matthew ford)
Date: Mon Dec 20 16:17:45 2004
Subject: [antlr-interest] Solution to " How to have strings enclosed in  " and/or &quot;"
References: <000001c4ddc5$3d3e5ed0$0400a8c0@NOTEBOOK> <4D7C24E0-4A08-11D9-86C1-000A95891192@cs.usfca.edu> <000a01c4de26$71126150$0400a8c0@NOTEBOOK> <E45049A4-4A29-11D9-86C1-000A95891192@cs.usfca.edu> <000c01c4dea5$0a6e2fe0$0400a8c0@NOTEBOOK> <119AF963-4AD4-11D9-86C1-000A95891192@cs.usfca.edu> <000c01c4def7$8c8ac6d0$0400a8c0@NOTEBOOK> <50B6FD66-4AF9-11D9-86C1-000A95891192@cs.usfca.edu> <003701c4df07$28ca05b0$0400a8c0@NOTEBOOK> <000701c4e010$f8fc2830$0400a8c0@NOTEBOOK> <0D49674E-4C05-11D9-B52C-000393BB647E@cs.usfca.edu> <000b01c4e025$75626150$0400a8c0@NOTEBOOK> <351FAB08-4C7C-11D9-86C1-000A95891192@cs.usfca.edu>
Message-ID: <000001c4e20e$936d2640$0400a8c0@NOTEBOOK>

Hi Ter,
Still no go,

Tried upping k to 7 and got
   // nongreedy exit test
   if ((LA(1)=='"'||LA(1)=='&') && (true) && (true) && (true) && (true) &&
(true) && (true)) break _loop11;

test actionLexer.g is attached
matthew
----- Original Message ----- 
From: "Terence Parr" <parrt@cs.usfca.edu>
To: <antlr-interest@yahoogroups.com>
Sent: Monday, December 13, 2004 7:27 AM
Subject: Re: [antlr-interest] Solution to " How to have strings enclosed in
" and/or &quot;"


>
> On Dec 12, 2004, at 12:34 AM, matthew ford wrote:
>
> > No greedy=false did no do it
> >
> > It generated the test
> >
> >    // nongreedy exit test
> >    if ((LA(1)=='"'||LA(1)=='&') && (true)) break _loop11;
> > but I need to match  '&' 'q' 'u' 'o' 't' ';' in order to exit not just
> > &
>
> Is k=2 or k>=5?
>
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: actionLexer.g
Type: application/octet-stream
Size: 1090 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20041214/ff3e5d8a/actionLexer.obj
From parrt at cs.usfca.edu  Tue Dec 14 11:30:52 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:45 2004
Subject: [antlr-interest] Solution to " How to have strings enclosed in  " and/or &quot;"
In-Reply-To: <000001c4e20e$936d2640$0400a8c0@NOTEBOOK>
References: <000001c4ddc5$3d3e5ed0$0400a8c0@NOTEBOOK> <4D7C24E0-4A08-11D9-86C1-000A95891192@cs.usfca.edu> <000a01c4de26$71126150$0400a8c0@NOTEBOOK> <E45049A4-4A29-11D9-86C1-000A95891192@cs.usfca.edu> <000c01c4dea5$0a6e2fe0$0400a8c0@NOTEBOOK> <119AF963-4AD4-11D9-86C1-000A95891192@cs.usfca.edu> <000c01c4def7$8c8ac6d0$0400a8c0@NOTEBOOK> <50B6FD66-4AF9-11D9-86C1-000A95891192@cs.usfca.edu> <003701c4df07$28ca05b0$0400a8c0@NOTEBOOK> <000701c4e010$f8fc2830$0400a8c0@NOTEBOOK> <0D49674E-4C05-11D9-B52C-000393BB647E@cs.usfca.edu> <000b01c4e025$75626150$0400a8c0@NOTEBOOK> <351FAB08-4C7C-11D9-86C1-000A95891192@cs.usfca.edu> <000001c4e20e$936d2640$0400a8c0@NOTEBOOK>
Message-ID: <AA7996D8-4E06-11D9-86C1-000A95891192@cs.usfca.edu>



On Dec 13, 2004, at 11:42 PM, matthew ford wrote:

> Hi Ter,
> Still no go,
>
> Tried upping k to 7 and got
>    // nongreedy exit test
>    if ((LA(1)=='"'||LA(1)=='&') && (true) && (true) && (true) && 
> (true) &&
> (true) && (true)) break _loop11;

Crap.  You are right.  Hmm...Oh, yeah, it seems the analysis algorithm 
simply removed double quote and & from the lookahead of the loop and 
then decided a single char is enough.  Ugh.  Ok, the analysis is hosed.

Your solution seems the only one.  Put a predicate in the loop:

( {pred}? (alt1|alt2) ) *

and it will work.

Note that ('&' 'q' 'u' 'o' 't' ';') is weird.  May I suggest "&quot;"?

Ter

>
> test actionLexer.g is attached
> matthew
> ----- Original Message -----
> From: "Terence Parr" <parrt@cs.usfca.edu>
> To: <antlr-interest@yahoogroups.com>
> Sent: Monday, December 13, 2004 7:27 AM
> Subject: Re: [antlr-interest] Solution to " How to have strings 
> enclosed in
> " and/or &quot;"
>
>
>>
>> On Dec 12, 2004, at 12:34 AM, matthew ford wrote:
>>
>>> No greedy=false did no do it
>>>
>>> It generated the test
>>>
>>>    // nongreedy exit test
>>>    if ((LA(1)=='"'||LA(1)=='&') && (true)) break _loop11;
>>> but I need to match  '&' 'q' 'u' 'o' 't' ';' in order to exit not 
>>> just
>>> &
>>
>> Is k=2 or k>=5?
>>
>> Ter
>> --
>> CS Professor & Grad Director, University of San Francisco
>> Creator, ANTLR Parser Generator, http://www.antlr.org
>> Cofounder, http://www.jguru.com
>> Cofounder, http://www.knowspam.net enjoy email again!
>>
>>
>>
>>
>>
>>
>> Yahoo! Groups Links
>>
>>
>>
>>
>>
>>
>>
>
>
>
> Yahoo! Groups Links
>
>
>
>
> <actionLexer.g>
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From mwisner69 at comcast.net  Tue Dec 14 12:05:28 2004
From: mwisner69 at comcast.net (inyoursadmachine)
Date: Mon Dec 20 16:17:45 2004
Subject: [antlr-interest] Newbie ANTLR question
Message-ID: <cpnh28+ccl9@eGroups.com>




Hi,
I'm using ANTLR to write an interpreter for a C-like language. I 
finally got Parser.startRule() to run and Parser.getAST() returns 
the data below for the following source code:

source:

$name1 = "batman"
$name2 = "robin"
if($name1 == "catwoman")
{
	$name3 = "the joker"
}


ast: 
 ( = $name1 "batman" ) ( = $name2 "robin" ) ( if ( == 
$name1 "catwoman" ) ( COMPOUND_STATEMENT { ( = $name3 "the 
joker" ) } ) )

My question is how do I process a statement at a time from the AST? 
Or is this even the correct approach?  Can I do this from my tree 
parser or do I need custom code for this?

Thanks in advance,
Matt









 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-GpcRFNygxDed4cuTt61nxqw at yahoogroups.com  Tue Dec 14 12:24:37 2004
From: antlr-interest-accept-GpcRFNygxDed4cuTt61nxqw at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:45 2004
Subject: MODERATE -- sarandos.steve@pbgc.gov posted to antlr-interest
Message-ID: <1103055877.458.66293.m19@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  sarandos.steve@pbgc.gov 

The message summary:
--------------------
FROM: sarandos.steve@pbgc.gov 
DATE: Tue, 14 Dec 2004 20:24:20 -0000 
SUBJECT: Possible bug in generated C# code 

I was attempting to port StringTemplate 2.0 to C# and I am 
running into some problems with the C# code generated by 
ANTLR 2.7.4. 

Issue #1: The _saveIndex variable created in the lexers is 
being declared multiple times in a single function. The C# 
compiler complains that the variable already exists. 

Issue #2: The constructor for the ActionParser is being 
generated incorrectly. ANTLR generates: 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=410 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-GpcRFNygxDed4cuTt61nxqw@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "iooab23" <sarandos.steve@pbgc.gov>
Subject: Possible bug in generated C# code
Date: Tue, 14 Dec 2004 20:24:20 -0000
Size: 1893
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041214/5c190671/attachment.mht
From sarandos.steve at pbgc.gov  Tue Dec 14 12:24:20 2004
From: sarandos.steve at pbgc.gov (iooab23)
Date: Mon Dec 20 16:17:45 2004
Subject: [antlr-interest] Possible bug in generated C# code
Message-ID: <cpni5k+df98@eGroups.com>




I was attempting to port StringTemplate 2.0 to C# and I am running 
into some problems with the C# code generated by ANTLR 2.7.4.

Issue #1:  The _saveIndex variable created in the lexers is being 
declared multiple times in a single function.  The C# compiler 
complains that the variable already exists.

Issue #2:  The constructor for the ActionParser is being generated 
incorrectly.  ANTLR generates:

public ActionParser(TokenStream lexer, StringTemplate self) {
    this(lexer, 2);
    this.self = self;
}

should be:

public ActionParser(TokenStream lexer, StringTemplate self) : this
(lexer, 2) {    
    this.self = self;
}

Is anyone familiar with these issues?  Are there fixes available for 
them?








 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Tue Dec 14 13:46:34 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:45 2004
Subject: [antlr-interest] Possible bug in generated C# code
In-Reply-To: <cpni5k+df98@eGroups.com>
References: <cpni5k+df98@eGroups.com>
Message-ID: <9F7F85FC-4E19-11D9-86C1-000A95891192@cs.usfca.edu>



On Dec 14, 2004, at 12:24 PM, iooab23 wrote:
> I was attempting to port StringTemplate 2.0 to C# and I am running
> into some problems with the C# code generated by ANTLR 2.7.4.

I should get you 2.1, which I hope to release in a few weeks.  Should I 
send you the latest tarball?  Actually, I'm moving the antlr.org depot 
to a faster box and that is a good time to put stringtemplate into that 
repository so you could access it.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Tue Dec 14 13:47:16 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:45 2004
Subject: [antlr-interest] Newbie ANTLR question
In-Reply-To: <cpnh28+ccl9@eGroups.com>
References: <cpnh28+ccl9@eGroups.com>
Message-ID: <B88730D6-4E19-11D9-86C1-000A95891192@cs.usfca.edu>



On Dec 14, 2004, at 12:05 PM, inyoursadmachine wrote:
> ast:
>  ( = $name1 "batman" ) ( = $name2 "robin" ) ( if ( ==
> $name1 "catwoman" ) ( COMPOUND_STATEMENT { ( = $name3 "the
> joker" ) } ) )
>
> My question is how do I process a statement at a time from the AST?
> Or is this even the correct approach?  Can I do this from my tree
> parser or do I need custom code for this?

Hi Matt,

You should do it with actions in your tree parser :)

Ter

--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From open.zone at virgin.net  Tue Dec 14 16:00:45 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:17:45 2004
Subject: [antlr-interest] Re: Possible bug in generated C# code
In-Reply-To: <cpni5k+df98@eGroups.com>
Message-ID: <cpnurd+6cds@eGroups.com>



--- In antlr-interest@yahoogroups.com, "iooab23" <sarandos.steve@p...>
wrote:
> 
> 
> I was attempting to port StringTemplate 2.0 to C# and I am running 
> into some problems with the C# code generated by ANTLR 2.7.4.
> 
> Issue #1:  The _saveIndex variable created in the lexers is being 
> declared multiple times in a single function.  The C# compiler 
> complains that the variable already exists.
> 
> Issue #2:  The constructor for the ActionParser is being generated 
> incorrectly.  ANTLR generates:

<SNIP>

> Is anyone familiar with these issues?  Are there fixes available for 
> them?

Hi Steve,

Thanks for the report. Can you send a grammar that
triggers/demonstrates these issues please?. It would help if we hope
to resolve this issue before a 2.7.5 release. 

We're working on StringTemplate but waiting for the 2.1 code from Ter.

Cheers,

Micheal
ANTLR/C#






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Tue Dec 14 16:12:41 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:45 2004
Subject: [antlr-interest] Re: Possible bug in generated C# code
In-Reply-To: <cpnurd+6cds@eGroups.com>
References: <cpnurd+6cds@eGroups.com>
Message-ID: <0952C5BE-4E2E-11D9-86C1-000A95891192@cs.usfca.edu>



On Dec 14, 2004, at 4:00 PM, micheal_jor wrote:
> We're working on StringTemplate but waiting for the 2.1 code from Ter.

Heh, great!  Ok, I'll definitely move ST to the antlr.org depot as soon 
as my new box is up; perhaps you folks can coordinate.

Hmm...I wonder how to make the C# port easy to do in the future.  Well, 
one thing for sure: the language is rapidly approaching "completeness" 
and, hence, stability.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From open.zone at virgin.net  Tue Dec 14 18:02:26 2004
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:17:45 2004
Subject: [antlr-interest] Re: Possible bug in generated C# code
In-Reply-To: <cpni5k+df98@eGroups.com>
Message-ID: <cpo5vi+v8id@eGroups.com>



--- In antlr-interest@yahoogroups.com, "iooab23" <sarandos.steve@p...>
wrote:

OK, some update from Kunle on the second issue reported.

> Issue #2:  The constructor for the ActionParser is being generated 
> incorrectly.  ANTLR generates:
> 
> public ActionParser(TokenStream lexer, StringTemplate self) {
>     this(lexer, 2);
>     this.self = self;
> }
> 
> should be:
> 
> public ActionParser(TokenStream lexer, StringTemplate self) : this
> (lexer, 2) {    
>     this.self = self;
> }

This isn't a bug (or indeed an issue) with C# code generation. The
code above was manually embedded in StringTemplate's action.g grammar
file. Embedded code blocks are simply copied to the output with no
further processing.

Cheers,

Micheal
ANTLR/C#






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Matthew.Ford at forward.com.au  Tue Dec 14 23:16:26 2004
From: Matthew.Ford at forward.com.au (matthew ford)
Date: Mon Dec 20 16:17:45 2004
Subject: [antlr-interest] Problems with  " and/or &quot;"
References: <000001c4ddc5$3d3e5ed0$0400a8c0@NOTEBOOK> <4D7C24E0-4A08-11D9-86C1-000A95891192@cs.usfca.edu> <000a01c4de26$71126150$0400a8c0@NOTEBOOK> <E45049A4-4A29-11D9-86C1-000A95891192@cs.usfca.edu> <000c01c4dea5$0a6e2fe0$0400a8c0@NOTEBOOK> <119AF963-4AD4-11D9-86C1-000A95891192@cs.usfca.edu> <000c01c4def7$8c8ac6d0$0400a8c0@NOTEBOOK> <50B6FD66-4AF9-11D9-86C1-000A95891192@cs.usfca.edu> <003701c4df07$28ca05b0$0400a8c0@NOTEBOOK> <000701c4e010$f8fc2830$0400a8c0@NOTEBOOK> <0D49674E-4C05-11D9-B52C-000393BB647E@cs.usfca.edu> <000b01c4e025$75626150$0400a8c0@NOTEBOOK> <351FAB08-4C7C-11D9-86C1-000A95891192@cs.usfca.edu> <000001c4e20e$936d2640$0400a8c0@NOTEBOOK>
Message-ID: <000001c4e28a$13c0c060$0400a8c0@NOTEBOOK>

Attached is a corrected version of a lexer that will handle strings
delimited by " or &quot; (actionLexer.g)
Also attached is an alternate version which looks like it should work but
does not due to the way Antlr generates that code. (badactionLexer.g)

the interesting part of the working lexer is
  | ~('"'|'\n'|'\r')
        { if( ( (LA(0) == '&') && (LA(1) == 'q')  && (LA(2) == 'u') &&
(LA(3) == 'o')  && (LA(4) == 't')  && (LA(5) == ';')) ) {
            text.setLength(text.length()-1); // drop the & just matched
            break;
        } }
  )*
 ('"' !
    | ( 'q' ! 'u' ! 'o' ! 't' ! ';' !)  // & already matched above
   )

There should be an easier (and more strightforward) way to do this.
But if there is I have not found it yet.
Ter can you get greedy = false to work for this case?
matthew


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: actionLexer.g
Type: application/octet-stream
Size: 1334 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20041215/c73bce87/actionLexer.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: badactionLexer.g
Type: application/octet-stream
Size: 1311 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20041215/c73bce87/badactionLexer.obj
From antlr-interest-accept-ERE6y6o8BppmnKDuJNNDBZo at yahoogroups.com  Wed Dec 15 04:35:40 2004
From: antlr-interest-accept-ERE6y6o8BppmnKDuJNNDBZo at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:45 2004
Subject: MODERATE -- sarandos.steve@pbgc.gov posted to antlr-interest
Message-ID: <1103114140.508.80613.m3@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  sarandos.steve@pbgc.gov 

The message summary:
--------------------
FROM: sarandos.steve@pbgc.gov 
DATE: Wed, 15 Dec 2004 12:35:35 -0000 
SUBJECT: Re: Possible bug in generated C# code 

> This isn't a bug (or indeed an issue) with C# code 
generation. The > code above was manually embedded in 
StringTemplate's action.g grammar > file. Embedded code 
blocks are simply copied to the output with no > further 
processing. > > Cheers, > > Micheal > ANTLR/C# 

Ah, your right. I didn't notice that. I'm still learning my 
way around ANTLR and reading the grammar files. I should've 
checked for that. Thanks. 

--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=411 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-ERE6y6o8BppmnKDuJNNDBZo@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "iooab23" <sarandos.steve@pbgc.gov>
Subject: Re: Possible bug in generated C# code
Date: Wed, 15 Dec 2004 12:35:35 -0000
Size: 1650
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041215/7e016c24/attachment.mht
From antlr-interest-accept-aFN1DqIDlnoSoKviuT6l4Zc at yahoogroups.com  Wed Dec 15 04:56:26 2004
From: antlr-interest-accept-aFN1DqIDlnoSoKviuT6l4Zc at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:45 2004
Subject: MODERATE -- sarandos.steve@pbgc.gov posted to antlr-interest
Message-ID: <1103115386.1284.82191.m11@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  sarandos.steve@pbgc.gov 

The message summary:
--------------------
FROM: sarandos.steve@pbgc.gov 
DATE: Wed, 15 Dec 2004 07:50:37 -0500 
SUBJECT: RE: [antlr-interest] Re: Possible bug in generated C# code 

Attached is the ported code including the grammars that have
the "_saveIndex" problem. I fixed the code by hand so you'll
need to regenerate to see the problem. The lexers produced 
by group.g, angle.bracket.template.g, template.g and 
action.g all show the problem. 

-----Original Message----- From: micheal_jor 
[mailto:open.zone@virgin.net] Sent: Tuesday, December 14, 
2004 7:01 PM To: antlr-interest@yahoogroups.com Subject: 
[antlr-interest] Re: Possible bug in generated C# code 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=412 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-aFN1DqIDlnoSoKviuT6l4Zc@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "Sarandos Steve" <sarandos.steve@pbgc.gov>
Subject: RE: [antlr-interest] Re: Possible bug in generated C# code
Date: Wed, 15 Dec 2004 07:50:37 -0500
Size: 252171
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041215/6779b84f/attachment.mht
From sarandos.steve at pbgc.gov  Wed Dec 15 04:50:37 2004
From: sarandos.steve at pbgc.gov (Sarandos Steve)
Date: Mon Dec 20 16:17:45 2004
Subject: [antlr-interest] Re: Possible bug in generated C# code
Message-ID: <5363E6266D206F49BE6BEBCD7408EA880B37202D@hqw0prod1vcs08.prod.ent.pbgc.gov>

Attached is the ported code including the grammars that have the
"_saveIndex" problem.  I fixed the code by hand so you'll need to
regenerate to see the problem.  The lexers produced by group.g,
angle.bracket.template.g, template.g and action.g all show the problem.

-----Original Message-----
From: micheal_jor [mailto:open.zone@virgin.net] 
Sent: Tuesday, December 14, 2004 7:01 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Possible bug in generated C# code




--- In antlr-interest@yahoogroups.com, "iooab23" <sarandos.steve@p...>
wrote:
> 
> 
> I was attempting to port StringTemplate 2.0 to C# and I am running
> into some problems with the C# code generated by ANTLR 2.7.4.
> 
> Issue #1:  The _saveIndex variable created in the lexers is being
> declared multiple times in a single function.  The C# compiler 
> complains that the variable already exists.
> 
> Issue #2:  The constructor for the ActionParser is being generated
> incorrectly.  ANTLR generates:

<SNIP>

> Is anyone familiar with these issues?  Are there fixes available for
> them?

Hi Steve,

Thanks for the report. Can you send a grammar that triggers/demonstrates
these issues please?. It would help if we hope to resolve this issue
before a 2.7.5 release. 

We're working on StringTemplate but waiting for the 2.1 code from Ter.

Cheers,

Micheal
ANTLR/C#






 
Yahoo! Groups Links



 













 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: StringTemplate.zip
Type: application/x-zip-compressed
Size: 184194 bytes
Desc: StringTemplate.zip
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20041215/90bdd405/StringTemplate.bin
From sarandos.steve at pbgc.gov  Wed Dec 15 04:35:35 2004
From: sarandos.steve at pbgc.gov (iooab23)
Date: Mon Dec 20 16:17:45 2004
Subject: [antlr-interest] Re: Possible bug in generated C# code
In-Reply-To: <cpo5vi+v8id@eGroups.com>
Message-ID: <cppb2n+10bhu@eGroups.com>




> This isn't a bug (or indeed an issue) with C# code generation. The
> code above was manually embedded in StringTemplate's action.g 
grammar
> file. Embedded code blocks are simply copied to the output with no
> further processing.
> 
> Cheers,
> 
> Micheal
> ANTLR/C#

Ah, your right.  I didn't notice that.  I'm still learning my way 
around ANTLR and reading the grammar files.  I should've checked for 
that.  Thanks.








 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Wed Dec 15 09:51:56 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:45 2004
Subject: [antlr-interest] Problems with  " and/or &quot;"
In-Reply-To: <000001c4e28a$13c0c060$0400a8c0@NOTEBOOK>
References: <000001c4ddc5$3d3e5ed0$0400a8c0@NOTEBOOK> <4D7C24E0-4A08-11D9-86C1-000A95891192@cs.usfca.edu> <000a01c4de26$71126150$0400a8c0@NOTEBOOK> <E45049A4-4A29-11D9-86C1-000A95891192@cs.usfca.edu> <000c01c4dea5$0a6e2fe0$0400a8c0@NOTEBOOK> <119AF963-4AD4-11D9-86C1-000A95891192@cs.usfca.edu> <000c01c4def7$8c8ac6d0$0400a8c0@NOTEBOOK> <50B6FD66-4AF9-11D9-86C1-000A95891192@cs.usfca.edu> <003701c4df07$28ca05b0$0400a8c0@NOTEBOOK> <000701c4e010$f8fc2830$0400a8c0@NOTEBOOK> <0D49674E-4C05-11D9-B52C-000393BB647E@cs.usfca.edu> <000b01c4e025$75626150$0400a8c0@NOTEBOOK> <351FAB08-4C7C-11D9-86C1-000A95891192@cs.usfca.edu> <000001c4e20e$936d2640$0400a8c0@NOTEBOOK> <000001c4e28a$13c0c060$0400a8c0@NOTEBOOK>
Message-ID: <030CF62D-4EC2-11D9-B0B0-000A95891192@cs.usfca.edu>



On Dec 14, 2004, at 11:16 PM, matthew ford wrote:
> There should be an easier (and more strightforward) way to do this.
> But if there is I have not found it yet.
> Ter can you get greedy = false to work for this case?

The unfortunate truth is that greedy=false was an afterthought and 
apparently not properly integrated.

You'll note in 3.0 that this plain works:

Q : "&quot;" (greedy=false : . )* "&quot;" ;

I just verified the generated Java (no bytecodes in this case) and the 
DFA.  Everything is cool.  It will terminate on "&quot;" and more 
importantly, it figured out the k=6 lookahead depth out all by itself. 
:)  Hooray.  Believe me when I say that I've actually gotten time to 
think before coding this time around.  1.x was a prototype.  2.x was 
done in a hurry to shut out JavaCC and was done while I was in a 
start-up working like mad.  I've been working on just the parsing 
algorithm and code generator for 1.5 years now. :)  I should have the 
error handling done in a month or two.  Then I clean up the tool and by 
May we may have a parser/lexer combo that works with no support for 
trees etc...  We may also have a prototype gui.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From Matthew.Ford at forward.com.au  Wed Dec 15 11:06:09 2004
From: Matthew.Ford at forward.com.au (matthew ford)
Date: Mon Dec 20 16:17:45 2004
Subject: [antlr-interest] Problems with  " and/or &quot;"
References: <000001c4ddc5$3d3e5ed0$0400a8c0@NOTEBOOK> <4D7C24E0-4A08-11D9-86C1-000A95891192@cs.usfca.edu> <000a01c4de26$71126150$0400a8c0@NOTEBOOK> <E45049A4-4A29-11D9-86C1-000A95891192@cs.usfca.edu> <000c01c4dea5$0a6e2fe0$0400a8c0@NOTEBOOK> <119AF963-4AD4-11D9-86C1-000A95891192@cs.usfca.edu> <000c01c4def7$8c8ac6d0$0400a8c0@NOTEBOOK> <50B6FD66-4AF9-11D9-86C1-000A95891192@cs.usfca.edu> <003701c4df07$28ca05b0$0400a8c0@NOTEBOOK> <000701c4e010$f8fc2830$0400a8c0@NOTEBOOK> <0D49674E-4C05-11D9-B52C-000393BB647E@cs.usfca.edu> <000b01c4e025$75626150$0400a8c0@NOTEBOOK> <351FAB08-4C7C-11D9-86C1-000A95891192@cs.usfca.edu> <000001c4e20e$936d2640$0400a8c0@NOTEBOOK> <000001c4e28a$13c0c060$0400a8c0@NOTEBOOK> <030CF62D-4EC2-11D9-B0B0-000A95891192@cs.usfca.edu>
Message-ID: <000601c4e2d9$2356d3d0$0400a8c0@NOTEBOOK>


Sounds great Ter,
just to clarify does

('"' | "&quot;" | "&) (greedy=false : . )*  ('"' | "&quot;") ;

work also and also does

('"' | "&quot;" | "&ldquo;" | "&rdquo;" ) (greedy=false : . )*  ('"' ! |
"&quot;" ! | "&ldquo;" ! | "&rdquo;" ! ) ;

work?
Looking forward to 3.0 !!! :-)
matthew

----- Original Message ----- 
From: "Terence Parr" <parrt@cs.usfca.edu>
To: <antlr-interest@yahoogroups.com>
Sent: Thursday, December 16, 2004 4:51 AM
Subject: Re: [antlr-interest] Problems with " and/or &quot;"


>
>
> On Dec 14, 2004, at 11:16 PM, matthew ford wrote:
> > There should be an easier (and more strightforward) way to do this.
> > But if there is I have not found it yet.
> > Ter can you get greedy = false to work for this case?
>
> The unfortunate truth is that greedy=false was an afterthought and
> apparently not properly integrated.
>
> You'll note in 3.0 that this plain works:
>
> Q : "&quot;" (greedy=false : . )* "&quot;" ;
>
> I just verified the generated Java (no bytecodes in this case) and the
> DFA.  Everything is cool.  It will terminate on "&quot;" and more
> importantly, it figured out the k=6 lookahead depth out all by itself.
> :)  Hooray.  Believe me when I say that I've actually gotten time to
> think before coding this time around.  1.x was a prototype.  2.x was
> done in a hurry to shut out JavaCC and was done while I was in a
> start-up working like mad.  I've been working on just the parsing
> algorithm and code generator for 1.5 years now. :)  I should have the
> error handling done in a month or two.  Then I clean up the tool and by
> May we may have a parser/lexer combo that works with no support for
> trees etc...  We may also have a prototype gui.
>
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From joanpujol at gmail.com  Wed Dec 15 11:51:18 2004
From: joanpujol at gmail.com (Joan Pujol)
Date: Mon Dec 20 16:17:45 2004
Subject: [antlr-interest] Skip (but consume) some part of a rule in a TreeParser
Message-ID: <d2d18a10412151151308263eb@mail.gmail.com>


Hi,

I have a treeparser that does the the second pass of my semantic
checks (I'm not constructing the AST, then I have builAST=false).

My question is:

If in some part of a rule I detect an error and I don't want to parse
the rest of the rule how can I skip it?
If I do a return I skip the rule, but then the ASTs of the rule wans't consumed.

Here is the example:

I have a rule for object acces:

#(OBJECTACCES expression expression) 
In a call to object.attribute object1 is the first expression and
attribute is the second expression.
If for example the object isn't declared I don't want to parse the
second expression, but I want to consume it.


A lot of thanks in advance,

-- 
Joan Jes?s Pujol Espinar


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From colmmagoo at yahoo.com  Wed Dec 15 12:04:45 2004
From: colmmagoo at yahoo.com (Colm McHugh)
Date: Mon Dec 20 16:17:45 2004
Subject: [antlr-interest] Problem trying to make antlr 2.7.4 on AIX
Message-ID: <20041215200446.71365.qmail@web52306.mail.yahoo.com>



This is not really an ANTLR topic, but googling hasn't
yielded anything useful so thought I'd ask here...

I'm trying to build antlr 2.7.4 on AIX 5.2 and I get
this when I attempt to make:

make: execvp: /bin/sh: The parameter or environment
lists are too long.
make: *** [subdirs] Error 127

I'm using GNU make 3.80, which I believe is the
latest.

Anyone know how to increase the size of the
environment on AIX ? (in Linux is compiled in the
kernel, I think)

[Anyone got an ANTLR installation built on AIX 5.2 ??
]

Thx,
Colm.

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ric.klaren at gmail.com  Wed Dec 15 13:30:06 2004
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon Dec 20 16:17:45 2004
Subject: [antlr-interest] Problem trying to make antlr 2.7.4 on AIX
In-Reply-To: <20041215200446.71365.qmail@web52306.mail.yahoo.com>
References: <20041215200446.71365.qmail@web52306.mail.yahoo.com>
Message-ID: <bc607a4e041215133039df6eaf@mail.gmail.com>


Hi,

On Wed, 15 Dec 2004 12:04:45 -0800 (PST), Colm McHugh
<colmmagoo@yahoo.com> wrote:
> I'm trying to build antlr 2.7.4 on AIX 5.2 and I get
> this when I attempt to make:
> 
> make: execvp: /bin/sh: The parameter or environment
> lists are too long.
> make: *** [subdirs] Error 127
> 
> I'm using GNU make 3.80, which I believe is the
> latest.

You might get a long way by isolating the rule that trips this, it
could be that it's the rules for dependencies and for a clean make
those aren't that important.

Another option is wait for the 2.7.5 prerelease which could happen
real soon now. Wolfgang Haefelinge (one of the guys contributing the
python codegen) has been doing a lot of work on revamping the
configure scripts/makefiles, so things might be fixed in 2.7.5 or you
can give feedback after the prerelease to get AIX working out of the
box.

> Anyone know how to increase the size of the
> environment on AIX ? (in Linux is compiled in the
> kernel, I think)

My bet is that it's the commandline size, although it seems that that
is shared with environment (going on remarks after googling). This
link might give inspiration maybe:

http://www.squid-cache.org/mail-archive/squid-dev/200103/0042.html

Cheers,

Ric


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-3QyE=0frdiXQ4jztIgPLmm8 at yahoogroups.com  Wed Dec 15 14:43:05 2004
From: antlr-interest-accept-3QyE=0frdiXQ4jztIgPLmm8 at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:45 2004
Subject: MODERATE -- rmsanjiv@hotmail.com posted to antlr-interest
Message-ID: <1103150585.788.78996.m25@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  rmsanjiv@hotmail.com 

The message summary:
--------------------
FROM: rmsanjiv@hotmail.com 
DATE: Wed, 15 Dec 2004 22:42:25 -0000 
SUBJECT: Heavy Performance degradation on linux 

Hi! 

When I build antlr with -fPIC options and create a shared 
library for my application and use that to parse expressions
then there is tremendous slow down ONLY on linux. It runs 
around 200X faster on sun machines. Is there any known issue
in that regard. 

It would be of tremendous help if someone can tell me the 
cause or share the similar experience. 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=413 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-3QyE=0frdiXQ4jztIgPLmm8@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "rmsanjiv" <rmsanjiv@hotmail.com>
Subject: Heavy Performance degradation on linux
Date: Wed, 15 Dec 2004 22:42:25 -0000
Size: 1559
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041215/efffccfc/attachment.mht
From rmsanjiv at hotmail.com  Wed Dec 15 14:42:25 2004
From: rmsanjiv at hotmail.com (rmsanjiv)
Date: Mon Dec 20 16:17:46 2004
Subject: [antlr-interest] Heavy Performance degradation on linux
Message-ID: <cpqekh+920r@eGroups.com>




Hi!

When I build antlr with -fPIC options and create a shared library for
my application and use that to parse expressions then there is
tremendous slow down ONLY on linux. It runs around 200X faster on sun
machines. Is there any known issue in that regard. 

It would be of tremendous help if someone can tell me the cause or
share the similar experience.

Regards,
Sanjiv








 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ric.klaren at gmail.com  Wed Dec 15 15:27:00 2004
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon Dec 20 16:17:46 2004
Subject: [antlr-interest] Heavy Performance degradation on linux
In-Reply-To: <cpqekh+920r@eGroups.com>
References: <cpqekh+920r@eGroups.com>
Message-ID: <bc607a4e04121515277061dfc9@mail.gmail.com>


On Wed, 15 Dec 2004 22:42:25 -0000, rmsanjiv <rmsanjiv@hotmail.com> wrote:
> When I build antlr with -fPIC options and create a shared library for
> my application and use that to parse expressions then there is
> tremendous slow down ONLY on linux. It runs around 200X faster on sun
> machines. Is there any known issue in that regard.

This sounds like a linux kernel or a compiler problem, some more specs
could be helpfull. I would recommend building statically if speed is
an issue. It would be interesting to see the speed difference on linux
between a shared and statically linked lib (for reference)

Cheers,

Ric


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From rmsanjiv at hotmail.com  Wed Dec 15 16:05:09 2004
From: rmsanjiv at hotmail.com (rmsanjiv)
Date: Mon Dec 20 16:17:46 2004
Subject: [antlr-interest] Re: Heavy Performance degradation on linux
In-Reply-To: <bc607a4e04121515277061dfc9@mail.gmail.com>
Message-ID: <cpqjfl+8d8k@eGroups.com>



--- In antlr-interest@yahoogroups.com, Ric Klaren <ric.klaren@g...> wrote:
> On Wed, 15 Dec 2004 22:42:25 -0000, rmsanjiv <rmsanjiv@h...> wrote:
> > When I build antlr with -fPIC options and create a shared library for
> > my application and use that to parse expressions then there is
> > tremendous slow down ONLY on linux. It runs around 200X faster on sun
> > machines. Is there any known issue in that regard.
> 
> This sounds like a linux kernel or a compiler problem, some more specs
> could be helpfull. I would recommend building statically if speed is
> an issue. It would be interesting to see the speed difference on linux
> between a shared and statically linked lib (for reference)
> 
> Cheers,
> 
> Ric

Hi Ric,

Statically linked library runs pretty fast similar to shared library
on solaris. I wonder why this issue is specific to only shared library
on linux. Any clue?

Regards,
Sanjiv





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-eY074rzeFQ6grrEygXQ2mcg at yahoogroups.com  Wed Dec 15 18:45:57 2004
From: antlr-interest-accept-eY074rzeFQ6grrEygXQ2mcg at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:46 2004
Subject: MODERATE -- donmac@cox.net posted to antlr-interest
Message-ID: <1103165157.795.20937.m16@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  donmac@cox.net 

The message summary:
--------------------
FROM: donmac@cox.net 
DATE: Wed, 15 Dec 2004 21:45:51 -0500 
SUBJECT: RE: [antlr-interest] Performance Exploration (C++ Library) 

>Also if I include the new ones we'll be dropping MSVC6 
support. 

Given that Microsoft have essentially dropped support for 
MSVC6, that wouldn't seem to be a serious impost. 

According to http://support.microsoft.com/gp/lifedevtool: 
"Mainstream support for Visual C++ 6.0 will end in September
2004. Extended support will end in September 2005" 

--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=414 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-eY074rzeFQ6grrEygXQ2mcg@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "Don Macpherson" <donmac@cox.net>
Subject: RE: [antlr-interest] Performance Exploration (C++ Library)
Date: Wed, 15 Dec 2004 21:45:51 -0500
Size: 1816
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041216/80a96fe5/attachment.mht
From donmac at cox.net  Wed Dec 15 18:45:51 2004
From: donmac at cox.net (Don Macpherson)
Date: Mon Dec 20 16:17:46 2004
Subject: [antlr-interest] Performance Exploration (C++ Library)
In-Reply-To: <bc607a4e041214073358de7fdf@mail.gmail.com>
Message-ID: <008b01c4e319$5bf3fa20$6501a8c0@platypussoftware.com>





>Also if I include the new ones we'll be dropping MSVC6 support.

Given that Microsoft have essentially dropped support for MSVC6, that
wouldn't seem to be a serious impost.

According to http://support.microsoft.com/gp/lifedevtool:
"Mainstream support for Visual C++ 6.0 will end in September 2004. Extended
support will end in September 2005"

Its time that we moved to ANSI standards-compliant compilers.


Don






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ric.klaren at gmail.com  Thu Dec 16 02:25:17 2004
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon Dec 20 16:17:46 2004
Subject: [antlr-interest] Re: Heavy Performance degradation on linux
In-Reply-To: <cpqjfl+8d8k@eGroups.com>
References: <bc607a4e04121515277061dfc9@mail.gmail.com>
	 <cpqjfl+8d8k@eGroups.com>
Message-ID: <bc607a4e04121602254f3a67db@mail.gmail.com>


On Thu, 16 Dec 2004 00:05:09 -0000, rmsanjiv <rmsanjiv@hotmail.com> wrote:
> Statically linked library runs pretty fast similar to shared library
> on solaris. I wonder why this issue is specific to only shared library
> on linux. Any clue?

First there's the issue that for -fPIC usually a number of
restrictions are put on the generated code to make it relocatable. For
some architectures this is good, for some others it is bad. It could
also be due to some custom patches on the kernel you use (SELinux
maybe?) I'm personally not aware that these give a slowdown but I
could suspect it.

Without any more information on the compiler you use or the kernel I
cannot say anything.

Cheers,

Ric


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ewbank at gmail.com  Thu Dec 16 08:55:10 2004
From: ewbank at gmail.com (Bryan Ewbank)
Date: Mon Dec 20 16:17:46 2004
Subject: [antlr-interest] C++ file timestamps and makefiles
Message-ID: <dd3a065f04121608557c593e61@mail.gmail.com>


I've noticed some strange behavior, and need confirmation.  It appears
that ANTRL only creates C++ output files if the output file is
different than the previously generated file.

For example, unless I add a new token, the *TokenTypes* files are not
updated.  If I change the action associated with a rule, only the
*.cpp file is changed - the *.hpp is unchanged.

Is this expected of ANTLR, or do I need to be looking elsewhere to
figure out what is going on?

Thanks
- Bryan Ewbank


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Thu Dec 16 10:19:49 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:46 2004
Subject: [antlr-interest] C++ file timestamps and makefiles
In-Reply-To: <dd3a065f04121608557c593e61@mail.gmail.com>
References: <dd3a065f04121608557c593e61@mail.gmail.com>
Message-ID: <12D58EC8-4F8F-11D9-8312-000A95891192@cs.usfca.edu>



On Dec 16, 2004, at 8:55 AM, Bryan Ewbank wrote:

>
> I've noticed some strange behavior, and need confirmation.  It appears
> that ANTRL only creates C++ output files if the output file is
> different than the previously generated file.
>
> For example, unless I add a new token, the *TokenTypes* files are not
> updated.  If I change the action associated with a rule, only the
> *.cpp file is changed - the *.hpp is unchanged.
>
> Is this expected of ANTLR, or do I need to be looking elsewhere to
> figure out what is going on?

This is Ric's intended behavior (or was it Pete Wells'?), which I 
oppose, but since it's C++ cruft I let him win ;)

In my opinion, if you run antlr, files should change if only the 
timestamp.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Thu Dec 16 10:21:48 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:46 2004
Subject: [antlr-interest] gmane is so weird
In-Reply-To: <27397839-48B8-11D9-86C1-000A95891192@cs.usfca.edu>
References: <27397839-48B8-11D9-86C1-000A95891192@cs.usfca.edu>
Message-ID: <594DDC68-4F8F-11D9-8312-000A95891192@cs.usfca.edu>


Hooray this is fixed now!  No response from them except the fix, which 
I can accept :)

Ter
On Dec 7, 2004, at 5:26 PM, Terence Parr wrote:

>
> So, how come I get no text on any page:
>
> http://comments.gmane.org/gmane.comp.parsers.antlr.general/1982
>
> I'm trying pretty hard to spider, but gmane ain't making it easy. :(
>
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>
>
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From stuart.dootson at gmail.com  Thu Dec 16 10:32:09 2004
From: stuart.dootson at gmail.com (Stuart Dootson)
Date: Mon Dec 20 16:17:46 2004
Subject: [antlr-interest] C++ file timestamps and makefiles
In-Reply-To: <dd3a065f04121608557c593e61@mail.gmail.com>
References: <dd3a065f04121608557c593e61@mail.gmail.com>
Message-ID: <8b56cad404121610324e6e3b80@mail.gmail.com>


On Thu, 16 Dec 2004 11:55:10 -0500, Bryan Ewbank <ewbank@gmail.com> wrote:
> 
> I've noticed some strange behavior, and need confirmation.  It appears
> that ANTRL only creates C++ output files if the output file is
> different than the previously generated file.
> 
> For example, unless I add a new token, the *TokenTypes* files are not
> updated.  If I change the action associated with a rule, only the
> *.cpp file is changed - the *.hpp is unchanged.
> 
> Is this expected of ANTLR, or do I need to be looking elsewhere to
> figure out what is going on?
> 
> Thanks
> - Bryan Ewbank

I've observed that behaviour - I thought I remembered there being a
command-line switch or option to alter the behaviour, but I can't find
it now :-(

What I do is to delete any Antlr outputs before running Antlr,
ensuring they are all generated again. Unless I do this, Visual Studio
& make think that the Antlr outputs are always out of date and need
regenerating. Here's an example from a makefile rule - it uses cantlr,
not the Java Antlr, but it's the same principle.

TestLanguageLexer.cpp, TestLanguageLexer.hpp,
TestLanguageLexerTokenTypes.hpp, TestLanguageParser.cpp,
TestLanguageParser.hpp : TestLanguage.g
    if exist TestLanguageLexer.cpp del TestLanguageLexer.cpp
    if exist TestLanguageLexer.hpp del TestLanguageLexer.hpp
    if exist TestLanguageLexerTokenTypes.hpp del TestLanguageLexerTokenTypes.hpp
    if exist TestLanguageParser.cpp del TestLanguageParser.cpp
    if exist TestLanguageParser.hpp del TestLanguageParser.hpp
    cantlr $(CANTLRFLAGS) TestLanguage.g

Stuart Dootson


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From mtiller at ford.com  Thu Dec 16 10:53:17 2004
From: mtiller at ford.com (Tiller, Michael (M.M.))
Date: Mon Dec 20 16:17:46 2004
Subject: [antlr-interest] treecc: AOP Approach to Writing Compilers
Message-ID: <FD35CB8B26F9534E86D1AC31F401AB340483FE12@na1fcm52.dearborn.ford.com>


Alexey et. al.,

  I forwarded this discussion on to a colleague who is more familiar
with using ML for compiler writing.  He pointed out some stuff I wasn't
aware of.

  What I would like to see is something with the pattern matching
capabilities of ML (succinct action descriptions, exhaustive
combinatorial analysis, etc.).  Granted, tree parsers are one way to go.
But my colleague also pointed out the following language:

Scala - http://scala.epfl.ch/
Nice - http://nice.sourceforge.net/

To me the really neat part about these languages is that I can layer
them over the Java virtual machine and work directly with Java objects.
Perhaps it is more aesthetics than anything else, but it seems quite
elegant to me.

Alexey, I wonder if you could exploit the descriptions in treecc to
generate code for these languages as well?

I also found some discussions on these here:

http://www.manageability.org/blog/stuff/scala-the-groovy-killer/view

Note that I don't really have any concrete proposals.  These ideas are
still swirling around in my head at the moment.  I just find that these
various approaches have different aspects that I like and I just wonder
if there is a way to combine them to get the best of all worlds.

--
Mike

> -----Original Message-----
> From: Alexey Demakov [mailto:demakov@ispras.ru]
> Sent: Thursday, November 25, 2004 11:40 AM
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] treecc: AOP Approach to Writing
Compilers
> 
> 
> From: "Tiller, Michael (M.M.)" <mtiller@ford.com>
> >   Thanks for posting this.  This is quite interesting.  Many of my
ML
> > friends gush about being able to do things like this in ML.  I
suspect
> > there is room to bring the sort of exhaustive pattern machine and
> > high-level type descriptions of ML into a more mainstream
environment
> > like ANLTR.
> 
> Unfortunately, I'm not familiar with ML :(
> 
> >   Have you given any thought to implementing these kinds of pattern
> > matching features in TreeDL?!  I'm already quite interested in
TreeDL
> > but pattern matching capabilities would be a fascinating addition.
> 
> Generally, yes. But I think it is more 'operation over subtree' than
> pattern matching. In my understanding, pattern matching proposes that
you
> specify more than just a node - may be children types or attribute
values
> -
> and some engine searches tree and executes your actions in context
> of matched pattern. I don't like such engine, because prefer
> to control order of tree walking.
> 
> When processing a tree, we need some natural way to specify actions
over
> tree as a whole or some subtree. Action, like usual method, have
> signature.
> Because of heterogenous tree description we don't need to repeat
> full tree structure as in ANTLR tree grammars.
> But action body should be defined for each inherited node type with
> ability
> to use super-implementation. Translation tool should check consistence
> of action definition.
> 
> >   I'm no compiler expert, but I can't help but see lots of related
but
> > not quite cohesive ideas floating around on this subject.  The
recent
> > thread on tree grammars (to use or not to use) plus the comments
I've
> > gotten from my ML friends along with my own experiences gives me the
> > sense that perhaps there is a way to formulate these ideas in a more
> > universal way.  Personally, I like the pattern matching approach in
ML
> > because it seems like something that can be analyzed more (e.g. for
> > holes) than a tree grammar.  It also seems like it maps more to the
> > compilation stages (type inference, constant folding, etc).  But
I'll
> > say it again "I'm no compiler expert".
> 
> Can you write some short review of ML features that can be useful for
tree
> processing? At least ideas. Or point me to existing document.
> I'll try to read something about ML, but not sure can find time :(
> 
> > P.S. - I don't quite see the AOP part of Treecc.  It really just
seems
> > like a high-level data model language that supports code generation
for
> > the underlying data structures.  Of course, I still don't get AOP so
> > maybe that is why I can't see it.
> 
> Well, every answer on my message contains similar statement.
> Let it be on conscience of author of "Treecc: An Aspect-Oriented
Approach
> to Writing Compilers" :)
> May be it is not AOP in usual sence, but I see some similarity.
> 
> Regards,
> Alexey
> 
> -----
> Alexey Demakov
> TreeDL: Tree Description Language: http://treedl.sourceforge.net
> RedVerst Group: http://www.unitesk.com
> 
> 
> 
> 
> 
> Yahoo! Groups Links
> 
> 
> 
> 
> 
> 



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Thu Dec 16 11:22:17 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:46 2004
Subject: [antlr-interest] spoke to soon: gmane sucks. period.
Message-ID: <CCD8C417-4F97-11D9-8312-000A95891192@cs.usfca.edu>


Ok, so have these people actually tried to use their site?  I cannot 
get text to appear half the time.  Some kind of weird cookie crap going 
on too so same url shows about 100 different views.  IE doesn't seem to 
show the content.  As somebody who spent 5 heinous years of his life 
building websites, I can tell you that this is just not that hard of a 
problem.

Ugh.  Ok, so

http://groups.google.com/

looks like it might actually work.  At least we can trust their search 
facility. ;)  Not sure about uploading old stuff.  Ack.  Doesn't look I 
can upload old email easily. :(

The Mailman software requires apache but should work.  Found a way to 
upload files... boy is it UGLY!  Ugh.  Well, perhaps I'll set up an 
interface to the mail through antlr.org's server by tunneling.  Anyway, 
looks like it will work and I can then spider it.  We should be good to 
go.  New antlr.org box is being built as we speak.  DNS should switch 
this weekend.  I'll let you know when I can switch the mailing list.

perforce repository will move this weekend as well

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From stefan at amiq.ro  Thu Dec 16 11:37:40 2004
From: stefan at amiq.ro (birmanstefan)
Date: Mon Dec 20 16:17:46 2004
Subject: [antlr-interest] BNF transformation
Message-ID: <cpso64+tv2u@eGroups.com>



Hello,

     I have a BNF as a *.g file. I want to parse the g file and then 
generate some text/html/code/etc. I looked in the manual and I saw 
that I can export the BNF as a html file, with -html option.
     How/Where can I hook and generate my own stuff based on the g 
file? Where should I look for resolving this task? Does anybody tried 
to resolve a similar problem?

     Any info, link, start point, something is welcomed.

Thank you,
          Stefan.

PS:  My basic ideea is to use, somehow, the StringTemplate.





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ric.klaren at gmail.com  Thu Dec 16 11:49:06 2004
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon Dec 20 16:17:46 2004
Subject: [antlr-interest] C++ file timestamps and makefiles
In-Reply-To: <dd3a065f04121608557c593e61@mail.gmail.com>
References: <dd3a065f04121608557c593e61@mail.gmail.com>
Message-ID: <bc607a4e04121611496ff789f@mail.gmail.com>


Hi,

On Thu, 16 Dec 2004 11:55:10 -0500, Bryan Ewbank <ewbank@gmail.com> wrote:
> I've noticed some strange behavior, and need confirmation.  It appears
> that ANTRL only creates C++ output files if the output file is
> different than the previously generated file.
> 
> For example, unless I add a new token, the *TokenTypes* files are not
> updated.  If I change the action associated with a rule, only the
> *.cpp file is changed - the *.hpp is unchanged.
> 
> Is this expected of ANTLR, or do I need to be looking elsewhere to
> figure out what is going on?

It's what I expect/made to prevent unnecessary rebuilds. E.g. if you
only change actions in a .g file only the .cpp file is touched. All
set up for minimal builds.

Cheers,

Ric


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From joanpujol at gmail.com  Thu Dec 16 12:15:21 2004
From: joanpujol at gmail.com (Joan Pujol)
Date: Mon Dec 20 16:17:46 2004
Subject: [antlr-interest] spoke to soon: gmane sucks. period.
In-Reply-To: <CCD8C417-4F97-11D9-8312-000A95891192@cs.usfca.edu>
References: <CCD8C417-4F97-11D9-8312-000A95891192@cs.usfca.edu>
Message-ID: <d2d18a104121612156c2a7b61@mail.gmail.com>


> The Mailman software requires apache but should work.  Found a way to
> upload files... boy is it UGLY!  Ugh.  Well, perhaps I'll set up an
> interface to the mail through antlr.org's server by tunneling.  Anyway,
> looks like it will work and I can then spider it.  We should be good to
> go.  New antlr.org box is being built as we speak.  DNS should switch
> this weekend.  I'll let you know when I can switch the mailing list.

Only one suggestion. If you spider the mailing list please, please,
please and 1000 time please ;) Put some antispam logic.

 A lot of thanks for your dedication ,

-- 
Joan Jes?s Pujol Espinar


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ric.klaren at gmail.com  Thu Dec 16 12:19:27 2004
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon Dec 20 16:17:46 2004
Subject: [antlr-interest] C++ file timestamps and makefiles
In-Reply-To: <8b56cad404121610324e6e3b80@mail.gmail.com>
References: <dd3a065f04121608557c593e61@mail.gmail.com>
	 <8b56cad404121610324e6e3b80@mail.gmail.com>
Message-ID: <bc607a4e041216121942a206cf@mail.gmail.com>


On Thu, 16 Dec 2004 18:32:09 +0000, Stuart Dootson
<stuart.dootson@gmail.com> wrote:
> I've observed that behaviour - I thought I remembered there being a
> command-line switch or option to alter the behaviour, but I can't find
> it now :-(

There's no switch for it.

> What I do is to delete any Antlr outputs before running Antlr,
> ensuring they are all generated again. Unless I do this, Visual Studio
> & make think that the Antlr outputs are always out of date and need
> regenerating. Here's an example from a makefile rule - it uses cantlr,
> not the Java Antlr, but it's the same principle.

You can also use a timestamp file that you touch after running antlr.
Then set up dependencies from that. (As was mentioned in the last
thread on Makefile's and is done in the Makefile's from antlr itself)
Probably doesn't work for VC though.

Cheers,

Ric


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ric.klaren at gmail.com  Thu Dec 16 12:21:30 2004
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon Dec 20 16:17:46 2004
Subject: [antlr-interest] BNF transformation
In-Reply-To: <cpso64+tv2u@eGroups.com>
References: <cpso64+tv2u@eGroups.com>
Message-ID: <bc607a4e04121612211d7db68c@mail.gmail.com>


On Thu, 16 Dec 2004 19:37:40 -0000, birmanstefan <stefan@amiq.ro> wrote:
>      I have a BNF as a *.g file. I want to parse the g file and then
> generate some text/html/code/etc. I looked in the manual and I saw
> that I can export the BNF as a html file, with -html option.
>      How/Where can I hook and generate my own stuff based on the g
> file? Where should I look for resolving this task? Does anybody tried
> to resolve a similar problem?

There's a grammar for the .g format on antlr.org. Depending on your
requirements that should be a good start. The -html/-docbook options
are additional codegenerators that just present the contents of the .g
file differently. Might be overkill/too much bagage for what you want
to do.

Cheers,

Ric


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Thu Dec 16 12:41:01 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:46 2004
Subject: [antlr-interest] spoke to soon: gmane sucks. period.
In-Reply-To: <d2d18a104121612156c2a7b61@mail.gmail.com>
References: <CCD8C417-4F97-11D9-8312-000A95891192@cs.usfca.edu> <d2d18a104121612156c2a7b61@mail.gmail.com>
Message-ID: <CC763014-4FA2-11D9-8312-000A95891192@cs.usfca.edu>



On Dec 16, 2004, at 12:15 PM, Joan Pujol wrote:

>
>> The Mailman software requires apache but should work.  Found a way to
>> upload files... boy is it UGLY!  Ugh.  Well, perhaps I'll set up an
>> interface to the mail through antlr.org's server by tunneling.  
>> Anyway,
>> looks like it will work and I can then spider it.  We should be good 
>> to
>> go.  New antlr.org box is being built as we speak.  DNS should switch
>> this weekend.  I'll let you know when I can switch the mailing list.
>
> Only one suggestion. If you spider the mailing list please, please,
> please and 1000 time please ;) Put some antispam logic.

You mean to not show email addresses?  Mailman shows

<a href="mailto:antlr-interest@antlr.org">parrt at cs.usfca.edu</a>

so that the link goes to the list not the person identified. The list 
will be "initial post moderated" or whatever to prevent spam.

Mailman is now up on my antlr.org and I will switch DNS when I get 
everything going.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ewbank at gmail.com  Thu Dec 16 14:58:11 2004
From: ewbank at gmail.com (Bryan Ewbank)
Date: Mon Dec 20 16:17:46 2004
Subject: [antlr-interest] spoke to soon: gmane sucks. period.
In-Reply-To: <CCD8C417-4F97-11D9-8312-000A95891192@cs.usfca.edu>
References: <CCD8C417-4F97-11D9-8312-000A95891192@cs.usfca.edu>
Message-ID: <dd3a065f04121614587dbc9492@mail.gmail.com>


The search may "work", but it's frustrating to look at a few score
mails at a time, then request yahoo to search earlier emails as well. 
There doesn't seem to be any way to search the whole archive at once -
have to use next/next/next.../next.

> Ugh.  Ok, so
> 
> http://groups.google.com/
> 
> looks like it might actually work.  At least we can trust their search
> facility. ;)  Not sure about uploading old stuff.  Ack.  Doesn't look I
> can upload old email easily. :(


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From mail at martin-probst.com  Thu Dec 16 14:59:23 2004
From: mail at martin-probst.com (Martin Probst)
Date: Mon Dec 20 16:17:46 2004
Subject: [antlr-interest] BNF transformation
In-Reply-To: <bc607a4e04121612211d7db68c@mail.gmail.com>
References: <cpso64+tv2u@eGroups.com>
	 <bc607a4e04121612211d7db68c@mail.gmail.com>
Message-ID: <1103237963.2415.2.camel@narr.homeip.net>


Hi,
If you look through the archives you'll find a posting by me which
contains an attached XSL stylesheet which transforms ANTLR's SGML
docbook output to something more usable in XML format. You should be
able to generate anything you might need from that XML stuff with some
XSLT scripts.

mfg
Martin

Am Donnerstag, den 16.12.2004, 21:21 +0100 schrieb Ric Klaren:
> On Thu, 16 Dec 2004 19:37:40 -0000, birmanstefan <stefan@amiq.ro> wrote:
> >      I have a BNF as a *.g file. I want to parse the g file and then
> > generate some text/html/code/etc. I looked in the manual and I saw
> > that I can export the BNF as a html file, with -html option.
> >      How/Where can I hook and generate my own stuff based on the g
> > file? Where should I look for resolving this task? Does anybody tried
> > to resolve a similar problem?
> 
> There's a grammar for the .g format on antlr.org. Depending on your
> requirements that should be a good start. The -html/-docbook options
> are additional codegenerators that just present the contents of the .g
> file differently. Might be overkill/too much bagage for what you want
> to do.
> 
> Cheers,
> 
> Ric
> 
> 
>  
> Yahoo! Groups Links
> 
> 
> 
>  
> 
> 
> 
> 



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From stuart.dootson at gmail.com  Thu Dec 16 15:09:09 2004
From: stuart.dootson at gmail.com (Stuart Dootson)
Date: Mon Dec 20 16:17:46 2004
Subject: [antlr-interest] C++ file timestamps and makefiles
In-Reply-To: <bc607a4e041216121942a206cf@mail.gmail.com>
References: <dd3a065f04121608557c593e61@mail.gmail.com>
	 <8b56cad404121610324e6e3b80@mail.gmail.com>
	 <bc607a4e041216121942a206cf@mail.gmail.com>
Message-ID: <8b56cad404121615093c1ad0b6@mail.gmail.com>


On Thu, 16 Dec 2004 21:19:27 +0100, Ric Klaren <ric.klaren@gmail.com> wrote:
> 
> On Thu, 16 Dec 2004 18:32:09 +0000, Stuart Dootson
> <stuart.dootson@gmail.com> wrote:
> > I've observed that behaviour - I thought I remembered there being a
> > command-line switch or option to alter the behaviour, but I can't find
> > it now :-(
> 
> There's no switch for it.
> 
> > What I do is to delete any Antlr outputs before running Antlr,
> > ensuring they are all generated again. Unless I do this, Visual Studio
> > & make think that the Antlr outputs are always out of date and need
> > regenerating. Here's an example from a makefile rule - it uses cantlr,
> > not the Java Antlr, but it's the same principle.
> 
> You can also use a timestamp file that you touch after running antlr.
> Then set up dependencies from that. (As was mentioned in the last
> thread on Makefile's and is done in the Makefile's from antlr itself)
> Probably doesn't work for VC though.
> 
> Cheers,
> 
> Ric
> 

It probably would work - I have to set up a custom build rule in the
VC project for any .g files included in the project. That build rule
can contain any commands (and looks remarkably like the makefile
extract I included before :-), and I have to specify the output(s) of
the command, i.e. I've got as much freedom as in a makefile.

I'll try using a timestamp file, anyway - my machine at work is too
slow to be doing unnecessary compilations!

Thanks for that

Stuart Dootson


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Thu Dec 16 15:18:56 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:46 2004
Subject: [antlr-interest] spoke to soon: gmane sucks. period.
In-Reply-To: <dd3a065f04121614587dbc9492@mail.gmail.com>
References: <CCD8C417-4F97-11D9-8312-000A95891192@cs.usfca.edu> <dd3a065f04121614587dbc9492@mail.gmail.com>
Message-ID: <DBBCEE6D-4FB8-11D9-8312-000A95891192@cs.usfca.edu>



On Dec 16, 2004, at 2:58 PM, Bryan Ewbank wrote:

>
> The search may "work", but it's frustrating to look at a few score
> mails at a time, then request yahoo to search earlier emails as well.
> There doesn't seem to be any way to search the whole archive at once -
> have to use next/next/next.../next.

I will have all the archives up in mailmain shortly so we should in 
better shape...

Ter

--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From jmcclain at tcshealthcare.com  Fri Dec 17 09:00:54 2004
From: jmcclain at tcshealthcare.com (John MccLain)
Date: Mon Dec 20 16:17:46 2004
Subject: [antlr-interest] simple treewalker newbie questions
Message-ID: <JMEOIPJEDGMHCIOMBHLIIELIDIAA.jmcclain@tcshealthcare.com>


Howdy,
I have finally figured out the grammar for a simple language I was given to
translate into java.
I have the lexer and parser, I am setting the function calls and operators
to be roots in the AST,
but I have a few questions:
1) (It would be best to use a description to understand the question) let's
say I had a
expression of the form 1 + f(2,3,4). Given that the + and the f would be
ASTnode roots -i.e., in the parser grammar
 I specified them as caret(^) tokens - If I apply an action to the 'f' node
that executed the function f(2,3,4), would the next step be to replace the
'f' node with the return value of the function so that the equation could
continue to be executed? If so, then how - I am assuming a tree of the form
                    --+--
                    |    |
                    1    f
                         |
                         2-3-4
I will be parsing expressions of the form f(p) where p could be a simple
expression or complex expression containing nested functions
2) each ASTNode has a value, a type, and a list. My question is about the
type (ttype); Does it represent standard java StreamTokenizer types,
standard atomic types,  or does it represent the types you specify in your
lexer or parser??

3) Are there any good treewalker tutorials out there?





John McClain
Senior Software Engineer
TCS Healthcare
jmcclain@tcshealthcare.com
(530)886-1700x235
"Before you criticize someone, walk a mile in their shoes.
That way, you'll be a mile from them, and you'll have their shoes."



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Sun Dec 19 12:54:20 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:46 2004
Subject: [antlr-interest] new antlr.org box running
Message-ID: <27B9942A-5200-11D9-B211-000A95891192@cs.usfca.edu>


Howdy,

Looks like new antlr.org box is up.  Faster box and much faster 
bandwidth.

Also, here are some "Evolution of StringTemplate" slides from my 
Berkeley talk:

http://www.stringtemplate.org/StringTemplateEvolution.ppt

might be of interest to you.

I have the new mailing list up and ready (antlr.org tunnels to it so 
everything looks like antlr.org even though it's apache running on 
8080), but I need to get the sys admin to fix the links in the 
generated html...it's the apache URL not the antlr.org URL.  It has 
succesfully sucked in the 3 years of antlr-interest, but the links are 
screwed up as I say.  Should be monday and then I'll mass subscribe 
everybody on the old list to the new one and turn off the yahoo groups.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-RDTa2Uvpu6IuuCZtEpaOhnk at yahoogroups.com  Mon Dec 20 10:31:16 2004
From: antlr-interest-accept-RDTa2Uvpu6IuuCZtEpaOhnk at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:46 2004
Subject: MODERATE -- suk6@centrum.cz posted to antlr-interest
Message-ID: <1103567476.412.20111.m23@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  suk6@centrum.cz 

The message summary:
--------------------
FROM: suk6@centrum.cz 
DATE: Mon, 20 Dec 2004 18:30:03 -0000 
SUBJECT: Re: spoke to soon: gmane sucks. period. 

> I will have all the archives up in mailmain shortly so we 
should in > better shape... 

1) Hi, please can someone tell me - how gmane and 
yahoo-groups are working together ? I quite don't understand
that, because gmane clearly is not able to feed itself with 
yahoo-groups. 

2) If I post to that antlr-interest@yahoogroups.com, will it
arive into gmane ? You all seem to post to some 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=415 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-RDTa2Uvpu6IuuCZtEpaOhnk@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "firstn_lastname" <suk6@centrum.cz>
Subject: Re: spoke to soon: gmane sucks. period.
Date: Mon, 20 Dec 2004 18:30:03 -0000
Size: 2442
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20041220/13e7c3b1/attachment.mht
From parrt at cs.usfca.edu  Mon Dec 20 10:44:15 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:46 2004
Subject: [antlr-interest] StringTemplate 2.1 release candidate 1
Message-ID: <25FC9B34-52B7-11D9-B211-000A95891192@cs.usfca.edu>


Howdy folk,

Get it while it's hot!  Should be fully backward compatible for 99% of 
people.  Only issue might be some newlines get stripped after some more 
tags like <else> and before >> in group file format.  Some nice little 
enhancements, check it out. :)

http://www.antlr.org/download/stringtemplate-2.1rc1.tar.gz

Release notes:

http://www.stringtemplate.org/doc/release-2.1.tml

Please let me know if there is any trouble and I will fix it before 
release on xmas :)

Terence
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From suk6 at centrum.cz  Mon Dec 20 10:30:03 2004
From: suk6 at centrum.cz (firstn_lastname)
Date: Mon Dec 20 16:17:46 2004
Subject: [antlr-interest] Re: spoke to soon: gmane sucks. period.
In-Reply-To: <DBBCEE6D-4FB8-11D9-8312-000A95891192@cs.usfca.edu>
Message-ID: <cq75nb+ot7m@eGroups.com>




> I will have all the archives up in mailmain shortly so we should in  
> better shape... 
 
1) Hi, please can someone tell me - how gmane and yahoo-groups 
are working together ? 
I quite don't understand that, because gmane clearly 
is not able to feed itself with yahoo-groups. 
 
2) If I post to that antlr-interest@yahoogroups.com, will it arive 
into gmane ?  
You all seem to post to some <<antlr-interest-hHKSG33TihhbjbujkaE4pw  
at public dot gmane dot org>>, but this address is not mentioned 
anywhere ( on antlr site ). Or does yahoo .forward those messages 
to gmane ?? Please can you tell me ? 
 
 
3) You do not need to spider gmane ( gmane has export ),  
If you just wanna TRY it - go with 2190/2199. 
http://download.gmane.org/gmane.comp.parsers.antlr-interest/1/2199 
it's not tgz, its long plain mbox. 
 
4) but you need to spider yahoo ( I don't know currently hope I'm 
wrong ). 
But gmane seem to have lot less messages then yahoo.  
You seem to switch somewhen at Jun-2004 ?? 
 
5) like to know, what are you going to do switch at now ? 
   to that groups-beta.google.com 
I don't say google is bad ( didn't try it ), I just like to know. 
 
Cheers,          Suk 
 
 








 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From ric.klaren at gmail.com  Mon Dec 20 13:37:51 2004
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon Dec 20 16:17:46 2004
Subject: [antlr-interest] Re: spoke to soon: gmane sucks. period.
In-Reply-To: <cq75nb+ot7m@eGroups.com>
References: <DBBCEE6D-4FB8-11D9-8312-000A95891192@cs.usfca.edu>
	 <cq75nb+ot7m@eGroups.com>
Message-ID: <bc607a4e041220133765b192ba@mail.gmail.com>


On Mon, 20 Dec 2004 18:30:03 -0000, firstn_lastname <suk6@centrum.cz> wrote:
> 1) Hi, please can someone tell me - how gmane and yahoo-groups
> are working together ?
> I quite don't understand that, because gmane clearly
> is not able to feed itself with yahoo-groups.

I think they have a forwarding account subscribed or something
similar. It should be listed on their site I guess.

> 2) If I post to that antlr-interest@yahoogroups.com, will it arive
> into gmane ?

Yes. Unless you add some specific headers to your message. See the faq
on gmane.org.

> You all seem to post to some <<antlr-interest-hHKSG33TihhbjbujkaE4pw
> at public dot gmane dot org>>, but this address is not mentioned
> anywhere ( on antlr site ). Or does yahoo .forward those messages
> to gmane ?? Please can you tell me ?

Some may do that some may not. Gmane uses some obfuscation for email
addresses. The yahoogroups address is the official one. The gmane one
also works I guess.

> 4) but you need to spider yahoo ( I don't know currently hope I'm
> wrong ).
> But gmane seem to have lot less messages then yahoo.
> You seem to switch somewhen at Jun-2004 ??

Gmane was enabled much later than the yahoogroups thing was started.
You can't spider yahoogroups very well they got some protection
against it (is my impression I tried).

> 5) like to know, what are you going to do switch at now ?
>    to that groups-beta.google.com
> I don't say google is bad ( didn't try it ), I just like to know.

I think Ter set up a mailinglist on antlr.org. Yai! So now we can now
also UTFS ;)

Cheers,

Ric


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Mon Dec 20 13:47:25 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:46 2004
Subject: [antlr-interest] Re: spoke to soon: gmane sucks. period.
In-Reply-To: <bc607a4e041220133765b192ba@mail.gmail.com>
References: <DBBCEE6D-4FB8-11D9-8312-000A95891192@cs.usfca.edu> <cq75nb+ot7m@eGroups.com> <bc607a4e041220133765b192ba@mail.gmail.com>
Message-ID: <BC56B136-52D0-11D9-B211-000A95891192@cs.usfca.edu>



On Dec 20, 2004, at 1:37 PM, Ric Klaren wrote:
>> 5) like to know, what are you going to do switch at now ?
>>    to that groups-beta.google.com
>> I don't say google is bad ( didn't try it ), I just like to know.
>
> I think Ter set up a mailinglist on antlr.org. Yai! So now we can now
> also UTFS ;)

It's ALMOST ready; just about got the admin pages tunneled properly 
thru the www.antlr.org site.  By the end of the day I hope.  Then I 
spider it and search lives!

So we should just turn off the antlr-interest@yahoo thing, leaving a 
note redirecting?

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-request at antlr.org  Mon Dec 20 14:38:59 2004
From: antlr-interest-request at antlr.org (antlr-interest-request@antlr.org)
Date: Mon Dec 20 16:17:46 2004
Subject: confirm 3141d741477201c8ce0b967b6008996c1744caa3
Message-ID: <mailman.0.1103582339.3276.antlr-interest@antlr.org>

Mailing list subscription confirmation notice for mailing list
Antlr-interest

We have received a request from 138.202.170.152 for subscription of
your email address, "parrt@cs.usfca.edu", to the
antlr-interest@antlr.org mailing list.  To confirm that you want to be
added to this mailing list, simply reply to this message, keeping the
Subject: header intact.  Or visit this web page:

    http://www.antlr.org/mailman/confirm/antlr-interest/3141d741477201c8ce0b967b6008996c1744caa3


Or include the following line -- and only the following line -- in a
message to antlr-interest-request@antlr.org:

    confirm 3141d741477201c8ce0b967b6008996c1744caa3

Note that simply sending a `reply' to this message should work from
most mail readers, since that usually leaves the Subject: line in the
right form (additional "Re:" text in the Subject: is okay).

If you do not wish to be subscribed to this list, please simply
disregard this message.  If you think you are being maliciously
subscribed to the list, or have any other questions, send them to
antlr-interest-owner@antlr.org.

From parrt at cs.usfca.edu  Mon Dec 20 16:08:54 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:46 2004
Subject: [Antlr-interest] blort
Message-ID: <20041221000854.1164974D00@nexus.cs.usfca.edu>

a test!!!
Ter
_______________________________________________
Antlr-interest mailing list
Antlr-interest@antlr.org
http://www.antlr.org/mailman/listinfo/antlr-interest

From gradadvisor at cs.usfca.edu  Mon Dec 20 16:38:08 2004
From: gradadvisor at cs.usfca.edu (Grad Advisor)
Date: Mon Dec 20 16:33:27 2004
Subject: [antlr-interest] another test
Message-ID: <9627DA00-52E8-11D9-B211-000A95891192@cs.usfca.edu>

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!

From atripp at comcast.net  Mon Dec 20 16:39:37 2004
From: atripp at comcast.net (Andy Tripp)
Date: Mon Dec 20 21:43:53 2004
Subject: [antlr-interest] JavaEmitter - treewalker version
Message-ID: <41C770C9.4030403@comcast.net>

(First Real Post!)

Terence,

I finally got around to trying out your treewalker approach
to outputting a Java AST. A few comments:

* It might be nice to rename "java.tree.g" to "java.treeoutput.g"
or something to avoid confusion with the "standard" java.tree.g
that comes with ANTLR.


* Need to remove "package templates" and "import com.jguru.util.st.*" from
header.

* 2d array declaration produces error: "int[][] a = new int[1][2];"

* A few minor adjustments to the output would be nice:

    case contents are enclosed by redundant curly braces
    extra space before ":" in case statement
    blank line needed between "imports" and class definition.
    extra space after class name
    extra space before brackets within type: "String [] s;"
    extra space after type in declaration: "String  s";
    extra space before parens: "new java.util.Stack ()"
    extra newline inside for:
        for (int i = 0;
        i<a.length;i++) {
    could use more spaces in assignment and within expressions:
        "tokenNames[POST_INC]="++";
    blank line needed between methods

* A main() method to show usage also would be nice.

Andy

From parrt at cs.usfca.edu  Mon Dec 20 16:16:48 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 21:44:11 2004
Subject: [antlr-interest] another test
Message-ID: <9AF2CB34-52E5-11D9-B211-000A95891192@cs.usfca.edu>

Trtttt

--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!



From schick at robotbattle.com  Mon Dec 20 21:44:14 2004
From: schick at robotbattle.com (Autoresponder)
Date: Mon Dec 20 21:44:18 2004
Subject: [antlr-interest] JavaEmitter - treewalker version
Message-ID: <20041221054414.46566.qmail@ceirt.pair.com>

My email address has permanently changed to:

	brad <at> robotbattle <dot> com

My old email address was overrun with hundreds of spams per day. At
least for now, my new address is clean. Also, if you know any spammers 
please hit them over the head for me in thanks for destroying email.
From schick at robotbattle.com  Mon Dec 20 21:44:58 2004
From: schick at robotbattle.com (Autoresponder)
Date: Mon Dec 20 21:45:04 2004
Subject: [antlr-interest] another test
Message-ID: <20041221054458.46956.qmail@ceirt.pair.com>

My email address has permanently changed to:

	brad <at> robotbattle <dot> com

My old email address was overrun with hundreds of spams per day. At
least for now, my new address is clean. Also, if you know any spammers 
please hit them over the head for me in thanks for destroying email.
From parrt at cs.usfca.edu  Mon Dec 20 14:50:23 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 22:51:17 2004
Subject: [antlr-interest] testing :)
Message-ID: <88C2F00D-52D9-11D9-B211-000A95891192@cs.usfca.edu>

Heh, do we have our own list now?  Woohoo!

Terence
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!



From parrt at cs.usfca.edu  Mon Dec 20 21:03:29 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 22:51:28 2004
Subject: [antlr-interest] antlr-interest list searchable now at antlr.org
Message-ID: <A7CF55B4-530D-11D9-9414-000393BB647E@cs.usfca.edu>

howdy,

Looks like the spider finally read in all the old email from 
antlr-interest and is searchable now at antlr.org.  I have only one 
page of results viewable at the moment.  Wanted to prove the concept.  
Now I'll make the search page more useful ;)

Anyway, I hope I haven't gotten this new antlr-interest list all messed 
up and it's spewing random mail.  Please let me know if you see 
anything weird.

Terence



From parrt at cs.usfca.edu  Mon Dec 20 23:29:10 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 23:29:14 2004
Subject: [antlr-interest] mailman apparently doesn't catch all vacation
	responses...
Message-ID: <01CE234D-5322-11D9-8B66-000393BB647E@cs.usfca.edu>

ugh.  Ok, so anybody know mailman really well?  I had to set the 
reply-to field to be the sender not the list in order to avoid mail 
loops.  A quick check of the web indicates this is a known and nasty 
problem with vacation programs not looking at the "bulk mail" header 
and sending mail to a list.

The big question is, how does yahoo make this work?  They couldn't do 
anything else right ;)  (i.e., search, etc...).

I hate having to retype antlr-interest@antlr.org each time when I 
reply. :(  I also hate getting the vacation replies ;)  Ok, that's it.  
No more vacation for anybody! ;) <snicker> <snort>

Please send me mail directly (parrt at cs.usfca.edu) to let me know 
about suggestions etc...

One possible solution is to keep yahoogroups.com and I'll just fix the 
"view/search mail archives" problem.  It's easy.  I have 3 years of 
mail in a single mbox file and can index that trivially.  ugh...i'd 
kind of like to move off yahoo though.

Ter



From parrt at cs.usfca.edu  Mon Dec 20 15:13:35 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 23:57:03 2004
Subject: [antlr-interest] ttttt tttt
Message-ID: <C5E43D60-52DC-11D9-B211-000A95891192@cs.usfca.edu>

T
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!



From parrt at cs.usfca.edu  Mon Dec 20 16:09:02 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 23:57:57 2004
Subject: [antlr-interest] testing new interest list
Message-ID: <8526109F-52E4-11D9-B211-000A95891192@cs.usfca.edu>

Wow, did I finally get this to work?
Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!



From lists at lischke-online.de  Tue Dec 21 00:10:55 2004
From: lists at lischke-online.de (Mike Lischke)
Date: Tue Dec 21 00:11:43 2004
Subject: [antlr-interest] testing new interest list
In-Reply-To: <8526109F-52E4-11D9-B211-000A95891192@cs.usfca.edu>
Message-ID: <20041221081011.4E5E657C003@h4866.serverkompetenz.net>

> Wow, did I finally get this to work?
> Ter

Only if you consider the original sender address as the correct reply address. I still have to use reply-to-all to get
the list address.

Mike
--
www.soft-gems.net 

From ArnarB at oddi.is  Tue Dec 21 00:20:37 2004
From: ArnarB at oddi.is (Arnar Birgisson)
Date: Tue Dec 21 00:21:14 2004
Subject: [antlr-interest] testing new interest list
Message-ID: <s1c7dcef.027@emil.oddi.is>

Hello there,

This is brilliant Ter, should have happened long ago :o)
Glad you chose mailman too..

>>> "Mike Lischke" <lists@lischke-online.de> 21.12.2004 08:10:55 >>>
>> Wow, did I finally get this to work?
>> Ter

>Only if you consider the original sender address as the correct reply
address. 
> I still have to use reply-to-all to get the list address.

This is a configuration option in mailman, on the general options page
(the page that comes up by default when you enter the administrative
interface), set the option named "reply_goes_to_list" to "This list". 

Happy holidays!

Arnar
From parrt at cs.usfca.edu  Mon Dec 20 16:37:53 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Dec 21 01:03:29 2004
Subject: [antlr-interest] testing new list
Message-ID: <8CBA536C-52E8-11D9-B211-000A95891192@cs.usfca.edu>

Did this get thru?
Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!



From ewbank at gmail.com  Tue Dec 21 08:12:47 2004
From: ewbank at gmail.com (Bryan Ewbank)
Date: Tue Dec 21 08:12:54 2004
Subject: [antlr-interest] ok, ANTLR interest list has MOVED!
In-Reply-To: <6F3BF8AC-52E7-11D9-B211-000A95891192@cs.usfca.edu>
References: <6F3BF8AC-52E7-11D9-B211-000A95891192@cs.usfca.edu>
Message-ID: <dd3a065f041221081231060255@mail.gmail.com>

Does this mean antlr-interest@yahoogroups.com is no longer available? 
I won't miss the cruft at the end of each message, certainly :-)

Thanks, Terence!


On Mon, 20 Dec 2004 16:29:54 -0800, Terence Parr <parrt@cs.usfca.edu> wrote:
> To post to this list, send your email to:
>    antlr-interest@antlr.org
From jmcclain at tcshealthcare.com  Tue Dec 21 08:33:36 2004
From: jmcclain at tcshealthcare.com (John MccLain)
Date: Tue Dec 21 08:28:26 2004
Subject: [antlr-interest] simple treewalker newbie question
Message-ID: <JMEOIPJEDGMHCIOMBHLIGENKDIAA.jmcclain@tcshealthcare.com>


Howdy,
I have finally figured out the grammar for a simple language I was given to
translate into java.
I have the lexer and parser, I am setting the function calls and operators
to be roots in the AST,
but I have not created a treewalker, and I have a few questions:
1) (It would be best to use a description to understand the question) let's
say I had a
expression of the form 1 + f(2,3,4). Given that the + and the f would be
ASTnode roots -i.e., in the parser grammar - and I wish to execute the
actions related
to the root nodes.
 I specified them as caret(^) tokens - If I apply an action to the 'f' node
that executed the function f(2,3,4), would the next step be to replace the
'f' node with the return value of the function so that the equation could
continue to be executed? If so, then how (code would be appreciated)
 - I am assuming a tree of the form
                    --+--
                    |    |
                    1    f
                         |
                         2-3-4
I will be parsing expressions of the form f(p) where p could be a simple
expression or complex expression containing nested functions
2) each ASTNode has a value, a type, and a list. My question is about the
type (ttype); Does it represent standard java StreamTokenizer types,
standard atomic types,  or does it represent the types you specify in your
lexer or parser??

3) Are there any good treewalker tutorials out there?





John McClain
Senior Software Engineer
TCS Healthcare
jmcclain@tcshealthcare.com
(530)886-1700x235
"Before you criticize someone, walk a mile in their shoes.
That way, you'll be a mile from them, and you'll have their shoes."




Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/




John McClain
Senior Software Engineer
TCS Healthcare
jmcclain@tcshealthcare.com
(530)886-1700x235
"Before you criticize someone, walk a mile in their shoes.
That way, you'll be a mile from them, and you'll have their shoes."

From parrt at cs.usfca.edu  Tue Dec 21 08:40:36 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Dec 21 08:40:38 2004
Subject: [antlr-interest] antlr.org's MX DNS record was wrong
Message-ID: <0A1B8DFC-536F-11D9-8B66-000393BB647E@cs.usfca.edu>

Sorry for all those test messages last night.  They were queued up 
before I subscribed everybody, but the MX record was wrong and so all 
of them got queued outside antlr.org.  When the MX record got fixed, 
the flood of test emails came in.

We'll get this right soon!

Ter



From ewbank at gmail.com  Tue Dec 21 09:11:58 2004
From: ewbank at gmail.com (Bryan Ewbank)
Date: Tue Dec 21 09:12:01 2004
Subject: [antlr-interest] Pretty printing *.g files??
Message-ID: <dd3a065f04122109117c49a88a@mail.gmail.com>

Anyone have a pretty-printer for *.g files?  I'm doing my own thing
now, but rather than reinvent the wheel....

Thanks,
- Bryan
From pauljlucas at mac.com  Tue Dec 21 10:20:37 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Tue Dec 21 10:20:40 2004
Subject: [antlr-interest] JUnit testing of ASTs
Message-ID: <Pine.LNX.4.44.0412211016460.27412-100000@g4.pauljlucas.org>

	Does anybody do JUnit regression testing on their parsers?  If
	so, how, exactly?

	For lack of anything better, *a* way of doing it is to have a
	set of files to parse and the pretty-printed output of the
	expected ASTs.  Then, when you run the tests, simply diff their
	output with the expected output.

	Anything better?

	- Paul

From parrt at cs.usfca.edu  Tue Dec 21 10:33:07 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Dec 21 10:27:08 2004
Subject: [antlr-interest] JUnit testing of ASTs
In-Reply-To: <Pine.LNX.4.44.0412211016460.27412-100000@g4.pauljlucas.org>
References: <Pine.LNX.4.44.0412211016460.27412-100000@g4.pauljlucas.org>
Message-ID: <C23651C7-537E-11D9-B211-000A95891192@cs.usfca.edu>


On Dec 21, 2004, at 10:20 AM, Paul J. Lucas wrote:

> 	Does anybody do JUnit regression testing on their parsers?  If
> 	so, how, exactly?
>
> 	For lack of anything better, *a* way of doing it is to have a
> 	set of files to parse and the pretty-printed output of the
> 	expected ASTs.  Then, when you run the tests, simply diff their
> 	output with the expected output.
>
> 	Anything better?

Hi Paul,

In my debugging with derivations article I allude to something Loring 
suggested, which I think is precisely what you are saying: use parse 
trees / derivations to unit/functional test.  I do that now in ANTLR 
3.0 for testing.  I ask for the parse tree and then do a normalized 
string compare to see if anything has changed.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!



From rodrigobamboo at gmail.com  Tue Dec 21 10:57:56 2004
From: rodrigobamboo at gmail.com (Rodrigo B. de Oliveira)
Date: Tue Dec 21 10:57:59 2004
Subject: [antlr-interest] JUnit testing of ASTs
In-Reply-To: <Pine.LNX.4.44.0412211016460.27412-100000@g4.pauljlucas.org>
References: <Pine.LNX.4.44.0412211016460.27412-100000@g4.pauljlucas.org>
Message-ID: <5917478b041221105739d19d5d@mail.gmail.com>

That's the exact approach I used in boo and I really like the way it works.

The only significant difference is that the expected output is
embedded in the test file (the one to be parsed) as a docstring:

<this is a test file>
"""
a = 'Hello!'
print a
"""
a = "Hello"
print a
</this is a test file>

The build generates the actual nunit test fixture class by looking in
a specific directory for test files. That way, adding a new test case
is as simple as "Save As...".

Best wishes,
Rodrigo

On Tue, 21 Dec 2004 10:20:37 -0800 (PST), Paul J. Lucas
<pauljlucas@mac.com> wrote:
>         Does anybody do JUnit regression testing on their parsers?  If
>         so, how, exactly?
> 
>         For lack of anything better, *a* way of doing it is to have a
>         set of files to parse and the pretty-printed output of the
>         expected ASTs.  Then, when you run the tests, simply diff their
>         output with the expected output.
> 
>         Anything better?
> 
>         - Paul
>
From johnm-antlr at non.net  Tue Dec 21 11:33:40 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Tue Dec 21 11:33:21 2004
Subject: [antlr-interest] testing new interest list
In-Reply-To: <20041221081011.4E5E657C003@h4866.serverkompetenz.net>
References: <8526109F-52E4-11D9-B211-000A95891192@cs.usfca.edu>
	<20041221081011.4E5E657C003@h4866.serverkompetenz.net>
Message-ID: <16840.31380.785328.923261@despot.non.net>

>>>>> "Mike" == Mike Lischke <lists@lischke-online.de> writes:
[...]

>> Wow, did I finally get this to work?

A few times.  :-)

> Only if you consider the original sender address as the correct reply
> address. I still have to use reply-to-all to get the list address.

Yeah, it finally works the way that it's supposed to.

[For those that don't agree, google "mail followup to" for a clue.]

Happy Holidays,
		John
From johnm-antlr at non.net  Tue Dec 21 11:43:18 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Tue Dec 21 11:42:58 2004
Subject: [antlr-interest] mailman apparently doesn't catch all vacation
	responses...
In-Reply-To: <01CE234D-5322-11D9-8B66-000393BB647E@cs.usfca.edu>
References: <01CE234D-5322-11D9-8B66-000393BB647E@cs.usfca.edu>
Message-ID: <16840.31958.17959.472896@despot.non.net>

>>>>> "Terence" == Terence Parr <parrt@cs.usfca.edu> writes:
> ugh.  Ok, so anybody know mailman really well?  I had to set the reply-to
> field to be the sender not the list in order to avoid mail loops.

Yea, that's how the mailing list should be set up.

> A quick check of the web indicates this is a known and nasty problem with
> vacation programs not looking at the "bulk mail" header and sending mail
> to a list.

Yes, there's lots a bad software out there. :-(

> The big question is, how does yahoo make this work?  They couldn't do
> anything else right ;) (i.e., search, etc...).

They use a tweaked version of ezmlm. ezmlm uses VERP which is to say that
it generates a unique From address for each recipient and so can deal with
all sorts of things in a graceful, non-obtrusive manner.

Supposedly there's support for VERP in mailman.  I presume RTFM.

> I hate having to retype antlr-interest@antlr.org each time when I
> reply. :( I also hate getting the vacation replies ;) Ok, that's it.  No
> more vacation for anybody! ;) <snicker> <snort>

You can start by using the "followup to" command in your mail client.

For a real solution rather than just breaking different things, use a mail
client software which support the "mail-followup-to:" header.

Have fun,
	John
From parrt at cs.usfca.edu  Tue Dec 21 12:03:24 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Dec 21 11:57:26 2004
Subject: [antlr-interest] mailman apparently doesn't catch all vacation
	responses...
In-Reply-To: <16840.31958.17959.472896@despot.non.net>
References: <01CE234D-5322-11D9-8B66-000393BB647E@cs.usfca.edu>
	<16840.31958.17959.472896@despot.non.net>
Message-ID: <5F57C0F7-538B-11D9-B211-000A95891192@cs.usfca.edu>

On Dec 21, 2004, at 11:43 AM, John D. Mitchell wrote:

>>>>>> "Terence" == Terence Parr <parrt@cs.usfca.edu> writes:
>> ugh.  Ok, so anybody know mailman really well?  I had to set the 
>> reply-to
>> field to be the sender not the list in order to avoid mail loops.
>
> Yea, that's how the mailing list should be set up.

Yahoo's was sent to reply-to the list though, which is more convenient.

>> The big question is, how does yahoo make this work?  They couldn't do
>> anything else right ;) (i.e., search, etc...).
>
> They use a tweaked version of ezmlm. ezmlm uses VERP which is to say 
> that
> it generates a unique From address for each recipient and so can deal 
> with
> all sorts of things in a graceful, non-obtrusive manner.
>
> Supposedly there's support for VERP in mailman.  I presume RTFM.

Ah!  It does have it.  If we turn this on, perhaps we can reply-to list.

Arnar, know anything about this?

>> I hate having to retype antlr-interest@antlr.org each time when I
>> reply. :( I also hate getting the vacation replies ;) Ok, that's it.  
>> No
>> more vacation for anybody! ;) <snicker> <snort>
>
> You can start by using the "followup to" command in your mail client.
>
> For a real solution rather than just breaking different things, use a 
> mail
> client software which support the "mail-followup-to:" header.

I'll see if mac os x supports this.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!



From ewbank at gmail.com  Wed Dec 22 01:49:31 2004
From: ewbank at gmail.com (Bryan Ewbank)
Date: Wed Dec 22 01:49:35 2004
Subject: [antlr-interest] testing new interest list
In-Reply-To: <16840.31380.785328.923261@despot.non.net>
References: <8526109F-52E4-11D9-B211-000A95891192@cs.usfca.edu>
	<20041221081011.4E5E657C003@h4866.serverkompetenz.net>
	<16840.31380.785328.923261@despot.non.net>
Message-ID: <dd3a065f041222014972b494b0@mail.gmail.com>

I needed "reply-to-all" to get to the list when responding to John's email.


On Tue, 21 Dec 2004 11:33:40 -0800, John D. Mitchell
<johnm-antlr@non.net> wrote:
> >>>>> "Mike" == Mike Lischke <lists@lischke-online.de> writes:
> [...]
> 
> >> Wow, did I finally get this to work?
> 
> A few times.  :-)
> 
> > Only if you consider the original sender address as the correct reply
> > address. I still have to use reply-to-all to get the list address.
> 
> Yeah, it finally works the way that it's supposed to.
> 
> [For those that don't agree, google "mail followup to" for a clue.]
> 
> Happy Holidays,
>                 John
> _______________________________________________
> antlr-interest mailing list
> antlr-interest@antlr.org
> http://www.antlr.org/mailman/listinfo/antlr-interest
>
From stefan at amiq.ro  Wed Dec 22 03:03:29 2004
From: stefan at amiq.ro (stefan)
Date: Wed Dec 22 03:08:27 2004
Subject: [antlr-interest] JUnit testing of ASTs
In-Reply-To: <Pine.LNX.4.44.0412211016460.27412-100000@g4.pauljlucas.org>
References: <Pine.LNX.4.44.0412211016460.27412-100000@g4.pauljlucas.org>
Message-ID: <200412221303.29078.stefan@amiq.ro>

On Tuesday 21 December 2004 20:20, Paul J. Lucas wrote:
> 	Does anybody do JUnit regression testing on their parsers?  If
> 	so, how, exactly?
>
> 	For lack of anything better, *a* way of doing it is to have a
> 	set of files to parse and the pretty-printed output of the
> 	expected ASTs.  Then, when you run the tests, simply diff their
> 	output with the expected output.
>
> 	Anything better?
     Hello Paul,
                     you can do more than diff-ing pretty-printed AST. You can 
walk the AST and check the node type and node value versus a golden model. I 
personally used this kind of checking during parser verification.
     The golden model can be something like :
...............................................
// for source code :
   2 * (b + a)
// a possible expected/resulted AST would be :
[MUL, ?*?]
|--[NUMERIC_LITERAL, ?2?]
|--[PLUS, ?+?]
|  |--[ID, ?b?]
|  |--[ID, ?a?]
................................................

      For this kind of testing you can look over Bogdan Mitu's tester (see 
files at antlr-interest@yahoo group).

      Stefan.

> 	- Paul
>
> _______________________________________________
> antlr-interest mailing list
> antlr-interest@antlr.org
> http://www.antlr.org/mailman/listinfo/antlr-interest
From pete.forman at westerngeco.com  Wed Dec 22 04:17:12 2004
From: pete.forman at westerngeco.com (Pete Forman)
Date: Wed Dec 22 04:17:29 2004
Subject: [antlr-interest] ANTLR available again on GMane
Message-ID: <652ubk8n.fsf@wgmail2.gatwick.eur.slb.com>

Gmane is now carrying the ANTLR list again via its new site.

  news://news.gmane.org/gmane.comp.parsers.antlr-interest

I'm sorry about Ter's problems with the web interface to gmane.org but
NNTP access has been good for me.

I also posted an article on news:comp.compilers.tools.pccts about the
list moving.
-- 
Pete Forman                -./\.-  Disclaimer: This post is originated
WesternGeco                  -./\.-   by myself and does not represent
pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
http://petef.port5.com           -./\.-   Hughes or their divisions.

From Anthony.Youngman at eca-international.com  Wed Dec 22 06:16:51 2004
From: Anthony.Youngman at eca-international.com (Anthony Youngman)
Date: Wed Dec 22 06:17:07 2004
Subject: [antlr-interest] testing new interest list
Message-ID: <C7FE35004D40FD45AA342991B88CE40409B0C1@lnml1.eca-international.local>

That's the way it's supposed to be! 

Bit of a pain, yes, but the alternative is much, much worse if something
goes wrogn...

Cheers,
Wol

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Bryan Ewbank
Sent: 22 December 2004 09:50
To: antlr-interest@antlr.org
Subject: Re: [antlr-interest] testing new interest list

I needed "reply-to-all" to get to the list when responding to John's
email.


On Tue, 21 Dec 2004 11:33:40 -0800, John D. Mitchell
<johnm-antlr@non.net> wrote:
> >>>>> "Mike" == Mike Lischke <lists@lischke-online.de> writes:
> [...]
> 
> >> Wow, did I finally get this to work?
> 
> A few times.  :-)
> 
> > Only if you consider the original sender address as the correct
reply
> > address. I still have to use reply-to-all to get the list address.
> 
> Yeah, it finally works the way that it's supposed to.
> 
> [For those that don't agree, google "mail followup to" for a clue.]
> 
> Happy Holidays,
>                 John
> _______________________________________________
> antlr-interest mailing list
> antlr-interest@antlr.org
> http://www.antlr.org/mailman/listinfo/antlr-interest
>
_______________________________________________
antlr-interest mailing list
antlr-interest@antlr.org
http://www.antlr.org/mailman/listinfo/antlr-interest


****************************************************************************

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 8272 5300, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

****************************************************************************

From ebell at edgeofreality.com  Wed Dec 22 08:10:00 2004
From: ebell at edgeofreality.com (Evan A. Bell)
Date: Wed Dec 22 08:10:27 2004
Subject: [antlr-interest] testing new interest list
In-Reply-To: <C7FE35004D40FD45AA342991B88CE40409B0C1@lnml1.eca-international.local>
Message-ID: <000701c4e840$b04f3b30$2601a8c0@EVAN8200>


What about the digest version? I prefer getting two emails from the list per
day, instead of fifty.

Thanks,

Evan A. Bell
Game Programmer
www.edgeofreality.com
ebell@edgeofreality.com
(512)637-9150 x283


-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Anthony Youngman
Sent: Wednesday, December 22, 2004 8:17 AM
To: antlr-interest@antlr.org
Subject: RE: [antlr-interest] testing new interest list


That's the way it's supposed to be! 

Bit of a pain, yes, but the alternative is much, much worse if something
goes wrogn...

Cheers,
Wol

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Bryan Ewbank
Sent: 22 December 2004 09:50
To: antlr-interest@antlr.org
Subject: Re: [antlr-interest] testing new interest list

I needed "reply-to-all" to get to the list when responding to John's email.


On Tue, 21 Dec 2004 11:33:40 -0800, John D. Mitchell <johnm-antlr@non.net>
wrote:
> >>>>> "Mike" == Mike Lischke <lists@lischke-online.de> writes:
> [...]
> 
> >> Wow, did I finally get this to work?
> 
> A few times.  :-)
> 
> > Only if you consider the original sender address as the correct
reply
> > address. I still have to use reply-to-all to get the list address.
> 
> Yeah, it finally works the way that it's supposed to.
> 
> [For those that don't agree, google "mail followup to" for a clue.]
> 
> Happy Holidays,
>                 John _______________________________________________
> antlr-interest mailing list
> antlr-interest@antlr.org
> http://www.antlr.org/mailman/listinfo/antlr-interest
>
_______________________________________________
antlr-interest mailing list
antlr-interest@antlr.org
http://www.antlr.org/mailman/listinfo/antlr-interest


****************************************************************************

This transmission is intended for the named recipient only. It may contain
private and confidential information. If this has come to you in error you
must not act on anything disclosed in it, nor must you copy it, modify it,
disseminate it in any way, or show it to anyone. Please e-mail the sender to
inform us of the transmission error or telephone ECA International
immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 8272
5300, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1
212 582 2333.

****************************************************************************

_______________________________________________
antlr-interest mailing list
antlr-interest@antlr.org
http://www.antlr.org/mailman/listinfo/antlr-interest


From ArnarB at oddi.is  Wed Dec 22 08:43:53 2004
From: ArnarB at oddi.is (Arnar Birgisson)
Date: Wed Dec 22 08:44:43 2004
Subject: [antlr-interest] testing new interest list
Message-ID: <s1c9a477.078@emil.oddi.is>

>>> "Evan A. Bell" <ebell@edgeofreality.com> 22.12.2004 16:10:00 >>>
> What about the digest version? I prefer getting two emails from the
list per
> day, instead of fifty.

You can set your preferences to digest yourself, go to
http://www.antlr.org/mailman/listinfo/antlr-interest and enter
your address at the bottom of the page  and click "Unsubscribe or change
options", your password password was mailed to you yesterday (message
titled "Welcome to the "antlr-interest" mailing list").

After logging in you have some options, one is "Set Digest Mode". :o)

Arnar

http://www.antlr.org/mailman/listinfo/antlr-interest
From parrt at cs.usfca.edu  Wed Dec 22 09:02:06 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Dec 22 09:02:16 2004
Subject: [antlr-interest] testing new interest list
In-Reply-To: <s1c9a477.078@emil.oddi.is>
References: <s1c9a477.078@emil.oddi.is>
Message-ID: <35D211E4-543B-11D9-B42D-000393BB647E@cs.usfca.edu>


On Dec 22, 2004, at 8:43 AM, Arnar Birgisson wrote:

>>>> "Evan A. Bell" <ebell@edgeofreality.com> 22.12.2004 16:10:00 >>>
>> What about the digest version? I prefer getting two emails from the
> list per
>> day, instead of fifty.
>
> You can set your preferences to digest yourself, go to
> http://www.antlr.org/mailman/listinfo/antlr-interest and enter
> your address at the bottom of the page  and click "Unsubscribe or 
> change
> options", your password password was mailed to you yesterday (message
> titled "Welcome to the "antlr-interest" mailing list").
>
> After logging in you have some options, one is "Set Digest Mode". :o)

We may have a problem in that I mass subscribed everybody w/o being 
able to specify preferences from old list.  There are about 1300 
members.  Also, the list was supposed to send a welcome mail.  If it 
did, it apparently did not include a passwd.  I'll have to be the one 
to change prefs for a while.  let the deluge of requests proceed (to my 
personal email).

Thanks,
Ter



From pauljlucas at mac.com  Wed Dec 22 10:25:22 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Wed Dec 22 10:25:27 2004
Subject: [antlr-interest] unget a character
Message-ID: <Pine.LNX.4.44.0412221022170.27412-100000@g4.pauljlucas.org>

	Is there any way to "unget" a character back onto the head of
	the input stream?

	I have multiple lexers and when lexer 'B' encounters a character
	is shouldn't, I want it to pop itself, "unget" the character,
	and then lexer 'A' try it.

	- Paul

From parrt at cs.usfca.edu  Wed Dec 22 11:07:53 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Dec 22 11:01:54 2004
Subject: [antlr-interest] testing new interest list
In-Reply-To: <C7FE35004D40FD45AA342991B88CE40409B0C1@lnml1.eca-international.local>
References: <C7FE35004D40FD45AA342991B88CE40409B0C1@lnml1.eca-international.local>
Message-ID: <C7CF489D-544C-11D9-B211-000A95891192@cs.usfca.edu>


On Dec 22, 2004, at 6:16 AM, Anthony Youngman wrote:

> That's the way it's supposed to be!
>
> Bit of a pain, yes, but the alternative is much, much worse if 
> something
> goes wrogn...

Hi.  According to Arnar, the list is protected against anybody pounding 
the list (intentional or otherwise).

This rings true as the vacation and autoresponse bots that hit the list 
right away did not cause a loop.  With a few moderators, we can hit the 
quarantine button on those accounts.

I've added "put in trash" filters for anything that says vacation in 
subject etc...

SO, given all that, shall we try the reply-to as list thing again?

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!



From parrt at cs.usfca.edu  Wed Dec 22 11:28:36 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Dec 22 11:22:40 2004
Subject: [antlr-interest] unget a character
In-Reply-To: <Pine.LNX.4.44.0412221022170.27412-100000@g4.pauljlucas.org>
References: <Pine.LNX.4.44.0412221022170.27412-100000@g4.pauljlucas.org>
Message-ID: <AD2CAD9A-544F-11D9-B211-000A95891192@cs.usfca.edu>


On Dec 22, 2004, at 10:25 AM, Paul J. Lucas wrote:

> 	Is there any way to "unget" a character back onto the head of
> 	the input stream?
>
> 	I have multiple lexers and when lexer 'B' encounters a character
> 	is shouldn't, I want it to pop itself, "unget" the character,
> 	and then lexer 'A' try it.

Hi Paul.

You don't so much unget as "rewind", which is more sophisticated.  From 
TokenStreamSelector:

     /** Abort recognition of current Token and try again.
      *  A stream can push a new stream (for include files
      *  for example, and then retry(), which will cause
      *  the current stream to abort back to this.nextToken().
      *  this.nextToken() then asks for a token from the
      *  current stream, which is the new "substream."
      */
     public void retry() throws TokenStreamRetryException {
         throw new TokenStreamRetryException();
     }

Here is where that retry exception thing comes in.  Slow using an 
exception.

Alternatively, you can just use rewind yourself.  The following grammar

class Lex extends Lexer;

options {
         filter=Skip;
}

A : "apple" ;
B : "banana" ;

protected
Skip : . ;

has the interesting tidbit:

                     rewind(_m);
                     resetText();
                     try {mSkip(false);}

upon RecognitionException in a token rule where _m is set in the 
nextToken() rule.

         int _m;
         _m = mark();

I suggest something like this.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!



From mikhail at augustmail.com  Wed Dec 22 11:45:16 2004
From: mikhail at augustmail.com (Mikhail)
Date: Wed Dec 22 11:45:20 2004
Subject: [antlr-interest] testing new interest list
Message-ID: <m1ChCQ8-007mctC@mail.augustmail.com>

Alternatively you can have the mailing list send you a password reminder.
follow the procedure described earlier for changing options.
When asked for password, click on the send reminder button instead.

That might save the moderator's sanity a bit. :)

From pauljlucas at mac.com  Wed Dec 22 11:52:22 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Wed Dec 22 11:52:26 2004
Subject: [antlr-interest] unget a character
In-Reply-To: <AD2CAD9A-544F-11D9-B211-000A95891192@cs.usfca.edu>
Message-ID: <Pine.LNX.4.44.0412221148170.27412-100000@g4.pauljlucas.org>

On Wed, 22 Dec 2004, Terence Parr wrote:

> You don't so much unget as "rewind", which is more sophisticated.  From 
> TokenStreamSelector:
> 
>      public void retry() throws TokenStreamRetryException {
>          throw new TokenStreamRetryException();
>      }

	I tried that, but the character had already been consumed and
	the now-current lexer didn't see it.

> Alternatively, you can just use rewind yourself.  The following grammar

	[ snip ]

> has the interesting tidbit:
> 
>                      rewind(_m);
>                      resetText();
>                      try {mSkip(false);}
> 
> upon RecognitionException in a token rule where _m is set in the 
> nextToken() rule.
> 
>          int _m;
>          _m = mark();
> 
> I suggest something like this.

	It's not clear where/when to set call mark() in my case.  In my
	case, the token in the 'B' lexer is:

		RBRACE
			: '}'
			;

	If 'B' ever sees '}', it's wrong.  I need to pop 'B' switching
	back to 'A' then have 'A' see the '}'.

	So where do I call mark() and rewind() ?

	- Paul

From arnulf.heller at cnsystems.at  Wed Dec 22 00:29:57 2004
From: arnulf.heller at cnsystems.at (arnulf.heller@cnsystems.at)
Date: Wed Dec 22 12:41:56 2004
Subject: [antlr-interest] stringtemplate and antlr
Message-ID: <OF8F5C8BA2.27EF183E-ONC1256F72.002E52B2-C1256F72.002EBD50@cnsystems.at>

Hi there,

is there a working example of stringtemplate embedded in an antlr grammar? 
I want to build a C++ code generator driven by a simple language.
As far as I remeber there were plans to build the C++ code generator of 
antlr 3.0 with the stringtemplate library. Is that true? Are there cvs 
snapshots of antlr 3.0?

best wishes,
a
_______________________________________________
CNSystems Medizintechnik GmbH
DI Arnulf Heller
Baumkircherstrasse 1
A-8020 Graz

Tel.:   ++43 / 316 - 723456 - 62
Fax:   ++43 / 316 - 723456 - 2
e-mail: heller@cnsystems.at
http://www.cnsystems.at
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20041222/2fb3c0dc/attachment.html
From sadeh at mindsmiths.com  Tue Dec 21 11:24:46 2004
From: sadeh at mindsmiths.com (Benny & Wendy Sadeh)
Date: Wed Dec 22 12:42:49 2004
Subject: [antlr-interest] JUnit testing of ASTs
References: <Pine.LNX.4.44.0412211016460.27412-100000@g4.pauljlucas.org>
	<5917478b041221105739d19d5d@mail.gmail.com>
Message-ID: <042901c4e792$bbd55ba0$6401a8c0@BigBang>

myself, I like to keep the tests in the code. it may be harder to write them 
but I think it is easier to understand them that way. YMMV.

also, I divide my tests into two categories:
1. the parsing tests (for the language itself), and
2. the usage tests (for the code which uses the language)
(I keep them in tow separate packages)

for example:

1.
public class CreateTypeTest extends ParserBasedTest {

 public void testCreateTypeWithPrimaryKey() {
  statement =
   "CREATE TYPE typeA(fieldA1 INTEGER, fieldA2 STRING(100))" +
   "PRIMARY KEY (fieldA1)";
  assertEquals("( TYPE typeA ( FIELD_DEFINITION_LIST ( FIELD_DEFINITION 
fieldA1 INTEGER ) ( FIELD_DEFINITION fieldA2 STRING 100 ) ) ( KEY_LIST 
fieldA1 ) )", parse(statement));

  statement =
   "CREATE TYPE typeB(fieldB1 string(30), fieldB2 string(15))" +
   "PRIMARY KEY (fieldB1, fieldB2)";
  assertEquals("( TYPE typeB ( FIELD_DEFINITION_LIST ( FIELD_DEFINITION 
fieldB1 string 30 ) ( FIELD_DEFINITION fieldB2 string 15 ) ) ( KEY_LIST 
fieldB1 fieldB2 ) )", parse(statement));
 }

... other tests ...
}

2.
public class CreateTypeTest extends EvaluatorBasedTest {
 private DataType type;

 public void testCreateTypeWithPrimaryKey() {
  assertNull(engine.typeFor("typeA"));
  type = (DataType) parse(
   "CREATE TYPE typeA(fieldA1 INTEGER, fieldA2 STRING(100)) \n" +
   "PRIMARY KEY (fieldA1)");
  assertNotNull(type);
  assertEquals(engine.typeFor("typeA"), type);
  assertEquals("typeA$(typeA)[fieldA1]", type.primaryView().toString());

  assertNull(engine.typeFor("typeB"));
  type = (DataType) parse(
   "CREATE TYPE typeB(fieldB1 string(30), fieldB2 string(15)) \n" +
   "PRIMARY KEY (fieldB1, fieldB2)");
  assertNotNull(type);
  assertEquals(engine.typeFor("typeB"), type);
  assertEquals("typeB$(typeB)[fieldB1, fieldB2]", 
type.primaryView().toString());
 }


... other tests ...
}


Benny


----- Original Message ----- 
From: "Rodrigo B. de Oliveira" <rodrigobamboo@gmail.com>
To: "Paul J. Lucas" <pauljlucas@mac.com>
Cc: "ANTLR Interest" <antlr-interest@antlr.org>
Sent: Tuesday, December 21, 2004 10:57 AM
Subject: Re: [antlr-interest] JUnit testing of ASTs


> That's the exact approach I used in boo and I really like the way it 
> works.
>
> The only significant difference is that the expected output is
> embedded in the test file (the one to be parsed) as a docstring:
>
> <this is a test file>
> """
> a = 'Hello!'
> print a
> """
> a = "Hello"
> print a
> </this is a test file>
>
> The build generates the actual nunit test fixture class by looking in
> a specific directory for test files. That way, adding a new test case
> is as simple as "Save As...".
>
> Best wishes,
> Rodrigo
>
> On Tue, 21 Dec 2004 10:20:37 -0800 (PST), Paul J. Lucas
> <pauljlucas@mac.com> wrote:
>>         Does anybody do JUnit regression testing on their parsers?  If
>>         so, how, exactly?
>>
>>         For lack of anything better, *a* way of doing it is to have a
>>         set of files to parse and the pretty-printed output of the
>>         expected ASTs.  Then, when you run the tests, simply diff their
>>         output with the expected output.
>>
>>         Anything better?
>>
>>         - Paul
>>
> _______________________________________________
> antlr-interest mailing list
> antlr-interest@antlr.org
> http://www.antlr.org/mailman/listinfo/antlr-interest
> 

From sadeh at mindsmiths.com  Tue Dec 21 11:25:55 2004
From: sadeh at mindsmiths.com (Benny & Wendy Sadeh)
Date: Wed Dec 22 12:42:55 2004
Subject: [antlr-interest] testing :)
References: <88C2F00D-52D9-11D9-B211-000A95891192@cs.usfca.edu>
Message-ID: <043201c4e792$e44587e0$6401a8c0@BigBang>

is there a way to get a daily digest rather then a continuous stream?

Benny

----- Original Message ----- 
From: "Terence Parr" <parrt@cs.usfca.edu>
To: <antlr-interest@antlr.org>
Sent: Monday, December 20, 2004 2:50 PM
Subject: [antlr-interest] testing :)


> Heh, do we have our own list now?  Woohoo!
> 
> Terence
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!
> 
> 
> 
> _______________________________________________
> antlr-interest mailing list
> antlr-interest@antlr.org
> http://www.antlr.org/mailman/listinfo/antlr-interest
>
From parrt at cs.usfca.edu  Wed Dec 22 12:52:00 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Dec 22 12:46:02 2004
Subject: [antlr-interest] ANTLR 2.7.5 release candidate 1 available (now
	with python code gen!)
Message-ID: <535130A9-545B-11D9-B211-000A95891192@cs.usfca.edu>

Howdy,

2.7.5rc1 is available for your downloading pleasure.  We have a Python 
code generator!!!

http://www.antlr.org/download/antlr-2.7.5rc1.tar.gz

Thanks to efforts by the usual suspects:

C++	Ric Klaren
Python	Wolfgang Haefelinger and Marq Kole (with initial work by Amol 
Dharmadhikari)
C#		Micheal Jordan, Kunle Odutola and Anthony Oguntimehin
Java	Terence Parr

Thanks also to the people with excellent suggestions and bug fixes from 
the antlr-interest list!!!!

Enjoy.

Regards,
Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!



From johnm-antlr at non.net  Wed Dec 22 13:03:07 2004
From: johnm-antlr at non.net (John D. Mitchell)
Date: Wed Dec 22 13:02:47 2004
Subject: [antlr-interest] testing new interest list
In-Reply-To: <C7CF489D-544C-11D9-B211-000A95891192@cs.usfca.edu>
References: <C7FE35004D40FD45AA342991B88CE40409B0C1@lnml1.eca-international.local>
	<C7CF489D-544C-11D9-B211-000A95891192@cs.usfca.edu>
Message-ID: <16841.57611.707870.126244@despot.non.net>

>>>>> "Terence" == Terence Parr <parrt@cs.usfca.edu> writes:
[...]

> SO, given all that, shall we try the reply-to as list thing again?

NO

John
From ewbank at gmail.com  Wed Dec 22 13:19:25 2004
From: ewbank at gmail.com (Bryan Ewbank)
Date: Wed Dec 22 13:19:29 2004
Subject: [antlr-interest] ANTLR 2.7.5 release candidate 1 available (now
	with python code gen!)
In-Reply-To: <535130A9-545B-11D9-B211-000A95891192@cs.usfca.edu>
References: <535130A9-545B-11D9-B211-000A95891192@cs.usfca.edu>
Message-ID: <dd3a065f0412221319238cbf03@mail.gmail.com>

Where's a feature list for 2.7.5?

On Wed, 22 Dec 2004 12:52:00 -0800, Terence Parr <parrt@cs.usfca.edu> wrote:
> 2.7.5rc1 is available for your downloading pleasure.  We have a Python
> code generator!!!
> 
> http://www.antlr.org/download/antlr-2.7.5rc1.tar.gz
From nbsherid at secsme.org.au  Wed Dec 22 13:28:25 2004
From: nbsherid at secsme.org.au (Nigel Sheridan-Smith)
Date: Wed Dec 22 13:28:29 2004
Subject: [antlr-interest] testing :)
In-Reply-To: <043201c4e792$e44587e0$6401a8c0@BigBang>
Message-ID: <000501c4e86d$2beedc10$0500a8c0@nigel>


> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Benny & Wendy Sadeh
> Sent: Wednesday, 22 December 2004 6:26 AM
> To: antlr-interest@antlr.org; Terence Parr
> Subject: Re: [antlr-interest] testing :)
> 
> is there a way to get a daily digest rather then a continuous stream?
> 

Go to the following link:

http://www.antlr.org/mailman/listinfo/antlr-interest

In the section near the bottom called "antlr-interest Subscribers", type in
your email address and password. If you don't know your password, then type
your "subscribed" email address in the bottom box and then click
"Unsubscribe or edit options". You will then get the opportunity on the next
screen to get Mailman to send you your password by clicking on the button
"Remind".

Once you are logged in, there is the option to switch to "Digest mode".

Ter: I definitely got the password email before...

Cheers

Nigel

--
Nigel Sheridan-Smith
PhD research student

Faculty of Engineering
University of Technology, Sydney
Phone: 02 9514 7946
Fax: 02 9514 2435


From parrt at cs.usfca.edu  Wed Dec 22 13:42:48 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Dec 22 13:36:48 2004
Subject: [antlr-interest] ANTLR 2.7.5 release candidate 1 available (now
	with python code gen!)
In-Reply-To: <dd3a065f0412221319238cbf03@mail.gmail.com>
References: <535130A9-545B-11D9-B211-000A95891192@cs.usfca.edu>
	<dd3a065f0412221319238cbf03@mail.gmail.com>
Message-ID: <6C6E1C49-5462-11D9-B211-000A95891192@cs.usfca.edu>


On Dec 22, 2004, at 1:19 PM, Bryan Ewbank wrote:

> Where's a feature list for 2.7.5?

Ooops...

http://www.antlr.org/blog/CHANGES-2.7.5.txt

The release notes inside repeat this info.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!



From easjolly at ix.netcom.com  Wed Dec 22 13:46:38 2004
From: easjolly at ix.netcom.com (Susan Jolly)
Date: Wed Dec 22 13:46:43 2004
Subject: [antlr-interest] Re: unget a character
In-Reply-To: <20041222200002.E8E6DDCCEF@www.antlr.org>
Message-ID: <20041222214640.BE318DC75C@www.antlr.org>

The solution Monty gave me some time back works great.  He suggested
subclassing match() in the parser and adding logic to not consume() those
token types that you want to be (re)recognized by a different lexer.

SusanJ

From joshua.davis at kiodex.com  Wed Dec 22 13:47:36 2004
From: joshua.davis at kiodex.com (Joshua Davis)
Date: Wed Dec 22 13:47:38 2004
Subject: [antlr-interest] Hibernate3 uses ANTLR
Message-ID: <4AE2782C2093B34784E67971035A8160019F74FD@ehost011-2.exch011.intermedia.net>

The first beta release of Hibernate3 has an ANTLR-based query translator
for Hibernate Query Language.
http://theserverside.com/news/thread.tss?thread_id=30697

I'm not sure why TSS put my name in the story.   I suppose I have a
little less than 15 minutes of fame now. :)

Anyway... Thanks to the ANTLR team for building a great parser
generator!





From ora.et.labora at web.de  Wed Dec 22 14:35:29 2004
From: ora.et.labora at web.de (wolfgang haefelinger)
Date: Wed Dec 22 14:35:39 2004
Subject: [antlr-interest] ANTLR 2.7.5 release candidate 1 available
	(nowwith python code gen!)
In-Reply-To: <535130A9-545B-11D9-B211-000A95891192@cs.usfca.edu>
Message-ID: <BOEKJIPMFIHCMIBNCAPIOEPDCDAA.ora.et.labora@web.de>

Greetings,

please note that when building ANTLR 2.7.5rc1 you need configure
and  build  within  a  clean directory.  A build  in  the source 
directory does not work until you have language support for Java,
C++, C# and Python.

Here's how to build, make, test and install:

  tar zxvf antlr-2.7.5rc1
  mkdir foobar
  cd foobar
  ../antlr-2.7.5rc1/configure
  make
  make test
  su -c "make install"

Here I'm using a new build directory named "foobar". Any other 
name will do as well of course.

A fix for this problem is in progress.


Have also a look at available configure options

 configure --help

and have a look into file

 INSTALL.txt

for some details on the build/install process.


Please let me know about any other problem,
Wolfgang.




-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org]On Behalf Of Terence Parr
Sent: Wednesday, December 22, 2004 9:52 PM
To: ANTLR Interest
Subject: [antlr-interest] ANTLR 2.7.5 release candidate 1 available
(nowwith python code gen!)


Howdy,

2.7.5rc1 is available for your downloading pleasure.  We have a Python 
code generator!!!

http://www.antlr.org/download/antlr-2.7.5rc1.tar.gz

Thanks to efforts by the usual suspects:

C++	Ric Klaren
Python	Wolfgang Haefelinger and Marq Kole (with initial work by Amol 
Dharmadhikari)
C#		Micheal Jordan, Kunle Odutola and Anthony Oguntimehin
Java	Terence Parr

Thanks also to the people with excellent suggestions and bug fixes from 
the antlr-interest list!!!!

Enjoy.

Regards,
Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!



_______________________________________________
antlr-interest mailing list
antlr-interest@antlr.org
http://www.antlr.org/mailman/listinfo/antlr-interest

From ewbank at gmail.com  Wed Dec 22 16:17:52 2004
From: ewbank at gmail.com (Bryan Ewbank)
Date: Wed Dec 22 16:17:54 2004
Subject: [antlr-interest] testing new interest list
In-Reply-To: <16841.57611.707870.126244@despot.non.net>
References: <C7FE35004D40FD45AA342991B88CE40409B0C1@lnml1.eca-international.local>
	<C7CF489D-544C-11D9-B211-000A95891192@cs.usfca.edu>
	<16841.57611.707870.126244@despot.non.net>
Message-ID: <dd3a065f041222161740c59b27@mail.gmail.com>

The two downsides I see of default "reply-to-sender" is that:
(1) Each sender will get the gone-fishing messages and various errors
when something fails to go fishing properly, rather than the list
spiking them

(2) Default reply to sender means that some responses will not end up
in the archive for the list - only the sender will get the answer. 
This means we will likely see an increase in mails of the form "I have
the same question as ... what was the answer?".

On Wed, 22 Dec 2004 13:03:07 -0800, John D. Mitchell
<johnm-antlr@non.net> wrote:
> >>>>> "Terence" == Terence Parr <parrt@cs.usfca.edu> writes:
> [...]
> 
> > SO, given all that, shall we try the reply-to as list thing again?
> 
> NO
> 
> John
> _______________________________________________
> antlr-interest mailing list
> antlr-interest@antlr.org
> http://www.antlr.org/mailman/listinfo/antlr-interest
>
From ric.klaren at gmail.com  Wed Dec 22 16:29:24 2004
From: ric.klaren at gmail.com (Ric Klaren)
Date: Wed Dec 22 16:29:28 2004
Subject: [antlr-interest] testing new interest list
In-Reply-To: <dd3a065f041222161740c59b27@mail.gmail.com>
References: <C7FE35004D40FD45AA342991B88CE40409B0C1@lnml1.eca-international.local>
	<C7CF489D-544C-11D9-B211-000A95891192@cs.usfca.edu>
	<16841.57611.707870.126244@despot.non.net>
	<dd3a065f041222161740c59b27@mail.gmail.com>
Message-ID: <bc607a4e04122216291d9c65d2@mail.gmail.com>

On Wed, 22 Dec 2004 19:17:52 -0500, Bryan Ewbank <ewbank@gmail.com> wrote:
> The two downsides I see of default "reply-to-sender" is that:
> (1) Each sender will get the gone-fishing messages and various errors
> when something fails to go fishing properly, rather than the list
> spiking them
> 
> (2) Default reply to sender means that some responses will not end up
> in the archive for the list - only the sender will get the answer.
> This means we will likely see an increase in mails of the form "I have
> the same question as ... what was the answer?".

Don't care much myself personally. Case of 1 is probably not that
often (I hope) never saw it got out of hand much on any list I've been
on. Anyway..

Another thing often lists have a periodical post with some general
list trivia, I guess these are often generated automatically? Is it an
idea to build one of those. (and prevent the regular 'Net nanny' posts
by some unnamed community member....) Could try to make a concept one
if people think it's a good idea.

Cheers,

Ric
From kibab at icehouse.net  Wed Dec 22 22:06:06 2004
From: kibab at icehouse.net (Kaleb Pederson)
Date: Wed Dec 22 22:06:15 2004
Subject: [antlr-interest] ANTLR 2.7.5 release candidate 1 available
	(nowwith python code gen!)
In-Reply-To: <BOEKJIPMFIHCMIBNCAPIOEPDCDAA.ora.et.labora@web.de>
References: <BOEKJIPMFIHCMIBNCAPIOEPDCDAA.ora.et.labora@web.de>
Message-ID: <200412222206.06790.kibab@icehouse.net>

On Wednesday 22 December 2004 2:35 pm, wolfgang haefelinger wrote:
> Here's how to build, make, test and install:
[snip]
> Here I'm using a new build directory named "foobar". Any other
> name will do as well of course.

Thanks for the heads up.

I *had* to try the Python one as it will be very useful at work !! :)  I 
noticed the following, but won't have time to look into it much until after 
the holidays.  Nevertheless, here's what I found:

$ /usr/local/bin/antlr -traceLexer tinyc_l.g
ANTLR Parser Generator   Version 2.7.5rc1 (20041222)   1989-2004 jGuru.com
tinyc_l.g:41: warning:lexical nondeterminism upon
tinyc_l.g:41:     k==1:'*'
tinyc_l.g:41:     k==2:'/'
tinyc_l.g:41:     between alt 1 and exit branch of block

$ /usr/local/bin/antlr -traceParser tinyc_p.g
ANTLR Parser Generator   Version 2.7.5rc1 (20041222)   1989-2004 jGuru.com
tinyc_p.g:99:17: warning:nondeterminism between alts 1 and 2 of block upon
tinyc_p.g:99:17:     k==1:"else"

$ python tinyc_p.py < tinyc.in
Traceback (most recent call last):
  File "tinyc_p.py", line 676, in ?
    P.program()
  File "/home/kibab/antlr-2.7.5rc1/examples/python/tinyc/tinyc_p.py", line 55, 
in program
    self.traceIn("program")
  File "/usr/lib/python2.3/site-packages/antlr/antlr.py", line 1606, in 
traceIn
    self.trace("> ", rname)
  File "/usr/lib/python2.3/site-packages/antlr/antlr.py", line 1590, in trace
    self.traceIndent()
AttributeError: 'Parser' object has no attribute 'traceIndent'

And, when I don't build with -traceLexer or -traceParser:

$ python tinyc_p.py < tinyc.in
stop - no AST generated.

Hence, that's why I turned on traceLexer and traceParser.  It's possible it's 
in the docs and I missed it as I won't have time to read them until after the 
holidays ;)

Finally, thank you for your work on this!  I want[ed?] to be a part of the 
antlr-3 Python port, but was waiting to hear that Terence was ready to get 
started on it more.

Thanks.

--Kaleb
From ArnarB at oddi.is  Thu Dec 23 00:25:29 2004
From: ArnarB at oddi.is (Arnar Birgisson)
Date: Thu Dec 23 00:26:05 2004
Subject: [antlr-interest] testing new interest list
Message-ID: <s1ca8119.017@emil.oddi.is>

Hi there,

>>> Terence Parr <parrt@cs.usfca.edu> 22.12.2004 17:02:06 >>>
> Also, the list was supposed to send a welcome mail.  If it 
> did, it apparently did not include a passwd. 

I got a password which I used to log in successfully and I can change
all *my* settings...

Arnar
From ArnarB at oddi.is  Thu Dec 23 00:30:30 2004
From: ArnarB at oddi.is (Arnar Birgisson)
Date: Thu Dec 23 00:31:21 2004
Subject: [antlr-interest] ANTLR 2.7.5 release candidate 1 available
	(now with python code gen!)
Message-ID: <s1ca824a.024@emil.oddi.is>

> We have a Python code generator!!!

Brilliant!! :o)

Arnar
From ric.klaren at gmail.com  Thu Dec 23 01:31:55 2004
From: ric.klaren at gmail.com (Ric Klaren)
Date: Thu Dec 23 01:34:10 2004
Subject: [antlr-interest] testing new interest list
In-Reply-To: <s1ca8119.017@emil.oddi.is>
References: <s1ca8119.017@emil.oddi.is>
Message-ID: <bc607a4e04122301313ff48c04@mail.gmail.com>

On Thu, 23 Dec 2004 08:25:29 +0000, Arnar Birgisson <ArnarB@oddi.is> wrote:
> >>> Terence Parr <parrt@cs.usfca.edu> 22.12.2004 17:02:06 >>>
> > Also, the list was supposed to send a welcome mail.  If it
> > did, it apparently did not include a passwd.
> 
> I got a password which I used to log in successfully and I can change
> all *my* settings...

Same here.

Ric
From parrt at cs.usfca.edu  Thu Dec 23 10:41:19 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Dec 23 10:35:23 2004
Subject: [antlr-interest] unget a character
In-Reply-To: <Pine.LNX.4.44.0412221148170.27412-100000@g4.pauljlucas.org>
References: <Pine.LNX.4.44.0412221148170.27412-100000@g4.pauljlucas.org>
Message-ID: <3C948616-5512-11D9-B211-000A95891192@cs.usfca.edu>


On Dec 22, 2004, at 11:52 AM, Paul J. Lucas wrote:
> 	It's not clear where/when to set call mark() in my case.  In my
> 	case, the token in the 'B' lexer is:
>
> 		RBRACE
> 			: '}'
> 			;
>
> 	If 'B' ever sees '}', it's wrong.  I need to pop 'B' switching
> 	back to 'A' then have 'A' see the '}'.
>
> 	So where do I call mark() and rewind() ?

Hmm...it seems you'll need mark/rewind to change the shared input 
stream state and retry exception or your own retry mechanism to make 
this work.  My only experience is javadoc like stuff where the sentinel 
tokens are used to merely switch lexers not rewind switch.

Sorry I can't be of more help.  I, myself, would have to look at the 
rewind stuff to figure out how to tweak it.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!



From parrt at cs.usfca.edu  Thu Dec 23 10:44:26 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Dec 23 10:38:27 2004
Subject: [antlr-interest] python generator attribution correction
Message-ID: <AC234C96-5512-11D9-B211-000A95891192@cs.usfca.edu>

Folks,

My apologies.  Apparently Wolfgang built the generator without 
knowledge of Amol's original jython version.  Wolfgang discussed a lot 
of things with Marq who apparently had tried to extend Amol's work.  
So, proper attribute for this is something akin to:

Wolfgang Haefelinger with help from Marq Kole

Terence
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!



From pauljlucas at mac.com  Thu Dec 23 10:57:12 2004
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Thu Dec 23 10:57:14 2004
Subject: [antlr-interest] unget a character
In-Reply-To: <3C948616-5512-11D9-B211-000A95891192@cs.usfca.edu>
Message-ID: <Pine.LNX.4.44.0412231044170.27412-100000@g4.pauljlucas.org>

On Thu, 23 Dec 2004, Terence Parr wrote:

> My only experience is javadoc like stuff where the sentinel tokens are used
> to merely switch lexers not rewind switch.

	Right, and, normally, this is what I do; but I want to handle
	the abnormal case for recovery.  The normal case is:

		{ <foo/> }

	i.e., XML embedded inside { } (this is XQuery).  I have two
	lexers: one for the "main" part of XQuery, and a second for the
	"XML" part of XQUery.  Above, encountering a '<' switches to the
	XML lexer and "/>" switches back to the main lexer which then
	sees '}'.

	But the abnormal case is where the user makes a mistake like:

		{ <foo> }

	i.e., the user forgot the '/'.  Hence, the XML lexer never
	switches back and the main lexer, so the XML lexer sees the '}'
	by mistake.

	I've actually managed to get this to work simply by duplicating
	the code that the main lexer does upon '}' (it's only a single
	line of code) so, while not ideal, it works.

	- Paul

From gvozdoder at gmail.com  Wed Dec 22 23:10:13 2004
From: gvozdoder at gmail.com (Sergej Zagursky)
Date: Thu Dec 23 11:42:44 2004
Subject: [antlr-interest] FEATURE REQUEST: 'virtual' in ASTFactory (C++)
Message-ID: <41CA6F55.4020800@gmail.com>

Hello, all!

I think that all create() methods in class ASTFactory should be 
'virtual' (in C++ code).
What do you think?

Absence of 'virtual' makes it difficult to create user-defined AST 
factories.
From mwisner69 at comcast.net  Thu Dec 23 11:08:41 2004
From: mwisner69 at comcast.net (Matt Wisner)
Date: Thu Dec 23 11:43:45 2004
Subject: [antlr-interest] CCCP - Compiler Compiler Challenged Person
Message-ID: <20041223190847.758CADC75C@www.antlr.org>

Hi,

I've scanned the ANTLR reference manual and poured over the samples but, for
the life of me, cannot get the simplest "conditional logic" parser/tree
parser working with ANTLR.   I've included an example of the source code I'm
trying to parse/walk along with my defs for my ANTLR parser and tree parser
below.  I've also included the output of getAST().toStringList() where the
"if" is obviously missing.   If anyone can shed some light on the nature of
my problem I would greatly appreciate it.

 

Thanks,

Matt

----------------------------------------------------------------------------
-------------

 

Source file:

 

line 3:4: expecting ASSIGN, found '('

ast:  ( = $var1 "batman" ) ( = $var2 $var1 )

 

Source:

 

$var1 = "batman"

If(1)

{

            $var2 = $var1

}

-----------------------------------------------------------------

 

 

Parser and Tree Parser defs:

 

 

class Parser_g extends Parser;

 

options

{

    k = 2;

    importVocab = RulesLexer;

    exportVocab = RulesParser;

    buildAST = true;

    ASTLabelType = "antlr.CommonAST";

}

 

tokens

{

    LITERAL_include="include";

}

 

{

protected SymbolTable m_symtab = null;

private Logger log = TapCollector.getLogger();

}

 

rulesFile

    :       ( rulesSection )? EOF!

    ;

 

rulesSection

        :   ( statement )*

        ;

 

//--------------------------------

//   ||

//   ||

//  _||_    S t a t e m e n t s

//  \  /       

//   \/

//--------------------------------

 

statement

        :       assignmentStatement          { #statement = #as; }

        |       cs:conditionalStatement         { #statement = #cs; }

        ;

 

assignmentStatement

            :           IDENT ASSIGN^ expression

            ;

 

conditionalStatement

        :       "if"^ LPAREN! expression RPAREN! LCURLY! assignmentStatement
RCURLY!

        ;

 

//----------------------------------

//   ||

//   ||

//  _||_    E x p r e s s i o n s

//  \  /       

//   \/

//----------------------------------

 

expression

            :           ( IDENT | STRING_LITERAL | DECIMAL_LITERAL )

            ;

 

 

//----------------------------------

 

quotedString returns [String qs]

{

    qs = "";

}

    :   sl:STRING_LITERAL

            {

                qs = sl.getText();

                qs = qs.substring(1, qs.length()-1);

            }

    ;

 

 

class TreeParser_g extends TreeParser;

 

options

{

    importVocab = RulesParser;

    exportVocab = Rules;

    buildAST = true;

    ASTLabelType = "antlr.CommonAST";

}

 

{

protected SymbolTable m_symtab = null;

private Logger log = TapCollector.getLogger();

 

private String unquoteQuotedString(String in)

{

    return in.substring(1, in.length()-1);

}

 

}

 

rulesSection returns [SymbolTable symtab]

{

    symtab = new SymbolTable();

    m_symtab = symtab;

}

    :   ( statement )*

    ;

 

statement

        :       assignmentStatement     { log.info("<< asgnStmt >>"); }

        |       ifStatement             { log.info("<< ifStmt   >>"); }

        ;

 

assignmentStatement

{

    String val = "?";

}

    :   #( ASSIGN id:IDENT val=expression )

            {

                log.info("asgnStmt: " + id.getText() + " := " + val);

                try

                {

                    // TODO:  if 'id.getText()' does not start with $|@|%
then throw exception?

                    m_symtab.updateEntry(id.getText(), val);

                }

                catch(Exception mjw_e)

                {

                    log.severe("EXCEPTION: " + mjw_e.toString());

                }

            }

    ;

 

ifStatement

{

    String e = "?";

}

    :   #( LITERAL_if e=expression assignmentStatement)

            {

                log.info("ifStmt: e=" + e);

            }

    ;

 

expression returns [String retval]

{

    retval = "";

    SymbolTableEntry entry = null;

}

    :  (    id:IDENT                

                {

                    try

                    {

                        entry = m_symtab.findEntry(id.getText());

                        if(entry == null)

                        {

                            m_symtab.addEntry(id.getText(), "");

                        }

                        retval = entry.getValue();

                    }

                    catch(Exception mjw_e)

                    {

                        log.severe("Exception: " + mjw_e.toString());

                    }

                }

        |   retval=quotedString

        |   dc:DECIMAL_LITERAL    

                {

                    retval = dc.getText().toString(); 

                }

        )

    ;

 

quotedString returns [String qs]

{

    qs = "";

}

    :   sl:STRING_LITERAL

            {

                qs = sl.getText();

                qs = qs.substring(1, qs.length()-1);

            }

    ;

 

 

 

 

 

 

_____________________

\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20041223/72e2455f/attachment-0001.html
From monty at codetransform.com  Thu Dec 23 09:01:25 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Thu Dec 23 12:01:32 2004
Subject: [antlr-interest] CCCP - Compiler Compiler Challenged Person
In-Reply-To: <20041223190847.758CADC75C@www.antlr.org>
References: <20041223190847.758CADC75C@www.antlr.org>
Message-ID: <41CAF9E5.4010707@codetransform.com>

Matt Wisner wrote:

>
>  
>
> statement
>
>         :       assignmentStatement          { #statement = #as; }
>
>         |       cs:conditionalStatement         { #statement = #cs; }
>
>         ;
>
>  
>
What are you trying to do here?  You don't have an "as" label for one 
thing.  For another there is no need for your actions here, antlr will 
return from statement whichever of the two options it matches.

Get rid of those actions and see what happens.

Monty
From ora.et.labora at web.de  Thu Dec 23 12:25:14 2004
From: ora.et.labora at web.de (wolfgang haefelinger)
Date: Thu Dec 23 12:25:20 2004
Subject: [antlr-interest] ANTLR 2.7.5 release candidate 1 available
	(nowwith python code gen!)
Message-ID: <BOEKJIPMFIHCMIBNCAPIIEPICDAA.ora.et.labora@web.de>

Hi Kaleb,

>> $ /usr/local/bin/antlr -traceLexer tinyc_l.g
>> ANTLR Parser Generator   Version 2.7.5rc1 (20041222)   1989-2004
jGuru.com
>> tinyc_l.g:41: warning:lexical nondeterminism upon
>> tinyc_l.g:41:     k==1:'*'
>> tinyc_l.g:41:     k==2:'/'
>> tinyc_l.g:41:     between alt 1 and exit branch of block

I didn't change the original 'tinyc' grammar. You will see
the same warnings when using tinyc for Java, C++ etc.

>> $ python tinyc_p.py < tinyc.in
>> Traceback (most recent call last):
>> [..]
>> AttributeError: 'Parser' object has no attribute 'traceIndent'

It's not in the doc - it's the bleeding edge. There's  no
"debugging"  support right now. Had no time to work on it
yet - but soon to be fixed (rc2), sorry.

>> $ python tinyc_p.py < tinyc.in
>> stop - no AST generated.

Is "-traceParser" supposed to turn AST generation on? I
thought it's just subject to option "buildAST". Perhaps
I missed this.

Thanks  for  reporting the problem and please keep posting
problems (especially regarding Python) and other obstacles
you encounter.

Cheers,
Wolfgang.


From nbsherid at secsme.org.au  Thu Dec 23 13:51:16 2004
From: nbsherid at secsme.org.au (Nigel Sheridan-Smith)
Date: Thu Dec 23 13:51:27 2004
Subject: [antlr-interest] CCCP - Compiler Compiler Challenged Person
In-Reply-To: <20041223190847.758CADC75C@www.antlr.org>
Message-ID: <000c01c4e939$87d2e6d0$0500a8c0@nigel>

 

Literals are case-sensitive. "If" is different to "if". so it matches IDENT
then looks for ASSIGN.

 

Nigel

--
Nigel Sheridan-Smith
PhD research student

Faculty of Engineering
University of Technology, Sydney
Phone: 02 9514 7946
Fax: 02 9514 2435
  

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Matt Wisner
Sent: Friday, 24 December 2004 6:09 AM
To: antlr-interest@antlr.org
Subject: [antlr-interest] CCCP - Compiler Compiler Challenged Person

 

Hi,

I've scanned the ANTLR reference manual and poured over the samples but, for
the life of me, cannot get the simplest "conditional logic" parser/tree
parser working with ANTLR.   I've included an example of the source code I'm
trying to parse/walk along with my defs for my ANTLR parser and tree parser
below.  I've also included the output of getAST().toStringList() where the
"if" is obviously missing.   If anyone can shed some light on the nature of
my problem I would greatly appreciate it.

 

Thanks,

Matt

----------------------------------------------------------------------------
-------------

 

Source file:

 

line 3:4: expecting ASSIGN, found '('

ast:  ( = $var1 "batman" ) ( = $var2 $var1 )

 

Source:

 

$var1 = "batman"

If(1)

{

            $var2 = $var1

}

-----------------------------------------------------------------

 

 

Parser and Tree Parser defs:

 

 

class Parser_g extends Parser;

 

options

{

    k = 2;

    importVocab = RulesLexer;

    exportVocab = RulesParser;

    buildAST = true;

    ASTLabelType = "antlr.CommonAST";

}

 

tokens

{

    LITERAL_include="include";

}

 

{

protected SymbolTable m_symtab = null;

private Logger log = TapCollector.getLogger();

}

 

rulesFile

    :       ( rulesSection )? EOF!

    ;

 

rulesSection

        :   ( statement )*

        ;

 

//--------------------------------

//   ||

//   ||

//  _||_    S t a t e m e n t s

//  \  /       

//   \/

//--------------------------------

 

statement

        :       assignmentStatement          { #statement = #as; }

        |       cs:conditionalStatement         { #statement = #cs; }

        ;

 

assignmentStatement

            :           IDENT ASSIGN^ expression

            ;

 

conditionalStatement

        :       "if"^ LPAREN! expression RPAREN! LCURLY! assignmentStatement
RCURLY!

        ;

 

//----------------------------------

//   ||

//   ||

//  _||_    E x p r e s s i o n s

//  \  /       

//   \/

//----------------------------------

 

expression

            :           ( IDENT | STRING_LITERAL | DECIMAL_LITERAL )

            ;

 

 

//----------------------------------

 

quotedString returns [String qs]

{

    qs = "";

}

    :   sl:STRING_LITERAL

            {

                qs = sl.getText();

                qs = qs.substring(1, qs.length()-1);

            }

    ;

 

 

class TreeParser_g extends TreeParser;

 

options

{

    importVocab = RulesParser;

    exportVocab = Rules;

    buildAST = true;

    ASTLabelType = "antlr.CommonAST";

}

 

{

protected SymbolTable m_symtab = null;

private Logger log = TapCollector.getLogger();

 

private String unquoteQuotedString(String in)

{

    return in.substring(1, in.length()-1);

}

 

}

 

rulesSection returns [SymbolTable symtab]

{

    symtab = new SymbolTable();

    m_symtab = symtab;

}

    :   ( statement )*

    ;

 

statement

        :       assignmentStatement     { log.info("<< asgnStmt >>"); }

        |       ifStatement             { log.info("<< ifStmt   >>"); }

        ;

 

assignmentStatement

{

    String val = "?";

}

    :   #( ASSIGN id:IDENT val=expression )

            {

                log.info("asgnStmt: " + id.getText() + " := " + val);

                try

                {

                    // TODO:  if 'id.getText()' does not start with $|@|%
then throw exception?

                    m_symtab.updateEntry(id.getText(), val);

                }

                catch(Exception mjw_e)

                {

                    log.severe("EXCEPTION: " + mjw_e.toString());

                }

            }

    ;

 

ifStatement

{

    String e = "?";

}

    :   #( LITERAL_if e=expression assignmentStatement)

            {

                log.info("ifStmt: e=" + e);

            }

    ;

 

expression returns [String retval]

{

    retval = "";

    SymbolTableEntry entry = null;

}

    :  (    id:IDENT                

                {

                    try

                    {

                        entry = m_symtab.findEntry(id.getText());

                        if(entry == null)

                        {

                            m_symtab.addEntry(id.getText(), "");

                        }

                        retval = entry.getValue();

                    }

                    catch(Exception mjw_e)

                    {

                        log.severe("Exception: " + mjw_e.toString());

                    }

                }

        |   retval=quotedString

        |   dc:DECIMAL_LITERAL    

                {

                    retval = dc.getText().toString(); 

                }

        )

    ;

 

quotedString returns [String qs]

{

    qs = "";

}

    :   sl:STRING_LITERAL

            {

                qs = sl.getText();

                qs = qs.substring(1, qs.length()-1);

            }

    ;

 

 

 

 

 

 

_____________________

\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20041224/3e9ac541/attachment-0001.html
From angel at ksu.ks.ua  Fri Dec 24 01:43:25 2004
From: angel at ksu.ks.ua (=?koi8-r?B?7sHHydLO0csg5M3J1NLJyiDp18HOz9fJ3g==?=)
Date: Fri Dec 24 01:43:48 2004
Subject: [antlr-interest] Multilingual support
Message-ID: <365EF9E33D9D1F458B20CDEDD8579D4B3BA6B0@apex.ksu.ks.ua>

Hi all!

What about multilingual support in 2.7.5 version?
I mean error messages in exceptions when using generated code.

I think it is not too hard to create some framework to implement such future.

Cheers.
Dmitriy Nagirnyak.
From ttsoris at yahoo.com  Fri Dec 24 02:47:55 2004
From: ttsoris at yahoo.com (Theofilos Tsoris)
Date: Fri Dec 24 02:47:59 2004
Subject: [antlr-interest] ANTLR 2.7.5 release candidate 1 available (now
	with python code gen!)
In-Reply-To: <535130A9-545B-11D9-B211-000A95891192@cs.usfca.edu>
Message-ID: <20041224104755.93399.qmail@web52607.mail.yahoo.com>

Hi all,
How can I unsuscribe from this mailing-list?
Thank you,
Theofilos

--- Terence Parr <parrt@cs.usfca.edu> wrote:

> Howdy,
> 
> 2.7.5rc1 is available for your downloading pleasure.
>  We have a Python 
> code generator!!!
> 
> http://www.antlr.org/download/antlr-2.7.5rc1.tar.gz
> 
> Thanks to efforts by the usual suspects:
> 
> C++	Ric Klaren
> Python	Wolfgang Haefelinger and Marq Kole (with
> initial work by Amol 
> Dharmadhikari)
> C#		Micheal Jordan, Kunle Odutola and Anthony
> Oguntimehin
> Java	Terence Parr
> 
> Thanks also to the people with excellent suggestions
> and bug fixes from 
> the antlr-interest list!!!!
> 
> Enjoy.
> 
> Regards,
> Ter
> --
> CS Professor & Grad Director, University of San
> Francisco
> Creator, ANTLR Parser Generator,
> http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email
> again!
> 
> 
> 
> _______________________________________________
> antlr-interest mailing list
> antlr-interest@antlr.org
>
http://www.antlr.org/mailman/listinfo/antlr-interest
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
From ewbank at gmail.com  Fri Dec 24 02:52:36 2004
From: ewbank at gmail.com (Bryan Ewbank)
Date: Fri Dec 24 02:52:39 2004
Subject: [antlr-interest] Re: HOWTO unsubscribe
In-Reply-To: <20041224104755.93399.qmail@web52607.mail.yahoo.com>
References: <535130A9-545B-11D9-B211-000A95891192@cs.usfca.edu>
	<20041224104755.93399.qmail@web52607.mail.yahoo.com>
Message-ID: <dd3a065f0412240252908ef50@mail.gmail.com>

Start here:
 http://www.antlr.org/mailman/listinfo/antlr-interest
You may need to have the mail manager resend your password if you
don't have it, then you can unsubscribe

On Fri, 24 Dec 2004 02:47:55 -0800 (PST), Theofilos Tsoris
<ttsoris@yahoo.com> wrote:
> Hi all,
> How can I unsuscribe from this mailing-list?
> Thank you,
> Theofilos
From parrt at cs.usfca.edu  Sat Dec 25 13:43:47 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat Dec 25 13:37:49 2004
Subject: [antlr-interest] merry xmas and more
Message-ID: <0EB03620-56BE-11D9-B211-000A95891192@cs.usfca.edu>

Howdy and happy holidays to y'all. :)

Just a note to say I have finished the basic automatic error recovery 
stuff for v3.0.  Tosses in stuff like I'm doing now for 2.7.5:

         catch (RecognitionException re) {
             reportError(re);
             recover(FOLLOW_atom);
         }

and then with support sets (with better names, as you can see) at the 
bottom of the file:

     public static final BitSet FOLLOW_stat = new BitSet(new 
long[]{41346L});

Note that the rule invocation stack is available to you if you want it 
for error messages or context-sensitive error recovery (thanks to Java 
1.4.2's stack trace access).  For example, here is the crappy but 
info-laden error reporting:

[stat, stat, expr, mexpr, atom]: line 5  atom : ( INT | ID | '(' expr 
')' | "maxint" ); state 0 (decision=5) no viable alt; token=[;/<5>,4:8]

It prints stack trace, the grammar location, state/decision information 
and current token.  I have isolated the error reporting mechanism from 
the parser so that strings are not computed and passed around.  Now, 
the exception objects just track info and reportError can compute error 
messages in whatever language. [ANTLR itself will automatically be 
generating localized error messages if an error template file exists 
for your language].

Next step is to make the tool a little more robust.  Then DFA 
optimization.  Then tree construction.   Then tree parsers. :)

Hooray!  I'll be damned if this suckers isn't starting to look like a 
parser generator. :)

Ter
PS	runtime package has only about 1000 lines of java code :)
PPS for those interested, i include the comment / class def for 
RecognitionException here:

/** The root of the ANTLR exception hierarchy.
  *
  *  To avoid English-only error messages and to generally make things
  *  as flexible as possible, these exceptions are not created with 
strings,
  *  but rather the information necessary to generate an error.  Then
  *  the various reporting methods in Parser and Lexer can be overridden
  *  to generate a localized error message.  For example, MismatchedToken
  *  exceptions are built with the expected token types.
  *  So, don't expect getMessage() to return anything.
  *
  *  Note that as of Java 1.4, you can access the stack trace, which 
means
  *  that you can compute the complete trace of rules from the start 
symbol.
  *  This gives you considerable context information with which to 
generate
  *  useful error messages.
  *
  *  ANTLR generates code that throws exceptions upon recognition error 
and
  *  also generates code to catch these exceptions in each rule.  If you
  *  want to quit upon first error, you can turn off the automatic error
  *  handling mechanism.  If you want an ANTLR-generated recognizer to 
bail
  *  out after another kind of error, then just throw an exception not
  *  under this hierarchy.
  *
  *  In general, the recognition exceptions track where in a grammar an
  *  problem occurred and/or what was the expected input.  The parser
  *  knows its state (such as current input symbol and line info) so
  *  this information is left out of the exception and left to the 
reporting
  *  method(s) to fill in.  You might want to have an error report an
  *  entire line of input not just a single token, for example.  Better 
to
  *  just say the recognizer had a problem and then let the parser report
  *  where the heck it was.
  */
public class RecognitionException extends Exception {
}
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!



From monhtruo at yahoo.es  Sun Dec 26 13:50:02 2004
From: monhtruo at yahoo.es (=?iso-8859-1?q?Jordi=20M=E1rquez?=)
Date: Sun Dec 26 15:35:07 2004
Subject: [antlr-interest] ANTLR works with Delphi 5?
Message-ID: <20041226215002.18856.qmail@web25108.mail.ukl.yahoo.com>

Hi!
I'm a lonely projectist finishing my studies.... :(
One part of my project has to check MIDI files and I would like to try ANTLR to do that. An other part have to draw the content of MIDI file to the screen using musical notation, and I decided to use Delphi because I know is very simple to draw things in the screen.
 
Can ANTLR be used with Delphi 5?
If it's possible, how can I install it and how I should use ANTLR inside Pascal code? There's any document where that's explained?
 
If not, which is the best envirointment for ANTLR? Microsoft Visual C++? (ugghs... I think is difficult drawings in MS Visual C++...)
 
Thanks! And Happy New Year 2005!!!
 
Jordi.
 
 

		
---------------------------------

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20041226/c4abe8aa/attachment.html
From lists at lischke-online.de  Mon Dec 27 02:13:50 2004
From: lists at lischke-online.de (Mike Lischke)
Date: Mon Dec 27 02:14:42 2004
Subject: [antlr-interest] ANTLR works with Delphi 5?
In-Reply-To: <20041226215002.18856.qmail@web25108.mail.ukl.yahoo.com>
Message-ID: <20041227101408.A0D6257C001@h4866.serverkompetenz.net>

Hi Jordi


Can ANTLR be used with Delphi 5?
If it's possible, how can I install it and how I should use ANTLR inside Pascal code? There's any document where that's
explained? 

No, this is not possible. ANTLR is a Java application and produces lexers and parsers for Java, C++ and since recently
also Python (IIRC) .

If not, which is the best envirointment for ANTLR? Microsoft Visual C++? (ugghs... I think is difficult drawings in MS
Visual C++...) 

Since ANTLR is a Java application you need an IDE that supports Java. I have been happy for about a year using Eclipse
(www.eclipse.org). You may of course use any of your prefered IDEs, which supports Java (e.g. Borland J Builder).
 
PS: Could you please try not to post using Yahoo or look for an option to only send plain text messages? It is really
annyoing (and dangerous at the same time) to send HTML messages, particularly to mailing lists. Please be so kind and
consider this next time you post a message. Thank you.
Mike
--
www.soft-gems.net 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20041227/6aa46e11/attachment.html
From ArnarB at oddi.is  Mon Dec 27 02:54:42 2004
From: ArnarB at oddi.is (Arnar Birgisson)
Date: Mon Dec 27 02:55:14 2004
Subject: [antlr-interest] ANTLR works with Delphi 5?
Message-ID: <s1cfea0f.000@emil.oddi.is>

Hi there,

>>If not, which is the best envirointment for ANTLR?
>>Microsoft Visual C++? (ugghs... I think is difficult
>>drawings in MS Visual C++...) 

>Since ANTLR is a Java application you need an IDE
>that supports Java. I have been happy for about a
>year using Eclipse (www.eclipse.org). You may of
>course use any of your prefered IDEs, which supports
>Java (e.g. Borland J Builder).

You only need java to generate the parser. The actions inside the
grammars are written in the target language so the parser writer really
doesn't have to know java very well (it's helpful to be familiar with it
though). There is no need to move you application to java completely,
and hence no need for a Java IDE.

I've used ANTLR to generate C++ code and use Visual Studio with good
success. I even run the antlr tool (a java application) from Visual
Studio via custom build steps. GUI programming in Visual Studio C++ is
however a pain as you point out, compared to Delphi. You could use C#,
but then you would rely on .NET for your application in which case you
could just as well move to Java.

What I would look into in your case, is building your parser in C++,
and using Visual Studio, generate a library (either a static .lib or a
.dll) which you can use from your Delphi code. You parser would be
written in C++, but your application and GUI in Delphi. This should be
fairly easy to do.

hope this helps,
Arnar
From sriyansa at gmail.com  Tue Dec 28 23:56:37 2004
From: sriyansa at gmail.com (Sriyansa)
Date: Tue Dec 28 23:56:40 2004
Subject: [antlr-interest] Parsing a continous stream of data ...
Message-ID: <41D26335.9020607@gmail.com>

Hi,

I am trying to write a parser module which takes in a streaming input
and converts it to an operation stack. All the steps (char stream ->
token stream -> operation stack) are asynchronous and the modules read
from and write into incomplete data structures.

The grammar for the parsing is itself not very complicated and I could
use ANTLR to generate the parser. However, embedding the code for the
customized I/O (a significant piece) in the grammar file does not look
feasible.

Now the questions:

1. Is there any other parser generator more suitable for such a task?
2. Or am I missing something in ANTLR irself?
3. If I have to change the ANTLR source to allow for such I/O where do
I start?

Thanks,
Sriyansa


From nbsherid at secsme.org.au  Wed Dec 29 01:01:37 2004
From: nbsherid at secsme.org.au (Nigel Sheridan-Smith)
Date: Wed Dec 29 01:01:42 2004
Subject: [antlr-interest] Parsing a continous stream of data ...
In-Reply-To: <41D26335.9020607@gmail.com>
Message-ID: <000001c4ed85$00f97c00$0500a8c0@nigel>


Sriyansa,

In Java, you can choose between java.io.InputStream, java.io.Reader or
antlr.InputBuffer to supply to your ANTLR-generated lexer. Just derive your
custom I/O class (or "interfacing" class) from one of those, and then pass
it to the lexer when you construct it...

Here is the definition of my lexer's constructors:

...

public TypeinfoLexer(InputStream in) {
	this(new ByteBuffer(in));
}
public TypeinfoLexer(Reader in) {
	this(new CharBuffer(in));
}
public TypeinfoLexer(InputBuffer ib) {
	this(new LexerSharedInputState(ib));
}

...


In C++, ANTLR-generated lexers can use either std::istream or
antlr::InputBuffer. I imagine there will be similar classes in C#...

Nigel

--
Nigel Sheridan-Smith
PhD research student

Faculty of Engineering
University of Technology, Sydney
Phone: 02 9514 7946
Fax: 02 9514 2435
 

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Sriyansa
> Sent: Wednesday, 29 December 2004 6:57 PM
> To: antlr-interest@antlr.org
> Subject: [antlr-interest] Parsing a continous stream of data ...
> 
> Hi,
> 
> I am trying to write a parser module which takes in a streaming input
> and converts it to an operation stack. All the steps (char stream ->
> token stream -> operation stack) are asynchronous and the modules read
> from and write into incomplete data structures.
> 
> The grammar for the parsing is itself not very complicated and I could
> use ANTLR to generate the parser. However, embedding the code for the
> customized I/O (a significant piece) in the grammar file does not look
> feasible.
> 
> Now the questions:
> 
> 1. Is there any other parser generator more suitable for such a task?
> 2. Or am I missing something in ANTLR irself?
> 3. If I have to change the ANTLR source to allow for such I/O where do
> I start?
> 
> Thanks,
> Sriyansa
> 
> 


From ric.klaren at gmail.com  Wed Dec 29 04:26:54 2004
From: ric.klaren at gmail.com (Ric Klaren)
Date: Wed Dec 29 04:26:57 2004
Subject: [antlr-interest] FEATURE REQUEST: 'virtual' in ASTFactory (C++)
In-Reply-To: <41CA6F55.4020800@gmail.com>
References: <41CA6F55.4020800@gmail.com>
Message-ID: <bc607a4e0412290426661e74bc@mail.gmail.com>

Hi,

On Thu, 23 Dec 2004 10:10:13 +0300, Sergej Zagursky <gvozdoder@gmail.com> wrote:
> I think that all create() methods in class ASTFactory should be
> 'virtual' (in C++ code).
> What do you think?
> 
> Absence of 'virtual' makes it difficult to create user-defined AST
> factories.

Do you only need the create's? Or more? At least the ASTFactory
contains a lot of pretty specific stuff and I could suspect that you
need more in some cases. Out of curiosity what are you trying to make?

A small change like this can probably already arrive in 2.7.5
depending on the release schedule.

Cheers,

Ric
From placr at hotmail.com  Wed Dec 29 05:40:16 2004
From: placr at hotmail.com (Pascal Lacroix)
Date: Wed Dec 29 05:42:27 2004
Subject: [antlr-interest] Common Intermediate Language Grammar
Message-ID: <BAY102-F118A79015DC0304F3A7600A39B0@phx.gbl>

I've downloaded my first version of the CIL Grammar (Assembly language used 
in the .NET Framework).

It's my first grammar and also the first time I use ANTLR.

Please feel free to test the grammar and don't hesitate to send me your 
remarks.


http://pascallacroix.free.fr/CIL/CILParser1_0.zip


Pascal Lacroix.


From dcaton at shorelinesoftware.com  Wed Dec 29 06:29:42 2004
From: dcaton at shorelinesoftware.com (Don Caton)
Date: Wed Dec 29 06:30:01 2004
Subject: [antlr-interest] FEATURE REQUEST: 'virtual' in ASTFactory (C++)
In-Reply-To: <bc607a4e0412290426661e74bc@mail.gmail.com>
Message-ID: <1104330531.3728@mx9.mysite4now.com>

Ric:

Perhaps it's not a small change, but I'd like to see most, if not all of the
methods in the C++ classes moved into the .h files.  That way, the compiler
can inline them for better performance.  I've done this with many of the
classes already with no problems at all.

If you got rid of all the .cpp files, you'd also eliminate the issue of
building a library.

Regards,
 
Don Caton
Shoreline Software, Inc.
 

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Ric Klaren
> Sent: Wednesday, December 29, 2004 7:27 AM
> To: Sergej Zagursky
> Cc: antlr-interest@antlr.org
> Subject: Re: [antlr-interest] FEATURE REQUEST: 'virtual' in 
> ASTFactory (C++)
> 
> A small change like this can probably already arrive in 2.7.5 
> depending on the release schedule.
> 
> Cheers,
> 
> Ric
> 


From dcaton at shorelinesoftware.com  Wed Dec 29 09:05:46 2004
From: dcaton at shorelinesoftware.com (Don Caton)
Date: Wed Dec 29 11:09:02 2004
Subject: [antlr-interest] FEATURE REQUEST: 'virtual' in ASTFactory (C++)
In-Reply-To: <dd3a065f0412290811797b54d4@mail.gmail.com>
Message-ID: <1104339894.15460@mx9.mysite4now.com>


> -----Original Message-----
> From: Bryan Ewbank [mailto:ewbank@gmail.com] 
> Sent: Wednesday, December 29, 2004 11:11 AM
> To: Don Caton
> Subject: Re: [antlr-interest] FEATURE REQUEST: 'virtual' in 
> ASTFactory (C++)
> 
> On Wed, 29 Dec 2004 09:29:42 -0500, Don Caton 
> <dcaton@shorelinesoftware.com> wrote:
> > Perhaps it's not a small change, but I'd like to see most, if not all 
> > of the methods in the C++ classes moved into the .h files.
> > ...
> > If you got rid of all the .cpp files, you'd also eliminate 
> > the issue of building a library.
> 
> I'd like to see this too, but it does make debugging such a 
> pain (or is there a way around this in some environments?)
> 

How so?  I only use Visual C++ but debugging code in a header file is no
different than in a .cpp file.  

Don


From parrt at cs.usfca.edu  Wed Dec 29 11:30:58 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Dec 29 11:24:58 2004
Subject: [antlr-interest] uh, ok,
	so mailman is dropping vast quantities of mail for me
Message-ID: <2A9D8F30-59D0-11D9-9F97-000A95891192@cs.usfca.edu>

Hi, can people check the Dec archive real quick to see what mail they  
are missing?

http://www.antlr.org/pipermail/antlr-interest/2004-December/ 
date.html

For example, I did NOT get these mails:

http://www.antlr.org/pipermail/antlr-interest/2004-December/ 
010799.html
http://www.antlr.org/pipermail/antlr-interest/2004-December/ 
010809.html
http://www.antlr.org/pipermail/antlr-interest/2004-December/ 
010810.html
http://www.antlr.org/pipermail/antlr-interest/2004-December/ 
010811.html
http://www.antlr.org/pipermail/antlr-interest/2004-December/ 
010812.html

With the actual mail, I cannot see what all the headers were to figure  
out their commonality. :(

Why does most free software just suck?  This is why I get pissed off  
and write everything I use.  Frustration at maximum. :(

Anybody have any suggestions?  I'm almost ready to jump back to yahoo;  
at least I get those emails even if I can't search them online!

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!



From parrt at cs.usfca.edu  Wed Dec 29 11:36:50 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Dec 29 11:30:47 2004
Subject: [antlr-interest] uh, ok,
	so mailman is dropping vast quantities of mail for me
In-Reply-To: <2A9D8F30-59D0-11D9-9F97-000A95891192@cs.usfca.edu>
References: <2A9D8F30-59D0-11D9-9F97-000A95891192@cs.usfca.edu>
Message-ID: <FC6625B2-59D0-11D9-9F97-000A95891192@cs.usfca.edu>

Ah!  Could this be a spam thing?  If it's just me that's missing email, 
I'll shut up ;)  Perhaps I set up the list wrong...

The mail may actually be coming in from the individual person not the 
list and hence my challenge-response may kill it.  I just kind of 
assumed programmers would know how to respond.  Perhaps their spam 
filters knock out my challenge-response! ;)  Anyway, I'm digging 
through logs.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!



From nbsherid at secsme.org.au  Wed Dec 29 11:46:00 2004
From: nbsherid at secsme.org.au (Nigel Sheridan-Smith)
Date: Wed Dec 29 11:45:59 2004
Subject: [antlr-interest] uh, ok,
	so mailman is dropping vast quantities of mail for me
In-Reply-To: <FC6625B2-59D0-11D9-9F97-000A95891192@cs.usfca.edu>
Message-ID: <000201c4eddf$061ab500$0500a8c0@nigel>


> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Terence Parr
> Sent: Thursday, 30 December 2004 6:37 AM
> To: ANTLR Interest
> Subject: Re: [antlr-interest] uh, ok,so mailman is dropping vast
> quantities of mail for me
> 
> Ah!  Could this be a spam thing?  If it's just me that's missing email,
> I'll shut up ;)  Perhaps I set up the list wrong...
> 
> The mail may actually be coming in from the individual person not the
> list and hence my challenge-response may kill it.  I just kind of
> assumed programmers would know how to respond.  Perhaps their spam
> filters knock out my challenge-response! ;)  Anyway, I'm digging
> through logs.
> 


Hi Terence,

Maybe search for the following headers (if possible) in your spam filter:

X-BeenThere: antlr-interest@antlr.org
List-Id: antlr-interest.antlr.org

I'm pretty sure I got all those emails...

Nigel

--
Nigel Sheridan-Smith
PhD research student

Faculty of Engineering
University of Technology, Sydney
Phone: 02 9514 7946
Fax: 02 9514 2435


From jmcclain1 at surewest.net  Wed Dec 29 20:28:25 2004
From: jmcclain1 at surewest.net (jmcclain)
Date: Wed Dec 29 20:32:20 2004
Subject: [antlr-interest] newbie help with treewalker
Message-ID: <loom.20041230T051626-328@post.gmane.org>

I am parsing expressions of the form:

left(f1("a", "b", "c"+f2(f3()), ""), 5) + mid(f1("a", "b", "c"+f2(f3()), ""), 
5,5)

I have built the lexer and parser grammar. The parser grammar is setup to 
build an AST where each node is the function name, logical operator or logical 
comparator, and each child is a parameter of said node. What I want to do is 
associate an action with each node that calls the associated function or 
operator. I.E., each node will execute its action that will execute a function 
passing in the child nodes as parameters. The result of the function should 
overwrite the node. What I want is to treewalk the ast, overwriting the ast 
nodes, until you get to the root, which will hold the final value of the 
expression.

There are no examples of how to do this that I can see. 

Can someone out there show me how (pseudo code or treeparser grammar would be 
appreciated), or point me in the right direction? here is my grammar:



class P extends Parser;
options {buildAST=true;}

prog: expression EOF;


procedureCallStatement
  : IDENT^ (actualParameters)?
  ;

// either proc call or variable
actualParameters
  : LPAREN! (expression (COMMA! expression)*)? RPAREN!
  ;

constantValue
  : INTLIT
  | STRING_LITERAL
  ;
  
    
  primitiveElement
  : 
  constantValue
  | LPAREN! expression RPAREN!
  | procedureCallStatement
  ;


booleanNegationExpression
  : ("not"^)* primitiveElement
  ;

signExpression
  : ((PLUS^|MINUS^))* booleanNegationExpression   ;


multiplyingExpression
  : signExpression ((TIMES^|DIV^|"mod"^) signExpression)* 
  ;

addingExpression
  : multiplyingExpression ((PLUS^|MINUS^) multiplyingExpression)* 
  ;

relationalExpression
  : addingExpression ((EQUALS^|NOT_EQUALS^|GT^|GTE^|LT^|LTE^) addingExpression)
* 
  ;

expression
  : relationalExpression (("AND"^|"OR"^) relationalExpression)* 
  ;
  
 class L extends Lexer;

options {
  charVocabulary = '\0'..'\377';
  testLiterals=false;    // don't automatically test for literals
  k=2;                   // two characters of lookahead
}

// Literals
protected DIGIT : '0'..'9'
{System.out.println("1" + getText());};

INTLIT  :  (DIGIT)+
{System.out.println("2" + getText());};
CHARLIT : '\''! . '\''!
{System.out.println("3" + getText());};

// string literals
STRING_LITERAL
  : '"'!
    ( '"' '"'!
    | ~('"'|'\n'|'\r')
    )*
    ( '"'!
    | // nothing -- write error message
    )
{System.out.println("4" + getText());};


// Keywords are literals in the parser grammar

// Operators
DOT        : '.'   ;
BECOMES    : ":="  ;
COLON      : ':'   ;
SEMI       : ';'   ;
COMMA      : ','   ;
EQUALS     : '='   ;
LBRACKET   : '['   ;
RBRACKET   : ']'   ;
DOTDOT     : ".."  ;
LPAREN     : '('   
{System.out.println("5" + getText());};
RPAREN     : ')'   
{System.out.println("6" + getText());};
NOT_EQUALS : "/="  ;
LT         : '<'   
{System.out.println("7" + getText());};
LTE        : "<="  ;
GT         : '>'   ;
GTE        : ">="  ;
PLUS       : '+'   
{System.out.println("8" + getText());};
MINUS      : '-'   ;
TIMES      : '*'   ;
DIV        : '/'   ;



// Whitespace -- ignored
WS
  : ( ' '
    | '\t'
    | '\f'

    // handle newlines
    | ( "\r\n"  // Evil DOS
      | '\r'    // Macintosh
      | '\n'    // Unix (the right way)
      )
      { newline(); }
    )
    { $setType(Token.SKIP); }
  ;


// an identifier.  Note that testLiterals is set to true!  This means
// that after we match the rule, we look in the literals table to see
// if it's a literal or really an identifer
IDENT
  options {testLiterals=true;}
  : ('a'..'z'|'A'..'Z') ('a'..'z'|'A'..'Z'|'0'..'9')*
{System.out.println("10" + getText());};


  


From virtualaspirin at yahoo.com  Wed Dec 29 23:54:19 2004
From: virtualaspirin at yahoo.com (Akhilesh Mritunjai)
Date: Wed Dec 29 23:54:25 2004
Subject: [antlr-interest] FEATURE REQUEST: continued and memory/speed
	issues
In-Reply-To: <bc607a4e0412290426661e74bc@mail.gmail.com>
Message-ID: <20041230075419.77667.qmail@web54707.mail.yahoo.com>

Ric,

Infact a lot of methods will need to be made virtual.
For our project we needed a custom AST class with
parent pointer. The standard method of making a custom
factory class failed due to lack of virtual functions
and now we are doing special dirty work in
setNextSibling(), setFirstChild() functions of the
custom AST class.

Additionally, I'd request you to make tokenNames and
getTokenName variable/method in generated parser file
as static (like in java code). Right now there is no
way to access these methods without instantiating the
parser (and lexer and zillion things), which seems a
little painful for printing out just a token name in a
debug statements.

I'd second the request for moving most functions in
header files for better inlining. We have made a good
big grammar file and generated both Java and C++
parser from it. On an 8 MB input file, the Java parser
consumed about __33%__LESS__ memory (Java 217 MB / C++
 372 MB, figures include JVM size, taken straight from
/proc/<PID>/status/VmSize) and is TWICE as fast (Java
33.4 sec, C++ 68 sec). Compilers used were :
* Java : Sun JDK 1.5 for RH linux 9.0
* C++ : GNU gcc 3.4.3 for RH linux 9.0. 
  Flags used : -O3 -fexceptions -ffast-math
-march=pentium4 -fexpensive-optimizations

System is a P4 Xeon 2.4GHz w 1GB RAM.

The grammar is LL(2) for parser and LL(3) for lexer.

- Akhilesh

--- Ric Klaren <ric.klaren@gmail.com> wrote:
> Do you only need the create's? Or more? At least the
> ASTFactory
> contains a lot of pretty specific stuff and I could
> suspect that you
> need more in some cases. Out of curiosity what are
> you trying to make?
> 
> A small change like this can probably already arrive
> in 2.7.5
> depending on the release schedule.

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
From ArnarB at oddi.is  Thu Dec 30 00:28:42 2004
From: ArnarB at oddi.is (Arnar Birgisson)
Date: Thu Dec 30 00:29:22 2004
Subject: [antlr-interest] uh, ok, so mailman is dropping vast
	quantities of mail for me
Message-ID: <s1d3bc57.021@emil.oddi.is>

Hello, 

> For example, I did NOT get these mails:

I got them all...

> With the actual mail, I cannot see what all the headers were to
figure  
> out their commonality. :(

I'll send you the whole messages directly..

> Why does most free software just suck?  This is why I get pissed off 

> and write everything I use.  Frustration at maximum. :(

Did you write your spam-filter? *grin*

Arnar
From nbsherid at secsme.org.au  Thu Dec 30 01:33:40 2004
From: nbsherid at secsme.org.au (Nigel Sheridan-Smith)
Date: Thu Dec 30 01:33:42 2004
Subject: [antlr-interest] uh, ok,
	so mailman is dropping vastquantities of mail for me
In-Reply-To: <s1d3bc57.021@emil.oddi.is>
Message-ID: <000001c4ee52$a5fc4980$0500a8c0@nigel>


> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Arnar Birgisson
> Sent: Thursday, 30 December 2004 7:29 PM
> To: antlr-interest@antlr.org; parrt@cs.usfca.edu
> Subject: Re: [antlr-interest] uh, ok, so mailman is dropping
> vastquantities of mail for me
> 
> 
> > and write everything I use.  Frustration at maximum. :(
> 
> Did you write your spam-filter? *grin*
> 

Technically, he did!

He is a partner in the company at least :)

Nigel


--
Nigel Sheridan-Smith
PhD research student

Faculty of Engineering
University of Technology, Sydney
Phone: 02 9514 7946
Fax: 02 9514 2435


From jdrlist at hangar5.net  Thu Dec 30 02:40:32 2004
From: jdrlist at hangar5.net (Jim Rudnicki)
Date: Thu Dec 30 02:38:55 2004
Subject: [antlr-interest] uh, ok,
	so mailman is dropping vastquantities of mail for me
References: <000001c4ee52$a5fc4980$0500a8c0@nigel>
Message-ID: <000a01c4ee5b$fcf70be0$3301a8c0@Black>


----- Original Message ----- 
From: "Nigel Sheridan-Smith" <nbsherid@secsme.org.au>
To: <antlr-interest@antlr.org>
Sent: Thursday, December 30, 2004 1:33 AM
Subject: RE: [antlr-interest] uh, ok,so mailman is dropping vastquantities
of mail for me


> >
> > > and write everything I use.  Frustration at maximum. :(
> >
> > Did you write your spam-filter? *grin*
> >
>
> Technically, he did!
>
> He is a partner in the company at least :)
>

Even better, the challenge response I got scored almost as spam!

X-Spam-Score: 3.429 (MSGID_SPAM_LETTERS,NO_REAL_NAME)
X-Spam-Level: !!!

Jim

From waldemarsauer at hotmail.com  Thu Dec 30 05:26:16 2004
From: waldemarsauer at hotmail.com (Waldemar Sauer)
Date: Thu Dec 30 05:27:06 2004
Subject: [antlr-interest] Bug in ASTFactory.cpp, version 2.7.3
Message-ID: <BAY17-DAV58458CACD5B380B044635BA9C0@phx.gbl>

Hi there
 
I am bumping into some infinite loops in ASTFactory.cpp, and I was
wondering if this is a bug in that code, or if there is maybe something
about the antlr grammar that I'm not understanding. I think rather the
former, because the compiled compiler should never run into an infinite
loop, but rather cast exceptions if there are problems that it is
experiencing.
 
One grammar fragment that is causing this is as follows:
primaryExpr:
        literal_value 
      | id:ident (ap:actualParams)? {
            if (#ap.get() != NULL) {
                  #primaryExpr = #([MEM_CALL, "MEM_CALL"], #id, #ap);
            } else {
                  #primaryExpr = #id;
            } // if
        }
      // array index, post-increment, post-decrement, typeof, checked,
unchecked, and
      // new.
      //    new has it's own challenges, in that we have to call
"release" when
      //    the object goes out of scope.
      ;
 
actualParams!: LPAREN (apl:actualParamList)? RPAREN {
      #actualParams = #([APARAMS, "APARAMS"], #apl);
};
actualParamList: expression (COMMA^ expression)*
 
Like I said, I've seen this problem before, and usually there is a way I
can get out of it by redefining what I would like to be doing, just in
this case, I haven't found the workaround in the grammar yet.
 
It seems as though the "#primaryExpr = #([MEM_CALL ." expression is
generating a list of AST nodes by using the ASTArray::add function to
add AST nodes to itself as the compiled code of the above statement
demonstrates:
      primaryExpr_AST =
ANTLR_USE_NAMESPACE(antlr)RefAST(astFactory->make((new
ANTLR_USE_NAMESPACE(antlr)ASTArray(3))->add(astFactory->create(MEM_CALL,
"MEM_CALL"))->add(id_AST)->add(ap_AST)));
The right sibling of the id_AST node is the ap_AST node by the time
ASTFactory::make is called. ASTFactory::make then has code that turns
the nodes in the list (nodes parameter to ASTFactory::make) into
siblings of a tree node (local parameter 'root'). The problem is that
ap_AST becomes it's own right sibling, and the code that searches for
the last sibling in the list ("// RK: I cannot fathom why this missing
check didn't bite anyone else") then runs into an infinite loop.
 
I resolved the issue by patching the ASTFactory::make code to check for
this condition (see end of posting), but I need someone to look at the
code, and say if it is the right thing to do, or if there is an issue
with my definition of the grammar.
 
Thanks in advance
 - Waldemar
 
 
 
----------------- 8< -----------------------------------------
/** Make a tree from a list of nodes.  The first element in the
 * array is the root.  If the root is null, then the tree is
 * a simple list not a tree.  Handles null children nodes correctly.
 * For example, make(a, b, null, c) yields tree (a b c).  make(null,a,b)
 * yields tree (nil a b).
 */
RefAST ASTFactory::make(ANTLR_USE_NAMESPACE(std)vector<RefAST>& nodes)
{
      if ( nodes.size() == 0 )
            return RefAST(nullASTptr);
 
      RefAST root = nodes[0];
      RefAST tail = RefAST(nullASTptr);
 
      if( root )
            root->setFirstChild(RefAST(nullASTptr));  // don't leave any
old pointers set
 
      // link in children;
      for(unsigned int i = 1; i < nodes.size(); i++ )
      {
            if ( nodes[i] == 0 )          // ignore null nodes
                  continue;
 
            if ( root == 0 )              // Set the root and set it up
for a flat list
                  root = tail = nodes[i];
            else if ( tail == 0 )
            {
                  root->setFirstChild(nodes[i]);
                  tail = root->getFirstChild();
            }
            else
            {
                  tail->setNextSibling(nodes[i]);
                  tail = tail->getNextSibling();
            }
 
            if( tail )  // RK: I cannot fathom why this missing check
didn't bite anyone else...
            {
                  // Chase tail to last sibling, 
                  //    but stop if the tail's sibling is in nodes
                  RefAST node;
                  while (node = tail->getNextSibling()) {
                        bool found = false;
                        for (unsigned int j=0; j<nodes.size(); j++) {
                              if ((i != j) && (node == nodes[j])) {
                                    found = true;
                                    break;
                              } // if
                        } // for
                        if (found)
                              break; // stop further traversal. We
either have dealt with this node, 
 
//  or will still deal with it.
                        tail = node;
                  }
            }
      }
 
      return root;
}
 
 
PS: this message is a re-post, because it looks like my first message
didn't go through. (Haven't subscribed at that time yet).
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20041230/45946ec0/attachment-0001.html
From ric.klaren at gmail.com  Thu Dec 30 06:31:16 2004
From: ric.klaren at gmail.com (Ric Klaren)
Date: Thu Dec 30 06:31:21 2004
Subject: [antlr-interest] Bug in ASTFactory.cpp, version 2.7.3
In-Reply-To: <BAY17-DAV58458CACD5B380B044635BA9C0@phx.gbl>
References: <BAY17-DAV58458CACD5B380B044635BA9C0@phx.gbl>
Message-ID: <bc607a4e0412300631581e92b9@mail.gmail.com>

On Thu, 30 Dec 2004 08:26:16 -0500, Waldemar Sauer
<waldemarsauer@hotmail.com> wrote:
> I am bumping into some infinite loops in ASTFactory.cpp, and I was wondering
> if this is a bug in that code, or if there is maybe something about the
> antlr grammar that I'm not understanding. I think rather the former, because
> the compiled compiler should never run into an infinite loop, but rather
> cast exceptions if there are problems that it is experiencing. 

The basic problem is that the current tree building does not work
reliable in cases like this when your touching the tree while it is
being built. When you want to do something like this you need to turn
off tree construction on the rule or on the alternative of the rule
and construct the tree for that part completely yourself.

> One grammar fragment that is causing this is as follows: 
> 
> primaryExpr: 
> 
>         literal_value 
> 
>       | id:ident (ap:actualParams)? { 

Of the top of my head suffix the | with a ! and you should have the
right behaviour.

>             if (#ap.get() != NULL) { 
> 
>                   #primaryExpr = #([MEM_CALL, "MEM_CALL"], #id, #ap); 
> 
>             } else { 
> 
>                   #primaryExpr = #id; 
> 
>             } // if 
> 
>         } 
...
> Like I said, I've seen this problem before, and usually there is a way I can
> get out of it by redefining what I would like to be doing, just in this
> case, I haven't found the workaround in the grammar yet. 

See above...

> I resolved the issue by patching the ASTFactory::make code to check for this
> condition (see end of posting), but I need someone to look at the code, and
> say if it is the right thing to do, or if there is an issue with my
> definition of the grammar. 

It is indeed an option to do this. 3.0 might do this per default. I
recall discussing it at least.... So far no plans exist to change this
for the 2.7 series.

Cheers,

Ric
From ric.klaren at gmail.com  Thu Dec 30 07:04:46 2004
From: ric.klaren at gmail.com (Ric Klaren)
Date: Thu Dec 30 07:04:48 2004
Subject: [antlr-interest] FEATURE REQUEST: continued and memory/speed
	issues
In-Reply-To: <20041230075419.77667.qmail@web54707.mail.yahoo.com>
References: <bc607a4e0412290426661e74bc@mail.gmail.com>
	<20041230075419.77667.qmail@web54707.mail.yahoo.com>
Message-ID: <bc607a4e04123007047a39f56c@mail.gmail.com>

On Wed, 29 Dec 2004 23:54:19 -0800 (PST), Akhilesh Mritunjai
<virtualaspirin@yahoo.com> wrote:
> Infact a lot of methods will need to be made virtual.
> For our project we needed a custom AST class with
> parent pointer. The standard method of making a custom
> factory class failed due to lack of virtual functions
> and now we are doing special dirty work in
> setNextSibling(), setFirstChild() functions of the
> custom AST class.

Being a bit more specific might be helpfull. The ASTFacotry does a lot
of non factory stuff like tree building basically I can make
everything virtual and provide all the rope to potentially hang
yourself ;) I guess I'll do that when I'm back at my  home...

> Additionally, I'd request you to make tokenNames and
> getTokenName variable/method in generated parser file
> as static (like in java code). Right now there is no
> way to access these methods without instantiating the
> parser (and lexer and zillion things), which seems a
> little painful for printing out just a token name in a
> debug statements.

Ack good you remind me. Had this request before but forgot about it.
Bit of a hectic time at the moment for me so I don't have too much
'antlr-time'. I'll see if I can change that for 2.7.5 if changes are
too big I'll probably make the changes for 2.7.6 in that case keep an
eye on snapshot releases to see when it's added (and remind me if
necessary)

> I'd second the request for moving most functions in
> header files for better inlining. We have made a good
> big grammar file and generated both Java and C++
> parser from it. On an 8 MB input file, the Java parser
> consumed about __33%__LESS__ memory (Java 217 MB / C++
>  372 MB, figures include JVM size, taken straight from
> /proc/<PID>/status/VmSize) and is TWICE as fast (Java
> 33.4 sec, C++ 68 sec). Compilers used were :
> * Java : Sun JDK 1.5 for RH linux 9.0
> * C++ : GNU gcc 3.4.3 for RH linux 9.0.
>   Flags used : -O3 -fexceptions -ffast-math
> -march=pentium4 -fexpensive-optimizations

Using more inlining might probably increase the memory footprint.
Results in the past have shown that it really depends on the grammar
wether Java/C++ performs better (at least in the past it was like
that) The C++ version has performace issues (but so has the java one)
It would take really structural changes to improve things. Inlining
changes usually are usually low priority for me. If you can tell me
which specific ones are the main problems I'll change them. (I'm low
on time so the more specific you are the easier and faster I can make
changes. I don't go on 'random' change sprees short before a release)

Tinkering with optimization options might give some gain (-O3
-fexpensive-optimiaztions etc. might not be optimal for your case)
Real gains for C++ can be gotten by using flex as lexer but that also
depends on your grammar.

Cheers,

Ric
From parrt at cs.usfca.edu  Thu Dec 30 08:55:16 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Dec 30 09:08:28 2004
Subject: [antlr-interest] uh, ok,
	so mailman is dropping vastquantities of mail for me
In-Reply-To: <000001c4ee52$a5fc4980$0500a8c0@nigel>
References: <000001c4ee52$a5fc4980$0500a8c0@nigel>
Message-ID: <94862C44-5A83-11D9-B42D-000393BB647E@cs.usfca.edu>


On Dec 30, 2004, at 1:33 AM, Nigel Sheridan-Smith wrote:

>
>> -----Original Message-----
>> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
>> bounces@antlr.org] On Behalf Of Arnar Birgisson
>> Sent: Thursday, 30 December 2004 7:29 PM
>> To: antlr-interest@antlr.org; parrt@cs.usfca.edu
>> Subject: Re: [antlr-interest] uh, ok, so mailman is dropping
>> vastquantities of mail for me
>>
>>
>>> and write everything I use.  Frustration at maximum. :(
>>
>> Did you write your spam-filter? *grin*
>>
>
> Technically, he did!
>
> He is a partner in the company at least :)

Correct.  Thing works great.  I was getting 1500 spam per day (it tells 
me) and now I get very little; only spammers that respond to the 
challenge and I get one and two from them.

I'm 99% sure that the senders of the missnig mail are either not human, 
don't respond to my challenge, or their spam filter blocks my challenge 
email. ;)  It wasn't a problem before because the email came from the 
list not individual humans.

Either way, I've subscribed with a new email address that is 
unchallenged by knowspam.net (which does work precisely as advertised! 
<snicker>).

Ter



From parrt at cs.usfca.edu  Thu Dec 30 08:57:04 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Dec 30 09:08:32 2004
Subject: [antlr-interest] uh, ok,
	so mailman is dropping vastquantities of mail for me
In-Reply-To: <000a01c4ee5b$fcf70be0$3301a8c0@Black>
References: <000001c4ee52$a5fc4980$0500a8c0@nigel>
	<000a01c4ee5b$fcf70be0$3301a8c0@Black>
Message-ID: <D5281A1E-5A83-11D9-B42D-000393BB647E@cs.usfca.edu>


On Dec 30, 2004, at 2:40 AM, Jim Rudnicki wrote:
>>>> and write everything I use.  Frustration at maximum. :(
>>>
>>> Did you write your spam-filter? *grin*
>>>
>>
>> Technically, he did!
>>
>> He is a partner in the company at least :)
>>
>
> Even better, the challenge response I got scored almost as spam!
>
> X-Spam-Score: 3.429 (MSGID_SPAM_LETTERS,NO_REAL_NAME)
> X-Spam-Level: !!!

Ah ha!  And now we have the answer.  Battling spam systems.  Ugh.  
Hopefully one of the spam solutions I've heard about will start to take 
hold (requires changes to smtp servers).

Ter



From mwisner at reachview.com  Thu Dec 23 11:04:11 2004
From: mwisner at reachview.com (Matt Wisner)
Date: Thu Dec 30 09:10:04 2004
Subject: [antlr-interest] CCCP - Compiler Compiler Challenged Person
Message-ID: <20041223190416.3C62BDC75C@www.antlr.org>

Hi,

I've scanned the ANTLR reference manual and poured over the samples but, for
the life of me, cannot get the simplest "conditional logic" parser/tree
parser working with ANTLR.   I've included an example of the source code I'm
trying to parse/walk along with my defs for my ANTLR parser and tree parser
below.  I've also included the output of getAST().toStringList() where the
"if" is obviously missing.   If anyone can shed some light on the nature of
my problem I would greatly appreciate it.

 

Thanks,

Matt

----------------------------------------------------------------------------
-------------

 

Source file:

 

line 3:4: expecting ASSIGN, found '('

ast:  ( = $var1 "batman" ) ( = $var2 $var1 )

 

Source:

 

$var1 = "batman"

If(1)

{

            $var2 = $var1

}

-----------------------------------------------------------------

 

 

Parser and Tree Parser defs:

 

 

class Parser_g extends Parser;

 

options

{

    k = 2;

    importVocab = RulesLexer;

    exportVocab = RulesParser;

    buildAST = true;

    ASTLabelType = "antlr.CommonAST";

}

 

tokens

{

    LITERAL_include="include";

}

 

{

protected SymbolTable m_symtab = null;

private Logger log = TapCollector.getLogger();

}

 

rulesFile

    :       ( rulesSection )? EOF!

    ;

 

rulesSection

        :   ( statement )*

        ;

 

//--------------------------------

//   ||

//   ||

//  _||_    S t a t e m e n t s

//  \  /       

//   \/

//--------------------------------

 

statement

        :       assignmentStatement          { #statement = #as; }

        |       cs:conditionalStatement         { #statement = #cs; }

        ;

 

assignmentStatement

            :           IDENT ASSIGN^ expression

            ;

 

conditionalStatement

        :       "if"^ LPAREN! expression RPAREN! LCURLY! assignmentStatement
RCURLY!

        ;

 

//----------------------------------

//   ||

//   ||

//  _||_    E x p r e s s i o n s

//  \  /       

//   \/

//----------------------------------

 

expression

            :           ( IDENT | STRING_LITERAL | DECIMAL_LITERAL )

            ;

 

 

//----------------------------------

 

quotedString returns [String qs]

{

    qs = "";

}

    :   sl:STRING_LITERAL

            {

                qs = sl.getText();

                qs = qs.substring(1, qs.length()-1);

            }

    ;

 

 

class TreeParser_g extends TreeParser;

 

options

{

    importVocab = RulesParser;

    exportVocab = Rules;

    buildAST = true;

    ASTLabelType = "antlr.CommonAST";

}

 

{

protected SymbolTable m_symtab = null;

private Logger log = TapCollector.getLogger();

 

private String unquoteQuotedString(String in)

{

    return in.substring(1, in.length()-1);

}

 

}

 

rulesSection returns [SymbolTable symtab]

{

    symtab = new SymbolTable();

    m_symtab = symtab;

}

    :   ( statement )*

    ;

 

statement

        :       assignmentStatement     { log.info("<< asgnStmt >>"); }

        |       ifStatement             { log.info("<< ifStmt   >>"); }

        ;

 

assignmentStatement

{

    String val = "?";

}

    :   #( ASSIGN id:IDENT val=expression )

            {

                log.info("asgnStmt: " + id.getText() + " := " + val);

                try

                {

                    // TODO:  if 'id.getText()' does not start with $|@|%
then throw exception?

                    m_symtab.updateEntry(id.getText(), val);

                }

                catch(Exception mjw_e)

                {

                    log.severe("EXCEPTION: " + mjw_e.toString());

                }

            }

    ;

 

ifStatement

{

    String e = "?";

}

    :   #( LITERAL_if e=expression assignmentStatement)

            {

                log.info("ifStmt: e=" + e);

            }

    ;

 

expression returns [String retval]

{

    retval = "";

    SymbolTableEntry entry = null;

}

    :  (    id:IDENT                

                {

                    try

                    {

                        entry = m_symtab.findEntry(id.getText());

                        if(entry == null)

                        {

                            m_symtab.addEntry(id.getText(), "");

                        }

                        retval = entry.getValue();

                    }

                    catch(Exception mjw_e)

                    {

                        log.severe("Exception: " + mjw_e.toString());

                    }

                }

        |   retval=quotedString

        |   dc:DECIMAL_LITERAL    

                {

                    retval = dc.getText().toString(); 

                }

        )

    ;

 

quotedString returns [String qs]

{

    qs = "";

}

    :   sl:STRING_LITERAL

            {

                qs = sl.getText();

                qs = qs.substring(1, qs.length()-1);

            }

    ;

 

 

________________________________________-

Matt Wisner

ReachView Technologies Inc.

mwisner@reachview.com

Yahoo! IM: reachwisner

office: 972.910.7447

 

"There are no problems, only solutions."

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20041223/8cd1c511/attachment-0001.html
From waldemarsauer at hotmail.com  Thu Dec 23 23:57:58 2004
From: waldemarsauer at hotmail.com (Waldemar Sauer)
Date: Thu Dec 30 09:10:46 2004
Subject: [antlr-interest] Bug in ASTFactory.cpp, version 2.7.3
Message-ID: <BAY17-DAV632A5451178F0DAA9D4B2BAA60@phx.gbl>

Hi there
 
I am bumping into some infinite loops in ASTFactory.cpp, and I was
wondering if this is a bug in that code, or if there is maybe something
about the antlr grammar that I'm not understanding. I think rather the
former, because the compiled compiler should never run into an infinite
loop, but rather cast exceptions if there are problems that it is
experiencing.
 
One grammar fragment that is causing this is as follows:
primaryExpr:
        literal_value 
      | id:ident (ap:actualParams)? {
            if (#ap.get() != NULL) {
                  #primaryExpr = #([MEM_CALL, "MEM_CALL"], #id, #ap);
            } else {
                  #primaryExpr = #id;
            } // if
        }
      // array index, post-increment, post-decrement, typeof, checked,
unchecked, and
      // new.
      //    new has it's own challenges, in that we have to call
"release" when
      //    the object goes out of scope.
      ;
 
actualParams!: LPAREN (apl:actualParamList)? RPAREN {
      #actualParams = #([APARAMS, "APARAMS"], #apl);
};
actualParamList: expression (COMMA^ expression)*
 
Like I said, I've seen this problem before, and usually there is a way I
can get out of it by redefining what I would like to be doing, just in
this case, I haven't found the workaround in the grammar yet.
 
It seems as though the "#primaryExpr = #([MEM_CALL ." expression is
generating a list of AST nodes by using the ASTArray::add function to
add AST nodes to itself as the compiled code of the above statement
demonstrates:
      primaryExpr_AST =
ANTLR_USE_NAMESPACE(antlr)RefAST(astFactory->make((new
ANTLR_USE_NAMESPACE(antlr)ASTArray(3))->add(astFactory->create(MEM_CALL,
"MEM_CALL"))->add(id_AST)->add(ap_AST)));
The right sibling of the id_AST node is the ap_AST node by the time
ASTFactory::make is called. ASTFactory::make then has code that turns
the nodes in the list (nodes parameter to ASTFactory::make) into
siblings of a tree node (local parameter 'root'). The problem is that
ap_AST becomes it's own right sibling, and the code that searches for
the last sibling in the list ("// RK: I cannot fathom why this missing
check didn't bite anyone else") then runs into an infinite loop.
 
I resolved the issue by patching the ASTFactory::make code to check for
this condition (see end of posting), but I need someone to look at the
code, and say if it is the right thing to do, or if there is an issue
with my definition of the grammar.
 
Thanks in advance
 - Waldemar
 
 
 
----------------- 8< -----------------------------------------
/** Make a tree from a list of nodes.  The first element in the
 * array is the root.  If the root is null, then the tree is
 * a simple list not a tree.  Handles null children nodes correctly.
 * For example, make(a, b, null, c) yields tree (a b c).  make(null,a,b)
 * yields tree (nil a b).
 */
RefAST ASTFactory::make(ANTLR_USE_NAMESPACE(std)vector<RefAST>& nodes)
{
      if ( nodes.size() == 0 )
            return RefAST(nullASTptr);
 
      RefAST root = nodes[0];
      RefAST tail = RefAST(nullASTptr);
 
      if( root )
            root->setFirstChild(RefAST(nullASTptr));  // don't leave any
old pointers set
 
      // link in children;
      for(unsigned int i = 1; i < nodes.size(); i++ )
      {
            if ( nodes[i] == 0 )          // ignore null nodes
                  continue;
 
            if ( root == 0 )              // Set the root and set it up
for a flat list
                  root = tail = nodes[i];
            else if ( tail == 0 )
            {
                  root->setFirstChild(nodes[i]);
                  tail = root->getFirstChild();
            }
            else
            {
                  tail->setNextSibling(nodes[i]);
                  tail = tail->getNextSibling();
            }
 
            if( tail )  // RK: I cannot fathom why this missing check
didn't bite anyone else...
            {
                  // Chase tail to last sibling, 
                  //    but stop if the tail's sibling is in nodes
                  RefAST node;
                  while (node = tail->getNextSibling()) {
                        bool found = false;
                        for (unsigned int j=0; j<nodes.size(); j++) {
                              if ((i != j) && (node == nodes[j])) {
                                    found = true;
                                    break;
                              } // if
                        } // for
                        if (found)
                              break; // stop further traversal. We
either have dealt with this node, or will still deal with it.
                        tail = node;
                  }
            }
      }
 
      return root;
}
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20041224/3031b591/attachment-0001.html
From sriyansa at gmail.com  Mon Dec 27 02:14:47 2004
From: sriyansa at gmail.com (Sriyansa)
Date: Thu Dec 30 09:10:53 2004
Subject: [antlr-interest] Parsing a continous stream of data ...
Message-ID: <41CFE097.7070006@gmail.com>

Hi,

I am writing a component which will parse a continous stream of data on 
the basis of a certain schema and give out a stream of tokens to consume 
(very much in the lines of what a SAX parser does with a XML stream). In 
all the samples I have come across ANTLR seems to be requiring data in 
one shot. Is it possible to use ANTLR to create a lexer which takes in a 
continous streaming input? Any pointers/examples of such an usage ??

Thanks,
Sriyansa
From dcaton at shorelinesoftware.com  Thu Dec 30 09:31:17 2004
From: dcaton at shorelinesoftware.com (Don Caton)
Date: Thu Dec 30 09:31:34 2004
Subject: [antlr-interest] FEATURE REQUEST: continued and memory/speedissues
In-Reply-To: <bc607a4e04123007047a39f56c@mail.gmail.com>
Message-ID: <1104427832.8387@mx9.mysite4now.com>


> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Ric Klaren
> Sent: Thursday, December 30, 2004 10:05 AM
> To: Akhilesh Mritunjai
> Cc: antlr-interest@antlr.org
> Subject: Re: [antlr-interest] FEATURE REQUEST: continued and 
> memory/speedissues
> 
> I can make everything virtual and provide all the rope to 
> potentially hang yourself ;) I guess I'll do that when I'm 
> back at my  home...

Please, NO!  Do something like:

  #define ANTLR_FACTORY_VIRTUAL

  #ifdef ANTLR_FACTORY_VIRTUAL
     #define FACTORY_VIRTUAL virtual
  #else
     #define FATORY_VIRTUAL
  #endif

> Using more inlining might probably increase the memory footprint.
> Results in the past have shown that it really depends on the 
> grammar wether Java/C++ performs better (at least in the past 
> it was like

Actually it's just the opposite in many cases.  Take a look at the code in
CommonAST.cpp.  Virtually all of the methods do nothing other than set or
return the value of the associated member variable.  If these were inlined,
the compiler could optimize them all away.  There's no point at all in
generating a call to getText() when it does nothing more than return the
contents of "text".  If this was inlined, the compiler would just generate
the code to access "text" directly.

The same thing applies to the CommonAST constructors.  They do nothing
except initialize member variables and call the BaseAST() constructor (which
does NOTHING!).  Here again, the compiler could optimize away the
unnecessary calls.  And the call to text("") in the default CommonAST
constructor is unnecessary because text is a std::string and it already
initializes itself.  The compiler could also optimize away the do-nothing
destructor.

BaseAST.cpp is nearly as bad.  The constructors do nothing but call the
AST() constructor, which does nothing except initialize the "ref" member (at
least this one is inline).  

> that) The C++ version has performace issues (but so has the 
> java one) It would take really structural changes to improve 
> things. Inlining changes usually are usually low priority for 
> me. If you can tell me which specific ones are the main 
> problems I'll change them. (I'm low on time so the more 

The C++ version has performance issues because it doesn't allow the compiler
to throw away all the unnecessary code.  The fact that all these unnecessary
calls are virtual method calls just makes it that much worse.  There's no
need for the methods to be virtual if you aren't subclassing CommonAST, so
the virtual keyword should be changed to a #define.

Inlining this stuff actually decreases the memory footprint because you're
eliminating unnecessary code, and as a result it's faster.  Much faster.  I
saw a serious performace increase when I made these simple changes in my
code.  They aren't architectural changes, they're almost trivial.  You're
not really even changing any code, you're just letting the compiler do a
better job.  You could probably do away with most every cpp file in Antlr.
Any decent compiler isn't going to inline large methods, so there's no
drawback.  And you eliminate the problems of building a runtime DLL.

Don


From nbsherid at secsme.org.au  Thu Dec 30 12:38:47 2004
From: nbsherid at secsme.org.au (Nigel Sheridan-Smith)
Date: Thu Dec 30 12:38:51 2004
Subject: [antlr-interest] CCCP - Compiler Compiler Challenged Person
In-Reply-To: <20041223190416.3C62BDC75C@www.antlr.org>
Message-ID: <000401c4eeaf$8fed2f30$0500a8c0@nigel>

  

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Matt Wisner
Sent: Friday, 24 December 2004 6:04 AM
To: antlr-interest@antlr.org
Subject: [antlr-interest] CCCP - Compiler Compiler Challenged Person

 

Hi,

I've scanned the ANTLR reference manual and poured over the samples but, for
the life of me, cannot get the simplest "conditional logic" parser/tree
parser working with ANTLR.   I've included an example of the source code I'm
trying to parse/walk along with my defs for my ANTLR parser and tree parser
below.  I've also included the output of getAST().toStringList() where the
"if" is obviously missing.   If anyone can shed some light on the nature of
my problem I would greatly appreciate it.

 

Are you on the list? It looks like you missed this one.

 

http://www.antlr.org/pipermail/antlr-interest/2004-December/010803.html

 

Again, either change your "If" statement to lower-case, or turn off
case-sensitivity with the "caseSensitive=false" in the lexer options.

 

Nigel

 

 

--
Nigel Sheridan-Smith
PhD research student

Faculty of Engineering
University of Technology, Sydney
Phone: 02 9514 7946
Fax: 02 9514 2435



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20041231/1441c70e/attachment.html
From parrt at cs.usfca.edu  Thu Dec 30 12:50:07 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Dec 30 12:44:03 2004
Subject: [antlr-interest] CCCP - Compiler Compiler Challenged Person
In-Reply-To: <000401c4eeaf$8fed2f30$0500a8c0@nigel>
References: <000401c4eeaf$8fed2f30$0500a8c0@nigel>
Message-ID: <634EB1C8-5AA4-11D9-9F97-000A95891192@cs.usfca.edu>


On Dec 30, 2004, at 12:38 PM, Nigel Sheridan-Smith wrote:
> Are you on the list? It looks like you missed this one?

I think that's my fault as I went through the "pending" list for 
antlr-interest and approved some stuff.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!



From mwisner at reachview.com  Thu Dec 30 12:55:40 2004
From: mwisner at reachview.com (Matt Wisner)
Date: Thu Dec 30 12:56:08 2004
Subject: [antlr-interest] CCCP - Compiler Compiler Challenged Person
In-Reply-To: <634EB1C8-5AA4-11D9-9F97-000A95891192@cs.usfca.edu>
Message-ID: <20041230205606.C35B4DCC39@www.antlr.org>


Terence, Nigel,

I am on the list and Nigel I did get your reply pointing out my "If" instead
of "if" and that the (tree)parser -IS- case-sensitive.

The "if" in my post was automatically capitalized by my MS Outlook;
Outlook's AI module must be out-of-date ;-)

Due to a deadline I have stopped developing my language emulator using ANTLR
and am finishing the rest (what equates to the tree parser) by hand.    I'm
still making use of ANTLR's Lexer and Parser :)  Once my project is done and
my customer is happy (and I have some spare time) I want to try to finish
things with ANTLR.

So please consider this thread (and any others started by me) deferred until
such time I can resume.

Thanks for the  follow-up.

-Matt



 

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Terence Parr
> Sent: Thursday, December 30, 2004 2:50 PM
> To: ANTLR Interest
> Subject: Re: [antlr-interest] CCCP - Compiler Compiler Challenged Person
> 
> 
> On Dec 30, 2004, at 12:38 PM, Nigel Sheridan-Smith wrote:
> > Are you on the list? It looks like you missed this one.
> 
> I think that's my fault as I went through the "pending" list for
> antlr-interest and approved some stuff.
> 
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!
> 
> 



From parrt at cs.usfca.edu  Thu Dec 30 17:38:05 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Dec 30 17:32:01 2004
Subject: [antlr-interest] posted info on v3.0 attribute mechanism
Message-ID: <9DE81274-5ACC-11D9-9F97-000A95891192@cs.usfca.edu>

Howdy,

Been thinking about the new attribute mechanism:

http://www.antlr.org/blog/antlr3/rewrite.tml

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!



From jeremy.rayner at gmail.com  Fri Dec 31 05:24:20 2004
From: jeremy.rayner at gmail.com (Jeremy Rayner)
Date: Fri Dec 31 05:24:24 2004
Subject: [antlr-interest] java.g forks
Message-ID: <90a60e7604123105243c780e14@mail.gmail.com>

Hi there antlr-interest folk,
  First a bit of background... I'm currently working on the new groovy grammar
( http://groovy.codehaus.org ) and we're looking to replace the
existing hand-rolled
grammar with a more complete form.

  I'm currently looking at the 'java.g' file and it's many cousins, trying to
establish the best basis upon which to build the groovy grammar.
  We have an initial proposal of features added to an early 1.3 grammar,
but I feel that moving to a stable 1.5 grammar early on would be of benefit
to all. (Save the later pain...)

  I have noted the excellent work done by Terence, Matt Quail, 
Michael Stahl and Michael Studman. It does appear that there are
currently three live versions of the grammar, with only taste and
functionality between them.

  Terence very kindly pointed me at this analysis of the two 1.5 grammars
by Andy Tripp...
  http://www.antlr.org/pipermail/antlr-interest/2004-October/009742.html
  The vibe I am getting is that Michael Studman's work will become the trunk 
revision of the java.g file.

  It was all getting a little confusing, so I've tried to put the
current state of
java.g into diagrammatical form.

  http://groovy.javanicus.com/java-g.png

I guess I've got three questions

1) Is it generally accepted that Michael Studman's grammar will become core, or
is Michael Stahl's grammar that little bit more tasteful (and flexible)

2) Will the Java1.3 grammar continue, or will a firm decision be made soon; 
that you have one true java.g file again.

3) Do you like my pretty diagram :-)


Nice to meet you all,

jez.

P.S. As a footnote, I tried to create a Java1.5 language recognizer
myself using
Metsker's bpwj API and the preview JLSv3 spec last month (
http://tinyurl.com/46ugp )
It is amazing how much of the syntax chapter of the JLS is no longer
implementable,
instead it appears that since JLSv2 the syntax in chapter18 is a mix
of implementable
grammar and exposition grammar.  I've lodged a few specific issues
with their feedback
forms, I hope Sun takes the time to ensure that JLSv3 chapter 18 is
complete + correct.
-- 
http://javanicus.com/blog2
From parrt at cs.usfca.edu  Fri Dec 31 16:44:45 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Dec 31 16:38:42 2004
Subject: [antlr-interest] yet another big "blog" update regarding attribute
	handling
Message-ID: <54E1540C-5B8E-11D9-9F97-000A95891192@cs.usfca.edu>

Howdy,

I spent all day writing up more thoughts and things are just about 
crystalized in my mind.  Very nice consistent syntax with lots of power 
shall be ours!   I left the text as a semi-organized stream of 
consciousness; the lower you go, though, the closer to my conclusions 
you will get ;)

http://www.antlr.org/blog/antlr3/rewrite.tml

Now to implement.  Could take a few days next week.

Comments?  Let 'em rip!

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!



