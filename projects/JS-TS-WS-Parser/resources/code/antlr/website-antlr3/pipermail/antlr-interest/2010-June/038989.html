<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Comment parsing at beginning of file
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Comment%20parsing%20at%20beginning%20of%20file&In-Reply-To=%3C4C1A9371.8000203%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="038990.html">
   <LINK REL="Next"  HREF="038991.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Comment parsing at beginning of file</H1>
    <B>Nathan Eloe</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Comment%20parsing%20at%20beginning%20of%20file&In-Reply-To=%3C4C1A9371.8000203%40gmail.com%3E"
       TITLE="[antlr-interest] Comment parsing at beginning of file">powerofazure at gmail.com
       </A><BR>
    <I>Thu Jun 17 14:28:17 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="038990.html">[antlr-interest] disregard the previous mail
</A></li>
        <LI>Next message: <A HREF="038991.html">[antlr-interest] Slight mismatch between real and expected gunit	results
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38989">[ date ]</a>
              <a href="thread.html#38989">[ thread ]</a>
              <a href="subject.html#38989">[ subject ]</a>
              <a href="author.html#38989">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hello,

I'm working on a tree grammar that accepts the Bash language and have
run across the current problem:

Comments in bash are started by the &quot;#&quot; symbol.  From man bash:
&quot;[...] a word beginning with # causes that word and all remaining
characters on that line to be ignored.&quot;

As such, I've added the following token to my file:

COMMENT
    :   (EOL|BLANK) '#' ~('\n'|'\r')* (EOL|EOF){$channel=HIDDEN;}
    ;

The EOL was put in to allow vertain parameter expansions that take the form:

${#param}
${name#word}
${name##word}

Before I tried to handle these cases, my test cases handled comments at
the beginning of files.  However, now it cannot.

What I need is either a semi-graceful way to either tell the token it
needs to be at the beginning of a line (including at the start of the
file) or something to add that it needs to be at the beginning of the file.

I've searched MarkMail and the internet, but everything I've come up
with (semantic predicates for position, etc, etc) will only work for
parser rules, and since I'm at the beginning of the file I can't emit a
beginning of line token to fix the problem.

Also, this will eventually be using the C runtime (right now I'm
outputting it in java so I can test the grammar with gunit and the
ANTLRworks debugger).

Thanks,
Nathan
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.14 (Darwin)
Comment: Using GnuPG with Mozilla - <A HREF="http://enigmail.mozdev.org/">http://enigmail.mozdev.org/</A>

iEYEARECAAYFAkwak3AACgkQFpoRlVgtqKZ0+QCbB5hLxL2S32RYolqE/UunFOSW
jZgAniHHEV3Z1Od0fEoPYCs8ggJiD5A6
=r4yz
-----END PGP SIGNATURE-----
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="038990.html">[antlr-interest] disregard the previous mail
</A></li>
	<LI>Next message: <A HREF="038991.html">[antlr-interest] Slight mismatch between real and expected gunit	results
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38989">[ date ]</a>
              <a href="thread.html#38989">[ thread ]</a>
              <a href="subject.html#38989">[ subject ]</a>
              <a href="author.html#38989">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
