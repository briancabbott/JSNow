<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Problem to build AST (kind of reverse AST)	(Jesse McGrew)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Problem%20to%20build%20AST%20%28kind%20of%20reverse%20AST%29%0A%09%28Jesse%20McGrew%29&In-Reply-To=%3C002701cd845f%2401bd38b0%240537aa10%24%40entrib.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="045122.html">
   <LINK REL="Next"  HREF="045124.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Problem to build AST (kind of reverse AST)	(Jesse McGrew)</H1>
    <B>Atul Dambalkar</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Problem%20to%20build%20AST%20%28kind%20of%20reverse%20AST%29%0A%09%28Jesse%20McGrew%29&In-Reply-To=%3C002701cd845f%2401bd38b0%240537aa10%24%40entrib.com%3E"
       TITLE="[antlr-interest] Problem to build AST (kind of reverse AST)	(Jesse McGrew)">atul at entrib.com
       </A><BR>
    <I>Mon Aug 27 07:19:40 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="045122.html">[antlr-interest] Is www.antlr.org down?
</A></li>
        <LI>Next message: <A HREF="045124.html">[antlr-interest] confluence / mysql help
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45123">[ date ]</a>
              <a href="thread.html#45123">[ thread ]</a>
              <a href="subject.html#45123">[ subject ]</a>
              <a href="author.html#45123">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Aurlien,

 

I don't think if it's possible for Antlr to generate the tree structure you
want. Simply because, there is some semantics involved here. You will have
to keep track of the package name seen earlier in the parsing to append the
respective data name nodes. You either will have to tweak your grammar to
chain the package along with data nodes or do another in-memory pass on the
current generated AST to turn into the way you want it.

 

Also cc'ing it to the group so that if anyone has any other comments.

 

HTH,

 

-Atul

 

From: Aurelien Thiriet [mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">thiriet.aurelien at gmail.com</A>] 
Sent: Monday, August 27, 2012 1:20 PM
To: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">atul at entrib.com</A>
Subject: Re: [antlr-interest] Problem to build AST (kind of reverse AST)
(Jesse McGrew)

 

Hi Atul,

Thanks for your interest.


This is the grammar I start with to parse :
&quot;
package1 data11;
package1 data12;

package2 data21;
package2 data22;
&quot;

&quot;
grammar myDebug;

options
{ 
    output=AST;
}

tokens
{
    DOCUMENT;
    PACKAGE;
    PACKAGENAME;
    PACKAGECONTENT;
    
    DATA;
}

myDocument
    :
        (myData)*
        -&gt; ^(DOCUMENT myData*)
    ;

myData    :
        thePackage=ID  theData=ID ';'
        -&gt; ^(DATA ^(PACKAGE ^(PACKAGENAME $thePackage) ^(PACKAGECONTENT) )
$theData)
    ;


ID  :    ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*
    ;

WS  :   ( ' '
        | '\t'
        | '\r'
        | '\n'
        ) {$channel=HIDDEN;}
    ;
&quot;


With this one this is the output AST : see ExportGrammarForm1.JPG



But I'd like to directly output this AST : see ExportGrammarForm2.JPG








2012/8/27 Atul Dambalkar &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">atul at entrib.com</A>&gt;

Hi Aurelien,

Can you pass the current grammar for parsing following,


package1 data11;
package1 data12;

package2 data21;
package2 data22;

I can give it a try to help.

-Atul


-----Original Message-----
From: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A>
[mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A>] On Behalf Of Aurelien Thiriet
Sent: Monday, August 27, 2012 12:23 PM
To: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>
Subject: Re: [antlr-interest] Problem to build AST (kind of reverse AST)

(Jesse McGrew)

Hi Jesse,


You got it, this is my need.

For sure I could have done it's parsing directly in raw C, but the exemple I
give is a simplified one... the grammar I'm working on is much more complex
but I didn't want to mix problems.

If I could solve this little one first, I would be happy !



Aurelien

&gt;<i> ----------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i> Message: 1
</I>&gt;<i> Date: Fri, 24 Aug 2012 12:46:11 -0700
</I>&gt;<i> From: Jesse McGrew &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">jmcgrew at hansprestige.com</A>&gt;
</I>&gt;<i> Subject: Re: [antlr-interest] Problem to build AST (kind of reverse
</I>&gt;<i>         AST)
</I>&gt;<i> To: antlr-interest &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>&gt;
</I>&gt;<i> Message-ID:
</I>&gt;<i>         &lt;CAJ3AhhXA6A-4TdcRq6cq=
</I>&gt;<i> <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">HQFxQm46CSVfeg8T_vS8_SoqvXhNQ at mail.gmail.com</A>&gt;
</I>&gt;<i> Content-Type: text/plain; charset=ISO-8859-1
</I>&gt;<i>
</I>&gt;<i> It sounds like he just wants to group the AST by the package name
</I>&gt;<i> (first token on the line). So all the &quot;package1&quot; data nodes go in one
</I>&gt;<i> tree, all the &quot;package2&quot; data nodes go in another, etc.
</I>&gt;<i>
</I>&gt;<i> Jesse
</I>&gt;<i>
</I>&gt;<i> On Fri, Aug 24, 2012 at 11:36 AM, Jim Idle &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">jimi at temporal-wave.com</A>&gt; wrote:
</I>&gt;<i> &gt; I can't see why you would want to do this. Perhaps you are asking
</I>&gt;<i> &gt; the wrong question - can you explain what you are trying to achieve,
</I>&gt;<i> &gt; as there may be better ways to achieve what you are trying to do.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Your question as it stands cannot really be answered as you don't
</I>&gt;<i> &gt; say anything about the bounds/cardinality. If your input is always
</I>&gt;<i> &gt; four lines like this, then there is no need for a grammar, as a few
</I>&gt;<i> &gt; lines of C would do it. If there is an unlimited set, then how do
</I>&gt;<i> &gt; you determine what swaps with what?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Jim
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; -----Original Message-----
</I>&gt;<i> &gt;&gt; From: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A> [mailto:antlr-interest-
</I>&gt;<i> &gt;&gt; <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">bounces at antlr.org</A>] On Behalf Of Aurelien Thiriet
</I>&gt;<i> &gt;&gt; Sent: Friday, August 24, 2012 2:42 AM
</I>&gt;<i> &gt;&gt; To: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>
</I>&gt;<i> &gt;&gt; Subject: [antlr-interest] Problem to build AST (kind of reverse
</I>&gt;<i> &gt;&gt; AST)
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Hi,
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I'm new to ANTLR (I've read the books by the way ;)).
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I'd like to parse and build AST for this kind of file :
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; &quot;
</I>&gt;<i> &gt;&gt; package1 data11;
</I>&gt;<i> &gt;&gt; package1 data12;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; package2 data21;
</I>&gt;<i> &gt;&gt; package2 data22;
</I>&gt;<i> &gt;&gt; &quot;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Which means  data11 and data12 belongs to package1, data21 and
</I>&gt;<i> &gt;&gt; data22 belongs to package2.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Its very easy to build this kind of AST :
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; (DOCUMENT (DATA ( PACKAGE(package1) data11) DATA (
</I>&gt;<i> &gt;&gt; PACKAGE(package1)
</I>&gt;<i> &gt;&gt; data12) DATA ( PACKAGE(package2) data21) DATA ( PACKAGE(package1)
</I>&gt;<i> &gt;&gt; data22)))
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; But my point is to reverse it like this :
</I>&gt;<i> &gt;&gt; (DOCUMENT ( PACKAGE (package1 DATA(data11) DATA(data12)))    ( PACKAGE
</I>&gt;<i> &gt;&gt; (package2 DATA(data21) DATA(data22)))   )
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; How would you write the grammar to perform this AST ?
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I've almost succed using many  java code into grammar file, but I'd
</I>&gt;<i> &gt;&gt; like to use grammar only if possible.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Thanks a lot
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Aur?lien
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; List: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">http://www.antlr.org/mailman/listinfo/antlr-interest</A>
</I>&gt;<i> &gt;&gt; Unsubscribe:
</I>&gt;<i> &gt;&gt; <A HREF="http://www.antlr.org/mailman/options/antlr-interest/your-">http://www.antlr.org/mailman/options/antlr-interest/your-</A>
</I>&gt;<i> &gt;&gt; email-address
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; List: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">http://www.antlr.org/mailman/listinfo/antlr-interest</A>
</I>&gt;<i> &gt; Unsubscribe:
</I>&gt;<i> <A HREF="http://www.antlr.org/mailman/options/antlr-interest/your-email-address">http://www.antlr.org/mailman/options/antlr-interest/your-email-address</A>
</I>&gt;<i>
</I>
List: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">http://www.antlr.org/mailman/listinfo/antlr-interest</A>
Unsubscribe:
<A HREF="http://www.antlr.org/mailman/options/antlr-interest/your-email-address">http://www.antlr.org/mailman/options/antlr-interest/your-email-address</A>

 

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="045122.html">[antlr-interest] Is www.antlr.org down?
</A></li>
	<LI>Next message: <A HREF="045124.html">[antlr-interest] confluence / mysql help
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45123">[ date ]</a>
              <a href="thread.html#45123">[ thread ]</a>
              <a href="subject.html#45123">[ subject ]</a>
              <a href="author.html#45123">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
