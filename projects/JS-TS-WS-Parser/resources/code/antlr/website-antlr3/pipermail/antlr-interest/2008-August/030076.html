<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Lazy load of CommonTokenStream??
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Lazy%20load%20of%20CommonTokenStream%3F%3F&In-Reply-To=%3C1DEE44DB-426C-4786-95F4-5E85749AB772%40classdump.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030073.html">
   <LINK REL="Next"  HREF="030079.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Lazy load of CommonTokenStream??</H1>
    <B>Kay R&#246;pke</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Lazy%20load%20of%20CommonTokenStream%3F%3F&In-Reply-To=%3C1DEE44DB-426C-4786-95F4-5E85749AB772%40classdump.org%3E"
       TITLE="[antlr-interest] Lazy load of CommonTokenStream??">kroepke at classdump.org
       </A><BR>
    <I>Sun Aug 17 12:44:50 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="030073.html">[antlr-interest] Lazy load of CommonTokenStream??
</A></li>
        <LI>Next message: <A HREF="030079.html">[antlr-interest] Lazy load of CommonTokenStream??
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30076">[ date ]</a>
              <a href="thread.html#30076">[ thread ]</a>
              <a href="subject.html#30076">[ subject ]</a>
              <a href="author.html#30076">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Aug 17, 2008, at 9:13 PM, Jim Idle wrote:

&gt;&gt;<i>
</I>&gt;&gt;<i> CommonTokenStream buffers all tokens up when it is first used.
</I>&gt;&gt;<i> Unfortunately, size() does not trigger filling the buffer which seems
</I>&gt;&gt;<i> like a bug. I see no reason why it shouldn't fill the buffer, that  
</I>&gt;&gt;<i> is.
</I>&gt;<i>
</I>&gt;<i> I agree. In fact this might well be more intuitive, however we should
</I>&gt;<i> think about any performance impact as this might be the reason it does
</I>&gt;<i> not do this - in the C runtime I can take care of this by flipping
</I>&gt;<i> functions after the first call, but you can't hack that in Java.
</I>

Not sure I understand what you are getting at.
fillBuffer() will set p = 0 when it is first called, thus getting the  
size of the tokens calls fillBuffer() only once.
Actually all other methods that access tokens (with the notable  
exception of get()) perform this check, too, so they all &quot;suffer&quot; from  
that if.

Of course swizzling function pointers is more efficient in that sense,  
you simply move the if out of the way :)

cheers,
-k
-- 
Kay R&#246;pke
<A HREF="http://classdump.org/">http://classdump.org/</A>






</PRE>









































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030073.html">[antlr-interest] Lazy load of CommonTokenStream??
</A></li>
	<LI>Next message: <A HREF="030079.html">[antlr-interest] Lazy load of CommonTokenStream??
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30076">[ date ]</a>
              <a href="thread.html#30076">[ thread ]</a>
              <a href="subject.html#30076">[ subject ]</a>
              <a href="author.html#30076">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
