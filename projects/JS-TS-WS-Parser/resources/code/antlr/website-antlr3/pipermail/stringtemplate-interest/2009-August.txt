From ron.koerner at wincor-nixdorf.com  Mon Aug  3 02:36:13 2009
From: ron.koerner at wincor-nixdorf.com (Koerner, Ron)
Date: Mon, 3 Aug 2009 11:36:13 +0200
Subject: [stringtemplate-interest] How to use variables inside
	formatmodifiers
In-Reply-To: <265be4080907311126j422e0008j4291a6d07ec69839@mail.gmail.com>
References: <265be4080907311022l2f9b56e1y55b7f1f5ded0b03c@mail.gmail.com>
	<265be4080907311106j6106a9b5va1ab48dd87845e7e@mail.gmail.com>
	<4A733503.9060007@temporal-wave.com>
	<265be4080907311126j422e0008j4291a6d07ec69839@mail.gmail.com>
Message-ID: <371853577D3E4A47BA524E160DA7420E011A7ACA@DEEXVS02.wincor-nixdorf.com>

Hi Mohamed,
 
actually it is the philosophy of StringTemplate that templates don't do
calculations other than what is needed for display. So I fear it is not
the right tool for your task, since you require something which builds a
page model (all data displayed on the generated page) from your business
model (all data the application provides) and something which generates
a visible page from the page model.
StringTemplate only performs the latter job. If you want to use ST
anyway you need to build something which takes some userdefined
rules/calculations and generates a page model out of the business model.
 
If you prefer a very dirty hack: create an object like:
 
class Calculator implements Map { public String get(String expr) {
return eval(expr); }  /* implement dummies for the other operations */ }
 
Add a calculator to your page model:
st.setAttribute("calc",new Calculator());
 
Use the calculator in your template:
 
$calc.({$a$+$b$})$
 
Just to make clear: this is a very very dirty hack and violates the
StringTemplate philosophy in ways which could bring the wrath of the
god(s) of model/view-separation upon you or me and may or may not turn
the one who actually implements the above into an appropriate heap of
dust.
Also Terence might not invite you to dinner anymore...
 
Regards,
Ron
 
________________________________

From: stringtemplate-interest-bounces at antlr.org
[mailto:stringtemplate-interest-bounces at antlr.org] On Behalf Of Mohamed
Mansour
Sent: Friday, July 31, 2009 8:27 PM
To: Jim Idle
Cc: stringtemplate-interest at antlr.org
Subject: Re: [stringtemplate-interest] How to use variables inside
formatmodifiers


Hmm, that would be unfortunate. I can't use this kind of approach then.
I am trying to create a generic "Report" where every user can do
whatever they want with it. If they wanted to add 10 to the result to
any variable, they could. But we can't do that with StringTemplate. 

I guess that is the limitation of StringTemplate.

Isn't there any way I can make it work, like a hack? A user can modify a
variable by appending(adding) a number to it. (simply scenario)

Thanks,

-- Mohamed Mansour



On Fri, Jul 31, 2009 at 2:16 PM, Jim Idle <jimi at temporal-wave.com>
wrote:


	Mohamed Mansour wrote: 

		Hello, 

		I have been using StringTemplate to produce stylized
report files. Some variables need to be formatted someway, for example
if I want to uppercase a variable I do, therefore I setup an attribute
renderer:
		$foo;format="uppercase"$

		In my specific case I would need to apply more than one
formatter (more than one attribute renderer for a variable), so I
created many attribute renders and I can process them like:
		$foo;format="uppercase|fixedlength:10:x:R|lowercase"$ If
you notice a modifer could have parameters ( with colons as seen with
fixedlength)

		So if $foo is "123aBc" it will return "XXXX123abc", the
above works perfectly fine

		My main problem is that, some parameters in my format
modifiers need to be ST variables, for example, I would need to add a
number:
		$numA;format="calculate:+:$numB$"$

		If numA = 10, and numB = 5, the formatter will return15.
But my problem is that, it treats the variables as a string doesn't
actually give me the exact value of the variable.

		How can I pass variables in the "format" area?

	Calculations need to be performed before setting the values in
the templates otherwise you are breaking the model/view separation that
StringTemplate is as strict about as it can be. In other words you
should not be trying to do this.
	
	The attribute renderer while powerful, has to be used carefully
so that you do not break this  separation as it is kind of a back door
(the only way to close it would be to implement a generic formatting
engine and get rid of attribute renderers, but that is a lot of code
bloat of course.
	
	Jim
	

	_______________________________________________
	stringtemplate-interest mailing list
	stringtemplate-interest at antlr.org
	http://www.antlr.org/mailman/listinfo/stringtemplate-interest
	
	



-- 
WINCOR NIXDORF International GmbH 
Sitz der Gesellschaft: Paderborn 
Registergericht Paderborn HRB 3507
Gesch?ftsf?hrer: Eckard Heidloff (Vorsitzender), Stefan Auerbach, Dr. J?rgen Wunram
Vorsitzender des Aufsichtsrats: Karl-Heinz Stiller 
Steuernummer: 339/5884/0020 - Ust-ID Nr.: DE812927716 - WEEE-Reg.-Nr. DE44477193

Diese E-Mail enth?lt vertrauliche Informationen. Wenn Sie nicht der richtige Adressat sind oder diese E-Mail irrt?mlich erhalten haben, informieren Sie bitte sofort den Absender und vernichten Sie diese E-Mail. Das unerlaubte Kopieren sowie die unbefugte Weitergabe dieser E-Mail ist nicht gestattet.

This e-mail may contain confidential information. If you are not the intended recipient (or have received this e-mail in error) please notify the sender immediately and destroy this e-mail. Any unauthorised copying, disclosure or distribution of the material in this e-mail is strictly forbidden. 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090803/05e53980/attachment.html 

From ron.koerner at wincor-nixdorf.com  Mon Aug  3 02:44:08 2009
From: ron.koerner at wincor-nixdorf.com (Koerner, Ron)
Date: Mon, 3 Aug 2009 11:44:08 +0200
Subject: [stringtemplate-interest] Fail on undefined property
In-Reply-To: <04C02089-B3A0-4679-9AF9-520008AC748E@cs.usfca.edu>
References: <435563338@web.de><BB5AD78D-C8B9-44D5-A248-28C1172387FC@cs.usfca.edu><86403CA0939415448BCCB83855EFE09AA68489@Bloodymary.ironwillgames.com><408EECFE-9C90-4060-A772-B64359801F56@cs.usfca.edu><B5F1F804-33FA-4614-9E6E-A6151A018735@gmail.com><11ACB9D5-7C4C-481C-9C62-1038749C0376@cs.usfca.edu><F1161CC9-C541-4871-993A-026B7A91EC52@gmail.com>
	<04C02089-B3A0-4679-9AF9-520008AC748E@cs.usfca.edu>
Message-ID: <371853577D3E4A47BA524E160DA7420E011A7AD2@DEEXVS02.wincor-nixdorf.com>

Would a functionality like "fail generation of template if some
variables are undefined" not violate model/view separation?

Actually the model generation should fail and make the decision whether
something is displayable or not.

Regards,
Ron

-----Original Message-----
From: stringtemplate-interest-bounces at antlr.org
[mailto:stringtemplate-interest-bounces at antlr.org] On Behalf Of Terence
Parr
Sent: Friday, July 31, 2009 10:13 PM
To: John D. Mitchell
Cc: String Template
Subject: Re: [stringtemplate-interest] Fail on undefined property

Yeah, I hear that. On the other hand, we already have syntax for this

<x> is mandatory
<if(x)><x><endif> is not mandatory

  verbose, but functionality  already exists ;)

T
On Jul 31, 2009, at 1:11 PM, John D. Mitchell wrote:

> On Jul 31, 2009, at 13:02 , Terence Parr wrote:
>> On Jul 31, 2009, at 1:01 PM, John D. Mitchell wrote:
>>> I haven't followed this thread too closely but in terms of
>>> optionality, one trick would be to add syntactic support for
>>> something like:
>>> <x?> or <x!>
>>
>> that could work but I would prefer to have it on the parameter
>> definitions not the usage:
>>
>> mytemplate(firstname, lastname?) ::= "..."
>
> FWIW, I'm more on the side of "at the point of usage" because I  
> think having the fact be very explicit is a good thing. I.e., when  
> one is reading through the template, having it jump out as different  
> behavior is helpful -- having the same looking thing with two  
> different behaviors just bothers me, I guess.
>
> Hope this helps,
> John
>
>

_______________________________________________
stringtemplate-interest mailing list
stringtemplate-interest at antlr.org
http://www.antlr.org/mailman/listinfo/stringtemplate-interest

-- 
WINCOR NIXDORF International GmbH 
Sitz der Gesellschaft: Paderborn 
Registergericht Paderborn HRB 3507
Gesch?ftsf?hrer: Eckard Heidloff (Vorsitzender), Stefan Auerbach, Dr. J?rgen Wunram
Vorsitzender des Aufsichtsrats: Karl-Heinz Stiller 
Steuernummer: 339/5884/0020 - Ust-ID Nr.: DE812927716 - WEEE-Reg.-Nr. DE44477193

Diese E-Mail enth?lt vertrauliche Informationen. Wenn Sie nicht der richtige Adressat sind oder diese E-Mail irrt?mlich erhalten haben, informieren Sie bitte sofort den Absender und vernichten Sie diese E-Mail. Das unerlaubte Kopieren sowie die unbefugte Weitergabe dieser E-Mail ist nicht gestattet.

This e-mail may contain confidential information. If you are not the intended recipient (or have received this e-mail in error) please notify the sender immediately and destroy this e-mail. Any unauthorised copying, disclosure or distribution of the material in this e-mail is strictly forbidden. 


From m0.interactive at gmail.com  Mon Aug  3 06:36:01 2009
From: m0.interactive at gmail.com (Mohamed Mansour)
Date: Mon, 3 Aug 2009 09:36:01 -0400
Subject: [stringtemplate-interest] How to use variables inside
	formatmodifiers
In-Reply-To: <371853577D3E4A47BA524E160DA7420E011A7ACA@DEEXVS02.wincor-nixdorf.com>
References: <265be4080907311022l2f9b56e1y55b7f1f5ded0b03c@mail.gmail.com> 
	<265be4080907311106j6106a9b5va1ab48dd87845e7e@mail.gmail.com> 
	<4A733503.9060007@temporal-wave.com>
	<265be4080907311126j422e0008j4291a6d07ec69839@mail.gmail.com> 
	<371853577D3E4A47BA524E160DA7420E011A7ACA@DEEXVS02.wincor-nixdorf.com>
Message-ID: <265be4080908030636i7bceae61rd85f7fc1c9028ebf@mail.gmail.com>

Thanks for the reply, I decided to not to implement the calculate method and
place it in my model instead, so if a user needs a new calculation, I would
have to hard code that.
What I am doing is creating a generic reporting tool, previously, for every
financial institution, it requires a specific report to be sent back to the
bank. There are over 50 of them (where each one is a big module of code
itself) and they keep on expanding. I decided, as an experiment, to remove
all the legacy code and use String template which is a single module to do
what the other 50 modules has done. And it is working perfectly.

I was really sad when I wanted to break the model view separation, but I
wanted to dynamically alter the model.

Thanks for all your help! I am going to stick with the strict model / view
separation, and figure out different ways to generically do my task.

Regards,
Mohamed Mansour


On Mon, Aug 3, 2009 at 5:36 AM, Koerner, Ron <ron.koerner at wincor-nixdorf.com
> wrote:

>  Hi Mohamed,
>
> actually it is the philosophy of StringTemplate that templates don't do
> calculations other than what is needed for display. So I fear it is not the
> right tool for your task, since you require something which builds a page
> model (all data displayed on the generated page) from your business model
> (all data the application provides) and something which generates a visible
> page from the page model.
> StringTemplate only performs the latter job. If you want to use ST anyway
> you need to build something which takes some userdefined rules/calculations
> and generates a page model out of the business model.
>
> If you prefer a very dirty hack: create an object like:
>
> class Calculator implements Map { public String get(String expr) { return
> eval(expr); }  /* implement dummies for the other operations */ }
>
> Add a calculator to your page model:
> st.setAttribute("calc",new Calculator());
>
> Use the calculator in your template:
>
> $calc.({$a$+$b$})$
>
> Just to make clear: this is a very very dirty hack and violates the
> StringTemplate philosophy in ways which could bring the wrath of the god(s)
> of model/view-separation upon you or me and may or may not turn the one who
> actually implements the above into an appropriate heap of dust.
> Also Terence might not invite you to dinner anymore...
>
> Regards,
> Ron
>
>  ------------------------------
>  *From:* stringtemplate-interest-bounces at antlr.org [mailto:
> stringtemplate-interest-bounces at antlr.org] *On Behalf Of *Mohamed Mansour
> *Sent:* Friday, July 31, 2009 8:27 PM
> *To:* Jim Idle
> *Cc:* stringtemplate-interest at antlr.org
> *Subject:* Re: [stringtemplate-interest] How to use variables inside
> formatmodifiers
>
> Hmm, that would be unfortunate. I can't use this kind of approach then. I
> am trying to create a generic "Report" where every user can do whatever they
> want with it. If they wanted to add 10 to the result to any variable, they
> could. But we can't do that with StringTemplate.
> I guess that is the limitation of StringTemplate.
>
> Isn't there any way I can make it work, like a hack? A user can modify a
> variable by appending(adding) a number to it. (simply scenario)
>
> Thanks,
>
> -- Mohamed Mansour
>
>
> On Fri, Jul 31, 2009 at 2:16 PM, Jim Idle <jimi at temporal-wave.com> wrote:
>
>>   Mohamed Mansour wrote:
>>
>> Hello,
>> I have been using StringTemplate to produce stylized report files. Some
>> variables need to be formatted someway, for example if I want to uppercase a
>> variable I do, therefore I setup an attribute renderer:
>> $foo;format="uppercase"$
>>
>> In my specific case I would need to apply more than one formatter (more
>> than one attribute renderer for a variable), so I created many attribute
>> renders and I can process them like:
>> $foo;format="uppercase|fixedlength:10:x:R|lowercase"$ If you notice a
>> modifer could have parameters ( with colons as seen with fixedlength)
>>
>> So if $foo is "123aBc" it will return "XXXX123abc", the above works
>> perfectly fine
>>
>> My main problem is that, some parameters in my format modifiers need to be
>> ST variables, for example, I would need to add a number:
>> $numA;format="calculate:+:$numB$"$
>>
>> If numA = 10, and numB = 5, the formatter will return15. But my problem is
>> that, it treats the variables as a string doesn't actually give me the exact
>> value of the variable.
>>
>> How can I pass variables in the "format" area?
>>
>> Calculations need to be performed before setting the values in the
>> templates otherwise you are breaking the model/view separation that
>> StringTemplate is as strict about as it can be. In other words you should
>> not be trying to do this.
>>
>> The attribute renderer while powerful, has to be used carefully so that
>> you do not break this  separation as it is kind of a back door (the only way
>> to close it would be to implement a generic formatting engine and get rid of
>> attribute renderers, but that is a lot of code bloat of course.
>>
>> Jim
>>
>> _______________________________________________
>> stringtemplate-interest mailing list
>> stringtemplate-interest at antlr.org
>> http://www.antlr.org/mailman/listinfo/stringtemplate-interest
>>
>>
> ------------------------------
> WINCOR NIXDORF International GmbH
> Sitz der Gesellschaft: Paderborn
> Registergericht Paderborn HRB 3507
> Gesch?ftsf?hrer: Eckard Heidloff (Vorsitzender), Stefan Auerbach, Dr.
> J?rgen Wunram
> Vorsitzender des Aufsichtsrats: Karl-Heinz Stiller
> Steuernummer: 339/5884/0020 - Ust-ID Nr.: DE812927716 - WEEE-Reg.-Nr.
> DE44477193
>
> Diese E-Mail enth?lt vertrauliche Informationen. Wenn Sie nicht der
> richtige Adressat sind oder diese E-Mail irrt?mlich erhalten haben,
> informieren Sie bitte sofort den Absender und vernichten Sie diese E-Mail.
> Das unerlaubte Kopieren sowie die unbefugte Weitergabe dieser E-Mail ist
> nicht gestattet.
>
> This e-mail may contain confidential information. If you are not the
> intended recipient (or have received this e-mail in error) please notify the
> sender immediately and destroy this e-mail. Any unauthorised copying,
> disclosure or distribution of the material in this e-mail is strictly
> forbidden.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090803/c61875f9/attachment-0001.html 

From parrt at cs.usfca.edu  Mon Aug  3 11:50:01 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 3 Aug 2009 11:50:01 -0700
Subject: [stringtemplate-interest] Fail on undefined property
In-Reply-To: <371853577D3E4A47BA524E160DA7420E011A7AD2@DEEXVS02.wincor-nixdorf.com>
References: <435563338@web.de><BB5AD78D-C8B9-44D5-A248-28C1172387FC@cs.usfca.edu><86403CA0939415448BCCB83855EFE09AA68489@Bloodymary.ironwillgames.com><408EECFE-9C90-4060-A772-B64359801F56@cs.usfca.edu><B5F1F804-33FA-4614-9E6E-A6151A018735@gmail.com><11ACB9D5-7C4C-481C-9C62-1038749C0376@cs.usfca.edu><F1161CC9-C541-4871-993A-026B7A91EC52@gmail.com>
	<04C02089-B3A0-4679-9AF9-520008AC748E@cs.usfca.edu>
	<371853577D3E4A47BA524E160DA7420E011A7AD2@DEEXVS02.wincor-nixdorf.com>
Message-ID: <C2F9519A-94ED-4581-B792-A35B6376A834@cs.usfca.edu>

  it's very convenient to show a value if it's present without  
throwing an error. I will make an option in the next version.
T
On Aug 3, 2009, at 2:44 AM, Koerner, Ron wrote:

> Would a functionality like "fail generation of template if some
> variables are undefined" not violate model/view separation?
>
> Actually the model generation should fail and make the decision  
> whether
> something is displayable or not.
>
> Regards,
> Ron
>
> -----Original Message-----
> From: stringtemplate-interest-bounces at antlr.org
> [mailto:stringtemplate-interest-bounces at antlr.org] On Behalf Of  
> Terence
> Parr
> Sent: Friday, July 31, 2009 10:13 PM
> To: John D. Mitchell
> Cc: String Template
> Subject: Re: [stringtemplate-interest] Fail on undefined property
>
> Yeah, I hear that. On the other hand, we already have syntax for this
>
> <x> is mandatory
> <if(x)><x><endif> is not mandatory
>
>  verbose, but functionality  already exists ;)
>
> T
> On Jul 31, 2009, at 1:11 PM, John D. Mitchell wrote:
>
>> On Jul 31, 2009, at 13:02 , Terence Parr wrote:
>>> On Jul 31, 2009, at 1:01 PM, John D. Mitchell wrote:
>>>> I haven't followed this thread too closely but in terms of
>>>> optionality, one trick would be to add syntactic support for
>>>> something like:
>>>> <x?> or <x!>
>>>
>>> that could work but I would prefer to have it on the parameter
>>> definitions not the usage:
>>>
>>> mytemplate(firstname, lastname?) ::= "..."
>>
>> FWIW, I'm more on the side of "at the point of usage" because I
>> think having the fact be very explicit is a good thing. I.e., when
>> one is reading through the template, having it jump out as different
>> behavior is helpful -- having the same looking thing with two
>> different behaviors just bothers me, I guess.
>>
>> Hope this helps,
>> John
>>
>>
>
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/stringtemplate-interest
>
> -- 
> WINCOR NIXDORF International GmbH
> Sitz der Gesellschaft: Paderborn
> Registergericht Paderborn HRB 3507
> Gesch?ftsf?hrer: Eckard Heidloff (Vorsitzender), Stefan Auerbach,  
> Dr. J?rgen Wunram
> Vorsitzender des Aufsichtsrats: Karl-Heinz Stiller
> Steuernummer: 339/5884/0020 - Ust-ID Nr.: DE812927716 - WEEE-Reg.- 
> Nr. DE44477193
>
> Diese E-Mail enth?lt vertrauliche Informationen. Wenn Sie nicht der  
> richtige Adressat sind oder diese E-Mail irrt?mlich erhalten haben,  
> informieren Sie bitte sofort den Absender und vernichten Sie diese E- 
> Mail. Das unerlaubte Kopieren sowie die unbefugte Weitergabe dieser  
> E-Mail ist nicht gestattet.
>
> This e-mail may contain confidential information. If you are not the  
> intended recipient (or have received this e-mail in error) please  
> notify the sender immediately and destroy this e-mail. Any  
> unauthorised copying, disclosure or distribution of the material in  
> this e-mail is strictly forbidden.
>


From parrt at cs.usfca.edu  Mon Aug  3 12:19:03 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 3 Aug 2009 12:19:03 -0700
Subject: [stringtemplate-interest] sequences and unique numbers
Message-ID: <D2512F07-EF2A-4C2A-98E5-CD54AB06A9F3@cs.usfca.edu>

ST is lacking something I need. For the ANTLR->LLVM example, I need to  
generate unique labels for the assembly code like LLVM IR. Right now,  
I pass in a unique number. Since it's really part of the view, I think  
it's bad to have the model track a unique number and pass it in. On  
the other hand, sequences are difficult to use without side effects.  
Every time you referenced a sequence name, it would increment it. I'm  
uncomfortable with that side effect. still, we need to be able to deal  
with unique label generation.

So, instead of sequence, how about we introduce the notion of unique  
value but with unspecified order or values or whatever. In fact, it  
wouldn't necessarily need to be a number. We could have unique label  
generation directly.

Let's assume for the moment that every reference to <uniq> gives you a  
unique label.   How can we define and reference it?  For example, here  
is how we would generate labels and assembly code for an IF statement:

	<cond>
	brf end<uniq>
	<block>
end<uniq>:

The problem is that we get something like end1 and end2 instead of the  
same label. The solution is to compute a value and hold it for the  
duration of the template, which we can do as a default argument:

if(cond, block, label={end<(uniq)>}) ::= <<
	<cond>
	brf <label>
	<block>
<label>:
 >>

Remember that (uniq) forces the  immediate evaluation and conversion  
to string of the enclosing element. Otherwise, it would use lazy  
evaluation and evaluate uniq twice. So, the solution works.

Now, what is uniq? It turns out we don't need a special syntax or  
mechanism. ST can handle already if we pass in an object with side  
effects:

public class Counter {
	int n = 1;
	public String toString() { return String.valueOf(n++); }
}

Remember, ST assumes no side effects, but it can't stop the programmer  
from passing in something with a side effect.  ST would assume only  
that the counter returns a value. It's up to us to decide what that  
value is. This seems like a hack, but we could return the time value  
back. That is not a side effect-- it just happens to get a different  
value every time we call. You could also look at string tables the  
same way. pass in a different string map and it gives you strings in a  
different language.  ST is assuming only that he gets a value. it's up  
to the model to get the right value.

I'm running this up the flagpole to see what people think.  Is this  
good, bad, or indifferent?

Ter

From ron.koerner at wincor-nixdorf.com  Tue Aug  4 01:16:34 2009
From: ron.koerner at wincor-nixdorf.com (Koerner, Ron)
Date: Tue, 4 Aug 2009 10:16:34 +0200
Subject: [stringtemplate-interest] Fail on undefined property
In-Reply-To: <C2F9519A-94ED-4581-B792-A35B6376A834@cs.usfca.edu>
References: <435563338@web.de><BB5AD78D-C8B9-44D5-A248-28C1172387FC@cs.usfca.edu><86403CA0939415448BCCB83855EFE09AA68489@Bloodymary.ironwillgames.com><408EECFE-9C90-4060-A772-B64359801F56@cs.usfca.edu><B5F1F804-33FA-4614-9E6E-A6151A018735@gmail.com><11ACB9D5-7C4C-481C-9C62-1038749C0376@cs.usfca.edu><F1161CC9-C541-4871-993A-026B7A91EC52@gmail.com><04C02089-B3A0-4679-9AF9-520008AC748E@cs.usfca.edu><371853577D3E4A47BA524E160DA7420E011A7AD2@DEEXVS02.wincor-nixdorf.com>
	<C2F9519A-94ED-4581-B792-A35B6376A834@cs.usfca.edu>
Message-ID: <371853577D3E4A47BA524E160DA7420E011A7CA9@DEEXVS02.wincor-nixdorf.com>

Oh. Maybe I misunderstood the whole thing. Showing a value without throwing an error is of course necessary.
I was just concerned if it is a good thing to check the validity/consistence of a model by trying to display it and expecting an error if the model is not valid.
IMHO this puts logic into the view which should be wrong.

Regards,
Ron 

-----Original Message-----
From: stringtemplate-interest-bounces at antlr.org [mailto:stringtemplate-interest-bounces at antlr.org] On Behalf Of Terence Parr
Sent: Monday, August 03, 2009 8:50 PM
To: String Template
Subject: Re: [stringtemplate-interest] Fail on undefined property


  it's very convenient to show a value if it's present without  
throwing an error. I will make an option in the next version.
T
On Aug 3, 2009, at 2:44 AM, Koerner, Ron wrote:

> Would a functionality like "fail generation of template if some
> variables are undefined" not violate model/view separation?
>
> Actually the model generation should fail and make the decision  
> whether
> something is displayable or not.
>
> Regards,
> Ron
>
> -----Original Message-----
> From: stringtemplate-interest-bounces at antlr.org
> [mailto:stringtemplate-interest-bounces at antlr.org] On Behalf Of  
> Terence
> Parr
> Sent: Friday, July 31, 2009 10:13 PM
> To: John D. Mitchell
> Cc: String Template
> Subject: Re: [stringtemplate-interest] Fail on undefined property
>
> Yeah, I hear that. On the other hand, we already have syntax for this
>
> <x> is mandatory
> <if(x)><x><endif> is not mandatory
>
>  verbose, but functionality  already exists ;)
>
> T
> On Jul 31, 2009, at 1:11 PM, John D. Mitchell wrote:
>
>> On Jul 31, 2009, at 13:02 , Terence Parr wrote:
>>> On Jul 31, 2009, at 1:01 PM, John D. Mitchell wrote:
>>>> I haven't followed this thread too closely but in terms of
>>>> optionality, one trick would be to add syntactic support for
>>>> something like:
>>>> <x?> or <x!>
>>>
>>> that could work but I would prefer to have it on the parameter
>>> definitions not the usage:
>>>
>>> mytemplate(firstname, lastname?) ::= "..."
>>
>> FWIW, I'm more on the side of "at the point of usage" because I
>> think having the fact be very explicit is a good thing. I.e., when
>> one is reading through the template, having it jump out as different
>> behavior is helpful -- having the same looking thing with two
>> different behaviors just bothers me, I guess.
>>
>> Hope this helps,
>> John
>>
>>
>
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/stringtemplate-interest
>
> -- 
> WINCOR NIXDORF International GmbH
> Sitz der Gesellschaft: Paderborn
> Registergericht Paderborn HRB 3507
> Gesch?ftsf?hrer: Eckard Heidloff (Vorsitzender), Stefan Auerbach,  
> Dr. J?rgen Wunram
> Vorsitzender des Aufsichtsrats: Karl-Heinz Stiller
> Steuernummer: 339/5884/0020 - Ust-ID Nr.: DE812927716 - WEEE-Reg.- 
> Nr. DE44477193
>
> Diese E-Mail enth?lt vertrauliche Informationen. Wenn Sie nicht der  
> richtige Adressat sind oder diese E-Mail irrt?mlich erhalten haben,  
> informieren Sie bitte sofort den Absender und vernichten Sie diese E- 
> Mail. Das unerlaubte Kopieren sowie die unbefugte Weitergabe dieser  
> E-Mail ist nicht gestattet.
>
> This e-mail may contain confidential information. If you are not the  
> intended recipient (or have received this e-mail in error) please  
> notify the sender immediately and destroy this e-mail. Any  
> unauthorised copying, disclosure or distribution of the material in  
> this e-mail is strictly forbidden.
>

_______________________________________________
stringtemplate-interest mailing list
stringtemplate-interest at antlr.org
http://www.antlr.org/mailman/listinfo/stringtemplate-interest

-- 
WINCOR NIXDORF International GmbH 
Sitz der Gesellschaft: Paderborn 
Registergericht Paderborn HRB 3507
Gesch?ftsf?hrer: Eckard Heidloff (Vorsitzender), Stefan Auerbach, Dr. J?rgen Wunram
Vorsitzender des Aufsichtsrats: Karl-Heinz Stiller 
Steuernummer: 339/5884/0020 - Ust-ID Nr.: DE812927716 - WEEE-Reg.-Nr. DE44477193

Diese E-Mail enth?lt vertrauliche Informationen. Wenn Sie nicht der richtige Adressat sind oder diese E-Mail irrt?mlich erhalten haben, informieren Sie bitte sofort den Absender und vernichten Sie diese E-Mail. Das unerlaubte Kopieren sowie die unbefugte Weitergabe dieser E-Mail ist nicht gestattet.

This e-mail may contain confidential information. If you are not the intended recipient (or have received this e-mail in error) please notify the sender immediately and destroy this e-mail. Any unauthorised copying, disclosure or distribution of the material in this e-mail is strictly forbidden. 


From s.barnett-cormack at lancaster.ac.uk  Tue Aug  4 04:16:18 2009
From: s.barnett-cormack at lancaster.ac.uk (Sam Barnett-Cormack)
Date: Tue, 04 Aug 2009 12:16:18 +0100
Subject: [stringtemplate-interest] sequences and unique numbers
In-Reply-To: <D2512F07-EF2A-4C2A-98E5-CD54AB06A9F3@cs.usfca.edu>
References: <D2512F07-EF2A-4C2A-98E5-CD54AB06A9F3@cs.usfca.edu>
Message-ID: <4A781882.4070001@lancaster.ac.uk>

Terence Parr wrote:
> I'm running this up the flagpole to see what people think.  Is this  
> good, bad, or indifferent?

I'm not really a ST afficianado yet, but I like the whole ST concept, 
and I think that this fits okay with it... but it means there should be 
a change in the explanation of side-effects and the expectation of there 
not being any. Call it perhaps "dynamic models" with "static models" 
(predictable results) being easier, but dynamic models being valid. 
There are potentially all sorts of issues with concurrency, 
repeatability, etc etc, and you need to be sure that developers know 
that those are *their* problem. Otherwise, I don't see the problem with 
dynamic models - it's potentially very useful, if subtle.

-- 
Sam Barnett-Cormack

From s.barnett-cormack at lancaster.ac.uk  Tue Aug  4 04:17:46 2009
From: s.barnett-cormack at lancaster.ac.uk (Sam Barnett-Cormack)
Date: Tue, 04 Aug 2009 12:17:46 +0100
Subject: [stringtemplate-interest] sequences and unique numbers
In-Reply-To: <D2512F07-EF2A-4C2A-98E5-CD54AB06A9F3@cs.usfca.edu>
References: <D2512F07-EF2A-4C2A-98E5-CD54AB06A9F3@cs.usfca.edu>
Message-ID: <4A7818DA.6080704@lancaster.ac.uk>

Terence Parr wrote:

> The problem is that we get something like end1 and end2 instead of the  
> same label. The solution is to compute a value and hold it for the  
> duration of the template, which we can do as a default argument:
> 
> if(cond, block, label={end<(uniq)>}) ::= <<
> 	<cond>
> 	brf <label>
> 	<block>
> <label>:
>  >>

Also, it would be nice to have some syntactic sugar for that...

-- 
Sam Barnett-Cormack

From dustin at biztechetc.com  Tue Aug  4 04:19:13 2009
From: dustin at biztechetc.com (Dustin A. Lambert)
Date: Tue, 4 Aug 2009 07:19:13 -0400
Subject: [stringtemplate-interest] Current C# Dev Version
Message-ID: <615cf3100908040419jd651821w40b14e0863ac6ea@mail.gmail.com>

Greetings,

I've been testing the latest C# beta and discovered a problem...

If I set a template parameter to an object of System.DateTime like so:
var master = Global.Templates.GetInstanceOf("master");
master.SetAttribute("Today", System.DateTime.Now);

And then in the template do something like this:
<p>&copy; 2008- $Today.Year$ . All rights reserved.</p>

$Today.Year$ comes out as a weird number... i.e. "? 2008- 10540 "

I checked for custom renderers and did not find any..
?master.GetAttributeRenderer(typeof(DateTime))
null

?master.GetAttributeRenderer(typeof(int))
null

Any suggestions?

Thanks!

Dustin Lambert
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090804/aa41a31c/attachment.html 

From dustin at biztechetc.com  Tue Aug  4 04:22:29 2009
From: dustin at biztechetc.com (Dustin A. Lambert)
Date: Tue, 4 Aug 2009 07:22:29 -0400
Subject: [stringtemplate-interest] Iteration
Message-ID: <615cf3100908040422y7d806767o6c17b9c091c5686d@mail.gmail.com>

Greetings again,

I've been testing for about a week now and had a question about iteration:

Is it against the StringTemplate philosophy to only show a segment of a list
(i.e. first 20 items or last 20 items in a list)?

OR should the controller segment the list before it is passed it?

I wanted my template designers to decide how many items to display, but
could not figure out how I would accomplish this / if it was the proper
way.

I'm not looking for a hack via a renderer, etc.

Thanks again,

Dustin Lambert
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090804/d563b445/attachment.html 

From parrt at cs.usfca.edu  Tue Aug  4 11:22:37 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 4 Aug 2009 11:22:37 -0700
Subject: [stringtemplate-interest] Iteration
In-Reply-To: <615cf3100908040422y7d806767o6c17b9c091c5686d@mail.gmail.com>
References: <615cf3100908040422y7d806767o6c17b9c091c5686d@mail.gmail.com>
Message-ID: <E8378CF7-E7A0-43F1-85DE-9BAAB74F68A5@cs.usfca.edu>

Hi currently we have no way to chop up a list but it's not against the  
rules, so to speak.
T
On Aug 4, 2009, at 4:22 AM, Dustin A. Lambert wrote:

> Greetings again,
>
> I've been testing for about a week now and had a question about  
> iteration:
>
> Is it against the StringTemplate philosophy to only show a segment  
> of a list (i.e. first 20 items or last 20 items in a list)?
>
> OR should the controller segment the list before it is passed it?
>
> I wanted my template designers to decide how many items to display,  
> but could not figure out how I would accomplish this / if it was the  
> proper way.
>
> I'm not looking for a hack via a renderer, etc.
>
> Thanks again,
>
> Dustin Lambert
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/stringtemplate-interest


From sharwell at pixelminegames.com  Tue Aug  4 11:22:58 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Tue, 4 Aug 2009 13:22:58 -0500
Subject: [stringtemplate-interest] Current C# Dev Version
In-Reply-To: <615cf3100908040419jd651821w40b14e0863ac6ea@mail.gmail.com>
References: <615cf3100908040419jd651821w40b14e0863ac6ea@mail.gmail.com>
Message-ID: <86403CA0939415448BCCB83855EFE09AA684B4@Bloodymary.ironwillgames.com>

When you say you were testing the latest beta, were you talking about
mine (3.2) or the one previously (before last weekend) posted as the
"latest beta (3.1)." :)

 

Sam

 

From: stringtemplate-interest-bounces at antlr.org
[mailto:stringtemplate-interest-bounces at antlr.org] On Behalf Of Dustin
A. Lambert
Sent: Tuesday, August 04, 2009 6:19 AM
To: stringtemplate-interest at antlr.org
Subject: [stringtemplate-interest] Current C# Dev Version

 

Greetings,

I've been testing the latest C# beta and discovered a problem...

If I set a template parameter to an object of System.DateTime like so:
var master = Global.Templates.GetInstanceOf("master");
master.SetAttribute("Today", System.DateTime.Now);

And then in the template do something like this:
<p>&copy; 2008- $Today.Year$ . All rights reserved.</p>

$Today.Year$ comes out as a weird number... i.e. "(c) 2008- 10540 "

I checked for custom renderers and did not find any..
?master.GetAttributeRenderer(typeof(DateTime))
null

?master.GetAttributeRenderer(typeof(int))
null

Any suggestions?

Thanks!

Dustin Lambert

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090804/463da4e5/attachment-0001.html 

From dustin at biztechetc.com  Tue Aug  4 11:26:55 2009
From: dustin at biztechetc.com (Dustin A. Lambert)
Date: Tue, 4 Aug 2009 14:26:55 -0400
Subject: [stringtemplate-interest] Iteration
In-Reply-To: <E8378CF7-E7A0-43F1-85DE-9BAAB74F68A5@cs.usfca.edu>
References: <615cf3100908040422y7d806767o6c17b9c091c5686d@mail.gmail.com> 
	<E8378CF7-E7A0-43F1-85DE-9BAAB74F68A5@cs.usfca.edu>
Message-ID: <615cf3100908041126m3155209fpc2b3c02ae79def3e@mail.gmail.com>

I've been studying on how to do this to no avail.... Is is possible to pass
a collection through a renderer?

Dustin Lambert



On Tue, Aug 4, 2009 at 2:22 PM, Terence Parr <parrt at cs.usfca.edu> wrote:

> Hi currently we have no way to chop up a list but it's not against the
> rules, so to speak.
> T
>
> On Aug 4, 2009, at 4:22 AM, Dustin A. Lambert wrote:
>
>  Greetings again,
>>
>> I've been testing for about a week now and had a question about iteration:
>>
>> Is it against the StringTemplate philosophy to only show a segment of a
>> list (i.e. first 20 items or last 20 items in a list)?
>>
>> OR should the controller segment the list before it is passed it?
>>
>> I wanted my template designers to decide how many items to display, but
>> could not figure out how I would accomplish this / if it was the proper way.
>>
>> I'm not looking for a hack via a renderer, etc.
>>
>> Thanks again,
>>
>> Dustin Lambert
>> _______________________________________________
>> stringtemplate-interest mailing list
>> stringtemplate-interest at antlr.org
>> http://www.antlr.org/mailman/listinfo/stringtemplate-interest
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090804/4ce84717/attachment.html 

From dustin at biztechetc.com  Tue Aug  4 11:36:43 2009
From: dustin at biztechetc.com (Dustin A. Lambert)
Date: Tue, 4 Aug 2009 14:36:43 -0400
Subject: [stringtemplate-interest] Current C# Dev Version
In-Reply-To: <86403CA0939415448BCCB83855EFE09AA684B4@Bloodymary.ironwillgames.com>
References: <615cf3100908040419jd651821w40b14e0863ac6ea@mail.gmail.com> 
	<86403CA0939415448BCCB83855EFE09AA684B4@Bloodymary.ironwillgames.com>
Message-ID: <615cf3100908041136k24e2d1f3x42874bcafaec7b42@mail.gmail.com>

I'm using 3.2... from file: StringTemplate-3.2-2009-06-28.7z

When I look at the version on Antlr3.StringTemplate, it states "3.1.3.6002"

I've removed and re-added several times... I get the same result.


I setup a renderer for integers and ST is passing through the weird numbers,
so I suppose that it is a problem with reading off the int from DateTime...

Dustin Lambert



On Tue, Aug 4, 2009 at 2:22 PM, Sam Harwell <sharwell at pixelminegames.com>wrote:

>  When you say you were testing the latest beta, were you talking about
> mine (3.2) or the one previously (before last weekend) posted as the ?latest
> beta (3.1).? :)
>
>
>
> Sam
>
>
>
> *From:* stringtemplate-interest-bounces at antlr.org [mailto:
> stringtemplate-interest-bounces at antlr.org] *On Behalf Of *Dustin A.
> Lambert
> *Sent:* Tuesday, August 04, 2009 6:19 AM
> *To:* stringtemplate-interest at antlr.org
> *Subject:* [stringtemplate-interest] Current C# Dev Version
>
>
>
> Greetings,
>
> I've been testing the latest C# beta and discovered a problem...
>
> If I set a template parameter to an object of System.DateTime like so:
> var master = Global.Templates.GetInstanceOf("master");
> master.SetAttribute("Today", System.DateTime.Now);
>
> And then in the template do something like this:
> <p>&copy; 2008- $Today.Year$ . All rights reserved.</p>
>
> $Today.Year$ comes out as a weird number... i.e. "? 2008- 10540 "
>
> I checked for custom renderers and did not find any..
> ?master.GetAttributeRenderer(typeof(DateTime))
> null
>
> ?master.GetAttributeRenderer(typeof(int))
> null
>
> Any suggestions?
>
> Thanks!
>
> Dustin Lambert
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090804/315e12cc/attachment.html 

From parrt at cs.usfca.edu  Tue Aug  4 11:38:51 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 4 Aug 2009 11:38:51 -0700
Subject: [stringtemplate-interest] Iteration
In-Reply-To: <615cf3100908041126m3155209fpc2b3c02ae79def3e@mail.gmail.com>
References: <615cf3100908040422y7d806767o6c17b9c091c5686d@mail.gmail.com>
	<E8378CF7-E7A0-43F1-85DE-9BAAB74F68A5@cs.usfca.edu>
	<615cf3100908041126m3155209fpc2b3c02ae79def3e@mail.gmail.com>
Message-ID: <3F6E9C35-3A54-41DF-909C-DFDD56249BAA@cs.usfca.edu>


On Aug 4, 2009, at 11:26 AM, Dustin A. Lambert wrote:

> I've been studying on how to do this to no avail.... Is is possible  
> to pass a collection through a renderer?

it would render to text not list of objects i'm afraid.
T

From dustin at biztechetc.com  Tue Aug  4 11:41:35 2009
From: dustin at biztechetc.com (Dustin A. Lambert)
Date: Tue, 4 Aug 2009 14:41:35 -0400
Subject: [stringtemplate-interest] Iteration
In-Reply-To: <3F6E9C35-3A54-41DF-909C-DFDD56249BAA@cs.usfca.edu>
References: <615cf3100908040422y7d806767o6c17b9c091c5686d@mail.gmail.com> 
	<E8378CF7-E7A0-43F1-85DE-9BAAB74F68A5@cs.usfca.edu>
	<615cf3100908041126m3155209fpc2b3c02ae79def3e@mail.gmail.com> 
	<3F6E9C35-3A54-41DF-909C-DFDD56249BAA@cs.usfca.edu>
Message-ID: <615cf3100908041141r153c4b76neda59a6a707be002@mail.gmail.com>

Ok, I guess I'll give in for now and let the controller segment the list...

I tried to build some sort of logic around $i$, but there is nothing you can
do to conditionally ignore entries based on values of $i$


Dustin Lambert



On Tue, Aug 4, 2009 at 2:38 PM, Terence Parr <parrt at cs.usfca.edu> wrote:

>
> On Aug 4, 2009, at 11:26 AM, Dustin A. Lambert wrote:
>
>  I've been studying on how to do this to no avail.... Is is possible to
>> pass a collection through a renderer?
>>
>
> it would render to text not list of objects i'm afraid.
> T
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090804/c16fae15/attachment.html 

From sharwell at pixelminegames.com  Tue Aug  4 11:59:04 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Tue, 4 Aug 2009 13:59:04 -0500
Subject: [stringtemplate-interest] Updated field and method accessors in the
	C# port
Message-ID: <86403CA0939415448BCCB83855EFE09AA684B6@Bloodymary.ironwillgames.com>

As some of you (probably very few) know, the C# port of StringTemplate
builds and caches dynamic accessors for fields and methods to improve
performance. Today I made an update that I should have made in the past.
Instead of manually building the IL for the accessors, I use the LINQ
expression trees to handle the work behind the scenes. Behind the scenes
work includes selecting the proper opcode for the call (direct vs.
indirect dispatch), optimizations for static methods, and only boxing
results when necessary. The front-end work (actually relevant to the
task at hand) is now a clean expression of the desired behavior.

 

Later I'll be updating the experimental ST compiler (only available via
the depot source for the C# port, and disabled by default) to use
expression trees instead of building IL and re-benchmarking it.

 

The result looks like this:

 

Before:

 

private static Func<object, object> BuildAccessor( MethodInfo method )

{

    System.Reflection.Emit.DynamicMethod dm = new
System.Reflection.Emit.DynamicMethod(method.DeclaringType.Name +
method.Name + "MethodAccessor", typeof(object), new Type[] {
typeof(object) }, method.DeclaringType);

    var gen = dm.GetILGenerator();

 

    if (!method.IsStatic)

    {

        gen.Emit(System.Reflection.Emit.OpCodes.Ldarg_0);

        gen.Emit(System.Reflection.Emit.OpCodes.Castclass,
method.DeclaringType);

    }

 

    if (method.IsVirtual && !method.IsFinal)

        gen.EmitCall(System.Reflection.Emit.OpCodes.Callvirt, method,
null);

    else

        gen.EmitCall(System.Reflection.Emit.OpCodes.Call, method, null);

 

    if (method.ReturnType.IsValueType)

        gen.Emit(System.Reflection.Emit.OpCodes.Box, method.ReturnType);

 

    gen.Emit(System.Reflection.Emit.OpCodes.Ret);

    return (Func<object, object>)dm.CreateDelegate(typeof(Func<object,
object>));

}

 

private static Func<object, object> BuildAccessor( FieldInfo field )

{

    System.Reflection.Emit.DynamicMethod dm = new
System.Reflection.Emit.DynamicMethod(field.DeclaringType.Name +
field.Name + "FieldAccessor", typeof(object), new Type[] {
typeof(object) }, field.DeclaringType);

 

    var gen = dm.GetILGenerator();

    if (field.IsStatic)

    {

        gen.Emit(System.Reflection.Emit.OpCodes.Ldsfld, field);

    }

    else

    {

        gen.Emit(System.Reflection.Emit.OpCodes.Ldarg_0);

        gen.Emit(System.Reflection.Emit.OpCodes.Castclass,
field.DeclaringType);

        gen.Emit(System.Reflection.Emit.OpCodes.Ldfld, field);

    }

 

    if (field.FieldType.IsValueType)

        gen.Emit(System.Reflection.Emit.OpCodes.Box, field.FieldType);

 

    gen.Emit(System.Reflection.Emit.OpCodes.Ret);

    return (Func<object, object>)dm.CreateDelegate(typeof(Func<object,
object>));

}

 

After:

 

private static Func<object, object> BuildAccessor(MethodInfo method)

{

    ParameterExpression obj = Expression.Parameter(typeof(object),
"obj");

    Expression<Func<object, object>> expr =
Expression.Lambda<Func<object, object>>(

        Expression.Convert(

            Expression.Call(

                Expression.Convert(obj, method.DeclaringType),

                method),

            typeof(object)),

        obj);

 

    return expr.Compile();

}

 

private static Func<object, object> BuildAccessor(FieldInfo field)

{

    ParameterExpression obj = Expression.Parameter(typeof(object),
"obj");

    Expression<Func<object, object>> expr =
Expression.Lambda<Func<object, object>>(

        Expression.Convert(

            Expression.Field(

                Expression.Convert(obj, field.DeclaringType),

                field),

            typeof(object)),

        obj);

 

    return expr.Compile();

}

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090804/eab42847/attachment-0001.html 

From parrt at cs.usfca.edu  Tue Aug  4 12:01:13 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 4 Aug 2009 12:01:13 -0700
Subject: [stringtemplate-interest] Iteration
In-Reply-To: <615cf3100908041141r153c4b76neda59a6a707be002@mail.gmail.com>
References: <615cf3100908040422y7d806767o6c17b9c091c5686d@mail.gmail.com>
	<E8378CF7-E7A0-43F1-85DE-9BAAB74F68A5@cs.usfca.edu>
	<615cf3100908041126m3155209fpc2b3c02ae79def3e@mail.gmail.com>
	<3F6E9C35-3A54-41DF-909C-DFDD56249BAA@cs.usfca.edu>
	<615cf3100908041141r153c4b76neda59a6a707be002@mail.gmail.com>
Message-ID: <6A02D13D-20E0-4299-8B10-1F01B42A0137@cs.usfca.edu>

hi. you need a new "function" like rest or first etc...  not sure how  
it'd work. it needs 2 args.
I'd say override setAttribute to wrap all lists with a new object that  
knows how to answer .firsthalt and .lasthalf or whatever you need.
T
On Aug 4, 2009, at 11:41 AM, Dustin A. Lambert wrote:

> Ok, I guess I'll give in for now and let the controller segment the  
> list...
>
> I tried to build some sort of logic around $i$, but there is nothing  
> you can do to conditionally ignore entries based on values of $i$
>
>
> Dustin Lambert
>
>
>
> On Tue, Aug 4, 2009 at 2:38 PM, Terence Parr <parrt at cs.usfca.edu>  
> wrote:
>
> On Aug 4, 2009, at 11:26 AM, Dustin A. Lambert wrote:
>
> I've been studying on how to do this to no avail.... Is is possible  
> to pass a collection through a renderer?
>
> it would render to text not list of objects i'm afraid.
> T
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090804/cd5a7045/attachment.html 

From sharwell at pixelminegames.com  Tue Aug  4 12:07:07 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Tue, 4 Aug 2009 14:07:07 -0500
Subject: [stringtemplate-interest] Current C# Dev Version
In-Reply-To: <615cf3100908041136k24e2d1f3x42874bcafaec7b42@mail.gmail.com>
References: <615cf3100908040419jd651821w40b14e0863ac6ea@mail.gmail.com>
	<86403CA0939415448BCCB83855EFE09AA684B4@Bloodymary.ironwillgames.com>
	<615cf3100908041136k24e2d1f3x42874bcafaec7b42@mail.gmail.com>
Message-ID: <86403CA0939415448BCCB83855EFE09AA684B7@Bloodymary.ironwillgames.com>

Hi Dustin,

 

I added a unit test to the StringTemplate test suite and it passes
without any changes:

 

[TestMethod]

public void TestDateTimeFormatting()

{

    StringTemplate e = new StringTemplate(

            "<p>&copy; 2008- $Today.Year$ . All rights reserved.</p>"

        );

    e = e.GetInstanceOf();

    e.SetAttribute("Today", new DateTime(2009, 8, 4));

    string expecting = "<p>&copy; 2008- 2009 . All rights
reserved.</p>";

    Assert.AreEqual(expecting, e.ToString());

}

 

Sam

 

 

From: Dustin A. Lambert [mailto:dustin at biztechetc.com] 
Sent: Tuesday, August 04, 2009 1:37 PM
To: Sam Harwell
Cc: stringtemplate-interest at antlr.org
Subject: Re: [stringtemplate-interest] Current C# Dev Version

 

I'm using 3.2... from file: StringTemplate-3.2-2009-06-28.7z

When I look at the version on Antlr3.StringTemplate, it states
"3.1.3.6002"

I've removed and re-added several times... I get the same result.


I setup a renderer for integers and ST is passing through the weird
numbers, so I suppose that it is a problem with reading off the int from
DateTime...

Dustin Lambert




On Tue, Aug 4, 2009 at 2:22 PM, Sam Harwell
<sharwell at pixelminegames.com> wrote:

When you say you were testing the latest beta, were you talking about
mine (3.2) or the one previously (before last weekend) posted as the
"latest beta (3.1)." :)

 

Sam

 

From: stringtemplate-interest-bounces at antlr.org
[mailto:stringtemplate-interest-bounces at antlr.org] On Behalf Of Dustin
A. Lambert
Sent: Tuesday, August 04, 2009 6:19 AM
To: stringtemplate-interest at antlr.org
Subject: [stringtemplate-interest] Current C# Dev Version

 

Greetings,

I've been testing the latest C# beta and discovered a problem...

If I set a template parameter to an object of System.DateTime like so:
var master = Global.Templates.GetInstanceOf("master");
master.SetAttribute("Today", System.DateTime.Now);

And then in the template do something like this:
<p>&copy; 2008- $Today.Year$ . All rights reserved.</p>

$Today.Year$ comes out as a weird number... i.e. "(c) 2008- 10540 "

I checked for custom renderers and did not find any..
?master.GetAttributeRenderer(typeof(DateTime))
null

?master.GetAttributeRenderer(typeof(int))
null

Any suggestions?

Thanks!

Dustin Lambert

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090804/28167a8a/attachment.html 

From dustin at biztechetc.com  Tue Aug  4 12:38:47 2009
From: dustin at biztechetc.com (Dustin A. Lambert)
Date: Tue, 4 Aug 2009 15:38:47 -0400
Subject: [stringtemplate-interest] Current C# Dev Version
In-Reply-To: <86403CA0939415448BCCB83855EFE09AA684B7@Bloodymary.ironwillgames.com>
References: <615cf3100908040419jd651821w40b14e0863ac6ea@mail.gmail.com> 
	<86403CA0939415448BCCB83855EFE09AA684B4@Bloodymary.ironwillgames.com> 
	<615cf3100908041136k24e2d1f3x42874bcafaec7b42@mail.gmail.com> 
	<86403CA0939415448BCCB83855EFE09AA684B7@Bloodymary.ironwillgames.com>
Message-ID: <615cf3100908041238k51bb6494ifb056cfe4d4a0341@mail.gmail.com>

I've been trying over and over to get the right results with this version,
but to no avail.

I dumped everything and just created a clean project with the test in it...

I ran the same test and it always is false... $Today.Year$ is evaluating to
"8434."

For fun, I went back and tried the same test in versions 3.0 and 3.1b1 and
it succeeds as expected.

I feel like it is a reflection error, but I am unable to track it down... Is
the source code available?

Thanks,

Dustin Lambert


---------- Forwarded message ----------
From: Sam Harwell <sharwell at pixelminegames.com>
Date: Tue, Aug 4, 2009 at 3:07 PM
Subject: RE: [stringtemplate-interest] Current C# Dev Version
To: "Dustin A. Lambert" <dustin at biztechetc.com>
Cc: stringtemplate-interest at antlr.org


 Hi Dustin,



I added a unit test to the StringTemplate test suite and it passes without
any changes:



[TestMethod]

public void TestDateTimeFormatting()

{

    StringTemplate e = new StringTemplate(

            "<p>&copy; 2008- $Today.Year$ . All rights reserved.</p>"

        );

    e = e.GetInstanceOf();

    e.SetAttribute("Today", new DateTime(2009, 8, 4));

    string expecting = "<p>&copy; 2008- 2009 . All rights reserved.</p>";

    Assert.AreEqual(expecting, e.ToString());

}



Sam





*From:* Dustin A. Lambert [mailto:dustin at biztechetc.com]
*Sent:* Tuesday, August 04, 2009 1:37 PM
*To:* Sam Harwell
*Cc:* stringtemplate-interest at antlr.org
*Subject:* Re: [stringtemplate-interest] Current C# Dev Version



I'm using 3.2... from file: StringTemplate-3.2-2009-06-28.7z

When I look at the version on Antlr3.StringTemplate, it states "3.1.3.6002"

I've removed and re-added several times... I get the same result.


I setup a renderer for integers and ST is passing through the weird numbers,
so I suppose that it is a problem with reading off the int from DateTime...

Dustin Lambert


 On Tue, Aug 4, 2009 at 2:22 PM, Sam Harwell <sharwell at pixelminegames.com>
wrote:

When you say you were testing the latest beta, were you talking about mine
(3.2) or the one previously (before last weekend) posted as the ?latest beta
(3.1).? :)



Sam



*From:* stringtemplate-interest-bounces at antlr.org [mailto:
stringtemplate-interest-bounces at antlr.org] *On Behalf Of *Dustin A. Lambert
*Sent:* Tuesday, August 04, 2009 6:19 AM
*To:* stringtemplate-interest at antlr.org
*Subject:* [stringtemplate-interest] Current C# Dev Version



Greetings,

I've been testing the latest C# beta and discovered a problem...

If I set a template parameter to an object of System.DateTime like so:
var master = Global.Templates.GetInstanceOf("master");
master.SetAttribute("Today", System.DateTime.Now);

And then in the template do something like this:
<p>&copy; 2008- $Today.Year$ . All rights reserved.</p>

$Today.Year$ comes out as a weird number... i.e. "? 2008- 10540 "

I checked for custom renderers and did not find any..
?master.GetAttributeRenderer(typeof(DateTime))
null

?master.GetAttributeRenderer(typeof(int))
null

Any suggestions?

Thanks!

Dustin Lambert
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090804/2d637bd1/attachment-0001.html 

From dustin at biztechetc.com  Tue Aug  4 13:11:53 2009
From: dustin at biztechetc.com (Dustin A. Lambert)
Date: Tue, 4 Aug 2009 16:11:53 -0400
Subject: [stringtemplate-interest] Current C# Dev Version
In-Reply-To: <615cf3100908041238k51bb6494ifb056cfe4d4a0341@mail.gmail.com>
References: <615cf3100908040419jd651821w40b14e0863ac6ea@mail.gmail.com> 
	<86403CA0939415448BCCB83855EFE09AA684B4@Bloodymary.ironwillgames.com> 
	<615cf3100908041136k24e2d1f3x42874bcafaec7b42@mail.gmail.com> 
	<86403CA0939415448BCCB83855EFE09AA684B7@Bloodymary.ironwillgames.com> 
	<615cf3100908041238k51bb6494ifb056cfe4d4a0341@mail.gmail.com>
Message-ID: <615cf3100908041311n67660d20y9265848c4679e123@mail.gmail.com>

I tested some different dates to see what $Today.Year$ evaluates to:

8/4/2009: 8434
8/4/2010: 6784
8/4/2011: 5135
1/1/2009: 1398
1/1/2010: 14362
1/1/2011: 12712

I know this sounds crazy... Not sure what else to do.

Interesting that future dates have exactly 1650 difference between years...

Dustin Lambert


On Tue, Aug 4, 2009 at 3:38 PM, Dustin A. Lambert <dustin at biztechetc.com>wrote:

> I've been trying over and over to get the right results with this version,
> but to no avail.
>
> I dumped everything and just created a clean project with the test in it...
>
> I ran the same test and it always is false... $Today.Year$ is evaluating to
> "8434."
>
> For fun, I went back and tried the same test in versions 3.0 and 3.1b1 and
> it succeeds as expected.
>
> I feel like it is a reflection error, but I am unable to track it down...
> Is the source code available?
>
> Thanks,
>
> Dustin Lambert
>
>
>
> ---------- Forwarded message ----------
> From: Sam Harwell <sharwell at pixelminegames.com>
> Date: Tue, Aug 4, 2009 at 3:07 PM
> Subject: RE: [stringtemplate-interest] Current C# Dev Version
> To: "Dustin A. Lambert" <dustin at biztechetc.com>
> Cc: stringtemplate-interest at antlr.org
>
>
>  Hi Dustin,
>
>
>
> I added a unit test to the StringTemplate test suite and it passes without
> any changes:
>
>
>
> [TestMethod]
>
> public void TestDateTimeFormatting()
>
> {
>
>     StringTemplate e = new StringTemplate(
>
>             "<p>&copy; 2008- $Today.Year$ . All rights reserved.</p>"
>
>         );
>
>     e = e.GetInstanceOf();
>
>     e.SetAttribute("Today", new DateTime(2009, 8, 4));
>
>     string expecting = "<p>&copy; 2008- 2009 . All rights reserved.</p>";
>
>     Assert.AreEqual(expecting, e.ToString());
>
> }
>
>
>
> Sam
>
>
>
>
>
> *From:* Dustin A. Lambert [mailto:dustin at biztechetc.com]
> *Sent:* Tuesday, August 04, 2009 1:37 PM
> *To:* Sam Harwell
> *Cc:* stringtemplate-interest at antlr.org
> *Subject:* Re: [stringtemplate-interest] Current C# Dev Version
>
>
>
> I'm using 3.2... from file: StringTemplate-3.2-2009-06-28.7z
>
> When I look at the version on Antlr3.StringTemplate, it states "3.1.3.6002"
>
> I've removed and re-added several times... I get the same result.
>
>
> I setup a renderer for integers and ST is passing through the weird
> numbers, so I suppose that it is a problem with reading off the int from
> DateTime...
>
> Dustin Lambert
>
>
>  On Tue, Aug 4, 2009 at 2:22 PM, Sam Harwell <sharwell at pixelminegames.com>
> wrote:
>
> When you say you were testing the latest beta, were you talking about mine
> (3.2) or the one previously (before last weekend) posted as the ?latest beta
> (3.1).? :)
>
>
>
> Sam
>
>
>
> *From:* stringtemplate-interest-bounces at antlr.org [mailto:
> stringtemplate-interest-bounces at antlr.org] *On Behalf Of *Dustin A.
> Lambert
> *Sent:* Tuesday, August 04, 2009 6:19 AM
> *To:* stringtemplate-interest at antlr.org
> *Subject:* [stringtemplate-interest] Current C# Dev Version
>
>
>
> Greetings,
>
> I've been testing the latest C# beta and discovered a problem...
>
> If I set a template parameter to an object of System.DateTime like so:
> var master = Global.Templates.GetInstanceOf("master");
> master.SetAttribute("Today", System.DateTime.Now);
>
> And then in the template do something like this:
> <p>&copy; 2008- $Today.Year$ . All rights reserved.</p>
>
> $Today.Year$ comes out as a weird number... i.e. "? 2008- 10540 "
>
> I checked for custom renderers and did not find any..
> ?master.GetAttributeRenderer(typeof(DateTime))
> null
>
> ?master.GetAttributeRenderer(typeof(int))
> null
>
> Any suggestions?
>
> Thanks!
>
> Dustin Lambert
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090804/61eb5980/attachment.html 

From sharwell at pixelminegames.com  Tue Aug  4 13:31:43 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Tue, 4 Aug 2009 15:31:43 -0500
Subject: [stringtemplate-interest] Current C# Dev Version
In-Reply-To: <615cf3100908041311n67660d20y9265848c4679e123@mail.gmail.com>
References: <615cf3100908040419jd651821w40b14e0863ac6ea@mail.gmail.com>
	<86403CA0939415448BCCB83855EFE09AA684B4@Bloodymary.ironwillgames.com>
	<615cf3100908041136k24e2d1f3x42874bcafaec7b42@mail.gmail.com>
	<86403CA0939415448BCCB83855EFE09AA684B7@Bloodymary.ironwillgames.com>
	<615cf3100908041238k51bb6494ifb056cfe4d4a0341@mail.gmail.com>
	<615cf3100908041311n67660d20y9265848c4679e123@mail.gmail.com>
Message-ID: <86403CA0939415448BCCB83855EFE09AA684BF@Bloodymary.ironwillgames.com>

Awesome,

 

If you saw my last email about the accessors, well, they unintentionally
fixed this. :) I was not trying to do so!

 

Sam

 

From: Dustin A. Lambert [mailto:dustin at biztechetc.com] 
Sent: Tuesday, August 04, 2009 3:12 PM
To: Sam Harwell
Cc: stringtemplate-interest at antlr.org
Subject: Re: [stringtemplate-interest] Current C# Dev Version

 

I tested some different dates to see what $Today.Year$ evaluates to:

8/4/2009: 8434
8/4/2010: 6784
8/4/2011: 5135
1/1/2009: 1398
1/1/2010: 14362
1/1/2011: 12712

I know this sounds crazy... Not sure what else to do.

Interesting that future dates have exactly 1650 difference between
years...

Dustin Lambert



On Tue, Aug 4, 2009 at 3:38 PM, Dustin A. Lambert
<dustin at biztechetc.com> wrote:

I've been trying over and over to get the right results with this
version, but to no avail.

I dumped everything and just created a clean project with the test in
it...

I ran the same test and it always is false... $Today.Year$ is evaluating
to "8434."

For fun, I went back and tried the same test in versions 3.0 and 3.1b1
and it succeeds as expected.

I feel like it is a reflection error, but I am unable to track it
down... Is the source code available?

Thanks,

Dustin Lambert





---------- Forwarded message ----------
From: Sam Harwell <sharwell at pixelminegames.com>
Date: Tue, Aug 4, 2009 at 3:07 PM
Subject: RE: [stringtemplate-interest] Current C# Dev Version
To: "Dustin A. Lambert" <dustin at biztechetc.com>
Cc: stringtemplate-interest at antlr.org



Hi Dustin,

 

I added a unit test to the StringTemplate test suite and it passes
without any changes:

 

[TestMethod]

public void TestDateTimeFormatting()

{

    StringTemplate e = new StringTemplate(

            "<p>&copy; 2008- $Today.Year$ . All rights reserved.</p>"

        );

    e = e.GetInstanceOf();

    e.SetAttribute("Today", new DateTime(2009, 8, 4));

    string expecting = "<p>&copy; 2008- 2009 . All rights
reserved.</p>";

    Assert.AreEqual(expecting, e.ToString());

}

 

Sam

 

 

From: Dustin A. Lambert [mailto:dustin at biztechetc.com] 
Sent: Tuesday, August 04, 2009 1:37 PM
To: Sam Harwell
Cc: stringtemplate-interest at antlr.org
Subject: Re: [stringtemplate-interest] Current C# Dev Version

 

I'm using 3.2... from file: StringTemplate-3.2-2009-06-28.7z

When I look at the version on Antlr3.StringTemplate, it states
"3.1.3.6002"

I've removed and re-added several times... I get the same result.


I setup a renderer for integers and ST is passing through the weird
numbers, so I suppose that it is a problem with reading off the int from
DateTime...

Dustin Lambert



On Tue, Aug 4, 2009 at 2:22 PM, Sam Harwell
<sharwell at pixelminegames.com> wrote:

When you say you were testing the latest beta, were you talking about
mine (3.2) or the one previously (before last weekend) posted as the
"latest beta (3.1)." :)

 

Sam

 

From: stringtemplate-interest-bounces at antlr.org
[mailto:stringtemplate-interest-bounces at antlr.org] On Behalf Of Dustin
A. Lambert
Sent: Tuesday, August 04, 2009 6:19 AM
To: stringtemplate-interest at antlr.org
Subject: [stringtemplate-interest] Current C# Dev Version

 

Greetings,

I've been testing the latest C# beta and discovered a problem...

If I set a template parameter to an object of System.DateTime like so:
var master = Global.Templates.GetInstanceOf("master");
master.SetAttribute("Today", System.DateTime.Now);

And then in the template do something like this:
<p>&copy; 2008- $Today.Year$ . All rights reserved.</p>

$Today.Year$ comes out as a weird number... i.e. "(c) 2008- 10540 "

I checked for custom renderers and did not find any..
?master.GetAttributeRenderer(typeof(DateTime))
null

?master.GetAttributeRenderer(typeof(int))
null

Any suggestions?

Thanks!

Dustin Lambert

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090804/e72012f7/attachment-0001.html 

From felix_do at web.de  Wed Aug  5 08:39:36 2009
From: felix_do at web.de (Felix Dorner)
Date: Wed, 05 Aug 2009 17:39:36 +0200
Subject: [stringtemplate-interest] load jarred group definition with a a
	group loader
Message-ID: <438480608@web.de>

Hi,

java version ;-) I have this structure:

com/abcd/MyCodeGenerator.java
com/abcd/templates/agroup.stg

To load this group from within MyCodeGenerator:

private static String getTemplateBase() {
		return MyCodeGenerator.class.getPackage().getName().replace(".", "/") + "/templates/";
}
	
static {
	StringTemplateGroup.registerGroupLoader(new CommonGroupLoader(getTemplateBase(), null));
}

and then:

...
StringTempleteGroup.loadGroup("agroup", DefaultTemplateLexer.class, null);
...


This works well when the whole structure is unpackaged. But now I add all this into a JAR, and it doesn't seem to work anymore, I get 'no such template group or so'.
Does this CommonGroupLoader support loading templates from within a JAR, or would I have to write my own? 


I also think that I don't need a grouploader at all, because the group is on its own, no supergroups/interfaces.

So I could just do an ordinary:
getClass.getResourceAsStream("templates/agroup.stg") and use one of the StringTemplateGroup constructors I guess?


On the other hand maybe its cool to leave the templates unpackaged so I can hack around without repackaging... hmmmm.


Thanks for help,
Felix






From parrt at cs.usfca.edu  Wed Aug  5 12:19:31 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 5 Aug 2009 12:19:31 -0700
Subject: [stringtemplate-interest] load jarred group definition with a a
	group loader
In-Reply-To: <438480608@web.de>
References: <438480608@web.de>
Message-ID: <98172846-DC4E-4E9C-8DB9-B33D9930DD8D@cs.usfca.edu>

hi. from a jar it probably has to do the getResourceAsStream; not sure  
it does...one of the things i plan fixing in  v4.0
T
On Aug 5, 2009, at 8:39 AM, Felix Dorner wrote:

> Hi,
>
> java version ;-) I have this structure:
>
> com/abcd/MyCodeGenerator.java
> com/abcd/templates/agroup.stg
>
> To load this group from within MyCodeGenerator:
>
> private static String getTemplateBase() {
> 		return MyCodeGenerator.class.getPackage().getName().replace(".",  
> "/") + "/templates/";
> }
> 	
> static {
> 	StringTemplateGroup.registerGroupLoader(new  
> CommonGroupLoader(getTemplateBase(), null));
> }
>
> and then:
>
> ...
> StringTempleteGroup.loadGroup("agroup", DefaultTemplateLexer.class,  
> null);
> ...
>
>
> This works well when the whole structure is unpackaged. But now I  
> add all this into a JAR, and it doesn't seem to work anymore, I get  
> 'no such template group or so'.
> Does this CommonGroupLoader support loading templates from within a  
> JAR, or would I have to write my own?
>
>
> I also think that I don't need a grouploader at all, because the  
> group is on its own, no supergroups/interfaces.
>
> So I could just do an ordinary:
> getClass.getResourceAsStream("templates/agroup.stg") and use one of  
> the StringTemplateGroup constructors I guess?
>
>
> On the other hand maybe its cool to leave the templates unpackaged  
> so I can hack around without repackaging... hmmmm.
>
>
> Thanks for help,
> Felix
>
>
>
>
>
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/stringtemplate-interest


From parrt at cs.usfca.edu  Wed Aug  5 12:43:39 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 5 Aug 2009 12:43:39 -0700
Subject: [stringtemplate-interest] sequences and unique numbers
In-Reply-To: <4A781882.4070001@lancaster.ac.uk>
References: <D2512F07-EF2A-4C2A-98E5-CD54AB06A9F3@cs.usfca.edu>
	<4A781882.4070001@lancaster.ac.uk>
Message-ID: <DBBE9D7C-FC92-4090-AEDF-7374E8E39FAA@cs.usfca.edu>


On Aug 4, 2009, at 4:16 AM, Sam Barnett-Cormack wrote:

> Terence Parr wrote:
>> I'm running this up the flagpole to see what people think.  Is this
>> good, bad, or indifferent?
>
> I'm not really a ST afficianado yet, but I like the whole ST concept,
> and I think that this fits okay with it... but it means there should  
> be
> a change in the explanation of side-effects and the expectation of  
> there
> not being any. Call it perhaps "dynamic models" with "static models"
> (predictable results) being easier, but dynamic models being valid.

Yeah, that's a good point. perhaps dynamic versus static is the way to  
say it rather than side effect. but, by no side effects, do I mean  
repeatability? Hmm... I wonder what pure functional languages due to  
get the current time? does anybody know? Weird, I see some things on  
the web about getting the current working directory and changing the  
current directory, clear side effects. perhaps you have to do in one  
of those weird monad things.

> There are potentially all sorts of issues with concurrency,
> repeatability, etc etc, and you need to be sure that developers know
> that those are *their* problem. Otherwise, I don't see the problem  
> with
> dynamic models - it's potentially very useful, if subtle.

Yeah, makes me nervous, but I could put in the advanced features  
"beware" type stuff. Also it's not like it's built into the language  
so people who make tostring return a different value each time know  
they are making a nonrepeatable thing.

In your next e-mail you suggest sugar to make it easier. Part of me  
wants to leave it as "do it only few know what you're doing" and  
syntax would make people use it. On the other hand, if it has a known  
bit of syntactic sugar with known semantics, we discourage people from  
doing all sorts of weird things manually in the model and passing them  
in. Hmm...

I thought about doing something like

labels ::= {label<it>}

which presumably would give you a new label every time you reference  
<labels>.

Ter

From s.barnett-cormack at lancaster.ac.uk  Wed Aug  5 13:23:39 2009
From: s.barnett-cormack at lancaster.ac.uk (Sam Barnett-Cormack)
Date: Wed, 05 Aug 2009 21:23:39 +0100
Subject: [stringtemplate-interest] sequences and unique numbers
In-Reply-To: <DBBE9D7C-FC92-4090-AEDF-7374E8E39FAA@cs.usfca.edu>
References: <D2512F07-EF2A-4C2A-98E5-CD54AB06A9F3@cs.usfca.edu>
	<4A781882.4070001@lancaster.ac.uk>
	<DBBE9D7C-FC92-4090-AEDF-7374E8E39FAA@cs.usfca.edu>
Message-ID: <4A79EA4B.3020809@lancaster.ac.uk>

Terence Parr wrote:
> 
> On Aug 4, 2009, at 4:16 AM, Sam Barnett-Cormack wrote:
> 
>> Terence Parr wrote:
>>> I'm running this up the flagpole to see what people think.  Is this
>>> good, bad, or indifferent?
>>
>> I'm not really a ST afficianado yet, but I like the whole ST concept,
>> and I think that this fits okay with it... but it means there should be
>> a change in the explanation of side-effects and the expectation of there
>> not being any. Call it perhaps "dynamic models" with "static models"
>> (predictable results) being easier, but dynamic models being valid.
> 
> Yeah, that's a good point. perhaps dynamic versus static is the way to 
> say it rather than side effect. but, by no side effects, do I mean 
> repeatability? Hmm... I wonder what pure functional languages due to get 
> the current time? does anybody know? Weird, I see some things on the web 
> about getting the current working directory and changing the current 
> directory, clear side effects. perhaps you have to do in one of those 
> weird monad things.

The way I see it, a "dynamic model" is one that changes in clear, 
pre-defined ways, perhaps defined by a set of best practices, perhaps by 
some sort of framework for classes being used as models. I'd hate that 
complexity... monads are pretty complicated, but "uniquess types" might 
be a model that can be followed, and allows "side effects without side 
effects". Basically, as far as I can tell, the idea is that, when you 
increment the counter (or whatever), the actual underlying object of the 
counter is passed to the caller, and the counter replaces itself with an 
entirely new counter. This is much like the way Java does String 
concatenation (the original isn't modified, it's replaced) with the 
additional constraint that one ensure that only one thing has a 
reference to the uniqueness type at any time. Now, we can't easily force 
application programmers to obey that, but we can offer them the chance 
to implement bits of their model that StringTemplate promises to work 
with in that way.

Say we have a class Counter, as an example, and it wraps an underlying 
counter such that a special call (that's where we'd add in an interface 
or something) to, say, Counter.value() returns a CounterValue of the 
next value - the one it was holding. At the same time, it replaces its 
own internal reference with a *new* CounterValue representing the next 
value desired afterwards. Make Counter.value() atomic (synchronized in 
Java, I think) and it's even pretty threadsafe. To fit the pattern of 
the uniqueness type, there'd have to be *no* other way to get the value 
of the Counter other than one that increments it. CounterValue types 
would also have to be immutable. Hard to enforce, but document it as the 
way it's supposed to be done.

How useful this is, I'm less sure, but it preserves (to some extent) the 
pure functionality I feel is sought by StringTemplate. I'd suggest 
implementing it using interfaces, maybe some convenience (abstract) 
classes to help people use it. One could also use a similar strategy to 
require classes in a model to not be changed by outside influence during 
the rendering, to help prevent confusing misuses with non-synchronized 
models that are changing *during* the rendering process, but that's 
another kettle of fish.

>> There are potentially all sorts of issues with concurrency,
>> repeatability, etc etc, and you need to be sure that developers know
>> that those are *their* problem. Otherwise, I don't see the problem with
>> dynamic models - it's potentially very useful, if subtle.
> 
> Yeah, makes me nervous, but I could put in the advanced features 
> "beware" type stuff. Also it's not like it's built into the language so 
> people who make tostring return a different value each time know they 
> are making a nonrepeatable thing.

Well, with the strategy I spitball above, you can make it "built in" for 
people who are using the framework/interfaces.

> In your next e-mail you suggest sugar to make it easier. Part of me 
> wants to leave it as "do it only few know what you're doing" and syntax 
> would make people use it. On the other hand, if it has a known bit of 
> syntactic sugar with known semantics, we discourage people from doing 
> all sorts of weird things manually in the model and passing them in. Hmm...

This also fits what I just wrote about helping with it when people are 
using the "right way"... make syntactic sugar require it be done in the 
expected way.

> I thought about doing something like
> 
> labels ::= {label<it>}
> 
> which presumably would give you a new label every time you reference 
> <labels>.

I'm not sure what the sugar would look like, but it could be something 
like that... ideally you'd have two special templates/syntaxes that 
requires its argument to use the framework (if following my suggestion) 
and can increment (or whatever). Like being able to define a special 
template that can be called in two ways...

counter ::= <evolving(foo)>

which will check that foo claims to be an implementation of the pattern 
I described above, and then if you call <counter> you get the last thing 
returned by foo, and if you call, say <|counter|> (just as an example), 
it updates the value and outputs it.

This would *not* require that only stringtemplate, and only one 
instance, use foo. The Uniqueness structuer ensures that everyone's free 
to get values from it, and the practice would require some insurance 
that a Counter always returns a completely fresh value.

Well, that was a bit of an incoherent rant, and half of it was me 
writing it literally as I thought it... but hey, it's a break from 
modelling ASN.1 and mapping it to Java... I hate deadlines. Anyway, 
hopefully you got something from it.

-- 
Sam Barnett-Cormack

From tdjastrzebski at yahoo.com  Wed Aug  5 13:33:46 2009
From: tdjastrzebski at yahoo.com (Tomasz Jastrzebski)
Date: Wed, 5 Aug 2009 13:33:46 -0700 (PDT)
Subject: [stringtemplate-interest] 3.2 .Net port by Sam Harwell - license
	question
Message-ID: <222474.47679.qm@web52112.mail.re2.yahoo.com>

Hello all,
?
I noticed that StringTemplate 3.2 .Net port by Sam Harwell is available for download.
?
The libraries are copyrighted (Pixel Mine 2008), the files have version 3.1, not 3.2.
?
Since it is and independent *copyrighted* build available with no source code, no explicitly stated license and?no contact information is provided I am wondering if this lib can be used in comercial software.
?
Thank you for an advice.
?
Tomasz


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090805/2fe0d518/attachment.html 

From ron.koerner at wincor-nixdorf.com  Thu Aug  6 01:19:32 2009
From: ron.koerner at wincor-nixdorf.com (Koerner, Ron)
Date: Thu, 6 Aug 2009 10:19:32 +0200
Subject: [stringtemplate-interest] sequences and unique numbers
In-Reply-To: <DBBE9D7C-FC92-4090-AEDF-7374E8E39FAA@cs.usfca.edu>
References: <D2512F07-EF2A-4C2A-98E5-CD54AB06A9F3@cs.usfca.edu><4A781882.4070001@lancaster.ac.uk>
	<DBBE9D7C-FC92-4090-AEDF-7374E8E39FAA@cs.usfca.edu>
Message-ID: <371853577D3E4A47BA524E160DA7420E011A8105@DEEXVS02.wincor-nixdorf.com>

A somewhat different approach would be a template-scoped builtin
"constant" which is unique for each invocation of the template.
If you think of templates as functions that could be the stack frame
pointer.

if(cond,block) ::= <<

<cond>
bne label<TemplateInstanceUID>
<block>
label<TemplateInstanceUID>:

>>

where TemplateInstanceUID is implicitely bound the the address of the
template instance. That would push it a little more into the direction
of the current time and does not have the bad taste of side effects.

Regards,
Ron

-----Original Message-----
From: stringtemplate-interest-bounces at antlr.org
[mailto:stringtemplate-interest-bounces at antlr.org] On Behalf Of Terence
Parr
Sent: Wednesday, August 05, 2009 9:44 PM
To: Sam Barnett-Cormack
Cc: String Template
Subject: Re: [stringtemplate-interest] sequences and unique numbers


On Aug 4, 2009, at 4:16 AM, Sam Barnett-Cormack wrote:

> Terence Parr wrote:
>> I'm running this up the flagpole to see what people think.  Is this
>> good, bad, or indifferent?
>
> I'm not really a ST afficianado yet, but I like the whole ST concept,
> and I think that this fits okay with it... but it means there should  
> be
> a change in the explanation of side-effects and the expectation of  
> there
> not being any. Call it perhaps "dynamic models" with "static models"
> (predictable results) being easier, but dynamic models being valid.

Yeah, that's a good point. perhaps dynamic versus static is the way to  
say it rather than side effect. but, by no side effects, do I mean  
repeatability? Hmm... I wonder what pure functional languages due to  
get the current time? does anybody know? Weird, I see some things on  
the web about getting the current working directory and changing the  
current directory, clear side effects. perhaps you have to do in one  
of those weird monad things.

> There are potentially all sorts of issues with concurrency,
> repeatability, etc etc, and you need to be sure that developers know
> that those are *their* problem. Otherwise, I don't see the problem  
> with
> dynamic models - it's potentially very useful, if subtle.

Yeah, makes me nervous, but I could put in the advanced features  
"beware" type stuff. Also it's not like it's built into the language  
so people who make tostring return a different value each time know  
they are making a nonrepeatable thing.

In your next e-mail you suggest sugar to make it easier. Part of me  
wants to leave it as "do it only few know what you're doing" and  
syntax would make people use it. On the other hand, if it has a known  
bit of syntactic sugar with known semantics, we discourage people from  
doing all sorts of weird things manually in the model and passing them  
in. Hmm...

I thought about doing something like

labels ::= {label<it>}

which presumably would give you a new label every time you reference  
<labels>.

Ter
_______________________________________________
stringtemplate-interest mailing list
stringtemplate-interest at antlr.org
http://www.antlr.org/mailman/listinfo/stringtemplate-interest

-- 
WINCOR NIXDORF International GmbH 
Sitz der Gesellschaft: Paderborn 
Registergericht Paderborn HRB 3507
Gesch?ftsf?hrer: Eckard Heidloff (Vorsitzender), Stefan Auerbach, Dr. J?rgen Wunram
Vorsitzender des Aufsichtsrats: Karl-Heinz Stiller 
Steuernummer: 339/5884/0020 - Ust-ID Nr.: DE812927716 - WEEE-Reg.-Nr. DE44477193

Diese E-Mail enth?lt vertrauliche Informationen. Wenn Sie nicht der richtige Adressat sind oder diese E-Mail irrt?mlich erhalten haben, informieren Sie bitte sofort den Absender und vernichten Sie diese E-Mail. Das unerlaubte Kopieren sowie die unbefugte Weitergabe dieser E-Mail ist nicht gestattet.

This e-mail may contain confidential information. If you are not the intended recipient (or have received this e-mail in error) please notify the sender immediately and destroy this e-mail. Any unauthorised copying, disclosure or distribution of the material in this e-mail is strictly forbidden. 


From sharwell at pixelminegames.com  Thu Aug  6 08:38:39 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Thu, 6 Aug 2009 10:38:39 -0500
Subject: [stringtemplate-interest] 3.2 .Net port by Sam Harwell -
	licensequestion
In-Reply-To: <222474.47679.qm@web52112.mail.re2.yahoo.com>
References: <222474.47679.qm@web52112.mail.re2.yahoo.com>
Message-ID: <86403CA0939415448BCCB83855EFE09AA684E9@Bloodymary.ironwillgames.com>

The source is in P4, but under a branch. It's all under the same
3-clause BSD license as the Java version of ANTLR, just my name added as
the one who ported it, plus Pixel Mine since they paid me to do it. :)
The version numbers are off because I'm still working on "syncing" the
version, though the code should otherwise be up-to-date. I'll add a
license information file to the download when we post the next build.

 

Thanks,

Sam

 

From: stringtemplate-interest-bounces at antlr.org
[mailto:stringtemplate-interest-bounces at antlr.org] On Behalf Of Tomasz
Jastrzebski
Sent: Wednesday, August 05, 2009 3:34 PM
To: stringtemplate-interest at antlr.org
Subject: [stringtemplate-interest] 3.2 .Net port by Sam Harwell -
licensequestion

 

Hello all,

 

I noticed that StringTemplate 3.2 .Net port by Sam Harwell is available
for download.

 

The libraries are copyrighted (Pixel Mine 2008), the files have version
3.1, not 3.2.

 

Since it is and independent *copyrighted* build available with no source
code, no explicitly stated license and no contact information is
provided I am wondering if this lib can be used in comercial software.

 

Thank you for an advice.

 

Tomasz

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090806/b000c97b/attachment-0001.html 

From Aravind.Yarram at equifax.com  Thu Aug  6 08:45:19 2009
From: Aravind.Yarram at equifax.com (Aravind.Yarram at equifax.com)
Date: Thu, 6 Aug 2009 11:45:19 -0400
Subject: [stringtemplate-interest] Can string template be used for my use
	cases
Message-ID: <OFBE4B5705.3A5BD9AF-ON8525760A.00557529-8525760A.00568C2B@equifax.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090806/c235870b/attachment.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 22415206.gif
Type: image/gif
Size: 1678 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090806/c235870b/attachment.gif 

From s.barnett-cormack at lancaster.ac.uk  Fri Aug  7 11:25:40 2009
From: s.barnett-cormack at lancaster.ac.uk (Sam Barnett-Cormack)
Date: Fri, 07 Aug 2009 19:25:40 +0100
Subject: [stringtemplate-interest] sequences and unique numbers
In-Reply-To: <D2512F07-EF2A-4C2A-98E5-CD54AB06A9F3@cs.usfca.edu>
References: <D2512F07-EF2A-4C2A-98E5-CD54AB06A9F3@cs.usfca.edu>
Message-ID: <4A7C71A4.4000508@lancaster.ac.uk>

Having another think about this, while working with ST a bit more, I see 
that the real problem isn't any quasi-religious dedication to avoiding 
side effects or anything like that. It's 
order-of-evaluation-independence. It's a harder question to solve.

I suppose we'd have to say that there was no repeatability guarantee as 
to which template instance would get which value, but it certainly 
couldn't be some as pseudo-procedural as my suggestion, which only works 
if the attribute invocations are done top-to-bottom. As such, special 
syntactic sugar on the template parameter declaration makes more sense 
than my suggestion. However, I see a concern similar to scopes in ANTLR.

Say I have 4 templates that represent entities that will have unique 
IDs: A, B, C and D. In a simple case, it is necessary for them to be 
mutually unique. Now, as long as A, B, C and D are never nested in any 
way, it's fine. However, if an A may contain one or more B, C, or D, and 
B may contain C or D, we have to be very clear as to what happens, 
especially if any of B, C and D can also occur free-standing. Any 
occurence of the ID attribute in A *itself* must be consistent, and the 
occurences underneath must be distinct from those in A itself.

But sometimes they may not want to be mutually unique, or an instance of 
B will need to make use of the ID attribute from A, if set, *and* its own.

Now, I can see how all of this could be done with the curernt system, 
from your initial description, but I can see that they'll need clear 
documentation and some best practices. I can see a value in the 
recommended course being setting of formal parameters to a default 
value, which does some sort of immediate-invoke of a property of an 
object that evolves its own state. That's great. However, there's an 
issue of parameter scoping - doing this recursively could cause problems 
unless the parameters have clearer scoping. As I understand it, and I 
may be wrong, if a template has a formal parameter, and the invoking 
template can "see" an attribute of that name, then it's implicitly 
passed. Is this still the case if the parameters has a default? Say, 
templaet A has an attribute, no default, call att1, and template B has a 
formal parameter *with* default also called att1. A invokes B without 
explicitly setting att1. What value of att1 does B see? Should it be 
possible to define B so that you choose whether to implicitly receive a 
parameter or not?

My current gut feeling is towards expanding the specification of ST to 
change the way templates are defined to allow more customisation - 
scoping or parameters, defaults, etc. Your uniq suggestion is okay, as 
long as we say that ST assumes no side effects without actually acting 
on that assumption. It may, in futre, matter. The assumption of no side 
effects may in fact allow optimisations as we consider semi-compiled 
templates, as it does in functional language compilers. To guard against 
this, I would suggest being able to mark attributes/attribute properties 
that will/may cause side effects, and restrict where they can be used. 
In the java case, the classes may implement a marker interface, or if 
you want to have some flexibility (and restrict it to Java 5 onwards) a 
runtime-visible annotation - the advantage being that that can be 
applied to getters as well as classes. One place they might be permitted 
is in default declarations, but not in template bodies.

Well, that's just a few thoughts.

-- 
Sam Barnett-Cormack

From s.barnett-cormack at lancaster.ac.uk  Fri Aug  7 11:48:12 2009
From: s.barnett-cormack at lancaster.ac.uk (Sam Barnett-Cormack)
Date: Fri, 07 Aug 2009 19:48:12 +0100
Subject: [stringtemplate-interest] sequences and unique numbers
In-Reply-To: <4A7C71A4.4000508@lancaster.ac.uk>
References: <D2512F07-EF2A-4C2A-98E5-CD54AB06A9F3@cs.usfca.edu>
	<4A7C71A4.4000508@lancaster.ac.uk>
Message-ID: <4A7C76EC.2020709@lancaster.ac.uk>

Sam Barnett-Cormack wrote:
> Now, I can see how all of this could be done with the curernt system, 
> from your initial description, but I can see that they'll need clear 
> documentation and some best practices. I can see a value in the 
> recommended course being setting of formal parameters to a default 
> value, which does some sort of immediate-invoke of a property of an 
> object that evolves its own state. That's great. However, there's an 
> issue of parameter scoping - doing this recursively could cause problems 
> unless the parameters have clearer scoping. As I understand it, and I 
> may be wrong, if a template has a formal parameter, and the invoking 
> template can "see" an attribute of that name, then it's implicitly 
> passed. Is this still the case if the parameters has a default? Say, 
> templaet A has an attribute, no default, call att1, and template B has a 
> formal parameter *with* default also called att1. A invokes B without 
> explicitly setting att1. What value of att1 does B see? Should it be 
> possible to define B so that you choose whether to implicitly receive a 
> parameter or not?

Continuing my habit of replying to myself... I know that, currently, ST 
formal parameters hide the invoking template's parameters, although the 
caller can override this with <template(...)>. As I was suggesting 
expanding the template parameter definition syntax, it might be nice 
(from a documentation point of view) to specify parameters that *don't* 
hide the caller's values. In face, one thing that would be nice in the 
kind of use-cases I can imagine is a variant of default specification 
that allows you to say "this parameter will have the value it has in the 
caller, unless it's empty (unset) in the caller, in which case it will 
have this default". Also nice to say "this parameter can be set 
implicitly or explicitly, but it's an error if it's not set at all".

On another note, I guess one thing is that I'm uncomfortable with a 
syntax that means "the value of this template evaluated right now", as 
that violates the functional feel of ST. It means that 
order-of-evaluation *does* matter, otherwise there'd be no concept of 
"now". I'd prefer to only allow in parameter defaults, and then only on 
things that are marked as "yes-I-can-change", as discussed in my last email.

-- 
Sam Barnett-Cormack

From s.barnett-cormack at lancaster.ac.uk  Fri Aug  7 12:13:24 2009
From: s.barnett-cormack at lancaster.ac.uk (Sam Barnett-Cormack)
Date: Fri, 07 Aug 2009 20:13:24 +0100
Subject: [stringtemplate-interest] sequences and unique numbers
In-Reply-To: <4A7C76EC.2020709@lancaster.ac.uk>
References: <D2512F07-EF2A-4C2A-98E5-CD54AB06A9F3@cs.usfca.edu>	<4A7C71A4.4000508@lancaster.ac.uk>
	<4A7C76EC.2020709@lancaster.ac.uk>
Message-ID: <4A7C7CD4.2090806@lancaster.ac.uk>

Replying to myself again...

Sam Barnett-Cormack wrote:
> 
> Continuing my habit of replying to myself... I know that, currently, ST 
> formal parameters hide the invoking template's parameters, although the 
> caller can override this with <template(...)>. As I was suggesting 
> expanding the template parameter definition syntax, it might be nice 
> (from a documentation point of view) to specify parameters that *don't* 
> hide the caller's values. In face, one thing that would be nice in the 
> kind of use-cases I can imagine is a variant of default specification 
> that allows you to say "this parameter will have the value it has in the 
> caller, unless it's empty (unset) in the caller, in which case it will 
> have this default".

An example of the template code I find myself writing because I can't do 
this:

<if(extends)>
<classhead()>
<else>
<classhead(extends="ASN1Value")>
<endif>

It'd be much nicer, from my point of view, in my use case, to specify 
that in the definition of classhead() instead. Instead, I have to *not* 
list classhead as a formal parameter, even though it needs to be set for 
the template to work. Now, I could set it this way in the body of 
classhead instead, by setting extends as a formal parameter and doing 
the same logic as above there. Wherever I do it, it's messy.

Is there a distinction between "blank"/"null" and "unset"?

-- 
Sam Barnett-Cormack

From swapnil.kashikar at gmail.com  Thu Aug 13 10:07:31 2009
From: swapnil.kashikar at gmail.com (Swapnil Kashikar)
Date: Thu, 13 Aug 2009 13:07:31 -0400
Subject: [stringtemplate-interest] Suggestion for ST Maps
Message-ID: <b38f063f0908131007l6658f0cdwe3f64d26cf73102c@mail.gmail.com>

Hi,

In the Maps we are using the values are pretty complex templates using
the big string syntax <<...>>
Further, multiple keys use the exact same templates as values  and we
have to repeat the big template strings for each of these keys in the
map.

Now we could factor out the repeated value templates into a different
named template and refer those in maps to simplify, but still I think,
it would help if Map syntax itself allows multiple keys to map to same
value.
Something like:

====
typeInitMap ::= [
        "int","long","byte","short","char":"0",
        "float","double":"0.0",
        "boolean":"false",
        default:"null" // anything other than an atomic type
]
====

instead of what current ST requires:

====
typeInitMap ::= [
        "int":"0",
        "long":"0",
        "float":"0.0",
        "double":"0.0",
        "boolean":"false",
        "byte":"0",
        "short":"0",
        "char":"0",
        default:"null" // anything other than an atomic type
]
====
Note: above is for illustration, not our real ST.

Thanks,
Swapnil

From parrt at cs.usfca.edu  Thu Aug 13 17:43:22 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 13 Aug 2009 17:43:22 -0700
Subject: [stringtemplate-interest] Suggestion for ST Maps
In-Reply-To: <b38f063f0908131007l6658f0cdwe3f64d26cf73102c@mail.gmail.com>
References: <b38f063f0908131007l6658f0cdwe3f64d26cf73102c@mail.gmail.com>
Message-ID: <4FD8C394-2CE4-40B9-9141-F3261493A46A@cs.usfca.edu>

An excellent suggestion. adding to my list

http://www.antlr.org/jira/browse/ST-62

Ter
On Aug 13, 2009, at 10:07 AM, Swapnil Kashikar wrote:

> Hi,
>
> In the Maps we are using the values are pretty complex templates using
> the big string syntax <<...>>
> Further, multiple keys use the exact same templates as values  and we
> have to repeat the big template strings for each of these keys in the
> map.
>
> Now we could factor out the repeated value templates into a different
> named template and refer those in maps to simplify, but still I think,
> it would help if Map syntax itself allows multiple keys to map to same
> value.
> Something like:
>
> ====
> typeInitMap ::= [
>        "int","long","byte","short","char":"0",
>        "float","double":"0.0",
>        "boolean":"false",
>        default:"null" // anything other than an atomic type
> ]
> ====
>
> instead of what current ST requires:
>
> ====
> typeInitMap ::= [
>        "int":"0",
>        "long":"0",
>        "float":"0.0",
>        "double":"0.0",
>        "boolean":"false",
>        "byte":"0",
>        "short":"0",
>        "char":"0",
>        default:"null" // anything other than an atomic type
> ]
> ====
> Note: above is for illustration, not our real ST.
>
> Thanks,
> Swapnil
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/stringtemplate-interest


From bsayatovic at creditinfonet.com  Fri Aug 14 14:35:37 2009
From: bsayatovic at creditinfonet.com (Brian J. Sayatovic)
Date: Fri, 14 Aug 2009 17:35:37 -0400
Subject: [stringtemplate-interest] Could not load file or assimple
	Antlr3.Runtime version 3.1.3.6002
Message-ID: <022b01ca1d27$29d315b0$7d794110$@com>

I'm trying to use StringTemplate v3.2 (downloaded from
http://www.stringtemplate.org/download/StringTemplate-3.2-2009-06-28.7z) in
my WCF app.  I added references to my project for both Antlr3.StringTemplate
and Antlr3.Runtime as distributed in that zip.  Both DLLs say they are
version 3.1.0.0.  However, at runtime, I get this:

 

{"Could not load file or assembly 'Antlr3.Runtime, Version=3.1.3.6002,
Culture=neutral, PublicKeyToken=eb42632606e9261f' or one of its
dependencies. The located assembly's manifest definition does not match the
assembly reference. (Exception from HRESULT: 0x80131040)":"Antlr3.Runtime,
Version=3.1.3.6002, Culture=neutral, PublicKeyToken=eb42632606e9261f"}

 

I've tried replacing the Antlr3.Runtime DLL with the latest I could find
(downloaded from http://www.antlr.org/download/CSharp) and it reports to be
version 3.1.3.42154.  With this version, I still get the exact same error.

 

Does anyone have any suggestions on what I can do to resolve this?

 

Regards,

Brian.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090814/74cc585b/attachment.html 

From sharwell at pixelminegames.com  Fri Aug 14 14:43:33 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Fri, 14 Aug 2009 16:43:33 -0500
Subject: [stringtemplate-interest] Could not load file or
	assimpleAntlr3.Runtime version 3.1.3.6002
In-Reply-To: <022b01ca1d27$29d315b0$7d794110$@com>
References: <022b01ca1d27$29d315b0$7d794110$@com>
Message-ID: <86403CA0939415448BCCB83855EFE09AA68536@Bloodymary.ironwillgames.com>

Hi Brian,

 

I see there's an error in that set of files. Use the same 6 files but
from this archive instead (matching names of the ones in the ST
download). You don't need the rest of the ANTLR-related files from it.

http://www.antlr.org/download/ANTLR-3.1-2009-06-28.7z

 

 

I'll have to fix the ST download this coming week.

 

Sam

 

From: stringtemplate-interest-bounces at antlr.org
[mailto:stringtemplate-interest-bounces at antlr.org] On Behalf Of Brian J.
Sayatovic
Sent: Friday, August 14, 2009 4:36 PM
To: stringtemplate-interest at antlr.org
Subject: [stringtemplate-interest] Could not load file or
assimpleAntlr3.Runtime version 3.1.3.6002

 

I'm trying to use StringTemplate v3.2 (downloaded from
http://www.stringtemplate.org/download/StringTemplate-3.2-2009-06-28.7z)
in my WCF app.  I added references to my project for both
Antlr3.StringTemplate and Antlr3.Runtime as distributed in that zip.
Both DLLs say they are version 3.1.0.0.  However, at runtime, I get
this:

 

{"Could not load file or assembly 'Antlr3.Runtime, Version=3.1.3.6002,
Culture=neutral, PublicKeyToken=eb42632606e9261f' or one of its
dependencies. The located assembly's manifest definition does not match
the assembly reference. (Exception from HRESULT:
0x80131040)":"Antlr3.Runtime, Version=3.1.3.6002, Culture=neutral,
PublicKeyToken=eb42632606e9261f"}

 

I've tried replacing the Antlr3.Runtime DLL with the latest I could find
(downloaded from http://www.antlr.org/download/CSharp) and it reports to
be version 3.1.3.42154.  With this version, I still get the exact same
error.

 

Does anyone have any suggestions on what I can do to resolve this?

 

Regards,

Brian.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090814/115d7b43/attachment.html 

From sharwell at pixelminegames.com  Fri Aug 14 14:47:07 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Fri, 14 Aug 2009 16:47:07 -0500
Subject: [stringtemplate-interest] Could not load file
	orassimpleAntlr3.Runtime version 3.1.3.6002
In-Reply-To: <86403CA0939415448BCCB83855EFE09AA68536@Bloodymary.ironwillgames.com>
References: <022b01ca1d27$29d315b0$7d794110$@com>
	<86403CA0939415448BCCB83855EFE09AA68536@Bloodymary.ironwillgames.com>
Message-ID: <86403CA0939415448BCCB83855EFE09AA68537@Bloodymary.ironwillgames.com>

Hi Brian,

 

Actually, it appears the files are the same. Can you make sure you don't
have any stray project references to another ANTLR runtime dll, and
don't have other versions of the Antlr3.Runtime.dll laying around? I
just used the exact files from that ST archive to compile a grammar
without problems.

 

Thanks,

Sam

 

From: stringtemplate-interest-bounces at antlr.org
[mailto:stringtemplate-interest-bounces at antlr.org] On Behalf Of Sam
Harwell
Sent: Friday, August 14, 2009 4:44 PM
To: Brian J. Sayatovic; stringtemplate-interest at antlr.org
Subject: Re: [stringtemplate-interest] Could not load file
orassimpleAntlr3.Runtime version 3.1.3.6002

 

Hi Brian,

 

I see there's an error in that set of files. Use the same 6 files but
from this archive instead (matching names of the ones in the ST
download). You don't need the rest of the ANTLR-related files from it.

http://www.antlr.org/download/ANTLR-3.1-2009-06-28.7z

 

 

I'll have to fix the ST download this coming week.

 

Sam

 

From: stringtemplate-interest-bounces at antlr.org
[mailto:stringtemplate-interest-bounces at antlr.org] On Behalf Of Brian J.
Sayatovic
Sent: Friday, August 14, 2009 4:36 PM
To: stringtemplate-interest at antlr.org
Subject: [stringtemplate-interest] Could not load file or
assimpleAntlr3.Runtime version 3.1.3.6002

 

I'm trying to use StringTemplate v3.2 (downloaded from
http://www.stringtemplate.org/download/StringTemplate-3.2-2009-06-28.7z)
in my WCF app.  I added references to my project for both
Antlr3.StringTemplate and Antlr3.Runtime as distributed in that zip.
Both DLLs say they are version 3.1.0.0.  However, at runtime, I get
this:

 

{"Could not load file or assembly 'Antlr3.Runtime, Version=3.1.3.6002,
Culture=neutral, PublicKeyToken=eb42632606e9261f' or one of its
dependencies. The located assembly's manifest definition does not match
the assembly reference. (Exception from HRESULT:
0x80131040)":"Antlr3.Runtime, Version=3.1.3.6002, Culture=neutral,
PublicKeyToken=eb42632606e9261f"}

 

I've tried replacing the Antlr3.Runtime DLL with the latest I could find
(downloaded from http://www.antlr.org/download/CSharp) and it reports to
be version 3.1.3.42154.  With this version, I still get the exact same
error.

 

Does anyone have any suggestions on what I can do to resolve this?

 

Regards,

Brian.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090814/d095b69a/attachment.html 

From bsayatovic at creditinfonet.com  Mon Aug 17 07:09:17 2009
From: bsayatovic at creditinfonet.com (Brian J. Sayatovic)
Date: Mon, 17 Aug 2009 10:09:17 -0400
Subject: [stringtemplate-interest] Could not load file
	orassimpleAntlr3.Runtime version 3.1.3.6002
In-Reply-To: <86403CA0939415448BCCB83855EFE09AA68537@Bloodymary.ironwillgames.com>
References: <022b01ca1d27$29d315b0$7d794110$@com>
	<86403CA0939415448BCCB83855EFE09AA68536@Bloodymary.ironwillgames.com>
	<86403CA0939415448BCCB83855EFE09AA68537@Bloodymary.ironwillgames.com>
Message-ID: <024c01ca1f44$4efa8ac0$ecefa040$@com>

Well, I'm also using NHibernate 2.1.0, which includes Antler3.Runtime.Dll
version 3.1.0.39271.  Since StringTemplate claimed it required version
3.1.3.6002, I replaced my DLL with the version that came from the
StringTemplate 3.2 archive.  However, that also failed and when I inspected
its Antlr3.Runtime.Dll, its version was 3.1.0.0 - seemingly also too old.

 

I'll try a clean stand-alone project and see what I can get working.
Meanwhile, what versions of the StringTemplate and Antlr3.Runtime assemblies
are you using?

 

Regards,

Brian.

 

From: Sam Harwell [mailto:sharwell at pixelminegames.com] 
Sent: Friday, August 14, 2009 5:47 PM
To: Sam Harwell; Brian J. Sayatovic; stringtemplate-interest at antlr.org
Subject: RE: [stringtemplate-interest] Could not load file
orassimpleAntlr3.Runtime version 3.1.3.6002

 

Hi Brian,

 

Actually, it appears the files are the same. Can you make sure you don't
have any stray project references to another ANTLR runtime dll, and don't
have other versions of the Antlr3.Runtime.dll laying around? I just used the
exact files from that ST archive to compile a grammar without problems.

 

Thanks,

Sam

 

From: stringtemplate-interest-bounces at antlr.org
[mailto:stringtemplate-interest-bounces at antlr.org] On Behalf Of Sam Harwell
Sent: Friday, August 14, 2009 4:44 PM
To: Brian J. Sayatovic; stringtemplate-interest at antlr.org
Subject: Re: [stringtemplate-interest] Could not load file
orassimpleAntlr3.Runtime version 3.1.3.6002

 

Hi Brian,

 

I see there's an error in that set of files. Use the same 6 files but from
this archive instead (matching names of the ones in the ST download). You
don't need the rest of the ANTLR-related files from it.

http://www.antlr.org/download/ANTLR-3.1-2009-06-28.7z

 

 

I'll have to fix the ST download this coming week.

 

Sam

 

From: stringtemplate-interest-bounces at antlr.org
[mailto:stringtemplate-interest-bounces at antlr.org] On Behalf Of Brian J.
Sayatovic
Sent: Friday, August 14, 2009 4:36 PM
To: stringtemplate-interest at antlr.org
Subject: [stringtemplate-interest] Could not load file or
assimpleAntlr3.Runtime version 3.1.3.6002

 

I'm trying to use StringTemplate v3.2 (downloaded from
http://www.stringtemplate.org/download/StringTemplate-3.2-2009-06-28.7z) in
my WCF app.  I added references to my project for both Antlr3.StringTemplate
and Antlr3.Runtime as distributed in that zip.  Both DLLs say they are
version 3.1.0.0.  However, at runtime, I get this:

 

{"Could not load file or assembly 'Antlr3.Runtime, Version=3.1.3.6002,
Culture=neutral, PublicKeyToken=eb42632606e9261f' or one of its
dependencies. The located assembly's manifest definition does not match the
assembly reference. (Exception from HRESULT: 0x80131040)":"Antlr3.Runtime,
Version=3.1.3.6002, Culture=neutral, PublicKeyToken=eb42632606e9261f"}

 

I've tried replacing the Antlr3.Runtime DLL with the latest I could find
(downloaded from http://www.antlr.org/download/CSharp) and it reports to be
version 3.1.3.42154.  With this version, I still get the exact same error.

 

Does anyone have any suggestions on what I can do to resolve this?

 

Regards,

Brian.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090817/1326275a/attachment.html 

From bsayatovic at creditinfonet.com  Mon Aug 17 08:26:56 2009
From: bsayatovic at creditinfonet.com (Brian J. Sayatovic)
Date: Mon, 17 Aug 2009 11:26:56 -0400
Subject: [stringtemplate-interest] Could not load file
	orassimpleAntlr3.Runtime version 3.1.3.6002
References: <022b01ca1d27$29d315b0$7d794110$@com>
	<86403CA0939415448BCCB83855EFE09AA68536@Bloodymary.ironwillgames.com>
	<86403CA0939415448BCCB83855EFE09AA68537@Bloodymary.ironwillgames.com>
Message-ID: <027a01ca1f4f$27b03fe0$7710bfa0$@com>

Well, I proved that it works just fine when I use a clean, standalone
project.  That means the problem is in my real project.  I also realized
that what I thought was 3.1.0.0 was actually 3.1.3.6002.

 

So now I've put the version StringTemplate wants in place, 3.1.3.6002.
However, now NHibernate 2.1.0 is upset because it wants Antlr3.Runtime
version 3.1.0.39271.

 

Is this DLL hell?

 

Regards,

Brian.

 

From: Brian J. Sayatovic [mailto:bsayatovic at creditinfonet.com] 
Sent: Monday, August 17, 2009 10:09 AM
To: 'Sam Harwell'; 'stringtemplate-interest at antlr.org'
Subject: RE: [stringtemplate-interest] Could not load file
orassimpleAntlr3.Runtime version 3.1.3.6002

 

Well, I'm also using NHibernate 2.1.0, which includes Antler3.Runtime.Dll
version 3.1.0.39271.  Since StringTemplate claimed it required version
3.1.3.6002, I replaced my DLL with the version that came from the
StringTemplate 3.2 archive.  However, that also failed and when I inspected
its Antlr3.Runtime.Dll, its version was 3.1.0.0 - seemingly also too old.

 

I'll try a clean stand-alone project and see what I can get working.
Meanwhile, what versions of the StringTemplate and Antlr3.Runtime assemblies
are you using?

 

Regards,

Brian.

 

From: Sam Harwell [mailto:sharwell at pixelminegames.com] 
Sent: Friday, August 14, 2009 5:47 PM
To: Sam Harwell; Brian J. Sayatovic; stringtemplate-interest at antlr.org
Subject: RE: [stringtemplate-interest] Could not load file
orassimpleAntlr3.Runtime version 3.1.3.6002

 

Hi Brian,

 

Actually, it appears the files are the same. Can you make sure you don't
have any stray project references to another ANTLR runtime dll, and don't
have other versions of the Antlr3.Runtime.dll laying around? I just used the
exact files from that ST archive to compile a grammar without problems.

 

Thanks,

Sam

 

From: stringtemplate-interest-bounces at antlr.org
[mailto:stringtemplate-interest-bounces at antlr.org] On Behalf Of Sam Harwell
Sent: Friday, August 14, 2009 4:44 PM
To: Brian J. Sayatovic; stringtemplate-interest at antlr.org
Subject: Re: [stringtemplate-interest] Could not load file
orassimpleAntlr3.Runtime version 3.1.3.6002

 

Hi Brian,

 

I see there's an error in that set of files. Use the same 6 files but from
this archive instead (matching names of the ones in the ST download). You
don't need the rest of the ANTLR-related files from it.

http://www.antlr.org/download/ANTLR-3.1-2009-06-28.7z

 

 

I'll have to fix the ST download this coming week.

 

Sam

 

From: stringtemplate-interest-bounces at antlr.org
[mailto:stringtemplate-interest-bounces at antlr.org] On Behalf Of Brian J.
Sayatovic
Sent: Friday, August 14, 2009 4:36 PM
To: stringtemplate-interest at antlr.org
Subject: [stringtemplate-interest] Could not load file or
assimpleAntlr3.Runtime version 3.1.3.6002

 

I'm trying to use StringTemplate v3.2 (downloaded from
http://www.stringtemplate.org/download/StringTemplate-3.2-2009-06-28.7z) in
my WCF app.  I added references to my project for both Antlr3.StringTemplate
and Antlr3.Runtime as distributed in that zip.  Both DLLs say they are
version 3.1.0.0.  However, at runtime, I get this:

 

{"Could not load file or assembly 'Antlr3.Runtime, Version=3.1.3.6002,
Culture=neutral, PublicKeyToken=eb42632606e9261f' or one of its
dependencies. The located assembly's manifest definition does not match the
assembly reference. (Exception from HRESULT: 0x80131040)":"Antlr3.Runtime,
Version=3.1.3.6002, Culture=neutral, PublicKeyToken=eb42632606e9261f"}

 

I've tried replacing the Antlr3.Runtime DLL with the latest I could find
(downloaded from http://www.antlr.org/download/CSharp) and it reports to be
version 3.1.3.42154.  With this version, I still get the exact same error.

 

Does anyone have any suggestions on what I can do to resolve this?

 

Regards,

Brian.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090817/b60e8a71/attachment-0001.html 

From jacques.victor at gmail.com  Tue Aug 18 06:38:32 2009
From: jacques.victor at gmail.com (Jacques Victor)
Date: Tue, 18 Aug 2009 15:38:32 +0200
Subject: [stringtemplate-interest] Maps
Message-ID: <755d86880908180638w71119cb1y688b5f1e44139475@mail.gmail.com>

Hi there,

I've recently started using StringTemplate and today have run into a brick
wall...so to speak...

I'm loading my *stg file in .Net (C#) and setting the stringtemplate
placeholder variables via a Dictionary. Once determining a chunk is of type
'ASTExpr', I I'm struggling to determine if that chunk is indeed a map and
therefore not checking against my Dictionary and throwing an error if I
don't find the chunk placeholder variable in the Dictionary.

Is it possible to get all the maps defined in a Stringtemplategroup file or
alternatively as I iterate through the chunks, in the StringTemplate object,
be able to identify a chunk as a map?

I've searched the internet but can't find any enum/type that would make a
map chunk distinguishable, from other chunks, in .Net.

Any help would greatly be appreciated.

Thanks in advance.

Regards
Jacques
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090818/5549b61e/attachment.html 

From parrt at cs.usfca.edu  Wed Aug 19 13:25:33 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 19 Aug 2009 13:25:33 -0700
Subject: [stringtemplate-interest] Maps
In-Reply-To: <755d86880908180638w71119cb1y688b5f1e44139475@mail.gmail.com>
References: <755d86880908180638w71119cb1y688b5f1e44139475@mail.gmail.com>
Message-ID: <BBD27079-F21E-4D66-A04D-0D0785170975@cs.usfca.edu>

see

  	public Map getMap(String name) {}

in STG. or subclass and walk field maps.
T

On Aug 18, 2009, at 6:38 AM, Jacques Victor wrote:

> Hi there,
>
> I've recently started using StringTemplate and today have run into a  
> brick wall...so to speak...
>
> I'm loading my *stg file in .Net (C#) and setting the stringtemplate  
> placeholder variables via a Dictionary. Once determining a chunk is  
> of type 'ASTExpr', I I'm struggling to determine if that chunk is  
> indeed a map and therefore not checking against my Dictionary and  
> throwing an error if I don't find the chunk placeholder variable in  
> the Dictionary.
>
> Is it possible to get all the maps defined in a Stringtemplategroup  
> file or alternatively as I iterate through the chunks, in the  
> StringTemplate object, be able to identify a chunk as a map?
>
> I've searched the internet but can't find any enum/type that would  
> make a map chunk distinguishable, from other chunks, in .Net.
>
> Any help would greatly be appreciated.
>
> Thanks in advance.
>
> Regards
> Jacques
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/stringtemplate-interest


From lars.vonwedel at bayertechnology.com  Wed Aug 19 13:57:06 2009
From: lars.vonwedel at bayertechnology.com (lars.vonwedel at bayertechnology.com)
Date: Wed, 19 Aug 2009 22:57:06 +0200
Subject: [stringtemplate-interest] Using renderers in C#
Message-ID: <OF4D1A2BE8.4BC825B4-ONC1257617.0072F64A-C1257617.00731753@bayer.de>

Hello,

is it possible to use renderers in C# with any of the ports on the web 
page ? I did not get any output from my renderer and remember some 
statement, that early C# ports did not support renderers.

What is the current status on this ?

Freundliche Gr??e / Best Regards
Lars von Wedel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090819/fd1bdd32/attachment.html 

From parrt at cs.usfca.edu  Wed Aug 19 14:02:18 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 19 Aug 2009 14:02:18 -0700
Subject: [stringtemplate-interest] Using renderers in C#
In-Reply-To: <OF4D1A2BE8.4BC825B4-ONC1257617.0072F64A-C1257617.00731753@bayer.de>
References: <OF4D1A2BE8.4BC825B4-ONC1257617.0072F64A-C1257617.00731753@bayer.de>
Message-ID: <8B5B342C-BA09-4F4A-B906-58562729CF68@cs.usfca.edu>

Hi. have you tried the port I put up there a few weeks ago by Sam  
Harwell?
T
On Aug 19, 2009, at 1:57 PM, lars.vonwedel at bayertechnology.com wrote:

>
> Hello,
>
> is it possible to use renderers in C# with any of the ports on the  
> web page ? I did not get any output from my renderer and remember  
> some statement, that early C# ports did not support renderers.
>
> What is the current status on this ?
>
> Freundliche Gr??e / Best Regards
> Lars von Wedel
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/stringtemplate-interest


From sharwell at pixelminegames.com  Wed Aug 19 14:02:46 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Wed, 19 Aug 2009 16:02:46 -0500
Subject: [stringtemplate-interest] Using renderers in C#
In-Reply-To: <OF4D1A2BE8.4BC825B4-ONC1257617.0072F64A-C1257617.00731753@bayer.de>
References: <OF4D1A2BE8.4BC825B4-ONC1257617.0072F64A-C1257617.00731753@bayer.de>
Message-ID: <86403CA0939415448BCCB83855EFE09AA6857E@Bloodymary.ironwillgames.com>

The current C# port should support attribute renderers. Several of them are used in the unit tests, which pass. :)

 

Sam

 

From: stringtemplate-interest-bounces at antlr.org [mailto:stringtemplate-interest-bounces at antlr.org] On Behalf Of lars.vonwedel at bayertechnology.com
Sent: Wednesday, August 19, 2009 3:57 PM
To: stringtemplate-interest at antlr.org
Subject: [stringtemplate-interest] Using renderers in C#

 


Hello, 

is it possible to use renderers in C# with any of the ports on the web page ? I did not get any output from my renderer and remember some statement, that early C# ports did not support renderers. 

What is the current status on this ? 

Freundliche Gr??e / Best Regards
Lars von Wedel

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090819/5cdbbd80/attachment.html 

From parrt at cs.usfca.edu  Wed Aug 19 15:16:45 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 19 Aug 2009 15:16:45 -0700
Subject: [stringtemplate-interest] updated Language Design Patterns
Message-ID: <7B68B703-0FA9-4954-9501-9DF5DDC6C26B@cs.usfca.edu>

Howdy.  updated book:

http://www.pragprog.com/titles/tpdsl/language-design-patterns

Changes in This Release
	? Chapter 12, Generating DSLs. Added a chapter on generating DSLs  
with StringTemplate. It gives a good introduction to ST and shows by  
example how to build templatedriven output models.

Last chapter is short 10 pages...should be done next week.

Ter

From vincedupuis at hotmail.com  Wed Aug 19 18:28:26 2009
From: vincedupuis at hotmail.com (Vincent Dupuis)
Date: Wed, 19 Aug 2009 21:28:26 -0400
Subject: [stringtemplate-interest] Help with recursive template application
Message-ID: <SNT116-W93AD3FB767D45C3701031B6FD0@phx.gbl>


Hi,

I'm trying to pass a "parent" value in a recursive template application
but without success. Here are my templates:

group templates;

mainTemplate(listOfClasses) ::= <<
<listOfClasses:classDeclaration("TopClass"); separator="\n">
>>

classDeclaration(parent) ::= <<
class <it.name> : public <parent>
{
    <it.listOfSubClasses:classDeclaration({<it.name>}); separator="\n">
}
>>

Considering A, B, and C classes are TopClass and that BB class is an inner class of B.

and the output is...

class A : public TopClass
{
}
class B : public TopClass
{
    class BB : public BB
    {
    }
}
class C : public TopClass
{
}


Why I don't get the right value for class BB ?
Like:

    class BB : public B
    {
    }


Somebody knows why?

Thanks,

Vince


_________________________________________________________________
Cr?ez un personnage ? votre image pour votre WL Messenger
http://go.microsoft.com/?linkid=9656622
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090819/63d17e0a/attachment.html 

From jacques.victor at gmail.com  Thu Aug 20 00:27:11 2009
From: jacques.victor at gmail.com (Jacques Victor)
Date: Thu, 20 Aug 2009 09:27:11 +0200
Subject: [stringtemplate-interest] Maps
In-Reply-To: <BBD27079-F21E-4D66-A04D-0D0785170975@cs.usfca.edu>
References: <755d86880908180638w71119cb1y688b5f1e44139475@mail.gmail.com>
	<BBD27079-F21E-4D66-A04D-0D0785170975@cs.usfca.edu>
Message-ID: <755d86880908200027l16b7407am4ee24e325d6e7485@mail.gmail.com>

Hi there,

I've had a look at that function on the STG but my problem exists when
iterating through the ST's chunks. Each chunk object has no clear 'Name'
method from what I can see therefore I cannot pass getMap() the name of the
map.

I see you mentioned a 'Map' object on the getMap() STG return type. The
version of assembly I'm using does not seem to have this object.

Below is a sample of my code to give more context around the question:


*Assemblies: *
antlr.runtime.dll - V 2.7.7.3
StringTemplate.dll - V 3.0.1.6846

*Expected Output:*
My Dog barks.


*C# code snippet:*

Public void Process()
{
    Console.WriteLine(RenderTemplate(new Dictionary<string,
object>(){"AnimalName","Dog"}));
}

public string RenderTemplate(Dictionary<string, object> parameters)
{
    StringTemplateGroup group = new StringTemplateGroup("mygroup",
"c:/temp/my.stg");

    StringTemplate st = group.GetInstanceOf("test1");

    foreach (object chunk in st.Chunks)
    {
       if (chunk != null)
       {
          if (chunk.GetType() == typeof(ASTExpr))
          {
            //
            // Insert code here to determine if chunk is a Map
            //
            string mapName = ((ASTExpr)chunk)*.?????????? *
            /*
                1. chunk.ToString returns "( . soundNameMap ( value
AnimalName ) )"....Based on the sample Template below.
                    I don't want to implement a dirty fix here to strip out
the map name

                2. (((StringTemplateAST)((ASTExpr)(chunk)).AST).getText()
returns "."

                3. (((StringTemplateAST)((ASTExpr)(chunk)).AST).Type returns
int 24. I'm unable to determine what this value maps to?
                    I've searched on the StringTemplate documentation and
can find no enumeration mapping.
            */

            //I do not have a 'Map' object in the assembly version listed
above.
            IDictionary map = group.GetMap(mapName);

            //Don't do anything if the chunk is a map.
            if(map == null))
            {
                // No map found thus, for this example, we assume it's a
placeholder variable in the template
                if(parameters.ContainsKey(placeholder)
                {
                    st.SetAttribute(chunk.ToString(),
parameters[placeholder]);
                }
                else
                {
                    throw new ParameterNotFoundException("Parameter '" +
chunk.ToString() + "' is not in Dictionary.");
                }
            }
          }
        }
    }

    return st.ToString();
}

*STG Template - "my.stg"

*group mygroup;

soundNameMap ::= [
   "Dog":      "barks",
   "Cat": "meows",
    default:   "N/A"
]

test1(AnimalName) ::= <<
My $AnimalName$ $soundNameMap.(AnimalName)$.
>>





2009/8/19 Terence Parr <parrt at cs.usfca.edu>

> see
>
>        public Map getMap(String name) {}
>
> in STG. or subclass and walk field maps.
> T
>
>
> On Aug 18, 2009, at 6:38 AM, Jacques Victor wrote:
>
>  Hi there,
>>
>> I've recently started using StringTemplate and today have run into a brick
>> wall...so to speak...
>>
>> I'm loading my *stg file in .Net (C#) and setting the stringtemplate
>> placeholder variables via a Dictionary. Once determining a chunk is of type
>> 'ASTExpr', I I'm struggling to determine if that chunk is indeed a map and
>> therefore not checking against my Dictionary and throwing an error if I
>> don't find the chunk placeholder variable in the Dictionary.
>>
>> Is it possible to get all the maps defined in a Stringtemplategroup file
>> or alternatively as I iterate through the chunks, in the StringTemplate
>> object, be able to identify a chunk as a map?
>>
>> I've searched the internet but can't find any enum/type that would make a
>> map chunk distinguishable, from other chunks, in .Net.
>>
>> Any help would greatly be appreciated.
>>
>> Thanks in advance.
>>
>> Regards
>> Jacques
>> _______________________________________________
>> stringtemplate-interest mailing list
>> stringtemplate-interest at antlr.org
>> http://www.antlr.org/mailman/listinfo/stringtemplate-interest
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090820/992781be/attachment-0001.html 

From parrt at cs.usfca.edu  Thu Aug 20 11:52:33 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 20 Aug 2009 11:52:33 -0700
Subject: [stringtemplate-interest] Maps
In-Reply-To: <755d86880908200027l16b7407am4ee24e325d6e7485@mail.gmail.com>
References: <755d86880908180638w71119cb1y688b5f1e44139475@mail.gmail.com>
	<BBD27079-F21E-4D66-A04D-0D0785170975@cs.usfca.edu>
	<755d86880908200027l16b7407am4ee24e325d6e7485@mail.gmail.com>
Message-ID: <5511C60C-BEBE-43EE-889E-0482AEF03912@cs.usfca.edu>

  can you tell me why you  need to play around with the implementation  
inside?
Ter
On Aug 20, 2009, at 12:27 AM, Jacques Victor wrote:

> Hi there,
>
> I've had a look at that function on the STG but my problem exists  
> when iterating through the ST's chunks. Each chunk object has no  
> clear 'Name' method from what I can see therefore I cannot pass  
> getMap() the name of the map.
>
> I see you mentioned a 'Map' object on the getMap() STG return type.  
> The version of assembly I'm using does not seem to have this object.
>
> Below is a sample of my code to give more context around the question:
>
>
> Assemblies:
> antlr.runtime.dll - V 2.7.7.3
> StringTemplate.dll - V 3.0.1.6846
>
> Expected Output:
> My Dog barks.
>
>
> C# code snippet:
>
> Public void Process()
> {
>     Console.WriteLine(RenderTemplate(new Dictionary<string, object>() 
> {"AnimalName","Dog"}));
> }
>
> public string RenderTemplate(Dictionary<string, object> parameters)
> {
>     StringTemplateGroup group = new StringTemplateGroup("mygroup",  
> "c:/temp/my.stg");
>
>     StringTemplate st = group.GetInstanceOf("test1");
>
>     foreach (object chunk in st.Chunks)
>     {
>        if (chunk != null)
>        {
>           if (chunk.GetType() == typeof(ASTExpr))
>           {
>             //
>             // Insert code here to determine if chunk is a Map
>             //
>             string mapName = ((ASTExpr)chunk).??????????
>             /*
>                 1. chunk.ToString returns "( . soundNameMap ( value  
> AnimalName ) )"....Based on the sample Template below.
>                     I don't want to implement a dirty fix here to  
> strip out the map name
>
>                 2. (((StringTemplateAST)((ASTExpr) 
> (chunk)).AST).getText() returns "."
>
>                 3. (((StringTemplateAST)((ASTExpr)(chunk)).AST).Type  
> returns int 24. I'm unable to determine what this value maps to?
>                     I've searched on the StringTemplate  
> documentation and can find no enumeration mapping.
>             */
>
>             //I do not have a 'Map' object in the assembly version  
> listed above.
>             IDictionary map = group.GetMap(mapName);
>
>             //Don't do anything if the chunk is a map.
>             if(map == null))
>             {
>                 // No map found thus, for this example, we assume  
> it's a placeholder variable in the template
>                 if(parameters.ContainsKey(placeholder)
>                 {
>                     st.SetAttribute(chunk.ToString(),  
> parameters[placeholder]);
>                 }
>                 else
>                 {
>                     throw new ParameterNotFoundException("Parameter  
> '" + chunk.ToString() + "' is not in Dictionary.");
>                 }
>             }
>           }
>         }
>     }
>
>     return st.ToString();
> }
>
> STG Template - "my.stg"
>
> group mygroup;
>
> soundNameMap ::= [
>    "Dog":      "barks",
>    "Cat": "meows",
>     default:   "N/A"
> ]
>
> test1(AnimalName) ::= <<
> My $AnimalName$ $soundNameMap.(AnimalName)$.
> >>
>
>
>
>
>
> 2009/8/19 Terence Parr <parrt at cs.usfca.edu>
> see
>
>        public Map getMap(String name) {}
>
> in STG. or subclass and walk field maps.
> T
>
>
> On Aug 18, 2009, at 6:38 AM, Jacques Victor wrote:
>
> Hi there,
>
> I've recently started using StringTemplate and today have run into a  
> brick wall...so to speak...
>
> I'm loading my *stg file in .Net (C#) and setting the stringtemplate  
> placeholder variables via a Dictionary. Once determining a chunk is  
> of type 'ASTExpr', I I'm struggling to determine if that chunk is  
> indeed a map and therefore not checking against my Dictionary and  
> throwing an error if I don't find the chunk placeholder variable in  
> the Dictionary.
>
> Is it possible to get all the maps defined in a Stringtemplategroup  
> file or alternatively as I iterate through the chunks, in the  
> StringTemplate object, be able to identify a chunk as a map?
>
> I've searched the internet but can't find any enum/type that would  
> make a map chunk distinguishable, from other chunks, in .Net.
>
> Any help would greatly be appreciated.
>
> Thanks in advance.
>
> Regards
> Jacques
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/stringtemplate-interest
>
>


From parrt at cs.usfca.edu  Thu Aug 20 11:53:22 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 20 Aug 2009 11:53:22 -0700
Subject: [stringtemplate-interest] Help with recursive template
	application
In-Reply-To: <SNT116-W93AD3FB767D45C3701031B6FD0@phx.gbl>
References: <SNT116-W93AD3FB767D45C3701031B6FD0@phx.gbl>
Message-ID: <71E44722-9FF5-47D5-9DB5-7E7AB6C2ADCD@cs.usfca.edu>


On Aug 19, 2009, at 6:28 PM, Vincent Dupuis wrote:

> Hi,
>
> I'm trying to pass a "parent" value in a recursive template  
> application
> but without success. Here are my templates:
>
> group templates;
>
> mainTemplate(listOfClasses) ::= <<
> <listOfClasses:classDeclaration("TopClass"); separator="\n">
> >>

you are passing to parameters here: the iterated value and the string.  
If there is one parameter, the iteration operator sets that sole  
parameter to the iterated value.
T

>
> classDeclaration(parent) ::= <<
> class <it.name> : public <parent>
> {
>     <it.listOfSubClasses:classDeclaration({<it.name>});  
> separator="\n">
> }
> >>
>
> Considering A, B, and C classes are TopClass and that BB class is an  
> inner class of B.
>
> and the output is...
>
> class A : public TopClass
> {
> }
> class B : public TopClass
> {
>     class BB : public BB
>     {
>     }
> }
> class C : public TopClass
> {
> }
>
>
> Why I don't get the right value for class BB ?
> Like:
>
>     class BB : public B
>     {
>     }
>
>
> Somebody knows why?
>
> Thanks,
>
> Vince
>
>
> Cr?ez un personnage ? votre image pour votre WL Messenger Venez voir  
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/stringtemplate-interest


From vincedupuis at hotmail.com  Fri Aug 21 06:40:32 2009
From: vincedupuis at hotmail.com (Vincent Dupuis)
Date: Fri, 21 Aug 2009 09:40:32 -0400
Subject: [stringtemplate-interest] Help with recursive template
 application
In-Reply-To: <71E44722-9FF5-47D5-9DB5-7E7AB6C2ADCD@cs.usfca.edu>
References: <SNT116-W93AD3FB767D45C3701031B6FD0@phx.gbl>
	<71E44722-9FF5-47D5-9DB5-7E7AB6C2ADCD@cs.usfca.edu>
Message-ID: <SNT116-W63DEFFA9DA8D830B2F2184B6FC0@phx.gbl>


Terence, thanks for your reply.

After I read your comments, I tried many combination to make it work
and the only way was to explicitly assign parameters to the template like this:

group templates;

mainTemplate(listOfClasses) ::= <<
<listOfClasses:classDeclaration(iter=it, parent="TopClass"); separator="\n">
>>

classDeclaration(iter, parent) ::= <<
class <iter.name> : public <parent>
{
    <iter.listOfSubClasses:classDeclaration(parent=iter.name, iter=it); separator="\n">
}
>>

Notice that the parameters are reversed in the second call to classDeclaration().
It  doesn't work if I don't reverse them!?

Anyway it works, but I don't know if it's normal.
Maybe I missed something.

Vincent



> CC: stringtemplate-interest at antlr.org
> From: parrt at cs.usfca.edu
> To: vincedupuis at hotmail.com
> Subject: Re: [stringtemplate-interest] Help with recursive template application
> Date: Thu, 20 Aug 2009 11:53:22 -0700
> 
> 
> On Aug 19, 2009, at 6:28 PM, Vincent Dupuis wrote:
> 
> > Hi,
> >
> > I'm trying to pass a "parent" value in a recursive template  
> > application
> > but without success. Here are my templates:
> >
> > group templates;
> >
> > mainTemplate(listOfClasses) ::= <<
> > <listOfClasses:classDeclaration("TopClass"); separator="\n">
> > >>
> 
> you are passing to parameters here: the iterated value and the string.  
> If there is one parameter, the iteration operator sets that sole  
> parameter to the iterated value.
> T
> 
> >
> > classDeclaration(parent) ::= <<
> > class <it.name> : public <parent>
> > {
> >     <it.listOfSubClasses:classDeclaration({<it.name>});  
> > separator="\n">
> > }
> > >>
> >
> > Considering A, B, and C classes are TopClass and that BB class is an  
> > inner class of B.
> >
> > and the output is...
> >
> > class A : public TopClass
> > {
> > }
> > class B : public TopClass
> > {
> >     class BB : public BB
> >     {
> >     }
> > }
> > class C : public TopClass
> > {
> > }
> >
> >
> > Why I don't get the right value for class BB ?
> > Like:
> >
> >     class BB : public B
> >     {
> >     }
> >
> >
> > Somebody knows why?
> >
> > Thanks,
> >
> > Vince
> >
> >
> > Cr?ez un personnage ? votre image pour votre WL Messenger Venez voir  
> > _______________________________________________
> > stringtemplate-interest mailing list
> > stringtemplate-interest at antlr.org
> > http://www.antlr.org/mailman/listinfo/stringtemplate-interest
> 

_________________________________________________________________
Attention ? tous les Humains. Nous sommes vos photos. Lib?rez-nous de vos disques durs.
http://go.microsoft.com/?linkid=9666050
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090821/22bc4aeb/attachment.html 

From parrt at cs.usfca.edu  Fri Aug 21 11:21:35 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 21 Aug 2009 11:21:35 -0700
Subject: [stringtemplate-interest] Help with recursive template
	application
In-Reply-To: <SNT116-W63DEFFA9DA8D830B2F2184B6FC0@phx.gbl>
References: <SNT116-W93AD3FB767D45C3701031B6FD0@phx.gbl>
	<71E44722-9FF5-47D5-9DB5-7E7AB6C2ADCD@cs.usfca.edu>
	<SNT116-W63DEFFA9DA8D830B2F2184B6FC0@phx.gbl>
Message-ID: <1BD63BF6-5F4A-4A82-96D4-CBE5904F592E@cs.usfca.edu>


On Aug 21, 2009, at 6:40 AM, Vincent Dupuis wrote:

> Terence, thanks for your reply.
>
> After I read your comments, I tried many combination to make it work
> and the only way was to explicitly assign parameters to the template  
> like this:
>
> group templates;
>
> mainTemplate(listOfClasses) ::= <<
> <listOfClasses:classDeclaration(iter=it, parent="TopClass");  
> separator="\n">
> >>

> <listOfClasses:classDeclaration(parent="TopClass"); separator="\n">

and

> classDeclaration(parent) ::= <<

will work if youuse <it> in classDeclaration.

>
> classDeclaration(iter, parent) ::= <<
> class <iter.name> : public <parent>
> {
>     <iter.listOfSubClasses:classDeclaration(parent=iter.name,  
> iter=it); separator="\n">
> }
> >>
>
> Notice that the parameters are reversed in the second call to  
> classDeclaration().
> It doesn't work if I don't reverse them!?

nor should you expect it to.  no assumed order of operations even in  
param list. it has to pick one and it does in order.

T

>
> Anyway it works, but I don't know if it's normal.
> Maybe I missed something.
>
> Vincent
>
>
>
> > CC: stringtemplate-interest at antlr.org
> > From: parrt at cs.usfca.edu
> > To: vincedupuis at hotmail.com
> > Subject: Re: [stringtemplate-interest] Help with recursive  
> template application
> > Date: Thu, 20 Aug 2009 11:53:22 -0700
> >
> >
> > On Aug 19, 2009, at 6:28 PM, Vincent Dupuis wrote:
> >
> > > Hi,
> > >
> > > I'm trying to pass a "parent" value in a recursive template
> > > application
> > > but without success. Here are my templates:
> > >
> > > group templates;
> > >
> > > mainTemplate(listOfClasses) ::= <<
> > > <listOfClasses:classDeclaration("TopClass"); separator="\n">
> > > >>
> >
> > you are passing to parameters here: the iterated value and the  
> string.
> > If there is one parameter, the iteration operator sets that sole
> > parameter to the iterated value.
> > T
> >
> > >
> > > classDeclaration(parent) ::= <<
> > > class <it.name> : public <parent>
> > > {
> > > <it.listOfSubClasses:classDeclaration({<it.name>});
> > > separator="\n">
> > > }
> > > >>
> > >
> > > Considering A, B, and C classes are TopClass and that BB class  
> is an
> > > inner class of B.
> > >
> > > and the output is...
> > >
> > > class A : public TopClass
> > > {
> > > }
> > > class B : public TopClass
> > > {
> > > class BB : public BB
> > > {
> > > }
> > > }
> > > class C : public TopClass
> > > {
> > > }
> > >
> > >
> > > Why I don't get the right value for class BB ?
> > > Like:
> > >
> > > class BB : public B
> > > {
> > > }
> > >
> > >
> > > Somebody knows why?
> > >
> > > Thanks,
> > >
> > > Vince
> > >
> > >
> > > Cr?ez un personnage ? votre image pour votre WL Messenger Venez  
> voir
> > > _______________________________________________
> > > stringtemplate-interest mailing list
> > > stringtemplate-interest at antlr.org
> > > http://www.antlr.org/mailman/listinfo/stringtemplate-interest
> >
>
> Attention ? tous les Humains. Nous sommes vos photos. Lib?rez-nous  
> de vos disques durs.


From vincedupuis at hotmail.com  Sat Aug 22 05:02:14 2009
From: vincedupuis at hotmail.com (Vincent Dupuis)
Date: Sat, 22 Aug 2009 08:02:14 -0400
Subject: [stringtemplate-interest] Help with recursive template
 application
In-Reply-To: <593C0795-49A8-425D-A6A9-7198ACDAFB57@cs.usfca.edu>
References: <SNT116-W93AD3FB767D45C3701031B6FD0@phx.gbl>
	<71E44722-9FF5-47D5-9DB5-7E7AB6C2ADCD@cs.usfca.edu>
	<SNT116-W63DEFFA9DA8D830B2F2184B6FC0@phx.gbl>
	<1BD63BF6-5F4A-4A82-96D4-CBE5904F592E@cs.usfca.edu>
	<SNT116-W38D9E02BDCD140D89A3A31B6FC0@phx.gbl>
	<593C0795-49A8-425D-A6A9-7198ACDAFB57@cs.usfca.edu>
Message-ID: <SNT116-W113BCE479F72B8596B2F8BB6FB0@phx.gbl>


If you have time to try it, here is the code:

Main.java :

package javaapplication2;

import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import org.antlr.stringtemplate.StringTemplate;
import org.antlr.stringtemplate.StringTemplateGroup;

public class Main
{
    public static void main(String[] args)
    {
        StringTemplateGroup stg;
        stg = openTemplateFile("templates.stg");

        StringTemplate aClass;
        StringTemplate aClass2;
        List list = new ArrayList();
        List list2 = new ArrayList();

        aClass = new StringTemplate();
        aClass.setAttribute("name", "A");
        list.add(aClass);

        aClass2 = new StringTemplate();
        aClass2.setAttribute("name", "InnerB");
        list2.add(aClass2);

        aClass = new StringTemplate();
        aClass.setAttribute("name", "B");
        aClass.setAttribute("listOfSubClasses", list2);
        list.add(aClass);

        aClass = new StringTemplate();
        aClass.setAttribute("name", "C");
        list.add(aClass);

        StringTemplate st = stg.getInstanceOf("mainTemplate");
        st.setAttribute("listOfClasses", list);

        System.out.println(st.toString());
    }

    private static StringTemplateGroup openTemplateFile(String fileName)
    {
        try
        {
            FileReader fileReader;
            fileReader = new FileReader(fileName);

            StringTemplateGroup templates;
            templates = new StringTemplateGroup(fileReader);

            fileReader.close();

            return templates;
        }
        catch (FileNotFoundException e)
        {
            System.err.println(e.toString());
            System.exit(1);
            return null;
        }
        catch (IOException e)
        {
            System.err.println(e.toString());
            System.exit(1);
            return null;
        }
    }
}


templates.stg :

group templates;

mainTemplate(listOfClasses) ::= <<
<listOfClasses:classDeclaration(parent="TopClass"); separator="\n">
>>

classDeclaration(parent) ::= <<
class <it.name> : public <parent>
{
    <it.listOfSubClasses:classDeclaration(parent=it.name); separator="\n">
}
>>


Expected output for class B :

class B : public TopClass
{
    class InnerB : public B
    {
    }
}


V

From: parrt at cs.usfca.edu
To: vincedupuis at hotmail.com
Subject: Re: [stringtemplate-interest] Help with recursive template application
Date: Fri, 21 Aug 2009 17:09:12 -0700

verrrry strange. not sure what's up.Ter
On Aug 21, 2009, at 4:24 PM, Vincent Dupuis wrote:I retried just to be sure, but it doesn't work.

I removed the iter parameter and use <it> in classDeclaration 
and I still don't get the good output. (see blow).

V


> CC: stringtemplate-interest at antlr.org
> From: parrt at cs.usfca.edu
> To: vincedupuis at hotmail.com
> Subject: Re: [stringtemplate-interest] Help with recursive template application
> Date: Fri, 21 Aug 2009 11:21:35 -0700
> 
> 
> On Aug 21, 2009, at 6:40 AM, Vincent Dupuis wrote:
> 
> > Terence, thanks for your reply.
> >
> > After I read your comments, I tried many combination to make it work
> > and the only way was to explicitly assign parameters to the template 
> > like this:
> >
> > group templates;
> >
> > mainTemplate(listOfClasses) ::= <<
> > <listOfClasses:classDeclaration(iter=it, parent="TopClass"); 
> > separator="\n">
> > >>
> 
> > <listOfClasses:classDeclaration(parent="TopClass"); separator="\n">
> 
> and
> 
> > classDeclaration(parent) ::= <<
> 
> will work if youuse <it> in classDeclaration.
> 
> >
> > classDeclaration(iter, parent) ::= <<
> > class <iter.name> : public <parent>
> > {
> > <iter.listOfSubClasses:classDeclaration(parent=iter.name, 
> > iter=it); separator="\n">
> > }
> > >>
> >
> > Notice that the parameters are reversed in the second call to 
> > classDeclaration().
> > It doesn't work if I don't reverse them!?
> 
> nor should you expect it to. no assumed order of operations even in 
> param list. it has to pick one and it does in order.
> 
> T
> 
> >
> > Anyway it works, but I don't know if it's normal.
> > Maybe I missed something.
> >
> > Vincent
> >
> >
> >
> > > CC: stringtemplate-interest at antlr.org
> > > From: parrt at cs.usfca.edu
> > > To: vincedupuis at hotmail.com
> > > Subject: Re: [stringtemplate-interest] Help with recursive 
> > template application
> > > Date: Thu, 20 Aug 2009 11:53:22 -0700
> > >
> > >
> > > On Aug 19, 2009, at 6:28 PM, Vincent Dupuis wrote:
> > >
> > > > Hi,
> > > >
> > > > I'm trying to pass a "parent" value in a recursive template
> > > > application
> > > > but without success. Here are my templates:
> > > >
> > > > group templates;
> > > >
> > > > mainTemplate(listOfClasses) ::= <<
> > > > <listOfClasses:classDeclaration("TopClass"); separator="\n">
> > > > >>
> > >
> > > you are passing to parameters here: the iterated value and the 
> > string.
> > > If there is one parameter, the iteration operator sets that sole
> > > parameter to the iterated value.
> > > T
> > >
> > > >
> > > > classDeclaration(parent) ::= <<
> > > > class <it.name> : public <parent>
> > > > {
> > > > <it.listOfSubClasses:classDeclaration({<it.name>});
> > > > separator="\n">
> > > > }
> > > > >>
> > > >
> > > > Considering A, B, and C classes are TopClass and that BB class 
> > is an
> > > > inner class of B.
> > > >
> > > > and the output is...
> > > >
> > > > class A : public TopClass
> > > > {
> > > > }
> > > > class B : public TopClass
> > > > {
> > > > class BB : public BB
> > > > {
> > > > }
> > > > }
> > > > class C : public TopClass
> > > > {
> > > > }
> > > >
> > > >
> > > > Why I don't get the right value for class BB ?
> > > > Like:
> > > >
> > > > class BB : public B
> > > > {
> > > > }
> > > >
> > > >
> > > > Somebody knows why?
> > > >
> > > > Thanks,
> > > >
> > > > Vince
> > > >
> > > >
> > > > Cr?ez un personnage ? votre image pour votre WL Messenger Venez 
> > voir
> > > > _______________________________________________
> > > > stringtemplate-interest mailing list
> > > > stringtemplate-interest at antlr.org
> > > > http://www.antlr.org/mailman/listinfo/stringtemplate-interest
> > >
> >
> > Attention ? tous les Humains. Nous sommes vos photos. Lib?rez-nous 
> > de vos disques durs.
> 

Nous sommes vos photos. Partagez-nous d?s maintenant avec Windows Live Photos.

_________________________________________________________________
Nous sommes vos photos. Partagez-nous d?s maintenant avec Windows Live Photos.
http://go.microsoft.com/?linkid=9666051
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090822/8f2c48e5/attachment.html 

From parrt at cs.usfca.edu  Sat Aug 22 10:37:46 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 22 Aug 2009 10:37:46 -0700
Subject: [stringtemplate-interest] Help with recursive template
	application
In-Reply-To: <SNT116-W113BCE479F72B8596B2F8BB6FB0@phx.gbl>
References: <SNT116-W93AD3FB767D45C3701031B6FD0@phx.gbl>
	<71E44722-9FF5-47D5-9DB5-7E7AB6C2ADCD@cs.usfca.edu>
	<SNT116-W63DEFFA9DA8D830B2F2184B6FC0@phx.gbl>
	<1BD63BF6-5F4A-4A82-96D4-CBE5904F592E@cs.usfca.edu>
	<SNT116-W38D9E02BDCD140D89A3A31B6FC0@phx.gbl>
	<593C0795-49A8-425D-A6A9-7198ACDAFB57@cs.usfca.edu>
	<SNT116-W113BCE479F72B8596B2F8BB6FB0@phx.gbl>
Message-ID: <DE8515E3-66CE-4F16-9911-815D847FDF79@cs.usfca.edu>

might be bug where i ignore arg if only one formal arg and you iterate.
Ter
On Aug 22, 2009, at 5:02 AM, Vincent Dupuis wrote:

> If you have time to try it, here is the code:
>
> Main.java :
>
> package javaapplication2;
>
> import java.io.FileNotFoundException;
> import java.io.FileReader;
> import java.io.IOException;
> import java.util.ArrayList;
> import java.util.List;
> import org.antlr.stringtemplate.StringTemplate;
> import org.antlr.stringtemplate.StringTemplateGroup;
>
> public class Main
> {
>     public static void main(String[] args)
>     {
>         StringTemplateGroup stg;
>         stg = openTemplateFile("templates.stg");
>
>         StringTemplate aClass;
>         StringTemplate aClass2;
>         List list = new ArrayList();
>         List list2 = new ArrayList();
>
>         aClass = new StringTemplate();
>         aClass.setAttribute("name", "A");
>         list.add(aClass);
>
>         aClass2 = new StringTemplate();
>         aClass2.setAttribute("name", "InnerB");
>         list2.add(aClass2);
>
>         aClass = new StringTemplate();
>         aClass.setAttribute("name", "B");
>         aClass.setAttribute("listOfSubClasses", list2);
>         list.add(aClass);
>
>         aClass = new StringTemplate();
>         aClass.setAttribute("name", "C");
>         list.add(aClass);
>
>         StringTemplate st = stg.getInstanceOf("mainTemplate");
>         st.setAttribute("listOfClasses", list);
>
>         System.out.println(st.toString());
>     }
>
>     private static StringTemplateGroup openTemplateFile(String  
> fileName)
>     {
>         try
>         {
>             FileReader fileReader;
>             fileReader = new FileReader(fileName);
>
>             StringTemplateGroup templates;
>             templates = new StringTemplateGroup(fileReader);
>
>             fileReader.close();
>
>             return templates;
>         }
>         catch (FileNotFoundException e)
>         {
>             System.err.println(e.toString());
>             System.exit(1);
>             return null;
>         }
>         catch (IOException e)
>         {
>             System.err.println(e.toString());
>             System.exit(1);
>             return null;
>         }
>     }
> }
>
>
> templates.stg :
>
> group templates;
>
> mainTemplate(listOfClasses) ::= <<
> <listOfClasses:classDeclaration(parent="TopClass"); separator="\n">
> >>
>
> classDeclaration(parent) ::= <<
> class <it.name> : public <parent>
> {
>     <it.listOfSubClasses:classDeclaration(parent=it.name);  
> separator="\n">
> }
> >>
>
>
> Expected output for class B :
>
> class B : public TopClass
> {
>     class InnerB : public B
>     {
>     }
> }
>
>
> V
>
> From: parrt at cs.usfca.edu
> To: vincedupuis at hotmail.com
> Subject: Re: [stringtemplate-interest] Help with recursive template  
> application
> Date: Fri, 21 Aug 2009 17:09:12 -0700
>
> verrrry strange. not sure what's up.
> Ter
> On Aug 21, 2009, at 4:24 PM, Vincent Dupuis wrote:
>
> I retried just to be sure, but it doesn't work.
>
> I removed the iter parameter and use <it> in classDeclaration
> and I still don't get the good output. (see blow).
>
> V
>
>
> > CC: stringtemplate-interest at antlr.org
> > From: parrt at cs.usfca.edu
> > To: vincedupuis at hotmail.com
> > Subject: Re: [stringtemplate-interest] Help with recursive  
> template application
> > Date: Fri, 21 Aug 2009 11:21:35 -0700
> >
> >
> > On Aug 21, 2009, at 6:40 AM, Vincent Dupuis wrote:
> >
> > > Terence, thanks for your reply.
> > >
> > > After I read your comments, I tried many combination to make it  
> work
> > > and the only way was to explicitly assign parameters to the  
> template
> > > like this:
> > >
> > > group templates;
> > >
> > > mainTemplate(listOfClasses) ::= <<
> > > <listOfClasses:classDeclaration(iter=it, parent="TopClass");
> > > separator="\n">
> > > >>
> >
> > > <listOfClasses:classDeclaration(parent="TopClass");  
> separator="\n">
> >
> > and
> >
> > > classDeclaration(parent) ::= <<
> >
> > will work if youuse <it> in classDeclaration.
> >
> > >
> > > classDeclaration(iter, parent) ::= <<
> > > class <iter.name> : public <parent>
> > > {
> > > <iter.listOfSubClasses:classDeclaration(parent=iter.name,
> > > iter=it); separator="\n">
> > > }
> > > >>
> > >
> > > Notice that the parameters are reversed in the second call to
> > > classDeclaration().
> > > It doesn't work if I don't reverse them!?
> >
> > nor should you expect it to. no assumed order of operations even in
> > param list. it has to pick one and it does in order.
> >
> > T
> >
> > >
> > > Anyway it works, but I don't know if it's normal.
> > > Maybe I missed something.
> > >
> > > Vincent
> > >
> > >
> > >
> > > > CC: stringtemplate-interest at antlr.org
> > > > From: parrt at cs.usfca.edu
> > > > To: vincedupuis at hotmail.com
> > > > Subject: Re: [stringtemplate-interest] Help with recursive
> > > template application
> > > > Date: Thu, 20 Aug 2009 11:53:22 -0700
> > > >
> > > >
> > > > On Aug 19, 2009, at 6:28 PM, Vincent Dupuis wrote:
> > > >
> > > > > Hi,
> > > > >
> > > > > I'm trying to pass a "parent" value in a recursive template
> > > > > application
> > > > > but without success. Here are my templates:
> > > > >
> > > > > group templates;
> > > > >
> > > > > mainTemplate(listOfClasses) ::= <<
> > > > > <listOfClasses:classDeclaration("TopClass"); separator="\n">
> > > > > >>
> > > >
> > > > you are passing to parameters here: the iterated value and the
> > > string.
> > > > If there is one parameter, the iteration operator sets that sole
> > > > parameter to the iterated value.
> > > > T
> > > >
> > > > >
> > > > > classDeclaration(parent) ::= <<
> > > > > class <it.name> : public <parent>
> > > > > {
> > > > > <it.listOfSubClasses:classDeclaration({<it.name>});
> > > > > separator="\n">
> > > > > }
> > > > > >>
> > > > >
> > > > > Considering A, B, and C classes are TopClass and that BB class
> > > is an
> > > > > inner class of B.
> > > > >
> > > > > and the output is...
> > > > >
> > > > > class A : public TopClass
> > > > > {
> > > > > }
> > > > > class B : public TopClass
> > > > > {
> > > > > class BB : public BB
> > > > > {
> > > > > }
> > > > > }
> > > > > class C : public TopClass
> > > > > {
> > > > > }
> > > > >
> > > > >
> > > > > Why I don't get the right value for class BB ?
> > > > > Like:
> > > > >
> > > > > class BB : public B
> > > > > {
> > > > > }
> > > > >
> > > > >
> > > > > Somebody knows why?
> > > > >
> > > > > Thanks,
> > > > >
> > > > > Vince
> > > > >
> > > > >
> > > > > Cr?ez un personnage ? votre image pour votre WL Messenger  
> Venez
> > > voir
> > > > > _______________________________________________
> > > > > stringtemplate-interest mailing list
> > > > > stringtemplate-interest at antlr.org
> > > > > http://www.antlr.org/mailman/listinfo/stringtemplate-interest
> > > >
> > >
> > > Attention ? tous les Humains. Nous sommes vos photos. Lib?rez-nous
> > > de vos disques durs.
> >
>
> Nous sommes vos photos. Partagez-nous d?s maintenant avec Windows  
> Live Photos.
>
>
> Nous sommes vos photos. Partagez-nous d?s maintenant avec Windows  
> Live Photos.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090822/54aa140c/attachment-0001.html 

From tdjastrzebski at yahoo.com  Sun Aug 23 06:48:32 2009
From: tdjastrzebski at yahoo.com (Tomasz Jastrzebski)
Date: Sun, 23 Aug 2009 06:48:32 -0700 (PDT)
Subject: [stringtemplate-interest] .Net port 3.2
Message-ID: <940824.615.qm@web52105.mail.re2.yahoo.com>

There is one fundamental problem I came across trying to evaluate StringTemplate .Net port version 3.2.
Assembly?seems to require specific antlr runtime version. That is, project with newer antlr runtime will not build. That precludes use in my project.
?
Tomasz


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090823/1f631914/attachment.html 

From tdjastrzebski at yahoo.com  Sun Aug 23 08:20:39 2009
From: tdjastrzebski at yahoo.com (Tomasz Jastrzebski)
Date: Sun, 23 Aug 2009 08:20:39 -0700 (PDT)
Subject: [stringtemplate-interest] getting started - string template 3
Message-ID: <76177.77596.qm@web52109.mail.re2.yahoo.com>

Hello Developers,
?
I am just trying to evaluate string template 3. I downloaded and compiled .Net solution. In the "StringTemplateTests (VS2005)" project I found some simple NUnit tests. The first problem I came across is that although those tests run they do not yeld expected results.?The finall st.ToString() call returns empty string - example below. Am I missing something?
?
Thomas
?
string templateText = "group speed;\n"
+ "literal() : <<A template with just a single longish literal in it>>\n"
+ "bold() : << <b>$attr$</b> >>\n"
+ "st1(name) : <<A template with just a single attr $name$ in it>>\n"
+ "st2(names) : <<$names:bold()$>>\n";
StringTemplateGroup group = new StringTemplateGroup(new System.IO.StringReader(templateText));
StringTemplate st = group.GetInstanceOf("literal");
string text = st.ToString();


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090823/c6fe0af2/attachment.html 

From parrt at cs.usfca.edu  Sun Aug 23 13:01:37 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 23 Aug 2009 13:01:37 -0700
Subject: [stringtemplate-interest] Help with recursive template
	application
In-Reply-To: <SNT116-W63DEFFA9DA8D830B2F2184B6FC0@phx.gbl>
References: <SNT116-W93AD3FB767D45C3701031B6FD0@phx.gbl>
	<71E44722-9FF5-47D5-9DB5-7E7AB6C2ADCD@cs.usfca.edu>
	<SNT116-W63DEFFA9DA8D830B2F2184B6FC0@phx.gbl>
Message-ID: <14758B93-5324-46EB-83A2-0727C7385AD2@cs.usfca.edu>


On Aug 21, 2009, at 6:40 AM, Vincent Dupuis wrote:
> classDeclaration(iter, parent) ::= <<
> class <iter.name> : public <parent>
> {
>     <iter.listOfSubClasses:classDeclaration(parent=iter.name,  
> iter=it); separator="\n">
> }
> >>

I just remember. "it" is created in the ":" operation but is not yet  
available when the args are evaluated. so "it" in this case does not  
refer to the  listOfSubClasses:classDeclaration iteration.
Ter
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090823/f9bb6fff/attachment.html 

From sharwell at pixelminegames.com  Sun Aug 23 14:41:21 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Sun, 23 Aug 2009 16:41:21 -0500
Subject: [stringtemplate-interest] .Net port 3.2
In-Reply-To: <940824.615.qm@web52105.mail.re2.yahoo.com>
References: <940824.615.qm@web52105.mail.re2.yahoo.com>
Message-ID: <86403CA0939415448BCCB83855EFE09AA6859B@Bloodymary.ironwillgames.com>

Hi Tomasz,

 

The Antlr3.StringTemplate.dll build references Antlr3.Runtime.dll, which
is included in the same download.

 

Are you having trouble building StringTemplate itself, or just problems
referencing it from another project?

 

Sam

 

From: Tomasz Jastrzebski [mailto:tdjastrzebski at yahoo.com] 
Sent: Sunday, August 23, 2009 8:49 AM
To: stringtemplate-interest at antlr.org
Cc: Sam Harwell
Subject: .Net port 3.2

 

There is one fundamental problem I came across trying to evaluate
StringTemplate .Net port version 3.2.

Assembly seems to require specific antlr runtime version. That is,
project with newer antlr runtime will not build. That precludes use in
my project.

 

Tomasz

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090823/d482d0a4/attachment.html 

From tdjastrzebski at yahoo.com  Mon Aug 24 01:35:29 2009
From: tdjastrzebski at yahoo.com (Tomasz Jastrzebski)
Date: Mon, 24 Aug 2009 01:35:29 -0700 (PDT)
Subject: [stringtemplate-interest] .Net port 3.2
In-Reply-To: <86403CA0939415448BCCB83855EFE09AA6859B@Bloodymary.ironwillgames.com>
Message-ID: <213732.12292.qm@web52109.mail.re2.yahoo.com>

Hi Sam,
?
Apparently I am having problems with versions. It seems that your build requires runtime version 3.1.3.6002 - at least this is what ildasm shows. I can use your antlr runtime with my project (although it is Pixel Mine copyrighted) but then the rest of the project containing generated lexers and parsers does not build - Antlr.Runtime.Collections namespace is missing from your runtime.
I see you also renamed StringTemplate namespace to ST.?I would strongly advice against such changes, althoug I understand it is a private build.
Generally, it seems that .Net dimension of this project shows early signs of versionitis.
?
Thomas


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090824/1d4b58a8/attachment.html 

From sharwell at pixelminegames.com  Mon Aug 24 05:23:42 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Mon, 24 Aug 2009 07:23:42 -0500
Subject: [stringtemplate-interest] .Net port 3.2
In-Reply-To: <213732.12292.qm@web52109.mail.re2.yahoo.com>
References: <86403CA0939415448BCCB83855EFE09AA6859B@Bloodymary.ironwillgames.com>
	<213732.12292.qm@web52109.mail.re2.yahoo.com>
Message-ID: <86403CA0939415448BCCB83855EFE09AA6859C@Bloodymary.ironwillgames.com>

Hi Thomas,

 

I need to spend some time checking on the assembly versions. The CSharp
and CSharp3 runtimes are not interchangeable, but they should not cause
a conflict if you reference both of them from the same assembly.

 

For StringTemplate, I will probably rename the StringTemplate class to
Template, StringTemplateGroup to TemplateGroup, etc., and move
everything to the Antlr3.StringTemplate namespace (now without the name
conflict).

 

Thanks for the feedback. I'll let you know how it goes. =)

 

Sam

 

From: Tomasz Jastrzebski [mailto:tdjastrzebski at yahoo.com] 
Sent: Monday, August 24, 2009 3:35 AM
To: stringtemplate-interest at antlr.org
Cc: Sam Harwell
Subject: RE: .Net port 3.2

 

Hi Sam,
 
Apparently I am having problems with versions. It seems that your build
requires runtime version 3.1.3.6002 - at least this is what ildasm
shows. I can use your antlr runtime with my project (although it is
Pixel Mine copyrighted) but then the rest of the project containing
generated lexers and parsers does not build - Antlr.Runtime.Collections
namespace is missing from your runtime.
I see you also renamed StringTemplate namespace to ST. I would strongly
advice against such changes, althoug I understand it is a private build.
Generally, it seems that .Net dimension of this project shows early
signs of versionitis.
 
Thomas

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090824/2572be25/attachment.html 

From vincedupuis at hotmail.com  Mon Aug 24 12:16:11 2009
From: vincedupuis at hotmail.com (Vincent Dupuis)
Date: Mon, 24 Aug 2009 15:16:11 -0400
Subject: [stringtemplate-interest] Help with recursive template
 application
In-Reply-To: <14758B93-5324-46EB-83A2-0727C7385AD2@cs.usfca.edu>
References: <SNT116-W93AD3FB767D45C3701031B6FD0@phx.gbl>
	<71E44722-9FF5-47D5-9DB5-7E7AB6C2ADCD@cs.usfca.edu>
	<SNT116-W63DEFFA9DA8D830B2F2184B6FC0@phx.gbl>
	<14758B93-5324-46EB-83A2-0727C7385AD2@cs.usfca.edu>
Message-ID: <SNT116-W36B61A285E038859A016AFB6F90@phx.gbl>


Ok, but why, if I reverse the parameters, the "iter.name" value passed is not good?

Like this:

    classDeclaration(iter, parent) ::= <<
    class <iter.name> : public <parent>
    {
        <iter.listOfSubClasses:classDeclaration(iter=it, parent=iter.name); separator="\n">
    }
    >>

I think there is something special with the first parameter and this behavior is not compatible
with recursive template application with more than one parameter.

vi


CC: stringtemplate-interest at antlr.org
From: parrt at cs.usfca.edu
To: vincedupuis at hotmail.com
Subject: Re: [stringtemplate-interest] Help with recursive template application
Date: Sun, 23 Aug 2009 13:01:37 -0700


On Aug 21, 2009, at 6:40 AM, Vincent Dupuis wrote:classDeclaration(iter, parent) ::= <<
class <iter.name> : public <parent>
{
    <iter.listOfSubClasses:classDeclaration(parent=iter.name, iter=it); separator="\n">
}
>>
I just remember. "it" is created in the ":" operation but is not yet available when the args are evaluated. so "it" in this case does not refer to the  listOfSubClasses:classDeclaration iteration.Ter
_________________________________________________________________
Attention ? tous les Humains. Nous sommes vos photos. Lib?rez-nous de vos disques durs.
http://go.microsoft.com/?linkid=9666050
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090824/1f490286/attachment.html 

From parrt at cs.usfca.edu  Mon Aug 24 14:46:35 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 24 Aug 2009 14:46:35 -0700
Subject: [stringtemplate-interest] Help with recursive template
	application
In-Reply-To: <SNT116-W36B61A285E038859A016AFB6F90@phx.gbl>
References: <SNT116-W93AD3FB767D45C3701031B6FD0@phx.gbl>
	<71E44722-9FF5-47D5-9DB5-7E7AB6C2ADCD@cs.usfca.edu>
	<SNT116-W63DEFFA9DA8D830B2F2184B6FC0@phx.gbl>
	<14758B93-5324-46EB-83A2-0727C7385AD2@cs.usfca.edu>
	<SNT116-W36B61A285E038859A016AFB6F90@phx.gbl>
Message-ID: <C9BBF139-8E52-40DF-A455-A071A32EC6D4@cs.usfca.edu>


On Aug 24, 2009, at 12:16 PM, Vincent Dupuis wrote:

> Ok, but why, if I reverse the parameters, the "iter.name" value  
> passed is not good?

yeah, something is hosed.
Ter
>
> Like this:
>
>     classDeclaration(iter, parent) ::= <<
>     class <iter.name> : public <parent>
>     {
>         <iter.listOfSubClasses:classDeclaration(iter=it,  
> parent=iter.name); separator="\n">
>     }
>     >>
>
> I think there is something special with the first parameter and this  
> behavior is not compatible
> with recursive template application with more than one parameter.
>
> vi
>
>
> CC: stringtemplate-interest at antlr.org
> From: parrt at cs.usfca.edu
> To: vincedupuis at hotmail.com
> Subject: Re: [stringtemplate-interest] Help with recursive template  
> application
> Date: Sun, 23 Aug 2009 13:01:37 -0700
>
>
> On Aug 21, 2009, at 6:40 AM, Vincent Dupuis wrote:
> classDeclaration(iter, parent) ::= <<
> class <iter.name> : public <parent>
> {
>     <iter.listOfSubClasses:classDeclaration(parent=iter.name,  
> iter=it); separator="\n">
> }
> >>
>
> I just remember. "it" is created in the ":" operation but is not yet  
> available when the args are evaluated. so "it" in this case does not  
> refer to the  listOfSubClasses:classDeclaration iteration.
> Ter
>
> Attention ? tous les Humains. Nous sommes vos photos. Lib?rez-nous  
> de vos disques durs.


From rvilleneuve at harriscomputer.com  Fri Aug 28 14:40:49 2009
From: rvilleneuve at harriscomputer.com (Rene Villeneuve)
Date: Fri, 28 Aug 2009 17:40:49 -0400
Subject: [stringtemplate-interest] Default Null Option
Message-ID: <6F6AFB7B237FD14987F69DCAB61034FD012F93D9@SOLSTICE.harriscomputer.com>

Hi guys, 

I am not sure if it's the right place to ask my question, but I could
not find a forum anywhere on the site. 

I just started to use string template and while I was able to get
everything set up and working, I hit a little snag earlier today. In
essence, all I'm trying to do is to ensure that every time there is a
null value, instead of skipping it will format correctly with an empty
value. While I can do it through the template, I want to do it
programmatically to ensure that it's always there, as I am not the only
one developing templates. I got it working by creating an anonymous
class, extending StringTemplate, that got an overridden parseAction in
which I modified the list of option coming from parse.action by adding
null every time. 

I also had to modify the way the parser was working to make sure it
would spawn sub template with the valid overwritten parseAction method.
Now it's working, but I am sure I am not using the right method. There
must be a simpler way to add a default option that will be applied to
every element in the template, I just cannot find it. Any form of help
would be appreciated.

Thanks!

Rene Villeneuve


--------------------------------------------------------------------------
Rene Villeneuve
Software Engineer II
 
P: 613-226-5511 ext 2106
F: 
E: rvilleneuve at harriscomputer.com
http://www.harriscomputer.com/ 
 1 Antares Drive, Suite 400
Ottawa, ON
K2E 8C4
http://www.harrisnorthstar.com
 
Join us for our 2009 Customer Conference in Nashville, TN, October 21 - 23!

This message is intended exclusively for the individual or entity to which it is addressed. This communication may contain information that is proprietary, privileged or confidential or otherwise legally exempt from disclosure. If you are not the named addressee, you are not authorized to read, print, retain, copy or disseminate this message or any part of it. If you have received this message in error, please notify the sender immediately by e-mail and delete all copies of the message.
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090828/56ec00b8/attachment.html 

