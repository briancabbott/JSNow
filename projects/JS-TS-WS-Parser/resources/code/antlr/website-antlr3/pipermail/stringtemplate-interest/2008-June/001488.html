<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [stringtemplate-interest] what is the use for embeddedInstances ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:stringtemplate-interest%40antlr.org?Subject=Re:%20%5Bstringtemplate-interest%5D%20what%20is%20the%20use%20for%20embeddedInstances%20%3F&In-Reply-To=%3C48446AA0.1000001%40ning.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="001489.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[stringtemplate-interest] what is the use for embeddedInstances ?</H1>
    <B>Jax Law</B> 
    <A HREF="mailto:stringtemplate-interest%40antlr.org?Subject=Re:%20%5Bstringtemplate-interest%5D%20what%20is%20the%20use%20for%20embeddedInstances%20%3F&In-Reply-To=%3C48446AA0.1000001%40ning.com%3E"
       TITLE="[stringtemplate-interest] what is the use for embeddedInstances ?">jax at ning.com
       </A><BR>
    <I>Mon Jun  2 14:48:16 PDT 2008</I>
    <P><UL>
        
        <LI>Next message: <A HREF="001489.html">[stringtemplate-interest] what is the use for embeddedInstances	?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1488">[ date ]</a>
              <a href="thread.html#1488">[ thread ]</a>
              <a href="subject.html#1488">[ subject ]</a>
              <a href="author.html#1488">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

In StringTemplate.java, what is the purpose of the LinkedList 
embeddedInstances ?
I've searched the source tree and there is no usage of this LinkedList. 
We've found
an obscure memory leak issue with embeddedInstances where the list has grown
to 10 million entries. The issue is that when 
StringTemplate.getInstanceOf() method
is called, the copy it returns is not a true deep copy. It has many 
references to the
original StringTemplate via the chunks Expr, StringTemplateAST ...etc. 
One of
these references is accessible to a write() method call stack and thus 
build up the
embeddedInstances LinkedList.

Since no usage can be found, I am assuming we can make addEmbeddedInstance
a No-Op in our own build ?

Thanks !

Jax

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="001489.html">[stringtemplate-interest] what is the use for embeddedInstances	?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1488">[ date ]</a>
              <a href="thread.html#1488">[ thread ]</a>
              <a href="subject.html#1488">[ subject ]</a>
              <a href="author.html#1488">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest">More information about the stringtemplate-interest
mailing list</a><br>
</body></html>
