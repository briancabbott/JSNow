From bsl04 at uark.edu  Wed Apr  4 01:58:30 2007
From: bsl04 at uark.edu (Brian Lewis)
Date: Wed, 04 Apr 2007 03:58:30 -0500
Subject: [stringtemplate-interest] problem with null handling in parallel
	iteration
Message-ID: <20070404035830.723326f0@doses.lan>

Would someone with a few free minutes *please* check the following
StringTemplate group and java code? I think it demonstrates a problem
with null handling in parallel iteration.

The output is
field1, label1, , 40
field2, label2, , 

I hope you will agree that the output *should* be
field1, label1, , null
field2, label2, , 40

test.stg:
group test;
/* "hack" gets me null. why isn't there an \N? */
hack ::= ["x":, default:]
test() ::= <<
$
["field1", "field2"],
["label1", "label2"],
[""      , ""      ],
[hack.x  , "40"    ]:
{name, label, required, size|
$name$, $label$, $required$, $size$
};null="null"$
>>

Test.java:
import java.io.*;
import java.util.*;
import org.antlr.stringtemplate.*;
import org.antlr.stringtemplate.language.*;

public final class Test
{
  public static void main(String[] arguments)
  {
    Test t = new Test();
    t.test();
  }

  public void test()
  {
    InputStream ins = getClass().getResourceAsStream("test.stg");
    InputStreamReader in = new InputStreamReader(ins);
    StringTemplateGroup g = new StringTemplateGroup(
      in,
      DefaultTemplateLexer.class
    );
    StringTemplate st = g.getInstanceOf("test");
    System.out.println(st.toString());
  }
}

From jorge.vargas at gmail.com  Wed Apr  4 20:35:38 2007
From: jorge.vargas at gmail.com (Jorge Vargas)
Date: Wed, 4 Apr 2007 23:35:38 -0400
Subject: [stringtemplate-interest] "push" methods for the "pull template"
	recovering addict.
Message-ID: <32822fe60704042035w6fc6696v5e8368a84f5b73ab@mail.gmail.com>

Hi

first of all I'll like to thank you guys, I have to admit I got into
stringtemplate because I need "just another template engine" and since
this project is java I figure that if it was ported to python it
should be good :p. Then after reading some of the documents on the
site I notice how different it is and I'm liking it a lot.

Although I'm puzzle by the following situation: I know I know this is
wrong but what I want to do, in so mytical templating engine, will be
something like this:

#foreach( $line in $accounts )
   $n.desc     $n.quantity      #n.total
#end

note the whitespace, I do need them and they must be fix, (requirement)

after much digging I find out in this PDF
http://www.cs.usfca.edu/~parrt/papers/mvc.templates.pdf (sidenote:
great document, is there a more cpu friendly version of it?)
and in page 9, item 9.1 to be exact it finally gives me a way of how
to implement what I need without using pull methods.

my point is that this type of construct is very common, in fact is the
second thing most engines show in their tutorials, and that is where
the subject of this emails comes in, why not have an article/wiki
page/documentation with a brief translation of the common pull methods
to stringtemplates push idioms, I believe this will help new people
get involve into using the project faster which will end up in a
better wider spread of the engine.

ones again thanks for this great software it's nice to see good,
profound theory backed code.

From bc4all at gmail.com  Fri Apr  6 12:25:50 2007
From: bc4all at gmail.com (Bogdan Calmac)
Date: Fri, 6 Apr 2007 15:25:50 -0400
Subject: [stringtemplate-interest] Filtering a list
Message-ID: <23074d1f0704061225uf218c4s15a630ebc393fe7b@mail.gmail.com>

Assume we have a Person object:

public class Person {
  public String name
  public boolean smart
}

and then let's try to print out just the smart people in a list:

<persons: {<if(it.smart)><it.name><endif>}; separator=",">

this would create something like

Bill,,Bob,,,Jim

with empty spaces for the items filtered out. Could you suggest some
elegant manner to do this?

Thanks,

Bogdan Calmac

From parrt at cs.usfca.edu  Tue Apr 10 17:13:21 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 10 Apr 2007 17:13:21 -0700
Subject: [stringtemplate-interest] wiki public signup available
Message-ID: <42462EBF-32C8-41C5-8FC9-54929E528776@cs.usfca.edu>

Hi,

I've decided to reopen public signup for the wiki.  Too much of a  
hassle for people to sign up otherwise.  I was getting bogus signups  
(from a bot) that consumed all 200 users every time I deleted them.   
So, I'll just keep deleting them.  Please sign up quick if you want  
to be able to add FAQ entries or other content to the wiki.

http://www.antlr.org/wiki/signup.action

Thanks!
Ter

From bsl04 at uark.edu  Wed Apr 11 02:32:16 2007
From: bsl04 at uark.edu (Brian Lewis)
Date: Wed, 11 Apr 2007 04:32:16 -0500
Subject: [stringtemplate-interest] Filtering a list
In-Reply-To: <23074d1f0704061225uf218c4s15a630ebc393fe7b@mail.gmail.com>
References: <23074d1f0704061225uf218c4s15a630ebc393fe7b@mail.gmail.com>
Message-ID: <20070411043216.5749cfde@doses.lan>

On Fri, 06 Apr 2007 15:25:50 -0400
Bogdan Calmac <bc4all at gmail.com> wrote:

> <persons: {<if(it.smart)><it.name><endif>}; separator=",">
> this would create something like
> Bill,,Bob,,,Jim
> with empty spaces for the items filtered out. Could you suggest some
> elegant manner to do this?

I guess I think you should make a smartPeople collection and pass *that*
to ST rather than trying to do it within ST.

From parrt at cs.usfca.edu  Wed Apr 11 07:36:17 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 11 Apr 2007 07:36:17 -0700
Subject: [stringtemplate-interest] Filtering a list
In-Reply-To: <20070411043216.5749cfde@doses.lan>
References: <23074d1f0704061225uf218c4s15a630ebc393fe7b@mail.gmail.com>
	<20070411043216.5749cfde@doses.lan>
Message-ID: <F5548D08-D11E-47EC-826F-3125A1620C69@cs.usfca.edu>


On Apr 11, 2007, at 2:32 AM, Brian Lewis wrote:

> On Fri, 06 Apr 2007 15:25:50 -0400
> Bogdan Calmac <bc4all at gmail.com> wrote:
>
>> <persons: {<if(it.smart)><it.name><endif>}; separator=",">
>> this would create something like
>> Bill,,Bob,,,Jim
>> with empty spaces for the items filtered out. Could you suggest some
>> elegant manner to do this?
>
> I guess I think you should make a smartPeople collection and pass  
> *that*
> to ST rather than trying to do it within ST.

Hi. Sorry for my silence on the list. just finished the ANTLR book  
(with ST stuff in it) and am racing to fix bugs in ANTLR by end of  
month when I need to release v3.

As your issue, if you send a valid String with no chars in it, ST  
will still print it.  Can you send null instead?

Ter


From andrew.melnichuk at gmail.com  Fri Apr 13 06:55:51 2007
From: andrew.melnichuk at gmail.com (Andrew Melnichuk)
Date: Fri, 13 Apr 2007 16:55:51 +0300
Subject: [stringtemplate-interest] Can't parse chunk exception.
Message-ID: <2d29e63a0704130655u73aafa33g326613c4c0886ce0@mail.gmail.com>

Hi, i'm newbie to ST.

I have exception, when trying to load template group and can't understand
whats wrong. Here is my code:

Template group file

--------------------------------
group master;

main() ::= "<p>Hello</p>"
---------------------------------

My C# code is

    class Program
    {
        static void Main(string[] args)
        {
            string viewPath = "../../views/master.stg";

            TextReader reader = new StreamReader(viewPath);

            StringTemplateGroup stgMaster = new StringTemplateGroup(reader);
// EXCEPTION here
        }
    }

The stack trace is

Can't parse chunk: /p
   at Antlr.StringTemplate.Language.ActionLexer.nextToken() in
D:\Downloads\www.stringtemplate.org\StringTemplate\Antlr.StringTemplate.Language\ActionLexer.cs:line
278
   at antlr.TokenBuffer.fill(Int32 amount)
   at antlr.TokenBuffer.LA(Int32 i)
   at antlr.LLkParser.LA(Int32 i)
   at Antlr.StringTemplate.Language.ActionParser.action() in
D:\Downloads\www.stringtemplate.org\StringTemplate\Antlr.StringTemplate.Language\ActionParser.cs:line
192
   at Antlr.StringTemplate.StringTemplate.ParseAction(String action) in
D:\Downloads\www.stringtemplate.org\StringTemplate\Antlr.StringTemplate\StringTemplate.cs:line
1195
problem parsing template 'main'
   at Antlr.StringTemplate.Language.TemplateParser.action(StringTemplate
self) in
D:\Downloads\www.stringtemplate.org\StringTemplate\Antlr.StringTemplate.Language\TemplateParser.cs:line
199
   at Antlr.StringTemplate.Language.TemplateParser.template(StringTemplate
self) in D:\Downloads\www.stringtemplate.org\
StringTemplate\Antlr.StringTemplate.Language\TemplateParser.cs:line 160
   at Antlr.StringTemplate.StringTemplate.BreakTemplateIntoChunks() in
D:\Downloads\www.stringtemplate.org\StringTemplate\Antlr.StringTemplate\StringTemplate.cs:line
1168

-- 
Best regards,
Andrew Melnichuk
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org:8080/pipermail/stringtemplate-interest/attachments/20070413/664748e2/attachment.html 

From parrt at cs.usfca.edu  Fri Apr 13 10:24:48 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 13 Apr 2007 10:24:48 -0700
Subject: [stringtemplate-interest] Filtering a list
In-Reply-To: <23074d1f0704130733s1ddfa5f0od1569f5b3e1b4d3@mail.gmail.com>
References: <23074d1f0704061225uf218c4s15a630ebc393fe7b@mail.gmail.com>
	<20070411043216.5749cfde@doses.lan>
	<F5548D08-D11E-47EC-826F-3125A1620C69@cs.usfca.edu>
	<23074d1f0704120825k5578def7w68e4706caa02d66d@mail.gmail.com>
	<56C3EB0D-0841-4C41-9A3A-FA0B1EDDFB7F@cs.usfca.edu>
	<23074d1f0704130733s1ddfa5f0od1569f5b3e1b4d3@mail.gmail.com>
Message-ID: <D6FBE9C6-624F-4CD1-94A7-7D20EEFEE3D5@cs.usfca.edu>


On Apr 13, 2007, at 7:33 AM, Bogdan Calmac wrote:

> Hi Ter,
>
> Thanks, but actually I need the oposite here, to force a null instead
> of empty string.

Ah. then you need to set null not "" I'm afraid.

> Again, in my example I have a list of persons with a "smart" boolean
> field and I want to print a comma separated list of the smart people.
> This requires to filter out those persons which are not "smart", which
> means returning null from an <if> expression so that I don't get empty
> slots in the list.

Oh, that's easy:

$names{n | $if(n.smart)$$n$$endif$}; separator=", "$

Let me know if that works for you.  Assuming names i s alist of Name  
objects or whatever.

Ter


From parrt at cs.usfca.edu  Fri Apr 13 10:39:22 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 13 Apr 2007 10:39:22 -0700
Subject: [stringtemplate-interest] Can't parse chunk exception.
In-Reply-To: <2d29e63a0704130655u73aafa33g326613c4c0886ce0@mail.gmail.com>
References: <2d29e63a0704130655u73aafa33g326613c4c0886ce0@mail.gmail.com>
Message-ID: <9382F391-4C99-4A25-8D6D-33A0E062B53B@cs.usfca.edu>

Hi. It is using <...> as the expression delimiters.  That is the  
default with STG(reader).  You can tell it to use the $..$ though  
with an argument.
Ter

On Apr 13, 2007, at 6:55 AM, Andrew Melnichuk wrote:

> Hi, i'm newbie to ST.
>
> I have exception, when trying to load template group and can't  
> understand whats wrong. Here is my code:
>
> Template group file
>
> --------------------------------
> group master;
>
> main() ::= "<p>Hello</p>"
> ---------------------------------
>
> My C# code is
>
>     class Program
>     {
>         static void Main(string[] args)
>         {
>             string viewPath = "../../views/master.stg";
>
>             TextReader reader = new StreamReader(viewPath);
>
>             StringTemplateGroup stgMaster = new StringTemplateGroup 
> (reader); // EXCEPTION here
>         }
>     }
>
> The stack trace is
>
> Can't parse chunk: /p
>    at Antlr.StringTemplate.Language.ActionLexer.nextToken() in D: 
> \Downloads\www.stringtemplate.org\StringTemplate 
> \Antlr.StringTemplate.Language\ActionLexer.cs:line 278
>    at antlr.TokenBuffer.fill (Int32 amount)
>    at antlr.TokenBuffer.LA(Int32 i)
>    at antlr.LLkParser.LA(Int32 i)
>    at Antlr.StringTemplate.Language.ActionParser.action() in D: 
> \Downloads\www.stringtemplate.org\StringTemplate 
> \Antlr.StringTemplate.Language\ActionParser.cs:line 192
>    at Antlr.StringTemplate.StringTemplate.ParseAction(String  
> action) in D:\Downloads\www.stringtemplate.org\StringTemplate 
> \Antlr.StringTemplate\StringTemplate.cs:line 1195
> problem parsing template 'main'
>    at Antlr.StringTemplate.Language.TemplateParser.action 
> (StringTemplate self) in D:\Downloads\www.stringtemplate.org 
> \StringTemplate\Antlr.StringTemplate.Language 
> \TemplateParser.cs:line 199
>    at Antlr.StringTemplate.Language.TemplateParser.template  
> (StringTemplate self) in D:\Downloads\www.stringtemplate.org\
> StringTemplate\Antlr.StringTemplate.Language\TemplateParser.cs:line  
> 160
>    at Antlr.StringTemplate.StringTemplate.BreakTemplateIntoChunks()  
> in D:\Downloads\www.stringtemplate.org\StringTemplate 
> \Antlr.StringTemplate\StringTemplate.cs:line 1168
>
> -- 
> Best regards,
> Andrew Melnichuk
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest


From jo at joanpujol.cat  Sat Apr 14 02:34:01 2007
From: jo at joanpujol.cat (Joan Pujol)
Date: Sat, 14 Apr 2007 11:34:01 +0200
Subject: [stringtemplate-interest] [antlr-interest] StringTemplate
	functions like capitalize()?
In-Reply-To: <4601916E.1030903@n4te.com>
References: <d2d18a10703180416v7d08ff14tf6946476b4c4cbfe@mail.gmail.com>
	<EFDD3522-AC13-46F8-9D65-0E8DCE89FB10@cs.usfca.edu>
	<4601916E.1030903@n4te.com>
Message-ID: <d2d18a10704140234r346b319aqb9cb62452d045ef9@mail.gmail.com>

On 3/21/07, Nate <misc at n4te.com> wrote:
>
> Calling an arbitrary method from ST is against the rules, but the action
> the OP is trying to perform is for display only. The only real solution
> is to get the ST source and add a capitalizeFirst function. Other
> solutions are clunky at the very least.
>
> On a similar note, I have found the lack of ST expressiveness a problem.
> I have lists of objects that contain the data I want to display. In many
> cases the objects contain lists of other objects. When the data in my
> objects are not in such a format that ST can display them like I want, I
> find I have to modify my objects to expose the data in the way ST needs.
> What this means is that the UI layer is affecting my API. For simple
> templates, values can be retreived from an object and put in various
> template attributes. But more complex object graphs make this very messy
> and difficult, if not impossible.
>
> I am all for separating model and view, but I don't think view-only
> logic expressiveness should be lost. As it is now with ST being
> relatively strict with enforcing the "rules", there are still various
> ways I can break the separation. 100% fool proof would make ST too
> restrictive and difficult to use. You have made certain sacrifices and
> this makes sense. I think ST should follow all the rules out of the box
> and enforce them to the best of its ability, but make it easier to
> implement view-only logic. It should be easy to add a view method like
> capitalizeFirst.
>
> -Nate


I completely agree with you. Strict enforcing of view/model separation is
good... But so much strict enforcing can be bad If it obligate you to modify
the model to made the view happy.

Cheers,

-- 
Joan Jes?s Pujol Espinar
http://www.joanpujol.cat
http://lujop.deviantart.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org:8080/pipermail/stringtemplate-interest/attachments/20070414/78f18b27/attachment.html 

From joanpujol at gmail.com  Sat Apr 14 02:35:05 2007
From: joanpujol at gmail.com (Joan Pujol)
Date: Sat, 14 Apr 2007 11:35:05 +0200
Subject: [stringtemplate-interest] Fwd: [antlr-interest] StringTemplate
	functions like capitalize()?
In-Reply-To: <d2d18a10704140234r346b319aqb9cb62452d045ef9@mail.gmail.com>
References: <d2d18a10703180416v7d08ff14tf6946476b4c4cbfe@mail.gmail.com>
	<EFDD3522-AC13-46F8-9D65-0E8DCE89FB10@cs.usfca.edu>
	<4601916E.1030903@n4te.com>
	<d2d18a10704140234r346b319aqb9cb62452d045ef9@mail.gmail.com>
Message-ID: <d2d18a10704140235k2ba2b174xc405884902b032e7@mail.gmail.com>

Hello,

I completely agree with you. Strict enforcing of view/model separation is
good... But so much strict enforcing can be bad If it obligate you to modify
the model to made the view happy.

Cheers,

On 3/21/07, Nate <misc at n4te.com> wrote:
>
> Calling an arbitrary method from ST is against the rules, but the action
> the OP is trying to perform is for display only. The only real solution
> is to get the ST source and add a capitalizeFirst function. Other
> solutions are clunky at the very least.
>
> On a similar note, I have found the lack of ST expressiveness a problem.
> I have lists of objects that contain the data I want to display. In many
> cases the objects contain lists of other objects. When the data in my
> objects are not in such a format that ST can display them like I want, I
> find I have to modify my objects to expose the data in the way ST needs.
> What this means is that the UI layer is affecting my API. For simple
> templates, values can be retreived from an object and put in various
> template attributes. But more complex object graphs make this very messy
> and difficult, if not impossible.
>
> I am all for separating model and view, but I don't think view-only
> logic expressiveness should be lost. As it is now with ST being
> relatively strict with enforcing the "rules", there are still various
> ways I can break the separation. 100% fool proof would make ST too
> restrictive and difficult to use. You have made certain sacrifices and
> this makes sense. I think ST should follow all the rules out of the box
> and enforce them to the best of its ability, but make it easier to
> implement view-only logic. It should be easy to add a view method like
> capitalizeFirst.
>
> -Nate



-- 
Joan Jes?s Pujol Espinar
http://www.joanpujol.cat
http://lujop.deviantart.com


-- 
Joan Jes?s Pujol Espinar
http://www.joanpujol.cat
http://lujop.deviantart.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org:8080/pipermail/stringtemplate-interest/attachments/20070414/80c6d02f/attachment.html 

From andrew.melnichuk at gmail.com  Mon Apr 16 03:29:40 2007
From: andrew.melnichuk at gmail.com (Andrew Melnichuk)
Date: Mon, 16 Apr 2007 13:29:40 +0300
Subject: [stringtemplate-interest] Referense template in other file.
Message-ID: <2d29e63a0704160329n438abbb3o8116fb7fc83ba844@mail.gmail.com>

Hi.

I have a template group file 'basegroup.stg' and it contains definition of
simple template

group basegroup;

page1() ::= "$sharedview/somecontent()$"
There is a subdirectory called 'sharedview' which contains template file '
somecontent.st' with simple content:

<p>Some_content_to_show</p>

I'm trying to load tempalte group and display 'page1' template, and i'm
awaiting that it displays content from referenced tempalte as well, but i
have an error:

StringTemplateGroup.RegisterDefaultLexer(typeof(DefaultTemplateLexer));
StringTemplateGroup.RegisterGroupLoader(new CommonGroupLoader(
ConsoleErrorListener.DefaultConsoleListener));
StringTemplateGroup stg = StringTemplateGroup.LoadGroup("basegroup");
StringTemplate stPage = stg.GetInstanceOf("page1");

Console.WriteLine(stPage.ToString()); // exception !!!!

Unhandled Exception: Antlr.StringTemplate.TemplateLoadException: Can't load
template 'sharedview/somecontent.st'; context is [page1]

I suppose that referenced template must be defined in same group, correct me
if i'm wrong. But is there any way to solve above problem? I just dont want
to define all shared templates in same base group file.

-- 
Best regards,
Andrew Melnichuk
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org:8080/pipermail/stringtemplate-interest/attachments/20070416/5d738f9b/attachment.html 

From parrt at cs.usfca.edu  Wed Apr 18 12:53:07 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 18 Apr 2007 12:53:07 -0700
Subject: [stringtemplate-interest] Referense template in other file.
In-Reply-To: <2d29e63a0704160329n438abbb3o8116fb7fc83ba844@mail.gmail.com>
References: <2d29e63a0704160329n438abbb3o8116fb7fc83ba844@mail.gmail.com>
Message-ID: <EC0945A6-11C8-4360-A86B-073E0631F56A@cs.usfca.edu>


On Apr 16, 2007, at 3:29 AM, Andrew Melnichuk wrote:

> Hi.
>
> I have a template group file 'basegroup.stg' and it contains  
> definition of simple template
>
> group basegroup;
> page1() ::= "$sharedview/somecontent()$"
>
> There is a subdirectory called 'sharedview' which contains template  
> file 'somecontent.st' with simple content:
>
> <p>Some_content_to_show</ p>
>
> I'm trying to load tempalte group and display 'page1' template, and  
> i'm awaiting that it displays content from referenced tempalte as  
> well, but i have an error:

Hi Andrew,

The issue is that ST assumes all stuff is in the group; I don't mix/ 
max files and groups at the moment.  My original co-designer, Tom  
Burns, and I are thinking of reworking this so groups just act like  
directories.

Sorry for the hassle.  You can just override the loadtemplate method  
in STG I think though.

Ter

From parrt at cs.usfca.edu  Wed Apr 18 12:57:16 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 18 Apr 2007 12:57:16 -0700
Subject: [stringtemplate-interest] "push" methods for the "pull
	template" recovering addict.
In-Reply-To: <32822fe60704042035w6fc6696v5e8368a84f5b73ab@mail.gmail.com>
References: <32822fe60704042035w6fc6696v5e8368a84f5b73ab@mail.gmail.com>
Message-ID: <C85392C2-2CE3-49E3-BB3C-CE9D0CA9F633@cs.usfca.edu>


On Apr 4, 2007, at 8:35 PM, Jorge Vargas wrote:

> Hi
>
> first of all I'll like to thank you guys, I have to admit I got into
> stringtemplate because I need "just another template engine" and since
> this project is java I figure that if it was ported to python it
> should be good :p. Then after reading some of the documents on the
> site I notice how different it is and I'm liking it a lot.

Hi Jorge.  Welcome.

hooray!  Glad you like it.

> Although I'm puzzle by the following situation: I know I know this is
> wrong but what I want to do, in so mytical templating engine, will be
> something like this:
>
> #foreach( $line in $accounts )
>    $n.desc     $n.quantity      #n.total
> #end
>
> note the whitespace, I do need them and they must be fix,  
> (requirement)

Ok, no problem.

<accounts:{ n |
    <n.desc>     <n.quantity>      <n.total>
}>

>
> after much digging I find out in this PDF
> http://www.cs.usfca.edu/~parrt/papers/mvc.templates.pdf (sidenote:
> great document, is there a more cpu friendly version of it?)

Is a really slow to render? strange.  Well, perhaps print it out.

> and in page 9, item 9.1 to be exact it finally gives me a way of how
> to implement what I need without using pull methods.
>
> my point is that this type of construct is very common, in fact is the
> second thing most engines show in their tutorials, and that is where
> the subject of this emails comes in, why not have an article/wiki
> page/documentation with a brief translation of the common pull methods
> to stringtemplates push idioms, I believe this will help new people
> get involve into using the project faster which will end up in a
> better wider spread of the engine.

How about adding one? that would be great.  You can sign up for an  
account here:

http://www.antlr.org/wiki/signup.action

> ones again thanks for this great software it's nice to see good,
> profound theory backed code.

thanks! I really appreciate the feedback.  Thank you.

Ter


From andrew.melnichuk at gmail.com  Thu Apr 19 12:20:12 2007
From: andrew.melnichuk at gmail.com (Andrew Melnichuk)
Date: Thu, 19 Apr 2007 22:20:12 +0300
Subject: [stringtemplate-interest] Referense template in other file.
In-Reply-To: <EC0945A6-11C8-4360-A86B-073E0631F56A@cs.usfca.edu>
References: <2d29e63a0704160329n438abbb3o8116fb7fc83ba844@mail.gmail.com>
	<EC0945A6-11C8-4360-A86B-073E0631F56A@cs.usfca.edu>
Message-ID: <2d29e63a0704191220icc541edub3bc1134ae02376a@mail.gmail.com>

Thanks Terence. I have solved this problem by creating base group, which
contains all shared templates i need and deriving from it.

I have another question.

Lets assume i have  a simple group definition:

group simplegroup;

mypage(title, content) ::= <<
<html>
    <title>$title$</title>
    <body>
        $content$
    </body>
</html>
>>

Documentation says that i can set default value for the formal parameters of
template. So i could rewrite my template as:

mypage(title = "Default Page", content = "Default Content") ::= <<
.............
>>

But can i set other template, defined in the same group, as default value?
Something like this:

mypage(title = "Default Page", content = defaultContent()) ::= <<
.............
>>

defaultContent() ::= "Default Content"

I have tried this and got the error. However, i have tried to pass template
defined in derived group into referenced template defined in base group, as
argument and it works.

Sorry for plenty of questions :) I'm just evaluating ST# to use as view
engine in my projects, trying to learn it and understand what is the best
way to organize templates.

On 4/18/07, Terence Parr <parrt at cs.usfca.edu> wrote:
>
>
> On Apr 16, 2007, at 3:29 AM, Andrew Melnichuk wrote:
>
> > Hi.
> >
> > I have a template group file 'basegroup.stg' and it contains
> > definition of simple template
> >
> > group basegroup;
> > page1() ::= "$sharedview/somecontent()$"
> >
> > There is a subdirectory called 'sharedview' which contains template
> > file 'somecontent.st' with simple content:
> >
> > <p>Some_content_to_show</ p>
> >
> > I'm trying to load tempalte group and display 'page1' template, and
> > i'm awaiting that it displays content from referenced tempalte as
> > well, but i have an error:
>
> Hi Andrew,
>
> The issue is that ST assumes all stuff is in the group; I don't mix/
> max files and groups at the moment.  My original co-designer, Tom
> Burns, and I are thinking of reworking this so groups just act like
> directories.
>
> Sorry for the hassle.  You can just override the loadtemplate method
> in STG I think though.
>
> Ter
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest
>



-- 
Best regards,
Andrew Melnichuk
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org:8080/pipermail/stringtemplate-interest/attachments/20070419/031b2066/attachment.html 

From andrew.melnichuk at gmail.com  Fri Apr 20 01:56:04 2007
From: andrew.melnichuk at gmail.com (Andrew Melnichuk)
Date: Fri, 20 Apr 2007 11:56:04 +0300
Subject: [stringtemplate-interest] Attributes in derived templates.
Message-ID: <2d29e63a0704200156m7287e098gdbb0a5f30482434c@mail.gmail.com>

Hi all.

I have a simple base group defined:
-------------
group basepage;

page() ::= <<
<html>
    $someContent()$
</html>
>>

someContent() ::= "Base Content"
-----------

I also have derived group defined, which overrides content template:

-----------
group concretepage : basepage;

someContent(attr) ::= "$attr$"
-----------

I want to render a page, and i want it uses a derived content template, with
passed attribute's value, so in code i'm doing next:

            StringTemplateGroup.RegisterDefaultLexer
(typeof(DefaultTemplateLexer));
            StringTemplateGroup.RegisterGroupLoader(loader);

            StringTemplateGroup stg = StringTemplateGroup.LoadGroup
("concretepage");

            StringTemplate stPage = stg.GetInstanceOf("page");
            StringTemplate stContent = stg.GetInstanceOf("someContent");
            stContent.SetAttribute("attr", "Derrived Content");

            Console.WriteLine(stPage.ToString());

I'm expecting that derived template will get attributes its value, but it
does not. So, result i'm having is "<html></html>", but expected
"<html>Derrived Content</html>".

Am i doing something wrong?
-- 
Best regards,
Andrew Melnichuk
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org:8080/pipermail/stringtemplate-interest/attachments/20070420/cef55ac1/attachment.html 

From parrt at cs.usfca.edu  Sun Apr 22 17:30:50 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 22 Apr 2007 17:30:50 -0700
Subject: [stringtemplate-interest] Attributes in derived templates.
In-Reply-To: <2d29e63a0704200156m7287e098gdbb0a5f30482434c@mail.gmail.com>
References: <2d29e63a0704200156m7287e098gdbb0a5f30482434c@mail.gmail.com>
Message-ID: <F129F42E-7EEA-4EA1-80BF-4C19B4A0D8BB@cs.usfca.edu>

Hi.  it seems to me to you are not passing anything to template  
someContent, therefore "$attr$" will have no value and be empty.

  sorry for the delay and my absence on the string template list.  I  
will be picking up string template development during the summer.  I  
am almost done with version 3 release of ANTLR.  The book will be  
printed in early May, which includes examples using ANTLR and ST for  
source is code generation!
Ter
On Apr 20, 2007, at 1:56 AM, Andrew Melnichuk wrote:

> Hi all.
>
> I have a simple base group defined:
> -------------
> group basepage;
>
> page() ::= <<
> <html>
>     $someContent()$
> </html>
> >>
>
> someContent() ::= "Base Content"
> -----------
>
> I also have derived group defined, which overrides content template:
>
> -----------
> group concretepage : basepage;
>
> someContent(attr) ::= "$attr$"
> -----------
>
> I want to render a page, and i want it uses a derived content  
> template, with passed attribute's value, so in code i'm doing next:
>
>             StringTemplateGroup.RegisterDefaultLexer(typeof 
> (DefaultTemplateLexer));
>             StringTemplateGroup.RegisterGroupLoader(loader);
>
>             StringTemplateGroup stg = StringTemplateGroup.LoadGroup 
> ("concretepage");
>
>             StringTemplate stPage = stg.GetInstanceOf ("page");
>             StringTemplate stContent = stg.GetInstanceOf 
> ("someContent");
>             stContent.SetAttribute("attr", "Derrived Content");
>
>             Console.WriteLine (stPage.ToString());
>
> I'm expecting that derived template will get attributes its value,  
> but it does not. So, result i'm having is "<html></html>", but  
> expected "<html>Derrived Content</html>".
>
> Am i doing something wrong?
> -- 
> Best regards,
> Andrew Melnichuk
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest


From parrt at cs.usfca.edu  Sun Apr 22 17:33:45 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 22 Apr 2007 17:33:45 -0700
Subject: [stringtemplate-interest] problem with null handling in
	parallel iteration
In-Reply-To: <20070404035830.723326f0@doses.lan>
References: <20070404035830.723326f0@doses.lan>
Message-ID: <B3D377CD-FA4B-4AD6-9474-9EBA8A9B1188@cs.usfca.edu>

Hi. null is not the same thing as an empty string.  I believe that  
when you define "x": in a map it will map to an empty string rather  
than null. That might be a side effect of my implementation.  I do  
not think too much about that.  Should it be null or an empty string?  
most of the time the difference doesn't matter unless you are  
iterating I guess. you will actually be sending in data from your  
model, right? the hack map will not be your actual implementation right?
Ter
On Apr 4, 2007, at 1:58 AM, Brian Lewis wrote:

> Would someone with a few free minutes *please* check the following
> StringTemplate group and java code? I think it demonstrates a problem
> with null handling in parallel iteration.
>
> The output is
> field1, label1, , 40
> field2, label2, ,
>
> I hope you will agree that the output *should* be
> field1, label1, , null
> field2, label2, , 40
>
> test.stg:
> group test;
> /* "hack" gets me null. why isn't there an \N? */
> hack ::= ["x":, default:]
> test() ::= <<
> $
> ["field1", "field2"],
> ["label1", "label2"],
> [""      , ""      ],
> [hack.x  , "40"    ]:
> {name, label, required, size|
> $name$, $label$, $required$, $size$
> };null="null"$
>>>
>
> Test.java:
> import java.io.*;
> import java.util.*;
> import org.antlr.stringtemplate.*;
> import org.antlr.stringtemplate.language.*;
>
> public final class Test
> {
>   public static void main(String[] arguments)
>   {
>     Test t = new Test();
>     t.test();
>   }
>
>   public void test()
>   {
>     InputStream ins = getClass().getResourceAsStream("test.stg");
>     InputStreamReader in = new InputStreamReader(ins);
>     StringTemplateGroup g = new StringTemplateGroup(
>       in,
>       DefaultTemplateLexer.class
>     );
>     StringTemplate st = g.getInstanceOf("test");
>     System.out.println(st.toString());
>   }
> }
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest


From parrt at cs.usfca.edu  Sun Apr 22 17:39:47 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 22 Apr 2007 17:39:47 -0700
Subject: [stringtemplate-interest] addAttribute/addAttributes weirdness
In-Reply-To: <20070324223409.7cf29164@doses.lan>
References: <20070324223409.7cf29164@doses.lan>
Message-ID: <4A07C172-F9A2-4BC6-A18A-DF99486165CC@cs.usfca.edu>

Hi Brian,

I am pretty sure I meant this method as a very raw way to override  
everything going on inside ST:

	public void setAttributes(Map attributes) {
		this.attributes = attributes;
	}

  As you can see, just immediately sets the attribute list without  
checking the formal arguments and so on.  I do not iterate through  
the list looking to see if you violate things.  If you look at the  
individual set attribute methods, you will see that it eventually  
calls rawSetAttribute and  does the check:

		if ( formalArguments!=FormalArgument.UNKNOWN &&
			getFormalArgument(name)==null )
		{
			// a normal call to setAttribute with unknown attribute
			throw new NoSuchElementException("no such attribute: "+name+
											 " in template context "+
											 getEnclosingInstanceStackString());
		}


Does that help?

Ter
On Mar 24, 2007, at 8:34 PM, Brian Lewis wrote:

> I'm writing StringTemplate 3.0 group files and noticing some strange
> differences between addAttribute(String, String) and addAttributes 
> (Map).
>
> group test;
> page(title, cssFile) ::=
> "<html>$\n$$title$$\n$$if(cssFile)$$cssFile$$endif$$\n$</html>"
> somePage() ::= "$page(title={title of the page})$"
>
> If I getInstanceOf("somePage") and setAttribute("cssFile",  
> "style.css"),
> I get NoSuchElementException because cssFile isn't in somePage's
> argument list, even though it *is* in page's argument list.
>
> If I put cssFile in somePage's argument list and take it out of  
> page's,
> I get the desired effect, but the usefulness of page is decreased
> because the templates being wrapped are having to care about cssFile,
> which should only be the concern of page.
>
> http://www.antlr.org/wiki/display/ST/Group+Files says that "If you
> reference an attribute that is not formally defined in that template
> or any enclosing template, you also get [NoSuchElementException]." In
> violation (I think) of that, I can put something like $nonesuch$
> anywhere in one of my group file templates like somePage and I don't
> get an exception.
>
> If I put "cssFile" -> "style.css" in a Map and addAttributes() it to
> somePage, I don't get NoSuchElementException, even though cssFile  
> isn't
> in somePage's argument list. That seems inconsistent.
>
> If I remove cssFile from page's argument list like so:
> group test;
> page(title) ::=
> "<html>$\n$$title$$\n$$if(cssFile)$$cssFile$$endif$$\n$</html>"
> somePage() ::= "$page(title={title of the page})$"
>
> and addAttributes(), I get the obvious desired output. But why was it
> allowed? cssFile isn't in page's argument list. Why was having cssFile
> in page's argument list suppressing $cssFile$?
>
> We're trying to make a StringTemplateView for Spring. The natural way
> to set the attributes is the setAttributes() Map way. The problem is
> that using setAttributes() seems to disable error checking (?) and
> requires that you counterintuitively remove things from the template
> argument lists.
>
> I hope someone will agree that this stuff is pretty weird. Any help
> would be greatly appreciated. Thanks.
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest


From parrt at cs.usfca.edu  Sun Apr 22 17:43:47 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 22 Apr 2007 17:43:47 -0700
Subject: [stringtemplate-interest] Conditional output of multivalued
	attributes / How to handle separator problem?
In-Reply-To: <4fdfdc380703181244n140d1e7fwcca99ccffdff52d6@mail.gmail.com>
References: <4fdfdc380703181244n140d1e7fwcca99ccffdff52d6@mail.gmail.com>
Message-ID: <743C1635-6C7C-420C-B139-870FB92B4E1B@cs.usfca.edu>

Hi Ivan,

I think that you need to filter the list and then apply your  
template. I'm just thinking off the top of my head here:

$parameters:{ p | $if(p.isSet)$$p$$endif$}:{this.$it.Name$ = $it.Name 
$;}; separator="\r\n"$

  please let me know if that works.  Note that I am using a chained  
map operation to apply a filter to the list of parameters.  The only  
thing that worries me is that the results of the first {..} block  
might yield an empty or null value they get passed to the second {...}.

  If you actually want the \r\n on end of a line instead of as a  
separator, then just add <\r><\n> inside the template application  
{...} and get rid of the separator.
Ter

On Mar 18, 2007, at 12:44 PM, Ivan Vedic Ai wrote:

> Hi all,
>
> I'm having trouble designing a stringtemplate for code of a C#
> constructor with arguments. I would like to construct a template that
> would output items $it$ of a multivalued attribute only if item's
> "$it.IsSet$" boolean property is set to "true". The trouble I'm having
> is with the set 'separator=", "' that is written for all items, even
> those excluded by my condition.
>
> My constructor.st stringtemplate looks like this:
> ------------------------------------------------------
> public $class.Name$($class.Parameters:{$if(it.IsSet)$$it.Type$
> $it.Name$$endif$}; separator=", "$)
> {
>   $class.Parameters:{$if(it.IsSet)$this.$it.Name$ =
> $it.Name$;$endif$}; separator="\r\n"$
> }
> ------------------------------------------------------
>
> Between the brackets I output a multivalued attribute
> $class.Parameters$, but I only output $it.Type$ and $it.Name$ if the
> value of $it.IsSet$ is set to "true".
>
> The output I get is as follows:
> ------------------------------------------------------
> public Miki(string name, , TestEnum enum)
> {
>    this._name = name;
>
>    this._enum = enum;
> }
> ------------------------------------------------------
>
> What I would like to achieve is not output the separator for items
> which do not get written out (notice the ", , " and an extra newline).
>
> Is there a way arround this problem?
> Can someone please tell me how should I design my stringtemplate to
> achieve this functionality?
>
>
>
> Here is the definition of my template setAttribute classes:
> ------------------------------------------------------
> public class TestClass
> {
>     private string _name;
>     private List<ParameterClass> _parameters;
>
>     public string Name
>     {
>         get { return _name; }
>         set { _name = value; }
>     }
>
>     public TestClass()
>     {
>         _parameters = new List<ParameterClass>();
>     }
>
>     public TestClass(string name)
>         : this()
>     {
>         _name = name;
>     }
>
>     public List<ParameterClass> Parameters
>     {
>         get { return _parameters; }
>         set { _parameters = value; }
>     }
> }
>
> public class ParameterClass
> {
>     private string _type;
>     private string _name;
>     private bool _isSet;
>
>     public string Type
>     {
>         get { return _type; }
>         set { _type = value; }
>     }
>
>     public string Name
>     {
>         get { return _name; }
>         set { _name = value; }
>     }
>
>     public bool IsSet
>     {
>         get { return _isSet; }
>         set { _isSet = value; }
>     }
>
>     public ParameterClass(string type, string name, bool isSet)
>     {
>         _type = type;
>         _name = name;
>         _isSet = isSet;
>     }
> }
> ------------------------------------------------------
>
> I initialize a "class" attribute with my TestClass() instance like  
> this:
> ------------------------------------------------------
> TestClass clazz = new TestClass("Miki");
> clazz.Parameters.Add(new ParameterClass("string", "Name", true));
> clazz.Parameters.Add(new ParameterClass("string", "Parameters",  
> false));
> clazz.Parameters.Add(new ParameterClass("TestEnum", "Enum", true));
>
> template.SetAttribute("class", clazz);
> ------------------------------------------------------
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest


From parrt at cs.usfca.edu  Sun Apr 22 17:47:26 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 22 Apr 2007 17:47:26 -0700
Subject: [stringtemplate-interest] [FIX] ChunkTokens
	withoutLine/ColumnInformation? St#
In-Reply-To: <19D19E1AA3C5154D85A43D38808E48AB01641C2C@fe-mail29.de.bosch.com>
References: <19D19E1AA3C5154D85A43D38808E48AB01641C2C@fe-mail29.de.bosch.com>
Message-ID: <1AD02AFE-4C8E-4F62-B8D7-B614E12ABE82@cs.usfca.edu>

Hi. added a bug

http://www.antlr.org:8888/browse/ST-20

  thanks for the report.  And the fix! I will try to do a clean fix  
when I get back to ST.
Ter
On Mar 16, 2007, at 7:30 AM, Dreyer Ulf (CR/APA3) wrote:

>  Hello Terence, hello Kunle
>
>    whoops my Fix does not work as advertised:
>
>    The token   'abeg' is not always defined during ACTION.
>    This results in a NullPointerException if something like
>    if/else/endif or a region is parsed.
>
>   I made a new fix wich works but is kind of ugly:
>
> 1) Add a method to angle.bracket.template.g:
>
> protected IToken GetActionBeginToken(params IToken[] ptokens)
>         {
>             foreach (IToken token in ptokens)
>             {
>                 if (null != token) return token;
>             }
>             return null;
>         }
>
> 2) prefix the different occurences of "<"! in ACTION with
>    a1:"<"! through a5:"<"!
>
> 3) Change my first token-position fix to
>
> 	IToken aBegin = GetActionBeginToken(a1,a2,a3,a4,a5);
>       ctok.setLine(aBegin.getLine());
>       ctok.setColumn(aBegin.getColumn());
>
> Any Ideas to fix this that result in a cleaner grammar?
>
> -Ulf
>
>> -----Original Message-----
>> From: stringtemplate-interest-bounces at antlr.org
>> [mailto:stringtemplate-interest-bounces at antlr.org] On Behalf
>> Of Dreyer Ulf (CR/APA3)
>> Sent: Friday, March 16, 2007 1:49 PM
>> To: StringTemplate
>> Cc: Kunle_Odutola at hotmail.com
>> Subject: Re: [stringtemplate-interest] [FIX] ChunkTokens
>> withoutLine/ColumnInformation? St#
>>
>> Hello Terence, hello Kunle
>>
>>    it was a long day yesterday so I forgot to mention that only
>>    ChunkTokens (the ones that contain the actions) don't come with
>>    position information.
>>    Today I found out why and found a fix:
>>
>>    Why: ChunkTokens differ from the default tokens coming from the
>>         lexer and are created with new ChunkToken(....).
>>  	  Position information however is only set in
>> (lexer).makeToken(type).
>>
>> 	  I did not check whether the Java version or other
>> lexers are affected.
>>
>> Here is a sample fix for AngleBracketTemplateLexer. (Only the
>> ACTION Rule has to be changed)
>>
>> ACTION
>> options {
>>    		generateAmbigWarnings=false; // <EXPR> is ambig
>> with <!..!>
>> }
>> {
>>     int startCol = getColumn();
>> }
>> // --- [not listing rest of ACTION] ---
>> // ----------------------- original: -------------------------
>> 	|   '<'! EXPR '>'!
>>     	)
>>     	{
>>         ChunkToken ctok = new ChunkToken(_ttype, $getText,
>> currentIndent);
>>         $setToken(ctok);
>>     	}
>>     ;
>> 	
>> // -------------------------- corrected: ----------------------	
>> 	|   abeg:'<'! EXPR '>'!
>>     	)
>>     	{
>>         ChunkToken ctok = new ChunkToken(_ttype, $getText,
>> currentIndent);
>> 		//ctok is created without the use of
>> .makeToken(type) and therefore does not contain
>>         //position-Information. Create some:
>>         ctok.setLine(abeg.getLine());
>>         ctok.setColumn(abeg.getColumn());
>>         $setToken(ctok);
>>     	}
>>     ;
>>
>> -Ulf
>>
>> --
>> Dipl. Inf. Ulf Dreyer
>> Robert Bosch GmbH
>> Zentralbereich Forschung und Vorausentwicklung
>> Software und Systemengineering in der
>> Fertigungsautomatisierung CR/APA3
>> Postfach 30 02 40 D-70442 Stuttgart
>> Tel.: 0711/811- 34365
>> Fax: 0711/811-518 34365
>> eMail: ulf . dreyer at de . bosch . com
>>
>> Robert Bosch GmbH, Sitz: Stuttgart, Registergericht:
>> Amtsgericht Stuttgart HRB 14000 Aufsichtsratsvorsitzender:
>> Hermann Scholl; Gesch?ftsf?hrung: Franz Fehrenbach, Siegfried
>> Dais; Bernd Bohr, Wolfgang Chur, Rudolf Colm, Gerhard K?mmel,
>> Wolfgang Malchow, Peter Marks; Volkmar Denner, Peter Tyroller.
>>
>>
>>> -----Original Message-----
>>> From: stringtemplate-interest-bounces at antlr.org
>>> [mailto:stringtemplate-interest-bounces at antlr.org] On Behalf
>>> Of Terence Parr
>>> Sent: Thursday, March 15, 2007 7:14 PM
>>> To: StringTemplate
>>> Subject: Re: [stringtemplate-interest] ChunkTokens without
>>> Line/ColumnInformation? St#
>>>
>>>
>>> On Mar 15, 2007, at 9:41 AM, Dreyer Ulf (CR/APA3) wrote:
>>>
>>>> Hello all!
>>>>
>>>>  I just stumbled upon a strange behaviour.
>>>>  The tokens coming from AngleBracketLexer (in ST#) do not contain
>>>>  a Line and Column - information  (getLine/getColumn yield 0/0)
>>>>
>>>>  Is this intentional? If so why?
>>>>
>>>>  How can I 'fix' this without rewriting the
>>> TokenTypes/Lexers in ST#?
>>>
>>> That's weird.  All tokens or just some?
>>>
>>> Ter
>>>
>>> _______________________________________________
>>> stringtemplate-interest mailing list
>>> stringtemplate-interest at antlr.org
>>> http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest
>>>
>> _______________________________________________
>> stringtemplate-interest mailing list
>> stringtemplate-interest at antlr.org
>> http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest
>>
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest


From parrt at cs.usfca.edu  Sun Apr 22 18:03:50 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 22 Apr 2007 18:03:50 -0700
Subject: [stringtemplate-interest] Inconsistent handling of multi-valued
	attributes?
In-Reply-To: <366075.59626.qm@web36614.mail.mud.yahoo.com>
References: <366075.59626.qm@web36614.mail.mud.yahoo.com>
Message-ID: <CF4C0111-A9E8-40C3-B385-E6DC98D133D1@cs.usfca.edu>


On Feb 25, 2007, at 12:56 AM, Steve Ims wrote:

> Hi,
>
>    I'm using the latest ST Java APIs.  The first/last/rest  
> operators don't work as I expected them to ... wondering if it's  
> user error/misperception, or a bug?
>
>    Here's an example:
>
>         StringTemplate hello = new StringTemplate("Hello, $first 
> (name/foo)$ $first(name/bar)$");
>         Map m = new HashMap();
>         m.put("name/foo", new String[]{"World","Mary","Bob"});
>         hello.setAttributes(m);
>         hello.setAttribute("name/bar", new String[] 
> {"World","Mary","Bob"});
>         System.out.println(hello.toString());

setAttributes(...) is a very raw thing.  It does not convert the  
array you have there to a list as it does for the second attribute.  
note that you should not be using / as part of an attribute name.
Ter
>
>    My expected result:
> Hello, World World
>
>    Observed result:
> Hello, [Ljava.lang.String;@53f853f8 World
>
>
>    Suggestions?  Thanks.
>
> -- Steve
>
>
>
>
>
> ______________________________________________________________________ 
> ______________
> Food fight? Enjoy some healthy debate
> in the Yahoo! Answers Food & Drink Q&A.
> http://answers.yahoo.com/dir/?link=list&sid=396545367
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest


From parrt at cs.usfca.edu  Sun Apr 22 18:05:19 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 22 Apr 2007 18:05:19 -0700
Subject: [stringtemplate-interest] List of used Attributes from ST
	without formal parameters
In-Reply-To: <19D19E1AA3C5154D85A43D38808E48AB01641BB5@fe-mail29.de.bosch.com>
References: <19D19E1AA3C5154D85A43D38808E48AB01641BB5@fe-mail29.de.bosch.com>
Message-ID: <A61BC1C3-B10B-43C1-AE6B-04D7335E6EA6@cs.usfca.edu>


On Feb 27, 2007, at 10:59 PM, Dreyer Ulf (CR/APA3) wrote:
>   Right now I'm thinking of restricting the use of anonymous  
> templates in my Application.
>   This brings me to a quick question:
>   I'm trying to use ST to support a VERY easy template mechanism in  
> one of
>   our applications. It has to be very simple as nobody of the users  
> will
>   write anything as complex as <mylist:{i | something <i.foo> =  
> some more <i.bar>}>
>   So I'm thinking of removing(= not using) all anonymous Templates.
>   There will still be Template application like <myList:TemplateA() 
> > or <TemplateB(myList)>
>   but nothing fancy.
>
>   This shouldn't reduce the power of ST right (only some  
> convenience for experienced users)?

  Yes the two are identical.  A closure-like anonymous template is  
just an unnamed template; otherwise they are the same. well you can't  
recurse because you don't know the name. ;)

>   I will probably also disallow the <(expr)(argument-List)> and  
> <attribute.(expr)> constructs.
>   This WILL reduce the power of ST but I don't think these  
> constructs are necessary for what we need
>   and they are way to complicated.

Yes, I don't think you really need those.

>   With these restrictions it will be a lot easier to deduce which  
> variables/symbols are used in a
>   given Template and its subtemplates.
>
>   Is there any mayor flaw in this argumentation?

No, you can do what you want without those features, it is just more  
of a hassle. :)

Ter


From parrt at cs.usfca.edu  Sun Apr 22 18:06:52 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 22 Apr 2007 18:06:52 -0700
Subject: [stringtemplate-interest] Unit test framework for StringTemplate
In-Reply-To: <200702090800.15481.jose.sanleandro@ventura24.es>
References: <200702090800.15481.jose.sanleandro@ventura24.es>
Message-ID: <51A5ADAA-FE91-485B-89B3-CD3B3F8A7534@cs.usfca.edu>

I have been thinking for quite a while about adding *, +, and ? to  
the definition of template arguments so that you know whether you  
should get zero more, one or more, or zero or one values in the  
attribute.  That way ST can check the cardinality and existence  
automatically for you.

Ter
On Feb 8, 2007, at 11:00 PM, Jose San Leandro wrote:

> Hi,
>
> I'm making heavy use of StringTemplate in several projects, using a  
> non-TDD
> developing methodology: change template, check template filling  
> logic, build
> project, execute project, check template output.
>
> It should be much better if I could, from a template
> 1) Generate a "TemplateFiller" interface, with all the getters that  
> the
> template is expecting.
> 2) Generate a junit test that uses a "<TemplateFiller>UnitTestImpl"  
> instance
> (which is the test itself) and compares the output of the template  
> with the
> contents of a provided file.
>
> Basically, I need a StringTemplate parser. I guess StringTemplate  
> itself
> defines an ANTLR-based one I could use.
>
> Do you think it would be possible to use it to extract all input  
> parameters
> from a template? It would have to be recursive itself, and probably  
> indicate
> at the end that the template input is an object graph, so I guess  
> it will have
> to traverse the AST for a template.
>
> I think a unit test framework for StringTemplate is highly desirable.
>
> What do you think?
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest


From bc4all at gmail.com  Sun Apr 22 18:52:21 2007
From: bc4all at gmail.com (Bogdan Calmac)
Date: Sun, 22 Apr 2007 21:52:21 -0400
Subject: [stringtemplate-interest] Filtering a list
In-Reply-To: <D6FBE9C6-624F-4CD1-94A7-7D20EEFEE3D5@cs.usfca.edu>
References: <23074d1f0704061225uf218c4s15a630ebc393fe7b@mail.gmail.com>
	<20070411043216.5749cfde@doses.lan>
	<F5548D08-D11E-47EC-826F-3125A1620C69@cs.usfca.edu>
	<23074d1f0704120825k5578def7w68e4706caa02d66d@mail.gmail.com>
	<56C3EB0D-0841-4C41-9A3A-FA0B1EDDFB7F@cs.usfca.edu>
	<23074d1f0704130733s1ddfa5f0od1569f5b3e1b4d3@mail.gmail.com>
	<D6FBE9C6-624F-4CD1-94A7-7D20EEFEE3D5@cs.usfca.edu>
Message-ID: <23074d1f0704221852x2d5f95b5hd935ed6024cc902c@mail.gmail.com>

Hi Ter,

Yes, you're right, that works fine.

Thanks,

Bogdan.

On 4/13/07, Terence Parr <parrt at cs.usfca.edu> wrote:
>
> On Apr 13, 2007, at 7:33 AM, Bogdan Calmac wrote:
>
> > Hi Ter,
> >
> > Thanks, but actually I need the oposite here, to force a null instead
> > of empty string.
>
> Ah. then you need to set null not "" I'm afraid.
>
> > Again, in my example I have a list of persons with a "smart" boolean
> > field and I want to print a comma separated list of the smart people.
> > This requires to filter out those persons which are not "smart", which
> > means returning null from an <if> expression so that I don't get empty
> > slots in the list.
>
> Oh, that's easy:
>
> $names{n | $if(n.smart)$$n$$endif$}; separator=", "$
>
> Let me know if that works for you.  Assuming names i s alist of Name
> objects or whatever.
>
> Ter
>
>

From parrt at cs.usfca.edu  Sun Apr 22 19:12:36 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 22 Apr 2007 19:12:36 -0700
Subject: [stringtemplate-interest] Filtering a list
In-Reply-To: <23074d1f0704221852x2d5f95b5hd935ed6024cc902c@mail.gmail.com>
References: <23074d1f0704061225uf218c4s15a630ebc393fe7b@mail.gmail.com>
	<20070411043216.5749cfde@doses.lan>
	<F5548D08-D11E-47EC-826F-3125A1620C69@cs.usfca.edu>
	<23074d1f0704120825k5578def7w68e4706caa02d66d@mail.gmail.com>
	<56C3EB0D-0841-4C41-9A3A-FA0B1EDDFB7F@cs.usfca.edu>
	<23074d1f0704130733s1ddfa5f0od1569f5b3e1b4d3@mail.gmail.com>
	<D6FBE9C6-624F-4CD1-94A7-7D20EEFEE3D5@cs.usfca.edu>
	<23074d1f0704221852x2d5f95b5hd935ed6024cc902c@mail.gmail.com>
Message-ID: <3D056AEF-642F-46DA-97E4-F191E6EBE30E@cs.usfca.edu>

Awesome!  Gotta love those anonymous {...} blocks. :)
Ter
On Apr 22, 2007, at 6:52 PM, Bogdan Calmac wrote:

> Hi Ter,
>
> Yes, you're right, that works fine.
>
> Thanks,
>
> Bogdan.
>
> On 4/13/07, Terence Parr <parrt at cs.usfca.edu> wrote:
>>
>> On Apr 13, 2007, at 7:33 AM, Bogdan Calmac wrote:
>>
>>> Hi Ter,
>>>
>>> Thanks, but actually I need the oposite here, to force a null  
>>> instead
>>> of empty string.
>>
>> Ah. then you need to set null not "" I'm afraid.
>>
>>> Again, in my example I have a list of persons with a "smart" boolean
>>> field and I want to print a comma separated list of the smart  
>>> people.
>>> This requires to filter out those persons which are not "smart",  
>>> which
>>> means returning null from an <if> expression so that I don't get  
>>> empty
>>> slots in the list.
>>
>> Oh, that's easy:
>>
>> $names{n | $if(n.smart)$$n$$endif$}; separator=", "$
>>
>> Let me know if that works for you.  Assuming names i s alist of Name
>> objects or whatever.
>>
>> Ter
>>
>>
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest


From andrew.melnichuk at gmail.com  Mon Apr 23 01:14:29 2007
From: andrew.melnichuk at gmail.com (Andrew Melnichuk)
Date: Mon, 23 Apr 2007 11:14:29 +0300
Subject: [stringtemplate-interest] Attributes in derived templates.
In-Reply-To: <F129F42E-7EEA-4EA1-80BF-4C19B4A0D8BB@cs.usfca.edu>
References: <2d29e63a0704200156m7287e098gdbb0a5f30482434c@mail.gmail.com>
	<F129F42E-7EEA-4EA1-80BF-4C19B4A0D8BB@cs.usfca.edu>
Message-ID: <2d29e63a0704230114ub57d247ka08402cf86f1558b@mail.gmail.com>

Hmm....

I have thought that code below assigns attribute value to template:

StringTemplate stContent = stg.GetInstanceOf("someContent");
stContent.SetAttribute("attr", "Derrived Content");

Maybe ST does not allow set attributes in this way?

On 4/23/07, Terence Parr <parrt at cs.usfca.edu> wrote:
>
> Hi.  it seems to me to you are not passing anything to template
> someContent, therefore "$attr$" will have no value and be empty.
>
>   sorry for the delay and my absence on the string template list.  I
> will be picking up string template development during the summer.  I
> am almost done with version 3 release of ANTLR.  The book will be
> printed in early May, which includes examples using ANTLR and ST for
> source is code generation!
> Ter
> On Apr 20, 2007, at 1:56 AM, Andrew Melnichuk wrote:
>
> > Hi all.
> >
> > I have a simple base group defined:
> > -------------
> > group basepage;
> >
> > page() ::= <<
> > <html>
> >     $someContent()$
> > </html>
> > >>
> >
> > someContent() ::= "Base Content"
> > -----------
> >
> > I also have derived group defined, which overrides content template:
> >
> > -----------
> > group concretepage : basepage;
> >
> > someContent(attr) ::= "$attr$"
> > -----------
> >
> > I want to render a page, and i want it uses a derived content
> > template, with passed attribute's value, so in code i'm doing next:
> >
> >             StringTemplateGroup.RegisterDefaultLexer(typeof
> > (DefaultTemplateLexer));
> >             StringTemplateGroup.RegisterGroupLoader(loader);
> >
> >             StringTemplateGroup stg = StringTemplateGroup.LoadGroup
> > ("concretepage");
> >
> >             StringTemplate stPage = stg.GetInstanceOf ("page");
> >             StringTemplate stContent = stg.GetInstanceOf
> > ("someContent");
> >             stContent.SetAttribute("attr", "Derrived Content");
> >
> >             Console.WriteLine (stPage.ToString());
> >
> > I'm expecting that derived template will get attributes its value,
> > but it does not. So, result i'm having is "<html></html>", but
> > expected "<html>Derrived Content</html>".
> >
> > Am i doing something wrong?
> > --
> > Best regards,
> > Andrew Melnichuk
> > _______________________________________________
> > stringtemplate-interest mailing list
> > stringtemplate-interest at antlr.org
> > http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest
>
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest
>



-- 
Best regards,
Andrew Melnichuk
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org:8080/pipermail/stringtemplate-interest/attachments/20070423/5aef6f9c/attachment.html 

From parrt at cs.usfca.edu  Mon Apr 23 13:55:15 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 23 Apr 2007 13:55:15 -0700
Subject: [stringtemplate-interest] Attributes in derived templates.
In-Reply-To: <2d29e63a0704230114ub57d247ka08402cf86f1558b@mail.gmail.com>
References: <2d29e63a0704200156m7287e098gdbb0a5f30482434c@mail.gmail.com>
	<F129F42E-7EEA-4EA1-80BF-4C19B4A0D8BB@cs.usfca.edu>
	<2d29e63a0704230114ub57d247ka08402cf86f1558b@mail.gmail.com>
Message-ID: <D589BEE1-4FB9-4AF5-970E-8C3ADE14375E@cs.usfca.edu>


On Apr 23, 2007, at 1:14 AM, Andrew Melnichuk wrote:

> Hmm....
>
> I have thought that code below assigns attribute value to template:
>
> StringTemplate stContent = stg.GetInstanceOf("someContent");
> stContent.SetAttribute("attr", "Derrived Content");
>
> Maybe ST does not allow set attributes in this way?

it does, but you are using $someContent()$ below, which does not set  
$attr$.
Ter
>
> On 4/23/07, Terence Parr <parrt at cs.usfca.edu> wrote: Hi.  it seems  
> to me to you are not passing anything to template
> someContent, therefore "$attr$" will have no value and be empty.
>
>   sorry for the delay and my absence on the string template list.  I
> will be picking up string template development during the summer.  I
> am almost done with version 3 release of ANTLR.  The book will be
> printed in early May, which includes examples using ANTLR and ST for
> source is code generation!
> Ter
> On Apr 20, 2007, at 1:56 AM, Andrew Melnichuk wrote:
>
> > Hi all.
> >
> > I have a simple base group defined:
> > -------------
> > group basepage;
> >
> > page() ::= <<
> > <html>
> >     $someContent()$
> > </html>
> > >>
> >
> > someContent() ::= "Base Content"
> > -----------
> >
> > I also have derived group defined, which overrides content template:
> >
> > -----------
> > group concretepage : basepage;
> >
> > someContent(attr) ::= "$attr$"
> > -----------
> >
> > I want to render a page, and i want it uses a derived content
> > template, with passed attribute's value, so in code i'm doing next:
> >
> >             StringTemplateGroup.RegisterDefaultLexer (typeof
> > (DefaultTemplateLexer));
> >             StringTemplateGroup.RegisterGroupLoader(loader);
> >
> >             StringTemplateGroup stg = StringTemplateGroup.LoadGroup
> > ("concretepage");
> >
> >             StringTemplate stPage = stg.GetInstanceOf ("page");
> >             StringTemplate stContent = stg.GetInstanceOf
> > ("someContent");
> >             stContent.SetAttribute ("attr", "Derrived Content");
> >
> >             Console.WriteLine (stPage.ToString());
> >
> > I'm expecting that derived template will get attributes its value,
> > but it does not. So, result i'm having is "<html></html>", but
> > expected "<html>Derrived Content</html>".
> >
> > Am i doing something wrong?
> > --
> > Best regards,
> > Andrew Melnichuk
> > _______________________________________________
> > stringtemplate-interest mailing list
> > stringtemplate-interest at antlr.org
> > http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest
>
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest
>
>
>
> -- 
> Best regards,
> Andrew Melnichuk
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest


From misc at n4te.com  Tue Apr 24 12:31:44 2007
From: misc at n4te.com (Nate)
Date: Tue, 24 Apr 2007 12:31:44 -0700
Subject: [stringtemplate-interest] formal arg checking
Message-ID: <462E5B20.2040502@n4te.com>

StringTemplate#checkNullAttributeAgainstFormalArguments(StringTemplate, 
String) has this javadoc comment...

"Don't do the check if no formal parameters exist for this template; ask 
enclosing."

The result of this method contract is that a template such as...
$table(emptyMessage={$errorMessage; null="The list is empty."$})$
...will fail if the attribute "errorMessage" is not defined. I want to 
show the error messag if it exists, otherwise I want to show "The list 
is empty.". I should not have to define "errorMessage" unless there is 
an actual error message.

This works even when "errorMessage" is not defined...
$table(emptyMessage=errorMessage)$

I believe the delegation to the enclosing template in 
checkNullAttributeAgainstFormalArguments is flawed.

-Nate

From misc at n4te.com  Tue Apr 24 12:54:24 2007
From: misc at n4te.com (Nate)
Date: Tue, 24 Apr 2007 12:54:24 -0700
Subject: [stringtemplate-interest] line numbers in exceptions
Message-ID: <462E6070.3080601@n4te.com>

Trying to use an attribute named "first"...

[...snipped...] action parse error in group GROUPNAME line 0; template 
context is [anonymous]
    [...snipped...]
    at 
org.antlr.stringtemplate.StringTemplate.error(StringTemplate.java:1079)
    at 
org.antlr.stringtemplate.language.ActionParser.reportError(ActionParser.java:55)
    at 
org.antlr.stringtemplate.language.ActionParser.singleArg(ActionParser.java:1021)
    at 
org.antlr.stringtemplate.language.ActionParser.function(ActionParser.java:889)
    at 
org.antlr.stringtemplate.language.ActionParser.primaryExpr(ActionParser.java:592)
    at 
org.antlr.stringtemplate.language.ActionParser.expr(ActionParser.java:387)
    at 
org.antlr.stringtemplate.language.ActionParser.templatesExpr(ActionParser.java:189)
    at 
org.antlr.stringtemplate.language.ActionParser.action(ActionParser.java:111)
    at 
org.antlr.stringtemplate.StringTemplate.parseAction(StringTemplate.java:884)
    at 
org.antlr.stringtemplate.language.TemplateParser.action(TemplateParser.java:134)
    at 
org.antlr.stringtemplate.language.TemplateParser.template(TemplateParser.java:105)
    at 
org.antlr.stringtemplate.StringTemplate.breakTemplateIntoChunks(StringTemplate.java:861)
    ... 34 more
Caused by: line 1:6: expecting LPAREN, found 'null'
    at antlr.Parser.match(Parser.java:211)
    at 
org.antlr.stringtemplate.language.ActionParser.singleArg(ActionParser.java:1004)
    ... 43 more

It took me quite a while to figure out "first" is a reserved word for a 
built-in function. Maybe a better error message?

Also, why don't I get any useful line numbers? Shouldn't ST point me to 
exactly the line that has a problem, rather than "line 0"?

-Nate


From jjsnyders at rcn.com  Wed Apr 25 22:09:15 2007
From: jjsnyders at rcn.com (John Snyders)
Date: Thu, 26 Apr 2007 01:09:15 -0400
Subject: [stringtemplate-interest] Learning/using StringTemplate without
	having to write Java code
Message-ID: <463033FB.4070900@rcn.com>

On my blog 
(http://hardlikesoftware.com/weblog/2007/04/26/on-learning-stringtemplate/)
I just added a post on a command line tool I created that can be used to 
learn or try out ST without having
to write any Java code. It uses JSON to provide static data for running 
a template.
You can download it and try it out from here: 
http://hardlikesoftware.com/weblog/stst/

I'm interested in feedback (either on this mailing list or my blog) on 
if you think this approach is useful or
any other thoughts on the learnability of ST.

Thanks,
-John

From parrt at cs.usfca.edu  Thu Apr 26 10:49:50 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 26 Apr 2007 10:49:50 -0700
Subject: [stringtemplate-interest] formal arg checking
In-Reply-To: <462E5B20.2040502@n4te.com>
References: <462E5B20.2040502@n4te.com>
Message-ID: <36E7A8D8-0310-4D54-9FAC-EDC66263842A@cs.usfca.edu>

Hi Nate, not sure I understand your concern.  Can't you just send in  
the error and display it?  If not there, you'll get empty string.
Ter
On Apr 24, 2007, at 12:31 PM, Nate wrote:

> StringTemplate#checkNullAttributeAgainstFormalArguments 
> (StringTemplate,
> String) has this javadoc comment...
>
> "Don't do the check if no formal parameters exist for this  
> template; ask
> enclosing."
>
> The result of this method contract is that a template such as...
> $table(emptyMessage={$errorMessage; null="The list is empty."$})$
> ...will fail if the attribute "errorMessage" is not defined. I want to
> show the error messag if it exists, otherwise I want to show "The list
> is empty.". I should not have to define "errorMessage" unless there is
> an actual error message.
>
> This works even when "errorMessage" is not defined...
> $table(emptyMessage=errorMessage)$
>
> I believe the delegation to the enclosing template in
> checkNullAttributeAgainstFormalArguments is flawed.
>
> -Nate
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest


From parrt at cs.usfca.edu  Thu Apr 26 10:50:29 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 26 Apr 2007 10:50:29 -0700
Subject: [stringtemplate-interest] line numbers in exceptions
In-Reply-To: <462E6070.3080601@n4te.com>
References: <462E6070.3080601@n4te.com>
Message-ID: <2A3CC20D-7FE5-4D68-8376-5E146639E1A1@cs.usfca.edu>

This keyword thing is defined if not in an obvious list of keywords.   
Yes, some error lines are off.
Ter
On Apr 24, 2007, at 12:54 PM, Nate wrote:

> Trying to use an attribute named "first"...
>
> [...snipped...] action parse error in group GROUPNAME line 0; template
> context is [anonymous]
>     [...snipped...]
>     at
> org.antlr.stringtemplate.StringTemplate.error(StringTemplate.java: 
> 1079)
>     at
> org.antlr.stringtemplate.language.ActionParser.reportError 
> (ActionParser.java:55)
>     at
> org.antlr.stringtemplate.language.ActionParser.singleArg 
> (ActionParser.java:1021)
>     at
> org.antlr.stringtemplate.language.ActionParser.function 
> (ActionParser.java:889)
>     at
> org.antlr.stringtemplate.language.ActionParser.primaryExpr 
> (ActionParser.java:592)
>     at
> org.antlr.stringtemplate.language.ActionParser.expr 
> (ActionParser.java:387)
>     at
> org.antlr.stringtemplate.language.ActionParser.templatesExpr 
> (ActionParser.java:189)
>     at
> org.antlr.stringtemplate.language.ActionParser.action 
> (ActionParser.java:111)
>     at
> org.antlr.stringtemplate.StringTemplate.parseAction 
> (StringTemplate.java:884)
>     at
> org.antlr.stringtemplate.language.TemplateParser.action 
> (TemplateParser.java:134)
>     at
> org.antlr.stringtemplate.language.TemplateParser.template 
> (TemplateParser.java:105)
>     at
> org.antlr.stringtemplate.StringTemplate.breakTemplateIntoChunks 
> (StringTemplate.java:861)
>     ... 34 more
> Caused by: line 1:6: expecting LPAREN, found 'null'
>     at antlr.Parser.match(Parser.java:211)
>     at
> org.antlr.stringtemplate.language.ActionParser.singleArg 
> (ActionParser.java:1004)
>     ... 43 more
>
> It took me quite a while to figure out "first" is a reserved word  
> for a
> built-in function. Maybe a better error message?
>
> Also, why don't I get any useful line numbers? Shouldn't ST point  
> me to
> exactly the line that has a problem, rather than "line 0"?
>
> -Nate
>
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest


From misc at n4te.com  Thu Apr 26 11:01:19 2007
From: misc at n4te.com (Nate)
Date: Thu, 26 Apr 2007 11:01:19 -0700
Subject: [stringtemplate-interest] formal arg checking
In-Reply-To: <36E7A8D8-0310-4D54-9FAC-EDC66263842A@cs.usfca.edu>
References: <462E5B20.2040502@n4te.com>
	<36E7A8D8-0310-4D54-9FAC-EDC66263842A@cs.usfca.edu>
Message-ID: <4630E8EF.2050100@n4te.com>

In this particular case, the "table" template displays a table of data. 
If no data is specified, it displays an error message from the 
controller OR a message ("The list is empty.") from the template. If 
there is no error, the message comes from the template, not from the 
controller.

-Nate


Terence Parr wrote:
> Hi Nate, not sure I understand your concern.  Can't you just send in  
> the error and display it?  If not there, you'll get empty string.
> Ter
> On Apr 24, 2007, at 12:31 PM, Nate wrote:
>
>   
>> StringTemplate#checkNullAttributeAgainstFormalArguments 
>> (StringTemplate,
>> String) has this javadoc comment...
>>
>> "Don't do the check if no formal parameters exist for this  
>> template; ask
>> enclosing."
>>
>> The result of this method contract is that a template such as...
>> $table(emptyMessage={$errorMessage; null="The list is empty."$})$
>> ...will fail if the attribute "errorMessage" is not defined. I want to
>> show the error messag if it exists, otherwise I want to show "The list
>> is empty.". I should not have to define "errorMessage" unless there is
>> an actual error message.
>>
>> This works even when "errorMessage" is not defined...
>> $table(emptyMessage=errorMessage)$
>>
>> I believe the delegation to the enclosing template in
>> checkNullAttributeAgainstFormalArguments is flawed.
>>
>> -Nate
>> _______________________________________________
>> stringtemplate-interest mailing list
>> stringtemplate-interest at antlr.org
>> http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest
>>     
>
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest
>   


From parrt at cs.usfca.edu  Thu Apr 26 12:00:44 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 26 Apr 2007 12:00:44 -0700
Subject: [stringtemplate-interest] formal arg checking
In-Reply-To: <4630E8EF.2050100@n4te.com>
References: <462E5B20.2040502@n4te.com>
	<36E7A8D8-0310-4D54-9FAC-EDC66263842A@cs.usfca.edu>
	<4630E8EF.2050100@n4te.com>
Message-ID: <D27156E7-3541-4DA3-9594-4A1DE5FE7B19@cs.usfca.edu>


On Apr 26, 2007, at 11:01 AM, Nate wrote:

> In this particular case, the "table" template displays a table of  
> data.
> If no data is specified, it displays an error message from the
> controller OR a message ("The list is empty.") from the template. If
> there is no error, the message comes from the template, not from the
> controller.

Can't a simple IF fix this in the template?

Ter
PS	i'm leaving now for the airport. gone 4 days...

From misc at n4te.com  Thu Apr 26 12:09:53 2007
From: misc at n4te.com (Nate)
Date: Thu, 26 Apr 2007 12:09:53 -0700
Subject: [stringtemplate-interest] formal arg checking
In-Reply-To: <D27156E7-3541-4DA3-9594-4A1DE5FE7B19@cs.usfca.edu>
References: <462E5B20.2040502@n4te.com>	<36E7A8D8-0310-4D54-9FAC-EDC66263842A@cs.usfca.edu>	<4630E8EF.2050100@n4te.com>
	<D27156E7-3541-4DA3-9594-4A1DE5FE7B19@cs.usfca.edu>
Message-ID: <4630F901.5070700@n4te.com>

I assume you are proposing this...

$if (errorMessage)$
    $table(emptyMessage=errorMessage)$
$else$
    $table(emptyMessage="The list is empty.")$
$endif$

While this would solve my specific scenario, formal argument checking is 
still flawed. I should be able to use undefined attributes when applying 
a template, like this...

$table(emptyMessage={$errorMessage; null="The list is empty."$})$

When "errorMessage" is not defined, that code currently throws an error 
saying that the attribute "errorMessage" is not a valid formal argument 
for the "table" template.

Also, the workaround to use an IF statement is not very elegant for more 
complex scenarios because it duplicates the template call. Eg...

$if (errorMessage)$
    $table(
       emptyMessage=errorMessage,
       rows={
          Lots of HTML here.
       }
    )$
$else$
    $table(
       emptyMessage="The list is empty.",
       rows={
          Lots of HTML here.
       }
    )$
$endif$

Hope you have fun on your trip!

-Nate


Terence Parr wrote:
> On Apr 26, 2007, at 11:01 AM, Nate wrote:
>
>> In this particular case, the "table" template displays a table of
>> data.
>> If no data is specified, it displays an error message from the
>> controller OR a message ("The list is empty.") from the template. If
>> there is no error, the message comes from the template, not from the
>> controller.
>
> Can't a simple IF fix this in the template?
>
> Ter
> PS i'm leaving now for the airport. gone 4 days...
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest


From parrt at cs.usfca.edu  Sun Apr 29 15:39:10 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 29 Apr 2007 15:39:10 -0700
Subject: [stringtemplate-interest] formal arg checking
In-Reply-To: <4630F901.5070700@n4te.com>
References: <462E5B20.2040502@n4te.com>	<36E7A8D8-0310-4D54-9FAC-EDC66263842A@cs.usfca.edu>	<4630E8EF.2050100@n4te.com>
	<D27156E7-3541-4DA3-9594-4A1DE5FE7B19@cs.usfca.edu>
	<4630F901.5070700@n4te.com>
Message-ID: <8174115D-0379-46DC-BB6E-803B2318D3DB@cs.usfca.edu>


On Apr 26, 2007, at 12:09 PM, Nate wrote:

> I assume you are proposing this...
>
> $if (errorMessage)$
>     $table(emptyMessage=errorMessage)$
> $else$
>     $table(emptyMessage="The list is empty.")$
> $endif$
>
> While this would solve my specific scenario, formal argument  
> checking is
> still flawed. I should be able to use undefined attributes when  
> applying
> a template, like this...
>
> $table(emptyMessage={$errorMessage; null="The list is empty."$})$
>
> When "errorMessage" is not defined, that code currently throws an  
> error
> saying that the attribute "errorMessage" is not a valid formal  
> argument
> for the "table" template.

Is error message defined anywhere in the surrounding context? that  
is, in an enclosing template?  If not, you cannot reference an  
undefined attribute just like in a programming language. If I were  
you, I would just add errorMessage to the template that invokes table  
and you problem disappears.

> Also, the workaround to use an IF statement is not very elegant for  
> more
> complex scenarios because it duplicates the template call. Eg...
>
> $if (errorMessage)$
>     $table(
>        emptyMessage=errorMessage,
>        rows={
>           Lots of HTML here.
>        }
>     )$
> $else$
>     $table(
>        emptyMessage="The list is empty.",
>        rows={
>           Lots of HTML here.
>        }
>     )$
> $endif$
>
> Hope you have fun on your trip!

Well, yes, but I ended up getting a cold. was at a party at my  
brother's house with 30 screaming 10-year-old boys.  As Jim Idle  
says, the probability that one of them has a nasty virus is 1. ;) The  
probability that they will do their best to give it to you is nearly  
1. ;)

Ter


From phang.sen.wen at gmail.com  Mon Apr 30 02:03:44 2007
From: phang.sen.wen at gmail.com (Christian Herlambang)
Date: Mon, 30 Apr 2007 11:03:44 +0200
Subject: [stringtemplate-interest] Can't parse chunk exception.
Message-ID: <83c0dd330704300203u38268ae3l14a6b06e136ef942@mail.gmail.com>

Hallo Ter,

On Fri Apr 13 10:39:22 PDT 2007, Terence Parr parrt at cs.usfca.edu wrote:
>Hi. It is using <...> as the expression delimiters.  That is the
default with STG(reader).  You can tell it >to use the $..$ though
with an argument.
>Ter

I encountered the same problem and I have used $...$ as the expression
deliminiters as you wrote in here:
http://www.codegeneration.net/tiki-read_article.php?articleId=65

The XML Generator Part. I just copy and paste the source coude and XML.stg

It compiled but when I run it, it gives me the same error code:

****error code begin***
Can't parse chunk: /name
line 1:1: unexpected char: '/'
        at org.antlr.stringtemplate.language.ActionLexer.nextToken(ActionLexer.java:219)
        at antlr.TokenBuffer.fill(TokenBuffer.java:69)
        at antlr.TokenBuffer.LA(TokenBuffer.java:80)
        at antlr.LLkParser.LA(LLkParser.java:52)
        at org.antlr.stringtemplate.language.ActionParser.action(ActionParser.java:111)
        at org.antlr.stringtemplate.StringTemplate.parseAction(StringTemplate.java:957)
        at org.antlr.stringtemplate.language.TemplateParser.action(TemplateParser.java:161)
        at org.antlr.stringtemplate.language.TemplateParser.template(TemplateParser.java:127)
        at org.antlr.stringtemplate.StringTemplate.breakTemplateIntoChunks(StringTemplate.java:931)
        at org.antlr.stringtemplate.StringTemplate.setTemplate(StringTemplate.java:532)
        at org.antlr.stringtemplate.language.GroupParser.template(GroupParser.java:327)
        at org.antlr.stringtemplate.language.GroupParser.group(GroupParser.java:186)
        at org.antlr.stringtemplate.StringTemplateGroup.parseGroup(StringTemplateGroup.java:769)
        at org.antlr.stringtemplate.StringTemplateGroup.<init>(StringTemplateGroup.java:271)
        at org.antlr.stringtemplate.StringTemplateGroup.<init>(StringTemplateGroup.java:241)
        at Dump.main(Dump.java:31)
problem parsing template 'class'
java.lang.NullPointerException
        at org.antlr.stringtemplate.language.TemplateParser.action(TemplateParser.java:162)
        at org.antlr.stringtemplate.language.TemplateParser.template(TemplateParser.java:127)
        at org.antlr.stringtemplate.StringTemplate.breakTemplateIntoChunks(StringTemplate.java:931)
        at org.antlr.stringtemplate.StringTemplate.setTemplate(StringTemplate.java:532)
        at org.antlr.stringtemplate.language.GroupParser.template(GroupParser.java:327)
        at org.antlr.stringtemplate.language.GroupParser.group(GroupParser.java:186)
        at org.antlr.stringtemplate.StringTemplateGroup.parseGroup(StringTemplateGroup.java:769)
        at org.antlr.stringtemplate.StringTemplateGroup.<init>(StringTemplateGroup.java:271)
        at org.antlr.stringtemplate.StringTemplateGroup.<init>(StringTemplateGroup.java:241)
        at Dump.main(Dump.java:31

****error code end****

>You can tell it  to use the $..$ though with an argument.
What do you mean exactly by that? How can I tel it to use $...$ with
an argument.

Thanks for the help.

Christie

From misc at n4te.com  Mon Apr 30 20:16:30 2007
From: misc at n4te.com (Nate)
Date: Mon, 30 Apr 2007 20:16:30 -0700
Subject: [stringtemplate-interest] formal arg checking
In-Reply-To: <8174115D-0379-46DC-BB6E-803B2318D3DB@cs.usfca.edu>
References: <462E5B20.2040502@n4te.com>	<36E7A8D8-0310-4D54-9FAC-EDC66263842A@cs.usfca.edu>	<4630E8EF.2050100@n4te.com>	<D27156E7-3541-4DA3-9594-4A1DE5FE7B19@cs.usfca.edu>	<4630F901.5070700@n4te.com>
	<8174115D-0379-46DC-BB6E-803B2318D3DB@cs.usfca.edu>
Message-ID: <4636B10E.50606@n4te.com>

Terence Parr wrote:
> On Apr 26, 2007, at 12:09 PM, Nate wrote:
>> assume you are proposing this...
>>
>> $if (errorMessage)$
>> $table(emptyMessage=errorMessage)$
>> $else$
>> $table(emptyMessage="The list is empty.")$
>> $endif$
>>
>> While this would solve my specific scenario, formal argument
>> checking is
>> still flawed. I should be able to use undefined attributes when
>> applying
>> a template, like this...
>>
>> $table(emptyMessage={$errorMessage; null="The list is empty."$})$
>>
>> When "errorMessage" is not defined, that code currently throws an
>> error
>> saying that the attribute "errorMessage" is not a valid formal
>> argument
>> for the "table" template.
>
> Is error message defined anywhere in the surrounding context? that
> is, in an enclosing template? If not, you cannot reference an
> undefined attribute just like in a programming language. If I were
> you, I would just add errorMessage to the template that invokes table
> and you problem disappears.
No, errorMessage is only defined in the surrounding context when there 
is an error message. I am pretty sure that ST out of the box allows this 
to work...

$table(emptyMessage=errorMessage)$

But not this...

$table(emptyMessage={$errorMessage$})$

In the latter, ST explodes with an exception saying that "errorMessage" 
is not a formal argument to "table". While this is true, it is not 
consistent behavior with the former.

That is what doesn't make sense to me.

I have removed formal argument checking from my local copy of ST. I'm 
posting this because I think ST formal argument checking should be fixed 
in the official distribution.

This should fail with "table doesn't have a formal argument named nate" 
exception...

$table(nate="moo")$

This should NOT fail even if "cow" is undefined ("rows" is a valid 
formal arg)...

$table(rows={$cow$})$


I'd like to tack on a couple unrelated items since I'm here typing anyway...

A. Why does this fail?... $first(tests).name$
Seems like that should be valid.
$first(tests):{$it.name$}$ is quite an ugly workaround.

B. Would index access to lists break separation? Eg...
$tests[0].name$
$tests[1].name$
[0] can be done with first(), but getting the nth element is impossible 
otherwise.

C. Imagine this code...
$tests:{test|
  $test.values:{value|
    $value$,
  }$
}
Output might be...
      value1, value2
test1 123, 456
test2 321, 654
test3 789, 987
Now I want to output the table differently, rotated 90 degrees like this...
       test1, test2, test3
value1 123, 321, 789
value2 456, 654, 987
How is this possible with ST? Please don't say just do it in the 
controller. :) Eg, using psuedo code...
for (i : 0 to numValues-1)
  for (test : tests)
    $test.values[i]$,
Please assume all tests have the same number of values.

-Nate


