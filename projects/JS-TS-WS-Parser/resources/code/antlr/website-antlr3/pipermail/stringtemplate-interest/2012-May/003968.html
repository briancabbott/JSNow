<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [stringtemplate-interest] joining attributes with a separator when	some are optional
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:stringtemplate-interest%40antlr.org?Subject=Re:%20%5Bstringtemplate-interest%5D%20joining%20attributes%20with%20a%20separator%20when%0A%09some%20are%20optional&In-Reply-To=%3C1C448C478A6B4743AF19DBC3C3DCE1320391C3E4B61D%40HMS.hm.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003967.html">
   <LINK REL="Next"  HREF="003969.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[stringtemplate-interest] joining attributes with a separator when	some are optional</H1>
    <B>Henno Vermeulen</B> 
    <A HREF="mailto:stringtemplate-interest%40antlr.org?Subject=Re:%20%5Bstringtemplate-interest%5D%20joining%20attributes%20with%20a%20separator%20when%0A%09some%20are%20optional&In-Reply-To=%3C1C448C478A6B4743AF19DBC3C3DCE1320391C3E4B61D%40HMS.hm.local%3E"
       TITLE="[stringtemplate-interest] joining attributes with a separator when	some are optional">henno at huizemolenaar.nl
       </A><BR>
    <I>Tue May 29 05:51:15 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="003967.html">[stringtemplate-interest] ST 4.0.5 - Recursively access properties	of model objects
</A></li>
        <LI>Next message: <A HREF="003969.html">[stringtemplate-interest] joining attributes with a separator when	some are optional
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3968">[ date ]</a>
              <a href="thread.html#3968">[ thread ]</a>
              <a href="subject.html#3968">[ subject ]</a>
              <a href="author.html#3968">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

What would be the simplest syntax with StringTemplate to join multiple attributes with a separator without getting too many separators when an attribute is empty/absent/null? This is a use case I encounter very often! I normally solve it in Java using a utility method &quot;joinNonBlank(separator, String... strings)&quot; which only concats the non-blank Strings with the given separator.

For example when formatting a person's name or address and certain attributes (e.g. surname prefix, country of address) are optional.

A complete address could be formatted as &quot;&lt;address&gt;\n&lt;zipCode&gt; &lt;city&gt;\n&lt;country&gt;&quot;. However, I don't want the separating &quot;\n&quot; in case the country is absent and I don't want the space between zipCode and city if either of them are absent. Similarly a person's name may be formatted as &quot;&lt;firstName&gt; &lt;surNamePrefix&gt; &lt;surName&gt;&quot;, but I don't want a separating space in case a field is empty/absent/null.

Below you can find a failing unit test (because of extra spaces) where I would like the personTemplate changed so that it satisfies the test. (Will the solution make a difference if the attributes are part of a Person object as in &quot;&lt;person.firstName&gt; &lt; person.surNamePrefix&gt; &lt; person.surName&gt;&quot;?)

Thank you,
Henno Vermeulen
Huize Molenaar

     @Test
     public void firstNamePrefixSurNameJoinedNonEmpty() {
         // TODO how do we join multiple attributes with a separator?
         String personTemplate = &quot;&lt;firstName&gt; &lt;surNamePrefix&gt; &lt;surName&gt;&quot;;

         assertEquals(
                   &quot;Max Planck&quot;,
                   new ST(personTemplate).add(&quot;firstName&quot;, &quot;Max&quot;)
                            .add(&quot;surName&quot;, &quot;Planck&quot;).render());
         assertEquals(&quot;Einstein&quot;,
                   new ST(personTemplate).add(&quot;surName&quot;, &quot;Einstein&quot;).render());
         assertEquals(&quot;Albert&quot;, new ST(personTemplate)
                   .add(&quot;firstName&quot;, &quot;Albert&quot;).render());
         assertEquals(&quot;Johannes Diderik van der Waals&quot;,
                   new ST(personTemplate).add(&quot;firstName&quot;, &quot;Johannes Diderik&quot;)
                            .add(&quot;surNamePrefix&quot;, &quot;van der&quot;)
                            .add(&quot;surName&quot;, &quot;Waals&quot;), vanDerWaals);
     }

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20120529/99207030/attachment.html">http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20120529/99207030/attachment.html</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003967.html">[stringtemplate-interest] ST 4.0.5 - Recursively access properties	of model objects
</A></li>
	<LI>Next message: <A HREF="003969.html">[stringtemplate-interest] joining attributes with a separator when	some are optional
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3968">[ date ]</a>
              <a href="thread.html#3968">[ thread ]</a>
              <a href="subject.html#3968">[ subject ]</a>
              <a href="author.html#3968">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">More information about the stringtemplate-interest
mailing list</a><br>
</body></html>
