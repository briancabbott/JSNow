<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [stringtemplate-interest] deadlock during the static initialization
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:stringtemplate-interest%40antlr.org?Subject=Re:%20%5Bstringtemplate-interest%5D%20deadlock%20during%20the%20static%20initialization&In-Reply-To=%3C496CDF9D.8040902%40serie-a.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001766.html">
   <LINK REL="Next"  HREF="001768.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[stringtemplate-interest] deadlock during the static initialization</H1>
    <B>Nils Liebelt</B> 
    <A HREF="mailto:stringtemplate-interest%40antlr.org?Subject=Re:%20%5Bstringtemplate-interest%5D%20deadlock%20during%20the%20static%20initialization&In-Reply-To=%3C496CDF9D.8040902%40serie-a.de%3E"
       TITLE="[stringtemplate-interest] deadlock during the static initialization">nils.liebelt at serie-a.de
       </A><BR>
    <I>Tue Jan 13 10:38:21 PST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001766.html">[stringtemplate-interest] &lt;@region&gt; in .st files
</A></li>
        <LI>Next message: <A HREF="001768.html">[stringtemplate-interest] deadlock during the static	initialization
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1767">[ date ]</a>
              <a href="thread.html#1767">[ thread ]</a>
              <a href="subject.html#1767">[ subject ]</a>
              <a href="author.html#1767">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

I spotted an racing condition that occures during the (static) 
initialization of StringTemplate and StringTemplateGroup.
The result is an deadlock that occures when initializing the classes 
from different threads. Please find attached a simple junit testcase
that illustrates the behaviour. Also attached is a thread dump that 
shows stacktraces after the deadlock occures. To get around this
issue you must statically initialize one of the classes before actual 
creating the instances of the mentioned classes  (see testcase)

The problem affects StringTemplate Version 3.2. I can reproduce the 
behaviour on sun jvm 1.6.0_03-b05 (64bit) and 1.6.0_07-b06 (32bit)

Is this a known bug? Can I raise a jira?


Regards,

Nils
-------------- next part --------------
A non-text attachment was scrubbed...
Name: MultiThreadedSTInitTest.java
Type: text/x-java
Size: 1576 bytes
Desc: not available
Url : <A HREF="http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090113/f4b227a4/attachment.bin">http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090113/f4b227a4/attachment.bin</A> 
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: thddmp.txt
Url: <A HREF="http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090113/f4b227a4/attachment.txt">http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20090113/f4b227a4/attachment.txt</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001766.html">[stringtemplate-interest] &lt;@region&gt; in .st files
</A></li>
	<LI>Next message: <A HREF="001768.html">[stringtemplate-interest] deadlock during the static	initialization
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1767">[ date ]</a>
              <a href="thread.html#1767">[ thread ]</a>
              <a href="subject.html#1767">[ subject ]</a>
              <a href="author.html#1767">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">More information about the stringtemplate-interest
mailing list</a><br>
</body></html>
