From David.Stenglein at deshaw.com  Thu Jul  3 13:48:16 2008
From: David.Stenglein at deshaw.com (Stenglein, David)
Date: Thu, 3 Jul 2008 16:48:16 -0400
Subject: [stringtemplate-interest] Newlines and templates applied to
	multivalued attributes.
Message-ID: <9728D331C7A425489028E60E59B56BA44BBA6D@mailnyc1.nyc.deshaw.com>

All,

I'm having a bit of trouble with newlines (seperators) when I am doing a
conditional test 
inside of a template being applied to a multi-valued attribute. I don't
want a
newline created if the called template has no output.


Outertemplate ::= <<

<listofthings:listitem();separator="\n">

>>


listitem(potentialitem) ::= <<
<if(potentialitem.attribute)>
Print something.
<endif>
>>

If I have a list of 5 items and the last two have attribute=True, then I
get three blank lines and two properly separated list items.

If I put a trailing newline in listitem(), then things are separated, of
course, but there is a trailing newline.

Any suggestions? I'd like to avoid having an intermediate template if
it's not necessary.

Thanks,
Dave

From zen at freedbms.net  Thu Jul  3 19:15:52 2008
From: zen at freedbms.net (Zenaan Harkness)
Date: Fri, 4 Jul 2008 12:15:52 +1000
Subject: [stringtemplate-interest] Newlines and templates applied
	to	multivalued attributes.
In-Reply-To: <9728D331C7A425489028E60E59B56BA44BBA6D@mailnyc1.nyc.deshaw.com>
References: <9728D331C7A425489028E60E59B56BA44BBA6D@mailnyc1.nyc.deshaw.com>
Message-ID: <20080704021552.GA22599@freedbms.net>

> I'm having a bit of trouble with newlines (seperators) when I am doing a
> conditional test 
> inside of a template being applied to a multi-valued attribute. I don't
> want a
> newline created if the called template has no output.
> 
> 
> Outertemplate ::= <<
> 
> <listofthings:listitem();separator="\n">
> 
> >>

One way is, in your model (listofthings), to build up the "business
logic" in your model, so that the model provides accessors for
getSubListOfThings() for example. Then your template might become:

   <subListOfThings:listitem();separator="\n">

If you insert a new attribute into your template just for that model, or
as I do it, just insert the model as (one of) my attribute, and access
things like so:

   <model.subListOfThings:listitem();separator="\n">

The model is where you want your logic, your custom data manipulators,
etc.

The philosophy of StringTemplate is _strict_ MVC. It is in fact the only
strict MVC templating engine on the planet (as far as I ever found)!

This has consequences:

* It requires a new discipline of template and system authoring.

* Anything that starts to get even a little interesting must be
  implemented in your model.

* You get a really clean separation of model and logic, from view code,
  as a result.

I work in Java, so my Model.java class(es) implement my "interesting"
stuff.

Good luck, StringTemplate is a great tool!

zen

-- 
Homepage: www.SoulSound.net -- Free Australia: www.UPMART.org
Please respect the confidentiality of this email as sensibly warranted.

From parrt at cs.usfca.edu  Sat Jul  5 13:54:57 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 5 Jul 2008 13:54:57 -0700
Subject: [stringtemplate-interest] padding and such for pretty printing
Message-ID: <CC822F94-CFCD-4FDE-9F24-BF9A32617A35@cs.usfca.edu>

hi! Heh, I need to start thinking about building a pretty printer and  
have a basic architecture in mind. The problem is that I need away in  
ST to pad things out or anchor things more easily. Moreover, I might  
need to say things in the template like "if the help look for this  
element exceeds 20 characters, start it on a new line".Technically, we  
can do any expression we want as long as it is on the shape or the  
presence or absence of an attribute. We just can't test its value  
(booleans being the only special case). In other words there is  
nothing against model-view separation doing this:

<if(width(anotherTemplate()) > 20)>...<else>...<endif>

This means we have to add expressions within IF tags and I would need  
to do some type checking to make sure that you only did  computations  
on things like width() function results.

Has anybody built a pretty printer and know what the requirements  
are?  Jurgen Vinju at CWI in Amsterdam has a really nice tool in  
MetaEnv where you can group chunks into effectively large characters  
like latex... it then knows how to move them to a new line or whatever.

Ter

From parrt at cs.usfca.edu  Sat Jul  5 15:01:12 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 5 Jul 2008 15:01:12 -0700
Subject: [stringtemplate-interest] padding and such for pretty printing
In-Reply-To: <CC822F94-CFCD-4FDE-9F24-BF9A32617A35@cs.usfca.edu>
References: <CC822F94-CFCD-4FDE-9F24-BF9A32617A35@cs.usfca.edu>
Message-ID: <D8464922-61B7-4E9C-B539-683AD5BE6481@cs.usfca.edu>


On Jul 5, 2008, at 1:54 PM, Terence Parr wrote:

> hi! Heh, I need to start thinking about building a pretty printer and
> have a basic architecture in mind. The problem is that I need away in
> ST to pad things out or anchor things more easily. Moreover, I might
> need to say things in the template like "if the help look for this

ooops. voice recog failed.  "if the character width for this element..."

Ter

>
> element exceeds 20 characters, start it on a new line".Technically, we
> can do any expression we want as long as it is on the shape or the
> presence or absence of an attribute. We just can't test its value
> (booleans being the only special case). In other words there is
> nothing against model-view separation doing this:
>
> <if(width(anotherTemplate()) > 20)>...<else>...<endif>
>
> This means we have to add expressions within IF tags and I would need
> to do some type checking to make sure that you only did  computations
> on things like width() function results.
>
> Has anybody built a pretty printer and know what the requirements
> are?  Jurgen Vinju at CWI in Amsterdam has a really nice tool in
> MetaEnv where you can group chunks into effectively large characters
> like latex... it then knows how to move them to a new line or  
> whatever.
>
> Ter
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest


From zen at freedbms.net  Sat Jul  5 20:01:38 2008
From: zen at freedbms.net (Zenaan Harkness)
Date: Sun, 6 Jul 2008 13:01:38 +1000
Subject: [stringtemplate-interest] padding and such for pretty printing
In-Reply-To: <CC822F94-CFCD-4FDE-9F24-BF9A32617A35@cs.usfca.edu>
References: <CC822F94-CFCD-4FDE-9F24-BF9A32617A35@cs.usfca.edu>
Message-ID: <20080706030138.GK9425@freedbms.net>

> <if(width(anotherTemplate()) > 20)>...<else>...<endif>
> 
> This means we have to add expressions within IF tags and I would need  
> to do some type checking to make sure that you only did  computations  
> on things like width() function results.
> 
> Has anybody built a pretty printer and know what the requirements  

I've only done mine at the model layer, so it is somewhat specific to my
model.

I'm introducing new model types, so it is getting more generic.

I have formatting of the following genres:
-  truncation (to show short version of longer strings)
-  the obvious toUpper/Lower
-  padding formatting, which is high-performance if a standard
   pad character is used (which I think is all I support for now).

I don't have a "requirements spec", and I wrote the code earlier this
year now, but happy to pass on the code to anyone interested.

Also, I wrote a clean STGTraverser, for Iterating, and Iterable-ing,
StringTemplateGroup parents. Again, just email if you want it.

zen

-- 
Homepage: www.SoulSound.net -- Free Australia: www.UPMART.org
Please respect the confidentiality of this email as sensibly warranted.

From parrt at cs.usfca.edu  Sun Jul  6 13:58:24 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 6 Jul 2008 13:58:24 -0700
Subject: [stringtemplate-interest] padding and such for pretty printing
In-Reply-To: <20080706030138.GK9425@freedbms.net>
References: <CC822F94-CFCD-4FDE-9F24-BF9A32617A35@cs.usfca.edu>
	<20080706030138.GK9425@freedbms.net>
Message-ID: <1DCB9E23-536A-4D57-960B-56CC136C28E4@cs.usfca.edu>

Interesting. my basic design is to build a parse tree, not an AST, and  
then look up a template for each rule. I.e., for rule expression, emit  
it with a template called expression.  Now, within the expression, we  
need to be able to say what can be broken up and what needs to be  
wrapped and so on.  Jurgen Vinju gave me a nice demonstration of what  
he is working on... I think this paper might summarize:

http://ftp.cwi.nl/CWIreports/SEN/SEN-R0601.pdf

Right. you'll note that in his table 2, view showing boxes with stuff  
inside. Then he can say whether they should be laid out horizontally  
(H) or vertically (V).  Verryyyy  interesting.

Ter

On Jul 5, 2008, at 8:01 PM, Zenaan Harkness wrote:

>> <if(width(anotherTemplate()) > 20)>...<else>...<endif>
>>
>> This means we have to add expressions within IF tags and I would need
>> to do some type checking to make sure that you only did  computations
>> on things like width() function results.
>>
>> Has anybody built a pretty printer and know what the requirements
>
> I've only done mine at the model layer, so it is somewhat specific  
> to my
> model.
>
> I'm introducing new model types, so it is getting more generic.
>
> I have formatting of the following genres:
> -  truncation (to show short version of longer strings)
> -  the obvious toUpper/Lower
> -  padding formatting, which is high-performance if a standard
>   pad character is used (which I think is all I support for now).
>
> I don't have a "requirements spec", and I wrote the code earlier this
> year now, but happy to pass on the code to anyone interested.
>
> Also, I wrote a clean STGTraverser, for Iterating, and Iterable-ing,
> StringTemplateGroup parents. Again, just email if you want it.
>
> zen
>
> -- 
> Homepage: www.SoulSound.net -- Free Australia: www.UPMART.org
> Please respect the confidentiality of this email as sensibly  
> warranted.
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest


From jens.boeykens at gmail.com  Mon Jul  7 00:56:53 2008
From: jens.boeykens at gmail.com (Jens Boeykens)
Date: Mon, 7 Jul 2008 09:56:53 +0200
Subject: [stringtemplate-interest] howto set separator in parallel list
	iteration
Message-ID: <53c4e43f0807070056q39a03b69l14879fd9a78c0c3@mail.gmail.com>

Hello!

I have a problem with iterating parallel lists. I use antlr together with
stringtemplate to generate templates. My antlr code looks like this:

altList
    :   ^( (a+=alternative r+=rewrite)+ )
      ->altList(alternative={$a}, rewrite = {$r})
;


my stringtemplate:

altList(alternative, rewrite) ::= <<
<alternative,rewrite: {alt,rw | <alt> <rw>}>
>>



This gives
input :            INT -> test (a = {$int}) | CHAR -> test (a = {$int})
output:           INT -> test (a = {$int}) CHAR -> test (a = {$int})

So parallel iterating works, but the separator '|' is missing in the output
(before CHAR).

What should I change in my template so I can add a separator.
Something like <alternative,rewrite: {alt,rw | <alt> <rw> | }> or
<alternative,rewrite: {alt,rw | <alt> <rw>; separator=" | "}>
doesn't work...

Thanks!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org:8080/pipermail/stringtemplate-interest/attachments/20080707/33f65829/attachment.html 

From jens.boeykens at gmail.com  Mon Jul  7 01:28:12 2008
From: jens.boeykens at gmail.com (Jens Boeykens)
Date: Mon, 7 Jul 2008 10:28:12 +0200
Subject: [stringtemplate-interest] howto set separator in parallel list
	iteration
In-Reply-To: <53c4e43f0807070056q39a03b69l14879fd9a78c0c3@mail.gmail.com>
References: <53c4e43f0807070056q39a03b69l14879fd9a78c0c3@mail.gmail.com>
Message-ID: <53c4e43f0807070128s57872145w4901cde2120edec5@mail.gmail.com>

Looks like the parallel iteration doesn't work correctly either. I miscopied
my input...

input:            INT -> test(a={$int}) | CHAR -> test(b={$CHAR})
output:          INT -> test (a = {$int}) CHAR -> test (a = {$int})

So it is correct for the first list [INT, CHAR], but it doesn't iterate over
the second list [-> test(a={$int}), -> test(b={$CHAR})]
The "-> test(b={$CHAR})" doesn't appear in the output. Instead the first
element is displayed twice

What I want to generate is (same as input):
Expected output:  INT -> test(a={$int}) | CHAR -> test(b={$CHAR})

Greetings


2008/7/7 Jens Boeykens <jens.boeykens at gmail.com>:

> Hello!
>
> I have a problem with iterating parallel lists. I use antlr together with
> stringtemplate to generate templates. My antlr code looks like this:
>
> altList
>     :   ^( (a+=alternative r+=rewrite)+ )
>       ->altList(alternative={$a}, rewrite = {$r})
> ;
>
>
> my stringtemplate:
>
> altList(alternative, rewrite) ::= <<
> <alternative,rewrite: {alt,rw | <alt> <rw>}>
> >>
>
>
>
> This gives
> input :            INT -> test (a = {$int}) | CHAR -> test (a = {$int})
> output:           INT -> test (a = {$int}) CHAR -> test (a = {$int})
>
> So parallel iterating works, but the separator '|' is missing in the output
> (before CHAR).
>
> What should I change in my template so I can add a separator.
> Something like <alternative,rewrite: {alt,rw | <alt> <rw> | }> or
> <alternative,rewrite: {alt,rw | <alt> <rw>; separator=" | "}>
> doesn't work...
>
> Thanks!
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org:8080/pipermail/stringtemplate-interest/attachments/20080707/e4277043/attachment.html 

From jens.boeykens at gmail.com  Mon Jul  7 01:39:23 2008
From: jens.boeykens at gmail.com (Jens Boeykens)
Date: Mon, 7 Jul 2008 10:39:23 +0200
Subject: [stringtemplate-interest] howto set separator in parallel list
	iteration
In-Reply-To: <53c4e43f0807070128s57872145w4901cde2120edec5@mail.gmail.com>
References: <53c4e43f0807070056q39a03b69l14879fd9a78c0c3@mail.gmail.com>
	<53c4e43f0807070128s57872145w4901cde2120edec5@mail.gmail.com>
Message-ID: <53c4e43f0807070139j4d71837dy99e63a746ad84e41@mail.gmail.com>

Ok my last remark seems to be a bug in ANTLRv3.g retrieved from
http://www.antlr.org/grammar/ANTLR
The tree build doesn't contain the second element "-> test(b={$CHAR})" ...


2008/7/7 Jens Boeykens <jens.boeykens at gmail.com>:

> Looks like the parallel iteration doesn't work correctly either. I
> miscopied my input...
>
> input:            INT -> test(a={$int}) | CHAR -> test(b={$CHAR})
> output:          INT -> test (a = {$int}) CHAR -> test (a = {$int})
>
> So it is correct for the first list [INT, CHAR], but it doesn't iterate
> over the second list [-> test(a={$int}), -> test(b={$CHAR})]
> The "-> test(b={$CHAR})" doesn't appear in the output. Instead the first
> element is displayed twice
>
> What I want to generate is (same as input):
> Expected output:  INT -> test(a={$int}) | CHAR -> test(b={$CHAR})
>
> Greetings
>
>
> 2008/7/7 Jens Boeykens <jens.boeykens at gmail.com>:
>
> Hello!
>>
>> I have a problem with iterating parallel lists. I use antlr together with
>> stringtemplate to generate templates. My antlr code looks like this:
>>
>> altList
>>     :   ^( (a+=alternative r+=rewrite)+ )
>>       ->altList(alternative={$a}, rewrite = {$r})
>> ;
>>
>>
>> my stringtemplate:
>>
>> altList(alternative, rewrite) ::= <<
>> <alternative,rewrite: {alt,rw | <alt> <rw>}>
>> >>
>>
>>
>>
>> This gives
>> input :            INT -> test (a = {$int}) | CHAR -> test (a = {$int})
>> output:           INT -> test (a = {$int}) CHAR -> test (a = {$int})
>>
>> So parallel iterating works, but the separator '|' is missing in the
>> output (before CHAR).
>>
>> What should I change in my template so I can add a separator.
>> Something like <alternative,rewrite: {alt,rw | <alt> <rw> | }> or
>> <alternative,rewrite: {alt,rw | <alt> <rw>; separator=" | "}>
>> doesn't work...
>>
>> Thanks!
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org:8080/pipermail/stringtemplate-interest/attachments/20080707/92660f9b/attachment.html 

From jens.boeykens at gmail.com  Mon Jul  7 01:50:36 2008
From: jens.boeykens at gmail.com (Jens Boeykens)
Date: Mon, 7 Jul 2008 10:50:36 +0200
Subject: [stringtemplate-interest] howto set separator in parallel list
	iteration
In-Reply-To: <53c4e43f0807070128s57872145w4901cde2120edec5@mail.gmail.com>
References: <53c4e43f0807070056q39a03b69l14879fd9a78c0c3@mail.gmail.com>
	<53c4e43f0807070128s57872145w4901cde2120edec5@mail.gmail.com>
Message-ID: <53c4e43f0807070150w57cbfb59l990f3295395bc006@mail.gmail.com>

I think I solved the bug. In ANTLRv3.g I changed the rule "altList" as
follows:

altList
@init {
    // must create root manually as it's used by invoked rules in real antlr
tool.
    // leave here to demonstrate use of {...} in rewrite rule
    // it's really BLOCK[firstToken,"BLOCK"]; set line/col to previous ( or
: token.
    CommonTree blkRoot =
(CommonTree)adaptor.create(BLOCK,input.LT(-1),"BLOCK");
}
    :   a1=alternative rewrite ( '|' a2=alternative rewrite )*
        -> ^( {blkRoot} (alternative rewrite)+ EOB["EOB"] )
    ;

I deleted the question mark after rewrite in the tree rewrite rule.

Still need to find something for the separator now...

2008/7/7 Jens Boeykens <jens.boeykens at gmail.com>:

> Looks like the parallel iteration doesn't work correctly either. I
> miscopied my input...
>
> input:            INT -> test(a={$int}) | CHAR -> test(b={$CHAR})
> output:          INT -> test (a = {$int}) CHAR -> test (a = {$int})
>
> So it is correct for the first list [INT, CHAR], but it doesn't iterate
> over the second list [-> test(a={$int}), -> test(b={$CHAR})]
> The "-> test(b={$CHAR})" doesn't appear in the output. Instead the first
> element is displayed twice
>
> What I want to generate is (same as input):
> Expected output:  INT -> test(a={$int}) | CHAR -> test(b={$CHAR})
>
> Greetings
>
>
> 2008/7/7 Jens Boeykens <jens.boeykens at gmail.com>:
>
> Hello!
>>
>> I have a problem with iterating parallel lists. I use antlr together with
>> stringtemplate to generate templates. My antlr code looks like this:
>>
>> altList
>>     :   ^( (a+=alternative r+=rewrite)+ )
>>       ->altList(alternative={$a}, rewrite = {$r})
>> ;
>>
>>
>> my stringtemplate:
>>
>> altList(alternative, rewrite) ::= <<
>> <alternative,rewrite: {alt,rw | <alt> <rw>}>
>> >>
>>
>>
>>
>> This gives
>> input :            INT -> test (a = {$int}) | CHAR -> test (a = {$int})
>> output:           INT -> test (a = {$int}) CHAR -> test (a = {$int})
>>
>> So parallel iterating works, but the separator '|' is missing in the
>> output (before CHAR).
>>
>> What should I change in my template so I can add a separator.
>> Something like <alternative,rewrite: {alt,rw | <alt> <rw> | }> or
>> <alternative,rewrite: {alt,rw | <alt> <rw>; separator=" | "}>
>> doesn't work...
>>
>> Thanks!
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org:8080/pipermail/stringtemplate-interest/attachments/20080707/6e9e9a19/attachment.html 

From tilman.walter at gmx.de  Mon Jul  7 02:51:21 2008
From: tilman.walter at gmx.de (tilman walter)
Date: Mon, 07 Jul 2008 11:51:21 +0200
Subject: [stringtemplate-interest] antlr & stringtemplate rewrite=true
Message-ID: <4871E719.3070702@gmx.de>

hi list,

I try to emit text through stringtemplate in a treegrammar.
when not using "rewrite=true" and defining rewrite-rules for all rules I 
get a fairly correct result.

However the output only slightly differs from the input, so I'd like to 
define just rewrite rules for the parts that differ.
Unfortunately Iturning on rewrite=true results in several warnings of 
type: 
    [java] ANTLR Parser Generator  Version 3.1b1 (May 20, 2008)  1989-2008
    [java] warning(153): MyTree.g:287:4: with rewrite=true, alt 1 not 
simple node or obvious tree element; text attribute for rule not 
guaranteed to be              correct

And by trying to run it leads to a java.lang.ClassCastException: 
org.antlr.runtime.CommonTokenStream

Anybody an idea what i am doing wrong?

Is it not possible to only define a template-rule for special parts of 
my grammar or is it restricted to simple grammar-constructs?

Thanks in advance
Tilman

From Robert.Bodo at ccc.fi  Mon Jul  7 02:53:55 2008
From: Robert.Bodo at ccc.fi (Robert Bodo)
Date: Mon, 7 Jul 2008 11:53:55 +0200
Subject: [stringtemplate-interest] Robert Bodo is out of the office.
Message-ID: <OFF3FB3F5E.A7F4C234-ONC125747F.00366011-C125747F.00366011@ccc.fi>

I will be out of the office starting  2008.07.07 and will not return until
2008.07.21.

I will respond to your message when I return. In urgent case you can call
me on this phone number: +36304274572


From max.karavaev at gmail.com  Mon Jul  7 06:05:55 2008
From: max.karavaev at gmail.com (Maxim Karavaev)
Date: Mon, 7 Jul 2008 17:05:55 +0400
Subject: [stringtemplate-interest] Call static methods from template
Message-ID: <ad65f19c0807070605v28671ccarf5b07495f5a0b0e6@mail.gmail.com>

Hello!

I'm new for String Template Engine.

I just didn't find answer in docs for my simple question: are there
any ways to call static methods/properties from templates.
For example like this:

------------------------
Hello, $name$!

Today is $System.DateTime.Now.ToLongDateString()$

Bye!
------------------------


Tanks,

Max Karavaev

From parrt at cs.usfca.edu  Mon Jul  7 12:44:31 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 7 Jul 2008 12:44:31 -0700
Subject: [stringtemplate-interest] Call static methods from template
In-Reply-To: <ad65f19c0807070605v28671ccarf5b07495f5a0b0e6@mail.gmail.com>
References: <ad65f19c0807070605v28671ccarf5b07495f5a0b0e6@mail.gmail.com>
Message-ID: <5C52B4BF-2F8D-4A83-98E7-B34E24D9B9FA@cs.usfca.edu>

Hi. Nope.Cannot call general code from a template without turning the  
template into general code.
Ter
On Jul 7, 2008, at 6:05 AM, Maxim Karavaev wrote:

> Hello!
>
> I'm new for String Template Engine.
>
> I just didn't find answer in docs for my simple question: are there
> any ways to call static methods/properties from templates.
> For example like this:
>
> ------------------------
> Hello, $name$!
>
> Today is $System.DateTime.Now.ToLongDateString()$
>
> Bye!
> ------------------------
>
>
> Tanks,
>
> Max Karavaev
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest


From parrt at cs.usfca.edu  Mon Jul  7 12:52:55 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 7 Jul 2008 12:52:55 -0700
Subject: [stringtemplate-interest] howto set separator in parallel list
	iteration
In-Reply-To: <53c4e43f0807070150w57cbfb59l990f3295395bc006@mail.gmail.com>
References: <53c4e43f0807070056q39a03b69l14879fd9a78c0c3@mail.gmail.com>
	<53c4e43f0807070128s57872145w4901cde2120edec5@mail.gmail.com>
	<53c4e43f0807070150w57cbfb59l990f3295395bc006@mail.gmail.com>
Message-ID: <B553DCA7-B047-4D85-A903-E235CA5B53E3@cs.usfca.edu>


On Jul 7, 2008, at 1:50 AM, Jens Boeykens wrote:

> I think I solved the bug. In ANTLRv3.g I changed the rule "altList"  
> as follows:
>
> altList
> @init {
>     // must create root manually as it's used by invoked rules in  
> real antlr tool.
>     // leave here to demonstrate use of {...} in rewrite rule
>     // it's really BLOCK[firstToken,"BLOCK"]; set line/col to  
> previous ( or : token.
>     CommonTree blkRoot =  
> (CommonTree)adaptor.create(BLOCK,input.LT(-1),"BLOCK");
> }
>     :   a1=alternative rewrite ( '|' a2=alternative rewrite )*
>         -> ^( {blkRoot} (alternative rewrite)+ EOB["EOB"] )
>     ;
>
> I deleted the question mark after rewrite in the tree rewrite rule.

Actually, that rewrite ? is necessary... if there is no rewrite, you  
will get an exception.
Ter

From dieter_frej at gmx.net  Sun Jul 13 13:42:13 2008
From: dieter_frej at gmx.net (Dieter Frej)
Date: Sun, 13 Jul 2008 22:42:13 +0200
Subject: [stringtemplate-interest] basic question to template group
Message-ID: <20080713204213.120390@gmx.net>

Hi,

what I wanted to do was to put all templates (all in all these are around 5 templates) in one physical file and use this file to generate my output. Following the great number of example on the Internet, I figured that I need a template group to realize my requirement

StringTemplateGroup stGroup = new StringTemplateGroup("mygroup", "C:\\Users\\xyz\\workspace");
StringTemplate st = stGroup.getInstanceOf("junit");
st.setAttribute("tests", ts); 
System.out.println(st.toString());

I created the junit.st file and placed in the directory specified in the constructor of the StringTemplateGroup. In my junit.st I want to call another "template method"

junitclass(testheet) ::= <<

public class $tests.name$ {
	
	$m23ethod(rows=tests.rows)$
	
}
>>

Putting also

m23ethod(rows) ::= <<
	public void test() {
$rows:{ u |
	$u.inputColumns; separator=", "$
}$
>>

in junit.st does not working. I get the following exception

Exception in thread "main" java.lang.IllegalArgumentException: Can't find template m23ethod.st; context is [junit]; group hierarchy is [mygroup]

Maybe I do not fully get template groups, but why am I required to create a separate template for each method I am calling? Or am I doing something wrong? (or totally missing the point? also possible ;-)

And: what does the "mygroup" (in the constructor of the template group) tell me? What is it used for?

Thanks in advance

- Didi


-- 
Psssst! Schon das coole Video vom GMX MultiMessenger gesehen?
Der Eine f?r Alle: http://www.gmx.net/de/go/messenger03

From dieter_frej at gmx.net  Sun Jul 13 13:44:48 2008
From: dieter_frej at gmx.net (Dieter Frej)
Date: Sun, 13 Jul 2008 22:44:48 +0200
Subject: [stringtemplate-interest] listing attributes of elements in
	collection
Message-ID: <20080713204448.303920@gmx.net>

Hi,

I have the following structure of data in Java:

class u
- List<inputColumns> inputColumns

class inputColumns
- String identifier

What I now actually want to do is to list the identifiers of the inputColumns separated by ", ". How can I do that? The most obvious version

$u.inputColumns.identifier; separator=", "$

throws an exception. Did anyone understand what I want to do? Is there a solution for this problem...

Thanks in advance

Daniel
-- 
GMX startet ShortView.de. Hier findest Du Leute mit Deinen Interessen!
Jetzt dabei sein: http://www.shortview.de/wasistshortview.php?mc=sv_ext_mf at gmx

From parrt at cs.usfca.edu  Mon Jul 14 13:22:34 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 14 Jul 2008 13:22:34 -0700
Subject: [stringtemplate-interest] basic question to template group
In-Reply-To: <20080713204213.120390@gmx.net>
References: <20080713204213.120390@gmx.net>
Message-ID: <789DE687-2943-4A20-B9CA-0FE5B106CCC5@cs.usfca.edu>

To Use a group file, you must use the StringTemplateGroup(Reader)  
constructor... it does not find groups within directories... sorry  
about that.  call the file .stg not .st also as it will be a group.
Ter
On Jul 13, 2008, at 1:42 PM, Dieter Frej wrote:

> Hi,
>
> what I wanted to do was to put all templates (all in all these are  
> around 5 templates) in one physical file and use this file to  
> generate my output. Following the great number of example on the  
> Internet, I figured that I need a template group to realize my  
> requirement
>
> StringTemplateGroup stGroup = new StringTemplateGroup("mygroup", "C:\ 
> \Users\\xyz\\workspace");
> StringTemplate st = stGroup.getInstanceOf("junit");
> st.setAttribute("tests", ts);
> System.out.println(st.toString());
>
> I created the junit.st file and placed in the directory specified in  
> the constructor of the StringTemplateGroup. In my junit.st I want to  
> call another "template method"
>
> junitclass(testheet) ::= <<
>
> public class $tests.name$ {
> 	
> 	$m23ethod(rows=tests.rows)$
> 	
> }
>>>
>
> Putting also
>
> m23ethod(rows) ::= <<
> 	public void test() {
> $rows:{ u |
> 	$u.inputColumns; separator=", "$
> }$
>>>
>
> in junit.st does not working. I get the following exception
>
> Exception in thread "main" java.lang.IllegalArgumentException: Can't  
> find template m23ethod.st; context is [junit]; group hierarchy is  
> [mygroup]
>
> Maybe I do not fully get template groups, but why am I required to  
> create a separate template for each method I am calling? Or am I  
> doing something wrong? (or totally missing the point? also  
> possible ;-)
>
> And: what does the "mygroup" (in the constructor of the template  
> group) tell me? What is it used for?
>
> Thanks in advance
>
> - Didi
>
>
> -- 
> Psssst! Schon das coole Video vom GMX MultiMessenger gesehen?
> Der Eine f?r Alle: http://www.gmx.net/de/go/messenger03
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest


From parrt at cs.usfca.edu  Mon Jul 14 13:23:21 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 14 Jul 2008 13:23:21 -0700
Subject: [stringtemplate-interest] listing attributes of elements in
	collection
In-Reply-To: <20080713204448.303920@gmx.net>
References: <20080713204448.303920@gmx.net>
Message-ID: <00B4E87D-7ED9-4969-B978-7890C02C3635@cs.usfca.edu>


On Jul 13, 2008, at 1:44 PM, Dieter Frej wrote:

> Hi,
>
> I have the following structure of data in Java:
>
> class u
> - List<inputColumns> inputColumns
>
> class inputColumns
> - String identifier
>
> What I now actually want to do is to list the identifiers of the  
> inputColumns separated by ", ". How can I do that? The most obvious  
> version
>
> $u.inputColumns.identifier; separator=", "$
>
> throws an exception.

whichException?  perhaps the field or u is null.
Ter
> Did anyone understand what I want to do? Is there a solution for  
> this problem...
>
> Thanks in advance
>
> Daniel
> -- 
> GMX startet ShortView.de. Hier findest Du Leute mit Deinen Interessen!
> Jetzt dabei sein: http://www.shortview.de/wasistshortview.php?mc=sv_ext_mf at gmx
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest


From rgransberger at gmx.de  Mon Jul 14 13:55:27 2008
From: rgransberger at gmx.de (Rabea Gransberger)
Date: Mon, 14 Jul 2008 22:55:27 +0200
Subject: [stringtemplate-interest] basic question to template group
In-Reply-To: <20080713204213.120390@gmx.net>
References: <20080713204213.120390@gmx.net>
Message-ID: <487BBD3F.3000004@gmx.de>

Dieter Frej schrieb:
> Hi,
> 
> what I wanted to do was to put all templates (all in all these are around 5 templates) in one physical file and use this file to generate my output. Following the great number of example on the Internet, I figured that I need a template group to realize my requirement
> 
> StringTemplateGroup stGroup = new StringTemplateGroup("mygroup", "C:\\Users\\xyz\\workspace");
> StringTemplate st = stGroup.getInstanceOf("junit");
> st.setAttribute("tests", ts); 
> System.out.println(st.toString());
> 
> I created the junit.st file and placed in the directory specified in the constructor of the StringTemplateGroup. In my junit.st I want to call another "template method"
> 
> junitclass(testheet) ::= <<
> 
> public class $tests.name$ {
> 	
> 	$m23ethod(rows=tests.rows)$
> 	
> }
> 
> Putting also
> 
> m23ethod(rows) ::= <<
> 	public void test() {
> $rows:{ u |
> 	$u.inputColumns; separator=", "$
> }$
> 
> in junit.st does not working. I get the following exception
> 
> Exception in thread "main" java.lang.IllegalArgumentException: Can't find template m23ethod.st; context is [junit]; group hierarchy is [mygroup]
> 
> Maybe I do not fully get template groups, but why am I required to create a separate template for each method I am calling? Or am I doing something wrong? (or totally missing the point? also possible ;-)

You've mixed up the possiblities to create StringTemplate Groups:
- You may group .st files in a directory
- You may create a group file (.stg) which contains all the templates.

Here's an example:
public class GroupFiles {

	public static void main(String[] args) throws IOException {
		StringTemplateGroup groupDir = new StringTemplateGroup("theGroup",
				"templates/group");

		final StringTemplate oneTemplate = groupDir.getInstanceOf("one");
		oneTemplate.setAttribute("class", GroupFiles.class);
		System.out.println(oneTemplate.toString());

		final FileReader reader = new FileReader("templates/group.stg");
		StringTemplateGroup groupFile = new StringTemplateGroup(reader);
		reader.close();
		
		final StringTemplate oneTemplate2 = groupFile.getInstanceOf("one");
		oneTemplate2.setAttribute("class", GroupFiles.class);
		System.out.println(oneTemplate2.toString());
	}

}

Using the following directory structure:
templates
   -group
    -- one.st
    -- two.st
   - group.stg

Contents of the files:
one.st:
------
$two(className=class.name)$
------

two.st:
------
$className$
------

group.stg:
-------
group theGroup;

one(class) ::= <<
<two(className=class.name)>
 >>

two(className) ::= <<
<className>
 >>
--------

Hope this made it a bit clearer.

Rabea

From rgransberger at gmx.de  Mon Jul 14 14:06:41 2008
From: rgransberger at gmx.de (Rabea Gransberger)
Date: Mon, 14 Jul 2008 23:06:41 +0200
Subject: [stringtemplate-interest] listing attributes of elements
	in	collection
In-Reply-To: <20080713204448.303920@gmx.net>
References: <20080713204448.303920@gmx.net>
Message-ID: <487BBFE1.20301@gmx.de>

Dieter Frej schrieb:
> Hi,
> 
> I have the following structure of data in Java:
> 
> class u
> - List<inputColumns> inputColumns
> 
> class inputColumns
> - String identifier
> 
> What I now actually want to do is to list the identifiers of the inputColumns separated by ", ". How can I do that? The most obvious version
> 
> $u.inputColumns.identifier; separator=", "$

I don't know if you could use it like that. But what works is something 
like:

listColumns(u) ::= <<
<first(u.inputColumns):{col | 
<col.identifier>}><rest(u.inputColumns):{col | , <col.identifier>}>
 >>

public class AccessAttributes {

	public static final class U {
		public List<InputColumn> inputColumns = new ArrayList<InputColumn>();
	}

	public static final class InputColumn {
		public String identifier;

		InputColumn(String name) {
			this.identifier = name;
		}
	}

	public static void main(String[] args) throws IOException {
		U u = new U();
		u.inputColumns.add(new InputColumn("col1"));
		u.inputColumns.add(new InputColumn("col2"));

		final FileReader reader = new FileReader("templates/group.stg");
		StringTemplateGroup groupFile = new StringTemplateGroup(reader);
		reader.close();

		final StringTemplate listColumnsTemplate = groupFile
				.getInstanceOf("listColumns");
		listColumnsTemplate.setAttribute("u", u);
		System.out.println(listColumnsTemplate.toString());
	}

}

Have a look at the Cheat Sheet to find some examples for the functions 
Stringtemplate offers:
http://www.antlr.org/wiki/display/ST/StringTemplate+cheat+sheet

Rabea

From bobthekingofegypt at googlemail.com  Wed Jul 16 03:02:08 2008
From: bobthekingofegypt at googlemail.com (Richard Martin)
Date: Wed, 16 Jul 2008 11:02:08 +0100
Subject: [stringtemplate-interest] Question about using a separate Group
	file from within a group
Message-ID: <31d110d20807160302y1627e1c8g8958b3e2dbea913b@mail.gmail.com>

Hello, I don't think that title is a very good overview so I will try here.

I have an inheritance tree for my pages such as

Folder called siteA contains siteA templates such as :
Base.stg - outline of page that uses regions to fill in gaps
Page1.stg that extends Base.  - defines the missing bits in the middle.
Page2.stg that extends Base.  - same as 1 but with different things.

With multiple sites and pages I want to be able to call another
template group, generic.stg.  Doesn't need an inheritance tree.  So I
can go like this from inside an overriding region on page1 -
$doSomethingGeneric(paramA, paramB, paramC)$ and have it call a
template method from generic.stg.

I have loaded the generic folder and the site folder into a
templateGroupLoader.  Is it possible for me to call template methods
on generic from within a page template group?

Cheers
Bob

From parrt at cs.usfca.edu  Tue Jul 22 13:09:00 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 22 Jul 2008 13:09:00 -0700
Subject: [stringtemplate-interest] we need a name for a new rewriting tool
Message-ID: <ECE20B0C-3AFE-4603-BE73-87CE794DF3BA@cs.usfca.edu>

Hi, Leon Su, the maniac that brings you gUnit is currently working  
with me on a rewrite system similar to other rewrite engines such as  
ASF+SDF, Stratego, TXL etc...  I believe the tool is in line with the  
strategy championed by Andy Tripp.

You'll be able to say things like "whenever you see x+0 in an IF  
expression, rewrite it to x":

---------------------
rewrite Java; // applies rewrite rules to external java grammar
tokens {
	x=ID;
}

[ifstat ... expr]:
	"x+0" -> "x"
	"0+x" -> "x"
	...
---------------------

It is going to be extremely cool and will also work for tree rewrites.

The only problem we have is that we don't know what to call it. I  
originally had a nice tree rewriting system called Sorcerer (14 years  
ago) but now there are things like sourcerer and so on. can anybody  
help us name this tool?

THesaurus entries:

rewrite: revise, recast,reword, rephrase, redraft.

transform: change, alter,convert, metamorphose, transfigure,  
transmute, mutate; revolutionize,overhaul; remodel, reshape, redo,  
reconstruct, rebuild, reorganize, rearrange,rework, renew, revamp,  
remake, retool, transmogrify, morph

rebuild: reconstruct, renovate, restore, remodel, remake,reassemble.

Do any of those words help us?

I think "morph" is actually not bad.  Morpheme sounds cooler but makes  
less sense.  Morphica?  Morphic?  Morphologic? Morphomatic? ha! that  
one is funny.

How about metamorph? I like that one! google search only reveals a  
molecular device and some stupid school has taken metamorph.org. I  
guess that is no big deal because we will be using the antlr.org  
website for that.

Ter

From parrt at cs.usfca.edu  Tue Jul 22 13:10:08 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 22 Jul 2008 13:10:08 -0700
Subject: [stringtemplate-interest] Question about using a separate Group
	file from within a group
In-Reply-To: <31d110d20807160302y1627e1c8g8958b3e2dbea913b@mail.gmail.com>
References: <31d110d20807160302y1627e1c8g8958b3e2dbea913b@mail.gmail.com>
Message-ID: <29D80B03-966C-4D1D-B1FF-4D9D299F02DA@cs.usfca.edu>


On Jul 16, 2008, at 3:02 AM, Richard Martin wrote:

> Hello, I don't think that title is a very good overview so I will  
> try here.
>
> I have an inheritance tree for my pages such as
>
> Folder called siteA contains siteA templates such as :
> Base.stg - outline of page that uses regions to fill in gaps
> Page1.stg that extends Base.  - defines the missing bits in the  
> middle.
> Page2.stg that extends Base.  - same as 1 but with different things.
>
> With multiple sites and pages I want to be able to call another
> template group, generic.stg.  Doesn't need an inheritance tree.  So I
> can go like this from inside an overriding region on page1 -
> $doSomethingGeneric(paramA, paramB, paramC)$ and have it call a
> template method from generic.stg.
>
> I have loaded the generic folder and the site folder into a
> templateGroupLoader.  Is it possible for me to call template methods
> on generic from within a page template group?

I Don't really have good "scoping" syntax yet so you can refer to  
templates in lots of different groups. Perhaps create a super group  
that contains all of your generic stuff?

Ter

From parrt at cs.usfca.edu  Tue Jul 22 16:02:39 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 22 Jul 2008 16:02:39 -0700
Subject: [stringtemplate-interest] [antlr-interest] we need a name for a
	new rewriting tool
In-Reply-To: <86403CA0939415448BCCB83855EFE09A64DDF4@Bloodymary.ironwillgames.com>
References: <ECE20B0C-3AFE-4603-BE73-87CE794DF3BA@cs.usfca.edu>
	<86403CA0939415448BCCB83855EFE09A64DDF4@Bloodymary.ironwillgames.com>
Message-ID: <FF129186-E8DB-4513-B642-0E64AE0163DF@cs.usfca.edu>


On Jul 22, 2008, at 2:57 PM, Sam Harwell wrote:

> I believe 'transform' is a common term for this action in other  
> circles.

yup.

Also polymorph would work.  So far I like metamorph for "meaning" and  
morphic for "the sound of it".

Ter

From swapnil.kashikar at gmail.com  Wed Jul 23 02:12:04 2008
From: swapnil.kashikar at gmail.com (Swapnil Kashikar)
Date: Wed, 23 Jul 2008 05:12:04 -0400
Subject: [stringtemplate-interest] we need a name for a new rewriting
	tool
In-Reply-To: <ECE20B0C-3AFE-4603-BE73-87CE794DF3BA@cs.usfca.edu>
References: <ECE20B0C-3AFE-4603-BE73-87CE794DF3BA@cs.usfca.edu>
Message-ID: <b38f063f0807230212s76a49085j39a1ef98b68f6d52@mail.gmail.com>

How about "Morpheze" -- eze shows meaning and rhyming with trapeze
brings to mind a picture of doing mental acrobatics on a bar suspended
on two ropes (say, antlr & stringtemplate :-)

Swapnil

On Tue, Jul 22, 2008 at 4:09 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
> Hi, Leon Su, the maniac that brings you gUnit is currently working
> with me on a rewrite system similar to other rewrite engines such as
> ASF+SDF, Stratego, TXL etc...  I believe the tool is in line with the
> strategy championed by Andy Tripp.
>
> You'll be able to say things like "whenever you see x+0 in an IF
> expression, rewrite it to x":
>
> ---------------------
> rewrite Java; // applies rewrite rules to external java grammar
> tokens {
>        x=ID;
> }
>
> [ifstat ... expr]:
>        "x+0" -> "x"
>        "0+x" -> "x"
>        ...
> ---------------------
>
> It is going to be extremely cool and will also work for tree rewrites.
>
> The only problem we have is that we don't know what to call it. I
> originally had a nice tree rewriting system called Sorcerer (14 years
> ago) but now there are things like sourcerer and so on. can anybody
> help us name this tool?
>
> THesaurus entries:
>
> rewrite: revise, recast,reword, rephrase, redraft.
>
> transform: change, alter,convert, metamorphose, transfigure,
> transmute, mutate; revolutionize,overhaul; remodel, reshape, redo,
> reconstruct, rebuild, reorganize, rearrange,rework, renew, revamp,
> remake, retool, transmogrify, morph
>
> rebuild: reconstruct, renovate, restore, remodel, remake,reassemble.
>
> Do any of those words help us?
>
> I think "morph" is actually not bad.  Morpheme sounds cooler but makes
> less sense.  Morphica?  Morphic?  Morphologic? Morphomatic? ha! that
> one is funny.
>
> How about metamorph? I like that one! google search only reveals a
> molecular device and some stupid school has taken metamorph.org. I
> guess that is no big deal because we will be using the antlr.org
> website for that.
>
> Ter
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest
>

From parrt at cs.usfca.edu  Wed Jul 23 09:50:43 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 23 Jul 2008 09:50:43 -0700
Subject: [stringtemplate-interest] [antlr-interest] we need a name for a
	new rewriting tool
In-Reply-To: <561cc61d0807221916lec695dfk5b9b553c1f62422c@mail.gmail.com>
References: <ECE20B0C-3AFE-4603-BE73-87CE794DF3BA@cs.usfca.edu>
	<20080722205821.SAQB9538.viefep32-int.chello.at@schnuftikus.gmx.at>
	<561cc61d0807221903g5422bfc5i9bfcef01fbfa4ede@mail.gmail.com>
	<561cc61d0807221916lec695dfk5b9b553c1f62422c@mail.gmail.com>
Message-ID: <D47B34DE-422C-49D6-A70A-1CF550AEE2DD@cs.usfca.edu>

Ha! Hilarious, Ger!

True, it does not have to describe what it does I guess, but sometimes  
it works well.  Microsoft Word is a pretty good name you have to  
admit.   By analogy, we should call this tool "token". :)

I'm also concerned that metamorph has three syllables. I think it has  
to have one or two.  StringTemplate fails this test for example but  
ANTLR is good.

Ter

From parrt at cs.usfca.edu  Wed Jul 23 09:57:30 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 23 Jul 2008 09:57:30 -0700
Subject: [stringtemplate-interest] we need a name for a new rewriting
	tool
In-Reply-To: <b38f063f0807230212s76a49085j39a1ef98b68f6d52@mail.gmail.com>
References: <ECE20B0C-3AFE-4603-BE73-87CE794DF3BA@cs.usfca.edu>
	<b38f063f0807230212s76a49085j39a1ef98b68f6d52@mail.gmail.com>
Message-ID: <C60EBAF5-C2B8-4708-8BD5-CA62337D8E18@cs.usfca.edu>

  and
On Jul 23, 2008, at 2:12 AM, Swapnil Kashikar wrote:

> How about "Morpheze" -- eze shows meaning and rhyming with trapeze
> brings to mind a picture of doing mental acrobatics on a bar suspended
> on two ropes (say, antlr & stringtemplate :-)

Interesting...Actually,Something related to a stag or antlers would be  
cool.  What about horn, buck, rhino, or stag?  Heh, i really like  
those...

Perhaps stag says it all ;) although buck is nice because it is easy  
to mispronounce ;) horn is nice because the adjective is horny ;)   
Ah... so many names, so little time.

Ter

From parrt at cs.usfca.edu  Wed Jul 23 10:03:38 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 23 Jul 2008 10:03:38 -0700
Subject: [stringtemplate-interest] we need a name for a new rewriting
	tool
In-Reply-To: <b38f063f0807230212s76a49085j39a1ef98b68f6d52@mail.gmail.com>
References: <ECE20B0C-3AFE-4603-BE73-87CE794DF3BA@cs.usfca.edu>
	<b38f063f0807230212s76a49085j39a1ef98b68f6d52@mail.gmail.com>
Message-ID: <669C694A-6A64-4C4C-8102-5DC978ECCA06@cs.usfca.edu>

actually,What about antelope or pronghorn? a guess that one is too  
close to the failed Longhorn.  moose? gazelle!  i like that.

Gazelle...yes, that's good! it's the nickname i gave to an old friend  
of mine Jonell Gazelle.  Awesome. i see no name collision.

Ter

On Jul 23, 2008, at 2:12 AM, Swapnil Kashikar wrote:

> How about "Morpheze" -- eze shows meaning and rhyming with trapeze
> brings to mind a picture of doing mental acrobatics on a bar suspended
> on two ropes (say, antlr & stringtemplate :-)
>
> Swapnil
>
> On Tue, Jul 22, 2008 at 4:09 PM, Terence Parr <parrt at cs.usfca.edu>  
> wrote:
>> Hi, Leon Su, the maniac that brings you gUnit is currently working
>> with me on a rewrite system similar to other rewrite engines such as
>> ASF+SDF, Stratego, TXL etc...  I believe the tool is in line with the
>> strategy championed by Andy Tripp.
>>
>> You'll be able to say things like "whenever you see x+0 in an IF
>> expression, rewrite it to x":
>>
>> ---------------------
>> rewrite Java; // applies rewrite rules to external java grammar
>> tokens {
>>       x=ID;
>> }
>>
>> [ifstat ... expr]:
>>       "x+0" -> "x"
>>       "0+x" -> "x"
>>       ...
>> ---------------------
>>
>> It is going to be extremely cool and will also work for tree  
>> rewrites.
>>
>> The only problem we have is that we don't know what to call it. I
>> originally had a nice tree rewriting system called Sorcerer (14 years
>> ago) but now there are things like sourcerer and so on. can anybody
>> help us name this tool?
>>
>> THesaurus entries:
>>
>> rewrite: revise, recast,reword, rephrase, redraft.
>>
>> transform: change, alter,convert, metamorphose, transfigure,
>> transmute, mutate; revolutionize,overhaul; remodel, reshape, redo,
>> reconstruct, rebuild, reorganize, rearrange,rework, renew, revamp,
>> remake, retool, transmogrify, morph
>>
>> rebuild: reconstruct, renovate, restore, remodel, remake,reassemble.
>>
>> Do any of those words help us?
>>
>> I think "morph" is actually not bad.  Morpheme sounds cooler but  
>> makes
>> less sense.  Morphica?  Morphic?  Morphologic? Morphomatic? ha! that
>> one is funny.
>>
>> How about metamorph? I like that one! google search only reveals a
>> molecular device and some stupid school has taken metamorph.org. I
>> guess that is no big deal because we will be using the antlr.org
>> website for that.
>>
>> Ter
>> _______________________________________________
>> stringtemplate-interest mailing list
>> stringtemplate-interest at antlr.org
>> http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest
>>
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest


From parrt at cs.usfca.edu  Wed Jul 23 16:10:43 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 23 Jul 2008 16:10:43 -0700
Subject: [stringtemplate-interest] [antlr-interest] we need a name for a
	new rewriting tool
In-Reply-To: <20080723220610.1A1CB352293@www.antlr.org>
References: <ECE20B0C-3AFE-4603-BE73-87CE794DF3BA@cs.usfca.edu>
	<598e9210807231425y4d781af3u80d4d70fee507e74@mail.gmail.com>
	<20080723220610.1A1CB352293@www.antlr.org>
Message-ID: <1AECD02C-E2AD-4801-B50D-A40B3CE51910@cs.usfca.edu>

Yep, I'm thinking ANTLR Morph, or morph for short in we know what  
we're talking about otherwise fully ANTLR Morph :)  Gotta use the  
brand awareness.  Leon like Morph also.

Ter
On Jul 23, 2008, at 3:06 PM, Gavin Lambert wrote:

> At 09:25 24/07/2008, Simos Xenitellis wrote:
> >An option is "anamorph".
> [...]
> >anamorph: (v) 1. give a new, enhanced form. For example, when you
> >make the educational system better. 2. when you make better the
> >behaviour of someone, such as a young person.
>
> "Antlrmorph" or even "Antlamorph" sounds good to me.
>
> Or maybe, to get the "rewrite" term in there, something like  
> "ANTLRewrite" or "ANTLRwrite"?
>


From m0 at campusinteractive.com  Thu Jul 24 07:49:28 2008
From: m0 at campusinteractive.com (Mohamed Mansour)
Date: Thu, 24 Jul 2008 10:49:28 -0400
Subject: [stringtemplate-interest] Size of a collection
Message-ID: <265be4080807240749m45986f72wfc7aeddf889812a8@mail.gmail.com>

Hello,

I am passing in a Vector<MyObject> to the template, and I would like to find
the size of that Vector.

Vector<MyObject> result = getMyItems();
tpl.assign("items", result);

My Template File has the following:

Records
--------
$items:{u|"$u.name;format="uppercase"$"
}$


Which will print out something like:

Records
--------
"TUCCINO JERRY"
"BILL SMITH"
"TOM JERRY"

I would like it find the size of the collection being passed in therefore 3
will show.

3 Records
--------
 "TUCCINO JERRY"
"BILL SMITH"
"TOM JERRY"

So is that possible in StringTemplate? Or I should create another template
stating the size of the collection? like
tpl.assign("itemsSize", result.size());


Thanks!

Another size question: Does StringTemplate allow multiple formatters? In the
above case, I just did $u.name;format="uppercase"$, what if we need more
than one formatter.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org:8080/pipermail/stringtemplate-interest/attachments/20080724/01f96405/attachment.html 

From markwright at internode.on.net  Thu Jul 24 08:21:50 2008
From: markwright at internode.on.net (Mark Wright)
Date: Fri, 25 Jul 2008 01:21:50 +1000
Subject: [stringtemplate-interest] Size of a collection
In-Reply-To: <265be4080807240749m45986f72wfc7aeddf889812a8@mail.gmail.com>
References: <265be4080807240749m45986f72wfc7aeddf889812a8@mail.gmail.com>
Message-ID: <20080725012150.00006886@goanna>

(1) Search for length in the cheat sheet:

http://www.antlr.org/wiki/display/ST/StringTemplate+cheat+sheet

(2) Read:

http://www.antlr.org/wiki/display/ST/Object+rendering

Regards, Mark

-- 

From shk at visanti.com  Wed Jul 30 01:39:02 2008
From: shk at visanti.com (Sune Kristensen)
Date: Wed, 30 Jul 2008 10:39:02 +0200
Subject: [stringtemplate-interest] C# ST and Visual Studio 2008 / .NET 3.5
Message-ID: <B14568B022F91243B48222AB3A2A49142600395828@saturn.trefcap.com>

Hi

I have been trying to use StringTemplate in an asp.net project using .NET 3.5 and Visual Studio 2008.
I can add the dll's fine (Add Reference dialog), but I get the following error during build: "The type or namespace name 'Antlr' could not be found (are you missing a using directive or and assembly reference?)"

The error comes from this line of code: "using Antlr.StringTemplate;"

Is there anything special that should be done before using it, or is it just not working with .NET 3.5 / VS 2008?

I have tried the following version:

StringTemplate.Net.v3.0.1.net-2.0
StringTemplate.Net.v3.1b1.net-2.0
StringTemplate.Net.v3.1b1.net-1.1
And the version that is in antlr-3.1b2.tar.gz

/Sune
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org:8080/pipermail/stringtemplate-interest/attachments/20080730/d89533a1/attachment.html 

From jaluber at gmx.de  Wed Jul 30 05:31:23 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Wed, 30 Jul 2008 14:31:23 +0200
Subject: [stringtemplate-interest] C# ST and Visual Studio 2008 / .NET
 3.5
In-Reply-To: <B14568B022F91243B48222AB3A2A49142600395828@saturn.trefcap.com>
References: <B14568B022F91243B48222AB3A2A49142600395828@saturn.trefcap.com>
Message-ID: <48905F1B.60906@gmx.de>

Sune Kristensen schrieb:
> Hi
> 
>  
> 
> I have been trying to use StringTemplate in an asp.net project using 
> .NET 3.5 and Visual Studio 2008.
> 
> I can add the dll?s fine (Add Reference dialog), but I get the following 
> error during build: ?The type or namespace name ?Antlr? could not be 
> found (are you missing a using directive or and assembly reference?)?
> 
>  
> 
> The error comes from this line of code: ?using Antlr.StringTemplate;?
> 
>  
> 
> Is there anything special that should be done before using it, or is it 
> just not working with .NET 3.5 / VS 2008?
> 
>  
> 
> I have tried the following version:
> 
>  
> 
> StringTemplate.Net.v3.0.1.net-2.0
> 
> StringTemplate.Net.v3.1b1.net-2.0
> 
> StringTemplate.Net.v3.1b1.net-1.1
> 
> And the version that is in antlr-3.1b2.tar.gz
> 
>  
> 
> /Sune

I believe you may not have all libraries referenced. StringTemplate is 
so far dependent on ANTLR 2.7.7 and there is the antlr.runtime.dll 
assembly for this runtime.

Johannes

From shk at visanti.com  Wed Jul 30 05:40:07 2008
From: shk at visanti.com (Sune Kristensen)
Date: Wed, 30 Jul 2008 14:40:07 +0200
Subject: [stringtemplate-interest] C# ST and Visual Studio 2008 / .NET
 3.5
In-Reply-To: <48905F1B.60906@gmx.de>
References: <B14568B022F91243B48222AB3A2A49142600395828@saturn.trefcap.com>
	<48905F1B.60906@gmx.de>
Message-ID: <B14568B022F91243B48222AB3A2A4914260039583D@saturn.trefcap.com>


I have added both antlr.runtime.dll and StringTemplate.dll, so don't think that is the problem, unless I should do something more than what gets done by the "Add Reference" dialog.

/Sune

-----Original Message-----
From: Johannes Luber [mailto:jaluber at gmx.de]
Sent: 30. juli 2008 14:31
To: Sune Kristensen
Cc: stringtemplate-interest at antlr.org
Subject: Re: [stringtemplate-interest] C# ST and Visual Studio 2008 / .NET 3.5

Sune Kristensen schrieb:
> Hi
>
>
>
> I have been trying to use StringTemplate in an asp.net project using
> .NET 3.5 and Visual Studio 2008.
>
> I can add the dll's fine (Add Reference dialog), but I get the following
> error during build: "The type or namespace name 'Antlr' could not be
> found (are you missing a using directive or and assembly reference?)"
>
>
>
> The error comes from this line of code: "using Antlr.StringTemplate;"
>
>
>
> Is there anything special that should be done before using it, or is it
> just not working with .NET 3.5 / VS 2008?
>
>
>
> I have tried the following version:
>
>
>
> StringTemplate.Net.v3.0.1.net-2.0
>
> StringTemplate.Net.v3.1b1.net-2.0
>
> StringTemplate.Net.v3.1b1.net-1.1
>
> And the version that is in antlr-3.1b2.tar.gz
>
>
>
> /Sune

I believe you may not have all libraries referenced. StringTemplate is
so far dependent on ANTLR 2.7.7 and there is the antlr.runtime.dll
assembly for this runtime.

Johannes


From mike.evans at rapid-mobile.com  Thu Jul 31 02:05:15 2008
From: mike.evans at rapid-mobile.com (Mike Evans)
Date: Thu, 31 Jul 2008 10:05:15 +0100
Subject: [stringtemplate-interest] Conditional attribute placement
Message-ID: <4891804B.1080107@rapid-mobile.com>

Hi

I'm trying to conditionally place items of a collection of attributes on 
a page, using stringtemplate expression syntax.  I need to iterate 
through (for example) a list of 7 attributes, and place 4 on one line, 
then place a line break and place three on the next line.  Is there a 
way I can do this using expression syntax, or some other method?  I see 
there is are ways to differentiate between first and last items in a 
list, but how can I tell if it's the third or fourth item, and insert a 
line-break conditional on being the 4th item?

I don't want to have to create two attribute lists and output them 
individually with a line break in between, which would be a way to do 
it, but appears to break the strict model-view separation; the attribute 
lists are generated in the model, and the arrangement on the page 
defined by the view.

many thanks
Mike
-- 
Mike Evans
Rapid Mobile Ltd.
93 George St. Edinburgh EH2 3ES
Tel: +44 131 243 2502


From roma at qwertty.com  Thu Jul 31 03:40:10 2008
From: roma at qwertty.com (Roman Odaisky)
Date: Thu, 31 Jul 2008 13:40:10 +0300
Subject: [stringtemplate-interest] ANTLR 2 for Python?
Message-ID: <200807311340.13796.roma@qwertty.com>

Greetings,

I?m trying to get the latest Python version (3.1) of StringTemplate to work. 
Class StringTemplate works, class StringTemplateGroup wants module antlr and 
fails. The antlr.org site seems only to have version 3 for Python, not 
version 2 which is seemingly needed.

How do I install ANTLR 2 for Python, or what else do I need to do to use 
StringTemplate?

Google doesn?t seem to have an answer.

-- 
TIA
Roman.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2286 bytes
Desc: not available
Url : http://www.antlr.org:8080/pipermail/stringtemplate-interest/attachments/20080731/e56136cc/attachment.bin 

From cpizzi at nis-retail.com  Thu Jul 31 05:52:39 2008
From: cpizzi at nis-retail.com (Chris Pizzi)
Date: Thu, 31 Jul 2008 08:52:39 -0400
Subject: [stringtemplate-interest] ANTLR 2 for Python?
In-Reply-To: <200807311340.13796.roma@qwertty.com>
References: <200807311340.13796.roma@qwertty.com>
Message-ID: <4891B597.9020109@nis-retail.com>

Roman Odaisky wrote:
> Greetings,
> 
> I?m trying to get the latest Python version (3.1) of StringTemplate to work. 
> Class StringTemplate works, class StringTemplateGroup wants module antlr and 
> fails. The antlr.org site seems only to have version 3 for Python, not 
> version 2 which is seemingly needed.
> 
> How do I install ANTLR 2 for Python, or what else do I need to do to use 
> StringTemplate?

I use Python stringtemplate.  This worked for me in Ubuntu and RedHat:

1. download and extract the source for antlr2
2. change to the lib/python subdirectory
3. run "python setup.py install".





-- 
Chris Pizzi
Sr. Programmer
National In-Store


2 N Tamiami Trail, 9th Fl
Sarasota, FL 34236
Phone 941-554-2685
Mobile 941-586-6004

www.nis-retail.com


Notice: This communication may contain privileged or other confidential
information. If you have received it in error, please advise the sender
by reply email and immediately delete the message and any attachments
without copying or disclosing the contents. Thank you.




From roma at qwertty.com  Thu Jul 31 05:53:35 2008
From: roma at qwertty.com (Roman Odaisky)
Date: Thu, 31 Jul 2008 15:53:35 +0300
Subject: [stringtemplate-interest] (solved) ANTLR 2 for Python?
In-Reply-To: <200807311340.13796.roma@qwertty.com>
References: <200807311340.13796.roma@qwertty.com>
Message-ID: <200807311553.42382.roma@qwertty.com>

On Thursday, 31.07.2008 13:40:10 Roman Odaisky wrote:

> How do I install ANTLR 2 for Python, or what else do I need to do to use
> StringTemplate?

OK, while there?s no python-antlr package, the antlr Debian package does 
contain the Python module. I apt-got it and everything works now.

Anyway I wonder why there are no Python downloads at antlr2.org.

Roman.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2286 bytes
Desc: not available
Url : http://www.antlr.org:8080/pipermail/stringtemplate-interest/attachments/20080731/5c2af6cc/attachment.bin 

From roma at qwertty.com  Thu Jul 31 06:49:43 2008
From: roma at qwertty.com (Roman Odaisky)
Date: Thu, 31 Jul 2008 16:49:43 +0300
Subject: [stringtemplate-interest] ST, Django and get_something_display()
Message-ID: <200807311649.47298.roma@qwertty.com>

Greetings,

In Django, if I define a field ?foo? and set its ?choices? attribute, the 
framework automatically adds a get_foo_display() method to the model class. 
How do I refer to it in ST? $obj.foo_display$ looks for obj.getFoo_display() 
and fails, $obj.get_foo_display$ finds the method but stringizes the method 
instead of calling it (I get something like ?<bound method obj._curried of 
<obj: some object>>?).

What?s the proper way of doing it apart from hacking StringTemplate code?

-- 
TIA
Roman.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2286 bytes
Desc: not available
Url : http://www.antlr.org:8080/pipermail/stringtemplate-interest/attachments/20080731/573ee9e5/attachment.bin 

From roma at qwertty.com  Thu Jul 31 14:08:52 2008
From: roma at qwertty.com (Roman Odaisky)
Date: Fri, 1 Aug 2008 00:08:52 +0300
Subject: [stringtemplate-interest] [attr:tpl];separator
Message-ID: <200808010008.56046.roma@qwertty.com>

Greetings,

Having gotten StringTemplate to work with Django, I wanted to make a list of 
certain data.

If I write something like

$[obj.color, obj.size, obj.volume]; separator=" | "$

I get

Yellow | Large | 42

as intended. But then I wanted to modify the presentation of one of the 
attributes, namely, to append the unit to the number. I tried using 
obj.volume:{$it$ m?} and that didn?t work, neither did anything else I 
attempted.

What is the right way to include the result of template application to a list?

Or, say, I want to achieve the same thing this template does:

A=$a$, B=$b$, C=$c$, D=$d$

except if any of a, b, c or d attributes are null, their entries must not be 
shown, like this:

A=1, B=2, D=4

Is there a way to construct a list from constant strings in the template? If 
there were such a list, I would have written

$["A", "B", "C", "D"],[a, b, c, d]:{ k, v | $k$=$v$}; separator=", "$

Indeed I?ve just checked after having written this, and this exact notation 
worked, much to my surprise as it doesn?t seem to be documented anywhere. 
Though it doesn?t solve the problem completely: if an attribute from the 
second list is null, the corresponding item from the first one isn?t removed.

So, my problem is:
1. To take a list of attributes, some of which can be null;
2. To apply certain templates to some of the non-null ones;
3. To join the result using a separator.

A partial solution found while typing this message is:

$[{A=$a$}, {B=$b$}, {C=$c$}, {D=$d$}]; separator=", "$

Though these subtemplates always produce nonnull results which cause extra 
separators to appear if some attributes are empty.

Is there a way to solve the problem with StringTemplate?

Also, is the documentation lacking with regard to the above or am I too 
inattentive?

-- 
TIA
Roman.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2286 bytes
Desc: not available
Url : http://www.antlr.org:8080/pipermail/stringtemplate-interest/attachments/20080801/7d350b92/attachment.bin 

From parrt at cs.usfca.edu  Thu Jul 31 15:23:26 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 31 Jul 2008 15:23:26 -0700
Subject: [stringtemplate-interest] Conditional attribute placement
In-Reply-To: <4891804B.1080107@rapid-mobile.com>
References: <4891804B.1080107@rapid-mobile.com>
Message-ID: <3FFB183B-ADEC-4947-9CD4-D296CA7DD0BB@cs.usfca.edu>


On Jul 31, 2008, at 2:05 AM, Mike Evans wrote:

> Hi
>
> I'm trying to conditionally place items of a collection of  
> attributes on
> a page, using stringtemplate expression syntax.  I need to iterate
> through (for example) a list of 7 attributes, and place 4 on one line,
> then place a line break and place three on the next line.  Is there a
> way I can do this using expression syntax, or some other method?  I  
> see
> there is are ways to differentiate between first and last items in a
> list, but how can I tell if it's the third or fourth item, and  
> insert a
> line-break conditional on being the 4th item?

Hi Mike, only hope is the wrap option on expressions and then call  
toString(72) or whatever your width is.

Ter

From parrt at cs.usfca.edu  Thu Jul 31 15:27:39 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 31 Jul 2008 15:27:39 -0700
Subject: [stringtemplate-interest] ST, Django and get_something_display()
In-Reply-To: <200807311649.47298.roma@qwertty.com>
References: <200807311649.47298.roma@qwertty.com>
Message-ID: <D999E176-B036-4DDB-BDCA-36F5A4A3277B@cs.usfca.edu>


On Jul 31, 2008, at 6:49 AM, Roman Odaisky wrote:

> Greetings,
>
> In Django, if I define a field ?foo? and set its ?choices?  
> attribute, the
> framework automatically adds a get_foo_display() method to the model  
> class.
> How do I refer to it in ST? $obj.foo_display$ looks for  
> obj.getFoo_display()
> and fails, $obj.get_foo_display$ finds the method but stringizes the  
> method
> instead of calling it (I get something like ?<bound method  
> obj._curried of
> <obj: some object>>?).

Hi Roman, i assumed people would follow the javabeans notation of  
getFooDisplay.  Too bad django doesn't. hmm...well, I'd say create a  
wrapper object that converts syntax...register a renderer like  
djangoToBeans object that answers getFooDisplay and delegates to  
django object.  Might be Able to use reflection or something to make  
this more automatic...

Ter


From parrt at cs.usfca.edu  Thu Jul 31 15:35:58 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 31 Jul 2008 15:35:58 -0700
Subject: [stringtemplate-interest] [attr:tpl];separator
In-Reply-To: <200808010008.56046.roma@qwertty.com>
References: <200808010008.56046.roma@qwertty.com>
Message-ID: <DF334F7A-38DD-4E15-9707-1B2157E69DAD@cs.usfca.edu>


On Jul 31, 2008, at 2:08 PM, Roman Odaisky wrote:

> Greetings,
>
> Having gotten StringTemplate to work with Django, I wanted to make a  
> list of
> certain data.
>
> If I write something like
>
> $[obj.color, obj.size, obj.volume]; separator=" | "$
>
> I get
>
> Yellow | Large | 42
>
> as intended. But then I wanted to modify the presentation of one of  
> the
> attributes, namely, to append the unit to the number. I tried using
> obj.volume:{$it$ m?} and that didn?t work, neither did anything else I
> attempted.

ST might not allow arbitrary expressions within the list constructor  
[...], although that doesn't sound like something I would miss. Did  
you try obj.volume:{x | $x$ units} ?

> What is the right way to include the result of template application  
> to a list?
>
> Or, say, I want to achieve the same thing this template does:
>
> A=$a$, B=$b$, C=$c$, D=$d$
>
> except if any of a, b, c or d attributes are null, their entries  
> must not be
> shown, like this:
>
> A=1, B=2, D=4

You'd have to put $if(a)$A=$a$$endif$ and so on.

> Is there a way to construct a list from constant strings in the  
> template? If
> there were such a list, I would have written
>
> $["A", "B", "C", "D"],[a, b, c, d]:{ k, v | $k$=$v$}; separator=", "$
>
> Indeed I?ve just checked after having written this, and this exact  
> notation
> worked, much to my surprise as it doesn?t seem to be documented  
> anywhere.
> Though it doesn?t solve the problem completely: if an attribute from  
> the
> second list is null, the corresponding item from the first one isn?t  
> removed.

Right.  ST assumes that the parallel lists have the same size.

You could make or pass in a map that mapped iteration to units:

units ::= [
	"1" : "A",
	"2" : "B"
	...
]

and then do units.(i) inside an iteration where i is an implicitly  
maintained loop iteration variable. Naturally, the solution is icky.

Try:

$["A", "B", "C", "D"],[a, b, c, d]:{ k, v | $if(v)$$k$=$v$$endif$};  
separator=", "$

Ter

