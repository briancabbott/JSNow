From brian at protexis.com  Tue Aug  1 11:34:45 2006
From: brian at protexis.com (brian@protexis.com)
Date: Tue Aug  1 11:34:49 2006
Subject: [stringtemplate-interest] Html encoding
Message-ID: <51242.10.238.10.71.1154457285.webmail@10.238.10.71>

Hi

When using string template to render html, some of the attributes need to
be html encoded and some do not. At present, I create wrapper classes to
perform the encoding. Does anyone have a simpler or cleaner solution.

Thanks

For example ...

Here's the wrapper class ...

internal class StructureWrapper
{
  Structure m_structure;

  internal StructureWrapper(Structure structure)
  {
    this.m_structure = structure;
  }

  internal string NeedsEncoding
  {
    get { return SomeHtmlEncodingFunction(m_structure.ValueOne); }
  }

  internal string DoesNotNeedEncoding
  {
    get { return m_structure.ValueTwo; }
  }
}

Here's the set attribute ...

stringTemplate.SetAttribute("structure", structureWrapper);

Here's the st file ...



$structure.NeedsEncoding$







From parrt at cs.usfca.edu  Tue Aug  1 11:44:47 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Aug  1 11:44:52 2006
Subject: [stringtemplate-interest] Html encoding
In-Reply-To: <51242.10.238.10.71.1154457285.webmail@10.238.10.71>
References: <51242.10.238.10.71.1154457285.webmail@10.238.10.71>
Message-ID: <1C2C1B0F-6F8A-42FC-A8AB-1FF4440D2ABC@cs.usfca.edu>

You can try adding default properties to any string by overriding  
setAttribute.  Wrap in a class that knows how to encode with a  
property name.
Ter
On Aug 1, 2006, at 11:34 AM, brian@protexis.com wrote:

> Hi
>
> When using string template to render html, some of the attributes  
> need to
> be html encoded and some do not. At present, I create wrapper  
> classes to
> perform the encoding. Does anyone have a simpler or cleaner solution.
>
> Thanks
>
> For example ...
>
> Here's the wrapper class ...
>
> internal class StructureWrapper
> {
>   Structure m_structure;
>
>   internal StructureWrapper(Structure structure)
>   {
>     this.m_structure = structure;
>   }
>
>   internal string NeedsEncoding
>   {
>     get { return SomeHtmlEncodingFunction(m_structure.ValueOne); }
>   }
>
>   internal string DoesNotNeedEncoding
>   {
>     get { return m_structure.ValueTwo; }
>   }
> }
>
> Here's the set attribute ...
>
> stringTemplate.SetAttribute("structure", structureWrapper);
>
> Here's the st file ...
>
>
>
> $structure.NeedsEncoding$
>
>
>
>
>
>
>
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest@antlr.org
> http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest

From parrt at cs.usfca.edu  Tue Aug  1 11:45:31 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Aug  1 11:45:36 2006
Subject: [stringtemplate-interest] conditional separator
In-Reply-To: <20060731191551.116.qmail@web56903.mail.re3.yahoo.com>
References: <20060731191551.116.qmail@web56903.mail.re3.yahoo.com>
Message-ID: <935C862F-8868-4114-81CC-AD9B815ADC69@cs.usfca.edu>


On Jul 31, 2006, at 12:15 PM, John RW wrote:

> Hi
>
> I have a multivalue attribute, and want to concatenate the values  
> with a comma separator, only if the value itself has an attribute  
> "foo" equals true. Is it possible to do this in stringtemplate?

Hi :)

Nope.  That is processing/filtering and should be done by your  
model.  Pass what you want displayed only to the template. :)

Ter
From endigitalmind at yahoo.co.uk  Thu Aug  3 00:08:24 2006
From: endigitalmind at yahoo.co.uk (Phil Ritchie)
Date: Thu Aug  3 00:08:29 2006
Subject: [stringtemplate-interest] Trying to get template output.
Message-ID: <20060803070824.54343.qmail@web25813.mail.ukl.yahoo.com>

Would a kind soul out there help me get stringtemplate output with my grammar below. I'm using antlrworks-1.0ea11. The simple record oriented grammar works and successfully parses test files. I've read "Language Translation Using ANTLR and StringTemplate" but despite several attempts, I'm getting nowhere - not a single bit of output. If someone would annotate my grammar and show me a sample *.stg file that would give me a working example it would help enormously with my understanding. Just one line of output would be great. I'm honestly not try to get someone to do my work for me - just looking for an example that's linked to my grammar. I've read the cminus example in the v3 examples folder as well but alas I must be dim.
 
//
// This is a serious attempt to get to grips with ANTLR
//
grammar learningGrammar;
options
{
 output = template;
}
@header
{
 import org.antlr.stringtemplate.*;
}
file
scope
{
 List globals;
}
@init
{
 $file::globals = new ArrayList();
}
 : record
 ;
 
record : (title
  ident
  keywords
  question
  html
  response)+
 ;
title : 'Title: ' content
 ;
 
ident : 'ID: ' ID
 ;
 
keywords: 'Keywords: ' content
 ;
 
question: 'Question: ' content
 ;
 
html : 'HTML: ' BOOLEAN
 ;
 
response: 'Response: ' content
 ;
content : LETTER
 ;
 
BOOLEAN : 'yes' | 'no'
 ;
 
ID : ('0'..'9')+
 ;

LETTER : ('a'..'z' | 'A'..'Z' | '/' | ' ' | '<' | '>')+
 ;
WS : ('\t' | '\r' | '\n')+  { channel = 99; }
 ;
From parrt at cs.usfca.edu  Thu Aug  3 09:59:13 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Aug  3 09:59:17 2006
Subject: [stringtemplate-interest] Trying to get template output.
In-Reply-To: <20060803070824.54343.qmail@web25813.mail.ukl.yahoo.com>
References: <20060803070824.54343.qmail@web25813.mail.ukl.yahoo.com>
Message-ID: <2BD16569-1591-479F-B2CA-B44039C54962@cs.usfca.edu>

I suggest looking at the mantra example.  It makes heavy use of ANTLR/ 
ST using version 3.

http://www.linguamantra.org/

Ter
From parrt at cs.usfca.edu  Mon Aug  7 14:57:35 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Aug  7 14:57:40 2006
Subject: [stringtemplate-interest] Re: [antlr-interest] Antlr 3beta2 and
	StringTemplate
In-Reply-To: <dcb971710608070113vc849645x27bc50b90c82d9f3@mail.gmail.com>
References: <dcb971710608070113vc849645x27bc50b90c82d9f3@mail.gmail.com>
Message-ID: <4B0A170C-F959-4996-8579-E8200F6C100D@cs.usfca.edu>


On Aug 7, 2006, at 1:13 AM, dotnet fr wrote:

> Hi Everyone,
>
> I'm looking in c++ to generate output. I've found StringTemplate but
> usable only in Java and .NET
> Is StringTemplate available in the ANTLR 3beta2 in c++ ?

   You'll note some discussion about C++ and string template I think  
in the string template group. basically C++ lacks reflection and so  
I'm not sure that it is possible.

Ter

From open.zone at virgin.net  Tue Aug  8 00:38:39 2006
From: open.zone at virgin.net (Micheal J)
Date: Tue Aug  8 00:42:07 2006
Subject: [stringtemplate-interest] RE: [antlr-interest] Antlr 3beta2 and
	StringTemplate
In-Reply-To: <4B0A170C-F959-4996-8579-E8200F6C100D@cs.usfca.edu>
Message-ID: <003a01c6babd$ad9d24a0$c704a8c0@hercules>

> > Hi Everyone,
> >
> > I'm looking in c++ to generate output. I've found 
> StringTemplate but 
> > usable only in Java and .NET Is StringTemplate available in 
> the ANTLR 
> > 3beta2 in c++ ?
> 
>    You'll note some discussion about C++ and string template I think  
> in the string template group. basically C++ lacks reflection and so  
> I'm not sure that it is possible.

It's definitely possible.

Functional and robust C++ reflection frameworks abound. Stumbling blocks
(apart from actually writing ST++) include support for C and Obj-C,
cross-compiler support, cross-OS support (i.e. just the usual
C++-development-in-the-large issues).


Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited.

From kroepke at classdump.org  Tue Aug  8 01:00:58 2006
From: kroepke at classdump.org (Kay Roepke)
Date: Tue Aug  8 01:01:52 2006
Subject: [stringtemplate-interest] RE: [antlr-interest] Antlr 3beta2 and
	StringTemplate
In-Reply-To: <003a01c6babd$ad9d24a0$c704a8c0@hercules>
References: <003a01c6babd$ad9d24a0$c704a8c0@hercules>
Message-ID: <40DD25B5-ACA8-4609-8EE5-0222B604D2D8@classdump.org>


On 8. Aug 2006, at 9:38 Uhr, Micheal J wrote:

> Stumbling blocks
> (apart from actually writing ST++) include support for C and Obj-C,
> cross-compiler support, cross-OS support (i.e. just the usual
> C++-development-in-the-large issues).

At least Obj-C shouldn't be a problem. Obj-C doesn't suffer from the  
same problems, but that is mainly because you
don't have to be overconcerned about portability across OS, compilers  
etc. Also there's no reflection problem.
Plain C, on the other hand, could be a very different issue,  
depending on how far you wanted to go in terms of
portability.

-k
-- 
Kay R?pke <kroepke@classdump.org>
classdump Software


From open.zone at virgin.net  Tue Aug  8 01:09:54 2006
From: open.zone at virgin.net (Micheal J)
Date: Tue Aug  8 01:12:49 2006
Subject: [stringtemplate-interest] RE: [antlr-interest] Antlr 3beta2 and
	StringTemplate
In-Reply-To: <40DD25B5-ACA8-4609-8EE5-0222B604D2D8@classdump.org>
Message-ID: <004c01c6bac2$09c0f460$c704a8c0@hercules>

Kay,

> From: Kay Roepke 
> Sent: 08 August 2006 09:01

> > Stumbling blocks
> > (apart from actually writing ST++) include support for C and Obj-C, 
> > cross-compiler support, cross-OS support (i.e. just the usual
> > C++-development-in-the-large issues).
> 
> At least Obj-C shouldn't be a problem. Obj-C doesn't suffer from the  
> same problems, but that is mainly because you
> don't have to be overconcerned about portability across OS, 
> compilers  
> etc. Also there's no reflection problem.
> Plain C, on the other hand, could be a very different issue,  
> depending on how far you wanted to go in terms of
> portability.

I was suggesting that there might be problems with supporting Objective-C
fully in a C++ version of ST. An Objective-C version of ST would have no
such problems and would be an easier project perhaps. Not sure how well such
a version would support C++ reflection though...

Anyways, given my basic[ly useless] knowledge of Objective-C, I imagined
full support for reflection over Objective-C types would be an issue for a
pure C++ project. I don't imagine that the C++ reflection frameworks support
Objective-C at all in fact.

As for plain C support, it is possible but it won't be pretty (or easy!).


Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited.

From kroepke at classdump.org  Tue Aug  8 01:27:04 2006
From: kroepke at classdump.org (Kay Roepke)
Date: Tue Aug  8 01:27:14 2006
Subject: [stringtemplate-interest] RE: [antlr-interest] Antlr 3beta2 and
	StringTemplate
In-Reply-To: <004c01c6bac2$09c0f460$c704a8c0@hercules>
References: <004c01c6bac2$09c0f460$c704a8c0@hercules>
Message-ID: <5D05E359-56FD-41CE-9882-3737B536D779@classdump.org>


On 8. Aug 2006, at 10:09 Uhr, Micheal J wrote:

> Anyways, given my basic[ly useless] knowledge of Objective-C, I  
> imagined
> full support for reflection over Objective-C types would be an  
> issue for a
> pure C++ project. I don't imagine that the C++ reflection  
> frameworks support
> Objective-C at all in fact.

Could you give me a link to a good C++ reflection framework? I'm not  
a heavy user of C++, so I don't have
an overview of that field.
The Objective-C/C++ integration works ok for the most part, and it  
actually is pretty easy to separate it out into
a C++-only part and then integrate it back via some wrapper classes.  
It ain't pretty, and I would avoid it if
possible, since compilation is pretty slow and you get all the nasty C 
++-ishness into your pretty code ;)

FWIW, I plan on doing an Obj-C version, so I don't know if the  
necessity of a C++/Obj-C hybrid version arises.

> As for plain C support, it is possible but it won't be pretty (or  
> easy!).

Well, you'd probably write a good-sized subset of the ObjC runtime  
(which is written in C) or another
class-simulation in C. shudder.

-k

-- 
Kay R?pke <kroepke@classdump.org>
classdump Software


From jsamort at gmail.com  Tue Aug  8 06:36:29 2006
From: jsamort at gmail.com (Scott Amort)
Date: Tue Aug  8 06:36:43 2006
Subject: [stringtemplate-interest] RE: [antlr-interest] Antlr 3beta2 and
	StringTemplate
In-Reply-To: <5D05E359-56FD-41CE-9882-3737B536D779@classdump.org>
References: <004c01c6bac2$09c0f460$c704a8c0@hercules>
	<5D05E359-56FD-41CE-9882-3737B536D779@classdump.org>
Message-ID: <44D8935D.90608@gmail.com>

Hi Kay,

Kay Roepke wrote:
> Could you give me a link to a good C++ reflection framework? I'm not a 
> heavy user of C++, so I don't have
> an overview of that field.

One of the one's that comes up often (and was trying to get into Boost, 
IIRC) is Reflex:

http://seal-reflex.web.cern.ch/seal-reflex/

But I think there were some problems with it.  Unfortunately, 
portability is also a big issue as most of these frameworks depend on 
gccxml (which seems to be very out-of-date and no longer actively 
developed with a last release in early 2004), and hence gcc.

> FWIW, I plan on doing an Obj-C version, so I don't know if the necessity 
> of a C++/Obj-C hybrid version arises.

I'm quite keen on a C++ version, and have been hacking away at it for 
the past week or so.  I haven't reached any of the really hairy bits 
yet, but I think it is definitely possible.  However, like Michael 
suggested, the major headaches will come with cross-platform and 
cross-compiler support.

Regarding a C++/Obj-C hybrid, although I'm all for saving doing the same 
work twice, I would suggest that in the long run it is likely easiest 
(and more maintainable) to focus on a single language choice (i.e., make 
a C++ port *and* make an Obj-C port).

Best,
Scott

From kroepke at classdump.org  Tue Aug  8 06:51:10 2006
From: kroepke at classdump.org (Kay Roepke)
Date: Tue Aug  8 06:51:21 2006
Subject: [stringtemplate-interest] RE: [antlr-interest] Antlr 3beta2 and
	StringTemplate
In-Reply-To: <44D8935D.90608@gmail.com>
References: <004c01c6bac2$09c0f460$c704a8c0@hercules>
	<5D05E359-56FD-41CE-9882-3737B536D779@classdump.org>
	<44D8935D.90608@gmail.com>
Message-ID: <279EAE05-583A-4FFF-B20D-7FD7651CAF3C@classdump.org>

Moin Scott!

On 8. Aug 2006, at 15:36 Uhr, Scott Amort wrote:

> I'm quite keen on a C++ version, and have been hacking away at it  
> for the past week or so.  I haven't reached any of the really hairy  
> bits yet, but I think it is definitely possible.  However, like  
> Michael suggested, the major headaches will come with cross- 
> platform and cross-compiler support.

Yes, those are always the biggies. The code problem will probably  
come when you reach the parts of setting the actual attributes and  
try to figure
out how to support multi-valued attributes. The Java version tries to  
convert anything to an iterable structure so that later parts do not
need to know anything about the actual datastructures passed in. I  
don't think it is impossible, but could be tricky. Maybe this is just a
limitation C++ users would have to live with, but probably they will  
not be surprised to have to pass in STL containers only (or whatever
you choose to support) since they are used to the strict typing in  
their language.

> Regarding a C++/Obj-C hybrid, although I'm all for saving doing the  
> same work twice, I would suggest that in the long run it is likely  
> easiest (and more maintainable) to focus on a single language  
> choice (i.e., make a C++ port *and* make an Obj-C port).

Yes, again ;) I will definitely have the Obj-C port standalone,  
because I do not gain anything by using C++ under the hood. Quite the  
contrary.
I avoid Obj-C++ whenever possible since it tends to clutter the code  
and sometimes has some sharp edges which can be surprising. Though  
I'm told
it has gotten much better these days.
Of course there will be a couple of plain C places in the code, maybe  
we can discuss possible common code and try to share it, maybe not.
I don't mind doing the port by myself, but sharing is always  
nice...esp. if it speeds up development, we'll see.

After I finish the AST support for ANTLR-ObjC I will take a look at  
the ST port, what needs to be done, what parts are the most important  
etc.
I have some of the ST grammars in v3 already (one ANTLR bug is  
currently being investigated by Ter), so I will try to base it on v3  
completely.
That of course is also a limiting factor on the timeframe I'm doing  
the port in.

Regards,

-k

-- 
Kay R?pke <kroepke@classdump.org>
classdump Software


From rw1836 at yahoo.com  Tue Aug  8 09:47:36 2006
From: rw1836 at yahoo.com (John RW)
Date: Tue Aug  8 09:47:44 2006
Subject: [stringtemplate-interest] Map in stringtemplate
In-Reply-To: <4B0A170C-F959-4996-8579-E8200F6C100D@cs.usfca.edu>
Message-ID: <20060808164736.71884.qmail@web56906.mail.re3.yahoo.com>

Hi,
   
  I was trying to map comparators such as > < == etc to strings as follows:
   
  operator ::= [
    ">":"greaterThan",
    "<":"lessThan",
   "==":"equals",
  ...
  ]

  every other symbol works except for things involving '<' or '>'
   
  What is the problem that prevents such mappings? thanks.

  John.

 __________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org:8080/pipermail/stringtemplate-interest/attachments/20060808/41582adf/attachment.html
From parrt at cs.usfca.edu  Tue Aug  8 10:31:47 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Aug  8 10:31:50 2006
Subject: [stringtemplate-interest] Map in stringtemplate
In-Reply-To: <20060808164736.71884.qmail@web56906.mail.re3.yahoo.com>
References: <20060808164736.71884.qmail@web56906.mail.re3.yahoo.com>
Message-ID: <18EE9C55-932F-4F08-95E4-AD5B1B9B5B20@cs.usfca.edu>


On Aug 8, 2006, at 9:47 AM, John RW wrote:

> Hi,
>
> I was trying to map comparators such as > < == etc to strings as  
> follows:
>
> operator ::= [
>   ">":"greaterThan",
>   "<":"lessThan",
>  "==":"equals",
> ...
> ]
> every other symbol works except for things involving '<' or '>'
>
> What is the problem that prevents such mappings? thanks.

Sounds suspiciously like a problem with < and > being expr  
delimiters.  Can you be more specific than "doesn't work"?

Ter

From rw1836 at yahoo.com  Tue Aug  8 10:46:57 2006
From: rw1836 at yahoo.com (John RW)
Date: Tue Aug  8 10:47:01 2006
Subject: [stringtemplate-interest] Map in stringtemplate
In-Reply-To: <18EE9C55-932F-4F08-95E4-AD5B1B9B5B20@cs.usfca.edu>
Message-ID: <20060808174657.62476.qmail@web56915.mail.re3.yahoo.com>

Sorry, my mistake. It actually works.
   
  I was using operator.(some_arg) 
  to do the translation, the '>' and '<' was xml-quoted to &gt; so it did not work. Thanks for help.

Terence Parr <parrt@cs.usfca.edu> wrote:
  
On Aug 8, 2006, at 9:47 AM, John RW wrote:

> Hi,
>
> I was trying to map comparators such as > < == etc to strings as 
> follows:
>
> operator ::= [
> ">":"greaterThan",
> "<":"lessThan",
> "==":"equals",
> ...
> ]
> every other symbol works except for things involving '<' or '>'
>
> What is the problem that prevents such mappings? thanks.

Sounds suspiciously like a problem with < and > being expr 
delimiters. Can you be more specific than "doesn't work"?

Ter

_______________________________________________
stringtemplate-interest mailing list
stringtemplate-interest@antlr.org
http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest


 __________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org:8080/pipermail/stringtemplate-interest/attachments/20060808/8b17a25e/attachment-0001.html
From Ernest.H.Hill at irs.gov  Wed Aug  9 06:59:41 2006
From: Ernest.H.Hill at irs.gov (Hill Ernest H)
Date: Wed Aug  9 07:00:54 2006
Subject: [stringtemplate-interest] StringTemplate and Struts or Spring
Message-ID: <36C54D58F685274197A3E0491014C54B057CE5@AUS0010CP3MB02.ds.irsnet.gov>

Hi All,

Has anyone tried using StringTemplate in place of JSP with Struts? How
'about using StringTemplate with Spring WebFlow?

Regards,

Ernest Hill
Senior IT Specialist
Management Systems Designers, Inc.
ernest.h.hill@irs.gov
512-460-2425 (Office)
512-460-2551 (Fax)


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org:8080/pipermail/stringtemplate-interest/attachments/20060809/99d0add2/attachment.html
From rw1836 at yahoo.com  Wed Aug  9 13:38:38 2006
From: rw1836 at yahoo.com (John RW)
Date: Wed Aug  9 13:38:47 2006
Subject: [stringtemplate-interest] character escaping
In-Reply-To: <18EE9C55-932F-4F08-95E4-AD5B1B9B5B20@cs.usfca.edu>
Message-ID: <20060809203838.17076.qmail@web56902.mail.re3.yahoo.com>

I think it would be convenient to provide escape functions in stringtemplate to escape special xml characters.
   
  The point is that for xml attribute, and element text escaping, they can be different, and it is hard to encode such logic in code, as this is more representation issue. (same data, multiple views)
  
 

 __________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org:8080/pipermail/stringtemplate-interest/attachments/20060809/77bc6b83/attachment.html
From parrt at cs.usfca.edu  Fri Aug 11 11:11:45 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Aug 11 11:11:53 2006
Subject: [stringtemplate-interest] character escaping
In-Reply-To: <20060809203838.17076.qmail@web56902.mail.re3.yahoo.com>
References: <20060809203838.17076.qmail@web56902.mail.re3.yahoo.com>
Message-ID: <64014DF8-6BF3-45C2-A974-ABCB2243575D@cs.usfca.edu>

On Aug 9, 2006, at 1:38 PM, John RW wrote:

> I think it would be convenient to provide escape functions in  
> stringtemplate to escape special xml characters.
>
> The point is that for xml attribute, and element text escaping,  
> they can be different, and it is hard to encode such logic in code,  
> as this is more representation issue. (same data, multiple views)

very true.   Currently, I suggest auto-wrapping all strings in an  
object with properties like escaped().

$data.escaped$

you can override setAttribute in ST to all wrap all strings.

Ter
From uwes at cadence.com  Sat Aug 19 05:18:32 2006
From: uwes at cadence.com (Uwe Simm)
Date: Sat Aug 19 05:18:37 2006
Subject: [stringtemplate-interest] strange iteration problems when using
	HashMaps
Message-ID: <299857781E0791409D97D9762F4E2FF001B25F0C@MAILEU.global.cadence.com>

hi experts,

i'm using StringTemplate for a small application and i was surprised to
see the following behaviour:


i did expect that i do iterate in testme() over the elements of a and
applying the template op() to every element.
this works fine if a has got more than one element (the attribute has
been assigned more than once). however if the attribute is only assigned
once it looks like the iterator iterates over the contents of the
aggregate (the contents of the HashMap) which was not the primary
indent.

the question now is: how can iterate over the elements of the attribute
a apply the op() function independent of the number of elements in a?

regards
/uwe

---------------templates-------------------------
op(t) ::= "this is [<t.a>]"

testme(a) ::= <<
	testme
	<a:{<op(it)>};separator="\n">
	testme
>>
-------------------------------------------------
package convert;

import java.io.FileReader;
import java.util.HashMap;

import org.antlr.stringtemplate.StringTemplate;
import org.antlr.stringtemplate.StringTemplateGroup;

public class STtest {

	/**
	 * @param args
	 */
	public static void main(String[] args) throws Exception {
        StringTemplateGroup group = new StringTemplateGroup(new
FileReader("templates"));
		StringTemplate pack = group.getInstanceOf("testme");

        HashMap<String,Object> h = new HashMap<String,Object>();

        h.put("a","attr_a");
        pack.setAttribute("a", h);
        pack.setAttribute("a", h); // comment this line!

        System.err.println(pack);
	}
}
-------------------------------------------------
From harry.karadimas at hmn.aphp.fr  Mon Aug 21 08:55:21 2006
From: harry.karadimas at hmn.aphp.fr (Harry Karadimas)
Date: Mon Aug 21 08:55:39 2006
Subject: [stringtemplate-interest] 
	Re: stringtemplate-interest Digest, Vol 17, Issue 7
In-Reply-To: <20060819190003.57BE8DCD39@www.antlr.org>
References: <20060819190003.57BE8DCD39@www.antlr.org>
Message-ID: <44E9D769.2040609@hmn.aphp.fr>

I'm not sure but I think your "HashMap" may be confusing st as it is

HashMap<String,Object>

and not

HashMap<Object,Object>

so it is not an exact instance of "HashMap", which is what st expects. 
However I'm no generics expert.


HK


stringtemplate-interest-request@antlr.org a ?crit :
> Send stringtemplate-interest mailing list submissions to
> 	stringtemplate-interest@antlr.org
>
> To subscribe or unsubscribe via the World Wide Web, visit
> 	http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest
> or, via email, send a message with subject or body 'help' to
> 	stringtemplate-interest-request@antlr.org
>
> You can reach the person managing the list at
> 	stringtemplate-interest-owner@antlr.org
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of stringtemplate-interest digest..."
>
>
> Today's Topics:
>
>    1. strange iteration problems when using	HashMaps (Uwe Simm)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Sat, 19 Aug 2006 14:18:32 +0200
> From: "Uwe Simm" <uwes@cadence.com>
> Subject: [stringtemplate-interest] strange iteration problems when
> 	using	HashMaps
> To: <stringtemplate-interest@antlr.org>
> Message-ID:
> 	<299857781E0791409D97D9762F4E2FF001B25F0C@MAILEU.global.cadence.com>
> Content-Type: text/plain;	charset="us-ascii"
>
> hi experts,
>
> i'm using StringTemplate for a small application and i was surprised to
> see the following behaviour:
>
>
> i did expect that i do iterate in testme() over the elements of a and
> applying the template op() to every element.
> this works fine if a has got more than one element (the attribute has
> been assigned more than once). however if the attribute is only assigned
> once it looks like the iterator iterates over the contents of the
> aggregate (the contents of the HashMap) which was not the primary
> indent.
>
> the question now is: how can iterate over the elements of the attribute
> a apply the op() function independent of the number of elements in a?
>
> regards
> /uwe
>
> ---------------templates-------------------------
> op(t) ::= "this is [<t.a>]"
>
> testme(a) ::= <<
> 	testme
> 	<a:{<op(it)>};separator="\n">
> 	testme
>   
> -------------------------------------------------
> package convert;
>
> import java.io.FileReader;
> import java.util.HashMap;
>
> import org.antlr.stringtemplate.StringTemplate;
> import org.antlr.stringtemplate.StringTemplateGroup;
>
> public class STtest {
>
> 	/**
> 	 * @param args
> 	 */
> 	public static void main(String[] args) throws Exception {
>         StringTemplateGroup group = new StringTemplateGroup(new
> FileReader("templates"));
> 		StringTemplate pack = group.getInstanceOf("testme");
>
>         HashMap<String,Object> h = new HashMap<String,Object>();
>
>         h.put("a","attr_a");
>         pack.setAttribute("a", h);
>         pack.setAttribute("a", h); // comment this line!
>
>         System.err.println(pack);
> 	}
> }
> -------------------------------------------------
>
>
> ------------------------------
>
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest@antlr.org
> http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest
>
>
> End of stringtemplate-interest Digest, Vol 17, Issue 7
> ******************************************************
>
>   


-- 
/

______________________________________________________________________
Dr Harry Karadimas  Medecin Ingenieur resp. Recherche et Developpement            
Departement d'Information Hospitalier
CHU Henri Mondor 51, av. du Mal de Lattre de Tassigny   94010  CRETEIL
tel : (00 33 1) 49 81 21 79                fax : (00 33 1) 49 81 27 08
secr.: (00 33 1) 49 81 23 82 m.el.:harry.karadimas@hmn.ap-hop-paris.fr

/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org:8080/pipermail/stringtemplate-interest/attachments/20060821/5ebbd385/attachment.html
From uwes at cadence.com  Mon Aug 21 12:12:21 2006
From: uwes at cadence.com (Uwe Simm)
Date: Mon Aug 21 12:12:25 2006
Subject: [stringtemplate-interest] Re: strange iteration problems when using
	HashMaps
Message-ID: <299857781E0791409D97D9762F4E2FF001BABC18@MAILEU.global.cadence.com>

hi,

just digged into this and instead of calling the setAttribute directly
with the HashMap
as in the original mail:

pack.setAttribute("a", h);

now wrapping it with

pack.setAttribute("a", new Object[] {h})

work, independently from the number of pack.setAttribute invocations.

regards
/uwe


------------------------------------------------------------------------
---------------
    Uwe Simm                                Sr Technical Leader
CoreComp, Europe
                                            - Strategic Sales Programs -

 e  mailto:uwes@cadence.com
                                            Cadence Design Systems
 C  +49 172 8556816                         Mozartstrasse 2
 O  +49 89 4563 1825                        85622 Feldkirchen (Munich)
 F  +49 89 4563 1980                        Germany

Support :  http://www.cadence.com or http://sourcelink.cadence.com
From parrt at cs.usfca.edu  Mon Aug 21 13:25:44 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Aug 21 13:25:53 2006
Subject: [stringtemplate-interest] my status
Message-ID: <33997733-6171-4D31-AA18-4ACBB005D668@cs.usfca.edu>

Hi, was trying to relax before school started a bit and now I'm  
swamped with all the new students and class prep.  I hope to reappear  
to answer email in about a week.

Jean Bovet has an amazing new update to ANTLRWorks that you won't  
believe; he reports that he's ready and just waiting for me...doh!

Ter
From parrt at cs.usfca.edu  Fri Aug 25 10:23:46 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Aug 25 10:23:50 2006
Subject: [stringtemplate-interest] Re: antlr.org contact
In-Reply-To: <20060824114928.73DC7DCC67@www.antlr.org>
References: <20060824114928.73DC7DCC67@www.antlr.org>
Message-ID: <25D5A218-376E-4922-A4C3-01C6E725E79B@cs.usfca.edu>


On Aug 24, 2006, at 4:49 AM, dark_696@yahoo.com wrote:

> Ivica wrote:
>
> Hi Mr. Parr,
> I wrote jedit syntax coloring xml for stringtemplate. I don't know  
> how to send it to you if you want to put it to download somewhere.  
> Its free to modify and fix (I've built in in fifteen minutes though  
> so its probably buggy), so I presume you'd like to offer it through  
> this pages.

   That is great! can you upload to the filesharing area on the  
StringTemplate site?

http://www.stringtemplate.org/share/list

Ter
From kototamo at gmail.com  Sat Aug 26 14:44:56 2006
From: kototamo at gmail.com (kototama kototama)
Date: Sat Aug 26 14:45:00 2006
Subject: [stringtemplate-interest] Using StringTemplate and ASTFrame in
	ANTLR in C#
Message-ID: <9604cc9f0608261444y1ecca10du76a757028e613007@mail.gmail.com>

Hello,

I am using ANTLR 2.7.6  in C# for a compiler and StringTemplate.
I used the antlr.runtime.dll delivered with StringTemplate I've got the
following error :

" 'antlr.collections.AST' is defined in an unreferenced assembly. You should
reference the assembly 'antlr.runtime, Version=2.7.6.2, Culture=neutral,
PublicKeyToken=null'.
"

When I use my own version of antlr.runtime.dll I have this error a
TypeInitializationException here :

StreamReader rd = new StreamReader(templatePath_ + "/CCode.st");
            template_ = new StringTemplateGroup(rd); // <--- here

since StringTemplate expects this dll 'antlr.runtime, Version=2.7.6.2,
Culture=neutral, PublicKeyToken=d7701e059243744f'

I tried to build my own version of StringTemplate 2.2 by referencing my own
antlr.runtime.dll but then I've got this error :

'antlr.ASTPair' does not contains a definition for 'GetInstance'  (like if
stringtemplate was built for ANTLR 2.7.5 ?!)

I really need your help! Thanks in advance :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org:8080/pipermail/stringtemplate-interest/attachments/20060826/50638647/attachment.html
From e.papegaaij at student.utwente.nl  Mon Aug 28 09:07:16 2006
From: e.papegaaij at student.utwente.nl (Emond Papegaaij)
Date: Mon Aug 28 09:07:21 2006
Subject: [stringtemplate-interest] String manipulations
Message-ID: <200608281807.16257.e.papegaaij@student.utwente.nl>

Hello,

First of all: StringTemplate really rocks! It's clean, easy to use and 
really powerful!

There is however a single problem I keep facing. In many places I have to 
generate get- and set-methods for properties. For example the 
property 'value' will get the methods 'getValue' and 'setValue'. Right now 
I'm passing both the lower case 'value' and the upper case 'Value' to 
these templates, but this is rather cumbersome. Is there any way to 
perform simple string transformations with StringTemplate? That would 
greatly simplify most of my templates.

Best regards,
Emond Papegaaij
From brian at protexis.com  Mon Aug 28 14:39:09 2006
From: brian at protexis.com (brian@protexis.com)
Date: Mon Aug 28 14:39:11 2006
Subject: [stringtemplate-interest] Embedded loader problems
Message-ID: <49327.10.238.10.70.1156801149.webmail@10.238.10.70>

Hi

Suppose I create two templates (One.st and Two.st) and a template group
(Common.stg)

The contents of One.st are as follows:

$Two()$

The contents of Two.st are as follows:

"I'm not having fun here"

The contents of Common.stg are as follows:

group Common;

Here's the C# code:

Assembly assembly = Assembly.GetExecutingAssembly();

// define the loader for the string template group
EmbeddedResourceGroupLoader embeddedResourceGroupLoader = new
EmbeddedResourceGroupLoader(
    null,
    assembly,
    WebPageResource.TemplateGroupNameSpace);

StringTemplateGroup stringTemplateGroup =
embeddedResourceGroupLoader.LoadGroup(
    WebPageConstant.GROUP_TYPE_NAME);

// define the loader for the string template
EmbeddedResourceTemplateLoader embeddedResourceTemplateLoader = new
EmbeddedResourceTemplateLoader(
    assembly,
    WebPageResource.TemplateNameSpace);

StringTemplate stringTemplate = new StringTemplate(
    stringTemplateGroup,
    embeddedResourceTemplateLoader.LoadTemplate(templateTypeName));

When I run the code with templateTypeName set to "One", an exception is
thrown because the StringTemplate class has no idea where "Two.st" is
located.

Could someone please point me in the right direction? What do I need to do
to get the output "I'm not having fun here"?

If the StringTemplate library doesn't support thing, can I add another
constructor to the StringTemplate class that takes a StringTemplateLoader
as a parameter?

Thanks





From brian at protexis.com  Mon Aug 28 15:42:15 2006
From: brian at protexis.com (brian@protexis.com)
Date: Mon Aug 28 15:42:29 2006
Subject: [stringtemplate-interest] Embedded loader problems
In-Reply-To: <49327.10.238.10.70.1156801149.webmail@10.238.10.70>
References: <49327.10.238.10.70.1156801149.webmail@10.238.10.70>
Message-ID: <51631.10.238.10.70.1156804935.webmail@10.238.10.70>

Hi

I'll answer my own question ...

The following C# code works ...

Assembly assembly = Assembly.GetExecutingAssembly();

// define the loader for the string template group
EmbeddedResourceGroupLoader embeddedResourceGroupLoader = new
    EmbeddedResourceGroupLoader(
    null,
    assembly,
    WebPageResource.TemplateGroupNameSpace);

// define the loader for the string template
EmbeddedResourceTemplateLoader embeddedResourceTemplateLoader = new
    EmbeddedResourceTemplateLoader(
    assembly,
    WebPageResource.TemplateNameSpace);

// before the string template group can be used, the static instance
// needs to know which loader to use
StringTemplateGroup.RegisterGroupLoader(embeddedResourceGroupLoader);

StringTemplateGroup stringTemplateGroup = new StringTemplateGroup(
    WebPageConstant.GROUP_TYPE_NAME,
    embeddedResourceTemplateLoader);

StringTemplate stringTemplate =
    stringTemplateGroup.LookupTemplate(templateTypeName);





-----Original Message-----
From: brian@protexis.com
Sent: Mon, August 28, 2006 14:39
To: stringtemplate-interest@antlr.org
Subject: [stringtemplate-interest] Embedded loader problems

Hi

Suppose I create two templates (One.st and Two.st) and a template group
(Common.stg)

The contents of One.st are as follows:

$Two()$

The contents of Two.st are as follows:

"I'm not having fun here"

The contents of Common.stg are as follows:

group Common;

Here's the C# code:

Assembly assembly = Assembly.GetExecutingAssembly();

// define the loader for the string template group
EmbeddedResourceGroupLoader embeddedResourceGroupLoader = new
EmbeddedResourceGroupLoader(
    null,
    assembly,
    WebPageResource.TemplateGroupNameSpace);

StringTemplateGroup stringTemplateGroup =
embeddedResourceGroupLoader.LoadGroup(
    WebPageConstant.GROUP_TYPE_NAME);

// define the loader for the string template
EmbeddedResourceTemplateLoader embeddedResourceTemplateLoader = new
EmbeddedResourceTemplateLoader(
    assembly,
    WebPageResource.TemplateNameSpace);

StringTemplate stringTemplate = new StringTemplate(
    stringTemplateGroup,
    embeddedResourceTemplateLoader.LoadTemplate(templateTypeName));

When I run the code with templateTypeName set to "One", an exception is
thrown because the StringTemplate class has no idea where "Two.st" is
located.

Could someone please point me in the right direction? What do I need to do
to get the output "I'm not having fun here"?

If the StringTemplate library doesn't support thing, can I add another
constructor to the StringTemplate class that takes a StringTemplateLoader
as a parameter?

Thanks





_______________________________________________
stringtemplate-interest mailing list
stringtemplate-interest@antlr.org
http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest


From parrt at cs.usfca.edu  Mon Aug 28 17:50:49 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Aug 28 17:50:52 2006
Subject: [stringtemplate-interest] String manipulations
In-Reply-To: <200608281807.16257.e.papegaaij@student.utwente.nl>
References: <200608281807.16257.e.papegaaij@student.utwente.nl>
Message-ID: <D5CC78D2-0E45-4B3D-968F-99BBA5080EF1@cs.usfca.edu>


On Aug 28, 2006, at 9:07 AM, Emond Papegaaij wrote:

> Hello,
>
> First of all: StringTemplate really rocks! It's clean, easy to use and
> really powerful!
>
> There is however a single problem I keep facing. In many places I  
> have to
> generate get- and set-methods for properties. For example the
> property 'value' will get the methods 'getValue' and 'setValue'.  
> Right now
> I'm passing both the lower case 'value' and the upper case 'Value' to
> these templates, but this is rather cumbersome. Is there any way to
> perform simple string transformations with StringTemplate? That would
> greatly simplify most of my templates.

Hi.  Is this C#?

Ter

From parrt at cs.usfca.edu  Mon Aug 28 18:28:09 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Aug 28 18:28:12 2006
Subject: [stringtemplate-interest] got initial ST 2.3 release notes
Message-ID: <A2454E07-4EB4-4180-8C1F-97D051AC86F8@cs.usfca.edu>

Hi,

Got a start on the release notes:

http://www.antlr.org/wiki/display/ST/StringTemplate+2.3+Release+Notes

I need to clean that up, but it's up now on the wiki.  Have to update  
the doc too.

Ter
From e.papegaaij at student.utwente.nl  Mon Aug 28 23:32:13 2006
From: e.papegaaij at student.utwente.nl (Emond Papegaaij)
Date: Mon Aug 28 23:32:18 2006
Subject: [stringtemplate-interest] String manipulations
In-Reply-To: <D5CC78D2-0E45-4B3D-968F-99BBA5080EF1@cs.usfca.edu>
References: <200608281807.16257.e.papegaaij@student.utwente.nl>
	<D5CC78D2-0E45-4B3D-968F-99BBA5080EF1@cs.usfca.edu>
Message-ID: <200608290832.13803.e.papegaaij@student.utwente.nl>

On Tuesday 29 August 2006 02:50, Terence Parr wrote:
> On Aug 28, 2006, at 9:07 AM, Emond Papegaaij wrote:
> > First of all: StringTemplate really rocks! It's clean, easy to use and
> > really powerful!
> >
> > There is however a single problem I keep facing. In many places I
> > have to
> > generate get- and set-methods for properties. For example the
> > property 'value' will get the methods 'getValue' and 'setValue'.
> > Right now
> > I'm passing both the lower case 'value' and the upper case 'Value' to
> > these templates, but this is rather cumbersome. Is there any way to
> > perform simple string transformations with StringTemplate? That would
> > greatly simplify most of my templates.
>
> Hi.  Is this C#?

No, Java.

Best regards,
Emond
From parrt at cs.usfca.edu  Wed Aug 30 14:11:26 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Aug 30 14:11:30 2006
Subject: [stringtemplate-interest] String manipulations
In-Reply-To: <200608290832.13803.e.papegaaij@student.utwente.nl>
References: <200608281807.16257.e.papegaaij@student.utwente.nl>
	<D5CC78D2-0E45-4B3D-968F-99BBA5080EF1@cs.usfca.edu>
	<200608290832.13803.e.papegaaij@student.utwente.nl>
Message-ID: <C7FD9215-BB6B-46D3-B827-1BA9BC5950BF@cs.usfca.edu>


On Aug 28, 2006, at 11:32 PM, Emond Papegaaij wrote:

> On Tuesday 29 August 2006 02:50, Terence Parr wrote:
>> On Aug 28, 2006, at 9:07 AM, Emond Papegaaij wrote:
>>> First of all: StringTemplate really rocks! It's clean, easy to  
>>> use and
>>> really powerful!
>>>
>>> There is however a single problem I keep facing. In many places I
>>> have to
>>> generate get- and set-methods for properties. For example the
>>> property 'value' will get the methods 'getValue' and 'setValue'.
>>> Right now
>>> I'm passing both the lower case 'value' and the upper case  
>>> 'Value' to
>>> these templates, but this is rather cumbersome. Is there any way to
>>> perform simple string transformations with StringTemplate? That  
>>> would
>>> greatly simplify most of my templates.
>>
>> Hi.  Is this C#?
>
> No, Java.

Ah.  Ok, well, currently we have no "capitalize" predefined method.   
I suggest overriding setAttribute in ST to autowrap each String with  
another object that adds a capitalize method.  Costs memory, but for  
now that is an easy solution.  There are anumber of these like  
"escape URL".

Ter

From e.papegaaij at student.utwente.nl  Wed Aug 30 23:42:52 2006
From: e.papegaaij at student.utwente.nl (Emond Papegaaij)
Date: Wed Aug 30 23:42:59 2006
Subject: [stringtemplate-interest] String manipulations
In-Reply-To: <C7FD9215-BB6B-46D3-B827-1BA9BC5950BF@cs.usfca.edu>
References: <200608281807.16257.e.papegaaij@student.utwente.nl>
	<200608290832.13803.e.papegaaij@student.utwente.nl>
	<C7FD9215-BB6B-46D3-B827-1BA9BC5950BF@cs.usfca.edu>
Message-ID: <200608310842.53043.e.papegaaij@student.utwente.nl>

On Wednesday 30 August 2006 23:11, Terence Parr wrote:
> On Aug 28, 2006, at 11:32 PM, Emond Papegaaij wrote:
> > On Tuesday 29 August 2006 02:50, Terence Parr wrote:
> >> On Aug 28, 2006, at 9:07 AM, Emond Papegaaij wrote:
> >>> First of all: StringTemplate really rocks! It's clean, easy to
> >>> use and
> >>> really powerful!
> >>>
> >>> There is however a single problem I keep facing. In many places I
> >>> have to
> >>> generate get- and set-methods for properties. For example the
> >>> property 'value' will get the methods 'getValue' and 'setValue'.
> >>> Right now
> >>> I'm passing both the lower case 'value' and the upper case
> >>> 'Value' to
> >>> these templates, but this is rather cumbersome. Is there any way to
> >>> perform simple string transformations with StringTemplate? That
> >>> would
> >>> greatly simplify most of my templates.
> >>
> >> Hi.  Is this C#?
> >
> > No, Java.
>
> Ah.  Ok, well, currently we have no "capitalize" predefined method.
> I suggest overriding setAttribute in ST to autowrap each String with
> another object that adds a capitalize method.  Costs memory, but for
> now that is an easy solution.  There are anumber of these like
> "escape URL".
>
Maybe it is an idea to look at the functions that are available in XSLT and 
add similar functionality to StringTemplate? You could see them as 
predefined templates, and perhaps even allow a developer to add his own 
functions (such as Xalan Java extensions). I think functions like these 
will allow a more clean separation between model and view, because the 
model no longer needs to perform transformations that are actually part of 
the view. There is however a risk of introducing too much power, which 
allows a developer to put logic in the view. However I do think that if 
the functions remain fairly simple (and don't have side-effects) this risk 
is fairly small.

Best regards,
Emond Papegaaij
From parrt at cs.usfca.edu  Thu Aug 31 18:53:53 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Aug 31 18:53:57 2006
Subject: [stringtemplate-interest] added new doc sections
Message-ID: <1059BB8C-FDE0-497C-A84F-C26BF1B57475@cs.usfca.edu>

Hi,

  I have reorganized the StringTemplate manual so that it is broken  
up into sections.  As you may have seen Kunle went to the hard work  
to merge examples for all of the different languages Java, Python, C#.

I am now the process of updating the dock and adding the following  
sections in preparation for version ST 2.3 release next week:

http://www.antlr.org/wiki/display/ST/Group+interfaces

http://www.antlr.org/wiki/display/ST/Template+regions

http://www.antlr.org/wiki/display/ST/Automatic+line+wrapping

:)

This is hardly version 2.3 because it has so much cool stuff, it's  
more like version 3.0 but oh well. come to think of it there is some  
motivation for consistency between 3.0 StringTemplate and 3.0 ANTLR.   
Hmm.... anybody have any thoughts on that?

Ter
