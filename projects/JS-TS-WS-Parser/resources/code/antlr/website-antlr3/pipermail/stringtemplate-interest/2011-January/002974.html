<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [stringtemplate-interest] Re :  Re : ST4: XMLModelAdaptor
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:stringtemplate-interest%40antlr.org?Subject=Re:%20%5Bstringtemplate-interest%5D%20Re%20%3A%20%20Re%20%3A%20ST4%3A%20XMLModelAdaptor&In-Reply-To=%3C44003.62942.qm%40web25704.mail.ukl.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002973.html">
   <LINK REL="Next"  HREF="002989.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[stringtemplate-interest] Re :  Re : ST4: XMLModelAdaptor</H1>
    <B>Matthieu Wipliez</B> 
    <A HREF="mailto:stringtemplate-interest%40antlr.org?Subject=Re:%20%5Bstringtemplate-interest%5D%20Re%20%3A%20%20Re%20%3A%20ST4%3A%20XMLModelAdaptor&In-Reply-To=%3C44003.62942.qm%40web25704.mail.ukl.yahoo.com%3E"
       TITLE="[stringtemplate-interest] Re :  Re : ST4: XMLModelAdaptor">mwipliez at yahoo.fr
       </A><BR>
    <I>Mon Jan 24 21:18:17 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="002973.html">[stringtemplate-interest] Re : ST4: XMLModelAdaptor
</A></li>
        <LI>Next message: <A HREF="002989.html">[stringtemplate-interest] Re :  Re : ST4: XMLModelAdaptor
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2974">[ date ]</a>
              <a href="thread.html#2974">[ thread ]</a>
              <a href="subject.html#2974">[ subject ]</a>
              <a href="author.html#2974">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ok now *that* was a crazy example :D
The thing is that as long as you can plug custom Java code in ST (be it with 
renderers or adaptors) you can do pretty much anything. Let's not forget that 
&quot;with great 

power comes great responsibility&quot; :-)

Matthieu

&gt;<i>
</I>&gt;<i>De : Collin Fagan &lt;<A HREF="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">collin.fagan at gmail.com</A>&gt;
</I>&gt;<i>&#192; : Matthieu Wipliez &lt;<A HREF="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">mwipliez at yahoo.fr</A>&gt;
</I>&gt;<i>Cc : stringtemplate-interest List &lt;<A HREF="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">stringtemplate-interest at antlr.org</A>&gt;
</I>&gt;<i>Envoy&#233; le : Mar 25 janvier 2011, 13h 12min 21s
</I>&gt;<i>Objet : Re: [stringtemplate-interest] Re : ST4: XMLModelAdaptor
</I>&gt;<i>
</I>&gt;<i>they do not modify the underlying XML model
</I>&gt;<i>
</I>&gt;<i>Yes and that is why I think xpath is much closer to a property  invocation chain 
</I>&gt;<i>
</I>&gt;<i>then a SQL query. In the end you can only do so much  with xpath. So what can 
</I>&gt;<i>you do?
</I>&gt;<i>
</I>&gt;<i>    1. Walk the document 
</I>&gt;<i>
</I>&gt;<i>    2. Access elements and attributes
</I>&gt;<i>    3. querying/filtering based on the content of elements and attributes
</I>&gt;<i>
</I>&gt;<i>    4. Simple math.The filtering and math, while admittedly the responsibility 
</I>&gt;<i>of 
</I>&gt;<i>
</I>&gt;<i>the controller in an MVC architecture, is rather benign in my opinion. 
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>Let's compare this to a something truly horrific. I guarantee the following 
</I>&gt;<i>compiles and executes but I shall never release the code behind it for fear it 
</I>&gt;<i>might spread like a contagion. 
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>main(groovy) ::= &lt;&lt;
</I>&gt;<i>
</I>&gt;<i>A groovy string: &lt;groovy.(&quot; 'hi!' &quot;)&gt;
</I>&gt;<i>
</I>&gt;<i>Lets do Math! 5 + 7 = &lt;groovy.(&quot; 5 + 7 &quot;)&gt;
</I>&gt;<i>
</I>&gt;<i>Lists: &lt;groovy.(&quot;[5, 6, 7, 8]&quot;); separator=&quot; and &quot;&gt; 
</I>&gt;<i>
</I>&gt;<i>Functions:
</I>&gt;<i>    
</I>&gt;<i>    4 factorial = &lt;groovy.(&quot;
</I>&gt;<i>        // factorial function
</I>&gt;<i>        def fac(n) {
</I>&gt;<i>            n == 0 ? 1 : n * fac(n - 1) 
</I>&gt;<i>        }
</I>&gt;<i>        
</I>&gt;<i>        fac(4);
</I>&gt;<i>    &quot;)&gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>produces the following output: 
</I>&gt;<i>
</I>&gt;<i>A groovy string: hi!
</I>&gt;<i>
</I>&gt;<i>Lets do Math! 5 + 7 = 12
</I>&gt;<i>
</I>&gt;<i>Lists: 5 and 6 and 7 and 8 
</I>&gt;<i>
</I>&gt;<i>Functions:
</I>&gt;<i>
</I>&gt;<i>    4 factorial = 24
</I>&gt;<i>
</I>&gt;<i>Oh yes, I did just build a GroovyModelAdapter and it embodies everything we all 
</I>
&gt;<i>despise about JSP and similar technologies. My point is that xpath, while 
</I>&gt;<i>technically a grey area, is really only light grey compared to mixing in 
</I>&gt;<i>something as dangerous as a full blown scripting language like Groovy. 
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>But then again I wrote this so I might be bias. 
</I>&gt;<i>
</I>&gt;<i>Collin
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>On Mon, Jan 24, 2011 at 9:46 PM, Matthieu Wipliez &lt;<A HREF="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">mwipliez at yahoo.fr</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>Personally I love the idea of being able to produce textual code from XML with
</I>&gt;&gt;<i>StringTemplate, which is a lot easier to do than with, say, XSLT :-)
</I>&gt;&gt;<i>I think that the idea of using XPath as properties of the model is nice and
</I>&gt;&gt;<i>feels pretty natural.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Also, this respects the push strategy IMO, since the XML model is computed
</I>&gt;&gt;<i>beforehand. This may even be safer than using POJO-based model, because with
</I>&gt;&gt;<i>your own model you are free to modify the model in methods, which is not the
</I>&gt;&gt;<i>case with XPath expressions (they do not modify the underlying XML model).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Matthieu
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>----- Message d'origine ----
</I>&gt;&gt;&gt;<i> De : Terence Parr &lt;<A HREF="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">parrt at cs.usfca.edu</A>&gt;
</I>&gt;&gt;&gt;<i> &#192; : stringtemplate-interest List &lt;<A HREF="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">stringtemplate-interest at antlr.org</A>&gt;
</I>&gt;&gt;&gt;<i> Envoy&#233; le : Mar 25 janvier 2011, 9h 27min 53s
</I>&gt;&gt;&gt;<i> Objet : Re: [stringtemplate-interest] ST4: XMLModelAdaptor
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Ok, so this is Crazy cool:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &gt;&gt; &lt;root.(&quot;/bookstore/book&quot;): { book  |
</I>&gt;&gt;&gt;<i> &gt;&gt;     &lt;book.title&gt; (&lt;book.title.lang&gt;),  &lt;book.author&gt;, &lt;book.year&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; }&gt;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The only  question is: are we somehow entangling the controller in the view?
</I>&gt;&gt;&gt;<i>Think about  it, xpath is kind of like doing an SQL query, right? On the 
</I>other
&gt;&gt;&gt;<i>hand, you  could argue that
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &lt;employee.user.name.last&gt;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> is also digging  pretty deeply into the model whereas normally we want the
</I>&gt;&gt;&gt;<i>controller to pull the  data out of the model and push it into the template.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I think that is the  conversation we need to have, though I like the idea of
</I>&gt;&gt;&gt;<i>some XML integration for  marketing reasons. anybody have thoughts?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Ter
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On Jan 22, 2011, at  1:21 PM, Collin Fagan wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &gt; Absolutely! I use only the standard XML  stuff from the JDK so there are 
</I>no
&gt;&gt;&gt;<i>extra dependencies. I'd be happy to do  whatever you need to make this
</I>&gt;&gt;&gt;<i>&quot;inclusion ready&quot;, unit tests, style standards,  whatever, just let me know.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt; Collin
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt; On Sat,  Jan 22, 2011 at 2:52 PM, Terence Parr &lt;<A HREF="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">parrt at cs.usfca.edu</A>&gt; wrote:
</I>&gt;&gt;&gt;<i> &gt;  Wow.You are a twisted guy! I like it! :)  I wonder if some built-in XML
</I>&gt;&gt;&gt;<i>adapters should be built-in. Should we discuss including in the standard
</I>&gt;&gt;&gt;<i>distribution?
</I>&gt;&gt;&gt;<i> &gt; Ter
</I>&gt;&gt;&gt;<i> &gt; On Jan 22, 2011, at 12:01 PM, Collin Fagan  wrote:
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; Hi All,
</I>&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; I've been playing  with the idea of a model adapter that understands 
</I>XPath
&gt;&gt;&gt;<i>and xml documents.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &gt;&gt; This is what I ended up with.
</I>&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt;  Example:
</I>&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; Given an xml file with a structure like  this:
</I>&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &lt;bookstore&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt;      &lt;book&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt;         &lt;title lang=&quot;eng&quot;&gt;The  Adventures of Augie March&lt;/title&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt;          &lt;year&gt;1953&lt;/year&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt;          &lt;author&gt;Saul Bellow&lt;/author&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt;      &lt;/book&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; ...
</I>&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; You can write a template  like this:
</I>&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; All Books: &lt;root.(&quot;/bookstore/book&quot;): {  book |
</I>&gt;&gt;&gt;<i> &gt;&gt;     &lt;book.title&gt; (&lt;book.title.lang&gt;),  &lt;book.author&gt;, &lt;book.year&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; }&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; As you can see the books are being selected with the  /bookstore/book 
</I>&gt;<i>XPath
</I>&gt;&gt;&gt;<i>expression. ST is able to iterate over everything that is  returned and we 
</I>can
&gt;&gt;&gt;<i>access elements and attributes on each selected item via the  &quot;.&quot; notation.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; Here is the full source code and example  for those intersted.
</I>&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; <A HREF="http://www.box.net/shared/8tnrna4bi7">http://www.box.net/shared/8tnrna4bi7</A>
</I>&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt;  Enjoy,
</I>&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; Collin
</I>&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt;  _______________________________________________
</I>&gt;&gt;&gt;<i> &gt;&gt;  stringtemplate-interest mailing list
</I>&gt;&gt;&gt;<i> &gt;&gt; <A HREF="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">stringtemplate-interest at antlr.org</A>
</I>&gt;&gt;&gt;<i> &gt;&gt; <A HREF="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">http://www.antlr.org/mailman/listinfo/stringtemplate-interest</A>
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt; _______________________________________________
</I>&gt;&gt;&gt;<i> &gt;  stringtemplate-interest mailing list
</I>&gt;&gt;&gt;<i> &gt; <A HREF="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">stringtemplate-interest at antlr.org</A>
</I>&gt;&gt;&gt;<i> &gt; <A HREF="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">http://www.antlr.org/mailman/listinfo/stringtemplate-interest</A>
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;<i> stringtemplate-interest  mailing list
</I>&gt;&gt;&gt;<i> <A HREF="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">stringtemplate-interest at antlr.org</A>
</I>&gt;&gt;&gt;<i> <A HREF="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">http://www.antlr.org/mailman/listinfo/stringtemplate-interest</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>_______________________________________________
</I>&gt;&gt;<i>stringtemplate-interest mailing list
</I>&gt;&gt;<i><A HREF="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">stringtemplate-interest at antlr.org</A>
</I>&gt;&gt;<i><A HREF="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">http://www.antlr.org/mailman/listinfo/stringtemplate-interest</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>

      
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002973.html">[stringtemplate-interest] Re : ST4: XMLModelAdaptor
</A></li>
	<LI>Next message: <A HREF="002989.html">[stringtemplate-interest] Re :  Re : ST4: XMLModelAdaptor
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2974">[ date ]</a>
              <a href="thread.html#2974">[ thread ]</a>
              <a href="subject.html#2974">[ subject ]</a>
              <a href="author.html#2974">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">More information about the stringtemplate-interest
mailing list</a><br>
</body></html>
