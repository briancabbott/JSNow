<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [stringtemplate-interest] ST4: Customizing whitespace behavior
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:stringtemplate-interest%40antlr.org?Subject=Re:%20%5Bstringtemplate-interest%5D%20ST4%3A%20Customizing%20whitespace%20behavior&In-Reply-To=%3C00cf01cbdf5f%2431eddb30%2495c99190%24%40pixelminegames.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003265.html">
   <LINK REL="Next"  HREF="003267.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[stringtemplate-interest] ST4: Customizing whitespace behavior</H1>
    <B>Sam Harwell</B> 
    <A HREF="mailto:stringtemplate-interest%40antlr.org?Subject=Re:%20%5Bstringtemplate-interest%5D%20ST4%3A%20Customizing%20whitespace%20behavior&In-Reply-To=%3C00cf01cbdf5f%2431eddb30%2495c99190%24%40pixelminegames.com%3E"
       TITLE="[stringtemplate-interest] ST4: Customizing whitespace behavior">sharwell at pixelminegames.com
       </A><BR>
    <I>Thu Mar 10 12:10:24 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="003265.html">[stringtemplate-interest] ST4: Customizing whitespace behavior
</A></li>
        <LI>Next message: <A HREF="003267.html">[stringtemplate-interest] ST4: Customizing whitespace behavior
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3266">[ date ]</a>
              <a href="thread.html#3266">[ thread ]</a>
              <a href="subject.html#3266">[ subject ]</a>
              <a href="author.html#3266">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I generally only want to control this option for a particular template.
After thinking about it some more, the simplest option that would allow me
to cleanly separate templates suffering from this problem is a &quot;single line
template&quot; which ignores newline characters within that template's string
literals. The option applies to embedded region definitions and anonymous
templates, but not to explicit \n characters in a separator string, and not
to any template passed as a parameter to or called from it. For such a
template, the singleElement rule in CodeGenerator would not emit
INSTR_NEWLINE when a NEWLINE tree node is encountered.

Sam

-----Original Message-----
From: <A HREF="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">stringtemplate-interest-bounces at antlr.org</A>
[mailto:<A HREF="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">stringtemplate-interest-bounces at antlr.org</A>] On Behalf Of Terence Parr
Sent: Tuesday, March 08, 2011 6:56 PM
To: stringtemplate-interest List
Subject: Re: [stringtemplate-interest] ST4: Customizing whitespace behavior

I just remember that we do have the STWriter interface. the typical one is
the AutoIndentWriter which usually works, but you might want one that does
something unusual. Would that be good enough for your customization needs?

 as far as the &quot; everything has to be on one line&quot; issue, I agree: it would
be great to separate the output formatting from the formatting of the
template itself. Seems to me that we added the &lt;\\&gt; special tag for that
purpose but I don't remember it working perfectly and version 3; I guess
maybe we should look at this again for v4. it really is annoying to have to
put everything on one line to avoid a \n in the output.

Ter
On Mar 8, 2011, at 2:45 PM, Sam Harwell wrote:

&gt;<i> I find myself wishing for an option similar to XSL's preserve-space
</I>element.
&gt;<i> The problem we have in StringTemplate is template/output options are
</I>&gt;<i> specified at the &quot;call site&quot; instead of as part of the template
</I>definition.
&gt;<i> For the whitespace issues I encounter, this option would only work if it
</I>&gt;<i> were specified as part of the template definition.
</I>&gt;<i> 
</I>&gt;<i> While the existing rules are consistent, I have several cases where long,
</I>&gt;<i> complicated lines in the output require many hundreds of characters on a
</I>&gt;<i> single line of the template. In some (but not all) cases, this could be
</I>&gt;<i> simplified by allowing nested regions.
</I>&gt;<i> 
</I>&gt;<i> @rule.region.subRegion ::= ...
</I>&gt;<i> 
</I>&gt;<i> Sam
</I>&gt;<i> 
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">stringtemplate-interest-bounces at antlr.org</A>
</I>&gt;<i> [mailto:<A HREF="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">stringtemplate-interest-bounces at antlr.org</A>] On Behalf Of Udo
</I>&gt;<i> Borkowski
</I>&gt;<i> Sent: Tuesday, March 08, 2011 9:49 AM
</I>&gt;<i> To: stringtemplate-interest List
</I>&gt;<i> Subject: [stringtemplate-interest] ST4: Customizing whitespace behavior
</I>&gt;<i> 
</I>&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> recent postings in this group showed handling whitespaces around tags is a
</I>&gt;<i> tricky business. 
</I>&gt;<i> 
</I>&gt;<i> Currently the whitespace handling is &quot;hard coded&quot;, it follows a fixed set
</I>of
&gt;<i> rules.
</I>&gt;<i> 
</I>&gt;<i> What about making this &quot;customizable&quot;? 
</I>&gt;<i> 
</I>&gt;<i> We mainly need to cover the &quot;&lt;if&gt;.&lt;elseif&gt;.&lt;else&gt;.&lt;endif&gt;&quot; and the
</I>&gt;<i> &quot;&lt;@reg&gt;.&lt;@end&gt;&quot; constructs. (Or something else?)
</I>&gt;<i> 
</I>&gt;<i> One way this could be achieved would be through some &quot;WhitespaceAdapter&quot;
</I>&gt;<i> interface: a developer may provide a class (globally or per group) to
</I>define
&gt;<i> how whitespaces encountered at the borders of these tags should be
</I>handled.
&gt;<i> The compiler will ask this adapter to generate the proper instructions. Of
</I>&gt;<i> cause a &quot;DefaultWhitespaceAdapter&quot; is used by default to implement the
</I>&gt;<i> current behavior.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> What do others think about this idea? Is this doable with the current
</I>&gt;<i> compiler? 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Udo
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Recent postings dealing with whitespace issues:
</I>&gt;<i> -
</I>&gt;<i>
</I><A HREF="http://www.antlr.org/pipermail/stringtemplate-interest/2011-February/003212.">http://www.antlr.org/pipermail/stringtemplate-interest/2011-February/003212.</A>
&gt;<i> html
</I>&gt;<i> -
</I>&gt;<i>
</I><A HREF="http://www.antlr.org/pipermail/stringtemplate-interest/2011-March/003226.htm">http://www.antlr.org/pipermail/stringtemplate-interest/2011-March/003226.htm</A>
&gt;<i> l
</I>&gt;<i> - 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> stringtemplate-interest mailing list
</I>&gt;<i> <A HREF="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">stringtemplate-interest at antlr.org</A>
</I>&gt;<i> <A HREF="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">http://www.antlr.org/mailman/listinfo/stringtemplate-interest</A>
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> stringtemplate-interest mailing list
</I>&gt;<i> <A HREF="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">stringtemplate-interest at antlr.org</A>
</I>&gt;<i> <A HREF="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">http://www.antlr.org/mailman/listinfo/stringtemplate-interest</A>
</I>
_______________________________________________
stringtemplate-interest mailing list
<A HREF="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">stringtemplate-interest at antlr.org</A>
<A HREF="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">http://www.antlr.org/mailman/listinfo/stringtemplate-interest</A>

</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003265.html">[stringtemplate-interest] ST4: Customizing whitespace behavior
</A></li>
	<LI>Next message: <A HREF="003267.html">[stringtemplate-interest] ST4: Customizing whitespace behavior
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3266">[ date ]</a>
              <a href="thread.html#3266">[ thread ]</a>
              <a href="subject.html#3266">[ subject ]</a>
              <a href="author.html#3266">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">More information about the stringtemplate-interest
mailing list</a><br>
</body></html>
