<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [stringtemplate-interest] Web template caching
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:stringtemplate-interest%40antlr.org?Subject=Re:%20%5Bstringtemplate-interest%5D%20Web%20template%20caching&In-Reply-To=%3CCALTvmmKFELPOJaNXjubdNyRU8U7kzB%3DLXtqtOzGhBhU%3DZgD%2Bgg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="003984.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[stringtemplate-interest] Web template caching</H1>
    <B>Edward Coffey</B> 
    <A HREF="mailto:stringtemplate-interest%40antlr.org?Subject=Re:%20%5Bstringtemplate-interest%5D%20Web%20template%20caching&In-Reply-To=%3CCALTvmmKFELPOJaNXjubdNyRU8U7kzB%3DLXtqtOzGhBhU%3DZgD%2Bgg%40mail.gmail.com%3E"
       TITLE="[stringtemplate-interest] Web template caching">edward.coffey at gmail.com
       </A><BR>
    <I>Sun Jul  1 04:34:27 PDT 2012</I>
    <P><UL>
        
        <LI>Next message: <A HREF="003984.html">[stringtemplate-interest] Formatting vs. Escaping in an	AttributeRenderer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3983">[ date ]</a>
              <a href="thread.html#3983">[ thread ]</a>
              <a href="subject.html#3983">[ subject ]</a>
              <a href="author.html#3983">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Ter,

No problem, two jobs sounds like more than enough work - my current
solution is holding up well enough for the time being.

Regards,
Ed.

On 1 July 2012 05:16, Terence Parr &lt;<A HREF="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">parrt at cs.usfca.edu</A>&gt; wrote:

&gt;<i> Hi Ed,Sorry for the delay&#8230;I'm completely overwhelms doing 2 jobs and work
</I>&gt;<i> until probably September or October. ugh!
</I>&gt;<i>
</I>&gt;<i> yeah, I can't remember what my philosophy was a few years ago concerning
</I>&gt;<i> caching but I likely decided that it was an easy fix for someone to create
</I>&gt;<i> a subclass of STGroup to handle.
</I>&gt;<i>
</I>&gt;<i>  Unfortunately, I don't have time at the moment to go dig into the
</I>&gt;<i> software to try to remember what I intended&#8230; as anybody else tried to do
</I>&gt;<i> some caching?
</I>&gt;<i> Ter
</I>&gt;<i> On Jun 17, 2012, at 5:00 PM, Edward Coffey wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; Hi,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I'm attempting to use ST4 to do fairly simple web templating using raw
</I>&gt;<i> templates. STRawGroupDir and the getInstanceOf method seems to be the
</I>&gt;<i> recommended approach according to the documentation I've read. This method
</I>&gt;<i> checks STGroup's templates map to see if there's already a CompiledST
</I>&gt;<i> instance there, never stores anything in the map, so every request attempts
</I>&gt;<i> to load the template as a .stg file, fails, then actually loads the correct
</I>&gt;<i> .st file. Even without the first attempted load, opening a file for every
</I>&gt;<i> hit on the web server is far too many opens.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; In a sleep-deprived state last night I reimplemented STRawGroupDir's
</I>&gt;<i> load method, having it store any CompiledST it produces in a cache (not
</I>&gt;<i> STGroup's templates map, but an independent EHCache instance). It works,
</I>&gt;<i> increases performance, and gets rid of the occasional &quot;too many open files&quot;
</I>&gt;<i> error I was getting under high load.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; In the cold light of day, that seems like a brave (foolish) approach,
</I>&gt;<i> given how little I know of the internals of ST4 (in general, and
</I>&gt;<i> specifically in regard to the thread safety of CompiledST instances). It
</I>&gt;<i> seems like I'm probably missing something pretty fundamental here - like
</I>&gt;<i> &quot;is getInstanceOf even the right method to call, or is there an alternative
</I>&gt;<i> method if I want to avoid the file-open hit each time?&quot; or similar
</I>&gt;<i> questions. Can someone point me in the right direction?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Regards,
</I>&gt;<i> &gt; Ed.
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; stringtemplate-interest mailing list
</I>&gt;<i> &gt; <A HREF="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">stringtemplate-interest at antlr.org</A>
</I>&gt;<i> &gt; <A HREF="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">http://www.antlr.org/mailman/listinfo/stringtemplate-interest</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20120701/549da1d5/attachment-0001.html">http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20120701/549da1d5/attachment-0001.html</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="003984.html">[stringtemplate-interest] Formatting vs. Escaping in an	AttributeRenderer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3983">[ date ]</a>
              <a href="thread.html#3983">[ thread ]</a>
              <a href="subject.html#3983">[ subject ]</a>
              <a href="author.html#3983">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">More information about the stringtemplate-interest
mailing list</a><br>
</body></html>
