From mike.goodwin at cantab.net  Tue Nov  2 16:55:31 2010
From: mike.goodwin at cantab.net (Mike Goodwin)
Date: Tue, 2 Nov 2010 23:55:31 +0000
Subject: [stringtemplate-interest] Bug/Problem passing parameters into
	iteration
Message-ID: <AANLkTi=Az-j=7xpYD0U+VgsajtVE-CpRq0dGX+u+UdYn@mail.gmail.com>

Hello List,

On the StringTemplate home page it says "Bug reports can be found and
filed via StringTemplate's JIRA", unfortunately it seems that account
registration is not possible, so I am not sure about the accuracy of
that statement. (For me it says contact the list of administrators,
but then the list of administrators it suggests is empty).

I have encountered what I believe to be a bug (source+output appended
below). For me the object Model has its toString() method called an
formed as part of the call to the template element. I cannot quite see
why this would be the case. Removing all references to indent make
this issue go away (but remove the indentation). I cannot see another
way that I would be able to pass arguments in to the iteration. (I can
work around it by using a field, and calculating it in the model, but
this is not ideal).

I am using StringTemplate 3.2.1.

regards,

Mike




----------------------- PokeStringTemplate.java ----------------------

package poke.stringtemplate;

import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.URL;
import java.util.ArrayList;
import java.util.List;

import org.antlr.stringtemplate.StringTemplate;
import org.antlr.stringtemplate.StringTemplateGroup;
import org.antlr.stringtemplate.language.DefaultTemplateLexer;

public class PokeStringTemplate {
	
	static public class Model{
		final String name;
		final List<Model> children = new ArrayList();;
		Model(Model parent, String name){
			if(parent!=null) parent.children.add(this);
			this.name = name;
		}
		public String getName(){ return name; }
		public List<Model> getChildren(){ return children; }
		@Override public String toString() {
			return "Do not want to see this!";
		}
	}

	
	static public void main(String[] args) throws IOException {
		
		Model a = new Model(null,"a");
		Model a_b = new Model(a,"b");
		Model a_c = new Model(a,"c");
		Model a_b_d = new Model(a_b,"d");
		Model a_b_e = new Model(a_b,"e");
		
		StringTemplate t = getTemplate("tree.stg", "tree");
		t.setAttribute("root", a);
		File out = new File("tree.html");
		stringToFile(t+"", out);
		
	}

	static private void stringToFile(String s, File f) throws IOException{
		FileWriter w = new FileWriter(f);
		w.append(s);
		w.close();
	}
	
    static private StringTemplateGroup getTemplateGroup(String name)
throws IOException{
    	URL url = PokeStringTemplate.class.getResource(name);
    	InputStream is = url.openStream();
    	return new StringTemplateGroup(new InputStreamReader(is),
DefaultTemplateLexer.class);
    	
    }

    static private StringTemplate getTemplate(String file, String
name) throws IOException{
    	return getTemplateGroup(file).getInstanceOf(name);
    }
}


------------------ tree.stg ---------------------------------

group xmldoc;

element(indent)::=<<
$indent$$it.name$<br>
$indent$$it.children:element(indent=indent+"&nbsp;&nbsp;")$
>>

elementTop()::=<<
$it.name$<br>
$it.children:element(indent="&nbsp;&nbsp;")$
>>

tree(root)::=<<
<html>
	<body>
		<code>
$root:elementTop()$
		</code>
	</body>
</html>
>>


------------------ output (copied from rendered html)
---------------------------------
a
  b
  Do not want to see this!  d
Do not want to see this!  Do not want to see this!  e
Do not want to see this!    c

From parrt at cs.usfca.edu  Wed Nov  3 13:51:59 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 3 Nov 2010 13:51:59 -0700
Subject: [stringtemplate-interest] Bug/Problem passing parameters into
	iteration
In-Reply-To: <AANLkTi=Az-j=7xpYD0U+VgsajtVE-CpRq0dGX+u+UdYn@mail.gmail.com>
References: <AANLkTi=Az-j=7xpYD0U+VgsajtVE-CpRq0dGX+u+UdYn@mail.gmail.com>
Message-ID: <09CD2F53-010F-4EBD-8295-4071F13320D4@cs.usfca.edu>

Hi Mike. quick question/thought.  Are you expecting indent expr to be evaluated for every iteration?  ST tries to avoid that and does indent once before iteration starts.

Ter
On Nov 2, 2010, at 4:55 PM, Mike Goodwin wrote:

> Hello List,
> 
> On the StringTemplate home page it says "Bug reports can be found and
> filed via StringTemplate's JIRA", unfortunately it seems that account
> registration is not possible, so I am not sure about the accuracy of
> that statement. (For me it says contact the list of administrators,
> but then the list of administrators it suggests is empty).
> 
> I have encountered what I believe to be a bug (source+output appended
> below). For me the object Model has its toString() method called an
> formed as part of the call to the template element. I cannot quite see
> why this would be the case. Removing all references to indent make
> this issue go away (but remove the indentation). I cannot see another
> way that I would be able to pass arguments in to the iteration. (I can
> work around it by using a field, and calculating it in the model, but
> this is not ideal).
> 
> I am using StringTemplate 3.2.1.
> 
> regards,
> 
> Mike
> 
> 
> 
> 
> ----------------------- PokeStringTemplate.java ----------------------
> 
> package poke.stringtemplate;
> 
> import java.io.File;
> import java.io.FileWriter;
> import java.io.IOException;
> import java.io.InputStream;
> import java.io.InputStreamReader;
> import java.net.URL;
> import java.util.ArrayList;
> import java.util.List;
> 
> import org.antlr.stringtemplate.StringTemplate;
> import org.antlr.stringtemplate.StringTemplateGroup;
> import org.antlr.stringtemplate.language.DefaultTemplateLexer;
> 
> public class PokeStringTemplate {
> 	
> 	static public class Model{
> 		final String name;
> 		final List<Model> children = new ArrayList();;
> 		Model(Model parent, String name){
> 			if(parent!=null) parent.children.add(this);
> 			this.name = name;
> 		}
> 		public String getName(){ return name; }
> 		public List<Model> getChildren(){ return children; }
> 		@Override public String toString() {
> 			return "Do not want to see this!";
> 		}
> 	}
> 
> 	
> 	static public void main(String[] args) throws IOException {
> 		
> 		Model a = new Model(null,"a");
> 		Model a_b = new Model(a,"b");
> 		Model a_c = new Model(a,"c");
> 		Model a_b_d = new Model(a_b,"d");
> 		Model a_b_e = new Model(a_b,"e");
> 		
> 		StringTemplate t = getTemplate("tree.stg", "tree");
> 		t.setAttribute("root", a);
> 		File out = new File("tree.html");
> 		stringToFile(t+"", out);
> 		
> 	}
> 
> 	static private void stringToFile(String s, File f) throws IOException{
> 		FileWriter w = new FileWriter(f);
> 		w.append(s);
> 		w.close();
> 	}
> 	
>    static private StringTemplateGroup getTemplateGroup(String name)
> throws IOException{
>    	URL url = PokeStringTemplate.class.getResource(name);
>    	InputStream is = url.openStream();
>    	return new StringTemplateGroup(new InputStreamReader(is),
> DefaultTemplateLexer.class);
>    	
>    }
> 
>    static private StringTemplate getTemplate(String file, String
> name) throws IOException{
>    	return getTemplateGroup(file).getInstanceOf(name);
>    }
> }
> 
> 
> ------------------ tree.stg ---------------------------------
> 
> group xmldoc;
> 
> element(indent)::=<<
> $indent$$it.name$<br>
> $indent$$it.children:element(indent=indent+"&nbsp;&nbsp;")$
>>> 
> 
> elementTop()::=<<
> $it.name$<br>
> $it.children:element(indent="&nbsp;&nbsp;")$
>>> 
> 
> tree(root)::=<<
> <html>
> 	<body>
> 		<code>
> $root:elementTop()$
> 		</code>
> 	</body>
> </html>
>>> 
> 
> 
> ------------------ output (copied from rendered html)
> ---------------------------------
> a
>  b
>  Do not want to see this!  d
> Do not want to see this!  Do not want to see this!  e
> Do not want to see this!    c
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/stringtemplate-interest


From mike.goodwin at cantab.net  Wed Nov  3 14:53:25 2010
From: mike.goodwin at cantab.net (Mike Goodwin)
Date: Wed, 3 Nov 2010 21:53:25 +0000
Subject: [stringtemplate-interest] Bug/Problem passing parameters into
	iteration
In-Reply-To: <09CD2F53-010F-4EBD-8295-4071F13320D4@cs.usfca.edu>
References: <AANLkTi=Az-j=7xpYD0U+VgsajtVE-CpRq0dGX+u+UdYn@mail.gmail.com>
	<09CD2F53-010F-4EBD-8295-4071F13320D4@cs.usfca.edu>
Message-ID: <AANLkTi=xSKRa_1zn2B0ommKCQ5eDk_N2fZxCR5L1FurE@mail.gmail.com>

Hi Terrence,

No that is not the expectation.

In the expression:         indent=indent+"&nbsp;&nbsp;"

My understanding is that StringTemplate is functional so reassignment
would not be a legal action. I expect that the left hand side 'indent'
is the name of the value being passed to the next call and so does not
refer to the indent in the calling scope.

What I would dearly like to see as an example is how to create
something using arbitrary depth recursion, passing in extra
parameters. A good example, and variation on what I attempted to do
would be a html contents page with &nbsp; for indent and section
numbers (ignoring the fact that css + <ul> would be a better way to do
the indenting part).

If I am honest I really expected it to be a doddle because of the
functional design of StringTemplate, it is after all just a bit of
recursion. I tried many variations, but with no success. In the end I
resorted to using java to create the recursive bit of the html.

- mike


On Wed, Nov 3, 2010 at 8:51 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
> Hi Mike. quick question/thought. ?Are you expecting indent expr to be evaluated for every iteration? ?ST tries to avoid that and does indent once before iteration starts.
>
> Ter

From parrt at cs.usfca.edu  Wed Nov  3 14:59:31 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 3 Nov 2010 14:59:31 -0700
Subject: [stringtemplate-interest] Bug/Problem passing parameters into
	iteration
In-Reply-To: <AANLkTi=xSKRa_1zn2B0ommKCQ5eDk_N2fZxCR5L1FurE@mail.gmail.com>
References: <AANLkTi=Az-j=7xpYD0U+VgsajtVE-CpRq0dGX+u+UdYn@mail.gmail.com>
	<09CD2F53-010F-4EBD-8295-4071F13320D4@cs.usfca.edu>
	<AANLkTi=xSKRa_1zn2B0ommKCQ5eDk_N2fZxCR5L1FurE@mail.gmail.com>
Message-ID: <B7FE1A88-CD4A-4DBC-AFBE-60A2D5B46E02@cs.usfca.edu>


On Nov 3, 2010, at 2:53 PM, Mike Goodwin wrote:

> Hi Terrence,
> 
> No that is not the expectation.
> 
> In the expression:         indent=indent+"&nbsp;&nbsp;"
> 
> My understanding is that StringTemplate is functional so reassignment
> would not be a legal action. I expect that the left hand side 'indent'
> is the name of the value being passed to the next call and so does not
> refer to the indent in the calling scope.

Oh. actually it does lazy eval in case you ref another parameter. 

> 
> What I would dearly like to see as an example is how to create
> something using arbitrary depth recursion, passing in extra
> parameters. A good example, and variation on what I attempted to do
> would be a html contents page with &nbsp; for indent and section
> numbers (ignoring the fact that css + <ul> would be a better way to do
> the indenting part).

Well, it autoindent happens automatically in ST but I get your point.  BTW, you did turn off the auto indent right?  Else you'll get double.

> If I am honest I really expected it to be a doddle because of the
> functional design of StringTemplate, it is after all just a bit of
> recursion. I tried many variations, but with no success. In the end I
> resorted to using java to create the recursive bit of the html.

I've used recursive templates to walk tree models and such.


Ter

From weberjn at gmail.com  Thu Nov  4 13:54:57 2010
From: weberjn at gmail.com (Juergen Weber)
Date: Thu, 4 Nov 2010 21:54:57 +0100
Subject: [stringtemplate-interest] Nested Maps
In-Reply-To: <6E1006D0-4F1A-4F6C-B656-FED698DF16A2@cs.usfca.edu>
References: <AANLkTin3VP3Um49DNrsapO+M9p=KJRgTgiM5n+HreXzJ@mail.gmail.com>
	<6E1006D0-4F1A-4F6C-B656-FED698DF16A2@cs.usfca.edu>
Message-ID: <AANLkTin9csfJz9E+JM1eeOp=t+gz5LBaQHmxB1LvPPQJ@mail.gmail.com>

actually it's

<map.keys:{k|<k> <map.(k).keys:{k1| <k1> <map.(k).(k1)>};
separator=",">}; separator=",\n">

There isn't a shortcut for map.(k).keys like <map.keys,map.values:{k,v|
is it?

8-)
Juergen

On Mon, Oct 25, 2010 at 7:42 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
> (<outer:{inner | (<inner:{v| "<v>"})}>)
>
> or some such
>
> T
> On Oct 24, 2010, at 4:06 AM, Juergen Weber wrote:
>
>> Hi,
>>
>> could somebody please point me to a sample on how iterate a nested Map
>> (a Map of Maps) with StringTemplate?
>>
>> I'd like to output a Java Map like
>>
>> ("Men", ("George", "Cloony")), ("Women", ("Julia", "Roberts"))
>>
>> Thanks,
>> Juergen
>> _______________________________________________
>> stringtemplate-interest mailing list
>> stringtemplate-interest at antlr.org
>> http://www.antlr.org/mailman/listinfo/stringtemplate-interest
>
>

From weberjn at gmail.com  Thu Nov  4 14:00:37 2010
From: weberjn at gmail.com (Juergen Weber)
Date: Thu, 4 Nov 2010 22:00:37 +0100
Subject: [stringtemplate-interest] tab stop tag
Message-ID: <AANLkTinTDGjkZqWhoTbQ3RSCHYdpZET3WatzCyVHT5cW@mail.gmail.com>

Is there a tag to advance to a tab position?

like

blabla <tabstop(20)> blabla <tabstop(40)>

This would be useful for reports. My current workaround is to actually
output <<TAB20>> and run a post-processor on StringTemplate's output,
but this is against the spirit of a template engine, it seems.

Thanks,
Juergen

From parrt at cs.usfca.edu  Fri Nov  5 14:21:31 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 5 Nov 2010 14:21:31 -0700
Subject: [stringtemplate-interest] Bug/Problem passing parameters into
	iteration
In-Reply-To: <AANLkTimRO1Vf-F=MSo0mSJ+6Dcr3+jx7KZ25Oabao7iS@mail.gmail.com>
References: <AANLkTi=Az-j=7xpYD0U+VgsajtVE-CpRq0dGX+u+UdYn@mail.gmail.com>
	<09CD2F53-010F-4EBD-8295-4071F13320D4@cs.usfca.edu>
	<AANLkTi=xSKRa_1zn2B0ommKCQ5eDk_N2fZxCR5L1FurE@mail.gmail.com>
	<B7FE1A88-CD4A-4DBC-AFBE-60A2D5B46E02@cs.usfca.edu>
	<AANLkTimRO1Vf-F=MSo0mSJ+6Dcr3+jx7KZ25Oabao7iS@mail.gmail.com>
Message-ID: <CF2A4FB1-BB0A-40B5-B9E6-FB7523EE9BD1@cs.usfca.edu>


On Nov 3, 2010, at 3:42 PM, Mike Goodwin wrote:

>>> No that is not the expectation.
>>> 
>>> In the expression:         indent=indent+"&nbsp;&nbsp;"
>>> 
>>> My understanding is that StringTemplate is functional so reassignment
>>> would not be a legal action. I expect that the left hand side 'indent'
>>> is the name of the value being passed to the next call and so does not
>>> refer to the indent in the calling scope.
>> 
>> Oh. actually it does lazy eval in case you ref another parameter.
>> 
> 
> I'm not sure I entirely follow. Which other parameter could change?
> Surely this would only matter if the parameter was one which depended
> on the iteration, such as $i0$, is that even in scope? We may be
> talking at cross-purposes.


Sorry for delay. ok, i've got v3 and v4 in my head, dang it.  v3 comment on eval args:

	/** Evaluate an argument list within the context of the enclosing
	 *  template but store the values in the context of self, the
	 *  new embedded template.  For example, bold(item=item) means
	 *  that bold.item should get the value of enclosing.item.
	 */

foo(a=b) looks to create an 'a' in the arg map of foo with value of outer context's b value.

In ASTExpr.write, I see comment

	 *  Compute separator and wrap expressions, save as strings so we don't
	 *  recompute for each value in a multi-valued attribute or expression.

so iteration value is computed once, but args should be created/eval'd every invocation.

anyway, looking more closely [sorry, i'm a one track mind and on something else], I see:

x=x+"&nbsp;&nbsp;"

The "+" forces (early) eval which has to eval x. x is eval'd with x.toString().  wait. why is x a model?

Hmm...that does seem wrong...i think "it" is becoming confused with sole arg.  Anyway, here is the fix

element(el,x)::=<<
$x$$el.name$<br>
$x$$el.children:element(el=it,x=x+" ")$
>>

tree(root)::=<<
<html>
        <body>
                <code>
$root:element(el=it, x="")$
                </code>
        </body>
</html>
>>

Note 1 less template
Ter

From zen at freedbms.net  Fri Nov  5 17:01:36 2010
From: zen at freedbms.net (Zenaan Harkness)
Date: Sat, 6 Nov 2010 11:01:36 +1100
Subject: [stringtemplate-interest] tab stop tag
In-Reply-To: <AANLkTinTDGjkZqWhoTbQ3RSCHYdpZET3WatzCyVHT5cW@mail.gmail.com>
References: <AANLkTinTDGjkZqWhoTbQ3RSCHYdpZET3WatzCyVHT5cW@mail.gmail.com>
Message-ID: <AANLkTikxMG86s0OQQk6sER=1ZbKoX340aosixTRgVmGx@mail.gmail.com>

On Fri, Nov 5, 2010 at 08:00, Juergen Weber <weberjn at gmail.com> wrote:
> Is there a tag to advance to a tab position?
>
> like
>
> blabla <tabstop(20)> blabla <tabstop(40)>

Check out ST renderers, on the website, and in the mailing list archives, eg:

 Subject: [stringtemplate-interest] Problem with fixed-length custom
object renderer

Good luck learning ST, it's good stuff,
Zenaan

From mike.goodwin at cantab.net  Fri Nov  5 18:39:55 2010
From: mike.goodwin at cantab.net (Mike Goodwin)
Date: Sat, 6 Nov 2010 01:39:55 +0000
Subject: [stringtemplate-interest] Bug/Problem passing parameters into
	iteration
In-Reply-To: <CF2A4FB1-BB0A-40B5-B9E6-FB7523EE9BD1@cs.usfca.edu>
References: <AANLkTi=Az-j=7xpYD0U+VgsajtVE-CpRq0dGX+u+UdYn@mail.gmail.com>
	<09CD2F53-010F-4EBD-8295-4071F13320D4@cs.usfca.edu>
	<AANLkTi=xSKRa_1zn2B0ommKCQ5eDk_N2fZxCR5L1FurE@mail.gmail.com>
	<B7FE1A88-CD4A-4DBC-AFBE-60A2D5B46E02@cs.usfca.edu>
	<AANLkTimRO1Vf-F=MSo0mSJ+6Dcr3+jx7KZ25Oabao7iS@mail.gmail.com>
	<CF2A4FB1-BB0A-40B5-B9E6-FB7523EE9BD1@cs.usfca.edu>
Message-ID: <AANLkTikBKU4KNw1xxDWofwseS_-wJBXBdzhtVbyZ1gFR@mail.gmail.com>

Hi Terence,

> element(el,x)::=<<
> $x$$el.name$<br>
> $x$$el.children:element(el=it,x=x+" ")$
>>>
> tree(root)::=<<
> <html>
>        <body>
>                <code>
> $root:element(el=it, x="")$
>                </code>
>        </body>
> </html>

I find the scoping implications/rules a bit confusing. Looking at
this, twice we have el=it. The 'it' presumably comes from the scope in
that of the template we are calling. How could we then refer to the
outer 'it' in the setting expression? What about the x  ... etc.?

The extra template was being used, but had been simplified whilst
trying to get things working.

- mike

From parrt at cs.usfca.edu  Fri Nov  5 20:14:25 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 5 Nov 2010 20:14:25 -0700
Subject: [stringtemplate-interest] Bug/Problem passing parameters into
	iteration
In-Reply-To: <AANLkTikBKU4KNw1xxDWofwseS_-wJBXBdzhtVbyZ1gFR@mail.gmail.com>
References: <AANLkTi=Az-j=7xpYD0U+VgsajtVE-CpRq0dGX+u+UdYn@mail.gmail.com>
	<09CD2F53-010F-4EBD-8295-4071F13320D4@cs.usfca.edu>
	<AANLkTi=xSKRa_1zn2B0ommKCQ5eDk_N2fZxCR5L1FurE@mail.gmail.com>
	<B7FE1A88-CD4A-4DBC-AFBE-60A2D5B46E02@cs.usfca.edu>
	<AANLkTimRO1Vf-F=MSo0mSJ+6Dcr3+jx7KZ25Oabao7iS@mail.gmail.com>
	<CF2A4FB1-BB0A-40B5-B9E6-FB7523EE9BD1@cs.usfca.edu>
	<AANLkTikBKU4KNw1xxDWofwseS_-wJBXBdzhtVbyZ1gFR@mail.gmail.com>
Message-ID: <26BA92F4-6149-4EC2-8292-1566EDA0C694@cs.usfca.edu>


On Nov 5, 2010, at 6:39 PM, Mike Goodwin wrote:

> Hi Terence,
> 
>> element(el,x)::=<<
>> $x$$el.name$<br>
>> $x$$el.children:element(el=it,x=x+" ")$
>>>> 
>> tree(root)::=<<
>> <html>
>>       <body>
>>               <code>
>> $root:element(el=it, x="")$
>>               </code>
>>       </body>
>> </html>
> 
> I find the scoping implications/rules a bit confusing. Looking at
> this, twice we have el=it. The 'it' presumably comes from the scope in
> that of the template we are calling. How could we then refer to the
> outer 'it' in the setting expression? What about the x  ... etc.?

actually it refers to the iteration from root:element(...) in that context. imagine

$root:{ r | $element(el=r, x="")$}$

> The extra template was being used, but had been simplified whilst
> trying to get things working.

ah. got it.
Ter
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20101105/2ff5135f/attachment.html 

From parrt at cs.usfca.edu  Sun Nov  7 16:20:42 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 7 Nov 2010 16:20:42 -0800
Subject: [stringtemplate-interest] mirror raw depot now
Message-ID: <7224D6EF-21BF-4ECB-A434-E44313A1C052@cs.usfca.edu>

hi, finally got around to mirroring raw depot

http://www.stringtemplate.org/depot
http://www.antlr.org/depot

The git hub seems to get refreshed as does the fisheye.  I guess what people want is the build (binary jars) set up?

Anyway, seemed like someone wanted this.  Is it useful to have?  I can have it do zips too.

Ter
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20101107/74b16e61/attachment.html 

From zen at freedbms.net  Sun Nov  7 16:39:36 2010
From: zen at freedbms.net (Zenaan Harkness)
Date: Mon, 8 Nov 2010 11:39:36 +1100
Subject: [stringtemplate-interest] mirror raw depot now
In-Reply-To: <7224D6EF-21BF-4ECB-A434-E44313A1C052@cs.usfca.edu>
References: <7224D6EF-21BF-4ECB-A434-E44313A1C052@cs.usfca.edu>
Message-ID: <AANLkTin0s59bvy+cEDnwnbm63i_cG=Xgk=x2VMXBMd_J@mail.gmail.com>

On Mon, Nov 8, 2010 at 11:20, Terence Parr <parrt at cs.usfca.edu> wrote:
> hi, finally got around to mirroring raw depot

What's "raw depot" ('scuse me ignorance) ?

> The git hub seems to get refreshed as does the fisheye. ?I guess what people
> want is the build (binary jars) set up?
> Anyway, seemed like someone wanted this. ?Is it useful to have? ?I can have
> it do zips too.

What would be riproaringly fantastic would be a "git clone ..." url
from which to pull from. Perhaps that's what you intended but the
public read-only url link is not yet available/ displayed at
github.org?

If you have not set that up yet, this would presumably just be some
post commit hook thing in the VCS you currently use, to export as
patch or something and auto-import into a local git repo and then auto
push to github.org, taking note of branches.

I've forgotten your VCS, but if it's widely used, almost certainly
such post-commit hooks VCS gateway type scripts are already available
for the cherry picking :)

Salivating anticipatorialliciously,
Zen

From parrt at cs.usfca.edu  Sun Nov  7 20:22:16 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 7 Nov 2010 20:22:16 -0800
Subject: [stringtemplate-interest] mirror raw depot now
In-Reply-To: <AANLkTin0s59bvy+cEDnwnbm63i_cG=Xgk=x2VMXBMd_J@mail.gmail.com>
References: <7224D6EF-21BF-4ECB-A434-E44313A1C052@cs.usfca.edu>
	<AANLkTin0s59bvy+cEDnwnbm63i_cG=Xgk=x2VMXBMd_J@mail.gmail.com>
Message-ID: <6A64925E-A2F9-46E7-9603-F6ADEC3DDA22@cs.usfca.edu>


On Nov 7, 2010, at 4:39 PM, Zenaan Harkness wrote:

> On Mon, Nov 8, 2010 at 11:20, Terence Parr <parrt at cs.usfca.edu> wrote:
>> hi, finally got around to mirroring raw depot
> 
> What's "raw depot" ('scuse me ignorance) ?

well, no log/history on file. it's like webdav

> 
>> The git hub seems to get refreshed as does the fisheye.  I guess what people
>> want is the build (binary jars) set up?
>> Anyway, seemed like someone wanted this.  Is it useful to have?  I can have
>> it do zips too.
> 
> What would be riproaringly fantastic would be a "git clone ..." url

is

https://github.com/antlr

what you want?

> from which to pull from. Perhaps that's what you intended but the
> public read-only url link is not yet available/ displayed at
> github.org?
> 
> If you have not set that up yet, this would presumably just be some
> post commit hook thing in the VCS you currently use, to export as
> patch or something and auto-import into a local git repo and then auto
> push to github.org, taking note of branches.
> 
> I've forgotten your VCS, but if it's widely used, almost certainly
> such post-commit hooks VCS gateway type scripts are already available
> for the cherry picking :)

I just do a pull from depot into /depot dir in website every hour for this new thing.

I've got mvn running on the box now too so i can make a daily build.  hudson bit the dust so I removed link today.

Ter
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20101107/f44a2c42/attachment.html 

From parrt at cs.usfca.edu  Mon Nov  8 14:28:57 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 8 Nov 2010 14:28:57 -0800
Subject: [stringtemplate-interest] parrt doing a keynote at Code Generation
	2011
Message-ID: <1434526E-3E16-4E96-9F25-77171DC4D53C@cs.usfca.edu>

Howdy,

May 25-27, 2011 I'll be attending Code Generation 2011 conference (Cambridge UK) and doing a keynote presentation, probably derived my motto: "Why program by hand in five days what you can spend five years of your life automating?"  'course that 5 years turned into 20 years, heh, but who's counting?

http://www.codegeneration.net/cg2011/index.php

I believe the conference is more industrial than academic, but some professors lurk and give presentations.

Come heckle my presentation or just come to say hi.  See y'all there!

I've never been to Cambridge. Should be a hoot!

Terence

From zen at freedbms.net  Tue Nov  9 00:51:03 2010
From: zen at freedbms.net (Zenaan Harkness)
Date: Tue, 9 Nov 2010 19:51:03 +1100
Subject: [stringtemplate-interest] mirror raw depot now
In-Reply-To: <6A64925E-A2F9-46E7-9603-F6ADEC3DDA22@cs.usfca.edu>
References: <7224D6EF-21BF-4ECB-A434-E44313A1C052@cs.usfca.edu>
	<AANLkTin0s59bvy+cEDnwnbm63i_cG=Xgk=x2VMXBMd_J@mail.gmail.com>
	<6A64925E-A2F9-46E7-9603-F6ADEC3DDA22@cs.usfca.edu>
Message-ID: <AANLkTim7fDk76UPN6O8oUupDhwJSpaYyqjoKQCzgJnVK@mail.gmail.com>

(Removed antl mailing list from CC since I'm not subscribed it rejects emails.)


On Mon, Nov 8, 2010 at 15:22, Terence Parr <parrt at cs.usfca.edu> wrote:
> On Nov 7, 2010, at 4:39 PM, Zenaan Harkness wrote:
>> What would be riproaringly fantastic would be a "git clone ..." url
>
> is
> https://github.com/antlr
> what you want?

Thanks, I figured it out.
What got me is that on the left of that page is a "Public
Repositories" column, which has links to each project.
When I click on a project, it has a box near the top with a label to
the left saying
"Git Read-Only", yet the box is empty. For example see
https://github.com/antlr/stringtemplate4

_and_  git clone https://github.com/antlr/stringtemplate4 does not work!

The solution is to add ".git" extension to the url, like:
  git clone https://github.com/antlr/stringtemplate4.git

then it works!

Thanks again
Zen

From mortenoh at gmail.com  Tue Nov  9 08:35:00 2010
From: mortenoh at gmail.com (Morten Olav Hansen)
Date: Tue, 9 Nov 2010 17:35:00 +0100
Subject: [stringtemplate-interest] Problems with counting using i/i0
Message-ID: <AANLkTintVrXU3KWAPeetOSMtG1WTykwqc2UidCnjErxG@mail.gmail.com>

Hi

I'm having a problem with using a counter in my stringtemplate (also
using ANTLR3).

In my StringTemplate I have:

datavalues(datas) ::= <<
<datas: data_n()>
>>

data_n() ::= <<
Data <i0>;
<it.values: value_n(i0)>
>>

value_n() ::= <<
Value <n>_<i0>;
>>

data(values) ::= << >>
value() ::= << >>

data and value has corresponding -> data/value template rewrites in
the antlr-grammar.

This does not work, since it seems the i0 parameter to value_n is
evaluated in value_n, so <i0> == <n>, I'm looking for something like:

Data 0;
Value 0_0;
Value 0_1;

Data 1;
Value 1_0;
Value 1_1;

Is there something I can do about this behavior ? or are there any
other ways of accomplishing this? any ideas would be appreciated.

Regards,
Morten

From dav.poletti at gmail.com  Wed Nov 10 05:19:54 2010
From: dav.poletti at gmail.com (Davide Poletti)
Date: Wed, 10 Nov 2010 14:19:54 +0100
Subject: [stringtemplate-interest] String template group inheritance
Message-ID: <20101110131954.GA25663@Rigel>


Hi, 

I' ve some problems with String Template Group inheritance.

I define a super group in one file IOop.stg

group IOop;

temp(attr1) ::=<< ....>>

and the sugroup in file Read.stg:

group Read : IOop;

temp2()::=<<....>>


But when I run 

StringTemplateGroup stg = StringTemplateUtil.loadTemplate("Read.stg");
logger.debug(stg.getSuperGroup().toString());
StringTemplate st = stg.getSuperGroup().getTemplateDefinition("temp");

I got an error since stg.getSuperGroup() seems to return null, where I
did wrong???

Davide

From pgiblock at voicesheardmedia.com  Thu Nov 11 08:22:28 2010
From: pgiblock at voicesheardmedia.com (Paul Giblock)
Date: Thu, 11 Nov 2010 11:22:28 -0500
Subject: [stringtemplate-interest] Line continuation escape
Message-ID: <201011111122.28191.pgiblock@voicesheardmedia.com>

Terrance,

I'm wondering if there is a standard way to do a line-continuation (like \ in 
C)  In my situation, we have a template we want auto-wrapped at 65 characters.  
This is great for splitting long lines, but it does not work for joining lines 
that "shrink" after performing substitutions.

In the meantime, I need to write each "paragraph" as a single long line in the 
template file.

Thanks for the great work!

Paul

From parrt at antlr.org  Thu Nov 11 13:09:49 2010
From: parrt at antlr.org (Terence Parr)
Date: Thu, 11 Nov 2010 13:09:49 -0800
Subject: [stringtemplate-interest] antlr / ST daily builds now available
Message-ID: <6599C8F9-FC78-484C-8D7A-4E1035C3CDCD@antlr.org>

Howdy, I'm running maven as cron job off of mirrored depot:

http://www.antlr.org/depot/antlr3/main/target
http://www.stringtemplate.org/depot/ST3/java/main/target

Links now from download.html on both sites.

Ter


From parrt at cs.usfca.edu  Sat Nov 13 13:13:33 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 13 Nov 2010 13:13:33 -0800
Subject: [stringtemplate-interest] mirror raw depot now
In-Reply-To: <AANLkTim7fDk76UPN6O8oUupDhwJSpaYyqjoKQCzgJnVK@mail.gmail.com>
References: <7224D6EF-21BF-4ECB-A434-E44313A1C052@cs.usfca.edu>
	<AANLkTin0s59bvy+cEDnwnbm63i_cG=Xgk=x2VMXBMd_J@mail.gmail.com>
	<6A64925E-A2F9-46E7-9603-F6ADEC3DDA22@cs.usfca.edu>
	<AANLkTim7fDk76UPN6O8oUupDhwJSpaYyqjoKQCzgJnVK@mail.gmail.com>
Message-ID: <3E03CA5B-1BF3-4B64-BDA4-44EF03C8608A@cs.usfca.edu>


On Nov 9, 2010, at 12:51 AM, Zenaan Harkness wrote:
> Thanks, I figured it out.
> What got me is that on the left of that page is a "Public
> Repositories" column, which has links to each project.
> When I click on a project, it has a box near the top with a label to
> the left saying
> "Git Read-Only", yet the box is empty. For example see
> https://github.com/antlr/stringtemplate4

ItShows https://github.com/antlr/stringtemplate4.git for me.

> _and_  git clone https://github.com/antlr/stringtemplate4 does not work!
> 
> The solution is to add ".git" extension to the url, like:
>  git clone https://github.com/antlr/stringtemplate4.git
> 
> then it works!

 weird. I get a 404 error for that

Ter

From parrt at cs.usfca.edu  Sat Nov 13 13:15:03 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 13 Nov 2010 13:15:03 -0800
Subject: [stringtemplate-interest] Problems with counting using i/i0
In-Reply-To: <AANLkTintVrXU3KWAPeetOSMtG1WTykwqc2UidCnjErxG@mail.gmail.com>
References: <AANLkTintVrXU3KWAPeetOSMtG1WTykwqc2UidCnjErxG@mail.gmail.com>
Message-ID: <8DFDCD9A-E693-42E0-89D0-886EDEF02D74@cs.usfca.edu>

Can you set a parameter to data_n? Using the default i0 is a little unconventional. If you name the parameter, then there is no ambiguity about what i0 means .
Ter
On Nov 9, 2010, at 8:35 AM, Morten Olav Hansen wrote:

> Hi
> 
> I'm having a problem with using a counter in my stringtemplate (also
> using ANTLR3).
> 
> In my StringTemplate I have:
> 
> datavalues(datas) ::= <<
> <datas: data_n()>
>>> 
> 
> data_n() ::= <<
> Data <i0>;
> <it.values: value_n(i0)>
>>> 
> 
> value_n() ::= <<
> Value <n>_<i0>;
>>> 
> 
> data(values) ::= << >>
> value() ::= << >>
> 
> data and value has corresponding -> data/value template rewrites in
> the antlr-grammar.
> 
> This does not work, since it seems the i0 parameter to value_n is
> evaluated in value_n, so <i0> == <n>, I'm looking for something like:
> 
> Data 0;
> Value 0_0;
> Value 0_1;
> 
> Data 1;
> Value 1_0;
> Value 1_1;
> 
> Is there something I can do about this behavior ? or are there any
> other ways of accomplishing this? any ideas would be appreciated.
> 
> Regards,
> Morten
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/stringtemplate-interest


From parrt at cs.usfca.edu  Sat Nov 13 13:16:39 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 13 Nov 2010 13:16:39 -0800
Subject: [stringtemplate-interest] String template group inheritance
In-Reply-To: <20101110131954.GA25663@Rigel>
References: <20101110131954.GA25663@Rigel>
Message-ID: <3E8C3F5F-17F6-4A4F-BD1D-6209C46D3985@cs.usfca.edu>

Hi. I think you should try loadGroup not loadTemplate.
Ter
On Nov 10, 2010, at 5:19 AM, Davide Poletti wrote:

> 
> Hi, 
> 
> I' ve some problems with String Template Group inheritance.
> 
> I define a super group in one file IOop.stg
> 
> group IOop;
> 
> temp(attr1) ::=<< ....>>
> 
> and the sugroup in file Read.stg:
> 
> group Read : IOop;
> 
> temp2()::=<<....>>
> 
> 
> But when I run 
> 
> StringTemplateGroup stg = StringTemplateUtil.loadTemplate("Read.stg");
> logger.debug(stg.getSuperGroup().toString());
> StringTemplate st = stg.getSuperGroup().getTemplateDefinition("temp");
> 
> I got an error since stg.getSuperGroup() seems to return null, where I
> did wrong???
> 
> Davide
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/stringtemplate-interest


From parrt at cs.usfca.edu  Sat Nov 13 13:17:12 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 13 Nov 2010 13:17:12 -0800
Subject: [stringtemplate-interest] Line continuation escape
In-Reply-To: <201011111122.28191.pgiblock@voicesheardmedia.com>
References: <201011111122.28191.pgiblock@voicesheardmedia.com>
Message-ID: <20DC50BC-EE6B-4CF9-8699-04E231DFDFB4@cs.usfca.edu>

Yeah,Dealing with and template formatting that does not affect the output is a very difficult problem. I think I implemented <\\>. can you try that?
Ter
On Nov 11, 2010, at 8:22 AM, Paul Giblock wrote:

> Terrance,
> 
> I'm wondering if there is a standard way to do a line-continuation (like \ in 
> C)  In my situation, we have a template we want auto-wrapped at 65 characters.  
> This is great for splitting long lines, but it does not work for joining lines 
> that "shrink" after performing substitutions.
> 
> In the meantime, I need to write each "paragraph" as a single long line in the 
> template file.
> 
> Thanks for the great work!
> 
> Paul
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/stringtemplate-interest


From vijaydone at gmail.com  Sun Nov 14 04:24:29 2010
From: vijaydone at gmail.com (vijay e)
Date: Sun, 14 Nov 2010 17:54:29 +0530
Subject: [stringtemplate-interest] pls help needed--macro expansion in a C
	file
Message-ID: <AANLkTi=2YAK77vt+udcViB1UKX1FOuZwz14p=HWHz0wU@mail.gmail.com>

hi,

hi to all, i need a  grammar tht expands macro preprocessor in a C file, any
one pls help me, i am tryin it with the help of C preprocessor grammar
provided by antlr but its giving errors when i compile it, i am unable to
compile it properly:(
pls help me out if anyone knows how to expand macro preprocessor.

-- 
Vijay.E,
Mtech (Pursuing),
Department of Computer Science,
IIT Madras.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20101114/831c8f66/attachment.html 

From mortenoh at gmail.com  Sun Nov 14 06:40:40 2010
From: mortenoh at gmail.com (Morten Olav Hansen)
Date: Sun, 14 Nov 2010 15:40:40 +0100
Subject: [stringtemplate-interest] Problems with counting using i/i0
In-Reply-To: <8DFDCD9A-E693-42E0-89D0-886EDEF02D74@cs.usfca.edu>
References: <AANLkTintVrXU3KWAPeetOSMtG1WTykwqc2UidCnjErxG@mail.gmail.com>
	<8DFDCD9A-E693-42E0-89D0-886EDEF02D74@cs.usfca.edu>
Message-ID: <AANLkTim+boj9VDNiR+Qi6Ag3xU5AFB6i7qnHTFbda4Lf@mail.gmail.com>

Do you mean a parameter to value_n? theres was a typo in what i wrote,
value_n should have a parameter called n. This is a somewhat
simplified version of the program i'm trying. Maybe it helps showing
the grammar and template:

Grammar (added to java 1.5):
regionDecl
	:	'region' '{' (states+=stateDecl|transitions+=transitionDecl)* '}'
		-> region(states={$states}, transitions={$transitions})
	;

stateDecl
	:	'state' Identifier ';'
		-> state(id={$Identifier.text})
	;
	
transitionDecl
	:	'transition' '(' from=Identifier ',' to=Identifier ')' ';'
		-> transition(from={$from.text}, to={$to.text})
	;

Template:

group StateBuilder;

statemachine(regions) ::= <<
<regions: region_n(); separator="\n\n">
>>

region_n() ::= <<
Region region<i0>;
<it.states: state_n(i0); separator="\n">
>>

state_n(rid) ::= <<
State r<rid>_<i0>;
>>

region(states, transitions) ::= << >>
state(id) ::= << >>
transition(from, to) ::= << >>

So given:
public class XYZ {
	region {
		state x;
	}

	region {
		state y;
	}
}

It outputs:
public class XYZ {
	Region region0;
State r0_0;

Region region1;
State r0_0;
}

But I want the last state to be r1_0, which I'm having trouble with.

--
Morten

On Sat, Nov 13, 2010 at 10:15 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
> Can you set a parameter to data_n? Using the default i0 is a little unconventional. If you name the parameter, then there is no ambiguity about what i0 means .
> Ter
> On Nov 9, 2010, at 8:35 AM, Morten Olav Hansen wrote:
>
>> Hi
>>
>> I'm having a problem with using a counter in my stringtemplate (also
>> using ANTLR3).
>>
>> In my StringTemplate I have:
>>
>> datavalues(datas) ::= <<
>> <datas: data_n()>
>>>>
>>
>> data_n() ::= <<
>> Data <i0>;
>> <it.values: value_n(i0)>
>>>>
>>
>> value_n() ::= <<
>> Value <n>_<i0>;
>>>>
>>
>> data(values) ::= << >>
>> value() ::= << >>
>>
>> data and value has corresponding -> data/value template rewrites in
>> the antlr-grammar.
>>
>> This does not work, since it seems the i0 parameter to value_n is
>> evaluated in value_n, so <i0> == <n>, I'm looking for something like:
>>
>> Data 0;
>> Value 0_0;
>> Value 0_1;
>>
>> Data 1;
>> Value 1_0;
>> Value 1_1;
>>
>> Is there something I can do about this behavior ? or are there any
>> other ways of accomplishing this? any ideas would be appreciated.
>>
>> Regards,
>> Morten
>> _______________________________________________
>> stringtemplate-interest mailing list
>> stringtemplate-interest at antlr.org
>> http://www.antlr.org/mailman/listinfo/stringtemplate-interest
>
>

From pgiblock at voicesheardmedia.com  Mon Nov 15 07:35:23 2010
From: pgiblock at voicesheardmedia.com (Paul Giblock)
Date: Mon, 15 Nov 2010 10:35:23 -0500
Subject: [stringtemplate-interest] Line continuation escape
In-Reply-To: <20DC50BC-EE6B-4CF9-8699-04E231DFDFB4@cs.usfca.edu>
References: <201011111122.28191.pgiblock@voicesheardmedia.com>
	<20DC50BC-EE6B-4CF9-8699-04E231DFDFB4@cs.usfca.edu>
Message-ID: <201011151035.23935.pgiblock@voicesheardmedia.com>

Terrance -

Thanks for the hint.  I am using the DefaultTemplateLexer class. I tried:

Line one <\\>
More line one 

and the resulting output was:

Line one <\>
More line one

The '\\' was simply reduced to '\'.  Alternatively, if I use $\\$ instead, I 
get:

Line one 

That is, the string templating ends at the first occurance of $\\$.

I suppose I can write my own InputStream wrapper that replaces "\\\n[ \t]*" 
with " ", but I'd think StringTemplate could handle this out of the box.

-Paul

On Saturday 13 November 2010 16:17:12 Terence Parr wrote:
> Yeah,Dealing with and template formatting that does not affect the output
> is a very difficult problem. I think I implemented <\\>. can you try that?
> Ter
> 
> On Nov 11, 2010, at 8:22 AM, Paul Giblock wrote:
> > Terrance,
> > 
> > I'm wondering if there is a standard way to do a line-continuation (like
> > \ in C)  In my situation, we have a template we want auto-wrapped at 65
> > characters. This is great for splitting long lines, but it does not work
> > for joining lines that "shrink" after performing substitutions.
> > 
> > In the meantime, I need to write each "paragraph" as a single long line
> > in the template file.
> > 
> > Thanks for the great work!
> > 
> > Paul
> > _______________________________________________
> > stringtemplate-interest mailing list
> > stringtemplate-interest at antlr.org
> > http://www.antlr.org/mailman/listinfo/stringtemplate-interest

From s450r1 at gmail.com  Mon Nov 15 09:11:33 2010
From: s450r1 at gmail.com (Jeff Dik)
Date: Mon, 15 Nov 2010 12:11:33 -0500
Subject: [stringtemplate-interest] C# StringTemplate version
Message-ID: <AANLkTik6x4XmxhcEDY66630wEHScYxBTSYTkJwanjtMw@mail.gmail.com>

Hi,

On http://www.stringtemplate.org/download.html, there are two C#
ports.  Is either the "official" C# port, or is there no such thing?
I'm unfortunately stuck on the .NET Framework 1.1, so I'm currently
working with the 3.1beta binaries for .NET 1.1 because the 3.2
binaries are for .NET 2.0.  Would it be possible to get the source for
3.2 so I could compile it for .NET 1.1?

Thanks,
Jeff

From sharwell at pixelminegames.com  Mon Nov 15 13:54:38 2010
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Mon, 15 Nov 2010 15:54:38 -0600
Subject: [stringtemplate-interest] C# StringTemplate version
In-Reply-To: <AANLkTik6x4XmxhcEDY66630wEHScYxBTSYTkJwanjtMw@mail.gmail.com>
References: <AANLkTik6x4XmxhcEDY66630wEHScYxBTSYTkJwanjtMw@mail.gmail.com>
Message-ID: <003901cb850f$b3979310$1ac6b930$@pixelminegames.com>

Hi Jeff,

The C# port of StringTemplate 3.2 is very heavily dependent on .NET 3.5
features. I don't think there would be any practical way to convert it to
.NET 2.0, much less 1.1.

I haven't done any work with the other ST 3.1 port, so I'm not sure how
difficult it would be to work with.

Thank you,
Sam Harwell

-----Original Message-----
From: stringtemplate-interest-bounces at antlr.org
[mailto:stringtemplate-interest-bounces at antlr.org] On Behalf Of Jeff Dik
Sent: Monday, November 15, 2010 11:12 AM
To: stringtemplate-interest at antlr.org
Subject: [stringtemplate-interest] C# StringTemplate version

Hi,

On http://www.stringtemplate.org/download.html, there are two C# ports.  Is
either the "official" C# port, or is there no such thing?
I'm unfortunately stuck on the .NET Framework 1.1, so I'm currently working
with the 3.1beta binaries for .NET 1.1 because the 3.2 binaries are for .NET
2.0.  Would it be possible to get the source for
3.2 so I could compile it for .NET 1.1?

Thanks,
Jeff
_______________________________________________
stringtemplate-interest mailing list
stringtemplate-interest at antlr.org
http://www.antlr.org/mailman/listinfo/stringtemplate-interest


From bradhakrishnan at informatica.com  Mon Nov 15 20:39:03 2010
From: bradhakrishnan at informatica.com (V.Radhakrishnan, Bhavana)
Date: Tue, 16 Nov 2010 10:09:03 +0530
Subject: [stringtemplate-interest] problem parsing template 'XXXX' ;
	java.lang.NullPointerException  happening randomly only on AIX
Message-ID: <87EA894A5B5DFD48A11E5D8A293D8A018CAC9A@IN23EXVCL01.informatica.com>

HI,

 

We have a codegenerator that uses String templates.

This codegenerator runs on a number of platforms including win 64, win
86, linux 64,86, AIX, HP-UX, Solaris.

 

The code generator works fine on all the platforms except for AIX. 

In AIX we get random failures in String templates.  The failures are
random in the following sense

 

1. These failures do not happen consistently. The codegeneration in AIX
is successful at times.

2. The failures do not happen at the same place every time. They happen
at different places for different reasons. But in most of the cases when
it is trying to the perform loadTemplateGroup

 

I have copy/pasted a few failures below. 

 

Failure Type 1:

 

Can't parse chunk: class.classKind

line 1:16: unexpected token: null

            at
org.antlr.stringtemplate.language.ActionParser.parallelArrayTemplateAppl
ication(ActionParser.java:498)

            at
org.antlr.stringtemplate.language.ActionParser.templatesExpr(ActionParse
r.java:207)

            at
org.antlr.stringtemplate.language.ActionParser.action(ActionParser.java:
126)

            at
org.antlr.stringtemplate.StringTemplate.parseAction(StringTemplate.java:
876)

            at
org.antlr.stringtemplate.language.TemplateParser.action(TemplateParser.j
ava:162)

            at
org.antlr.stringtemplate.language.TemplateParser.template(TemplateParser
.java:127)

            at
org.antlr.stringtemplate.StringTemplate.breakTemplateIntoChunks(StringTe
mplate.java:850)

            at
org.antlr.stringtemplate.StringTemplate.setTemplate(StringTemplate.java:
441)

            at
org.antlr.stringtemplate.language.GroupParser.template(GroupParser.java:
327)

            at
org.antlr.stringtemplate.language.GroupParser.group(GroupParser.java:186
)

            at
org.antlr.stringtemplate.StringTemplateGroup.parseGroup(StringTemplateGr
oup.java:792)

            at
org.antlr.stringtemplate.StringTemplateGroup.<init>(StringTemplateGroup.
java:274)

            at
org.antlr.stringtemplate.StringTemplateGroup.<init>(StringTemplateGroup.
java:248)

            at
com.informatica.imf.templateControllerUtils.ResourceLoad.loadTemplateGro
up(ResourceLoad.java:17)

            at
com.informatica.imf.templategen.shared.TemplateGenPackageUtil.getInitIPr
opertyMethod(TemplateGenPackageUtil.java:193)

            at
com.informatica.imf.templateControllers.JavaPackageClass.generate(JavaPa
ckageClass.java:165)

            .....

problem parsing template 'Init_IClass_Method'

java.lang.NullPointerException

            at
org.antlr.stringtemplate.language.TemplateParser.action(TemplateParser.j
ava:163)

            at
org.antlr.stringtemplate.language.TemplateParser.template(TemplateParser
.java:127)

            at
org.antlr.stringtemplate.StringTemplate.breakTemplateIntoChunks(StringTe
mplate.java:850)

            at
org.antlr.stringtemplate.StringTemplate.setTemplate(StringTemplate.java:
441)

            at
org.antlr.stringtemplate.language.GroupParser.template(GroupParser.java:
327)

            at
org.antlr.stringtemplate.language.GroupParser.group(GroupParser.java:186
)

            at
org.antlr.stringtemplate.StringTemplateGroup.parseGroup(StringTemplateGr
oup.java:792)

            at
org.antlr.stringtemplate.StringTemplateGroup.<init>(StringTemplateGroup.
java:274)

            at
org.antlr.stringtemplate.StringTemplateGroup.<init>(StringTemplateGroup.
java:248)

            at
com.informatica.imf.templateControllerUtils.ResourceLoad.loadTemplateGro
up(ResourceLoad.java:17)

            at
com.informatica.imf.templategen.shared.TemplateGenPackageUtil.getInitIPr
opertyMethod(TemplateGenPackageUtil.java:193)

            at
com.informatica.imf.templateControllers.JavaPackageClass.generate(JavaPa
ckageClass.java:165)

            .......

 

Failure Type 2

 

Can't parse chunk: if(propertyArgument.isContainer)

line 1:32: unexpected token: )

            at
org.antlr.stringtemplate.language.ActionParser.parallelArrayTemplateAppl
ication(ActionParser.java:498)

            at
org.antlr.stringtemplate.language.ActionParser.templatesExpr(ActionParse
r.java:207)

            at
org.antlr.stringtemplate.language.ActionParser.ifAtom(ActionParser.java:
664)

            at
org.antlr.stringtemplate.language.ActionParser.ifCondition(ActionParser.
java:335)

            at
org.antlr.stringtemplate.language.ActionParser.action(ActionParser.java:
157)

            at
org.antlr.stringtemplate.StringTemplate.parseAction(StringTemplate.java:
876)

            at
org.antlr.stringtemplate.language.TemplateParser.action(TemplateParser.j
ava:173)

            at
org.antlr.stringtemplate.language.TemplateParser.template(TemplateParser
.java:127)

            at
org.antlr.stringtemplate.StringTemplate.breakTemplateIntoChunks(StringTe
mplate.java:850)

            at
org.antlr.stringtemplate.StringTemplate.setTemplate(StringTemplate.java:
441)

            at
org.antlr.stringtemplate.language.GroupParser.template(GroupParser.java:
327)

            at
org.antlr.stringtemplate.language.GroupParser.group(GroupParser.java:186
)

            at
org.antlr.stringtemplate.StringTemplateGroup.parseGroup(StringTemplateGr
oup.java:792)

            at
org.antlr.stringtemplate.StringTemplateGroup.<init>(StringTemplateGroup.
java:274)

            at
org.antlr.stringtemplate.StringTemplateGroup.<init>(StringTemplateGroup.
java:248)

            at
com.informatica.imf.templateControllerUtils.ResourceLoad.loadTemplateGro
up(ResourceLoad.java:17)

            at
com.informatica.imf.templateControllers.JavaClass.generate(JavaClass.jav
a:45)

 

 

We are not sure why this random failure happens only on AIX.  Can
someone please give any pointers to what could be the potential issue?

 

 

We are blocked on this for quite some time and it would be very helpful
if someone can reply to this at the earliest.

 

Thanks for taking the time!

 

 

Regards,

Bhavana

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20101116/71ccde6a/attachment-0001.html 

From parrt at cs.usfca.edu  Tue Nov 16 09:44:24 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 16 Nov 2010 09:44:24 -0800
Subject: [stringtemplate-interest] problem parsing template 'XXXX' ;
	java.lang.NullPointerException  happening randomly only on AIX
In-Reply-To: <87EA894A5B5DFD48A11E5D8A293D8A018CAC9A@IN23EXVCL01.informatica.com>
References: <87EA894A5B5DFD48A11E5D8A293D8A018CAC9A@IN23EXVCL01.informatica.com>
Message-ID: <DD149CB7-8432-4DE6-BBCB-51FD2FA6E67D@cs.usfca.edu>

Seems likely to be an AIX Java impl bug or that on, AIX, your data is diff and so it passes in null data to ST.
Ter
On Nov 15, 2010, at 8:39 PM, V.Radhakrishnan, Bhavana wrote:

> HI,
>  
> We have a codegenerator that uses String templates.
> This codegenerator runs on a number of platforms including win 64, win 86, linux 64,86, AIX, HP-UX, Solaris.
>  
> The code generator works fine on all the platforms except for AIX.
> In AIX we get random failures in String templates.  The failures are random in the following sense
>  
> 1. These failures do not happen consistently. The codegeneration in AIX  is successful at times.
> 2. The failures do not happen at the same place every time. They happen at different places for different reasons. But in most of the cases when it is trying to the perform loadTemplateGroup
>  
> I have copy/pasted a few failures below.
>  
> Failure Type 1:
>  
> Can't parse chunk: class.classKind
> line 1:16: unexpected token: null
>             at org.antlr.stringtemplate.language.ActionParser.parallelArrayTemplateApplication(ActionParser.java:498)
>             at org.antlr.stringtemplate.language.ActionParser.templatesExpr(ActionParser.java:207)
>             at org.antlr.stringtemplate.language.ActionParser.action(ActionParser.java:126)
>             at org.antlr.stringtemplate.StringTemplate.parseAction(StringTemplate.java:876)
>             at org.antlr.stringtemplate.language.TemplateParser.action(TemplateParser.java:162)
>             at org.antlr.stringtemplate.language.TemplateParser.template(TemplateParser.java:127)
>             at org.antlr.stringtemplate.StringTemplate.breakTemplateIntoChunks(StringTemplate.java:850)
>             at org.antlr.stringtemplate.StringTemplate.setTemplate(StringTemplate.java:441)
>             at org.antlr.stringtemplate.language.GroupParser.template(GroupParser.java:327)
>             at org.antlr.stringtemplate.language.GroupParser.group(GroupParser.java:186)
>             at org.antlr.stringtemplate.StringTemplateGroup.parseGroup(StringTemplateGroup.java:792)
>             at org.antlr.stringtemplate.StringTemplateGroup.<init>(StringTemplateGroup.java:274)
>             at org.antlr.stringtemplate.StringTemplateGroup.<init>(StringTemplateGroup.java:248)
>             at com.informatica.imf.templateControllerUtils.ResourceLoad.loadTemplateGroup(ResourceLoad.java:17)
>             at com.informatica.imf.templategen.shared.TemplateGenPackageUtil.getInitIPropertyMethod(TemplateGenPackageUtil.java:193)
>             at com.informatica.imf.templateControllers.JavaPackageClass.generate(JavaPackageClass.java:165)
>             ?..
> problem parsing template 'Init_IClass_Method'
> java.lang.NullPointerException
>             at org.antlr.stringtemplate.language.TemplateParser.action(TemplateParser.java:163)
>             at org.antlr.stringtemplate.language.TemplateParser.template(TemplateParser.java:127)
>             at org.antlr.stringtemplate.StringTemplate.breakTemplateIntoChunks(StringTemplate.java:850)
>             at org.antlr.stringtemplate.StringTemplate.setTemplate(StringTemplate.java:441)
>             at org.antlr.stringtemplate.language.GroupParser.template(GroupParser.java:327)
>             at org.antlr.stringtemplate.language.GroupParser.group(GroupParser.java:186)
>             at org.antlr.stringtemplate.StringTemplateGroup.parseGroup(StringTemplateGroup.java:792)
>             at org.antlr.stringtemplate.StringTemplateGroup.<init>(StringTemplateGroup.java:274)
>             at org.antlr.stringtemplate.StringTemplateGroup.<init>(StringTemplateGroup.java:248)
>             at com.informatica.imf.templateControllerUtils.ResourceLoad.loadTemplateGroup(ResourceLoad.java:17)
>             at com.informatica.imf.templategen.shared.TemplateGenPackageUtil.getInitIPropertyMethod(TemplateGenPackageUtil.java:193)
>             at com.informatica.imf.templateControllers.JavaPackageClass.generate(JavaPackageClass.java:165)
>             ??.
>  
> Failure Type 2
>  
> Can't parse chunk: if(propertyArgument.isContainer)
> line 1:32: unexpected token: )
>             at org.antlr.stringtemplate.language.ActionParser.parallelArrayTemplateApplication(ActionParser.java:498)
>             at org.antlr.stringtemplate.language.ActionParser.templatesExpr(ActionParser.java:207)
>             at org.antlr.stringtemplate.language.ActionParser.ifAtom(ActionParser.java:664)
>             at org.antlr.stringtemplate.language.ActionParser.ifCondition(ActionParser.java:335)
>             at org.antlr.stringtemplate.language.ActionParser.action(ActionParser.java:157)
>             at org.antlr.stringtemplate.StringTemplate.parseAction(StringTemplate.java:876)
>             at org.antlr.stringtemplate.language.TemplateParser.action(TemplateParser.java:173)
>             at org.antlr.stringtemplate.language.TemplateParser.template(TemplateParser.java:127)
>             at org.antlr.stringtemplate.StringTemplate.breakTemplateIntoChunks(StringTemplate.java:850)
>             at org.antlr.stringtemplate.StringTemplate.setTemplate(StringTemplate.java:441)
>             at org.antlr.stringtemplate.language.GroupParser.template(GroupParser.java:327)
>             at org.antlr.stringtemplate.language.GroupParser.group(GroupParser.java:186)
>             at org.antlr.stringtemplate.StringTemplateGroup.parseGroup(StringTemplateGroup.java:792)
>             at org.antlr.stringtemplate.StringTemplateGroup.<init>(StringTemplateGroup.java:274)
>             at org.antlr.stringtemplate.StringTemplateGroup.<init>(StringTemplateGroup.java:248)
>             at com.informatica.imf.templateControllerUtils.ResourceLoad.loadTemplateGroup(ResourceLoad.java:17)
>             at com.informatica.imf.templateControllers.JavaClass.generate(JavaClass.java:45)
>  
>  
> We are not sure why this random failure happens only on AIX.  Can someone please give any pointers to what could be the potential issue?
>  
>  
> We are blocked on this for quite some time and it would be very helpful if someone can reply to this at the earliest.
>  
> Thanks for taking the time!
>  
>  
> Regards,
> Bhavana
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/stringtemplate-interest


From satkinson at netflix.com  Tue Nov 16 13:30:59 2010
From: satkinson at netflix.com (Steven Atkinson)
Date: Tue, 16 Nov 2010 13:30:59 -0800
Subject: [stringtemplate-interest] Working Java 1.5 grammar?
Message-ID: <63B67E7680727F47B475AC6F576DB2C40EC07FBA@ExchMBX104.netflix.com>

Folks,

I'm trying to get a working Java 1.5 grammar and tree walker for source-to-source refactoring efforts at Netflix.

I've installed antlrWorks in IntelliJ, downloaded the Java.g from antlr.org, and even went hunting in openJDK sources for a working ANTLR v3 grammer for Java 1.5 or 1.6.

When I try putting the Java.g grammar from Yang Jiang<http://openjdk.java.net/projects/compiler-grammar/antlrworks/Java.g> (yang.jiang.z at gmail.com<mailto:yang.jiang.z at gmail.com>) through ANTLRWorks or on the command line I get the following error output

Any help is appreciated!

C:\Hack>java -jar antlr-3.2.jar Java.g
warning(209): Java.g:1783:1: Multiple token rules can match input such as "'-'": SUBSUB, SUB, SUBEQ

As a result, token(s) SUB,SUBEQ were disabled for that input
warning(209): Java.g:1827:1: Multiple token rules can match input such as "'c'": CASE, CATCH, CHAR, CLASS, CONST, CONTINUE, IDENTIFIER

As a result, token(s) CATCH,CHAR,CLASS,CONST,CONTINUE,IDENTIFIER were disabled for that input
warning(209): Java.g:1807:1: Multiple token rules can match input such as "'%'": PERCENT, PERCENTEQ

As a result, token(s) PERCENTEQ were disabled for that input
warning(209): Java.g:1827:1: Multiple token rules can match input such as "'t'": THIS, THROW, THROWS, TRANSIENT, TRY, TRUE, IDENTIFIER

As a result, token(s) THROW,THROWS,TRANSIENT,TRY,TRUE,IDENTIFIER were disabled for that input
warning(209): Java.g:1815:1: Multiple token rules can match input such as "'!'": BANG, BANGEQ

As a result, token(s) BANGEQ were disabled for that input
warning(209): Java.g:1827:1: Multiple token rules can match input such as "'w'": WHILE, IDENTIFIER

As a result, token(s) IDENTIFIER were disabled for that input
warning(209): Java.g:1779:1: Multiple token rules can match input such as "'+'": PLUSPLUS, PLUS, PLUSEQ

As a result, token(s) PLUS,PLUSEQ were disabled for that input
warning(209): Java.g:1370:1: Multiple token rules can match input such as "'1'..'9'": LONGLITERAL, INTLITERAL, FLOATLITERAL, DOUBLELITERAL

As a result, token(s) INTLITERAL,FLOATLITERAL,DOUBLELITERAL were disabled for that input
warning(209): Java.g:1803:1: Multiple token rules can match input such as "'^'": CARET, CARETEQ

As a result, token(s) CARETEQ were disabled for that input
warning(209): Java.g:1827:1: Multiple token rules can match input such as "'s'": SHORT, STATIC, STRICTFP, SUPER, SWITCH, SYNCHRONIZED, IDENTIFIER

As a result, token(s) STATIC,STRICTFP,SUPER,SWITCH,SYNCHRONIZED,IDENTIFIER were disabled for that input
warning(209): Java.g:1827:1: Multiple token rules can match input such as "'f'": FINAL, FINALLY, FLOAT, FOR, FALSE, IDENTIFIER

As a result, token(s) FINALLY,FLOAT,FOR,FALSE,IDENTIFIER were disabled for that input
warning(209): Java.g:1827:1: Multiple token rules can match input such as "'l'": LONG, IDENTIFIER

As a result, token(s) IDENTIFIER were disabled for that input
warning(209): Java.g:1827:1: Multiple token rules can match input such as "'v'": VOID, VOLATILE, IDENTIFIER

As a result, token(s) VOLATILE,IDENTIFIER were disabled for that input
warning(209): Java.g:1827:1: Multiple token rules can match input such as "'d'": DEFAULT, DO, DOUBLE, IDENTIFIER

As a result, token(s) DO,DOUBLE,IDENTIFIER were disabled for that input
warning(209): Java.g:1727:1: Multiple token rules can match input such as "'='": EQ, EQEQ

As a result, token(s) EQEQ were disabled for that input
warning(209): Java.g:1787:1: Multiple token rules can match input such as "'*'": STAR, STAREQ

As a result, token(s) STAREQ were disabled for that input
warning(209): Java.g:1827:1: Multiple token rules can match input such as "'e'": ELSE, ENUM, EXTENDS, IDENTIFIER

As a result, token(s) ENUM,EXTENDS,IDENTIFIER were disabled for that input
warning(209): Java.g:1791:1: Multiple token rules can match input such as "'/'": COMMENT, LINE_COMMENT, SLASH, SLASHEQ

As a result, token(s) LINE_COMMENT,SLASH,SLASHEQ were disabled for that input
warning(209): Java.g:1827:1: Multiple token rules can match input such as "'g'": GOTO, IDENTIFIER

As a result, token(s) IDENTIFIER were disabled for that input
warning(209): Java.g:1827:1: Multiple token rules can match input such as "'n'": NATIVE, NEW, NULL, IDENTIFIER

As a result, token(s) NEW,NULL,IDENTIFIER were disabled for that input
warning(209): Java.g:1799:1: Multiple token rules can match input such as "'|'": BARBAR, BAR, BAREQ

As a result, token(s) BAR,BAREQ were disabled for that input
warning(209): Java.g:1827:1: Multiple token rules can match input such as "'r'": RETURN, IDENTIFIER

As a result, token(s) IDENTIFIER were disabled for that input
warning(209): Java.g:1827:1: Multiple token rules can match input such as "'p'": PACKAGE, PRIVATE, PROTECTED, PUBLIC, IDENTIFIER

As a result, token(s) PRIVATE,PROTECTED,PUBLIC,IDENTIFIER were disabled for that input
warning(209): Java.g:1827:1: Multiple token rules can match input such as "'b'": BOOLEAN, BREAK, BYTE, IDENTIFIER

As a result, token(s) BREAK,BYTE,IDENTIFIER were disabled for that input
warning(209): Java.g:1370:1: Multiple token rules can match input such as "'0'": LONGLITERAL, INTLITERAL, FLOATLITERAL, DOUBLELITERAL

As a result, token(s) INTLITERAL,FLOATLITERAL,DOUBLELITERAL were disabled for that input
warning(209): Java.g:1827:1: Multiple token rules can match input such as "'a'": ABSTRACT, ASSERT, IDENTIFIER

As a result, token(s) ASSERT,IDENTIFIER were disabled for that input
warning(209): Java.g:1795:1: Multiple token rules can match input such as "'&'": AMPAMP, AMP, AMPEQ

As a result, token(s) AMP,AMPEQ were disabled for that input
warning(209): Java.g:1703:1: Multiple token rules can match input such as "'.'": FLOATLITERAL, DOUBLELITERAL, DOT, ELLIPSIS

As a result, token(s) DOUBLELITERAL,DOT,ELLIPSIS were disabled for that input
warning(209): Java.g:1827:1: Multiple token rules can match input such as "'i'": IF, IMPLEMENTS, IMPORT, INSTANCEOF, INT, INTERFACE, IDENTIFIER

As a result, token(s) IMPLEMENTS,IMPORT,INSTANCEOF,INT,INTERFACE,IDENTIFIER were disabled for that input
error(208): Java.g:1815:1: The following token definitions can never be matched because prior tokens match the same input: INTLITERAL,DOUBLELITERAL,LINE_COMMENT,ASSERT,BREAK,BYTE,CATCH,CHAR,CLASS,CONS
T,CONTINUE,DO,DOUBLE,ENUM,EXTENDS,FINALLY,FLOAT,FOR,IMPLEMENTS,IMPORT,INSTANCEOF,INT,INTERFACE,NEW,PRIVATE,PROTECTED,PUBLIC,STATIC,STRICTFP,SUPER,SWITCH,SYNCHRONIZED,THROW,THROWS,TRANSIENT,TRY,VOLATIL
E,TRUE,FALSE,NULL,DOT,ELLIPSIS,EQEQ,PLUS,SUB,SLASH,AMP,BAR,PLUSEQ,SUBEQ,STAREQ,SLASHEQ,AMPEQ,BAREQ,CARETEQ,PERCENTEQ,BANGEQ

C:\Hack>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20101116/12cd9c19/attachment.html 

From parrt at cs.usfca.edu  Wed Nov 17 09:57:27 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 17 Nov 2010 09:57:27 -0800
Subject: [stringtemplate-interest] Line continuation escape
In-Reply-To: <201011151035.23935.pgiblock@voicesheardmedia.com>
References: <201011111122.28191.pgiblock@voicesheardmedia.com>
	<20DC50BC-EE6B-4CF9-8699-04E231DFDFB4@cs.usfca.edu>
	<201011151035.23935.pgiblock@voicesheardmedia.com>
Message-ID: <B3C83E12-EE8B-41CD-B5FB-EA95DA76C635@cs.usfca.edu>

whoa. hmm...I see this in tests:

    public void testLineBreak() throws Exception {
        StringTemplate st = new StringTemplate(
                "Foo <\\\\>"+newline+
                "  \t  bar" +newline,
                AngleBracketTemplateLexer.class
                );
        StringWriter sw = new StringWriter();
        st.write(new AutoIndentWriter(sw,"\n")); // force \n as newline
        String result = sw.toString();
        String expecting ="Foo bar"+newline;     // expect \n in output
        assertEquals(expecting, result);
    }

    public void testLineBreak2() throws Exception {
        StringTemplate st = new StringTemplate(
                "Foo <\\\\>       "+newline+
                "  \t  bar" +newline,
                AngleBracketTemplateLexer.class
                );
        StringWriter sw = new StringWriter();
        st.write(new AutoIndentWriter(sw,"\n")); // force \n as newline
        String result = sw.toString();
        String expecting ="Foo bar"+newline;     // expect \n in output
        assertEquals(expecting, result);
    }

    public void testLineBreakNoWhiteSpace() throws Exception {
        StringTemplate st = new StringTemplate(
                "Foo <\\\\>"+newline+
                "bar" +newline,
                AngleBracketTemplateLexer.class
                );
        StringWriter sw = new StringWriter();
        st.write(new AutoIndentWriter(sw,"\n")); // force \n as newline
        String result = sw.toString();
        String expecting ="Foo bar"+newline;     // expect \n in output
        assertEquals(expecting, result);
    }

    public void testLineBreakDollar() throws Exception {
        StringTemplate st = new StringTemplate(
                "Foo $\\\\$"+newline+
                "  \t  bar" +newline,
                DefaultTemplateLexer.class
                );
        StringWriter sw = new StringWriter();
        st.write(new AutoIndentWriter(sw,"\n")); // force \n as newline
        String result = sw.toString();
        String expecting ="Foo bar"+newline;     // expect \n in output
        assertEquals(expecting, result);
    }

Can you derive from that?  Are you using latest ST?

Ter

From david.taille at logica.com  Wed Nov 17 12:58:58 2010
From: david.taille at logica.com (Taille, David)
Date: Wed, 17 Nov 2010 20:58:58 +0000
Subject: [stringtemplate-interest] StringTemplate and toplink using
	incompatible versions of antlr
In-Reply-To: <FD38932FF241BF45AB5B1E36F60E7864D039@se-ex024.groupinfra.com>
References: <FD38932FF241BF45AB5B1E36F60E7864D039@se-ex024.groupinfra.com>
Message-ID: <DF34CB6F-90F5-483A-8EC8-4E0E9B19E907@logica.com>

Hi all,

I'm considering using StringTemplate v3 within a JEE application to build mails and other human-readable pieces of text, but from within a business logic layer (as opposed to the presentation layer).
The app uses EJB for all non-presentation layers ; those that do database accesses use toplink 10, which internally uses antlr 2.7.2.

If I use StringTemplate (which uses antlr 2.7.7) in EJBs where toplink is not used, everything is ok -- EJB classloaders are setup in the appServer so that everyone sees the "right" antlr...

But if I try to use StringTemplate in a toplink-aware EJB, most time toplink's antlr get loaded first (due to the peculiars of our use cases), and I get errors when using StringTemplate because it doesn't see 2.7.7 antlr...
--> So I must be very very careful about where we'll use the templating engine.

(Of course, I'm not willing to upgrade toplink's antlr since I have no garantee this wouldn't break something somewhere)
(also, ditching toplink is not an option)

More over, we also have to "package" some parts of our app in a JSE context, where we don't have one classLoader per component (i.e. EJB).
Using StringTemplate v3 as is would not work properly in that case.

The bottom line is : I hesitate to opt for StringTemplate because of antlr conflicts issues.

I guess I could :
a) use a version of StringTemplate that is old enough to cope with antlr 2.7.2
     -- tried it, apparently works, but... sad to get stuck with an old lib!

b) wrap StringTemplate and antlr 2.7.7 in a small library we would write and use a custom class loader in there to explicitly pick the right antlr flavor
   -- quite an unusual piece of code in the middle of an otherwise "normal" application
   + raises deployment and configuration issues *or* leads to uncomfortable assumptions on where the right classes live

c) rebuild a version of StringTemplate where antlr 2.7.7 packages would be e.g. suffixed by "277" : antlr.* --> antlr277.*

Since antlr is quite a common framework, I thought perhaps my problem could be quite common also, which would --maybe ;-) -- let ST maintainers consider doing c) themselves, once for all of us ...
What do you think about that ? Am I way too demanding ;-) ?

Any other idea to help me keep off FreeMarker ?

Thanks for your time.
David



Think green - keep it on the screen.

This e-mail and any attachment is for authorised use by the intended recipient(s) only. It may contain proprietary material, confidential information and/or be subject to legal privilege. It should not be copied, disclosed to, retained or used by, any other party. If you are not an intended recipient then please promptly delete this e-mail and any attachment and all copies and inform the sender. Thank you.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20101117/6e50565a/attachment.html 

From jimi at temporal-wave.com  Wed Nov 17 14:28:29 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 17 Nov 2010 14:28:29 -0800
Subject: [stringtemplate-interest] StringTemplate and toplink
	using	incompatible versions of antlr
In-Reply-To: <DF34CB6F-90F5-483A-8EC8-4E0E9B19E907@logica.com>
References: <FD38932FF241BF45AB5B1E36F60E7864D039@se-ex024.groupinfra.com>
	<DF34CB6F-90F5-483A-8EC8-4E0E9B19E907@logica.com>
Message-ID: <03c301cb86a6$c2654160$472fc420$@temporal-wave.com>

Upgrade toplink is your best bet and the one most likely to work, or implore
the authors to do so, or download stringtemplate source and build it
yourself having changed dependencies (but that may not work).

 

Jim

 

From: stringtemplate-interest-bounces at antlr.org
[mailto:stringtemplate-interest-bounces at antlr.org] On Behalf Of Taille,
David
Sent: Wednesday, November 17, 2010 12:59 PM
Cc: stringtemplate-interest at antlr.org
Subject: Re: [stringtemplate-interest] StringTemplate and toplink using
incompatible versions of antlr

 

Hi all,

I'm considering using StringTemplate v3 within a JEE application to build
mails and other human-readable pieces of text, but from within a business
logic layer (as opposed to the presentation layer).
The app uses EJB for all non-presentation layers ; those that do database
accesses use toplink 10, which internally uses antlr 2.7.2.

If I use StringTemplate (which uses antlr 2.7.7) in EJBs where toplink is
not used, everything is ok -- EJB classloaders are setup in the appServer so
that everyone sees the "right" antlr...

But if I try to use StringTemplate in a toplink-aware EJB, most time
toplink's antlr get loaded first (due to the peculiars of our use cases),
and I get errors when using StringTemplate because it doesn't see 2.7.7
antlr...
--> So I must be very very careful about where we'll use the templating
engine.

(Of course, I'm not willing to upgrade toplink's antlr since I have no
garantee this wouldn't break something somewhere)
(also, ditching toplink is not an option)

More over, we also have to "package" some parts of our app in a JSE context,
where we don't have one classLoader per component (i.e. EJB).
Using StringTemplate v3 as is would not work properly in that case.

The bottom line is : I hesitate to opt for StringTemplate because of antlr
conflicts issues.

I guess I could :
a) use a version of StringTemplate that is old enough to cope with antlr
2.7.2
     -- tried it, apparently works, but... sad to get stuck with an old lib!

b) wrap StringTemplate and antlr 2.7.7 in a small library we would write and
use a custom class loader in there to explicitly pick the right antlr flavor
   -- quite an unusual piece of code in the middle of an otherwise "normal"
application
   + raises deployment and configuration issues *or* leads to uncomfortable
assumptions on where the right classes live

c) rebuild a version of StringTemplate where antlr 2.7.7 packages would be
e.g. suffixed by "277" : antlr.* --> antlr277.*

Since antlr is quite a common framework, I thought perhaps my problem could
be quite common also, which would --maybe ;-) -- let ST maintainers consider
doing c) themselves, once for all of us ...
What do you think about that ? Am I way too demanding ;-) ?

Any other idea to help me keep off FreeMarker ?

Thanks for your time.
David






Think green - keep it on the screen. This e-mail and any attachment is for
authorised use by the intended recipient(s) only. It may contain proprietary
material, confidential information and/or be subject to legal privilege. It
should not be copied, disclosed to, retained or used by, any other party. If
you are not an intended recipient then please promptly delete this e-mail
and any attachment and all copies and inform the sender. Thank you. 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20101117/e4bfa6c1/attachment.html 

From mortenoh at gmail.com  Wed Nov 17 16:10:08 2010
From: mortenoh at gmail.com (Morten Olav Hansen)
Date: Thu, 18 Nov 2010 01:10:08 +0100
Subject: [stringtemplate-interest] Creating new attributes?
Message-ID: <AANLkTi=GH7qd7X-ppBECcuwchcdS+EPVNn1k+1TsVJWO@mail.gmail.com>

Hi

I'm having a problem with my iterators (related to my problem in the
mail before). It seems that I can't use it/i/i0 as a parameter when I
have two levels of iterators, and I want to use information from the
outer iteration in the inner iteration (it and i0 in my case). They
seem to be evaluated by name, rather than value, and the value of
it/i/i0 has of course changed in the inner iterator.

Is it possible in StringTemplate to assign these attributes to a new
attribute? So I send send this one instead.

Regards,
Morten

From parrt at cs.usfca.edu  Wed Nov 17 16:52:31 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 17 Nov 2010 16:52:31 -0800
Subject: [stringtemplate-interest] Creating new attributes?
In-Reply-To: <AANLkTi=GH7qd7X-ppBECcuwchcdS+EPVNn1k+1TsVJWO@mail.gmail.com>
References: <AANLkTi=GH7qd7X-ppBECcuwchcdS+EPVNn1k+1TsVJWO@mail.gmail.com>
Message-ID: <847F8FB1-0655-47FF-A496-1597C279DBEC@cs.usfca.edu>

Hi. Try passing i/i0/it as a parameter with different name to new template to rename them.
Ter
On Nov 17, 2010, at 4:10 PM, Morten Olav Hansen wrote:

> Hi
> 
> I'm having a problem with my iterators (related to my problem in the
> mail before). It seems that I can't use it/i/i0 as a parameter when I
> have two levels of iterators, and I want to use information from the
> outer iteration in the inner iteration (it and i0 in my case). They
> seem to be evaluated by name, rather than value, and the value of
> it/i/i0 has of course changed in the inner iterator.
> 
> Is it possible in StringTemplate to assign these attributes to a new
> attribute? So I send send this one instead.
> 
> Regards,
> Morten
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/stringtemplate-interest


From mortenoh at gmail.com  Wed Nov 17 17:11:27 2010
From: mortenoh at gmail.com (Morten Olav Hansen)
Date: Thu, 18 Nov 2010 02:11:27 +0100
Subject: [stringtemplate-interest] Creating new attributes?
In-Reply-To: <847F8FB1-0655-47FF-A496-1597C279DBEC@cs.usfca.edu>
References: <AANLkTi=GH7qd7X-ppBECcuwchcdS+EPVNn1k+1TsVJWO@mail.gmail.com>
	<847F8FB1-0655-47FF-A496-1597C279DBEC@cs.usfca.edu>
Message-ID: <AANLkTi=FqraPh8RTOVTyFm_0dc2Bou3cX3-c+JBzkrPP@mail.gmail.com>

Yes, thats what I'm already doing.

statemachine(regions) ::= <<
<regions: region_n(); separator="\n\n">
>>

region_n() ::= <<
Region region<i0>;
<it.states: state_n(i0); separator="\n">
>>

state_n(rid) ::= <<
State state_<it.id>_<rid>;
>>

region(id, states, transitions) ::= << >>
state(id) ::= << >>
transition(from, to) ::= << >>

For the first region i0 is 0, and the state_n also receives 0 (rid =
0). If there is another region, i0 is 1, and state_n should now get
rid = 1, but it still evaluates to 0.

So it seems to be taking the value of i0 inside state_n (which is of
course 0 if there there is only one state). Thats why I was hoping to
somehow force evaluation of i0 in region_n.

Regards,
Morten

On Thu, Nov 18, 2010 at 1:52 AM, Terence Parr <parrt at cs.usfca.edu> wrote:
> Hi. Try passing i/i0/it as a parameter with different name to new template to rename them.
> Ter
> On Nov 17, 2010, at 4:10 PM, Morten Olav Hansen wrote:
>
>> Hi
>>
>> I'm having a problem with my iterators (related to my problem in the
>> mail before). It seems that I can't use it/i/i0 as a parameter when I
>> have two levels of iterators, and I want to use information from the
>> outer iteration in the inner iteration (it and i0 in my case). They
>> seem to be evaluated by name, rather than value, and the value of
>> it/i/i0 has of course changed in the inner iterator.
>>
>> Is it possible in StringTemplate to assign these attributes to a new
>> attribute? So I send send this one instead.
>>
>> Regards,
>> Morten
>> _______________________________________________
>> stringtemplate-interest mailing list
>> stringtemplate-interest at antlr.org
>> http://www.antlr.org/mailman/listinfo/stringtemplate-interest
>
>

From parrt at cs.usfca.edu  Wed Nov 17 18:37:25 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 17 Nov 2010 18:37:25 -0800
Subject: [stringtemplate-interest] Creating new attributes?
In-Reply-To: <AANLkTi=FqraPh8RTOVTyFm_0dc2Bou3cX3-c+JBzkrPP@mail.gmail.com>
References: <AANLkTi=GH7qd7X-ppBECcuwchcdS+EPVNn1k+1TsVJWO@mail.gmail.com>
	<847F8FB1-0655-47FF-A496-1597C279DBEC@cs.usfca.edu>
	<AANLkTi=FqraPh8RTOVTyFm_0dc2Bou3cX3-c+JBzkrPP@mail.gmail.com>
Message-ID: <B78BB1E8-E0CC-4EB4-ADDB-ACD0A73F4012@cs.usfca.edu>

Oh. don't forget that i0 in <it.states: state_n(i0); separator="\n"> is redefining i0 since it's a template application.  i0 in that context is 0 then 1 etc... even when i0 comes in as 2342 from <regions: region_n(); separator="\n\n">
Ter
On Nov 17, 2010, at 5:11 PM, Morten Olav Hansen wrote:

> Yes, thats what I'm already doing.
> 
> statemachine(regions) ::= <<
> <regions: region_n(); separator="\n\n">
>>> 
> 
> region_n() ::= <<
> Region region<i0>;
> <it.states: state_n(i0); separator="\n">
>>> 
> 
> state_n(rid) ::= <<
> State state_<it.id>_<rid>;
>>> 
> 
> region(id, states, transitions) ::= << >>
> state(id) ::= << >>
> transition(from, to) ::= << >>
> 
> For the first region i0 is 0, and the state_n also receives 0 (rid =
> 0). If there is another region, i0 is 1, and state_n should now get
> rid = 1, but it still evaluates to 0.
> 
> So it seems to be taking the value of i0 inside state_n (which is of
> course 0 if there there is only one state). Thats why I was hoping to
> somehow force evaluation of i0 in region_n.
> 
> Regards,
> Morten
> 
> On Thu, Nov 18, 2010 at 1:52 AM, Terence Parr <parrt at cs.usfca.edu> wrote:
>> Hi. Try passing i/i0/it as a parameter with different name to new template to rename them.
>> Ter
>> On Nov 17, 2010, at 4:10 PM, Morten Olav Hansen wrote:
>> 
>>> Hi
>>> 
>>> I'm having a problem with my iterators (related to my problem in the
>>> mail before). It seems that I can't use it/i/i0 as a parameter when I
>>> have two levels of iterators, and I want to use information from the
>>> outer iteration in the inner iteration (it and i0 in my case). They
>>> seem to be evaluated by name, rather than value, and the value of
>>> it/i/i0 has of course changed in the inner iterator.
>>> 
>>> Is it possible in StringTemplate to assign these attributes to a new
>>> attribute? So I send send this one instead.
>>> 
>>> Regards,
>>> Morten
>>> _______________________________________________
>>> stringtemplate-interest mailing list
>>> stringtemplate-interest at antlr.org
>>> http://www.antlr.org/mailman/listinfo/stringtemplate-interest
>> 
>> 


From mortenoh at gmail.com  Wed Nov 17 20:13:58 2010
From: mortenoh at gmail.com (Morten Olav Hansen)
Date: Thu, 18 Nov 2010 05:13:58 +0100
Subject: [stringtemplate-interest] Creating new attributes?
In-Reply-To: <B78BB1E8-E0CC-4EB4-ADDB-ACD0A73F4012@cs.usfca.edu>
References: <AANLkTi=GH7qd7X-ppBECcuwchcdS+EPVNn1k+1TsVJWO@mail.gmail.com>
	<847F8FB1-0655-47FF-A496-1597C279DBEC@cs.usfca.edu>
	<AANLkTi=FqraPh8RTOVTyFm_0dc2Bou3cX3-c+JBzkrPP@mail.gmail.com>
	<B78BB1E8-E0CC-4EB4-ADDB-ACD0A73F4012@cs.usfca.edu>
Message-ID: <AANLkTi=bKjR6dkSq9o_8ujDfjUcM3T2JNWzRG3Mwvs6z@mail.gmail.com>

Ah, ok.. that makes sense. So is it possible to assign this attribute
to something else before entering the iteration-loop? or do you have
an idea of a workaround?

Regards,
Morten

On Thu, Nov 18, 2010 at 3:37 AM, Terence Parr <parrt at cs.usfca.edu> wrote:
> Oh. don't forget that i0 in <it.states: state_n(i0); separator="\n"> is redefining i0 since it's a template application. ?i0 in that context is 0 then 1 etc... even when i0 comes in as 2342 from <regions: region_n(); separator="\n\n">
> Ter
> On Nov 17, 2010, at 5:11 PM, Morten Olav Hansen wrote:
>
>> Yes, thats what I'm already doing.
>>
>> statemachine(regions) ::= <<
>> <regions: region_n(); separator="\n\n">
>>>>
>>
>> region_n() ::= <<
>> Region region<i0>;
>> <it.states: state_n(i0); separator="\n">
>>>>
>>
>> state_n(rid) ::= <<
>> State state_<it.id>_<rid>;
>>>>
>>
>> region(id, states, transitions) ::= << >>
>> state(id) ::= << >>
>> transition(from, to) ::= << >>
>>
>> For the first region i0 is 0, and the state_n also receives 0 (rid =
>> 0). If there is another region, i0 is 1, and state_n should now get
>> rid = 1, but it still evaluates to 0.
>>
>> So it seems to be taking the value of i0 inside state_n (which is of
>> course 0 if there there is only one state). Thats why I was hoping to
>> somehow force evaluation of i0 in region_n.
>>
>> Regards,
>> Morten
>>
>> On Thu, Nov 18, 2010 at 1:52 AM, Terence Parr <parrt at cs.usfca.edu> wrote:
>>> Hi. Try passing i/i0/it as a parameter with different name to new template to rename them.
>>> Ter
>>> On Nov 17, 2010, at 4:10 PM, Morten Olav Hansen wrote:
>>>
>>>> Hi
>>>>
>>>> I'm having a problem with my iterators (related to my problem in the
>>>> mail before). It seems that I can't use it/i/i0 as a parameter when I
>>>> have two levels of iterators, and I want to use information from the
>>>> outer iteration in the inner iteration (it and i0 in my case). They
>>>> seem to be evaluated by name, rather than value, and the value of
>>>> it/i/i0 has of course changed in the inner iterator.
>>>>
>>>> Is it possible in StringTemplate to assign these attributes to a new
>>>> attribute? So I send send this one instead.
>>>>
>>>> Regards,
>>>> Morten
>>>> _______________________________________________
>>>> stringtemplate-interest mailing list
>>>> stringtemplate-interest at antlr.org
>>>> http://www.antlr.org/mailman/listinfo/stringtemplate-interest
>>>
>>>
>
>

From parrt at cs.usfca.edu  Thu Nov 18 11:03:28 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 18 Nov 2010 11:03:28 -0800
Subject: [stringtemplate-interest] Creating new attributes?
In-Reply-To: <AANLkTi=bKjR6dkSq9o_8ujDfjUcM3T2JNWzRG3Mwvs6z@mail.gmail.com>
References: <AANLkTi=GH7qd7X-ppBECcuwchcdS+EPVNn1k+1TsVJWO@mail.gmail.com>
	<847F8FB1-0655-47FF-A496-1597C279DBEC@cs.usfca.edu>
	<AANLkTi=FqraPh8RTOVTyFm_0dc2Bou3cX3-c+JBzkrPP@mail.gmail.com>
	<B78BB1E8-E0CC-4EB4-ADDB-ACD0A73F4012@cs.usfca.edu>
	<AANLkTi=bKjR6dkSq9o_8ujDfjUcM3T2JNWzRG3Mwvs6z@mail.gmail.com>
Message-ID: <9D25BEED-5AE1-4C8A-ABBC-920DE1DA8FDA@cs.usfca.edu>


On Nov 17, 2010, at 8:13 PM, Morten Olav Hansen wrote:

> Ah, ok.. that makes sense. So is it possible to assign this attribute
> to something else before entering the iteration-loop? or do you have
> an idea of a workaround?

Well, yeah, with another template def. ;)  Basically don't let i0 come into region_n as implicit i0.   try:

<regions:region_n(j=i0)>

wait. j won't  iterate as arg. try

<regions:{ r | <region_n(reg=r,j=i0)>}>

then def reg, j in region_n

T






From mortenoh at gmail.com  Thu Nov 18 12:47:37 2010
From: mortenoh at gmail.com (Morten Olav Hansen)
Date: Thu, 18 Nov 2010 21:47:37 +0100
Subject: [stringtemplate-interest] Creating new attributes?
In-Reply-To: <9D25BEED-5AE1-4C8A-ABBC-920DE1DA8FDA@cs.usfca.edu>
References: <AANLkTi=GH7qd7X-ppBECcuwchcdS+EPVNn1k+1TsVJWO@mail.gmail.com>
	<847F8FB1-0655-47FF-A496-1597C279DBEC@cs.usfca.edu>
	<AANLkTi=FqraPh8RTOVTyFm_0dc2Bou3cX3-c+JBzkrPP@mail.gmail.com>
	<B78BB1E8-E0CC-4EB4-ADDB-ACD0A73F4012@cs.usfca.edu>
	<AANLkTi=bKjR6dkSq9o_8ujDfjUcM3T2JNWzRG3Mwvs6z@mail.gmail.com>
	<9D25BEED-5AE1-4C8A-ABBC-920DE1DA8FDA@cs.usfca.edu>
Message-ID: <AANLkTimKua9E23mHiwZaR-fBqAcz5A2p1f5=8pw5mzMN@mail.gmail.com>

Ah, finally. Works like a charm. thanks!

--
Morten

On Thu, Nov 18, 2010 at 8:03 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
>
> On Nov 17, 2010, at 8:13 PM, Morten Olav Hansen wrote:
>
>> Ah, ok.. that makes sense. So is it possible to assign this attribute
>> to something else before entering the iteration-loop? or do you have
>> an idea of a workaround?
>
> Well, yeah, with another template def. ;) ?Basically don't let i0 come into region_n as implicit i0. ? try:
>
> <regions:region_n(j=i0)>
>
> wait. j won't ?iterate as arg. try
>
> <regions:{ r | <region_n(reg=r,j=i0)>}>
>
> then def reg, j in region_n
>
> T
>
>
>
>
>
>

From jonhansnilsson at hotmail.com  Sat Nov 20 22:08:48 2010
From: jonhansnilsson at hotmail.com (Jon Nilsson)
Date: Sun, 21 Nov 2010 07:08:48 +0100
Subject: [stringtemplate-interest] (no subject)
Message-ID: <SNT139-w61FBBC56A32B1A1AFBC997DA3C0@phx.gbl>


It looks like setAttribute() can handle only up to 5 arguments in StringTemplate C# 3.2.
It is causing a problem when I need to do the following:	rect.SetAttribute("rectangle.{arrayname, index, x, y, width, height}", "MyArray", 0, 100, 100, 32, 34);
What do you recommend?
According the the documentation: 	"The various overloads of the setAttribute() method can handle from 1 to 5 arguments. 	The C# version uses variable-length argument list (using params keyword)." 	http://www.stringtemplate.org/wiki/display/ST/Expressions

 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20101121/e34fe90b/attachment.html 

From parrt at cs.usfca.edu  Sun Nov 21 08:37:21 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 21 Nov 2010 08:37:21 -0800
Subject: [stringtemplate-interest] (no subject)
In-Reply-To: <SNT139-w61FBBC56A32B1A1AFBC997DA3C0@phx.gbl>
References: <SNT139-w61FBBC56A32B1A1AFBC997DA3C0@phx.gbl>
Message-ID: <30249948-1E81-4341-B5D5-CCD0AC552B70@cs.usfca.edu>

Hi Jon, probably time for a formal object def in the model.
Ter
On Nov 20, 2010, at 10:08 PM, Jon Nilsson wrote:

> It looks like setAttribute() can handle only up to 5 arguments in StringTemplate C# 3.2.
> 
> It is causing a problem when I need to do the following:
> 	rect.SetAttribute("rectangle.{arrayname, index, x, y, width, height}", "MyArray", 0, 100, 100, 32, 34);
> 
> What do you recommend?
> 
> According the the documentation: 
> 	"The various overloads of the setAttribute() method can handle from 1 to 5 arguments. 
> 	The C# version uses variable-length argument list (using params keyword)." 
> 	http://www.stringtemplate.org/wiki/display/ST/Expressions
> 
> 
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/stringtemplate-interest

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20101121/45532bbb/attachment.html 

From wakizashi at yandex.ru  Tue Nov 23 07:11:12 2010
From: wakizashi at yandex.ru (wakizashi)
Date: Tue, 23 Nov 2010 18:11:12 +0300
Subject: [stringtemplate-interest] How to get source code from FishEye2
	repository at Atlassian?
Message-ID: <718841290525072@web84.yandex.ru>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20101123/1c4710e5/attachment.html 

From parrt at cs.usfca.edu  Tue Nov 23 10:22:41 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 23 Nov 2010 10:22:41 -0800
Subject: [stringtemplate-interest] How to get source code from FishEye2
	repository at Atlassian?
In-Reply-To: <718841290525072@web84.yandex.ru>
References: <718841290525072@web84.yandex.ru>
Message-ID: <CA4F1772-5095-45A3-872E-8D21011DC6F3@cs.usfca.edu>

hi Alex, please try stringtemplate.org/depot

Ter
On Nov 23, 2010, at 7:11 AM, wakizashi wrote:

> Hi all,
>  
> Sorry for maybe stupid question... But I trying to get source tree of current StringTemplate, and only found the repository at https://fisheye2.atlassian.com/browse/antlrcs/
>  
> Unfortunately, don't know how to get the code from it - what this repo is? Not SVN, not GIT, what is it? And how to check-out from it?
> Not been able to find any guides, how to do that...
>  
> Could someone, please, give some hint - which client required to access repository?
>  
> Regards,
>   Alex
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/stringtemplate-interest


From bradhakrishnan at informatica.com  Wed Nov 24 00:59:01 2010
From: bradhakrishnan at informatica.com (V.Radhakrishnan, Bhavana)
Date: Wed, 24 Nov 2010 14:29:01 +0530
Subject: [stringtemplate-interest] FW:  problem parsing template 'XXXX' ;
	java.lang.NullPointerException  happening randomly only on AIX
Message-ID: <87EA894A5B5DFD48A11E5D8A293D8A01939CB0@IN23EXVCL01.informatica.com>


Hi Terrance,
Thanks for the reply..
I am sure that the data that is passed to the ST in Aix is the same
because as I mentioned in the previous mail, the code generation on AIX
succeeds at times.

Can you please explain how this could be an AIX Java impl bug. This
information will help me to ask for suggestions in the concerned forums.
If possible, can you please suggest an alternative or temporary fix for
this?
This has definitely become a blocking issue for us now.

Thanks for taking the time!

Regards,
Bhavana

-----Original Message-----
From: Terence Parr [mailto:parrt at cs.usfca.edu] 
Sent: Tuesday, November 16, 2010 11:14 PM
To: V.Radhakrishnan, Bhavana
Cc: stringtemplate-interest at antlr.org
Subject: Re: [stringtemplate-interest] problem parsing template 'XXXX' ;
java.lang.NullPointerException happening randomly only on AIX

Seems likely to be an AIX Java impl bug or that on, AIX, your data is
diff and so it passes in null data to ST.
Ter
On Nov 15, 2010, at 8:39 PM, V.Radhakrishnan, Bhavana wrote:

> HI,
>  
> We have a codegenerator that uses String templates.
> This codegenerator runs on a number of platforms including win 64, win
86, linux 64,86, AIX, HP-UX, Solaris.
>  
> The code generator works fine on all the platforms except for AIX.
> In AIX we get random failures in String templates.  The failures are
random in the following sense
>  
> 1. These failures do not happen consistently. The codegeneration in
AIX  is successful at times.
> 2. The failures do not happen at the same place every time. They
happen at different places for different reasons. But in most of the
cases when it is trying to the perform loadTemplateGroup
>  
> I have copy/pasted a few failures below.
>  
> Failure Type 1:
>  
> Can't parse chunk: class.classKind
> line 1:16: unexpected token: null
>             at
org.antlr.stringtemplate.language.ActionParser.parallelArrayTemplateAppl
ication(ActionParser.java:498)
>             at
org.antlr.stringtemplate.language.ActionParser.templatesExpr(ActionParse
r.java:207)
>             at
org.antlr.stringtemplate.language.ActionParser.action(ActionParser.java:
126)
>             at
org.antlr.stringtemplate.StringTemplate.parseAction(StringTemplate.java:
876)
>             at
org.antlr.stringtemplate.language.TemplateParser.action(TemplateParser.j
ava:162)
>             at
org.antlr.stringtemplate.language.TemplateParser.template(TemplateParser
.java:127)
>             at
org.antlr.stringtemplate.StringTemplate.breakTemplateIntoChunks(StringTe
mplate.java:850)
>             at
org.antlr.stringtemplate.StringTemplate.setTemplate(StringTemplate.java:
441)
>             at
org.antlr.stringtemplate.language.GroupParser.template(GroupParser.java:
327)
>             at
org.antlr.stringtemplate.language.GroupParser.group(GroupParser.java:186
)
>             at
org.antlr.stringtemplate.StringTemplateGroup.parseGroup(StringTemplateGr
oup.java:792)
>             at
org.antlr.stringtemplate.StringTemplateGroup.<init>(StringTemplateGroup.
java:274)
>             at
org.antlr.stringtemplate.StringTemplateGroup.<init>(StringTemplateGroup.
java:248)
>             at
com.informatica.imf.templateControllerUtils.ResourceLoad.loadTemplateGro
up(ResourceLoad.java:17)
>             at
com.informatica.imf.templategen.shared.TemplateGenPackageUtil.getInitIPr
opertyMethod(TemplateGenPackageUtil.java:193)
>             at
com.informatica.imf.templateControllers.JavaPackageClass.generate(JavaPa
ckageClass.java:165)
>             .....
> problem parsing template 'Init_IClass_Method'
> java.lang.NullPointerException
>             at
org.antlr.stringtemplate.language.TemplateParser.action(TemplateParser.j
ava:163)
>             at
org.antlr.stringtemplate.language.TemplateParser.template(TemplateParser
.java:127)
>             at
org.antlr.stringtemplate.StringTemplate.breakTemplateIntoChunks(StringTe
mplate.java:850)
>             at
org.antlr.stringtemplate.StringTemplate.setTemplate(StringTemplate.java:
441)
>             at
org.antlr.stringtemplate.language.GroupParser.template(GroupParser.java:
327)
>             at
org.antlr.stringtemplate.language.GroupParser.group(GroupParser.java:186
)
>             at
org.antlr.stringtemplate.StringTemplateGroup.parseGroup(StringTemplateGr
oup.java:792)
>             at
org.antlr.stringtemplate.StringTemplateGroup.<init>(StringTemplateGroup.
java:274)
>             at
org.antlr.stringtemplate.StringTemplateGroup.<init>(StringTemplateGroup.
java:248)
>             at
com.informatica.imf.templateControllerUtils.ResourceLoad.loadTemplateGro
up(ResourceLoad.java:17)
>             at
com.informatica.imf.templategen.shared.TemplateGenPackageUtil.getInitIPr
opertyMethod(TemplateGenPackageUtil.java:193)
>             at
com.informatica.imf.templateControllers.JavaPackageClass.generate(JavaPa
ckageClass.java:165)
>             .......
>  
> Failure Type 2
>  
> Can't parse chunk: if(propertyArgument.isContainer)
> line 1:32: unexpected token: )
>             at
org.antlr.stringtemplate.language.ActionParser.parallelArrayTemplateAppl
ication(ActionParser.java:498)
>             at
org.antlr.stringtemplate.language.ActionParser.templatesExpr(ActionParse
r.java:207)
>             at
org.antlr.stringtemplate.language.ActionParser.ifAtom(ActionParser.java:
664)
>             at
org.antlr.stringtemplate.language.ActionParser.ifCondition(ActionParser.
java:335)
>             at
org.antlr.stringtemplate.language.ActionParser.action(ActionParser.java:
157)
>             at
org.antlr.stringtemplate.StringTemplate.parseAction(StringTemplate.java:
876)
>             at
org.antlr.stringtemplate.language.TemplateParser.action(TemplateParser.j
ava:173)
>             at
org.antlr.stringtemplate.language.TemplateParser.template(TemplateParser
.java:127)
>             at
org.antlr.stringtemplate.StringTemplate.breakTemplateIntoChunks(StringTe
mplate.java:850)
>             at
org.antlr.stringtemplate.StringTemplate.setTemplate(StringTemplate.java:
441)
>             at
org.antlr.stringtemplate.language.GroupParser.template(GroupParser.java:
327)
>             at
org.antlr.stringtemplate.language.GroupParser.group(GroupParser.java:186
)
>             at
org.antlr.stringtemplate.StringTemplateGroup.parseGroup(StringTemplateGr
oup.java:792)
>             at
org.antlr.stringtemplate.StringTemplateGroup.<init>(StringTemplateGroup.
java:274)
>             at
org.antlr.stringtemplate.StringTemplateGroup.<init>(StringTemplateGroup.
java:248)
>             at
com.informatica.imf.templateControllerUtils.ResourceLoad.loadTemplateGro
up(ResourceLoad.java:17)
>             at
com.informatica.imf.templateControllers.JavaClass.generate(JavaClass.jav
a:45)
>  
>  
> We are not sure why this random failure happens only on AIX.  Can
someone please give any pointers to what could be the potential issue?
>  
>  
> We are blocked on this for quite some time and it would be very
helpful if someone can reply to this at the earliest.
>  
> Thanks for taking the time!
>  
>  
> Regards,
> Bhavana
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/stringtemplate-interest


From jimi at temporal-wave.com  Wed Nov 24 09:08:05 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 24 Nov 2010 09:08:05 -0800
Subject: [stringtemplate-interest] FW: problem parsing template 'XXXX' ;
	java.lang.NullPointerException  happening randomly only on AIX
In-Reply-To: <87EA894A5B5DFD48A11E5D8A293D8A01939CB0@IN23EXVCL01.informatica.com>
References: <87EA894A5B5DFD48A11E5D8A293D8A01939CB0@IN23EXVCL01.informatica.com>
Message-ID: <00e101cb8bfa$28b8ddc0$7a2a9940$@temporal-wave.com>

Your first port of call is to make sure that your AIX system is fully
patched (including the Java stuff) - fully as in the very latest patch
bundles and the latest JRE. Both AIX and HPUX JREs seem way to heavily tied
in to the operating system and I have experienced problems with both in the
past to such a degree that I made sure the C code generation was platform
independent so that I did not have to try and run ANTLR on HPUX (mainly) or
AIX. next, see if there is another option for the JRE and try that.

But perhaps first of all, make sure that you are not using some collection
class that almost always iterates in a manner that you have relied on but
occasionally does not. That can sometimes give you issues like this.

Jim

> -----Original Message-----
> From: stringtemplate-interest-bounces at antlr.org [mailto:stringtemplate-
> interest-bounces at antlr.org] On Behalf Of V.Radhakrishnan, Bhavana
> Sent: Wednesday, November 24, 2010 12:59 AM
> To: stringtemplate-interest at antlr.org
> Subject: [stringtemplate-interest] FW: problem parsing template 'XXXX'
> ; java.lang.NullPointerException happening randomly only on AIX
> 
> 
> Hi Terrance,
> Thanks for the reply..
> I am sure that the data that is passed to the ST in Aix is the same
> because as I mentioned in the previous mail, the code generation on AIX
> succeeds at times.
> 
> Can you please explain how this could be an AIX Java impl bug. This
> information will help me to ask for suggestions in the concerned
> forums.
> If possible, can you please suggest an alternative or temporary fix for
> this?
> This has definitely become a blocking issue for us now.
> 
> Thanks for taking the time!
> 
> Regards,
> Bhavana
> 
> -----Original Message-----
> From: Terence Parr [mailto:parrt at cs.usfca.edu]
> Sent: Tuesday, November 16, 2010 11:14 PM
> To: V.Radhakrishnan, Bhavana
> Cc: stringtemplate-interest at antlr.org
> Subject: Re: [stringtemplate-interest] problem parsing template 'XXXX'
> ; java.lang.NullPointerException happening randomly only on AIX
> 
> Seems likely to be an AIX Java impl bug or that on, AIX, your data is
> diff and so it passes in null data to ST.
> Ter
> On Nov 15, 2010, at 8:39 PM, V.Radhakrishnan, Bhavana wrote:
> 
> > HI,
> >
> > We have a codegenerator that uses String templates.
> > This codegenerator runs on a number of platforms including win 64,
> win
> 86, linux 64,86, AIX, HP-UX, Solaris.
> >
> > The code generator works fine on all the platforms except for AIX.
> > In AIX we get random failures in String templates.  The failures are
> random in the following sense
> >
> > 1. These failures do not happen consistently. The codegeneration in
> AIX  is successful at times.
> > 2. The failures do not happen at the same place every time. They
> happen at different places for different reasons. But in most of the
> cases when it is trying to the perform loadTemplateGroup
> >
> > I have copy/pasted a few failures below.
> >
> > Failure Type 1:
> >
> > Can't parse chunk: class.classKind
> > line 1:16: unexpected token: null
> >             at
> org.antlr.stringtemplate.language.ActionParser.parallelArrayTemplateApp
> l
> ication(ActionParser.java:498)
> >             at
> org.antlr.stringtemplate.language.ActionParser.templatesExpr(ActionPars
> e
> r.java:207)
> >             at
> org.antlr.stringtemplate.language.ActionParser.action(ActionParser.java
> :
> 126)
> >             at
> org.antlr.stringtemplate.StringTemplate.parseAction(StringTemplate.java
> :
> 876)
> >             at
> org.antlr.stringtemplate.language.TemplateParser.action(TemplateParser.
> j
> ava:162)
> >             at
> org.antlr.stringtemplate.language.TemplateParser.template(TemplateParse
> r
> .java:127)
> >             at
> org.antlr.stringtemplate.StringTemplate.breakTemplateIntoChunks(StringT
> e
> mplate.java:850)
> >             at
> org.antlr.stringtemplate.StringTemplate.setTemplate(StringTemplate.java
> :
> 441)
> >             at
> org.antlr.stringtemplate.language.GroupParser.template(GroupParser.java
> :
> 327)
> >             at
> org.antlr.stringtemplate.language.GroupParser.group(GroupParser.java:18
> 6
> )
> >             at
> org.antlr.stringtemplate.StringTemplateGroup.parseGroup(StringTemplateG
> r
> oup.java:792)
> >             at
> org.antlr.stringtemplate.StringTemplateGroup.<init>(StringTemplateGroup
> .
> java:274)
> >             at
> org.antlr.stringtemplate.StringTemplateGroup.<init>(StringTemplateGroup
> .
> java:248)
> >             at
> com.informatica.imf.templateControllerUtils.ResourceLoad.loadTemplateGr
> o
> up(ResourceLoad.java:17)
> >             at
> com.informatica.imf.templategen.shared.TemplateGenPackageUtil.getInitIP
> r
> opertyMethod(TemplateGenPackageUtil.java:193)
> >             at
> com.informatica.imf.templateControllers.JavaPackageClass.generate(JavaP
> a
> ckageClass.java:165)
> >             .....
> > problem parsing template 'Init_IClass_Method'
> > java.lang.NullPointerException
> >             at
> org.antlr.stringtemplate.language.TemplateParser.action(TemplateParser.
> j
> ava:163)
> >             at
> org.antlr.stringtemplate.language.TemplateParser.template(TemplateParse
> r
> .java:127)
> >             at
> org.antlr.stringtemplate.StringTemplate.breakTemplateIntoChunks(StringT
> e
> mplate.java:850)
> >             at
> org.antlr.stringtemplate.StringTemplate.setTemplate(StringTemplate.java
> :
> 441)
> >             at
> org.antlr.stringtemplate.language.GroupParser.template(GroupParser.java
> :
> 327)
> >             at
> org.antlr.stringtemplate.language.GroupParser.group(GroupParser.java:18
> 6
> )
> >             at
> org.antlr.stringtemplate.StringTemplateGroup.parseGroup(StringTemplateG
> r
> oup.java:792)
> >             at
> org.antlr.stringtemplate.StringTemplateGroup.<init>(StringTemplateGroup
> .
> java:274)
> >             at
> org.antlr.stringtemplate.StringTemplateGroup.<init>(StringTemplateGroup
> .
> java:248)
> >             at
> com.informatica.imf.templateControllerUtils.ResourceLoad.loadTemplateGr
> o
> up(ResourceLoad.java:17)
> >             at
> com.informatica.imf.templategen.shared.TemplateGenPackageUtil.getInitIP
> r
> opertyMethod(TemplateGenPackageUtil.java:193)
> >             at
> com.informatica.imf.templateControllers.JavaPackageClass.generate(JavaP
> a
> ckageClass.java:165)
> >             .......
> >
> > Failure Type 2
> >
> > Can't parse chunk: if(propertyArgument.isContainer) line 1:32:
> > unexpected token: )
> >             at
> org.antlr.stringtemplate.language.ActionParser.parallelArrayTemplateApp
> l
> ication(ActionParser.java:498)
> >             at
> org.antlr.stringtemplate.language.ActionParser.templatesExpr(ActionPars
> e
> r.java:207)
> >             at
> org.antlr.stringtemplate.language.ActionParser.ifAtom(ActionParser.java
> :
> 664)
> >             at
> org.antlr.stringtemplate.language.ActionParser.ifCondition(ActionParser
> .
> java:335)
> >             at
> org.antlr.stringtemplate.language.ActionParser.action(ActionParser.java
> :
> 157)
> >             at
> org.antlr.stringtemplate.StringTemplate.parseAction(StringTemplate.java
> :
> 876)
> >             at
> org.antlr.stringtemplate.language.TemplateParser.action(TemplateParser.
> j
> ava:173)
> >             at
> org.antlr.stringtemplate.language.TemplateParser.template(TemplateParse
> r
> .java:127)
> >             at
> org.antlr.stringtemplate.StringTemplate.breakTemplateIntoChunks(StringT
> e
> mplate.java:850)
> >             at
> org.antlr.stringtemplate.StringTemplate.setTemplate(StringTemplate.java
> :
> 441)
> >             at
> org.antlr.stringtemplate.language.GroupParser.template(GroupParser.java
> :
> 327)
> >             at
> org.antlr.stringtemplate.language.GroupParser.group(GroupParser.java:18
> 6
> )
> >             at
> org.antlr.stringtemplate.StringTemplateGroup.parseGroup(StringTemplateG
> r
> oup.java:792)
> >             at
> org.antlr.stringtemplate.StringTemplateGroup.<init>(StringTemplateGroup
> .
> java:274)
> >             at
> org.antlr.stringtemplate.StringTemplateGroup.<init>(StringTemplateGroup
> .
> java:248)
> >             at
> com.informatica.imf.templateControllerUtils.ResourceLoad.loadTemplateGr
> o
> up(ResourceLoad.java:17)
> >             at
> com.informatica.imf.templateControllers.JavaClass.generate(JavaClass.ja
> v
> a:45)
> >
> >
> > We are not sure why this random failure happens only on AIX.  Can
> someone please give any pointers to what could be the potential issue?
> >
> >
> > We are blocked on this for quite some time and it would be very
> helpful if someone can reply to this at the earliest.
> >
> > Thanks for taking the time!
> >
> >
> > Regards,
> > Bhavana
> > _______________________________________________
> > stringtemplate-interest mailing list
> > stringtemplate-interest at antlr.org
> > http://www.antlr.org/mailman/listinfo/stringtemplate-interest
> 
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/stringtemplate-interest


From jonhansnilsson at hotmail.com  Wed Nov 24 21:54:48 2010
From: jonhansnilsson at hotmail.com (Jon Nilsson)
Date: Thu, 25 Nov 2010 06:54:48 +0100
Subject: [stringtemplate-interest] (no subject)
In-Reply-To: <30249948-1E81-4341-B5D5-CCD0AC552B70@cs.usfca.edu>
References: <SNT139-w61FBBC56A32B1A1AFBC997DA3C0@phx.gbl>,
	<30249948-1E81-4341-B5D5-CCD0AC552B70@cs.usfca.edu>
Message-ID: <SNT139-w64E776BD5958A51D16118FDA200@phx.gbl>


Wow, quick reply. Thank you very much. But I'm not sure if I understood you correctly.

Did you mean 
1) formal object def in my rectangle template ?
or 
2) adding another setAttribute() that can take an arbitrary number of arguments in StringTemplate?

Jon

Subject: Re: [stringtemplate-interest] (no subject)
From: parrt at cs.usfca.edu
Date: Sun, 21 Nov 2010 08:37:21 -0800
CC: stringtemplate-interest at antlr.org
To: jonhansnilsson at hotmail.com



Hi Jon, probably time for a formal object def in the model.Ter
On Nov 20, 2010, at 10:08 PM, Jon Nilsson wrote:It looks like setAttribute() can handle only up to 5 arguments in StringTemplate C# 3.2.
It is causing a problem when I need to do the following:	rect.SetAttribute("rectangle.{arrayname, index, x, y, width, height}", "MyArray", 0, 100, 100, 32, 34);
What do you recommend?
According the the documentation: 	"The various overloads of the setAttribute() method can handle from 1 to 5 arguments. 	The C# version uses variable-length argument list (using params keyword)." 	http://www.stringtemplate.org/wiki/display/ST/Expressions

_______________________________________________
stringtemplate-interest mailing list
stringtemplate-interest at antlr.org
http://www.antlr.org/mailman/listinfo/stringtemplate-interest

 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20101125/246f95f9/attachment.html 

From jonhansnilsson at hotmail.com  Wed Nov 24 22:48:41 2010
From: jonhansnilsson at hotmail.com (Jon Nilsson)
Date: Thu, 25 Nov 2010 07:48:41 +0100
Subject: [stringtemplate-interest] <attribute.property> didn't look for a
 property in C# StringTemplate RE: (no subject)
In-Reply-To: <30249948-1E81-4341-B5D5-CCD0AC552B70@cs.usfca.edu>
References: <SNT139-w61FBBC56A32B1A1AFBC997DA3C0@phx.gbl>,
	<30249948-1E81-4341-B5D5-CCD0AC552B70@cs.usfca.edu>
Message-ID: <SNT139-W164AE8C694742BA2469ACDA200@phx.gbl>


Thank you, Ter, for suggestion:  time for a formal object def in the model. 
It worked great except:

<attribute.property> did *NOT* look for property of attribute as a property (C#) unlike what the cheat sheet said.
It did worked with getProperty() and a raw field.

Here is what the cheat sheet says: (http://www.antlr.org/wiki/display/ST/StringTemplate+cheat+sheet)

<attribute.property> 
 Looks for property of attribute as a property (C#), then accessor methods like getProperty() or isProperty(). If that fails, StringTemplate looks for a raw field of the attribute called property. Evaluates to the empty string if no such property is found. 


Subject: Re: [stringtemplate-interest] (no subject)
From: parrt at cs.usfca.edu
Date: Sun, 21 Nov 2010 08:37:21 -0800
CC: stringtemplate-interest at antlr.org
To: jonhansnilsson at hotmail.com



Hi Jon, probably time for a formal object def in the model.Ter
On Nov 20, 2010, at 10:08 PM, Jon Nilsson wrote:It looks like setAttribute() can handle only up to 5 arguments in StringTemplate C# 3.2.
It is causing a problem when I need to do the following:	rect.SetAttribute("rectangle.{arrayname, index, x, y, width, height}", "MyArray", 0, 100, 100, 32, 34);
What do you recommend?
According the the documentation: 	"The various overloads of the setAttribute() method can handle from 1 to 5 arguments. 	The C# version uses variable-length argument list (using params keyword)." 	http://www.stringtemplate.org/wiki/display/ST/Expressions

_______________________________________________
stringtemplate-interest mailing list
stringtemplate-interest at antlr.org
http://www.antlr.org/mailman/listinfo/stringtemplate-interest

 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20101125/a501fba5/attachment.html 

From felix.leipold at gmail.com  Thu Nov 25 04:59:41 2010
From: felix.leipold at gmail.com (Felix Leipold)
Date: Thu, 25 Nov 2010 12:59:41 +0000
Subject: [stringtemplate-interest] Problem with separator when using
	AttributeRenderer for Strings
Message-ID: <90E8EF57-E7D9-48C5-8AAD-81151051306B@gmail.com>

Hello,

The context of the problem is a bit special. I started using AttributeRenderers for Strings to enforce escaping rules of the target language, e.g. ">" to "&gt;" for html or "%" to "\%" for LaTeX. 

Now there is one quirk. StringTemplate also applies the AttributeRenderer registered for Strings to the separator string. As there is no expansion of templates happening inside the separator string I find this quite strange. To me the separator is just literal output. To illustrate my expectation I included a JUnit test, that depends only on StringTemplate and JUnit below.

Do you think my expectation is legitimate? 

Best regards,

Felix Leipold

------------------------------------------------------------------------------------------------
public class RendererTest {

   @Test
   public void testMe(){
       StringTemplate template = new StringTemplate("<h1>A list</h1>$items:{$it$};separator=\"<br/>\"$");

       List<String> items = asList("a + b > c", "c < a + b ");
       template.setAttribute("items", items);

       template.registerRenderer(String.class, new MyAttributeRenderer());

       assertEquals("<h1>A list</h1>a + b &gt; c&<br/>c &lt; a + b", template.toString());
	//fails, actual:   <h1>A list</h1>a + b &gt; c&lt;br/&gt;c &lt; a + b

   }


   private static class MyAttributeRenderer implements AttributeRenderer {
       public String toString(Object o) {
           return ((String)o).replaceAll("<", "&lt;").replaceAll(">", "&gt;");
       }

       public String toString(Object o, String s) {
           return toString(o);
       }
   }
}


From parrt at cs.usfca.edu  Thu Nov 25 11:23:02 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 25 Nov 2010 11:23:02 -0800
Subject: [stringtemplate-interest] <attribute.property> didn't look for
	a property in C# StringTemplate RE: (no subject)
In-Reply-To: <SNT139-W164AE8C694742BA2469ACDA200@phx.gbl>
References: <SNT139-w61FBBC56A32B1A1AFBC997DA3C0@phx.gbl>,
	<30249948-1E81-4341-B5D5-CCD0AC552B70@cs.usfca.edu>
	<SNT139-W164AE8C694742BA2469ACDA200@phx.gbl>
Message-ID: <89467BA0-A390-43C8-B030-0298D07B944E@cs.usfca.edu>

howdy. sorry about that. I'm not sure how C# treats props but in java it looks for the getter/isser then raw field.
Ter
On Nov 24, 2010, at 10:48 PM, Jon Nilsson wrote:

> Thank you, Ter, for suggestion: time for a formal object def in the model. 
> It worked great except:
> 
> <attribute.property> did *NOT* look for property of attribute as a property (C#) unlike what the cheat sheet said.
> It did worked with getProperty() and a raw field.
> 
> Here is what the cheat sheet says: (http://www.antlr.org/wiki/display/ST/StringTemplate+cheat+sheet)
> <attribute.property> Looks for property of attribute as a property (C#), then accessor methods like getProperty() or isProperty(). If that fails,StringTemplate looks for a raw field of the attribute called property. Evaluates to the empty string if no such property is found. 
> 
> 
> Subject: Re: [stringtemplate-interest] (no subject)
> From: parrt at cs.usfca.edu
> Date: Sun, 21 Nov 2010 08:37:21 -0800
> CC: stringtemplate-interest at antlr.org
> To: jonhansnilsson at hotmail.com
> 
> Hi Jon, probably time for a formal object def in the model.
> Ter
> On Nov 20, 2010, at 10:08 PM, Jon Nilsson wrote:
> 
> It looks like setAttribute() can handle only up to 5 arguments in StringTemplate C# 3.2.
> 
> It is causing a problem when I need to do the following:
> 	rect.SetAttribute("rectangle.{arrayname, index, x, y, width, height}", "MyArray", 0, 100, 100, 32, 34);
> 
> What do you recommend?
> 
> According the the documentation: 
> 	"The various overloads of the setAttribute() method can handle from 1 to 5 arguments. 
> 	The C# version uses variable-length argument list (using params keyword)." 
> 	http://www.stringtemplate.org/wiki/display/ST/Expressions
> 
> 
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/stringtemplate-interest
> 
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/stringtemplate-interest

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20101125/a429e88b/attachment.html 

From parrt at cs.usfca.edu  Thu Nov 25 11:23:41 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 25 Nov 2010 11:23:41 -0800
Subject: [stringtemplate-interest] (no subject)
In-Reply-To: <SNT139-w64E776BD5958A51D16118FDA200@phx.gbl>
References: <SNT139-w61FBBC56A32B1A1AFBC997DA3C0@phx.gbl>,
	<30249948-1E81-4341-B5D5-CCD0AC552B70@cs.usfca.edu>
	<SNT139-w64E776BD5958A51D16118FDA200@phx.gbl>
Message-ID: <4A98D869-2556-4312-BF4A-C56606BBBD0F@cs.usfca.edu>


On Nov 24, 2010, at 9:54 PM, Jon Nilsson wrote:

> Wow, quick reply. Thank you very much. But I'm not sure if I understood you correctly.
> 
> Did you mean 
> 1) formal object def in my rectangle template ?
> or 

Define what a rectangle is in your model.

Ter

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20101125/187c68e2/attachment-0001.html 

From sharwell at pixelminegames.com  Thu Nov 25 12:24:17 2010
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Thu, 25 Nov 2010 14:24:17 -0600
Subject: [stringtemplate-interest] <attribute.property> didn't look for
	a property in C# StringTemplate RE: (no subject)
In-Reply-To: <SNT139-W164AE8C694742BA2469ACDA200@phx.gbl>
References: <SNT139-w61FBBC56A32B1A1AFBC997DA3C0@phx.gbl>,
	<30249948-1E81-4341-B5D5-CCD0AC552B70@cs.usfca.edu>
	<SNT139-W164AE8C694742BA2469ACDA200@phx.gbl>
Message-ID: <000701cb8cde$bccc3900$3664ab00$@pixelminegames.com>

Which StringTemplate assembly are you using? I know the one I wrote checks
properties because the C# port of the ANTLR Tool relies on it heavily for
compiling grammars.

 

Sam

 

From: stringtemplate-interest-bounces at antlr.org
[mailto:stringtemplate-interest-bounces at antlr.org] On Behalf Of Jon Nilsson
Sent: Thursday, November 25, 2010 12:49 AM
To: Ter Parr
Cc: stringtemplate-interest at antlr.org
Subject: [stringtemplate-interest] <attribute.property> didn't look for a
property in C# StringTemplate RE: (no subject)

 

Thank you, Ter, for suggestion: time for a formal object def in the model. 
It worked great except:

<attribute.property> did *NOT* look for property of attribute as a property
(C#) unlike what the cheat sheet said.
It did worked with getProperty() and a raw field.

Here is what the cheat sheet says:
(http://www.antlr.org/wiki/display/ST/StringTemplate+cheat+sheet)
<attribute.property> Looks for property of attribute as a property (C#),
then accessor methods like getProperty() or isProperty(). If that fails,
StringTemplate looks for a raw field of the attribute called property.
Evaluates to the empty string if no such property is found. 



  _____  

Subject: Re: [stringtemplate-interest] (no subject)
From: parrt at cs.usfca.edu
Date: Sun, 21 Nov 2010 08:37:21 -0800
CC: stringtemplate-interest at antlr.org
To: jonhansnilsson at hotmail.com

Hi Jon, probably time for a formal object def in the model.

Ter

On Nov 20, 2010, at 10:08 PM, Jon Nilsson wrote:

 

It looks like setAttribute() can handle only up to 5 arguments in
StringTemplate C# 3.2.

 

It is causing a problem when I need to do the following:

            rect.SetAttribute("rectangle.{arrayname, index, x, y, width,
height}", "MyArray", 0, 100, 100, 32, 34);

 

What do you recommend?

 

According the the documentation: 

            "The various overloads of the setAttribute() method can handle
from 1 to 5 arguments. 

            The C# version uses variable-length argument list (using params
keyword)." 

            http://www.stringtemplate.org/wiki/display/ST/Expressions

 

 

_______________________________________________
stringtemplate-interest mailing list
stringtemplate-interest at antlr.org
http://www.antlr.org/mailman/listinfo/stringtemplate-interest

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20101125/b2232977/attachment.html 

From mortenoh at gmail.com  Thu Nov 25 12:44:25 2010
From: mortenoh at gmail.com (Morten Olav Hansen)
Date: Thu, 25 Nov 2010 21:44:25 +0100
Subject: [stringtemplate-interest] Anonymous template inside another
	anonymous template
Message-ID: <AANLkTikkF0M9NV2q_aGF9ULQ2C03j_H1zeRR8amAQB96@mail.gmail.com>

Hi

Is it possible to have an anonymous template inside another template
somehow? I'm trying to generate an argument to a template (which is
called from an anonymous template).

I have something like this:

<r.states: {s|<state_builder(state=s, region_ns={r<region_n>})>}>

But i get an exception:
Exception in thread "main" java.lang.IllegalArgumentException: cannot
embed template <anonymous template argument> in itself

I'm just passing region_ns=region_n now and adding the r on the
template side (and this works), but this argument will potentially
have several arguments concatenated together.

Regards,
Morten

From sharwell at pixelminegames.com  Tue Nov 30 07:56:07 2010
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Tue, 30 Nov 2010 09:56:07 -0600
Subject: [stringtemplate-interest] Latest C# Binaries/Source
In-Reply-To: <4C2EA592.3070903@gmail.com>
References: <AANLkTik34mvs6fER0q0uCHZxQIS7tMtB1o01RuukW8yF@mail.gmail.com>	<019401cafc21$0749d540$15dd7fc0$@pixelminegames.com>	<AANLkTindtFz2YQR1235NcsxJFjiPdgEU2NYzDdGq55uL@mail.gmail.com>	<00d601cb12df$4b1fbfd0$e15f3f70$@pixelminegames.com>
	<4C2EA592.3070903@gmail.com>
Message-ID: <026f01cb90a7$1a4eef70$4eecce50$@pixelminegames.com>

Hi Natan,

 

The latest copy of my StringTemplate port was posted yesterday as part of my
port of the ANTLR tool. I expect to post these binaries to antlr.org in the
near future.

 

This package includes the C# port of the ANTLR compiler (Antlr3.exe and its
templates), StringTemplate 3.2 including a new dynamic template compiler,
the CSharp3 runtime, and the MSBuild Targets file to incorporate ANTLR into
C# builds:

http://www.280z28.org/downloads/antlr/antlr-dotnet-binaries-3.3.0.7239.7z

 

Thank you,

Sam Harwell

 

From: stringtemplate-interest-bounces at antlr.org
[mailto:stringtemplate-interest-bounces at antlr.org] On Behalf Of Natan
Sent: Friday, July 02, 2010 9:51 PM
To: stringtemplate-interest at antlr.org
Subject: Re: [stringtemplate-interest] Latest C# Binaries/Source

 

Sam,

Since you were talking about that, I was wondering, how is the development
of the 3.2 C# port going? Is it still active?

I think that if you made the snapshots available in the main download page
(like the C port has), probably more people would be testing.

I remember I tried to use it when you posted, but it was too unstable and
wouldn't even create compilable code, and since I was working on something I
had to put in production, I decided to just go back to the previous version
and get the work done...

I plan to get back to develop some tools with antlr, and would be nice to
try it again if a new version is available.

Thanks.

On 23/6/2010 11:20, Sam Harwell wrote: 

Hi Andy,

 

There have been few, if any, changes to the StringTemplate 3.2 C# port since
I uploaded that build. It should be stable (that's certainly the goal), but
I haven't had too many testers trying it in different scenarios. If you
decide to use it, your feedback would be very valuable.

 

Thank you,

Sam Harwell

 

From: stringtemplate-interest-bounces at antlr.org
[mailto:stringtemplate-interest-bounces at antlr.org] On Behalf Of Andy Sipe
Sent: Wednesday, May 26, 2010 8:14 AM
To: stringtemplate-interest
Subject: Re: [stringtemplate-interest] Latest C# Binaries/Source

 


How stable is the source?  If I did a fresh pull and build would I be in a
good place or .. ?

Thanks -andy

PS:  excuse the possible double post, my mail reader did some weird things
for some reason.




On Tue, May 25, 2010 at 11:43 AM, Sam Harwell <sharwell at pixelminegames.com>
wrote:

Hi Andy,

 

I see I have an updated build at the following link, but I'm not 100% sure
it's the latest I've created. I'll have to check that later. I do know this
is a build I was actively using for some time.

 

http://www.280z28.org/downloads/antlr/antlr-dotnet-binaries-3.2.0.6805.7z

 

Sam

 

From: stringtemplate-interest-bounces at antlr.org
[mailto:stringtemplate-interest-bounces at antlr.org] On Behalf Of Andy Sipe
Sent: Tuesday, May 25, 2010 6:31 AM
To: stringtemplate-interest
Subject: [stringtemplate-interest] Latest C# Binaries/Source

 

I'm trying to locate the latest C# binaries but am unsure which ones to
grab.   I believe what I'm looking for are the binaries/source referenced in
these 2 forum messages:

http://www.mail-archive.com/antlr-dev at antlr.org/msg00663.html

http://www.mail-archive.com/antlr-dev at antlr.org/msg00666.html

In both cases the given links no longer exist.   

All the C# links given on the download page
(http://www.stringtemplate.org/download.html) seem to point to older and/or
orphaned versions.

Any info on where to get the current 'stable' downloads/source?

Thanks -andy

 

 
 
_______________________________________________
stringtemplate-interest mailing list
stringtemplate-interest at antlr.org
http://www.antlr.org/mailman/listinfo/stringtemplate-interest

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20101130/a4bddbeb/attachment.html 

