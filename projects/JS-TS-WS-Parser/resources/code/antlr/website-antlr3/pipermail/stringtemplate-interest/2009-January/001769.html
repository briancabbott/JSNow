<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [stringtemplate-interest] deadlock during the static	initialization
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:stringtemplate-interest%40antlr.org?Subject=Re:%20%5Bstringtemplate-interest%5D%20deadlock%20during%20the%20static%0A%09initialization&In-Reply-To=%3C496EF99E.4090204%40serie-a.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001768.html">
   <LINK REL="Next"  HREF="001770.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[stringtemplate-interest] deadlock during the static	initialization</H1>
    <B>Nils Liebelt</B> 
    <A HREF="mailto:stringtemplate-interest%40antlr.org?Subject=Re:%20%5Bstringtemplate-interest%5D%20deadlock%20during%20the%20static%0A%09initialization&In-Reply-To=%3C496EF99E.4090204%40serie-a.de%3E"
       TITLE="[stringtemplate-interest] deadlock during the static	initialization">nils.liebelt at serie-a.de
       </A><BR>
    <I>Thu Jan 15 00:53:50 PST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001768.html">[stringtemplate-interest] deadlock during the static	initialization
</A></li>
        <LI>Next message: <A HREF="001770.html">[stringtemplate-interest] antlr.org contact
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1769">[ date ]</a>
              <a href="thread.html#1769">[ thread ]</a>
              <a href="subject.html#1769">[ subject ]</a>
              <a href="author.html#1769">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Terence,

thanks for the support. One last note on testcase. It does not fail when 
the error occures. But you can see from
the log statements and the thread dump that the worker threads are not 
terminating.


Regards,

Nils

Terence Parr schrieb:
&gt;<i>
</I>&gt;<i> On Jan 13, 2009, at 10:38 AM, Nils Liebelt wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hi all,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I spotted an racing condition that occures during the (static) 
</I>&gt;&gt;<i> initialization of StringTemplate and StringTemplateGroup.
</I>&gt;&gt;<i> The result is an deadlock that occures when initializing the classes 
</I>&gt;&gt;<i> from different threads. Please find attached a simple junit testcase
</I>&gt;&gt;<i> that illustrates the behaviour. Also attached is a thread dump that 
</I>&gt;&gt;<i> shows stacktraces after the deadlock occures. To get around this
</I>&gt;&gt;<i> issue you must statically initialize one of the classes before actual 
</I>&gt;&gt;<i> creating the instances of the mentioned classes  (see testcase)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The problem affects StringTemplate Version 3.2. I can reproduce the 
</I>&gt;&gt;<i> behaviour on sun jvm 1.6.0_03-b05 (64bit) and 1.6.0_07-b06 (32bit)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Is this a known bug? Can I raise a jira?
</I>&gt;<i>
</I>&gt;<i> Hi Nils, just added:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.antlr.org/jira/browse/ST-48">http://www.antlr.org/jira/browse/ST-48</A>
</I>&gt;<i>
</I>&gt;<i> Ter
</I>&gt;<i>
</I>

-- 
Nils Liebelt
Software Developer
<A HREF="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">nils.liebelt at serie-a.de</A>

serie a logistics solutions AG
H&#252;lchrather Stra&#223;e 15
D-50670 K&#246;ln

T +49 221 500 60 7-19
F +49 221 500 56 85

Vorstand: Axel L&#246;hr, Erwin Soldo
Aufsichtsrat: Adam Musialik (Vors.), Fritz Pleitgen, Hans J&#246;rg Klofat

Amtsgericht K&#246;ln HRB 61725

www.serie-a.de

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001768.html">[stringtemplate-interest] deadlock during the static	initialization
</A></li>
	<LI>Next message: <A HREF="001770.html">[stringtemplate-interest] antlr.org contact
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1769">[ date ]</a>
              <a href="thread.html#1769">[ thread ]</a>
              <a href="subject.html#1769">[ subject ]</a>
              <a href="author.html#1769">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">More information about the stringtemplate-interest
mailing list</a><br>
</body></html>
