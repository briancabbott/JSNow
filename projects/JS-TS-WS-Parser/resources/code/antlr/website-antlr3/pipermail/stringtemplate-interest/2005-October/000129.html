<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [stringtemplate-interest] Map totalitarianism :o)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:stringtemplate-interest%40antlr.org?Subject=%5Bstringtemplate-interest%5D%20Map%20totalitarianism%20%3Ao%29&In-Reply-To=0DA89B7D-5BED-4414-AA71-7C47167C337A%40infonie.fr">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000127.html">
   <LINK REL="Next"  HREF="000130.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[stringtemplate-interest] Map totalitarianism :o)</H1>
    <B>Terence Parr</B> 
    <A HREF="mailto:stringtemplate-interest%40antlr.org?Subject=%5Bstringtemplate-interest%5D%20Map%20totalitarianism%20%3Ao%29&In-Reply-To=0DA89B7D-5BED-4414-AA71-7C47167C337A%40infonie.fr"
       TITLE="[stringtemplate-interest] Map totalitarianism :o)">parrt at cs.usfca.edu
       </A><BR>
    <I>Sun Oct 23 13:19:43 PDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000127.html">[stringtemplate-interest] Map totalitarianism :o)
</A></li>
        <LI>Next message: <A HREF="000130.html">[stringtemplate-interest] Fwd: [antlr-interest] Problem with
	carriage returns in c#	stringtemplate
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#129">[ date ]</a>
              <a href="thread.html#129">[ thread ]</a>
              <a href="subject.html#129">[ subject ]</a>
              <a href="author.html#129">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Oct 22, 2005, at 5:50 AM, Laurent Vaucher wrote:
&gt;<i>   Having delved a little in the source of StringTemplate, I  
</I>&gt;<i> encountered in ASTExpr.java on line 785 the method  
</I>&gt;<i> isValidMapInstance(). What it does is actually prevent you from  
</I>&gt;<i> using any Map implementation other than HashMap or Hashtable.  
</I>&gt;<i> That's what I call totalitarianism!
</I>
The StringTemplate &quot;supreme benevolent dictator and president for  
life&quot; is guilty as charged! ;)

&gt;<i> The reason for this limitation is explained in the source :
</I>&gt;<i>
</I>&gt;<i>         // Special case: if it's a HashMap, Hashtable then pull using
</I>&gt;<i>         // key not the property method.  Do NOT allow general Map  
</I>&gt;<i> interface
</I>&gt;<i>         // as people could pass in their database masquerading as a  
</I>&gt;<i> Map.
</I>&gt;<i>
</I>&gt;<i>   As I understand it, the goal is to prevent the Model-View  
</I>&gt;<i> segregation to be broken. That's laudable and fully in line with  
</I>&gt;<i> the spirit of the library. But I think there are innocent  
</I>&gt;<i> casualties with this scheme.
</I>
As there are with not allowing tests of attribute values like &quot;make  
all negative numbers red&quot;.

&gt;<i> I'll try to explain why I think the whole Map implementation  
</I>&gt;<i> control is not ' the right thing'.
</I>&gt;<i>
</I>&gt;<i>   First, why on earth choose HashMap and Hashtable and let TreeMap  
</I>&gt;<i> out in the cold? It is a very recommendable citizen of the Map  
</I>&gt;<i> community.
</I>
I forgot about that one.

&gt;<i>   Second, if I have built another Map implementation because I want  
</I>&gt;<i> to try, let's say, a 'perfect hash' function, why should I be  
</I>&gt;<i> discriminated?
</I>
That would be &quot;collateral damage&quot; :(

&gt;<i>   Finally, StringTemplate cannot make any control on get/is methods  
</I>&gt;<i> and those could very easily be used as a fa&#231;ade to a database, so  
</I>&gt;<i> the whole point of the control is lost.
</I>
Very true.

&gt;<i>   As a conclusion, I'd say that though intent of the control was  
</I>&gt;<i> right, the way it is done isn't and the whole idea of controlling  
</I>&gt;<i> what a developer might do with a library is, if not an error, a  
</I>&gt;<i> utopia.
</I>
Ok, you convinced me...I'll change for 2.3; adding to bug list. :)

Thanks for your excellent analysis.

Ter
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000127.html">[stringtemplate-interest] Map totalitarianism :o)
</A></li>
	<LI>Next message: <A HREF="000130.html">[stringtemplate-interest] Fwd: [antlr-interest] Problem with
	carriage returns in c#	stringtemplate
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#129">[ date ]</a>
              <a href="thread.html#129">[ thread ]</a>
              <a href="subject.html#129">[ subject ]</a>
              <a href="author.html#129">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest">More information about the stringtemplate-interest
mailing list</a><br>
</body></html>
