From bvarnai at gmail.com  Wed Nov  2 07:07:28 2011
From: bvarnai at gmail.com (Balazs Varnai)
Date: Wed, 2 Nov 2011 15:07:28 +0100
Subject: [stringtemplate-interest] Problems migrating v3 template group
 inheritance to v4
In-Reply-To: <3F7E8834-00F4-46A7-9766-DD7019AFB1FB@cs.usfca.edu>
References: <CA+iZJ0_ksFPfG+U1f+PCcxjnBmM5ErwLvXTnmB3K0gy4DQXG8g@mail.gmail.com>
	<3F7E8834-00F4-46A7-9766-DD7019AFB1FB@cs.usfca.edu>
Message-ID: <CA+iZJ0_xwj_9q13Lb3hzm8qDi01Q5Q8SaD190n6rW6Fe2K7mtQ@mail.gmail.com>

Hi.

Well, I checked the unit tests. Those are only using the STGroupFile class
for testing the import facility. I replaced STGroupDir with STGroupFile,
now it works. But I still wonder, is this intentional?
For me it was natural to start with STGroupDir when having a directory with
.stg files and import within the directory. Maybe I was wrong...

Thanks!

B


On Mon, Oct 31, 2011 at 5:52 PM, Terence Parr <parrt at cs.usfca.edu> wrote:

> Hi. Are you saying that you want to import template container and
> reference it from the subgroup template container? If so, I think something
> like super.container() is needed.
> Ter
> On Oct 26, 2011, at 3:55 AM, Balazs Varnai wrote:
>
> > Hi All,
> >
> > I'm updating my project to v4. The goal is to minimize the changes in
> template structure, but I got stuck with inheritance. Any help would be
> appreciated. Thanks!
> >
> > So the setup with inheritance:
> >
> > CContainerDef.stg (in v3: group CContainerDef : CModuleDef)
> > CEnumerationParamDef.stg (in v3: group CEnumerationParamDef :
> CContainerDef)
> > CModuleDef.stg
> > ...
> >
> > It's running inside an Eclipse bundle, so I created a STGroup subclass.
> Same as STGroupDir, just using bundle URLs. I updated the templates with
> "import"
> >
> > CContainerDef.stg
> >
> > import "CModuleDef.stg"
> >
> > Templates from 'CContainerDef'  are loaded as
> '/CContainerDef/<template>, I guess it's parent<>template relationship. I
> have a template 'container' in 'CModuleDef', so after import it should be
> available in 'CContainerDef'. ST sees it's not available and tries to load
> it as '/CContainerDef/container'. Ends up loading itself again?? This is
> done without looking at the imported stg. Maybe I am completely
> misunderstanding the template group concept.
> >
> > B
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> > _______________________________________________
> > stringtemplate-interest mailing list
> > stringtemplate-interest at antlr.org
> > http://www.antlr.org/mailman/listinfo/stringtemplate-interest
>
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/stringtemplate-interest
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20111102/6bdf3fd8/attachment.html 

From parrt at cs.usfca.edu  Wed Nov  2 16:37:46 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 2 Nov 2011 16:37:46 -0700
Subject: [stringtemplate-interest] Problems migrating v3 template group
	inheritance to v4
In-Reply-To: <CA+iZJ0_xwj_9q13Lb3hzm8qDi01Q5Q8SaD190n6rW6Fe2K7mtQ@mail.gmail.com>
References: <CA+iZJ0_ksFPfG+U1f+PCcxjnBmM5ErwLvXTnmB3K0gy4DQXG8g@mail.gmail.com>
	<3F7E8834-00F4-46A7-9766-DD7019AFB1FB@cs.usfca.edu>
	<CA+iZJ0_xwj_9q13Lb3hzm8qDi01Q5Q8SaD190n6rW6Fe2K7mtQ@mail.gmail.com>
Message-ID: <DAB83FEC-4CB5-435E-9059-276E281E3332@cs.usfca.edu>

Interesting.  Can you send me directly a simple example that fails with STGroupDir but not with STGroupFile? I will convert it to a unit test and try out.
Ter

On Nov 2, 2011, at 7:07 AM, Balazs Varnai wrote:

> Hi.
> 
> Well, I checked the unit tests. Those are only using the STGroupFile class for testing the import facility. I replaced STGroupDir with STGroupFile, now it works. But I still wonder, is this intentional?
> For me it was natural to start with STGroupDir when having a directory with .stg files and import within the directory. Maybe I was wrong...
> 
> Thanks!
> 
> B
> 
> 
> On Mon, Oct 31, 2011 at 5:52 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
> Hi. Are you saying that you want to import template container and reference it from the subgroup template container? If so, I think something like super.container() is needed.
> Ter
> On Oct 26, 2011, at 3:55 AM, Balazs Varnai wrote:
> 
> > Hi All,
> >
> > I'm updating my project to v4. The goal is to minimize the changes in template structure, but I got stuck with inheritance. Any help would be appreciated. Thanks!
> >
> > So the setup with inheritance:
> >
> > CContainerDef.stg (in v3: group CContainerDef : CModuleDef)
> > CEnumerationParamDef.stg (in v3: group CEnumerationParamDef : CContainerDef)
> > CModuleDef.stg
> > ...
> >
> > It's running inside an Eclipse bundle, so I created a STGroup subclass. Same as STGroupDir, just using bundle URLs. I updated the templates with "import"
> >
> > CContainerDef.stg
> >
> > import "CModuleDef.stg"
> >
> > Templates from 'CContainerDef'  are loaded as '/CContainerDef/<template>, I guess it's parent<>template relationship. I have a template 'container' in 'CModuleDef', so after import it should be available in 'CContainerDef'. ST sees it's not available and tries to load it as '/CContainerDef/container'. Ends up loading itself again?? This is done without looking at the imported stg. Maybe I am completely misunderstanding the template group concept.
> >
> > B
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> > _______________________________________________
> > stringtemplate-interest mailing list
> > stringtemplate-interest at antlr.org
> > http://www.antlr.org/mailman/listinfo/stringtemplate-interest
> 
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/stringtemplate-interest
> 
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/stringtemplate-interest


From WeikEngOff at aol.com  Thu Nov 10 00:47:19 2011
From: WeikEngOff at aol.com (Udo Weik)
Date: Thu, 10 Nov 2011 09:47:19 +0100
Subject: [stringtemplate-interest] ANTLR code generation
 target/Stringtemplate: modifying the C-Runtime I
Message-ID: <4EBB8F97.5010101@aol.com>

Hello,

I asked my questions in antlr-interest and Jim wrote that
these are more Stringtemplate-related. So here again.

I startet to modify the C-Runtime and have a first bunch of
questions. Be sure, more will follow - "Eeek, what a pain!"...

1. <token> in <action>
    I need the token of an rule in the <action>-section
    /** How to execute an action (when not backtracking) */
    execAction(action) ::= <<
    <if(backtracking)>
    <if(actions.(actionScope).synpredgate)>
    if ( <actions.(actionScope).synpredgate> )
    ...
    <ruleDescriptor.name> and <ruleName> are replaced (what is the
    difference?) but <token> not. Why?

2. Blank lines
    The C-Parser-file of my grammar consits of ~150.000 lines, ~20.000
    lines are blank. As mentioned in another email from me, I can't debug
    more than 65535 lines. The only solution is to reorder the (parser) rules.
    But apart from that severe problem, I looked for a solution to get
    a much more compact code. Some examples, section...
    1. // Forward declare the locally static matching functions we have generated.
       //
       static
         XYZParser_RULE_return
           RULE (pXYZParser ctx);

       3 lines - the result of
       <rules:{r | static <headerReturnType(ruleDescriptor=r.ruleDescriptor)>  <r.ruleDescriptor.name>    (p<name> ctx<if(r.ruleDescriptor.parameterScope)>, <endif>
       <r.ruleDescriptor.parameterScope:parameterScope()>);}; separator="\n">
       How can I avoid 2 lines?
    2. /* ==============================================
        * Parsing rules
        */
       ...
       static XYZParser_RULE_return
       port_RULE(pXYZParser ctx)

       2 lines - the result of
       <rules; separator="\n\n">
       How can I avoid 1 line?


Many thanks and greetings
Udo

From parrt at cs.usfca.edu  Thu Nov 10 16:34:46 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 10 Nov 2011 16:34:46 -0800
Subject: [stringtemplate-interest] ANTLR code generation
	target/Stringtemplate: modifying the C-Runtime I
In-Reply-To: <4EBB8F97.5010101@aol.com>
References: <4EBB8F97.5010101@aol.com>
Message-ID: <ADAECA67-D3D1-4378-AE89-369013D463AD@cs.usfca.edu>


On Nov 10, 2011, at 12:47 AM, Udo Weik wrote:

> Hello,
> 
> I asked my questions in antlr-interest and Jim wrote that
> these are more Stringtemplate-related. So here again.
> 
> I startet to modify the C-Runtime and have a first bunch of
> questions. Be sure, more will follow - "Eeek, what a pain!"...
> 
> 1. <token> in <action>
>    I need the token of an rule in the <action>-section
>    /** How to execute an action (when not backtracking) */
>    execAction(action) ::= <<
>    <if(backtracking)>
>    <if(actions.(actionScope).synpredgate)>
>    if ( <actions.(actionScope).synpredgate> )
>    ...
>    <ruleDescriptor.name> and <ruleName> are replaced (what is the

Hi.  I don't see    <ruleDescriptor.name> and <ruleName>

>    difference?) but <token> not. Why?
> 
> 2. Blank lines
>    The C-Parser-file of my grammar consits of ~150.000 lines, ~20.000
>    lines are blank. As mentioned in another email from me, I can't debug
>    more than 65535 lines. The only solution is to reorder the (parser) rules.
>    But apart from that severe problem, I looked for a solution to get
>    a much more compact code. Some examples, section...
>    1. // Forward declare the locally static matching functions we have generated.
>       //
>       static
>         XYZParser_RULE_return
>           RULE (pXYZParser ctx);
> 
>       3 lines - the result of
>       <rules:{r | static <headerReturnType(ruleDescriptor=r.ruleDescriptor)>  <r.ruleDescriptor.name>    (p<name> ctx<if(r.ruleDescriptor.parameterScope)>, <endif>
>       <r.ruleDescriptor.parameterScope:parameterScope()>);}; separator="\n">
>       How can I avoid 2 lines?

 the easiest thing to do is to build an StringTemplateOutputWriter that strips blank lines :)
Ter
>    2. /* ==============================================
>        * Parsing rules
>        */
>       ...
>       static XYZParser_RULE_return
>       port_RULE(pXYZParser ctx)
> 
>       2 lines - the result of
>       <rules; separator="\n\n">
>       How can I avoid 1 line?
> 
> 
> Many thanks and greetings
> Udo
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/stringtemplate-interest


From p_machner at poczta.fm  Tue Nov 15 05:04:56 2011
From: p_machner at poczta.fm (p_machner at poczta.fm)
Date: Tue, 15 Nov 2011 14:04:56 +0100
Subject: [stringtemplate-interest] Generating JSON using StringTemplate
Message-ID: <nmdaqgcohhykbdpushis@wrmn>

Hello,
In my application I'm generating Json using StringTemplate. So, for example, I might have a template that looks like so:
{
    firstName: '$user.firstName$',
    lastName: '$user.lastName$'
}
To this template I can pass the Java user object like so: 

User user = //....
template.add("user", user);

Now, this is all nice, but when i.e. the lastname contains an apostrophe (like O'Donovan), my JSON breaks.
What can I do to automatically escape quote signs and apostrophes?
I tried using the following renderer: 

stringTemplateGroup.registerRenderer(String.class, new AttributeRenderer() {

            @Override
            public String toString(Object o, String formatString, Locale locale) {
                String result = (String) o;
                result = result.replace("\"", "\\\"");
                result = result.replace("'", "\'");

                return result;
            }
        });

but this got run on the whole template, not just the parameters that I passed to the template (the User object).
Eventually I got something like this:

{
    firstName: \'John\',
    lastName: \'O\'Donovan\'
}
which of course is not valid json.
Any ideas on how this escaping can be easily achieved?

Thanks and best regards,
Peter

----------------------------------------------------------------
Najwieksza gielda samochodowa!
http://linkint.pl/f2a7d

From j.stuyts at javathinker.com  Tue Nov 15 05:24:49 2011
From: j.stuyts at javathinker.com (Johan Stuyts)
Date: Tue, 15 Nov 2011 14:24:49 +0100
Subject: [stringtemplate-interest] Generating JSON using StringTemplate
In-Reply-To: <nmdaqgcohhykbdpushis@wrmn>
References: <nmdaqgcohhykbdpushis@wrmn>
Message-ID: <op.v4zovne2c4vsc3@frank-black.leanapps.com>

> Any ideas on how this escaping can be easily achieved?

You have to specify the format option in the template, and detect it in  
the attribute renderer:
<http://www.antlr.org/wiki/display/ST/Object+rendering#Objectrendering-FormatOption>

Regards,

Johan

From p_machner at poczta.fm  Tue Nov 15 06:20:47 2011
From: p_machner at poczta.fm (p_machner at poczta.fm)
Date: Tue, 15 Nov 2011 15:20:47 +0100
Subject: [stringtemplate-interest] Generating JSON using StringTemplate
In-Reply-To: <op.v4zovne2c4vsc3@frank-black.leanapps.com>
References: <nmdaqgcohhykbdpushis@wrmn>
	<op.v4zovne2c4vsc3@frank-black.leanapps.com>
Message-ID: <jjlliplslahoyryuzusq@jdgq>

Thanks a lot for your tip Johan :) I was considering this solution, it should allow me to do what I need but it has one disadvantage - it will clutter up my templates with something like 'format="string"' in many many places and this is something I've wanted to avoid.
Any other ideas?

Thanks and best regards,
Piotr

"Johan Stuyts" <j.stuyts at javathinker.com> pisze:
> > Any ideas on how this escaping can be easily achieved?
> 
> You have to specify the format option in the template, and detect it in  
> the attribute renderer:
> 
> 
> Regards,
> 
> Johan
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/stringtemplate-interest
> 



----------------------------------------------------------------
Masz strone www? Dodaj ja do katalogu!
Sprawdz >>  http://linkint.pl/f2a8a

From ub at abego-software.de  Wed Nov 16 07:11:05 2011
From: ub at abego-software.de (Udo Borkowski)
Date: Wed, 16 Nov 2011 16:11:05 +0100
Subject: [stringtemplate-interest] Generating JSON using StringTemplate
In-Reply-To: <jjlliplslahoyryuzusq@jdgq>
References: <nmdaqgcohhykbdpushis@wrmn>
	<op.v4zovne2c4vsc3@frank-black.leanapps.com>
	<jjlliplslahoyryuzusq@jdgq>
Message-ID: <0EEA417C-0A92-41BA-B212-639D3D43A209@abego-software.de>

Hi Piotr,

you don't need to add the 'format="?"'  in many many places. Just create one template containing the formatted string rendering and use that template instead of the '?' stuff.

E.g. create a template "q" (for "quote")


> q(s) ::= <<
> <s;format="singleQuote">
> >>
> 
> main(user) ::= <<
> {
>    firstName: <q(user.firstName)>,
>    lastName: <q(user.lastName)>
> }
> >>

This will output:

> {
>    firstName: 'Joe',
>    lastName: 'O\'Donovan'
> }



Depending on the concrete application I would also consider adding a template to render both the key and value:

> kv(key, value) ::= <<
> <key>: <value;format="singleQuote">
> >>
> 
> main(user) ::= <<
> {
>    <kv("firstName",user.firstName)>,
>    <kv("lastName", user.lastName)>
> }
> >>


Udo


On 15.11.2011, at 15:20, p_machner at poczta.fm wrote:

> Thanks a lot for your tip Johan :) I was considering this solution, it should allow me to do what I need but it has one disadvantage - it will clutter up my templates with something like 'format="string"' in many many places and this is something I've wanted to avoid.
> Any other ideas?
> 
> Thanks and best regards,
> Piotr
> 
> "Johan Stuyts" <j.stuyts at javathinker.com> pisze:
>>> Any ideas on how this escaping can be easily achieved?
>> 
>> You have to specify the format option in the template, and detect it in  
>> the attribute renderer:
>> 
>> 
>> Regards,
>> 
>> Johan
>> _______________________________________________
>> stringtemplate-interest mailing list
>> stringtemplate-interest at antlr.org
>> http://www.antlr.org/mailman/listinfo/stringtemplate-interest
>> 
> 
> 
> 
> ----------------------------------------------------------------
> Masz strone www? Dodaj ja do katalogu!
> Sprawdz >>  http://linkint.pl/f2a8a
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/stringtemplate-interest

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20111116/b5db5145/attachment.html 

From p_machner at poczta.fm  Thu Nov 17 05:57:42 2011
From: p_machner at poczta.fm (p_machner at poczta.fm)
Date: Thu, 17 Nov 2011 14:57:42 +0100
Subject: [stringtemplate-interest] Generating JSON using StringTemplate
In-Reply-To: <153D612F-5FC4-48EF-BD82-E5809F7394C1@gmx.de>
References: <nmdaqgcohhykbdpushis@wrmn>
	<op.v4zovne2c4vsc3@frank-black.leanapps.com>
	<jjlliplslahoyryuzusq@jdgq>
	<153D612F-5FC4-48EF-BD82-E5809F7394C1@gmx.de>
Message-ID: <murdhixrujsyvwvufvrm@mqsa>

Udo, this is a good point. I think I'll go this way.Thanks a lot and best regards,Piotr"Udo Borkowski" &lt;Udo.Borkowski at gmx.de&gt; pisze:Hi Piotr,you don't need to add the 'format="?"' &nbsp;in many many places.&nbsp;Just create one template containing the formatted string rendering and use that template instead of the '?' stuff.E.g. create a template "q" (for "quote")q(s) ::= &lt;&lt;&lt;s;format="singleQuote"&gt;&gt;&gt;main(user) ::= &lt;&lt;{&nbsp; &nbsp;firstName: &lt;q(user.firstName)&gt;,&nbsp; &nbsp;lastName: &lt;q(user.lastName)&gt;}&gt;&gt;This will output:{&nbsp; &nbsp;firstName: 'Joe',&nbsp; &nbsp;lastName: 'O\'Donovan'}Depending on the concrete application I would also consider adding a template to render both the key and value:kv(key, value) ::= &lt;&lt;&lt;key&gt;: &lt;value;format="singleQuote"&gt;&gt;&gt;main(user) ::= &lt;&lt;{&nbsp; &nbsp;&lt;kv("firstName",user.firstName)&gt;,&nbsp; &nbsp;&lt;kv("lastName", user.lastName)&gt;}&gt;&gt;UdoOn 15.11.2011, at 15:20, p_machner at poczta.fm wrote:Thanks a lot for your tip Johan :) I was considering this solution, it should allow me to do what I need but it has one disadvantage - it will clutter up my templates with something like 'format="string"' in many many places and this is something I've wanted to avoid.Any other ideas?Thanks and best regards,Piotr"Johan Stuyts" &lt;j.stuyts at javathinker.com&gt; pisze:Any ideas on how this escaping can be easily achieved?You have to specify the format option in the template, and detect it in &nbsp;the attribute renderer:Regards,Johan_______________________________________________stringtemplate-interest mailing liststringtemplate-interest at antlr.orghttp://www.antlr.org/mailman/listinfo/stringtemplate-interest----------------------------------------------------------------Masz strone www? Dodaj ja do katalogu!Sprawdz &gt;&gt; &nbsp;http://linkint.pl/f2a8a_______________________________________________stringtemplate-interest mailing liststringtemplate-interest at antlr.orghttp://www.antlr.org/mailman/listinfo/stringtemplate-interest

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20111117/e7a10fd0/attachment.html 

From WeikEngOff at aol.com  Thu Nov 17 11:30:37 2011
From: WeikEngOff at aol.com (Udo Weik)
Date: Thu, 17 Nov 2011 20:30:37 +0100
Subject: [stringtemplate-interest] 2. Attempt: ANTLR code generation
 target/Stringtemplate: modifying the C-Runtime I
Message-ID: <4EC560DD.3070208@aol.com>

I would be really happy to get an answer...


Hello,

I asked my questions in antlr-interest and Jim wrote that
these are more Stringtemplate-related. So here again.

I startet to modify the C-Runtime and have a first bunch of
questions. Be sure, more will follow - "Eeek, what a pain!"...

1. <token> in <action>
     I need the token of an rule in the <action>-section
     /** How to execute an action (when not backtracking) */
     execAction(action) ::= <<
     <if(backtracking)>
     <if(actions.(actionScope).synpredgate)>
     if ( <actions.(actionScope).synpredgate> )
     ...
     <ruleDescriptor.name> and <ruleName> are replaced (what is the
     difference?) but <token> not. Why?

2. Blank lines
     The C-Parser-file of my grammar consits of ~150.000 lines, ~20.000
     lines are blank. As mentioned in another email from me, I can't debug
     more than 65535 lines. The only solution is to reorder the (parser) rules.
     But apart from that severe problem, I looked for a solution to get
     a much more compact code. Some examples, section...
     1. // Forward declare the locally static matching functions we have generated.
        //
        static
          XYZParser_RULE_return
            RULE (pXYZParser ctx);

        3 lines - the result of
        <rules:{r | static <headerReturnType(ruleDescriptor=r.ruleDescriptor)>  <r.ruleDescriptor.name>    (p<name> ctx<if(r.ruleDescriptor.parameterScope)>, <endif>
        <r.ruleDescriptor.parameterScope:parameterScope()>);}; separator="\n">
        How can I avoid 2 lines?
     2. /* ==============================================
         * Parsing rules
         */
        ...
        static XYZParser_RULE_return
        port_RULE(pXYZParser ctx)

        2 lines - the result of
        <rules; separator="\n\n">
        How can I avoid 1 line?


Many thanks and greetings
Udo

From parrt at cs.usfca.edu  Wed Nov 23 09:21:17 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 23 Nov 2011 09:21:17 -0800
Subject: [stringtemplate-interest] 2. Attempt: ANTLR code generation
	target/Stringtemplate: modifying the C-Runtime I
In-Reply-To: <4EC560DD.3070208@aol.com>
References: <4EC560DD.3070208@aol.com>
Message-ID: <8379E648-D30D-47B0-8754-0DD4D6BA232E@cs.usfca.edu>


On Nov 17, 2011, at 11:30 AM, Udo Weik wrote:

> I would be really happy to get an answer...
> 
> 
> Hello,
> 
> I asked my questions in antlr-interest and Jim wrote that
> these are more Stringtemplate-related. So here again.
> 
> I startet to modify the C-Runtime and have a first bunch of
> questions. Be sure, more will follow - "Eeek, what a pain!"...
> 
> 1. <token> in <action>
>     I need the token of an rule in the <action>-section
>     /** How to execute an action (when not backtracking) */
>     execAction(action) ::= <<
>     <if(backtracking)>
>     <if(actions.(actionScope).synpredgate)>
>     if ( <actions.(actionScope).synpredgate> )
>     ...
>     <ruleDescriptor.name> and <ruleName> are replaced (what is the
>     difference?) but <token> not. Why?

So in the execAction template you want to reference <token>? What do you mean by token in a rule? you can get a tree for the rule in the Rule object:

	/** The AST representing the whole rule */
	public GrammarAST tree;

> 2. Blank lines
>     The C-Parser-file of my grammar consits of ~150.000 lines, ~20.000
>     lines are blank. As mentioned in another email from me, I can't debug
>     more than 65535 lines. The only solution is to reorder the (parser) rules.
>     But apart from that severe problem, I looked for a solution to get
>     a much more compact code. Some examples, section...
>     1. // Forward declare the locally static matching functions we have generated.
>        //
>        static
>          XYZParser_RULE_return
>            RULE (pXYZParser ctx);
> 
>        3 lines - the result of
>        <rules:{r | static <headerReturnType(ruleDescriptor=r.ruleDescriptor)>  <r.ruleDescriptor.name>    (p<name> ctx<if(r.ruleDescriptor.parameterScope)>, <endif>
>        <r.ruleDescriptor.parameterScope:parameterScope()>);}; separator="\n">
>        How can I avoid 2 lines?
>     2. /* ==============================================
>         * Parsing rules
>         */
>        ...
>        static XYZParser_RULE_return
>        port_RULE(pXYZParser ctx)
> 
>        2 lines - the result of
>        <rules; separator="\n\n">
>        How can I avoid 1 line?

The general rule is that white space at the start and end of templates is consumed, but it leaves the new lines inside the templates themselves. In this case, you can remove one of the \n from \n\n, right?
Ter

From o.flege at market-maker.de  Thu Nov 24 01:41:32 2011
From: o.flege at market-maker.de (Oliver Flege)
Date: Thu, 24 Nov 2011 10:41:32 +0100
Subject: [stringtemplate-interest] thread-safety issue in ST-4.0.4
Message-ID: <4ECE114C.9060001@market-maker.de>


Hi,

I just found out the hard way that
org.stringtemplate.v4.misc.ObjectModelAdaptor ist not thread-safe:

The field classAndPropertyToMemberCache can be accessed by multiple
threads at the same time.
Since org.antlr.runtime.misc.DoubleKeyMap and its internal
java.util.LinkedHashMap aren't thread-safe, parallel puts might
corrupt the map's structure (in my case: the pointers to the next
Entry ended up forming an infinite loop).

classAndPropertyToMemberCache.get/put should be synchronized on
a common mutex object.

Regards,
 Oliver


From parrt at cs.usfca.edu  Thu Nov 24 08:44:06 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 24 Nov 2011 08:44:06 -0800
Subject: [stringtemplate-interest] thread-safety issue in ST-4.0.4
In-Reply-To: <4ECE114C.9060001@market-maker.de>
References: <4ECE114C.9060001@market-maker.de>
Message-ID: <792E20E9-F221-48D6-B1E7-E405D5FAC72D@cs.usfca.edu>

yikes. let me take a look.
T
On Nov 24, 2011, at 1:41 AM, Oliver Flege wrote:

> 
> Hi,
> 
> I just found out the hard way that
> org.stringtemplate.v4.misc.ObjectModelAdaptor ist not thread-safe:
> 
> The field classAndPropertyToMemberCache can be accessed by multiple
> threads at the same time.
> Since org.antlr.runtime.misc.DoubleKeyMap and its internal
> java.util.LinkedHashMap aren't thread-safe, parallel puts might
> corrupt the map's structure (in my case: the pointers to the next
> Entry ended up forming an infinite loop).
> 
> classAndPropertyToMemberCache.get/put should be synchronized on
> a common mutex object.
> 
> Regards,
> Oliver
> 
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/stringtemplate-interest


From s.barnett-cormack at lancaster.ac.uk  Thu Nov 24 09:13:10 2011
From: s.barnett-cormack at lancaster.ac.uk (Sam Barnett-Cormack)
Date: Thu, 24 Nov 2011 17:13:10 +0000
Subject: [stringtemplate-interest] thread-safety issue in ST-4.0.4
In-Reply-To: <792E20E9-F221-48D6-B1E7-E405D5FAC72D@cs.usfca.edu>
References: <4ECE114C.9060001@market-maker.de>
	<792E20E9-F221-48D6-B1E7-E405D5FAC72D@cs.usfca.edu>
Message-ID: <4ECE7B26.9040807@lancaster.ac.uk>

You shouldn't need to manually synchronise, necessarily, depending on 
the algorithm structure, I believe there's a synchronising tree wrapper 
in the standard library. Of course, if multiple linked adds happen that 
should be atomic, you'll need to synchronize externally or restructure 
things...

Of course, you probably know all this, but just in case ;)

Sam

On 24/11/2011 16:44, Terence Parr wrote:
> yikes. let me take a look.
> T
> On Nov 24, 2011, at 1:41 AM, Oliver Flege wrote:
>
>>
>> Hi,
>>
>> I just found out the hard way that
>> org.stringtemplate.v4.misc.ObjectModelAdaptor ist not thread-safe:
>>
>> The field classAndPropertyToMemberCache can be accessed by multiple
>> threads at the same time.
>> Since org.antlr.runtime.misc.DoubleKeyMap and its internal
>> java.util.LinkedHashMap aren't thread-safe, parallel puts might
>> corrupt the map's structure (in my case: the pointers to the next
>> Entry ended up forming an infinite loop).
>>
>> classAndPropertyToMemberCache.get/put should be synchronized on
>> a common mutex object.
>>
>> Regards,
>> Oliver
>>
>> _______________________________________________
>> stringtemplate-interest mailing list
>> stringtemplate-interest at antlr.org
>> http://www.antlr.org/mailman/listinfo/stringtemplate-interest
>
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/stringtemplate-interest

From WeikEngOff at aol.com  Fri Nov 25 17:40:07 2011
From: WeikEngOff at aol.com (Udo Weik)
Date: Sat, 26 Nov 2011 02:40:07 +0100
Subject: [stringtemplate-interest] 2. Attempt: ANTLR code generation
 target/Stringtemplate: modifying the C-Runtime I
In-Reply-To: <8379E648-D30D-47B0-8754-0DD4D6BA232E@cs.usfca.edu>
References: <4EC560DD.3070208@aol.com>
	<8379E648-D30D-47B0-8754-0DD4D6BA232E@cs.usfca.edu>
Message-ID: <4ED04377.5060307@aol.com>

Hello Terence,

thanks for your answer!
I know, I know your students and the end of the year....

>> I startet to modify the C-Runtime and have a first bunch of
>> questions. Be sure, more will follow - "Eeek, what a pain!"...
>>
>> 1.<token>  in<action>
>>      I need the token of an rule in the<action>-section
>>      /** How to execute an action (when not backtracking) */
>>      execAction(action) ::=<<
>>      <if(backtracking)>
>>      <if(actions.(actionScope).synpredgate)>
>>      if (<actions.(actionScope).synpredgate>  )
>>      ...
>>      <ruleDescriptor.name>  and<ruleName>  are replaced (what is the
>>      difference?) but<token>  not. Why?
>
> So in the execAction template you want to reference<token>? What do you mean by token in a rule? you can get a tree for the rule in the Rule object:
>
> 	/** The AST representing the whole rule */
> 	public GrammarAST tree;

Attached you will find a pdf-file which explains my problem -
state-of-the-art highlighted in colour!
And then there is still the question:
   <ruleDescriptor.name> and <ruleName> what is the difference?

I asked Jim already - I just copied his template-dir, renamed the
file C.stg to CRtMod1a.stg and added my "pathfinder"-comments
beginning with //! , followed by tg__ (test grammar) or tt__
(test template). Only the *.c-file is generated, the *.h-file
is missing. Why?


Again many thanks and greetings
Udo





-------------- next part --------------
A non-text attachment was scrubbed...
Name: CRtMod1a__Test1aParser.pdf
Type: application/pdf
Size: 6296 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20111126/d7dbb360/attachment.pdf 

From jiwon at stanford.edu  Mon Nov 28 02:08:22 2011
From: jiwon at stanford.edu (Jiwon Seo)
Date: Mon, 28 Nov 2011 02:08:22 -0800
Subject: [stringtemplate-interest] Question on using index variable(<i> and
	<i0>) in invoked template
Message-ID: <CAGWbJj__J8YWcjtekV0Wv-M+XKNKVuXJ6YVrE1W1nGdfs8F-7A@mail.gmail.com>

Hi,

I'm trying to invoke a template inside an anonymous template as following:

<sorted:{s|<if(s)><insert("pos", <i0>)><endif>}; separator=";\n">

So, for each value (s) in the attribute sorted, I want to add a string
generated by the template insert only when s has the value true.
When invoking the insert template, I need to pass the iteration count
(index of s in the sorted).

The above template code produces an error message that <i0> is
unexpected (more accurately, the "<" is unexpected).

How can I pass the iteration count to the invoked template?

Thanks!

From parrt at cs.usfca.edu  Mon Nov 28 09:02:39 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 28 Nov 2011 09:02:39 -0800
Subject: [stringtemplate-interest] Question on using index variable(<i>
	and <i0>) in invoked template
In-Reply-To: <CAGWbJj__J8YWcjtekV0Wv-M+XKNKVuXJ6YVrE1W1nGdfs8F-7A@mail.gmail.com>
References: <CAGWbJj__J8YWcjtekV0Wv-M+XKNKVuXJ6YVrE1W1nGdfs8F-7A@mail.gmail.com>
Message-ID: <593A0E39-5573-459A-B4F4-B05AC09A49AB@cs.usfca.edu>

hi. once inside <?> just use i0.  <insert("pos", i0)> :)
Ter
On Nov 28, 2011, at 2:08 AM, Jiwon Seo wrote:

> Hi,
> 
> I'm trying to invoke a template inside an anonymous template as following:
> 
> <sorted:{s|<if(s)><insert("pos", <i0>)><endif>}; separator=";\n">
> 
> So, for each value (s) in the attribute sorted, I want to add a string
> generated by the template insert only when s has the value true.
> When invoking the insert template, I need to pass the iteration count
> (index of s in the sorted).
> 
> The above template code produces an error message that <i0> is
> unexpected (more accurately, the "<" is unexpected).
> 
> How can I pass the iteration count to the invoked template?
> 
> Thanks!
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/stringtemplate-interest


From jiwon at stanford.edu  Mon Nov 28 11:03:41 2011
From: jiwon at stanford.edu (Jiwon Seo)
Date: Mon, 28 Nov 2011 11:03:41 -0800
Subject: [stringtemplate-interest] Question on using index variable(<i>
 and <i0>) in invoked template
In-Reply-To: <593A0E39-5573-459A-B4F4-B05AC09A49AB@cs.usfca.edu>
References: <CAGWbJj__J8YWcjtekV0Wv-M+XKNKVuXJ6YVrE1W1nGdfs8F-7A@mail.gmail.com>
	<593A0E39-5573-459A-B4F4-B05AC09A49AB@cs.usfca.edu>
Message-ID: <CAGWbJj-8NGNGuGtcJFxi7n-vx1O1e9E-TJ_FzhnHTV25+8w+TA@mail.gmail.com>

Thanks.

Actually I have one more question.
What I really want to do is to concatenate <i0> with a constant string
and pass it as an argument
as following:

<sorted:{s|<if(s)><insert("pos", "prefix"+<i0>)><endif>}; separator=";\n">

but it seems like it doesn't work with or without <>

-Jiwon


On Mon, Nov 28, 2011 at 9:02 AM, Terence Parr <parrt at cs.usfca.edu> wrote:
> hi. once inside <?> just use i0. ?<insert("pos", i0)> :)
> Ter
> On Nov 28, 2011, at 2:08 AM, Jiwon Seo wrote:
>
>> Hi,
>>
>> I'm trying to invoke a template inside an anonymous template as following:
>>
>> <sorted:{s|<if(s)><insert("pos", <i0>)><endif>}; separator=";\n">
>>
>> So, for each value (s) in the attribute sorted, I want to add a string
>> generated by the template insert only when s has the value true.
>> When invoking the insert template, I need to pass the iteration count
>> (index of s in the sorted).
>>
>> The above template code produces an error message that <i0> is
>> unexpected (more accurately, the "<" is unexpected).
>>
>> How can I pass the iteration count to the invoked template?
>>
>> Thanks!
>> _______________________________________________
>> stringtemplate-interest mailing list
>> stringtemplate-interest at antlr.org
>> http://www.antlr.org/mailman/listinfo/stringtemplate-interest
>
>

From mwipliez at yahoo.fr  Mon Nov 28 11:13:42 2011
From: mwipliez at yahoo.fr (Matthieu Wipliez)
Date: Mon, 28 Nov 2011 19:13:42 +0000 (GMT)
Subject: [stringtemplate-interest] Re : Question on using index variable(<i>
	and <i0>) in invoked template
In-Reply-To: <CAGWbJj-8NGNGuGtcJFxi7n-vx1O1e9E-TJ_FzhnHTV25+8w+TA@mail.gmail.com>
References: <CAGWbJj__J8YWcjtekV0Wv-M+XKNKVuXJ6YVrE1W1nGdfs8F-7A@mail.gmail.com>
	<593A0E39-5573-459A-B4F4-B05AC09A49AB@cs.usfca.edu>
	<CAGWbJj-8NGNGuGtcJFxi7n-vx1O1e9E-TJ_FzhnHTV25+8w+TA@mail.gmail.com>
Message-ID: <1322507622.49508.YahooMailNeo@web25701.mail.ukl.yahoo.com>

Hi Jiwon,

you can use an anonymous template to do that:

<insert("pos", {prefix<i0>})>

(the + operator is not available in ST 4 IIRC)

Cheers
Matthieu




>________________________________
> De?: Jiwon Seo <jiwon at stanford.edu>
>??: Terence Parr <parrt at cs.usfca.edu> 
>Cc?: stringtemplate-interest at antlr.org 
>Envoy? le : Lundi 28 Novembre 2011 20h03
>Objet?: Re: [stringtemplate-interest] Question on using index variable(<i> and <i0>) in invoked template
> 
>Thanks.
>
>Actually I have one more question.
>What I really want to do is to concatenate <i0> with a constant string
>and pass it as an argument
>as following:
>
><sorted:{s|<if(s)><insert("pos", "prefix"+<i0>)><endif>}; separator=";\n">
>
>but it seems like it doesn't work with or without <>
>
>-Jiwon
>
>
>On Mon, Nov 28, 2011 at 9:02 AM, Terence Parr <parrt at cs.usfca.edu> wrote:
>> hi. once inside <?> just use i0. ?<insert("pos", i0)> :)
>> Ter
>> On Nov 28, 2011, at 2:08 AM, Jiwon Seo wrote:
>>
>>> Hi,
>>>
>>> I'm trying to invoke a template inside an anonymous template as following:
>>>
>>> <sorted:{s|<if(s)><insert("pos", <i0>)><endif>}; separator=";\n">
>>>
>>> So, for each value (s) in the attribute sorted, I want to add a string
>>> generated by the template insert only when s has the value true.
>>> When invoking the insert template, I need to pass the iteration count
>>> (index of s in the sorted).
>>>
>>> The above template code produces an error message that <i0> is
>>> unexpected (more accurately, the "<" is unexpected).
>>>
>>> How can I pass the iteration count to the invoked template?
>>>
>>> Thanks!
>>> _______________________________________________
>>> stringtemplate-interest mailing list
>>> stringtemplate-interest at antlr.org
>>> http://www.antlr.org/mailman/listinfo/stringtemplate-interest
>>
>>
>_______________________________________________
>stringtemplate-interest mailing list
>stringtemplate-interest at antlr.org
>http://www.antlr.org/mailman/listinfo/stringtemplate-interest
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20111128/46b8bf99/attachment.html 

From jiwon at stanford.edu  Mon Nov 28 11:24:52 2011
From: jiwon at stanford.edu (Jiwon Seo)
Date: Mon, 28 Nov 2011 11:24:52 -0800
Subject: [stringtemplate-interest] Re : Question on using index
 variable(<i> and <i0>) in invoked template
In-Reply-To: <1322507622.49508.YahooMailNeo@web25701.mail.ukl.yahoo.com>
References: <CAGWbJj__J8YWcjtekV0Wv-M+XKNKVuXJ6YVrE1W1nGdfs8F-7A@mail.gmail.com>
	<593A0E39-5573-459A-B4F4-B05AC09A49AB@cs.usfca.edu>
	<CAGWbJj-8NGNGuGtcJFxi7n-vx1O1e9E-TJ_FzhnHTV25+8w+TA@mail.gmail.com>
	<1322507622.49508.YahooMailNeo@web25701.mail.ukl.yahoo.com>
Message-ID: <CAGWbJj__0oSO5fboVHEpE8uSHTZXLVNFBQ8fahyLPV-1bjgB1w@mail.gmail.com>

When I try to do that, it says "mismatched input '{' expecting ELLIPSIS"

<sorted:{s|<if(s)><insertSorted(pos="pos",
{"pref"<i0>},{"pref"<i0>})><endif>}; separator=";\n">

I tried with and without <> and also with and without "" ("pref" vs pref)

Should that work?

On Mon, Nov 28, 2011 at 11:13 AM, Matthieu Wipliez <mwipliez at yahoo.fr> wrote:
> Hi Jiwon,
> you can use an anonymous template to do that:
> <insert("pos", {prefix<i0>})>
> (the + operator is not available in ST 4 IIRC)
> Cheers
> Matthieu
>
> ________________________________
> De?: Jiwon Seo <jiwon at stanford.edu>
> ??: Terence Parr <parrt at cs.usfca.edu>
> Cc?: stringtemplate-interest at antlr.org
> Envoy? le : Lundi 28 Novembre 2011 20h03
> Objet?: Re: [stringtemplate-interest] Question on using index variable(<i>
> and <i0>) in invoked template
>
> Thanks.
>
> Actually I have one more question.
> What I really want to do is to concatenate <i0> with a constant string
> and pass it as an argument
> as following:
>
> <sorted:{s|<if(s)><insert("pos", "prefix"+<i0>)><endif>}; separator=";\n">
>
> but it seems like it doesn't work with or without <>
>
> -Jiwon
>
>
> On Mon, Nov 28, 2011 at 9:02 AM, Terence Parr <parrt at cs.usfca.edu> wrote:
>> hi. once inside <?> just use i0. ?<insert("pos", i0)> :)
>> Ter
>> On Nov 28, 2011, at 2:08 AM, Jiwon Seo wrote:
>>
>>> Hi,
>>>
>>> I'm trying to invoke a template inside an anonymous template as
>>> following:
>>>
>>> <sorted:{s|<if(s)><insert("pos", <i0>)><endif>}; separator=";\n">
>>>
>>> So, for each value (s) in the attribute sorted, I want to add a string
>>> generated by the template insert only when s has the value true.
>>> When invoking the insert template, I need to pass the iteration count
>>> (index of s in the sorted).
>>>
>>> The above template code produces an error message that <i0> is
>>> unexpected (more accurately, the "<" is unexpected).
>>>
>>> How can I pass the iteration count to the invoked template?
>>>
>>> Thanks!
>>> _______________________________________________
>>> stringtemplate-interest mailing list
>>> stringtemplate-interest at antlr.org
>>> http://www.antlr.org/mailman/listinfo/stringtemplate-interest
>>
>>
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/stringtemplate-interest
>
>
>

From jiwon at stanford.edu  Mon Nov 28 11:34:21 2011
From: jiwon at stanford.edu (Jiwon Seo)
Date: Mon, 28 Nov 2011 11:34:21 -0800
Subject: [stringtemplate-interest] Re : Question on using index
 variable(<i> and <i0>) in invoked template
In-Reply-To: <CAGWbJj__0oSO5fboVHEpE8uSHTZXLVNFBQ8fahyLPV-1bjgB1w@mail.gmail.com>
References: <CAGWbJj__J8YWcjtekV0Wv-M+XKNKVuXJ6YVrE1W1nGdfs8F-7A@mail.gmail.com>
	<593A0E39-5573-459A-B4F4-B05AC09A49AB@cs.usfca.edu>
	<CAGWbJj-8NGNGuGtcJFxi7n-vx1O1e9E-TJ_FzhnHTV25+8w+TA@mail.gmail.com>
	<1322507622.49508.YahooMailNeo@web25701.mail.ukl.yahoo.com>
	<CAGWbJj__0oSO5fboVHEpE8uSHTZXLVNFBQ8fahyLPV-1bjgB1w@mail.gmail.com>
Message-ID: <CAGWbJj_oK6Lpwxcq4XY1P+-X66owf_eg1OGh21iVSVA87EFjrQ@mail.gmail.com>

I ended up doing this:

<sorted:{s|<if(s)><insert("pos",
concat("prefix",i0),concat("prefix",i0))><endif>}; separator=";\n">

where concat concatenates the two input strings.

Is this the right way (and clean way) to do what I want?

Thanks.

On Mon, Nov 28, 2011 at 11:24 AM, Jiwon Seo <jiwon at stanford.edu> wrote:
> When I try to do that, it says "mismatched input '{' expecting ELLIPSIS"
>
> <sorted:{s|<if(s)><insertSorted(pos="pos",
> {"pref"<i0>},{"pref"<i0>})><endif>}; separator=";\n">
>
> I tried with and without <> and also with and without "" ("pref" vs pref)
>
> Should that work?
>
> On Mon, Nov 28, 2011 at 11:13 AM, Matthieu Wipliez <mwipliez at yahoo.fr> wrote:
>> Hi Jiwon,
>> you can use an anonymous template to do that:
>> <insert("pos", {prefix<i0>})>
>> (the + operator is not available in ST 4 IIRC)
>> Cheers
>> Matthieu
>>
>> ________________________________
>> De?: Jiwon Seo <jiwon at stanford.edu>
>> ??: Terence Parr <parrt at cs.usfca.edu>
>> Cc?: stringtemplate-interest at antlr.org
>> Envoy? le : Lundi 28 Novembre 2011 20h03
>> Objet?: Re: [stringtemplate-interest] Question on using index variable(<i>
>> and <i0>) in invoked template
>>
>> Thanks.
>>
>> Actually I have one more question.
>> What I really want to do is to concatenate <i0> with a constant string
>> and pass it as an argument
>> as following:
>>
>> <sorted:{s|<if(s)><insert("pos", "prefix"+<i0>)><endif>}; separator=";\n">
>>
>> but it seems like it doesn't work with or without <>
>>
>> -Jiwon
>>
>>
>> On Mon, Nov 28, 2011 at 9:02 AM, Terence Parr <parrt at cs.usfca.edu> wrote:
>>> hi. once inside <?> just use i0. ?<insert("pos", i0)> :)
>>> Ter
>>> On Nov 28, 2011, at 2:08 AM, Jiwon Seo wrote:
>>>
>>>> Hi,
>>>>
>>>> I'm trying to invoke a template inside an anonymous template as
>>>> following:
>>>>
>>>> <sorted:{s|<if(s)><insert("pos", <i0>)><endif>}; separator=";\n">
>>>>
>>>> So, for each value (s) in the attribute sorted, I want to add a string
>>>> generated by the template insert only when s has the value true.
>>>> When invoking the insert template, I need to pass the iteration count
>>>> (index of s in the sorted).
>>>>
>>>> The above template code produces an error message that <i0> is
>>>> unexpected (more accurately, the "<" is unexpected).
>>>>
>>>> How can I pass the iteration count to the invoked template?
>>>>
>>>> Thanks!
>>>> _______________________________________________
>>>> stringtemplate-interest mailing list
>>>> stringtemplate-interest at antlr.org
>>>> http://www.antlr.org/mailman/listinfo/stringtemplate-interest
>>>
>>>
>> _______________________________________________
>> stringtemplate-interest mailing list
>> stringtemplate-interest at antlr.org
>> http://www.antlr.org/mailman/listinfo/stringtemplate-interest
>>
>>
>>
>

From jiwon at stanford.edu  Mon Nov 28 12:02:02 2011
From: jiwon at stanford.edu (Jiwon Seo)
Date: Mon, 28 Nov 2011 12:02:02 -0800
Subject: [stringtemplate-interest] Indentation question
Message-ID: <CAGWbJj_2Whi3NyAdAY_zNpYxJT5Zbt2CQd1YhJT9tvTU6=Ch_A@mail.gmail.com>

I have a template like following (except that it is much more
complicated, so I want to write it in multiple lines):

 <sorted: {s|<if(s)><insert("arg"))><endif>}>

When I try to write this in multiple lines as:

 <sorted: {s|<if(s)>
                  <insert("arg"))>
                  <endif>}>

It automatically adds indentations. Is there any way to not to have
the indentation?
Does the minus(-) work for STv4?  (like <-insert("arg") ...)

Thanks.

From parrt at cs.usfca.edu  Wed Nov 30 10:25:26 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 30 Nov 2011 10:25:26 -0800
Subject: [stringtemplate-interest] Indentation question
In-Reply-To: <CAGWbJj_2Whi3NyAdAY_zNpYxJT5Zbt2CQd1YhJT9tvTU6=Ch_A@mail.gmail.com>
References: <CAGWbJj_2Whi3NyAdAY_zNpYxJT5Zbt2CQd1YhJT9tvTU6=Ch_A@mail.gmail.com>
Message-ID: <CCFF3A3F-B058-4B0F-B002-3BF0737E20A8@cs.usfca.edu>

I think that you have to remove the indentation manually:

<sorted: {s|<if(s)>
<insert("arg"))>
<endif>}>

ter
On Nov 28, 2011, at 12:02 PM, Jiwon Seo wrote:

> I have a template like following (except that it is much more
> complicated, so I want to write it in multiple lines):
> 
> <sorted: {s|<if(s)><insert("arg"))><endif>}>
> 
> When I try to write this in multiple lines as:
> 
> <sorted: {s|<if(s)>
>                  <insert("arg"))>
>                  <endif>}>
> 
> It automatically adds indentations. Is there any way to not to have
> the indentation?
> Does the minus(-) work for STv4?  (like <-insert("arg") ...)
> 
> Thanks.
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/stringtemplate-interest


