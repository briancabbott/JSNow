<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [stringtemplate-interest] nesting one formatted string within	another formatted string
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:stringtemplate-interest%40antlr.org?Subject=Re:%20%5Bstringtemplate-interest%5D%20nesting%20one%20formatted%20string%20within%0A%09another%20formatted%20string&In-Reply-To=%3CAANLkTinFah_DOEXPJ%2BbwG%2BtcxDpvcaXsUiMsaoyfP5ut%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003057.html">
   <LINK REL="Next"  HREF="003044.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[stringtemplate-interest] nesting one formatted string within	another formatted string</H1>
    <B>Eric B</B> 
    <A HREF="mailto:stringtemplate-interest%40antlr.org?Subject=Re:%20%5Bstringtemplate-interest%5D%20nesting%20one%20formatted%20string%20within%0A%09another%20formatted%20string&In-Reply-To=%3CAANLkTinFah_DOEXPJ%2BbwG%2BtcxDpvcaXsUiMsaoyfP5ut%40mail.gmail.com%3E"
       TITLE="[stringtemplate-interest] nesting one formatted string within	another formatted string">ebatzdor at gmail.com
       </A><BR>
    <I>Sat Jan 29 21:26:52 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="003057.html">[stringtemplate-interest] [ST4] Using a platform independent default charset/encoding (e.g. UTF-8)
</A></li>
        <LI>Next message: <A HREF="003044.html">[stringtemplate-interest] nesting one formatted string within	another formatted string
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3041">[ date ]</a>
              <a href="thread.html#3041">[ thread ]</a>
              <a href="subject.html#3041">[ subject ]</a>
              <a href="author.html#3041">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All,

I'm building up an HTML string that should ultimately resolve to something
like the following where someString is unknown and could contain special
characters...

&lt;img src=&quot;someImage.gif&quot; onClick=&quot;javascript:alert('someString');&quot;/&gt;


If someString really has special characters in it, it needs to be escaped
for JS and then entire onClick attribute value needs to be escaped for HTML.

To format the full attribute value as HTML with StringTemplate is no
problem:


escapeTest(someString) ::= &lt;&lt;
&lt;img src=&quot;someImage.gif&quot; onClick=&quot;$&quot;javascript:alert('&quot; + someString +
&quot;');&quot;;format=&quot;HTML&quot;$&quot;/&gt;
&gt;&gt;<i>
</I>

And to format someString as JS without formatting the HTML is no problem .
 I do something like:

escapeTest(someString) ::= &lt;&lt;
&lt;img src=&quot;someImage.gif&quot;
onClick=&quot;javascript:alert('$someString;format=&quot;JS&quot;$');&quot;/&gt;
&gt;&gt;<i>
</I>

But I could not figure out a way to use the format option on someString when
it's nested in a formatted expression.

The most graceful way I could figure to do this was to JS escape with
another template... like so:

jsEscape(jsString) ::= &lt;&lt;
$jsString;format=&quot;JS&quot;$
&gt;&gt;<i>
</I>
escapeTest(someString) ::= &lt;&lt;
&lt;img src=&quot;someImage.gif&quot; onClick=&quot;$&quot;javascript:alert('&quot; +
jsEscape(someString) + &quot;');&quot;;format=&quot;HTML&quot;$&quot;/&gt;
&gt;&gt;<i>
</I>

Does this seem the best I can do?  Or does the syntax support using an
in-line format on someString?

Thanks!,

Eric
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20110129/e872a880/attachment.html">http://www.antlr.org/pipermail/stringtemplate-interest/attachments/20110129/e872a880/attachment.html</A> 
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003057.html">[stringtemplate-interest] [ST4] Using a platform independent default charset/encoding (e.g. UTF-8)
</A></li>
	<LI>Next message: <A HREF="003044.html">[stringtemplate-interest] nesting one formatted string within	another formatted string
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3041">[ date ]</a>
              <a href="thread.html#3041">[ thread ]</a>
              <a href="subject.html#3041">[ subject ]</a>
              <a href="author.html#3041">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">More information about the stringtemplate-interest
mailing list</a><br>
</body></html>
