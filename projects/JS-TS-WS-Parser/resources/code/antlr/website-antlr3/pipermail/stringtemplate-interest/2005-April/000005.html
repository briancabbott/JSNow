<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [stringtemplate-interest] Iterating over a map
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:stringtemplate-interest%40antlr.org?Subject=%5Bstringtemplate-interest%5D%20Iterating%20over%20a%20map&In-Reply-To=3a9221d4a8fb2ddd7546f9285a31e3f9%40cs.usfca.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000004.html">
   <LINK REL="Next"  HREF="000006.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[stringtemplate-interest] Iterating over a map</H1>
    <B>Tom Bentley</B> 
    <A HREF="mailto:stringtemplate-interest%40antlr.org?Subject=%5Bstringtemplate-interest%5D%20Iterating%20over%20a%20map&In-Reply-To=3a9221d4a8fb2ddd7546f9285a31e3f9%40cs.usfca.edu"
       TITLE="[stringtemplate-interest] Iterating over a map">tom at egressive.com
       </A><BR>
    <I>Tue Apr 19 14:21:29 PDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000004.html">[stringtemplate-interest] Iterating over a map
</A></li>
        <LI>Next message: <A HREF="000006.html">[stringtemplate-interest] Python StringTemplate port released!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5">[ date ]</a>
              <a href="thread.html#5">[ thread ]</a>
              <a href="subject.html#5">[ subject ]</a>
              <a href="author.html#5">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> Hi Tom...sorry I missed this...somehow I didn't get email from the 
</I>&gt;<i> list.  I switched my emails; all should be cool now.
</I>
No sweat!

&gt;<i> THe rationale is that it is iteratable according to java.  Couldn't 
</I>&gt;<i> think of a useful override, so I left it ;)
</I>
That's fair enough.

&gt;<i> No, you are right!  The only problem is that I'd have to create a &quot;temp&quot; 
</I>&gt;<i> object with fields key/value for each iteration.  I guess that's not so 
</I>&gt;<i> bad...I like it!  Ok, i'm putting on my to do list!
</I>
I have some working code, if you're interested.

I basically used entrySet() rather than values() in 
ASTExpr.convertAnythingIterableToIterator(), this means iterator 
expressions are now iterating over Map.Entrys, which thankfully have 
getKey() and getValue(), so everything behaves as you might expect.

There is a snag though: The implementation of Map.Entry (for a HashMap 
at least) is not a public class, so you can't invoke the getKey() and 
getValue() method using reflection because the method is not accessible. 
I found this quite surprising. I had to write an extra method to make a 
public method declared by a public interface, but implemented by a 
non-public class accessible. [Sorry, this was maybe more detail than you 
wanted to know ;-)]

Cheers,

Tom
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000004.html">[stringtemplate-interest] Iterating over a map
</A></li>
	<LI>Next message: <A HREF="000006.html">[stringtemplate-interest] Python StringTemplate port released!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5">[ date ]</a>
              <a href="thread.html#5">[ thread ]</a>
              <a href="subject.html#5">[ subject ]</a>
              <a href="author.html#5">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest">More information about the stringtemplate-interest
mailing list</a><br>
</body></html>
