<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [stringtemplate-interest] Web template caching
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:stringtemplate-interest%40antlr.org?Subject=Re:%20%5Bstringtemplate-interest%5D%20Web%20template%20caching&In-Reply-To=%3C2F55860E-E1C2-486B-A126-15556A10AE2A%40cs.usfca.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003975.html">
   <LINK REL="Next"  HREF="003976.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[stringtemplate-interest] Web template caching</H1>
    <B>Terence Parr</B> 
    <A HREF="mailto:stringtemplate-interest%40antlr.org?Subject=Re:%20%5Bstringtemplate-interest%5D%20Web%20template%20caching&In-Reply-To=%3C2F55860E-E1C2-486B-A126-15556A10AE2A%40cs.usfca.edu%3E"
       TITLE="[stringtemplate-interest] Web template caching">parrt at cs.usfca.edu
       </A><BR>
    <I>Sat Jun 30 12:16:09 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="003975.html">[stringtemplate-interest] Web template caching
</A></li>
        <LI>Next message: <A HREF="003976.html">[stringtemplate-interest] [antlr-interest] Antlr3 in Eclipse	and Maven?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3980">[ date ]</a>
              <a href="thread.html#3980">[ thread ]</a>
              <a href="subject.html#3980">[ subject ]</a>
              <a href="author.html#3980">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Ed,Sorry for the delay&#8230;I'm completely overwhelms doing 2 jobs and work until probably September or October. ugh!

yeah, I can't remember what my philosophy was a few years ago concerning caching but I likely decided that it was an easy fix for someone to create a subclass of STGroup to handle.

 Unfortunately, I don't have time at the moment to go dig into the software to try to remember what I intended&#8230; as anybody else tried to do some caching?
Ter
On Jun 17, 2012, at 5:00 PM, Edward Coffey wrote:

&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I'm attempting to use ST4 to do fairly simple web templating using raw templates. STRawGroupDir and the getInstanceOf method seems to be the recommended approach according to the documentation I've read. This method checks STGroup's templates map to see if there's already a CompiledST instance there, never stores anything in the map, so every request attempts to load the template as a .stg file, fails, then actually loads the correct .st file. Even without the first attempted load, opening a file for every hit on the web server is far too many opens.
</I>&gt;<i> 
</I>&gt;<i> In a sleep-deprived state last night I reimplemented STRawGroupDir's load method, having it store any CompiledST it produces in a cache (not STGroup's templates map, but an independent EHCache instance). It works, increases performance, and gets rid of the occasional &quot;too many open files&quot; error I was getting under high load.
</I>&gt;<i> 
</I>&gt;<i> In the cold light of day, that seems like a brave (foolish) approach, given how little I know of the internals of ST4 (in general, and specifically in regard to the thread safety of CompiledST instances). It seems like I'm probably missing something pretty fundamental here - like &quot;is getInstanceOf even the right method to call, or is there an alternative method if I want to avoid the file-open hit each time?&quot; or similar questions. Can someone point me in the right direction?
</I>&gt;<i> 
</I>&gt;<i> Regards, 
</I>&gt;<i> Ed.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> stringtemplate-interest mailing list
</I>&gt;<i> <A HREF="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">stringtemplate-interest at antlr.org</A>
</I>&gt;<i> <A HREF="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">http://www.antlr.org/mailman/listinfo/stringtemplate-interest</A>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003975.html">[stringtemplate-interest] Web template caching
</A></li>
	<LI>Next message: <A HREF="003976.html">[stringtemplate-interest] [antlr-interest] Antlr3 in Eclipse	and Maven?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3980">[ date ]</a>
              <a href="thread.html#3980">[ thread ]</a>
              <a href="subject.html#3980">[ subject ]</a>
              <a href="author.html#3980">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/stringtemplate-interest">More information about the stringtemplate-interest
mailing list</a><br>
</body></html>
