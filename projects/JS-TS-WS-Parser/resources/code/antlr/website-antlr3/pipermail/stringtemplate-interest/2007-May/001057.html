<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [stringtemplate-interest] template expressiveness
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:stringtemplate-interest%40antlr.org?Subject=Re:%20%5Bstringtemplate-interest%5D%20template%20expressiveness&In-Reply-To=%3C46453971.4050802%40n4te.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001055.html">
   <LINK REL="Next"  HREF="001058.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[stringtemplate-interest] template expressiveness</H1>
    <B>Nate</B> 
    <A HREF="mailto:stringtemplate-interest%40antlr.org?Subject=Re:%20%5Bstringtemplate-interest%5D%20template%20expressiveness&In-Reply-To=%3C46453971.4050802%40n4te.com%3E"
       TITLE="[stringtemplate-interest] template expressiveness">misc at n4te.com
       </A><BR>
    <I>Fri May 11 20:50:09 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="001055.html">[stringtemplate-interest] template expressiveness
</A></li>
        <LI>Next message: <A HREF="001058.html">[stringtemplate-interest] template expressiveness
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1057">[ date ]</a>
              <a href="thread.html#1057">[ thread ]</a>
              <a href="subject.html#1057">[ subject ]</a>
              <a href="author.html#1057">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Terence Parr wrote:
&gt;<i> On May 11, 2007, at 11:00 AM, Nate wrote:
</I>&gt;<i>   
</I>&gt;&gt;&gt;<i> So you are in favor of allowing randomfunction(randomarg).   
</I>&gt;&gt;&gt;<i> That's  fine.  Plenty of other turing complete template engines if  
</I>&gt;&gt;&gt;<i> you'd  prefer.  Note I've built many sites and I've not had a  
</I>&gt;&gt;&gt;<i> problem.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>       
</I>&gt;&gt;<i> I'm not suggesting calling any function with any argument. I'm  
</I>&gt;&gt;<i> suggesting allowing elements to be picked out of a list by index.
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> I'm not sure what value a[i] would be. you cannot change i inside the  
</I>&gt;<i> template.  That means is the same has a fixed named property in an  
</I>&gt;<i> object.  why not use an object instead? a[i] doesn't really buy you  
</I>&gt;<i> anything as far as I can tell.
</I>&gt;<i>
</I>&gt;<i>   
</I>&gt;&gt;<i> Are you even reading my messages? From your lack of capitalization  
</I>&gt;&gt;<i> in most of your responses, I assume you skim through emails and  
</I>&gt;&gt;<i> whip up quick replies.
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i>   I have extreme tendinitis after 26 years of hacking and I have use  
</I>&gt;<i> voice recognition, which makes things very challenging.
</I>I also suffer from wrist pain, though I can still type on a daily basis. 
I alternate mousing hands and use a Kensington Expert trackball (the 
scroll wheel around the ball is great). I also alternate between the 
trackball and an IR head tracker. You might want to give the head 
tracker a try, it is pretty awesome and priced reasonably ($200) 
compared to other head trackers...
<A HREF="http://www.naturalpoint.com/smartnav/">http://www.naturalpoint.com/smartnav/</A>
It requires a small reflective dot to be worn on the foreheard. This 
isn't that big of a deal, except when I forget and go to the grocery 
store with it on. :p I use capslock for clicking, but I've thought about 
getting a pedal switch.

&gt;&gt;<i> I never asked for a turing complete template engine. Apparently, if  
</I>&gt;&gt;<i> someone suggests something you don't understand or don't agree  
</I>&gt;&gt;<i> with, then you tell them they must be using the wrong tool and  
</I>&gt;&gt;<i> should leave? I think I will take your advice. I have found it  
</I>&gt;&gt;<i> difficult to contribute. For example, it took about four emails to  
</I>&gt;&gt;<i> convey how formal argument checking is flawed. Even then, I'm not  
</I>&gt;&gt;<i> sure you actually understand the problem and I am skeptical that it  
</I>&gt;&gt;<i> will be fixed in a future version.
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> Given my experience in the area, you should question whether you are  
</I>&gt;<i> describing things clearly or I am not understanding things.
</I>I put extra effort into articulating clearly and I re-read my emails for 
clarity before I send them. Your experience in the area doesn't make up 
for lack of attention. While I'm sure I can be incoherent at times, I 
don't think that is what happend regarding the formal argument checking.

&gt;<i> As you might imagine, I am tired of making the same arguments over  
</I>&gt;<i> and over and over about separation.  Every single engine in the world  
</I>&gt;<i> let you do what you want, and you pick the one that forces separation  
</I>&gt;<i> and then complain about not being able to do what you want.  Why did  
</I>&gt;<i> you pick ST?  Seriously?
</I>&gt;<i>   
</I>Separation is good. Lack of expressiveness is bad. All my complaints are 
centered around expressiveness, not the want to break separation.

&gt;&gt;&gt;<i> Yes, but what about using stuff[i] where i is an attribute (stuff 
</I>&gt;&gt;&gt;<i> [32]  is probably useless)?  In that case you assume is an int.   
</I>&gt;&gt;&gt;<i> What if  you change to a string with a char like '2-321'?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>       
</I>&gt;&gt;<i> stuff[i] gets element at index &quot;i&quot;. If &quot;i&quot; is not an integer, an  
</I>&gt;&gt;<i> exception is thrown. Lists can only be indexed by integers, so  
</I>&gt;&gt;<i> where did you get the idea I was asking for randomfunction(randomarg)?
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> Because that is the equivalent of calling stuff.index(i)
</I>&gt;<i>   
</I>It is equivalent to calling &quot;((List)stuff).get(i)&quot;, which is not at all 
arbitrary.

&gt;&gt;&gt;&gt;<i> No matter how hard you try, you cannot make StringTemplate both   
</I>&gt;&gt;&gt;&gt;<i> useful AND impossible to break separation.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>         
</I>&gt;&gt;&gt;<i> Well i've made a few things that are grey area for usability, but   
</I>&gt;&gt;&gt;<i> actually I think I can 'cause I have done useful things w/o  
</I>&gt;&gt;&gt;<i> opening  it up. ;)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>       
</I>&gt;&gt;<i> I can implement Map and invoke random code using an argument passed  
</I>&gt;&gt;<i> in from a template: line 425 of ASTExpr.java, ST v3.0. How much  
</I>&gt;&gt;<i> more open can you get?
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> It is all about making things as difficult as possible.  Clearly, as  
</I>&gt;<i> a developer, you could simply alter string template.  I cannot  
</I>&gt;<i> prevent people from circumventing my intentions.  Programmers have  
</I>&gt;<i> ultimate control.
</I>&gt;<i>   
</I>ST allows map access because it allows people to do their work easier. 
Allowing map access allows people to abuse it to break separation, but 
because breaking separation in this way is difficult, ST allows it. We 
seem to be in agreement here. If so, then I'm not sure why we are 
arguing. I am just trying to explore how we can increase expressiveness 
once we conclude that having separation exploits are acceptable as long 
as the exploits are not easily performed.

&gt;&gt;&gt;<i> Really? No problem.  factor into more templates then pass  
</I>&gt;&gt;&gt;<i> arguments.   easy.  just like function calls right?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>       
</I>&gt;&gt;<i> As it is, I am required to have two *completely* separate templates  
</I>&gt;&gt;<i> that are identical, except they output different colored TR tags...
</I>&gt;&gt;<i> $stuff:row1(), row2()$
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If ST could curry, then it would work...
</I>&gt;&gt;<i> $stuff:row(color=&quot;red&quot;), row(color=&quot;blue&quot;)$
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> Ah!  That doesn't work!  crap. added as a bug:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.antlr.org:8888/browse/ST-24">http://www.antlr.org:8888/browse/ST-24</A>
</I>&gt;<i>   
</I>I didn't realize that was supposed to work! I saw your other email that 
it actually does work. This is going to help an enormous amount! I don't 
believe this is documented, though it is not impossible that I missed it.

&gt;&gt;<i> A potentially better solution...
</I>&gt;&gt;<i> $stuff:{
</I>&gt;&gt;<i>    &lt;tr $if(i % 2)$style=&quot;color:red&quot;$endif$&gt;&lt;td&gt;$it.name$&lt;/td&gt;&lt;/tr&gt;
</I>&gt;&gt;<i> }$
</I>&gt;&gt;<i> Ideally, I should be able to fully manipulate attributes that did  
</I>&gt;&gt;<i> not come from the model.
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> Correct. you can do anything you want with an attribute that does not  
</I>&gt;<i> come from the model. That would not break separation per se, although  
</I>&gt;<i> I think he would turn your template into a program, which is also  
</I>&gt;<i> something I don't want.  If order matters, then your template is part  
</I>&gt;<i> of your program.  I don't like side effects. certainly graphics  
</I>&gt;<i> designers do not understand these things, which makes it impossible  
</I>&gt;<i> than for you to have a real designer work on your templates.  I  
</I>&gt;<i> repeatedly asked all the other template designers how they get  
</I>&gt;<i> graphics designers to work with them, because in my experience, there  
</I>&gt;<i> is no way a graphic designer will be able to understand this. state  
</I>&gt;<i> is something they just don't understand.
</I>&gt;<i>   
</I>I can see both sides to having programming in templates. Sometimes state 
is going to be required if you can't change the controller. Maybe state 
could be so restricited that it doesn't affect the entire application 
(eg, only allow local variables in a template's scope). Maybe to balance 
out not having state, some kind of plugin mechanism could be available 
to solve specific template logic problems.

&gt;&gt;<i> Eg, since the int &quot;i&quot; comes from the view, I'd like to be able to  
</I>&gt;&gt;<i> say &quot;if (it % 3 == 1)&quot;. If &quot;it&quot; were to come from the model, then  
</I>&gt;&gt;<i> that should be invalid, since that would break separation.
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> Yes, but I don't like the idea of side effects at all in the template  
</I>&gt;<i> and as I say I don't like the idea of turning your template into a  
</I>&gt;<i> program. yes, that would be very convenient in some cases.
</I>&gt;<i>
</I>&gt;<i>   
</I>&gt;&gt;<i> Currently ST restricts template logic by applying the same  
</I>&gt;&gt;<i> constraints on template attributes as it does on model attributes.  
</I>&gt;&gt;<i> If the distinction could be made, it could open up an enormous  
</I>&gt;&gt;<i> amount of template expressiveness.
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> Yep. can you tell me your thoughts on the fact that now your template  
</I>&gt;<i> expressions would have in order and would become a program? I still  
</I>&gt;<i> think I'm opposed to it because the way you are asking for it means  
</I>&gt;<i> you are in fact adding logic into the template even if the logic is  
</I>&gt;<i> not a function of values in the model.  Imagine making another  
</I>&gt;<i> backend.  Would you not be copying all of that logic multiple times  
</I>&gt;<i> for each target?
</I>&gt;<i>   
</I>The template requires logic at some level. Eg, the ability to loop over 
some values and call other templates is the template logic. The entire 
template logic doesn't have to be copied when making a new skin for a 
site, for example.

I'm not yet sure if what I want is the templates to become a program. 
Without state, problems need to be solved with special handling, such as 
the round-robin template application. When the controller doesn't 
provide the data in quite the needed format for display with ST, there 
seems there is little else to do except refactor the controller.

I wonder if a set of templates could provide a Java layer between the 
controller and the templates. The layer could munge the attributes in 
whatever complex ways the set of templates require. This  seems quite a 
bit less bad than introducing programming inside templates. Maybe it 
could also provide attribute renderers? I have always felt funny writing 
an attribute renderer in Java.

-Nate
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001055.html">[stringtemplate-interest] template expressiveness
</A></li>
	<LI>Next message: <A HREF="001058.html">[stringtemplate-interest] template expressiveness
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1057">[ date ]</a>
              <a href="thread.html#1057">[ thread ]</a>
              <a href="subject.html#1057">[ subject ]</a>
              <a href="author.html#1057">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org:8080/mailman/listinfo/stringtemplate-interest">More information about the stringtemplate-interest
mailing list</a><br>
</body></html>
