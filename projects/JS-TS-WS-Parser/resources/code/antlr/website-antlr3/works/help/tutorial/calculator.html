<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml">	<head>		<meta http-equiv="content-type" content="text/html;charset=utf-8" />		<meta name="generator" content="Adobe GoLive" />		<title>Expression Evaluator Tutorial</title>	</head>	<body>		<h1><strong>Introduction</strong></h1>		<p>This tutorial describes how to use ANTLRWorks to create and run a simple &quot;expression evaluator&quot; grammar. This tutorial is under construction so come back later for more information.</p>		<h2><strong>Useful links</strong></h2>		<ul>			<li><a href="http://www.antlr.org/wiki/">ANTLR 3 wiki</a></li>			<li><a href="http://www.antlr.org/wiki/display/ANTLR3/Expression+evaluator">Description of the expression evaluator grammar</a></li>		</ul>		<h1><strong>Editor</strong></h1>			Enter the following grammar in the AW editor (or download it <a title="Expression evaluator grammar" href="content/Expr.g">here</a>):				<pre><font size="-1">grammar Expr;@header {package test;import java.util.HashMap;}@lexer::header {package test;}@members {/** Map variable name to Integer object holding value */HashMap memory = new HashMap();}prog:   stat+ ;                stat:   expr NEWLINE {System.out.println($expr.value);}    |   ID '=' expr NEWLINE        {memory.put($ID.text, new Integer($expr.value));}    |   NEWLINE    ;expr returns [int value]    :   e=multExpr {$value = $e.value;}        (   '+' e=multExpr {$value += $e.value;}        |   '-' e=multExpr {$value -= $e.value;}        )*    ;multExpr returns [int value]    :   e=atom {$value = $e.value;} ('*' e=atom {$value *= $e.value;})*    ; atom returns [int value]    :   INT {$value = Integer.parseInt($INT.text);}    |   ID        {        Integer v = (Integer)memory.get($ID.text);        if ( v!=null ) $value = v.intValue();        else System.err.println("undefined variable "+$ID.text);        }    |   '(' e=expr ')' {$value = $e.value;}    ;ID  :   ('a'..'z'|'A'..'Z')+ ;INT :   '0'..'9'+ ;NEWLINE:'\r'? '\n' ;WS  :   (' '|'\t')+ {skip();} ;</font></pre>		<p></p>		<h1><strong>Interpreter</strong></h1>		<p>The interpreter allows to quickly test the grammar with a sample input. For example, enter the input &quot;2+3*4&quot; (and return), make sure the rule &quot;prog&quot; is selected in the pop-up menu and click the button <img src="content/stepforward.png" alt="" width="17" height="16" border="0" /> to run the interpreter. The interpreter shows the parse tree, similar to this one:</p>		<p><img src="content/interpreter.png" alt="" width="946" height="711" border="0" /></p>		<h1><strong>Debugger</strong></h1>		<p>Now let's use the debugger to single step through the parse. Invoke the debugger (CTRL-D) and enter the same input text as with the interpreter &quot;2+3*4&quot; followed by return (note that the input text must be entered in the debugger input dialog that is displayed after invoking the <strong>Debugger &gt; Debug</strong> command - the Input Panel of the debugger is used to display the input tokens later on, while debugging). Make sure that the start rule is &quot;prog&quot;. Run the debugger. Single step using the button <img src="content/stepforward.png" alt="" width="17" height="16" border="0" />.</p>		<p>Note: it is possible that ANTLRWorks displays a message saying that the debugger cannot be launched because of a time-out waiting to connect to the remote parser. Most of the time this problem can be solved by doing the following:</p>		<ul>			<li>Either make sure the port used by the debugger is opened on your machine (by default, it is port 49153).</li>			<li>Or change the port used by the debugger in <strong>Preferences &gt; Debugger</strong>.</li>		</ul>		<p><img src="content/debug_1.png" alt="" width="946" height="711" border="0" /></p>		<p>When you reach the end of the parse (either manually or by using the button <img src="content/gotoend.png" alt="" width="18" height="16" border="0" />), notice that the output panel contains the resulting value, 14.</p>		<p><img src="content/debug_2.png" alt="" width="946" height="711" border="0" /></p>		<p></p>	</body></html>