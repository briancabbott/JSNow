<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml">	<head>		<meta http-equiv="content-type" content="text/html;charset=utf-8" />		<meta name="generator" content="Adobe GoLive" />		<title>Setup IntelliJ to edit, run and debug ANTLRWorks</title>	</head>	<body>		<h1><strong>Introduction</strong></h1>		<p>This tutorial describes how to setup IntelliJ to edit, run and debug ANTLRWorks and its plugin for IntelliJ. This tutorial uses path example for Windows but the steps are exactly the same for Linux or Mac OS X.</p>		<h2><strong>What you need</strong></h2>		<ul>			<li>IntelliJ 5.x or 6.x: download it from <a href="http://www.jetbrains.com/">www.jetbrains.com</a>.</li>			<li>If you want to edit the GUI form, JFormDesigner: download it from <a href="http://www.jformdesigner.com/">www.jformdesigner.com</a></li>			<li>JDK 5.0 (it is possible to use JDK 6.0 if you are not planning to run the IntelliJ plugin version of ANTLRWorks)</li>		</ul>		<h2>Create the project in IntelliJ</h2>		<ul>			<li>Open IntelliJ</li>			<li>Create a new project using <strong>File &gt; New Project</strong>:				<ul>					<li>Choose a name for the project: for example &quot;ANTLRWorks&quot;</li>					<li>Choose a location on the disk for the project. For example, <tt>C:\Documents and Settings\Administrator\IdeaProjects\ANTLRWorks</tt></li>				</ul>			</li>			<li>Click <strong>Next</strong></li>			<li>Leave the output path with its default value</li>			<li>Click <strong>Next</strong></li>			<li>Choose the appropriate JDK:				<ul>					<li>If you want to compile and run the plugin for IntelliJ, use Java 1.5 (not higher because the IntelliJ JDK in IntelliJ 6 contains Java 1.5).<br />						For example: <tt>C:\Program Files\Java\jdk1.5.0_11</tt></li>					<li>Otherwise, you can use Java 1.6. For example, <tt>C:\Program Files\Java\jdk1.6.0_01</tt></li>				</ul>			</li>			<li>Click <strong>Next</strong></li>			<li>Select <strong>Create single-module project</strong></li>			<li>Click <strong>Next</strong></li>			<li>Select the <strong>Java Module</strong> type</li>			<li>Click <strong>Next</strong></li>			<li>Leave the module name and content root as is</li>			<li>Click <strong>Next</strong></li>			<li>Select <strong>Do not create source directory</strong> as we will add the source later on from the zip archive</li>			<li>Click <strong>Finish</strong></li>		</ul>		<h2>Add the source code of ANTLRWorks to the project</h2>		<p>We will now add the source of ANTLRWorks to the project we just created in IntelliJ.</p>		<ul>			<li>Download the source code of ANTLRWorks from <a href="http://www.antlr.org/works/index.html">www.antlr.org/works</a></li>			<li>Unzip the zip file to any location. For example: <tt>C:\Documents and Settings\Administrator\My Documents\antlrworks-1.0.1-src</tt></li>			<li>Go back to IntelliJ and open the project settings using <strong>File &gt; Settings</strong></li>			<li>Choose <strong>Project Structure</strong>.</li>			<li>Under <strong>Project &quot;ANTLRWorks&quot; &gt; Modules &gt; ANTLRWorks</strong>:								<ul>					<li>Remove any content root already existing</li>					<li>Click <strong>Add Content Root</strong> and choose the source of ANTLRWorks that you just unzipped</li>					<li>Exclude the plugin source directory (we will create another module for the plugin later on)</li>				</ul>			</li>			<p align="center"><img src="intellij/exclude_plugin.png" alt="" width="414" height="398" border="0" /></p>			<ul>				<li>If you are not on Mac OS X, exclude the package <tt>org.antlr.xjlib.appkit.app.MacOS</tt></li>			</ul>			<p align="center"><img src="intellij/aw_module.gif" alt="" border="0" livesrc="intellij/aw_module.png" width="832" height="464" /></p>			<ul>				<li>If you don't want to run the unit tests within ANTLRWorks (or don't have the junit.jar), exclude also the package <tt>org.antlr.works.test</tt>. Otherwise, don't exclude it but add the junit.jar under the <strong>Module Library</strong> (see below)</li>				<li>Go in the <strong>Dependencies</strong> tab and click the <strong>Add</strong> button and choose <strong>Module Library</strong>: choose all the jar files under the lib directory of the unzipped source</li>			</ul>			<p align="center"><img src="intellij/lib_dependency.gif" alt="" border="0" livesrc="intellij/lib_dependency.png" width="791" height="478" /></p>			<ul>				<li>Click OK</li>			</ul>			<li>Finally, let's add which resource files the compiler needs to copy: select <strong>File &gt; Settings &gt; Compiler</strong>. Add the extension <tt>?*.st</tt> to the <strong>Resource patterns</strong> field</li>		</ul>		<h2>Run ANTLRWorks from IntelliJ</h2>		<ul>			<li>Choose <strong>Run &gt; Edit Configurations</strong></li>			<li>Add an application with the following properties:								<ul>					<li>Main class: org.antlr.works.IDE</li>				</ul>			</li>		</ul>		<p align="center"><img src="intellij/aw_config_run.png" alt="" width="618" height="655" border="0" /></p>		<ul>			<li>Use this configuration to run ANTLRWorks</li>		</ul>		<h2>Configure the ANTLRWorks plugin</h2>		<p>In order to edit, run and debug the ANTLRWorks plugin for IntelliJ, we will need to create another module specifically designed for this task.</p>		<ul>			<li>Choose <strong>File &gt; New Module</strong></li>			<li>Select <strong>Plugin Module</strong></li>			<li>Click <strong>Next</strong></li>			<li>Enter &quot;Plugin&quot; for the name of the module</li>			<li>Add a project SDK: by default, the IntelliJ application will be selected which is what we want.</li>			<li>Click <strong>Next</strong></li>			<li>Choose <strong>Do not create source directory</strong></li>			<li>Click <strong>Finish</strong></li>		</ul>		<p>Now let's add the necessary dependencies:</p>		<ul>			<li>Choose <strong>File &gt; Settings &gt; Project Structure</strong>.</li>			<li>Remove any content root already existing.</li>			<li>Add the source of the plugin as a content root. For example: <tt>C:\Documents and Settings\Administrator\My Documents\antlrworks-1.0.1-src\src\plugin</tt></li>			<li>In the <strong>Dependencies</strong> tab, add a <strong>Module Dependency</strong> and choose the module &quot;ANTLRWorks&quot; that we just created above.</li>			<li>Set also the correct <strong>Plugin Deployment</strong> path. For example, <tt>C:\Documents and Settings\Administrator\My Documents\antlrworks-1.0.1-src\src\plugin\org\antlr\works\plugin\intellij\</tt></li>		</ul>		<p>Let's create the configuration that will enable us to launch the plugin in another instance of IntelliJ:</p>		<ul>			<li>Choose <strong>Run &gt; Edit Configurations</strong></li>			<li>Add a new <strong>Plugin</strong> configuration</li>			<li>Name it &quot;Plugin&quot;</li>			<li>Add the following VM parameter: &quot;<tt>-Xmx400m -Dorg.antlr.works.debug.plugin=true</tt>&quot;. The <tt>org.antlr.works.debug.plugin</tt> flag is used internally by ANTLRWorks to setup the necessary classpath to be able to run the debugger from within IntelliJ (this is not needed when the plugin is compiled and packed in a jar file for distribution).				<ul>									</ul>			</li>			<li>Use this configuration to run the plugin in another instance of IntelliJ. Once the other instance of IntelliJ is open, create a new project and then create a grammar file. Make sure to setup the javac path in the ANTLRWorks preferences (<strong>File &gt; Settings &gt; ANTLRWorks</strong>) to <tt>C:\Program Files\Java\jdk1.5.0_11\bin</tt> to avoid having issue launching the debugger from the plugin.</li>		</ul>		<p></p>		<p></p>	</body></html>