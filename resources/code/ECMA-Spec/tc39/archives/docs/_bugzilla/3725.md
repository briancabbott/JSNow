---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":3725,"creation_ts":"2015-02-02 09:15:00 -0800","short_desc":"SpeciesConstructor: should not let null trigger defaults","delta_ts":"2015-07-10 08:35:02 -0700","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 31: January 15, 2015 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"WONTFIX","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":{"uid":"d","name":"Domenic Denicola"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"cc":"erik.arvidsson","long_desc":[{"commentid":11869,"comment_count":0,"who":{"uid":"d","name":"Domenic Denicola"},"bug_when":"2015-02-02 09:15:36 -0800","thetext":"In general in ES, undefined triggers defaults, whereas null does not. However apparently you can get default species behavior if you set species to null. This seems incorrect: it should throw a TypeError instead (since null is not a constructor)."},{"commentid":11888,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-02-02 12:27:58 -0800","thetext":"WThe null or undefined test is consistent with the behavior of GetMethod and the GetMethod behavior was arrived at based upon discussions at TC39 meetings.\n\nThe undefined gets you default is a rule that is specific to destructuring (which includes function parameter processing)"},{"commentid":11889,"comment_count":2,"who":{"uid":"arv","name":"Erik Arvidsson"},"bug_when":"2015-02-02 12:38:50 -0800","thetext":"Allen, are you saying that we will fall back to the default function in the case of GetMethod(obj, 'foo' defaultFunction) when obj.foo === null? I cannot recall us having this discussion. We did allow null in then(resolveHandler, rejectHandler) but that was mostly for backwards compat."},{"commentid":11890,"comment_count":3,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-02-02 15:27:38 -0800","thetext":"(In reply to Erik Arvidsson from comment #2)\n> Allen, are you saying that we will fall back to the default function in the\n> case of GetMethod(obj, 'foo' defaultFunction) \n\nNo, GetMethod doesn't even have a defaultFunction argument. \n\nThis is about what property values are are reported by GetMethod() (and other similar use cases) as no method found.\n\nGetMethod\n   returns the property value if it is callable\n   returns undefined if the property value is undefined or null \n   Throws a TypeError for all other property values\n\nMostly,  this about what value you use for situations like:\n\nlet itr = function*() {yield 1}().\nitr.throw = undefined;  // hide the inherited 'throw' method\nitr.throw = null;       // hide the inherited 'throw' method \n//either of the above two lines will work\n\nI'm pretty sure that when we talked about this pattern, people in TC39 thought that both null and undefined should be acceptable.\n\nIn fact, the change markup for GetMethod shows that the null case was added in the Rev26 and the release notes for Rev26 explicitly mention that change.  I'm pretty sure, the change was based upon discussion at the preceding meeting."}]}}
---
