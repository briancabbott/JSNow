---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":3509,"creation_ts":"2015-01-03 18:17:00 -0800","short_desc":"For consistency, String(symbol) should throw an exception. Use Reflect.* API to retrieve Symbol description","delta_ts":"2015-03-15 11:59:44 -0700","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 30: December 24, 2014 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"WONTFIX","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":{"uid":"waldron.rick","name":"Rick Waldron"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"cc":["446240525","brendan","caitpotter88","claude.pache"],"long_desc":[{"commentid":11303,"comment_count":0,"who":{"uid":"waldron.rick","name":"Rick Waldron"},"bug_when":"2015-01-03 18:17:58 -0800","thetext":"See discussion here: https://esdiscuss.org/topic/implicit-coercion-of-symbols"},{"commentid":11304,"comment_count":1,"who":{"uid":"446240525","name":"ziyunfei"},"bug_when":"2015-01-03 18:56:43 -0800","thetext":"Relevant discussion: https://esdiscuss.org/topic/string-symbol"},{"commentid":11305,"comment_count":2,"who":{"uid":"claude.pache","name":"Claude Pache"},"bug_when":"2015-01-04 08:40:51 -0800","thetext":"If we do that, we should consider making `Symbol.prototype.toString()` throw as well for consistency."},{"commentid":11306,"comment_count":3,"who":{"uid":"caitpotter88","name":"Caitlin Potter [:caitp]"},"bug_when":"2015-01-04 10:56:23 -0800","thetext":"Sort of want to bring up what I was saying in comment 22:\n\nWhile it's fine to have a Reflect API specifically for converting a Symbol to a string, is there any reason why we couldn't have it generalized for all primitive types?\n\nIt would be really cool if there were a guaranteed side-effect-free method for converting value types to strings.\n\nFor Object types, it's a bit more complicated to get a side-effect-free stringifier, but I don't see any reason why that couldn't be done (eg internal class name / class binding identifier / function binding identifier / fallback strings for these values).\n\nIn short, Reflect.toString(O) (or whatever it's called) should always do the right thing, and always be side-effect-free, should never be customizable. This would have advantages for VMs which could inline specific R.toString calls for specific types.\n\nJust a thought, but I think valueOf and toString and @@toStringTag are problematic enough due to the potential side effects, so it would be awesome to have a useful alternative which never suffered from these."},{"commentid":11342,"comment_count":4,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-01-13 15:19:21 -0800","thetext":"This has already been consider by TC39. This is a black and white situation where one of the alternatives is clearly better than the alternative.\n\nGiven that, I don't think we need to revisit the current TX39 decision at this late date in ES6 development."},{"commentid":11347,"comment_count":5,"who":{"uid":"brendan","name":"Brendan Eich"},"bug_when":"2015-01-13 17:17:30 -0800","thetext":"Allen, agree it's quite late and we have bigger fish to fry, but one alternative beating another when there are three alternatives doesn't explain the status quo.\n\nAlternative 1 (current ES6 draft spec): ''+sym throws, String(sym) works.\n\nAlternative 2: both work -- a non-starter, everyone agrees to this, I think.\n\nAlternative 3: both throw, and Reflect.describe gets fast-tracked somehow. This is the alternative people cc'ed here favor, and TC39 has never evaluated it or rejected it as clearly worse, i.e., judged alternative 1 as clearly better than alternative 3.\n\nWe may just be out of time. If so, we can't relax an error (dynamic of course) in the future -- instead, we have to support String(sym) not throwing, forever (and Symbol.prototype.toString as Claude points out in comment 2).\n\nDetails, details! Still worth sweating.\n\n/be"},{"commentid":13733,"comment_count":6,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-03-15 11:59:44 -0700","thetext":"It's now clearly too late to introduce  a new Reflect.* API, particularly one that has never been submitted to TC39.\n\nThere are many \"we could have done this differently\" points in the ES6 spec. but the time for design changes has passed.\n\nA Reflect.toString like in Comment 3 seems like a fine thing for someone to champion for ES7, independent of the behavior of String(symbol)"}]}}
---
