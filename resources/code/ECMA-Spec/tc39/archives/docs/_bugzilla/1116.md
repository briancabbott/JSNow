---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":1116,"creation_ts":"2012-12-02 11:28:00 -0800","short_desc":"let syntax and extended grammar restriction","delta_ts":"2013-10-30 06:03:49 -0700","product":"Draft for 6th Edition","component":"new feature","version":"Rev 12: November 22, 2012 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":{"uid":"waldron.rick","name":"Rick Waldron"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"cc":"waldron.rick","long_desc":[{"commentid":2983,"comment_count":0,"who":{"uid":"waldron.rick","name":"Rick Waldron"},"bug_when":"2012-12-02 11:28:55 -0800","thetext":"Per Nov 29 Resolution:\n\n\n> In non-strict code: let, with single token lookahead (where the single token is either an Identifier, \"[\", or \"{\" ), at the start of a statement is a let declaration. (Accepted breaking change)\n\n\nExtended grammar restriction:\n\n\n(x) = 3;       // allowed\n({ y }) = 3;   // allowed\n\nvar (x) = 3;    // disallowed\nvar ({y}) = 3;  // disallowed"},{"commentid":5989,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2013-10-26 17:45:08 -0700","thetext":"in rev20 editor's draft"},{"commentid":6024,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2013-10-29 09:44:36 -0700","thetext":"fixed in rev20 draft, Oct. 28, 2013"},{"commentid":6185,"comment_count":3,"who":{"uid":"waldron.rick","name":"Rick Waldron"},"bug_when":"2013-10-29 13:38:16 -0700","thetext":"In the draft, only part of the `let` syntax restriction is covered:\n\n  ExpressionStatement[yield] :\n    [lookahead ∉ {{, function, class, let [ }] Expression[in, ?yield] ;\n\n\nThe missing part is \"let {\""},{"commentid":6186,"comment_count":4,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2013-10-29 14:43:21 -0700","thetext":"I don't believe there are any situations where \n  let {\n\nis a valid head of an expression, so there is no reason to do a lookahead restriction for that.\n\nBut then again, I may be sleep walking and  missing something. \n\nDo you have something in mind?"},{"commentid":6192,"comment_count":5,"who":{"uid":"waldron.rick","name":"Rick Waldron"},"bug_when":"2013-10-29 19:51:10 -0700","thetext":"No, not specifically and you're right it's not possible. I was just following up based on the consensus. I wonder why we explicitly included that?"},{"commentid":6193,"comment_count":6,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2013-10-29 20:38:46 -0700","thetext":"(In reply to comment #5)\n> No, not specifically and you're right it's not possible. I was just following\n> up based on the consensus. I wonder why we explicitly included that?\n\nI don't know.  The notes didn't make a lot of sense by theselves, but I remembered that\n\nvar let = new Array;\nlet[n] = ...  //is this a let declaration or an assignment\n\nwas the ambiguity that we decided to fix by saying that let [ is always a let declaration.  So is let { but it doesn't have any ambiguities with an expression statement.\n\nI'm going to close this again, because I don't think there is anything to fix.  If anymore discovers new issues they can open a new bug."},{"commentid":6242,"comment_count":7,"who":{"uid":"waldron.rick","name":"Rick Waldron"},"bug_when":"2013-10-30 06:03:49 -0700","thetext":"(In reply to comment #6)\n\n> I'm going to close this again, because I don't think there is anything to fix. \n> If anymore discovers new issues they can open a new bug.\n\nYes, sorry—I should've reclosed."}]}}
---
