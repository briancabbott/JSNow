---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":809,"creation_ts":"2012-10-22 14:53:00 -0700","short_desc":"the result of DefineOwnProperty","delta_ts":"2014-05-15 10:18:13 -0700","product":"Draft for 6th Edition","component":"editorial issue","version":"Rev 10: September 27, 2012 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"jmdyck","name":"Michael Dyck"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"long_desc":[{"commentid":1971,"comment_count":0,"who":{"uid":"jmdyck","name":"Michael Dyck"},"bug_when":"2012-10-22 14:53:46 -0700","thetext":"Table 8 says that [[DefineOwnProperty]] returns a Boolean.\n\n(1) It would be helpful if the Description said what the return-value means.\n\n(2)\nMany invocations of [[DefineOwnProperty]] ignore the fact that it has a result. Are these invocations implicitly asserting that the result is true?\n\n(3)\nWhen the result isn't true, it's generally either false (if the 'Throw' argument is false) or an abrupt completion (if the 'Throw' argument is true).\n\nHowever, in 15.4.5.1 \"[[DefineOwnProperty]] (P, Desc, Throw)\", step 3.d says:\n    If newLen is not equal to ToNumber( Desc.[[Value]]),\n    throw a RangeError exception.\nmeaning that the result can also be an abrupt completion if 'Throw' is false. Is this intentional?\n\n(4)\nIn 13.3 \"Method Definitions\",\nunder \"Runtime Semantics: Property Definition Evaluation\",\nrules 1+2+3+4 steps 9+10 say:\n    9. Let status be the result of calling the [[DefineOwnProperty]]\n       internal method of object with arguments propName, desc, and false.\n   10. ReturnIfAbrupt(status).\n\nBut since the 'Throw' argument is false, I believe status can only be abrupt via the anomaly in point (3) above. Is this the intent (i.e., that's the only case that 10 is meant to catch), or should the 'Throw' arg be true?\n\nSimilarly in:\n    15.4.4.19 \"Array.prototype.map\", step 10.c.v\n    15.4.4.20 \"Array.prototype.filter\", step 11.c.v.1\n    15.5.4.10 \"String.prototype.match\", step 10.g.iv.7\n    15.12.2 \"parse\", algorithm 2, step 3.a.iv.3.a + 3.b.ii.3.a\n\nAnd similarly the various places that invoke [[DefineOwnProperty]] with 'Throw' = false, and then assert that the result isn't an abrupt completion. Are they merely asserting that the anomaly in point (3) doesn't occur?\n\n(5)\nIn 15.13.6.5.1 \"[[DefineOwnProperty]] ( p, desc, throw )\",\nsteps 1+2 say:\n   1. Let succeeded be the result of calling the default [[DefineOwnProperty]]\n      internal method (8.12.9) on A passing P, Desc, and Throw as arguments.\n   2. If succeeded is false, return false.\n\nI'm guessing step 2 should also handle any abrupt completions, so it should\nprobably be:\n   2. If succeeded is not true, return succeeded."},{"commentid":8499,"comment_count":1,"who":{"uid":"jmdyck","name":"Michael Dyck"},"bug_when":"2014-05-15 10:18:13 -0700","thetext":"I think these points were more or less resolved in rev12 and rev13."}]}}
---
