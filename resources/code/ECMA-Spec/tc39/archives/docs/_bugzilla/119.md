---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":119,"creation_ts":"2011-07-06 09:20:00 -0700","short_desc":"clarification needed regarding extended date-time format","delta_ts":"2013-10-29 09:45:43 -0700","product":"Draft for 6th Edition","component":"technical issue","version":"Initial draft July 12, 2011","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"allen","name":"Allen Wirfs-Brock"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"cc":"andrebargull","long_desc":[{"commentid":264,"comment_count":0,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2011-07-06 09:20:39 -0700","thetext":"﻿﻿﻿From: Allen Wirfs-Brock <allen@wirfs-brock.com>\nDate: July 6, 2011 10:08:38 AM PDT\nTo: Lasse Reichstein <reichsteinatwork@gmail.com>\nCc: es5-discuss@mozilla.org\nSubject: Re: Extended Date Time String years and toISOString/parse\n\ngood points for clarification in future editions\n\nOn Jul 4, 2011, at 3:47 AM, Lasse Reichstein wrote:\n\n>>ES5.1 specificaiton of Date Time String formats allow an extended signed-six-digit format for years outside of 0000..9999.\n\n>> It's not clear whether \"the ability to specify 6 digit years\" only applies to parsing, or whether toISOString should also generate extended years for dates outside the four-digit range. I'm guessing it should (otherwise the behavior of toISOString isn't specified at all).\n\nagreed, toISOString should generate the extended year format when appropriate.  The conditions for the RangeError should probably be expended to include any time value that can not be represented using extended year format.\n\n\n>>I.e., is it a requirement that new Date(DATE.UTC(10000,0,1)).toISOString() is \"+010000-01-01T00:00:00.000Z\"?\nthat was the intent\n\n>>Also, if the date is invalid, but follows the format of a Date Time String, e.g., \"1972-02-30\", are there any requirements on the behavior of Date.parse on that string?\n\nIn general, if a data doesn't conform to the \"ISO date\" rules in 15.9.1.15 then Date.parse is allowed to fall back on implementation specific rules for processing the string. It isn't clear from the spec. language whether any semantic constraints on the the number of days in a month are to be considered.  However, if we assume that such semantic restrictions on day in month are are intended then an invalid  date such as \"1972-02-30\" presented to Date.parse would still fall back to an implementation specific interpretation and hence might be accepted. \n\nIt isn't obvious to me whether or not it is worthwhile including such days-in-month restrictions in the spec.  \"valid\" dates work the same regardless and the actual result for invalid dates would remain implementation specific.\n\n\n>>(As a side note, the \"hh\" field isn't specified the way the remaining ones are ... I assume it's supposed to be 00..23 - as opposed to HH which is 00..24, but since it's signed it could also be 00..12).\n\nISO 8601 also doesn't seem to be explicit in this regard.\n\nBecause ES5.1 uses HH rather than hh in describing the timezone offset I think we need to interpret it as meaning 0..24\n\n\n\n>>/L 'And pedantically, YYYY is the decimal digits of the year in the *proleptic* Gregorian calendar!'\n\ntrue\n\n>>-- \n>>Lasse Reichstein - reichsteinatwork@gmail.com\n_______________________________________________\nes5-discuss mailing list\nes5-discuss@mozilla.org\nhttps://mail.mozilla.org/listinfo/es5-discuss"},{"commentid":671,"comment_count":1,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2012-02-27 08:28:26 -0800","thetext":"It's actually implicitly stated that toISOString() should be able to return a string in extended years format. \n\nFrom 15.9.4.2  Date.parse (string)\n---\nIf x is any Date object whose milliseconds amount is zero within a particular implementation of ECMAScript, then all of the following expressions should produce the same numeric value in that implementation, if all the properties referenced have their initial values: \n  x.valueOf()\n  Date.parse(x.toString())\n  Date.parse(x.toUTCString())\n  Date.parse(x.toISOString())\n---\n\nIf toISOString() wouldn't return a string with extended years, the statement about \"same numeric value\" couldn't apply."},{"commentid":5913,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2013-10-20 18:35:35 -0700","thetext":"fixed in rev20 editor's draft\n\nAdded a range error within toISOString if year can't be represented using the ISO format (including extended years)\n\nclarified that Date.parse does handle ISO extended years."},{"commentid":6094,"comment_count":3,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2013-10-29 09:45:43 -0700","thetext":"fixed in rev20 draft, Oct. 28, 2013"}]}}
---
