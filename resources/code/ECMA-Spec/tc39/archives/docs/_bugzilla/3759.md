---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":3759,"creation_ts":"2015-02-05 13:21:00 -0800","short_desc":"8.1.1.2.4 InitializeBinding: Unreachable method ?","delta_ts":"2015-02-19 19:11:00 -0800","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 32: February 2, 2015 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"andrebargull","name":"André Bargull"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"long_desc":[{"commentid":12129,"comment_count":0,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2015-02-05 13:21:50 -0800","thetext":"8.1.1.2.4 InitializeBinding (N,V)\n\nInitializeBinding for object environment records seems to be unreachable. \nAlso applies to steps 4-6 of 8.1.1.4.4 InitializeBinding.\n\n\n(I still need to look at this more closely, but I think my assumption is correct. It kind of depends how the remaining EvalDeclaration bugs were resolved. Filing now so I don't forget about this later.)"},{"commentid":12781,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-02-16 13:40:12 -0800","thetext":"It's reachable from CreateGlobalVarBinding and"},{"commentid":12783,"comment_count":2,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2015-02-16 13:48:47 -0800","thetext":"(In reply to Allen Wirfs-Brock from comment #1)\n> It's reachable from CreateGlobalVarBinding and\n\nBut CreateGlobalVarBinding step 3.c should probably be removed because it's a no-op (CreateMutableBinding in step 3.a already initializes the object env binding to undefined)."},{"commentid":12785,"comment_count":3,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2015-02-16 13:57:37 -0800","thetext":"(No-op is not quite correct when Realm.[[globalThis]] is a Proxy, because in that case the Put call in InitializeBinding -> SetMutableBinding is observable)"},{"commentid":12786,"comment_count":4,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-02-16 14:03:07 -0800","thetext":"(In reply to André Bargull from comment #2)\n> (In reply to Allen Wirfs-Brock from comment #1)\n> > It's reachable from CreateGlobalVarBinding and\n> \n> But CreateGlobalVarBinding step 3.c should probably be removed because it's\n> a no-op (CreateMutableBinding in step 3.a already initializes the object env\n> binding to undefined).\n\nIt set the value of the property to undefined, but it doesn't record that the binding has been initialized. \n\nThe abstract definitions of CreateMutableBinding and CreateImmutableBinding in table 15 says they create uninitialized bindings. I want of their usages in algorithm to conform to that. \n\nThe note that I just added to 8.1.1.1.4. points out that the Creates are always immediately followed by the an InitializeBinding so implementation don't actually have to track the initialization state."},{"commentid":12788,"comment_count":5,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2015-02-16 14:10:50 -0800","thetext":"(In reply to Allen Wirfs-Brock from comment #4)\n> (In reply to André Bargull from comment #2)\n> > (In reply to Allen Wirfs-Brock from comment #1)\n> > > It's reachable from CreateGlobalVarBinding and\n> > \n> > But CreateGlobalVarBinding step 3.c should probably be removed because it's\n> > a no-op (CreateMutableBinding in step 3.a already initializes the object env\n> > binding to undefined).\n> \n> It set the value of the property to undefined, but it doesn't record that\n> the binding has been initialized. \n> \n> The abstract definitions of CreateMutableBinding and CreateImmutableBinding\n> in table 15 says they create uninitialized bindings. I want of their usages\n> in algorithm to conform to that. \n> \n> The note that I just added to 8.1.1.1.4. points out that the Creates are\n> always immediately followed by the an InitializeBinding so implementation\n> don't actually have to track the initialization state.\n\nDoes it make sense to remove 8.1.1.2.4 InitializeBinding step 4?"},{"commentid":12791,"comment_count":6,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-02-16 16:33:43 -0800","thetext":"(In reply to André Bargull from comment #5)\n> (In reply to Allen Wirfs-Brock from comment #4)\n\n> > \n> > The note that I just added to 8.1.1.1.4. points out that the Creates are\n> > always immediately followed by the an InitializeBinding so implementation\n> > don't actually have to track the initialization state.\n> \n> Does it make sense to remove 8.1.1.2.4 InitializeBinding step 4?\n\nActually, what might make more sense would be to put in an explicit Put() call into 8.1.1.4.18 so that a proxy like mentioned in comment #3 traces the expected traps.\n\nBTW, if you haven't seen it, you should check out https://bugs.ecmascript.org/show_bug.cgi?id=78"},{"commentid":12940,"comment_count":7,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-02-18 15:27:39 -0800","thetext":"fixed in rev34 editor's draft\n\nadded the Put in 8.1.1.4.18"},{"commentid":13086,"comment_count":8,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-02-19 19:11:00 -0800","thetext":"fixed in rev34"}]}}
---
