---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":4369,"creation_ts":"2015-05-18 16:53:00 -0700","short_desc":"Would be nice to factor out byteOffset, byteLength, and buffer accessors into abstract ops","delta_ts":"2015-07-10 08:34:58 -0700","product":"Draft for 7th Edition","component":"Deferred from 6th edition","version":"unspecified","rep_platform":"All","op_sys":"All","bug_status":"CONFIRMED","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":{"uid":"d","name":"Domenic Denicola"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"cc":["andrebargull","erik.arvidsson"],"long_desc":[{"commentid":14415,"comment_count":0,"who":{"uid":"d","name":"Domenic Denicola"},"bug_when":"2015-05-18 16:53:27 -0700","thetext":"Then other specifications could call them, given an arbitrary object which the spec hopes is a typed array or DataView. And, I think it would dedupe the %TypedArray% versions and the DataView versions, unless I am missing a subtle difference between them."},{"commentid":14416,"comment_count":1,"who":{"uid":"andrebargull","name":"AndrÃ© Bargull"},"bug_when":"2015-05-19 06:41:02 -0700","thetext":"(In reply to Domenic Denicola from comment #0)\n> And, I think it would dedupe the %TypedArray% versions and the DataView \n> versions, unless I am missing a subtle difference between them.\n\nDo you mean this subtle difference?\n\nDataView.prototype.byte{Length,Offset} throw a TypeError if the array buffer is detached, whereas %TypedArray%.prototype.byte{Length,Offset} return 0."},{"commentid":14421,"comment_count":2,"who":{"uid":"d","name":"Domenic Denicola"},"bug_when":"2015-05-19 11:43:35 -0700","thetext":"Wow, I am surprised that we are not having those throw but we are still having indexed access throw. The inconsistency is quite surprising as well.\n\nBut yes, I guess in that case we couldn't dedupe (without introducing a flag or similar). I'd rather in that case export an abstract op that has the behavior we want other specs to follow, which I assume is the throwing one."},{"commentid":14433,"comment_count":3,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-05-21 08:03:04 -0700","thetext":"(In reply to Domenic Denicola from comment #2)\n> Wow, I am surprised that we are not having those throw but we are still\n> having indexed access throw. The inconsistency is quite surprising as well.\n> \n\nWalking a fine line here regarding how much legacy implemented browser behavior can be changed without web breakage.  Nobody knows..."},{"commentid":14434,"comment_count":4,"who":{"uid":"d","name":"Domenic Denicola"},"bug_when":"2015-05-21 08:21:46 -0700","thetext":"Yeah, just not sure why we think byteLength and byteOffset throwing for DataView is any more or less compatible than it throwing for %TypedArray%."},{"commentid":14437,"comment_count":5,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-05-21 08:41:42 -0700","thetext":"(In reply to Domenic Denicola from comment #4)\n> Yeah, just not sure why we think byteLength and byteOffset throwing for\n> DataView is any more or less compatible than it throwing for %TypedArray%.\n\nIt's more a matter that each such potentially breaking change needs to be discussed with TC39."},{"commentid":14440,"comment_count":6,"who":{"uid":"d","name":"Domenic Denicola"},"bug_when":"2015-05-21 08:48:03 -0700","thetext":"I kind of doubt that when we discussed this for typed arrays everyone was implicitly adding \"(but not DataView)\" to their statements. More likely people just forgot to distinguish."},{"commentid":14441,"comment_count":7,"who":{"uid":"arv","name":"Erik Arvidsson"},"bug_when":"2015-05-21 10:07:15 -0700","thetext":"(In reply to Domenic Denicola from comment #6)\n> I kind of doubt that when we discussed this for typed arrays everyone was\n> implicitly adding \"(but not DataView)\" to their statements. More likely\n> people just forgot to distinguish.\n\nI certainly agree. DataView is included is just another typed array in these kind of discussions. Having them behave different here sounds like a bug."}]}}
---
