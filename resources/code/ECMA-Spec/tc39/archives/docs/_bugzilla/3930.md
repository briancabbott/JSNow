---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":3930,"creation_ts":"2015-02-14 09:13:00 -0800","short_desc":"9.2.3 [[Construct]]: Disallow tail calls in class constructors","delta_ts":"2015-02-15 14:51:57 -0800","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 33: February 12, 2015 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"INVALID","priority":"Normal","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"andrebargull","name":"André Bargull"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"long_desc":[{"commentid":12666,"comment_count":0,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2015-02-14 09:13:41 -0800","thetext":"9.2.3 [[Construct]] ( argumentsList, newTarget)\n\nTail calls in class constructors should not allowed for the reasons outlined in bug 3684 comment 2."},{"commentid":12674,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-02-14 11:33:33 -0800","thetext":"I'm not sure what problem you see in 9.2.3. It creates a new execution for running the constructor but any state it needs after returning from evaluating the constructor body (thisArgument, envRec, kind) should have been captured as part of the original execution context.\n\n(admittedly, the spec. is a but sloppy in  dealing with  the boundary between spec. meta-level variables and actual runtime state, but I think the specification intent is clear enough here)"},{"commentid":12675,"comment_count":2,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2015-02-14 11:56:08 -0800","thetext":"I was under the impression that retaining a reference to `envRec` is not valid under the tail-call semantics described in 14.6.3. But OTOH a reference to `envRec` is probably not too different from a closure within a constructor method (from the resource allocation point of view)."}]}}
---
