---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":3844,"creation_ts":"2015-02-12 08:20:00 -0800","short_desc":"super in eval","delta_ts":"2015-07-10 08:34:22 -0700","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 32: February 2, 2015 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"arv","name":"Erik Arvidsson"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"cc":["caitpotter88","erik.arvidsson"],"long_desc":[{"commentid":12372,"comment_count":0,"who":{"uid":"arv","name":"Erik Arvidsson"},"bug_when":"2015-02-12 08:20:02 -0800","thetext":"http://people.mozilla.org/~jorendorff/es6-draft.html#sec-scripts-static-semantics-early-errors\n\nIt is a Syntax Error if StatementList Contains super unless the source code containing super is eval code that is being processed by a direct eval that is contained in function code.\n\nThat means that:\n\nfunction f() {\n  eval('super.x');\n}\n\nwhich is of course not what we we want.\n\nWe need to replace function code with something more elaborate. Something that encapsulates, methods, accessors, constuctors and nested arrow functions within those."},{"commentid":12375,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-02-12 09:15:27 -0800","thetext":"I'm semi-inclined to eliminate this as an early error.  Evals by their very nature aren't really \"early\" and any use of super that isn't in a context where we allow super is going to throw when used.\n\nWe'd have to invent new ways to describe where super is or isn't allowed just for this case.  It seems to me that for direct eval, the runtime error is good enough.\n\nWhat do you think?"},{"commentid":12377,"comment_count":2,"who":{"uid":"arv","name":"Erik Arvidsson"},"bug_when":"2015-02-12 09:40:12 -0800","thetext":"Fair enough.\n\nIf that is the case should we even check that the \"eval code that is being processed by a direct eval that is contained in function code\"?"},{"commentid":12536,"comment_count":3,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-02-13 09:02:41 -0800","thetext":"(In reply to Erik Arvidsson from comment #2)\n> Fair enough.\n> \n> If that is the case should we even check that the \"eval code that is being\n> processed by a direct eval that is contained in function code\"?\n\nwe still need the function code check because a top level script execution context doesn't have all of the execution context state needed to check for a runtime super is valid \n\nfixed in rev34"}]}}
---
