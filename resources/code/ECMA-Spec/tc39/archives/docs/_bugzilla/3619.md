---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":3619,"creation_ts":"2015-01-23 14:05:00 -0800","short_desc":"9.4.5.2 [[HasProperty]]: Inconsistent handling of negative indices and OOB","delta_ts":"2015-02-12 12:17:36 -0800","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 31: January 15, 2015 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"andrebargull","name":"André Bargull"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"cc":"evilpies","long_desc":[{"commentid":11630,"comment_count":0,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2015-01-23 14:05:44 -0800","thetext":"9.4.5.2 [[HasProperty]](P)\n\n9.4.5.2 step 3.c should probably only return `true` for own valid indices, and in every other case default to OrdinaryHasProperty.\n\n---\nIf IsInteger(index) is true and index /= -0 and index >= 0 and index < [[ArrayLength]], return true.\n---"},{"commentid":11705,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-01-23 17:20:15 -0800","thetext":"It's not clear to me that your suggestion is correct because [[Get]] returns undefined for those property keys and [[Set]] refuses to set them.\n\nSo, from that perspective it looks like the don't exist. Even if if they are defined further up the prototype chain chain. \n\nOrdinaryHasOwnProperty, if it was called for them would climb the prototype chain and find them.  Isn't it more consistent to report that they don't exist if they can't be accessed.\n\nIt's weird that such properties appear to exist if you start look at the prototype and appear not not exist if you start with the leaf object.  But the MOP actually allows that to occur."},{"commentid":11751,"comment_count":2,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2015-01-29 09:54:18 -0800","thetext":"(In reply to Allen Wirfs-Brock from comment #1)\n> OrdinaryHasOwnProperty, if it was called for them would climb the prototype\n> chain and find them.  Isn't it more consistent to report that they don't\n> exist if they can't be accessed.\n> \n\nIn that case I'd expect the following algorithm sub-steps in 3.c:\n---\ni.    Let buffer be the value of O’s [[ViewedArrayBuffer]] internal slot.\nii.   If IsDetachedBuffer(buffer) is true, throw a TypeError exception.\niii.  If IsInteger(numericIndex) is false, return false.\niv.   Let intIndex be numericIndex.\nv.    If intIndex = −0, return false.\nvi.   If intIndex < −0, return false.\nvii.  Let length be the value of O’s [[ArrayLength]] internal slot.\nviii. If intIndex ≥ length, return false.\nix.   Return true.\n---"},{"commentid":12073,"comment_count":3,"who":{"uid":"evilpies","name":"Tom Schuster"},"bug_when":"2015-02-03 15:58:54 -0800","thetext":"I was just about to file exactly the same bug, after implementing ES6 HasProperty. The current behavior makes 'in' on typed arrays pointless."},{"commentid":12202,"comment_count":4,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-02-06 17:54:38 -0800","thetext":"fixed in rev33 editor's draft\n\njust like Comment 2"},{"commentid":12408,"comment_count":5,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-02-12 12:17:36 -0800","thetext":"fixed in rev33"}]}}
---
