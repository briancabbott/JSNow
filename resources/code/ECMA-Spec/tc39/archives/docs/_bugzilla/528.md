---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":528,"creation_ts":"2012-07-14 12:07:00 -0700","short_desc":"8.12.8: refactor away repetition","delta_ts":"2013-10-29 09:45:09 -0700","product":"Draft for 6th Edition","component":"editorial issue","version":"Rev 9: July 8, 2012 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":{"uid":"jmdyck","name":"Michael Dyck"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"long_desc":[{"commentid":1311,"comment_count":0,"who":{"uid":"jmdyck","name":"Michael Dyck"},"bug_when":"2012-07-14 12:07:21 -0700","thetext":"In 8.12.8 \"[[DefaultValue]] (hint)\",\nthere's a lot of repetition, which obscures what's going on.\n\nI suggest refactoring the two algorithms (and the subsequent paragraph)\ndown to this:\n\nWhen the [[DefaultValue]] internal method of /O/ is called with optional /hint/,\nthe following steps are taken:\n\n   1. If /hint/ is String or if /hint/ is not supplied and /O/ is a Date object,\n         Let propertyNamesToTry be the list (\"toString\", \"valueOf\").\n   2. Else\n         Let propertyNamesToTry be the list (\"valueOf\", \"toString\").\n   \n   3. For each /propertyName/ in /propertyNamesToTry/ in order, do:\n      a. Let /propertyValue/ be the result of calling the [[Get]]\n         internal method of object /O/ with argument /propertyName/.\n      b. ReturnIfAbrupt(/propertyValue/).\n      c. If IsCallable(/propertyValue/) is true then,\n           i. Let /callResult/ be the result of calling the\n              [[Call]] internal method of /propertyValue/,\n              with /O/ as the this value and an empty argument list.\n          ii. ReturnIfAbrupt(/callResult/).\n         iii. If /callResult/ is a primitive value, return /callResult/.\n   \n   4. Throw a TypeError exception."},{"commentid":5957,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2013-10-22 18:36:36 -0700","thetext":"fixed in rev20 editor's draft\n\n7.1.1"},{"commentid":6048,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2013-10-29 09:45:09 -0700","thetext":"fixed in rev20 draft, Oct. 28, 2013"}]}}
---
