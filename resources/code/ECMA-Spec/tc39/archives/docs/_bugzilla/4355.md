---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":4355,"creation_ts":"2015-05-06 09:50:00 -0700","short_desc":"Date.prototype.toString definition is incoherent","delta_ts":"2015-10-02 13:14:03 -0700","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 38: April 14, 2015 Final Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":{"uid":"evilpies","name":"Tom Schuster"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"cc":"arai.unmht","long_desc":[{"commentid":14379,"comment_count":0,"who":{"uid":"evilpies","name":"Tom Schuster"},"bug_when":"2015-05-06 09:50:39 -0700","thetext":"Date.prototype.toString is defined in a very strange way. I think the intention of the method is to be generic and use NaN as a time-value for non date objects.\nHowever Step 1. \"Let O be this Date object.\" doesn't really make sense in connection with Step 2., because only Date objects would have a [[DateValue]].\n\nMy suggestion:\n1. Let O be the this value.\n2. If Type(O) is not Object, throw a TypeError exception.\nand like before:\n3. If O does not have a [[DateValue]] internal slot, then \n...\n\nNote: This function is intentionally generic.\n\nIf the function should _not_ be generic then current Step 2. makes no sense to me."},{"commentid":14381,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-05-06 10:03:54 -0700","thetext":"See the text in 20.3.4 that defines specification conventions that are specific to Date.prototype methods:\n\nIn following descriptions of functions that are properties of the Date prototype object, the phrase “this Date object” refers to the object that is the this value for the invocation of the function. If the Type of the this value is not Object, a TypeError exception is thrown."},{"commentid":14382,"comment_count":2,"who":{"uid":"evilpies","name":"Tom Schuster"},"bug_when":"2015-05-06 10:10:04 -0700","thetext":"That section also says \"Unless explicitly defined otherwise, the methods of the Date prototype object defined below are not generic\" ... Anyway using prose that does those not very obvious things is not very nice to the reader."},{"commentid":14383,"comment_count":3,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-05-06 10:26:24 -0700","thetext":"fixed in rev39 publication draft\n\nAdded a NOTE stating that Date.prototype.toString is \"intentionally generic\".\n\nPhrases like \"this Date object\" and \"this time value\" that carry non-obvious semantics are a legacy of the ES3 spec.  Replacing them with something more explicit is too large a change to make at this point in the ES6 publication process.  Feel free to file a ES7 bug suggesting replacement of all such phrases."}]}}
---
