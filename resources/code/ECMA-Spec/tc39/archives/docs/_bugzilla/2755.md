---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":2755,"creation_ts":"2014-04-29 13:59:00 -0700","short_desc":"Group linking algorithm bugs and optimizations","delta_ts":"2015-03-16 14:39:18 -0700","product":"Draft for 6th Edition","component":"deferred features","version":"Rev 25: May 22, 2014 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"WONTFIX","priority":"Normal","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"guybedford","name":"Guy Bedford"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"cc":["dherman","jmdyck","jorendorff","samth"],"long_desc":[{"commentid":7966,"comment_count":0,"who":{"uid":"guybedford","name":"Guy Bedford"},"bug_when":"2014-04-29 13:59:51 -0700","thetext":"The group linking algorithms often refer to derived information that itself involves processing that wouldn't actually happen in that order practically. I am not sure what the goal of the spec is in a scenario like this, but in the process of converting these functions into code, they end up being implemented quite differently.\n\nThe immediate bugs are:\n\n15.2.5.3.2 (3) Load.[[UnlinkedDependencies]] is not a defined property for load records. Working around this alters the implementation.\n15.2.5.3.1 (1) \"Assert start is a list of Linkset records\" should read \"Assert start is a list of Load records\"\n\nIn the process of implementing the algorithm, I found it a lot more convenient to base the linking process on the following principles:\n\n1. Let Link act on a LinkSet instead of a set of Load records. This way we can assume that the first Load record has a [[groupIndex]] of 0, and calculate the group indices of other load records in the linkSet directly from this groupIndex working down the tree.\n2. This way, we only need to traverse the tree once for everything we need, calculating the group indices, declarativeGroups and dynamicGroups as we go.\n\nI'm happy to help however I can and discuss further about corrections that can be made to ensure the pseudo-code is complete."},{"commentid":7967,"comment_count":1,"who":{"uid":"guybedford","name":"Guy Bedford"},"bug_when":"2014-04-29 14:02:50 -0700","thetext":"I also forgot to mention I reverse the order of the groupIndex to start at the top from 0 instead of the bottom being the maximum groupIndex so that we don't need to know the groupIndex of the whole linkSet from the beginning, but let it only be known after the full traversal. Then we link the groups in reverse rather."},{"commentid":8143,"comment_count":2,"who":{"uid":"jmdyck","name":"Michael Dyck"},"bug_when":"2014-05-04 13:17:37 -0700","thetext":"(This bug was filed against Rev 22, but you may have meant to file against Rev 24, the current version. The Description appears to be valid against either.)"},{"commentid":13766,"comment_count":3,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-03-16 14:39:18 -0700","thetext":"concerns old module spec."}]}}
---
