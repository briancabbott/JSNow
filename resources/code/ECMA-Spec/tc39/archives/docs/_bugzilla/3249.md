---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":3249,"creation_ts":"2014-09-27 07:31:00 -0700","short_desc":"Superfluous HasLengthProperty call in Function.prototype.bind","delta_ts":"2014-10-08 08:51:50 -0700","product":"Draft for 6th Edition","component":"editorial issue","version":"Rev 26: July 18, 2014 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"WONTFIX","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":{"uid":"jorendorff","name":"Jason Orendorff"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"cc":"446240525","long_desc":[{"commentid":10246,"comment_count":0,"who":{"uid":"jorendorff","name":"Jason Orendorff"},"bug_when":"2014-09-27 07:31:31 -0700","thetext":"https://people.mozilla.org/~jorendorff/es6-draft.html#sec-function.prototype.bind\n\n> 5. Let targetHasLength be HasOwnProperty(Target, \"length\").\n> 6. ReturnIfAbrupt(targetHasLength).\n> 7. If targetHasLength is true, then\n>     a. Let targetLen be Get(Target, \"length\").\n>     b. ReturnIfAbrupt(targetLen).\n>     c. If Type(targetLen) is not Number, then let L be 0.\n>     d. Else,\n>         i. Let L be the larger of 0 and the result of targetLen minus\n>             the number of elements of A.\n> 8. Else let L be 0.\n\nIt seems like we might as well strike steps 5, 6, and 8 and just do steps 7.a-d."},{"commentid":10247,"comment_count":1,"who":{"uid":"jorendorff","name":"Jason Orendorff"},"bug_when":"2014-09-27 07:36:20 -0700","thetext":"Also, Step 7.d.i refers to \"the number of elements of A\", but A isn't defined."},{"commentid":10250,"comment_count":2,"who":{"uid":"446240525","name":"ziyunfei"},"bug_when":"2014-09-30 03:02:45 -0700","thetext":"I don't think these steps are superfluous:\n\njs> function f(a){}\njs> f.length\n1\njs> f.bind().length\n1\njs> Object.defineProperty(Function.prototype, \"length\", {value: 100})\njs> delete f.length\ntrue\njs> f.length\n100\njs> f.bind().length\n0 // If steps 5, 6, and 8 are struck, this will be 100"},{"commentid":10274,"comment_count":3,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-10-08 08:51:50 -0700","thetext":"(In reply to ziyunfei from comment #2)\n> I don't think these steps are superfluous:\n> \n>\n\nyes the \"own\" check is significant because length properties are configurable (ie, deletable)and functions can inherit from other functions (eg, vis class declarations).\n\nfixed reference to A\n\nbut won't eliminate the HasLengthPrperty check"}]}}
---
