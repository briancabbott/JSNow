---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":2914,"creation_ts":"2014-05-28 12:00:00 -0700","short_desc":"Object.getOwnPropertyDescriptor/FromPropertyDescriptor returns object with undefined slots","delta_ts":"2014-07-12 09:25:18 -0700","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 25: May 22, 2014 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"INVALID","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":{"uid":"toshok","name":"Chris Toshok"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"cc":"andrebargull","long_desc":[{"commentid":8663,"comment_count":0,"who":{"uid":"toshok","name":"Chris Toshok"},"bug_when":"2014-05-28 12:00:45 -0700","thetext":"My current implementation of the ES6 method FromPropertyDescriptor causes this test to print \"undefined\"\n\n  var a = {};\n  Object.defineProperty (a, \"c\", { value: 10 });\n  var desc = Object.getOwnPropertyDescriptor(a, \"c\");\n  console.log (desc.writable);\n\nThis appears to be in line with the spec, specifically 6.2.4.4 step 6a.\n\nBoth v8 and spidermonkey (in FF nightly) print \"false\"\n\nES5's text is similar (8.10.4 step 3b):\n\nb. Call the [[DefineOwnProperty]] internal method of obj with arguments \"writable\", Property Descriptor \n{[[Value]]: Desc.[[Writable]], [[Writable]]: true, [[Enumerable]]: true, [[Configurable]]: true}, and false. \n\nIt's missing the \"does the descriptor have a [[Writable]] field\" check, but it copies over whatever the value is, so I would expect this should copy over undefined.\n\nMaybe the \"Desc.[[Writable]]\" load coerces the value to a boolean in both v8 and SM?"},{"commentid":8664,"comment_count":1,"who":{"uid":"andrebargull","name":"AndrÃ© Bargull"},"bug_when":"2014-05-28 13:12:32 -0700","thetext":"`Object.defineProperty()` calls 9.1.6.3 ValidateAndApplyPropertyDescriptor(O, P, extensible, Desc, current), and in 9.1.6.3, step 2.c.i is of interest:\n>  If the value of an attribute field of Desc is absent, the attribute of\n>  the newly created property is set to its default value.\n\nSo `Object.defineProperty(a, \"c\", { value: 10 })` is exactly equivalent to `Object.defineProperty(a, \"c\", { value: 10, writable: false, enumerable: false, configurable: false })` in that context. See 6.1.7.1 Property Attributes, Table 4 \"Default Attribute Values\" for the defaults."}]}}
---
