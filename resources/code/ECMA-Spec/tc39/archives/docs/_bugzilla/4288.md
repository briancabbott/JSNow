---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":4288,"creation_ts":"2015-04-16 10:38:00 -0700","short_desc":"12.3.3 Intl.DateTimeFormat.prototype.format: Missing ReturnIfAbrupt; .length not set for bound function","delta_ts":"2015-04-16 20:44:02 -0700","product":"Internationalization - ECMA-402","component":"Specification","version":"Edition 2.0 drafts","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"andrebargull","name":"André Bargull"},"assigned_to":{"uid":"waldron.rick","name":"Rick Waldron"},"cc":"waldron.rick","long_desc":[{"commentid":14200,"comment_count":0,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2015-04-16 10:38:39 -0700","thetext":"12.3.3 Intl.DateTimeFormat.prototype.format\n\n[First algorithm]\n\nStep 1: Missing ReturnIfAbrupt after `this DateTimeFormat object`.\n\nStep 2: Remove colon after \"then\"\n\nStep 2.a: Creating a separate section for the function is more ECMAScript2015-y (spec wise).\n\n> Let F be a new built-in function object as defined in 12.3.3.1.\n\nAnd the new 12.3.3.1 section would be:\n---\n12.3.3.1 DateTime Format Functions\n\nA DateTime format function is an anonymous function that optionally takes an argument date. It performs the following steps:\n\n1. Let dtf be the this value.\n2. Assert: Type(dtf) is Object and dtf has an [[initializedDateTimeFormat]] internal slot whose value is true.\n3. If date is not provided or is undefined, then\n  a. Let x be %Date_now%().\n4. Else\n  b. Let x be ToNumber(date).\n  c. ReturnIfAbrupt(x).\n5. Return FormatDateTime(dtf, x).\n---\n\nStep 2.a.iii: Remove \"the result of\"\n\nStep 2.b: The bound function should have at least a .length property, maybe even a .name property.\n\nStep 3: Duplicate full stop\n\n\n[Second algorithm]\n\nStep 1: Omit \"then\"\nStep 3: Inline ECMAScript syntax not explained in \"5 Notational Conventions\".\nStep 3: Change `).` to normal instead of bold font\nStep 5: Change `).` to normal instead of bold font\nStep 9.a: Remove colon after \"then\"\nStep 9.a.iv: Omit \"then\"\nStep 9.a.v: Omit \"the\"\nStep 9.a.vi.2: Omit \"the\"\nStep 9.a.vi.3: Omit \"the\""},{"commentid":14216,"comment_count":1,"who":{"uid":"waldron.rick","name":"Rick Waldron"},"bug_when":"2015-04-16 12:30:33 -0700","thetext":"> [First algorithm]\n\n> Step 1: Missing ReturnIfAbrupt after `this DateTimeFormat object`.\n\nFixed.\n\n> Step 2: Remove colon after \"then\"\n\nFixed.\n\n> Step 2.a: Creating a separate section for the function is more ECMAScript2015-y (spec wise).\n\n> Let F be a new built-in function object as defined in 12.3.3.1.\n\nAnd the new 12.3.3.1 section would be:\n---\n12.3.3.1 DateTime Format Functions\n\nA DateTime format function is an anonymous function that optionally takes an argument date. It performs the following steps:\n\n1. Let dtf be the this value.\n2. Assert: Type(dtf) is Object and dtf has an [[initializedDateTimeFormat]] internal slot whose value is true.\n3. If date is not provided or is undefined, then\n  a. Let x be %Date_now%().\n4. Else\n  b. Let x be ToNumber(date).\n  c. ReturnIfAbrupt(x).\n5. Return FormatDateTime(dtf, x).\n---\n\n\nAdded. \n\n\n\n> Step 2.a.iii: Remove \"the result of\"\n> Step 2.b: The bound function should have at least a .length property, maybe even a .name property.\n\nlength property added\n\n\n> Step 3: Duplicate full stop\n\nFixed.\n\n\n[Second algorithm]\n\n> Step 1: Omit \"then\"\n\nFixed.\n\n> Step 3: Inline ECMAScript syntax not explained in \"5 Notational Conventions\".\n\nYes, it's part of https://people.mozilla.org/~jorendorff/es6-draft.html#sec-list-and-record-specification-type\n\n\n> Step 3: Change `).` to normal instead of bold font\n> Step 5: Change `).` to normal instead of bold font\n> Step 9.a: Remove colon after \"then\"\n> Step 9.a.iv: Omit \"then\"\n> Step 9.a.v: Omit \"the\"\n> Step 9.a.vi.2: Omit \"the\"\n> Step 9.a.vi.3: Omit \"the\"\n\nFixed."}]}}
---
