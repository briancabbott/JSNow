---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":3942,"creation_ts":"2015-02-14 15:17:00 -0800","short_desc":"13.6.4.13 ForIn/OfBodyEvaluation: Switch steps 5.b.iv-v","delta_ts":"2015-02-19 19:11:00 -0800","product":"Draft for 6th Edition","component":"editorial issue","version":"Rev 33: February 12, 2015 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":{"uid":"andrebargull","name":"André Bargull"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"long_desc":[{"commentid":12689,"comment_count":0,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2015-02-14 15:17:56 -0800","thetext":"13.6.4.13 Runtime Semantics: ForIn/OfBodyEvaluation\n\nSteps 5.b.iv-v should be switched for consistency with other lexical declaration binding instantiations.\n\n\nCompare:\n---\n13.1.13 Runtime Semantics: Evaluation\n3. Perform BlockDeclarationInstantiation(StatementList, blockEnv).\n4. Set the running execution context’s LexicalEnvironment to blockEnv.\n\n13.6.3.7 Runtime Semantics: LabelledEvaluation\n5. For each element dn of boundNames do [...]\n6. Set the running execution context’s LexicalEnvironment to loopEnv\n\n13.6.3.9 Runtime Semantics: CreatePerIterationEnvironment\ne. For each element bn of perIterationBindings do, [...]\nf. Set the running execution context’s LexicalEnvironment to thisIterationEnv.\n\n13.6.4.12 Runtime Semantics: ForIn/OfHeadEvaluation ( TDZnames, expr, iterationKind, labelSet)\nc. For each string name in TDZnames, do [...]\nd. Set the running execution context’s LexicalEnvironment to TDZ.\n\n13.14.7 Runtime Semantics: CatchClauseEvaluation\n3. For each element argName of the BoundNames of CatchParameter, do [...]\n4. Set the running execution context’s LexicalEnvironment to catchEnv.\n---\n\nThe new bindings are first created and then the lexical environment is applied.\n\n\nIn 13.6.4.13 these steps are reversed.\n---\n13.6.4.13 Runtime Semantics: ForIn/OfBodyEvaluation ( lhs, stmt, iterator, lhsKind, labelSet )\niv. Set the running execution context’s LexicalEnvironment to iterationEnv.\nv. Perform BindingInstantiation for lhs passing iterationEnv as the argument.\n---\n\n\n(The evaluation order is not observable from user script, so this is just spec polishing...)"},{"commentid":12690,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-02-14 15:39:17 -0800","thetext":"fixed in rev34 editor's draft"},{"commentid":13085,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-02-19 19:11:00 -0800","thetext":"fixed in rev34"}]}}
---
