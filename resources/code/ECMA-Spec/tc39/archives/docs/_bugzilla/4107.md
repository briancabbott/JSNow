---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":4107,"creation_ts":"2015-03-04 15:02:00 -0800","short_desc":"9.4.3.3 [[Enumerate]], 9.4.5.6 [[Enumerate]]: Duplicate property names not detected","delta_ts":"2015-03-04 18:58:15 -0800","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 34: February 20, 2015 Release Candidate 1","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"andrebargull","name":"André Bargull"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"long_desc":[{"commentid":13462,"comment_count":0,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2015-03-04 15:02:47 -0800","thetext":"9.4.3.3 [[Enumerate]] ()\n9.4.5.6 [[Enumerate]] ()\n\nDuplicate property names are possible with current definition of [[Enumerate]] for String and Integer Indexed objects if an integer indexed property is present on an object in the prototype chain. \n\nFor example:\n---\nObject.defineProperty(Object.prototype, \"0\", {enumerable: true});\nprint([...Reflect.enumerate(new String(\"abc\"))]);\n---\n\nExpected: Prints \"0, 1, 2\"\nActual: Prints \"0, 1, 2, 0\"\n\n\nAre 9.4.3.3 and 9.4.5.6 actually needed? Maybe this issue can be fixed by simply changing 9.1.11 to use \"[[OwnPropertyKeys]]\" instead of \"properties\" and then deleting 9.4.3.3 and 9.4.5.6 because they are no longer needed. (This also allows to delete CompoundIterator object.)\n\n> Return an Iterator object (25.1.1.2) whose next method iterates over all\n> the String-valued keys of enumerable properties of O."},{"commentid":13463,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-03-04 16:21:46 -0800","thetext":"fixed in rev35 editor's draft\n\neliminated 9.4.3.3 and 9.4.5.6, via various tweaks in 9.4.5.6, the nost inport being the addition of:\n\n[[Enumerate]] must obtain the own property keys of the target object as if by calling its [[OwnPropertyKeys]] internal method. Property attributes of the target object must be obtained as if by calling its [[GetOwnProperty]] internal method."},{"commentid":13498,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-03-04 18:58:15 -0800","thetext":"fixed in rev35"}]}}
---
