---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":2023,"creation_ts":"2013-10-01 03:22:00 -0700","short_desc":"22.2.2.4, %TypedArray%[@@create](): TypedArrays no longer subclassable out-of-the-box","delta_ts":"2013-10-29 09:45:37 -0700","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 19: September 27, 2013 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"andrebargull","name":"André Bargull"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"long_desc":[{"commentid":5758,"comment_count":0,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2013-10-01 03:22:42 -0700","thetext":"TypedArray constructors are no longer subclassable out of the box after the rev16 changes, because subclasses of concrete TypedArray constructor (e.g. `class MyInt8Array extends Int8Array`) do not have the [[TypedArrayConstructor]] internal data property. This limitation should probably be noted in the 22.2.4 preamble.\n\nCorrect way to subclass a concrete TypedArray constructor:\n---\nclass MyInt8Array extends Int8Array {\n  static [Symbol.create]() {\n    return Int8Array[Symbol.create].call(Int8Array);\n  }\n}\n---"},{"commentid":5759,"comment_count":1,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2013-10-01 04:22:40 -0700","thetext":"Duh, \"correct way\" should also include fixing the [[Prototype]]:\n---\nstatic [Symbol.create]() {\n  return Object.setPrototypeOf(Int8Array[Symbol.create].call(Int8Array), this.prototype);\n}\n---"},{"commentid":5769,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2013-10-01 09:03:13 -0700","thetext":"You're correct, but it wasn't my intent to require this manually effort to create subclasses.  I will have to do s0ome rework on the Typed Array spec. To make this work.\n\nIt will probably mean defining a unique @@create method for each built-in Typed Array constructor"},{"commentid":5809,"comment_count":3,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2013-10-02 15:48:43 -0700","thetext":"(In reply to comment #2)\n\n> It will probably mean defining a unique @@create method for each built-in Typed\n> Array constructor\n\nThere already is a unique constructor function for each kind of TypedArray so I'll have those constructors set the [[TypeArrayName]] of the instances instead of added a unique @@create for each constructor."},{"commentid":5810,"comment_count":4,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2013-10-02 16:08:18 -0700","thetext":"fixed in rev20 editor's draft\n\neach typed array constructor sets the [[TypeArrayName]] of the instance it is initialize and then does a super.comstructor call to process the arguments.\n\nElimianted the [[TypedArrayConstructor]] internal data property of typed array constructor functions."},{"commentid":6086,"comment_count":5,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2013-10-29 09:45:37 -0700","thetext":"fixed in rev20 draft, Oct. 28, 2013"}]}}
---
