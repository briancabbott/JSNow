---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":2985,"creation_ts":"2014-06-10 09:04:00 -0700","short_desc":"Use of \"production\"","delta_ts":"2015-03-16 11:30:15 -0700","product":"Draft for 7th Edition","component":"Deferred from 6th edition","version":"unspecified","rep_platform":"All","op_sys":"All","bug_status":"CONFIRMED","see_also":"https://bugs.ecmascript.org/show_bug.cgi?id=4124","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":{"uid":"rossberg","name":"Andreas Rossberg"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"cc":"jmdyck","long_desc":[{"commentid":8876,"comment_count":0,"who":{"uid":"rossberg","name":"Andreas Rossberg"},"bug_when":"2014-06-10 09:04:45 -0700","thetext":"The spec often conflates the notion of \"production\" with a program phrase _derived_ via a production. In many places this just results in a category error. For example:\n\n8.3.1: \"the production that is being evaluated\"\n9.2.2: \"the production that is the value of [[Code]]\"\n9.2.5/6/7: \"a parameter list production\" and \"a body production\"\n9.2.13: \"for each production in functionsToInitialize\"\n9.4.4.7: \"production 'formals'\"\n\n12.1.1: \"if this production is contained in\"\n12.2.5.1: \"if this production is present\"\n12.2.7.2: \"let 'parameters' be the production\" etc\n12.2.9.2.1/2: \"passing production as argument\"\n12.3.4.2: \"takes a production\"\n12.5.4.1: \"derives a production\"\n12.14.5.1: \"derives a production\" and \"that production is substituted\"\n\n13.1.11: \"code is the grammar production\"; \"if d is a X production\"; \"for each production\"\n13.2.1.1: \"the declaration containing this production\"\n13.6.4.1: \"derives a production\"\n13.7.1: \"this production is nested\"\n13.8.1: dito\n\n14.1.1: \"the longest sequence of productions\"\n14.3.9: \"let formalParameterList be the production\"\n14.4.15/16/17: \"let body be the production\"\n14.5.3/11: \"if ClassElement is the production\"\n14.6.1: \"nonterminal is a parsed grammar production\"\n14.6.2: \"HasProductionInTailPosition\"\n\nAs Ch. 5 describes correctly, a production is a _rule_ of the grammar -- not a program _phrase_ derived by the grammar, nor a derivation of such a phrase. Consequently, a production cannot be \"contained\", \"nested\" or \"substituted\" in a piece of program, nor can it be \"derived\" or \"evaluated\". Likewise, the various algorithms are not actually parameterized over (or accumulate) productions, but phrases, pieces of code.\n\nAll these uses should be replaced by \"phrase\" or \"code\", \"phrase/code derived with a production / matching a production\", or \"phrase/code being derivable with a production\", respectively. Some places already use such wordings, but others don't.\n\n(This terminological mistake was already present in the ES5 spec, but it now has proliferated significantly, especially in the static semantics.)"},{"commentid":8877,"comment_count":1,"who":{"uid":"jmdyck","name":"Michael Dyck"},"bug_when":"2014-06-10 10:39:13 -0700","thetext":"Further alternative wordings:\n  \"parse tree\"\n  \"parse node\"\n  \"an instance of [production]\"\n  \"an instance of [nonterminal]\"\n\n(Each of these already appears in the spec, though not much.)"},{"commentid":8878,"comment_count":2,"who":{"uid":"jmdyck","name":"Michael Dyck"},"bug_when":"2014-06-10 11:24:33 -0700","thetext":"> \n> (This terminological mistake was already present in the ES5 spec,\n\nIn fact, phrasing such as\n    \"the production ... is evaluated as follows\"\ngoes all the way back to ES1. ES5 added one or two more (mis-)usages, but almost all of the phrasings listed above first appeared in the 6th edition drafts."},{"commentid":13747,"comment_count":3,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-03-16 11:30:15 -0700","thetext":"deferring to ES7"}]}}
---
