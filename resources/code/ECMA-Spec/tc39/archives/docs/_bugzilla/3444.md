---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":3444,"creation_ts":"2014-12-15 12:21:00 -0800","short_desc":"String.prototype.replace looks up @@replace on 'this'","delta_ts":"2014-12-15 13:37:37 -0800","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 29: December 06, 2014 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"DUPLICATE","dup_id":3425,"priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":{"uid":"toshok","name":"Chris Toshok"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"long_desc":[{"commentid":11041,"comment_count":0,"who":{"uid":"toshok","name":"Chris Toshok"},"bug_when":"2014-12-15 12:21:26 -0800","thetext":"right now the algorithm for String.prototype.replace reads:\n\n   4. Let replacer be GetMethod(O, @@replace).\n   5. ReturnIfAbrupt(replacer).\n   6. If replacer is not undefined, then\n      a. Return Call(replacer, searchValue, «string, replaceValue»).\n\nWith those steps there's no way for the RegExp.prototype[@@replace] code to be called in, e.g. this code:\n\n  var re = /hello/;\n  console.log (\"hello, world\".replace (re, \"goodbye\"));\n\nGiven that searchValue is passed as the 'this' to replacer, it seems like it @@replace should be looked up on searchValue.  i.e.:\n\n   4. Let replacer be GetMethod(searchValue, @@replace)"},{"commentid":11042,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-12-15 13:37:37 -0800","thetext":"\n\n*** This bug has been marked as a duplicate of bug 3425 ***"}]}}
---
