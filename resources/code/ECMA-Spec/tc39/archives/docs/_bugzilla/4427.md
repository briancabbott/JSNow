---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":4427,"creation_ts":"2015-07-17 19:13:00 -0700","short_desc":"Annex B.3.3 needs to look at all blocks, not VarScopedDeclarations","delta_ts":"2015-11-02 14:57:22 -0800","product":"ECMA-262 Edition 6","component":"technical issues","version":"unspecified","rep_platform":"All","op_sys":"All","bug_status":"CONFIRMED","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":{"uid":"allen","name":"Allen Wirfs-Brock"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"cc":["brterlso","bugs.ecmascript"],"long_desc":[{"commentid":14554,"comment_count":0,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-07-17 19:13:17 -0700","thetext":"In Annex B.3.3, Step 1.a of the replacement steps for step 29, says:\n\"For each FunctionDeclaration /f/ in /varDeclarations/ that is directly contained in the /StatementList/ of a /Block/, /CaseClause/, or /DefaultClause/,\"\n\nin should instead sya:\n\"For each FunctionDeclaration /f/ that is directly contained in the /StatementList/ of a /Block/, /CaseClause/, or /DefaultClause/ Contained within /code/,\"\n\nthe problem is that /varDeclarations/ only contains the top level function declrations from code.\n\nAlso see https://esdiscuss.org/topic/block-level-function-declarations-web-legacy-compatibility-bug"},{"commentid":14880,"comment_count":1,"who":{"uid":"brterlso","name":"Brian Terlson"},"bug_when":"2015-11-02 14:57:22 -0800","thetext":"Fixed in ES2016 Draft (efbfc88)."}]}}
---
