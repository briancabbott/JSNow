---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":2443,"creation_ts":"2014-01-27 06:59:00 -0800","short_desc":"14.3.1 Early Errors: \"eval\" and \"arguments\" restriction for non-simple parameter lists not removed","delta_ts":"2015-07-10 08:34:59 -0700","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 22: January 20, 2014 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"andrebargull","name":"André Bargull"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"cc":["caitpotter88","erik.arvidsson"],"long_desc":[{"commentid":7012,"comment_count":0,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2014-01-27 06:59:03 -0800","thetext":"14.3.1  Static Semantics:  Early Errors:\n\nThe early error restriction for non-simple parameter lists should be possibly removed for consistency with \"14.1.2 Static Semantics: Early Errors\"."},{"commentid":7802,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-04-17 14:26:28 -0700","thetext":"fixed in rev24 editor's draft"},{"commentid":8004,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-04-29 22:17:35 -0700","thetext":"fixed in rev24"},{"commentid":12740,"comment_count":3,"who":{"uid":"caitpotter88","name":"Caitlin Potter [:caitp]"},"bug_when":"2015-02-15 14:43:34 -0800","thetext":"Per https://crrev.com/924403002/ it seems like maybe we don't want this early error to be removed.\n\nIt would be nice if the rules about \"strict/new feature\" vs \"not-strict\" parameter list static errors were a bit more consistent.\n\nIs it too late to add it back?"},{"commentid":12752,"comment_count":4,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-02-15 18:01:40 -0800","thetext":"What TC39 wanted to do here is minimize \"micro-modes\" which are restrictions that only apply to specific new features, particularly in sloppy mode. \n\n'arguments', 'eval', and strict reserved word declaration restrictions are now imposed via the early error rules for BindingIdentifier and are only conditional upon strict/sloppy mode (but of course, all class definitions and and modules are always strict mode code). Simple/complex parameter list syntax doesn't have anything to do with those naming restriction issues anymore. \n\nDuplicate parameter name are illegal in all strict mode code plus in all \"complex\" (ie, no new syntax present) parameter lists in sloppy mode.\n\nThe only semantics associated with StrictFormalParameters is that duplicate parameter names are also illegal for them in sloppy mode simple parameter lists. \n\nSo, arguably the only \"micro mode\" is duplicate parameter name restrictions in sloppy mode arrow functions, generators, and object literal concise methods and that doesn't seem so bad from a complexity perspective.\n\nI'm not sure what your issue is with: \n function f(...arguments) {\n   return arguments;\n }\n\nsloppy mode has always permitted using 'arguments' as a parameter name and doing that has always made the arguments object inaccessible. Just like ...arguments does."},{"commentid":12763,"comment_count":5,"who":{"uid":"caitpotter88","name":"Caitlin Potter [:caitp]"},"bug_when":"2015-02-16 06:07:48 -0800","thetext":"I don't have a huge opinion on this, but implementation-wise, it's simpler for V8 if we can just bundle all of the \"strict-ish\" static formal parameter errors together. I think it's also less confusing if you don't have different subsets of strict errors conditionally applied to sloppy-mode. It would be simpler if non-simple parameter lists suffered all of the same early errors as simple parameter lists in strict code."},{"commentid":12764,"comment_count":6,"who":{"uid":"arv","name":"Erik Arvidsson"},"bug_when":"2015-02-16 08:21:14 -0800","thetext":"It would be simpler to only have 2 \"modes\". If SimpleParameterList is false then apply the exact same rules as for strict function formal parameters.\n\nAllen, the \"micro mode\" conversation we had was about making the whole function (inlcuding the body) strict if the parameters were complex. We all agreed that that would not be good.\n\nStill, this is such an edge case that I don't think end users ever have to care and the code paths in an implementation is manageable so I'll let this one slide. There are so many quirks already that one more will hardly be noticable."},{"commentid":12776,"comment_count":7,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-02-16 12:06:35 -0800","thetext":"(In reply to Erik Arvidsson from comment #6)\n> It would be simpler to only have 2 \"modes\". If SimpleParameterList is false\n> then apply the exact same rules as for strict function formal parameters.\n> \n\nOf course, simplicity  is in the eye of the beholder so let me retry the explanation.\n\nWhether \"eval\" and \"arguments\" can be used as a BindingIdentifier is solely determined by strict/sloppy mode. There is nothing about it that is specific to parameter lists.\n\n\"complex parameter lists\" are new to ES6.  They never allow duplicate definition of a BindingIdentifier and never produce a mapped arguments object. Again, this is a characteristic of the complex parameter list feature, and not affected by the mode.\n\n\"simple parameter lists\" are a legacy feature and have strict mode restrictions (no duplicates, no mapped arguments object) that were defined in ES5. Those strict mode restriction continue to apply to them in ES6 and are solely determined by strict/sloppy mode.\n\nThere is an overlap between the strict mode simple parameter list restrictions and the (any mode) complex parameter list restrictions and recognizing this might be used to simplify (or perhaps complexify) an implementation. However, I think the overall story is simpler if we never talk about strict parameter lists as something that can exist in sloppy mode code."},{"commentid":12777,"comment_count":8,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-02-16 12:11:04 -0800","thetext":"(In reply to Allen Wirfs-Brock from comment #4)\n\n> So, arguably the only \"micro mode\" is duplicate parameter name restrictions\n> in sloppy mode arrow functions, generators, and object literal concise\n> methods and that doesn't seem so bad from a complexity perspective.\n> \n\nI slightly misspoke above.  \"generators\" should not have been mentioned as the restrictions only apply to generator concise method."}]}}
---
