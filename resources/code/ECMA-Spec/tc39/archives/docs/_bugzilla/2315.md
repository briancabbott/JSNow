---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":2315,"creation_ts":"2013-11-17 12:13:00 -0800","short_desc":"19.2.3.2 Function.prototype.bind: Issues in the computation of the length of the bound function","delta_ts":"2014-07-19 18:02:45 -0700","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 21: November 8, 2013 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"claude.pache","name":"Claude Pache"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"long_desc":[{"commentid":6832,"comment_count":0,"who":{"uid":"claude.pache","name":"Claude Pache"},"bug_when":"2013-11-17 12:13:54 -0800","thetext":"In the algorithm of Function.prototype.bind, the computation the length of the bound function being constructed is performed by steps 5 and 6, which read:\n\n5. If Target has a [[BoundTargetFunction]] internal slot, then\n    a. Let targetLen be the result of Get(Target, \"length\").\n    b. ReturnIfAbrupt(targetLen).\n    c. Let L be the larger of 0 and the result of targetLen minus the number of elements of A.\n6. Else let L be 0.\n\nThere are two issues:\n\nFirst, it is not clear why step 5 apparently restricts its scope to bound functions. It seems more reasonable to restrict to any function (as in ES5.1). (I may have missed issues with proxies, however.)\n\nSecond, there is an implicit assumption that getting the value of the \"length\" property of `Target` will produce a number. It is no longer true since the \"length\" property of non-builtin functions is configurable (even under the current restriction of step 5). Therefore, the value of `targetLen` should be coerced to a nonnegative integer before its use in step 5c."},{"commentid":9226,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-07-16 16:15:08 -0700","thetext":"fixed in rev26 editor's draft"},{"commentid":9361,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-07-19 18:02:45 -0700","thetext":"fixed in rev26"}]}}
---
