---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":3272,"creation_ts":"2014-10-08 13:16:00 -0700","short_desc":"7.1.16  CanonicalNumericIndexString: Consider to ignore canonical, but non-integer or negative property keys in integer indexed objects?","delta_ts":"2015-02-18 16:53:51 -0800","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 27: August 24, 2014 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"WONTFIX","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":{"uid":"andrebargull","name":"André Bargull"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"long_desc":[{"commentid":10298,"comment_count":0,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2014-10-08 13:16:32 -0700","thetext":"7.1.16  CanonicalNumericIndexString ( argument )\n\nFollow-up from bug 2049.\n\nIt should be considered to further restrict canonical numeric indices to positive (?), integer values up to `Number.MAX_SAFE_INTEGER`. I don't see any value in treating \"NaN\", \"Infinity\", \"-Infinity\", \"1e+21\", \"1e-10\", \"0.1\", \"9999999999999998\" etc. as canonical numeric indices, whereas \"+Infinity\", \"1e21\", \"1e+20\", \"1e-6\", \"0.10\", \"9999999999999999\" are not accepted as numeric indices for integer indexed objects. Implementors will likely prefer a simple definition for integer indexed property keys which avoids performing the ToString+ToNumber combo."},{"commentid":12207,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-02-06 18:28:34 -0800","thetext":"The problem is that at most usage sites there are three alternative code paths:\n\none for strings that are not CanonicalNumericIndesString\none for strings that are CanonicalNumericIndexString and are valid indexes\none for strings that are CanonicalNumericIndexString but aren't valid indexes\n\nWith some refactoring that I probably I could probably avoid the ToString+ToNumber combo for for some of the third case. But I'm probably not going to do it for this edition.\n\nImplementers are are certainly free for each usage to figure out if those when they can avoid those conversions."},{"commentid":12681,"comment_count":2,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2015-02-14 14:16:42 -0800","thetext":"(In reply to Allen Wirfs-Brock from comment #1)\n> With some refactoring that I probably I could probably avoid the\n> ToString+ToNumber combo for for some of the third case. But I'm probably not\n> going to do it for this edition.\n> \n> Implementers are are certainly free for each usage to figure out if those\n> when they can avoid those conversions.\n\n\nIn that case just resolve this report as Won't fix?"}]}}
---
