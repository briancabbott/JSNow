---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":274,"creation_ts":"2012-02-22 13:01:00 -0800","short_desc":"S13.2.1_A7_T3 erroneously declares global var","delta_ts":"2012-02-24 15:42:46 -0800","product":"Test262","component":"ECMA-262 Tests","version":"unspecified","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"andrebargull","name":"André Bargull"},"assigned_to":{"uid":"dfugate","name":"Dave Fugate"},"long_desc":[{"commentid":651,"comment_count":0,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2012-02-22 13:01:30 -0800","thetext":"S13.2.1_A7_T3 initially declares the variable \"x\" in global scope with a standard variable statement. This is actually wrong since the first check tests whether getValue() throws a ReferenceError for an unresolvable reference.\nSo the first statement in S13.2.1_A7_T3 must not be \"var x;\". \n\nAlso compare to the original Sputnik test case.\n\n\nBug No.2 in S13.2.1_A7_T3:\nThe '$ERROR()' function should never be called within a try-catch block if the catch-block is empty. At least if the '$ERROR()' implementation from sta.js is used which simply throws a 'Test262Error' instance. Surrounding the '$ERROR()' call in try-catch will now catch the 'Test262Error'...\ntry {\n  /* code which is expected to throw an error */\n  $ERROR(\"...\");\n} catch (e) {}\n\n=> should be rewritten to:\n\ntry {\n  /* code which is expected to throw an error */\n  $ERROR(\"...\");\n} catch (e) {\n  if (e instanceof Test262Error) throw e;\n}"},{"commentid":668,"comment_count":1,"who":{"uid":"dfugate","name":"Dave Fugate"},"bug_when":"2012-02-24 11:06:28 -0800","thetext":"No idea why the 'var x;' was ever removed.\n\nBug #2 below is a frightening oversight.  Looks like the following might be affected as well:\n  E:\\262\\test262\\test\\suite\\ch12\\12.6\\12.6.1\\S12.6.1_A2.js(14):} catch (e) {}\n  E:\\262\\test262\\test\\suite\\ch12\\12.6\\12.6.1\\S12.6.1_A9.js(20):} catch (e) {}\n  E:\\262\\test262\\test\\suite\\ch12\\12.6\\12.6.2\\S12.6.2_A9.js(20):} catch (e) {}\n  E:\\262\\test262\\test\\suite\\ch13\\13.2\\S13.2.1_A7_T3.js(24):} catch (e) {}\n  E:\\262\\test262\\test\\suite\\ch13\\13.2\\S13.2.1_A7_T4.js(23):} catch (e) {}\n  E:\\262\\test262\\test\\suite\\ch13\\13.2\\S13.2.1_A7_T4.js(50):} catch (e) {}\n  E:\\262\\test262\\test\\suite\\ch13\\13.2\\S13.2.2_A11.js(26):} catch (e) {}\n  E:\\262\\test262\\test\\suite\\ch13\\13.2\\S13.2.2_A13.js(24):} catch (e) {}\n  E:\\262\\test262\\test\\suite\\ch13\\13.2\\S13.2.2_A9.js(26):} catch (e) {}\n  E:\\262\\test262\\test\\suite\\ch15\\15.1\\15.1.3\\15.1.3.1\\S15.1.3.1_A2.2_T1.js(28):  } catch (e) {}   \n  E:\\262\\test262\\test\\suite\\ch15\\15.1\\15.1.3\\15.1.3.1\\S15.1.3.1_A2.3_T1.js(24):    } catch (e) {}   \n  E:\\262\\test262\\test\\suite\\ch15\\15.1\\15.1.3\\15.1.3.1\\S15.1.3.1_A2.4_T1.js(28):      } catch (e) {}   \n  E:\\262\\test262\\test\\suite\\ch15\\15.1\\15.1.3\\15.1.3.1\\S15.1.3.1_A2.5_T1.js(32):        } catch (e) {}   \n  E:\\262\\test262\\test\\suite\\ch15\\15.1\\15.1.3\\15.1.3.2\\S15.1.3.2_A2.2_T1.js(22):  } catch (e) {}   \n  E:\\262\\test262\\test\\suite\\ch15\\15.1\\15.1.3\\15.1.3.2\\S15.1.3.2_A2.3_T1.js(24):    } catch (e) {}   \n  E:\\262\\test262\\test\\suite\\ch15\\15.1\\15.1.3\\15.1.3.2\\S15.1.3.2_A2.4_T1.js(28):      } catch (e) {}   \n  E:\\262\\test262\\test\\suite\\ch15\\15.1\\15.1.3\\15.1.3.2\\S15.1.3.2_A2.5_T1.js(32):        } catch (e) {}   \n  E:\\262\\test262\\test\\suite\\ch15\\15.11\\15.11.4\\S15.11.4_A3.js(16):} catch (e) {}\n  E:\\262\\test262\\test\\suite\\ch15\\15.11\\15.11.4\\S15.11.4_A4.js(16):} catch (e) {}\n  E:\\262\\test262\\test\\suite\\ch15\\15.5\\15.5.3\\S15.5.3.2_A4.js(20):} catch (e) {}\n  E:\\262\\test262\\test\\suite\\ch15\\15.5\\15.5.4\\15.5.4.10\\S15.5.4.10_A7.js(16):} catch (e) {}\n  E:\\262\\test262\\test\\suite\\ch15\\15.5\\15.5.4\\15.5.4.11\\S15.5.4.11_A7.js(16):} catch (e) {}\n  E:\\262\\test262\\test\\suite\\ch15\\15.5\\15.5.4\\15.5.4.14\\S15.5.4.14_A7.js(16):} catch (e) {}\n  E:\\262\\test262\\test\\suite\\ch15\\15.5\\15.5.4\\15.5.4.5\\S15.5.4.5_A7.js(16):} catch (e) {}\n  E:\\262\\test262\\test\\suite\\ch15\\15.5\\15.5.4\\15.5.4.6\\S15.5.4.6_A7.js(16):} catch (e) {}\n  E:\\262\\test262\\test\\suite\\ch15\\15.5\\15.5.4\\15.5.4.9\\S15.5.4.9_A7.js(16):} catch (e) {}"},{"commentid":670,"comment_count":2,"who":{"uid":"dfugate","name":"Dave Fugate"},"bug_when":"2012-02-24 15:42:46 -0800","thetext":"Fixed S13.2.1_A7_T3.js plus all the others I called out above in Hg."}]}}
---
