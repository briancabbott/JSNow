---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":1204,"creation_ts":"2013-01-22 06:07:00 -0800","short_desc":"11.2.4: Early error restriction for the 'super' keyword w.r.t. eval code contained in function code","delta_ts":"2014-12-23 20:23:25 -0800","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 13: December 21, 2012 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"andrebargull","name":"André Bargull"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"long_desc":[{"commentid":3133,"comment_count":0,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2013-01-22 06:07:53 -0800","thetext":"The early errors restriction for [11.2.4 The super Keyword] currently specifies:\n---\nIt is a Syntax Error if the source code parsed with this production is eval code and the source code is not being processed by a direct call to eval that is contained in function code.\n---\n\nThis reads as if the following code should be allowed:\n---\njs> class Base { f(){return \"base\"} }\n(void 0)\njs> class Derived extends Base { f(){return \"@\" + eval(\"super.f()\"); super.whatever_create_homeobject_entry} }\n(void 0)\njs> new Derived().f()\n\"@base\"\n---\n\nHowever, `eval` parses the supplied source code with goal symbol Script [15.1.2.1 - step 2] and early errors for Script explicitly disallow super [14.1]:\n---\nIt is a Syntax Error if OuterStatementList Contains super.\n---"},{"commentid":3292,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2013-03-06 13:27:42 -0800","thetext":"The definition of eval probably needs to be updated to account for the various context where a direct eval can occur. \n\nMay also need to adjust the meaning/usage of \"function code\"\n\nallowing super to appear in eval code also complicates super binding of methods.  Essentially every method that contains a direct eval needs to be super bound just in case it evals a super."},{"commentid":10990,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-12-10 17:42:03 -0800","thetext":"Fixed in rev30 editor's draft\n\nEliminated redundant static semantic rules about where super can occur. Only kept the rules in 15.1.1 (Script) and !5.2.1.1 (Module). In 15.1.1 may it explicit that the early error does not apply to eval code the is being processed by a direct eval from function code."},{"commentid":11154,"comment_count":3,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-12-23 20:23:25 -0800","thetext":"fixed in rev30"}]}}
---
