---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":1891,"creation_ts":"2013-09-03 04:15:00 -0700","short_desc":"Inconsistent use of [[Construct]] and OrdinaryConstruct","delta_ts":"2013-09-27 14:47:26 -0700","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 17: August 23, 2013 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"andrebargull","name":"André Bargull"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"long_desc":[{"commentid":5305,"comment_count":0,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2013-09-03 04:15:04 -0700","thetext":"The specification should either always use [[Construct]] or OrdinaryConstruct() when performing constructor calls:\n\n`If IsConstructor(c) then call [[Construct]] internal method [...]`\n\nor: `If IsConstructor(c) then call OrdinaryConstruct(c, ...) [...]`\n\nI'd be in favour of using the [[Construct]] internal method because of two reasons:\n- a constructor may perform custom actions in its [[Construct]] internal method, calling OrdinaryConstruct() makes it impossible to execute these actions\n- OrdinaryConstruct() requires a `callable Constructor`, so non-callable Constructors cannot use OrdinaryConstruct() [*]\n\n\n[*]: non-callable Constructors are not prohibited by the spec, so in theory a non-standard exotic object could implement only [[Construct]] but not [[Call]]\n\n[[Construct]]:\n11.2.2  The new Operator\n11.2.4  The super Keyword\n15.4.2.4  Array.from ( arrayLike , mapfn=undefined, thisArg=undefined )\n15.4.3.19  Array.prototype.map ( callbackfn [ , thisArg ] )\n15.4.3.20  Array.prototype.filter ( callbackfn [ , thisArg ] )\n15.13.5.4.3  ArrayBuffer.prototype.slice ( start , end)\n15.13.6.3.8  %TypedArray%.prototype.subarray(begin = 0, end = this.length )\n\nOrdinaryConstruct:\n15.4.3.4  Array.prototype.concat ( [ item1 [ , item2 [ , … ] ] ] )\n15.4.3.10  Array.prototype.slice (start, end)\n15.4.3.12  Array.prototype.splice (start, deleteCount [ , item1 [ , item2 [ , … ] ] ] )\n15.13.6.2.2  %TypedArray%.of ( ...items )\n15.13.6.2.3  %TypedArray%.from ( source , mapfn=undefined, thisArg=undefined )\n15.13.6.3.13  %TypedArray%.prototype.slice ( start, end )\n15.13.6.3.20  %TypedArray%.prototype.map ( callbackfn, thisArg = undefined )\n15.13.6.3.21  %TypedArray%.prototype.filter ( callbackfn, thisArg = undefined )"},{"commentid":5385,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2013-09-12 11:26:58 -0700","thetext":"fixed in rev19 editor's draft\n\nAll of the listed OrdinaryConstruct calls need to be [[Construct]] calls. . We should only call OrdinaryConstruct in contexts such as inside a [[Construct]] implementation were we know we are creating an ordinary object."},{"commentid":5542,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2013-09-27 14:47:26 -0700","thetext":"fixed in rev19"}]}}
---
