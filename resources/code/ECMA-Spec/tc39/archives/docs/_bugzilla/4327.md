---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":4327,"creation_ts":"2015-04-19 11:48:00 -0700","short_desc":"String.prototype.search(null) causes TypeError, different from ES5","delta_ts":"2015-10-02 13:14:04 -0700","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 38: April 14, 2015 Final Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":{"uid":"utatane.tea","name":"Yusuke Suzuki"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"cc":["bugs.ecmascript","mathias"],"long_desc":[{"commentid":14299,"comment_count":0,"who":{"uid":"utatane.tea","name":"Yusuke Suzuki"},"bug_when":"2015-04-19 11:48:47 -0700","thetext":"Reported in https://esdiscuss.org/topic/string-prototype-search-has-a-breaking-change-from-es5\n\nSeeing ES6 String.prototype.search, there's a breaking change from ES5.\n\nWhen executing `\"gnulluna\".search(null)`,\n\nIn ES5, RegExp(null) => /null/ is generated, so the result becomes 1.\n\nhttp://ecma-international.org/ecma-262/5.1/#sec-15.5.4.12\n\nIn ES6, we fall down to the 21.1.3.15 step 3 (because null is not undefined).\nAnd then reaching step 3.a,\n\n  Let searcher be GetMethod(regexp, @@search).\n\nThen TypeError is thrown by GetV's ToObject.\n\nProbably, String.prototype.{match, replace, split} also have the same issue."},{"commentid":14300,"comment_count":1,"who":{"uid":"utatane.tea","name":"Yusuke Suzuki"},"bug_when":"2015-04-19 11:49:28 -0700","thetext":"FYI, WebKit issue is here. https://bugs.webkit.org/show_bug.cgi?id=143889"},{"commentid":14301,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-04-19 12:53:41 -0700","thetext":"fixed in rev39 publication draft\n\nline 3 of search should be \n\n3.\tIf regexp is neither undefined nor null, then\n\nAlso, equivalent change in match, replace, split."},{"commentid":14307,"comment_count":3,"who":{"uid":"utatane.tea","name":"Yusuke Suzuki"},"bug_when":"2015-04-19 13:19:00 -0700","thetext":"(In reply to Allen Wirfs-Brock from comment #2)\n> fixed in rev39 publication draft\n> \n> line 3 of search should be \n> \n> 3.\tIf regexp is neither undefined nor null, then\n> \n> Also, equivalent change in match, replace, split.\n\nCool! Thank you."}]}}
---
