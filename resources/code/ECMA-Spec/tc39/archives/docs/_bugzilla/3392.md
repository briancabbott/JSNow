---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":3392,"creation_ts":"2014-11-19 15:51:00 -0800","short_desc":"toMethod should create a function without a prototype property","delta_ts":"2015-07-10 08:34:19 -0700","product":"Draft for 7th Edition","component":"New feature suggestons","version":"unspecified","rep_platform":"All","op_sys":"All","bug_status":"CONFIRMED","priority":"Normal","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"arv","name":"Erik Arvidsson"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"cc":["andrebargull","dslomov","erik.arvidsson"],"long_desc":[{"commentid":10664,"comment_count":0,"who":{"uid":"arv","name":"Erik Arvidsson"},"bug_when":"2014-11-19 15:51:48 -0800","thetext":"Since methods do not have a prototype property, Function.prototype.toMethod should also create a function without a prototype property.\n\nfunction f() {}\nassert(f.hasOwnProperty('prototype'));\nvar g = f.toMethod({});\nassert(!g.hasOwnProperty('prototype'));\n\nIt is not clear to me if the spec is handling this or not?"},{"commentid":10665,"comment_count":1,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2014-11-20 03:52:42 -0800","thetext":"(In reply to Erik Arvidsson from comment #0)\n> It is not clear to me if the spec is handling this or not?\n\nSteps 4-6 in 9.2.12 CloneMethod cover this case. Only internal methods and internal slots are copied over, including non-standard internal slots (bug 2012). \"copied over\" is possibly the wrong choice of words, because the internal slot values are not copied as in \"a new copy of the value is created\", but instead the value of each internal slot is set to the value of the corresponding internal slot of the original object.\n\nThe note after 9.2.12 explains this, too (The part about \"restricted function properties\" still needs to be removed - bug 3345). Unfortunately that note is on the next page in the pdf version, so it's easy to miss."},{"commentid":10704,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-12-03 12:06:55 -0800","thetext":"(In reply to André Bargull from comment #1)\n> (In reply to Erik Arvidsson from comment #0)\n> > It is not clear to me if the spec is handling this or not?\n> \n> Steps 4-6 in 9.2.12 CloneMethod cover this case. Only internal methods and\n> internal slots are copied over, including non-standard internal slots (bug\n> 2012). \"copied over\" is possibly the wrong choice of words, because the\n> internal slot values are not copied as in \"a new copy of the value is\n> created\", but instead the value of each internal slot is set to the value of\n> the corresponding internal slot of the original object.\n> \n> The note after 9.2.12 explains this, too (The part about \"restricted\n> function properties\" still needs to be removed - bug 3345). Unfortunately\n> that note is on the next page in the pdf version, so it's easy to miss.\n\nHowever, this means that if the function has a [[Construct]] internal method it will now use Object.prototype as the prototype for new instances.\n\nI guess the moral of the story is that you really need to code something like:\nvar g = Object.mixin(f.toMethod(obj), f); \n\nExcept we don't have Object.mixin any more!"},{"commentid":12097,"comment_count":3,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-02-04 10:02:47 -0800","thetext":"moved to deferred features because toMethod has been deferred"}]}}
---
