---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":2813,"creation_ts":"2014-05-04 10:44:00 -0700","short_desc":"9.2.8: redundant code?","delta_ts":"2014-07-18 23:23:46 -0700","product":"Draft for 6th Edition","component":"editorial issue","version":"Rev 25: May 22, 2014 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"jmdyck","name":"Michael Dyck"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"long_desc":[{"commentid":8114,"comment_count":0,"who":{"uid":"jmdyck","name":"Michael Dyck"},"bug_when":"2014-05-04 10:44:43 -0700","thetext":"In 9.2.8 \"AddRestrictedFunctionProperties Abstract Operation\",\nsteps 1 and 2 say:\n  1. If SameValue(F, %ThrowTypeError%) is true, then let thrower be F.\n  2. Else, let thrower be the %ThrowTypeError% intrinsic function Object.\n\nIt seems like the net effect of the two branches are the same, so why distinguish them?"},{"commentid":8212,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-05-07 17:45:04 -0700","thetext":"fixed in rev25 editor's draft\n\nthis was a failed attempt to deal with initialization sequencing issues that arise from the fact that %ThrowTypeError%% is itself a built-in function that needs to have the restricted properties (which use %ThrowTypeError%)\n\nFixed, in a more complex and hopefully correct manner as part of Realm initialization."},{"commentid":8724,"comment_count":2,"who":{"uid":"jmdyck","name":"Michael Dyck"},"bug_when":"2014-05-31 23:54:49 -0700","thetext":"Ah, I see. In that case, I suggest:\n\n(a) In 8.2.2 CreateIntrinsics, replace steps 6-11 with:\n\n      Let thrower be CreateBuiltinFunction(realmRec, throwerSteps, undefined).\n      Assert: thrower is not an abrupt completion.\n\n(b) Here in 9.2.8, replace step 1 with:\n\n      If realm.[[intrinsics]].[[%ThrowTypeError%]] exists,\n          Let thrower be realm.[[intrinsics]].[[%ThrowTypeError%]]\n      Else,\n          Note: realm.[[intrinsics]] is in the process of being constructed\n              (by CreateIntrinsics), and F is the function that will be\n              assigned to realm.[[intrinsics]].[[%ThrowTypeError%]]\n          Let thrower be F.\n\n(In any event, in 9.2.8 / step 1, change \"realmRec\" to \"realm\".)"},{"commentid":9083,"comment_count":3,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-06-23 13:42:41 -0700","thetext":"fixed in rev26 editor's draft"},{"commentid":9306,"comment_count":4,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-07-18 23:23:46 -0700","thetext":"in rev26 draft"}]}}
---
