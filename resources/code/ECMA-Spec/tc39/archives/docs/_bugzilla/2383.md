---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":2383,"creation_ts":"2013-12-11 18:40:00 -0800","short_desc":"Respecification for Array.prototype.toLocaleString","delta_ts":"2014-12-01 21:40:00 -0800","product":"Internationalization - ECMA-402","component":"Specification","version":"Edition 2.0 proposals","rep_platform":"All","op_sys":"All","bug_status":"CONFIRMED","priority":"High","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"ecmascriptbugs","name":"Norbert"},"assigned_to":{"uid":"waldron.rick","name":"Rick Waldron"},"cc":["allen","waldron.rick"],"long_desc":[{"commentid":6929,"comment_count":0,"who":{"uid":"ecmascriptbugs","name":"Norbert"},"bug_when":"2013-12-11 18:40:12 -0800","thetext":"Array.prototype.toLocaleString needs to be respecified to\n- pass locales and options arguments on to the array's elements, and\n- to use a localized list separator.\n\nSee\nhttps://mail.mozilla.org/pipermail/es-discuss/2013-December/thread.html#35248"},{"commentid":9114,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-07-01 10:33:27 -0700","thetext":"Starting in the ES6 spec. Rev26, Array.prototype.toLocaleString says that if Ecma-402 is implemented, the definition from 402 must be used. so we need to provide one."},{"commentid":9115,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-07-01 10:37:36 -0700","thetext":"Also, as pointed out by https://mail.mozilla.org/pipermail/es-discuss/2013-December/035252.html  \n\nThe 402 version of Array.prototype.toLocaleString should validate the optional parameters before calling toLocaleString on any of the array elements."},{"commentid":9823,"comment_count":3,"who":{"uid":"waldron.rick","name":"Rick Waldron"},"bug_when":"2014-08-20 12:39:07 -0700","thetext":"I've copied the existing specification text from Ecma-262 6ed. Rev 26 to Ecma-402 2ed. Rev 2\n\nNext step is to update according to the notes in this thread."},{"commentid":9824,"comment_count":4,"who":{"uid":"waldron.rick","name":"Rick Waldron"},"bug_when":"2014-08-20 12:58:51 -0700","thetext":"(In reply to Norbert from comment #0)\n> Array.prototype.toLocaleString needs to be respecified to\n> - pass locales and options arguments on to the array's elements, and\n\nI understand this to mean that each element has `toLocaleString(locales, options)`   called (after validation). However: I don't see a definition for `String.prototype.toLocaleString`, which means it would call `O.p.toLocaleString` which does nothing with `locales` (or any argument). \n\nHopefully I've just missed something obvious."},{"commentid":9825,"comment_count":5,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-08-20 15:10:42 -0700","thetext":"(In reply to Rick Waldron from comment #4)\n> (In reply to Norbert from comment #0)\n> > Array.prototype.toLocaleString needs to be respecified to\n> > - pass locales and options arguments on to the array's elements, and\n> \n> I understand this to mean that each element has `toLocaleString(locales,\n> options)`   called (after validation). However: I don't see a definition for\n> `String.prototype.toLocaleString`, which means it would call\n> `O.p.toLocaleString` which does nothing with `locales` (or any argument). \n> \n> Hopefully I've just missed something obvious.\n\nthat's ok.  Presumably, there isn't anything locale specific that is appropriate to do for generic string value.  So, O.p.toString will just delegate toLocaleString back to toString, producing the original string value."},{"commentid":9831,"comment_count":6,"who":{"uid":"waldron.rick","name":"Rick Waldron"},"bug_when":"2014-08-20 17:34:53 -0700","thetext":"(In reply to Allen Wirfs-Brock from comment #5)\n> (In reply to Rick Waldron from comment #4)\n> > (In reply to Norbert from comment #0)\n> > > Array.prototype.toLocaleString needs to be respecified to\n> > > - pass locales and options arguments on to the array's elements, and\n> > \n> > I understand this to mean that each element has `toLocaleString(locales,\n> > options)`   called (after validation). However: I don't see a definition for\n> > `String.prototype.toLocaleString`, which means it would call\n> > `O.p.toLocaleString` which does nothing with `locales` (or any argument). \n> > \n> > Hopefully I've just missed something obvious.\n> \n> that's ok.  Presumably, there isn't anything locale specific that is\n> appropriate to do for generic string value.  So, O.p.toString will just\n> delegate toLocaleString back to toString, producing the original string\n> value.\n\nOk, that makes perfect sense."},{"commentid":10702,"comment_count":7,"who":{"uid":"ecmascriptbugs","name":"Norbert"},"bug_when":"2014-12-01 21:40:00 -0800","thetext":"Many objects will not do anything locale specific, so that toLocaleString returns the same string as toString. That's OK.\n\nOne open issue is whether toLocaleString on Array and Object should check the validity of the locales argument in the same way as the implementations on Date and Number, so that, for example, [].toLocaleString(\"i\") throws an exception. It might be odd if the method let this invalid argument pass for an empty array, or for an array holding only locale-unaware objects, but then started throwing after a Date or Number object is added."}]}}
---
