---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":1553,"creation_ts":"2013-06-08 12:40:00 -0700","short_desc":"Change “EscapeSequence 0 [lookahead ∉ DecimalDigit]” to match reality","delta_ts":"2014-12-18 06:54:05 -0800","product":"Draft for 6th Edition","component":"normative change from ES5.x","version":"Rev 15: May 14, 2013 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"DUPLICATE","dup_id":3477,"priority":"Normal","bug_severity":"enhancement","dependson":3124,"everconfirmed":true,"reporter":{"uid":"mathias","name":"Mathias Bynens"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"cc":["andrebargull","bugs.ecmascript","claude.pache","jorendorff","lukeh","mathias","utatane.tea"],"long_desc":[{"commentid":4159,"comment_count":0,"who":{"uid":"mathias","name":"Mathias Bynens"},"bug_when":"2013-06-08 12:40:35 -0700","thetext":"As posted by Yusuke Suzuki (https://mail.mozilla.org/pipermail/es-discuss/2013-June/031149.html):\n\nEscapeSequence ::\n    CharacterEscapeSequence\n    0 [lookahead ∉ DecimalDigit]\n    HexEscapeSequence\n    UnicodeEscapeSequence\n\nBecause of \"[lookahead ∉ DecimalDigit]\", strictly speaking, \"\\08\" and \"\\09\" are ill-formed StringLiterals.\nBut engines in the wild (at least V8, SpiderMonkey, JSC) accept this form and recognize it as \"\\x008\".\n\nTo bridge the gap, I think it would be better to introduce this form to the spec officially."},{"commentid":4170,"comment_count":1,"who":{"uid":"mathias","name":"Mathias Bynens"},"bug_when":"2013-06-12 03:17:12 -0700","thetext":"Added some tests here: http://mathias.html5.org/tests/javascript/string/ (see the last two tests)"},{"commentid":4171,"comment_count":2,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2013-06-12 06:31:35 -0700","thetext":"Behaviour for noctal escapes in strict-mode is different across engines, e.g. the proposed tests only work in V8 and Presto, other engines report a strict-mode error (SpiderMonkey/JSC/IE).\n\nEscapeSequence with leading \"0\":\n- sloppy mode\n=> accepted in major engines as \"\\08\" == \"\\0\" + \"8\"\n\n- strict mode\n=> accepted in V8/Presto as \"\\08\" == \"\\0\" + \"8\"\n=> SyntaxError in IE/JSC/SpiderMonkey\n\n\nEscapeSequence without leading \"0\":\n- sloppy mode\n=> accepted in major engines as \"\\8\" == \"8\"\n\n- strict mode\n=> accepted in IE/SpiderMonkey/V8/Presto as \"\\8\" == \"8\"\n=> SyntaxError in JSC\n\n\nOctalInteger\n- sloppy mode\n=> accepted in major engines as 08 == 8\n=> Note: SpiderMonkey reports warning in shell\n\n- strict mode\n=> accepted in IE/Presto/JSC/V8 as 08 == 8\n=> SyntaxError in SpiderMonkey"},{"commentid":8938,"comment_count":3,"who":{"uid":"mathias","name":"Mathias Bynens"},"bug_when":"2014-06-14 00:13:52 -0700","thetext":"Quoting https://bugzilla.mozilla.org/show_bug.cgi?id=957513#c25\n\n> While this is a perfectly valid error to throw, it apparently breaks banks. https://bugzilla.mozilla.org/show_bug.cgi?id=1025107 Throwing a warning and automatically falling back to handling the literal as decimal rather than octal would possibly be preferable (at least for the time being).\n\nSounds like the spec needs to be changed to match reality after all."},{"commentid":8945,"comment_count":4,"who":{"uid":"jorendorff","name":"Jason Orendorff"},"bug_when":"2014-06-16 11:35:48 -0700","thetext":"That bug is about number literals like 08, not string escape sequences.\n\nBut yes, alas, I think we will have to back out the patch we landed in  <https://bugzilla.mozilla.org/show_bug.cgi?id=957513>. The spec should do the same."},{"commentid":9772,"comment_count":5,"who":{"uid":"claude.pache","name":"Claude Pache"},"bug_when":"2014-08-12 13:53:04 -0700","thetext":"See also Bug #3124, (which relates to legacy octal escape sequences followed by 8 or 9 in sloppy mode, rather than \\0  followed by 8 or 9 in all modes)."},{"commentid":11095,"comment_count":6,"who":{"uid":"claude.pache","name":"Claude Pache"},"bug_when":"2014-12-18 06:54:05 -0800","thetext":"I've open Bug 3477 for a definite answer to the more general issue of backslash followed by one ore more digits in string and template literals.\n\n*** This bug has been marked as a duplicate of bug 3477 ***"}]}}
---
