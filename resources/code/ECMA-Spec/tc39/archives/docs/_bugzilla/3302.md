---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":3302,"creation_ts":"2014-10-28 13:36:00 -0700","short_desc":"Classes with computed names can see incomplete object","delta_ts":"2015-07-10 08:34:20 -0700","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 28: October 14, 2014 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"INVALID","priority":"Normal","bug_severity":"major","everconfirmed":true,"reporter":{"uid":"arv","name":"Erik Arvidsson"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"cc":["andrebargull","erik.arvidsson"],"long_desc":[{"commentid":10542,"comment_count":0,"who":{"uid":"arv","name":"Erik Arvidsson"},"bug_when":"2014-10-28 13:36:10 -0700","thetext":"Given the following class declaration\n\nclass C {\n  a() {}\n  [(console.log(C.prototype), 42]() {}\n  b() {}\n}\n\nThe expression for the computed property name is executed in a scope where C has a binding, allowing us to see an incomplete prototype object.\n\nThis is bad for performance.\n\nCan we change this to have the class name as a TDZ until after all the method definitions have been installed on the prototype and the constructor."},{"commentid":10543,"comment_count":1,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2014-10-28 13:46:06 -0700","thetext":"Accessing \"C\" during evaluation of the computed property name will throw a ReferenceError because the binding is not yet initialized (cf. 14.5.14 step 5c and 14.5.14 step 19)."},{"commentid":10544,"comment_count":2,"who":{"uid":"arv","name":"Erik Arvidsson"},"bug_when":"2014-10-28 13:53:03 -0700","thetext":"Thanks André. Perfect."}]}}
---
