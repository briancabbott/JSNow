---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":92,"creation_ts":"2011-04-17 11:41:00 -0700","short_desc":"tests should never depend upon predicting the result of toStringing a function","delta_ts":"2011-05-31 16:38:11 -0700","product":"Test262","component":"ECMA-262 Tests","version":"unspecified","rep_platform":"PC","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"normal","blocked":93,"everconfirmed":true,"reporter":{"uid":"allen","name":"Allen Wirfs-Brock"},"assigned_to":{"uid":"dfugate","name":"Dave Fugate"},"long_desc":[{"commentid":188,"comment_count":0,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2011-04-17 11:41:21 -0700","thetext":"Some tests define a function and then compare the result returned by toString applied to that function to some expected result.  Presumably this is done to ensure that a function value is in fact the expected function value.\n\nHowever, such a test can produce false negatives because 15.3.3.3 says that Function.prototype.toString produces an implementation defined result.\n\nAll tests that use toString on a function value need to be reviewed for this problem."},{"commentid":220,"comment_count":1,"who":{"uid":"dfugate","name":"Dave Fugate"},"bug_when":"2011-05-25 13:28:59 -0700","thetext":"Searched through all IE Test Center tests for \"toString()\" and the only thing left that looked suspicious was 13.2-18-1.js:\n    var fun = function () { };\n    verifyValue = (fun.prototype !== 100 && fun.prototype.toString() === \"[object Object]\");\n\nAs toString is being called on the prototype itself, this seems OK..."},{"commentid":222,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2011-05-25 13:57:26 -0700","thetext":"(In reply to comment #1)\n> Searched through all IE Test Center tests for \"toString()\" and the only thing\n> left that looked suspicious was 13.2-18-1.js:\n>     var fun = function () { };\n>     verifyValue = (fun.prototype !== 100 && fun.prototype.toString() ===\n> \"[object Object]\");\n> \n> As toString is being called on the prototype itself, this seems OK...\n\nThe default value that is creates for the prototype property is not a function so, so this shouldn't be an issue here.  I'm not sure what the the test against 100 is all about.\n\nI would think that this test should really be something like:\n  typeof fun.prototype === 'object' && {}.prototype.toString.call(fun.prototype) === \"[object Object]\""}]}}
---
