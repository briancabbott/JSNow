---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":2830,"creation_ts":"2014-05-08 05:00:00 -0700","short_desc":"6.1.7 The Object Type: Not necessary to special case \"-0\" for array indices","delta_ts":"2014-06-16 16:19:28 -0700","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 24: April 27, 2014 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"andrebargull","name":"André Bargull"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"long_desc":[{"commentid":8220,"comment_count":0,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2014-05-08 05:00:21 -0700","thetext":"6.1.7  The Object Type\n\nThe def. for array indices special cases `-0`. This is not necessary because integer indices only include +0 and integers greater than +0."},{"commentid":8326,"comment_count":1,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2014-05-12 06:23:12 -0700","thetext":"Or does the definition is supposed to read:\n---\nAn integer index is String-valued property key that is a canonical numeric string (see 7.1.16) and whose _canonical_ numeric value is either +0 or a positive integer.\n\nAn array index is an integer index whose numeric value i is in the range 0 ≤ i < 2^32 -1 and i ≠ -0.\n---\n\nNote: Changed \"numeric value\" to \"canonical numeric value\" in the integer index definition.\n\n\nThe distinction between \"numeric value\" and \"canonical numeric value\" is necessary to explain the (current) differences between `[7][\"-0\"]` and `new Int8Array([7])[\"-0\"]`. The former expression evaluates to `undefined` whereas the latter evaluates to `7` according to the rev24 draft."},{"commentid":8563,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-05-19 11:52:00 -0700","thetext":"fixed in rev25 editor's draft\n\nby redefining how \"-0\" is handled in CannonicalNumericString (now called CannonicalNumericIndexString) and its callers.\n\nI think we want `[7][\"-0\"]` and `new Int8Array([7])[\"-0\"]` to both consistently evaluate  to undefined.  However, we don't want `new Int8Array([7])[\"-0\"]=\"foo\"` to create a \"-0\" expando property; even though it must (backwards compat.) for `[7][\"-0\"]=\"foo\";`\n\nThe rev25 changes address this.\n\nFinally, remember that `x[0]` and `x[-0]` always mean the same thing because ToString(-0) is \"0\" and ToString is applied to property keys before invoking the [[Get]] or [[Set]] internal method."},{"commentid":9020,"comment_count":3,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-06-16 16:19:28 -0700","thetext":"fixed in rev25 editor's draft"}]}}
---
