---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":3575,"creation_ts":"2015-01-17 21:55:00 -0800","short_desc":"22.2.1.1.1 AllocateTypedArray steps 1-2 can be omitted","delta_ts":"2015-02-12 12:17:35 -0800","product":"Draft for 6th Edition","component":"editorial issue","version":"Rev 31: January 15, 2015 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":{"uid":"446240525","name":"ziyunfei"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"long_desc":[{"commentid":11541,"comment_count":0,"who":{"uid":"446240525","name":"ziyunfei"},"bug_when":"2015-01-17 21:55:22 -0800"},{"commentid":11542,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-01-18 11:43:02 -0800","thetext":"Why do you say that?\n\nBoth of those lines exist for specific purposes relating to the use of the %TypedArray% intrinsic, and primarily come into play when AllocateTypedArray is called from it.\n\nThe first line says that you get an exception if you attempt to directly call %TypedArray%\n\n%TypedArray% is intended to only be super new'ed by its subclass constructors.\n\nThe second line says that you get an exception if you try to directly invoke 'new' on %TypedArray%"},{"commentid":11598,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-01-22 10:47:29 -0800","thetext":"do you have a follow up.  If not, I'll close this as invalid."},{"commentid":11604,"comment_count":3,"who":{"uid":"446240525","name":"ziyunfei"},"bug_when":"2015-01-22 22:10:40 -0800","thetext":"(In reply to Allen Wirfs-Brock from comment #1)\n> The first line says that you get an exception if you attempt to directly\n> call %TypedArray%\n> \n> The second line says that you get an exception if you try to directly invoke\n> 'new' on %TypedArray%\n\nAllen, I think steps 5.a-b can do these two things, or am i missing something?"},{"commentid":12267,"comment_count":4,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-02-09 17:14:32 -0800","thetext":"You're technically correct. But, I think the redundancy is good, from a specification perspective as lines 1-2 and 5-5e are actually addressing distinct requirements.  The first is that you aren't alled to directly call or new %TypedArray\".\n\nStep 5 is saying that valid subclass must have a [[TypedArrayonstructorName]] somewhere on its subclass chain but below %TypedArray% \n\nWhile the mechanism used to do step 5 also covers 1-2 we could leave out 1-2. But that conflates the separate requirements in a way that may make the 1-2 requirements less obvious. \n\nIn fact, I went the other direction.  I added a NOTE after step two clarify the purpose of the first two lines.\n\nBut implementations, of course, are free to do that sort of optimization."},{"commentid":12279,"comment_count":5,"who":{"uid":"446240525","name":"ziyunfei"},"bug_when":"2015-02-09 23:04:00 -0800","thetext":"(In reply to Allen Wirfs-Brock from comment #4)\n> You're technically correct. But, I think the redundancy is good, from a\n> specification perspective as lines 1-2 and 5-5e are actually addressing\n> distinct requirements.  The first is that you aren't alled to directly call\n> or new %TypedArray\".\n> \n> Step 5 is saying that valid subclass must have a\n> [[TypedArrayonstructorName]] somewhere on its subclass chain but below\n> %TypedArray% \n> \n> While the mechanism used to do step 5 also covers 1-2 we could leave out\n> 1-2. But that conflates the separate requirements in a way that may make the\n> 1-2 requirements less obvious. \n> \n> In fact, I went the other direction.  I added a NOTE after step two clarify\n> the purpose of the first two lines.\n> \n> But implementations, of course, are free to do that sort of optimization.\n\nI see now. Thank you."},{"commentid":12397,"comment_count":6,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-02-12 12:17:35 -0800","thetext":"fixed in rev33"}]}}
---
