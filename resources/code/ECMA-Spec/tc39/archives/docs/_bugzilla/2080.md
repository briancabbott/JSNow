---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":2080,"creation_ts":"2013-10-26 12:30:00 -0700","short_desc":"Should bound functions get a name property ??","delta_ts":"2014-07-18 23:45:50 -0700","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 19: September 27, 2013 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"enhancement","dependson":1250,"everconfirmed":true,"reporter":{"uid":"allen","name":"Allen Wirfs-Brock"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"cc":["brandon","waldron.rick"],"long_desc":[{"commentid":5981,"comment_count":0,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2013-10-26 12:30:45 -0700","thetext":"The wiki proposal doesn't mention what to do WRT the name property of functions created using bind.\n\nI started down the path to specifying this but had second thoughts as I worked on it.\n\nThe main issue is that bind is a dynamic run-time operation and the value of a name property can not be statically determined as it is in most other cases.\n\nDetermining the a name is non-trivial computationally (accessing a property of the target, maybe doing a string concatenation, etc. I seems like a bad idea to require that overhead on every bind when in practice the name property will seldom be used for anything other than debugging. \n\nMaybe an implementation might want to create one if a debugging mode is active but to always do it seems like a waste of runtime cycles."},{"commentid":5982,"comment_count":1,"who":{"uid":"brandon","name":"Brandon Benvie"},"bug_when":"2013-10-26 12:38:49 -0700","thetext":"The implementation of this is easy enough, without excess computation. Since the bound function already has a reference to the target function, it's easy enough to only resolve the name upon access of the property. Since the \"name\" property is non-configurable, the only case in which the access is observable is when the target function is a Proxy, which should be extremely rare.\n\nMozilla's implementation of function objects already has the various properties of functions hitting resolve hooks on access, so there's already evidence that lazy generation of function properties is feasible.\n\nIn terms of semantics, I think it could go either way. There's an argument to be made that a bound function is not semantically the same thing as the function it binds, because at the least the |this| binding will not match the target function, and often its parameters will also not match."},{"commentid":5984,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2013-10-26 13:31:44 -0700","thetext":"(In reply to comment #1)\n> The implementation of this is easy enough, without excess computation. Since\n> the bound function already has a reference to the target function, it's easy\n> enough to only resolve the name upon access of the property. Since the \"name\"\n> property is non-configurable, the only case in which the access is observable\n> is when the target function is a Proxy, which should be extremely rare.\n\nI pretty sure that we decided that \"name\" should be non-writable/configurable, just like the \"length\" and other similar properties changing to.  That changes the observability.\n\nThe spec. can leave it open-ended whether name changes are obserable in the presence of things like Proxies. It has to take a stand one way or the other and follow through on the implications of that choice.\n\n> \n> Mozilla's implementation of function objects already has the various properties\n> of functions hitting resolve hooks on access, so there's already evidence that\n> lazy generation of function properties is feasible.\n> \n> In terms of semantics, I think it could go either way. There's an argument to\n> be made that a bound function is not semantically the same thing as the\n> function it binds, because at the least the |this| binding will not match the\n> target function, and often its parameters will also not match.\n\nIf we have a name, I suggest we make it something like \"bind <target name>\" to distinguish bound functions from the original function.   But I think it would be better and simpler if we just don't have a (auto generated) name property  on bound functions."},{"commentid":7763,"comment_count":3,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-04-16 16:51:54 -0700","thetext":"decisions from April 2014 TC39 meeting"},{"commentid":8630,"comment_count":4,"who":{"uid":"waldron.rick","name":"Rick Waldron"},"bug_when":"2014-05-26 10:55:58 -0700","thetext":"Just for reference: https://github.com/rwaldron/tc39-notes/blob/master/es6/2014-04/apr-8.md#conclusionresolution-8"},{"commentid":9225,"comment_count":5,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-07-16 15:44:24 -0700","thetext":"fixed in rev26 editor's draft"},{"commentid":9323,"comment_count":6,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-07-18 23:45:50 -0700","thetext":"in rev26 draft"}]}}
---
