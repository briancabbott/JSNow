---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":2302,"creation_ts":"2013-11-15 08:19:00 -0800","short_desc":"Allowing default as BindingIdentifier is confusing","delta_ts":"2015-07-10 08:35:04 -0700","product":"Draft for 6th Edition","component":"Modules","version":"Rev 21: November 8, 2013 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":{"uid":"arv","name":"Erik Arvidsson"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"cc":["dherman","erik.arvidsson","jorendorff","samth"],"long_desc":[{"commentid":6799,"comment_count":0,"who":{"uid":"arv","name":"Erik Arvidsson"},"bug_when":"2013-11-15 08:19:15 -0800","thetext":"I see that the latest draft allows default to be used as a BindingIdentitifier in the context of an export. I don't see the value of this complication.\n\nHow is\n\n  export function default() {}\n\nbetter than\n\n  export default function() {}\n\n?"},{"commentid":10172,"comment_count":1,"who":{"uid":"dherman","name":"Dave Herman"},"bug_when":"2014-09-09 10:46:56 -0700","thetext":"I presented the general solution here:\n\nhttps://mail.mozilla.org/pipermail/es-discuss/2014-March/036697.html\n\nBasic roadmap:\n\n- eliminate `default` as a valid binding identifier name\n- add special cases in the grammar for `export default` so that FunctionDeclaration, GeneratorDeclaration, and ClassDeclaration are legal as well as AssignmentExpression\n- add a lookahead restriction to AssignmentExpression in this context to disambiguate in favor of the declaration forms\n- this way the scoping rules place the name of the declaration in scope for the whole module, not just inside the expression, and the hoisting rules initialize the function early\n\nOne case that I neglected to mention in that email was anonymous function expressions, which need to be supported too, e.g.:\n\n    export default function() { };\n\nSo this needs a case in the grammar as well, and should also be initialized early just like the named function declaration. This is important to preserve the illusion that the RHS of export default is *always* an expression, even in the declaration cases (which are really only being called declarations for the purposes of scope). Indeed, existing ecosystems using ES6 already use this form, e.g.:\n\nhttps://github.com/emberjs/ember.js/blob/4445be038bd839a1559020db5677b211dd3f1e9c/packages/ember-metal/tests/props_helper.js#L5\n\nA couple possible ways to spec this:\n\n- use a cover grammar for named vs anonymous functions\n- add a new parameterization to FunctionDeclaration for \"allowing anonymous declarations\"\n\nDave"},{"commentid":10180,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-09-10 17:45:11 -0700","thetext":"fixed in rev28 editor's draft.\n\nPretty much as Dave described.  I parametrized FunctionDeclaration and GeneratorDeclaration for the situation in exports where the BindingIdentifer is optional."},{"commentid":10182,"comment_count":3,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-09-10 17:49:45 -0700","thetext":"*** Bug 2918 has been marked as a duplicate of this bug. ***"},{"commentid":10454,"comment_count":4,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-10-14 15:17:56 -0700","thetext":"fixed in rev28"}]}}
---
