---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":3160,"creation_ts":"2014-08-29 11:23:00 -0700","short_desc":"Should multiple __proto__: PropertyDefinitions be permitted?","delta_ts":"2014-08-29 13:36:35 -0700","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 26: July 18, 2014 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"WONTFIX","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":{"uid":"jorendorff","name":"Jason Orendorff"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"cc":"jwalden+beo","long_desc":[{"commentid":10009,"comment_count":0,"who":{"uid":"jorendorff","name":"Jason Orendorff"},"bug_when":"2014-08-29 11:23:31 -0700","thetext":"Currently, there's a special rule banning them:\n\nhttp://people.mozilla.org/~jorendorff/es6-draft.html#sec-__proto__-property-names-in-object-initializers\n> *   It is a Syntax Error if PropertyNameList of PropertyDefinitionList\n>     contains any duplicate entries for \"__proto__\" and at least two of those\n>     entries were obtained from productions of the form\n>     `PropertyDefinition : PropertyName : AssignmentExpression`.\n\nSince all other rules about duplicate property definitions have been dropped in ES6, I think it would make sense to drop this one."},{"commentid":10010,"comment_count":1,"who":{"uid":"jwalden+beo","name":"Jeff Walden (remove +beo to mail)"},"bug_when":"2014-08-29 11:28:03 -0700","thetext":"I disagree.  I think prototype mutation is bad, and multiple mutations bad enough, that this is a perfectly reasonable thing to have.\n\nThe rationale for removing the restriction on normal properties was that computed property names could produce conflicts just as easily, conflicts not detectable until runtime.  Because no property form but p:n can trigger prototype mutation, the rationale is not valid as concerns this duplication-removal."},{"commentid":10018,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-08-29 13:36:35 -0700","thetext":"We've talked about this at TC39 meetings.\n\n__proto__: expr\n\nand \n\"__proto__\": expr\n\nare considered a special form and are not regular property definitions. And we decided that the special form should only be allowed to occur only once in each object literal.\n\nHowever,\n[\"__proto__\"]:  expr\n\"__proto__\" () { }\n\netc. are regular property definitions and can occur multiple times.\n\nYou can even say:\n\n{__proto__: obj,        //set [[Prototype]]\n [\"__proto__\"]: undefined //disable access to O.p.__prototype\n}\n\nI don't think we need to revisit that decisions so I'm going to close this as WONTFIX"}]}}
---
