---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":1257,"creation_ts":"2013-02-20 10:26:00 -0800","short_desc":"Make new Date(dateObj) work as expected","delta_ts":"2013-08-23 08:22:41 -0700","product":"Draft for 6th Edition","component":"normative change from ES5.x","version":"Rev 13: December 21, 2012 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":{"uid":"jorendorff","name":"Jason Orendorff"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"cc":"waldron.rick","long_desc":[{"commentid":3200,"comment_count":0,"who":{"uid":"jorendorff","name":"Jason Orendorff"},"bug_when":"2013-02-20 10:26:20 -0800","thetext":"1. `new Date(obj)` calls obj.[[DefaultValue]]()\n\n2. Date objects have a special weird [[DefaultValue]] method\n   that prefers to call .toString() rather than .valueOf().\n\n3. As it happens, Date.prototype.toString() is lossy.\n   The spec doesn't require it, but implementations don't show milliseconds\n   in Date toString output and it's unlikely to change.\n\nAs a consequence, you can't use new Date(dateObj) to copy a Date object.\n\nFirefox implements this to spec and this causes real-world issues:\n  https://github.com/timrwood/moment/pull/629\nHowever at least Chrome doesn't implement the spec!\n\nProposal: Special-case this in the Date constructor (15.9.3.2).\n\n>- 1. Let v be ToPrimitive(value).\n>+ 1. If value has a [[DateValue]] property then let v be value.[[DateValue]]; else let v be ToPrimitive(value)."},{"commentid":3486,"comment_count":1,"who":{"uid":"waldron.rick","name":"Rick Waldron"},"bug_when":"2013-03-18 11:51:41 -0700","thetext":"Per Conclusion/Resolution here: https://github.com/rwldrn/tc39-notes/blob/master/es6/2013-03/mar-13.md#414-make-new-datedateobj\n\n\nWhen date object is passed to the Date constructor, it makes an accurate copy of the date object."},{"commentid":4910,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2013-08-15 15:44:20 -0700","thetext":"fixed in rev15 editor's draft"},{"commentid":5094,"comment_count":3,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2013-08-23 08:22:41 -0700","thetext":"fixed in rev17, August 23, 2013 draft"}]}}
---
