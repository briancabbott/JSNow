---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":1529,"creation_ts":"2013-05-30 12:24:00 -0700","short_desc":"15.4.4.8 Array.prototype.reverse does not throw a type error","delta_ts":"2013-06-17 13:23:07 -0700","product":"Test262","component":"ECMA-262 Tests","version":"unspecified","rep_platform":"All","op_sys":"All","bug_status":"IN_PROGRESS","priority":"Normal","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"prsriniv","name":"Prashanth Srinivasan"},"assigned_to":{"uid":"prsriniv","name":"Prashanth Srinivasan"},"cc":["pruiz9999","trbaker"],"long_desc":[{"commentid":4103,"comment_count":0,"who":{"uid":"prsriniv","name":"Prashanth Srinivasan"},"bug_when":"2013-05-30 12:24:51 -0700","thetext":"The ES5.1 spec for 15.4.4.8 has 'true' as the last argument to the Get/Put/Delete operations in its algorithm, i.e. throw a type error if the element attributes forbid a value change or deletion. test262 does not test for this and of the main browsers Chrome gets this wrong: it correctly blocks the forbidden updates, but silently ignores this instead of throwing an error, and hence also continues reversing instead of aborting.\n\nhttps://mail.mozilla.org/pipermail/test262-discuss/2013-April/000161.html\nFrom Paul Ruizendaal's email to the discuss thread."},{"commentid":4136,"comment_count":1,"attachid":"53","who":{"uid":"prsriniv","name":"Prashanth Srinivasan"},"bug_when":"2013-06-04 14:11:39 -0700","thetext":"Created attachment 53\nTest cases that check true is passed to attributes if not throw a TypeError"},{"commentid":4182,"comment_count":2,"attachid":"64","who":{"uid":"prsriniv","name":"Prashanth Srinivasan"},"bug_when":"2013-06-12 12:16:51 -0700","thetext":"Created attachment 64\nTest cases that check true is passed to element attributes if not throw a TypeError\n\nAs noted in bug description, these 2 test cases fail on v8 debug and release version as it blocks the forbidden updates, but does not throw an error."},{"commentid":4195,"comment_count":3,"who":"pruiz9999","bug_when":"2013-06-17 13:23:07 -0700","thetext":"[1] The spec algorithm says that reversing progresses until it hits an error: it is not atomic, and an exception halfway through results in a half reversed array (cq. array-like object). Hence, just testing the elements beforehand for blocking attributes and throwing an early error is a no-go optimization.\n\nThe proposed tests use a 2 element array to reverse. Using a 4 element array and testing for \"semi-reversedness\"  is a better test choice I think.\n\n[2] Array.prototype.reverse also works on array-like objects. This is not verified.\n\n[3] In real world implementations there is probably a \"slow path\" implementation that implements the spec algorithm literally and an optimized path for dense arrays. It might be useful to add a test with a dense 50 (or so) element array, just to test something that is likely on a fast path. The counter argument would be that test262 is about spec coverage, not code coverage."}],"attachment":[{"_attributes":{"isobsolete":"1","ispatch":"1"},"attachid":"53","date":"2013-06-04 14:11:00 -0700","delta_ts":"2013-06-12 12:16:51 -0700","desc":"Test cases that check true is passed to attributes if not throw a TypeError","filename":"bug_1529.patch","type":"text/plain","size":"1528","attacher":{"_attributes":{"name":"Prashanth Srinivasan"},"_text":"prsriniv"},"data":{"_attributes":{"encoding":"base64"},"_text":"ZGlmZiAtciBlNjJlMWIzNWYwZDkgdGVzdC9zdWl0ZS9jaDE1LzE1LjQvMTUuNC40LzE1LjQuNC44\nL1MxNS40LjQuOF9BNS44LmpzCi0tLSAvZGV2L251bGwJVGh1IEphbiAwMSAwMDowMDowMCAxOTcw\nICswMDAwCisrKyBiL3Rlc3Qvc3VpdGUvY2gxNS8xNS40LzE1LjQuNC8xNS40LjQuOC9TMTUuNC40\nLjhfQTUuOC5qcwlUdWUgSnVuIDA0IDE3OjA5OjA3IDIwMTMgLTA0MDAKQEAgLTAsMCArMSw0NiBA\nQAorLy8gQ29weXJpZ2h0IChjKSAyMDEzIEFkb2JlIFN5c3RlbXMgSW5jb3JwZXJhdGVkLiAgQWxs\nIHJpZ2h0cyByZXNlcnZlZC4KKy8vIEFkb2JlIFN5c3RlbXMgSW5jb3JwZXJhdGVkIG1ha2VzIHRo\naXMgY29kZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zCisvLyBhbmQgY29uZGl0aW9ucyBzZXQg\nZm9ydGggb24KKy8vIGh0dHA6Ly9oZy5lY21hc2NyaXB0Lm9yZy90ZXN0cy90ZXN0MjYyL3Jhdy1m\naWxlL3RpcC9MSUNFTlNFICh0aGUKKy8vICJVc2UgVGVybXMiKS4gIEFueSByZWRpc3RyaWJ1dGlv\nbiBvZiB0aGlzIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlCisvLyBjb3B5cmlnaHQgYW5kIHRo\naXMgbm90aWNlIGFuZCBvdGhlcndpc2UgY29tcGx5IHdpdGggdGhlIFVzZSBUZXJtcy4KKy8qKgor\nICogVGVzdHMgZm9yIEFycmF5LnByb3RvdHlwZS5yZXZlcnNlKCkgZm9yIGVsZW1lbnQgYXR0cmli\ndXRlcyB0aGF0IGZvcmJpZCB2YWx1ZSBjaGFuZ2UKKyAqCisgKiBAcGF0aCBjaDE1LzE1LjQvMTUu\nNC40LzE1LjQuNC44L1MxNS40LjQuOF9BNS44LmpzCisgKiBAZGVzY3JpcHRpb24gQXJyYXkudG9T\ndHJpbmcoKQorICovCisKKy8vQ0hFQ0sjMQorZnVuY3Rpb24gQXJyYXlSZXZlcnNlKCkgeworICB2\nYXIgYSA9IFtdOworICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYSwgJzAnLCB7dmFsdWU6Nywgd3Jp\ndGFibGU6ZmFsc2V9KTsKKyAgYVsxXSA9IDM7CisgIHRyeSB7CisgICAgYS5yZXZlcnNlKCk7Cisg\nICAgcmV0dXJuIGZhbHNlOworICB9IGNhdGNoKGUpIHsKKyAgICBpZiggZS5uYW1lIT09J1R5cGVF\ncnJvcicgKSB7CisgICAgJEVSUk9SKCcjMSBBcnJheS5wcm90b3R5cGUucmV2ZXJzZSA9PT0gVHlw\nZUVycm9yLiBBY3R1YWwgJyArIChlLm5hbWUpKTsKKyAgICByZXR1cm4gZmFsc2U7CisgICAgfQor\nICAgIHJldHVybiB0cnVlOworICB9Cit9CisKKy8vQ0hFQ0sjMgorZnVuY3Rpb24gQXJyYXlSZXZl\ncnNlMSgpIHsKKyAgdmFyIGEgPSBbXTsKKyAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsICcwJywg\ne3ZhbHVlOjcsIGNvbmZpZ3VyYWJsZTpmYWxzZX0pOworICBhLmxlbmd0aCA9IDI7CisgIHRyeSB7\nCisgICAgYS5yZXZlcnNlKCk7CisgICAgcmV0dXJuIGZhbHNlOworICB9IGNhdGNoKGUpIHsKKyAg\nICBpZiggZS5uYW1lIT09J1R5cGVFcnJvcicgKSB7CisgICAgJEVSUk9SKCcjMiBBcnJheS5wcm90\nb3R5cGUucmV2ZXJzZSA9PT0gVHlwZUVycm9yLiBBY3R1YWwgJyArIChlLm5hbWUpKTsKKyAgICBy\nZXR1cm4gZmFsc2U7CisgICAgfQorICAgIHJldHVybiB0cnVlOworICB9Cit9Cg==\n"}},{"_attributes":{"isobsolete":"0","ispatch":"1"},"attachid":"64","date":"2013-06-12 12:16:00 -0700","delta_ts":"2013-06-12 12:16:51 -0700","desc":"Test cases that check true is passed to element attributes if not throw a TypeError","filename":"bug_1529.patch","type":"text/plain","size":"4776","attacher":{"_attributes":{"name":"Prashanth Srinivasan"},"_text":"prsriniv"},"data":{"_attributes":{"encoding":"base64"},"_text":"ZGlmZiAtciBlZTQyOWMxYmU2ZjYgdGVzdC9zdWl0ZS9jaDE1LzE1LjQvMTUuNC40LzE1LjQuNC44\nLzE1LjQuNC44LTEuanMKLS0tIC9kZXYvbnVsbAlUaHUgSmFuIDAxIDAwOjAwOjAwIDE5NzAgKzAw\nMDAKKysrIGIvdGVzdC9zdWl0ZS9jaDE1LzE1LjQvMTUuNC40LzE1LjQuNC44LzE1LjQuNC44LTEu\nanMJV2VkIEp1biAxMiAxNToxMjoxNSAyMDEzIC0wNDAwCkBAIC0wLDAgKzEsNDggQEAKKy8vIENv\ncHlyaWdodCAoYykgMjAxMywgQWRvYmUgU3lzdGVtcyBJbmNvcnBvcmF0ZWQKKy8vIEFsbCByaWdo\ndHMgcmVzZXJ2ZWQuCisvLworLy8gUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5k\nIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0CisvLyBtb2RpZmljYXRpb24sIGFyZSBwZXJt\naXR0ZWQgIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6Cisv\nLworLy8gMS4gUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBh\nYm92ZSBjb3B5cmlnaHQgbm90aWNlLAorLy8gdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRo\nZSBmb2xsb3dpbmcgZGlzY2xhaW1lci4KKy8vIDIuIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkg\nZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSwKKy8vIHRoaXMg\nbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlIGRv\nY3VtZW50YXRpb24KKy8vIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgIHByb3ZpZGVkIHdpdGggdGhl\nIGRpc3RyaWJ1dGlvbi4KKy8vIDMuIE5laXRoZXIgdGhlIG5hbWUgb2YgdGhlIEFkb2JlIFN5c3Rl\nbXMgSW5jb3Jwb3JhdGVkIG5vciB0aGUgbmFtZXMgb2YgaXRzCisvLyBjb250cmlidXRvcnMgbWF5\nIGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbSB0aGlz\nCisvLyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi4K\nKy8vCisvLyBUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVS\nUyBBTkQgQ09OVFJJQlVUT1JTICJBUyBJUyIKKy8vIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVE\nIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUKKy8vIElNUExJ\nRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElD\nVUxBUiBQVVJQT1NFCisvLyBBUkUgRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENP\nUFlSSUdIVCBIT0xERVIgT1IgQ09OVFJJQlVUT1JTIEJFCisvLyBMSUFCTEUgRk9SIEFOWSBESVJF\nQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SCisvLyBDT05T\nRVFVRU5USUFMIERBTUFHRVMgKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJF\nTUVOVCBPRgorLy8gU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsIERB\nVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTCisvLyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FV\nU0VEIEFORCBPTiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTgorLy8gQ09OVFJB\nQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlQgKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9U\nSEVSV0lTRSkKKy8vIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTIFNP\nRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFCisvLyBQT1NTSUJJTElUWSBPRiBTVUNIIERB\nTUFHRS4KKy8qKgorICogVGVzdHMgZm9yIEFycmF5LnByb3RvdHlwZS5yZXZlcnNlKCkgZm9yIGVs\nZW1lbnQgYXR0cmlidXRlcyB0aGF0IGZvcmJpZCB2YWx1ZSBjaGFuZ2UKKyAqCisgKiBAcGF0aCBj\naDE1LzE1LjQvMTUuNC40LzE1LjQuNC44LzE1LjQuNC44LTEuanMKKyAqIEBkZXNjcmlwdGlvbiBB\ncnJheS5wcm90b3R5cGUucmV2ZXJzZSgpIHdpdGggZWxlbWVudCBhdHRyaWJ1dGUgd2hpY2ggaXMg\nbm90IGNoYW5nZWFibGUKKyAqLworCitmdW5jdGlvbiB0ZXN0Y2FzZSgpIHsKKyAgdmFyIGEgPSBb\nXTsKKyAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsICcwJywge3ZhbHVlOjcsIHdyaXRhYmxlOmZh\nbHNlfSk7CisgIGFbMV0gPSAzOworICB0cnkgeworICAgIGEucmV2ZXJzZSgpOworICAgIHJldHVy\nbiBmYWxzZTsKKyAgfSBjYXRjaChlKSB7CisgICAgaWYoIGUubmFtZSE9PSdUeXBlRXJyb3InICkg\neworICAgIHJldHVybiBmYWxzZTsKKyAgICB9CisgICAgcmV0dXJuIHRydWU7CisgIH0KK30KK3J1\nblRlc3RDYXNlKHRlc3RjYXNlKQpcIE5vIG5ld2xpbmUgYXQgZW5kIG9mIGZpbGUKZGlmZiAtciBl\nZTQyOWMxYmU2ZjYgdGVzdC9zdWl0ZS9jaDE1LzE1LjQvMTUuNC40LzE1LjQuNC44LzE1LjQuNC44\nLTIuanMKLS0tIC9kZXYvbnVsbAlUaHUgSmFuIDAxIDAwOjAwOjAwIDE5NzAgKzAwMDAKKysrIGIv\ndGVzdC9zdWl0ZS9jaDE1LzE1LjQvMTUuNC40LzE1LjQuNC44LzE1LjQuNC44LTIuanMJV2VkIEp1\nbiAxMiAxNToxMjoxNSAyMDEzIC0wNDAwCkBAIC0wLDAgKzEsNDcgQEAKKy8vIENvcHlyaWdodCAo\nYykgMjAxMywgQWRvYmUgU3lzdGVtcyBJbmNvcnBvcmF0ZWQKKy8vIEFsbCByaWdodHMgcmVzZXJ2\nZWQuCisvLworLy8gUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBm\nb3Jtcywgd2l0aCBvciB3aXRob3V0CisvLyBtb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgIHBy\nb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6CisvLworLy8gMS4g\nUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5\ncmlnaHQgbm90aWNlLAorLy8gdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dp\nbmcgZGlzY2xhaW1lci4KKy8vIDIuIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0\nIHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSwKKy8vIHRoaXMgbGlzdCBvZiBj\nb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlIGRvY3VtZW50YXRp\nb24KKy8vIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1\ndGlvbi4KKy8vIDMuIE5laXRoZXIgdGhlIG5hbWUgb2YgdGhlIEFkb2JlIFN5c3RlbXMgSW5jb3Jw\nb3JhdGVkIG5vciB0aGUgbmFtZXMgb2YgaXRzCisvLyBjb250cmlidXRvcnMgbWF5IGJlIHVzZWQg\ndG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbSB0aGlzCisvLyBzb2Z0\nd2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi4KKy8vCisvLyBU\nSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09O\nVFJJQlVUT1JTICJBUyBJUyIKKy8vIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJ\nRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUKKy8vIElNUExJRUQgV0FSUkFO\nVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQ\nT1NFCisvLyBBUkUgRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBI\nT0xERVIgT1IgQ09OVFJJQlVUT1JTIEJFCisvLyBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElS\nRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SCisvLyBDT05TRVFVRU5USUFM\nIERBTUFHRVMgKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRgor\nLy8gU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBS\nT0ZJVFM7IE9SIEJVU0lORVNTCisvLyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBP\nTiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTgorLy8gQ09OVFJBQ1QsIFNUUklD\nVCBMSUFCSUxJVFksIE9SIFRPUlQgKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkK\nKy8vIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTIFNPRlRXQVJFLCBF\nVkVOIElGIEFEVklTRUQgT0YgVEhFCisvLyBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS4KKy8q\nKgorICogVGVzdHMgZm9yIEFycmF5LnByb3RvdHlwZS5yZXZlcnNlKCkgZm9yIGVsZW1lbnQgYXR0\ncmlidXRlcyB0aGF0IGZvcmJpZCB2YWx1ZSBjaGFuZ2UKKyAqCisgKiBAcGF0aCBjaDE1LzE1LjQv\nMTUuNC40LzE1LjQuNC44LzE1LjQuNC44LTIuanMKKyAqIEBkZXNjcmlwdGlvbiBBcnJheS5wcm90\nb3R5cGUucmV2ZXJzZSgpIHdpdGggZWxlbWVudCBhdHRyaWJ1dGUgd2hpY2ggaXMgbm90IGNoYW5n\nZWFibGUKKyAqLworZnVuY3Rpb24gdGVzdGNhc2UoKSB7CisgIHZhciBhID0gW107CisgIE9iamVj\ndC5kZWZpbmVQcm9wZXJ0eShhLCAnMCcsIHt2YWx1ZTo3LCBjb25maWd1cmFibGU6ZmFsc2V9KTsK\nKyAgYS5sZW5ndGggPSAyOworICB0cnkgeworICAgIGEucmV2ZXJzZSgpOworICAgIHJldHVybiBm\nYWxzZTsKKyAgfSBjYXRjaChlKSB7CisgICAgaWYoIGUubmFtZSE9PSdUeXBlRXJyb3InICkgewor\nICAgIHJldHVybiBmYWxzZTsKKyAgICB9CisgICAgcmV0dXJuIHRydWU7CisgIH0KK30KK3J1blRl\nc3RDYXNlKHRlc3RjYXNlKQpcIE5vIG5ld2xpbmUgYXQgZW5kIG9mIGZpbGUK\n"}}]}}
---
