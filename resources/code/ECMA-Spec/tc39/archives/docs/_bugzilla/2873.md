---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":2873,"creation_ts":"2014-05-16 09:31:00 -0700","short_desc":"B.3.2 Web Block Function Decl: Redeclaration checks when parameter environment is present","delta_ts":"2014-06-16 16:12:54 -0700","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 24: April 27, 2014 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"andrebargull","name":"André Bargull"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"long_desc":[{"commentid":8522,"comment_count":0,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2014-05-16 09:31:22 -0700","thetext":"B.3.2  Web Legacy Compatibility for Block-Level Function Declarations\n\nThe redeclaration check in step 2.a does not take parameter environments into account. Maybe it should use `instantiatedVarNames` instead of HasBinding()?\n\nAlso: Step reference in B.3.2, step 2a. to 9.2.14 needs to be updated from step 26 to step 29.\n\n\nParameter environment present:\n---\nfunction f(a = () => \"default\") {\n  if (true) { function a() { return \"web-compat\" } }\n  return a();\n}\nf(); // returns \"web-compat\"\nf(() => \"param\"); returns \"web-compat\"\n---\n\n\nParameter environment not present:\n---\nfunction f(a) {\n  if (true) { function a() { return \"web-compat\" } }\n  return a();\n}\nf(); // throws TypeError\nf(() => \"param\"); // returns \"param\"\n---"},{"commentid":8526,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-05-16 16:14:29 -0700","thetext":"fixed in rev25 editor's draft.\n\nused instantiatedVarNames.  Also adjusted the step reference into 9.2.14"},{"commentid":9014,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-06-16 16:12:54 -0700","thetext":"fixed in rev25 editor's draft"}]}}
---
