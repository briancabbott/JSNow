---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":3231,"creation_ts":"2014-09-19 08:49:00 -0700","short_desc":"7.3.11, 7.3.12, 19.1.2.1, 19.1.2.3.1: Different placeholder for pendingException","delta_ts":"2014-10-14 15:17:41 -0700","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 27: August 24, 2014 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"andrebargull","name":"André Bargull"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"long_desc":[{"commentid":10198,"comment_count":0,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2014-09-19 08:49:03 -0700","thetext":"7.3.11  SetIntegrityLevel (O, level)\n7.3.12  TestIntegrityLevel (O, level)\n19.1.2.1 Object.assign ( target, ...sources ) \n19.1.2.3.1 Runtime Semantics: ObjectDefineProperties Abstract Operation  \n\n\n`undefined` as a placeholder for `pendingException` seems to confuse readers, it's unclear to them whether `undefined` is the ECMAScript value `undefined` or should be treated as a standalone value like `empty`. This issue often arises when implementing the algorithms in ECMAScript code (sketched as options A and B below). \n\n\nA) `undefined` as the ECMAScript value `undefined`:\n---\nvar pendingException = undefined;\nfor (...) {\n  try {\n    ...\n  } catch (e) {\n    if (pendingException === undefined) {\n      pendingException = e;\n    }\n  }\n}\nif (pendingException !== undefined) {\n  throw pendingException;\n}\n---\n\n\nB) `undefined` as a standalone value:\n---\nvar pendingException;\nvar hasPendingException = false;\nfor (...) {\n  try {\n    ...\n  } catch (e) {\n    if (!hasPendingException) {\n      hasPendingException = true;\n      pendingException = e;\n    }\n  }\n}\nif (hasPendingException) {\n  throw pendingException;\n}\n---"},{"commentid":10285,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-10-08 11:06:46 -0700","thetext":"fixed in rev28 editor's draft\n\nnow use 'empty' to indicate \"no pendingExeption value\""},{"commentid":10368,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-10-14 15:17:41 -0700","thetext":"fixed in rev28"}]}}
---
