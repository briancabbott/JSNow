---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":285,"creation_ts":"2012-02-29 07:17:00 -0800","short_desc":"S15.8.2.16_A7 & S15.8.2.18_A7 (sin & tan) overconstrain implementations","delta_ts":"2012-03-26 14:04:04 -0700","product":"Test262","component":"ECMA-262 Tests","version":"unspecified","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"WONTFIX","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":{"uid":"rossberg","name":"Andreas Rossberg"},"assigned_to":{"uid":"dfugate","name":"Dave Fugate"},"long_desc":[{"commentid":705,"comment_count":0,"who":{"uid":"rossberg","name":"Andreas Rossberg"},"bug_when":"2012-02-29 07:17:48 -0800","thetext":"The test S15.8.2.16_A7 checks whether (within a certain tolerance)\n\nsin(6.283185307179586) == -2.4492935982947064e-16\n\nThe argument is very close to 2*pi, and sin(2*pi) = 0. Usual algorithms for sine have low precision at this point. Both Firefox and Chrome fail in this test on Linux but succeed on Windows and Mac OS X because the value of the sine function depends on compiler/platform. An arbitrary-precision calculator like bc or Wolfram Alpha returns approximately 4.7692E-16, which would fail the test, too.\n\nLikewise, S15.8.2.18_A7 tests whether (within a certain tolerance)\n\ntan(-1.57079632679489660000) == -16331239353195370.00000000000000000000\n\nThe argument is very close to pi/2, around which tangens is an unstable function. On IA32, both the FPU instruction and the library function for tangent use 80-bit precision provided by the FPU, which results in -16331778728383844, which is outside the tolerated range. This can also be observed on 32-bit Firefox on Linux, which suffers from the same problem and can be circumvented when compiling with -ffloat-store. With an arbitrary-precision calculator, the result is approximately -5.19985E16.\n\nThe spec (15.8.2.18) allows implementation-dependent approximations of transcendental functions. These tests should therefore not test locally unstable functions against the result of any particular implementation, much less one that is not accurate to begin with. (In effect, test262 _disallows_ a more accurate approximation.)"},{"commentid":820,"comment_count":1,"who":{"uid":"dfugate","name":"Dave Fugate"},"bug_when":"2012-03-26 14:04:04 -0700","thetext":"This is a duplicate of https://bugs.ecmascript.org/show_bug.cgi?id=126 which TC-39 made a call to \"Won't Fix\".\n\nIf you can give me a looser \"prec\" value (see bug 126) that causes these tests to pass in your scenarios, I'd be more than happy to make the change though:)"}]}}
---
