---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":1716,"creation_ts":"2013-08-06 03:19:00 -0700","short_desc":"Add async tests facilities","delta_ts":"2014-07-17 22:56:05 -0700","product":"Test262","component":"Test Harness","version":"unspecified","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":{"uid":"bruant.d","name":"David Bruant"},"assigned_to":{"uid":"brterlso","name":"Brian Terlson"},"cc":["sam.mikes","utatane.tea"],"long_desc":[{"commentid":4759,"comment_count":0,"who":{"uid":"bruant.d","name":"David Bruant"},"bug_when":"2013-08-06 03:19:59 -0700","thetext":"Promises are coming as part of an agreement between W3C/DOM folks and TC39. They're being used in some W3C specs and FirefoxOS implements them and want to ship them [1] very soon.\nIn order to avoid yet another de facto standard, we need tests. In order to have async test, we need support for async tests in the test harness. Domenic suggested a done() facility Ã  la Mocha [2] and it feels like a good idea.\n\nIt unfolds like this:\n\n  test(function(done){\n \n    var r = Math.random();\n\n    setTimeout(function(){\n      if(r < 0.5)\n        done() // test success\n      else\n        done(new Error('wtf')) // test failure\n\n    }, 1000);\n\n  })\n\n\n[1] https://bugzilla.mozilla.org/show_bug.cgi?id=897913\n[2] https://mail.mozilla.org/pipermail/es-discuss/2013-August/032524.html"},{"commentid":9253,"comment_count":1,"who":{"uid":"sam.mikes","name":"Sam Mikes"},"bug_when":"2014-07-17 22:56:05 -0700","thetext":"As of 2014-Jul-17, this has landed in current test262.py -- see\n\nhttps://github.com/niksurya/test262/commit/9aa6b917fa1ee33993899c984199e02e3ab4a9e9"}]}}
---
