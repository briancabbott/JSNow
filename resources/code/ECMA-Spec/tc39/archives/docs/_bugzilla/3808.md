---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":3808,"creation_ts":"2015-02-09 20:43:00 -0800","short_desc":"9.5: Notes for Proxy internal methods don't mention every enforced invariant","delta_ts":"2015-02-12 12:17:37 -0800","product":"Draft for 6th Edition","component":"editorial issue","version":"Rev 32: February 2, 2015 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"trivial","everconfirmed":true,"reporter":{"uid":"leonarnott","name":"Leon Arnott"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"long_desc":[{"commentid":12278,"comment_count":0,"who":{"uid":"leonarnott","name":"Leon Arnott"},"bug_when":"2015-02-09 20:43:13 -0800","thetext":"In [9.5.9](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-proxy-object-internal-methods-and-internal-slots-set-p-v-receiver), the informative note for Proxy [[Set]] mentions only two invariants. However, in [6.1.7.3](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-invariants-of-the-essential-internal-methods), a third invariant (that the return type of the handler must be boolean) is mentioned. The 9.5.9 note should mention this as well.\n\n9.5.4, 9.5.6, 9.5.7 and 9.5.10 have this issue as well, and maybe others.\n\nAlso, the 9.5.10 text \"A property cannot be deleted, if it exists as a non-configurable own property of the target object.\" seems only nominally correct: the algorithm itself doesn't prevent properties from being deleted except as a result of calling Ordinary Object [[Delete]].\n\nAlso, the 9.5.5 text \"The result of [[GetOwnProperty]] can be applied to the target object using [[DefineOwnProperty]] and will not throw an exception.\" doesn't seem to be an invariant mentioned at all in 6.1.7.3."},{"commentid":12296,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-02-10 14:35:43 -0800","thetext":"foxed in rev33 editor's draft\n\n(In reply to Leon Arnott from comment #0)\n> In\n> [9.5.9](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-proxy-\n> object-internal-methods-and-internal-slots-set-p-v-receiver), the\n> informative note for Proxy [[Set]] mentions only two invariants. However, in\n> [6.1.7.3](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-\n> invariants-of-the-essential-internal-methods), a third invariant (that the\n> return type of the handler must be boolean) is mentioned. The 9.5.9 note\n> should mention this as well.\n> \n> 9.5.4, 9.5.6, 9.5.7 and 9.5.10 have this issue as well, and maybe others.\n\nadded bullet item about boolean result\n\n\n> \n> Also, the 9.5.10 text \"A property cannot be deleted, if it exists as a\n> non-configurable own property of the target object.\" seems only nominally\n> correct: the algorithm itself doesn't prevent properties from being deleted\n> except as a result of calling Ordinary Object [[Delete]].\n\nchanged the text to \"...cannot be reported as deleted...\" which is what 9.5.10 actually enforces.\n\n\n> \n> Also, the 9.5.5 text \"The result of [[GetOwnProperty]] can be applied to the\n> target object using [[DefineOwnProperty]] and will not throw an exception.\"\n> doesn't seem to be an invariant mentioned at all in 6.1.7.3.\n\nI agree, this isn't really correct.  Deleted that bullet item"},{"commentid":12413,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-02-12 12:17:37 -0800","thetext":"fixed in rev33"}]}}
---
