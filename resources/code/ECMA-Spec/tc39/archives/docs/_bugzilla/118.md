---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":118,"creation_ts":"2011-07-05 15:37:00 -0700","short_desc":"Various tests assumine U+0085 is a Unicode space separator (Zs), but it's not","delta_ts":"2011-07-07 15:22:53 -0700","product":"Test262","component":"ECMA-262 Tests","version":"unspecified","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"jwalden+beo","name":"Jeff Walden (remove +beo to mail)"},"assigned_to":{"uid":"dfugate","name":"Dave Fugate"},"cc":"barraclough","long_desc":[{"commentid":256,"comment_count":0,"who":{"uid":"jwalden+beo","name":"Jeff Walden (remove +beo to mail)"},"bug_when":"2011-07-05 15:37:25 -0700","thetext":"U+0085 NEXT LINE is a control character, but it's not a space character.  Yet various tests expect it is:\n\n15.5.4.20-3-2\tString.prototype.trim - 'S' is a string with all WhiteSpace\tfail\n15.5.4.20-3-3\tString.prototype.trim - 'S' is a string with all union of WhiteSpace and LineTerminator\tfail\n15.5.4.20-3-4\tString.prototype.trim - 'S' is a string start with union of all LineTerminator and all WhiteSpace\tfail\n15.5.4.20-3-5\tString.prototype.trim - 'S' is a string end with union of all LineTerminator and all WhiteSpace\tfail\n15.5.4.20-3-6\tString.prototype.trim - 'S' is a string start with union of all LineTerminator and all WhiteSpace and end with union of all LineTerminator and all WhiteSpace\tfail"},{"commentid":262,"comment_count":1,"who":{"uid":"dfugate","name":"Dave Fugate"},"bug_when":"2011-07-05 16:40:54 -0700","thetext":"According to Table 2 (Whitespace Characters), an ES5 implementation has to contend with:\n    Other category ―Zs\n    Any other Unicode ―space separator\n    <USP>\nfrom the Unicode Standard 3.0.\n\n\nThe question then is does \\u0085 (i.e., next line) fall under <USP> in Unicode 3.0?  My gut reaction was also no until I saw the description under Table 3:\n    Only the characters in Table 3 are treated as line terminators. Other new line or line breaking characters are treated as white space but not as line terminators.\n\nIsn't NEXT LINE considered to be a line breaking/newline character? This also seems to be the interpretation on Wikipedia (http://en.wikipedia.org/wiki/Newline):\n    ECMAScript[5] accepts LS and PS as line breaks, but considers U+0085 (NEL) white space, not a line break.\nalthough I don't place much faith in Wikipedia:)"},{"commentid":263,"comment_count":2,"who":"barraclough","bug_when":"2011-07-05 21:06:37 -0700","thetext":"Hi David,\n\nI was just investigating this test failure on WebKit, and thought I'd weigh in with my 2 cents.  I agree that the text under table 3 is a little confusing, but to quote Allen WB from an ES 5-discuss email of July 1st, \"Always follow the algorithm if there is a conflict between an algorithm and descriptive text.'.  ES5 white space seems to be clearly defined by section 7.2, \"White Space\", as \"The ECMAScript white space characters are listed in Table 2.\"  I cannot really see how section 7.2 can be seen as anything but normative, and if the descriptive text in a different section appears to contradict this, then I think it has to be disregarded.\n\nThe presence of form-feed (U+000C) in Table 2 would also seem to be illustrative, since like U+0085 it too is a category [Cc] vertical spacing character.  Form feed is considered white space in ES5, but this arises from the spec only because U+000C appears in table 2.  Conversely, since U+0085 is excluded from table 2, it cannot considered whitespace in ES5.\n\ncheers,\nG."},{"commentid":270,"comment_count":3,"who":{"uid":"dfugate","name":"Dave Fugate"},"bug_when":"2011-07-06 15:38:18 -0700","thetext":"Thanks for the clarification.  I'll fix this in source control tomorrow morning, and file a spec bug to get the \"Other new\nline or line breaking characters are treated as white space but not as line\nterminators\" bit either removed or re-worded."},{"commentid":271,"comment_count":4,"who":{"uid":"dfugate","name":"Dave Fugate"},"bug_when":"2011-07-07 07:47:17 -0700","thetext":"Changes have been to Mercurial.  I'll close the bug once the website gets updated."},{"commentid":282,"comment_count":5,"who":{"uid":"dfugate","name":"Dave Fugate"},"bug_when":"2011-07-07 15:22:53 -0700","thetext":"Website has been updated.  The only usage of \\u0085 in IE Test Center-based tests should now be 15.5.4.20-4-39.js which is valid, albeit not all that useful."}]}}
---
