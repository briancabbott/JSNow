---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":1244,"creation_ts":"2013-02-05 23:17:00 -0800","short_desc":"6.2.1: Definition of Unicode Locale Extension Sequences incorrect","delta_ts":"2015-02-17 20:45:05 -0800","product":"Internationalization - ECMA-402","component":"Specification","version":"Edition 1.0 standard","rep_platform":"All","op_sys":"All","bug_status":"VERIFIED","resolution":"FIXED","priority":"Normal","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"ecmascriptbugs","name":"Norbert"},"assigned_to":{"uid":"waldron.rick","name":"Rick Waldron"},"cc":"waldron.rick","long_desc":[{"commentid":3181,"comment_count":0,"who":{"uid":"ecmascriptbugs","name":"Norbert"},"bug_when":"2013-02-05 23:17:26 -0800","thetext":"Section 6.2.1 defines the term “Unicode locale extension sequence” as “any substring of a language tag that starts with a separator \"-\" and the singleton \"u\" and includes the maximum sequence of following non-singleton subtags and their preceding \"-\" separators.”\n\nThis definition doesn't agree with RFC 5646, which makes any subtag sequence starting with the subtag \"x\" a private use subtag sequence, in which the singleton \"u\" has no predefined meaning.\n\nThe incorrect definition leads to at least one inconsistency within ECMA-402: The BestAvailableLocale operation expects a “structurally valid and canonicalized BCP 47 language tag” in the locale argument, however, the LookupMatcher operation removes all Unicode locale extension sequences from tags it passes to LookupMatcher. If the determination of Unicode locale extension sequences doesn't take private use sequences into consideration, then the tag \"x-u-foo\" gets reduced to \"x\", which is no longer well-formed.\n\nThe definition should be changed to “any substring of a language tag that is not part of a private use subtag sequence, starts with a separator \"-\" and the singleton \"u\", and includes the maximum sequence of following non-singleton subtags and their preceding \"-\" separators.”"},{"commentid":12249,"comment_count":1,"who":{"uid":"waldron.rick","name":"Rick Waldron"},"bug_when":"2015-02-09 09:20:52 -0800","thetext":"Fixed in rev7"},{"commentid":12883,"comment_count":2,"who":{"uid":"ecmascriptbugs","name":"Norbert"},"bug_when":"2015-02-17 20:45:05 -0800","thetext":"Verified in rev 10 draft."}]}}
---
