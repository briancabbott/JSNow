---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":4155,"creation_ts":"2015-03-11 18:26:00 -0700","short_desc":"13.2.3.6 IteratorBindingInitialization, 13.2.3.7 KeyedBindingInitialization: Incorrect use for ResolveBinding","delta_ts":"2015-03-17 16:57:05 -0700","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 35: March 4, 2015 Release Candidate 2","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"andrebargull","name":"André Bargull"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"long_desc":[{"commentid":13703,"comment_count":0,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2015-03-11 18:26:45 -0700","thetext":"13.2.3.6 Runtime Semantics: IteratorBindingInitialization\n  SingleNameBinding : BindingIdentifier Initializeropt\n    - step 2\n\nBindingRestElement : ... BindingIdentifier\n    - step 2\n\n13.2.3.7 Runtime Semantics: KeyedBindingInitialization\n  SingleNameBinding : BindingIdentifier Initializeropt\n    - step 2\n\n\nResolveBinding cannot be used here because of the parameter eval environment (ResolveBinding uses the current lexical environment!). \n\n\nStep 2 needs to be replaced with:\n---\n2. If environment is undefined, then\n  a. Let lhs be ResolveBinding(bindingId).\n  b. ReturnIfAbrupt(lhs).\n---\n\nAnd step 8/5.b.ii/8 needs to be changed from:\n---\n8. Return InitializeReferencedBinding(lhs, v)\n---\n\nTo:\n---\n8. Return InitializeBoundName(bindingId, v, environment).\n---\n\nResp. to:\n---\n5.b.ii. Return InitializeBoundName(StringValue of BindingIdentifier, A, environment).\n---"},{"commentid":13711,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-03-12 11:00:06 -0700","thetext":"fixed in rev36 editor's dcraft\n\nbut I took a different approach.  I added an optional environment parameter to ResolveBinding.  If it is missing or undefined, the current LexicalEnvironment is used. \n\nenvironment is now passed in the ResolveBinding step of the three algorithms you identified.\n\nThis preserves the left to right evaluation order."},{"commentid":13815,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-03-17 16:57:05 -0700","thetext":"in rev36"}]}}
---
