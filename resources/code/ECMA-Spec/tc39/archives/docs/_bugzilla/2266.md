---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":2266,"creation_ts":"2013-11-13 08:34:00 -0800","short_desc":"Grammar needs a single root, not Script or Module","delta_ts":"2014-02-17 18:10:30 -0800","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 21: November 8, 2013 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"WONTFIX","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":{"uid":"johnjbarton","name":"johnjbarton"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"cc":"dherman","long_desc":[{"commentid":6701,"comment_count":0,"who":{"uid":"johnjbarton","name":"johnjbarton"},"bug_when":"2013-11-13 08:34:25 -0800","thetext":"Based on experience with traceur and what I can tell from the current draft grammar, the parser must chose whether to parse JS source as a Module or a Script before accessing the first token. This is not practical for development tools, eg parsers for editors and linters. \n\nAs a purely empirical guess, it seems to me that 'export' should be a legal token and that the difference between module and script currently expressed in the grammar should instead be environmental."},{"commentid":6773,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2013-11-14 11:45:27 -0800","thetext":"This would be significant design change.  You need to take it up with the module champions or try to get some significant discussion on it on es-discuss.\n\nIt is understood that parsers including editor's and linters need to know what goal symbol to use.  Plus even if a module body parses as a script, different semantics apply.\n\nOne possibility that has been kicked around is a new file extension convention for for ES modules. Perhaps ''jsm'.  That would solve the problem for most file based tools."},{"commentid":7362,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-02-17 18:10:30 -0800","thetext":"We're locked in to have both module and script roots for the grammar."}]}}
---
