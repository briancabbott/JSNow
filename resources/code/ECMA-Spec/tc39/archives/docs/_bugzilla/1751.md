---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":1751,"creation_ts":"2013-08-09 08:47:00 -0700","short_desc":"Coverage: Identifier reference resolution in compound assignment and increment/decrement operator","delta_ts":"2015-03-21 05:50:29 -0700","product":"Test262","component":"ECMA-262 Tests","version":"unspecified","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"andrebargull","name":"André Bargull"},"assigned_to":{"uid":"brterlso","name":"Brian Terlson"},"long_desc":[{"commentid":4848,"comment_count":0,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2013-08-09 08:47:22 -0700","thetext":"11.13.2 Compound Assignment does a single reference resolution for its LHS, but implementations vary in their behaviour and don't really follow the specification. This also applies to the increment and decrement operators (11.3.1, 11.3.2, 11.4.4, 11.4.5). \n\nImplementations tested: Opera 12.15, IE11, SpiderMonkey (trunk), V8 (bleeding edge), JavaScriptCore (trunk)\n\n\nTest case 1:\n---\nvar o1, o2;\nwith (o1 = {set x(v) { print(\"wrong\") }}) {\n  with (o2 = {get x() { delete this.x; return 2 }}) {\n    x += 1;\n  }\n}\no2.x\n---\n\nExpected: \"wrong\" is not printed and `o2.x` is set to 3\n\nCorrect behaviour: SM, Opera\nWrong behaviour: JSC, V8, IE\n\n\n\nTest case 2:\n---\nvar x = 1;\n(function() {\n  x += eval(\"var x = 2; x\");\n  return x;\n})();\n---\n\nExpected: function returns 2 and global x is set to 3\n\nCorrect behaviour: SM, Opera, JSC, \nWrong behaviour: V8, IE\n\n\n\nTest case 3:\n---\n(function(global) {\n  \"use strict\";\n  Object.defineProperty(global, \"x\", {configurable:true, get: function(){ delete this.x; return 2 }});\n  x += 1;\n})(this);\n---\n\nExpected: Create a global variable x with value 3, no strict-mode ReferenceError is thrown\n\nCorrect behaviour: -\nWrong behaviour: SM, Opera, JSC, V8, IE"},{"commentid":13919,"comment_count":1,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2015-03-21 05:50:29 -0700","thetext":"Tests added in https://github.com/tc39/test262/pull/91"}]}}
---
