---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":2506,"creation_ts":"2014-02-07 04:20:00 -0800","short_desc":"12.1.5, 14.2: Tweak grammar to allow CoverInitialisedName and duplicate PropertyNames in ArrowParameters?","delta_ts":"2014-04-06 11:30:01 -0700","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 22: January 20, 2014 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"andrebargull","name":"André Bargull"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"long_desc":[{"commentid":7200,"comment_count":0,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2014-02-07 04:20:34 -0800","thetext":"As far as I can see, the following examples are not allowed due to the early errors semantics in 12.1.5.1:\n---\n// Duplicate property name \"x\" in object literal in strict mode\n\"use strict\"; ({x: a, x: b}) => {}\n\n// Missing ':' after property name \"x\" in object literal\n({x = 0}) => {}\n({x = 0}, {y = 0}) => {}\n---\n\nWhereas this code is allowed, because the object parameter is first parsed as an destructuring assignment pattern:\n---\n\"use strict\"; ({x: a, x: b} = {}) => {}\n\n({x = 0} = {}) => {}\n({x = 0} = {}, {y = 0} = {}) => {}\n---\n\nIt may make sense to change the grammar to allow the first examples, but I'm not really sure right now how much effort this requires..."},{"commentid":7208,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-02-07 10:44:18 -0800","thetext":"Fixed in rev23 editor's draft.\n\nAdded clarifying text in 12.1.5.1:\n\nIn addition to describing an actual object initializer the ObjectLiteral productions are also used as a cover grammar for ObjectAssignmentPattern (12.13.5). and may be recognized as part of a CoverParenthesisedExpressionAndArrowParameterList. When ObjectLiteral appears in a context where ObjectAssignmentPattern is required the following Early Error rules are not applied. In addition, they are not applied when initially parsing a CoverParenthesisedExpressionAndArrowParameterList.\n\nDoes that work?"},{"commentid":7209,"comment_count":2,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2014-02-07 11:10:52 -0800","thetext":"(In reply to comment #1)\n> Does that work?\n\nYes, I think so. It's now more clear that the early error restrictions apply if and only if the production is used to describe an object initialiser."},{"commentid":7541,"comment_count":3,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-04-06 11:30:01 -0700","thetext":"fixed in rev23 draft"}]}}
---
