---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":3677,"creation_ts":"2015-01-25 10:30:00 -0800","short_desc":"22.2.1.2 %TypedArray%: Swap steps 17.c and 17.d","delta_ts":"2015-02-02 18:39:01 -0800","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 31: January 15, 2015 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"andrebargull","name":"André Bargull"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"long_desc":[{"commentid":11732,"comment_count":0,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2015-01-25 10:30:11 -0800","thetext":"22.2.1.2 %TypedArray% ( typedArray )\n\nSteps 17.c and 17.d need to be swapped in case AllocateArrayBuffer detaches the ArrayBuffer `srcData`.\n\n\n---\nclass Buffer extends ArrayBuffer {\n  static get [Symbol.species]() {\n    return Object.defineProperty(function() { }.bind(), \"prototype\", {\n      get() {\n        detachArrayBuffer(buf);\n        return ArrayBuffer.prototype;\n      }\n    });\n  }\n}\n\nlet buf = new Buffer(10);\nlet ta = new Int8Array(buf);\nnew Int16Array(ta); // <-- asserts in GetValueFromBuffer\n---"},{"commentid":11887,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-02-02 12:20:51 -0800","thetext":"fixed in rev32 editor's draft"},{"commentid":12020,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-02-02 18:39:01 -0800","thetext":"fixed in rev32 draft"}]}}
---
