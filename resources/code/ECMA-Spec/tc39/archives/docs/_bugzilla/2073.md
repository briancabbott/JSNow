---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":2073,"creation_ts":"2013-10-21 10:53:00 -0700","short_desc":"`String.prototype.at` (improved `String.prototype.charAt`)","delta_ts":"2015-10-15 17:11:55 -0700","product":"Draft for 7th Edition","component":"New feature suggestons","version":"unspecified","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"INVALID","priority":"Normal","bug_severity":"major","everconfirmed":true,"reporter":{"uid":"mathias","name":"Mathias Bynens"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"cc":["brterlso","mathias","waldron.rick"],"long_desc":[{"commentid":5915,"comment_count":0,"who":{"uid":"mathias","name":"Mathias Bynens"},"bug_when":"2013-10-21 10:53:27 -0700","thetext":"Proposal from https://mail.mozilla.org/pipermail/es-discuss/2013-October/034240.html:\n\n## String.prototype.at(pos)\n\nNOTE: Returns a single-element String containing the code point at element position `pos` in the String `value` resulting from converting the `this` object to a String. If there is no element at that position, the result is the empty String. The result is a String value, not a String object.\n\nWhen the `at` method is called with one argument `pos`, the following steps are taken:\n\n01. Let `O` be `CheckObjectCoercible(this value)`.\n02. Let `S` be `ToString(O)`.\n03. `ReturnIfAbrupt(S)`.\n04. Let `position` be `ToInteger(pos)`.\n05. `ReturnIfAbrupt(position)`.\n06. Let `size` be the number of elements in `S`.\n07. If `position < 0` or `position ≥ size`, return the empty String.\n08. Let `first` be the code unit at index `position` in the String `S`.\n09. Let `cuFirst` be the code unit value of the element at index `0` in the String `first`.\n10. If `cuFirst < 0xD800` or `cuFirst > 0xDBFF` or `position + 1 = size`, then return `first`.\n11. Let `cuSecond` be the code unit value of the element at index `position + 1` in the String `S`.\n12. If `cuSecond < 0xDC00` or `cuSecond > 0xDFFF`, then return `first`.\n13. Let `second` be the code unit at index `position + 1` in the string `S`.\n14. Let `cp` be `(first – 0xD800) × 0x400 + (second – 0xDC00) + 0x10000`.\n15. Return the elements of the UTF-16 Encoding (clause 6) of `cp`.\n\nThe `length` of the `at` function is `1`.\n\nNOTE: The `at` function is intentionally generic; it does not require that its `this` value be a String object. Therefore it can be transferred to other kinds of objects for use as a method.\n\nHere’s a polyfill based on this algorithm: http://mths.be/at\n\nTests: https://github.com/mathiasbynens/String.prototype.at/blob/master/tests/tests.js"},{"commentid":14811,"comment_count":1,"who":{"uid":"brterlso","name":"Brian Terlson"},"bug_when":"2015-10-15 17:11:55 -0700","thetext":"This is already being tracked as part of the standard proposal process so a bug is not necessary."}]}}
---
