---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":2550,"creation_ts":"2014-02-14 13:02:00 -0800","short_desc":"toMethod doesn't work with callable proxies and bound functions","delta_ts":"2014-07-15 18:21:53 -0700","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 22: January 20, 2014 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","see_also":"https://bugs.ecmascript.org/show_bug.cgi?id=2475","priority":"Normal","bug_severity":"minor","everconfirmed":true,"reporter":{"uid":"allen","name":"Allen Wirfs-Brock"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"cc":["erights","tomvc.be"],"long_desc":[{"commentid":7307,"comment_count":0,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-02-14 13:02:53 -0800","thetext":"F,p.toMethod and the CloneMethod abstract operation currently throw for anything other than built-in functions and ECMAScript methods.  \n\nIn particular, they throw for bound functions and callable proxies. I can imagine what I would do for found functions and possibly a special case for cloning a proxy with with same target and handler.  However, it isn't clear in whether or not the CloneMethod should propagate to the target.\n\nI think just is the tip of a bigger issues with regard to cloning proxies and other exotic objects.  It may be that there needs to be MOP level support for cloning an object, but I don't want to consider that now or for just this limited use case, particularly if we want to tackle the more general cloning problem post ES6.\n\nFor now, I think we should just continue to throw.  If you really need to make a  a bound method or callable proxy work with toMethod you can just wrapper it with an ordinary function."},{"commentid":7377,"comment_count":1,"who":{"uid":"tomvc.be","name":"Tom Van Cutsem"},"bug_when":"2014-02-20 08:08:24 -0800","thetext":"I agree on both points: if ever we want a general cloning abstraction, then we need a MOP-level hook, but for this particular case it feels ad hoc to add a hook and weâ€™re better off throwing an exception."},{"commentid":9219,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-07-15 18:21:53 -0700","thetext":"support for cloning bound functions was added in rev25.\n\nWe aren't going to support cloning proxy function in ES6"}]}}
---
