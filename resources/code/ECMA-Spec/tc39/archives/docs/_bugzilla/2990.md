---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":2990,"creation_ts":"2014-06-18 12:16:00 -0700","short_desc":"Remove NormalCompletion from WeakMap and WeakSet constructors?","delta_ts":"2015-07-10 08:34:21 -0700","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 25: May 22, 2014 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":{"uid":"arv","name":"Erik Arvidsson"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"cc":"erik.arvidsson","long_desc":[{"commentid":9043,"comment_count":0,"who":{"uid":"arv","name":"Erik Arvidsson"},"bug_when":"2014-06-18 12:16:58 -0700","thetext":"For WeakSet ( [ iterable ] ) we have:\n\n\"If next is false, then return NormalCompletion(set).\"\n\nBut for Set ( [ iterable ] ) we have:\n\n\"If iter is undefined, then return set.\"\n\nOther than that the two constructors are equal (minus WeakSetData vs SetData)\n\nSame goes for WeakMap.\n\nAnother option is to refactor the spec so that WeakSet and Set can share the spec for their constructors."},{"commentid":9121,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-07-02 10:39:05 -0700","thetext":"fixed in rev26 editor's draft\n\neliminated the unnecessary NormalCompletion's \n\nIt would be nice to refactor to share a common algorithm, the the differing internal slot names makes it difficult.  I'm going to leave it as is in that regard, for now."},{"commentid":9399,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-07-19 18:49:07 -0700","thetext":"fixed in rev26"}]}}
---
