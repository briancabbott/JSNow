---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":1569,"creation_ts":"2013-06-24 17:26:00 -0700","short_desc":"Add regexp tests for resetting capture groups","delta_ts":"2013-06-24 17:26:12 -0700","product":"Test262","component":"ECMA-262 Tests","version":"unspecified","rep_platform":"All","op_sys":"All","bug_status":"CONFIRMED","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":{"uid":"brterlso","name":"Brian Terlson"},"assigned_to":{"uid":"brterlso","name":"Brian Terlson"},"long_desc":[{"commentid":4326,"comment_count":0,"who":{"uid":"brterlso","name":"Brian Terlson"},"bug_when":"2013-06-24 17:26:12 -0700","thetext":"See email below from Paul Ruizendaal:\n\nThe expression /((a)|(aa))b/.exec('aab') should result in ['aab','aa',undefined,'aa']. The key here is that the 2nd capture gets reset when the left alternative is abandoned. In the spec algorithm this is automatic, as States are \"copy on write\"; I think many implementations will use a \"save & restore\" policy and then this then needs to be verified.\n\nThis is not covered by test262, but it is by the mozilla suite test \"ecma_3/RegExp/regress-31316.js\".\n\nRecommend to add the following test to section 15.10.2.3:\n\nfunction test() {\n  var rc = /((a)|(aa))b/.exec('aab');\n  return !rc[2];\n}"}]}}
---
