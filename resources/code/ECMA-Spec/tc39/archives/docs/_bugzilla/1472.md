---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":1472,"creation_ts":"2013-05-09 07:26:00 -0700","short_desc":"python command line runner should have additional logging options, including junit xml","delta_ts":"2014-07-17 22:30:19 -0700","product":"Test262","component":"Test Harness","version":"unspecified","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":{"uid":"trbaker","name":"Trevor Baker"},"assigned_to":{"uid":"prsriniv","name":"Prashanth Srinivasan"},"cc":["brbaker","dschaffe","sam.mikes"],"long_desc":[{"commentid":3719,"comment_count":0,"who":{"uid":"trbaker","name":"Trevor Baker"},"bug_when":"2013-05-09 07:26:59 -0700","thetext":"The python test runner should have optional flags to control logging.\n\n-option to save stdout to file\nie. -l --log  #also log all output to given logfile\n\n-option to save results as junit xml format\nie. --logjunit  #log to junit output format\n\n-option to specify descriptive junit top-level package\nie. --logjunitname   #specify the toplevel name for to junit output (e.g. windows-stringOnly')"},{"commentid":3720,"comment_count":1,"who":{"uid":"trbaker","name":"Trevor Baker"},"bug_when":"2013-05-09 07:28:08 -0700","thetext":"Also see Bug 1466 - should be command line argument to set logging level"},{"commentid":4101,"comment_count":2,"attachid":"45","who":{"uid":"prsriniv","name":"Prashanth Srinivasan"},"bug_when":"2013-05-29 07:36:04 -0700","thetext":"Created attachment 45\nAdding JUnit XML and logfile support to test262 test runner\n\nThe proposed patch adds JUnit XML support with output file specified with\n option --junitname\nand option to log stdout to logfile specified by option --logname"},{"commentid":4167,"comment_count":3,"attachid":"61","who":{"uid":"prsriniv","name":"Prashanth Srinivasan"},"bug_when":"2013-06-10 08:07:10 -0700","thetext":"Created attachment 61\nAdding JUnit XML and logfile support to test262 test runner\n\nAdding two options to test262 python test runner:\n\n--logname=LOGNAME        Filename to save stdout to\n --junitname=JUNITNAME   Filename to save test results in JUnit XML format"},{"commentid":9247,"comment_count":4,"who":{"uid":"sam.mikes","name":"Sam Mikes"},"bug_when":"2014-07-17 22:30:19 -0700","thetext":"As of 2014-Jul-17, this code is present in the test262.py runner."}],"attachment":[{"_attributes":{"isobsolete":"1","ispatch":"1"},"attachid":"45","date":"2013-05-29 07:36:00 -0700","delta_ts":"2013-06-10 08:07:10 -0700","desc":"Adding JUnit XML and logfile support to test262 test runner","filename":"bug_1472.patch","type":"text/plain","size":"8652","attacher":{"_attributes":{"name":"Prashanth Srinivasan"},"_text":"prsriniv"},"data":{"_attributes":{"encoding":"base64"},"_text":"ZGlmZiAtciBlNjJlMWIzNWYwZDkgdGVzdC9jb25maWcvZXhjbHVkZWxpc3QueG1sCi0tLSBhL3Rl\nc3QvY29uZmlnL2V4Y2x1ZGVsaXN0LnhtbAlGcmkgTWF5IDEwIDE2OjE5OjMyIDIwMTMgLTA0MDAK\nKysrIGIvdGVzdC9jb25maWcvZXhjbHVkZWxpc3QueG1sCVdlZCBNYXkgMjkgMTA6MzM6NTYgMjAx\nMyAtMDQwMApAQCAtMSw0ICsxLDQgQEAKLe+7vzw/eG1sIHZlcnNpb249IjEuMCIgZW5jb2Rpbmc9\nInV0Zi04IiA/Pg0KKzw/eG1sIHZlcnNpb249IjEuMCIgZW5jb2Rpbmc9InV0Zi04IiA/Pg0KIDxl\neGNsdWRlTGlzdD4gIA0KLSAgPHRlc3QgaWQ9ImV4YW1wbGUiPlNvbWUgZGVzY3JpcHRpb24gPC90\nZXN0Pg0KLTwvZXhjbHVkZUxpc3Q+ClwgTm8gbmV3bGluZSBhdCBlbmQgb2YgZmlsZQorICA8dGVz\ndCBpZD0iZXhhbXBsZSI+PHJlYXNvbj5Tb21lIGRlc2NyaXB0aW9uIDwvcmVhc29uPjwvdGVzdD4N\nCis8L2V4Y2x1ZGVMaXN0Pg0KZGlmZiAtciBlNjJlMWIzNWYwZDkgdG9vbHMvcGFja2FnaW5nL3Rl\nc3QyNjIucHkKLS0tIGEvdG9vbHMvcGFja2FnaW5nL3Rlc3QyNjIucHkJRnJpIE1heSAxMCAxNjox\nOTozMiAyMDEzIC0wNDAwCisrKyBiL3Rvb2xzL3BhY2thZ2luZy90ZXN0MjYyLnB5CVdlZCBNYXkg\nMjkgMTA6MzM6NTYgMjAxMyAtMDQwMApAQCAtMjMsNiArMjMsOCBAQAogaW1wb3J0IHNodXRpbAog\naW1wb3J0IGpzb24KIGltcG9ydCBzdGF0CitpbXBvcnQgeG1sLmV0cmVlLkVsZW1lbnRUcmVlIGFz\nIHhtbGoKK2ltcG9ydCB1bmljb2RlZGF0YQogCiAKIGZyb20gcGFyc2VUZXN0UmVjb3JkIGltcG9y\ndCBwYXJzZVRlc3RSZWNvcmQsIHN0cmlwSGVhZGVyCkBAIC00Myw2ICs0NSw3IEBACiAgICAgICAg\nICIgJXMsIHNob3dpbmcgd2hpY2ggdGVzdHMgaGF2ZSBiZWVuIGRpc2FibGVkISIgJSBFWENMVURF\nRF9GSUxFTkFNRQogICAgIHN5cy5leGl0KDEpCiBFWENMVURFX0xJU1QgPSB4bWwuZG9tLm1pbmlk\nb20ucGFyc2UoRVhDTFVERURfRklMRU5BTUUpCitFWENMVURFX1JFQVNPTiA9IEVYQ0xVREVfTElT\nVC5nZXRFbGVtZW50c0J5VGFnTmFtZSgicmVhc29uIikKIEVYQ0xVREVfTElTVCA9IEVYQ0xVREVf\nTElTVC5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGVzdCIpCiBFWENMVURFX0xJU1QgPSBbeC5nZXRB\ndHRyaWJ1dGUoImlkIikgZm9yIHggaW4gRVhDTFVERV9MSVNUXQogCkBAIC02Niw2ICs2OSw4IEBA\nCiAgICMgdG8gImJvdGgiCiAgIHJlc3VsdC5hZGRfb3B0aW9uKCItLXVubWFya2VkX2RlZmF1bHQi\nLCBkZWZhdWx0PSJub25fc3RyaWN0IiwgCiAgICAgICAgICAgICAgICAgICAgIGhlbHA9ImRlZmF1\nbHQgbW9kZSBmb3IgdGVzdHMgb2YgdW5zcGVjaWZpZWQgc3RyaWN0bmVzcyIpCisgIHJlc3VsdC5h\nZGRfb3B0aW9uKCItLWxvZ25hbWUiLCBoZWxwPSJGaWxlbmFtZSB0byBzYXZlIHN0ZG91dCB0byIp\nCisgIHJlc3VsdC5hZGRfb3B0aW9uKCItLWp1bml0bmFtZSIsIGhlbHA9IkZpbGVuYW1lIHRvIHNh\ndmUgdGVzdCByZXN1bHRzIGluIEpVbml0IFhNTCBmb3JtYXQiKQogICByZXN1bHQuYWRkX29wdGlv\nbigiLS1sb2dsZXZlbCIsIGRlZmF1bHQ9Indhcm5pbmciLAogICAgICAgICAgICAgICAgICAgICBo\nZWxwPSJzZXRzIGxvZyBsZXZlbCB0byBkZWJ1ZywgaW5mbywgd2FybmluZywgZXJyb3IsIG9yIGNy\naXRpY2FsIikgCiAgIHJldHVybiByZXN1bHQKQEAgLTE1OCw3ICsxNjMsMzYgQEAKICAgICAgIHBy\naW50ICIlcyBmYWlsZWQgaW4gJXMgYXMgZXhwZWN0ZWQiICUgKG5hbWUsIG1vZGUpCiAgICAgZWxz\nZToKICAgICAgIHByaW50ICIlcyBwYXNzZWQgaW4gJXMiICUgKG5hbWUsIG1vZGUpCisgICAgCisg\nIGRlZiBYbWxBc3NlbWJsZShzZWxmLCByZXN1bHQpOgorICAgIHRlc3RfbmFtZSA9IHNlbGYuY2Fz\nZS5HZXROYW1lKCkKKyAgICB0ZXN0X21vZGUgPSBzZWxmLmNhc2UuR2V0TW9kZSgpCisgICAgdGVz\ndENhc2VFbGVtZW50ID0geG1sai5FbGVtZW50KCJ0ZXN0Y2FzZSIpCisgICAgdGVzdHBhdGggPSBz\nZWxmLlRlc3RQYXRoTWFuaXB1bGF0aW9uKHRlc3RfbmFtZSkKKyAgICB0ZXN0Q2FzZUVsZW1lbnQu\nYXR0cmliWyJjbGFzc25hbWUiXSA9ICIlcy4lcyIgJSAodGVzdHBhdGhbMF0gLCB0ZXN0cGF0aFsx\nXSkgCisgICAgdGVzdENhc2VFbGVtZW50LmF0dHJpYlsibmFtZSJdID0gIiVzICVzIiAlICh0ZXN0\ncGF0aFsyXS5yZXBsYWNlKCcuJywnXycpICwgdGVzdF9tb2RlKQorICAgIGlmIHNlbGYuSGFzVW5l\neHBlY3RlZE91dGNvbWUoKToKKyAgICAgIGZhaWx1cmVFbGVtZW50ID0geG1sai5FbGVtZW50KCJm\nYWlsdXJlIikKKyAgICAgIG91dCA9IHNlbGYuc3Rkb3V0LnN0cmlwKCkuZGVjb2RlKCd1dGYtOCcp\nCisgICAgICBlcnIgPSBzZWxmLnN0ZGVyci5zdHJpcCgpLmRlY29kZSgndXRmLTgnKQorICAgICAg\naWYgbGVuKG91dCkgPiAwOgorICAgICAgICBmYWlsdXJlRWxlbWVudC50ZXh0ID0gb3V0CisgICAg\nICBpZiBsZW4oZXJyKSA+IDA6CisgICAgICAgIGZhaWx1cmVFbGVtZW50LnRleHQgPSBlcnIKKyAg\nICAgIHRlc3RDYXNlRWxlbWVudC5hcHBlbmQoZmFpbHVyZUVsZW1lbnQpCisgICAgcmV0dXJuIHRl\nc3RDYXNlRWxlbWVudAogCisgIGRlZiBUZXN0UGF0aE1hbmlwdWxhdGlvbihzZWxmLCB0ZXN0X25h\nbWUpOgorICAgIHRlc3RkaXJsaXN0ID0gdGVzdF9uYW1lLnNwbGl0KCcvJykKKyAgICB0ZXN0Y2Fz\nZSA9IHRlc3RkaXJsaXN0LnBvcCgpCisgICAgdGVzdGNsYXNzID0gdGVzdGRpcmxpc3QucG9wKCkK\nKyAgICB0ZXN0Y2xhc3MgPSB0ZXN0Y2xhc3MucmVwbGFjZSgnLicsJ18nKQorICAgIGlmIGxlbih0\nZXN0ZGlybGlzdCkgPj0gMToKKyAgICAgICB0ZXN0cGFja2FnZSA9IHRlc3RkaXJsaXN0LnBvcCgw\nKQorICAgIGVsc2U6CisgICAgICAgdGVzdHBhY2thZ2UgPSB0ZXN0Y2xhc3MKKyAgICByZXR1cm4o\ndGVzdHBhY2thZ2UsdGVzdGNsYXNzLHRlc3RjYXNlKQorICAKICAgZGVmIEhhc0ZhaWxlZChzZWxm\nKToKICAgICByZXR1cm4gc2VsZi5leGl0X2NvZGUgIT0gMAogCkBAIC0yOTYsNyArMzMwLDYgQEAK\nICAgZWxzZToKICAgICByZXR1cm4gKG4sICJzIikKIAotCiBjbGFzcyBUZXN0U3VpdGUob2JqZWN0\nKToKIAogICBkZWYgX19pbml0X18oc2VsZiwgcm9vdCwgc3RyaWN0X29ubHksIG5vbl9zdHJpY3Rf\nb25seSwgdW5tYXJrZWRfZGVmYXVsdCk6CkBAIC0zNzcsNjMgKzQxMCwxMjQgQEAKICAgICBsb2dn\naW5nLmluZm8oIkRvbmUgbGlzdGluZyB0ZXN0cyIpCiAgICAgcmV0dXJuIGNhc2VzCiAKLSAgZGVm\nIFByaW50U3VtbWFyeShzZWxmLCBwcm9ncmVzcyk6CisgIGRlZiBQcmludFN1bW1hcnkoc2VsZiwg\ncHJvZ3Jlc3MsIGxvZ2ZpbGUpOgogICAgIHByaW50CisgICAgaWYgbG9nZmlsZToKKyAgICAgICBz\nZWxmLmxvZ2Yud3JpdGUoIj09PSBTdW1tYXJ5ID09PSBcbiIpCiAgICAgcHJpbnQgIj09PSBTdW1t\nYXJ5ID09PSIKICAgICBjb3VudCA9IHByb2dyZXNzLmNvdW50CiAgICAgc3VjY2VlZGVkID0gcHJv\nZ3Jlc3Muc3VjY2VlZGVkCiAgICAgZmFpbGVkID0gcHJvZ3Jlc3MuZmFpbGVkCisgICAgaWYgbG9n\nZmlsZToKKyAgICAgIHNlbGYubG9nZi53cml0ZSgiIC0gUmFuICVpIHRlc3QlcyBcbiIgJSBNYWtl\nUGx1cmFsKGNvdW50KSkKICAgICBwcmludCAiIC0gUmFuICVpIHRlc3QlcyIgJSBNYWtlUGx1cmFs\nKGNvdW50KQogICAgIGlmIHByb2dyZXNzLmZhaWxlZCA9PSAwOgorICAgICAgaWYgbG9nZmlsZToK\nKyAgICAgICAgc2VsZi5sb2dmLndyaXRlKCIgLSBBbGwgdGVzdHMgc3VjY2VlZGVkIFxuIikKICAg\nICAgIHByaW50ICIgLSBBbGwgdGVzdHMgc3VjY2VlZGVkIgorICAgCiAgICAgZWxzZToKICAgICAg\nIHBlcmNlbnQgPSAoKDEwMC4wICogc3VjY2VlZGVkKSAvIGNvdW50LCkKKyAgICAgIGlmIGxvZ2Zp\nbGU6CisgICAgICAgIHNlbGYubG9nZi53cml0ZSgiIC0gUGFzc2VkICVpIHRlc3QlcyAoJS4xZiUl\nKVxuIiAlIChNYWtlUGx1cmFsKHN1Y2NlZWRlZCkgKyBwZXJjZW50KSkKICAgICAgIHByaW50ICIg\nLSBQYXNzZWQgJWkgdGVzdCVzICglLjFmJSUpIiAlIChNYWtlUGx1cmFsKHN1Y2NlZWRlZCkgKyBw\nZXJjZW50KQogICAgICAgcGVyY2VudCA9ICgoMTAwLjAgKiBmYWlsZWQpIC8gY291bnQsKQorICAg\nICAgaWYgbG9nZmlsZToKKyAgICAgICAgc2VsZi5sb2dmLndyaXRlKCIgLSBGYWlsZWQgJWkgdGVz\ndCVzICglLjFmJSUpIFxuIiAlIChNYWtlUGx1cmFsKGZhaWxlZCkgKyBwZXJjZW50KSkKICAgICAg\nIHByaW50ICIgLSBGYWlsZWQgJWkgdGVzdCVzICglLjFmJSUpIiAlIChNYWtlUGx1cmFsKGZhaWxl\nZCkgKyBwZXJjZW50KQogICAgICAgcG9zaXRpdmUgPSBbYyBmb3IgYyBpbiBwcm9ncmVzcy5mYWls\nZWRfdGVzdHMgaWYgbm90IGMuY2FzZS5Jc05lZ2F0aXZlKCldCiAgICAgICBuZWdhdGl2ZSA9IFtj\nIGZvciBjIGluIHByb2dyZXNzLmZhaWxlZF90ZXN0cyBpZiBjLmNhc2UuSXNOZWdhdGl2ZSgpXQog\nICAgICAgaWYgbGVuKHBvc2l0aXZlKSA+IDA6CiAgICAgICAgIHByaW50CisgICAgICAgIGlmIGxv\nZ2ZpbGU6CisgICAgICAgICAgc2VsZi5sb2dmLndyaXRlKCJGYWlsZWQgVGVzdHMgXG4iKSAKICAg\nICAgICAgcHJpbnQgIkZhaWxlZCB0ZXN0cyIKICAgICAgICAgZm9yIHJlc3VsdCBpbiBwb3NpdGl2\nZToKKyAgICAgICAgICBpZiBsb2dmaWxlOgorICAgICAgICAgICAgc2VsZi5sb2dmLndyaXRlKCIg\nICVzIGluICVzIFxuIiAlIChyZXN1bHQuY2FzZS5HZXROYW1lKCksIHJlc3VsdC5jYXNlLkdldE1v\nZGUoKSkpCiAgICAgICAgICAgcHJpbnQgIiAgJXMgaW4gJXMiICUgKHJlc3VsdC5jYXNlLkdldE5h\nbWUoKSwgcmVzdWx0LmNhc2UuR2V0TW9kZSgpKQogICAgICAgaWYgbGVuKG5lZ2F0aXZlKSA+IDA6\nCiAgICAgICAgIHByaW50CiAgICAgICAgIHByaW50ICJFeHBlY3RlZCB0byBmYWlsIGJ1dCBwYXNz\nZWQgLS0tIgogICAgICAgICBmb3IgcmVzdWx0IGluIG5lZ2F0aXZlOgorICAgICAgICAgIGlmIGxv\nZ2ZpbGU6CisgICAgICAgICAgICBzZWxmLmxvZ2ZpbGUuYXBwZW5kKCIgJXMgaW4gJXMgXG4iICUg\nKHJlc3VsdC5jYXNlLkdldE5hbWUoKSwgcmVzdWx0LmNhc2UuR2V0TW9kZSgpKSkKICAgICAgICAg\nICBwcmludCAiICVzIGluICVzIiAlIChyZXN1bHQuY2FzZS5HZXROYW1lKCksIHJlc3VsdC5jYXNl\nLkdldE1vZGUoKSkKIAotICBkZWYgUHJpbnRGYWlsdXJlT3V0cHV0KHNlbGYsIHByb2dyZXNzKToK\nKyAgZGVmIFByaW50RmFpbHVyZU91dHB1dChzZWxmLCBwcm9ncmVzcywgbG9nZmlsZSk6CiAgICAg\nZm9yIHJlc3VsdCBpbiBwcm9ncmVzcy5mYWlsZWRfdGVzdHM6CisgICAgICBpZiBsb2dmaWxlOgor\nICAgICAgICBzZWxmLldyaXRlTG9nKHJlc3VsdCkKICAgICAgIHByaW50CiAgICAgICByZXN1bHQu\nUmVwb3J0T3V0Y29tZShGYWxzZSkKIAotICBkZWYgUnVuKHNlbGYsIGNvbW1hbmRfdGVtcGxhdGUs\nIHRlc3RzLCBwcmludF9zdW1tYXJ5LCBmdWxsX3N1bW1hcnkpOgorICBkZWYgUnVuKHNlbGYsIGNv\nbW1hbmRfdGVtcGxhdGUsIHRlc3RzLCBwcmludF9zdW1tYXJ5LCBmdWxsX3N1bW1hcnksIGxvZ25h\nbWUsIGp1bml0ZmlsZSk6CiAgICAgaWYgbm90ICJ7e3BhdGh9fSIgaW4gY29tbWFuZF90ZW1wbGF0\nZToKICAgICAgIGNvbW1hbmRfdGVtcGxhdGUgKz0gIiB7e3BhdGh9fSIKICAgICBjYXNlcyA9IHNl\nbGYuRW51bWVyYXRlVGVzdHModGVzdHMpCiAgICAgaWYgbGVuKGNhc2VzKSA9PSAwOgogICAgICAg\nUmVwb3J0RXJyb3IoIk5vIHRlc3RzIHRvIHJ1biIpCiAgICAgcHJvZ3Jlc3MgPSBQcm9ncmVzc0lu\nZGljYXRvcihsZW4oY2FzZXMpKQorICAgIGlmIGxvZ25hbWU6CisgICAgICBzZWxmLmxvZ2YgPSBv\ncGVuKGxvZ25hbWUsICJ3IikKKyAgICBpZiBqdW5pdGZpbGU6CisgICAgICBzZWxmLm91dGZpbGUg\nPSBvcGVuKGp1bml0ZmlsZSwgInciKQorICAgICAgVGVzdFN1aXRlRWxlbWVudCA9IHhtbGouRWxl\nbWVudCgidGVzdHN1aXRlIikKKyAgICAgIFRlc3RTdWl0ZUVsZW1lbnQuYXR0cmliWyJuYW1lICJd\nID0gInRlc3QyNjIiCisgICAgICBmb3IgeCBpbiByYW5nZShsZW4oRVhDTFVERV9MSVNUKSk6Cisg\nICAgICAgICAgU2tpcENhc2VFbGVtZW50ID0geG1sai5FbGVtZW50KCJ0ZXN0Y2FzZSIpCisgICAg\nICAgICAgU2tpcENhc2VFbGVtZW50LmF0dHJpYlsiY2xhc3NuYW1lIl0gPSB1bmljb2RlKEVYQ0xV\nREVfTElTVFt4XSkuZW5jb2RlKCd1dGYtOCcsJ2lnbm9yZScpCisgICAgICAgICAgU2tpcENhc2VF\nbGVtZW50LmF0dHJpYlsibmFtZSJdID0gdW5pY29kZShFWENMVURFX0xJU1RbeF0pLmVuY29kZSgn\ndXRmLTgnLCdpZ25vcmUnKQorICAgICAgICAgIFNraXBFbGVtZW50ID0geG1sai5FbGVtZW50KCJz\na2lwcGVkIikKKyAgICAgICAgICBTa2lwRWxlbWVudC5hdHRyaWJbIm1lc3NhZ2UiXSA9IHVuaWNv\nZGUoRVhDTFVERV9SRUFTT05beF0uZmlyc3RDaGlsZC5ub2RlVmFsdWUpCisgICAgICAgICAgU2tp\ncENhc2VFbGVtZW50LmFwcGVuZChTa2lwRWxlbWVudCkKKyAgICAgICAgICBUZXN0U3VpdGVFbGVt\nZW50LmFwcGVuZChTa2lwQ2FzZUVsZW1lbnQpCisgICAgICAgCiAgICAgZm9yIGNhc2UgaW4gY2Fz\nZXM6CiAgICAgICByZXN1bHQgPSBjYXNlLlJ1bihjb21tYW5kX3RlbXBsYXRlKQorICAgICAgaWYg\nanVuaXRmaWxlOgorICAgICAgICBUZXN0Q2FzZUVsZW1lbnQgPSByZXN1bHQuWG1sQXNzZW1ibGUo\ncmVzdWx0KQorICAgICAgICBUZXN0U3VpdGVFbGVtZW50LmFwcGVuZChUZXN0Q2FzZUVsZW1lbnQp\nCisgICAgICAgIGlmIGNhc2UgPT0gY2FzZXNbbGVuKGNhc2VzKS0xXToKKyAgICAgICAgICAgICB4\nbWxqLkVsZW1lbnRUcmVlKFRlc3RTdWl0ZUVsZW1lbnQpLndyaXRlKGp1bml0ZmlsZSwgIlVURi04\nIikKKyAgICAgIGlmIGxvZ25hbWU6CisgICAgICAgIHNlbGYuV3JpdGVMb2cocmVzdWx0KQogICAg\nICAgcHJvZ3Jlc3MuSGFzUnVuKHJlc3VsdCkKKyAgICAKICAgICBpZiBwcmludF9zdW1tYXJ5Ogot\nICAgICAgc2VsZi5QcmludFN1bW1hcnkocHJvZ3Jlc3MpCisgICAgICBzZWxmLlByaW50U3VtbWFy\neShwcm9ncmVzcywgbG9nbmFtZSkKICAgICAgIGlmIGZ1bGxfc3VtbWFyeToKLSAgICAgICAgc2Vs\nZi5QcmludEZhaWx1cmVPdXRwdXQocHJvZ3Jlc3MpCisgICAgICAgIHNlbGYuUHJpbnRGYWlsdXJl\nT3V0cHV0KHByb2dyZXNzLCBsb2duYW1lKQogICAgICAgZWxzZToKICAgICAgICAgcHJpbnQKICAg\nICAgICAgcHJpbnQgIlVzZSAtLWZ1bGwtc3VtbWFyeSB0byBzZWUgb3V0cHV0IGZyb20gZmFpbGVk\nIHRlc3RzIgogICAgIHByaW50CiAKKyAgZGVmIFdyaXRlTG9nKHNlbGYsIHJlc3VsdCk6CisgICAg\nbmFtZSA9IHJlc3VsdC5jYXNlLkdldE5hbWUoKQorICAgIG1vZGUgPSByZXN1bHQuY2FzZS5HZXRN\nb2RlKCkKKyAgICBpZiByZXN1bHQuSGFzVW5leHBlY3RlZE91dGNvbWUoKToKKyAgICAgICBpZiBy\nZXN1bHQuY2FzZS5Jc05lZ2F0aXZlKCk6CisgICAgICAgICAgc2VsZi5sb2dmLndyaXRlKCI9PT0g\nJXMgd2FzIGV4cGVjdGVkIHRvIGZhaWwgaW4gJXMsIGJ1dCBkaWRuJ3QgPT09IFxuIiAlIChuYW1l\nLCBtb2RlKSkKKyAgICAgICBlbHNlOgorICAgICAgICAgIHNlbGYubG9nZi53cml0ZSgiPT09ICVz\nIGZhaWxlZCBpbiAlcyA9PT0gXG4iICUgKG5hbWUsIG1vZGUpKQorICAgICAgICAgIG91dCA9IHJl\nc3VsdC5zdGRvdXQuc3RyaXAoKQorICAgICAgICAgIGlmIGxlbihvdXQpID4gMDoKKyAgICAgICAg\nICAgICBzZWxmLmxvZ2Yud3JpdGUoIi0tLSBvdXRwdXQgLS0tIFxuICVzIiAlIG91dCkKKyAgICAg\nICAgICBlcnIgPSByZXN1bHQuc3RkZXJyLnN0cmlwKCkKKyAgICAgICAgICBpZiBsZW4oZXJyKSA+\nIDA6CisgICAgICAgICAgICAgc2VsZi5sb2dmLndyaXRlKCItLS0gZXJyb3JzIC0tLSAgXG4gJXMi\nICUgZXJyKQorICAgICAgICAgICAgIHNlbGYubG9nZi53cml0ZSgiPT09IFxuIikKKyAgICBlbGlm\nIHJlc3VsdC5jYXNlLklzTmVnYXRpdmUoKToKKyAgICAgICBzZWxmLmxvZ2Yud3JpdGUoIiVzIGZh\naWxlZCBpbiAlcyBhcyBleHBlY3RlZCBcbiIgJSAobmFtZSwgbW9kZSkpCisgICAgZWxzZToKKyAg\nICAgICBzZWxmLmxvZ2Yud3JpdGUoIiVzIHBhc3NlZCBpbiAlcyBcbiIgJSAobmFtZSwgbW9kZSkp\nCisKICAgZGVmIFByaW50KHNlbGYsIHRlc3RzKToKICAgICBjYXNlcyA9IHNlbGYuRW51bWVyYXRl\nVGVzdHModGVzdHMpCiAgICAgaWYgbGVuKGNhc2VzKSA+IDA6CiAgICAgICBjYXNlc1swXS5Qcmlu\ndCgpCiAKLQogZGVmIE1haW4oKToKICAgcGFyc2VyID0gQnVpbGRPcHRpb25zKCkKICAgKG9wdGlv\nbnMsIGFyZ3MpID0gcGFyc2VyLnBhcnNlX2FyZ3MoKQpAQCAtNDU4LDkgKzU1MiwxMCBAQAogICBl\nbHNlOgogICAgIHRlc3Rfc3VpdGUuUnVuKG9wdGlvbnMuY29tbWFuZCwgYXJncywKICAgICAgICAg\nICAgICAgICAgICBvcHRpb25zLnN1bW1hcnkgb3Igb3B0aW9ucy5mdWxsX3N1bW1hcnksCi0gICAg\nICAgICAgICAgICAgICAgb3B0aW9ucy5mdWxsX3N1bW1hcnkpCi0KLQorICAgICAgICAgICAgICAg\nICAgIG9wdGlvbnMuZnVsbF9zdW1tYXJ5LAorICAgICAgICAgICAgICAgICAgIG9wdGlvbnMubG9n\nbmFtZSwKKyAgICAgICAgICAgICAgICAgICBvcHRpb25zLmp1bml0bmFtZSkKKyAgICAgICAKIGlm\nIF9fbmFtZV9fID09ICdfX21haW5fXyc6CiAgIHRyeToKICAgICBNYWluKCkK\n"}},{"_attributes":{"isobsolete":"0","ispatch":"1"},"attachid":"61","date":"2013-06-10 08:07:00 -0700","delta_ts":"2013-06-10 08:07:10 -0700","desc":"Adding JUnit XML and logfile support to test262 test runner","filename":"bug_1472.patch","type":"text/plain","size":"8739","attacher":{"_attributes":{"name":"Prashanth Srinivasan"},"_text":"prsriniv"},"data":{"_attributes":{"encoding":"base64"},"_text":"ZGlmZiAtciBlNjJlMWIzNWYwZDkgdGVzdC9jb25maWcvZXhjbHVkZWxpc3QueG1sCi0tLSBhL3Rl\nc3QvY29uZmlnL2V4Y2x1ZGVsaXN0LnhtbAlGcmkgTWF5IDEwIDE2OjE5OjMyIDIwMTMgLTA0MDAK\nKysrIGIvdGVzdC9jb25maWcvZXhjbHVkZWxpc3QueG1sCU1vbiBKdW4gMTAgMTE6MDU6MDcgMjAx\nMyAtMDQwMApAQCAtMSw0ICsxLDQgQEAKLe+7vzw/eG1sIHZlcnNpb249IjEuMCIgZW5jb2Rpbmc9\nInV0Zi04IiA/Pg0KKzw/eG1sIHZlcnNpb249IjEuMCIgZW5jb2Rpbmc9InV0Zi04IiA/Pg0KIDxl\neGNsdWRlTGlzdD4gIA0KLSAgPHRlc3QgaWQ9ImV4YW1wbGUiPlNvbWUgZGVzY3JpcHRpb24gPC90\nZXN0Pg0KLTwvZXhjbHVkZUxpc3Q+ClwgTm8gbmV3bGluZSBhdCBlbmQgb2YgZmlsZQorICA8dGVz\ndCBpZD0iZXhhbXBsZSI+PHJlYXNvbj5Tb21lIGRlc2NyaXB0aW9uIDwvcmVhc29uPjwvdGVzdD4N\nCis8L2V4Y2x1ZGVMaXN0Pg0KZGlmZiAtciBlNjJlMWIzNWYwZDkgdG9vbHMvcGFja2FnaW5nL3Rl\nc3QyNjIucHkKLS0tIGEvdG9vbHMvcGFja2FnaW5nL3Rlc3QyNjIucHkJRnJpIE1heSAxMCAxNjox\nOTozMiAyMDEzIC0wNDAwCisrKyBiL3Rvb2xzL3BhY2thZ2luZy90ZXN0MjYyLnB5CU1vbiBKdW4g\nMTAgMTE6MDU6MDcgMjAxMyAtMDQwMApAQCAtMjMsNiArMjMsOCBAQAogaW1wb3J0IHNodXRpbAog\naW1wb3J0IGpzb24KIGltcG9ydCBzdGF0CitpbXBvcnQgeG1sLmV0cmVlLkVsZW1lbnRUcmVlIGFz\nIHhtbGoKK2ltcG9ydCB1bmljb2RlZGF0YQogCiAKIGZyb20gcGFyc2VUZXN0UmVjb3JkIGltcG9y\ndCBwYXJzZVRlc3RSZWNvcmQsIHN0cmlwSGVhZGVyCkBAIC00Myw2ICs0NSw3IEBACiAgICAgICAg\nICIgJXMsIHNob3dpbmcgd2hpY2ggdGVzdHMgaGF2ZSBiZWVuIGRpc2FibGVkISIgJSBFWENMVURF\nRF9GSUxFTkFNRQogICAgIHN5cy5leGl0KDEpCiBFWENMVURFX0xJU1QgPSB4bWwuZG9tLm1pbmlk\nb20ucGFyc2UoRVhDTFVERURfRklMRU5BTUUpCitFWENMVURFX1JFQVNPTiA9IEVYQ0xVREVfTElT\nVC5nZXRFbGVtZW50c0J5VGFnTmFtZSgicmVhc29uIikKIEVYQ0xVREVfTElTVCA9IEVYQ0xVREVf\nTElTVC5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGVzdCIpCiBFWENMVURFX0xJU1QgPSBbeC5nZXRB\ndHRyaWJ1dGUoImlkIikgZm9yIHggaW4gRVhDTFVERV9MSVNUXQogCkBAIC02Niw2ICs2OSw4IEBA\nCiAgICMgdG8gImJvdGgiCiAgIHJlc3VsdC5hZGRfb3B0aW9uKCItLXVubWFya2VkX2RlZmF1bHQi\nLCBkZWZhdWx0PSJub25fc3RyaWN0IiwgCiAgICAgICAgICAgICAgICAgICAgIGhlbHA9ImRlZmF1\nbHQgbW9kZSBmb3IgdGVzdHMgb2YgdW5zcGVjaWZpZWQgc3RyaWN0bmVzcyIpCisgIHJlc3VsdC5h\nZGRfb3B0aW9uKCItLWxvZ25hbWUiLCBoZWxwPSJGaWxlbmFtZSB0byBzYXZlIHN0ZG91dCB0byIp\nCisgIHJlc3VsdC5hZGRfb3B0aW9uKCItLWp1bml0bmFtZSIsIGhlbHA9IkZpbGVuYW1lIHRvIHNh\ndmUgdGVzdCByZXN1bHRzIGluIEpVbml0IFhNTCBmb3JtYXQiKQogICByZXN1bHQuYWRkX29wdGlv\nbigiLS1sb2dsZXZlbCIsIGRlZmF1bHQ9Indhcm5pbmciLAogICAgICAgICAgICAgICAgICAgICBo\nZWxwPSJzZXRzIGxvZyBsZXZlbCB0byBkZWJ1ZywgaW5mbywgd2FybmluZywgZXJyb3IsIG9yIGNy\naXRpY2FsIikgCiAgIHJldHVybiByZXN1bHQKQEAgLTE1OCw3ICsxNjMsMzYgQEAKICAgICAgIHBy\naW50ICIlcyBmYWlsZWQgaW4gJXMgYXMgZXhwZWN0ZWQiICUgKG5hbWUsIG1vZGUpCiAgICAgZWxz\nZToKICAgICAgIHByaW50ICIlcyBwYXNzZWQgaW4gJXMiICUgKG5hbWUsIG1vZGUpCisgICAgCisg\nIGRlZiBYbWxBc3NlbWJsZShzZWxmLCByZXN1bHQpOgorICAgIHRlc3RfbmFtZSA9IHNlbGYuY2Fz\nZS5HZXROYW1lKCkKKyAgICB0ZXN0X21vZGUgPSBzZWxmLmNhc2UuR2V0TW9kZSgpCisgICAgdGVz\ndENhc2VFbGVtZW50ID0geG1sai5FbGVtZW50KCJ0ZXN0Y2FzZSIpCisgICAgdGVzdHBhdGggPSBz\nZWxmLlRlc3RQYXRoTWFuaXB1bGF0aW9uKHRlc3RfbmFtZSkKKyAgICB0ZXN0Q2FzZUVsZW1lbnQu\nYXR0cmliWyJjbGFzc25hbWUiXSA9ICIlcy4lcyIgJSAodGVzdHBhdGhbMF0gLCB0ZXN0cGF0aFsx\nXSkgCisgICAgdGVzdENhc2VFbGVtZW50LmF0dHJpYlsibmFtZSJdID0gIiVzICVzIiAlICh0ZXN0\ncGF0aFsyXS5yZXBsYWNlKCcuJywnXycpICwgdGVzdF9tb2RlKQorICAgIGlmIHNlbGYuSGFzVW5l\neHBlY3RlZE91dGNvbWUoKToKKyAgICAgIGZhaWx1cmVFbGVtZW50ID0geG1sai5FbGVtZW50KCJm\nYWlsdXJlIikKKyAgICAgIG91dCA9IHNlbGYuc3Rkb3V0LnN0cmlwKCkuZGVjb2RlKCd1dGYtOCcp\nCisgICAgICBlcnIgPSBzZWxmLnN0ZGVyci5zdHJpcCgpLmRlY29kZSgndXRmLTgnKQorICAgICAg\naWYgbGVuKG91dCkgPiAwOgorICAgICAgICBmYWlsdXJlRWxlbWVudC50ZXh0ID0gb3V0CisgICAg\nICBpZiBsZW4oZXJyKSA+IDA6CisgICAgICAgIGZhaWx1cmVFbGVtZW50LnRleHQgPSBlcnIKKyAg\nICAgIHRlc3RDYXNlRWxlbWVudC5hcHBlbmQoZmFpbHVyZUVsZW1lbnQpCisgICAgcmV0dXJuIHRl\nc3RDYXNlRWxlbWVudAogCisgIGRlZiBUZXN0UGF0aE1hbmlwdWxhdGlvbihzZWxmLCB0ZXN0X25h\nbWUpOgorICAgIHRlc3RkaXJsaXN0ID0gdGVzdF9uYW1lLnNwbGl0KCcvJykKKyAgICB0ZXN0Y2Fz\nZSA9IHRlc3RkaXJsaXN0LnBvcCgpCisgICAgdGVzdGNsYXNzID0gdGVzdGRpcmxpc3QucG9wKCkK\nKyAgICB0ZXN0Y2xhc3MgPSB0ZXN0Y2xhc3MucmVwbGFjZSgnLicsJ18nKQorICAgIGlmIGxlbih0\nZXN0ZGlybGlzdCkgPj0gMToKKyAgICAgICB0ZXN0cGFja2FnZSA9IHRlc3RkaXJsaXN0LnBvcCgw\nKQorICAgIGVsc2U6CisgICAgICAgdGVzdHBhY2thZ2UgPSB0ZXN0Y2xhc3MKKyAgICByZXR1cm4o\ndGVzdHBhY2thZ2UsdGVzdGNsYXNzLHRlc3RjYXNlKQorICAKICAgZGVmIEhhc0ZhaWxlZChzZWxm\nKToKICAgICByZXR1cm4gc2VsZi5leGl0X2NvZGUgIT0gMAogCkBAIC0yOTYsNyArMzMwLDYgQEAK\nICAgZWxzZToKICAgICByZXR1cm4gKG4sICJzIikKIAotCiBjbGFzcyBUZXN0U3VpdGUob2JqZWN0\nKToKIAogICBkZWYgX19pbml0X18oc2VsZiwgcm9vdCwgc3RyaWN0X29ubHksIG5vbl9zdHJpY3Rf\nb25seSwgdW5tYXJrZWRfZGVmYXVsdCk6CkBAIC0zNzcsNjMgKzQxMCwxMjUgQEAKICAgICBsb2dn\naW5nLmluZm8oIkRvbmUgbGlzdGluZyB0ZXN0cyIpCiAgICAgcmV0dXJuIGNhc2VzCiAKLSAgZGVm\nIFByaW50U3VtbWFyeShzZWxmLCBwcm9ncmVzcyk6CisgIGRlZiBQcmludFN1bW1hcnkoc2VsZiwg\ncHJvZ3Jlc3MsIGxvZ2ZpbGUpOgogICAgIHByaW50CisgICAgaWYgbG9nZmlsZToKKyAgICAgICBz\nZWxmLmxvZ2Yud3JpdGUoIj09PSBTdW1tYXJ5ID09PSBcbiIpCiAgICAgcHJpbnQgIj09PSBTdW1t\nYXJ5ID09PSIKICAgICBjb3VudCA9IHByb2dyZXNzLmNvdW50CiAgICAgc3VjY2VlZGVkID0gcHJv\nZ3Jlc3Muc3VjY2VlZGVkCiAgICAgZmFpbGVkID0gcHJvZ3Jlc3MuZmFpbGVkCisgICAgaWYgbG9n\nZmlsZToKKyAgICAgIHNlbGYubG9nZi53cml0ZSgiIC0gUmFuICVpIHRlc3QlcyBcbiIgJSBNYWtl\nUGx1cmFsKGNvdW50KSkKICAgICBwcmludCAiIC0gUmFuICVpIHRlc3QlcyIgJSBNYWtlUGx1cmFs\nKGNvdW50KQogICAgIGlmIHByb2dyZXNzLmZhaWxlZCA9PSAwOgorICAgICAgaWYgbG9nZmlsZToK\nKyAgICAgICAgc2VsZi5sb2dmLndyaXRlKCIgLSBBbGwgdGVzdHMgc3VjY2VlZGVkIFxuIikKICAg\nICAgIHByaW50ICIgLSBBbGwgdGVzdHMgc3VjY2VlZGVkIgorICAgCiAgICAgZWxzZToKICAgICAg\nIHBlcmNlbnQgPSAoKDEwMC4wICogc3VjY2VlZGVkKSAvIGNvdW50LCkKKyAgICAgIGlmIGxvZ2Zp\nbGU6CisgICAgICAgIHNlbGYubG9nZi53cml0ZSgiIC0gUGFzc2VkICVpIHRlc3QlcyAoJS4xZiUl\nKVxuIiAlIChNYWtlUGx1cmFsKHN1Y2NlZWRlZCkgKyBwZXJjZW50KSkKICAgICAgIHByaW50ICIg\nLSBQYXNzZWQgJWkgdGVzdCVzICglLjFmJSUpIiAlIChNYWtlUGx1cmFsKHN1Y2NlZWRlZCkgKyBw\nZXJjZW50KQogICAgICAgcGVyY2VudCA9ICgoMTAwLjAgKiBmYWlsZWQpIC8gY291bnQsKQorICAg\nICAgaWYgbG9nZmlsZToKKyAgICAgICAgc2VsZi5sb2dmLndyaXRlKCIgLSBGYWlsZWQgJWkgdGVz\ndCVzICglLjFmJSUpIFxuIiAlIChNYWtlUGx1cmFsKGZhaWxlZCkgKyBwZXJjZW50KSkKICAgICAg\nIHByaW50ICIgLSBGYWlsZWQgJWkgdGVzdCVzICglLjFmJSUpIiAlIChNYWtlUGx1cmFsKGZhaWxl\nZCkgKyBwZXJjZW50KQogICAgICAgcG9zaXRpdmUgPSBbYyBmb3IgYyBpbiBwcm9ncmVzcy5mYWls\nZWRfdGVzdHMgaWYgbm90IGMuY2FzZS5Jc05lZ2F0aXZlKCldCiAgICAgICBuZWdhdGl2ZSA9IFtj\nIGZvciBjIGluIHByb2dyZXNzLmZhaWxlZF90ZXN0cyBpZiBjLmNhc2UuSXNOZWdhdGl2ZSgpXQog\nICAgICAgaWYgbGVuKHBvc2l0aXZlKSA+IDA6CiAgICAgICAgIHByaW50CisgICAgICAgIGlmIGxv\nZ2ZpbGU6CisgICAgICAgICAgc2VsZi5sb2dmLndyaXRlKCJGYWlsZWQgVGVzdHMgXG4iKSAKICAg\nICAgICAgcHJpbnQgIkZhaWxlZCB0ZXN0cyIKICAgICAgICAgZm9yIHJlc3VsdCBpbiBwb3NpdGl2\nZToKKyAgICAgICAgICBpZiBsb2dmaWxlOgorICAgICAgICAgICAgc2VsZi5sb2dmLndyaXRlKCIg\nICVzIGluICVzIFxuIiAlIChyZXN1bHQuY2FzZS5HZXROYW1lKCksIHJlc3VsdC5jYXNlLkdldE1v\nZGUoKSkpCiAgICAgICAgICAgcHJpbnQgIiAgJXMgaW4gJXMiICUgKHJlc3VsdC5jYXNlLkdldE5h\nbWUoKSwgcmVzdWx0LmNhc2UuR2V0TW9kZSgpKQogICAgICAgaWYgbGVuKG5lZ2F0aXZlKSA+IDA6\nCiAgICAgICAgIHByaW50CiAgICAgICAgIHByaW50ICJFeHBlY3RlZCB0byBmYWlsIGJ1dCBwYXNz\nZWQgLS0tIgogICAgICAgICBmb3IgcmVzdWx0IGluIG5lZ2F0aXZlOgorICAgICAgICAgIGlmIGxv\nZ2ZpbGU6CisgICAgICAgICAgICBzZWxmLmxvZ2ZpbGUuYXBwZW5kKCIgJXMgaW4gJXMgXG4iICUg\nKHJlc3VsdC5jYXNlLkdldE5hbWUoKSwgcmVzdWx0LmNhc2UuR2V0TW9kZSgpKSkKICAgICAgICAg\nICBwcmludCAiICVzIGluICVzIiAlIChyZXN1bHQuY2FzZS5HZXROYW1lKCksIHJlc3VsdC5jYXNl\nLkdldE1vZGUoKSkKIAotICBkZWYgUHJpbnRGYWlsdXJlT3V0cHV0KHNlbGYsIHByb2dyZXNzKToK\nKyAgZGVmIFByaW50RmFpbHVyZU91dHB1dChzZWxmLCBwcm9ncmVzcywgbG9nZmlsZSk6CiAgICAg\nZm9yIHJlc3VsdCBpbiBwcm9ncmVzcy5mYWlsZWRfdGVzdHM6CisgICAgICBpZiBsb2dmaWxlOgor\nICAgICAgICBzZWxmLldyaXRlTG9nKHJlc3VsdCkKICAgICAgIHByaW50CiAgICAgICByZXN1bHQu\nUmVwb3J0T3V0Y29tZShGYWxzZSkKIAotICBkZWYgUnVuKHNlbGYsIGNvbW1hbmRfdGVtcGxhdGUs\nIHRlc3RzLCBwcmludF9zdW1tYXJ5LCBmdWxsX3N1bW1hcnkpOgorICBkZWYgUnVuKHNlbGYsIGNv\nbW1hbmRfdGVtcGxhdGUsIHRlc3RzLCBwcmludF9zdW1tYXJ5LCBmdWxsX3N1bW1hcnksIGxvZ25h\nbWUsIGp1bml0ZmlsZSk6CiAgICAgaWYgbm90ICJ7e3BhdGh9fSIgaW4gY29tbWFuZF90ZW1wbGF0\nZToKICAgICAgIGNvbW1hbmRfdGVtcGxhdGUgKz0gIiB7e3BhdGh9fSIKICAgICBjYXNlcyA9IHNl\nbGYuRW51bWVyYXRlVGVzdHModGVzdHMpCiAgICAgaWYgbGVuKGNhc2VzKSA9PSAwOgogICAgICAg\nUmVwb3J0RXJyb3IoIk5vIHRlc3RzIHRvIHJ1biIpCiAgICAgcHJvZ3Jlc3MgPSBQcm9ncmVzc0lu\nZGljYXRvcihsZW4oY2FzZXMpKQorICAgIGlmIGxvZ25hbWU6CisgICAgICBzZWxmLmxvZ2YgPSBv\ncGVuKGxvZ25hbWUsICJ3IikKKyAgICBpZiBqdW5pdGZpbGU6CisgICAgICBzZWxmLm91dGZpbGUg\nPSBvcGVuKGp1bml0ZmlsZSwgInciKQorICAgICAgVGVzdFN1aXRlRWxlbWVudCA9IHhtbGouRWxl\nbWVudCgidGVzdHN1aXRlIikKKyAgICAgIFRlc3RTdWl0ZUVsZW1lbnQuYXR0cmliWyJuYW1lICJd\nID0gInRlc3QyNjIiCisgICAgICBmb3IgeCBpbiByYW5nZShsZW4oRVhDTFVERV9MSVNUKSk6Cisg\nICAgICAgIGlmIHNlbGYuU2hvdWxkUnVuICh1bmljb2RlKEVYQ0xVREVfTElTVFt4XS5lbmNvZGUo\nJ3V0Zi04JywnaWdub3JlJykpLCB0ZXN0cyk6CisgICAgICAgICAgU2tpcENhc2VFbGVtZW50ID0g\neG1sai5FbGVtZW50KCJ0ZXN0Y2FzZSIpCisgICAgICAgICAgU2tpcENhc2VFbGVtZW50LmF0dHJp\nYlsiY2xhc3NuYW1lIl0gPSB1bmljb2RlKEVYQ0xVREVfTElTVFt4XSkuZW5jb2RlKCd1dGYtOCcs\nJ2lnbm9yZScpCisgICAgICAgICAgU2tpcENhc2VFbGVtZW50LmF0dHJpYlsibmFtZSJdID0gdW5p\nY29kZShFWENMVURFX0xJU1RbeF0pLmVuY29kZSgndXRmLTgnLCdpZ25vcmUnKQorICAgICAgICAg\nIFNraXBFbGVtZW50ID0geG1sai5FbGVtZW50KCJza2lwcGVkIikKKyAgICAgICAgICBTa2lwRWxl\nbWVudC5hdHRyaWJbIm1lc3NhZ2UiXSA9IHVuaWNvZGUoRVhDTFVERV9SRUFTT05beF0uZmlyc3RD\naGlsZC5ub2RlVmFsdWUpCisgICAgICAgICAgU2tpcENhc2VFbGVtZW50LmFwcGVuZChTa2lwRWxl\nbWVudCkKKyAgICAgICAgICBUZXN0U3VpdGVFbGVtZW50LmFwcGVuZChTa2lwQ2FzZUVsZW1lbnQp\nCisgICAgICAgCiAgICAgZm9yIGNhc2UgaW4gY2FzZXM6CiAgICAgICByZXN1bHQgPSBjYXNlLlJ1\nbihjb21tYW5kX3RlbXBsYXRlKQorICAgICAgaWYganVuaXRmaWxlOgorICAgICAgICBUZXN0Q2Fz\nZUVsZW1lbnQgPSByZXN1bHQuWG1sQXNzZW1ibGUocmVzdWx0KQorICAgICAgICBUZXN0U3VpdGVF\nbGVtZW50LmFwcGVuZChUZXN0Q2FzZUVsZW1lbnQpCisgICAgICAgIGlmIGNhc2UgPT0gY2FzZXNb\nbGVuKGNhc2VzKS0xXToKKyAgICAgICAgICAgICB4bWxqLkVsZW1lbnRUcmVlKFRlc3RTdWl0ZUVs\nZW1lbnQpLndyaXRlKGp1bml0ZmlsZSwgIlVURi04IikKKyAgICAgIGlmIGxvZ25hbWU6CisgICAg\nICAgIHNlbGYuV3JpdGVMb2cocmVzdWx0KQogICAgICAgcHJvZ3Jlc3MuSGFzUnVuKHJlc3VsdCkK\nKyAgICAKICAgICBpZiBwcmludF9zdW1tYXJ5OgotICAgICAgc2VsZi5QcmludFN1bW1hcnkocHJv\nZ3Jlc3MpCisgICAgICBzZWxmLlByaW50U3VtbWFyeShwcm9ncmVzcywgbG9nbmFtZSkKICAgICAg\nIGlmIGZ1bGxfc3VtbWFyeToKLSAgICAgICAgc2VsZi5QcmludEZhaWx1cmVPdXRwdXQocHJvZ3Jl\nc3MpCisgICAgICAgIHNlbGYuUHJpbnRGYWlsdXJlT3V0cHV0KHByb2dyZXNzLCBsb2duYW1lKQog\nICAgICAgZWxzZToKICAgICAgICAgcHJpbnQKICAgICAgICAgcHJpbnQgIlVzZSAtLWZ1bGwtc3Vt\nbWFyeSB0byBzZWUgb3V0cHV0IGZyb20gZmFpbGVkIHRlc3RzIgogICAgIHByaW50CiAKKyAgZGVm\nIFdyaXRlTG9nKHNlbGYsIHJlc3VsdCk6CisgICAgbmFtZSA9IHJlc3VsdC5jYXNlLkdldE5hbWUo\nKQorICAgIG1vZGUgPSByZXN1bHQuY2FzZS5HZXRNb2RlKCkKKyAgICBpZiByZXN1bHQuSGFzVW5l\neHBlY3RlZE91dGNvbWUoKToKKyAgICAgICBpZiByZXN1bHQuY2FzZS5Jc05lZ2F0aXZlKCk6Cisg\nICAgICAgICAgc2VsZi5sb2dmLndyaXRlKCI9PT0gJXMgd2FzIGV4cGVjdGVkIHRvIGZhaWwgaW4g\nJXMsIGJ1dCBkaWRuJ3QgPT09IFxuIiAlIChuYW1lLCBtb2RlKSkKKyAgICAgICBlbHNlOgorICAg\nICAgICAgIHNlbGYubG9nZi53cml0ZSgiPT09ICVzIGZhaWxlZCBpbiAlcyA9PT0gXG4iICUgKG5h\nbWUsIG1vZGUpKQorICAgICAgICAgIG91dCA9IHJlc3VsdC5zdGRvdXQuc3RyaXAoKQorICAgICAg\nICAgIGlmIGxlbihvdXQpID4gMDoKKyAgICAgICAgICAgICBzZWxmLmxvZ2Yud3JpdGUoIi0tLSBv\ndXRwdXQgLS0tIFxuICVzIiAlIG91dCkKKyAgICAgICAgICBlcnIgPSByZXN1bHQuc3RkZXJyLnN0\ncmlwKCkKKyAgICAgICAgICBpZiBsZW4oZXJyKSA+IDA6CisgICAgICAgICAgICAgc2VsZi5sb2dm\nLndyaXRlKCItLS0gZXJyb3JzIC0tLSAgXG4gJXMiICUgZXJyKQorICAgICAgICAgICAgIHNlbGYu\nbG9nZi53cml0ZSgiPT09IFxuIikKKyAgICBlbGlmIHJlc3VsdC5jYXNlLklzTmVnYXRpdmUoKToK\nKyAgICAgICBzZWxmLmxvZ2Yud3JpdGUoIiVzIGZhaWxlZCBpbiAlcyBhcyBleHBlY3RlZCBcbiIg\nJSAobmFtZSwgbW9kZSkpCisgICAgZWxzZToKKyAgICAgICBzZWxmLmxvZ2Yud3JpdGUoIiVzIHBh\nc3NlZCBpbiAlcyBcbiIgJSAobmFtZSwgbW9kZSkpCisKICAgZGVmIFByaW50KHNlbGYsIHRlc3Rz\nKToKICAgICBjYXNlcyA9IHNlbGYuRW51bWVyYXRlVGVzdHModGVzdHMpCiAgICAgaWYgbGVuKGNh\nc2VzKSA+IDA6CiAgICAgICBjYXNlc1swXS5QcmludCgpCiAKLQogZGVmIE1haW4oKToKICAgcGFy\nc2VyID0gQnVpbGRPcHRpb25zKCkKICAgKG9wdGlvbnMsIGFyZ3MpID0gcGFyc2VyLnBhcnNlX2Fy\nZ3MoKQpAQCAtNDU4LDkgKzU1MywxMCBAQAogICBlbHNlOgogICAgIHRlc3Rfc3VpdGUuUnVuKG9w\ndGlvbnMuY29tbWFuZCwgYXJncywKICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnN1bW1hcnkg\nb3Igb3B0aW9ucy5mdWxsX3N1bW1hcnksCi0gICAgICAgICAgICAgICAgICAgb3B0aW9ucy5mdWxs\nX3N1bW1hcnkpCi0KLQorICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZnVsbF9zdW1tYXJ5LAor\nICAgICAgICAgICAgICAgICAgIG9wdGlvbnMubG9nbmFtZSwKKyAgICAgICAgICAgICAgICAgICBv\ncHRpb25zLmp1bml0bmFtZSkKKyAgICAgICAKIGlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6CiAg\nIHRyeToKICAgICBNYWluKCkK\n"}}]}}
---
