---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":4345,"creation_ts":"2015-04-29 10:15:00 -0700","short_desc":"15.1.7 ScriptEvaluation: Return NormalCompletion(undefined) in step 1","delta_ts":"2015-12-15 11:57:44 -0800","product":"Draft for 7th Edition","component":"Deferred from 6th edition","version":"unspecified","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":{"uid":"andrebargull","name":"André Bargull"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"cc":"brterlso","long_desc":[{"commentid":14347,"comment_count":0,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2015-04-29 10:15:24 -0700","thetext":"15.1.7 Runtime Semantics: ScriptEvaluation\n\nStep 1 should probably be changed to:\n---\nIf ScriptBody is not present, return NormalCompletion(undefined).\n---"},{"commentid":14364,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-04-29 17:29:01 -0700","thetext":"empty is what previous editions returned for empty scripts.  It isn't clear that there is any reason to change that."},{"commentid":14369,"comment_count":2,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2015-04-30 07:58:39 -0700","thetext":"Previous editions also returned an empty completion value for:\n---\n; // empty statement\nfunction f() { } // function declaration\n{ } // block\n---\n\nIt doesn't really matter if empty scripts return NormalCompletion(empty) or NormalCompletion(undefined), since the completion value is not detectable by user code, but giving it the same completion value like empty modules and empty eval-scripts seems reasonable. (eval-scripts -> PerformEval, step 4; modules -> 15.2.1.20, first algorithm)\n\nIf you don't want to make this change now, maybe defer to ES7 ?"},{"commentid":14418,"comment_count":3,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-05-19 10:19:40 -0700","thetext":"defer to ES7"},{"commentid":14906,"comment_count":4,"who":{"uid":"brterlso","name":"Brian Terlson"},"bug_when":"2015-12-15 11:57:44 -0800","thetext":"Fixed in ES2016 Draft (698819c)."}]}}
---
