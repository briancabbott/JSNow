---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":3779,"creation_ts":"2015-02-05 14:24:00 -0800","short_desc":"B.3.1 __proto__ : Directly set [[Prototype]] instead calling [[SetPrototypeOf]] ?","delta_ts":"2015-02-12 12:17:39 -0800","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 32: February 2, 2015 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":{"uid":"andrebargull","name":"André Bargull"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"long_desc":[{"commentid":12150,"comment_count":0,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2015-02-05 14:24:45 -0800","thetext":"B.3.1 __proto__ Property Names in Object Initializers\n\nPropertyDefinition : PropertyName : AssignmentExpression\n\nStep 6.a.i\n\nIf `propValue` is a Proxy its [[GetPrototypeOf]] method will be called when the default ordinary [[SetPrototypeOf]] is invoked. And that means user code may get executed. \n\n\nI wonder if it makes sense to change this step to make a direct assignment to [[Prototype]]. The proto cycle chain check from [[SetPrototypeOf]] is not needed at this point and less intervening user code is always preferable ;-)"},{"commentid":12178,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-02-05 20:37:54 -0800","thetext":"see Bug 2437 \n\nEvaluation routines at this level shouldn't be bypassing the MOP.\n\nOn the other hand, 9.1.2 probably shouldn't bother to call non-ordinary [[GetPrototypeOf]]"},{"commentid":12197,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-02-06 13:24:35 -0800","thetext":"Fixed in rev33 editor's draft\n\nI changed ordinary [[SetPrototypeOf]] so it so longer calls [[GetPrototypeOf]] to  on the new __proto__ value.\n\nSee Bug 2437 \n\nThat eliminates the user code concern."},{"commentid":12437,"comment_count":3,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-02-12 12:17:39 -0800","thetext":"fixed in rev33"}]}}
---
