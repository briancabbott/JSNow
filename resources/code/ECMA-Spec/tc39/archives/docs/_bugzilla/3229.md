---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":3229,"creation_ts":"2014-09-18 10:10:00 -0700","short_desc":"Have common code for Array#forEach and TypedArray#forEach","delta_ts":"2015-01-15 16:19:04 -0800","product":"Draft for 6th Edition","component":"restructure","version":"All","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":{"uid":"evilpies","name":"Tom Schuster"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"long_desc":[{"commentid":10196,"comment_count":0,"who":{"uid":"evilpies","name":"Tom Schuster"},"bug_when":"2014-09-18 10:10:55 -0700","thetext":"I think that 22.2.3.12 specifies enough requirements in prose that having common code that can be shared with Array.prototype.forEach would be useful.\n\nHere an example:\n\n%TypedArray%.prototype.forEach\n\n1. Let O be the this value.\n2. If Type(O) is not Object, throw a TypeError exception.\n3. If O does not have a [[TypedArrayName]] internal slot, then throw a TypeError exception.\n4. Let buffer be the value of O’s [[ViewedArrayBuffer]] internal slot.\n5. If buffer is undefined, then throw a TypeError exception.\n6. If IsDetachededBuffer(buffer) is true, throw a TypeError exception.\n7. Let length be the value of O’s [[ArrayLength]] internal slot.\n8. Return the result of GenericForEach(O, length, callbackfn, thisArg)\n\nStep 1 to 7 are actually shared with %TypedArray%.protoype.filter\n\nArray.prototype.forEach\n\n1. Let O be the result of calling ToObject passing the this value as the argument.\n2. ReturnIfAbrupt(O).\n3. Let lenValue be Get(O, \"length\").\n4. Let len be ToLength(lenValue).\n5. ReturnIfAbrupt(len).\n5. Return the result of GenericForEach(0, length, callbackfn, thisArg)"},{"commentid":11284,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-12-31 12:30:32 -0800","thetext":"fixed in rev31 editor's draft\n\nsorta...  Added a common validation abstract operation that is used by most of the typed array methods.  (It can't be used everywhere because of legacy issues).  Also implified the the \"not generic\" boiler plate by referencing that abstract operation \n\nNot going to further breakout common Array/TypedArray algorithms in this edition."},{"commentid":11445,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-01-15 16:19:04 -0800","thetext":"In Rev31"}]}}
---
