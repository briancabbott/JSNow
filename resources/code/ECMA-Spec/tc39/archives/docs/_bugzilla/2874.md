---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":2874,"creation_ts":"2014-05-19 04:23:00 -0700","short_desc":"20.2.2.28 Math.round: Incorrect information in NOTE 2","delta_ts":"2014-06-16 16:26:18 -0700","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 24: April 27, 2014 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"andrebargull","name":"André Bargull"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"long_desc":[{"commentid":8548,"comment_count":0,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2014-05-19 04:23:53 -0700","thetext":"20.2.2.28 Math.round ( x ), NOTE 2:\n\n> NOTE 2  The value of Math.round(x) is the same as the value of  \n> Math.floor(x+0.5), except when x is -0 or is less than 0 but\n> greater than or equal to -0.5; for these cases Math.round(x) \n> returns -0, but Math.floor(x+0.5) returns +0.\n\nThe note suggests `Math.round(x)` can be implemented as `Math.floor(x + 0.5)` if x > 0 (and x being an ECMAScript number value - not a mathematical real number as defined in \"5.2 Algorithm Conventions\"). This violates bullet point 6:\n\n> If x is greater than 0 but less than 0.5, the result is +0.\n\nVarious implementations follow the note rather than the exact specification (IE11, Nashorn, JSC, SpiderMonkey), so the note should probably be altered to say that `Math.round(x)` is not the same as `Math.floor(x + 0.5)` if x ∈ [-0.5, 0.5).\n\nRelated: https://bugzilla.mozilla.org/show_bug.cgi?id=1000606\n\n\ntest case:\n---\n0 === Math.round(0.499999999999999944488848768742172978818416595458984375)\n---"},{"commentid":8550,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-05-19 09:04:36 -0700","thetext":"fixed in rev25 editor's draft"},{"commentid":9026,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-06-16 16:26:18 -0700","thetext":"fixed in rev25 editor's draft"}]}}
---
