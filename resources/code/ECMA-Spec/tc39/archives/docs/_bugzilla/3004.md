---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":3004,"creation_ts":"2014-07-08 10:09:00 -0700","short_desc":"24.1.1.5 GetValueFromBuffer, 24.1.1.6 SetValueInBuffer: Assertion in step 1 does not take neutered buffers into account","delta_ts":"2014-07-19 18:29:25 -0700","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 25: May 22, 2014 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"andrebargull","name":"André Bargull"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"long_desc":[{"commentid":9140,"comment_count":0,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2014-07-08 10:09:56 -0700","thetext":"24.1.1.5 GetValueFromBuffer ( arrayBuffer, byteIndex, type, isLittleEndian )\n24.1.1.6 SetValueInBuffer ( arrayBuffer, byteIndex, type, value, isLittleEndian )\n\nThe assertion in step 1 is not correct when the array buffer object has been neutered. \n\n\nSuggested alternative:\n---\n1.  Assert: byteIndex is a positive integer.\n2.  Let block be arrayBuffer’s [[ArrayBufferData]] internal slot.\n3.  Let byteLength be the value of arrayBuffer’s [[ArrayBufferByteLength]] internal slot.\n4.  Let elementSize be the Number value of the Element Size value specified in Table 44 for Element Type type.\n5.  Assert: byteIndex + elementSize ≤ byteLength or block is null.\n6.  If block is undefined or null, then throw a TypeError exception.\n---\n\n\nAlso: Why does GetValueFromBuffer/SetValueInBuffer handle [[ArrayBufferData]] == `undefined`? That case should never happen, right?"},{"commentid":9196,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-07-14 18:25:25 -0700","thetext":"fixed in rev26 editor's draft\n\nGet/SetValueFrom/ToBuffer only called on initialized and non-neutered buffers."},{"commentid":9383,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-07-19 18:29:25 -0700","thetext":"fixed in rev26"}]}}
---
