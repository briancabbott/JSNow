---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":2011,"creation_ts":"2013-10-01 00:27:00 -0700","short_desc":"14.4: Optional AssignmentExpression in YieldExpression leads to Shift/Reduce conflict?","delta_ts":"2014-02-17 18:14:53 -0800","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 19: September 27, 2013 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"andrebargull","name":"André Bargull"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"cc":"brendan","long_desc":[{"commentid":5746,"comment_count":0,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2013-10-01 00:27:17 -0700","thetext":"AssignmentExpression in YieldExpression is now optional, see bug 1803. Modelling this change in the following toy grammar, a shift/reduce conflict can be observed.\n\nSpiderMonkey (and Rhino) performs a lookahead after \"yield\" and tests whether the next token is not in the follow set (*) of AssignmentExpression. If the next token is not in the follow set and on the same line, it proceeds with the AssignmentExpression production rule. Otherwise it elides the AssignmentExpression.\n\n(*) or rather a subset of the follow set, testing for the first set of AssignmentExpression makes more sense to me, for example to successfully parse the legacy array comprehension syntax `[yield for (a of b)]`.\n\n\n---\n%token CLASS \"class\"\n%token EXTENDS \"extends\"\n%token YIELD \"yield\"\n\n%%\n\nclass: CLASS classTail ;\n\nclassTail: classHeritage '{' '}'\n         | '{' '}' ;\n\nclassHeritage: EXTENDS assignExpr ;\n\nassignExpr: yieldExpr\n          | objectLiteral ;\n\nyieldExpr: YIELD\n         | YIELD assignExpr ;\n\nobjectLiteral: '{' '}' ;\n\n%%\n---"},{"commentid":6647,"comment_count":1,"who":{"uid":"brendan","name":"Brendan Eich"},"bug_when":"2013-11-10 17:19:51 -0800","thetext":"[From es-discuss verbatim.]\n\nPython has requirements for over-parenthesization which we were trying to avoid. Nevertheless, did you consider\n\n5. Except on right of assignment and in actual argument position, yield expressions must be parenthesized\n\nThis is easy to do grammatically if we change the over-general\n\nClassHeritage :\n|    extends| AssignmentExpression\n\nI say over-general because: do we really want this to be valid ES6?\n\nclass D extends B = C {\n}\n\nUsing a higher-precedence expression non-terminal seems better. How about the next lower-precedence nonterminal that does not end in AssignmentExpression, namely LogicalORExpression?\n\nThen any yield without parentheses would be a syntax error.\n\n/be"},{"commentid":7363,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-02-17 18:14:53 -0800","thetext":"fixed in rev22\n\n\n\nthe extends clause of a class is now restricted to being a LeftHandSideExpression"}]}}
---
