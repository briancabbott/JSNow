---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":429,"creation_ts":"2012-07-03 12:33:00 -0700","short_desc":"Array.prototype.splice called with single argument should match de-facto standard","delta_ts":"2013-08-23 08:22:21 -0700","product":"Draft for 6th Edition","component":"normative change from ES5.x","version":"Rev 8: June 15, 2012 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","bug_file_loc":"http://mathias.html5.org/specs/javascript/#array.prototype.splice","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":{"uid":"lukeh","name":"Luke Hoban"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"cc":["john.david.dalton","mathias"],"long_desc":[{"commentid":1073,"comment_count":0,"who":{"uid":"lukeh","name":"Luke Hoban"},"bug_when":"2012-07-03 12:33:32 -0700","thetext":"Per discussion on the wiki recently [0] as well as two years ago [1], the now de-facto standard behavior of splice with a single argument should be included in the ES6 specification.\n\n[0] https://mail.mozilla.org/pipermail/es-discuss/2012-July/023875.html\n[1] https://mail.mozilla.org/pipermail/es-discuss/2010-October/012012.html"},{"commentid":1074,"comment_count":1,"who":{"uid":"john.david.dalton","name":"John-David Dalton"},"bug_when":"2012-07-03 14:28:23 -0700","thetext":"The title should be \"Array.prototype.splice\" and not \"String.prototype.splice\"."},{"commentid":1078,"comment_count":2,"who":{"uid":"mathias","name":"Mathias Bynens"},"bug_when":"2012-07-03 22:56:34 -0700","thetext":"I’ve documented this here, for now: http://mathias.html5.org/specs/javascript/#array.prototype.splice\n\nThis can easily be fixed in the ECMAScript spec by adding an extra step to the algorithm (http://ecma-international.org/ecma-262/5.1/#sec-15.4.4.12) saying:\n\n> If `deleteCount` is `undefined`, set the value of `deleteCount` to `Infinity`."},{"commentid":1079,"comment_count":3,"who":{"uid":"mathias","name":"Mathias Bynens"},"bug_when":"2012-07-03 22:57:54 -0700","thetext":"Tests: http://mathias.html5.org/tests/javascript/array/"},{"commentid":1080,"comment_count":4,"who":{"uid":"john.david.dalton","name":"John-David Dalton"},"bug_when":"2012-07-03 23:02:17 -0700","thetext":"In Chrome at least array.splice() will return [], so stating `undefined` won't\nwork as also `array.splice(start, void 0) currently is treated as`0`. It seems\nto be only when the arguments.length of `Array#splice` is equal to 1 that the\nextension kicks in."},{"commentid":1085,"comment_count":5,"who":{"uid":"mathias","name":"Mathias Bynens"},"bug_when":"2012-07-04 00:10:03 -0700","thetext":"Good catch, JDD! Actually, another special case applies to the first argument.\n\nI guess something among the lines of the following could be added to the algorithm:\n\n1. If the `start` argument is omitted (`arguments.length == 0`), set its value to `Infinity`. \n2. If the `deleteCount` argument is omitted (`arguments.length < 2`), set its value to `Infinity`.\n\n(I’ve updated the abovementioned spec and tests.)"},{"commentid":1087,"comment_count":6,"who":{"uid":"john.david.dalton","name":"John-David Dalton"},"bug_when":"2012-07-04 00:17:20 -0700","thetext":"There is no need to address the `arguments.length` equals `0` case as the existing logic/rules in the spec cover it. For the case of `arguments.length` equals `1` the `actualDeleteCount` would be `len – actualStart`."},{"commentid":4913,"comment_count":7,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2013-08-15 16:02:21 -0700","thetext":"fixed in rev17 editor's draft"},{"commentid":5060,"comment_count":8,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2013-08-23 08:22:21 -0700","thetext":"fixed in rev17, August 23, 2013 draft"}]}}
---
