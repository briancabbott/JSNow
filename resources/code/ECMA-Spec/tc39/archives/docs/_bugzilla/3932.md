---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":3932,"creation_ts":"2015-02-14 10:09:00 -0800","short_desc":"15.1.1 Early Errors: Incomplete early error restrictions for \"super\" and \"new.target\" in eval code","delta_ts":"2015-02-19 19:10:51 -0800","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 33: February 12, 2015 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"andrebargull","name":"André Bargull"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"long_desc":[{"commentid":12670,"comment_count":0,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2015-02-14 10:09:45 -0800","thetext":"15.1.1 Static Semantics: Early Errors\n\n> It is a Syntax Error if StatementList Contains super unless\n> the source code containing super is eval code that is being\n> processed by a direct eval that is contained in function code.\n\n> It is a Syntax Error if StatementList Contains NewTarget unless\n> the source code containing NewTarget is eval code that is being\n> processed by a direct eval that is contained in function code.\n\n\n(This is probably a follow-up of bug 3844.)\n\nThe early error restrictions are incomplete for arrow functions which are not embedded in a function with a this-binding. \n\nFor example this script:\n---\n(() => eval(\"new.target\"))();\n---\n\nDoes not produce an early error with the current semantics because the eval script is executed within function code. But when `new.target` gets evaluated, 8.3.4 GetNewTarget ( ) will throw an assertion error in step 2."},{"commentid":12672,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-02-14 11:10:20 -0800","thetext":"fixed in rev34 editor's draft\nsee 15.1.1 and 14.2.3"},{"commentid":13001,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-02-19 19:10:51 -0800","thetext":"fixed in rev34"}]}}
---
