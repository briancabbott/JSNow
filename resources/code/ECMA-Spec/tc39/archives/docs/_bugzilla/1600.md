---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":1600,"creation_ts":"2013-07-28 02:02:00 -0700","short_desc":"test ch15/15.2/15.2.3/15.2.3.2/15.2.3.2-2-30.js assumes Object.getPrototypeOf returns an object","delta_ts":"2013-08-07 06:47:30 -0700","product":"Test262","component":"ECMA-262 Tests","version":"unspecified","rep_platform":"All","op_sys":"All","bug_status":"CONFIRMED","priority":"Normal","bug_severity":"minor","everconfirmed":true,"reporter":{"uid":"alan.schmitt","name":"Alan Schmitt"},"assigned_to":{"uid":"brterlso","name":"Brian Terlson"},"cc":["bruant.d","bugs.ecmascript"],"long_desc":[{"commentid":4572,"comment_count":0,"who":{"uid":"alan.schmitt","name":"Alan Schmitt"},"bug_when":"2013-07-28 02:02:25 -0700","thetext":"Test ch15/15.2/15.2.3/15.2.3.2/15.2.3.2-2-30.js tests Object.getPrototypeOf for the global object. However, it checks the returned prototype by calling isPrototypeOf on it, thus failing if it does not define it (for instance if the prototype is null, or if does not derive from the object prototype object).\n\nHere is a suggested change for the test (credits to Paul Ruizendaal who suggested it on the list):\n\nfunction testcase() {\n  var proto = Object.getPrototypeOf(fnGlobalObject());\n  return proto===null || Object.prototype.isPrototypeOf.call(proto, fnGlobalObject());\n}"},{"commentid":4727,"comment_count":1,"who":{"uid":"bruant.d","name":"David Bruant"},"bug_when":"2013-08-03 09:48:34 -0700","thetext":"I worry the global object having Object.prototype *somewhere* in its prototype chain might be required for the web."},{"commentid":4728,"comment_count":2,"who":{"uid":"alan.schmitt","name":"Alan Schmitt"},"bug_when":"2013-08-03 13:22:37 -0700","thetext":"Currently, the specification says the following for the global object (15.1):\n\n  The values of the [[Prototype]] and [[Class]] internal properties of the global object are implementation- dependent.\n\nIf constraints are assumed by web browsers, the specification may need to be changed."},{"commentid":4792,"comment_count":3,"who":{"uid":"bugs.ecmascript","name":"Michael Ficarra"},"bug_when":"2013-08-07 06:47:30 -0700","thetext":"Regardless of whether we end up changing the spec requirement for the global object's [[Prototype]], this test should be changed. Here's my suggestion:\n\nfunction testcase() {\n  var proto = {};\n  return proto === Object.getPrototypeOf(Object.create(proto)) && null === Object.getPrototypeOf(Object.create(null));\n}"}]}}
---
