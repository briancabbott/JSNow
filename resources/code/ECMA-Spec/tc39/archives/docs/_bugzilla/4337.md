---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":4337,"creation_ts":"2015-04-29 09:29:00 -0700","short_desc":"Annex E: Completion reform changes","delta_ts":"2015-10-02 13:14:02 -0700","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 38: April 14, 2015 Final Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"andrebargull","name":"André Bargull"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"long_desc":[{"commentid":14336,"comment_count":0,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2015-04-29 09:29:05 -0700","thetext":"Annex E:\n\n- Completion reform for If-Statements not listed.\n\n\n\n\n- Text for SwitchStatement incorrect:\n---\n[...]  if the last evaluated CaseClause or\nDefaultClause produces a normal completion whose value is empty, the completion value of the SwitchStatement is undefined.\n---\n\nExample:\n---\nswitch (0) {\n case 0:\n   1; // fall-thru\n case 1: \n   ; // empty statement\n}\n---\n\nLast evaluated CaseClause is \"case 1: ;\", completion value is empty, but SwitchStatement completion value is \"1\" (not undefined!).\n\n\n\n\n- Minor issue:\n---\nIn ECMAScript 2015, the normal completion value of a XXXStatement is never the value empty.\n---\nwhere XXXStatement is IterationStatement, SwitchStatement or TryStatement.\n\nThe completion value is even non-empty for abrupt completions:\n\n\n\n\n- Text for TryStatement incorrect when Finally block is present:\n---\nIf the Block part of a TryStatement evaluates to a throw completion and it has a\nCatch part that evaluates to a normal completion whose value is empty, the completion value of the TryStatement is undefined.\n---\n\nExample:\n---\ntry {\n  throw null;\n} catch (e) {\n  ; // empty\n} finally {\n  return 123;\n}"},{"commentid":14426,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-05-19 18:23:11 -0700","thetext":"fixed in rev39 publication draft"}]}}
---
