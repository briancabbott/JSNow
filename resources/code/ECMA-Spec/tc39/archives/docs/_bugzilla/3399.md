---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":3399,"creation_ts":"2014-12-03 13:40:00 -0800","short_desc":"12.1.1.1 ToDateTimeOptions: Change Throw parameter to true","delta_ts":"2015-02-09 08:28:26 -0800","product":"Internationalization - ECMA-402","component":"Specification","version":"Edition 2.0 drafts","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"andrebargull","name":"André Bargull"},"assigned_to":{"uid":"waldron.rick","name":"Rick Waldron"},"cc":"waldron.rick","long_desc":[{"commentid":10706,"comment_count":0,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2014-12-03 13:40:57 -0800","thetext":"12.1.1.1 ToDateTimeOptions, steps 7.a.i and 8.a.i:\n\nThe Throw parameter for the [[DefineOwnProperty]] calls should be changed from `false` to `true`, because\n\n1) it's more in line with other uses in ES5/6\n2) implementations (IE11, V8, SpiderMonkey) already throw.\n\n\nTest case:\n---\nvar options = {get second() {\n  Object.defineProperty(this, \"year\", {value: \"2-digit\"});\n}};\nnew Intl.DateTimeFormat(\"de\", options).format(new Date);\n---\n\nExpected (ECMA-402 1st, 2nd draft Feb 28 2013): No exception thrown\nActual (implementations): TypeError is thrown (e.g. V8 reports \"TypeError: Cannot redefine property: year\")"},{"commentid":10725,"comment_count":1,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2014-12-04 11:14:25 -0800","thetext":"Forgot to mention:\nIn ES6 terms this means using CreateDataPropertyOrThrow instead of CreateDataProperty."},{"commentid":12242,"comment_count":2,"who":{"uid":"waldron.rick","name":"Rick Waldron"},"bug_when":"2015-02-09 08:28:26 -0800","thetext":"Fixed in rev7"}]}}
---
