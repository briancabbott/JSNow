---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":335,"creation_ts":"2012-04-24 02:34:00 -0700","short_desc":"a new Object.setProperty() method","delta_ts":"2012-05-05 13:51:57 -0700","product":"Draft for 6th Edition","component":"new feature","version":"Rev 3: September 23, 2011 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"WONTFIX","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":"pincopalla00","assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"long_desc":[{"commentid":870,"comment_count":0,"who":"pincopalla00","bug_when":"2012-04-24 02:34:07 -0700","thetext":"Hello everyone!\nMy proposal is to implement a new Object method named \"setProperty\" (similar to the Object.defineProperty method) but which uses binary flags instead of a property descriptor object. Here is a possible example:\n\nhttps://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/defineProperty#Example_.232:_a_new_custom_Object.setProperty%28%29_method\n\nIt could be very a very useful possibility if you have to define many properties of an object, because the Object.defineProperty() method is very expensive of code."},{"commentid":871,"comment_count":1,"attachid":"23","who":"pincopalla00","bug_when":"2012-04-24 03:55:43 -0700","thetext":"Created attachment 23\nObject.setProperty() example"},{"commentid":872,"comment_count":2,"who":"pincopalla00","bug_when":"2012-04-24 05:13:35 -0700","thetext":"New link:\n\nhttps://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/defineProperty#Example_.232:_create_a_new_non-native_Object.setProperty%28%29_method"},{"commentid":892,"comment_count":3,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2012-05-04 14:47:01 -0700","thetext":"The bit mask was consider and not adopted during the development of ES5.  See http://wiki.ecmascript.org/lib/exe/fetch.php?id=es3.1%3Aes3.1_proposal_working_draft&cache=cache&media=es3.1:rationale_for_es3_1_static_object_methodsaug26.pdf"},{"commentid":896,"comment_count":4,"who":"pincopalla00","bug_when":"2012-05-05 13:51:57 -0700","thetext":"(In reply to comment #3)\n> The bit mask was consider and not adopted during the development of ES5.  See\n> http://wiki.ecmascript.org/lib/exe/fetch.php?id=es3.1%3Aes3.1_proposal_working_draft&cache=cache&media=es3.1:rationale_for_es3_1_static_object_methodsaug26.pdf\n\nYes, of course regarding the Object.defineProperty() method... But, what's about a new faster method, like the Object.setProperty() of my example?\n\n...when you have to define tens of new properties, the actual Object.defineProperty() method is too mutch expensive of code (I know this problem very well).\n\nThe official motivation is that a bitmask is difficult to remember... but... for a developer?? And it would be another, faster method, over and above the Object.defineProperty() method."}],"attachment":[{"_attributes":{"isobsolete":"0","ispatch":"0"},"attachid":"23","date":"2012-04-24 03:55:00 -0700","delta_ts":"2012-04-24 03:55:43 -0700","desc":"Object.setProperty() example","filename":"Object.setProperty.html","type":"text/html","size":"4298","attacher":"pincopalla00","data":{"_attributes":{"encoding":"base64"},"_text":"PCFkb2N0eXBlIGh0bWw+CjxodG1sPgo8aGVhZD4KPG1ldGEgaHR0cC1lcXVpdj0iQ29udGVudC1U\neXBlIiBjb250ZW50PSJ0ZXh0L2h0bWw7IGNoYXJzZXQ9VVRGLTgiIC8+Cjx0aXRsZT5PYmplY3Qu\nc2V0UHJvcGVydHkgbWV0aG9kPC90aXRsZT4KPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQi\nPgovKgoqIDo6IE9iamVjdC5zZXRQcm9wZXJ0eSgpIG1ldGhvZCA6OgoqCiogbk1hc2sgaXMgYSBi\naXRtYXNrOgoqICBmbGFnIDB4MTogcHJvcGVydHkgaXMgZW51bWVyYWJsZSwKKiAgZmxhZyAweDI6\nIHByb3BlcnR5IGlzIGNvbmZpZ3VyYWJsZSwKKiAgZmxhZyAweDQ6IHByb3BlcnR5IGlzIHdyaXRh\nYmxlLAoqICBmbGFnIDB4ODogcHJvcGVydHkgaXMgYWNjZXNzb3IgZGVzY3JpcHRvci4KKiBvT2Jq\nIGlzIHRoZSBvYmplY3Qgb24gd2hpY2ggdG8gZGVmaW5lIHRoZSBwcm9wZXJ0eTsKKiBzS2V5IGlz\nIHRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byBiZSBkZWZpbmVkIG9yIG1vZGlmaWVkOwoqIHZW\nYWxfZkdldCBpcyB0aGUgdmFsdWUgdG8gYXNzaWduIHRvIGEgZGF0YSBkZXNjcmlwdG9yIG9yIHRo\nZSBnZXR0ZXIgZnVuY3Rpb24gdG8gYXNzaWduIHRvIGFuIGFjY2Vzc29yIGRlc2NyaXB0b3IgKGRl\ncGVuZGluZyBvbiB0aGUgYml0bWFzayk7CiogZlNldCBpcyB0aGUgc2V0dGVyIGZ1bmN0aW9uIHRv\nIGFzc2lnbiB0byBhbiBhY2Nlc3NvciBkZXNjcmlwdG9yOwoqCiogQml0bWFzayBwb3NzaWJsZSB2\nYWx1ZXM6CioKKiAgMCAgOiByZWFkb25seSBkYXRhIGRlc2NyaXB0b3IgLSBub3QgY29uZmlndXJh\nYmxlLCBub3QgZW51bWVyYWJsZSAoMDAwMCkuCiogIDEgIDogcmVhZG9ubHkgZGF0YSBkZXNjcmlw\ndG9yIC0gbm90IGNvbmZpZ3VyYWJsZSwgZW51bWVyYWJsZSAoMDAwMSkuCiogIDIgIDogcmVhZG9u\nbHkgZGF0YSBkZXNjcmlwdG9yIC0gY29uZmlndXJhYmxlLCBub3QgZW51bWVyYWJsZSAoMDAxMCku\nCiogIDMgIDogcmVhZG9ubHkgZGF0YSBkZXNjcmlwdG9yIC0gY29uZmlndXJhYmxlLCBlbnVtZXJh\nYmxlICgwMDExKS4KKiAgNCAgOiB3cml0YWJsZSBkYXRhIGRlc2NyaXB0b3IgLSBub3QgY29uZmln\ndXJhYmxlLCBub3QgZW51bWVyYWJsZSAoMDEwMCkuCiogIDUgIDogd3JpdGFibGUgZGF0YSBkZXNj\ncmlwdG9yIC0gbm90IGNvbmZpZ3VyYWJsZSwgZW51bWVyYWJsZSAoMDEwMSkuCiogIDYgIDogd3Jp\ndGFibGUgZGF0YSBkZXNjcmlwdG9yIC0gY29uZmlndXJhYmxlLCBub3QgZW51bWVyYWJsZSAoMDEx\nMCkuCiogIDcgIDogd3JpdGFibGUgZGF0YSBkZXNjcmlwdG9yIC0gY29uZmlndXJhYmxlLCBlbnVt\nZXJhYmxlICgwMTExKS4KKiAgOCAgOiBhY2Nlc3NvciBkZXNjcmlwdG9yIC0gbm90IGNvbmZpZ3Vy\nYWJsZSwgbm90IGVudW1lcmFibGUgKDEwMDApLgoqICA5ICA6IGFjY2Vzc29yIGRlc2NyaXB0b3Ig\nLSBub3QgY29uZmlndXJhYmxlLCBlbnVtZXJhYmxlICgxMDAxKS4KKiAgMTAgOiBhY2Nlc3NvciBk\nZXNjcmlwdG9yIC0gY29uZmlndXJhYmxlLCBub3QgZW51bWVyYWJsZSAoMTAxMCkuCiogIDExIDog\nYWNjZXNzb3IgZGVzY3JpcHRvciAtIGNvbmZpZ3VyYWJsZSwgZW51bWVyYWJsZSAoMTAxMSkuCioK\nKiAgTm90ZTogSWYgdGhlIGZsYWcgMHg4IGlzIHNldHRlZCB0byAiZGF0YSBkZXNjcmlwdG9yIiB0\naGUgZlNldCBhcmd1bWVudCB3aWxsIGJlIGlnbm9yZWQuCiogICAgICAgIElmIHRoZSBmbGFnIDB4\nOCBpcyBzZXR0ZWQgdG8gImFjY2Vzc29yIGRlc2NyaXB0b3IiIHRoZSBmbGFnIDB4NCAoIndyaXRh\nYmxlIikgd2lsbCBiZSBpZ25vcmVkLgoqLwoKbmV3IChmdW5jdGlvbigpIHsKICB2YXIgb0Rlc2Mg\nPSB0aGlzOwogIE9iamVjdC5zZXRQcm9wZXJ0eSA9IGZ1bmN0aW9uIChuTWFzaywgb09iaiwgc0tl\neSwgdlZhbF9mR2V0LCBmU2V0KSB7CiAgICBpZiAobk1hc2sgJiA4KSB7CiAgICAgIC8vIGRhdGEg\nZGVzY3JpcHRvcgogICAgICBpZiAodlZhbF9mR2V0KSB7CiAgICAgICAgb0Rlc2MuZ2V0ID0gdlZh\nbF9mR2V0OwogICAgICB9IGVsc2UgewogICAgICAgIGRlbGV0ZSBvRGVzYy5nZXQ7CiAgICAgIH0K\nICAgICAgaWYgKGZTZXQpIHsKICAgICAgICBvRGVzYy5zZXQgPSBmU2V0OwogICAgICB9IGVsc2Ug\newogICAgICAgIGRlbGV0ZSBvRGVzYy5zZXQ7CiAgICAgIH0KICAgICAgZGVsZXRlIG9EZXNjLnZh\nbHVlOwogICAgICBkZWxldGUgb0Rlc2Mud3JpdGFibGU7CiAgICB9IGVsc2UgewogICAgICAvLyBh\nY2Nlc3NvciBkZXNjcmlwdG9yCiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMykgewogICAg\nICAgIG9EZXNjLnZhbHVlID0gdlZhbF9mR2V0OwogICAgICB9IGVsc2UgewogICAgICAgIGRlbGV0\nZSBvRGVzYy52YWx1ZTsKICAgICAgfQogICAgICBvRGVzYy53cml0YWJsZSA9IEJvb2xlYW4obk1h\nc2sgJiA0KTsKICAgICAgZGVsZXRlIG9EZXNjLmdldDsKICAgICAgZGVsZXRlIG9EZXNjLnNldDsK\nICAgIH0KICAgIG9EZXNjLmVudW1lcmFibGUgPSBCb29sZWFuKG5NYXNrICYgMSk7CiAgICBvRGVz\nYy5jb25maWd1cmFibGUgPSBCb29sZWFuKG5NYXNrICYgMik7CiAgICBPYmplY3QuZGVmaW5lUHJv\ncGVydHkob09iaiwgc0tleSwgb0Rlc2MpOwogIHJldHVybiBvT2JqOwogIH07Cn0pKCk7CgovLyBj\ncmVhdGluZyBhIG5ldyBlbXB0eSBvYmplY3QKdmFyIG15T2JqID0ge307CgovLyBhZGRpbmcgYSB3\ncml0YWJsZSBkYXRhIGRlc2NyaXB0b3IgLSBub3QgY29uZmlndXJhYmxlLCBub3QgZW51bWVyYWJs\nZQpPYmplY3Quc2V0UHJvcGVydHkoNCwgbXlPYmosICJteU51bWJlciIsIDI1KTsKCi8vIGFkZGlu\nZyBhIHJlYWRvbmx5IGRhdGEgZGVzY3JpcHRvciAtIG5vdCBjb25maWd1cmFibGUsIGVudW1lcmFi\nbGUKT2JqZWN0LnNldFByb3BlcnR5KDEsIG15T2JqLCAibXlTdHJpbmciLCAiSGVsbG8gd29ybGQh\nIik7CgovLyBhZGRpbmcgYW4gYWNjZXNzb3IgZGVzY3JpcHRvciAtIG5vdCBjb25maWd1cmFibGUs\nIGVudW1lcmFibGUKT2JqZWN0LnNldFByb3BlcnR5KDksIG15T2JqLCAibXlBcnJheSIsIGZ1bmN0\naW9uKCkgewogIGZvciAodmFyIGlCaXQgPSAwLCBpRmxhZyA9IDEsIGFCb29sQXJyID0gW2ZhbHNl\nXTsKICAgICAgICBpRmxhZyA8IHRoaXMubXlOdW1iZXIgKyAxIHx8ICh0aGlzLm15TnVtYmVyICYg\naUZsYWcpOyBpRmxhZyA9IGlGbGFnIDw8IDEpIHsKICAgIGFCb29sQXJyW2lCaXQrK10gPSBCb29s\nZWFuKHRoaXMubXlOdW1iZXIgJiBpRmxhZyk7CiAgfQogIHJldHVybiBhQm9vbEFycjsKfSwgZnVu\nY3Rpb24oYU5ld01hc2spIHsKICBmb3IgKHZhciBuTmV3ID0gMCwgaUJpdCA9IDA7IGlCaXQgPCBh\nTmV3TWFzay5sZW5ndGg7IGlCaXQrKykgewogICAgbk5ldyB8PSBCb29sZWFuKGFOZXdNYXNrW2lC\naXRdKSA8PCBpQml0OwogIH0KICB0aGlzLm15TnVtYmVyID0gbk5ldzsKfSk7CgovLyBhZGRpbmcg\nYSB3cml0YWJsZSBkYXRhIGRlc2NyaXB0b3IgKHVuZGVmaW5lZCB2YWx1ZSkgLSBjb25maWd1cmFi\nbGUsIGVudW1lcmFibGUKT2JqZWN0LnNldFByb3BlcnR5KDcsIG15T2JqLCAibXlVbmRlZmluZWQi\nKTsKCi8vIGFkZGluZyBhbiBhY2Nlc3NvciBkZXNjcmlwdG9yIChvbmx5IGdldHRlcikgLSBjb25m\naWd1cmFibGUsIGVudW1lcmFibGUKT2JqZWN0LnNldFByb3BlcnR5KDExLCBteU9iaiwgIm15RGF0\nZSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gbmV3IERhdGUoKTsgfSk7CgovLyBhZGRpbmcgYW4gYWNj\nZXNzb3IgZGVzY3JpcHRvciAob25seSBzZXR0ZXIpIC0gbm90IGNvbmZpZ3VyYWJsZSwgbm90IGVu\ndW1lcmFibGUKT2JqZWN0LnNldFByb3BlcnR5KDgsIG15T2JqLCAibXlBbGVydCIsIG51bGwsIGZ1\nbmN0aW9uKHNUeHQpIHsgYWxlcnQoc1R4dCk7IH0pOwoKbXlPYmoubXlBbGVydCA9IG15T2JqLm15\nRGF0ZS50b0xvY2FsZVN0cmluZygpICsgIlxuXG4iICsgbXlPYmoubXlTdHJpbmcgKwogICAgICAi\nXG5UaGUgbnVtYmVyICIgKyBteU9iai5teU51bWJlciArICIgcmVwcmVzZW50cyB0aGUgZm9sbG93\naW5nIGJpdG1hc2s6ICIgKwogICAgICBteU9iai5teUFycmF5LmpvaW4oIiwgIikgKyAiLiI7Cgov\nLyBsaXN0aW5nIHRoZSBlbnVtZXJhYmxlIHByb3BlcnRpZXMKdmFyIHNMaXN0ID0gIkhlcmUgYXJl\nIHRoZSBlbnVtZXJhYmxlIHByb3BlcnRpZXMgb2YgbXlPYmogb2JqZWN0OlxuIjsKZm9yICh2YXIg\nc1Byb3AgaW4gbXlPYmopIHsKICAgIHNMaXN0ICs9ICJcbm15T2JqLiIgKyBzUHJvcCArICIgPT4g\nIiArIG15T2JqW3NQcm9wXSArICI7Igp9CgphbGVydChzTGlzdCk7Cjwvc2NyaXB0Pgo8L2hlYWQ+\nCjxib2R5PjwvYm9keT4KPC9odG1sPgo=\n"}}]}}
---
