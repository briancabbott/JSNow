---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":2639,"creation_ts":"2014-04-11 10:17:00 -0700","short_desc":"Insufficiently severe restriction in KeyedDestructuringAssignmentEvaluation","delta_ts":"2014-04-16 09:59:48 -0700","product":"Draft for 6th Edition","component":"new feature","version":"Rev 23: April 5, 2014 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"WORKSFORME","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":{"uid":"termi1uc1","name":"Egor"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"cc":["andrebargull","mathias"],"long_desc":[{"commentid":7670,"comment_count":0,"who":{"uid":"termi1uc1","name":"Egor"},"bug_when":"2014-04-11 10:17:36 -0700","thetext":"The 12.14.5.4 section 4.b restricts Object type is only allowed in destructuring assignment.\ne.g. \n```javascript\nlet {text: {length}} = {text: \"string\"}\n```\nis invalid due this restriction.\n\nBut before 12.14.5.4 section 1 there is no such check and this code:\n```javascript\nlet {length} = \"string\"\n```\nis valid.\n\nSo I think it should be:\n12.14.5.4 Runtime Semantics: KeyedDestructuringAssignmentEvaluation\nwith parameters obj and propertyName\nAssignmentElement[Yield] : DestructuringAssignmentTarget Initializeropt\n1. If Type(obj) is not Object, then throw a TypeError exception.\n2. Let v be Get(obj, name)\n\nIMHO: this restriction is killing the free spirit of javascript"},{"commentid":7671,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-04-11 10:34:57 -0700","thetext":"see 12.14.4 step 6"},{"commentid":7746,"comment_count":2,"who":{"uid":"termi1uc1","name":"Egor"},"bug_when":"2014-04-16 05:17:10 -0700","thetext":"@Allen Wirfs-Brock\n> see 12.14.4 step 6\nstep 6 in wich section?\n\"AssignmentExpression[In, Yield] : LeftHandSideExpression[?Yield] = AssignmentExpression[?In, ?Yield]\" or in \"AssignmentExpression : LeftHandSideExpression AssignmentOperator AssignmentExpression\" ?\nNeither of them does not fit the:\n```javascript\nlet {length} = \"string\";\n```"},{"commentid":7749,"comment_count":3,"who":{"uid":"andrebargull","name":"Andr√© Bargull"},"bug_when":"2014-04-16 09:56:34 -0700","thetext":"\"12.14.5 Destructuring Assignment\" does not apply to `let {...} = ...`. Instead you need to look at \"13.2.3 Destructuring Binding Patterns\".\n\n`let {text: {length}} = {text: \"string\"}` throws a TypeError per \"13.2.3.7 Runtime Semantics: KeyedBindingInitialization\".\n\n`let {length} = \"string\"` throws a TypeError per \"13.2.1.4 Runtime Semantics: Evaluation\"."}]}}
---
