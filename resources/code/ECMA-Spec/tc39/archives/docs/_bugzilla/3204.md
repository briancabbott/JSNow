---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":3204,"creation_ts":"2014-08-30 06:28:00 -0700","short_desc":"B.3.3  Block-Level Function Declarations: Missing variable binding when parameter with same name as function is present","delta_ts":"2014-10-14 15:17:44 -0700","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 27: August 24, 2014 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"andrebargull","name":"André Bargull"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"long_desc":[{"commentid":10065,"comment_count":0,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2014-08-30 06:28:22 -0700","thetext":"B.3.3  Block-Level Function Declarations Web Legacy Compatibility Semantics \n\nThe resolution for bug 3047 is incorrect, excluding parameterNames in step 2.a.ii leads to an assertion in this code:\n---\nfunction f(g=0) { { function g(){} } } f()\n---\n\nWhen step 2.b.5 calls SetMutableBinding, no binding is present, so the assertion in SetMutableBinding fails."},{"commentid":10092,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-08-30 16:42:05 -0700","thetext":"(In reply to André Bargull from comment #0)\n\n> ---\n> function f(g=0) { { function g(){} } } f()\n> ---\n\nNote that your use of f and g in the test case is reversed form the usage in B.3.3.  the test would be easier to related to the algorithm if you wrote it as:\n\nfunction g(f=0) { { function f(){} } } g()"},{"commentid":10093,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-08-30 16:49:08 -0700","thetext":"fixed in rev28 editor's draft.\n\nIf an otherwise eligible inner function has the same name is a formal parameter then we should be doing this hack at all, as that case does have interoperable legacy web semantics.\n\nSo, the fix is to back out the change done for bug 3027 and to add an additional predicate to step 2: \"and F is not an element of BoundNames of FormalParameters of g\""},{"commentid":10382,"comment_count":3,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-10-14 15:17:44 -0700","thetext":"fixed in rev28"}]}}
---
