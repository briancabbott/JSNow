---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":1574,"creation_ts":"2013-07-03 14:59:00 -0700","short_desc":"15.10.2 summary of \"web reality\" regexp syntax extensions","delta_ts":"2013-10-29 12:12:15 -0700","product":"Draft for 6th Edition","component":"normative change from ES5.x","version":"Rev 15: May 14, 2013 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":"pruiz9999","assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"long_desc":[{"commentid":4350,"comment_count":0,"who":"pruiz9999","bug_when":"2013-07-03 14:59:16 -0700","thetext":"There has been plenty of discussion of \"web reality\" syntax extensions to the ES5.1 regexp syntax. Over the past few years the main browsers seem to have mostly converged on how to interpret malformed patterns.\n\nThere seem to be 5 \"web reality\" extensions:\n- Handling of malformed {n,m} quantifiers\n- Look ahead assertions quantifiable\n- Octal escapes and their interaction with Decimal escapes (back references)\n- Malformed class ranges\n- Malformed control escapes (\\cA)\n\nRather than a lengthy prose description, I currently find that the Yarr parser\nhttps://github.com/WebKit/webkit/blob/master/Source/JavaScriptCore/yarr/YarrParser.h\ncaptures the \"web reality\" extensions as implemented by IE, FF, Chrome and Safari, and that in less than 1000 lines of heavily commented code.\n\nIn this area, there seems to be only one browser disagreement left:\n- FF and Safari accept the octal escape \\0000 as identical to \\0\n- Chrome and IE understand \\0000 as \\000 (i.e. \\0) followed by '0'\nThe latter implementation seems to make more sense, as it matches with the handling of octal escapes in strings in all 4 browsers. The Yarr parser implements the former."},{"commentid":4385,"comment_count":1,"who":"pruiz9999","bug_when":"2013-07-12 14:28:36 -0700","thetext":"The handling of \\0000 seems to be a Yarr implementation bug:\n- Yarr limits octals to \\0377\n- Pre-yarr Firefox has the same behaviour as IE and Chrome today"},{"commentid":4386,"comment_count":2,"who":"pruiz9999","bug_when":"2013-07-12 14:47:14 -0700","thetext":"There is another difference: the handling of \\8 and \\9 in patterns when there is no eighth or ninth capture:\n- IE and Chrome say \\8 equals '8' (identity escape, as in literal strings)\n- Safari and FF say \\8 equals '\\' + '8' (malformed pattern taken as literal atoms)\n\nIn this case it is not a Yarr issue, as pre-yarr FF handles this the same way as current FF. I guess either interpretation could be argued to conform to the principle of least surprise. \n\nMy gut feel is that this pattern is very rarely seen in \"web reality\", but I have no data to support this."},{"commentid":6181,"comment_count":3,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2013-10-29 12:12:15 -0700","thetext":"Rev20 Annex B now contains the \"web reality\" spec. prepared by Luke Hoban http://wiki.ecmascript.org/doku.php?id=strawman:match_web_reality_spec \n\nIf you see any issue with it you should report them as separate bugs."}]}}
---
