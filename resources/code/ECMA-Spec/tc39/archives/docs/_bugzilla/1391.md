---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":1391,"creation_ts":"2013-03-22 14:09:00 -0700","short_desc":"A bound function should have [[Construct]] only if the target function has [[Construct]]","delta_ts":"2013-07-15 17:03:49 -0700","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 13: December 21, 2012 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":{"uid":"jorendorff","name":"Jason Orendorff"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"long_desc":[{"commentid":3547,"comment_count":0,"who":{"uid":"jorendorff","name":"Jason Orendorff"},"bug_when":"2013-03-22 14:09:21 -0700","thetext":"With proxies, a program can test whether an object has [[Construct]] or not.\n\n  function hasConstruct(f) {\n      var p = new Proxy(f, {construct: () => { throw true }});\n      try {\n          new p;  // handler.construct hook fires iff f has [[Construct]]\n      } catch (exc) {\n          return exc === true;\n      }\n  }\n\n  hasConstruct(function () {});   // true\n  hasConstruct(a => a);           // false (true in Firefox, a bug)\n  hasConstruct(Math.sin);         // false (true in Firefox, a bug)\n\nThe way the spec is currently written, *all* bound functions have [[Construct]].\n\n  hasConstruct(function () {}.bind());   // true\n  hasConstruct((a => a).bind());         // true (I propose making it false)\n  hasConstruct(Math.sin.bind());         // true (I propose making it false)\n\nI think it's more sensible for a bound function to be a constructor only if the target function is."},{"commentid":4337,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2013-06-30 13:32:16 -0700","thetext":"fixed in rev16 editor's draft"},{"commentid":4448,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2013-07-15 17:03:49 -0700","thetext":"fixed in rev16 draft.  July 15, 2013"}]}}
---
