---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":756,"creation_ts":"2012-10-07 10:49:00 -0700","short_desc":"built-in [[Construct]] behavior: recast as algorithms","delta_ts":"2013-10-22 18:50:25 -0700","product":"Draft for 6th Edition","component":"editorial issue","version":"Rev 10: September 27, 2012 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":{"uid":"jmdyck","name":"Michael Dyck"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"long_desc":[{"commentid":1888,"comment_count":0,"who":{"uid":"jmdyck","name":"Michael Dyck"},"bug_when":"2012-10-07 10:49:16 -0700","thetext":"Within section 15, I'm looking at the sections with titles like \"new Foo(...)\", i.e. the sections that define the behaviour that is bound to the [[Construct]] internal property of built-in constructor-objects.\n\nFor some of these, the behavior is given as an algorithm:\n    15.2.2.1  new Object ( [ value ] )\n    15.3.2.1  new Function (p1, p2, ..., pn, body)\n    15.4.2.1  new Array ( [ item0 [ , item1 [ , ... ] ] ] )\n    15.4.2.2  new Array (len)\n    15.14.3.1 new Map (iterable = [ ])\n\nFor the rest, the behaviour is given in prose, but could be straightforwardly recast as an algorithm.\n\n---\n\nFor instance,\n    15.5.2.1 new String ( [ value ] )\ncould say (something like):\n    1. Let /S/ be a newly created ECMAScript object.\n    2. Set the [[Prototype]] internal property of /S/ to the standard\n       built-in String prototype object that is the initial value of\n       String.prototype (15.5.3.1).\n    3. Set the [[NativeBrand]] internal property of /S/ to StringWrapper.\n    4. Set the [[Extensible]] internal property of /S/ to true.\n    5. Set the [[PrimitiveValue]] internal property of /S/ to\n       ToString(/value/), or to the empty String if /value/ is not supplied.\n    6. Return /S/\n\nAs an algorithm, the behavior is more concrete and more uniformly expressed. It also clarifies that this method is responsible for creating (and returning) the object. (The existing prose simply refers to \"the newly constructed object\", which isn't very clear.)\n\n---\n\nIn a few cases:\n    15.9.3.1 new Date (year, month [, date [, hours etc )\n    15.9.3.2 new Date (value)\n    15.13.6.2.1 new TypeArray(arg0 [, arg1 [, arg2 ] )\n    15.13.7.2.1 new DataView(buffer [, byteOffset [, byteLength]])\nthe [[Construct]] behavior is currently given partly in prose and partly in algorithm; here, the prose parts could be recast as steps and added to the algorithm.\n\nAlso, in\n    15.10.4.1 new RegExp(pattern, flags)\nthe behavior is given as an algorithm, but it's a single step that just calls RegExpCreate, and the latter is expressed in prose. But it looks like the prose could be fairly easily recast as an algorithm."},{"commentid":5959,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2013-10-22 18:50:25 -0700","thetext":"there has been a general rewrite of all built-in constructor definitions"}]}}
---
