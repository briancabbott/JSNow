---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":75,"creation_ts":"2011-03-16 12:49:00 -0700","short_desc":"S15.4.4.5 should ensure steps 5 and 6 are executed in correct order","delta_ts":"2012-01-13 15:15:53 -0800","product":"Test262","component":"ECMA-262 Tests","version":"unspecified","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":{"uid":"andrebargull","name":"André Bargull"},"assigned_to":{"uid":"erights","name":"Mark S. Miller"},"cc":"dfugate","long_desc":[{"commentid":161,"comment_count":0,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2011-03-16 12:49:49 -0700","thetext":"S15.4.4.5_A3.1_T2 tests the execution of step 5 with different objects than strings. However it does not ensure steps 5 and 6 of the algorithm are executed in exactly this order:\n---\n5.  Let sep be ToString(separator).\n6.  If len is zero, return the empty String. \n---\n\nImplementors may try to skip step 5 if the length is zero instead of calling ToString(separator), which may trigger side effects. For example Opera skips step 5 in this case.\n\nSimple test case to cover this scenario:\n---\ntry {\n   var object = {toString: function() {throw \"error\"}};\n   [].join(object);\n   $ERROR('#X.X: var object = {toString: function() {throw \"error\"}}; [].join(object) throw \"error\". Actual: ' + ([].join(object)));\n }\n catch (e) {\n   if (e !== \"error\") {\n      $ERROR('#X.X: var object = {toString: function() {throw \"error\"}}; [].join(object) throw \"error\". Actual: ' + (e));\n   }\n}\n---"},{"commentid":273,"comment_count":1,"who":{"uid":"dfugate","name":"Dave Fugate"},"bug_when":"2011-07-07 08:14:41 -0700","thetext":"Mark, sounds like the test here is valid; just needs to be made a bit more accurate."},{"commentid":602,"comment_count":2,"who":{"uid":"dfugate","name":"Dave Fugate"},"bug_when":"2012-01-13 15:15:53 -0800","thetext":"Done."}]}}
---
