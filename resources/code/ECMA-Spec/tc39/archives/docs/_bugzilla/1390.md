---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":1390,"creation_ts":"2013-03-22 10:39:00 -0700","short_desc":"Wrong [[Scope]] for eval'ed function declarations","delta_ts":"2013-03-22 10:39:56 -0700","product":"ECMA-262, Editions 5 and 5.1","component":"technical content","version":"Edition 5.1","rep_platform":"All","op_sys":"All","bug_status":"CONFIRMED","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":{"uid":"andrebargull","name":"André Bargull"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"long_desc":[{"commentid":3546,"comment_count":0,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2013-03-22 10:39:56 -0700","thetext":"The following test cases should both yield \"inner\" per ES3. ES5 changed this to \"outer\", because FunctionDeclarations always receive the VariableEnvironment of the current execution context instead of the LexicalEnvironment.\n\n---\n(function(){\n  var x = 'outer';\n  try {\n    throw 'inner'\n  } catch(x) {\n    return eval(\"function f(){ return x } f()\")\n  }\n})()\n\n\n(function(){\n  var x = 'outer';\n  with({x:'inner'}) {\n    return eval(\"function f(){ return x } f()\")\n  }\n})()\n---"}]}}
---
