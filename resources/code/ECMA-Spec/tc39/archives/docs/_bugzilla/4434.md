---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":4434,"creation_ts":"2015-08-05 12:40:00 -0700","short_desc":"[21.2.5.11 RegExp.prototype [ @@split ]: Missing Boundary Check","delta_ts":"2015-11-02 18:01:05 -0800","product":"ECMA-262 Edition 6","component":"technical issues","version":"unspecified","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":"mike","assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"cc":"brterlso","long_desc":[{"commentid":14590,"comment_count":0,"who":"mike","bug_when":"2015-08-05 12:40:08 -0700","thetext":"Step 25 reads:\n\n> Let T be a String value equal to the substring of S consisting of the\n> elements at indices p (inclusive) through size (exclusive).\n\nIn the case where there is a successful match against a non-empty `string`\nargument, the value of `p` can be traced through the following steps:\n\n> 19. Let size be the number of elements in S.\n> 20. Let p be 0.\n> [...]\n> 23. Let q be p.\n> 24. Repeat, while q < size\n>     [...]\n>     c. Let z be RegExpExec(splitter, S).\n>     [...]\n>     f. Else z is not null,\n>        i. Let e be ToLength(Get(splitter, \"lastIndex\")).\n>        ii. ReturnIfAbrupt(e).\n>        [...]\n>        iv. Else e â‰  p,\n>            [...]\n>            6. Let p be e.\n>            [...]\n>            12. Let q be p.\n> 25. (see above)\n\nBecause RegExpExec defers to the user-defined `exec` method where present, `e`\nmay take any value at 24.f.i (as suggested by the ReturnIfAbrupt in the\nfollowing step). This will also be the value of `p` as the algorithm approaches\ncompletion. The ToLength abstract operation ensures that `p` is greater than or\nequal to zero, but there is no guarantee that it will be less than the value of\n`size`. The specification does not include any detail about how the host should\nbehave if the value is out-of-bounds here. Maybe a RangeError is appropriate?\n\nExample code:\n\n    var obj = {\n      constructor: function() {}\n    };\n    var fakeRe = {\n      exec: function() {\n        fakeRe.lastIndex = 999;\n        return [];\n      }\n    };\n    obj.constructor[Symbol.species] = function() {\n      return fakeRe;\n    };\n    RegExp.prototype[Symbol.split].call(obj, 'a');"},{"commentid":14882,"comment_count":1,"who":{"uid":"brterlso","name":"Brian Terlson"},"bug_when":"2015-11-02 18:01:05 -0800","thetext":"Fixed in ES2016 Draft (08b4756)."}]}}
---
