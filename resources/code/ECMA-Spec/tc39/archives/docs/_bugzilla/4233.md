---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":4233,"creation_ts":"2015-03-27 07:57:00 -0700","short_desc":"22.1.3.24 Array.prototype.sort: Property keys beyond array index limit and \"sparse\" for non-Array objects?","delta_ts":"2015-04-03 12:35:32 -0700","product":"Draft for 6th Edition","component":"technical issue","version":"Rev 36: March 17, 2015 Release Candidate 3","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"andrebargull","name":"André Bargull"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"long_desc":[{"commentid":13950,"comment_count":0,"who":{"uid":"andrebargull","name":"André Bargull"},"bug_when":"2015-03-27 07:57:35 -0700","thetext":"22.1.3.24 Array.prototype.sort (comparefn)\n\n> Within this specification of the sort method, an Array object, obj, is said to be sparse [...]\n\nBut later \"sparse\" is also used for non-Array objects. If sparse is extended to non-Array objects, ToUint32 needs to be changed to ToLength.\n\n\n> The sort order is the ordering of the array index property values of obj after completion of this function.\n\nPer 6.1.7 The Object Type, third paragraph:\n> An array index is an integer index whose numeric value i is in the range +0 ≤ i < 2^32-1.\n\nBut the sort method sorts all integer indexed properties < 2^53-1, that means property keys beyond the array index limit.\n\n\nSimilar issue in:\n> Any array index property of obj whose name is a nonnegative integer less than len is a data \n> property whose [[Configurable]] attribute is false.\n\nAnd:\n> If any array index property of obj whose name is a nonnegative integer less than len is an\n> accessor property or is a data property whose [[Writable]] attribute is false."},{"commentid":13997,"comment_count":1,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-04-01 11:49:20 -0700","thetext":"fixed in rev37 editor's draft\n\nreplaces uses of \"array index\" within sort with \"integer index\"\n\nmade the definition of sparse dependent upon len value.\n\nSince that definition of \"sparse\" is only for use within the sort method, the other uses of \"sparse\" (all within typed array section) can be interpreted using the conventional technical meaning of the term. (If I had more time, I might get more explicit about that, but I don't think it is likely to cause confusion)"},{"commentid":14059,"comment_count":2,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-04-03 12:35:32 -0700","thetext":"In Rev37"}]}}
---
