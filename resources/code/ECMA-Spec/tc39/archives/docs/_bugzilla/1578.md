---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":1578,"creation_ts":"2013-07-14 00:45:00 -0700","short_desc":"Add some tests for frozen arrays and non-extensible objects.","delta_ts":"2014-07-17 23:20:31 -0700","product":"Test262","component":"ECMA-262 Tests","version":"unspecified","rep_platform":"All","op_sys":"All","bug_status":"CONFIRMED","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":{"uid":"jasvir","name":"Jasvir Nagra"},"assigned_to":{"uid":"brterlso","name":"Brian Terlson"},"cc":["erights","sam.mikes"],"long_desc":[{"commentid":4387,"comment_count":0,"attachid":"67","who":{"uid":"jasvir","name":"Jasvir Nagra"},"bug_when":"2013-07-14 00:45:37 -0700","thetext":"Created attachment 67\nTests for frozen arrays and non-extensible objects\n\nAdds tests:\n* to S8.6.2 that non-extensible objects cannot be mutated using defineProperty.\n* to S15.4.4.6 that a frozen array cannot be modified by pop().\n\nPatch also uploaded to http://codereview.appspot.com/11249043 for easier review."},{"commentid":4388,"comment_count":1,"who":{"uid":"erights","name":"Mark Miller"},"bug_when":"2013-07-15 06:54:42 -0700","thetext":"LGTM. See my comments on the codereview site."},{"commentid":4389,"comment_count":2,"who":{"uid":"brterlso","name":"Brian Terlson"},"bug_when":"2013-07-15 10:41:46 -0700","thetext":"LGTM, although the location of the __proto__ tests is suspicious. Should the __proto__ tests be put into an AnnexB folder maybe?"},{"commentid":4390,"comment_count":3,"who":{"uid":"erights","name":"Mark Miller"},"bug_when":"2013-07-15 10:59:51 -0700","thetext":"(In reply to comment #2)\n> LGTM, although the location of the __proto__ tests is suspicious. Should the\n> __proto__ tests be put into an AnnexB folder maybe?\n\nAs of ES5 the existence of __proto__ is non-normative, so this would seem attractive. However, the requirement that non-extensible objects cannot have their [[Prototype]] mutated is normative. This test tests for a violation of that requirement, so I think it is in the right place."},{"commentid":4537,"comment_count":4,"who":{"uid":"brterlso","name":"Brian Terlson"},"bug_when":"2013-07-16 17:11:22 -0700","thetext":"Ok, I agree that makes sense Mark. In that case, please make these tests strict-mode only (add \"use strict\" directive, and there's also an @onlyStrict attribute). Non-strict assignment to non-extensible object shouldn't throw I believe."},{"commentid":4538,"comment_count":5,"who":{"uid":"erights","name":"Mark Miller"},"bug_when":"2013-07-16 17:19:59 -0700","thetext":"Good point about non-strict. Yes, these tests should be @onlyStrict."},{"commentid":9255,"comment_count":6,"who":{"uid":"sam.mikes","name":"Sam Mikes"},"bug_when":"2014-07-17 23:20:31 -0700","thetext":"As of 2014-Jul-18, these tests are not in test262.\n\nI would be willing to convert the patch into a github pull request."}],"attachment":[{"_attributes":{"isobsolete":"0","ispatch":"0"},"attachid":"67","date":"2013-07-14 00:45:00 -0700","delta_ts":"2013-07-14 00:45:37 -0700","desc":"Tests for frozen arrays and non-extensible objects","filename":"extensible-262.patch","type":"application/octet-stream","size":"5538","attacher":{"_attributes":{"name":"Jasvir Nagra"},"_text":"jasvir"},"data":{"_attributes":{"encoding":"base64"},"_text":"ZGlmZiAtciBkMDY3ZDJmMGNhMzAgdGVzdC9zdWl0ZS9jaDA4LzguNi84LjYuMi9TOC42LjJfQTgu\nanMKLS0tIGEvdGVzdC9zdWl0ZS9jaDA4LzguNi84LjYuMi9TOC42LjJfQTguanMJVGh1IEp1biAx\nMyAxMDowNzo0NSAyMDEzIC0wNDAwCisrKyAvZGV2L251bGwJVGh1IEphbiAwMSAwMDowMDowMCAx\nOTcwICswMDAwCkBAIC0xLDIyICswLDAgQEAKLS8vIENvcHlyaWdodCAyMDExIEdvb2dsZSBJbmMu\nICBBbGwgcmlnaHRzIHJlc2VydmVkLgotLy8gVGhpcyBjb2RlIGlzIGdvdmVybmVkIGJ5IHRoZSBC\nU0QgbGljZW5zZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlLgotCi0vKioKLSAqIEBwYXRoIGNo\nMDgvOC42LzguNi4yL1M4LjYuMl9BOC5qcwotICogQGRlc2NyaXB0aW9uIEl0IHNob3VsZCBub3Qg\nYmUgcG9zc2libGUgdG8gY2hhbmdlIHRoZSBbW1Byb3RvdHlwZV1dCi0gKiBvZiBhIG5vbi1leHRl\nbnNpYmxlIG9iamVjdAotICovCi0KLXZhciB4ID0gT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKHt9\nKTsKLXZhciB5ID0ge307Ci10cnkgewotICB4Ll9fcHJvdG9fXyA9IHk7Ci19IGNhdGNoIChlcnIp\nIHsKLSAgLy8gQXMgZmFyIGFzIHRoaXMgdGVzdCBpcyBjb25jZXJuZWQsIHdlIGFsbG93IHRoZSBh\nYm92ZSBhc3NpZ25tZW50Ci0gIC8vIHRvIGZhaWwuIFRoaXMgZmFpbHVyZSBkb2VzIHZpb2xhdGUg\ndGhlIHNwZWMgYW5kIHNob3VsZCBwcm9iYWJseQotICAvLyBiZSB0ZXN0ZWQgc2VwYXJhdGVseS4K\nLX0KLWlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YoeCkgIT09IE9iamVjdC5wcm90b3R5cGUpIHsK\nLSAgJEVSUk9SKCJQcm90b3R5cGUgb2Ygbm9uLWV4dGVuc2libGUgb2JqZWN0IG11dGF0ZWQiKTsK\nLX0KLQpkaWZmIC1yIGQwNjdkMmYwY2EzMCB0ZXN0L3N1aXRlL2NoMDgvOC42LzguNi4yL1M4LjYu\nMl9BOF9UMS5qcwotLS0gL2Rldi9udWxsCVRodSBKYW4gMDEgMDA6MDA6MDAgMTk3MCArMDAwMAor\nKysgYi90ZXN0L3N1aXRlL2NoMDgvOC42LzguNi4yL1M4LjYuMl9BOF9UMS5qcwlTdW4gSnVsIDE0\nIDAwOjQ0OjI5IDIwMTMgLTA3MDAKQEAgLTAsMCArMSw0NiBAQAorLy8gQ29weXJpZ2h0IDIwMTEg\nR29vZ2xlIEluYy4gIEFsbCByaWdodHMgcmVzZXJ2ZWQuCisvLyBUaGlzIGNvZGUgaXMgZ292ZXJu\nZWQgYnkgdGhlIEJTRCBsaWNlbnNlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUuCisKKy8qKgor\nICogQHBhdGggY2gwOC84LjYvOC42LjIvUzguNi4yX0E4X1QxLmpzCisgKiBAZGVzY3JpcHRpb24g\nSXQgc2hvdWxkIG5vdCBiZSBwb3NzaWJsZSB0byBjaGFuZ2UgdGhlIFtbUHJvdG90eXBlXV0KKyAq\nIG9mIGEgbm9uLWV4dGVuc2libGUgb2JqZWN0IGJ5IGRpcmVjdCBhc3NpZ25tZW50IHRvIF9fcHJv\ndG9fXy4KKyAqLworCit2YXIgeCA9IE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucyh7fSk7Cit2YXIg\neSA9IHt9OwordmFyIHRocm93bkVycm9yID0gdW5kZWZpbmVkOwordHJ5IHsKKyAgeC5fX3Byb3Rv\nX18gPSB5OworfSBjYXRjaCAoZXJyKSB7CisgIHRocm93bkVycm9yID0gZXJyOworfQorCisvLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8KKy8vQ0hFQ0sjMQoraWYgKE9iamVjdC5nZXRQcm90b3R5cGVPZih4\nKSAhPT0gT2JqZWN0LnByb3RvdHlwZSkgeworICAkRVJST1IoIlByb3RvdHlwZSBvZiBub24tZXh0\nZW5zaWJsZSBvYmplY3QgbXV0YXRlZCIpOworfQorLy8KKy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwor\nCisvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KKy8vQ0hFQ0sjMgoraWYgKHZvaWQgMCA9PT0gdGhyb3du\nRXJyb3IpIHsKKyAgJEVSUk9SKCdNdXRhdGluZyBwcm90b3R5cGUgb2Ygbm9uLWV4dGVuc2libGUg\nb2JqZWN0IHdpdGggYXNzaWdubWVudCBkaWQgJworICAgICsgJ25vdCB0aHJvdyBhbiBlcnJvcicp\nOworfQorLy8KKy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLworCisvLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8K\nKy8vQ0hFQ0sjMworaWYgKCEodGhyb3duRXJyb3IgaW5zdGFuY2VvZiBUeXBlRXJyb3IpKSB7Cisg\nICRFUlJPUignTXV0YXRpbmcgcHJvdG90eXBlIG9mIG5vbi1leHRlbnNpYmxlIG9iamVjdCB3aXRo\nIGFzc2lnbm1lbnQgdGhyZXcgJworICAgICsgJ2FuIHVudXN1YWwgZXJyb3InKTsKK30KKy8vCisv\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8KKworCisKZGlmZiAtciBkMDY3ZDJmMGNhMzAgdGVzdC9zdWl0\nZS9jaDA4LzguNi84LjYuMi9TOC42LjJfQThfVDIuanMKLS0tIC9kZXYvbnVsbAlUaHUgSmFuIDAx\nIDAwOjAwOjAwIDE5NzAgKzAwMDAKKysrIGIvdGVzdC9zdWl0ZS9jaDA4LzguNi84LjYuMi9TOC42\nLjJfQThfVDIuanMJU3VuIEp1bCAxNCAwMDo0NDoyOSAyMDEzIC0wNzAwCkBAIC0wLDAgKzEsNDUg\nQEAKKy8vIENvcHlyaWdodCAyMDEzIEdvb2dsZSBJbmMuICBBbGwgcmlnaHRzIHJlc2VydmVkLgor\nLy8gVGhpcyBjb2RlIGlzIGdvdmVybmVkIGJ5IHRoZSBCU0QgbGljZW5zZSBmb3VuZCBpbiB0aGUg\nTElDRU5TRSBmaWxlLgorCisvKioKKyAqIEBwYXRoIGNoMDgvOC42LzguNi4yL1M4LjYuMl9BOF9U\nMi5qcworICogQGRlc2NyaXB0aW9uIEl0IHNob3VsZCBub3QgYmUgcG9zc2libGUgdG8gY2hhbmdl\nIHRoZSBbW1Byb3RvdHlwZV1dCisgKiBvZiBhIG5vbi1leHRlbnNpYmxlIG9iamVjdCB1c2luZyBP\nYmplY3QuZGVmaW5lUHJvcGVydHkuCisgKi8KKwordmFyIHggPSBPYmplY3QucHJldmVudEV4dGVu\nc2lvbnMoe30pOwordmFyIHkgPSB7fTsKK3ZhciB0aHJvd25FcnJvciA9IHVuZGVmaW5lZDsKK3Ry\neSB7CisgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh4LCAnX19wcm90b19fJywgeyB2YWx1ZTogeSB9\nKTsKK30gY2F0Y2ggKGVycikgeworICB0aHJvd25FcnJvciA9IGVycjsKK30KKworLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vCisvL0NIRUNLIzEKK2lmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YoeCkgIT09\nIE9iamVjdC5wcm90b3R5cGUpIHsKKyAgJEVSUk9SKCJQcm90b3R5cGUgb2Ygbm9uLWV4dGVuc2li\nbGUgb2JqZWN0IG11dGF0ZWQiKTsKK30KKy8vCisvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KKworLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vCisvL0NIRUNLIzIKK2lmICgndW5kZWZpbmVkJyA9PT0gdHlwZW9m\nIHRocm93bkVycm9yKSB7CisgICRFUlJPUignTXV0YXRpbmcgcHJvdG90eXBlIG9mIG5vbi1leHRl\nbnNpYmxlIG9iamVjdCB3aXRoICcKKyAgICArICdPYmplY3QuZGVmaW5lUHJvcGVydHkgZGlkIG5v\ndCB0aHJvdyBhbiBlcnJvcicpOworfQorLy8KKy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLworCisvLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8KKy8vQ0hFQ0sjMworaWYgKCEodGhyb3duRXJyb3IgaW5zdGFuY2Vv\nZiBUeXBlRXJyb3IpKSB7CisgICRFUlJPUignTXV0YXRpbmcgcHJvdG90eXBlIG9mIG5vbi1leHRl\nbnNpYmxlIG9iamVjdCB3aXRoICcKKyAgICArICdPYmplY3QuZGVmaW5lUHJvcGVydHkgdGhyZXcg\nYW4gdW51c3VhbCBlcnJvcicpOworfQorLy8KKy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLworCisKZGlm\nZiAtciBkMDY3ZDJmMGNhMzAgdGVzdC9zdWl0ZS9jaDE1LzE1LjQvMTUuNC40LzE1LjQuNC42L1Mx\nNS40LjQuNl9BNl9UMS5qcwotLS0gL2Rldi9udWxsCVRodSBKYW4gMDEgMDA6MDA6MDAgMTk3MCAr\nMDAwMAorKysgYi90ZXN0L3N1aXRlL2NoMTUvMTUuNC8xNS40LjQvMTUuNC40LjYvUzE1LjQuNC42\nX0E2X1QxLmpzCVN1biBKdWwgMTQgMDA6NDQ6MjkgMjAxMyAtMDcwMApAQCAtMCwwICsxLDQxIEBA\nCisvLyBDb3B5cmlnaHQgMjAxMyBHb29nbGUgSW5jLiAgQWxsIHJpZ2h0cyByZXNlcnZlZC4KKy8v\nIFRoaXMgY29kZSBpcyBnb3Zlcm5lZCBieSB0aGUgQlNEIGxpY2Vuc2UgZm91bmQgaW4gdGhlIExJ\nQ0VOU0UgZmlsZS4KKworLyoqCisgKiBBcnJheS5wb3AoKSBvZiBhIGZyb3plbiBhcnJheSBzaG91\nbGQgbm90IG1vZGlmeSB0aGUgYXJyYXkuCisgKgorICogQHBhdGggY2gxNS8xNS40LzE1LjQuNC8x\nNS40LjQuNi9TMTUuNC40LjZfQTZfVDEuanMKKyAqIEBkZXNjcmlwdGlvbiBDYWxsIHRoZSBbW0Rl\nbGV0ZV1dIGludGVybmFsIG1ldGhvZCBvZiBPIHdpdGggYXJndW1lbnRzIGluZHgKKyAqIGFuZCB0\ncnVlIHdoaWNoIGluIHR1cm4gbXVzdCB0aHJvdyBhIFR5cGVFcnJvciBleGNlcHRpb24gaWYKKyAq\nIGRlc2MuW1tDb25maWd1cmFibGVdXSBpcyBmYWxzZS4KKyAqLworCit2YXIgb2JqID0gWzEsMl07\nCitPYmplY3QuZnJlZXplKG9iaik7Cit2YXIgdGhyb3dzRXJyb3IgPSBmYWxzZTsKK3RyeSB7Cisg\nIG9iai5wb3AoKTsKK30gY2F0Y2ggKGUpIHsKKyAgdGhyb3dzRXJyb3IgPSB0cnVlOworfQorCisv\nL0NIRUNLIzEKK2lmICghdGhyb3dzRXJyb3IpIHsKKyAgJEVSUk9SKCcjMDogQ2FsbGluZyBwb3Ao\nKSBvbiBhIGZyb3plbiBhcnJheSBkaWQgbm90IHRocm93IGFuIGVycm9yJyk7Cit9CisKKy8vQ0hF\nQ0sjMgoraWYgKG9iai5sZW5ndGggIT09IDIpIHsKKyAgJEVSUk9SKCcjMTogdmFyIG9iaiA9IFsx\nLDJdOyBPYmplY3QuZnJlZXplKG9iaik7IG9iai5wb3AoKTsgJworICAgICsgJ29iai5sZW5ndGgg\nPT09IDIuIEFjdHVhbDogJyArIChvYmoubGVuZ3RoKSk7Cit9CisvL0NIRUNLIzMKK2lmICh4WzBd\nICE9PSAxKSB7CisgICRFUlJPUignIzI6IHZhciBvYmogPSBbMSwyXTsgT2JqZWN0LmZyZWV6ZShv\nYmopOyBvYmoucG9wKCk7ICcKKyAgICArICdvYmpbMF0gPT09IDEuIEFjdHVhbDogJyArIChvYmpb\nMF0pKTsKK30KKy8vQ0hFQ0sjNAoraWYgKHhbMV0gIT09IDIpIHsKKyAgJEVSUk9SKCcjMzogdmFy\nIG9iaiA9IFsxLDJdOyBPYmplY3QuZnJlZXplKG9iaik7IG9iai5wb3AoKTsgJworICAgICsgJ29i\nalsxXSA9PT0gMi4gQWN0dWFsOiAnICsgKG9ialsxXSkpOworfQpcIE5vIG5ld2xpbmUgYXQgZW5k\nIG9mIGZpbGUK\n"}}]}}
---
