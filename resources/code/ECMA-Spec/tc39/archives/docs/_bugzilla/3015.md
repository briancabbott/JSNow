---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":3015,"creation_ts":"2014-07-21 12:31:00 -0700","short_desc":"Default iterator for generators?","delta_ts":"2015-10-15 17:06:32 -0700","product":"Draft for 7th Edition","component":"New feature suggestons","version":"unspecified","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"INVALID","priority":"Normal","bug_severity":"enhancement","everconfirmed":true,"reporter":{"uid":"getify","name":"getify@gmail.com"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"cc":"brterlso","long_desc":[{"commentid":9444,"comment_count":0,"who":{"uid":"getify","name":"getify@gmail.com"},"bug_when":"2014-07-21 12:31:26 -0700","thetext":"Could generators (the function objects themselves) have a default iterator (actually on GeneratorFunctionPrototype), which just invokes the iterator itself?\n\nFor example:\n\n\n(function*(){}).__proto__[Symbol.iterator] = function(){ return this.apply(this,arguments); };\n\n\nThat would make generators a tad more consistent with other data structures (like arrays, for instance) which have a default iterator.\n\nNow, if you have a `for..of` loop that can either iterate over a generator or an array (or other structures with built-in/default iterators), you don't need to fork to manually get the iterator for the loop. This is very nice:\n\n\nfunction drainIterator(o) {\n   for (var v of o) {\n      console.log(v);\n   }\n}\n\ndrainIterator( [1,2,3] ); // 1 2 3\ndrainIterator( function*(){ yield 1; yield 2; yield 3; } ); // 1 2 3\n\n\nShort of making my own default iterator (like above), which feels \"wrong\", I have to fork logic in such a utility:\n\n\nfunction drainIterator(o) {\n   var it;\n\n   if (typeof o === \"function\") it = o();\n   else it = o[Symbol.iterator]();\n\n   for (var v of it) {\n      console.log(v);\n   }\n}\n\n\nWorks, but less attractive.\n\nHaving the default iterator on the GeneratorFunctionPrototype object, as shown, certainly wouldn't prevent you from calling the generator to make an iterator for the loop (`for (var v of foo(42)) { .. }`), it would just make the default case optional."},{"commentid":9445,"comment_count":1,"who":{"uid":"getify","name":"getify@gmail.com"},"bug_when":"2014-07-21 12:32:40 -0700","thetext":"sorry, correction:  \"which just invokes the    generator   itself\""},{"commentid":14807,"comment_count":2,"who":{"uid":"brterlso","name":"Brian Terlson"},"bug_when":"2015-10-15 17:06:32 -0700","thetext":"Proposals should use the proposal process documented here: https://github.com/tc39/ecma262/blob/master/CONTRIBUTING.md."}]}}
---
