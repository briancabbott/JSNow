---
{"_attributes":{"version":"4.4.4+","urlbase":"https://bugs.ecmascript.org/","maintainer":"dherman@mozilla.com"},"bug":{"bug_id":2536,"creation_ts":"2014-02-12 16:45:00 -0800","short_desc":"chapter 15: misc editorial","delta_ts":"2015-01-15 16:19:03 -0800","product":"Draft for 6th Edition","component":"Modules","version":"Rev 22: January 20, 2014 Draft","rep_platform":"All","op_sys":"All","bug_status":"RESOLVED","resolution":"FIXED","priority":"Normal","bug_severity":"normal","everconfirmed":true,"reporter":{"uid":"jmdyck","name":"Michael Dyck"},"assigned_to":{"uid":"allen","name":"Allen Wirfs-Brock"},"cc":["dherman","guybedford","jorendorff","samth"],"long_desc":[{"commentid":7270,"comment_count":0,"who":{"uid":"jmdyck","name":"Michael Dyck"},"bug_when":"2014-02-12 16:45:51 -0800","thetext":"----------------------------------------\nIn 15.2 \"Modules\":\n\n15.2 / Syntax / prod 3:\nModuleItemList :\n  ModuleItem\n  ModuleItemList ModuleItem\n\n    This production disagrees with 15.2.0.{3,4,5,6,9,10,11,14} / group 1,\n    which all have:\n        ModuleItemList : [empty]\n\n    It's probably easier to change the defining syntax than all the uses.\n    But if you do, you'll also need to drop the 'opt' from\n        Module : ModuleBody_opt\n    to prevent ambiguity.\n    And you'll need to remove 15.2.0.9 / group 2, which has:\n        ModuleItemList : ModuleItem\n        \n----------------------------------------\nIn 15.2.0.2 \"Static Semantics: DeclaredNames\":\n\n15.2.0.2 / group 2 / step 2:\nAppend to /names/ the elements of the VarDeclaratedNames of /ModuleBody/.\n    s|Declarated|Declared|\n\n----------------------------------------\nIn 15.2.0.11 \"Static Semantics: LexicalDeclarations\":\n\n15.2.0.11 / group 3 / step 1:\nIf the BoundNames of /ImportDeclarations/ is empty, then return an empty List.\n    Drop \"s\" from \"ImportDeclarations\".\n\n15.2.0.11 / group 4 / step 1:\nIf /ExportDeclaration/ is export /Declaration/; then ...\n    Delete the semicolon.\n\n----------------------------------------\nIn 15.2.0.13 \"Static Semantics: VarDeclaredNames\":\n\n15.2.0.13 / group 3 / step 1:\nIf /ExportDeclaration/ is export /VariableStatement/; then ...\n    Delete the semicolon.\n\n----------------------------------------\nIn 15.2.0.14 \"Static Semantics: VarScopedDeclarations\":\n\n15.2.0.14 / group 4 / step 1:\nIf /ExportDeclaration/ is export /VariableStatement/; then ...\n    Delete the semicolon.\n\n----------------------------------------\nIn 15.2.1.6 \"Runtime Semantics: Module Objects\":\n\n15.2.1.6 / para 2:\nEach property name is the StringValue of of the corresponding exported binding.\n    Delete extra \"of\".\n\n----------------------------------------\nIn 15.2.2.1 \"Static Semantics: BoundNames\":\n\n15.2.2.1 / group 2:\nExportDeclaration : export VariableStatement ;\n    Delete the semicolon.\n\n15.2.2.1 / group 3:\nExportDeclaration : export Declaration ;\n    Delete the semicolon.\n\n----------------------------------------\nIn 15.2.2.2 \"Static Semantics: ExportedBindings\":\n\n15.2.2.2 / group 3 / production / rhs 2:\n    Delete syntactic parameter \"[Default]\".\n\n15.2.2.2 / group 7 / production:\nExportDeclaration : export ExportClause FromClause_opt ;\n    Delete \"opt\" subscript.\n\n----------------------------------------\nIn 15.2.2.3 \"Static Semantics: ExportEntries\":\n\n15.2.2.3 / group 4 / production:\nExportDeclaration : export VariableStatement ;\n    Delete the semicolon.\n\n15.2.2.3 / group 5 / production:\nExportDeclaration : export Declaration ;\n    Delete the semicolon.\n\n----------------------------------------\nIn 15.2.3.1 \"Loader Records and Loader Objects\":\n\n15.2.3.1 / Table 33 / last row:\n    After \"[[LoaderObj]\", add \"]\".\n\n----------------------------------------\nIn 15.2.3.1.1 \"CreateLoaderRecord(realm, object) Abstract Operation\":\n\n15.2.3.1.1 / step 3:\nSet /loader/.[[ Modules]] to a new empty List.\n    Delete space before \"Modules\".\n\n----------------------------------------\nIn 15.2.3.2 \"Load Records and LoadRequest Objects\":\n\n15.2.3.2 / Table 34:\n    Add rows for [[Factory]] and [[GroupIndex]].\n\n----------------------------------------\nIn 15.2.3.2.1 \"CreateLoad(name) Abstract Operation\":\n\n    Steps start at 7.\n\n15.2.3.2.1 / step 11:\nSet /load/.[[Metadata]] to /metadata/ ObjectCreate(%ObjectPrototype%).\n    Delete \"metadata\".\n\n----------------------------------------\nIn 15.2.4.1 \"LoadModule(loader, name, options) Abstract Operation\":\n\n15.2.4.1 / preamble:\n    The preamble doesn't say anything about the operation.\n\n15.2.4.1 / step 1:\nAssert: /loader/ is a Loader record.\n    Capitalize \"record\".\n\n15.2.4.1 / step 9:\nReturn PromiseOfStartLoadPartwayThrough( ..., /source/, ...).\n    'source' is not defined\n\n----------------------------------------\nIn 15.2.4.2 \"RequestLoad(...) Abstract Operation\":\n\n15.2.4.2 / para 2:\nThe /loader/ argument is a Loader record.\n    Capitalize \"record\".\n\n----------------------------------------\nIn 15.2.4.2.2 \"GetOrCreateLoad(name) Functions\":\n\n15.2.4.2.2 / step 4:\nLet /modules/ be the value of of /loaderRecord/.[[ Modules]],\n    Delete extra \"of\".\n    'loaderRecord' is not defined. Change to 'loader'?\n    Delete space before \"Modules\".\n\n15.2.4.2.2 / step 5:\nRepeat for each Record {...} /p/ that is an element of /loader/.[[ Modules], do\n    Delete space before \"Modules\", and add a \"]\".\n\n15.2.4.2.2 / step 5.a.i:\nLet /existingModule/ be the [[value]] field of that Record.\n    Change \"the [[value]] field of that Record\" to \"/p/.[[value]]\"\n\n15.2.4.2.2 / step 6.a.i:\nAssert: /load/.status is either \"loading\" or \"loaded\".\n    Change \"status\" to \"[[Status]]\"\n\n15.2.4.2.2 / step 8:\nAppend /load/ to the the end of the List /loader/.[[Loads]].\n    Delete extra \"the\"\n\n----------------------------------------\nIn 15.2.4.4 \"ProceedToFetch(loader, load, p) Abstract Operation\":\n\n15.2.4.4 / step 4:\nSet /F/'s [[AddressPromise]] internal slot to /p/.\n    This is the only mention of [[AddressPromise]].\n\n----------------------------------------\nIn 15.2.4.4.1 \"CallFetch(address) Functions\":\n\n15.2.4.4.1 / step 8:\nIf IsCallable(/hook/) is false, throw a *TypeError* exception.\n    Put \"false\" in bold.\n\n----------------------------------------\nIn 15.2.4.5 \"ProceedToTranslate(loader, load, p) Abstract Operation\":\n\n15.2.4.5 / step 7:\nSet /F/'s [[Load]] to internal slot /load/.\n    s|to internal slot|internal slot to|\n\n15.2.4.5 / step 10:\nSet /F/'s [[Loader]] to internal slot /loader/.\n    s|to internal slot|internal slot to|\n\n15.2.4.5 / step 11:\nSet /F/'s [[Load]] to internal slot /load/.\n    s|to internal slot|internal slot to|\n\n----------------------------------------\nIn 15.2.4.5.1 \"CallTranslate Functions\":\n\n15.2.4.5.1 / step 6:\nIf IsCallable(/hook/) is false, throw a *TypeError* exception.\n    Put \"false\" in bold.\n\n15.2.4.5.1 / step 7:\nLet /obj/ be CreateLoadRequestObject(/load/.[[Name, ..., \", ...).\n    After \"[[Name\", add \"]]\"\n    Delete the quote+comma.\n\n----------------------------------------\nIn 15.2.4.5.3 \"InstantiateSucceeded(instantiateResult) Functions\":\n\n15.2.4.5.3 / step 5.c:\nIf /deps/ is undefined, then let /depsList/ be a new empty List.\n    Put \"undefined\" in bold.\n\n15.2.4.5.3 / step 5.d.i:\n... the result of calling the IterableToArray abstract operation ...\n    IterableToArray is not defined\n\n----------------------------------------\nIn 15.2.4.5.4 \"LoadFailed Functions\":\n\n15.2.4.5.4 / step 3:\nSet /load/.[[Status]] to `\"failed\".\n    Delete backtick\n\n----------------------------------------\nIn 15.2.4.6 \"ProcessLoadDependencies(...) Abstract Operation\":\n\n15.2.4.6 / step 2:\nSet /load/. [[Dependencies]] to a new empty List.\n    Delete space between dot and \"[[\"\n\n----------------------------------------\nIn 15.2.4.7 \"PromiseOfStartLoadPartwayThrough (...)\":\n\n    This algorithm has no preamble.\n\n15.2.4.7 / step 3:\nSet /F/'s [[StepState]] ]] internal slot to /state/.\n    Delete extra \"]]\"\n\n----------------------------------------\nIn 15.2.4.7.1 \"AsyncStartLoadPartwayThrough Functions\":\n\n15.2.4.7.1 / step 6:\nRepeat for each Record {...} /p/ that is an element of /loader/.[[ Modules], do\n    Delete space before \"Modules\", and add a \"]\".\n\n15.2.4.7.1 / step 7:\nRepeat for element of /load/ or /loader/.[[ Modules], do\n    Change \"for element of /load/ or\" to \"for each element /loads/ of\"\n\n    Delete space before \"Modules\", and add a \"]\".\n\n    Rename 'loads' to 'module' in 7 and 7.a?\n\n15.2.4.7.1 / step 8:\nLet /load/ be the result of calling the CreateLoad(/name/).\n    Delete \"the\"\n\n----------------------------------------\nIn 15.2.5.1 \"ModuleLinkage Record\":\n\n15.2.5.1 / Table 35:\n\n    Change second occurrence of \"KnownExportEntries\" to \"UnknownExportEntries\".\n\n    s|Dependenies|Dependencies|\n\n    s|ImportedEntries|ImportEntries|\n\n    s|ImportedDefinitions|ImportDefinitions|\n\n    Add entry for [[Evaluated]].\n\n----------------------------------------\nIn 15.2.5.1.1 \"CreateModuleLinkageRecord (loader, body) Abstract Operation\":\n\n15.2.5.1.1 / step 1:\nAssert: /body/ is a /Modulebody/ parse.\n    s|Modulebody|ModuleBody|\n    Delete \"parse\".\n    I.e., change \"is a Modulebody parse\" to \"is a ModuleBody\".\n\n15.2.5.1.1 / step 15:\nLet /globalEnv/ be /realm/.[[/globalEnv/]].\n    De-italicize the second \"globalEnv\".\n\n15.2.5.1.1 / step 16:\nLet /env/ be NewModuleEnvironment(/globalEnv/).\n    NewModuleEnvironment is not defined\n\n----------------------------------------\nIn 15.2.5.1.2 \"LookupExport ( M, exportName )\":\n\n    LookupExport is defined but never used.\n\n----------------------------------------\nIn 15.2.5.2.1 \"CreateLinkSet(loader, startingLoad) Abstract Operation\":\n\n15.2.5.2.1 / step 2:\nIf /loader/ does not have all of the internal properties of a Loader Instance,\nthrow a TypeError exception.\n    s|properties|slots|\n\n    Put \"TypeError\" in serif-bold\n\n----------------------------------------\nIn 15.2.5.2.2 \"AddLoadToLinkSet(linkSet, load) Abstract Operation\":\n\n15.2.5.2.2 / step 3.c.i:\nRepeat for each /r/ that is a Record {[[Name]], [[NormalisedName]]} in\n/load/.[[Dependencies]],\n    Delete \"that is a Record {[[Name]], [[NormalisedName]]}\".\n    Its presence suggests that there might be things in load.[[Dependencies]]\n    that *aren't* records with [[Name]] and [[NormalisedName]] fields,\n    that the for-each should skip over.\n\n15.2.5.2.2 / step 3.c.i.1:\nIf there is no element of /loader/.[[ Modules]] whose [[key]] field\nis equal to /name/,\n    Delete space before \"Modules\".\n\n    'name' is undefined.\n    Insert step \"Let /name/ be /r/.[[Name]]\" ?\n\n----------------------------------------\nIn 15.2.5.2.4 \"LinkSetFailed(linkSet, exc) Abstract Operation\":\n\n15.2.5.2.4 / step 4:\nReturn the result of calling [[Call]] internal method of /linkSet/.[[Reject]] ...\n    After \"calling\", insert \"the\"\n\n----------------------------------------\nIn 15.2.5.2.5 \"FinishLoad(loader, load) Abstract Operation\":\n\n15.2.5.2.5 / step 2.a:\n... that is an element of /loader/.[[ Modules]], ...\n    Delete space before \"Modules\".\n\n15.2.5.2.5 / step 2.b:\n... as the last element of /loader/.[[ Modules]].\n    Delete space before \"Modules\".\n\n----------------------------------------\nIn 15.2.5.3.1 \"LinkageGroups ( start )\":\n\n15.2.5.3.1 / step 3:\nIf there are any mixed dependency cycles in /G/, throw a new Syntax Error.\n    s|a new Syntax Error|a SyntaxError exception|\n    where 'SyntaxError' is serif-bold\n\n----------------------------------------\nIn 15.2.5.3.2 \"BuildLinkageGroups (...)\":\n\n15.2.5.3.2 / preamble:\n    Doesn't mention the 'visited' parameter.\n\n15.2.5.3.2 / step 1:\nIf /visited/ contains an element whose [[Name]] is equal to /load/.[[Name]], ...\n    After \"[[Name]]\", insert \"field\"\n\n----------------------------------------\nIn 15.2.5.4 \"Link ( start, loader )\":\n\n15.2.5.4 / preamble:\n    The preamble omits the 'loader' parameter.\n\n15.2.5.4 / step 2.a:\nIf the [[Kind]] of each element of /group/ is declarative, then perfrom ...\n    s|perfrom|perform|\n\n15.2.5.4 / step 2.b:\nElse, perfrom LinkDynamicModules(/group/, /loader/).\n    s|perfrom|perform|\n\n----------------------------------------\nIn 15.2.5.5 \"LinkDeclarativeModules ( loads, loader )\":\n\n15.2.5.5 / step 2.a:\nIf /load/.[[Status]] is not *linked*, then\n    Change 'linked' from serif-bold to quoted and monospace.\n\n15.2.5.5 / step 3.c.iii.1:\nIf /load/.[[Status]] is *linked*, then\n    Change 'linked' from serif-bold to quoted and monospace.\n\n15.2.5.5 / step 3.c.iv.1:\nLet /module/ be LoaderRegistryLookup(/loader/, /normalizedName/).\n    LoaderRegistryLookup is not defined.\n\n15.2.5.5 / step 3.c.iv.2.a:\nLet /error/ be a new *ReferenceError* exception.\n    s|exception|object|\n    (You shouldn't call it an exception until/unless it's thrown.)\n\n15.2.5.5 / step 4.a:\nPerform ResolveExportEntries(/pair/.[[Module]], a new empty List.\n    Insert right-paren before final period.\n\n15.2.5.5 / step 7.b:\nSet /pair/.[[Load]].[[Status]] to *linked*.\n    Change 'linked' from serif-bold to quoted and monospace.\n\n15.2.5.5 / step 7.c:\nLet /r/ beFinishLoad(/loader/, /pair/.[[Load]]).\n    Insert space between \"be\" and \"FinishLoad\"\n\n----------------------------------------\nIn 15.2.5.5.1 \"LinkImports ( M )\":\n\n15.2.5.5.1 / step 3.a:\nIf /def/.[[ImportName]] is *module*, then the following steps are taken:\n    Where would [[ImportName]] be set to *module*?\n\n15.2.5.5.1 / step 3.a.ii:\nCall the InitializeImmutableBinding concrete method of /envRec/ passing ...\n    InitializeImmutableBinding is not defined\n\n15.2.5.5.1 / step 3.b.ii.1:\nLet /error/ be a new Reference Error.\n    Change \"a new Reference Error\" to \"a new ReferenceError object\"\n    (where \"ReferenceError\" is bold)\n\n15.2.5.5.1 / step 3.b.iii:\nOtherwise, call the CreateImportBinding concrete method of /envRec/ ...\n    CreateImportBinding is not defined.\n\n----------------------------------------\nIn 15.2.5.6 \"LinkDynamicModules ( loads, loader )\":\n\n15.2.5.6 / step 1.f:\nSet /load/.[[Status]] to *linked*.\n    Change 'linked' from serif-bold to quoted and monospace.\n\n----------------------------------------\nIn 15.2.5.7 \"ResolveExportEntries ( M, visited )\":\n\n15.2.5.7 / step 4.c.i:\nLet /error/ be a new Reference Error.\n    Change \"a new Reference Error\" to \"a new ReferenceError object\"\n    (where \"ReferenceError\" is bold)\n\n15.2.5.7 / step 5.b.i:\nLet /error/ be a new Syntax Error.\n    Change \"a new Syntax Error\" to \"a new SyntaxError object\"\n    (where \"SyntaxError\" is bold)\n\n----------------------------------------\nIn 15.2.5.9 \"ResolveExport ( M, exportName, visited )\":\n\n15.2.5.9 / preamble:\n... with arguments M, exportName, and importName performs the following steps:\n    s|importName|visited|\n\n15.2.5.9 / step 3:\nLet /ref/ be {[[Module]]: /M/, [[ExportName]]: /exportName/}.\n    Insert \"the Record\" before \"{\".\n\n15.2.5.9 / step 4.a:\nLet /error/ be a new Syntax Error.\n    Change \"a new Syntax Error\" to \"a new SyntaxError object\"\n    (where \"SyntaxError\" is bold)\n\n15.2.5.9 / step 7.a:\nLet /error/ be a new Reference Error.\n    Change \"a new Reference Error\" to \"a new ReferenceError object\"\n    (where \"ReferenceError\" is bold)\n\n15.2.5.9 / step 8:\nIf /overlappingDefs/ has more than one record /def/ such that /def/.[[Explicit]]\nis *true*, or if it has length greater than 1 but contains no records /def/ such\nthat /def/.[[Explicit]] is *true*, then the following steps are taken:\n    \n    An equivalent but simpler condition would be:\n        ... /overlappingDefs/ has length greater than 1 and it does not\n        have exactly one record def such that def.[[Explicit]] is *true* ...\n\n15.2.5.9 / step 8.a:\nLet /error/ be a new Syntax Error.\n    Change \"a new Syntax Error\" to \"a new SyntaxError object\"\n    (where \"SyntaxError\" is bold)\n\n----------------------------------------\nIn 15.2.6.2 \"EnsureEvaluated(mod, seen, loader) Abstract Operation\":\n\n15.2.6.2 / step 7:\nLet status be the result of perform ModuleDeclarationInstantiation ...\n    s|perform|performing|\n\nXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"},{"commentid":7467,"comment_count":1,"who":{"uid":"guybedford","name":"Guy Bedford"},"bug_when":"2014-03-23 14:05:21 -0700","thetext":"*** Bug 2584 has been marked as a duplicate of this bug. ***"},{"commentid":7469,"comment_count":2,"who":{"uid":"guybedford","name":"Guy Bedford"},"bug_when":"2014-03-23 14:06:10 -0700","thetext":"*** Bug 2591 has been marked as a duplicate of this bug. ***"},{"commentid":11279,"comment_count":3,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2014-12-30 17:31:37 -0800","thetext":"Fixed in rev31 editor's draft\n\nor at least tried to verify that typos in sections that are no longer present haven't leaked forward."},{"commentid":11434,"comment_count":4,"who":{"uid":"allen","name":"Allen Wirfs-Brock"},"bug_when":"2015-01-15 16:19:03 -0800","thetext":"In Rev31"}]}}
---
