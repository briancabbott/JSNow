<!DOCTYPE HTML>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Tests sharing memory between a Window and its Worker</title>
</head>

<body>
<p> This test case tests that sharing memory by postMessage between a
Window and its Worker works in both directions.</p>

<p> The test runs when you load the page.  It usually takes little
time and the output appears below.  There should be no error messages
and finally a line that says SUCCESS (there may be even more output
after that).  Also check the browser console for errors, there should
be none.</p>

<script src="harness.js"></script>

<script>
var w = new Worker("sharing_window_and_worker.js");
w.onmessage = function(ev) {
    let d = ev.data;
    if (typeof d == "string") {
        msg(d);
	return;
    }
    w.postMessage(d);
}
w.postMessage("START");
</script>
</body>
</html>
